[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Comment",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","comment",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CommentTestTrait",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unicode",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Url",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldConfig",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","field",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FieldStorageConfig",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","field_ui",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Tests",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldUiTestTrait",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","user",12],["T_NS_SEPARATOR","\\",12],["T_STRING","RoleInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","file",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Entity",13],["T_NS_SEPARATOR","\\",13],["T_STRING","File",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","user",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Entity",14],["T_NS_SEPARATOR","\\",14],["T_STRING","User",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","user",15],["T_NS_SEPARATOR","\\",15],["T_STRING","UserInterface",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Tests the file field widget, single and multi-valued, with and without AJAX,\n * with public and private files.\n *\n * @group file\n *\/",17],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","FileFieldWidgetTest",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","FileFieldTestBase",23],["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\n  ",23],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","CommentTestTrait",25],";",["T_WHITESPACE","\n  ",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","FieldUiTestTrait",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",28],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","setUp",31],"(",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_STRING","parent",32],["T_DOUBLE_COLON","::",32],["T_STRING","setUp",32],"(",")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","drupalPlaceBlock",33],"(",["T_CONSTANT_ENCAPSED_STRING","'system_breadcrumb_block'",33],")",";",["T_WHITESPACE","\n  ",33],"}",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_STATIC","static",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$modules",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'block'",41],")",";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Creates a temporary file, for a specific user.\n   *\n   * @param string $data\n   *   A string containing the contents of the file.\n   * @param \\Drupal\\user\\UserInterface $user\n   *   The user of the file owner.\n   *\n   * @return \\Drupal\\file\\FileInterface\n   *   A file object, or FALSE on error.\n   *\/",43],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","createTemporaryFile",54],"(",["T_VARIABLE","$data",54],",",["T_WHITESPACE"," ",54],["T_STRING","UserInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$user",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","NULL",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$file",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","file_save_data",55],"(",["T_VARIABLE","$data",55],",",["T_WHITESPACE"," ",55],["T_STRING","NULL",55],",",["T_WHITESPACE"," ",55],["T_STRING","NULL",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$file",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n      ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$user",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$file",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","setOwner",59],"(",["T_VARIABLE","$user",59],")",";",["T_WHITESPACE","\n      ",59],"}",["T_WHITESPACE","\n      ",60],["T_ELSE","else",61],["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$file",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","setOwner",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","adminUser",62],")",";",["T_WHITESPACE","\n      ",62],"}",["T_WHITESPACE","\n      ",63],["T_COMMENT","\/\/ Change the file status to be temporary.\n",64],["T_WHITESPACE","      ",65],["T_VARIABLE","$file",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setTemporary",65],"(",")",";",["T_WHITESPACE","\n      ",65],["T_COMMENT","\/\/ Save the changes.\n",66],["T_WHITESPACE","      ",67],["T_VARIABLE","$file",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","save",67],"(",")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$file",70],";",["T_WHITESPACE","\n  ",70],"}",["T_WHITESPACE","\n\n  ",71],["T_DOC_COMMENT","\/**\n   * Tests upload and remove buttons for a single-valued File field.\n   *\/",73],["T_WHITESPACE","\n  ",75],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","testSingleValuedWidget",76],"(",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$node_storage",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","container",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","get",77],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",77],")",["T_OBJECT_OPERATOR","->",77],["T_STRING","getStorage",77],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$type_name",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'article'",78],";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$field_name",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","strtolower",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","randomMachineName",79],"(",")",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","createFileField",80],"(",["T_VARIABLE","$field_name",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'node'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$type_name",80],")",";",["T_WHITESPACE","\n\n    ",80],["T_VARIABLE","$test_file",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getTestFile",82],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",82],")",";",["T_WHITESPACE","\n\n    ",82],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_ARRAY","array",84],"(",["T_CONSTANT_ENCAPSED_STRING","'nojs'",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'js'",84],")",["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$type",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n      ",84],["T_COMMENT","\/\/ Create a new node with the uploaded file and ensure it got uploaded\n",85],["T_WHITESPACE","      ",86],["T_COMMENT","\/\/ successfully.\n",86],["T_WHITESPACE","      ",87],["T_COMMENT","\/\/ @todo This only tests a 'nojs' submission, because drupalPostAjaxForm()\n",87],["T_WHITESPACE","      ",88],["T_COMMENT","\/\/   does not yet support file uploads.\n",88],["T_WHITESPACE","      ",89],["T_VARIABLE","$nid",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","uploadNodeFile",89],"(",["T_VARIABLE","$test_file",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$field_name",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$type_name",89],")",";",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$node_storage",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","resetCache",90],"(",["T_ARRAY","array",90],"(",["T_VARIABLE","$nid",90],")",")",";",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$node",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$node_storage",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","load",91],"(",["T_VARIABLE","$nid",91],")",";",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$node_file",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","File",92],["T_DOUBLE_COLON","::",92],["T_STRING","load",92],"(",["T_VARIABLE","$node",92],["T_OBJECT_OPERATOR","->",92],"{",["T_VARIABLE","$field_name",92],"}",["T_OBJECT_OPERATOR","->",92],["T_STRING","target_id",92],")",";",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertFileExists",93],"(",["T_VARIABLE","$node_file",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'New file saved to disk on node creation.'",93],")",";",["T_WHITESPACE","\n\n      ",93],["T_COMMENT","\/\/ Ensure the file can be downloaded.\n",95],["T_WHITESPACE","      ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","drupalGet",96],"(",["T_STRING","file_create_url",96],"(",["T_VARIABLE","$node_file",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getFileUri",96],"(",")",")",")",";",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertResponse",97],"(",["T_LNUMBER","200",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'Confirmed that the generated URL is correct by downloading the shipped file.'",97],")",";",["T_WHITESPACE","\n\n      ",97],["T_COMMENT","\/\/ Ensure the edit page has a remove button instead of an upload button.\n",99],["T_WHITESPACE","      ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","drupalGet",100],"(","\"",["T_ENCAPSED_AND_WHITESPACE","node\/",100],["T_VARIABLE","$nid",100],["T_ENCAPSED_AND_WHITESPACE","\/edit",100],"\"",")",";",["T_WHITESPACE","\n      ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertNoFieldByXPath",101],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\"]'",101],",",["T_WHITESPACE"," ",101],["T_STRING","t",101],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",101],")",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Node with file does not display the \"Upload\" button.'",101],")",";",["T_WHITESPACE","\n      ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertFieldByXpath",102],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\"]'",102],",",["T_WHITESPACE"," ",102],["T_STRING","t",102],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",102],")",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'Node with file displays the \"Remove\" button.'",102],")",";",["T_WHITESPACE","\n\n      ",102],["T_COMMENT","\/\/ \"Click\" the remove button (emulating either a nojs or js submission).\n",104],["T_WHITESPACE","      ",105],["T_SWITCH","switch",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$type",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n        ",105],["T_CASE","case",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'nojs'",106],":",["T_WHITESPACE","\n          ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","drupalPostForm",107],"(",["T_STRING","NULL",107],",",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",",",["T_WHITESPACE"," ",107],["T_STRING","t",107],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",107],")",")",";",["T_WHITESPACE","\n          ",107],["T_BREAK","break",108],";",["T_WHITESPACE","\n        ",108],["T_CASE","case",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'js'",109],":",["T_WHITESPACE","\n          ",109],["T_VARIABLE","$button",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","xpath",110],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\" and @value=\"'",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_STRING","t",110],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",110],")",["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'\"]'",110],")",";",["T_WHITESPACE","\n          ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","drupalPostAjaxForm",111],"(",["T_STRING","NULL",111],",",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",")",",",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_STRING_CAST","(string)",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$button",111],"[",["T_LNUMBER","0",111],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",111],"]",["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_STRING_CAST","(string)",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$button",111],"[",["T_LNUMBER","0",111],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",111],"]",")",")",";",["T_WHITESPACE","\n          ",111],["T_BREAK","break",112],";",["T_WHITESPACE","\n      ",112],"}",["T_WHITESPACE","\n\n      ",113],["T_COMMENT","\/\/ Ensure the page now has an upload button instead of a remove button.\n",115],["T_WHITESPACE","      ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertNoFieldByXPath",116],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\"]'",116],",",["T_WHITESPACE"," ",116],["T_STRING","t",116],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",116],")",",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'After clicking the \"Remove\" button, it is no longer displayed.'",116],")",";",["T_WHITESPACE","\n      ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertFieldByXpath",117],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\"]'",117],",",["T_WHITESPACE"," ",117],["T_STRING","t",117],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",117],")",",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'After clicking the \"Remove\" button, the \"Upload\" button is displayed.'",117],")",";",["T_WHITESPACE","\n      ",117],["T_COMMENT","\/\/ Test label has correct 'for' attribute.\n",118],["T_WHITESPACE","      ",119],["T_VARIABLE","$input",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","xpath",119],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@name=\"files['",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$field_name",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'_0]\"]'",119],")",";",["T_WHITESPACE","\n      ",119],["T_VARIABLE","$label",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","xpath",120],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/label[@for=\"'",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_STRING_CAST","(string)",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$input",120],"[",["T_LNUMBER","0",120],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",120],"]",["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'\"]'",120],")",";",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertTrue",121],"(",["T_ISSET","isset",121],"(",["T_VARIABLE","$label",121],"[",["T_LNUMBER","0",121],"]",")",",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'Label for upload found.'",121],")",";",["T_WHITESPACE","\n\n      ",121],["T_COMMENT","\/\/ Save the node and ensure it does not have the file.\n",123],["T_WHITESPACE","      ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","drupalPostForm",124],"(",["T_STRING","NULL",124],",",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",",",["T_WHITESPACE"," ",124],["T_STRING","t",124],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and keep published'",124],")",")",";",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$node_storage",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","resetCache",125],"(",["T_ARRAY","array",125],"(",["T_VARIABLE","$nid",125],")",")",";",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$node",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$node_storage",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","load",126],"(",["T_VARIABLE","$nid",126],")",";",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertTrue",127],"(",["T_EMPTY","empty",127],"(",["T_VARIABLE","$node",127],["T_OBJECT_OPERATOR","->",127],"{",["T_VARIABLE","$field_name",127],"}",["T_OBJECT_OPERATOR","->",127],["T_STRING","target_id",127],")",",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'File was successfully removed from the node.'",127],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n  ",128],"}",["T_WHITESPACE","\n\n  ",129],["T_DOC_COMMENT","\/**\n   * Tests upload and remove buttons for multiple multi-valued File fields.\n   *\/",131],["T_WHITESPACE","\n  ",133],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","testMultiValuedWidget",134],"(",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$node_storage",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","container",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",135],")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getStorage",135],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$type_name",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'article'",136],";",["T_WHITESPACE","\n    ",136],["T_COMMENT","\/\/ Use explicit names instead of random names for those fields, because of a\n",137],["T_WHITESPACE","    ",138],["T_COMMENT","\/\/ bug in drupalPostForm() with multiple file uploads in one form, where the\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ order of uploads depends on the order in which the upload elements are\n",139],["T_WHITESPACE","    ",140],["T_COMMENT","\/\/ added to the $form (which, in the current implementation of\n",140],["T_WHITESPACE","    ",141],["T_COMMENT","\/\/ FileStorage::listAll(), comes down to the alphabetical order on field\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ names).\n",142],["T_WHITESPACE","    ",143],["T_VARIABLE","$field_name",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'test_file_field_1'",143],";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$field_name2",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'test_file_field_2'",144],";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$cardinality",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_LNUMBER","3",145],";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","createFileField",146],"(",["T_VARIABLE","$field_name",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'node'",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$type_name",146],",",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'cardinality'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$cardinality",146],")",")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","createFileField",147],"(",["T_VARIABLE","$field_name2",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'node'",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$type_name",147],",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_CONSTANT_ENCAPSED_STRING","'cardinality'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$cardinality",147],")",")",";",["T_WHITESPACE","\n\n    ",147],["T_VARIABLE","$test_file",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getTestFile",149],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",149],")",";",["T_WHITESPACE","\n\n    ",149],["T_FOREACH","foreach",151],["T_WHITESPACE"," ",151],"(",["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'nojs'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'js'",151],")",["T_WHITESPACE"," ",151],["T_AS","as",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$type",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n      ",151],["T_COMMENT","\/\/ Visit the node creation form, and upload 3 files for each field. Since\n",152],["T_WHITESPACE","      ",153],["T_COMMENT","\/\/ the field has cardinality of 3, ensure the \"Upload\" button is displayed\n",153],["T_WHITESPACE","      ",154],["T_COMMENT","\/\/ until after the 3rd file, and after that, isn't displayed. Because\n",154],["T_WHITESPACE","      ",155],["T_COMMENT","\/\/ SimpleTest triggers the last button with a given name, so upload to the\n",155],["T_WHITESPACE","      ",156],["T_COMMENT","\/\/ second field first.\n",156],["T_WHITESPACE","      ",157],["T_COMMENT","\/\/ @todo This is only testing a non-Ajax upload, because drupalPostAjaxForm()\n",157],["T_WHITESPACE","      ",158],["T_COMMENT","\/\/   does not yet emulate jQuery's file upload.\n",158],["T_WHITESPACE","      ",159],["T_COMMENT","\/\/\n",159],["T_WHITESPACE","      ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","drupalGet",160],"(","\"",["T_ENCAPSED_AND_WHITESPACE","node\/add\/",160],["T_VARIABLE","$type_name",160],"\"",")",";",["T_WHITESPACE","\n      ",160],["T_FOREACH","foreach",161],["T_WHITESPACE"," ",161],"(",["T_ARRAY","array",161],"(",["T_VARIABLE","$field_name2",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$field_name",161],")",["T_WHITESPACE"," ",161],["T_AS","as",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$each_field_name",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n        ",161],["T_FOR","for",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$delta",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_LNUMBER","0",162],";",["T_WHITESPACE"," ",162],["T_VARIABLE","$delta",162],["T_WHITESPACE"," ",162],"<",["T_WHITESPACE"," ",162],["T_LNUMBER","3",162],";",["T_WHITESPACE"," ",162],["T_VARIABLE","$delta",162],["T_INC","++",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n          ",162],["T_VARIABLE","$edit",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'files['",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$each_field_name",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'_'",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$delta",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'][]'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_STRING","drupal_realpath",163],"(",["T_VARIABLE","$test_file",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getFileUri",163],"(",")",")",")",";",["T_WHITESPACE","\n          ",163],["T_COMMENT","\/\/ If the Upload button doesn't exist, drupalPostForm() will automatically\n",164],["T_WHITESPACE","          ",165],["T_COMMENT","\/\/ fail with an assertion message.\n",165],["T_WHITESPACE","          ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","drupalPostForm",166],"(",["T_STRING","NULL",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$edit",166],",",["T_WHITESPACE"," ",166],["T_STRING","t",166],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",166],")",")",";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n      ",167],"}",["T_WHITESPACE","\n      ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertNoFieldByXpath",169],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\"]'",169],",",["T_WHITESPACE"," ",169],["T_STRING","t",169],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",169],")",",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'After uploading 3 files for each field, the \"Upload\" button is no longer displayed.'",169],")",";",["T_WHITESPACE","\n\n      ",169],["T_VARIABLE","$num_expected_remove_buttons",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_LNUMBER","6",171],";",["T_WHITESPACE","\n\n      ",171],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_ARRAY","array",173],"(",["T_VARIABLE","$field_name",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$field_name2",173],")",["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$current_field_name",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n        ",173],["T_COMMENT","\/\/ How many uploaded files for the current field are remaining.\n",174],["T_WHITESPACE","        ",175],["T_VARIABLE","$remaining",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_LNUMBER","3",175],";",["T_WHITESPACE","\n        ",175],["T_COMMENT","\/\/ Test clicking each \"Remove\" button. For extra robustness, test them out\n",176],["T_WHITESPACE","        ",177],["T_COMMENT","\/\/ of sequential order. They are 0-indexed, and get renumbered after each\n",177],["T_WHITESPACE","        ",178],["T_COMMENT","\/\/ iteration, so array(1, 1, 0) means:\n",178],["T_WHITESPACE","        ",179],["T_COMMENT","\/\/ - First remove the 2nd file.\n",179],["T_WHITESPACE","        ",180],["T_COMMENT","\/\/ - Then remove what is then the 2nd file (was originally the 3rd file).\n",180],["T_WHITESPACE","        ",181],["T_COMMENT","\/\/ - Then remove the first file.\n",181],["T_WHITESPACE","        ",182],["T_FOREACH","foreach",182],["T_WHITESPACE"," ",182],"(",["T_ARRAY","array",182],"(",["T_LNUMBER","1",182],",",["T_WHITESPACE"," ",182],["T_LNUMBER","1",182],",",["T_WHITESPACE"," ",182],["T_LNUMBER","0",182],")",["T_WHITESPACE"," ",182],["T_AS","as",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$delta",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n          ",182],["T_COMMENT","\/\/ Ensure we have the expected number of Remove buttons, and that they\n",183],["T_WHITESPACE","          ",184],["T_COMMENT","\/\/ are numbered sequentially.\n",184],["T_WHITESPACE","          ",185],["T_VARIABLE","$buttons",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","xpath",185],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\" and @value=\"Remove\"]'",185],")",";",["T_WHITESPACE","\n          ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertTrue",186],"(",["T_STRING","is_array",186],"(",["T_VARIABLE","$buttons",186],")",["T_WHITESPACE"," ",186],["T_BOOLEAN_AND","&&",186],["T_WHITESPACE"," ",186],["T_STRING","count",186],"(",["T_VARIABLE","$buttons",186],")",["T_WHITESPACE"," ",186],["T_IS_IDENTICAL","===",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$num_expected_remove_buttons",186],",",["T_WHITESPACE"," ",186],["T_STRING","format_string",186],"(",["T_CONSTANT_ENCAPSED_STRING","'There are %n \"Remove\" buttons displayed (JSMode=%type).'",186],",",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_CONSTANT_ENCAPSED_STRING","'%n'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$num_expected_remove_buttons",186],",",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'%type'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$type",186],")",")",")",";",["T_WHITESPACE","\n          ",186],["T_FOREACH","foreach",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$buttons",187],["T_WHITESPACE"," ",187],["T_AS","as",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$i",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$button",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$key",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$i",188],["T_WHITESPACE"," ",188],["T_IS_GREATER_OR_EQUAL",">=",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$remaining",188],["T_WHITESPACE"," ",188],"?",["T_WHITESPACE"," ",188],["T_VARIABLE","$i",188],["T_WHITESPACE"," ",188],"-",["T_WHITESPACE"," ",188],["T_VARIABLE","$remaining",188],["T_WHITESPACE"," ",188],":",["T_WHITESPACE"," ",188],["T_VARIABLE","$i",188],";",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$check_field_name",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$field_name2",189],";",["T_WHITESPACE","\n            ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$current_field_name",190],["T_WHITESPACE"," ",190],["T_IS_EQUAL","==",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$field_name",190],["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$i",190],["T_WHITESPACE"," ",190],"<",["T_WHITESPACE"," ",190],["T_VARIABLE","$remaining",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n              ",190],["T_VARIABLE","$check_field_name",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$field_name",191],";",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE","\n\n            ",192],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertIdentical",194],"(",["T_STRING_CAST","(string)",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$button",194],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",194],"]",",",["T_WHITESPACE"," ",194],["T_VARIABLE","$check_field_name",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'_'",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_VARIABLE","$key",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'_remove_button'",194],")",";",["T_WHITESPACE","\n          ",194],"}",["T_WHITESPACE","\n\n          ",195],["T_COMMENT","\/\/ \"Click\" the remove button (emulating either a nojs or js submission).\n",197],["T_WHITESPACE","          ",198],["T_VARIABLE","$button_name",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$current_field_name",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'_'",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_VARIABLE","$delta",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'_remove_button'",198],";",["T_WHITESPACE","\n          ",198],["T_SWITCH","switch",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$type",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_CASE","case",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'nojs'",200],":",["T_WHITESPACE","\n              ",200],["T_COMMENT","\/\/ drupalPostForm() takes a $submit parameter that is the value of the\n",201],["T_WHITESPACE","              ",202],["T_COMMENT","\/\/ button whose click we want to emulate. Since we have multiple\n",202],["T_WHITESPACE","              ",203],["T_COMMENT","\/\/ buttons with the value \"Remove\", and want to control which one we\n",203],["T_WHITESPACE","              ",204],["T_COMMENT","\/\/ use, we change the value of the other ones to something else.\n",204],["T_WHITESPACE","              ",205],["T_COMMENT","\/\/ Since non-clicked buttons aren't included in the submitted POST\n",205],["T_WHITESPACE","              ",206],["T_COMMENT","\/\/ data, and since drupalPostForm() will result in $this being updated\n",206],["T_WHITESPACE","              ",207],["T_COMMENT","\/\/ with a newly rebuilt form, this doesn't cause problems.\n",207],["T_WHITESPACE","              ",208],["T_FOREACH","foreach",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$buttons",208],["T_WHITESPACE"," ",208],["T_AS","as",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$button",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$button",209],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",209],"]",["T_WHITESPACE"," ",209],["T_IS_NOT_EQUAL","!=",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$button_name",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                  ",209],["T_VARIABLE","$button",210],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",210],"]",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'DUMMY'",210],";",["T_WHITESPACE","\n                ",210],"}",["T_WHITESPACE","\n              ",211],"}",["T_WHITESPACE","\n              ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","drupalPostForm",213],"(",["T_STRING","NULL",213],",",["T_WHITESPACE"," ",213],["T_ARRAY","array",213],"(",")",",",["T_WHITESPACE"," ",213],["T_STRING","t",213],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",213],")",")",";",["T_WHITESPACE","\n              ",213],["T_BREAK","break",214],";",["T_WHITESPACE","\n            ",214],["T_CASE","case",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'js'",215],":",["T_WHITESPACE","\n              ",215],["T_COMMENT","\/\/ drupalPostAjaxForm() lets us target the button precisely, so we don't\n",216],["T_WHITESPACE","              ",217],["T_COMMENT","\/\/ require the workaround used above for nojs.\n",217],["T_WHITESPACE","              ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","drupalPostAjaxForm",218],"(",["T_STRING","NULL",218],",",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",")",",",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",["T_VARIABLE","$button_name",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_STRING","t",218],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",218],")",")",")",";",["T_WHITESPACE","\n              ",218],["T_BREAK","break",219],";",["T_WHITESPACE","\n          ",219],"}",["T_WHITESPACE","\n          ",220],["T_VARIABLE","$num_expected_remove_buttons",221],["T_DEC","--",221],";",["T_WHITESPACE","\n          ",221],["T_VARIABLE","$remaining",222],["T_DEC","--",222],";",["T_WHITESPACE","\n\n          ",222],["T_COMMENT","\/\/ Ensure an \"Upload\" button for the current field is displayed with the\n",224],["T_WHITESPACE","          ",225],["T_COMMENT","\/\/ correct name.\n",225],["T_WHITESPACE","          ",226],["T_VARIABLE","$upload_button_name",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$current_field_name",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'_'",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_VARIABLE","$remaining",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'_upload_button'",226],";",["T_WHITESPACE","\n          ",226],["T_VARIABLE","$buttons",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","xpath",227],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\" and @value=\"Upload\" and @name=:name]'",227],",",["T_WHITESPACE"," ",227],["T_ARRAY","array",227],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$upload_button_name",227],")",")",";",["T_WHITESPACE","\n          ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","assertTrue",228],"(",["T_STRING","is_array",228],"(",["T_VARIABLE","$buttons",228],")",["T_WHITESPACE"," ",228],["T_BOOLEAN_AND","&&",228],["T_WHITESPACE"," ",228],["T_STRING","count",228],"(",["T_VARIABLE","$buttons",228],")",["T_WHITESPACE"," ",228],["T_IS_EQUAL","==",228],["T_WHITESPACE"," ",228],["T_LNUMBER","1",228],",",["T_WHITESPACE"," ",228],["T_STRING","format_string",228],"(",["T_CONSTANT_ENCAPSED_STRING","'The upload button is displayed with the correct name (JSMode=%type).'",228],",",["T_WHITESPACE"," ",228],["T_ARRAY","array",228],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$type",228],")",")",")",";",["T_WHITESPACE","\n\n          ",228],["T_COMMENT","\/\/ Ensure only at most one button per field is displayed.\n",230],["T_WHITESPACE","          ",231],["T_VARIABLE","$buttons",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","xpath",231],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\" and @value=\"Upload\"]'",231],")",";",["T_WHITESPACE","\n          ",231],["T_VARIABLE","$expected",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$current_field_name",232],["T_WHITESPACE"," ",232],["T_IS_EQUAL","==",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$field_name",232],["T_WHITESPACE"," ",232],"?",["T_WHITESPACE"," ",232],["T_LNUMBER","1",232],["T_WHITESPACE"," ",232],":",["T_WHITESPACE"," ",232],["T_LNUMBER","2",232],";",["T_WHITESPACE","\n          ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","assertTrue",233],"(",["T_STRING","is_array",233],"(",["T_VARIABLE","$buttons",233],")",["T_WHITESPACE"," ",233],["T_BOOLEAN_AND","&&",233],["T_WHITESPACE"," ",233],["T_STRING","count",233],"(",["T_VARIABLE","$buttons",233],")",["T_WHITESPACE"," ",233],["T_IS_EQUAL","==",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$expected",233],",",["T_WHITESPACE"," ",233],["T_STRING","format_string",233],"(",["T_CONSTANT_ENCAPSED_STRING","'After removing a file, only one \"Upload\" button for each possible field is displayed (JSMode=%type).'",233],",",["T_WHITESPACE"," ",233],["T_ARRAY","array",233],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$type",233],")",")",")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n      ",234],"}",["T_WHITESPACE","\n\n      ",235],["T_COMMENT","\/\/ Ensure the page now has no Remove buttons.\n",237],["T_WHITESPACE","      ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","assertNoFieldByXPath",238],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\"]'",238],",",["T_WHITESPACE"," ",238],["T_STRING","t",238],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",238],")",",",["T_WHITESPACE"," ",238],["T_STRING","format_string",238],"(",["T_CONSTANT_ENCAPSED_STRING","'After removing all files, there is no \"Remove\" button displayed (JSMode=%type).'",238],",",["T_WHITESPACE"," ",238],["T_ARRAY","array",238],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$type",238],")",")",")",";",["T_WHITESPACE","\n\n      ",238],["T_COMMENT","\/\/ Save the node and ensure it does not have any files.\n",240],["T_WHITESPACE","      ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","drupalPostForm",241],"(",["T_STRING","NULL",241],",",["T_WHITESPACE"," ",241],["T_ARRAY","array",241],"(",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","randomMachineName",241],"(",")",")",",",["T_WHITESPACE"," ",241],["T_STRING","t",241],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and publish'",241],")",")",";",["T_WHITESPACE","\n      ",241],["T_VARIABLE","$matches",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_ARRAY","array",242],"(",")",";",["T_WHITESPACE","\n      ",242],["T_STRING","preg_match",243],"(",["T_CONSTANT_ENCAPSED_STRING","'\/node\\\/([0-9]+)\/'",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getUrl",243],"(",")",",",["T_WHITESPACE"," ",243],["T_VARIABLE","$matches",243],")",";",["T_WHITESPACE","\n      ",243],["T_VARIABLE","$nid",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$matches",244],"[",["T_LNUMBER","1",244],"]",";",["T_WHITESPACE","\n      ",244],["T_VARIABLE","$node_storage",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","resetCache",245],"(",["T_ARRAY","array",245],"(",["T_VARIABLE","$nid",245],")",")",";",["T_WHITESPACE","\n      ",245],["T_VARIABLE","$node",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$node_storage",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","load",246],"(",["T_VARIABLE","$nid",246],")",";",["T_WHITESPACE","\n      ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","assertTrue",247],"(",["T_EMPTY","empty",247],"(",["T_VARIABLE","$node",247],["T_OBJECT_OPERATOR","->",247],"{",["T_VARIABLE","$field_name",247],"}",["T_OBJECT_OPERATOR","->",247],["T_STRING","target_id",247],")",",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'Node was successfully saved without any files.'",247],")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_VARIABLE","$upload_files_node_creation",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_ARRAY","array",250],"(",["T_VARIABLE","$test_file",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$test_file",250],")",";",["T_WHITESPACE","\n    ",250],["T_COMMENT","\/\/ Try to upload multiple files, but fewer than the maximum.\n",251],["T_WHITESPACE","    ",252],["T_VARIABLE","$nid",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","uploadNodeFiles",252],"(",["T_VARIABLE","$upload_files_node_creation",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$field_name",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$type_name",252],")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$node_storage",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","resetCache",253],"(",["T_ARRAY","array",253],"(",["T_VARIABLE","$nid",253],")",")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$node",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$node_storage",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","load",254],"(",["T_VARIABLE","$nid",254],")",";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertEqual",255],"(",["T_STRING","count",255],"(",["T_VARIABLE","$node",255],["T_OBJECT_OPERATOR","->",255],"{",["T_VARIABLE","$field_name",255],"}",")",",",["T_WHITESPACE"," ",255],["T_STRING","count",255],"(",["T_VARIABLE","$upload_files_node_creation",255],")",",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'Node was successfully saved with mulitple files.'",255],")",";",["T_WHITESPACE","\n\n    ",255],["T_COMMENT","\/\/ Try to upload more files than allowed on revision.\n",257],["T_WHITESPACE","    ",258],["T_VARIABLE","$upload_files_node_revision",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",["T_VARIABLE","$test_file",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$test_file",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$test_file",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$test_file",258],")",";",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","uploadNodeFiles",259],"(",["T_VARIABLE","$upload_files_node_revision",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$field_name",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$nid",259],",",["T_WHITESPACE"," ",259],["T_LNUMBER","1",259],")",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$args",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],"[",["T_WHITESPACE","\n      ",260],["T_CONSTANT_ENCAPSED_STRING","'%field'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$field_name",261],",",["T_WHITESPACE","\n      ",261],["T_CONSTANT_ENCAPSED_STRING","'@max'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$cardinality",262],",",["T_WHITESPACE","\n      ",262],["T_CONSTANT_ENCAPSED_STRING","'@count'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_STRING","count",263],"(",["T_VARIABLE","$upload_files_node_creation",263],")",["T_WHITESPACE"," ",263],"+",["T_WHITESPACE"," ",263],["T_STRING","count",263],"(",["T_VARIABLE","$upload_files_node_revision",263],")",",",["T_WHITESPACE","\n      ",263],["T_CONSTANT_ENCAPSED_STRING","'%list'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_STRING","implode",264],"(",["T_CONSTANT_ENCAPSED_STRING","', '",264],",",["T_WHITESPACE"," ",264],["T_STRING","array_fill",264],"(",["T_LNUMBER","0",264],",",["T_WHITESPACE"," ",264],["T_LNUMBER","3",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$test_file",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getFilename",264],"(",")",")",")",",",["T_WHITESPACE","\n    ",264],"]",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","assertRaw",266],"(",["T_STRING","t",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Field %field can only hold @max values but there were @count uploaded. The following files have been omitted as a result: %list.'",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$args",266],")",")",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$node_storage",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","resetCache",267],"(",["T_ARRAY","array",267],"(",["T_VARIABLE","$nid",267],")",")",";",["T_WHITESPACE","\n    ",267],["T_VARIABLE","$node",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$node_storage",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","load",268],"(",["T_VARIABLE","$nid",268],")",";",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","assertEqual",269],"(",["T_STRING","count",269],"(",["T_VARIABLE","$node",269],["T_OBJECT_OPERATOR","->",269],"{",["T_VARIABLE","$field_name",269],"}",")",",",["T_WHITESPACE"," ",269],["T_VARIABLE","$cardinality",269],",",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'More files than allowed could not be saved to node.'",269],")",";",["T_WHITESPACE","\n\n    ",269],["T_COMMENT","\/\/ Try to upload exactly the allowed number of files on revision. Create an\n",271],["T_WHITESPACE","    ",272],["T_COMMENT","\/\/ empty node first, to fill it in its first revision.\n",272],["T_WHITESPACE","    ",273],["T_VARIABLE","$node",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","drupalCreateNode",273],"(","[",["T_WHITESPACE","\n      ",273],["T_CONSTANT_ENCAPSED_STRING","'type'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$type_name",274],["T_WHITESPACE","\n    ",274],"]",")",";",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","uploadNodeFile",276],"(",["T_VARIABLE","$test_file",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$field_name",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$node",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","id",276],"(",")",",",["T_WHITESPACE"," ",276],["T_LNUMBER","1",276],")",";",["T_WHITESPACE","\n    ",276],["T_VARIABLE","$node_storage",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","resetCache",277],"(",["T_ARRAY","array",277],"(",["T_VARIABLE","$nid",277],")",")",";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$node",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$node_storage",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","load",278],"(",["T_VARIABLE","$nid",278],")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","assertEqual",279],"(",["T_STRING","count",279],"(",["T_VARIABLE","$node",279],["T_OBJECT_OPERATOR","->",279],"{",["T_VARIABLE","$field_name",279],"}",")",",",["T_WHITESPACE"," ",279],["T_VARIABLE","$cardinality",279],",",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'Node was successfully revised to maximum number of files.'",279],")",";",["T_WHITESPACE","\n\n    ",279],["T_COMMENT","\/\/ Try to upload exactly the allowed number of files, new node.\n",281],["T_WHITESPACE","    ",282],["T_VARIABLE","$upload_files",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","array_fill",282],"(",["T_LNUMBER","0",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$cardinality",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$test_file",282],")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$nid",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","uploadNodeFiles",283],"(",["T_VARIABLE","$upload_files",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$field_name",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$type_name",283],")",";",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$node_storage",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","resetCache",284],"(",["T_ARRAY","array",284],"(",["T_VARIABLE","$nid",284],")",")",";",["T_WHITESPACE","\n    ",284],["T_VARIABLE","$node",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$node_storage",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","load",285],"(",["T_VARIABLE","$nid",285],")",";",["T_WHITESPACE","\n    ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","assertEqual",286],"(",["T_STRING","count",286],"(",["T_VARIABLE","$node",286],["T_OBJECT_OPERATOR","->",286],"{",["T_VARIABLE","$field_name",286],"}",")",",",["T_WHITESPACE"," ",286],["T_VARIABLE","$cardinality",286],",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'Node was successfully saved with maximum number of files.'",286],")",";",["T_WHITESPACE","\n\n    ",286],["T_COMMENT","\/\/ Try to upload more files than allowed, new node.\n",288],["T_WHITESPACE","    ",289],["T_VARIABLE","$upload_files",289],"[","]",["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$test_file",289],";",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","uploadNodeFiles",290],"(",["T_VARIABLE","$upload_files",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$field_name",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$type_name",290],")",";",["T_WHITESPACE","\n\n    ",290],["T_VARIABLE","$args",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],"[",["T_WHITESPACE","\n      ",292],["T_CONSTANT_ENCAPSED_STRING","'%field'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$field_name",293],",",["T_WHITESPACE","\n      ",293],["T_CONSTANT_ENCAPSED_STRING","'@max'",294],["T_WHITESPACE"," ",294],["T_DOUBLE_ARROW","=>",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$cardinality",294],",",["T_WHITESPACE","\n      ",294],["T_CONSTANT_ENCAPSED_STRING","'@count'",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_STRING","count",295],"(",["T_VARIABLE","$upload_files",295],")",",",["T_WHITESPACE","\n      ",295],["T_CONSTANT_ENCAPSED_STRING","'%list'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$test_file",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getFileName",296],"(",")",",",["T_WHITESPACE","\n    ",296],"]",";",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","assertRaw",298],"(",["T_STRING","t",298],"(",["T_CONSTANT_ENCAPSED_STRING","'Field %field can only hold @max values but there were @count uploaded. The following files have been omitted as a result: %list.'",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$args",298],")",")",";",["T_WHITESPACE","\n  ",298],"}",["T_WHITESPACE","\n\n  ",299],["T_DOC_COMMENT","\/**\n   * Tests a file field with a \"Private files\" upload destination setting.\n   *\/",301],["T_WHITESPACE","\n  ",303],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","testPrivateFileSetting",304],"(",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$node_storage",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","container",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","get",305],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",305],")",["T_OBJECT_OPERATOR","->",305],["T_STRING","getStorage",305],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",305],")",";",["T_WHITESPACE","\n    ",305],["T_COMMENT","\/\/ Grant the admin user required permissions.\n",306],["T_WHITESPACE","    ",307],["T_STRING","user_role_grant_permissions",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","adminUser",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","roles",307],"[",["T_LNUMBER","0",307],"]",["T_OBJECT_OPERATOR","->",307],["T_STRING","target_id",307],",",["T_WHITESPACE"," ",307],["T_ARRAY","array",307],"(",["T_CONSTANT_ENCAPSED_STRING","'administer node fields'",307],")",")",";",["T_WHITESPACE","\n\n    ",307],["T_VARIABLE","$type_name",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'article'",309],";",["T_WHITESPACE","\n    ",309],["T_VARIABLE","$field_name",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","strtolower",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","randomMachineName",310],"(",")",")",";",["T_WHITESPACE","\n    ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","createFileField",311],"(",["T_VARIABLE","$field_name",311],",",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'node'",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$type_name",311],")",";",["T_WHITESPACE","\n    ",311],["T_VARIABLE","$field",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_STRING","FieldConfig",312],["T_DOUBLE_COLON","::",312],["T_STRING","loadByName",312],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$type_name",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$field_name",312],")",";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$field_id",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$field",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","id",313],"(",")",";",["T_WHITESPACE","\n\n    ",313],["T_VARIABLE","$test_file",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getTestFile",315],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",315],")",";",["T_WHITESPACE","\n\n    ",315],["T_COMMENT","\/\/ Change the field setting to make its files private, and upload a file.\n",317],["T_WHITESPACE","    ",318],["T_VARIABLE","$edit",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_ARRAY","array",318],"(",["T_CONSTANT_ENCAPSED_STRING","'settings[uri_scheme]'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'private'",318],")",";",["T_WHITESPACE","\n    ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","drupalPostForm",319],"(","\"",["T_ENCAPSED_AND_WHITESPACE","admin\/structure\/types\/manage\/",319],["T_VARIABLE","$type_name",319],["T_ENCAPSED_AND_WHITESPACE","\/fields\/",319],["T_VARIABLE","$field_id",319],["T_ENCAPSED_AND_WHITESPACE","\/storage",319],"\"",",",["T_WHITESPACE"," ",319],["T_VARIABLE","$edit",319],",",["T_WHITESPACE"," ",319],["T_STRING","t",319],"(",["T_CONSTANT_ENCAPSED_STRING","'Save field settings'",319],")",")",";",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$nid",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","uploadNodeFile",320],"(",["T_VARIABLE","$test_file",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$field_name",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$type_name",320],")",";",["T_WHITESPACE","\n    ",320],["T_VARIABLE","$node_storage",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","resetCache",321],"(",["T_ARRAY","array",321],"(",["T_VARIABLE","$nid",321],")",")",";",["T_WHITESPACE","\n    ",321],["T_VARIABLE","$node",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$node_storage",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","load",322],"(",["T_VARIABLE","$nid",322],")",";",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$node_file",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","File",323],["T_DOUBLE_COLON","::",323],["T_STRING","load",323],"(",["T_VARIABLE","$node",323],["T_OBJECT_OPERATOR","->",323],"{",["T_VARIABLE","$field_name",323],"}",["T_OBJECT_OPERATOR","->",323],["T_STRING","target_id",323],")",";",["T_WHITESPACE","\n    ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","assertFileExists",324],"(",["T_VARIABLE","$node_file",324],",",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'New file saved to disk on node creation.'",324],")",";",["T_WHITESPACE","\n\n    ",324],["T_COMMENT","\/\/ Ensure the private file is available to the user who uploaded it.\n",326],["T_WHITESPACE","    ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","drupalGet",327],"(",["T_STRING","file_create_url",327],"(",["T_VARIABLE","$node_file",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getFileUri",327],"(",")",")",")",";",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","assertResponse",328],"(",["T_LNUMBER","200",328],",",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'Confirmed that the generated URL is correct by downloading the shipped file.'",328],")",";",["T_WHITESPACE","\n\n    ",328],["T_COMMENT","\/\/ Ensure we can't change 'uri_scheme' field settings while there are some\n",330],["T_WHITESPACE","    ",331],["T_COMMENT","\/\/ entities with uploaded files.\n",331],["T_WHITESPACE","    ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","drupalGet",332],"(","\"",["T_ENCAPSED_AND_WHITESPACE","admin\/structure\/types\/manage\/",332],["T_VARIABLE","$type_name",332],["T_ENCAPSED_AND_WHITESPACE","\/fields\/",332],["T_VARIABLE","$field_id",332],["T_ENCAPSED_AND_WHITESPACE","\/storage",332],"\"",")",";",["T_WHITESPACE","\n    ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","assertFieldByXpath",333],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@id=\"edit-settings-uri-scheme-public\" and @disabled=\"disabled\"]'",333],",",["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'public'",333],",",["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'Upload destination setting disabled.'",333],")",";",["T_WHITESPACE","\n\n    ",333],["T_COMMENT","\/\/ Delete node and confirm that setting could be changed.\n",335],["T_WHITESPACE","    ",336],["T_VARIABLE","$node",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","delete",336],"(",")",";",["T_WHITESPACE","\n    ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","drupalGet",337],"(","\"",["T_ENCAPSED_AND_WHITESPACE","admin\/structure\/types\/manage\/",337],["T_VARIABLE","$type_name",337],["T_ENCAPSED_AND_WHITESPACE","\/fields\/",337],["T_VARIABLE","$field_id",337],["T_ENCAPSED_AND_WHITESPACE","\/storage",337],"\"",")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","assertFieldByXpath",338],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@id=\"edit-settings-uri-scheme-public\" and not(@disabled)]'",338],",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'public'",338],",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'Upload destination setting enabled.'",338],")",";",["T_WHITESPACE","\n  ",338],"}",["T_WHITESPACE","\n\n  ",339],["T_DOC_COMMENT","\/**\n   * Tests that download restrictions on private files work on comments.\n   *\/",341],["T_WHITESPACE","\n  ",343],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","testPrivateFileComment",344],"(",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n    ",344],["T_VARIABLE","$user",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","drupalCreateUser",345],"(",["T_ARRAY","array",345],"(",["T_CONSTANT_ENCAPSED_STRING","'access comments'",345],")",")",";",["T_WHITESPACE","\n\n    ",345],["T_COMMENT","\/\/ Grant the admin user required comment permissions.\n",347],["T_WHITESPACE","    ",348],["T_VARIABLE","$roles",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","adminUser",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getRoles",348],"(",")",";",["T_WHITESPACE","\n    ",348],["T_STRING","user_role_grant_permissions",349],"(",["T_VARIABLE","$roles",349],"[",["T_LNUMBER","1",349],"]",",",["T_WHITESPACE"," ",349],["T_ARRAY","array",349],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comment fields'",349],",",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'administer comments'",349],")",")",";",["T_WHITESPACE","\n\n    ",349],["T_COMMENT","\/\/ Revoke access comments permission from anon user, grant post to\n",351],["T_WHITESPACE","    ",352],["T_COMMENT","\/\/ authenticated.\n",352],["T_WHITESPACE","    ",353],["T_STRING","user_role_revoke_permissions",353],"(",["T_STRING","RoleInterface",353],["T_DOUBLE_COLON","::",353],["T_STRING","ANONYMOUS_ID",353],",",["T_WHITESPACE"," ",353],["T_ARRAY","array",353],"(",["T_CONSTANT_ENCAPSED_STRING","'access comments'",353],")",")",";",["T_WHITESPACE","\n    ",353],["T_STRING","user_role_grant_permissions",354],"(",["T_STRING","RoleInterface",354],["T_DOUBLE_COLON","::",354],["T_STRING","AUTHENTICATED_ID",354],",",["T_WHITESPACE"," ",354],["T_ARRAY","array",354],"(",["T_CONSTANT_ENCAPSED_STRING","'post comments'",354],",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'skip comment approval'",354],")",")",";",["T_WHITESPACE","\n\n    ",354],["T_COMMENT","\/\/ Create a new field.\n",356],["T_WHITESPACE","    ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","addDefaultCommentField",357],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",357],",",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'article'",357],")",";",["T_WHITESPACE","\n\n    ",357],["T_VARIABLE","$name",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_STRING","strtolower",359],"(",["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","randomMachineName",359],"(",")",")",";",["T_WHITESPACE","\n    ",359],["T_VARIABLE","$label",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","randomMachineName",360],"(",")",";",["T_WHITESPACE","\n    ",360],["T_VARIABLE","$storage_edit",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_ARRAY","array",361],"(",["T_CONSTANT_ENCAPSED_STRING","'settings[uri_scheme]'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'private'",361],")",";",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","fieldUIAddNewField",362],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/comment'",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$name",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$label",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'file'",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$storage_edit",362],")",";",["T_WHITESPACE","\n\n    ",362],["T_COMMENT","\/\/ Manually clear cache on the tester side.\n",364],["T_WHITESPACE","    ",365],["T_NS_SEPARATOR","\\",365],["T_STRING","Drupal",365],["T_DOUBLE_COLON","::",365],["T_STRING","entityManager",365],"(",")",["T_OBJECT_OPERATOR","->",365],["T_STRING","clearCachedFieldDefinitions",365],"(",")",";",["T_WHITESPACE","\n\n    ",365],["T_COMMENT","\/\/ Create node.\n",367],["T_WHITESPACE","    ",368],["T_VARIABLE","$edit",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_ARRAY","array",368],"(",["T_WHITESPACE","\n      ",368],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",369],["T_WHITESPACE"," ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","randomMachineName",369],"(",")",",",["T_WHITESPACE","\n    ",369],")",";",["T_WHITESPACE","\n    ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","drupalPostForm",371],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$edit",371],",",["T_WHITESPACE"," ",371],["T_STRING","t",371],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and publish'",371],")",")",";",["T_WHITESPACE","\n    ",371],["T_VARIABLE","$node",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","drupalGetNodeByTitle",372],"(",["T_VARIABLE","$edit",372],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",372],"]",")",";",["T_WHITESPACE","\n\n    ",372],["T_COMMENT","\/\/ Add a comment with a file.\n",374],["T_WHITESPACE","    ",375],["T_VARIABLE","$text_file",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getTestFile",375],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",375],")",";",["T_WHITESPACE","\n    ",375],["T_VARIABLE","$edit",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_ARRAY","array",376],"(",["T_WHITESPACE","\n      ",376],["T_CONSTANT_ENCAPSED_STRING","'files[field_'",377],["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_VARIABLE","$name",377],["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'_'",377],["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_LNUMBER","0",377],["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","']'",377],["T_WHITESPACE"," ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],["T_STRING","drupal_realpath",377],"(",["T_VARIABLE","$text_file",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getFileUri",377],"(",")",")",",",["T_WHITESPACE","\n      ",377],["T_CONSTANT_ENCAPSED_STRING","'comment_body[0][value]'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$comment_body",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","randomMachineName",378],"(",")",",",["T_WHITESPACE","\n    ",378],")",";",["T_WHITESPACE","\n    ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","drupalPostForm",380],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_VARIABLE","$node",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","id",380],"(",")",",",["T_WHITESPACE"," ",380],["T_VARIABLE","$edit",380],",",["T_WHITESPACE"," ",380],["T_STRING","t",380],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",380],")",")",";",["T_WHITESPACE","\n\n    ",380],["T_COMMENT","\/\/ Get the comment ID.\n",382],["T_WHITESPACE","    ",383],["T_STRING","preg_match",383],"(",["T_CONSTANT_ENCAPSED_STRING","'\/comment-([0-9]+)\/'",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getUrl",383],"(",")",",",["T_WHITESPACE"," ",383],["T_VARIABLE","$matches",383],")",";",["T_WHITESPACE","\n    ",383],["T_VARIABLE","$cid",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$matches",384],"[",["T_LNUMBER","1",384],"]",";",["T_WHITESPACE","\n\n    ",384],["T_COMMENT","\/\/ Log in as normal user.\n",386],["T_WHITESPACE","    ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","drupalLogin",387],"(",["T_VARIABLE","$user",387],")",";",["T_WHITESPACE","\n\n    ",387],["T_VARIABLE","$comment",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","Comment",389],["T_DOUBLE_COLON","::",389],["T_STRING","load",389],"(",["T_VARIABLE","$cid",389],")",";",["T_WHITESPACE","\n    ",389],["T_VARIABLE","$comment_file",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$comment",390],["T_OBJECT_OPERATOR","->",390],"{",["T_CONSTANT_ENCAPSED_STRING","'field_'",390],["T_WHITESPACE"," ",390],".",["T_WHITESPACE"," ",390],["T_VARIABLE","$name",390],"}",["T_OBJECT_OPERATOR","->",390],["T_STRING","entity",390],";",["T_WHITESPACE","\n    ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","assertFileExists",391],"(",["T_VARIABLE","$comment_file",391],",",["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","'New file saved to disk on node creation.'",391],")",";",["T_WHITESPACE","\n    ",391],["T_COMMENT","\/\/ Test authenticated file download.\n",392],["T_WHITESPACE","    ",393],["T_VARIABLE","$url",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_STRING","file_create_url",393],"(",["T_VARIABLE","$comment_file",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getFileUri",393],"(",")",")",";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","assertNotEqual",394],"(",["T_VARIABLE","$url",394],",",["T_WHITESPACE"," ",394],["T_STRING","NULL",394],",",["T_WHITESPACE"," ",394],["T_CONSTANT_ENCAPSED_STRING","'Confirmed that the URL is valid'",394],")",";",["T_WHITESPACE","\n    ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","drupalGet",395],"(",["T_STRING","file_create_url",395],"(",["T_VARIABLE","$comment_file",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getFileUri",395],"(",")",")",")",";",["T_WHITESPACE","\n    ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","assertResponse",396],"(",["T_LNUMBER","200",396],",",["T_WHITESPACE"," ",396],["T_CONSTANT_ENCAPSED_STRING","'Confirmed that the generated URL is correct by downloading the shipped file.'",396],")",";",["T_WHITESPACE","\n\n    ",396],["T_COMMENT","\/\/ Test anonymous file download.\n",398],["T_WHITESPACE","    ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","drupalLogout",399],"(",")",";",["T_WHITESPACE","\n    ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","drupalGet",400],"(",["T_STRING","file_create_url",400],"(",["T_VARIABLE","$comment_file",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getFileUri",400],"(",")",")",")",";",["T_WHITESPACE","\n    ",400],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","assertResponse",401],"(",["T_LNUMBER","403",401],",",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'Confirmed that access is denied for the file without the needed permission.'",401],")",";",["T_WHITESPACE","\n\n    ",401],["T_COMMENT","\/\/ Unpublishes node.\n",403],["T_WHITESPACE","    ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","drupalLogin",404],"(",["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","adminUser",404],")",";",["T_WHITESPACE","\n    ",404],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","drupalPostForm",405],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",405],["T_WHITESPACE"," ",405],".",["T_WHITESPACE"," ",405],["T_VARIABLE","$node",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","id",405],"(",")",["T_WHITESPACE"," ",405],".",["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",405],",",["T_WHITESPACE"," ",405],["T_ARRAY","array",405],"(",")",",",["T_WHITESPACE"," ",405],["T_STRING","t",405],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and unpublish'",405],")",")",";",["T_WHITESPACE","\n\n    ",405],["T_COMMENT","\/\/ Ensures normal user can no longer download the file.\n",407],["T_WHITESPACE","    ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","drupalLogin",408],"(",["T_VARIABLE","$user",408],")",";",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","drupalGet",409],"(",["T_STRING","file_create_url",409],"(",["T_VARIABLE","$comment_file",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getFileUri",409],"(",")",")",")",";",["T_WHITESPACE","\n    ",409],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","assertResponse",410],"(",["T_LNUMBER","403",410],",",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'Confirmed that access is denied for the file without the needed permission.'",410],")",";",["T_WHITESPACE","\n  ",410],"}",["T_WHITESPACE","\n\n  ",411],["T_DOC_COMMENT","\/**\n   * Tests validation with the Upload button.\n   *\/",413],["T_WHITESPACE","\n  ",415],["T_FUNCTION","function",416],["T_WHITESPACE"," ",416],["T_STRING","testWidgetValidation",416],"(",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n    ",416],["T_VARIABLE","$type_name",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","'article'",417],";",["T_WHITESPACE","\n    ",417],["T_VARIABLE","$field_name",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","strtolower",418],"(",["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","randomMachineName",418],"(",")",")",";",["T_WHITESPACE","\n    ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","createFileField",419],"(",["T_VARIABLE","$field_name",419],",",["T_WHITESPACE"," ",419],["T_CONSTANT_ENCAPSED_STRING","'node'",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$type_name",419],")",";",["T_WHITESPACE","\n    ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","updateFileField",420],"(",["T_VARIABLE","$field_name",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$type_name",420],",",["T_WHITESPACE"," ",420],["T_ARRAY","array",420],"(",["T_CONSTANT_ENCAPSED_STRING","'file_extensions'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'txt'",420],")",")",";",["T_WHITESPACE","\n\n    ",420],["T_FOREACH","foreach",422],["T_WHITESPACE"," ",422],"(",["T_ARRAY","array",422],"(",["T_CONSTANT_ENCAPSED_STRING","'nojs'",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'js'",422],")",["T_WHITESPACE"," ",422],["T_AS","as",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$type",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n      ",422],["T_COMMENT","\/\/ Create node and prepare files for upload.\n",423],["T_WHITESPACE","      ",424],["T_VARIABLE","$node",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","drupalCreateNode",424],"(",["T_ARRAY","array",424],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",424],["T_WHITESPACE"," ",424],["T_DOUBLE_ARROW","=>",424],["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'article'",424],")",")",";",["T_WHITESPACE","\n      ",424],["T_VARIABLE","$nid",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$node",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","id",425],"(",")",";",["T_WHITESPACE","\n      ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","drupalGet",426],"(","\"",["T_ENCAPSED_AND_WHITESPACE","node\/",426],["T_VARIABLE","$nid",426],["T_ENCAPSED_AND_WHITESPACE","\/edit",426],"\"",")",";",["T_WHITESPACE","\n      ",426],["T_VARIABLE","$test_file_text",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getTestFile",427],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",427],")",";",["T_WHITESPACE","\n      ",427],["T_VARIABLE","$test_file_image",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","getTestFile",428],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",428],")",";",["T_WHITESPACE","\n      ",428],["T_VARIABLE","$name",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'files['",429],["T_WHITESPACE"," ",429],".",["T_WHITESPACE"," ",429],["T_VARIABLE","$field_name",429],["T_WHITESPACE"," ",429],".",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'_0]'",429],";",["T_WHITESPACE","\n\n      ",429],["T_COMMENT","\/\/ Upload file with incorrect extension, check for validation error.\n",431],["T_WHITESPACE","      ",432],["T_VARIABLE","$edit",432],"[",["T_VARIABLE","$name",432],"]",["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","drupal_realpath",432],"(",["T_VARIABLE","$test_file_image",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getFileUri",432],"(",")",")",";",["T_WHITESPACE","\n      ",432],["T_SWITCH","switch",433],["T_WHITESPACE"," ",433],"(",["T_VARIABLE","$type",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n        ",433],["T_CASE","case",434],["T_WHITESPACE"," ",434],["T_CONSTANT_ENCAPSED_STRING","'nojs'",434],":",["T_WHITESPACE","\n          ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","drupalPostForm",435],"(",["T_STRING","NULL",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$edit",435],",",["T_WHITESPACE"," ",435],["T_STRING","t",435],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",435],")",")",";",["T_WHITESPACE","\n          ",435],["T_BREAK","break",436],";",["T_WHITESPACE","\n        ",436],["T_CASE","case",437],["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'js'",437],":",["T_WHITESPACE","\n          ",437],["T_VARIABLE","$button",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","xpath",438],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\" and @value=\"'",438],["T_WHITESPACE"," ",438],".",["T_WHITESPACE"," ",438],["T_STRING","t",438],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",438],")",["T_WHITESPACE"," ",438],".",["T_WHITESPACE"," ",438],["T_CONSTANT_ENCAPSED_STRING","'\"]'",438],")",";",["T_WHITESPACE","\n          ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","drupalPostAjaxForm",439],"(",["T_STRING","NULL",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$edit",439],",",["T_WHITESPACE"," ",439],["T_ARRAY","array",439],"(",["T_STRING_CAST","(string)",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$button",439],"[",["T_LNUMBER","0",439],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",439],"]",["T_WHITESPACE"," ",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],["T_STRING_CAST","(string)",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$button",439],"[",["T_LNUMBER","0",439],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",439],"]",")",")",";",["T_WHITESPACE","\n          ",439],["T_BREAK","break",440],";",["T_WHITESPACE","\n      ",440],"}",["T_WHITESPACE","\n      ",441],["T_VARIABLE","$error_message",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_STRING","t",442],"(",["T_CONSTANT_ENCAPSED_STRING","'Only files with the following extensions are allowed: %files-allowed.'",442],",",["T_WHITESPACE"," ",442],["T_ARRAY","array",442],"(",["T_CONSTANT_ENCAPSED_STRING","'%files-allowed'",442],["T_WHITESPACE"," ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'txt'",442],")",")",";",["T_WHITESPACE","\n      ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","assertRaw",443],"(",["T_VARIABLE","$error_message",443],",",["T_WHITESPACE"," ",443],["T_STRING","t",443],"(",["T_CONSTANT_ENCAPSED_STRING","'Validation error when file with wrong extension uploaded (JSMode=%type).'",443],",",["T_WHITESPACE"," ",443],["T_ARRAY","array",443],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",443],["T_WHITESPACE"," ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$type",443],")",")",")",";",["T_WHITESPACE","\n\n      ",443],["T_COMMENT","\/\/ Upload file with correct extension, check that error message is removed.\n",445],["T_WHITESPACE","      ",446],["T_VARIABLE","$edit",446],"[",["T_VARIABLE","$name",446],"]",["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_STRING","drupal_realpath",446],"(",["T_VARIABLE","$test_file_text",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","getFileUri",446],"(",")",")",";",["T_WHITESPACE","\n      ",446],["T_SWITCH","switch",447],["T_WHITESPACE"," ",447],"(",["T_VARIABLE","$type",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n        ",447],["T_CASE","case",448],["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'nojs'",448],":",["T_WHITESPACE","\n          ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","drupalPostForm",449],"(",["T_STRING","NULL",449],",",["T_WHITESPACE"," ",449],["T_VARIABLE","$edit",449],",",["T_WHITESPACE"," ",449],["T_STRING","t",449],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",449],")",")",";",["T_WHITESPACE","\n          ",449],["T_BREAK","break",450],";",["T_WHITESPACE","\n        ",450],["T_CASE","case",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'js'",451],":",["T_WHITESPACE","\n          ",451],["T_VARIABLE","$button",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","xpath",452],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"submit\" and @value=\"'",452],["T_WHITESPACE"," ",452],".",["T_WHITESPACE"," ",452],["T_STRING","t",452],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",452],")",["T_WHITESPACE"," ",452],".",["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'\"]'",452],")",";",["T_WHITESPACE","\n          ",452],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","drupalPostAjaxForm",453],"(",["T_STRING","NULL",453],",",["T_WHITESPACE"," ",453],["T_VARIABLE","$edit",453],",",["T_WHITESPACE"," ",453],["T_ARRAY","array",453],"(",["T_STRING_CAST","(string)",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$button",453],"[",["T_LNUMBER","0",453],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",453],"]",["T_WHITESPACE"," ",453],["T_DOUBLE_ARROW","=>",453],["T_WHITESPACE"," ",453],["T_STRING_CAST","(string)",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$button",453],"[",["T_LNUMBER","0",453],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",453],"]",")",")",";",["T_WHITESPACE","\n          ",453],["T_BREAK","break",454],";",["T_WHITESPACE","\n      ",454],"}",["T_WHITESPACE","\n      ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","assertNoRaw",456],"(",["T_VARIABLE","$error_message",456],",",["T_WHITESPACE"," ",456],["T_STRING","t",456],"(",["T_CONSTANT_ENCAPSED_STRING","'Validation error removed when file with correct extension uploaded (JSMode=%type).'",456],",",["T_WHITESPACE"," ",456],["T_ARRAY","array",456],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",456],["T_WHITESPACE"," ",456],["T_DOUBLE_ARROW","=>",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$type",456],")",")",")",";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n  ",457],"}",["T_WHITESPACE","\n\n  ",458],["T_DOC_COMMENT","\/**\n   * Tests file widget element.\n   *\/",460],["T_WHITESPACE","\n  ",462],["T_PUBLIC","public",463],["T_WHITESPACE"," ",463],["T_FUNCTION","function",463],["T_WHITESPACE"," ",463],["T_STRING","testWidgetElement",463],"(",")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n    ",463],["T_VARIABLE","$field_name",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_STRING","Unicode",464],["T_DOUBLE_COLON","::",464],["T_STRING","strtolower",464],"(",["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","randomMachineName",464],"(",")",")",";",["T_WHITESPACE","\n    ",464],["T_VARIABLE","$html_name",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_STRING","str_replace",465],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",465],",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'-'",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$field_name",465],")",";",["T_WHITESPACE","\n    ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","createFileField",466],"(",["T_VARIABLE","$field_name",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'node'",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'article'",466],",",["T_WHITESPACE"," ",466],"[",["T_CONSTANT_ENCAPSED_STRING","'cardinality'",466],["T_WHITESPACE"," ",466],["T_DOUBLE_ARROW","=>",466],["T_WHITESPACE"," ",466],["T_STRING","FieldStorageConfig",466],["T_DOUBLE_COLON","::",466],["T_STRING","CARDINALITY_UNLIMITED",466],"]",")",";",["T_WHITESPACE","\n    ",466],["T_VARIABLE","$file",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getTestFile",467],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",467],")",";",["T_WHITESPACE","\n    ",467],["T_VARIABLE","$xpath",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],"\"",["T_ENCAPSED_AND_WHITESPACE","\/\/details[@data-drupal-selector='edit-",468],["T_VARIABLE","$html_name",468],["T_ENCAPSED_AND_WHITESPACE","']\/div[@class='details-wrapper']\/table",468],"\"",";",["T_WHITESPACE","\n\n    ",468],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","drupalGet",470],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",470],")",";",["T_WHITESPACE","\n\n    ",470],["T_VARIABLE","$elements",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","xpath",472],"(",["T_VARIABLE","$xpath",472],")",";",["T_WHITESPACE","\n\n    ",472],["T_COMMENT","\/\/ If the field has no item, the table should not be visible.\n",474],["T_WHITESPACE","    ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","assertIdentical",475],"(",["T_STRING","count",475],"(",["T_VARIABLE","$elements",475],")",",",["T_WHITESPACE"," ",475],["T_LNUMBER","0",475],")",";",["T_WHITESPACE","\n\n    ",475],["T_COMMENT","\/\/ Upload a file.\n",477],["T_WHITESPACE","    ",478],["T_VARIABLE","$edit",478],"[",["T_CONSTANT_ENCAPSED_STRING","'files['",478],["T_WHITESPACE"," ",478],".",["T_WHITESPACE"," ",478],["T_VARIABLE","$field_name",478],["T_WHITESPACE"," ",478],".",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'_0][]'",478],"]",["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","container",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","get",478],"(",["T_CONSTANT_ENCAPSED_STRING","'file_system'",478],")",["T_OBJECT_OPERATOR","->",478],["T_STRING","realpath",478],"(",["T_VARIABLE","$file",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getFileUri",478],"(",")",")",";",["T_WHITESPACE","\n    ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","drupalPostAjaxForm",479],"(",["T_STRING","NULL",479],",",["T_WHITESPACE"," ",479],["T_VARIABLE","$edit",479],",",["T_WHITESPACE"," ",479],"\"",["T_CURLY_OPEN","{",479],["T_VARIABLE","$field_name",479],"}",["T_ENCAPSED_AND_WHITESPACE","_0_upload_button",479],"\"",")",";",["T_WHITESPACE","\n\n    ",479],["T_VARIABLE","$elements",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","xpath",481],"(",["T_VARIABLE","$xpath",481],")",";",["T_WHITESPACE","\n\n    ",481],["T_COMMENT","\/\/ If the field has at least a item, the table should be visible.\n",483],["T_WHITESPACE","    ",484],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","assertIdentical",484],"(",["T_STRING","count",484],"(",["T_VARIABLE","$elements",484],")",",",["T_WHITESPACE"," ",484],["T_LNUMBER","1",484],")",";",["T_WHITESPACE","\n\n    ",484],["T_COMMENT","\/\/ Test for AJAX error when using progress bar on file field widget\n",486],["T_WHITESPACE","    ",487],["T_VARIABLE","$key",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","randomMachineName",487],"(",")",";",["T_WHITESPACE","\n    ",487],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","drupalPost",488],"(",["T_CONSTANT_ENCAPSED_STRING","'file\/progress\/'",488],["T_WHITESPACE"," ",488],".",["T_WHITESPACE"," ",488],["T_VARIABLE","$key",488],",",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",488],",",["T_WHITESPACE"," ",488],"[","]",")",";",["T_WHITESPACE","\n    ",488],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","assertNoResponse",489],"(",["T_LNUMBER","500",489],",",["T_WHITESPACE"," ",489],["T_STRING","t",489],"(",["T_CONSTANT_ENCAPSED_STRING","'No AJAX error when using progress bar on file field widget'",489],")",")",";",["T_WHITESPACE","\n    ",489],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","assertText",490],"(",["T_CONSTANT_ENCAPSED_STRING","'Starting upload...'",490],")",";",["T_WHITESPACE","\n  ",490],"}",["T_WHITESPACE","\n\n  ",491],["T_DOC_COMMENT","\/**\n   * Tests exploiting the temporary file removal of another user using fid.\n   *\/",493],["T_WHITESPACE","\n  ",495],["T_PUBLIC","public",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","testTemporaryFileRemovalExploit",496],"(",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n    ",496],["T_COMMENT","\/\/ Create a victim user.\n",497],["T_WHITESPACE","    ",498],["T_VARIABLE","$victim_user",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","drupalCreateUser",498],"(",")",";",["T_WHITESPACE","\n\n    ",498],["T_COMMENT","\/\/ Create an attacker user.\n",500],["T_WHITESPACE","    ",501],["T_VARIABLE","$attacker_user",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","drupalCreateUser",501],"(",["T_ARRAY","array",501],"(",["T_WHITESPACE","\n      ",501],["T_CONSTANT_ENCAPSED_STRING","'access content'",502],",",["T_WHITESPACE","\n      ",502],["T_CONSTANT_ENCAPSED_STRING","'create article content'",503],",",["T_WHITESPACE","\n      ",503],["T_CONSTANT_ENCAPSED_STRING","'edit any article content'",504],",",["T_WHITESPACE","\n    ",504],")",")",";",["T_WHITESPACE","\n\n    ",505],["T_COMMENT","\/\/ Log in as the attacker user.\n",507],["T_WHITESPACE","    ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","drupalLogin",508],"(",["T_VARIABLE","$attacker_user",508],")",";",["T_WHITESPACE","\n\n    ",508],["T_COMMENT","\/\/ Perform tests using the newly created users.\n",510],["T_WHITESPACE","    ",511],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","doTestTemporaryFileRemovalExploit",511],"(",["T_VARIABLE","$victim_user",511],",",["T_WHITESPACE"," ",511],["T_VARIABLE","$attacker_user",511],")",";",["T_WHITESPACE","\n  ",511],"}",["T_WHITESPACE","\n\n  ",512],["T_DOC_COMMENT","\/**\n   * Tests exploiting the temporary file removal for anonymous users using fid.\n   *\/",514],["T_WHITESPACE","\n  ",516],["T_PUBLIC","public",517],["T_WHITESPACE"," ",517],["T_FUNCTION","function",517],["T_WHITESPACE"," ",517],["T_STRING","testTemporaryFileRemovalExploitAnonymous",517],"(",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n    ",517],["T_COMMENT","\/\/ Set up an anonymous victim user.\n",518],["T_WHITESPACE","    ",519],["T_VARIABLE","$victim_user",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_STRING","User",519],["T_DOUBLE_COLON","::",519],["T_STRING","getAnonymousUser",519],"(",")",";",["T_WHITESPACE","\n\n    ",519],["T_COMMENT","\/\/ Set up an anonymous attacker user.\n",521],["T_WHITESPACE","    ",522],["T_VARIABLE","$attacker_user",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_STRING","User",522],["T_DOUBLE_COLON","::",522],["T_STRING","getAnonymousUser",522],"(",")",";",["T_WHITESPACE","\n\n    ",522],["T_COMMENT","\/\/ Set up permissions for anonymous attacker user.\n",524],["T_WHITESPACE","    ",525],["T_STRING","user_role_change_permissions",525],"(",["T_STRING","RoleInterface",525],["T_DOUBLE_COLON","::",525],["T_STRING","ANONYMOUS_ID",525],",",["T_WHITESPACE"," ",525],["T_ARRAY","array",525],"(",["T_WHITESPACE","\n      ",525],["T_CONSTANT_ENCAPSED_STRING","'access content'",526],["T_WHITESPACE"," ",526],["T_DOUBLE_ARROW","=>",526],["T_WHITESPACE"," ",526],["T_STRING","TRUE",526],",",["T_WHITESPACE","\n      ",526],["T_CONSTANT_ENCAPSED_STRING","'create article content'",527],["T_WHITESPACE"," ",527],["T_DOUBLE_ARROW","=>",527],["T_WHITESPACE"," ",527],["T_STRING","TRUE",527],",",["T_WHITESPACE","\n      ",527],["T_CONSTANT_ENCAPSED_STRING","'edit any article content'",528],["T_WHITESPACE"," ",528],["T_DOUBLE_ARROW","=>",528],["T_WHITESPACE"," ",528],["T_STRING","TRUE",528],",",["T_WHITESPACE","\n    ",528],")",")",";",["T_WHITESPACE","\n\n    ",529],["T_COMMENT","\/\/ Log out so as to be the anonymous attacker user.\n",531],["T_WHITESPACE","    ",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","drupalLogout",532],"(",")",";",["T_WHITESPACE","\n\n    ",532],["T_COMMENT","\/\/ Perform tests using the newly set up anonymous users.\n",534],["T_WHITESPACE","    ",535],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","doTestTemporaryFileRemovalExploit",535],"(",["T_VARIABLE","$victim_user",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$attacker_user",535],")",";",["T_WHITESPACE","\n  ",535],"}",["T_WHITESPACE","\n\n  ",536],["T_DOC_COMMENT","\/**\n   * Helper for testing exploiting the temporary file removal using fid.\n   *\n   * @param \\Drupal\\user\\UserInterface $victim_user\n   *   The victim user.\n   * @param \\Drupal\\user\\UserInterface $attacker_user\n   *   The attacker user.\n   *\/",538],["T_WHITESPACE","\n  ",545],["T_PROTECTED","protected",546],["T_WHITESPACE"," ",546],["T_FUNCTION","function",546],["T_WHITESPACE"," ",546],["T_STRING","doTestTemporaryFileRemovalExploit",546],"(",["T_STRING","UserInterface",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$victim_user",546],",",["T_WHITESPACE"," ",546],["T_STRING","UserInterface",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$attacker_user",546],")",["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n    ",546],["T_VARIABLE","$type_name",547],["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'article'",547],";",["T_WHITESPACE","\n    ",547],["T_VARIABLE","$field_name",548],["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_CONSTANT_ENCAPSED_STRING","'test_file_field'",548],";",["T_WHITESPACE","\n    ",548],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","createFileField",549],"(",["T_VARIABLE","$field_name",549],",",["T_WHITESPACE"," ",549],["T_CONSTANT_ENCAPSED_STRING","'node'",549],",",["T_WHITESPACE"," ",549],["T_VARIABLE","$type_name",549],")",";",["T_WHITESPACE","\n\n    ",549],["T_VARIABLE","$test_file",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getTestFile",551],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",551],")",";",["T_WHITESPACE","\n    ",551],["T_FOREACH","foreach",552],["T_WHITESPACE"," ",552],"(",["T_ARRAY","array",552],"(",["T_CONSTANT_ENCAPSED_STRING","'nojs'",552],",",["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","'js'",552],")",["T_WHITESPACE"," ",552],["T_AS","as",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$type",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n      ",552],["T_COMMENT","\/\/ Create a temporary file owned by the victim user. This will be as if\n",553],["T_WHITESPACE","      ",554],["T_COMMENT","\/\/ they had uploaded the file, but not saved the node they were editing\n",554],["T_WHITESPACE","      ",555],["T_COMMENT","\/\/ or creating.\n",555],["T_WHITESPACE","      ",556],["T_VARIABLE","$victim_tmp_file",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","createTemporaryFile",556],"(",["T_CONSTANT_ENCAPSED_STRING","'some text'",556],",",["T_WHITESPACE"," ",556],["T_VARIABLE","$victim_user",556],")",";",["T_WHITESPACE","\n      ",556],["T_VARIABLE","$victim_tmp_file",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_STRING","File",557],["T_DOUBLE_COLON","::",557],["T_STRING","load",557],"(",["T_VARIABLE","$victim_tmp_file",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","id",557],"(",")",")",";",["T_WHITESPACE","\n      ",557],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","assertTrue",558],"(",["T_VARIABLE","$victim_tmp_file",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","isTemporary",558],"(",")",",",["T_WHITESPACE"," ",558],["T_CONSTANT_ENCAPSED_STRING","'New file saved to disk is temporary.'",558],")",";",["T_WHITESPACE","\n      ",558],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","assertFalse",559],"(",["T_EMPTY","empty",559],"(",["T_VARIABLE","$victim_tmp_file",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","id",559],"(",")",")",",",["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","'New file has an fid.'",559],")",";",["T_WHITESPACE","\n      ",559],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","assertEqual",560],"(",["T_VARIABLE","$victim_user",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","id",560],"(",")",",",["T_WHITESPACE"," ",560],["T_VARIABLE","$victim_tmp_file",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","getOwnerId",560],"(",")",",",["T_WHITESPACE"," ",560],["T_CONSTANT_ENCAPSED_STRING","'New file belongs to the victim.'",560],")",";",["T_WHITESPACE","\n\n      ",560],["T_COMMENT","\/\/ Have attacker create a new node with a different uploaded file and\n",562],["T_WHITESPACE","      ",563],["T_COMMENT","\/\/ ensure it got uploaded successfully.\n",563],["T_WHITESPACE","      ",564],["T_VARIABLE","$edit",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],"[",["T_WHITESPACE","\n        ",564],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",565],["T_WHITESPACE"," ",565],["T_DOUBLE_ARROW","=>",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$type",565],["T_WHITESPACE"," ",565],".",["T_WHITESPACE"," ",565],["T_CONSTANT_ENCAPSED_STRING","'-title'",565],["T_WHITESPACE"," ",565],",",["T_WHITESPACE","\n      ",565],"]",";",["T_WHITESPACE","\n\n      ",566],["T_COMMENT","\/\/ Attach a file to a node.\n",568],["T_WHITESPACE","      ",569],["T_VARIABLE","$edit",569],"[",["T_CONSTANT_ENCAPSED_STRING","'files['",569],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_VARIABLE","$field_name",569],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","'_0]'",569],"]",["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","container",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","get",569],"(",["T_CONSTANT_ENCAPSED_STRING","'file_system'",569],")",["T_OBJECT_OPERATOR","->",569],["T_STRING","realpath",569],"(",["T_VARIABLE","$test_file",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getFileUri",569],"(",")",")",";",["T_WHITESPACE","\n      ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","drupalPostForm",570],"(",["T_STRING","Url",570],["T_DOUBLE_COLON","::",570],["T_STRING","fromRoute",570],"(",["T_CONSTANT_ENCAPSED_STRING","'node.add'",570],",",["T_WHITESPACE"," ",570],["T_ARRAY","array",570],"(",["T_CONSTANT_ENCAPSED_STRING","'node_type'",570],["T_WHITESPACE"," ",570],["T_DOUBLE_ARROW","=>",570],["T_WHITESPACE"," ",570],["T_VARIABLE","$type_name",570],")",")",",",["T_WHITESPACE"," ",570],["T_VARIABLE","$edit",570],",",["T_WHITESPACE"," ",570],["T_STRING","t",570],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",570],")",")",";",["T_WHITESPACE","\n      ",570],["T_VARIABLE","$node",571],["T_WHITESPACE"," ",571],"=",["T_WHITESPACE"," ",571],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","drupalGetNodeByTitle",571],"(",["T_VARIABLE","$edit",571],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",571],"]",")",";",["T_WHITESPACE","\n\n      ",571],["T_DOC_COMMENT","\/** @var \\Drupal\\file\\FileInterface $node_file *\/",573],["T_WHITESPACE","\n      ",573],["T_VARIABLE","$node_file",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_STRING","File",574],["T_DOUBLE_COLON","::",574],["T_STRING","load",574],"(",["T_VARIABLE","$node",574],["T_OBJECT_OPERATOR","->",574],"{",["T_VARIABLE","$field_name",574],"}",["T_OBJECT_OPERATOR","->",574],["T_STRING","target_id",574],")",";",["T_WHITESPACE","\n      ",574],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","assertFileExists",575],"(",["T_VARIABLE","$node_file",575],",",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","'A file was saved to disk on node creation'",575],")",";",["T_WHITESPACE","\n      ",575],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","assertEqual",576],"(",["T_VARIABLE","$attacker_user",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","id",576],"(",")",",",["T_WHITESPACE"," ",576],["T_VARIABLE","$node_file",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getOwnerId",576],"(",")",",",["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","'New file belongs to the attacker.'",576],")",";",["T_WHITESPACE","\n\n      ",576],["T_COMMENT","\/\/ Ensure the file can be downloaded.\n",578],["T_WHITESPACE","      ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","drupalGet",579],"(",["T_STRING","file_create_url",579],"(",["T_VARIABLE","$node_file",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getFileUri",579],"(",")",")",")",";",["T_WHITESPACE","\n      ",579],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","assertResponse",580],"(",["T_LNUMBER","200",580],",",["T_WHITESPACE"," ",580],["T_CONSTANT_ENCAPSED_STRING","'Confirmed that the generated URL is correct by downloading the shipped file.'",580],")",";",["T_WHITESPACE","\n\n      ",580],["T_COMMENT","\/\/ \"Click\" the remove button (emulating either a nojs or js submission).\n",582],["T_WHITESPACE","      ",583],["T_COMMENT","\/\/ In this POST request, the attacker \"guesses\" the fid of the victim's\n",583],["T_WHITESPACE","      ",584],["T_COMMENT","\/\/ temporary file and uses that to remove this file.\n",584],["T_WHITESPACE","      ",585],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","drupalGet",585],"(",["T_VARIABLE","$node",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","toUrl",585],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-form'",585],")",")",";",["T_WHITESPACE","\n      ",585],["T_SWITCH","switch",586],["T_WHITESPACE"," ",586],"(",["T_VARIABLE","$type",586],")",["T_WHITESPACE"," ",586],"{",["T_WHITESPACE","\n        ",586],["T_CASE","case",587],["T_WHITESPACE"," ",587],["T_CONSTANT_ENCAPSED_STRING","'nojs'",587],":",["T_WHITESPACE","\n          ",587],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","drupalPostForm",588],"(",["T_STRING","NULL",588],",",["T_WHITESPACE"," ",588],"[",["T_VARIABLE","$field_name",588],["T_WHITESPACE"," ",588],".",["T_WHITESPACE"," ",588],["T_CONSTANT_ENCAPSED_STRING","'[0][fids]'",588],["T_WHITESPACE"," ",588],["T_DOUBLE_ARROW","=>",588],["T_WHITESPACE"," ",588],["T_STRING_CAST","(string)",588],["T_WHITESPACE"," ",588],["T_VARIABLE","$victim_tmp_file",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","id",588],"(",")","]",",",["T_WHITESPACE"," ",588],["T_CONSTANT_ENCAPSED_STRING","'Remove'",588],")",";",["T_WHITESPACE","\n          ",588],["T_BREAK","break",589],";",["T_WHITESPACE","\n\n        ",589],["T_CASE","case",591],["T_WHITESPACE"," ",591],["T_CONSTANT_ENCAPSED_STRING","'js'",591],":",["T_WHITESPACE","\n          ",591],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","drupalPostAjaxForm",592],"(",["T_STRING","NULL",592],",",["T_WHITESPACE"," ",592],"[",["T_VARIABLE","$field_name",592],["T_WHITESPACE"," ",592],".",["T_WHITESPACE"," ",592],["T_CONSTANT_ENCAPSED_STRING","'[0][fids]'",592],["T_WHITESPACE"," ",592],["T_DOUBLE_ARROW","=>",592],["T_WHITESPACE"," ",592],["T_STRING_CAST","(string)",592],["T_WHITESPACE"," ",592],["T_VARIABLE","$victim_tmp_file",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","id",592],"(",")","]",",",["T_WHITESPACE"," ",592],"[","\"",["T_CURLY_OPEN","{",592],["T_VARIABLE","$field_name",592],"}",["T_ENCAPSED_AND_WHITESPACE","_0_remove_button",592],"\"",["T_WHITESPACE"," ",592],["T_DOUBLE_ARROW","=>",592],["T_WHITESPACE"," ",592],["T_CONSTANT_ENCAPSED_STRING","'Remove'",592],"]",")",";",["T_WHITESPACE","\n          ",592],["T_BREAK","break",593],";",["T_WHITESPACE","\n      ",593],"}",["T_WHITESPACE","\n\n      ",594],["T_COMMENT","\/\/ The victim's temporary file should not be removed by the attacker's\n",596],["T_WHITESPACE","      ",597],["T_COMMENT","\/\/ POST request.\n",597],["T_WHITESPACE","      ",598],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","assertFileExists",598],"(",["T_VARIABLE","$victim_tmp_file",598],")",";",["T_WHITESPACE","\n    ",598],"}",["T_WHITESPACE","\n  ",599],"}",["T_WHITESPACE","\n\n",600],"}",["T_WHITESPACE","\n",602]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldStorageDefinitionInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","file",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","File",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the display of file fields in node and views.\n *\n * @group file\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","FileFieldDisplayTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","FileFieldTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Tests normal formatter display on node display.\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","testNodeDisplay",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$field_name",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","strtolower",19],"(",["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","randomMachineName",19],"(",")",")",";",["T_WHITESPACE","\n    ",19],["T_VARIABLE","$type_name",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'article'",20],";",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$field_storage_settings",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_WHITESPACE","\n      ",21],["T_CONSTANT_ENCAPSED_STRING","'display_field'",22],["T_WHITESPACE"," ",22],["T_DOUBLE_ARROW","=>",22],["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'1'",22],",",["T_WHITESPACE","\n      ",22],["T_CONSTANT_ENCAPSED_STRING","'display_default'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'1'",23],",",["T_WHITESPACE","\n      ",23],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_STRING","FieldStorageDefinitionInterface",24],["T_DOUBLE_COLON","::",24],["T_STRING","CARDINALITY_UNLIMITED",24],",",["T_WHITESPACE","\n    ",24],")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$field_settings",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_ARRAY","array",26],"(",["T_WHITESPACE","\n      ",26],["T_CONSTANT_ENCAPSED_STRING","'description_field'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'1'",27],",",["T_WHITESPACE","\n    ",27],")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$widget_settings",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","createFileField",30],"(",["T_VARIABLE","$field_name",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'node'",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$type_name",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$field_storage_settings",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$field_settings",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$widget_settings",30],")",";",["T_WHITESPACE","\n\n    ",30],["T_COMMENT","\/\/ Create a new node *without* the file field set, and check that the field\n",32],["T_WHITESPACE","    ",33],["T_COMMENT","\/\/ is not shown for each node display.\n",33],["T_WHITESPACE","    ",34],["T_VARIABLE","$node",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","drupalCreateNode",34],"(",["T_ARRAY","array",34],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$type_name",34],")",")",";",["T_WHITESPACE","\n    ",34],["T_COMMENT","\/\/ Check file_default last as the assertions below assume that this is the\n",35],["T_WHITESPACE","    ",36],["T_COMMENT","\/\/ case.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$file_formatters",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",["T_CONSTANT_ENCAPSED_STRING","'file_table'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'file_url_plain'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'hidden'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'file_default'",37],")",";",["T_WHITESPACE","\n    ",37],["T_FOREACH","foreach",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$file_formatters",38],["T_WHITESPACE"," ",38],["T_AS","as",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$formatter",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n      ",38],["T_VARIABLE","$edit",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",["T_WHITESPACE","\n        ",39],"\"",["T_ENCAPSED_AND_WHITESPACE","fields[",40],["T_VARIABLE","$field_name",40],["T_ENCAPSED_AND_WHITESPACE","][type]",40],"\"",["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$formatter",40],",",["T_WHITESPACE","\n      ",40],")",";",["T_WHITESPACE","\n      ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalPostForm",42],"(","\"",["T_ENCAPSED_AND_WHITESPACE","admin\/structure\/types\/manage\/",42],["T_VARIABLE","$type_name",42],["T_ENCAPSED_AND_WHITESPACE","\/display",42],"\"",",",["T_WHITESPACE"," ",42],["T_VARIABLE","$edit",42],",",["T_WHITESPACE"," ",42],["T_STRING","t",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",42],")",")",";",["T_WHITESPACE","\n      ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","drupalGet",43],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_VARIABLE","$node",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","id",43],"(",")",")",";",["T_WHITESPACE","\n      ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","assertNoText",44],"(",["T_VARIABLE","$field_name",44],",",["T_WHITESPACE"," ",44],["T_STRING","format_string",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Field label is hidden when no file attached for formatter %formatter'",44],",",["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",["T_CONSTANT_ENCAPSED_STRING","'%formatter'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$formatter",44],")",")",")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_VARIABLE","$test_file",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getTestFile",47],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",47],")",";",["T_WHITESPACE","\n    ",47],["T_STRING","simpletest_generate_file",48],"(",["T_CONSTANT_ENCAPSED_STRING","'escaped-&-text'",48],",",["T_WHITESPACE"," ",48],["T_LNUMBER","64",48],",",["T_WHITESPACE"," ",48],["T_LNUMBER","10",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'text'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$test_file",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","File",49],["T_DOUBLE_COLON","::",49],["T_STRING","create",49],"(","[",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'uri'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/escaped-&-text.txt'",50],",",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'name'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'escaped-&-text'",51],",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'filesize'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_STRING","filesize",52],"(",["T_CONSTANT_ENCAPSED_STRING","'public:\/\/escaped-&-text.txt'",52],")",",",["T_WHITESPACE","\n    ",52],"]",")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Create a new node with the uploaded file.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$nid",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","uploadNodeFile",56],"(",["T_VARIABLE","$test_file",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$field_name",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$type_name",56],")",";",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Check that the default formatter is displaying with the file name.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$node_storage",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","container",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getStorage",59],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$node_storage",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","resetCache",60],"(",["T_ARRAY","array",60],"(",["T_VARIABLE","$nid",60],")",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$node",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$node_storage",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","load",61],"(",["T_VARIABLE","$nid",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$node_file",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","File",62],["T_DOUBLE_COLON","::",62],["T_STRING","load",62],"(",["T_VARIABLE","$node",62],["T_OBJECT_OPERATOR","->",62],"{",["T_VARIABLE","$field_name",62],"}",["T_OBJECT_OPERATOR","->",62],["T_STRING","target_id",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$file_link",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_WHITESPACE","\n      ",63],["T_CONSTANT_ENCAPSED_STRING","'#theme'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'file_link'",64],",",["T_WHITESPACE","\n      ",64],["T_CONSTANT_ENCAPSED_STRING","'#file'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$node_file",65],",",["T_WHITESPACE","\n    ",65],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$default_output",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Drupal",67],["T_DOUBLE_COLON","::",67],["T_STRING","service",67],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",67],")",["T_OBJECT_OPERATOR","->",67],["T_STRING","renderRoot",67],"(",["T_VARIABLE","$file_link",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertRaw",68],"(",["T_VARIABLE","$default_output",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Default formatter displaying correctly on full node view.'",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Turn the \"display\" option off and check that the file is no longer displayed.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$edit",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_VARIABLE","$field_name",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'[0][display]'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_STRING","FALSE",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","drupalPostForm",72],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$nid",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$edit",72],",",["T_WHITESPACE"," ",72],["T_STRING","t",72],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and keep published'",72],")",")",";",["T_WHITESPACE","\n\n    ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertNoRaw",74],"(",["T_VARIABLE","$default_output",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'Field is hidden when \"display\" option is unchecked.'",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Add a description and make sure that it is displayed.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$description",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","randomMachineName",77],"(",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$edit",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$field_name",79],["T_WHITESPACE"," ",79],".",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'[0][description]'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$description",79],",",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$field_name",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'[0][display]'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_STRING","TRUE",80],",",["T_WHITESPACE","\n    ",80],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","drupalPostForm",82],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$nid",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$edit",82],",",["T_WHITESPACE"," ",82],["T_STRING","t",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and keep published'",82],")",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertText",83],"(",["T_VARIABLE","$description",83],")",";",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ Ensure the filename in the link's title attribute is escaped.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertRaw",86],"(",["T_CONSTANT_ENCAPSED_STRING","'title=\"escaped-&amp;-text.txt\"'",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Test that fields appear as expected after during the preview.\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ Add a second file.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$name",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'files['",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$field_name",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'_1][]'",90],";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$edit",91],"[",["T_VARIABLE","$name",91],"]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","drupal_realpath",91],"(",["T_VARIABLE","$test_file",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getFileUri",91],"(",")",")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Uncheck the display checkboxes and go to the preview.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$edit",94],"[",["T_VARIABLE","$field_name",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'[0][display]'",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","FALSE",94],";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$edit",95],"[",["T_VARIABLE","$field_name",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'[1][display]'",95],"]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","FALSE",95],";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","drupalPostForm",96],"(","\"",["T_ENCAPSED_AND_WHITESPACE","node\/",96],["T_VARIABLE","$nid",96],["T_ENCAPSED_AND_WHITESPACE","\/edit",96],"\"",",",["T_WHITESPACE"," ",96],["T_VARIABLE","$edit",96],",",["T_WHITESPACE"," ",96],["T_STRING","t",96],"(",["T_CONSTANT_ENCAPSED_STRING","'Preview'",96],")",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","clickLink",97],"(",["T_STRING","t",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Back to content editing'",97],")",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertRaw",98],"(",["T_VARIABLE","$field_name",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'[0][display]'",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'First file appears as expected.'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertRaw",99],"(",["T_VARIABLE","$field_name",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'[1][display]'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Second file appears as expected.'",99],")",";",["T_WHITESPACE","\n  ",99],"}",["T_WHITESPACE","\n\n  ",100],["T_DOC_COMMENT","\/**\n   * Tests default display of File Field.\n   *\/",102],["T_WHITESPACE","\n  ",104],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","testDefaultFileFieldDisplay",105],"(",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$field_name",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","strtolower",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","randomMachineName",106],"(",")",")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$type_name",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'article'",107],";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$field_storage_settings",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_WHITESPACE","\n      ",108],["T_CONSTANT_ENCAPSED_STRING","'display_field'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'1'",109],",",["T_WHITESPACE","\n      ",109],["T_CONSTANT_ENCAPSED_STRING","'display_default'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'0'",110],",",["T_WHITESPACE","\n      ",110],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_STRING","FieldStorageDefinitionInterface",111],["T_DOUBLE_COLON","::",111],["T_STRING","CARDINALITY_UNLIMITED",111],",",["T_WHITESPACE","\n    ",111],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$field_settings",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",["T_WHITESPACE","\n      ",113],["T_CONSTANT_ENCAPSED_STRING","'description_field'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'1'",114],",",["T_WHITESPACE","\n    ",114],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$widget_settings",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","createFileField",117],"(",["T_VARIABLE","$field_name",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'node'",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$type_name",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$field_storage_settings",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$field_settings",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$widget_settings",117],")",";",["T_WHITESPACE","\n\n    ",117],["T_VARIABLE","$test_file",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getTestFile",119],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",119],")",";",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ Create a new node with the uploaded file.\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$nid",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","uploadNodeFile",122],"(",["T_VARIABLE","$test_file",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$field_name",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$type_name",122],")",";",["T_WHITESPACE","\n\n    ",122],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","drupalGet",124],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$nid",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertFieldByXPath",125],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"checkbox\" and @name=\"'",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$field_name",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'[0][display]\"]'",125],",",["T_WHITESPACE"," ",125],["T_STRING","NULL",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'Default file display checkbox field exists.'",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertFieldByXPath",126],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"checkbox\" and @name=\"'",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_VARIABLE","$field_name",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'[0][display]\" and not(@checked)]'",126],",",["T_WHITESPACE"," ",126],["T_STRING","NULL",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'Default file display is off.'",126],")",";",["T_WHITESPACE","\n  ",126],"}",["T_WHITESPACE","\n\n  ",127],["T_DOC_COMMENT","\/**\n   * Tests description toggle for field instance configuration.\n   *\/",129],["T_WHITESPACE","\n  ",131],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","testDescToggle",132],"(",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$type_name",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'test'",133],";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$field_type",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'file'",134],";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$field_name",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","strtolower",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","randomMachineName",135],"(",")",")",";",["T_WHITESPACE","\n    ",135],["T_COMMENT","\/\/ Use the UI to add a new content type that also contains a file field.\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$edit",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",["T_WHITESPACE","\n      ",137],["T_CONSTANT_ENCAPSED_STRING","'name'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$type_name",138],",",["T_WHITESPACE","\n      ",138],["T_CONSTANT_ENCAPSED_STRING","'type'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$type_name",139],",",["T_WHITESPACE","\n    ",139],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","drupalPostForm",141],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/add'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$edit",141],",",["T_WHITESPACE"," ",141],["T_STRING","t",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and manage fields'",141],")",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$edit",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",["T_WHITESPACE","\n      ",142],["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$field_type",143],",",["T_WHITESPACE","\n      ",143],["T_CONSTANT_ENCAPSED_STRING","'field_name'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$field_name",144],",",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'label'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","randomString",145],"(",")",",",["T_WHITESPACE","\n    ",145],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","drupalPostForm",147],"(",["T_CONSTANT_ENCAPSED_STRING","'\/admin\/structure\/types\/manage\/'",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_VARIABLE","$type_name",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'\/fields\/add-field'",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$edit",147],",",["T_WHITESPACE"," ",147],["T_STRING","t",147],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and continue'",147],")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","drupalPostForm",148],"(",["T_STRING","NULL",148],",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",")",",",["T_WHITESPACE"," ",148],["T_STRING","t",148],"(",["T_CONSTANT_ENCAPSED_STRING","'Save field settings'",148],")",")",";",["T_WHITESPACE","\n    ",148],["T_COMMENT","\/\/ Ensure the description field is selected on the field instance settings\n",149],["T_WHITESPACE","    ",150],["T_COMMENT","\/\/ form. That's what this test is all about.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$edit",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'settings[description_field]'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_STRING","TRUE",152],",",["T_WHITESPACE","\n    ",152],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","drupalPostForm",154],"(",["T_STRING","NULL",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$edit",154],",",["T_WHITESPACE"," ",154],["T_STRING","t",154],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",154],")",")",";",["T_WHITESPACE","\n    ",154],["T_COMMENT","\/\/ Add a node of our new type and upload a file to it.\n",155],["T_WHITESPACE","    ",156],["T_VARIABLE","$file",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","current",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","drupalGetTestFiles",156],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",156],")",")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$title",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","randomString",157],"(",")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$edit",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",["T_WHITESPACE","\n      ",158],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$title",159],",",["T_WHITESPACE","\n      ",159],["T_CONSTANT_ENCAPSED_STRING","'files[field_'",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_VARIABLE","$field_name",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'_0]'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_STRING","drupal_realpath",160],"(",["T_VARIABLE","$file",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","uri",160],")",",",["T_WHITESPACE","\n    ",160],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","drupalPostForm",162],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/'",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_VARIABLE","$type_name",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$edit",162],",",["T_WHITESPACE"," ",162],["T_STRING","t",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and publish'",162],")",")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$node",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","drupalGetNodeByTitle",163],"(",["T_VARIABLE","$title",163],")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","drupalGet",164],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_VARIABLE","$node",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","id",164],"(",")",["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",164],")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertText",165],"(",["T_STRING","t",165],"(",["T_CONSTANT_ENCAPSED_STRING","'The description may be used as the label of the link to the file.'",165],")",")",";",["T_WHITESPACE","\n  ",165],"}",["T_WHITESPACE","\n\n",166],"}",["T_WHITESPACE","\n",168]]
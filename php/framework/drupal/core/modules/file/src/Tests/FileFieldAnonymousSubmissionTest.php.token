[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","node",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Node",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","user",6],["T_NS_SEPARATOR","\\",6],["T_STRING","RoleInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","file",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","File",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Confirm that file field submissions work correctly for anonymous visitors.\n *\n * @group file\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","FileFieldAnonymousSubmissionTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","FileFieldTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",16],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","setUp",19],"(",")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n    ",19],["T_STRING","parent",20],["T_DOUBLE_COLON","::",20],["T_STRING","setUp",20],"(",")",";",["T_WHITESPACE","\n    ",20],["T_COMMENT","\/\/ Set up permissions for anonymous attacker user.\n",21],["T_WHITESPACE","    ",22],["T_STRING","user_role_change_permissions",22],"(",["T_STRING","RoleInterface",22],["T_DOUBLE_COLON","::",22],["T_STRING","ANONYMOUS_ID",22],",",["T_WHITESPACE"," ",22],["T_ARRAY","array",22],"(",["T_WHITESPACE","\n      ",22],["T_CONSTANT_ENCAPSED_STRING","'create article content'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_STRING","TRUE",23],",",["T_WHITESPACE","\n      ",23],["T_CONSTANT_ENCAPSED_STRING","'access content'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_STRING","TRUE",24],",",["T_WHITESPACE","\n    ",24],")",")",";",["T_WHITESPACE","\n  ",25],"}",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Tests the basic node submission for an anonymous visitor.\n   *\/",28],["T_WHITESPACE","\n  ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","testAnonymousNode",31],"(",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$bundle_label",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'Article'",32],";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$node_title",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'test page'",33],";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Load the node form.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalLogout",36],"(",")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","drupalGet",37],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",37],")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertResponse",38],"(",["T_LNUMBER","200",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Loaded the article node form.'",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertText",39],"(",["T_STRING","strip_tags",39],"(",["T_STRING","t",39],"(",["T_CONSTANT_ENCAPSED_STRING","'Create @name'",39],",",["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$bundle_label",39],")",")",")",")",";",["T_WHITESPACE","\n\n    ",39],["T_VARIABLE","$edit",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_WHITESPACE","\n      ",41],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$node_title",42],",",["T_WHITESPACE","\n      ",42],["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'Test article'",43],",",["T_WHITESPACE","\n    ",43],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","drupalPostForm",45],"(",["T_STRING","NULL",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$edit",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Save'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertResponse",46],"(",["T_LNUMBER","200",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$t_args",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'@type'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$bundle_label",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'%title'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$node_title",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertText",48],"(",["T_STRING","strip_tags",48],"(",["T_STRING","t",48],"(",["T_CONSTANT_ENCAPSED_STRING","'@type %title has been created.'",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$t_args",48],")",")",",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'The node was created.'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$matches",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_IF","if",50],["T_WHITESPACE"," ",50],"(",["T_STRING","preg_match",50],"(",["T_CONSTANT_ENCAPSED_STRING","'@node\/(\\d+)$@'",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getUrl",50],"(",")",",",["T_WHITESPACE"," ",50],["T_VARIABLE","$matches",50],")",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$nid",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","end",51],"(",["T_VARIABLE","$matches",51],")",";",["T_WHITESPACE","\n      ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertNotEqual",52],"(",["T_VARIABLE","$nid",52],",",["T_WHITESPACE"," ",52],["T_LNUMBER","0",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'The node ID was extracted from the URL.'",52],")",";",["T_WHITESPACE","\n      ",52],["T_VARIABLE","$node",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","Node",53],["T_DOUBLE_COLON","::",53],["T_STRING","load",53],"(",["T_VARIABLE","$nid",53],")",";",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertNotEqual",54],"(",["T_VARIABLE","$node",54],",",["T_WHITESPACE"," ",54],["T_STRING","NULL",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'The node was loaded successfully.'",54],")",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Tests file submission for an anonymous visitor.\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testAnonymousNodeWithFile",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$bundle_label",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Article'",62],";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$node_title",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'Test page'",63],";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","createFileField",64],"(",["T_CONSTANT_ENCAPSED_STRING","'field_image'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'node'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'article'",64],",",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",",",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'file_extensions'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'txt png'",64],")",")",";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Load the node form.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","drupalLogout",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","drupalGet",68],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertResponse",69],"(",["T_LNUMBER","200",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'Loaded the article node form.'",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertText",70],"(",["T_STRING","strip_tags",70],"(",["T_STRING","t",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Create @name'",70],",",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$bundle_label",70],")",")",")",")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Generate an image file.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$image",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getTestFile",73],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",73],")",";",["T_WHITESPACE","\n\n    ",73],["T_COMMENT","\/\/ Submit the form.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$edit",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$node_title",77],",",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'Test article'",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'files[field_image_0]'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","container",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","get",79],"(",["T_CONSTANT_ENCAPSED_STRING","'file_system'",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","realpath",79],"(",["T_VARIABLE","$image",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getFileUri",79],"(",")",")",",",["T_WHITESPACE","\n    ",79],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","drupalPostForm",81],"(",["T_STRING","NULL",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$edit",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'Save'",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertResponse",82],"(",["T_LNUMBER","200",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$t_args",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_CONSTANT_ENCAPSED_STRING","'@type'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$bundle_label",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'%title'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$node_title",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertText",84],"(",["T_STRING","strip_tags",84],"(",["T_STRING","t",84],"(",["T_CONSTANT_ENCAPSED_STRING","'@type %title has been created.'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$t_args",84],")",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'The node was created.'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$matches",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",")",";",["T_WHITESPACE","\n    ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_STRING","preg_match",86],"(",["T_CONSTANT_ENCAPSED_STRING","'@node\/(\\d+)$@'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getUrl",86],"(",")",",",["T_WHITESPACE"," ",86],["T_VARIABLE","$matches",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_VARIABLE","$nid",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","end",87],"(",["T_VARIABLE","$matches",87],")",";",["T_WHITESPACE","\n      ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertNotEqual",88],"(",["T_VARIABLE","$nid",88],",",["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'The node ID was extracted from the URL.'",88],")",";",["T_WHITESPACE","\n      ",88],["T_VARIABLE","$node",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","Node",89],["T_DOUBLE_COLON","::",89],["T_STRING","load",89],"(",["T_VARIABLE","$nid",89],")",";",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertNotEqual",90],"(",["T_VARIABLE","$node",90],",",["T_WHITESPACE"," ",90],["T_STRING","NULL",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'The node was loaded successfully.'",90],")",";",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertFileExists",91],"(",["T_STRING","File",91],["T_DOUBLE_COLON","::",91],["T_STRING","load",91],"(",["T_VARIABLE","$node",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","field_image",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","target_id",91],")",",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'The image was uploaded successfully.'",91],")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n  ",92],"}",["T_WHITESPACE","\n\n  ",93],["T_DOC_COMMENT","\/**\n   * Tests file submission for an anonymous visitor with a missing node title.\n   *\/",95],["T_WHITESPACE","\n  ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","testAnonymousNodeWithFileWithoutTitle",98],"(",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","drupalLogout",99],"(",")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","doTestNodeWithFileWithoutTitle",100],"(",")",";",["T_WHITESPACE","\n  ",100],"}",["T_WHITESPACE","\n\n  ",101],["T_DOC_COMMENT","\/**\n   * Tests file submission for an authenticated user with a missing node title.\n   *\/",103],["T_WHITESPACE","\n  ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","testAuthenticatedNodeWithFileWithoutTitle",106],"(",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$admin_user",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","drupalCreateUser",107],"(",["T_ARRAY","array",107],"(",["T_WHITESPACE","\n      ",107],["T_CONSTANT_ENCAPSED_STRING","'bypass node access'",108],",",["T_WHITESPACE","\n      ",108],["T_CONSTANT_ENCAPSED_STRING","'access content overview'",109],",",["T_WHITESPACE","\n      ",109],["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",110],",",["T_WHITESPACE","\n    ",110],")",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","drupalLogin",112],"(",["T_VARIABLE","$admin_user",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","doTestNodeWithFileWithoutTitle",113],"(",")",";",["T_WHITESPACE","\n  ",113],"}",["T_WHITESPACE","\n\n  ",114],["T_DOC_COMMENT","\/**\n   * Helper method to test file submissions with missing node titles.\n   *\/",116],["T_WHITESPACE","\n  ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","doTestNodeWithFileWithoutTitle",119],"(",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$bundle_label",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'Article'",120],";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$node_title",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'Test page'",121],";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","createFileField",122],"(",["T_CONSTANT_ENCAPSED_STRING","'field_image'",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'node'",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'article'",122],",",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",")",",",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",["T_CONSTANT_ENCAPSED_STRING","'file_extensions'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'txt png'",122],")",")",";",["T_WHITESPACE","\n\n    ",122],["T_COMMENT","\/\/ Load the node form.\n",124],["T_WHITESPACE","    ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","drupalGet",125],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertResponse",126],"(",["T_LNUMBER","200",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'Loaded the article node form.'",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertText",127],"(",["T_STRING","strip_tags",127],"(",["T_STRING","t",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Create @name'",127],",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$bundle_label",127],")",")",")",")",";",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ Generate an image file.\n",129],["T_WHITESPACE","    ",130],["T_VARIABLE","$image",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getTestFile",130],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",130],")",";",["T_WHITESPACE","\n\n    ",130],["T_COMMENT","\/\/ Submit the form but exclude the title field.\n",132],["T_WHITESPACE","    ",133],["T_VARIABLE","$edit",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_WHITESPACE","\n      ",133],["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'Test article'",134],",",["T_WHITESPACE","\n      ",134],["T_CONSTANT_ENCAPSED_STRING","'files[field_image_0]'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","container",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_CONSTANT_ENCAPSED_STRING","'file_system'",135],")",["T_OBJECT_OPERATOR","->",135],["T_STRING","realpath",135],"(",["T_VARIABLE","$image",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getFileUri",135],"(",")",")",",",["T_WHITESPACE","\n    ",135],")",";",["T_WHITESPACE","\n    ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","loggedInUser",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$label",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'Save'",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n    ",139],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n      ",140],["T_VARIABLE","$label",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'Save and publish'",141],";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","drupalPostForm",143],"(",["T_STRING","NULL",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$edit",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$label",143],")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertResponse",144],"(",["T_LNUMBER","200",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$t_args",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",["T_CONSTANT_ENCAPSED_STRING","'@type'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$bundle_label",145],",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'%title'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$node_title",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertNoText",146],"(",["T_STRING","strip_tags",146],"(",["T_STRING","t",146],"(",["T_CONSTANT_ENCAPSED_STRING","'@type %title has been created.'",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$t_args",146],")",")",",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'The node was created.'",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertText",147],"(",["T_CONSTANT_ENCAPSED_STRING","'Title field is required.'",147],")",";",["T_WHITESPACE","\n\n    ",147],["T_COMMENT","\/\/ Submit the form again but this time with the missing title field. This\n",149],["T_WHITESPACE","    ",150],["T_COMMENT","\/\/ should still work.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$edit",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$node_title",152],",",["T_WHITESPACE","\n    ",152],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","drupalPostForm",154],"(",["T_STRING","NULL",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$edit",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$label",154],")",";",["T_WHITESPACE","\n\n    ",154],["T_COMMENT","\/\/ Confirm the final submission actually worked.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$t_args",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],"(",["T_CONSTANT_ENCAPSED_STRING","'@type'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$bundle_label",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'%title'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$node_title",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertText",158],"(",["T_STRING","strip_tags",158],"(",["T_STRING","t",158],"(",["T_CONSTANT_ENCAPSED_STRING","'@type %title has been created.'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$t_args",158],")",")",",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'The node was created.'",158],")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$matches",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",")",";",["T_WHITESPACE","\n    ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_STRING","preg_match",160],"(",["T_CONSTANT_ENCAPSED_STRING","'@node\/(\\d+)$@'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getUrl",160],"(",")",",",["T_WHITESPACE"," ",160],["T_VARIABLE","$matches",160],")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n      ",160],["T_VARIABLE","$nid",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","end",161],"(",["T_VARIABLE","$matches",161],")",";",["T_WHITESPACE","\n      ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertNotEqual",162],"(",["T_VARIABLE","$nid",162],",",["T_WHITESPACE"," ",162],["T_LNUMBER","0",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'The node ID was extracted from the URL.'",162],")",";",["T_WHITESPACE","\n      ",162],["T_VARIABLE","$node",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","Node",163],["T_DOUBLE_COLON","::",163],["T_STRING","load",163],"(",["T_VARIABLE","$nid",163],")",";",["T_WHITESPACE","\n      ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","assertNotEqual",164],"(",["T_VARIABLE","$node",164],",",["T_WHITESPACE"," ",164],["T_STRING","NULL",164],",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'The node was loaded successfully.'",164],")",";",["T_WHITESPACE","\n      ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertFileExists",165],"(",["T_STRING","File",165],["T_DOUBLE_COLON","::",165],["T_STRING","load",165],"(",["T_VARIABLE","$node",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","field_image",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","target_id",165],")",",",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'The image was uploaded successfully.'",165],")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n  ",166],"}",["T_WHITESPACE","\n\n",167],"}",["T_WHITESPACE","\n",169]]
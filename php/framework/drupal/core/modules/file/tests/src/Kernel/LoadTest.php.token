[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","file",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","File",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests \\Drupal\\file\\Entity\\File::load().\n *\n * @group file\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","LoadTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","FileManagedUnitTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n  ",12],["T_DOC_COMMENT","\/**\n   * Try to load a non-existent file by fid.\n   *\/",13],["T_WHITESPACE","\n  ",15],["T_FUNCTION","function",16],["T_WHITESPACE"," ",16],["T_STRING","testLoadMissingFid",16],"(",")",["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n    ",16],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","assertFalse",17],"(",["T_STRING","File",17],["T_DOUBLE_COLON","::",17],["T_STRING","load",17],"(","-",["T_LNUMBER","1",17],")",",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'Try to load an invalid fid fails.'",17],")",";",["T_WHITESPACE","\n    ",17],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","assertFileHooksCalled",18],"(",["T_ARRAY","array",18],"(",")",")",";",["T_WHITESPACE","\n  ",18],"}",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Try to load a non-existent file by URI.\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","testLoadMissingFilepath",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$files",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","entity_load_multiple_by_properties",25],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",25],",",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'uri'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'foobar:\/\/misc\/druplicon.png'",25],")",")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","assertFalse",26],"(",["T_STRING","reset",26],"(",["T_VARIABLE","$files",26],")",",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"Try to load a file that doesn't exist in the database fails.\"",26],")",";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","assertFileHooksCalled",27],"(",["T_ARRAY","array",27],"(",")",")",";",["T_WHITESPACE","\n  ",27],"}",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Try to load a non-existent file by status.\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","testLoadInvalidStatus",33],"(",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$files",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","entity_load_multiple_by_properties",34],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",34],",",["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],"-",["T_LNUMBER","99",34],")",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertFalse",35],"(",["T_STRING","reset",35],"(",["T_VARIABLE","$files",35],")",",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'Trying to load a file with an invalid status fails.'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","assertFileHooksCalled",36],"(",["T_ARRAY","array",36],"(",")",")",";",["T_WHITESPACE","\n  ",36],"}",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * Load a single file and ensure that the correct values are returned.\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","testSingleValues",42],"(",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_COMMENT","\/\/ Create a new file entity from scratch so we know the values.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$file",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","createFile",44],"(",["T_CONSTANT_ENCAPSED_STRING","'druplicon.txt'",44],",",["T_WHITESPACE"," ",44],["T_STRING","NULL",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'public'",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$by_fid_file",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","File",45],["T_DOUBLE_COLON","::",45],["T_STRING","load",45],"(",["T_VARIABLE","$file",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","id",45],"(",")",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertFileHookCalled",46],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertTrue",47],"(",["T_STRING","is_object",47],"(",["T_VARIABLE","$by_fid_file",47],")",",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\file\\Entity\\File::load() returned an object.'",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertEqual",48],"(",["T_VARIABLE","$by_fid_file",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","id",48],"(",")",",",["T_WHITESPACE"," ",48],["T_VARIABLE","$file",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","id",48],"(",")",",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'Loading by fid got the same fid.'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'File'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertEqual",49],"(",["T_VARIABLE","$by_fid_file",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getFileUri",49],"(",")",",",["T_WHITESPACE"," ",49],["T_VARIABLE","$file",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getFileUri",49],"(",")",",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Loading by fid got the correct filepath.'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'File'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertEqual",50],"(",["T_VARIABLE","$by_fid_file",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getFilename",50],"(",")",",",["T_WHITESPACE"," ",50],["T_VARIABLE","$file",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getFilename",50],"(",")",",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'Loading by fid got the correct filename.'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'File'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertEqual",51],"(",["T_VARIABLE","$by_fid_file",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getMimeType",51],"(",")",",",["T_WHITESPACE"," ",51],["T_VARIABLE","$file",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getMimeType",51],"(",")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Loading by fid got the correct MIME type.'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'File'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertEqual",52],"(",["T_VARIABLE","$by_fid_file",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","isPermanent",52],"(",")",",",["T_WHITESPACE"," ",52],["T_VARIABLE","$file",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","isPermanent",52],"(",")",",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Loading by fid got the correct status.'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'File'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertTrue",53],"(",["T_VARIABLE","$by_fid_file",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","file_test",53],"[",["T_CONSTANT_ENCAPSED_STRING","'loaded'",53],"]",",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'file_test_file_load() was able to modify the file during load.'",53],")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * This will test loading file data from the database.\n   *\/",56],["T_WHITESPACE","\n  ",58],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","testMultiple",59],"(",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_COMMENT","\/\/ Create a new file entity.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$file",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","createFile",61],"(",["T_CONSTANT_ENCAPSED_STRING","'druplicon.txt'",61],",",["T_WHITESPACE"," ",61],["T_STRING","NULL",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'public'",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Load by path.\n",63],["T_WHITESPACE","    ",64],["T_STRING","file_test_reset",64],"(",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$by_path_files",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","entity_load_multiple_by_properties",65],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",65],",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'uri'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$file",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getFileUri",65],"(",")",")",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertFileHookCalled",66],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertEqual",67],"(",["T_LNUMBER","1",67],",",["T_WHITESPACE"," ",67],["T_STRING","count",67],"(",["T_VARIABLE","$by_path_files",67],")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'entity_load_multiple_by_properties() returned an array of the correct size.'",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$by_path_file",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","reset",68],"(",["T_VARIABLE","$by_path_files",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertTrue",69],"(",["T_VARIABLE","$by_path_file",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","file_test",69],"[",["T_CONSTANT_ENCAPSED_STRING","'loaded'",69],"]",",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'file_test_file_load() was able to modify the file during load.'",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertEqual",70],"(",["T_VARIABLE","$by_path_file",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","id",70],"(",")",",",["T_WHITESPACE"," ",70],["T_VARIABLE","$file",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","id",70],"(",")",",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Loading by filepath got the correct fid.'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'File'",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Load by fid.\n",72],["T_WHITESPACE","    ",73],["T_STRING","file_test_reset",73],"(",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$by_fid_files",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","File",74],["T_DOUBLE_COLON","::",74],["T_STRING","loadMultiple",74],"(",["T_ARRAY","array",74],"(",["T_VARIABLE","$file",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","id",74],"(",")",")",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertFileHooksCalled",75],"(",["T_ARRAY","array",75],"(",")",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_LNUMBER","1",76],",",["T_WHITESPACE"," ",76],["T_STRING","count",76],"(",["T_VARIABLE","$by_fid_files",76],")",",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\file\\Entity\\File::loadMultiple() returned an array of the correct size.'",76],")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$by_fid_file",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","reset",77],"(",["T_VARIABLE","$by_fid_files",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertTrue",78],"(",["T_VARIABLE","$by_fid_file",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","file_test",78],"[",["T_CONSTANT_ENCAPSED_STRING","'loaded'",78],"]",",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'file_test_file_load() was able to modify the file during load.'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertEqual",79],"(",["T_VARIABLE","$by_fid_file",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getFileUri",79],"(",")",",",["T_WHITESPACE"," ",79],["T_VARIABLE","$file",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getFileUri",79],"(",")",",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'Loading by fid got the correct filepath.'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'File'",79],")",";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * Loads a single file and ensure that the correct values are returned.\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","testUuidValues",85],"(",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_COMMENT","\/\/ Create a new file entity from scratch so we know the values.\n",86],["T_WHITESPACE","    ",87],["T_VARIABLE","$file",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","createFile",87],"(",["T_CONSTANT_ENCAPSED_STRING","'druplicon.txt'",87],",",["T_WHITESPACE"," ",87],["T_STRING","NULL",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'public'",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$file",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","save",88],"(",")",";",["T_WHITESPACE","\n    ",88],["T_STRING","file_test_reset",89],"(",")",";",["T_WHITESPACE","\n\n    ",89],["T_VARIABLE","$by_uuid_file",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Drupal",91],["T_DOUBLE_COLON","::",91],["T_STRING","entityManager",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","loadEntityByUuid",91],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$file",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","uuid",91],"(",")",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertFileHookCalled",92],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertTrue",93],"(",["T_STRING","is_object",93],"(",["T_VARIABLE","$by_uuid_file",93],")",",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal::entityManager()->loadEntityByUuid() returned a file object.'",93],")",";",["T_WHITESPACE","\n    ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","is_object",94],"(",["T_VARIABLE","$by_uuid_file",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n      ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertEqual",95],"(",["T_VARIABLE","$by_uuid_file",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","id",95],"(",")",",",["T_WHITESPACE"," ",95],["T_VARIABLE","$file",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","id",95],"(",")",",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'Loading by UUID got the same fid.'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'File'",95],")",";",["T_WHITESPACE","\n      ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertTrue",96],"(",["T_VARIABLE","$by_uuid_file",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","file_test",96],"[",["T_CONSTANT_ENCAPSED_STRING","'loaded'",96],"]",",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'file_test_file_load() was able to modify the file during load.'",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n  ",97],"}",["T_WHITESPACE","\n\n",98],"}",["T_WHITESPACE","\n",100]]
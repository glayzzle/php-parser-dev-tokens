[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","file",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","File",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests the functions used to validate uploaded files.\n *\n * @group file\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","ValidatorTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","FileManagedUnitTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * An image file.\n   *\n   * @var \\Drupal\\file\\FileInterface\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$image",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * A file which is not an image.\n   *\n   * @var \\Drupal\\file\\Entity\\File\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$nonImage",26],";",["T_WHITESPACE","\n\n  ",26],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","setUp",28],"(",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_STRING","parent",29],["T_DOUBLE_COLON","::",29],["T_STRING","setUp",29],"(",")",";",["T_WHITESPACE","\n\n    ",29],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","image",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","File",31],["T_DOUBLE_COLON","::",31],["T_STRING","create",31],"(",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","image",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","setFileUri",32],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/druplicon.png'",32],")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","image",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","setFilename",33],"(",["T_STRING","drupal_basename",33],"(",["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","image",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getFileUri",33],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",33],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","nonImage",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","File",35],["T_DOUBLE_COLON","::",35],["T_STRING","create",35],"(",")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","nonImage",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","setFileUri",36],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/assets\/vendor\/jquery\/jquery.min.js'",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","nonImage",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","setFilename",37],"(",["T_STRING","drupal_basename",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","nonImage",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getFileUri",37],"(",")",")",")",";",["T_WHITESPACE","\n  ",37],"}",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Test the file_validate_extensions() function.\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","testFileValidateExtensions",43],"(",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$file",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","File",44],["T_DOUBLE_COLON","::",44],["T_STRING","create",44],"(","[",["T_CONSTANT_ENCAPSED_STRING","'filename'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'asdf.txt'",44],"]",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$errors",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","file_validate_extensions",45],"(",["T_VARIABLE","$file",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'asdf txt pork'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertEqual",46],"(",["T_STRING","count",46],"(",["T_VARIABLE","$errors",46],")",",",["T_WHITESPACE"," ",46],["T_LNUMBER","0",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'Valid extension accepted.'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'File'",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_VARIABLE","$file",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setFilename",48],"(",["T_CONSTANT_ENCAPSED_STRING","'asdf.txt'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$errors",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","file_validate_extensions",49],"(",["T_VARIABLE","$file",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'exe png'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertEqual",50],"(",["T_STRING","count",50],"(",["T_VARIABLE","$errors",50],")",",",["T_WHITESPACE"," ",50],["T_LNUMBER","1",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'Invalid extension blocked.'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'File'",50],")",";",["T_WHITESPACE","\n  ",50],"}",["T_WHITESPACE","\n\n  ",51],["T_DOC_COMMENT","\/**\n   * This ensures a specific file is actually an image.\n   *\/",53],["T_WHITESPACE","\n  ",55],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","testFileValidateIsImage",56],"(",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertTrue",57],"(",["T_STRING","file_exists",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","image",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getFileUri",57],"(",")",")",",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'The image being tested exists.'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'File'",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$errors",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","file_validate_is_image",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","image",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertEqual",59],"(",["T_STRING","count",59],"(",["T_VARIABLE","$errors",59],")",",",["T_WHITESPACE"," ",59],["T_LNUMBER","0",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'No error reported for our image file.'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'File'",59],")",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertTrue",61],"(",["T_STRING","file_exists",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","nonImage",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getFileUri",61],"(",")",")",",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'The non-image being tested exists.'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'File'",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$errors",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","file_validate_is_image",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","nonImage",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertEqual",63],"(",["T_STRING","count",63],"(",["T_VARIABLE","$errors",63],")",",",["T_WHITESPACE"," ",63],["T_LNUMBER","1",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'An error reported for our non-image file.'",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'File'",63],")",";",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * This ensures the resolution of a specific file is within bounds.\n   *\n   * The image will be resized if it's too large.\n   *\/",66],["T_WHITESPACE","\n  ",70],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","testFileValidateImageResolution",71],"(",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n    ",71],["T_COMMENT","\/\/ Non-images.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$errors",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","file_validate_image_resolution",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","nonImage",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertEqual",74],"(",["T_STRING","count",74],"(",["T_VARIABLE","$errors",74],")",",",["T_WHITESPACE"," ",74],["T_LNUMBER","0",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'Should not get any errors for a non-image file.'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'File'",74],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$errors",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","file_validate_image_resolution",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","nonImage",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'50x50'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'100x100'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_STRING","count",76],"(",["T_VARIABLE","$errors",76],")",",",["T_WHITESPACE"," ",76],["T_LNUMBER","0",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'Do not check the resolution on non files.'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'File'",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ Minimum size.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$errors",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","file_validate_image_resolution",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","image",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertEqual",80],"(",["T_STRING","count",80],"(",["T_VARIABLE","$errors",80],")",",",["T_WHITESPACE"," ",80],["T_LNUMBER","0",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'No errors for an image when there is no minimum or maximum resolution.'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'File'",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$errors",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","file_validate_image_resolution",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","image",81],",",["T_WHITESPACE"," ",81],["T_LNUMBER","0",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'200x1'",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertEqual",82],"(",["T_STRING","count",82],"(",["T_VARIABLE","$errors",82],")",",",["T_WHITESPACE"," ",82],["T_LNUMBER","1",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'Got an error for an image that was not wide enough.'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'File'",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$errors",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","file_validate_image_resolution",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","image",83],",",["T_WHITESPACE"," ",83],["T_LNUMBER","0",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'1x200'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertEqual",84],"(",["T_STRING","count",84],"(",["T_VARIABLE","$errors",84],")",",",["T_WHITESPACE"," ",84],["T_LNUMBER","1",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'Got an error for an image that was not tall enough.'",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'File'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$errors",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","file_validate_image_resolution",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","image",85],",",["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'200x200'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertEqual",86],"(",["T_STRING","count",86],"(",["T_VARIABLE","$errors",86],")",",",["T_WHITESPACE"," ",86],["T_LNUMBER","1",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'Small images report an error.'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'File'",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Maximum size.\n",88],["T_WHITESPACE","    ",89],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","container",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","get",89],"(",["T_CONSTANT_ENCAPSED_STRING","'image.factory'",89],")",["T_OBJECT_OPERATOR","->",89],["T_STRING","getToolkitId",89],"(",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n      ",89],["T_COMMENT","\/\/ Copy the image so that the original doesn't get resized.\n",90],["T_WHITESPACE","      ",91],["T_STRING","copy",91],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/druplicon.png'",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/druplicon.png'",91],")",";",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","image",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","setFileUri",92],"(",["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/druplicon.png'",92],")",";",["T_WHITESPACE","\n\n      ",92],["T_VARIABLE","$errors",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","file_validate_image_resolution",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","image",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'10x5'",94],")",";",["T_WHITESPACE","\n      ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertEqual",95],"(",["T_STRING","count",95],"(",["T_VARIABLE","$errors",95],")",",",["T_WHITESPACE"," ",95],["T_LNUMBER","0",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'No errors should be reported when an oversized image can be scaled down.'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'File'",95],")",";",["T_WHITESPACE","\n\n      ",95],["T_VARIABLE","$image",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","container",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","get",97],"(",["T_CONSTANT_ENCAPSED_STRING","'image.factory'",97],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","get",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","image",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getFileUri",97],"(",")",")",";",["T_WHITESPACE","\n      ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertTrue",98],"(",["T_VARIABLE","$image",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getWidth",98],"(",")",["T_WHITESPACE"," ",98],["T_IS_SMALLER_OR_EQUAL","<=",98],["T_WHITESPACE"," ",98],["T_LNUMBER","10",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'Image scaled to correct width.'",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'File'",98],")",";",["T_WHITESPACE","\n      ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertTrue",99],"(",["T_VARIABLE","$image",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getHeight",99],"(",")",["T_WHITESPACE"," ",99],["T_IS_SMALLER_OR_EQUAL","<=",99],["T_WHITESPACE"," ",99],["T_LNUMBER","5",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Image scaled to correct height.'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'File'",99],")",";",["T_WHITESPACE","\n\n      ",99],["T_COMMENT","\/\/ Once again, now with negative width and height to force an error.\n",101],["T_WHITESPACE","      ",102],["T_STRING","copy",102],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/druplicon.png'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/druplicon.png'",102],")",";",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","image",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","setFileUri",103],"(",["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/druplicon.png'",103],")",";",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$errors",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","file_validate_image_resolution",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","image",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'-10x-5'",104],")",";",["T_WHITESPACE","\n      ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertEqual",105],"(",["T_STRING","count",105],"(",["T_VARIABLE","$errors",105],")",",",["T_WHITESPACE"," ",105],["T_LNUMBER","1",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'An error reported for an oversized image that can not be scaled down.'",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'File'",105],")",";",["T_WHITESPACE","\n\n      ",105],["T_STRING","drupal_unlink",107],"(",["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/druplicon.png'",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n    ",108],["T_ELSE","else",109],["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n      ",109],["T_COMMENT","\/\/ TODO: should check that the error is returned if no toolkit is available.\n",110],["T_WHITESPACE","      ",111],["T_VARIABLE","$errors",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","file_validate_image_resolution",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","image",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'5x10'",111],")",";",["T_WHITESPACE","\n      ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertEqual",112],"(",["T_STRING","count",112],"(",["T_VARIABLE","$errors",112],")",",",["T_WHITESPACE"," ",112],["T_LNUMBER","1",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'Oversize images that cannot be scaled get an error.'",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'File'",112],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n  ",113],"}",["T_WHITESPACE","\n\n  ",114],["T_DOC_COMMENT","\/**\n   * This will ensure the filename length is valid.\n   *\/",116],["T_WHITESPACE","\n  ",118],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","testFileValidateNameLength",119],"(",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n    ",119],["T_COMMENT","\/\/ Create a new file entity.\n",120],["T_WHITESPACE","    ",121],["T_VARIABLE","$file",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","File",121],["T_DOUBLE_COLON","::",121],["T_STRING","create",121],"(",")",";",["T_WHITESPACE","\n\n    ",121],["T_COMMENT","\/\/ Add a filename with an allowed length and test it.\n",123],["T_WHITESPACE","    ",124],["T_VARIABLE","$file",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","setFilename",124],"(",["T_STRING","str_repeat",124],"(",["T_CONSTANT_ENCAPSED_STRING","'x'",124],",",["T_WHITESPACE"," ",124],["T_LNUMBER","240",124],")",")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertEqual",125],"(",["T_STRING","strlen",125],"(",["T_VARIABLE","$file",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getFilename",125],"(",")",")",",",["T_WHITESPACE"," ",125],["T_LNUMBER","240",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$errors",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","file_validate_name_length",126],"(",["T_VARIABLE","$file",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertEqual",127],"(",["T_STRING","count",127],"(",["T_VARIABLE","$errors",127],")",",",["T_WHITESPACE"," ",127],["T_LNUMBER","0",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'No errors reported for 240 length filename.'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'File'",127],")",";",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ Add a filename with a length too long and test it.\n",129],["T_WHITESPACE","    ",130],["T_VARIABLE","$file",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setFilename",130],"(",["T_STRING","str_repeat",130],"(",["T_CONSTANT_ENCAPSED_STRING","'x'",130],",",["T_WHITESPACE"," ",130],["T_LNUMBER","241",130],")",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$errors",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","file_validate_name_length",131],"(",["T_VARIABLE","$file",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertEqual",132],"(",["T_STRING","count",132],"(",["T_VARIABLE","$errors",132],")",",",["T_WHITESPACE"," ",132],["T_LNUMBER","1",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'An error reported for 241 length filename.'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'File'",132],")",";",["T_WHITESPACE","\n\n    ",132],["T_COMMENT","\/\/ Add a filename with an empty string and test it.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$file",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","setFilename",135],"(",["T_CONSTANT_ENCAPSED_STRING","''",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$errors",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","file_validate_name_length",136],"(",["T_VARIABLE","$file",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertEqual",137],"(",["T_STRING","count",137],"(",["T_VARIABLE","$errors",137],")",",",["T_WHITESPACE"," ",137],["T_LNUMBER","1",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'An error reported for 0 length filename.'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'File'",137],")",";",["T_WHITESPACE","\n  ",137],"}",["T_WHITESPACE","\n\n\n  ",138],["T_DOC_COMMENT","\/**\n   * Test file_validate_size().\n   *\/",141],["T_WHITESPACE","\n  ",143],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","testFileValidateSize",144],"(",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n    ",144],["T_COMMENT","\/\/ Create a file with a size of 1000 bytes, and quotas of only 1 byte.\n",145],["T_WHITESPACE","    ",146],["T_VARIABLE","$file",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","File",146],["T_DOUBLE_COLON","::",146],["T_STRING","create",146],"(","[",["T_CONSTANT_ENCAPSED_STRING","'filesize'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_LNUMBER","1000",146],"]",")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$errors",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","file_validate_size",147],"(",["T_VARIABLE","$file",147],",",["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],",",["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertEqual",148],"(",["T_STRING","count",148],"(",["T_VARIABLE","$errors",148],")",",",["T_WHITESPACE"," ",148],["T_LNUMBER","0",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'No limits means no errors.'",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'File'",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$errors",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","file_validate_size",149],"(",["T_VARIABLE","$file",149],",",["T_WHITESPACE"," ",149],["T_LNUMBER","1",149],",",["T_WHITESPACE"," ",149],["T_LNUMBER","0",149],")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertEqual",150],"(",["T_STRING","count",150],"(",["T_VARIABLE","$errors",150],")",",",["T_WHITESPACE"," ",150],["T_LNUMBER","1",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'Error for the file being over the limit.'",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'File'",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$errors",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","file_validate_size",151],"(",["T_VARIABLE","$file",151],",",["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],",",["T_WHITESPACE"," ",151],["T_LNUMBER","1",151],")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertEqual",152],"(",["T_STRING","count",152],"(",["T_VARIABLE","$errors",152],")",",",["T_WHITESPACE"," ",152],["T_LNUMBER","1",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'Error for the user being over their limit.'",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'File'",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$errors",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","file_validate_size",153],"(",["T_VARIABLE","$file",153],",",["T_WHITESPACE"," ",153],["T_LNUMBER","1",153],",",["T_WHITESPACE"," ",153],["T_LNUMBER","1",153],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertEqual",154],"(",["T_STRING","count",154],"(",["T_VARIABLE","$errors",154],")",",",["T_WHITESPACE"," ",154],["T_LNUMBER","2",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'Errors for both the file and their limit.'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'File'",154],")",";",["T_WHITESPACE","\n  ",154],"}",["T_WHITESPACE","\n\n",155],"}",["T_WHITESPACE","\n",157]]
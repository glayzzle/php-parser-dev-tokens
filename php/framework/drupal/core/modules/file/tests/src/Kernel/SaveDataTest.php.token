[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","file",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","File",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests the file_save_data() function.\n *\n * @group file\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","SaveDataTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","FileManagedUnitTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n  ",12],["T_DOC_COMMENT","\/**\n   * Test the file_save_data() function when no filename is provided.\n   *\/",13],["T_WHITESPACE","\n  ",15],["T_FUNCTION","function",16],["T_WHITESPACE"," ",16],["T_STRING","testWithoutFilename",16],"(",")",["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n    ",16],["T_VARIABLE","$contents",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","randomMachineName",17],"(",["T_LNUMBER","8",17],")",";",["T_WHITESPACE","\n\n    ",17],["T_VARIABLE","$result",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","file_save_data",19],"(",["T_VARIABLE","$contents",19],")",";",["T_WHITESPACE","\n    ",19],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","assertTrue",20],"(",["T_VARIABLE","$result",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'Unnamed file saved correctly.'",20],")",";",["T_WHITESPACE","\n\n    ",20],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","assertEqual",22],"(",["T_STRING","file_default_scheme",22],"(",")",",",["T_WHITESPACE"," ",22],["T_STRING","file_uri_scheme",22],"(",["T_VARIABLE","$result",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","getFileUri",22],"(",")",")",",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","\"File was placed in Drupal's files directory.\"",22],")",";",["T_WHITESPACE","\n    ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","assertEqual",23],"(",["T_VARIABLE","$result",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","getFilename",23],"(",")",",",["T_WHITESPACE"," ",23],["T_STRING","drupal_basename",23],"(",["T_VARIABLE","$result",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","getFileUri",23],"(",")",")",",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","\"Filename was set to the file's basename.\"",23],")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","assertEqual",24],"(",["T_VARIABLE","$contents",24],",",["T_WHITESPACE"," ",24],["T_STRING","file_get_contents",24],"(",["T_VARIABLE","$result",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getFileUri",24],"(",")",")",",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'Contents of the file are correct.'",24],")",";",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","assertEqual",25],"(",["T_VARIABLE","$result",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","getMimeType",25],"(",")",",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'application\/octet-stream'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'A MIME type was set.'",25],")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","assertTrue",26],"(",["T_VARIABLE","$result",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","isPermanent",26],"(",")",",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"The file's status was set to permanent.\"",26],")",";",["T_WHITESPACE","\n\n    ",26],["T_COMMENT","\/\/ Check that the correct hooks were called.\n",28],["T_WHITESPACE","    ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","assertFileHooksCalled",29],"(",["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",29],")",")",";",["T_WHITESPACE","\n\n    ",29],["T_COMMENT","\/\/ Verify that what was returned is what's in the database.\n",31],["T_WHITESPACE","    ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","assertFileUnchanged",32],"(",["T_VARIABLE","$result",32],",",["T_WHITESPACE"," ",32],["T_STRING","File",32],["T_DOUBLE_COLON","::",32],["T_STRING","load",32],"(",["T_VARIABLE","$result",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","id",32],"(",")",")",")",";",["T_WHITESPACE","\n  ",32],"}",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * Test the file_save_data() function when a filename is provided.\n   *\/",35],["T_WHITESPACE","\n  ",37],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testWithFilename",38],"(",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$contents",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","randomMachineName",39],"(",["T_LNUMBER","8",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Using filename with non-latin characters.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$filename",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'\u00d0\u00a2\u00d0\u00b5\u00d0\u00ba\u00d1\u0081\u00d1\u0082\u00d0\u00be\u00d0\u00b2\u00d1\u008b\u00d0\u00b9 \u00d1\u0084\u00d0\u00b0\u00d0\u00b9\u00d0\u00bb.txt'",42],";",["T_WHITESPACE","\n\n    ",42],["T_VARIABLE","$result",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","file_save_data",44],"(",["T_VARIABLE","$contents",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/'",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_VARIABLE","$filename",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertTrue",45],"(",["T_VARIABLE","$result",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Unnamed file saved correctly.'",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEqual",47],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",47],",",["T_WHITESPACE"," ",47],["T_STRING","file_uri_scheme",47],"(",["T_VARIABLE","$result",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getFileUri",47],"(",")",")",",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"File was placed in Drupal's files directory.\"",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertEqual",48],"(",["T_VARIABLE","$filename",48],",",["T_WHITESPACE"," ",48],["T_STRING","drupal_basename",48],"(",["T_VARIABLE","$result",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getFileUri",48],"(",")",")",",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'File was named correctly.'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertEqual",49],"(",["T_VARIABLE","$contents",49],",",["T_WHITESPACE"," ",49],["T_STRING","file_get_contents",49],"(",["T_VARIABLE","$result",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getFileUri",49],"(",")",")",",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Contents of the file are correct.'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertEqual",50],"(",["T_VARIABLE","$result",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getMimeType",50],"(",")",",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'text\/plain'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'A MIME type was set.'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertTrue",51],"(",["T_VARIABLE","$result",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","isPermanent",51],"(",")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","\"The file's status was set to permanent.\"",51],")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Check that the correct hooks were called.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertFileHooksCalled",54],"(",["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",54],")",")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Verify that what was returned is what's in the database.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertFileUnchanged",57],"(",["T_VARIABLE","$result",57],",",["T_WHITESPACE"," ",57],["T_STRING","File",57],["T_DOUBLE_COLON","::",57],["T_STRING","load",57],"(",["T_VARIABLE","$result",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","id",57],"(",")",")",")",";",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * Test file_save_data() when renaming around an existing file.\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","testExistingRename",63],"(",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_COMMENT","\/\/ Setup a file to overwrite.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$existing",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","createFile",65],"(",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$contents",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","randomMachineName",66],"(",["T_LNUMBER","8",66],")",";",["T_WHITESPACE","\n\n    ",66],["T_VARIABLE","$result",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","file_save_data",68],"(",["T_VARIABLE","$contents",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$existing",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getFileUri",68],"(",")",",",["T_WHITESPACE"," ",68],["T_STRING","FILE_EXISTS_RENAME",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertTrue",69],"(",["T_VARIABLE","$result",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'File saved successfully.'",69],")",";",["T_WHITESPACE","\n\n    ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertEqual",71],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",71],",",["T_WHITESPACE"," ",71],["T_STRING","file_uri_scheme",71],"(",["T_VARIABLE","$result",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getFileUri",71],"(",")",")",",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","\"File was placed in Drupal's files directory.\"",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertEqual",72],"(",["T_VARIABLE","$result",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getFilename",72],"(",")",",",["T_WHITESPACE"," ",72],["T_VARIABLE","$existing",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getFilename",72],"(",")",",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'Filename was set to the basename of the source, rather than that of the renamed file.'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertEqual",73],"(",["T_VARIABLE","$contents",73],",",["T_WHITESPACE"," ",73],["T_STRING","file_get_contents",73],"(",["T_VARIABLE","$result",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getFileUri",73],"(",")",")",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'Contents of the file are correct.'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertEqual",74],"(",["T_VARIABLE","$result",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getMimeType",74],"(",")",",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'application\/octet-stream'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'A MIME type was set.'",74],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertTrue",75],"(",["T_VARIABLE","$result",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","isPermanent",75],"(",")",",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","\"The file's status was set to permanent.\"",75],")",";",["T_WHITESPACE","\n\n    ",75],["T_COMMENT","\/\/ Check that the correct hooks were called.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertFileHooksCalled",78],"(",["T_ARRAY","array",78],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",78],")",")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Ensure that the existing file wasn't overwritten.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertDifferentFile",81],"(",["T_VARIABLE","$existing",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$result",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertFileUnchanged",82],"(",["T_VARIABLE","$existing",82],",",["T_WHITESPACE"," ",82],["T_STRING","File",82],["T_DOUBLE_COLON","::",82],["T_STRING","load",82],"(",["T_VARIABLE","$existing",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","id",82],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Verify that was returned is what's in the database.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertFileUnchanged",85],"(",["T_VARIABLE","$result",85],",",["T_WHITESPACE"," ",85],["T_STRING","File",85],["T_DOUBLE_COLON","::",85],["T_STRING","load",85],"(",["T_VARIABLE","$result",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","id",85],"(",")",")",")",";",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n  ",86],["T_DOC_COMMENT","\/**\n   * Test file_save_data() when replacing an existing file.\n   *\/",88],["T_WHITESPACE","\n  ",90],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","testExistingReplace",91],"(",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n    ",91],["T_COMMENT","\/\/ Setup a file to overwrite.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$existing",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","createFile",93],"(",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$contents",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","randomMachineName",94],"(",["T_LNUMBER","8",94],")",";",["T_WHITESPACE","\n\n    ",94],["T_VARIABLE","$result",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","file_save_data",96],"(",["T_VARIABLE","$contents",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$existing",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getFileUri",96],"(",")",",",["T_WHITESPACE"," ",96],["T_STRING","FILE_EXISTS_REPLACE",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertTrue",97],"(",["T_VARIABLE","$result",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'File saved successfully.'",97],")",";",["T_WHITESPACE","\n\n    ",97],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEqual",99],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",99],",",["T_WHITESPACE"," ",99],["T_STRING","file_uri_scheme",99],"(",["T_VARIABLE","$result",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getFileUri",99],"(",")",")",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","\"File was placed in Drupal's files directory.\"",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertEqual",100],"(",["T_VARIABLE","$result",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getFilename",100],"(",")",",",["T_WHITESPACE"," ",100],["T_VARIABLE","$existing",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getFilename",100],"(",")",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'Filename was set to the basename of the existing file, rather than preserving the original name.'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEqual",101],"(",["T_VARIABLE","$contents",101],",",["T_WHITESPACE"," ",101],["T_STRING","file_get_contents",101],"(",["T_VARIABLE","$result",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getFileUri",101],"(",")",")",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Contents of the file are correct.'",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertEqual",102],"(",["T_VARIABLE","$result",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getMimeType",102],"(",")",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'application\/octet-stream'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'A MIME type was set.'",102],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertTrue",103],"(",["T_VARIABLE","$result",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isPermanent",103],"(",")",",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"The file's status was set to permanent.\"",103],")",";",["T_WHITESPACE","\n\n    ",103],["T_COMMENT","\/\/ Check that the correct hooks were called.\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertFileHooksCalled",106],"(",["T_ARRAY","array",106],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'update'",106],")",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Verify that the existing file was re-used.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertSameFile",109],"(",["T_VARIABLE","$existing",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$result",109],")",";",["T_WHITESPACE","\n\n    ",109],["T_COMMENT","\/\/ Verify that what was returned is what's in the database.\n",111],["T_WHITESPACE","    ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertFileUnchanged",112],"(",["T_VARIABLE","$result",112],",",["T_WHITESPACE"," ",112],["T_STRING","File",112],["T_DOUBLE_COLON","::",112],["T_STRING","load",112],"(",["T_VARIABLE","$result",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","id",112],"(",")",")",")",";",["T_WHITESPACE","\n  ",112],"}",["T_WHITESPACE","\n\n  ",113],["T_DOC_COMMENT","\/**\n   * Test that file_save_data() fails overwriting an existing file.\n   *\/",115],["T_WHITESPACE","\n  ",117],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","testExistingError",118],"(",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$contents",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","randomMachineName",119],"(",["T_LNUMBER","8",119],")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$existing",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","createFile",120],"(",["T_STRING","NULL",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$contents",120],")",";",["T_WHITESPACE","\n\n    ",120],["T_COMMENT","\/\/ Check the overwrite error.\n",122],["T_WHITESPACE","    ",123],["T_VARIABLE","$result",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","file_save_data",123],"(",["T_CONSTANT_ENCAPSED_STRING","'asdf'",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$existing",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getFileUri",123],"(",")",",",["T_WHITESPACE"," ",123],["T_STRING","FILE_EXISTS_ERROR",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","assertFalse",124],"(",["T_VARIABLE","$result",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'Overwriting a file fails when FILE_EXISTS_ERROR is specified.'",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertEqual",125],"(",["T_VARIABLE","$contents",125],",",["T_WHITESPACE"," ",125],["T_STRING","file_get_contents",125],"(",["T_VARIABLE","$existing",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getFileUri",125],"(",")",")",",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'Contents of existing file were unchanged.'",125],")",";",["T_WHITESPACE","\n\n    ",125],["T_COMMENT","\/\/ Check that no hooks were called while failing.\n",127],["T_WHITESPACE","    ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertFileHooksCalled",128],"(",["T_ARRAY","array",128],"(",")",")",";",["T_WHITESPACE","\n\n    ",128],["T_COMMENT","\/\/ Ensure that the existing file wasn't overwritten.\n",130],["T_WHITESPACE","    ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertFileUnchanged",131],"(",["T_VARIABLE","$existing",131],",",["T_WHITESPACE"," ",131],["T_STRING","File",131],["T_DOUBLE_COLON","::",131],["T_STRING","load",131],"(",["T_VARIABLE","$existing",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","id",131],"(",")",")",")",";",["T_WHITESPACE","\n  ",131],"}",["T_WHITESPACE","\n\n",132],"}",["T_WHITESPACE","\n",134]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Handler",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Xss",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Kernel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ViewsKernelTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","views",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Views",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests the core Drupal\\views\\Plugin\\views\\field\\Custom handler.\n *\n * @group views\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","FieldCustomTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","ViewsKernelTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$testViews",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",21],")",";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",23],["T_WHITESPACE","\n  ",25],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","viewsData",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$data",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","parent",27],["T_DOUBLE_COLON","::",27],["T_STRING","viewsData",27],"(",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$data",28],"[",["T_CONSTANT_ENCAPSED_STRING","'views_test_data'",28],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",28],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field'",28],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",28],"]",["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'custom'",28],";",["T_WHITESPACE","\n    ",28],["T_RETURN","return",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$data",29],";",["T_WHITESPACE","\n  ",29],"}",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Ensure that custom fields work and doesn't escape unnecessary markup.\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","testFieldCustom",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$view",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","Views",36],["T_DOUBLE_COLON","::",36],["T_STRING","getView",36],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$view",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","setDisplay",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Alter the text of the field to a random string.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$random",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'<div>'",40],["T_WHITESPACE"," ",40],".",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","randomMachineName",40],"(",")",["T_WHITESPACE"," ",40],".",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'<\/div>'",40],";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$view",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","displayHandlers",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","overrideOption",41],"(",["T_CONSTANT_ENCAPSED_STRING","'fields'",41],",",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_WHITESPACE","\n      ",41],["T_CONSTANT_ENCAPSED_STRING","'name'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_WHITESPACE","\n        ",42],["T_CONSTANT_ENCAPSED_STRING","'id'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'name'",43],",",["T_WHITESPACE","\n        ",43],["T_CONSTANT_ENCAPSED_STRING","'table'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'views_test_data'",44],",",["T_WHITESPACE","\n        ",44],["T_CONSTANT_ENCAPSED_STRING","'field'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'name'",45],",",["T_WHITESPACE","\n        ",45],["T_CONSTANT_ENCAPSED_STRING","'relationship'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'none'",46],",",["T_WHITESPACE","\n        ",46],["T_CONSTANT_ENCAPSED_STRING","'alter'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_WHITESPACE","\n          ",47],["T_CONSTANT_ENCAPSED_STRING","'text'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$random",48],",",["T_WHITESPACE","\n        ",48],")",",",["T_WHITESPACE","\n      ",49],")",",",["T_WHITESPACE","\n    ",50],")",")",";",["T_WHITESPACE","\n\n    ",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","executeView",53],"(",["T_VARIABLE","$view",53],")",";",["T_WHITESPACE","\n\n    ",53],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEqual",55],"(",["T_VARIABLE","$random",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$view",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","style_plugin",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getField",55],"(",["T_LNUMBER","0",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'name'",55],")",")",";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Ensure that custom fields can use tokens.\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testFieldCustomTokens",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$view",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Views",62],["T_DOUBLE_COLON","::",62],["T_STRING","getView",62],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$view",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setDisplay",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_VARIABLE","$view",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","displayHandlers",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","overrideOption",65],"(",["T_CONSTANT_ENCAPSED_STRING","'fields'",65],",",["T_WHITESPACE"," ",65],"[",["T_WHITESPACE","\n      ",65],["T_CONSTANT_ENCAPSED_STRING","'age'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],"[",["T_WHITESPACE","\n        ",66],["T_CONSTANT_ENCAPSED_STRING","'id'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'age'",67],",",["T_WHITESPACE","\n        ",67],["T_CONSTANT_ENCAPSED_STRING","'exclude'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_STRING","TRUE",68],",",["T_WHITESPACE","\n        ",68],["T_CONSTANT_ENCAPSED_STRING","'table'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'views_test_data'",69],",",["T_WHITESPACE","\n        ",69],["T_CONSTANT_ENCAPSED_STRING","'field'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'age'",70],",",["T_WHITESPACE","\n      ",70],"]",",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'name'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],"[",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'id'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'name'",73],",",["T_WHITESPACE","\n        ",73],["T_CONSTANT_ENCAPSED_STRING","'table'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'views_test_data'",74],",",["T_WHITESPACE","\n        ",74],["T_CONSTANT_ENCAPSED_STRING","'field'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'name'",75],",",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'relationship'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'none'",76],",",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'alter'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],"[",["T_WHITESPACE","\n          ",77],["T_CONSTANT_ENCAPSED_STRING","'text'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'Amount of kittens: {{ age }}'",78],",",["T_WHITESPACE","\n        ",78],"]",",",["T_WHITESPACE","\n      ",79],"]",",",["T_WHITESPACE","\n    ",80],"]",")",";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",83],["T_WHITESPACE","\n    ",83],["T_VARIABLE","$renderer",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Drupal",84],["T_DOUBLE_COLON","::",84],["T_STRING","service",84],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$preview",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$view",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","preview",85],"(",")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$output",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$renderer",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","renderRoot",86],"(",["T_VARIABLE","$preview",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_VARIABLE","$expected_text",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'Amount of kittens: '",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_VARIABLE","$view",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","style_plugin",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getField",88],"(",["T_LNUMBER","0",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'age'",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertTrue",89],"(",["T_STRING","strpos",89],"(",["T_STRING_CAST","(string)",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$output",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$expected_text",89],")",",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'The views token has been successfully replaced.'",89],")",";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * Ensure that custom field content is XSS filtered.\n   *\/",92],["T_WHITESPACE","\n  ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","testCustomFieldXss",95],"(",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$view",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","Views",96],["T_DOUBLE_COLON","::",96],["T_STRING","getView",96],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$view",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","setDisplay",97],"(",")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ Alter the text of the field to include XSS.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$text",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'<script>alert(\"kittens\")<\/script>'",100],";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$view",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","displayHandlers",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",101],")",["T_OBJECT_OPERATOR","->",101],["T_STRING","overrideOption",101],"(",["T_CONSTANT_ENCAPSED_STRING","'fields'",101],",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_WHITESPACE","\n      ",101],["T_CONSTANT_ENCAPSED_STRING","'name'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_WHITESPACE","\n        ",102],["T_CONSTANT_ENCAPSED_STRING","'id'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'name'",103],",",["T_WHITESPACE","\n        ",103],["T_CONSTANT_ENCAPSED_STRING","'table'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'views_test_data'",104],",",["T_WHITESPACE","\n        ",104],["T_CONSTANT_ENCAPSED_STRING","'field'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'name'",105],",",["T_WHITESPACE","\n        ",105],["T_CONSTANT_ENCAPSED_STRING","'relationship'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'none'",106],",",["T_WHITESPACE","\n        ",106],["T_CONSTANT_ENCAPSED_STRING","'alter'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_WHITESPACE","\n          ",107],["T_CONSTANT_ENCAPSED_STRING","'text'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$text",108],",",["T_WHITESPACE","\n        ",108],")",",",["T_WHITESPACE","\n      ",109],")",",",["T_WHITESPACE","\n    ",110],")",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","executeView",112],"(",["T_VARIABLE","$view",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertEqual",113],"(",["T_STRING","Xss",113],["T_DOUBLE_COLON","::",113],["T_STRING","filter",113],"(",["T_VARIABLE","$text",113],")",",",["T_WHITESPACE"," ",113],["T_VARIABLE","$view",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","style_plugin",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getField",113],"(",["T_LNUMBER","0",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'name'",113],")",")",";",["T_WHITESPACE","\n  ",113],"}",["T_WHITESPACE","\n\n",114],"}",["T_WHITESPACE","\n",116]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","entity_test",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityTestMul",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldConfig",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldStorageConfig",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","language",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigurableLanguage",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","views",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Views",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests aggregate functionality of views, for example count.\n *\n * @group views\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","QueryGroupByTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","ViewsKernelTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$testViews",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",["T_CONSTANT_ENCAPSED_STRING","'test_group_by_in_filters'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'test_aggregate_count'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'test_group_by_count'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'test_group_by_count_multicardinality'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'test_group_by_field_not_within_bundle'",23],")",";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_STATIC","static",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$modules",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'system'",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'field'",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'user'",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'language'",30],")",";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * The storage for the test entity type.\n   *\n   * @var \\Drupal\\Core\\Entity\\Sql\\SqlContentEntityStorage\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$storage",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","setUp",42],"(",["T_VARIABLE","$import_test_views",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","TRUE",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_STRING","parent",43],["T_DOUBLE_COLON","::",43],["T_STRING","setUp",43],"(",")",";",["T_WHITESPACE","\n\n    ",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","installEntitySchema",45],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","installEntitySchema",46],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","installEntitySchema",47],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","storage",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","container",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",49],")",["T_OBJECT_OPERATOR","->",49],["T_STRING","getStorage",49],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_STRING","ConfigurableLanguage",51],["T_DOUBLE_COLON","::",51],["T_STRING","createFromLangcode",51],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",51],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","save",51],"(",")",";",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n\n  ",52],["T_DOC_COMMENT","\/**\n   * Tests aggregate count feature.\n   *\/",55],["T_WHITESPACE","\n  ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","testAggregateCount",58],"(",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","setupTestEntities",59],"(",")",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$view",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","Views",61],["T_DOUBLE_COLON","::",61],["T_STRING","getView",61],"(",["T_CONSTANT_ENCAPSED_STRING","'test_aggregate_count'",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","executeView",62],"(",["T_VARIABLE","$view",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertEqual",64],"(",["T_STRING","count",64],"(",["T_VARIABLE","$view",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","result",64],")",",",["T_WHITESPACE"," ",64],["T_LNUMBER","2",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Make sure the count of items is right.'",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$types",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",")",";",["T_WHITESPACE","\n    ",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$view",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","result",67],["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$item",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n      ",67],["T_COMMENT","\/\/ num_records is a alias for id.\n",68],["T_WHITESPACE","      ",69],["T_VARIABLE","$types",69],"[",["T_VARIABLE","$item",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","entity_test_name",69],"]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$item",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","num_records",69],";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertEqual",72],"(",["T_VARIABLE","$types",72],"[",["T_CONSTANT_ENCAPSED_STRING","'name1'",72],"]",",",["T_WHITESPACE"," ",72],["T_LNUMBER","4",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'Groupby the name: name1 returned the expected amount of results.'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertEqual",73],"(",["T_VARIABLE","$types",73],"[",["T_CONSTANT_ENCAPSED_STRING","'name2'",73],"]",",",["T_WHITESPACE"," ",73],["T_LNUMBER","3",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'Groupby the name: name2 returned the expected amount of results.'",73],")",";",["T_WHITESPACE","\n  ",73],"}",["T_WHITESPACE","\n\n  ",74],["T_DOC_COMMENT","\/**\n   * Provides a test helper which runs a view with some aggregation function.\n   *\n   * @param string|null $aggregation_function\n   *   Which aggregation function should be used, for example sum or count. If\n   *   NULL is passed the aggregation will be tested with no function.\n   * @param array $values\n   *   The expected views result.\n   *\/",76],["T_WHITESPACE","\n  ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","groupByTestHelper",85],"(",["T_VARIABLE","$aggregation_function",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$values",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setupTestEntities",86],"(",")",";",["T_WHITESPACE","\n\n    ",86],["T_VARIABLE","$view",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","Views",88],["T_DOUBLE_COLON","::",88],["T_STRING","getView",88],"(",["T_CONSTANT_ENCAPSED_STRING","'test_group_by_count'",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$view",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","setDisplay",89],"(",")",";",["T_WHITESPACE","\n    ",89],["T_COMMENT","\/\/ There is no need for a function in order to have aggregation.\n",90],["T_WHITESPACE","    ",91],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_EMPTY","empty",91],"(",["T_VARIABLE","$aggregation_function",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_COMMENT","\/\/ The test table has 2 fields ('id' and 'name'). We'll remove 'id'\n",92],["T_WHITESPACE","      ",93],["T_COMMENT","\/\/ because it's unique and will test aggregation on 'name'.\n",93],["T_WHITESPACE","      ",94],["T_UNSET","unset",94],"(",["T_VARIABLE","$view",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","displayHandlers",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","get",94],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","options",94],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",94],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",94],"]",")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n    ",95],["T_ELSE","else",96],["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$view",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","displayHandlers",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","get",97],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",97],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","options",97],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",97],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",97],"]","[",["T_CONSTANT_ENCAPSED_STRING","'group_type'",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$aggregation_function",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","executeView",100],"(",["T_VARIABLE","$view",100],")",";",["T_WHITESPACE","\n\n    ",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertEqual",102],"(",["T_STRING","count",102],"(",["T_VARIABLE","$view",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","result",102],")",",",["T_WHITESPACE"," ",102],["T_LNUMBER","2",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'Make sure the count of items is right.'",102],")",";",["T_WHITESPACE","\n    ",102],["T_COMMENT","\/\/ Group by name to identify the right count.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$results",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",";",["T_WHITESPACE","\n    ",104],["T_FOREACH","foreach",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$view",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","result",105],["T_WHITESPACE"," ",105],["T_AS","as",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$item",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$results",106],"[",["T_VARIABLE","$item",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","entity_test_name",106],"]",["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$item",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","id",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertEqual",108],"(",["T_VARIABLE","$results",108],"[",["T_CONSTANT_ENCAPSED_STRING","'name1'",108],"]",",",["T_WHITESPACE"," ",108],["T_VARIABLE","$values",108],"[",["T_LNUMBER","0",108],"]",",",["T_WHITESPACE"," ",108],["T_STRING","format_string",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Aggregation with @aggregation_function and groupby name: name1 returned the expected amount of results'",108],",",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_CONSTANT_ENCAPSED_STRING","'@aggregation_function'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$aggregation_function",108],")",")",")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertEqual",109],"(",["T_VARIABLE","$results",109],"[",["T_CONSTANT_ENCAPSED_STRING","'name2'",109],"]",",",["T_WHITESPACE"," ",109],["T_VARIABLE","$values",109],"[",["T_LNUMBER","1",109],"]",",",["T_WHITESPACE"," ",109],["T_STRING","format_string",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Aggregation with @aggregation_function and groupby name: name2 returned the expected amount of results'",109],",",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",["T_CONSTANT_ENCAPSED_STRING","'@aggregation_function'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$aggregation_function",109],")",")",")",";",["T_WHITESPACE","\n  ",109],"}",["T_WHITESPACE","\n\n  ",110],["T_DOC_COMMENT","\/**\n   * Helper method that creates some test entities.\n   *\/",112],["T_WHITESPACE","\n  ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","setupTestEntities",115],"(",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n    ",115],["T_COMMENT","\/\/ Create 4 entities with name1 and 3 entities with name2.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$entity_1",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",["T_WHITESPACE","\n      ",117],["T_CONSTANT_ENCAPSED_STRING","'name'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'name1'",118],",",["T_WHITESPACE","\n    ",118],")",";",["T_WHITESPACE","\n\n    ",119],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","storage",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","create",121],"(",["T_VARIABLE","$entity_1",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","save",121],"(",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","storage",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","create",122],"(",["T_VARIABLE","$entity_1",122],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","save",122],"(",")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","storage",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","create",123],"(",["T_VARIABLE","$entity_1",123],")",["T_OBJECT_OPERATOR","->",123],["T_STRING","save",123],"(",")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","storage",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","create",124],"(",["T_VARIABLE","$entity_1",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","save",124],"(",")",";",["T_WHITESPACE","\n\n    ",124],["T_VARIABLE","$entity_2",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",["T_WHITESPACE","\n      ",126],["T_CONSTANT_ENCAPSED_STRING","'name'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'name2'",127],",",["T_WHITESPACE","\n    ",127],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","storage",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","create",129],"(",["T_VARIABLE","$entity_2",129],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","save",129],"(",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","storage",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","create",130],"(",["T_VARIABLE","$entity_2",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","save",130],"(",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","storage",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","create",131],"(",["T_VARIABLE","$entity_2",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","save",131],"(",")",";",["T_WHITESPACE","\n  ",131],"}",["T_WHITESPACE","\n\n  ",132],["T_DOC_COMMENT","\/**\n   * Tests the count aggregation function.\n   *\/",134],["T_WHITESPACE","\n  ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","testGroupByCount",137],"(",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","groupByTestHelper",138],"(",["T_CONSTANT_ENCAPSED_STRING","'count'",138],",",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_LNUMBER","4",138],",",["T_WHITESPACE"," ",138],["T_LNUMBER","3",138],")",")",";",["T_WHITESPACE","\n  ",138],"}",["T_WHITESPACE","\n\n  ",139],["T_DOC_COMMENT","\/**\n   * Tests the sum aggregation function.\n   *\/",141],["T_WHITESPACE","\n  ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","testGroupBySum",144],"(",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","groupByTestHelper",145],"(",["T_CONSTANT_ENCAPSED_STRING","'sum'",145],",",["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",["T_LNUMBER","10",145],",",["T_WHITESPACE"," ",145],["T_LNUMBER","18",145],")",")",";",["T_WHITESPACE","\n  ",145],"}",["T_WHITESPACE","\n\n  ",146],["T_DOC_COMMENT","\/**\n   * Tests the average aggregation function.\n   *\/",148],["T_WHITESPACE","\n  ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","testGroupByAverage",151],"(",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","groupByTestHelper",152],"(",["T_CONSTANT_ENCAPSED_STRING","'avg'",152],",",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",["T_DNUMBER","2.5",152],",",["T_WHITESPACE"," ",152],["T_LNUMBER","6",152],")",")",";",["T_WHITESPACE","\n  ",152],"}",["T_WHITESPACE","\n\n  ",153],["T_DOC_COMMENT","\/**\n   * Tests the min aggregation function.\n   *\/",155],["T_WHITESPACE","\n  ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","testGroupByMin",158],"(",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","groupByTestHelper",159],"(",["T_CONSTANT_ENCAPSED_STRING","'min'",159],",",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",["T_LNUMBER","1",159],",",["T_WHITESPACE"," ",159],["T_LNUMBER","5",159],")",")",";",["T_WHITESPACE","\n  ",159],"}",["T_WHITESPACE","\n\n  ",160],["T_DOC_COMMENT","\/**\n   * Tests the max aggregation function.\n   *\/",162],["T_WHITESPACE","\n  ",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","testGroupByMax",165],"(",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","groupByTestHelper",166],"(",["T_CONSTANT_ENCAPSED_STRING","'max'",166],",",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_LNUMBER","4",166],",",["T_WHITESPACE"," ",166],["T_LNUMBER","7",166],")",")",";",["T_WHITESPACE","\n  ",166],"}",["T_WHITESPACE","\n\n  ",167],["T_DOC_COMMENT","\/**\n   * Tests aggregation with no specific function.\n   *\/",169],["T_WHITESPACE","\n  ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","testGroupByNone",172],"(",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","groupByTestHelper",173],"(",["T_STRING","NULL",173],",",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_LNUMBER","1",173],",",["T_WHITESPACE"," ",173],["T_LNUMBER","5",173],")",")",";",["T_WHITESPACE","\n  ",173],"}",["T_WHITESPACE","\n\n  ",174],["T_DOC_COMMENT","\/**\n   * Tests groupby with filters.\n   *\/",176],["T_WHITESPACE","\n  ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","testGroupByCountOnlyFilters",179],"(",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n    ",179],["T_COMMENT","\/\/ Check if GROUP BY and HAVING are included when a view\n",180],["T_WHITESPACE","    ",181],["T_COMMENT","\/\/ doesn't display SUM, COUNT, MAX, etc. functions in SELECT statement.\n",181],["T_WHITESPACE","\n    ",182],["T_FOR","for",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$x",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_LNUMBER","0",183],";",["T_WHITESPACE"," ",183],["T_VARIABLE","$x",183],["T_WHITESPACE"," ",183],"<",["T_WHITESPACE"," ",183],["T_LNUMBER","10",183],";",["T_WHITESPACE"," ",183],["T_VARIABLE","$x",183],["T_INC","++",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n      ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","storage",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","create",184],"(",["T_ARRAY","array",184],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'name1'",184],")",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","save",184],"(",")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_VARIABLE","$view",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","Views",187],["T_DOUBLE_COLON","::",187],["T_STRING","getView",187],"(",["T_CONSTANT_ENCAPSED_STRING","'test_group_by_in_filters'",187],")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","executeView",188],"(",["T_VARIABLE","$view",188],")",";",["T_WHITESPACE","\n\n    ",188],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertTrue",190],"(",["T_STRING","strpos",190],"(",["T_VARIABLE","$view",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","build_info",190],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",190],"]",",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'GROUP BY'",190],")",",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'Make sure that GROUP BY is in the query'",190],")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","assertTrue",191],"(",["T_STRING","strpos",191],"(",["T_VARIABLE","$view",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","build_info",191],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",191],"]",",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'HAVING'",191],")",",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'Make sure that HAVING is in the query'",191],")",";",["T_WHITESPACE","\n  ",191],"}",["T_WHITESPACE","\n\n  ",192],["T_DOC_COMMENT","\/**\n   * Tests grouping on base field.\n   *\/",194],["T_WHITESPACE","\n  ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","testGroupByBaseField",197],"(",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","setupTestEntities",198],"(",")",";",["T_WHITESPACE","\n\n    ",198],["T_VARIABLE","$view",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING","Views",200],["T_DOUBLE_COLON","::",200],["T_STRING","getView",200],"(",["T_CONSTANT_ENCAPSED_STRING","'test_group_by_count'",200],")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$view",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setDisplay",201],"(",")",";",["T_WHITESPACE","\n    ",201],["T_COMMENT","\/\/ This tests that the GROUP BY portion of the query is properly formatted\n",202],["T_WHITESPACE","    ",203],["T_COMMENT","\/\/ to include the base table to avoid ambiguous field errors.\n",203],["T_WHITESPACE","    ",204],["T_VARIABLE","$view",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","displayHandlers",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","get",204],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",204],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","options",204],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",204],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",204],"]","[",["T_CONSTANT_ENCAPSED_STRING","'group_type'",204],"]",["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'min'",204],";",["T_WHITESPACE","\n    ",204],["T_UNSET","unset",205],"(",["T_VARIABLE","$view",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","displayHandlers",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","get",205],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",205],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","options",205],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",205],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",205],"]","[",["T_CONSTANT_ENCAPSED_STRING","'group_type'",205],"]",")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","executeView",206],"(",["T_VARIABLE","$view",206],")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","assertTrue",207],"(",["T_STRING","strpos",207],"(",["T_VARIABLE","$view",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","build_info",207],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",207],"]",",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'GROUP BY entity_test.id'",207],")",",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'GROUP BY field includes the base table name when grouping on the base field.'",207],")",";",["T_WHITESPACE","\n  ",207],"}",["T_WHITESPACE","\n\n  ",208],["T_DOC_COMMENT","\/**\n   * Tests grouping a field with cardinality > 1.\n   *\/",210],["T_WHITESPACE","\n  ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","testGroupByFieldWithCardinality",213],"(",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$field_storage",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","FieldStorageConfig",214],["T_DOUBLE_COLON","::",214],["T_STRING","create",214],"(","[",["T_WHITESPACE","\n      ",214],["T_CONSTANT_ENCAPSED_STRING","'type'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'integer'",215],",",["T_WHITESPACE","\n      ",215],["T_CONSTANT_ENCAPSED_STRING","'field_name'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'field_test'",216],",",["T_WHITESPACE","\n      ",216],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_LNUMBER","4",217],",",["T_WHITESPACE","\n      ",217],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",218],",",["T_WHITESPACE","\n    ",218],"]",")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$field_storage",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","save",220],"(",")",";",["T_WHITESPACE","\n    ",220],["T_VARIABLE","$field",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_STRING","FieldConfig",221],["T_DOUBLE_COLON","::",221],["T_STRING","create",221],"(","[",["T_WHITESPACE","\n      ",221],["T_CONSTANT_ENCAPSED_STRING","'field_name'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'field_test'",222],",",["T_WHITESPACE","\n      ",222],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",223],",",["T_WHITESPACE","\n      ",223],["T_CONSTANT_ENCAPSED_STRING","'bundle'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",224],",",["T_WHITESPACE","\n    ",224],"]",")",";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$field",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","save",226],"(",")",";",["T_WHITESPACE","\n\n    ",226],["T_VARIABLE","$entities",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],"[","]",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$entity",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_STRING","EntityTestMul",229],["T_DOUBLE_COLON","::",229],["T_STRING","create",229],"(","[",["T_WHITESPACE","\n      ",229],["T_CONSTANT_ENCAPSED_STRING","'field_test'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],"[",["T_LNUMBER","1",230],",",["T_WHITESPACE"," ",230],["T_LNUMBER","1",230],",",["T_WHITESPACE"," ",230],["T_LNUMBER","1",230],"]",",",["T_WHITESPACE","\n    ",230],"]",")",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$entity",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","save",232],"(",")",";",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$entities",233],"[","]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$entity",233],";",["T_WHITESPACE","\n\n    ",233],["T_VARIABLE","$entity",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","EntityTestMul",235],["T_DOUBLE_COLON","::",235],["T_STRING","create",235],"(","[",["T_WHITESPACE","\n      ",235],["T_CONSTANT_ENCAPSED_STRING","'field_test'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],"[",["T_LNUMBER","2",236],",",["T_WHITESPACE"," ",236],["T_LNUMBER","2",236],",",["T_WHITESPACE"," ",236],["T_LNUMBER","2",236],"]",",",["T_WHITESPACE","\n    ",236],"]",")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$entity",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","save",238],"(",")",";",["T_WHITESPACE","\n    ",238],["T_VARIABLE","$entities",239],"[","]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$entity",239],";",["T_WHITESPACE","\n\n    ",239],["T_VARIABLE","$entity",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","EntityTestMul",241],["T_DOUBLE_COLON","::",241],["T_STRING","create",241],"(","[",["T_WHITESPACE","\n      ",241],["T_CONSTANT_ENCAPSED_STRING","'field_test'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],"[",["T_LNUMBER","2",242],",",["T_WHITESPACE"," ",242],["T_LNUMBER","2",242],",",["T_WHITESPACE"," ",242],["T_LNUMBER","2",242],"]",",",["T_WHITESPACE","\n    ",242],"]",")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$entity",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","save",244],"(",")",";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$entities",245],"[","]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$entity",245],";",["T_WHITESPACE","\n\n    ",245],["T_VARIABLE","$view",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","Views",247],["T_DOUBLE_COLON","::",247],["T_STRING","getView",247],"(",["T_CONSTANT_ENCAPSED_STRING","'test_group_by_count_multicardinality'",247],")",";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","executeView",248],"(",["T_VARIABLE","$view",248],")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertEqual",249],"(",["T_LNUMBER","2",249],",",["T_WHITESPACE"," ",249],["T_STRING","count",249],"(",["T_VARIABLE","$view",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","result",249],")",")",";",["T_WHITESPACE","\n\n    ",249],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","assertEqual",251],"(",["T_CONSTANT_ENCAPSED_STRING","'3'",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$view",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getStyle",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","getField",251],"(",["T_LNUMBER","0",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'id'",251],")",")",";",["T_WHITESPACE","\n    ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","assertEqual",252],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$view",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getStyle",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getField",252],"(",["T_LNUMBER","0",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'field_test'",252],")",")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","assertEqual",253],"(",["T_CONSTANT_ENCAPSED_STRING","'6'",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$view",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getStyle",253],"(",")",["T_OBJECT_OPERATOR","->",253],["T_STRING","getField",253],"(",["T_LNUMBER","1",253],",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'id'",253],")",")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","assertEqual",254],"(",["T_CONSTANT_ENCAPSED_STRING","'2'",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$view",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getStyle",254],"(",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","getField",254],"(",["T_LNUMBER","1",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'field_test'",254],")",")",";",["T_WHITESPACE","\n\n    ",254],["T_VARIABLE","$entities",256],"[",["T_LNUMBER","2",256],"]",["T_OBJECT_OPERATOR","->",256],["T_STRING","field_test",256],"[",["T_LNUMBER","0",256],"]",["T_OBJECT_OPERATOR","->",256],["T_STRING","value",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_LNUMBER","3",256],";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$entities",257],"[",["T_LNUMBER","2",257],"]",["T_OBJECT_OPERATOR","->",257],["T_STRING","field_test",257],"[",["T_LNUMBER","1",257],"]",["T_OBJECT_OPERATOR","->",257],["T_STRING","value",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_LNUMBER","4",257],";",["T_WHITESPACE","\n    ",257],["T_VARIABLE","$entities",258],"[",["T_LNUMBER","2",258],"]",["T_OBJECT_OPERATOR","->",258],["T_STRING","field_test",258],"[",["T_LNUMBER","2",258],"]",["T_OBJECT_OPERATOR","->",258],["T_STRING","value",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_LNUMBER","5",258],";",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$entities",259],"[",["T_LNUMBER","2",259],"]",["T_OBJECT_OPERATOR","->",259],["T_STRING","save",259],"(",")",";",["T_WHITESPACE","\n\n    ",259],["T_VARIABLE","$view",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","Views",261],["T_DOUBLE_COLON","::",261],["T_STRING","getView",261],"(",["T_CONSTANT_ENCAPSED_STRING","'test_group_by_count_multicardinality'",261],")",";",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","executeView",262],"(",["T_VARIABLE","$view",262],")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","assertEqual",263],"(",["T_LNUMBER","5",263],",",["T_WHITESPACE"," ",263],["T_STRING","count",263],"(",["T_VARIABLE","$view",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","result",263],")",")",";",["T_WHITESPACE","\n\n    ",263],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","assertEqual",265],"(",["T_CONSTANT_ENCAPSED_STRING","'3'",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$view",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getStyle",265],"(",")",["T_OBJECT_OPERATOR","->",265],["T_STRING","getField",265],"(",["T_LNUMBER","0",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'id'",265],")",")",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","assertEqual",266],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$view",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getStyle",266],"(",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","getField",266],"(",["T_LNUMBER","0",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'field_test'",266],")",")",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","assertEqual",267],"(",["T_CONSTANT_ENCAPSED_STRING","'3'",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$view",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getStyle",267],"(",")",["T_OBJECT_OPERATOR","->",267],["T_STRING","getField",267],"(",["T_LNUMBER","1",267],",",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'id'",267],")",")",";",["T_WHITESPACE","\n    ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","assertEqual",268],"(",["T_CONSTANT_ENCAPSED_STRING","'2'",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$view",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getStyle",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","getField",268],"(",["T_LNUMBER","1",268],",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'field_test'",268],")",")",";",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","assertEqual",269],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$view",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getStyle",269],"(",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","getField",269],"(",["T_LNUMBER","2",269],",",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'id'",269],")",")",";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","assertEqual",270],"(",["T_CONSTANT_ENCAPSED_STRING","'3'",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$view",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getStyle",270],"(",")",["T_OBJECT_OPERATOR","->",270],["T_STRING","getField",270],"(",["T_LNUMBER","2",270],",",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'field_test'",270],")",")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","assertEqual",271],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$view",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getStyle",271],"(",")",["T_OBJECT_OPERATOR","->",271],["T_STRING","getField",271],"(",["T_LNUMBER","3",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'id'",271],")",")",";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","assertEqual",272],"(",["T_CONSTANT_ENCAPSED_STRING","'4'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$view",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getStyle",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","getField",272],"(",["T_LNUMBER","3",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'field_test'",272],")",")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","assertEqual",273],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$view",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getStyle",273],"(",")",["T_OBJECT_OPERATOR","->",273],["T_STRING","getField",273],"(",["T_LNUMBER","4",273],",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'id'",273],")",")",";",["T_WHITESPACE","\n    ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","assertEqual",274],"(",["T_CONSTANT_ENCAPSED_STRING","'5'",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$view",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getStyle",274],"(",")",["T_OBJECT_OPERATOR","->",274],["T_STRING","getField",274],"(",["T_LNUMBER","4",274],",",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'field_test'",274],")",")",";",["T_WHITESPACE","\n\n    ",274],["T_COMMENT","\/\/ Check that translated values are correctly retrieved and are not grouped\n",276],["T_WHITESPACE","    ",277],["T_COMMENT","\/\/ into the original entity.\n",277],["T_WHITESPACE","    ",278],["T_VARIABLE","$translation",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$entity",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","addTranslation",278],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",278],")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$translation",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","field_test",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],"[",["T_LNUMBER","6",279],",",["T_WHITESPACE"," ",279],["T_LNUMBER","6",279],",",["T_WHITESPACE"," ",279],["T_LNUMBER","6",279],"]",";",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$translation",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","save",280],"(",")",";",["T_WHITESPACE","\n\n    ",280],["T_VARIABLE","$view",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","Views",282],["T_DOUBLE_COLON","::",282],["T_STRING","getView",282],"(",["T_CONSTANT_ENCAPSED_STRING","'test_group_by_count_multicardinality'",282],")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","executeView",283],"(",["T_VARIABLE","$view",283],")",";",["T_WHITESPACE","\n\n    ",283],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","assertEqual",285],"(",["T_LNUMBER","6",285],",",["T_WHITESPACE"," ",285],["T_STRING","count",285],"(",["T_VARIABLE","$view",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","result",285],")",")",";",["T_WHITESPACE","\n    ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","assertEqual",286],"(",["T_CONSTANT_ENCAPSED_STRING","'3'",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$view",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getStyle",286],"(",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","getField",286],"(",["T_LNUMBER","5",286],",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'id'",286],")",")",";",["T_WHITESPACE","\n    ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","assertEqual",287],"(",["T_CONSTANT_ENCAPSED_STRING","'6'",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$view",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getStyle",287],"(",")",["T_OBJECT_OPERATOR","->",287],["T_STRING","getField",287],"(",["T_LNUMBER","5",287],",",["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","'field_test'",287],")",")",";",["T_WHITESPACE","\n  ",287],"}",["T_WHITESPACE","\n\n  ",288],["T_DOC_COMMENT","\/**\n   * Tests groupby with a field not existing on some bundle.\n   *\/",290],["T_WHITESPACE","\n  ",292],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","testGroupByWithFieldsNotExistingOnBundle",293],"(",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$field_storage",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","FieldStorageConfig",294],["T_DOUBLE_COLON","::",294],["T_STRING","create",294],"(","[",["T_WHITESPACE","\n      ",294],["T_CONSTANT_ENCAPSED_STRING","'type'",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'integer'",295],",",["T_WHITESPACE","\n      ",295],["T_CONSTANT_ENCAPSED_STRING","'field_name'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'field_test'",296],",",["T_WHITESPACE","\n      ",296],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_LNUMBER","4",297],",",["T_WHITESPACE","\n      ",297],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",298],",",["T_WHITESPACE","\n    ",298],"]",")",";",["T_WHITESPACE","\n    ",299],["T_VARIABLE","$field_storage",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","save",300],"(",")",";",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$field",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","FieldConfig",301],["T_DOUBLE_COLON","::",301],["T_STRING","create",301],"(","[",["T_WHITESPACE","\n      ",301],["T_CONSTANT_ENCAPSED_STRING","'field_name'",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'field_test'",302],",",["T_WHITESPACE","\n      ",302],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",303],",",["T_WHITESPACE","\n      ",303],["T_CONSTANT_ENCAPSED_STRING","'bundle'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",304],",",["T_WHITESPACE","\n    ",304],"]",")",";",["T_WHITESPACE","\n    ",305],["T_VARIABLE","$field",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","save",306],"(",")",";",["T_WHITESPACE","\n\n    ",306],["T_VARIABLE","$entities",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],"[","]",";",["T_WHITESPACE","\n    ",308],["T_VARIABLE","$entity",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","EntityTestMul",309],["T_DOUBLE_COLON","::",309],["T_STRING","create",309],"(","[",["T_WHITESPACE","\n      ",309],["T_CONSTANT_ENCAPSED_STRING","'field_test'",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],"[",["T_LNUMBER","1",310],"]",",",["T_WHITESPACE","\n      ",310],["T_CONSTANT_ENCAPSED_STRING","'type'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",311],",",["T_WHITESPACE","\n    ",311],"]",")",";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$entity",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","save",313],"(",")",";",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$entities",314],"[","]",["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$entity",314],";",["T_WHITESPACE","\n\n    ",314],["T_VARIABLE","$entity",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","EntityTestMul",316],["T_DOUBLE_COLON","::",316],["T_STRING","create",316],"(","[",["T_WHITESPACE","\n      ",316],["T_CONSTANT_ENCAPSED_STRING","'type'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul2'",317],",",["T_WHITESPACE","\n    ",317],"]",")",";",["T_WHITESPACE","\n    ",318],["T_VARIABLE","$entity",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","save",319],"(",")",";",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$entities",320],"[","]",["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$entity",320],";",["T_WHITESPACE","\n\n    ",320],["T_VARIABLE","$view",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_STRING","Views",322],["T_DOUBLE_COLON","::",322],["T_STRING","getView",322],"(",["T_CONSTANT_ENCAPSED_STRING","'test_group_by_field_not_within_bundle'",322],")",";",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","executeView",323],"(",["T_VARIABLE","$view",323],")",";",["T_WHITESPACE","\n\n    ",323],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","assertEqual",325],"(",["T_LNUMBER","2",325],",",["T_WHITESPACE"," ",325],["T_STRING","count",325],"(",["T_VARIABLE","$view",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","result",325],")",")",";",["T_WHITESPACE","\n    ",325],["T_COMMENT","\/\/ The first result is coming from entity_test_mul2, so no field could be\n",326],["T_WHITESPACE","    ",327],["T_COMMENT","\/\/ rendered.\n",327],["T_WHITESPACE","    ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","assertEqual",328],"(",["T_CONSTANT_ENCAPSED_STRING","''",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$view",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getStyle",328],"(",")",["T_OBJECT_OPERATOR","->",328],["T_STRING","getField",328],"(",["T_LNUMBER","0",328],",",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'field_test'",328],")",")",";",["T_WHITESPACE","\n    ",328],["T_COMMENT","\/\/ The second result is coming from entity_test_mul, so its field value\n",329],["T_WHITESPACE","    ",330],["T_COMMENT","\/\/ could be rendered.\n",330],["T_WHITESPACE","    ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","assertEqual",331],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$view",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getStyle",331],"(",")",["T_OBJECT_OPERATOR","->",331],["T_STRING","getField",331],"(",["T_LNUMBER","1",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'field_test'",331],")",")",";",["T_WHITESPACE","\n  ",331],"}",["T_WHITESPACE","\n\n",332],"}",["T_WHITESPACE","\n",334]]
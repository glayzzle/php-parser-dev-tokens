[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Handler",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","user",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Role",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","user",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","User",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","views",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","View",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","views",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Kernel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ViewsKernelTestBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","views",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Views",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Provides a base class for base field access in views.\n *\/",11],["T_WHITESPACE","\n",13],["T_ABSTRACT","abstract",14],["T_WHITESPACE"," ",14],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","FieldFieldAccessTestBase",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","ViewsKernelTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Stores an user entity with access to fields.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$userWithAccess",21],";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Stores an user entity without access to fields.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$userWithoutAccess",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_STATIC","static",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$modules",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",33],"]",";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",35],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","setUp",38],"(",["T_VARIABLE","$import_test_views",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","TRUE",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_STRING","parent",39],["T_DOUBLE_COLON","::",39],["T_STRING","setUp",39],"(",["T_VARIABLE","$import_test_views",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","installEntitySchema",41],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_VARIABLE","$role_with_access",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","Role",43],["T_DOUBLE_COLON","::",43],["T_STRING","create",43],"(","[",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'id'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'with_access'",44],",",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'permissions'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],"[",["T_CONSTANT_ENCAPSED_STRING","'view test entity field'",45],"]",",",["T_WHITESPACE","\n    ",45],"]",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$role_with_access",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","save",47],"(",")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$role_without_access",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","Role",48],["T_DOUBLE_COLON","::",48],["T_STRING","create",48],"(","[",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'id'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'without_access'",49],",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'permissions'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],"[","]",",",["T_WHITESPACE","\n    ",50],"]",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$role_without_access",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","save",52],"(",")",";",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","userWithAccess",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","User",54],["T_DOUBLE_COLON","::",54],["T_STRING","create",54],"(","[",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'name'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","randomMachineName",55],"(",")",",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'roles'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],"[",["T_VARIABLE","$role_with_access",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","id",56],"(",")","]",",",["T_WHITESPACE","\n    ",56],"]",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","userWithAccess",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","save",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","userWithoutAccess",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","User",59],["T_DOUBLE_COLON","::",59],["T_STRING","create",59],"(","[",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'name'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","randomMachineName",60],"(",")",",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'roles'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],"[",["T_VARIABLE","$role_without_access",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","id",61],"(",")","]",",",["T_WHITESPACE","\n    ",61],"]",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","userWithoutAccess",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","save",63],"(",")",";",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * Checks views field access for a given entity type and field name.\n   *\n   * To use this method, set up an entity of type $entity_type_id, with field\n   * $field_name. Create an entity instance that contains content $field_content\n   * in that field.\n   *\n   * This method will check that a user with permission can see the content in a\n   * view, and a user without access permission on that field cannot.\n   *\n   * @param string $entity_type_id\n   *   The entity type ID.\n   * @param string $field_name\n   *   The field name.\n   * @param string $field_content\n   *   The expected field content.\n   *\/",66],["T_WHITESPACE","\n  ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","assertFieldAccess",83],"(",["T_VARIABLE","$entity_type_id",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$field_name",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$field_content",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n    ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Drupal",84],["T_DOUBLE_COLON","::",84],["T_STRING","state",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","set",84],"(",["T_CONSTANT_ENCAPSED_STRING","'views_field_access_test-field'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$field_name",84],")",";",["T_WHITESPACE","\n\n    ",84],["T_VARIABLE","$entity_type",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Drupal",86],["T_DOUBLE_COLON","::",86],["T_STRING","entityManager",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","getDefinition",86],"(",["T_VARIABLE","$entity_type_id",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$view_id",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","randomMachineName",87],"(",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$data_table",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$entity_type",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getDataTable",88],"(",")",";",["T_WHITESPACE","\n    ",88],["T_COMMENT","\/\/ Use the data table as long as the field is not 'uuid'. This is the only\n",89],["T_WHITESPACE","    ",90],["T_COMMENT","\/\/ column that can only be obtained from the base table.\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$base_table",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$data_table",91],["T_WHITESPACE"," ",91],["T_BOOLEAN_AND","&&",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$field_name",91],["T_WHITESPACE"," ",91],["T_IS_NOT_IDENTICAL","!==",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'uuid'",91],")",")",["T_WHITESPACE"," ",91],"?",["T_WHITESPACE"," ",91],["T_VARIABLE","$data_table",91],["T_WHITESPACE"," ",91],":",["T_WHITESPACE"," ",91],["T_VARIABLE","$entity_type",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getBaseTable",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$entity",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","View",92],["T_DOUBLE_COLON","::",92],["T_STRING","create",92],"(","[",["T_WHITESPACE","\n      ",92],["T_CONSTANT_ENCAPSED_STRING","'id'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$view_id",93],",",["T_WHITESPACE","\n      ",93],["T_CONSTANT_ENCAPSED_STRING","'base_table'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$base_table",94],",",["T_WHITESPACE","\n      ",94],["T_CONSTANT_ENCAPSED_STRING","'display'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],"[",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'default'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],"[",["T_WHITESPACE","\n          ",96],["T_CONSTANT_ENCAPSED_STRING","'display_plugin'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'default'",97],",",["T_WHITESPACE","\n          ",97],["T_CONSTANT_ENCAPSED_STRING","'id'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'default'",98],",",["T_WHITESPACE","\n          ",98],["T_CONSTANT_ENCAPSED_STRING","'display_options'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],"[",["T_WHITESPACE","\n            ",99],["T_CONSTANT_ENCAPSED_STRING","'fields'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],"[",["T_WHITESPACE","\n              ",100],["T_VARIABLE","$field_name",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],"[",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'table'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$base_table",102],",",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'field'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$field_name",103],",",["T_WHITESPACE","\n                ",103],["T_CONSTANT_ENCAPSED_STRING","'id'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$field_name",104],",",["T_WHITESPACE","\n                ",104],["T_CONSTANT_ENCAPSED_STRING","'plugin_id'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'field'",105],",",["T_WHITESPACE","\n              ",105],"]",",",["T_WHITESPACE","\n            ",106],"]",",",["T_WHITESPACE","\n          ",107],"]",",",["T_WHITESPACE","\n        ",108],"]",",",["T_WHITESPACE","\n      ",109],"]",",",["T_WHITESPACE","\n    ",110],"]",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$entity",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","save",112],"(",")",";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Session\\AccountSwitcherInterface $account_switcher *\/",114],["T_WHITESPACE","\n    ",114],["T_VARIABLE","$account_switcher",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Drupal",115],["T_DOUBLE_COLON","::",115],["T_STRING","service",115],"(",["T_CONSTANT_ENCAPSED_STRING","'account_switcher'",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",117],["T_WHITESPACE","\n    ",117],["T_VARIABLE","$renderer",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Drupal",118],["T_DOUBLE_COLON","::",118],["T_STRING","service",118],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",118],")",";",["T_WHITESPACE","\n\n    ",118],["T_VARIABLE","$account_switcher",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","switchTo",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","userWithAccess",120],")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$executable",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","Views",121],["T_DOUBLE_COLON","::",121],["T_STRING","getView",121],"(",["T_VARIABLE","$view_id",121],")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$build",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$executable",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","preview",122],"(",")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","setRawContent",123],"(",["T_VARIABLE","$renderer",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","renderRoot",123],"(",["T_VARIABLE","$build",123],")",")",";",["T_WHITESPACE","\n\n    ",123],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertText",125],"(",["T_VARIABLE","$field_content",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertTrue",126],"(",["T_ISSET","isset",126],"(",["T_VARIABLE","$executable",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","field",126],"[",["T_VARIABLE","$field_name",126],"]",")",")",";",["T_WHITESPACE","\n\n    ",126],["T_VARIABLE","$account_switcher",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","switchTo",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","userWithoutAccess",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$executable",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","Views",129],["T_DOUBLE_COLON","::",129],["T_STRING","getView",129],"(",["T_VARIABLE","$view_id",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$build",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$executable",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","preview",130],"(",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setRawContent",131],"(",["T_VARIABLE","$renderer",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","renderRoot",131],"(",["T_VARIABLE","$build",131],")",")",";",["T_WHITESPACE","\n\n    ",131],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertNoText",133],"(",["T_VARIABLE","$field_content",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertFalse",134],"(",["T_ISSET","isset",134],"(",["T_VARIABLE","$executable",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","field",134],"[",["T_VARIABLE","$field_name",134],"]",")",")",";",["T_WHITESPACE","\n\n    ",134],["T_NS_SEPARATOR","\\",136],["T_STRING","Drupal",136],["T_DOUBLE_COLON","::",136],["T_STRING","state",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","delete",136],"(",["T_CONSTANT_ENCAPSED_STRING","'views_field_access_test-field'",136],")",";",["T_WHITESPACE","\n  ",136],"}",["T_WHITESPACE","\n\n",137],"}",["T_WHITESPACE","\n",139]]
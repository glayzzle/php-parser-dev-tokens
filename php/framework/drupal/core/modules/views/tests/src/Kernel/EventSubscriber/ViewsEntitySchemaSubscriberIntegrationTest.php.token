[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EventSubscriber",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityTypeEvent",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityTypeEvents",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","system",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityDefinitionTestTrait",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","views",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Kernel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ViewsKernelTestBase",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests \\Drupal\\views\\EventSubscriber\\ViewsEntitySchemaSubscriber\n *\n * @group Views\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ViewsEntitySchemaSubscriberIntegrationTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","ViewsKernelTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","EntityDefinitionTestTrait",17],";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * The entity definition update manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityDefinitionUpdateManagerInterface\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$entityDefinitionUpdateManager",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_STATIC","static",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$modules",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'user'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'text'",29],"]",";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",31],["T_WHITESPACE","\n  ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_STATIC","static",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$testViews",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_data'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_additional_base_field'",36],"]",";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * The event dispatcher.\n   *\n   * @var \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$eventDispatcher",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * The tested event subscriber of views.\n   *\n   * @var \\Drupal\\views\\EventSubscriber\\ViewsEntitySchemaSubscriber\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$eventSubscriber",50],";",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * The entity manager service.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",52],["T_WHITESPACE","\n  ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$entityManager",57],";",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * The state service.\n   *\n   * @var \\Drupal\\Core\\State\\StateInterface\n   *\/",59],["T_WHITESPACE","\n  ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$state",64],";",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",66],["T_WHITESPACE","\n  ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","setUp",69],"(",["T_VARIABLE","$import_test_views",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","TRUE",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n    ",69],["T_STRING","parent",70],["T_DOUBLE_COLON","::",70],["T_STRING","setUp",70],"(",")",";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","eventDispatcher",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","container",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","get",72],"(",["T_CONSTANT_ENCAPSED_STRING","'event_dispatcher'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","eventSubscriber",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","container",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_CONSTANT_ENCAPSED_STRING","'views.entity_schema_subscriber'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","entityDefinitionUpdateManager",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","container",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definition_update_manager'",74],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","entityManager",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","container",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","state",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","container",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","database",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","container",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","get",78],"(",["T_CONSTANT_ENCAPSED_STRING","'database'",78],")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Install every entity type's schema that wasn't installed in the parent\n",80],["T_WHITESPACE","    ",81],["T_COMMENT","\/\/ method.\n",81],["T_WHITESPACE","    ",82],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_STRING","array_diff_key",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","entityManager",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getDefinitions",82],"(",")",",",["T_WHITESPACE"," ",82],["T_STRING","array_flip",82],"(",["T_ARRAY","array",82],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",82],")",")",")",["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_type_id",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_type",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","installEntitySchema",83],"(",["T_VARIABLE","$entity_type_id",83],")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n  ",84],"}",["T_WHITESPACE","\n\n  ",85],["T_DOC_COMMENT","\/**\n   * Tests that views are disabled when an entity type is deleted.\n   *\/",87],["T_WHITESPACE","\n  ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","testDeleteEntityType",90],"(",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$entity_storage",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","entityManager",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getStorage",91],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",91],")",";",["T_WHITESPACE","\n\n    ",91],["T_VARIABLE","$views",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$entity_storage",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","loadMultiple",93],"(",")",";",["T_WHITESPACE","\n\n    ",93],["T_COMMENT","\/\/ Ensure that all test views exists.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertTrue",96],"(",["T_ISSET","isset",96],"(",["T_VARIABLE","$views",96],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test'",96],"]",")",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertTrue",97],"(",["T_ISSET","isset",97],"(",["T_VARIABLE","$views",97],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",97],"]",")",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertTrue",98],"(",["T_ISSET","isset",98],"(",["T_VARIABLE","$views",98],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_data'",98],"]",")",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertTrue",99],"(",["T_ISSET","isset",99],"(",["T_VARIABLE","$views",99],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_additional_base_field'",99],"]",")",")",";",["T_WHITESPACE","\n\n    ",99],["T_VARIABLE","$event",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","EntityTypeEvent",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","entityManager",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getDefinition",101],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",101],")",")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","eventDispatcher",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","dispatch",102],"(",["T_STRING","EntityTypeEvents",102],["T_DOUBLE_COLON","::",102],["T_STRING","DELETE",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$event",102],")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ We expect that views which use 'entity_test_update' as base tables are\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ disabled.\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$views",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$entity_storage",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","loadMultiple",106],"(",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Ensure that all test views still exists after the deletion of the\n",108],["T_WHITESPACE","    ",109],["T_COMMENT","\/\/ entity type.\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertTrue",110],"(",["T_ISSET","isset",110],"(",["T_VARIABLE","$views",110],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test'",110],"]",")",")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertTrue",111],"(",["T_ISSET","isset",111],"(",["T_VARIABLE","$views",111],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",111],"]",")",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertTrue",112],"(",["T_ISSET","isset",112],"(",["T_VARIABLE","$views",112],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_data'",112],"]",")",")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertTrue",113],"(",["T_ISSET","isset",113],"(",["T_VARIABLE","$views",113],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_additional_base_field'",113],"]",")",")",";",["T_WHITESPACE","\n\n    ",113],["T_COMMENT","\/\/ Ensure that they are all disabled.\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertFalse",116],"(",["T_VARIABLE","$views",116],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test'",116],"]",["T_OBJECT_OPERATOR","->",116],["T_STRING","status",116],"(",")",")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertFalse",117],"(",["T_VARIABLE","$views",117],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",117],"]",["T_OBJECT_OPERATOR","->",117],["T_STRING","status",117],"(",")",")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","assertFalse",118],"(",["T_VARIABLE","$views",118],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_data'",118],"]",["T_OBJECT_OPERATOR","->",118],["T_STRING","status",118],"(",")",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertFalse",119],"(",["T_VARIABLE","$views",119],"[",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_additional_base_field'",119],"]",["T_OBJECT_OPERATOR","->",119],["T_STRING","status",119],"(",")",")",";",["T_WHITESPACE","\n  ",119],"}",["T_WHITESPACE","\n\n  ",120],["T_DOC_COMMENT","\/**\n   * Tests that renaming base tables adapts the views.\n   *\/",122],["T_WHITESPACE","\n  ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","testBaseTableRename",125],"(",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","renameBaseTable",126],"(",")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","entityDefinitionUpdateManager",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","applyUpdates",127],"(",")",";",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",129],["T_WHITESPACE","\n    ",129],["T_VARIABLE","$entity_storage",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","entityManager",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getStorage",130],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",130],")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$view",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$entity_storage",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","load",131],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test'",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Ensure the base table got renamed, so also the views fields.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertEqual",134],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_new'",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$view",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","get",134],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",134],")",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$display",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$view",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getDisplay",135],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertEqual",136],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_new'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$display",136],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",136],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",136],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",136],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",136],"]",")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertEqual",137],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_new'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$display",137],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",137],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",137],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",137],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",137],"]",")",";",["T_WHITESPACE","\n  ",137],"}",["T_WHITESPACE","\n\n  ",138],["T_DOC_COMMENT","\/**\n   * Tests that renaming data tables adapts the views.\n   *\/",140],["T_WHITESPACE","\n  ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","testDataTableRename",143],"(",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","updateEntityTypeToTranslatable",144],"(",")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","entityDefinitionUpdateManager",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","applyUpdates",145],"(",")",";",["T_WHITESPACE","\n\n    ",145],["T_VARIABLE","$entity_storage",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","entityManager",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getStorage",147],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$view",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$entity_storage",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","load",148],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_data'",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertEqual",149],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$view",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","get",149],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",149],")",")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$display",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$view",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getDisplay",150],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertEqual",151],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$display",151],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",151],"]",")",";",["T_WHITESPACE","\n    ",151],["T_COMMENT","\/\/ Ensure that the data table is used.\n",152],["T_WHITESPACE","    ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertEqual",153],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data'",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$display",153],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",153],"]",")",";",["T_WHITESPACE","\n\n    ",153],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","renameDataTable",155],"(",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","entityDefinitionUpdateManager",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","applyUpdates",156],"(",")",";",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",158],["T_WHITESPACE","\n    ",158],["T_VARIABLE","$entity_storage",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","entityManager",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getStorage",159],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",159],")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$view",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$entity_storage",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","load",160],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_data'",160],")",";",["T_WHITESPACE","\n\n    ",160],["T_COMMENT","\/\/ Ensure the data table got renamed, so also the views fields.\n",162],["T_WHITESPACE","    ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertEqual",163],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$view",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","get",163],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",163],")",")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$display",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$view",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getDisplay",164],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",164],")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertEqual",165],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$display",165],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",165],"]",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertEqual",166],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data_new'",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$display",166],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",166],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",166],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",166],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",166],"]",")",";",["T_WHITESPACE","\n  ",166],"}",["T_WHITESPACE","\n\n  ",167],["T_DOC_COMMENT","\/**\n   * Tests that renaming revision tables adapts the views.\n   *\/",169],["T_WHITESPACE","\n  ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","testRevisionBaseTableRename",172],"(",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","updateEntityTypeToRevisionable",173],"(",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","entityDefinitionUpdateManager",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","applyUpdates",174],"(",")",";",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",176],["T_WHITESPACE","\n    ",176],["T_VARIABLE","$entity_storage",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","entityManager",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getStorage",177],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",177],")",";",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$view",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$entity_storage",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","load",178],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",178],")",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","assertEqual",179],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$view",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","get",179],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",179],")",")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$display",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$view",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getDisplay",180],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","assertEqual",181],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$display",181],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",181],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",181],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",181],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",181],"]",")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","assertEqual",182],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$display",182],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",182],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",182],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",182],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",182],"]",")",";",["T_WHITESPACE","\n\n    ",182],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","renameRevisionBaseTable",184],"(",")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","entityDefinitionUpdateManager",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","applyUpdates",185],"(",")",";",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",187],["T_WHITESPACE","\n    ",187],["T_VARIABLE","$entity_storage",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","entityManager",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getStorage",188],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",188],")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$view",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$entity_storage",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","load",189],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",189],")",";",["T_WHITESPACE","\n\n    ",189],["T_COMMENT","\/\/ Ensure the base table got renamed, so also the views fields.\n",191],["T_WHITESPACE","    ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertEqual",192],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision_new'",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$view",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","get",192],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",192],")",")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$display",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$view",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getDisplay",193],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",193],")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertEqual",194],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision_new'",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$display",194],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",194],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",194],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",194],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",194],"]",")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertEqual",195],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision_new'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$display",195],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",195],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",195],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",195],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",195],"]",")",";",["T_WHITESPACE","\n  ",195],"}",["T_WHITESPACE","\n\n  ",196],["T_DOC_COMMENT","\/**\n   * Tests that renaming revision tables adapts the views.\n   *\/",198],["T_WHITESPACE","\n  ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","testRevisionDataTableRename",201],"(",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","updateEntityTypeToRevisionable",202],"(",")",";",["T_WHITESPACE","\n    ",202],["T_COMMENT","\/\/ Multiple changes, so we have to invalidate the caches, otherwise\n",203],["T_WHITESPACE","    ",204],["T_COMMENT","\/\/ the second update will revert the first.\n",204],["T_WHITESPACE","    ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","entityManager",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","clearCachedDefinitions",205],"(",")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","updateEntityTypeToTranslatable",206],"(",")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","entityDefinitionUpdateManager",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","applyUpdates",207],"(",")",";",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",209],["T_WHITESPACE","\n    ",209],["T_VARIABLE","$entity_storage",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","entityManager",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getStorage",210],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",210],")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$view",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$entity_storage",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","load",211],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",211],")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","assertEqual",212],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$view",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","get",212],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",212],")",")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$display",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$view",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getDisplay",213],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",213],")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","assertEqual",214],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$display",214],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",214],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",214],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",214],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",214],"]",")",";",["T_WHITESPACE","\n    ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","assertEqual",215],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision_data'",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$display",215],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",215],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",215],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",215],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",215],"]",")",";",["T_WHITESPACE","\n\n    ",215],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","renameRevisionDataTable",217],"(",")",";",["T_WHITESPACE","\n    ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","entityDefinitionUpdateManager",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","applyUpdates",218],"(",")",";",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",220],["T_WHITESPACE","\n    ",220],["T_VARIABLE","$entity_storage",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","entityManager",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getStorage",221],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",221],")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$view",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$entity_storage",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","load",222],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",222],")",";",["T_WHITESPACE","\n\n    ",222],["T_COMMENT","\/\/ Ensure the base table got renamed, so also the views fields.\n",224],["T_WHITESPACE","    ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","assertEqual",225],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$view",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","get",225],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",225],")",")",";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$display",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$view",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getDisplay",226],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",226],")",";",["T_WHITESPACE","\n    ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","assertEqual",227],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$display",227],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",227],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",227],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",227],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",227],"]",")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","assertEqual",228],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision_data_new'",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$display",228],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",228],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",228],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",228],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",228],"]",")",";",["T_WHITESPACE","\n  ",228],"}",["T_WHITESPACE","\n\n  ",229],["T_DOC_COMMENT","\/**\n   * Tests that adding data tables adapts the views.\n   *\/",231],["T_WHITESPACE","\n  ",233],["T_PUBLIC","public",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","testDataTableAddition",234],"(",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n    ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","updateEntityTypeToTranslatable",235],"(",")",";",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","entityDefinitionUpdateManager",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","applyUpdates",236],"(",")",";",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",238],["T_WHITESPACE","\n    ",238],["T_VARIABLE","$entity_storage",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","entityManager",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getStorage",239],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",239],")",";",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$view",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$entity_storage",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","load",240],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test'",240],")",";",["T_WHITESPACE","\n\n    ",240],["T_COMMENT","\/\/ Ensure the data table got renamed, so also the views fields.\n",242],["T_WHITESPACE","    ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","assertEqual",243],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$view",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","get",243],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",243],")",")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$display",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$view",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getDisplay",244],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",244],")",";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","assertEqual",245],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$display",245],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",245],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",245],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",245],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",245],"]",")",";",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","assertEqual",246],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data'",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$display",246],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",246],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",246],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",246],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",246],"]",")",";",["T_WHITESPACE","\n  ",246],"}",["T_WHITESPACE","\n\n  ",247],["T_DOC_COMMENT","\/**\n   * Tests that enabling revisions doesn't do anything.\n   *\/",249],["T_WHITESPACE","\n  ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","testRevisionEnabling",252],"(",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","updateEntityTypeToRevisionable",253],"(",")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","entityDefinitionUpdateManager",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","applyUpdates",254],"(",")",";",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",256],["T_WHITESPACE","\n    ",256],["T_VARIABLE","$entity_storage",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","entityManager",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getStorage",257],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",257],")",";",["T_WHITESPACE","\n    ",257],["T_VARIABLE","$view",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$entity_storage",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","load",258],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test'",258],")",";",["T_WHITESPACE","\n\n    ",258],["T_COMMENT","\/\/ Ensure that nothing happens.\n",260],["T_WHITESPACE","    ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertEqual",261],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$view",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","get",261],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",261],")",")",";",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$display",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$view",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getDisplay",262],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",262],")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","assertEqual",263],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$display",263],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",263],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",263],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",263],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",263],"]",")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","assertEqual",264],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$display",264],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",264],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",264],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",264],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",264],"]",")",";",["T_WHITESPACE","\n  ",264],"}",["T_WHITESPACE","\n\n  ",265],["T_DOC_COMMENT","\/**\n   * Tests that removing revision support disables the view.\n   *\/",267],["T_WHITESPACE","\n  ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","testRevisionDisabling",270],"(",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","updateEntityTypeToRevisionable",271],"(",")",";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","entityDefinitionUpdateManager",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","applyUpdates",272],"(",")",";",["T_WHITESPACE","\n\n    ",272],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","updateEntityTypeToNotRevisionable",274],"(",")",";",["T_WHITESPACE","\n    ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","entityDefinitionUpdateManager",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","applyUpdates",275],"(",")",";",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",277],["T_WHITESPACE","\n    ",277],["T_VARIABLE","$entity_storage",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","entityManager",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getStorage",278],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",278],")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$view",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$entity_storage",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","load",279],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",279],")",";",["T_WHITESPACE","\n\n    ",279],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","assertFalse",281],"(",["T_VARIABLE","$view",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","status",281],"(",")",")",";",["T_WHITESPACE","\n  ",281],"}",["T_WHITESPACE","\n\n  ",282],["T_DOC_COMMENT","\/**\n   * Tests a bunch possible entity definition table updates.\n   *\/",284],["T_WHITESPACE","\n  ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","testVariousTableUpdates",287],"(",")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n    ",287],["T_COMMENT","\/\/ We want to test the following permutations of entity definition updates:\n",288],["T_WHITESPACE","    ",289],["T_COMMENT","\/\/ base <-> base + translation\n",289],["T_WHITESPACE","    ",290],["T_COMMENT","\/\/ base + translation <-> base + translation + revision\n",290],["T_WHITESPACE","    ",291],["T_COMMENT","\/\/ base + revision <-> base + translation + revision\n",291],["T_WHITESPACE","    ",292],["T_COMMENT","\/\/ base <-> base + revision\n",292],["T_WHITESPACE","    ",293],["T_COMMENT","\/\/ base <-> base + translation + revision\n",293],["T_WHITESPACE","\n    ",294],["T_COMMENT","\/\/ base <-> base + translation\n",295],["T_WHITESPACE","    ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","updateEntityTypeToTranslatable",296],"(",")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","entityDefinitionUpdateManager",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","applyUpdates",297],"(",")",";",["T_WHITESPACE","\n    ",297],["T_LIST","list",298],"(",["T_VARIABLE","$view",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$display",298],")",["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getUpdatedViewAndDisplay",298],"(",")",";",["T_WHITESPACE","\n\n    ",298],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","assertEqual",300],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$view",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","get",300],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",300],")",")",";",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","assertEqual",301],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$display",301],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",301],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",301],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",301],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",301],"]",")",";",["T_WHITESPACE","\n    ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","assertEqual",302],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data'",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$display",302],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",302],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",302],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",302],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",302],"]",")",";",["T_WHITESPACE","\n\n    ",302],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","updateEntityTypeToNotTranslatable",304],"(",")",";",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","entityDefinitionUpdateManager",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","applyUpdates",305],"(",")",";",["T_WHITESPACE","\n    ",305],["T_LIST","list",306],"(",["T_VARIABLE","$view",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$display",306],")",["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getUpdatedViewAndDisplay",306],"(",")",";",["T_WHITESPACE","\n\n    ",306],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","assertEqual",308],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$view",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","get",308],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",308],")",")",";",["T_WHITESPACE","\n    ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","assertEqual",309],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$display",309],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",309],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",309],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",309],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",309],"]",")",";",["T_WHITESPACE","\n    ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","assertEqual",310],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$display",310],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",310],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",310],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",310],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",310],"]",")",";",["T_WHITESPACE","\n\n    ",310],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","resetEntityType",312],"(",")",";",["T_WHITESPACE","\n\n    ",312],["T_COMMENT","\/\/ base + translation <-> base + translation + revision\n",314],["T_WHITESPACE","    ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","updateEntityTypeToTranslatable",315],"(",")",";",["T_WHITESPACE","\n    ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","entityDefinitionUpdateManager",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","applyUpdates",316],"(",")",";",["T_WHITESPACE","\n    ",316],["T_LIST","list",317],"(",["T_VARIABLE","$view",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$display",317],")",["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getUpdatedViewAndDisplay",317],"(",")",";",["T_WHITESPACE","\n\n    ",317],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","assertEqual",319],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$view",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","get",319],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",319],")",")",";",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","assertEqual",320],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$display",320],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",320],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",320],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",320],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",320],"]",")",";",["T_WHITESPACE","\n    ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","assertEqual",321],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data'",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$display",321],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",321],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",321],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",321],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",321],"]",")",";",["T_WHITESPACE","\n\n    ",321],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","updateEntityTypeToRevisionable",323],"(",")",";",["T_WHITESPACE","\n    ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","entityDefinitionUpdateManager",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","applyUpdates",324],"(",")",";",["T_WHITESPACE","\n    ",324],["T_LIST","list",325],"(",["T_VARIABLE","$view",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$display",325],")",["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getUpdatedViewAndDisplay",325],"(",")",";",["T_WHITESPACE","\n\n    ",325],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","assertEqual",327],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$view",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","get",327],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",327],")",")",";",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","assertEqual",328],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$display",328],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",328],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",328],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",328],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",328],"]",")",";",["T_WHITESPACE","\n    ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","assertEqual",329],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data'",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$display",329],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",329],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",329],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",329],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",329],"]",")",";",["T_WHITESPACE","\n\n    ",329],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","updateEntityTypeToNotRevisionable",331],"(",")",";",["T_WHITESPACE","\n    ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","entityDefinitionUpdateManager",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","applyUpdates",332],"(",")",";",["T_WHITESPACE","\n    ",332],["T_LIST","list",333],"(",["T_VARIABLE","$view",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$display",333],")",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getUpdatedViewAndDisplay",333],"(",")",";",["T_WHITESPACE","\n\n    ",333],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","assertEqual",335],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$view",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","get",335],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",335],")",")",";",["T_WHITESPACE","\n    ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","assertEqual",336],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$display",336],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",336],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",336],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",336],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",336],"]",")",";",["T_WHITESPACE","\n    ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","assertEqual",337],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data'",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$display",337],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",337],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",337],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",337],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",337],"]",")",";",["T_WHITESPACE","\n\n    ",337],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","resetEntityType",339],"(",")",";",["T_WHITESPACE","\n\n    ",339],["T_COMMENT","\/\/ base + revision <-> base + translation + revision\n",341],["T_WHITESPACE","    ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","updateEntityTypeToRevisionable",342],"(",")",";",["T_WHITESPACE","\n    ",342],["T_LIST","list",343],"(",["T_VARIABLE","$view",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$display",343],")",["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getUpdatedViewAndDisplay",343],"(",")",";",["T_WHITESPACE","\n\n    ",343],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","assertEqual",345],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$view",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","get",345],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",345],")",")",";",["T_WHITESPACE","\n    ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","assertEqual",346],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$display",346],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",346],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",346],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",346],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",346],"]",")",";",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","assertEqual",347],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",347],",",["T_WHITESPACE"," ",347],["T_VARIABLE","$display",347],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",347],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",347],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",347],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",347],"]",")",";",["T_WHITESPACE","\n\n    ",347],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","updateEntityTypeToTranslatable",349],"(",")",";",["T_WHITESPACE","\n    ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","entityDefinitionUpdateManager",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","applyUpdates",350],"(",")",";",["T_WHITESPACE","\n    ",350],["T_LIST","list",351],"(",["T_VARIABLE","$view",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$display",351],")",["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getUpdatedViewAndDisplay",351],"(",")",";",["T_WHITESPACE","\n\n    ",351],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","assertEqual",353],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$view",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","get",353],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",353],")",")",";",["T_WHITESPACE","\n    ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","assertEqual",354],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$display",354],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",354],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",354],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",354],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",354],"]",")",";",["T_WHITESPACE","\n    ",354],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","assertEqual",355],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data'",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$display",355],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",355],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",355],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",355],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",355],"]",")",";",["T_WHITESPACE","\n\n    ",355],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","updateEntityTypeToNotTranslatable",357],"(",")",";",["T_WHITESPACE","\n    ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","entityDefinitionUpdateManager",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","applyUpdates",358],"(",")",";",["T_WHITESPACE","\n    ",358],["T_LIST","list",359],"(",["T_VARIABLE","$view",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$display",359],")",["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getUpdatedViewAndDisplay",359],"(",")",";",["T_WHITESPACE","\n\n    ",359],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","assertEqual",361],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$view",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","get",361],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",361],")",")",";",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","assertEqual",362],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$display",362],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",362],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",362],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",362],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",362],"]",")",";",["T_WHITESPACE","\n    ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","assertEqual",363],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$display",363],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",363],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",363],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",363],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",363],"]",")",";",["T_WHITESPACE","\n\n    ",363],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","resetEntityType",365],"(",")",";",["T_WHITESPACE","\n\n    ",365],["T_COMMENT","\/\/ base <-> base + revision\n",367],["T_WHITESPACE","    ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","updateEntityTypeToRevisionable",368],"(",")",";",["T_WHITESPACE","\n    ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","entityDefinitionUpdateManager",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","applyUpdates",369],"(",")",";",["T_WHITESPACE","\n    ",369],["T_LIST","list",370],"(",["T_VARIABLE","$view",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$display",370],")",["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getUpdatedViewAndDisplay",370],"(",")",";",["T_WHITESPACE","\n\n    ",370],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","assertEqual",372],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$view",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","get",372],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",372],")",")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","assertEqual",373],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$display",373],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",373],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",373],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",373],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",373],"]",")",";",["T_WHITESPACE","\n    ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","assertEqual",374],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",374],",",["T_WHITESPACE"," ",374],["T_VARIABLE","$display",374],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",374],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",374],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",374],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",374],"]",")",";",["T_WHITESPACE","\n\n    ",374],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","updateEntityTypeToNotRevisionable",376],"(",")",";",["T_WHITESPACE","\n    ",376],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","entityDefinitionUpdateManager",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","applyUpdates",377],"(",")",";",["T_WHITESPACE","\n    ",377],["T_LIST","list",378],"(",["T_VARIABLE","$view",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$display",378],")",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getUpdatedViewAndDisplay",378],"(",")",";",["T_WHITESPACE","\n\n    ",378],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","assertEqual",380],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$view",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","get",380],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",380],")",")",";",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","assertEqual",381],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$display",381],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",381],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",381],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",381],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",381],"]",")",";",["T_WHITESPACE","\n    ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","assertEqual",382],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$display",382],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",382],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",382],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",382],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",382],"]",")",";",["T_WHITESPACE","\n\n    ",382],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","resetEntityType",384],"(",")",";",["T_WHITESPACE","\n\n    ",384],["T_COMMENT","\/\/ base <-> base + translation + revision\n",386],["T_WHITESPACE","    ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","updateEntityTypeToRevisionable",387],"(",")",";",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","updateEntityTypeToTranslatable",388],"(",")",";",["T_WHITESPACE","\n    ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","entityDefinitionUpdateManager",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","applyUpdates",389],"(",")",";",["T_WHITESPACE","\n    ",389],["T_LIST","list",390],"(",["T_VARIABLE","$view",390],",",["T_WHITESPACE"," ",390],["T_VARIABLE","$display",390],")",["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getUpdatedViewAndDisplay",390],"(",")",";",["T_WHITESPACE","\n\n    ",390],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","assertEqual",392],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$view",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","get",392],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",392],")",")",";",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","assertEqual",393],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$display",393],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",393],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",393],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",393],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",393],"]",")",";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","assertEqual",394],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_data'",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$display",394],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",394],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",394],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",394],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",394],"]",")",";",["T_WHITESPACE","\n\n    ",394],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","updateEntityTypeToNotRevisionable",396],"(",")",";",["T_WHITESPACE","\n    ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","updateEntityTypeToNotTranslatable",397],"(",")",";",["T_WHITESPACE","\n    ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","entityDefinitionUpdateManager",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","applyUpdates",398],"(",")",";",["T_WHITESPACE","\n    ",398],["T_LIST","list",399],"(",["T_VARIABLE","$view",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$display",399],")",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getUpdatedViewAndDisplay",399],"(",")",";",["T_WHITESPACE","\n\n    ",399],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","assertEqual",401],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$view",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","get",401],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",401],")",")",";",["T_WHITESPACE","\n    ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","assertEqual",402],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",402],",",["T_WHITESPACE"," ",402],["T_VARIABLE","$display",402],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",402],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",402],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",402],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",402],"]",")",";",["T_WHITESPACE","\n    ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","assertEqual",403],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$display",403],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",403],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",403],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",403],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",403],"]",")",";",["T_WHITESPACE","\n  ",403],"}",["T_WHITESPACE","\n\n  ",404],["T_DOC_COMMENT","\/**\n   * Tests some possible entity table updates for a revision view.\n   *\/",406],["T_WHITESPACE","\n  ",408],["T_PUBLIC","public",409],["T_WHITESPACE"," ",409],["T_FUNCTION","function",409],["T_WHITESPACE"," ",409],["T_STRING","testVariousTableUpdatesForRevisionView",409],"(",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n    ",409],["T_COMMENT","\/\/ base + revision <-> base + translation + revision\n",410],["T_WHITESPACE","    ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","updateEntityTypeToRevisionable",411],"(",")",";",["T_WHITESPACE","\n    ",411],["T_COMMENT","\/\/ Multiple changes, so we have to invalidate the caches, otherwise\n",412],["T_WHITESPACE","    ",413],["T_COMMENT","\/\/ the second update will revert the first.\n",413],["T_WHITESPACE","    ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","entityManager",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","clearCachedDefinitions",414],"(",")",";",["T_WHITESPACE","\n\n    ",414],["T_LIST","list",416],"(",["T_VARIABLE","$view",416],",",["T_WHITESPACE"," ",416],["T_VARIABLE","$display",416],")",["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getUpdatedViewAndDisplay",416],"(",["T_STRING","TRUE",416],")",";",["T_WHITESPACE","\n\n    ",416],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","assertEqual",418],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",418],",",["T_WHITESPACE"," ",418],["T_VARIABLE","$view",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","get",418],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",418],")",")",";",["T_WHITESPACE","\n    ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","assertEqual",419],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$display",419],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",419],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",419],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",419],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",419],"]",")",";",["T_WHITESPACE","\n    ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","assertEqual",420],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$display",420],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",420],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",420],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",420],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",420],"]",")",";",["T_WHITESPACE","\n\n    ",420],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","updateEntityTypeToTranslatable",422],"(",")",";",["T_WHITESPACE","\n    ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","entityDefinitionUpdateManager",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","applyUpdates",423],"(",")",";",["T_WHITESPACE","\n    ",423],["T_LIST","list",424],"(",["T_VARIABLE","$view",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$display",424],")",["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getUpdatedViewAndDisplay",424],"(",["T_STRING","TRUE",424],")",";",["T_WHITESPACE","\n\n    ",424],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","assertEqual",426],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$view",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","get",426],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",426],")",")",";",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","assertEqual",427],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$display",427],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",427],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",427],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",427],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",427],"]",")",";",["T_WHITESPACE","\n    ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","assertEqual",428],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision_data'",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$display",428],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",428],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",428],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",428],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",428],"]",")",";",["T_WHITESPACE","\n\n    ",428],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","updateEntityTypeToNotTranslatable",430],"(",")",";",["T_WHITESPACE","\n    ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","entityDefinitionUpdateManager",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","applyUpdates",431],"(",")",";",["T_WHITESPACE","\n    ",431],["T_LIST","list",432],"(",["T_VARIABLE","$view",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$display",432],")",["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getUpdatedViewAndDisplay",432],"(",["T_STRING","TRUE",432],")",";",["T_WHITESPACE","\n\n    ",432],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","assertEqual",434],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$view",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","get",434],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",434],")",")",";",["T_WHITESPACE","\n    ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","assertEqual",435],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$display",435],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",435],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",435],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",435],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",435],"]",")",";",["T_WHITESPACE","\n    ",435],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","assertEqual",436],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update_revision'",436],",",["T_WHITESPACE"," ",436],["T_VARIABLE","$display",436],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",436],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",436],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",436],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",436],"]",")",";",["T_WHITESPACE","\n\n    ",436],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","resetEntityType",438],"(",")",";",["T_WHITESPACE","\n  ",438],"}",["T_WHITESPACE","\n\n  ",439],["T_DOC_COMMENT","\/**\n   * Gets a view and its display.\n   *\n   * @param bool $revision\n   *   (optional) TRUE if we want to get a revision view.\n   *\n   * @return array\n   *   An array with the view as first item, and the display as second.\n   *\/",441],["T_WHITESPACE","\n  ",449],["T_PROTECTED","protected",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","getUpdatedViewAndDisplay",450],"(",["T_VARIABLE","$revision",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_STRING","FALSE",450],")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n    ",450],["T_VARIABLE","$entity_storage",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","entityManager",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getStorage",451],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",451],")",";",["T_WHITESPACE","\n    ",451],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",452],["T_WHITESPACE","\n    ",452],["T_VARIABLE","$view",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$entity_storage",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","load",453],"(",["T_VARIABLE","$revision",453],["T_WHITESPACE"," ",453],"?",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test_revision'",453],["T_WHITESPACE"," ",453],":",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'test_view_entity_test'",453],")",";",["T_WHITESPACE","\n    ",453],["T_VARIABLE","$display",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$view",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getDisplay",454],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",454],")",";",["T_WHITESPACE","\n\n    ",454],["T_RETURN","return",456],["T_WHITESPACE"," ",456],"[",["T_VARIABLE","$view",456],",",["T_WHITESPACE"," ",456],["T_VARIABLE","$display",456],"]",";",["T_WHITESPACE","\n  ",456],"}",["T_WHITESPACE","\n\n",457],"}",["T_WHITESPACE","\n",459]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","join",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Join handler for relationships that join with a subquery as the left field.\n *\n * For example:\n * @code\n * LEFT JOIN node node_term_data ON ([YOUR SUBQUERY HERE]) = node_term_data.nid\n * @endcode\n *\n * Join definition: same as \\Drupal\\views\\Plugin\\views\\join\\JoinPluginBase,\n * except:\n * - left_query: The subquery to use in the left side of the join clause.\n *\n * @ingroup views_join_handlers\n * @ViewsJoin(\"subquery\")\n *\/",5],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Subquery",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","JoinPluginBase",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Constructs a Subquery object.\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","__construct",25],"(",["T_ARRAY","array",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$configuration",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$plugin_id",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$plugin_definition",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_STRING","parent",26],["T_DOUBLE_COLON","::",26],["T_STRING","__construct",26],"(",["T_VARIABLE","$configuration",26],",",["T_WHITESPACE"," ",26],["T_VARIABLE","$plugin_id",26],",",["T_WHITESPACE"," ",26],["T_VARIABLE","$plugin_definition",26],")",";",["T_WHITESPACE","\n\n    ",26],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","left_query",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","configuration",28],"[",["T_CONSTANT_ENCAPSED_STRING","'left_query'",28],"]",";",["T_WHITESPACE","\n  ",28],"}",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Builds the SQL for the join this object represents.\n   *\n   * @param \\Drupal\\Core\\Database\\Query\\SelectInterface $select_query\n   *   The select query object.\n   * @param string $table\n   *   The base table to join.\n   * @param \\Drupal\\views\\Plugin\\views\\query\\QueryPluginBase $view_query\n   *   The source views query.\n   *\/",31],["T_WHITESPACE","\n  ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","buildJoin",41],"(",["T_VARIABLE","$select_query",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$table",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$view_query",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n    ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_EMPTY","empty",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","configuration",42],"[",["T_CONSTANT_ENCAPSED_STRING","'table formula'",42],"]",")",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n      ",42],["T_VARIABLE","$right_table",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","\"{\"",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","table",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","\"}\"",43],";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n    ",44],["T_ELSE","else",45],["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n      ",45],["T_VARIABLE","$right_table",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","configuration",46],"[",["T_CONSTANT_ENCAPSED_STRING","'table formula'",46],"]",";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Add our join condition, using a subquery on the left instead of a field.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$condition",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],"\"",["T_ENCAPSED_AND_WHITESPACE","(",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","left_query",50],["T_ENCAPSED_AND_WHITESPACE",") = ",50],["T_VARIABLE","$table",50],"[",["T_STRING","alias",50],"]",["T_ENCAPSED_AND_WHITESPACE",".",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","field",50],"\"",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$arguments",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Tack on the extra.\n",53],["T_WHITESPACE","    ",54],["T_COMMENT","\/\/ This is just copied verbatim from the parent class, which itself has a\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/   bug: https:\/\/www.drupal.org\/node\/1118100.\n",55],["T_WHITESPACE","    ",56],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_ISSET","isset",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","extra",56],")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n      ",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_STRING","is_array",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","extra",57],")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$extras",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","extra",59],["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$info",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n          ",59],["T_COMMENT","\/\/ Figure out the table name. Remember, only use aliases provided\n",60],["T_WHITESPACE","          ",61],["T_COMMENT","\/\/ if at all possible.\n",61],["T_WHITESPACE","          ",62],["T_VARIABLE","$join_table",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","''",62],";",["T_WHITESPACE","\n          ",62],["T_IF","if",63],["T_WHITESPACE"," ",63],"(","!",["T_STRING","array_key_exists",63],"(",["T_CONSTANT_ENCAPSED_STRING","'table'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$info",63],")",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$join_table",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$table",64],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",64],"]",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'.'",64],";",["T_WHITESPACE","\n          ",64],"}",["T_WHITESPACE","\n          ",65],["T_ELSEIF","elseif",66],["T_WHITESPACE"," ",66],"(",["T_ISSET","isset",66],"(",["T_VARIABLE","$info",66],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",66],"]",")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$join_table",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$info",67],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",67],"]",["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'.'",67],";",["T_WHITESPACE","\n          ",67],"}",["T_WHITESPACE","\n\n          ",68],["T_VARIABLE","$placeholder",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","':views_join_condition_'",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$select_query",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","nextPlaceholder",70],"(",")",";",["T_WHITESPACE","\n\n          ",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_STRING","is_array",72],"(",["T_VARIABLE","$info",72],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",72],"]",")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$operator",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],"!",["T_EMPTY","empty",73],"(",["T_VARIABLE","$info",73],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",73],"]",")",["T_WHITESPACE"," ",73],"?",["T_WHITESPACE"," ",73],["T_VARIABLE","$info",73],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",73],"]",["T_WHITESPACE"," ",73],":",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'IN'",73],";",["T_WHITESPACE","\n            ",73],["T_COMMENT","\/\/ Transform from IN() notation to = notation if just one value.\n",74],["T_WHITESPACE","            ",75],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_STRING","count",75],"(",["T_VARIABLE","$info",75],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",75],"]",")",["T_WHITESPACE"," ",75],["T_IS_EQUAL","==",75],["T_WHITESPACE"," ",75],["T_LNUMBER","1",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n              ",75],["T_VARIABLE","$info",76],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",76],"]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","array_shift",76],"(",["T_VARIABLE","$info",76],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",76],"]",")",";",["T_WHITESPACE","\n              ",76],["T_VARIABLE","$operator",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$operator",77],["T_WHITESPACE"," ",77],["T_IS_EQUAL","==",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'NOT IN'",77],["T_WHITESPACE"," ",77],"?",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'!='",77],["T_WHITESPACE"," ",77],":",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'='",77],";",["T_WHITESPACE","\n            ",77],"}",["T_WHITESPACE","\n          ",78],"}",["T_WHITESPACE","\n          ",79],["T_ELSE","else",80],["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$operator",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],"!",["T_EMPTY","empty",81],"(",["T_VARIABLE","$info",81],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",81],"]",")",["T_WHITESPACE"," ",81],"?",["T_WHITESPACE"," ",81],["T_VARIABLE","$info",81],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",81],"]",["T_WHITESPACE"," ",81],":",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'='",81],";",["T_WHITESPACE","\n          ",81],"}",["T_WHITESPACE","\n\n          ",82],["T_VARIABLE","$extras",84],"[","]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"\"",["T_VARIABLE","$join_table",84],["T_VARIABLE","$info",84],"[",["T_STRING","field",84],"]",["T_ENCAPSED_AND_WHITESPACE"," ",84],["T_VARIABLE","$operator",84],["T_ENCAPSED_AND_WHITESPACE"," ",84],["T_VARIABLE","$placeholder",84],"\"",";",["T_WHITESPACE","\n          ",84],["T_VARIABLE","$arguments",85],"[",["T_VARIABLE","$placeholder",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$info",85],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",85],"]",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n\n        ",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$extras",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n          ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_STRING","count",89],"(",["T_VARIABLE","$extras",89],")",["T_WHITESPACE"," ",89],["T_IS_EQUAL","==",89],["T_WHITESPACE"," ",89],["T_LNUMBER","1",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$condition",90],["T_WHITESPACE"," ",90],["T_CONCAT_EQUAL",".=",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","' AND '",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_STRING","array_shift",90],"(",["T_VARIABLE","$extras",90],")",";",["T_WHITESPACE","\n          ",90],"}",["T_WHITESPACE","\n          ",91],["T_ELSE","else",92],["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$condition",93],["T_WHITESPACE"," ",93],["T_CONCAT_EQUAL",".=",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","' AND ('",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","implode",93],"(",["T_CONSTANT_ENCAPSED_STRING","' '",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","extraOperator",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","' '",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$extras",93],")",["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","')'",93],";",["T_WHITESPACE","\n          ",93],"}",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n      ",95],"}",["T_WHITESPACE","\n      ",96],["T_ELSEIF","elseif",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","extra",97],["T_WHITESPACE"," ",97],["T_BOOLEAN_AND","&&",97],["T_WHITESPACE"," ",97],["T_STRING","is_string",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","extra",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$condition",98],["T_WHITESPACE"," ",98],["T_CONCAT_EQUAL",".=",98],["T_WHITESPACE"," ",98],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND (",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","extra",98],["T_ENCAPSED_AND_WHITESPACE",")",98],"\"",";",["T_WHITESPACE","\n      ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_VARIABLE","$select_query",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","addJoin",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","type",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$right_table",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$table",102],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",102],"]",",",["T_WHITESPACE"," ",102],["T_VARIABLE","$condition",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$arguments",102],")",";",["T_WHITESPACE","\n  ",102],"}",["T_WHITESPACE","\n\n",103],"}",["T_WHITESPACE","\n",105]]
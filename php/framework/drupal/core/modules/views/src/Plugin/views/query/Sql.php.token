[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","query",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","NestedArray",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityTypeManagerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Form",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FormStateInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","views",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Plugin",10],["T_NS_SEPARATOR","\\",10],["T_STRING","views",10],["T_NS_SEPARATOR","\\",10],["T_STRING","display",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DisplayPluginBase",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Database",11],["T_NS_SEPARATOR","\\",11],["T_STRING","DatabaseExceptionWrapper",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","views",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Plugin",12],["T_NS_SEPARATOR","\\",12],["T_STRING","views",12],["T_NS_SEPARATOR","\\",12],["T_STRING","join",12],["T_NS_SEPARATOR","\\",12],["T_STRING","JoinPluginBase",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","views",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Plugin",13],["T_NS_SEPARATOR","\\",13],["T_STRING","views",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HandlerBase",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","views",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ResultRow",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","views",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ViewExecutable",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Drupal",16],["T_NS_SEPARATOR","\\",16],["T_STRING","views",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Views",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","DependencyInjection",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ContainerInterface",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Views query plugin for an SQL query.\n *\n * @ingroup views_query_plugins\n *\n * @ViewsQuery(\n *   id = \"views_query\",\n *   title = @Translation(\"SQL Query\"),\n *   help = @Translation(\"Query will be generated and run using the Drupal database API.\")\n * )\n *\/",19],["T_WHITESPACE","\n",29],["T_CLASS","class",30],["T_WHITESPACE"," ",30],["T_STRING","Sql",30],["T_WHITESPACE"," ",30],["T_EXTENDS","extends",30],["T_WHITESPACE"," ",30],["T_STRING","QueryPluginBase",30],["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * A list of tables in the order they should be added, keyed by alias.\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$tableQueue",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",")",";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Holds an array of tables and counts added so that we can create aliases\n   *\/",37],["T_WHITESPACE","\n  ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$tables",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",")",";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Holds an array of relationships, which are aliases of the primary\n   * table that represent different ways to join the same table in.\n   *\/",42],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$relationships",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",")",";",["T_WHITESPACE","\n\n  ",46],["T_DOC_COMMENT","\/**\n   * An array of sections of the WHERE query. Each section is in itself\n   * an array of pieces and a flag as to whether or not it should be AND\n   * or OR.\n   *\/",48],["T_WHITESPACE","\n  ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$where",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",")",";",["T_WHITESPACE","\n  ",53],["T_DOC_COMMENT","\/**\n   * An array of sections of the HAVING query. Each section is in itself\n   * an array of pieces and a flag as to whether or not it should be AND\n   * or OR.\n   *\/",54],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$having",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n  ",59],["T_DOC_COMMENT","\/**\n   * The default operator to use when connecting the WHERE groups. May be\n   * AND or OR.\n   *\/",60],["T_WHITESPACE","\n  ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$groupOperator",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'AND'",64],";",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * A simple array of order by clauses.\n   *\/",66],["T_WHITESPACE","\n  ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$orderby",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",")",";",["T_WHITESPACE","\n\n  ",69],["T_DOC_COMMENT","\/**\n   * A simple array of group by clauses.\n   *\/",71],["T_WHITESPACE","\n  ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$groupby",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",")",";",["T_WHITESPACE","\n\n\n  ",74],["T_DOC_COMMENT","\/**\n   * An array of fields.\n   *\/",77],["T_WHITESPACE","\n  ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$fields",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",";",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * A flag as to whether or not to make the primary field distinct.\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$distinct",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","FALSE",85],";",["T_WHITESPACE","\n\n  ",85],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$hasAggregate",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","FALSE",87],";",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * Should this query be optimized for counts, for example no sorts.\n   *\/",89],["T_WHITESPACE","\n  ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$getCountOptimized",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","NULL",92],";",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * An array mapping table aliases and field names to field aliases.\n   *\/",94],["T_WHITESPACE","\n  ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$fieldAliases",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",")",";",["T_WHITESPACE","\n\n  ",97],["T_DOC_COMMENT","\/**\n   * Query tags which will be passed over to the dbtng query object.\n   *\/",99],["T_WHITESPACE","\n  ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$tags",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",")",";",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * Is the view marked as not distinct.\n   *\n   * @var bool\n   *\/",104],["T_WHITESPACE","\n  ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$noDistinct",109],";",["T_WHITESPACE","\n\n  ",109],["T_DOC_COMMENT","\/**\n   * The entity type manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeManagerInterface\n   *\/",111],["T_WHITESPACE","\n  ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$entityTypeManager",116],";",["T_WHITESPACE","\n\n  ",116],["T_DOC_COMMENT","\/**\n   * Constructs a Sql object.\n   *\n   * @param array $configuration\n   *   A configuration array containing information about the plugin instance.\n   * @param string $plugin_id\n   *   The plugin_id for the plugin instance.\n   * @param mixed $plugin_definition\n   *   The plugin implementation definition.\n   * @param \\Drupal\\Core\\Entity\\EntityTypeManagerInterface $entity_type_manager\n   *   The entity type manager.\n   *\/",118],["T_WHITESPACE","\n  ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","__construct",130],"(",["T_ARRAY","array",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$configuration",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$plugin_id",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$plugin_definition",130],",",["T_WHITESPACE"," ",130],["T_STRING","EntityTypeManagerInterface",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$entity_type_manager",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n    ",130],["T_STRING","parent",131],["T_DOUBLE_COLON","::",131],["T_STRING","__construct",131],"(",["T_VARIABLE","$configuration",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$plugin_id",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$plugin_definition",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","entityTypeManager",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$entity_type_manager",133],";",["T_WHITESPACE","\n  ",133],"}",["T_WHITESPACE","\n\n  ",134],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_STATIC","static",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","create",136],"(",["T_STRING","ContainerInterface",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$container",136],",",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$configuration",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$plugin_id",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$plugin_definition",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n    ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_NEW","new",137],["T_WHITESPACE"," ",137],["T_STATIC","static",137],"(",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$configuration",138],",",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$plugin_id",139],",",["T_WHITESPACE","\n      ",139],["T_VARIABLE","$plugin_definition",140],",",["T_WHITESPACE","\n      ",140],["T_VARIABLE","$container",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",141],")",["T_WHITESPACE","\n    ",141],")",";",["T_WHITESPACE","\n  ",142],"}",["T_WHITESPACE","\n\n  ",143],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",145],["T_WHITESPACE","\n  ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","init",148],"(",["T_STRING","ViewExecutable",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$view",148],",",["T_WHITESPACE"," ",148],["T_STRING","DisplayPluginBase",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$display",148],",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],["T_WHITESPACE"," ",148],"&",["T_VARIABLE","$options",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","NULL",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n    ",148],["T_STRING","parent",149],["T_DOUBLE_COLON","::",149],["T_STRING","init",149],"(",["T_VARIABLE","$view",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$display",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$options",149],")",";",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$base_table",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","view",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","storage",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","get",151],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",151],")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$base_field",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","view",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","storage",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","get",152],"(",["T_CONSTANT_ENCAPSED_STRING","'base_field'",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","relationships",153],"[",["T_VARIABLE","$base_table",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'link'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_STRING","NULL",154],",",["T_WHITESPACE","\n      ",154],["T_CONSTANT_ENCAPSED_STRING","'table'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$base_table",155],",",["T_WHITESPACE","\n      ",155],["T_CONSTANT_ENCAPSED_STRING","'alias'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$base_table",156],",",["T_WHITESPACE","\n      ",156],["T_CONSTANT_ENCAPSED_STRING","'base'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$base_table",157],["T_WHITESPACE","\n    ",157],")",";",["T_WHITESPACE","\n\n    ",158],["T_COMMENT","\/\/ init the table queue with our primary table.\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","tableQueue",161],"[",["T_VARIABLE","$base_table",161],"]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_WHITESPACE","\n      ",161],["T_CONSTANT_ENCAPSED_STRING","'alias'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$base_table",162],",",["T_WHITESPACE","\n      ",162],["T_CONSTANT_ENCAPSED_STRING","'table'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$base_table",163],",",["T_WHITESPACE","\n      ",163],["T_CONSTANT_ENCAPSED_STRING","'relationship'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$base_table",164],",",["T_WHITESPACE","\n      ",164],["T_CONSTANT_ENCAPSED_STRING","'join'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_STRING","NULL",165],",",["T_WHITESPACE","\n    ",165],")",";",["T_WHITESPACE","\n\n    ",166],["T_COMMENT","\/\/ init the tables with our primary table\n",168],["T_WHITESPACE","    ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","tables",169],"[",["T_VARIABLE","$base_table",169],"]","[",["T_VARIABLE","$base_table",169],"]",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_ARRAY","array",169],"(",["T_WHITESPACE","\n      ",169],["T_CONSTANT_ENCAPSED_STRING","'count'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_LNUMBER","1",170],",",["T_WHITESPACE","\n      ",170],["T_CONSTANT_ENCAPSED_STRING","'alias'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$base_table",171],",",["T_WHITESPACE","\n    ",171],")",";",["T_WHITESPACE","\n\n    ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","count_field",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],"(",["T_WHITESPACE","\n      ",174],["T_CONSTANT_ENCAPSED_STRING","'table'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$base_table",175],",",["T_WHITESPACE","\n      ",175],["T_CONSTANT_ENCAPSED_STRING","'field'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$base_field",176],",",["T_WHITESPACE","\n      ",176],["T_CONSTANT_ENCAPSED_STRING","'alias'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$base_field",177],",",["T_WHITESPACE","\n      ",177],["T_CONSTANT_ENCAPSED_STRING","'count'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_STRING","TRUE",178],",",["T_WHITESPACE","\n    ",178],")",";",["T_WHITESPACE","\n  ",179],"}",["T_WHITESPACE","\n\n  ",180],["T_DOC_COMMENT","\/**\n   * Set the view to be distinct (per base field).\n   *\n   * @param bool $value\n   *   Should the view be distincted.\n   *\/",182],["T_WHITESPACE","\n  ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","setDistinct",188],"(",["T_VARIABLE","$value",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","TRUE",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n    ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(","!","(",["T_ISSET","isset",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","noDistinct",189],")",["T_WHITESPACE"," ",189],["T_BOOLEAN_AND","&&",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$value",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n      ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","distinct",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$value",190],";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n  ",191],"}",["T_WHITESPACE","\n\n  ",192],["T_DOC_COMMENT","\/**\n   * Set what field the query will count() on for paging.\n   *\/",194],["T_WHITESPACE","\n  ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","setCountField",197],"(",["T_VARIABLE","$table",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$field",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$alias",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","NULL",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n    ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_EMPTY","empty",198],"(",["T_VARIABLE","$alias",198],")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n      ",198],["T_VARIABLE","$alias",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$table",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'_'",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_VARIABLE","$field",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","count_field",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_WHITESPACE","\n      ",201],["T_CONSTANT_ENCAPSED_STRING","'table'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$table",202],",",["T_WHITESPACE","\n      ",202],["T_CONSTANT_ENCAPSED_STRING","'field'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$field",203],",",["T_WHITESPACE","\n      ",203],["T_CONSTANT_ENCAPSED_STRING","'alias'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$alias",204],",",["T_WHITESPACE","\n      ",204],["T_CONSTANT_ENCAPSED_STRING","'count'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_STRING","TRUE",205],",",["T_WHITESPACE","\n    ",205],")",";",["T_WHITESPACE","\n  ",206],"}",["T_WHITESPACE","\n\n  ",207],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","defineOptions",209],"(",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$options",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","parent",210],["T_DOUBLE_COLON","::",210],["T_STRING","defineOptions",210],"(",")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$options",211],"[",["T_CONSTANT_ENCAPSED_STRING","'disable_sql_rewrite'",211],"]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_ARRAY","array",211],"(",["T_WHITESPACE","\n      ",211],["T_CONSTANT_ENCAPSED_STRING","'default'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_STRING","FALSE",212],",",["T_WHITESPACE","\n    ",212],")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$options",214],"[",["T_CONSTANT_ENCAPSED_STRING","'distinct'",214],"]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_ARRAY","array",214],"(",["T_WHITESPACE","\n      ",214],["T_CONSTANT_ENCAPSED_STRING","'default'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_STRING","FALSE",215],",",["T_WHITESPACE","\n    ",215],")",";",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$options",217],"[",["T_CONSTANT_ENCAPSED_STRING","'replica'",217],"]",["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],"(",["T_WHITESPACE","\n      ",217],["T_CONSTANT_ENCAPSED_STRING","'default'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_STRING","FALSE",218],",",["T_WHITESPACE","\n    ",218],")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$options",220],"[",["T_CONSTANT_ENCAPSED_STRING","'query_comment'",220],"]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_WHITESPACE","\n      ",220],["T_CONSTANT_ENCAPSED_STRING","'default'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","''",221],",",["T_WHITESPACE","\n    ",221],")",";",["T_WHITESPACE","\n    ",222],["T_VARIABLE","$options",223],"[",["T_CONSTANT_ENCAPSED_STRING","'query_tags'",223],"]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",["T_WHITESPACE","\n      ",223],["T_CONSTANT_ENCAPSED_STRING","'default'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_ARRAY","array",224],"(",")",",",["T_WHITESPACE","\n    ",224],")",";",["T_WHITESPACE","\n\n    ",225],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$options",227],";",["T_WHITESPACE","\n  ",227],"}",["T_WHITESPACE","\n\n  ",228],["T_DOC_COMMENT","\/**\n   * Add settings for the ui.\n   *\/",230],["T_WHITESPACE","\n  ",232],["T_PUBLIC","public",233],["T_WHITESPACE"," ",233],["T_FUNCTION","function",233],["T_WHITESPACE"," ",233],["T_STRING","buildOptionsForm",233],"(","&",["T_VARIABLE","$form",233],",",["T_WHITESPACE"," ",233],["T_STRING","FormStateInterface",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$form_state",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n    ",233],["T_STRING","parent",234],["T_DOUBLE_COLON","::",234],["T_STRING","buildOptionsForm",234],"(",["T_VARIABLE","$form",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$form_state",234],")",";",["T_WHITESPACE","\n\n    ",234],["T_VARIABLE","$form",236],"[",["T_CONSTANT_ENCAPSED_STRING","'disable_sql_rewrite'",236],"]",["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_ARRAY","array",236],"(",["T_WHITESPACE","\n      ",236],["T_CONSTANT_ENCAPSED_STRING","'#title'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","t",237],"(",["T_CONSTANT_ENCAPSED_STRING","'Disable SQL rewriting'",237],")",",",["T_WHITESPACE","\n      ",237],["T_CONSTANT_ENCAPSED_STRING","'#description'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","t",238],"(",["T_CONSTANT_ENCAPSED_STRING","'Disabling SQL rewriting will omit all query tags, i. e. disable node access checks as well as override hook_query_alter() implementations in other modules.'",238],")",",",["T_WHITESPACE","\n      ",238],["T_CONSTANT_ENCAPSED_STRING","'#type'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",239],",",["T_WHITESPACE","\n      ",239],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],"!",["T_EMPTY","empty",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","options",240],"[",["T_CONSTANT_ENCAPSED_STRING","'disable_sql_rewrite'",240],"]",")",",",["T_WHITESPACE","\n      ",240],["T_CONSTANT_ENCAPSED_STRING","'#suffix'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'<div class=\"messages messages--warning sql-rewrite-warning js-hide\">'",241],["T_WHITESPACE"," ",241],".",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","t",241],"(",["T_CONSTANT_ENCAPSED_STRING","'WARNING: Disabling SQL rewriting means that node access security is disabled. This may allow users to see data they should not be able to see if your view is misconfigured. Use this option only if you understand and accept this security risk.'",241],")",["T_WHITESPACE"," ",241],".",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'<\/div>'",241],",",["T_WHITESPACE","\n    ",241],")",";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$form",243],"[",["T_CONSTANT_ENCAPSED_STRING","'distinct'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_ARRAY","array",243],"(",["T_WHITESPACE","\n      ",243],["T_CONSTANT_ENCAPSED_STRING","'#type'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",244],",",["T_WHITESPACE","\n      ",244],["T_CONSTANT_ENCAPSED_STRING","'#title'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","t",245],"(",["T_CONSTANT_ENCAPSED_STRING","'Distinct'",245],")",",",["T_WHITESPACE","\n      ",245],["T_CONSTANT_ENCAPSED_STRING","'#description'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","t",246],"(",["T_CONSTANT_ENCAPSED_STRING","'This will make the view display only distinct items. If there are multiple identical items, each will be displayed only once. You can use this to try and remove duplicates from a view, though it does not always work. Note that this can slow queries down, so use it with caution.'",246],")",",",["T_WHITESPACE","\n      ",246],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],"!",["T_EMPTY","empty",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","options",247],"[",["T_CONSTANT_ENCAPSED_STRING","'distinct'",247],"]",")",",",["T_WHITESPACE","\n    ",247],")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$form",249],"[",["T_CONSTANT_ENCAPSED_STRING","'replica'",249],"]",["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_ARRAY","array",249],"(",["T_WHITESPACE","\n      ",249],["T_CONSTANT_ENCAPSED_STRING","'#type'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",250],",",["T_WHITESPACE","\n      ",250],["T_CONSTANT_ENCAPSED_STRING","'#title'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","t",251],"(",["T_CONSTANT_ENCAPSED_STRING","'Use Secondary Server'",251],")",",",["T_WHITESPACE","\n      ",251],["T_CONSTANT_ENCAPSED_STRING","'#description'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","t",252],"(",["T_CONSTANT_ENCAPSED_STRING","'This will make the query attempt to connect to a replica server if available.  If no replica server is defined or available, it will fall back to the default server.'",252],")",",",["T_WHITESPACE","\n      ",252],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],"!",["T_EMPTY","empty",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","options",253],"[",["T_CONSTANT_ENCAPSED_STRING","'replica'",253],"]",")",",",["T_WHITESPACE","\n    ",253],")",";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$form",255],"[",["T_CONSTANT_ENCAPSED_STRING","'query_comment'",255],"]",["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_ARRAY","array",255],"(",["T_WHITESPACE","\n      ",255],["T_CONSTANT_ENCAPSED_STRING","'#type'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'textfield'",256],",",["T_WHITESPACE","\n      ",256],["T_CONSTANT_ENCAPSED_STRING","'#title'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","t",257],"(",["T_CONSTANT_ENCAPSED_STRING","'Query Comment'",257],")",",",["T_WHITESPACE","\n      ",257],["T_CONSTANT_ENCAPSED_STRING","'#description'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","t",258],"(",["T_CONSTANT_ENCAPSED_STRING","'If set, this comment will be embedded in the query and passed to the SQL server. This can be helpful for logging or debugging.'",258],")",",",["T_WHITESPACE","\n      ",258],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","options",259],"[",["T_CONSTANT_ENCAPSED_STRING","'query_comment'",259],"]",",",["T_WHITESPACE","\n    ",259],")",";",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$form",261],"[",["T_CONSTANT_ENCAPSED_STRING","'query_tags'",261],"]",["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",["T_WHITESPACE","\n      ",261],["T_CONSTANT_ENCAPSED_STRING","'#type'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'textfield'",262],",",["T_WHITESPACE","\n      ",262],["T_CONSTANT_ENCAPSED_STRING","'#title'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","t",263],"(",["T_CONSTANT_ENCAPSED_STRING","'Query Tags'",263],")",",",["T_WHITESPACE","\n      ",263],["T_CONSTANT_ENCAPSED_STRING","'#description'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","t",264],"(",["T_CONSTANT_ENCAPSED_STRING","'If set, these tags will be appended to the query and can be used to identify the query in a module. This can be helpful for altering queries.'",264],")",",",["T_WHITESPACE","\n      ",264],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_STRING","implode",265],"(",["T_CONSTANT_ENCAPSED_STRING","', '",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","options",265],"[",["T_CONSTANT_ENCAPSED_STRING","'query_tags'",265],"]",")",",",["T_WHITESPACE","\n      ",265],["T_CONSTANT_ENCAPSED_STRING","'#element_validate'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",["T_CONSTANT_ENCAPSED_STRING","'views_element_validate_tags'",266],")",",",["T_WHITESPACE","\n    ",266],")",";",["T_WHITESPACE","\n  ",267],"}",["T_WHITESPACE","\n\n  ",268],["T_DOC_COMMENT","\/**\n   * Special submit handling.\n   *\/",270],["T_WHITESPACE","\n  ",272],["T_PUBLIC","public",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","submitOptionsForm",273],"(","&",["T_VARIABLE","$form",273],",",["T_WHITESPACE"," ",273],["T_STRING","FormStateInterface",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$form_state",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n    ",273],["T_VARIABLE","$element",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_ARRAY","array",274],"(",["T_CONSTANT_ENCAPSED_STRING","'#parents'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_ARRAY","array",274],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",274],",",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'options'",274],",",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'query_tags'",274],")",")",";",["T_WHITESPACE","\n    ",274],["T_VARIABLE","$value",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","explode",275],"(",["T_CONSTANT_ENCAPSED_STRING","','",275],",",["T_WHITESPACE"," ",275],["T_STRING","NestedArray",275],["T_DOUBLE_COLON","::",275],["T_STRING","getValue",275],"(",["T_VARIABLE","$form_state",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getValues",275],"(",")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$element",275],"[",["T_CONSTANT_ENCAPSED_STRING","'#parents'",275],"]",")",")",";",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$value",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_STRING","array_filter",276],"(",["T_STRING","array_map",276],"(",["T_CONSTANT_ENCAPSED_STRING","'trim'",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$value",276],")",")",";",["T_WHITESPACE","\n    ",276],["T_VARIABLE","$form_state",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","setValueForElement",277],"(",["T_VARIABLE","$element",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$value",277],")",";",["T_WHITESPACE","\n  ",277],"}",["T_WHITESPACE","\n\n  ",278],["T_DOC_COMMENT","\/**\n   * A relationship is an alternative endpoint to a series of table\n   * joins. Relationships must be aliases of the primary table and\n   * they must join either to the primary table or to a pre-existing\n   * relationship.\n   *\n   * An example of a relationship would be a nodereference table.\n   * If you have a nodereference named 'book_parent' which links to a\n   * parent node, you could set up a relationship 'node_book_parent'\n   * to 'node'. Then, anything that links to 'node' can link to\n   * 'node_book_parent' instead, thus allowing all properties of\n   * both nodes to be available in the query.\n   *\n   * @param $alias\n   *   What this relationship will be called, and is also the alias\n   *   for the table.\n   * @param \\Drupal\\views\\Plugin\\views\\join\\JoinPluginBase $join\n   *   A Join object (or derived object) to join the alias in.\n   * @param $base\n   *   The name of the 'base' table this relationship represents; this\n   *   tells the join search which path to attempt to use when finding\n   *   the path to this relationship.\n   * @param $link_point\n   *   If this relationship links to something other than the primary\n   *   table, specify that table here. For example, a 'track' node\n   *   might have a relationship to an 'album' node, which might\n   *   have a relationship to an 'artist' node.\n   *\/",280],["T_WHITESPACE","\n  ",307],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","addRelationship",308],"(",["T_VARIABLE","$alias",308],",",["T_WHITESPACE"," ",308],["T_STRING","JoinPluginBase",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$join",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$base",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$link_point",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_STRING","NULL",308],")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n    ",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_EMPTY","empty",309],"(",["T_VARIABLE","$link_point",309],")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n      ",309],["T_VARIABLE","$link_point",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","view",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","storage",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","get",310],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",310],")",";",["T_WHITESPACE","\n    ",310],"}",["T_WHITESPACE","\n    ",311],["T_ELSEIF","elseif",312],["T_WHITESPACE"," ",312],"(","!",["T_STRING","array_key_exists",312],"(",["T_VARIABLE","$link_point",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","relationships",312],")",")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n      ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_STRING","FALSE",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n    ",314],["T_COMMENT","\/\/ Make sure $alias isn't already used; if it, start adding stuff.\n",316],["T_WHITESPACE","    ",317],["T_VARIABLE","$alias_base",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$alias",317],";",["T_WHITESPACE","\n    ",317],["T_VARIABLE","$count",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_LNUMBER","1",318],";",["T_WHITESPACE","\n    ",318],["T_WHILE","while",319],["T_WHITESPACE"," ",319],"(","!",["T_EMPTY","empty",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","relationships",319],"[",["T_VARIABLE","$alias",319],"]",")",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n      ",319],["T_VARIABLE","$alias",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$alias_base",320],["T_WHITESPACE"," ",320],".",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'_'",320],["T_WHITESPACE"," ",320],".",["T_WHITESPACE"," ",320],["T_VARIABLE","$count",320],["T_INC","++",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_COMMENT","\/\/ Make sure this join is adjusted for our relationship.\n",323],["T_WHITESPACE","    ",324],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$link_point",324],["T_WHITESPACE"," ",324],["T_BOOLEAN_AND","&&",324],["T_WHITESPACE"," ",324],["T_ISSET","isset",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","relationships",324],"[",["T_VARIABLE","$link_point",324],"]",")",")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n      ",324],["T_VARIABLE","$join",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","adjustJoin",325],"(",["T_VARIABLE","$join",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$link_point",325],")",";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_COMMENT","\/\/ Add the table directly to the queue to avoid accidentally marking\n",328],["T_WHITESPACE","    ",329],["T_COMMENT","\/\/ it.\n",329],["T_WHITESPACE","    ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","tableQueue",330],"[",["T_VARIABLE","$alias",330],"]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_ARRAY","array",330],"(",["T_WHITESPACE","\n      ",330],["T_CONSTANT_ENCAPSED_STRING","'table'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$join",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","table",331],",",["T_WHITESPACE","\n      ",331],["T_CONSTANT_ENCAPSED_STRING","'num'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_LNUMBER","1",332],",",["T_WHITESPACE","\n      ",332],["T_CONSTANT_ENCAPSED_STRING","'alias'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$alias",333],",",["T_WHITESPACE","\n      ",333],["T_CONSTANT_ENCAPSED_STRING","'join'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$join",334],",",["T_WHITESPACE","\n      ",334],["T_CONSTANT_ENCAPSED_STRING","'relationship'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$link_point",335],",",["T_WHITESPACE","\n    ",335],")",";",["T_WHITESPACE","\n\n    ",336],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","relationships",338],"[",["T_VARIABLE","$alias",338],"]",["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",["T_WHITESPACE","\n      ",338],["T_CONSTANT_ENCAPSED_STRING","'link'",339],["T_WHITESPACE"," ",339],["T_DOUBLE_ARROW","=>",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$link_point",339],",",["T_WHITESPACE","\n      ",339],["T_CONSTANT_ENCAPSED_STRING","'table'",340],["T_WHITESPACE"," ",340],["T_DOUBLE_ARROW","=>",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$join",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","table",340],",",["T_WHITESPACE","\n      ",340],["T_CONSTANT_ENCAPSED_STRING","'base'",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$base",341],",",["T_WHITESPACE","\n    ",341],")",";",["T_WHITESPACE","\n\n    ",342],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","tables",344],"[",["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","view",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","storage",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","get",344],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",344],")","]","[",["T_VARIABLE","$alias",344],"]",["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_ARRAY","array",344],"(",["T_WHITESPACE","\n      ",344],["T_CONSTANT_ENCAPSED_STRING","'count'",345],["T_WHITESPACE"," ",345],["T_DOUBLE_ARROW","=>",345],["T_WHITESPACE"," ",345],["T_LNUMBER","1",345],",",["T_WHITESPACE","\n      ",345],["T_CONSTANT_ENCAPSED_STRING","'alias'",346],["T_WHITESPACE"," ",346],["T_DOUBLE_ARROW","=>",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$alias",346],",",["T_WHITESPACE","\n    ",346],")",";",["T_WHITESPACE","\n\n    ",347],["T_RETURN","return",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$alias",349],";",["T_WHITESPACE","\n  ",349],"}",["T_WHITESPACE","\n\n  ",350],["T_DOC_COMMENT","\/**\n   * Add a table to the query, ensuring the path exists.\n   *\n   * This function will test to ensure that the path back to the primary\n   * table is valid and exists; if you do not wish for this testing to\n   * occur, use $query->queueTable() instead.\n   *\n   * @param $table\n   *   The name of the table to add. It needs to exist in the global table\n   *   array.\n   * @param $relationship\n   *   An alias of a table; if this is set, the path back to this table will\n   *   be tested prior to adding the table, making sure that all intermediary\n   *   tables exist and are properly aliased. If set to NULL the path to\n   *   the primary table will be ensured. If the path cannot be made, the\n   *   table will NOT be added.\n   * @param \\Drupal\\views\\Plugin\\views\\join\\JoinPluginBase $join\n   *   In some join configurations this table may actually join back through\n   *   a different method; this is most likely to be used when tracing\n   *   a hierarchy path. (node->parent->parent2->parent3). This parameter\n   *   will specify how this table joins if it is not the default.\n   * @param $alias\n   *   A specific alias to use, rather than the default alias.\n   *\n   * @return string\n   *   The alias of the table; this alias can be used to access information\n   *   about the table and should always be used to refer to the table when\n   *   adding parts to the query. Or FALSE if the table was not able to be\n   *   added.\n   *\/",352],["T_WHITESPACE","\n  ",381],["T_PUBLIC","public",382],["T_WHITESPACE"," ",382],["T_FUNCTION","function",382],["T_WHITESPACE"," ",382],["T_STRING","addTable",382],"(",["T_VARIABLE","$table",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$relationship",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","NULL",382],",",["T_WHITESPACE"," ",382],["T_STRING","JoinPluginBase",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$join",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","NULL",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$alias",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","NULL",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n    ",382],["T_IF","if",383],["T_WHITESPACE"," ",383],"(","!",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","ensurePath",383],"(",["T_VARIABLE","$table",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$relationship",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$join",383],")",")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n      ",383],["T_RETURN","return",384],["T_WHITESPACE"," ",384],["T_STRING","FALSE",384],";",["T_WHITESPACE","\n    ",384],"}",["T_WHITESPACE","\n\n    ",385],["T_IF","if",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$join",387],["T_WHITESPACE"," ",387],["T_BOOLEAN_AND","&&",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$relationship",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n      ",387],["T_VARIABLE","$join",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","adjustJoin",388],"(",["T_VARIABLE","$join",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$relationship",388],")",";",["T_WHITESPACE","\n    ",388],"}",["T_WHITESPACE","\n\n    ",389],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","queueTable",391],"(",["T_VARIABLE","$table",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$relationship",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$join",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$alias",391],")",";",["T_WHITESPACE","\n  ",391],"}",["T_WHITESPACE","\n\n  ",392],["T_DOC_COMMENT","\/**\n   * Add a table to the query without ensuring the path.\n   *\n   * This is a pretty internal function to Views and addTable() or\n   * ensureTable() should be used instead of this one, unless you are\n   * absolutely sure this is what you want.\n   *\n   * @param $table\n   *   The name of the table to add. It needs to exist in the global table\n   *   array.\n   * @param $relationship\n   *   The primary table alias this table is related to. If not set, the\n   *   primary table will be used.\n   * @param \\Drupal\\views\\Plugin\\views\\join\\JoinPluginBase $join\n   *   In some join configurations this table may actually join back through\n   *   a different method; this is most likely to be used when tracing\n   *   a hierarchy path. (node->parent->parent2->parent3). This parameter\n   *   will specify how this table joins if it is not the default.\n   * @param $alias\n   *   A specific alias to use, rather than the default alias.\n   *\n   * @return string\n   *   The alias of the table; this alias can be used to access information\n   *   about the table and should always be used to refer to the table when\n   *   adding parts to the query. Or FALSE if the table was not able to be\n   *   added.\n   *\/",394],["T_WHITESPACE","\n  ",420],["T_PUBLIC","public",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","queueTable",421],"(",["T_VARIABLE","$table",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$relationship",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","NULL",421],",",["T_WHITESPACE"," ",421],["T_STRING","JoinPluginBase",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$join",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","NULL",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$alias",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","NULL",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n    ",421],["T_COMMENT","\/\/ If the alias is set, make sure it doesn't already exist.\n",422],["T_WHITESPACE","    ",423],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_ISSET","isset",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","tableQueue",423],"[",["T_VARIABLE","$alias",423],"]",")",")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n      ",423],["T_RETURN","return",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$alias",424],";",["T_WHITESPACE","\n    ",424],"}",["T_WHITESPACE","\n\n    ",425],["T_IF","if",427],["T_WHITESPACE"," ",427],"(",["T_EMPTY","empty",427],"(",["T_VARIABLE","$relationship",427],")",")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n      ",427],["T_VARIABLE","$relationship",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","view",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","storage",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","get",428],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",428],")",";",["T_WHITESPACE","\n    ",428],"}",["T_WHITESPACE","\n\n    ",429],["T_IF","if",431],["T_WHITESPACE"," ",431],"(","!",["T_STRING","array_key_exists",431],"(",["T_VARIABLE","$relationship",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","relationships",431],")",")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n      ",431],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_STRING","FALSE",432],";",["T_WHITESPACE","\n    ",432],"}",["T_WHITESPACE","\n\n    ",433],["T_IF","if",435],["T_WHITESPACE"," ",435],"(","!",["T_VARIABLE","$alias",435],["T_WHITESPACE"," ",435],["T_BOOLEAN_AND","&&",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$join",435],["T_WHITESPACE"," ",435],["T_BOOLEAN_AND","&&",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$relationship",435],["T_WHITESPACE"," ",435],["T_BOOLEAN_AND","&&",435],["T_WHITESPACE"," ",435],"!",["T_EMPTY","empty",435],"(",["T_VARIABLE","$join",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","adjusted",435],")",["T_WHITESPACE"," ",435],["T_BOOLEAN_AND","&&",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$table",435],["T_WHITESPACE"," ",435],["T_IS_NOT_EQUAL","!=",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$join",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","table",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n      ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$relationship",436],["T_WHITESPACE"," ",436],["T_IS_EQUAL","==",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","view",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","storage",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","get",436],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",436],")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$alias",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$table",437],";",["T_WHITESPACE","\n      ",437],"}",["T_WHITESPACE","\n      ",438],["T_ELSE","else",439],["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$alias",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$relationship",440],["T_WHITESPACE"," ",440],".",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'_'",440],["T_WHITESPACE"," ",440],".",["T_WHITESPACE"," ",440],["T_VARIABLE","$table",440],";",["T_WHITESPACE","\n      ",440],"}",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n\n    ",442],["T_COMMENT","\/\/ Check this again to make sure we don't blow up existing aliases for already\n",444],["T_WHITESPACE","    ",445],["T_COMMENT","\/\/ adjusted joins.\n",445],["T_WHITESPACE","    ",446],["T_IF","if",446],["T_WHITESPACE"," ",446],"(",["T_ISSET","isset",446],"(",["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","tableQueue",446],"[",["T_VARIABLE","$alias",446],"]",")",")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n      ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$alias",447],";",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n\n    ",448],["T_VARIABLE","$alias",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","markTable",450],"(",["T_VARIABLE","$table",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$relationship",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$alias",450],")",";",["T_WHITESPACE","\n\n    ",450],["T_COMMENT","\/\/ If no alias is specified, give it the default.\n",452],["T_WHITESPACE","    ",453],["T_IF","if",453],["T_WHITESPACE"," ",453],"(","!",["T_ISSET","isset",453],"(",["T_VARIABLE","$alias",453],")",")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n      ",453],["T_VARIABLE","$alias",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","tables",454],"[",["T_VARIABLE","$relationship",454],"]","[",["T_VARIABLE","$table",454],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alias'",454],"]",["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","tables",454],"[",["T_VARIABLE","$relationship",454],"]","[",["T_VARIABLE","$table",454],"]","[",["T_CONSTANT_ENCAPSED_STRING","'count'",454],"]",";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_COMMENT","\/\/ If this is a relationship based table, add a marker with\n",457],["T_WHITESPACE","    ",458],["T_COMMENT","\/\/ the relationship as a primary table for the alias.\n",458],["T_WHITESPACE","    ",459],["T_IF","if",459],["T_WHITESPACE"," ",459],"(",["T_VARIABLE","$table",459],["T_WHITESPACE"," ",459],["T_IS_NOT_EQUAL","!=",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$alias",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n      ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","markTable",460],"(",["T_VARIABLE","$alias",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","view",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","storage",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","get",460],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",460],")",",",["T_WHITESPACE"," ",460],["T_VARIABLE","$alias",460],")",";",["T_WHITESPACE","\n    ",460],"}",["T_WHITESPACE","\n\n    ",461],["T_COMMENT","\/\/ If no join is specified, pull it from the table data.\n",463],["T_WHITESPACE","    ",464],["T_IF","if",464],["T_WHITESPACE"," ",464],"(","!",["T_ISSET","isset",464],"(",["T_VARIABLE","$join",464],")",")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n      ",464],["T_VARIABLE","$join",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","getJoinData",465],"(",["T_VARIABLE","$table",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","relationships",465],"[",["T_VARIABLE","$relationship",465],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",465],"]",")",";",["T_WHITESPACE","\n      ",465],["T_IF","if",466],["T_WHITESPACE"," ",466],"(",["T_EMPTY","empty",466],"(",["T_VARIABLE","$join",466],")",")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n        ",466],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_STRING","FALSE",467],";",["T_WHITESPACE","\n      ",467],"}",["T_WHITESPACE","\n\n      ",468],["T_VARIABLE","$join",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","adjustJoin",470],"(",["T_VARIABLE","$join",470],",",["T_WHITESPACE"," ",470],["T_VARIABLE","$relationship",470],")",";",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n\n    ",471],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","tableQueue",473],"[",["T_VARIABLE","$alias",473],"]",["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_ARRAY","array",473],"(",["T_WHITESPACE","\n      ",473],["T_CONSTANT_ENCAPSED_STRING","'table'",474],["T_WHITESPACE"," ",474],["T_DOUBLE_ARROW","=>",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$table",474],",",["T_WHITESPACE","\n      ",474],["T_CONSTANT_ENCAPSED_STRING","'num'",475],["T_WHITESPACE"," ",475],["T_DOUBLE_ARROW","=>",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","tables",475],"[",["T_VARIABLE","$relationship",475],"]","[",["T_VARIABLE","$table",475],"]","[",["T_CONSTANT_ENCAPSED_STRING","'count'",475],"]",",",["T_WHITESPACE","\n      ",475],["T_CONSTANT_ENCAPSED_STRING","'alias'",476],["T_WHITESPACE"," ",476],["T_DOUBLE_ARROW","=>",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$alias",476],",",["T_WHITESPACE","\n      ",476],["T_CONSTANT_ENCAPSED_STRING","'join'",477],["T_WHITESPACE"," ",477],["T_DOUBLE_ARROW","=>",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$join",477],",",["T_WHITESPACE","\n      ",477],["T_CONSTANT_ENCAPSED_STRING","'relationship'",478],["T_WHITESPACE"," ",478],["T_DOUBLE_ARROW","=>",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$relationship",478],",",["T_WHITESPACE","\n    ",478],")",";",["T_WHITESPACE","\n\n    ",479],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$alias",481],";",["T_WHITESPACE","\n  ",481],"}",["T_WHITESPACE","\n\n  ",482],["T_PROTECTED","protected",484],["T_WHITESPACE"," ",484],["T_FUNCTION","function",484],["T_WHITESPACE"," ",484],["T_STRING","markTable",484],"(",["T_VARIABLE","$table",484],",",["T_WHITESPACE"," ",484],["T_VARIABLE","$relationship",484],",",["T_WHITESPACE"," ",484],["T_VARIABLE","$alias",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n    ",484],["T_COMMENT","\/\/ Mark that this table has been added.\n",485],["T_WHITESPACE","    ",486],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_EMPTY","empty",486],"(",["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","tables",486],"[",["T_VARIABLE","$relationship",486],"]","[",["T_VARIABLE","$table",486],"]",")",")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n      ",486],["T_IF","if",487],["T_WHITESPACE"," ",487],"(","!",["T_ISSET","isset",487],"(",["T_VARIABLE","$alias",487],")",")",["T_WHITESPACE"," ",487],"{",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$alias",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","''",488],";",["T_WHITESPACE","\n        ",488],["T_IF","if",489],["T_WHITESPACE"," ",489],"(",["T_VARIABLE","$relationship",489],["T_WHITESPACE"," ",489],["T_IS_NOT_EQUAL","!=",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","view",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","storage",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","get",489],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",489],")",")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n          ",489],["T_COMMENT","\/\/ double underscore will help prevent accidental name\n",490],["T_WHITESPACE","          ",491],["T_COMMENT","\/\/ space collisions.\n",491],["T_WHITESPACE","          ",492],["T_VARIABLE","$alias",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_VARIABLE","$relationship",492],["T_WHITESPACE"," ",492],".",["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'__'",492],";",["T_WHITESPACE","\n        ",492],"}",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$alias",494],["T_WHITESPACE"," ",494],["T_CONCAT_EQUAL",".=",494],["T_WHITESPACE"," ",494],["T_VARIABLE","$table",494],";",["T_WHITESPACE","\n      ",494],"}",["T_WHITESPACE","\n      ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","tables",496],"[",["T_VARIABLE","$relationship",496],"]","[",["T_VARIABLE","$table",496],"]",["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_ARRAY","array",496],"(",["T_WHITESPACE","\n        ",496],["T_CONSTANT_ENCAPSED_STRING","'count'",497],["T_WHITESPACE"," ",497],["T_DOUBLE_ARROW","=>",497],["T_WHITESPACE"," ",497],["T_LNUMBER","1",497],",",["T_WHITESPACE","\n        ",497],["T_CONSTANT_ENCAPSED_STRING","'alias'",498],["T_WHITESPACE"," ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$alias",498],",",["T_WHITESPACE","\n      ",498],")",";",["T_WHITESPACE","\n    ",499],"}",["T_WHITESPACE","\n    ",500],["T_ELSE","else",501],["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n      ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","tables",502],"[",["T_VARIABLE","$relationship",502],"]","[",["T_VARIABLE","$table",502],"]","[",["T_CONSTANT_ENCAPSED_STRING","'count'",502],"]",["T_INC","++",502],";",["T_WHITESPACE","\n    ",502],"}",["T_WHITESPACE","\n\n    ",503],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$alias",505],";",["T_WHITESPACE","\n  ",505],"}",["T_WHITESPACE","\n\n  ",506],["T_DOC_COMMENT","\/**\n   * Ensure a table exists in the queue; if it already exists it won't\n   * do anything, but if it doesn't it will add the table queue. It will ensure\n   * a path leads back to the relationship table.\n   *\n   * @param $table\n   *   The unaliased name of the table to ensure.\n   * @param $relationship\n   *   The relationship to ensure the table links to. Each relationship will\n   *   get a unique instance of the table being added. If not specified,\n   *   will be the primary table.\n   * @param \\Drupal\\views\\Plugin\\views\\join\\JoinPluginBase $join\n   *   A Join object (or derived object) to join the alias in.\n   *\n   * @return\n   *   The alias used to refer to this specific table, or NULL if the table\n   *   cannot be ensured.\n   *\/",508],["T_WHITESPACE","\n  ",525],["T_PUBLIC","public",526],["T_WHITESPACE"," ",526],["T_FUNCTION","function",526],["T_WHITESPACE"," ",526],["T_STRING","ensureTable",526],"(",["T_VARIABLE","$table",526],",",["T_WHITESPACE"," ",526],["T_VARIABLE","$relationship",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_STRING","NULL",526],",",["T_WHITESPACE"," ",526],["T_STRING","JoinPluginBase",526],["T_WHITESPACE"," ",526],["T_VARIABLE","$join",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_STRING","NULL",526],")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n    ",526],["T_COMMENT","\/\/ ensure a relationship\n",527],["T_WHITESPACE","    ",528],["T_IF","if",528],["T_WHITESPACE"," ",528],"(",["T_EMPTY","empty",528],"(",["T_VARIABLE","$relationship",528],")",")",["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n      ",528],["T_VARIABLE","$relationship",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","view",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","storage",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","get",529],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",529],")",";",["T_WHITESPACE","\n    ",529],"}",["T_WHITESPACE","\n\n    ",530],["T_COMMENT","\/\/ If the relationship is the primary table, this actually be a relationship\n",532],["T_WHITESPACE","    ",533],["T_COMMENT","\/\/ link back from an alias. We store all aliases along with the primary table\n",533],["T_WHITESPACE","    ",534],["T_COMMENT","\/\/ to detect this state, because eventually it'll hit a table we already\n",534],["T_WHITESPACE","    ",535],["T_COMMENT","\/\/ have and that's when we want to stop.\n",535],["T_WHITESPACE","    ",536],["T_IF","if",536],["T_WHITESPACE"," ",536],"(",["T_VARIABLE","$relationship",536],["T_WHITESPACE"," ",536],["T_IS_EQUAL","==",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","view",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","storage",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","get",536],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",536],")",["T_WHITESPACE"," ",536],["T_BOOLEAN_AND","&&",536],["T_WHITESPACE"," ",536],"!",["T_EMPTY","empty",536],"(",["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","tables",536],"[",["T_VARIABLE","$relationship",536],"]","[",["T_VARIABLE","$table",536],"]",")",")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n      ",536],["T_RETURN","return",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","tables",537],"[",["T_VARIABLE","$relationship",537],"]","[",["T_VARIABLE","$table",537],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alias'",537],"]",";",["T_WHITESPACE","\n    ",537],"}",["T_WHITESPACE","\n\n    ",538],["T_IF","if",540],["T_WHITESPACE"," ",540],"(","!",["T_STRING","array_key_exists",540],"(",["T_VARIABLE","$relationship",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","relationships",540],")",")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n      ",540],["T_RETURN","return",541],["T_WHITESPACE"," ",541],["T_STRING","FALSE",541],";",["T_WHITESPACE","\n    ",541],"}",["T_WHITESPACE","\n\n    ",542],["T_IF","if",544],["T_WHITESPACE"," ",544],"(",["T_VARIABLE","$table",544],["T_WHITESPACE"," ",544],["T_IS_EQUAL","==",544],["T_WHITESPACE"," ",544],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","relationships",544],"[",["T_VARIABLE","$relationship",544],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",544],"]",")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n      ",544],["T_RETURN","return",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$relationship",545],";",["T_WHITESPACE","\n    ",545],"}",["T_WHITESPACE","\n\n    ",546],["T_COMMENT","\/\/ If we do not have join info, fetch it.\n",548],["T_WHITESPACE","    ",549],["T_IF","if",549],["T_WHITESPACE"," ",549],"(","!",["T_ISSET","isset",549],"(",["T_VARIABLE","$join",549],")",")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n      ",549],["T_VARIABLE","$join",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getJoinData",550],"(",["T_VARIABLE","$table",550],",",["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","relationships",550],"[",["T_VARIABLE","$relationship",550],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",550],"]",")",";",["T_WHITESPACE","\n    ",550],"}",["T_WHITESPACE","\n\n    ",551],["T_COMMENT","\/\/ If it can't be fetched, this won't work.\n",553],["T_WHITESPACE","    ",554],["T_IF","if",554],["T_WHITESPACE"," ",554],"(",["T_EMPTY","empty",554],"(",["T_VARIABLE","$join",554],")",")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n      ",554],["T_RETURN","return",555],";",["T_WHITESPACE","\n    ",555],"}",["T_WHITESPACE","\n\n    ",556],["T_COMMENT","\/\/ Adjust this join for the relationship, which will ensure that the 'base'\n",558],["T_WHITESPACE","    ",559],["T_COMMENT","\/\/ table it links to is correct. Tables adjoined to a relationship\n",559],["T_WHITESPACE","    ",560],["T_COMMENT","\/\/ join to a link point, not the base table.\n",560],["T_WHITESPACE","    ",561],["T_VARIABLE","$join",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","adjustJoin",561],"(",["T_VARIABLE","$join",561],",",["T_WHITESPACE"," ",561],["T_VARIABLE","$relationship",561],")",";",["T_WHITESPACE","\n\n    ",561],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","ensurePath",563],"(",["T_VARIABLE","$table",563],",",["T_WHITESPACE"," ",563],["T_VARIABLE","$relationship",563],",",["T_WHITESPACE"," ",563],["T_VARIABLE","$join",563],")",")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n      ",563],["T_COMMENT","\/\/ Attempt to eliminate redundant joins.  If this table's\n",564],["T_WHITESPACE","      ",565],["T_COMMENT","\/\/ relationship and join exactly matches an existing table's\n",565],["T_WHITESPACE","      ",566],["T_COMMENT","\/\/ relationship and join, we do not have to join to it again;\n",566],["T_WHITESPACE","      ",567],["T_COMMENT","\/\/ just return the existing table's alias.  See\n",567],["T_WHITESPACE","      ",568],["T_COMMENT","\/\/ http:\/\/groups.drupal.org\/node\/11288 for details.\n",568],["T_WHITESPACE","      ",569],["T_COMMENT","\/\/\n",569],["T_WHITESPACE","      ",570],["T_COMMENT","\/\/ This can be done safely here but not lower down in\n",570],["T_WHITESPACE","      ",571],["T_COMMENT","\/\/ queueTable(), because queueTable() is also used by\n",571],["T_WHITESPACE","      ",572],["T_COMMENT","\/\/ addTable() which requires the ability to intentionally add\n",572],["T_WHITESPACE","      ",573],["T_COMMENT","\/\/ the same table with the same join multiple times.  For\n",573],["T_WHITESPACE","      ",574],["T_COMMENT","\/\/ example, a view that filters on 3 taxonomy terms using AND\n",574],["T_WHITESPACE","      ",575],["T_COMMENT","\/\/ needs to join taxonomy_term_data 3 times with the same join.\n",575],["T_WHITESPACE","\n      ",576],["T_COMMENT","\/\/ scan through the table queue to see if a matching join and\n",577],["T_WHITESPACE","      ",578],["T_COMMENT","\/\/ relationship exists.  If so, use it instead of this join.\n",578],["T_WHITESPACE","\n      ",579],["T_COMMENT","\/\/ TODO: Scanning through $this->tableQueue results in an\n",580],["T_WHITESPACE","      ",581],["T_COMMENT","\/\/ O(N^2) algorithm, and this code runs every time the view is\n",581],["T_WHITESPACE","      ",582],["T_COMMENT","\/\/ instantiated (Views 2 does not currently cache queries).\n",582],["T_WHITESPACE","      ",583],["T_COMMENT","\/\/ There are a couple possible \"improvements\" but we should do\n",583],["T_WHITESPACE","      ",584],["T_COMMENT","\/\/ some performance testing before picking one.\n",584],["T_WHITESPACE","      ",585],["T_FOREACH","foreach",585],["T_WHITESPACE"," ",585],"(",["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","tableQueue",585],["T_WHITESPACE"," ",585],["T_AS","as",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$queued_table",585],")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n        ",585],["T_COMMENT","\/\/ In PHP 4 and 5, the == operation returns TRUE for two objects\n",586],["T_WHITESPACE","        ",587],["T_COMMENT","\/\/ if they are instances of the same class and have the same\n",587],["T_WHITESPACE","        ",588],["T_COMMENT","\/\/ attributes and values.\n",588],["T_WHITESPACE","        ",589],["T_IF","if",589],["T_WHITESPACE"," ",589],"(",["T_VARIABLE","$queued_table",589],"[",["T_CONSTANT_ENCAPSED_STRING","'relationship'",589],"]",["T_WHITESPACE"," ",589],["T_IS_EQUAL","==",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$relationship",589],["T_WHITESPACE"," ",589],["T_BOOLEAN_AND","&&",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$queued_table",589],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",589],"]",["T_WHITESPACE"," ",589],["T_IS_EQUAL","==",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$join",589],")",["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n          ",589],["T_RETURN","return",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$queued_table",590],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",590],"]",";",["T_WHITESPACE","\n        ",590],"}",["T_WHITESPACE","\n      ",591],"}",["T_WHITESPACE","\n\n      ",592],["T_RETURN","return",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","queueTable",594],"(",["T_VARIABLE","$table",594],",",["T_WHITESPACE"," ",594],["T_VARIABLE","$relationship",594],",",["T_WHITESPACE"," ",594],["T_VARIABLE","$join",594],")",";",["T_WHITESPACE","\n    ",594],"}",["T_WHITESPACE","\n  ",595],"}",["T_WHITESPACE","\n\n  ",596],["T_DOC_COMMENT","\/**\n   * Make sure that the specified table can be properly linked to the primary\n   * table in the JOINs. This function uses recursion. If the tables\n   * needed to complete the path back to the primary table are not in the\n   * query they will be added, but additional copies will NOT be added\n   * if the table is already there.\n   *\/",598],["T_WHITESPACE","\n  ",604],["T_PROTECTED","protected",605],["T_WHITESPACE"," ",605],["T_FUNCTION","function",605],["T_WHITESPACE"," ",605],["T_STRING","ensurePath",605],"(",["T_VARIABLE","$table",605],",",["T_WHITESPACE"," ",605],["T_VARIABLE","$relationship",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_STRING","NULL",605],",",["T_WHITESPACE"," ",605],["T_VARIABLE","$join",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_STRING","NULL",605],",",["T_WHITESPACE"," ",605],["T_VARIABLE","$traced",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_ARRAY","array",605],"(",")",",",["T_WHITESPACE"," ",605],["T_VARIABLE","$add",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_ARRAY","array",605],"(",")",")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n    ",605],["T_IF","if",606],["T_WHITESPACE"," ",606],"(","!",["T_ISSET","isset",606],"(",["T_VARIABLE","$relationship",606],")",")",["T_WHITESPACE"," ",606],"{",["T_WHITESPACE","\n      ",606],["T_VARIABLE","$relationship",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","view",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","storage",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","get",607],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",607],")",";",["T_WHITESPACE","\n    ",607],"}",["T_WHITESPACE","\n\n    ",608],["T_IF","if",610],["T_WHITESPACE"," ",610],"(","!",["T_STRING","array_key_exists",610],"(",["T_VARIABLE","$relationship",610],",",["T_WHITESPACE"," ",610],["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","relationships",610],")",")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n      ",610],["T_RETURN","return",611],["T_WHITESPACE"," ",611],["T_STRING","FALSE",611],";",["T_WHITESPACE","\n    ",611],"}",["T_WHITESPACE","\n\n    ",612],["T_COMMENT","\/\/ If we do not have join info, fetch it.\n",614],["T_WHITESPACE","    ",615],["T_IF","if",615],["T_WHITESPACE"," ",615],"(","!",["T_ISSET","isset",615],"(",["T_VARIABLE","$join",615],")",")",["T_WHITESPACE"," ",615],"{",["T_WHITESPACE","\n      ",615],["T_VARIABLE","$join",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","getJoinData",616],"(",["T_VARIABLE","$table",616],",",["T_WHITESPACE"," ",616],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","relationships",616],"[",["T_VARIABLE","$relationship",616],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",616],"]",")",";",["T_WHITESPACE","\n    ",616],"}",["T_WHITESPACE","\n\n    ",617],["T_COMMENT","\/\/ If it can't be fetched, this won't work.\n",619],["T_WHITESPACE","    ",620],["T_IF","if",620],["T_WHITESPACE"," ",620],"(",["T_EMPTY","empty",620],"(",["T_VARIABLE","$join",620],")",")",["T_WHITESPACE"," ",620],"{",["T_WHITESPACE","\n      ",620],["T_RETURN","return",621],["T_WHITESPACE"," ",621],["T_STRING","FALSE",621],";",["T_WHITESPACE","\n    ",621],"}",["T_WHITESPACE","\n\n    ",622],["T_COMMENT","\/\/ Does a table along this path exist?\n",624],["T_WHITESPACE","    ",625],["T_IF","if",625],["T_WHITESPACE"," ",625],"(",["T_ISSET","isset",625],"(",["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","tables",625],"[",["T_VARIABLE","$relationship",625],"]","[",["T_VARIABLE","$table",625],"]",")",["T_WHITESPACE"," ",625],["T_BOOLEAN_OR","||",625],["T_WHITESPACE","\n      ",625],"(",["T_VARIABLE","$join",626],["T_WHITESPACE"," ",626],["T_BOOLEAN_AND","&&",626],["T_WHITESPACE"," ",626],["T_VARIABLE","$join",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","leftTable",626],["T_WHITESPACE"," ",626],["T_IS_EQUAL","==",626],["T_WHITESPACE"," ",626],["T_VARIABLE","$relationship",626],")",["T_WHITESPACE"," ",626],["T_BOOLEAN_OR","||",626],["T_WHITESPACE","\n      ",626],"(",["T_VARIABLE","$join",627],["T_WHITESPACE"," ",627],["T_BOOLEAN_AND","&&",627],["T_WHITESPACE"," ",627],["T_VARIABLE","$join",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","leftTable",627],["T_WHITESPACE"," ",627],["T_IS_EQUAL","==",627],["T_WHITESPACE"," ",627],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","relationships",627],"[",["T_VARIABLE","$relationship",627],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",627],"]",")",")",["T_WHITESPACE"," ",627],"{",["T_WHITESPACE","\n\n      ",627],["T_COMMENT","\/\/ Make sure that we're linking to the correct table for our relationship.\n",629],["T_WHITESPACE","      ",630],["T_FOREACH","foreach",630],["T_WHITESPACE"," ",630],"(",["T_STRING","array_reverse",630],"(",["T_VARIABLE","$add",630],")",["T_WHITESPACE"," ",630],["T_AS","as",630],["T_WHITESPACE"," ",630],["T_VARIABLE","$table",630],["T_WHITESPACE"," ",630],["T_DOUBLE_ARROW","=>",630],["T_WHITESPACE"," ",630],["T_VARIABLE","$path_join",630],")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n        ",630],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","queueTable",631],"(",["T_VARIABLE","$table",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$relationship",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","adjustJoin",631],"(",["T_VARIABLE","$path_join",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$relationship",631],")",")",";",["T_WHITESPACE","\n      ",631],"}",["T_WHITESPACE","\n      ",632],["T_RETURN","return",633],["T_WHITESPACE"," ",633],["T_STRING","TRUE",633],";",["T_WHITESPACE","\n    ",633],"}",["T_WHITESPACE","\n\n    ",634],["T_COMMENT","\/\/ Have we been this way?\n",636],["T_WHITESPACE","    ",637],["T_IF","if",637],["T_WHITESPACE"," ",637],"(",["T_ISSET","isset",637],"(",["T_VARIABLE","$traced",637],"[",["T_VARIABLE","$join",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","leftTable",637],"]",")",")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n      ",637],["T_COMMENT","\/\/ We looped. Broken.\n",638],["T_WHITESPACE","      ",639],["T_RETURN","return",639],["T_WHITESPACE"," ",639],["T_STRING","FALSE",639],";",["T_WHITESPACE","\n    ",639],"}",["T_WHITESPACE","\n\n    ",640],["T_COMMENT","\/\/ Do we have to add this table?\n",642],["T_WHITESPACE","    ",643],["T_VARIABLE","$left_join",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","getJoinData",643],"(",["T_VARIABLE","$join",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","leftTable",643],",",["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","relationships",643],"[",["T_VARIABLE","$relationship",643],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",643],"]",")",";",["T_WHITESPACE","\n    ",643],["T_IF","if",644],["T_WHITESPACE"," ",644],"(","!",["T_ISSET","isset",644],"(",["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","tables",644],"[",["T_VARIABLE","$relationship",644],"]","[",["T_VARIABLE","$join",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","leftTable",644],"]",")",")",["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n      ",644],["T_VARIABLE","$add",645],"[",["T_VARIABLE","$join",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","leftTable",645],"]",["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_VARIABLE","$left_join",645],";",["T_WHITESPACE","\n    ",645],"}",["T_WHITESPACE","\n\n    ",646],["T_COMMENT","\/\/ Keep looking.\n",648],["T_WHITESPACE","    ",649],["T_VARIABLE","$traced",649],"[",["T_VARIABLE","$join",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","leftTable",649],"]",["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_STRING","TRUE",649],";",["T_WHITESPACE","\n    ",649],["T_RETURN","return",650],["T_WHITESPACE"," ",650],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","ensurePath",650],"(",["T_VARIABLE","$join",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","leftTable",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$relationship",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$left_join",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$traced",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$add",650],")",";",["T_WHITESPACE","\n  ",650],"}",["T_WHITESPACE","\n\n  ",651],["T_DOC_COMMENT","\/**\n   * Fix a join to adhere to the proper relationship; the left table can vary\n   * based upon what relationship items are joined in on.\n   *\/",653],["T_WHITESPACE","\n  ",656],["T_PROTECTED","protected",657],["T_WHITESPACE"," ",657],["T_FUNCTION","function",657],["T_WHITESPACE"," ",657],["T_STRING","adjustJoin",657],"(",["T_VARIABLE","$join",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$relationship",657],")",["T_WHITESPACE"," ",657],"{",["T_WHITESPACE","\n    ",657],["T_IF","if",658],["T_WHITESPACE"," ",658],"(","!",["T_EMPTY","empty",658],"(",["T_VARIABLE","$join",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","adjusted",658],")",")",["T_WHITESPACE"," ",658],"{",["T_WHITESPACE","\n      ",658],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$join",659],";",["T_WHITESPACE","\n    ",659],"}",["T_WHITESPACE","\n\n    ",660],["T_IF","if",662],["T_WHITESPACE"," ",662],"(",["T_EMPTY","empty",662],"(",["T_VARIABLE","$relationship",662],")",["T_WHITESPACE"," ",662],["T_BOOLEAN_OR","||",662],["T_WHITESPACE"," ",662],["T_EMPTY","empty",662],"(",["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","relationships",662],"[",["T_VARIABLE","$relationship",662],"]",")",")",["T_WHITESPACE"," ",662],"{",["T_WHITESPACE","\n      ",662],["T_RETURN","return",663],["T_WHITESPACE"," ",663],["T_VARIABLE","$join",663],";",["T_WHITESPACE","\n    ",663],"}",["T_WHITESPACE","\n\n    ",664],["T_COMMENT","\/\/ Adjusts the left table for our relationship.\n",666],["T_WHITESPACE","    ",667],["T_IF","if",667],["T_WHITESPACE"," ",667],"(",["T_VARIABLE","$relationship",667],["T_WHITESPACE"," ",667],["T_IS_NOT_EQUAL","!=",667],["T_WHITESPACE"," ",667],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","view",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","storage",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","get",667],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",667],")",")",["T_WHITESPACE"," ",667],"{",["T_WHITESPACE","\n      ",667],["T_COMMENT","\/\/ If we're linking to the primary table, the relationship to use will\n",668],["T_WHITESPACE","      ",669],["T_COMMENT","\/\/ be the prior relationship. Unless it's a direct link.\n",669],["T_WHITESPACE","\n      ",670],["T_COMMENT","\/\/ Safety! Don't modify an original here.\n",671],["T_WHITESPACE","      ",672],["T_VARIABLE","$join",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_CLONE","clone",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$join",672],";",["T_WHITESPACE","\n\n      ",672],["T_COMMENT","\/\/ Do we need to try to ensure a path?\n",674],["T_WHITESPACE","      ",675],["T_IF","if",675],["T_WHITESPACE"," ",675],"(",["T_VARIABLE","$join",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","leftTable",675],["T_WHITESPACE"," ",675],["T_IS_NOT_EQUAL","!=",675],["T_WHITESPACE"," ",675],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","relationships",675],"[",["T_VARIABLE","$relationship",675],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",675],"]",["T_WHITESPACE"," ",675],["T_BOOLEAN_AND","&&",675],["T_WHITESPACE","\n        ",675],["T_VARIABLE","$join",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","leftTable",676],["T_WHITESPACE"," ",676],["T_IS_NOT_EQUAL","!=",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","relationships",676],"[",["T_VARIABLE","$relationship",676],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",676],"]",["T_WHITESPACE"," ",676],["T_BOOLEAN_AND","&&",676],["T_WHITESPACE","\n        ",676],"!",["T_ISSET","isset",677],"(",["T_VARIABLE","$this",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","tables",677],"[",["T_VARIABLE","$relationship",677],"]","[",["T_VARIABLE","$join",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","leftTable",677],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alias'",677],"]",")",")",["T_WHITESPACE"," ",677],"{",["T_WHITESPACE","\n        ",677],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","ensureTable",678],"(",["T_VARIABLE","$join",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","leftTable",678],",",["T_WHITESPACE"," ",678],["T_VARIABLE","$relationship",678],")",";",["T_WHITESPACE","\n      ",678],"}",["T_WHITESPACE","\n\n      ",679],["T_COMMENT","\/\/ First, if this is our link point\/anchor table, just use the relationship\n",681],["T_WHITESPACE","      ",682],["T_IF","if",682],["T_WHITESPACE"," ",682],"(",["T_VARIABLE","$join",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","leftTable",682],["T_WHITESPACE"," ",682],["T_IS_EQUAL","==",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","relationships",682],"[",["T_VARIABLE","$relationship",682],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",682],"]",")",["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n        ",682],["T_VARIABLE","$join",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","leftTable",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_VARIABLE","$relationship",683],";",["T_WHITESPACE","\n      ",683],"}",["T_WHITESPACE","\n      ",684],["T_COMMENT","\/\/ then, try the base alias.\n",685],["T_WHITESPACE","      ",686],["T_ELSEIF","elseif",686],["T_WHITESPACE"," ",686],"(",["T_ISSET","isset",686],"(",["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","tables",686],"[",["T_VARIABLE","$relationship",686],"]","[",["T_VARIABLE","$join",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","leftTable",686],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alias'",686],"]",")",")",["T_WHITESPACE"," ",686],"{",["T_WHITESPACE","\n        ",686],["T_VARIABLE","$join",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","leftTable",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","tables",687],"[",["T_VARIABLE","$relationship",687],"]","[",["T_VARIABLE","$join",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","leftTable",687],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alias'",687],"]",";",["T_WHITESPACE","\n      ",687],"}",["T_WHITESPACE","\n      ",688],["T_COMMENT","\/\/ But if we're already looking at an alias, use that instead.\n",689],["T_WHITESPACE","      ",690],["T_ELSEIF","elseif",690],["T_WHITESPACE"," ",690],"(",["T_ISSET","isset",690],"(",["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","tableQueue",690],"[",["T_VARIABLE","$relationship",690],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alias'",690],"]",")",")",["T_WHITESPACE"," ",690],"{",["T_WHITESPACE","\n        ",690],["T_VARIABLE","$join",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","leftTable",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","tableQueue",691],"[",["T_VARIABLE","$relationship",691],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alias'",691],"]",";",["T_WHITESPACE","\n      ",691],"}",["T_WHITESPACE","\n    ",692],"}",["T_WHITESPACE","\n\n    ",693],["T_VARIABLE","$join",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","adjusted",695],["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_STRING","TRUE",695],";",["T_WHITESPACE","\n    ",695],["T_RETURN","return",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$join",696],";",["T_WHITESPACE","\n  ",696],"}",["T_WHITESPACE","\n\n  ",697],["T_DOC_COMMENT","\/**\n   * Retrieve join data from the larger join data cache.\n   *\n   * @param $table\n   *   The table to get the join information for.\n   * @param $base_table\n   *   The path we're following to get this join.\n   *\n   * @return \\Drupal\\views\\Plugin\\views\\join\\JoinPluginBase\n   *   A Join object or child object, if one exists.\n   *\/",699],["T_WHITESPACE","\n  ",709],["T_PUBLIC","public",710],["T_WHITESPACE"," ",710],["T_FUNCTION","function",710],["T_WHITESPACE"," ",710],["T_STRING","getJoinData",710],"(",["T_VARIABLE","$table",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$base_table",710],")",["T_WHITESPACE"," ",710],"{",["T_WHITESPACE","\n    ",710],["T_COMMENT","\/\/ Check to see if we're linking to a known alias. If so, get the real\n",711],["T_WHITESPACE","    ",712],["T_COMMENT","\/\/ table's data instead.\n",712],["T_WHITESPACE","    ",713],["T_IF","if",713],["T_WHITESPACE"," ",713],"(","!",["T_EMPTY","empty",713],"(",["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","tableQueue",713],"[",["T_VARIABLE","$table",713],"]",")",")",["T_WHITESPACE"," ",713],"{",["T_WHITESPACE","\n      ",713],["T_VARIABLE","$table",714],["T_WHITESPACE"," ",714],"=",["T_WHITESPACE"," ",714],["T_VARIABLE","$this",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","tableQueue",714],"[",["T_VARIABLE","$table",714],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",714],"]",";",["T_WHITESPACE","\n    ",714],"}",["T_WHITESPACE","\n    ",715],["T_RETURN","return",716],["T_WHITESPACE"," ",716],["T_STRING","HandlerBase",716],["T_DOUBLE_COLON","::",716],["T_STRING","getTableJoin",716],"(",["T_VARIABLE","$table",716],",",["T_WHITESPACE"," ",716],["T_VARIABLE","$base_table",716],")",";",["T_WHITESPACE","\n  ",716],"}",["T_WHITESPACE","\n\n  ",717],["T_DOC_COMMENT","\/**\n   * Get the information associated with a table.\n   *\n   * If you need the alias of a table with a particular relationship, use\n   * ensureTable().\n   *\/",719],["T_WHITESPACE","\n  ",724],["T_PUBLIC","public",725],["T_WHITESPACE"," ",725],["T_FUNCTION","function",725],["T_WHITESPACE"," ",725],["T_STRING","getTableInfo",725],"(",["T_VARIABLE","$table",725],")",["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n    ",725],["T_IF","if",726],["T_WHITESPACE"," ",726],"(","!",["T_EMPTY","empty",726],"(",["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","tableQueue",726],"[",["T_VARIABLE","$table",726],"]",")",")",["T_WHITESPACE"," ",726],"{",["T_WHITESPACE","\n      ",726],["T_RETURN","return",727],["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","tableQueue",727],"[",["T_VARIABLE","$table",727],"]",";",["T_WHITESPACE","\n    ",727],"}",["T_WHITESPACE","\n\n    ",728],["T_COMMENT","\/\/ In rare cases we might *only* have aliased versions of the table.\n",730],["T_WHITESPACE","    ",731],["T_IF","if",731],["T_WHITESPACE"," ",731],"(","!",["T_EMPTY","empty",731],"(",["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","tables",731],"[",["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","view",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","storage",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","get",731],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",731],")","]","[",["T_VARIABLE","$table",731],"]",")",")",["T_WHITESPACE"," ",731],"{",["T_WHITESPACE","\n      ",731],["T_VARIABLE","$alias",732],["T_WHITESPACE"," ",732],"=",["T_WHITESPACE"," ",732],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","tables",732],"[",["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","view",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","storage",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","get",732],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",732],")","]","[",["T_VARIABLE","$table",732],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alias'",732],"]",";",["T_WHITESPACE","\n      ",732],["T_IF","if",733],["T_WHITESPACE"," ",733],"(","!",["T_EMPTY","empty",733],"(",["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","tableQueue",733],"[",["T_VARIABLE","$alias",733],"]",")",")",["T_WHITESPACE"," ",733],"{",["T_WHITESPACE","\n        ",733],["T_RETURN","return",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$this",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","tableQueue",734],"[",["T_VARIABLE","$alias",734],"]",";",["T_WHITESPACE","\n      ",734],"}",["T_WHITESPACE","\n    ",735],"}",["T_WHITESPACE","\n  ",736],"}",["T_WHITESPACE","\n\n  ",737],["T_DOC_COMMENT","\/**\n   * Add a field to the query table, possibly with an alias. This will\n   * automatically call ensureTable to make sure the required table\n   * exists, *unless* $table is unset.\n   *\n   * @param $table\n   *   The table this field is attached to. If NULL, it is assumed this will\n   *   be a formula; otherwise, ensureTable is used to make sure the\n   *   table exists.\n   * @param $field\n   *   The name of the field to add. This may be a real field or a formula.\n   * @param $alias\n   *   The alias to create. If not specified, the alias will be $table_$field\n   *   unless $table is NULL. When adding formulae, it is recommended that an\n   *   alias be used.\n   * @param $params\n   *   An array of parameters additional to the field that will control items\n   *   such as aggregation functions and DISTINCT. Some values that are\n   *   recognized:\n   *   - function: An aggregation function to apply, such as SUM.\n   *   - aggregate: Set to TRUE to indicate that this value should be\n   *     aggregated in a GROUP BY.\n   *\n   * @return string\n   *   The name that this field can be referred to as. Usually this is the alias.\n   *\/",739],["T_WHITESPACE","\n  ",764],["T_PUBLIC","public",765],["T_WHITESPACE"," ",765],["T_FUNCTION","function",765],["T_WHITESPACE"," ",765],["T_STRING","addField",765],"(",["T_VARIABLE","$table",765],",",["T_WHITESPACE"," ",765],["T_VARIABLE","$field",765],",",["T_WHITESPACE"," ",765],["T_VARIABLE","$alias",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_CONSTANT_ENCAPSED_STRING","''",765],",",["T_WHITESPACE"," ",765],["T_VARIABLE","$params",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_ARRAY","array",765],"(",")",")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n    ",765],["T_COMMENT","\/\/ We check for this specifically because it gets a special alias.\n",766],["T_WHITESPACE","    ",767],["T_IF","if",767],["T_WHITESPACE"," ",767],"(",["T_VARIABLE","$table",767],["T_WHITESPACE"," ",767],["T_IS_EQUAL","==",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","view",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","storage",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","get",767],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",767],")",["T_WHITESPACE"," ",767],["T_BOOLEAN_AND","&&",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$field",767],["T_WHITESPACE"," ",767],["T_IS_EQUAL","==",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","view",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","storage",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","get",767],"(",["T_CONSTANT_ENCAPSED_STRING","'base_field'",767],")",["T_WHITESPACE"," ",767],["T_BOOLEAN_AND","&&",767],["T_WHITESPACE"," ",767],["T_EMPTY","empty",767],"(",["T_VARIABLE","$alias",767],")",")",["T_WHITESPACE"," ",767],"{",["T_WHITESPACE","\n      ",767],["T_VARIABLE","$alias",768],["T_WHITESPACE"," ",768],"=",["T_WHITESPACE"," ",768],["T_VARIABLE","$this",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","view",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","storage",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","get",768],"(",["T_CONSTANT_ENCAPSED_STRING","'base_field'",768],")",";",["T_WHITESPACE","\n    ",768],"}",["T_WHITESPACE","\n\n    ",769],["T_IF","if",771],["T_WHITESPACE"," ",771],"(",["T_VARIABLE","$table",771],["T_WHITESPACE"," ",771],["T_BOOLEAN_AND","&&",771],["T_WHITESPACE"," ",771],["T_EMPTY","empty",771],"(",["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","tableQueue",771],"[",["T_VARIABLE","$table",771],"]",")",")",["T_WHITESPACE"," ",771],"{",["T_WHITESPACE","\n      ",771],["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","ensureTable",772],"(",["T_VARIABLE","$table",772],")",";",["T_WHITESPACE","\n    ",772],"}",["T_WHITESPACE","\n\n    ",773],["T_IF","if",775],["T_WHITESPACE"," ",775],"(","!",["T_VARIABLE","$alias",775],["T_WHITESPACE"," ",775],["T_BOOLEAN_AND","&&",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$table",775],")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n      ",775],["T_VARIABLE","$alias",776],["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_VARIABLE","$table",776],["T_WHITESPACE"," ",776],".",["T_WHITESPACE"," ",776],["T_CONSTANT_ENCAPSED_STRING","'_'",776],["T_WHITESPACE"," ",776],".",["T_WHITESPACE"," ",776],["T_VARIABLE","$field",776],";",["T_WHITESPACE","\n    ",776],"}",["T_WHITESPACE","\n\n    ",777],["T_COMMENT","\/\/ Make sure an alias is assigned\n",779],["T_WHITESPACE","    ",780],["T_VARIABLE","$alias",780],["T_WHITESPACE"," ",780],"=",["T_WHITESPACE"," ",780],["T_VARIABLE","$alias",780],["T_WHITESPACE"," ",780],"?",["T_WHITESPACE"," ",780],["T_VARIABLE","$alias",780],["T_WHITESPACE"," ",780],":",["T_WHITESPACE"," ",780],["T_VARIABLE","$field",780],";",["T_WHITESPACE","\n\n    ",780],["T_COMMENT","\/\/ PostgreSQL truncates aliases to 63 characters:\n",782],["T_WHITESPACE","    ",783],["T_COMMENT","\/\/   https:\/\/www.drupal.org\/node\/571548.\n",783],["T_WHITESPACE","\n    ",784],["T_COMMENT","\/\/ We limit the length of the original alias up to 60 characters\n",785],["T_WHITESPACE","    ",786],["T_COMMENT","\/\/ to get a unique alias later if its have duplicates\n",786],["T_WHITESPACE","    ",787],["T_VARIABLE","$alias",787],["T_WHITESPACE"," ",787],"=",["T_WHITESPACE"," ",787],["T_STRING","strtolower",787],"(",["T_STRING","substr",787],"(",["T_VARIABLE","$alias",787],",",["T_WHITESPACE"," ",787],["T_LNUMBER","0",787],",",["T_WHITESPACE"," ",787],["T_LNUMBER","60",787],")",")",";",["T_WHITESPACE","\n\n    ",787],["T_COMMENT","\/\/ Create a field info array.\n",789],["T_WHITESPACE","    ",790],["T_VARIABLE","$field_info",790],["T_WHITESPACE"," ",790],"=",["T_WHITESPACE"," ",790],["T_ARRAY","array",790],"(",["T_WHITESPACE","\n      ",790],["T_CONSTANT_ENCAPSED_STRING","'field'",791],["T_WHITESPACE"," ",791],["T_DOUBLE_ARROW","=>",791],["T_WHITESPACE"," ",791],["T_VARIABLE","$field",791],",",["T_WHITESPACE","\n      ",791],["T_CONSTANT_ENCAPSED_STRING","'table'",792],["T_WHITESPACE"," ",792],["T_DOUBLE_ARROW","=>",792],["T_WHITESPACE"," ",792],["T_VARIABLE","$table",792],",",["T_WHITESPACE","\n      ",792],["T_CONSTANT_ENCAPSED_STRING","'alias'",793],["T_WHITESPACE"," ",793],["T_DOUBLE_ARROW","=>",793],["T_WHITESPACE"," ",793],["T_VARIABLE","$alias",793],",",["T_WHITESPACE","\n    ",793],")",["T_WHITESPACE"," ",794],"+",["T_WHITESPACE"," ",794],["T_VARIABLE","$params",794],";",["T_WHITESPACE","\n\n    ",794],["T_COMMENT","\/\/ Test to see if the field is actually the same or not. Due to\n",796],["T_WHITESPACE","    ",797],["T_COMMENT","\/\/ differing parameters changing the aggregation function, we need\n",797],["T_WHITESPACE","    ",798],["T_COMMENT","\/\/ to do some automatic alias collision detection:\n",798],["T_WHITESPACE","    ",799],["T_VARIABLE","$base",799],["T_WHITESPACE"," ",799],"=",["T_WHITESPACE"," ",799],["T_VARIABLE","$alias",799],";",["T_WHITESPACE","\n    ",799],["T_VARIABLE","$counter",800],["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_LNUMBER","0",800],";",["T_WHITESPACE","\n    ",800],["T_WHILE","while",801],["T_WHITESPACE"," ",801],"(","!",["T_EMPTY","empty",801],"(",["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","fields",801],"[",["T_VARIABLE","$alias",801],"]",")",["T_WHITESPACE"," ",801],["T_BOOLEAN_AND","&&",801],["T_WHITESPACE"," ",801],["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","fields",801],"[",["T_VARIABLE","$alias",801],"]",["T_WHITESPACE"," ",801],["T_IS_NOT_EQUAL","!=",801],["T_WHITESPACE"," ",801],["T_VARIABLE","$field_info",801],")",["T_WHITESPACE"," ",801],"{",["T_WHITESPACE","\n      ",801],["T_VARIABLE","$field_info",802],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",802],"]",["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_VARIABLE","$alias",802],["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_VARIABLE","$base",802],["T_WHITESPACE"," ",802],".",["T_WHITESPACE"," ",802],["T_CONSTANT_ENCAPSED_STRING","'_'",802],["T_WHITESPACE"," ",802],".",["T_WHITESPACE"," ",802],["T_INC","++",802],["T_VARIABLE","$counter",802],";",["T_WHITESPACE","\n    ",802],"}",["T_WHITESPACE","\n\n    ",803],["T_IF","if",805],["T_WHITESPACE"," ",805],"(",["T_EMPTY","empty",805],"(",["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","fields",805],"[",["T_VARIABLE","$alias",805],"]",")",")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n      ",805],["T_VARIABLE","$this",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","fields",806],"[",["T_VARIABLE","$alias",806],"]",["T_WHITESPACE"," ",806],"=",["T_WHITESPACE"," ",806],["T_VARIABLE","$field_info",806],";",["T_WHITESPACE","\n    ",806],"}",["T_WHITESPACE","\n\n    ",807],["T_COMMENT","\/\/ Keep track of all aliases used.\n",809],["T_WHITESPACE","    ",810],["T_VARIABLE","$this",810],["T_OBJECT_OPERATOR","->",810],["T_STRING","fieldAliases",810],"[",["T_VARIABLE","$table",810],"]","[",["T_VARIABLE","$field",810],"]",["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_VARIABLE","$alias",810],";",["T_WHITESPACE","\n\n    ",810],["T_RETURN","return",812],["T_WHITESPACE"," ",812],["T_VARIABLE","$alias",812],";",["T_WHITESPACE","\n  ",812],"}",["T_WHITESPACE","\n\n  ",813],["T_DOC_COMMENT","\/**\n   * Remove all fields that may've been added; primarily used for summary\n   * mode where we're changing the query because we didn't get data we needed.\n   *\/",815],["T_WHITESPACE","\n  ",818],["T_PUBLIC","public",819],["T_WHITESPACE"," ",819],["T_FUNCTION","function",819],["T_WHITESPACE"," ",819],["T_STRING","clearFields",819],"(",")",["T_WHITESPACE"," ",819],"{",["T_WHITESPACE","\n    ",819],["T_VARIABLE","$this",820],["T_OBJECT_OPERATOR","->",820],["T_STRING","fields",820],["T_WHITESPACE"," ",820],"=",["T_WHITESPACE"," ",820],["T_ARRAY","array",820],"(",")",";",["T_WHITESPACE","\n  ",820],"}",["T_WHITESPACE","\n\n  ",821],["T_DOC_COMMENT","\/**\n   * Add a simple WHERE clause to the query. The caller is responsible for\n   * ensuring that all fields are fully qualified (TABLE.FIELD) and that\n   * the table already exists in the query.\n   *\n   * The $field, $value and $operator arguments can also be passed in with a\n   * single DatabaseCondition object, like this:\n   * @code\n   * $this->query->addWhere(\n   *   $this->options['group'],\n   *   db_or()\n   *     ->condition($field, $value, 'NOT IN')\n   *     ->condition($field, $value, 'IS NULL')\n   * );\n   * @endcode\n   *\n   * @param $group\n   *   The WHERE group to add these to; groups are used to create AND\/OR\n   *   sections. Groups cannot be nested. Use 0 as the default group.\n   *   If the group does not yet exist it will be created as an AND group.\n   * @param $field\n   *   The name of the field to check.\n   * @param $value\n   *   The value to test the field against. In most cases, this is a scalar. For more\n   *   complex options, it is an array. The meaning of each element in the array is\n   *   dependent on the $operator.\n   * @param $operator\n   *   The comparison operator, such as =, <, or >=. It also accepts more\n   *   complex options such as IN, LIKE, LIKE BINARY, or BETWEEN. Defaults to =.\n   *   If $field is a string you have to use 'formula' here.\n   *\n   * @see \\Drupal\\Core\\Database\\Query\\ConditionInterface::condition()\n   * @see \\Drupal\\Core\\Database\\Query\\Condition\n   *\/",823],["T_WHITESPACE","\n  ",856],["T_PUBLIC","public",857],["T_WHITESPACE"," ",857],["T_FUNCTION","function",857],["T_WHITESPACE"," ",857],["T_STRING","addWhere",857],"(",["T_VARIABLE","$group",857],",",["T_WHITESPACE"," ",857],["T_VARIABLE","$field",857],",",["T_WHITESPACE"," ",857],["T_VARIABLE","$value",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_STRING","NULL",857],",",["T_WHITESPACE"," ",857],["T_VARIABLE","$operator",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_STRING","NULL",857],")",["T_WHITESPACE"," ",857],"{",["T_WHITESPACE","\n    ",857],["T_COMMENT","\/\/ Ensure all variants of 0 are actually 0. Thus '', 0 and NULL are all\n",858],["T_WHITESPACE","    ",859],["T_COMMENT","\/\/ the default group.\n",859],["T_WHITESPACE","    ",860],["T_IF","if",860],["T_WHITESPACE"," ",860],"(",["T_EMPTY","empty",860],"(",["T_VARIABLE","$group",860],")",")",["T_WHITESPACE"," ",860],"{",["T_WHITESPACE","\n      ",860],["T_VARIABLE","$group",861],["T_WHITESPACE"," ",861],"=",["T_WHITESPACE"," ",861],["T_LNUMBER","0",861],";",["T_WHITESPACE","\n    ",861],"}",["T_WHITESPACE","\n\n    ",862],["T_COMMENT","\/\/ Check for a group.\n",864],["T_WHITESPACE","    ",865],["T_IF","if",865],["T_WHITESPACE"," ",865],"(","!",["T_ISSET","isset",865],"(",["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","where",865],"[",["T_VARIABLE","$group",865],"]",")",")",["T_WHITESPACE"," ",865],"{",["T_WHITESPACE","\n      ",865],["T_VARIABLE","$this",866],["T_OBJECT_OPERATOR","->",866],["T_STRING","setWhereGroup",866],"(",["T_CONSTANT_ENCAPSED_STRING","'AND'",866],",",["T_WHITESPACE"," ",866],["T_VARIABLE","$group",866],")",";",["T_WHITESPACE","\n    ",866],"}",["T_WHITESPACE","\n\n    ",867],["T_VARIABLE","$this",869],["T_OBJECT_OPERATOR","->",869],["T_STRING","where",869],"[",["T_VARIABLE","$group",869],"]","[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",869],"]","[","]",["T_WHITESPACE"," ",869],"=",["T_WHITESPACE"," ",869],["T_ARRAY","array",869],"(",["T_WHITESPACE","\n      ",869],["T_CONSTANT_ENCAPSED_STRING","'field'",870],["T_WHITESPACE"," ",870],["T_DOUBLE_ARROW","=>",870],["T_WHITESPACE"," ",870],["T_VARIABLE","$field",870],",",["T_WHITESPACE","\n      ",870],["T_CONSTANT_ENCAPSED_STRING","'value'",871],["T_WHITESPACE"," ",871],["T_DOUBLE_ARROW","=>",871],["T_WHITESPACE"," ",871],["T_VARIABLE","$value",871],",",["T_WHITESPACE","\n      ",871],["T_CONSTANT_ENCAPSED_STRING","'operator'",872],["T_WHITESPACE"," ",872],["T_DOUBLE_ARROW","=>",872],["T_WHITESPACE"," ",872],["T_VARIABLE","$operator",872],",",["T_WHITESPACE","\n    ",872],")",";",["T_WHITESPACE","\n  ",873],"}",["T_WHITESPACE","\n\n  ",874],["T_DOC_COMMENT","\/**\n   * Add a complex WHERE clause to the query.\n   *\n   * The caller is responsible for ensuring that all fields are fully qualified\n   * (TABLE.FIELD) and that the table already exists in the query.\n   * Internally the dbtng method \"where\" is used.\n   *\n   * @param $group\n   *   The WHERE group to add these to; groups are used to create AND\/OR\n   *   sections. Groups cannot be nested. Use 0 as the default group.\n   *   If the group does not yet exist it will be created as an AND group.\n   * @param $snippet\n   *   The snippet to check. This can be either a column or\n   *   a complex expression like \"UPPER(table.field) = 'value'\"\n   * @param $args\n   *   An associative array of arguments.\n   *\n   * @see QueryConditionInterface::where()\n   *\/",876],["T_WHITESPACE","\n  ",894],["T_PUBLIC","public",895],["T_WHITESPACE"," ",895],["T_FUNCTION","function",895],["T_WHITESPACE"," ",895],["T_STRING","addWhereExpression",895],"(",["T_VARIABLE","$group",895],",",["T_WHITESPACE"," ",895],["T_VARIABLE","$snippet",895],",",["T_WHITESPACE"," ",895],["T_VARIABLE","$args",895],["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],["T_ARRAY","array",895],"(",")",")",["T_WHITESPACE"," ",895],"{",["T_WHITESPACE","\n    ",895],["T_COMMENT","\/\/ Ensure all variants of 0 are actually 0. Thus '', 0 and NULL are all\n",896],["T_WHITESPACE","    ",897],["T_COMMENT","\/\/ the default group.\n",897],["T_WHITESPACE","    ",898],["T_IF","if",898],["T_WHITESPACE"," ",898],"(",["T_EMPTY","empty",898],"(",["T_VARIABLE","$group",898],")",")",["T_WHITESPACE"," ",898],"{",["T_WHITESPACE","\n      ",898],["T_VARIABLE","$group",899],["T_WHITESPACE"," ",899],"=",["T_WHITESPACE"," ",899],["T_LNUMBER","0",899],";",["T_WHITESPACE","\n    ",899],"}",["T_WHITESPACE","\n\n    ",900],["T_COMMENT","\/\/ Check for a group.\n",902],["T_WHITESPACE","    ",903],["T_IF","if",903],["T_WHITESPACE"," ",903],"(","!",["T_ISSET","isset",903],"(",["T_VARIABLE","$this",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","where",903],"[",["T_VARIABLE","$group",903],"]",")",")",["T_WHITESPACE"," ",903],"{",["T_WHITESPACE","\n      ",903],["T_VARIABLE","$this",904],["T_OBJECT_OPERATOR","->",904],["T_STRING","setWhereGroup",904],"(",["T_CONSTANT_ENCAPSED_STRING","'AND'",904],",",["T_WHITESPACE"," ",904],["T_VARIABLE","$group",904],")",";",["T_WHITESPACE","\n    ",904],"}",["T_WHITESPACE","\n\n    ",905],["T_VARIABLE","$this",907],["T_OBJECT_OPERATOR","->",907],["T_STRING","where",907],"[",["T_VARIABLE","$group",907],"]","[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",907],"]","[","]",["T_WHITESPACE"," ",907],"=",["T_WHITESPACE"," ",907],["T_ARRAY","array",907],"(",["T_WHITESPACE","\n      ",907],["T_CONSTANT_ENCAPSED_STRING","'field'",908],["T_WHITESPACE"," ",908],["T_DOUBLE_ARROW","=>",908],["T_WHITESPACE"," ",908],["T_VARIABLE","$snippet",908],",",["T_WHITESPACE","\n      ",908],["T_CONSTANT_ENCAPSED_STRING","'value'",909],["T_WHITESPACE"," ",909],["T_DOUBLE_ARROW","=>",909],["T_WHITESPACE"," ",909],["T_VARIABLE","$args",909],",",["T_WHITESPACE","\n      ",909],["T_CONSTANT_ENCAPSED_STRING","'operator'",910],["T_WHITESPACE"," ",910],["T_DOUBLE_ARROW","=>",910],["T_WHITESPACE"," ",910],["T_CONSTANT_ENCAPSED_STRING","'formula'",910],",",["T_WHITESPACE","\n    ",910],")",";",["T_WHITESPACE","\n  ",911],"}",["T_WHITESPACE","\n\n  ",912],["T_DOC_COMMENT","\/**\n   * Add a complex HAVING clause to the query.\n   * The caller is responsible for ensuring that all fields are fully qualified\n   * (TABLE.FIELD) and that the table and an appropriate GROUP BY already exist in the query.\n   * Internally the dbtng method \"having\" is used.\n   *\n   * @param $group\n   *   The HAVING group to add these to; groups are used to create AND\/OR\n   *   sections. Groups cannot be nested. Use 0 as the default group.\n   *   If the group does not yet exist it will be created as an AND group.\n   * @param $snippet\n   *   The snippet to check. This can be either a column or\n   *   a complex expression like \"COUNT(table.field) > 3\"\n   * @param $args\n   *   An associative array of arguments.\n   *\n   * @see QueryConditionInterface::having()\n   *\/",914],["T_WHITESPACE","\n  ",931],["T_PUBLIC","public",932],["T_WHITESPACE"," ",932],["T_FUNCTION","function",932],["T_WHITESPACE"," ",932],["T_STRING","addHavingExpression",932],"(",["T_VARIABLE","$group",932],",",["T_WHITESPACE"," ",932],["T_VARIABLE","$snippet",932],",",["T_WHITESPACE"," ",932],["T_VARIABLE","$args",932],["T_WHITESPACE"," ",932],"=",["T_WHITESPACE"," ",932],["T_ARRAY","array",932],"(",")",")",["T_WHITESPACE"," ",932],"{",["T_WHITESPACE","\n    ",932],["T_COMMENT","\/\/ Ensure all variants of 0 are actually 0. Thus '', 0 and NULL are all\n",933],["T_WHITESPACE","    ",934],["T_COMMENT","\/\/ the default group.\n",934],["T_WHITESPACE","    ",935],["T_IF","if",935],["T_WHITESPACE"," ",935],"(",["T_EMPTY","empty",935],"(",["T_VARIABLE","$group",935],")",")",["T_WHITESPACE"," ",935],"{",["T_WHITESPACE","\n      ",935],["T_VARIABLE","$group",936],["T_WHITESPACE"," ",936],"=",["T_WHITESPACE"," ",936],["T_LNUMBER","0",936],";",["T_WHITESPACE","\n    ",936],"}",["T_WHITESPACE","\n\n    ",937],["T_COMMENT","\/\/ Check for a group.\n",939],["T_WHITESPACE","    ",940],["T_IF","if",940],["T_WHITESPACE"," ",940],"(","!",["T_ISSET","isset",940],"(",["T_VARIABLE","$this",940],["T_OBJECT_OPERATOR","->",940],["T_STRING","having",940],"[",["T_VARIABLE","$group",940],"]",")",")",["T_WHITESPACE"," ",940],"{",["T_WHITESPACE","\n      ",940],["T_VARIABLE","$this",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","setWhereGroup",941],"(",["T_CONSTANT_ENCAPSED_STRING","'AND'",941],",",["T_WHITESPACE"," ",941],["T_VARIABLE","$group",941],",",["T_WHITESPACE"," ",941],["T_CONSTANT_ENCAPSED_STRING","'having'",941],")",";",["T_WHITESPACE","\n    ",941],"}",["T_WHITESPACE","\n\n    ",942],["T_COMMENT","\/\/ Add the clause and the args.\n",944],["T_WHITESPACE","    ",945],["T_VARIABLE","$this",945],["T_OBJECT_OPERATOR","->",945],["T_STRING","having",945],"[",["T_VARIABLE","$group",945],"]","[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",945],"]","[","]",["T_WHITESPACE"," ",945],"=",["T_WHITESPACE"," ",945],["T_ARRAY","array",945],"(",["T_WHITESPACE","\n      ",945],["T_CONSTANT_ENCAPSED_STRING","'field'",946],["T_WHITESPACE"," ",946],["T_DOUBLE_ARROW","=>",946],["T_WHITESPACE"," ",946],["T_VARIABLE","$snippet",946],",",["T_WHITESPACE","\n      ",946],["T_CONSTANT_ENCAPSED_STRING","'value'",947],["T_WHITESPACE"," ",947],["T_DOUBLE_ARROW","=>",947],["T_WHITESPACE"," ",947],["T_VARIABLE","$args",947],",",["T_WHITESPACE","\n      ",947],["T_CONSTANT_ENCAPSED_STRING","'operator'",948],["T_WHITESPACE"," ",948],["T_DOUBLE_ARROW","=>",948],["T_WHITESPACE"," ",948],["T_CONSTANT_ENCAPSED_STRING","'formula'",948],",",["T_WHITESPACE","\n    ",948],")",";",["T_WHITESPACE","\n  ",949],"}",["T_WHITESPACE","\n\n  ",950],["T_DOC_COMMENT","\/**\n   * Add an ORDER BY clause to the query.\n   *\n   * @param $table\n   *   The table this field is part of. If a formula, enter NULL.\n   *   If you want to orderby random use \"rand\" as table and nothing else.\n   * @param $field\n   *   The field or formula to sort on. If already a field, enter NULL\n   *   and put in the alias.\n   * @param $order\n   *   Either ASC or DESC.\n   * @param $alias\n   *   The alias to add the field as. In SQL, all fields in the order by\n   *   must also be in the SELECT portion. If an $alias isn't specified\n   *   one will be generated for from the $field; however, if the\n   *   $field is a formula, this alias will likely fail.\n   * @param $params\n   *   Any params that should be passed through to the addField.\n   *\/",952],["T_WHITESPACE","\n  ",970],["T_PUBLIC","public",971],["T_WHITESPACE"," ",971],["T_FUNCTION","function",971],["T_WHITESPACE"," ",971],["T_STRING","addOrderBy",971],"(",["T_VARIABLE","$table",971],",",["T_WHITESPACE"," ",971],["T_VARIABLE","$field",971],["T_WHITESPACE"," ",971],"=",["T_WHITESPACE"," ",971],["T_STRING","NULL",971],",",["T_WHITESPACE"," ",971],["T_VARIABLE","$order",971],["T_WHITESPACE"," ",971],"=",["T_WHITESPACE"," ",971],["T_CONSTANT_ENCAPSED_STRING","'ASC'",971],",",["T_WHITESPACE"," ",971],["T_VARIABLE","$alias",971],["T_WHITESPACE"," ",971],"=",["T_WHITESPACE"," ",971],["T_CONSTANT_ENCAPSED_STRING","''",971],",",["T_WHITESPACE"," ",971],["T_VARIABLE","$params",971],["T_WHITESPACE"," ",971],"=",["T_WHITESPACE"," ",971],["T_ARRAY","array",971],"(",")",")",["T_WHITESPACE"," ",971],"{",["T_WHITESPACE","\n    ",971],["T_COMMENT","\/\/ Only ensure the table if it's not the special random key.\n",972],["T_WHITESPACE","    ",973],["T_COMMENT","\/\/ @todo: Maybe it would make sense to just add an addOrderByRand or something similar.\n",973],["T_WHITESPACE","    ",974],["T_IF","if",974],["T_WHITESPACE"," ",974],"(",["T_VARIABLE","$table",974],["T_WHITESPACE"," ",974],["T_BOOLEAN_AND","&&",974],["T_WHITESPACE"," ",974],["T_VARIABLE","$table",974],["T_WHITESPACE"," ",974],["T_IS_NOT_EQUAL","!=",974],["T_WHITESPACE"," ",974],["T_CONSTANT_ENCAPSED_STRING","'rand'",974],")",["T_WHITESPACE"," ",974],"{",["T_WHITESPACE","\n      ",974],["T_VARIABLE","$this",975],["T_OBJECT_OPERATOR","->",975],["T_STRING","ensureTable",975],"(",["T_VARIABLE","$table",975],")",";",["T_WHITESPACE","\n    ",975],"}",["T_WHITESPACE","\n\n    ",976],["T_COMMENT","\/\/ Only fill out this aliasing if there is a table;\n",978],["T_WHITESPACE","    ",979],["T_COMMENT","\/\/ otherwise we assume it is a formula.\n",979],["T_WHITESPACE","    ",980],["T_IF","if",980],["T_WHITESPACE"," ",980],"(","!",["T_VARIABLE","$alias",980],["T_WHITESPACE"," ",980],["T_BOOLEAN_AND","&&",980],["T_WHITESPACE"," ",980],["T_VARIABLE","$table",980],")",["T_WHITESPACE"," ",980],"{",["T_WHITESPACE","\n      ",980],["T_VARIABLE","$as",981],["T_WHITESPACE"," ",981],"=",["T_WHITESPACE"," ",981],["T_VARIABLE","$table",981],["T_WHITESPACE"," ",981],".",["T_WHITESPACE"," ",981],["T_CONSTANT_ENCAPSED_STRING","'_'",981],["T_WHITESPACE"," ",981],".",["T_WHITESPACE"," ",981],["T_VARIABLE","$field",981],";",["T_WHITESPACE","\n    ",981],"}",["T_WHITESPACE","\n    ",982],["T_ELSE","else",983],["T_WHITESPACE"," ",983],"{",["T_WHITESPACE","\n      ",983],["T_VARIABLE","$as",984],["T_WHITESPACE"," ",984],"=",["T_WHITESPACE"," ",984],["T_VARIABLE","$alias",984],";",["T_WHITESPACE","\n    ",984],"}",["T_WHITESPACE","\n\n    ",985],["T_IF","if",987],["T_WHITESPACE"," ",987],"(",["T_VARIABLE","$field",987],")",["T_WHITESPACE"," ",987],"{",["T_WHITESPACE","\n      ",987],["T_VARIABLE","$as",988],["T_WHITESPACE"," ",988],"=",["T_WHITESPACE"," ",988],["T_VARIABLE","$this",988],["T_OBJECT_OPERATOR","->",988],["T_STRING","addField",988],"(",["T_VARIABLE","$table",988],",",["T_WHITESPACE"," ",988],["T_VARIABLE","$field",988],",",["T_WHITESPACE"," ",988],["T_VARIABLE","$as",988],",",["T_WHITESPACE"," ",988],["T_VARIABLE","$params",988],")",";",["T_WHITESPACE","\n    ",988],"}",["T_WHITESPACE","\n\n    ",989],["T_VARIABLE","$this",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","orderby",991],"[","]",["T_WHITESPACE"," ",991],"=",["T_WHITESPACE"," ",991],["T_ARRAY","array",991],"(",["T_WHITESPACE","\n      ",991],["T_CONSTANT_ENCAPSED_STRING","'field'",992],["T_WHITESPACE"," ",992],["T_DOUBLE_ARROW","=>",992],["T_WHITESPACE"," ",992],["T_VARIABLE","$as",992],",",["T_WHITESPACE","\n      ",992],["T_CONSTANT_ENCAPSED_STRING","'direction'",993],["T_WHITESPACE"," ",993],["T_DOUBLE_ARROW","=>",993],["T_WHITESPACE"," ",993],["T_STRING","strtoupper",993],"(",["T_VARIABLE","$order",993],")",["T_WHITESPACE","\n    ",993],")",";",["T_WHITESPACE","\n  ",994],"}",["T_WHITESPACE","\n\n  ",995],["T_DOC_COMMENT","\/**\n   * Add a simple GROUP BY clause to the query. The caller is responsible\n   * for ensuring that the fields are fully qualified and the table is properly\n   * added.\n   *\/",997],["T_WHITESPACE","\n  ",1001],["T_PUBLIC","public",1002],["T_WHITESPACE"," ",1002],["T_FUNCTION","function",1002],["T_WHITESPACE"," ",1002],["T_STRING","addGroupBy",1002],"(",["T_VARIABLE","$clause",1002],")",["T_WHITESPACE"," ",1002],"{",["T_WHITESPACE","\n    ",1002],["T_COMMENT","\/\/ Only add it if it's not already in there.\n",1003],["T_WHITESPACE","    ",1004],["T_IF","if",1004],["T_WHITESPACE"," ",1004],"(","!",["T_STRING","in_array",1004],"(",["T_VARIABLE","$clause",1004],",",["T_WHITESPACE"," ",1004],["T_VARIABLE","$this",1004],["T_OBJECT_OPERATOR","->",1004],["T_STRING","groupby",1004],")",")",["T_WHITESPACE"," ",1004],"{",["T_WHITESPACE","\n      ",1004],["T_VARIABLE","$this",1005],["T_OBJECT_OPERATOR","->",1005],["T_STRING","groupby",1005],"[","]",["T_WHITESPACE"," ",1005],"=",["T_WHITESPACE"," ",1005],["T_VARIABLE","$clause",1005],";",["T_WHITESPACE","\n    ",1005],"}",["T_WHITESPACE","\n  ",1006],"}",["T_WHITESPACE","\n\n  ",1007],["T_DOC_COMMENT","\/**\n   * Returns the alias for the given field added to $table.\n   *\n   * @access protected\n   *\n   * @see \\Drupal\\views\\Plugin\\views\\query\\Sql::addField\n   *\/",1009],["T_WHITESPACE","\n  ",1015],["T_PROTECTED","protected",1016],["T_WHITESPACE"," ",1016],["T_FUNCTION","function",1016],["T_WHITESPACE"," ",1016],["T_STRING","getFieldAlias",1016],"(",["T_VARIABLE","$table_alias",1016],",",["T_WHITESPACE"," ",1016],["T_VARIABLE","$field",1016],")",["T_WHITESPACE"," ",1016],"{",["T_WHITESPACE","\n    ",1016],["T_RETURN","return",1017],["T_WHITESPACE"," ",1017],["T_ISSET","isset",1017],"(",["T_VARIABLE","$this",1017],["T_OBJECT_OPERATOR","->",1017],["T_STRING","fieldAliases",1017],"[",["T_VARIABLE","$table_alias",1017],"]","[",["T_VARIABLE","$field",1017],"]",")",["T_WHITESPACE"," ",1017],"?",["T_WHITESPACE"," ",1017],["T_VARIABLE","$this",1017],["T_OBJECT_OPERATOR","->",1017],["T_STRING","fieldAliases",1017],"[",["T_VARIABLE","$table_alias",1017],"]","[",["T_VARIABLE","$field",1017],"]",["T_WHITESPACE"," ",1017],":",["T_WHITESPACE"," ",1017],["T_STRING","FALSE",1017],";",["T_WHITESPACE","\n  ",1017],"}",["T_WHITESPACE","\n\n  ",1018],["T_DOC_COMMENT","\/**\n   * Adds a query tag to the sql object.\n   *\n   * @see SelectQuery::addTag()\n   *\/",1020],["T_WHITESPACE","\n  ",1024],["T_PUBLIC","public",1025],["T_WHITESPACE"," ",1025],["T_FUNCTION","function",1025],["T_WHITESPACE"," ",1025],["T_STRING","addTag",1025],"(",["T_VARIABLE","$tag",1025],")",["T_WHITESPACE"," ",1025],"{",["T_WHITESPACE","\n    ",1025],["T_VARIABLE","$this",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","tags",1026],"[","]",["T_WHITESPACE"," ",1026],"=",["T_WHITESPACE"," ",1026],["T_VARIABLE","$tag",1026],";",["T_WHITESPACE","\n  ",1026],"}",["T_WHITESPACE","\n\n  ",1027],["T_DOC_COMMENT","\/**\n   * Generates a unique placeholder used in the db query.\n   *\/",1029],["T_WHITESPACE","\n  ",1031],["T_PUBLIC","public",1032],["T_WHITESPACE"," ",1032],["T_FUNCTION","function",1032],["T_WHITESPACE"," ",1032],["T_STRING","placeholder",1032],"(",["T_VARIABLE","$base",1032],["T_WHITESPACE"," ",1032],"=",["T_WHITESPACE"," ",1032],["T_CONSTANT_ENCAPSED_STRING","'views'",1032],")",["T_WHITESPACE"," ",1032],"{",["T_WHITESPACE","\n    ",1032],["T_STATIC","static",1033],["T_WHITESPACE"," ",1033],["T_VARIABLE","$placeholders",1033],["T_WHITESPACE"," ",1033],"=",["T_WHITESPACE"," ",1033],["T_ARRAY","array",1033],"(",")",";",["T_WHITESPACE","\n    ",1033],["T_IF","if",1034],["T_WHITESPACE"," ",1034],"(","!",["T_ISSET","isset",1034],"(",["T_VARIABLE","$placeholders",1034],"[",["T_VARIABLE","$base",1034],"]",")",")",["T_WHITESPACE"," ",1034],"{",["T_WHITESPACE","\n      ",1034],["T_VARIABLE","$placeholders",1035],"[",["T_VARIABLE","$base",1035],"]",["T_WHITESPACE"," ",1035],"=",["T_WHITESPACE"," ",1035],["T_LNUMBER","0",1035],";",["T_WHITESPACE","\n      ",1035],["T_RETURN","return",1036],["T_WHITESPACE"," ",1036],["T_CONSTANT_ENCAPSED_STRING","':'",1036],["T_WHITESPACE"," ",1036],".",["T_WHITESPACE"," ",1036],["T_VARIABLE","$base",1036],";",["T_WHITESPACE","\n    ",1036],"}",["T_WHITESPACE","\n    ",1037],["T_ELSE","else",1038],["T_WHITESPACE"," ",1038],"{",["T_WHITESPACE","\n      ",1038],["T_RETURN","return",1039],["T_WHITESPACE"," ",1039],["T_CONSTANT_ENCAPSED_STRING","':'",1039],["T_WHITESPACE"," ",1039],".",["T_WHITESPACE"," ",1039],["T_VARIABLE","$base",1039],["T_WHITESPACE"," ",1039],".",["T_WHITESPACE"," ",1039],["T_INC","++",1039],["T_VARIABLE","$placeholders",1039],"[",["T_VARIABLE","$base",1039],"]",";",["T_WHITESPACE","\n    ",1039],"}",["T_WHITESPACE","\n  ",1040],"}",["T_WHITESPACE","\n\n  ",1041],["T_DOC_COMMENT","\/**\n   * Construct the \"WHERE\" or \"HAVING\" part of the query.\n   *\n   * As views has to wrap the conditions from arguments with AND, a special\n   * group is wrapped around all conditions. This special group has the ID 0.\n   * There is other code in filters which makes sure that the group IDs are\n   * higher than zero.\n   *\n   * @param $where\n   *   'where' or 'having'.\n   *\/",1043],["T_WHITESPACE","\n  ",1053],["T_PROTECTED","protected",1054],["T_WHITESPACE"," ",1054],["T_FUNCTION","function",1054],["T_WHITESPACE"," ",1054],["T_STRING","buildCondition",1054],"(",["T_VARIABLE","$where",1054],["T_WHITESPACE"," ",1054],"=",["T_WHITESPACE"," ",1054],["T_CONSTANT_ENCAPSED_STRING","'where'",1054],")",["T_WHITESPACE"," ",1054],"{",["T_WHITESPACE","\n    ",1054],["T_VARIABLE","$has_condition",1055],["T_WHITESPACE"," ",1055],"=",["T_WHITESPACE"," ",1055],["T_STRING","FALSE",1055],";",["T_WHITESPACE","\n    ",1055],["T_VARIABLE","$has_arguments",1056],["T_WHITESPACE"," ",1056],"=",["T_WHITESPACE"," ",1056],["T_STRING","FALSE",1056],";",["T_WHITESPACE","\n    ",1056],["T_VARIABLE","$has_filter",1057],["T_WHITESPACE"," ",1057],"=",["T_WHITESPACE"," ",1057],["T_STRING","FALSE",1057],";",["T_WHITESPACE","\n\n    ",1057],["T_VARIABLE","$main_group",1059],["T_WHITESPACE"," ",1059],"=",["T_WHITESPACE"," ",1059],["T_STRING","db_and",1059],"(",")",";",["T_WHITESPACE","\n    ",1059],["T_VARIABLE","$filter_group",1060],["T_WHITESPACE"," ",1060],"=",["T_WHITESPACE"," ",1060],["T_VARIABLE","$this",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","groupOperator",1060],["T_WHITESPACE"," ",1060],["T_IS_EQUAL","==",1060],["T_WHITESPACE"," ",1060],["T_CONSTANT_ENCAPSED_STRING","'OR'",1060],["T_WHITESPACE"," ",1060],"?",["T_WHITESPACE"," ",1060],["T_STRING","db_or",1060],"(",")",["T_WHITESPACE"," ",1060],":",["T_WHITESPACE"," ",1060],["T_STRING","db_and",1060],"(",")",";",["T_WHITESPACE","\n\n    ",1060],["T_FOREACH","foreach",1062],["T_WHITESPACE"," ",1062],"(",["T_VARIABLE","$this",1062],["T_OBJECT_OPERATOR","->",1062],["T_VARIABLE","$where",1062],["T_WHITESPACE"," ",1062],["T_AS","as",1062],["T_WHITESPACE"," ",1062],["T_VARIABLE","$group",1062],["T_WHITESPACE"," ",1062],["T_DOUBLE_ARROW","=>",1062],["T_WHITESPACE"," ",1062],["T_VARIABLE","$info",1062],")",["T_WHITESPACE"," ",1062],"{",["T_WHITESPACE","\n\n      ",1062],["T_IF","if",1064],["T_WHITESPACE"," ",1064],"(","!",["T_EMPTY","empty",1064],"(",["T_VARIABLE","$info",1064],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",1064],"]",")",")",["T_WHITESPACE"," ",1064],"{",["T_WHITESPACE","\n        ",1064],["T_VARIABLE","$sub_group",1065],["T_WHITESPACE"," ",1065],"=",["T_WHITESPACE"," ",1065],["T_VARIABLE","$info",1065],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",1065],"]",["T_WHITESPACE"," ",1065],["T_IS_EQUAL","==",1065],["T_WHITESPACE"," ",1065],["T_CONSTANT_ENCAPSED_STRING","'OR'",1065],["T_WHITESPACE"," ",1065],"?",["T_WHITESPACE"," ",1065],["T_STRING","db_or",1065],"(",")",["T_WHITESPACE"," ",1065],":",["T_WHITESPACE"," ",1065],["T_STRING","db_and",1065],"(",")",";",["T_WHITESPACE","\n        ",1065],["T_FOREACH","foreach",1066],["T_WHITESPACE"," ",1066],"(",["T_VARIABLE","$info",1066],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",1066],"]",["T_WHITESPACE"," ",1066],["T_AS","as",1066],["T_WHITESPACE"," ",1066],["T_VARIABLE","$clause",1066],")",["T_WHITESPACE"," ",1066],"{",["T_WHITESPACE","\n          ",1066],["T_IF","if",1067],["T_WHITESPACE"," ",1067],"(",["T_VARIABLE","$clause",1067],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",1067],"]",["T_WHITESPACE"," ",1067],["T_IS_EQUAL","==",1067],["T_WHITESPACE"," ",1067],["T_CONSTANT_ENCAPSED_STRING","'formula'",1067],")",["T_WHITESPACE"," ",1067],"{",["T_WHITESPACE","\n            ",1067],["T_VARIABLE","$has_condition",1068],["T_WHITESPACE"," ",1068],"=",["T_WHITESPACE"," ",1068],["T_STRING","TRUE",1068],";",["T_WHITESPACE","\n            ",1068],["T_VARIABLE","$sub_group",1069],["T_OBJECT_OPERATOR","->",1069],["T_STRING","where",1069],"(",["T_VARIABLE","$clause",1069],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1069],"]",",",["T_WHITESPACE"," ",1069],["T_VARIABLE","$clause",1069],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",1069],"]",")",";",["T_WHITESPACE","\n          ",1069],"}",["T_WHITESPACE","\n          ",1070],["T_ELSE","else",1071],["T_WHITESPACE"," ",1071],"{",["T_WHITESPACE","\n            ",1071],["T_VARIABLE","$has_condition",1072],["T_WHITESPACE"," ",1072],"=",["T_WHITESPACE"," ",1072],["T_STRING","TRUE",1072],";",["T_WHITESPACE","\n            ",1072],["T_VARIABLE","$sub_group",1073],["T_OBJECT_OPERATOR","->",1073],["T_STRING","condition",1073],"(",["T_VARIABLE","$clause",1073],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1073],"]",",",["T_WHITESPACE"," ",1073],["T_VARIABLE","$clause",1073],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",1073],"]",",",["T_WHITESPACE"," ",1073],["T_VARIABLE","$clause",1073],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",1073],"]",")",";",["T_WHITESPACE","\n          ",1073],"}",["T_WHITESPACE","\n        ",1074],"}",["T_WHITESPACE","\n\n        ",1075],["T_COMMENT","\/\/ Add the item to the filter group.\n",1077],["T_WHITESPACE","        ",1078],["T_IF","if",1078],["T_WHITESPACE"," ",1078],"(",["T_VARIABLE","$group",1078],["T_WHITESPACE"," ",1078],["T_IS_NOT_EQUAL","!=",1078],["T_WHITESPACE"," ",1078],["T_LNUMBER","0",1078],")",["T_WHITESPACE"," ",1078],"{",["T_WHITESPACE","\n          ",1078],["T_VARIABLE","$has_filter",1079],["T_WHITESPACE"," ",1079],"=",["T_WHITESPACE"," ",1079],["T_STRING","TRUE",1079],";",["T_WHITESPACE","\n          ",1079],["T_VARIABLE","$filter_group",1080],["T_OBJECT_OPERATOR","->",1080],["T_STRING","condition",1080],"(",["T_VARIABLE","$sub_group",1080],")",";",["T_WHITESPACE","\n        ",1080],"}",["T_WHITESPACE","\n        ",1081],["T_ELSE","else",1082],["T_WHITESPACE"," ",1082],"{",["T_WHITESPACE","\n          ",1082],["T_VARIABLE","$has_arguments",1083],["T_WHITESPACE"," ",1083],"=",["T_WHITESPACE"," ",1083],["T_STRING","TRUE",1083],";",["T_WHITESPACE","\n          ",1083],["T_VARIABLE","$main_group",1084],["T_OBJECT_OPERATOR","->",1084],["T_STRING","condition",1084],"(",["T_VARIABLE","$sub_group",1084],")",";",["T_WHITESPACE","\n        ",1084],"}",["T_WHITESPACE","\n      ",1085],"}",["T_WHITESPACE","\n    ",1086],"}",["T_WHITESPACE","\n\n    ",1087],["T_IF","if",1089],["T_WHITESPACE"," ",1089],"(",["T_VARIABLE","$has_filter",1089],")",["T_WHITESPACE"," ",1089],"{",["T_WHITESPACE","\n      ",1089],["T_VARIABLE","$main_group",1090],["T_OBJECT_OPERATOR","->",1090],["T_STRING","condition",1090],"(",["T_VARIABLE","$filter_group",1090],")",";",["T_WHITESPACE","\n    ",1090],"}",["T_WHITESPACE","\n\n    ",1091],["T_IF","if",1093],["T_WHITESPACE"," ",1093],"(","!",["T_VARIABLE","$has_arguments",1093],["T_WHITESPACE"," ",1093],["T_BOOLEAN_AND","&&",1093],["T_WHITESPACE"," ",1093],["T_VARIABLE","$has_condition",1093],")",["T_WHITESPACE"," ",1093],"{",["T_WHITESPACE","\n      ",1093],["T_RETURN","return",1094],["T_WHITESPACE"," ",1094],["T_VARIABLE","$filter_group",1094],";",["T_WHITESPACE","\n    ",1094],"}",["T_WHITESPACE","\n    ",1095],["T_IF","if",1096],["T_WHITESPACE"," ",1096],"(",["T_VARIABLE","$has_arguments",1096],["T_WHITESPACE"," ",1096],["T_BOOLEAN_AND","&&",1096],["T_WHITESPACE"," ",1096],["T_VARIABLE","$has_condition",1096],")",["T_WHITESPACE"," ",1096],"{",["T_WHITESPACE","\n      ",1096],["T_RETURN","return",1097],["T_WHITESPACE"," ",1097],["T_VARIABLE","$main_group",1097],";",["T_WHITESPACE","\n    ",1097],"}",["T_WHITESPACE","\n  ",1098],"}",["T_WHITESPACE","\n\n  ",1099],["T_DOC_COMMENT","\/**\n   * Returns a list of non-aggregates to be added to the \"group by\" clause.\n   *\n   * Non-aggregates are fields that have no aggregation function (count, sum,\n   * etc) applied. Since the SQL standard requires all fields to either have\n   * an aggregation function applied, or to be in the GROUP BY clause, Views\n   * gathers those fields and adds them to the GROUP BY clause.\n   *\n   * @return array\n   *   An array of the fieldnames which are non-aggregates.\n   *\/",1101],["T_WHITESPACE","\n  ",1111],["T_PROTECTED","protected",1112],["T_WHITESPACE"," ",1112],["T_FUNCTION","function",1112],["T_WHITESPACE"," ",1112],["T_STRING","getNonAggregates",1112],"(",")",["T_WHITESPACE"," ",1112],"{",["T_WHITESPACE","\n    ",1112],["T_VARIABLE","$non_aggregates",1113],["T_WHITESPACE"," ",1113],"=",["T_WHITESPACE"," ",1113],["T_ARRAY","array",1113],"(",")",";",["T_WHITESPACE","\n    ",1113],["T_FOREACH","foreach",1114],["T_WHITESPACE"," ",1114],"(",["T_VARIABLE","$this",1114],["T_OBJECT_OPERATOR","->",1114],["T_STRING","fields",1114],["T_WHITESPACE"," ",1114],["T_AS","as",1114],["T_WHITESPACE"," ",1114],["T_VARIABLE","$field",1114],")",["T_WHITESPACE"," ",1114],"{",["T_WHITESPACE","\n      ",1114],["T_VARIABLE","$string",1115],["T_WHITESPACE"," ",1115],"=",["T_WHITESPACE"," ",1115],["T_CONSTANT_ENCAPSED_STRING","''",1115],";",["T_WHITESPACE","\n      ",1115],["T_IF","if",1116],["T_WHITESPACE"," ",1116],"(","!",["T_EMPTY","empty",1116],"(",["T_VARIABLE","$field",1116],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1116],"]",")",")",["T_WHITESPACE"," ",1116],"{",["T_WHITESPACE","\n        ",1116],["T_VARIABLE","$string",1117],["T_WHITESPACE"," ",1117],["T_CONCAT_EQUAL",".=",1117],["T_WHITESPACE"," ",1117],["T_VARIABLE","$field",1117],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1117],"]",["T_WHITESPACE"," ",1117],".",["T_WHITESPACE"," ",1117],["T_CONSTANT_ENCAPSED_STRING","'.'",1117],";",["T_WHITESPACE","\n      ",1117],"}",["T_WHITESPACE","\n      ",1118],["T_VARIABLE","$string",1119],["T_WHITESPACE"," ",1119],["T_CONCAT_EQUAL",".=",1119],["T_WHITESPACE"," ",1119],["T_VARIABLE","$field",1119],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1119],"]",";",["T_WHITESPACE","\n      ",1119],["T_VARIABLE","$fieldname",1120],["T_WHITESPACE"," ",1120],"=",["T_WHITESPACE"," ",1120],"(","!",["T_EMPTY","empty",1120],"(",["T_VARIABLE","$field",1120],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",1120],"]",")",["T_WHITESPACE"," ",1120],"?",["T_WHITESPACE"," ",1120],["T_VARIABLE","$field",1120],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",1120],"]",["T_WHITESPACE"," ",1120],":",["T_WHITESPACE"," ",1120],["T_VARIABLE","$string",1120],")",";",["T_WHITESPACE","\n\n      ",1120],["T_IF","if",1122],["T_WHITESPACE"," ",1122],"(","!",["T_EMPTY","empty",1122],"(",["T_VARIABLE","$field",1122],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",1122],"]",")",")",["T_WHITESPACE"," ",1122],"{",["T_WHITESPACE","\n        ",1122],["T_COMMENT","\/\/ Retained for compatibility.\n",1123],["T_WHITESPACE","        ",1124],["T_VARIABLE","$field",1124],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1124],"]",["T_WHITESPACE"," ",1124],"=",["T_WHITESPACE"," ",1124],["T_CONSTANT_ENCAPSED_STRING","'count'",1124],";",["T_WHITESPACE","\n      ",1124],"}",["T_WHITESPACE","\n\n      ",1125],["T_IF","if",1127],["T_WHITESPACE"," ",1127],"(","!",["T_EMPTY","empty",1127],"(",["T_VARIABLE","$field",1127],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1127],"]",")",")",["T_WHITESPACE"," ",1127],"{",["T_WHITESPACE","\n        ",1127],["T_VARIABLE","$this",1128],["T_OBJECT_OPERATOR","->",1128],["T_STRING","hasAggregate",1128],["T_WHITESPACE"," ",1128],"=",["T_WHITESPACE"," ",1128],["T_STRING","TRUE",1128],";",["T_WHITESPACE","\n      ",1128],"}",["T_WHITESPACE","\n      ",1129],["T_COMMENT","\/\/ This is a formula, using no tables.\n",1130],["T_WHITESPACE","      ",1131],["T_ELSEIF","elseif",1131],["T_WHITESPACE"," ",1131],"(",["T_EMPTY","empty",1131],"(",["T_VARIABLE","$field",1131],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1131],"]",")",")",["T_WHITESPACE"," ",1131],"{",["T_WHITESPACE","\n        ",1131],["T_VARIABLE","$non_aggregates",1132],"[","]",["T_WHITESPACE"," ",1132],"=",["T_WHITESPACE"," ",1132],["T_VARIABLE","$fieldname",1132],";",["T_WHITESPACE","\n      ",1132],"}",["T_WHITESPACE","\n      ",1133],["T_ELSEIF","elseif",1134],["T_WHITESPACE"," ",1134],"(",["T_EMPTY","empty",1134],"(",["T_VARIABLE","$field",1134],"[",["T_CONSTANT_ENCAPSED_STRING","'aggregate'",1134],"]",")",")",["T_WHITESPACE"," ",1134],"{",["T_WHITESPACE","\n        ",1134],["T_VARIABLE","$non_aggregates",1135],"[","]",["T_WHITESPACE"," ",1135],"=",["T_WHITESPACE"," ",1135],["T_VARIABLE","$fieldname",1135],";",["T_WHITESPACE","\n      ",1135],"}",["T_WHITESPACE","\n\n      ",1136],["T_IF","if",1138],["T_WHITESPACE"," ",1138],"(",["T_VARIABLE","$this",1138],["T_OBJECT_OPERATOR","->",1138],["T_STRING","getCountOptimized",1138],")",["T_WHITESPACE"," ",1138],"{",["T_WHITESPACE","\n        ",1138],["T_COMMENT","\/\/ We only want the first field in this case.\n",1139],["T_WHITESPACE","        ",1140],["T_BREAK","break",1140],";",["T_WHITESPACE","\n      ",1140],"}",["T_WHITESPACE","\n    ",1141],"}",["T_WHITESPACE","\n\n    ",1142],["T_RETURN","return",1144],["T_WHITESPACE"," ",1144],["T_VARIABLE","$non_aggregates",1144],";",["T_WHITESPACE","\n  ",1144],"}",["T_WHITESPACE","\n\n  ",1145],["T_DOC_COMMENT","\/**\n   * Adds fields to the query.\n   *\n   * @param \\Drupal\\Core\\Database\\Query\\SelectInterface $query\n   *   The drupal query object.\n   *\/",1147],["T_WHITESPACE","\n  ",1152],["T_PROTECTED","protected",1153],["T_WHITESPACE"," ",1153],["T_FUNCTION","function",1153],["T_WHITESPACE"," ",1153],["T_STRING","compileFields",1153],"(",["T_VARIABLE","$query",1153],")",["T_WHITESPACE"," ",1153],"{",["T_WHITESPACE","\n    ",1153],["T_FOREACH","foreach",1154],["T_WHITESPACE"," ",1154],"(",["T_VARIABLE","$this",1154],["T_OBJECT_OPERATOR","->",1154],["T_STRING","fields",1154],["T_WHITESPACE"," ",1154],["T_AS","as",1154],["T_WHITESPACE"," ",1154],["T_VARIABLE","$field",1154],")",["T_WHITESPACE"," ",1154],"{",["T_WHITESPACE","\n      ",1154],["T_VARIABLE","$string",1155],["T_WHITESPACE"," ",1155],"=",["T_WHITESPACE"," ",1155],["T_CONSTANT_ENCAPSED_STRING","''",1155],";",["T_WHITESPACE","\n      ",1155],["T_IF","if",1156],["T_WHITESPACE"," ",1156],"(","!",["T_EMPTY","empty",1156],"(",["T_VARIABLE","$field",1156],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1156],"]",")",")",["T_WHITESPACE"," ",1156],"{",["T_WHITESPACE","\n        ",1156],["T_VARIABLE","$string",1157],["T_WHITESPACE"," ",1157],["T_CONCAT_EQUAL",".=",1157],["T_WHITESPACE"," ",1157],["T_VARIABLE","$field",1157],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1157],"]",["T_WHITESPACE"," ",1157],".",["T_WHITESPACE"," ",1157],["T_CONSTANT_ENCAPSED_STRING","'.'",1157],";",["T_WHITESPACE","\n      ",1157],"}",["T_WHITESPACE","\n      ",1158],["T_VARIABLE","$string",1159],["T_WHITESPACE"," ",1159],["T_CONCAT_EQUAL",".=",1159],["T_WHITESPACE"," ",1159],["T_VARIABLE","$field",1159],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1159],"]",";",["T_WHITESPACE","\n      ",1159],["T_VARIABLE","$fieldname",1160],["T_WHITESPACE"," ",1160],"=",["T_WHITESPACE"," ",1160],"(","!",["T_EMPTY","empty",1160],"(",["T_VARIABLE","$field",1160],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",1160],"]",")",["T_WHITESPACE"," ",1160],"?",["T_WHITESPACE"," ",1160],["T_VARIABLE","$field",1160],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",1160],"]",["T_WHITESPACE"," ",1160],":",["T_WHITESPACE"," ",1160],["T_VARIABLE","$string",1160],")",";",["T_WHITESPACE","\n\n      ",1160],["T_IF","if",1162],["T_WHITESPACE"," ",1162],"(","!",["T_EMPTY","empty",1162],"(",["T_VARIABLE","$field",1162],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",1162],"]",")",")",["T_WHITESPACE"," ",1162],"{",["T_WHITESPACE","\n        ",1162],["T_COMMENT","\/\/ Retained for compatibility.\n",1163],["T_WHITESPACE","        ",1164],["T_VARIABLE","$field",1164],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1164],"]",["T_WHITESPACE"," ",1164],"=",["T_WHITESPACE"," ",1164],["T_CONSTANT_ENCAPSED_STRING","'count'",1164],";",["T_WHITESPACE","\n      ",1164],"}",["T_WHITESPACE","\n\n      ",1165],["T_IF","if",1167],["T_WHITESPACE"," ",1167],"(","!",["T_EMPTY","empty",1167],"(",["T_VARIABLE","$field",1167],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1167],"]",")",")",["T_WHITESPACE"," ",1167],"{",["T_WHITESPACE","\n        ",1167],["T_VARIABLE","$info",1168],["T_WHITESPACE"," ",1168],"=",["T_WHITESPACE"," ",1168],["T_VARIABLE","$this",1168],["T_OBJECT_OPERATOR","->",1168],["T_STRING","getAggregationInfo",1168],"(",")",";",["T_WHITESPACE","\n        ",1168],["T_IF","if",1169],["T_WHITESPACE"," ",1169],"(","!",["T_EMPTY","empty",1169],"(",["T_VARIABLE","$info",1169],"[",["T_VARIABLE","$field",1169],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1169],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'method'",1169],"]",")",["T_WHITESPACE"," ",1169],["T_BOOLEAN_AND","&&",1169],["T_WHITESPACE"," ",1169],["T_STRING","is_callable",1169],"(",["T_ARRAY","array",1169],"(",["T_VARIABLE","$this",1169],",",["T_WHITESPACE"," ",1169],["T_VARIABLE","$info",1169],"[",["T_VARIABLE","$field",1169],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1169],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'method'",1169],"]",")",")",")",["T_WHITESPACE"," ",1169],"{",["T_WHITESPACE","\n          ",1169],["T_VARIABLE","$string",1170],["T_WHITESPACE"," ",1170],"=",["T_WHITESPACE"," ",1170],["T_VARIABLE","$this",1170],["T_DOUBLE_COLON","::",1170],"{",["T_VARIABLE","$info",1170],"[",["T_VARIABLE","$field",1170],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1170],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'method'",1170],"]","}","(",["T_VARIABLE","$field",1170],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1170],"]",",",["T_WHITESPACE"," ",1170],["T_VARIABLE","$string",1170],")",";",["T_WHITESPACE","\n          ",1170],["T_VARIABLE","$placeholders",1171],["T_WHITESPACE"," ",1171],"=",["T_WHITESPACE"," ",1171],"!",["T_EMPTY","empty",1171],"(",["T_VARIABLE","$field",1171],"[",["T_CONSTANT_ENCAPSED_STRING","'placeholders'",1171],"]",")",["T_WHITESPACE"," ",1171],"?",["T_WHITESPACE"," ",1171],["T_VARIABLE","$field",1171],"[",["T_CONSTANT_ENCAPSED_STRING","'placeholders'",1171],"]",["T_WHITESPACE"," ",1171],":",["T_WHITESPACE"," ",1171],["T_ARRAY","array",1171],"(",")",";",["T_WHITESPACE","\n          ",1171],["T_VARIABLE","$query",1172],["T_OBJECT_OPERATOR","->",1172],["T_STRING","addExpression",1172],"(",["T_VARIABLE","$string",1172],",",["T_WHITESPACE"," ",1172],["T_VARIABLE","$fieldname",1172],",",["T_WHITESPACE"," ",1172],["T_VARIABLE","$placeholders",1172],")",";",["T_WHITESPACE","\n        ",1172],"}",["T_WHITESPACE","\n\n        ",1173],["T_VARIABLE","$this",1175],["T_OBJECT_OPERATOR","->",1175],["T_STRING","hasAggregate",1175],["T_WHITESPACE"," ",1175],"=",["T_WHITESPACE"," ",1175],["T_STRING","TRUE",1175],";",["T_WHITESPACE","\n      ",1175],"}",["T_WHITESPACE","\n      ",1176],["T_COMMENT","\/\/ This is a formula, using no tables.\n",1177],["T_WHITESPACE","      ",1178],["T_ELSEIF","elseif",1178],["T_WHITESPACE"," ",1178],"(",["T_EMPTY","empty",1178],"(",["T_VARIABLE","$field",1178],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1178],"]",")",")",["T_WHITESPACE"," ",1178],"{",["T_WHITESPACE","\n        ",1178],["T_VARIABLE","$placeholders",1179],["T_WHITESPACE"," ",1179],"=",["T_WHITESPACE"," ",1179],"!",["T_EMPTY","empty",1179],"(",["T_VARIABLE","$field",1179],"[",["T_CONSTANT_ENCAPSED_STRING","'placeholders'",1179],"]",")",["T_WHITESPACE"," ",1179],"?",["T_WHITESPACE"," ",1179],["T_VARIABLE","$field",1179],"[",["T_CONSTANT_ENCAPSED_STRING","'placeholders'",1179],"]",["T_WHITESPACE"," ",1179],":",["T_WHITESPACE"," ",1179],["T_ARRAY","array",1179],"(",")",";",["T_WHITESPACE","\n        ",1179],["T_VARIABLE","$query",1180],["T_OBJECT_OPERATOR","->",1180],["T_STRING","addExpression",1180],"(",["T_VARIABLE","$string",1180],",",["T_WHITESPACE"," ",1180],["T_VARIABLE","$fieldname",1180],",",["T_WHITESPACE"," ",1180],["T_VARIABLE","$placeholders",1180],")",";",["T_WHITESPACE","\n      ",1180],"}",["T_WHITESPACE","\n      ",1181],["T_ELSEIF","elseif",1182],["T_WHITESPACE"," ",1182],"(",["T_VARIABLE","$this",1182],["T_OBJECT_OPERATOR","->",1182],["T_STRING","distinct",1182],["T_WHITESPACE"," ",1182],["T_BOOLEAN_AND","&&",1182],["T_WHITESPACE"," ",1182],"!",["T_STRING","in_array",1182],"(",["T_VARIABLE","$fieldname",1182],",",["T_WHITESPACE"," ",1182],["T_VARIABLE","$this",1182],["T_OBJECT_OPERATOR","->",1182],["T_STRING","groupby",1182],")",")",["T_WHITESPACE"," ",1182],"{",["T_WHITESPACE","\n        ",1182],["T_VARIABLE","$query",1183],["T_OBJECT_OPERATOR","->",1183],["T_STRING","addField",1183],"(","!",["T_EMPTY","empty",1183],"(",["T_VARIABLE","$field",1183],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1183],"]",")",["T_WHITESPACE"," ",1183],"?",["T_WHITESPACE"," ",1183],["T_VARIABLE","$field",1183],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1183],"]",["T_WHITESPACE"," ",1183],":",["T_WHITESPACE"," ",1183],["T_VARIABLE","$this",1183],["T_OBJECT_OPERATOR","->",1183],["T_STRING","view",1183],["T_OBJECT_OPERATOR","->",1183],["T_STRING","storage",1183],["T_OBJECT_OPERATOR","->",1183],["T_STRING","get",1183],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",1183],")",",",["T_WHITESPACE"," ",1183],["T_VARIABLE","$field",1183],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1183],"]",",",["T_WHITESPACE"," ",1183],["T_VARIABLE","$fieldname",1183],")",";",["T_WHITESPACE","\n      ",1183],"}",["T_WHITESPACE","\n      ",1184],["T_ELSEIF","elseif",1185],["T_WHITESPACE"," ",1185],"(",["T_EMPTY","empty",1185],"(",["T_VARIABLE","$field",1185],"[",["T_CONSTANT_ENCAPSED_STRING","'aggregate'",1185],"]",")",")",["T_WHITESPACE"," ",1185],"{",["T_WHITESPACE","\n        ",1185],["T_VARIABLE","$query",1186],["T_OBJECT_OPERATOR","->",1186],["T_STRING","addField",1186],"(","!",["T_EMPTY","empty",1186],"(",["T_VARIABLE","$field",1186],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1186],"]",")",["T_WHITESPACE"," ",1186],"?",["T_WHITESPACE"," ",1186],["T_VARIABLE","$field",1186],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1186],"]",["T_WHITESPACE"," ",1186],":",["T_WHITESPACE"," ",1186],["T_VARIABLE","$this",1186],["T_OBJECT_OPERATOR","->",1186],["T_STRING","view",1186],["T_OBJECT_OPERATOR","->",1186],["T_STRING","storage",1186],["T_OBJECT_OPERATOR","->",1186],["T_STRING","get",1186],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",1186],")",",",["T_WHITESPACE"," ",1186],["T_VARIABLE","$field",1186],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1186],"]",",",["T_WHITESPACE"," ",1186],["T_VARIABLE","$fieldname",1186],")",";",["T_WHITESPACE","\n      ",1186],"}",["T_WHITESPACE","\n\n      ",1187],["T_IF","if",1189],["T_WHITESPACE"," ",1189],"(",["T_VARIABLE","$this",1189],["T_OBJECT_OPERATOR","->",1189],["T_STRING","getCountOptimized",1189],")",["T_WHITESPACE"," ",1189],"{",["T_WHITESPACE","\n        ",1189],["T_COMMENT","\/\/ We only want the first field in this case.\n",1190],["T_WHITESPACE","        ",1191],["T_BREAK","break",1191],";",["T_WHITESPACE","\n      ",1191],"}",["T_WHITESPACE","\n    ",1192],"}",["T_WHITESPACE","\n  ",1193],"}",["T_WHITESPACE","\n\n  ",1194],["T_DOC_COMMENT","\/**\n   * Generate a query and a countquery from all of the information supplied\n   * to the object.\n   *\n   * @param $get_count\n   *   Provide a countquery if this is true, otherwise provide a normal query.\n   *\/",1196],["T_WHITESPACE","\n  ",1202],["T_PUBLIC","public",1203],["T_WHITESPACE"," ",1203],["T_FUNCTION","function",1203],["T_WHITESPACE"," ",1203],["T_STRING","query",1203],"(",["T_VARIABLE","$get_count",1203],["T_WHITESPACE"," ",1203],"=",["T_WHITESPACE"," ",1203],["T_STRING","FALSE",1203],")",["T_WHITESPACE"," ",1203],"{",["T_WHITESPACE","\n    ",1203],["T_COMMENT","\/\/ Check query distinct value.\n",1204],["T_WHITESPACE","    ",1205],["T_IF","if",1205],["T_WHITESPACE"," ",1205],"(",["T_EMPTY","empty",1205],"(",["T_VARIABLE","$this",1205],["T_OBJECT_OPERATOR","->",1205],["T_STRING","noDistinct",1205],")",["T_WHITESPACE"," ",1205],["T_BOOLEAN_AND","&&",1205],["T_WHITESPACE"," ",1205],["T_VARIABLE","$this",1205],["T_OBJECT_OPERATOR","->",1205],["T_STRING","distinct",1205],["T_WHITESPACE"," ",1205],["T_BOOLEAN_AND","&&",1205],["T_WHITESPACE"," ",1205],"!",["T_EMPTY","empty",1205],"(",["T_VARIABLE","$this",1205],["T_OBJECT_OPERATOR","->",1205],["T_STRING","fields",1205],")",")",["T_WHITESPACE"," ",1205],"{",["T_WHITESPACE","\n      ",1205],["T_VARIABLE","$base_field_alias",1206],["T_WHITESPACE"," ",1206],"=",["T_WHITESPACE"," ",1206],["T_VARIABLE","$this",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","addField",1206],"(",["T_VARIABLE","$this",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","view",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","storage",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","get",1206],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",1206],")",",",["T_WHITESPACE"," ",1206],["T_VARIABLE","$this",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","view",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","storage",1206],["T_OBJECT_OPERATOR","->",1206],["T_STRING","get",1206],"(",["T_CONSTANT_ENCAPSED_STRING","'base_field'",1206],")",")",";",["T_WHITESPACE","\n      ",1206],["T_VARIABLE","$this",1207],["T_OBJECT_OPERATOR","->",1207],["T_STRING","addGroupBy",1207],"(",["T_VARIABLE","$base_field_alias",1207],")",";",["T_WHITESPACE","\n      ",1207],["T_VARIABLE","$distinct",1208],["T_WHITESPACE"," ",1208],"=",["T_WHITESPACE"," ",1208],["T_STRING","TRUE",1208],";",["T_WHITESPACE","\n    ",1208],"}",["T_WHITESPACE","\n\n    ",1209],["T_DOC_COMMENT","\/**\n     * An optimized count query includes just the base field instead of all the fields.\n     * Determine of this query qualifies by checking for a groupby or distinct.\n     *\/",1211],["T_WHITESPACE","\n    ",1214],["T_IF","if",1215],["T_WHITESPACE"," ",1215],"(",["T_VARIABLE","$get_count",1215],["T_WHITESPACE"," ",1215],["T_BOOLEAN_AND","&&",1215],["T_WHITESPACE"," ",1215],"!",["T_VARIABLE","$this",1215],["T_OBJECT_OPERATOR","->",1215],["T_STRING","groupby",1215],")",["T_WHITESPACE"," ",1215],"{",["T_WHITESPACE","\n      ",1215],["T_FOREACH","foreach",1216],["T_WHITESPACE"," ",1216],"(",["T_VARIABLE","$this",1216],["T_OBJECT_OPERATOR","->",1216],["T_STRING","fields",1216],["T_WHITESPACE"," ",1216],["T_AS","as",1216],["T_WHITESPACE"," ",1216],["T_VARIABLE","$field",1216],")",["T_WHITESPACE"," ",1216],"{",["T_WHITESPACE","\n        ",1216],["T_IF","if",1217],["T_WHITESPACE"," ",1217],"(","!",["T_EMPTY","empty",1217],"(",["T_VARIABLE","$field",1217],"[",["T_CONSTANT_ENCAPSED_STRING","'distinct'",1217],"]",")",["T_WHITESPACE"," ",1217],["T_BOOLEAN_OR","||",1217],["T_WHITESPACE"," ",1217],"!",["T_EMPTY","empty",1217],"(",["T_VARIABLE","$field",1217],"[",["T_CONSTANT_ENCAPSED_STRING","'function'",1217],"]",")",")",["T_WHITESPACE"," ",1217],"{",["T_WHITESPACE","\n          ",1217],["T_VARIABLE","$this",1218],["T_OBJECT_OPERATOR","->",1218],["T_STRING","getCountOptimized",1218],["T_WHITESPACE"," ",1218],"=",["T_WHITESPACE"," ",1218],["T_STRING","FALSE",1218],";",["T_WHITESPACE","\n          ",1218],["T_BREAK","break",1219],";",["T_WHITESPACE","\n        ",1219],"}",["T_WHITESPACE","\n      ",1220],"}",["T_WHITESPACE","\n    ",1221],"}",["T_WHITESPACE","\n    ",1222],["T_ELSE","else",1223],["T_WHITESPACE"," ",1223],"{",["T_WHITESPACE","\n      ",1223],["T_VARIABLE","$this",1224],["T_OBJECT_OPERATOR","->",1224],["T_STRING","getCountOptimized",1224],["T_WHITESPACE"," ",1224],"=",["T_WHITESPACE"," ",1224],["T_STRING","FALSE",1224],";",["T_WHITESPACE","\n    ",1224],"}",["T_WHITESPACE","\n    ",1225],["T_IF","if",1226],["T_WHITESPACE"," ",1226],"(","!",["T_ISSET","isset",1226],"(",["T_VARIABLE","$this",1226],["T_OBJECT_OPERATOR","->",1226],["T_STRING","getCountOptimized",1226],")",")",["T_WHITESPACE"," ",1226],"{",["T_WHITESPACE","\n      ",1226],["T_VARIABLE","$this",1227],["T_OBJECT_OPERATOR","->",1227],["T_STRING","getCountOptimized",1227],["T_WHITESPACE"," ",1227],"=",["T_WHITESPACE"," ",1227],["T_STRING","TRUE",1227],";",["T_WHITESPACE","\n    ",1227],"}",["T_WHITESPACE","\n\n    ",1228],["T_VARIABLE","$options",1230],["T_WHITESPACE"," ",1230],"=",["T_WHITESPACE"," ",1230],["T_ARRAY","array",1230],"(",")",";",["T_WHITESPACE","\n    ",1230],["T_VARIABLE","$target",1231],["T_WHITESPACE"," ",1231],"=",["T_WHITESPACE"," ",1231],["T_CONSTANT_ENCAPSED_STRING","'default'",1231],";",["T_WHITESPACE","\n    ",1231],["T_VARIABLE","$key",1232],["T_WHITESPACE"," ",1232],"=",["T_WHITESPACE"," ",1232],["T_CONSTANT_ENCAPSED_STRING","'default'",1232],";",["T_WHITESPACE","\n    ",1232],["T_COMMENT","\/\/ Detect an external database and set the\n",1233],["T_WHITESPACE","    ",1234],["T_IF","if",1234],["T_WHITESPACE"," ",1234],"(",["T_ISSET","isset",1234],"(",["T_VARIABLE","$this",1234],["T_OBJECT_OPERATOR","->",1234],["T_STRING","view",1234],["T_OBJECT_OPERATOR","->",1234],["T_STRING","base_database",1234],")",")",["T_WHITESPACE"," ",1234],"{",["T_WHITESPACE","\n      ",1234],["T_VARIABLE","$key",1235],["T_WHITESPACE"," ",1235],"=",["T_WHITESPACE"," ",1235],["T_VARIABLE","$this",1235],["T_OBJECT_OPERATOR","->",1235],["T_STRING","view",1235],["T_OBJECT_OPERATOR","->",1235],["T_STRING","base_database",1235],";",["T_WHITESPACE","\n    ",1235],"}",["T_WHITESPACE","\n\n    ",1236],["T_COMMENT","\/\/ Set the replica target if the replica option is set\n",1238],["T_WHITESPACE","    ",1239],["T_IF","if",1239],["T_WHITESPACE"," ",1239],"(","!",["T_EMPTY","empty",1239],"(",["T_VARIABLE","$this",1239],["T_OBJECT_OPERATOR","->",1239],["T_STRING","options",1239],"[",["T_CONSTANT_ENCAPSED_STRING","'replica'",1239],"]",")",")",["T_WHITESPACE"," ",1239],"{",["T_WHITESPACE","\n      ",1239],["T_VARIABLE","$target",1240],["T_WHITESPACE"," ",1240],"=",["T_WHITESPACE"," ",1240],["T_CONSTANT_ENCAPSED_STRING","'replica'",1240],";",["T_WHITESPACE","\n    ",1240],"}",["T_WHITESPACE","\n\n    ",1241],["T_COMMENT","\/\/ Go ahead and build the query.\n",1243],["T_WHITESPACE","    ",1244],["T_COMMENT","\/\/ db_select doesn't support to specify the key, so use getConnection directly.\n",1244],["T_WHITESPACE","    ",1245],["T_VARIABLE","$query",1245],["T_WHITESPACE"," ",1245],"=",["T_WHITESPACE"," ",1245],["T_STRING","Database",1245],["T_DOUBLE_COLON","::",1245],["T_STRING","getConnection",1245],"(",["T_VARIABLE","$target",1245],",",["T_WHITESPACE"," ",1245],["T_VARIABLE","$key",1245],")",["T_WHITESPACE","\n      ",1245],["T_OBJECT_OPERATOR","->",1246],["T_STRING","select",1246],"(",["T_VARIABLE","$this",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","view",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","storage",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","get",1246],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",1246],")",",",["T_WHITESPACE"," ",1246],["T_VARIABLE","$this",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","view",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","storage",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","get",1246],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",1246],")",",",["T_WHITESPACE"," ",1246],["T_VARIABLE","$options",1246],")",["T_WHITESPACE","\n      ",1246],["T_OBJECT_OPERATOR","->",1247],["T_STRING","addTag",1247],"(",["T_CONSTANT_ENCAPSED_STRING","'views'",1247],")",["T_WHITESPACE","\n      ",1247],["T_OBJECT_OPERATOR","->",1248],["T_STRING","addTag",1248],"(",["T_CONSTANT_ENCAPSED_STRING","'views_'",1248],["T_WHITESPACE"," ",1248],".",["T_WHITESPACE"," ",1248],["T_VARIABLE","$this",1248],["T_OBJECT_OPERATOR","->",1248],["T_STRING","view",1248],["T_OBJECT_OPERATOR","->",1248],["T_STRING","storage",1248],["T_OBJECT_OPERATOR","->",1248],["T_STRING","id",1248],"(",")",")",";",["T_WHITESPACE","\n\n    ",1248],["T_COMMENT","\/\/ Add the tags added to the view itself.\n",1250],["T_WHITESPACE","    ",1251],["T_FOREACH","foreach",1251],["T_WHITESPACE"," ",1251],"(",["T_VARIABLE","$this",1251],["T_OBJECT_OPERATOR","->",1251],["T_STRING","tags",1251],["T_WHITESPACE"," ",1251],["T_AS","as",1251],["T_WHITESPACE"," ",1251],["T_VARIABLE","$tag",1251],")",["T_WHITESPACE"," ",1251],"{",["T_WHITESPACE","\n      ",1251],["T_VARIABLE","$query",1252],["T_OBJECT_OPERATOR","->",1252],["T_STRING","addTag",1252],"(",["T_VARIABLE","$tag",1252],")",";",["T_WHITESPACE","\n    ",1252],"}",["T_WHITESPACE","\n\n    ",1253],["T_IF","if",1255],["T_WHITESPACE"," ",1255],"(","!",["T_EMPTY","empty",1255],"(",["T_VARIABLE","$distinct",1255],")",")",["T_WHITESPACE"," ",1255],"{",["T_WHITESPACE","\n      ",1255],["T_VARIABLE","$query",1256],["T_OBJECT_OPERATOR","->",1256],["T_STRING","distinct",1256],"(",")",";",["T_WHITESPACE","\n    ",1256],"}",["T_WHITESPACE","\n\n    ",1257],["T_COMMENT","\/\/ Add all the tables to the query via joins. We assume all LEFT joins.\n",1259],["T_WHITESPACE","    ",1260],["T_FOREACH","foreach",1260],["T_WHITESPACE"," ",1260],"(",["T_VARIABLE","$this",1260],["T_OBJECT_OPERATOR","->",1260],["T_STRING","tableQueue",1260],["T_WHITESPACE"," ",1260],["T_AS","as",1260],["T_WHITESPACE"," ",1260],["T_VARIABLE","$table",1260],")",["T_WHITESPACE"," ",1260],"{",["T_WHITESPACE","\n      ",1260],["T_IF","if",1261],["T_WHITESPACE"," ",1261],"(",["T_STRING","is_object",1261],"(",["T_VARIABLE","$table",1261],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",1261],"]",")",")",["T_WHITESPACE"," ",1261],"{",["T_WHITESPACE","\n        ",1261],["T_VARIABLE","$table",1262],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",1262],"]",["T_OBJECT_OPERATOR","->",1262],["T_STRING","buildJoin",1262],"(",["T_VARIABLE","$query",1262],",",["T_WHITESPACE"," ",1262],["T_VARIABLE","$table",1262],",",["T_WHITESPACE"," ",1262],["T_VARIABLE","$this",1262],")",";",["T_WHITESPACE","\n      ",1262],"}",["T_WHITESPACE","\n    ",1263],"}",["T_WHITESPACE","\n\n    ",1264],["T_COMMENT","\/\/ Assemble the groupby clause, if any.\n",1266],["T_WHITESPACE","    ",1267],["T_VARIABLE","$this",1267],["T_OBJECT_OPERATOR","->",1267],["T_STRING","hasAggregate",1267],["T_WHITESPACE"," ",1267],"=",["T_WHITESPACE"," ",1267],["T_STRING","FALSE",1267],";",["T_WHITESPACE","\n    ",1267],["T_VARIABLE","$non_aggregates",1268],["T_WHITESPACE"," ",1268],"=",["T_WHITESPACE"," ",1268],["T_VARIABLE","$this",1268],["T_OBJECT_OPERATOR","->",1268],["T_STRING","getNonAggregates",1268],"(",")",";",["T_WHITESPACE","\n    ",1268],["T_IF","if",1269],["T_WHITESPACE"," ",1269],"(",["T_STRING","count",1269],"(",["T_VARIABLE","$this",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","having",1269],")",")",["T_WHITESPACE"," ",1269],"{",["T_WHITESPACE","\n      ",1269],["T_VARIABLE","$this",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","hasAggregate",1270],["T_WHITESPACE"," ",1270],"=",["T_WHITESPACE"," ",1270],["T_STRING","TRUE",1270],";",["T_WHITESPACE","\n    ",1270],"}",["T_WHITESPACE","\n    ",1271],["T_ELSEIF","elseif",1272],["T_WHITESPACE"," ",1272],"(","!",["T_VARIABLE","$this",1272],["T_OBJECT_OPERATOR","->",1272],["T_STRING","hasAggregate",1272],")",["T_WHITESPACE"," ",1272],"{",["T_WHITESPACE","\n      ",1272],["T_COMMENT","\/\/ Allow 'GROUP BY' even no aggregation function has been set.\n",1273],["T_WHITESPACE","      ",1274],["T_VARIABLE","$this",1274],["T_OBJECT_OPERATOR","->",1274],["T_STRING","hasAggregate",1274],["T_WHITESPACE"," ",1274],"=",["T_WHITESPACE"," ",1274],["T_VARIABLE","$this",1274],["T_OBJECT_OPERATOR","->",1274],["T_STRING","view",1274],["T_OBJECT_OPERATOR","->",1274],["T_STRING","display_handler",1274],["T_OBJECT_OPERATOR","->",1274],["T_STRING","getOption",1274],"(",["T_CONSTANT_ENCAPSED_STRING","'group_by'",1274],")",";",["T_WHITESPACE","\n    ",1274],"}",["T_WHITESPACE","\n    ",1275],["T_VARIABLE","$groupby",1276],["T_WHITESPACE"," ",1276],"=",["T_WHITESPACE"," ",1276],["T_ARRAY","array",1276],"(",")",";",["T_WHITESPACE","\n    ",1276],["T_IF","if",1277],["T_WHITESPACE"," ",1277],"(",["T_VARIABLE","$this",1277],["T_OBJECT_OPERATOR","->",1277],["T_STRING","hasAggregate",1277],["T_WHITESPACE"," ",1277],["T_BOOLEAN_AND","&&",1277],["T_WHITESPACE"," ",1277],"(","!",["T_EMPTY","empty",1277],"(",["T_VARIABLE","$this",1277],["T_OBJECT_OPERATOR","->",1277],["T_STRING","groupby",1277],")",["T_WHITESPACE"," ",1277],["T_BOOLEAN_OR","||",1277],["T_WHITESPACE"," ",1277],"!",["T_EMPTY","empty",1277],"(",["T_VARIABLE","$non_aggregates",1277],")",")",")",["T_WHITESPACE"," ",1277],"{",["T_WHITESPACE","\n      ",1277],["T_VARIABLE","$groupby",1278],["T_WHITESPACE"," ",1278],"=",["T_WHITESPACE"," ",1278],["T_STRING","array_unique",1278],"(",["T_STRING","array_merge",1278],"(",["T_VARIABLE","$this",1278],["T_OBJECT_OPERATOR","->",1278],["T_STRING","groupby",1278],",",["T_WHITESPACE"," ",1278],["T_VARIABLE","$non_aggregates",1278],")",")",";",["T_WHITESPACE","\n    ",1278],"}",["T_WHITESPACE","\n\n    ",1279],["T_COMMENT","\/\/ Make sure each entity table has the base field added so that the\n",1281],["T_WHITESPACE","    ",1282],["T_COMMENT","\/\/ entities can be loaded.\n",1282],["T_WHITESPACE","    ",1283],["T_VARIABLE","$entity_information",1283],["T_WHITESPACE"," ",1283],"=",["T_WHITESPACE"," ",1283],["T_VARIABLE","$this",1283],["T_OBJECT_OPERATOR","->",1283],["T_STRING","getEntityTableInfo",1283],"(",")",";",["T_WHITESPACE","\n    ",1283],["T_IF","if",1284],["T_WHITESPACE"," ",1284],"(",["T_VARIABLE","$entity_information",1284],")",["T_WHITESPACE"," ",1284],"{",["T_WHITESPACE","\n      ",1284],["T_VARIABLE","$params",1285],["T_WHITESPACE"," ",1285],"=",["T_WHITESPACE"," ",1285],["T_ARRAY","array",1285],"(",")",";",["T_WHITESPACE","\n      ",1285],["T_IF","if",1286],["T_WHITESPACE"," ",1286],"(",["T_VARIABLE","$groupby",1286],")",["T_WHITESPACE"," ",1286],"{",["T_WHITESPACE","\n        ",1286],["T_COMMENT","\/\/ Handle grouping, by retrieving the minimum entity_id.\n",1287],["T_WHITESPACE","        ",1288],["T_VARIABLE","$params",1288],["T_WHITESPACE"," ",1288],"=",["T_WHITESPACE"," ",1288],["T_ARRAY","array",1288],"(",["T_WHITESPACE","\n          ",1288],["T_CONSTANT_ENCAPSED_STRING","'function'",1289],["T_WHITESPACE"," ",1289],["T_DOUBLE_ARROW","=>",1289],["T_WHITESPACE"," ",1289],["T_CONSTANT_ENCAPSED_STRING","'min'",1289],",",["T_WHITESPACE","\n        ",1289],")",";",["T_WHITESPACE","\n      ",1290],"}",["T_WHITESPACE","\n\n      ",1291],["T_FOREACH","foreach",1293],["T_WHITESPACE"," ",1293],"(",["T_VARIABLE","$entity_information",1293],["T_WHITESPACE"," ",1293],["T_AS","as",1293],["T_WHITESPACE"," ",1293],["T_VARIABLE","$entity_type_id",1293],["T_WHITESPACE"," ",1293],["T_DOUBLE_ARROW","=>",1293],["T_WHITESPACE"," ",1293],["T_VARIABLE","$info",1293],")",["T_WHITESPACE"," ",1293],"{",["T_WHITESPACE","\n        ",1293],["T_VARIABLE","$entity_type",1294],["T_WHITESPACE"," ",1294],"=",["T_WHITESPACE"," ",1294],["T_NS_SEPARATOR","\\",1294],["T_STRING","Drupal",1294],["T_DOUBLE_COLON","::",1294],["T_STRING","entityManager",1294],"(",")",["T_OBJECT_OPERATOR","->",1294],["T_STRING","getDefinition",1294],"(",["T_VARIABLE","$info",1294],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",1294],"]",")",";",["T_WHITESPACE","\n        ",1294],["T_VARIABLE","$base_field",1295],["T_WHITESPACE"," ",1295],"=",["T_WHITESPACE"," ",1295],"!",["T_VARIABLE","$info",1295],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",1295],"]",["T_WHITESPACE"," ",1295],"?",["T_WHITESPACE"," ",1295],["T_VARIABLE","$entity_type",1295],["T_OBJECT_OPERATOR","->",1295],["T_STRING","getKey",1295],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",1295],")",["T_WHITESPACE"," ",1295],":",["T_WHITESPACE"," ",1295],["T_VARIABLE","$entity_type",1295],["T_OBJECT_OPERATOR","->",1295],["T_STRING","getKey",1295],"(",["T_CONSTANT_ENCAPSED_STRING","'revision'",1295],")",";",["T_WHITESPACE","\n        ",1295],["T_VARIABLE","$this",1296],["T_OBJECT_OPERATOR","->",1296],["T_STRING","addField",1296],"(",["T_VARIABLE","$info",1296],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",1296],"]",",",["T_WHITESPACE"," ",1296],["T_VARIABLE","$base_field",1296],",",["T_WHITESPACE"," ",1296],["T_CONSTANT_ENCAPSED_STRING","''",1296],",",["T_WHITESPACE"," ",1296],["T_VARIABLE","$params",1296],")",";",["T_WHITESPACE","\n      ",1296],"}",["T_WHITESPACE","\n    ",1297],"}",["T_WHITESPACE","\n\n    ",1298],["T_COMMENT","\/\/ Add all fields to the query.\n",1300],["T_WHITESPACE","    ",1301],["T_VARIABLE","$this",1301],["T_OBJECT_OPERATOR","->",1301],["T_STRING","compileFields",1301],"(",["T_VARIABLE","$query",1301],")",";",["T_WHITESPACE","\n\n    ",1301],["T_COMMENT","\/\/ Add groupby.\n",1303],["T_WHITESPACE","    ",1304],["T_IF","if",1304],["T_WHITESPACE"," ",1304],"(",["T_VARIABLE","$groupby",1304],")",["T_WHITESPACE"," ",1304],"{",["T_WHITESPACE","\n      ",1304],["T_FOREACH","foreach",1305],["T_WHITESPACE"," ",1305],"(",["T_VARIABLE","$groupby",1305],["T_WHITESPACE"," ",1305],["T_AS","as",1305],["T_WHITESPACE"," ",1305],["T_VARIABLE","$field",1305],")",["T_WHITESPACE"," ",1305],"{",["T_WHITESPACE","\n        ",1305],["T_COMMENT","\/\/ Handle group by of field without table alias to avoid ambiguous\n",1306],["T_WHITESPACE","        ",1307],["T_COMMENT","\/\/ column error.\n",1307],["T_WHITESPACE","        ",1308],["T_IF","if",1308],["T_WHITESPACE"," ",1308],"(",["T_VARIABLE","$field",1308],["T_WHITESPACE"," ",1308],["T_IS_EQUAL","==",1308],["T_WHITESPACE"," ",1308],["T_VARIABLE","$this",1308],["T_OBJECT_OPERATOR","->",1308],["T_STRING","view",1308],["T_OBJECT_OPERATOR","->",1308],["T_STRING","storage",1308],["T_OBJECT_OPERATOR","->",1308],["T_STRING","get",1308],"(",["T_CONSTANT_ENCAPSED_STRING","'base_field'",1308],")",")",["T_WHITESPACE"," ",1308],"{",["T_WHITESPACE","\n          ",1308],["T_VARIABLE","$field",1309],["T_WHITESPACE"," ",1309],"=",["T_WHITESPACE"," ",1309],["T_VARIABLE","$this",1309],["T_OBJECT_OPERATOR","->",1309],["T_STRING","view",1309],["T_OBJECT_OPERATOR","->",1309],["T_STRING","storage",1309],["T_OBJECT_OPERATOR","->",1309],["T_STRING","get",1309],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",1309],")",["T_WHITESPACE"," ",1309],".",["T_WHITESPACE"," ",1309],["T_CONSTANT_ENCAPSED_STRING","'.'",1309],["T_WHITESPACE"," ",1309],".",["T_WHITESPACE"," ",1309],["T_VARIABLE","$field",1309],";",["T_WHITESPACE","\n        ",1309],"}",["T_WHITESPACE","\n        ",1310],["T_VARIABLE","$query",1311],["T_OBJECT_OPERATOR","->",1311],["T_STRING","groupBy",1311],"(",["T_VARIABLE","$field",1311],")",";",["T_WHITESPACE","\n      ",1311],"}",["T_WHITESPACE","\n      ",1312],["T_IF","if",1313],["T_WHITESPACE"," ",1313],"(","!",["T_EMPTY","empty",1313],"(",["T_VARIABLE","$this",1313],["T_OBJECT_OPERATOR","->",1313],["T_STRING","having",1313],")",["T_WHITESPACE"," ",1313],["T_BOOLEAN_AND","&&",1313],["T_WHITESPACE"," ",1313],["T_VARIABLE","$condition",1313],["T_WHITESPACE"," ",1313],"=",["T_WHITESPACE"," ",1313],["T_VARIABLE","$this",1313],["T_OBJECT_OPERATOR","->",1313],["T_STRING","buildCondition",1313],"(",["T_CONSTANT_ENCAPSED_STRING","'having'",1313],")",")",["T_WHITESPACE"," ",1313],"{",["T_WHITESPACE","\n        ",1313],["T_VARIABLE","$query",1314],["T_OBJECT_OPERATOR","->",1314],["T_STRING","havingCondition",1314],"(",["T_VARIABLE","$condition",1314],")",";",["T_WHITESPACE","\n      ",1314],"}",["T_WHITESPACE","\n    ",1315],"}",["T_WHITESPACE","\n\n    ",1316],["T_IF","if",1318],["T_WHITESPACE"," ",1318],"(","!",["T_VARIABLE","$this",1318],["T_OBJECT_OPERATOR","->",1318],["T_STRING","getCountOptimized",1318],")",["T_WHITESPACE"," ",1318],"{",["T_WHITESPACE","\n      ",1318],["T_COMMENT","\/\/ we only add the orderby if we're not counting.\n",1319],["T_WHITESPACE","      ",1320],["T_IF","if",1320],["T_WHITESPACE"," ",1320],"(",["T_VARIABLE","$this",1320],["T_OBJECT_OPERATOR","->",1320],["T_STRING","orderby",1320],")",["T_WHITESPACE"," ",1320],"{",["T_WHITESPACE","\n        ",1320],["T_FOREACH","foreach",1321],["T_WHITESPACE"," ",1321],"(",["T_VARIABLE","$this",1321],["T_OBJECT_OPERATOR","->",1321],["T_STRING","orderby",1321],["T_WHITESPACE"," ",1321],["T_AS","as",1321],["T_WHITESPACE"," ",1321],["T_VARIABLE","$order",1321],")",["T_WHITESPACE"," ",1321],"{",["T_WHITESPACE","\n          ",1321],["T_IF","if",1322],["T_WHITESPACE"," ",1322],"(",["T_VARIABLE","$order",1322],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1322],"]",["T_WHITESPACE"," ",1322],["T_IS_EQUAL","==",1322],["T_WHITESPACE"," ",1322],["T_CONSTANT_ENCAPSED_STRING","'rand_'",1322],")",["T_WHITESPACE"," ",1322],"{",["T_WHITESPACE","\n            ",1322],["T_VARIABLE","$query",1323],["T_OBJECT_OPERATOR","->",1323],["T_STRING","orderRandom",1323],"(",")",";",["T_WHITESPACE","\n          ",1323],"}",["T_WHITESPACE","\n          ",1324],["T_ELSE","else",1325],["T_WHITESPACE"," ",1325],"{",["T_WHITESPACE","\n            ",1325],["T_VARIABLE","$query",1326],["T_OBJECT_OPERATOR","->",1326],["T_STRING","orderBy",1326],"(",["T_VARIABLE","$order",1326],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1326],"]",",",["T_WHITESPACE"," ",1326],["T_VARIABLE","$order",1326],"[",["T_CONSTANT_ENCAPSED_STRING","'direction'",1326],"]",")",";",["T_WHITESPACE","\n          ",1326],"}",["T_WHITESPACE","\n        ",1327],"}",["T_WHITESPACE","\n      ",1328],"}",["T_WHITESPACE","\n    ",1329],"}",["T_WHITESPACE","\n\n    ",1330],["T_IF","if",1332],["T_WHITESPACE"," ",1332],"(","!",["T_EMPTY","empty",1332],"(",["T_VARIABLE","$this",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","where",1332],")",["T_WHITESPACE"," ",1332],["T_BOOLEAN_AND","&&",1332],["T_WHITESPACE"," ",1332],["T_VARIABLE","$condition",1332],["T_WHITESPACE"," ",1332],"=",["T_WHITESPACE"," ",1332],["T_VARIABLE","$this",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","buildCondition",1332],"(",["T_CONSTANT_ENCAPSED_STRING","'where'",1332],")",")",["T_WHITESPACE"," ",1332],"{",["T_WHITESPACE","\n      ",1332],["T_VARIABLE","$query",1333],["T_OBJECT_OPERATOR","->",1333],["T_STRING","condition",1333],"(",["T_VARIABLE","$condition",1333],")",";",["T_WHITESPACE","\n    ",1333],"}",["T_WHITESPACE","\n\n    ",1334],["T_COMMENT","\/\/ Add a query comment.\n",1336],["T_WHITESPACE","    ",1337],["T_IF","if",1337],["T_WHITESPACE"," ",1337],"(","!",["T_EMPTY","empty",1337],"(",["T_VARIABLE","$this",1337],["T_OBJECT_OPERATOR","->",1337],["T_STRING","options",1337],"[",["T_CONSTANT_ENCAPSED_STRING","'query_comment'",1337],"]",")",")",["T_WHITESPACE"," ",1337],"{",["T_WHITESPACE","\n      ",1337],["T_VARIABLE","$query",1338],["T_OBJECT_OPERATOR","->",1338],["T_STRING","comment",1338],"(",["T_VARIABLE","$this",1338],["T_OBJECT_OPERATOR","->",1338],["T_STRING","options",1338],"[",["T_CONSTANT_ENCAPSED_STRING","'query_comment'",1338],"]",")",";",["T_WHITESPACE","\n    ",1338],"}",["T_WHITESPACE","\n\n    ",1339],["T_COMMENT","\/\/ Add the query tags.\n",1341],["T_WHITESPACE","    ",1342],["T_IF","if",1342],["T_WHITESPACE"," ",1342],"(","!",["T_EMPTY","empty",1342],"(",["T_VARIABLE","$this",1342],["T_OBJECT_OPERATOR","->",1342],["T_STRING","options",1342],"[",["T_CONSTANT_ENCAPSED_STRING","'query_tags'",1342],"]",")",")",["T_WHITESPACE"," ",1342],"{",["T_WHITESPACE","\n      ",1342],["T_FOREACH","foreach",1343],["T_WHITESPACE"," ",1343],"(",["T_VARIABLE","$this",1343],["T_OBJECT_OPERATOR","->",1343],["T_STRING","options",1343],"[",["T_CONSTANT_ENCAPSED_STRING","'query_tags'",1343],"]",["T_WHITESPACE"," ",1343],["T_AS","as",1343],["T_WHITESPACE"," ",1343],["T_VARIABLE","$tag",1343],")",["T_WHITESPACE"," ",1343],"{",["T_WHITESPACE","\n        ",1343],["T_VARIABLE","$query",1344],["T_OBJECT_OPERATOR","->",1344],["T_STRING","addTag",1344],"(",["T_VARIABLE","$tag",1344],")",";",["T_WHITESPACE","\n      ",1344],"}",["T_WHITESPACE","\n    ",1345],"}",["T_WHITESPACE","\n\n    ",1346],["T_COMMENT","\/\/ Add all query substitutions as metadata.\n",1348],["T_WHITESPACE","    ",1349],["T_VARIABLE","$query",1349],["T_OBJECT_OPERATOR","->",1349],["T_STRING","addMetaData",1349],"(",["T_CONSTANT_ENCAPSED_STRING","'views_substitutions'",1349],",",["T_WHITESPACE"," ",1349],["T_NS_SEPARATOR","\\",1349],["T_STRING","Drupal",1349],["T_DOUBLE_COLON","::",1349],["T_STRING","moduleHandler",1349],"(",")",["T_OBJECT_OPERATOR","->",1349],["T_STRING","invokeAll",1349],"(",["T_CONSTANT_ENCAPSED_STRING","'views_query_substitutions'",1349],",",["T_WHITESPACE"," ",1349],["T_ARRAY","array",1349],"(",["T_VARIABLE","$this",1349],["T_OBJECT_OPERATOR","->",1349],["T_STRING","view",1349],")",")",")",";",["T_WHITESPACE","\n\n    ",1349],["T_RETURN","return",1351],["T_WHITESPACE"," ",1351],["T_VARIABLE","$query",1351],";",["T_WHITESPACE","\n  ",1351],"}",["T_WHITESPACE","\n\n  ",1352],["T_DOC_COMMENT","\/**\n   * Get the arguments attached to the WHERE and HAVING clauses of this query.\n   *\/",1354],["T_WHITESPACE","\n  ",1356],["T_PUBLIC","public",1357],["T_WHITESPACE"," ",1357],["T_FUNCTION","function",1357],["T_WHITESPACE"," ",1357],["T_STRING","getWhereArgs",1357],"(",")",["T_WHITESPACE"," ",1357],"{",["T_WHITESPACE","\n    ",1357],["T_VARIABLE","$args",1358],["T_WHITESPACE"," ",1358],"=",["T_WHITESPACE"," ",1358],["T_ARRAY","array",1358],"(",")",";",["T_WHITESPACE","\n    ",1358],["T_FOREACH","foreach",1359],["T_WHITESPACE"," ",1359],"(",["T_VARIABLE","$this",1359],["T_OBJECT_OPERATOR","->",1359],["T_STRING","where",1359],["T_WHITESPACE"," ",1359],["T_AS","as",1359],["T_WHITESPACE"," ",1359],["T_VARIABLE","$where",1359],")",["T_WHITESPACE"," ",1359],"{",["T_WHITESPACE","\n      ",1359],["T_VARIABLE","$args",1360],["T_WHITESPACE"," ",1360],"=",["T_WHITESPACE"," ",1360],["T_STRING","array_merge",1360],"(",["T_VARIABLE","$args",1360],",",["T_WHITESPACE"," ",1360],["T_VARIABLE","$where",1360],"[",["T_CONSTANT_ENCAPSED_STRING","'args'",1360],"]",")",";",["T_WHITESPACE","\n    ",1360],"}",["T_WHITESPACE","\n    ",1361],["T_FOREACH","foreach",1362],["T_WHITESPACE"," ",1362],"(",["T_VARIABLE","$this",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","having",1362],["T_WHITESPACE"," ",1362],["T_AS","as",1362],["T_WHITESPACE"," ",1362],["T_VARIABLE","$having",1362],")",["T_WHITESPACE"," ",1362],"{",["T_WHITESPACE","\n      ",1362],["T_VARIABLE","$args",1363],["T_WHITESPACE"," ",1363],"=",["T_WHITESPACE"," ",1363],["T_STRING","array_merge",1363],"(",["T_VARIABLE","$args",1363],",",["T_WHITESPACE"," ",1363],["T_VARIABLE","$having",1363],"[",["T_CONSTANT_ENCAPSED_STRING","'args'",1363],"]",")",";",["T_WHITESPACE","\n    ",1363],"}",["T_WHITESPACE","\n    ",1364],["T_RETURN","return",1365],["T_WHITESPACE"," ",1365],["T_VARIABLE","$args",1365],";",["T_WHITESPACE","\n  ",1365],"}",["T_WHITESPACE","\n\n  ",1366],["T_DOC_COMMENT","\/**\n   * Let modules modify the query just prior to finalizing it.\n   *\/",1368],["T_WHITESPACE","\n  ",1370],["T_PUBLIC","public",1371],["T_WHITESPACE"," ",1371],["T_FUNCTION","function",1371],["T_WHITESPACE"," ",1371],["T_STRING","alter",1371],"(",["T_STRING","ViewExecutable",1371],["T_WHITESPACE"," ",1371],["T_VARIABLE","$view",1371],")",["T_WHITESPACE"," ",1371],"{",["T_WHITESPACE","\n    ",1371],["T_NS_SEPARATOR","\\",1372],["T_STRING","Drupal",1372],["T_DOUBLE_COLON","::",1372],["T_STRING","moduleHandler",1372],"(",")",["T_OBJECT_OPERATOR","->",1372],["T_STRING","invokeAll",1372],"(",["T_CONSTANT_ENCAPSED_STRING","'views_query_alter'",1372],",",["T_WHITESPACE"," ",1372],["T_ARRAY","array",1372],"(",["T_VARIABLE","$view",1372],",",["T_WHITESPACE"," ",1372],["T_VARIABLE","$this",1372],")",")",";",["T_WHITESPACE","\n  ",1372],"}",["T_WHITESPACE","\n\n  ",1373],["T_DOC_COMMENT","\/**\n   * Builds the necessary info to execute the query.\n   *\/",1375],["T_WHITESPACE","\n  ",1377],["T_PUBLIC","public",1378],["T_WHITESPACE"," ",1378],["T_FUNCTION","function",1378],["T_WHITESPACE"," ",1378],["T_STRING","build",1378],"(",["T_STRING","ViewExecutable",1378],["T_WHITESPACE"," ",1378],["T_VARIABLE","$view",1378],")",["T_WHITESPACE"," ",1378],"{",["T_WHITESPACE","\n    ",1378],["T_COMMENT","\/\/ Make the query distinct if the option was set.\n",1379],["T_WHITESPACE","    ",1380],["T_IF","if",1380],["T_WHITESPACE"," ",1380],"(","!",["T_EMPTY","empty",1380],"(",["T_VARIABLE","$this",1380],["T_OBJECT_OPERATOR","->",1380],["T_STRING","options",1380],"[",["T_CONSTANT_ENCAPSED_STRING","'distinct'",1380],"]",")",")",["T_WHITESPACE"," ",1380],"{",["T_WHITESPACE","\n      ",1380],["T_VARIABLE","$this",1381],["T_OBJECT_OPERATOR","->",1381],["T_STRING","setDistinct",1381],"(",["T_STRING","TRUE",1381],")",";",["T_WHITESPACE","\n    ",1381],"}",["T_WHITESPACE","\n\n    ",1382],["T_COMMENT","\/\/ Store the view in the object to be able to use it later.\n",1384],["T_WHITESPACE","    ",1385],["T_VARIABLE","$this",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","view",1385],["T_WHITESPACE"," ",1385],"=",["T_WHITESPACE"," ",1385],["T_VARIABLE","$view",1385],";",["T_WHITESPACE","\n\n    ",1385],["T_VARIABLE","$view",1387],["T_OBJECT_OPERATOR","->",1387],["T_STRING","initPager",1387],"(",")",";",["T_WHITESPACE","\n\n    ",1387],["T_COMMENT","\/\/ Let the pager modify the query to add limits.\n",1389],["T_WHITESPACE","    ",1390],["T_VARIABLE","$view",1390],["T_OBJECT_OPERATOR","->",1390],["T_STRING","pager",1390],["T_OBJECT_OPERATOR","->",1390],["T_STRING","query",1390],"(",")",";",["T_WHITESPACE","\n\n    ",1390],["T_VARIABLE","$view",1392],["T_OBJECT_OPERATOR","->",1392],["T_STRING","build_info",1392],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",1392],"]",["T_WHITESPACE"," ",1392],"=",["T_WHITESPACE"," ",1392],["T_VARIABLE","$this",1392],["T_OBJECT_OPERATOR","->",1392],["T_STRING","query",1392],"(",")",";",["T_WHITESPACE","\n    ",1392],["T_VARIABLE","$view",1393],["T_OBJECT_OPERATOR","->",1393],["T_STRING","build_info",1393],"[",["T_CONSTANT_ENCAPSED_STRING","'count_query'",1393],"]",["T_WHITESPACE"," ",1393],"=",["T_WHITESPACE"," ",1393],["T_VARIABLE","$this",1393],["T_OBJECT_OPERATOR","->",1393],["T_STRING","query",1393],"(",["T_STRING","TRUE",1393],")",";",["T_WHITESPACE","\n  ",1393],"}",["T_WHITESPACE","\n\n  ",1394],["T_DOC_COMMENT","\/**\n   * Executes the query and fills the associated view object with according\n   * values.\n   *\n   * Values to set: $view->result, $view->total_rows, $view->execute_time,\n   * $view->current_page.\n   *\/",1396],["T_WHITESPACE","\n  ",1402],["T_PUBLIC","public",1403],["T_WHITESPACE"," ",1403],["T_FUNCTION","function",1403],["T_WHITESPACE"," ",1403],["T_STRING","execute",1403],"(",["T_STRING","ViewExecutable",1403],["T_WHITESPACE"," ",1403],["T_VARIABLE","$view",1403],")",["T_WHITESPACE"," ",1403],"{",["T_WHITESPACE","\n    ",1403],["T_VARIABLE","$query",1404],["T_WHITESPACE"," ",1404],"=",["T_WHITESPACE"," ",1404],["T_VARIABLE","$view",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","build_info",1404],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",1404],"]",";",["T_WHITESPACE","\n    ",1404],["T_VARIABLE","$count_query",1405],["T_WHITESPACE"," ",1405],"=",["T_WHITESPACE"," ",1405],["T_VARIABLE","$view",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","build_info",1405],"[",["T_CONSTANT_ENCAPSED_STRING","'count_query'",1405],"]",";",["T_WHITESPACE","\n\n    ",1405],["T_VARIABLE","$query",1407],["T_OBJECT_OPERATOR","->",1407],["T_STRING","addMetaData",1407],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",1407],",",["T_WHITESPACE"," ",1407],["T_VARIABLE","$view",1407],")",";",["T_WHITESPACE","\n    ",1407],["T_VARIABLE","$count_query",1408],["T_OBJECT_OPERATOR","->",1408],["T_STRING","addMetaData",1408],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",1408],",",["T_WHITESPACE"," ",1408],["T_VARIABLE","$view",1408],")",";",["T_WHITESPACE","\n\n    ",1408],["T_IF","if",1410],["T_WHITESPACE"," ",1410],"(",["T_EMPTY","empty",1410],"(",["T_VARIABLE","$this",1410],["T_OBJECT_OPERATOR","->",1410],["T_STRING","options",1410],"[",["T_CONSTANT_ENCAPSED_STRING","'disable_sql_rewrite'",1410],"]",")",")",["T_WHITESPACE"," ",1410],"{",["T_WHITESPACE","\n      ",1410],["T_VARIABLE","$base_table_data",1411],["T_WHITESPACE"," ",1411],"=",["T_WHITESPACE"," ",1411],["T_STRING","Views",1411],["T_DOUBLE_COLON","::",1411],["T_STRING","viewsData",1411],"(",")",["T_OBJECT_OPERATOR","->",1411],["T_STRING","get",1411],"(",["T_VARIABLE","$this",1411],["T_OBJECT_OPERATOR","->",1411],["T_STRING","view",1411],["T_OBJECT_OPERATOR","->",1411],["T_STRING","storage",1411],["T_OBJECT_OPERATOR","->",1411],["T_STRING","get",1411],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",1411],")",")",";",["T_WHITESPACE","\n      ",1411],["T_IF","if",1412],["T_WHITESPACE"," ",1412],"(",["T_ISSET","isset",1412],"(",["T_VARIABLE","$base_table_data",1412],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1412],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",1412],"]","[",["T_CONSTANT_ENCAPSED_STRING","'access query tag'",1412],"]",")",")",["T_WHITESPACE"," ",1412],"{",["T_WHITESPACE","\n        ",1412],["T_VARIABLE","$access_tag",1413],["T_WHITESPACE"," ",1413],"=",["T_WHITESPACE"," ",1413],["T_VARIABLE","$base_table_data",1413],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1413],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",1413],"]","[",["T_CONSTANT_ENCAPSED_STRING","'access query tag'",1413],"]",";",["T_WHITESPACE","\n        ",1413],["T_VARIABLE","$query",1414],["T_OBJECT_OPERATOR","->",1414],["T_STRING","addTag",1414],"(",["T_VARIABLE","$access_tag",1414],")",";",["T_WHITESPACE","\n        ",1414],["T_VARIABLE","$count_query",1415],["T_OBJECT_OPERATOR","->",1415],["T_STRING","addTag",1415],"(",["T_VARIABLE","$access_tag",1415],")",";",["T_WHITESPACE","\n      ",1415],"}",["T_WHITESPACE","\n\n      ",1416],["T_IF","if",1418],["T_WHITESPACE"," ",1418],"(",["T_ISSET","isset",1418],"(",["T_VARIABLE","$base_table_data",1418],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1418],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",1418],"]","[",["T_CONSTANT_ENCAPSED_STRING","'query metadata'",1418],"]",")",")",["T_WHITESPACE"," ",1418],"{",["T_WHITESPACE","\n        ",1418],["T_FOREACH","foreach",1419],["T_WHITESPACE"," ",1419],"(",["T_VARIABLE","$base_table_data",1419],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1419],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",1419],"]","[",["T_CONSTANT_ENCAPSED_STRING","'query metadata'",1419],"]",["T_WHITESPACE"," ",1419],["T_AS","as",1419],["T_WHITESPACE"," ",1419],["T_VARIABLE","$key",1419],["T_WHITESPACE"," ",1419],["T_DOUBLE_ARROW","=>",1419],["T_WHITESPACE"," ",1419],["T_VARIABLE","$value",1419],")",["T_WHITESPACE"," ",1419],"{",["T_WHITESPACE","\n          ",1419],["T_VARIABLE","$query",1420],["T_OBJECT_OPERATOR","->",1420],["T_STRING","addMetaData",1420],"(",["T_VARIABLE","$key",1420],",",["T_WHITESPACE"," ",1420],["T_VARIABLE","$value",1420],")",";",["T_WHITESPACE","\n          ",1420],["T_VARIABLE","$count_query",1421],["T_OBJECT_OPERATOR","->",1421],["T_STRING","addMetaData",1421],"(",["T_VARIABLE","$key",1421],",",["T_WHITESPACE"," ",1421],["T_VARIABLE","$value",1421],")",";",["T_WHITESPACE","\n        ",1421],"}",["T_WHITESPACE","\n      ",1422],"}",["T_WHITESPACE","\n    ",1423],"}",["T_WHITESPACE","\n\n    ",1424],["T_IF","if",1426],["T_WHITESPACE"," ",1426],"(",["T_VARIABLE","$query",1426],")",["T_WHITESPACE"," ",1426],"{",["T_WHITESPACE","\n      ",1426],["T_VARIABLE","$additional_arguments",1427],["T_WHITESPACE"," ",1427],"=",["T_WHITESPACE"," ",1427],["T_NS_SEPARATOR","\\",1427],["T_STRING","Drupal",1427],["T_DOUBLE_COLON","::",1427],["T_STRING","moduleHandler",1427],"(",")",["T_OBJECT_OPERATOR","->",1427],["T_STRING","invokeAll",1427],"(",["T_CONSTANT_ENCAPSED_STRING","'views_query_substitutions'",1427],",",["T_WHITESPACE"," ",1427],["T_ARRAY","array",1427],"(",["T_VARIABLE","$view",1427],")",")",";",["T_WHITESPACE","\n\n      ",1427],["T_COMMENT","\/\/ Count queries must be run through the preExecute() method.\n",1429],["T_WHITESPACE","      ",1430],["T_COMMENT","\/\/ If not, then hook_query_node_access_alter() may munge the count by\n",1430],["T_WHITESPACE","      ",1431],["T_COMMENT","\/\/ adding a distinct against an empty query string\n",1431],["T_WHITESPACE","      ",1432],["T_COMMENT","\/\/ (e.g. COUNT DISTINCT(1) ...) and no pager will return.\n",1432],["T_WHITESPACE","      ",1433],["T_COMMENT","\/\/ See pager.inc > PagerDefault::execute()\n",1433],["T_WHITESPACE","      ",1434],["T_COMMENT","\/\/ http:\/\/api.drupal.org\/api\/drupal\/includes--pager.inc\/function\/PagerDefault::execute\/7\n",1434],["T_WHITESPACE","      ",1435],["T_COMMENT","\/\/ See https:\/\/www.drupal.org\/node\/1046170.\n",1435],["T_WHITESPACE","      ",1436],["T_VARIABLE","$count_query",1436],["T_OBJECT_OPERATOR","->",1436],["T_STRING","preExecute",1436],"(",")",";",["T_WHITESPACE","\n\n      ",1436],["T_COMMENT","\/\/ Build the count query.\n",1438],["T_WHITESPACE","      ",1439],["T_VARIABLE","$count_query",1439],["T_WHITESPACE"," ",1439],"=",["T_WHITESPACE"," ",1439],["T_VARIABLE","$count_query",1439],["T_OBJECT_OPERATOR","->",1439],["T_STRING","countQuery",1439],"(",")",";",["T_WHITESPACE","\n\n      ",1439],["T_COMMENT","\/\/ Add additional arguments as a fake condition.\n",1441],["T_WHITESPACE","      ",1442],["T_COMMENT","\/\/ XXX: this doesn't work, because PDO mandates that all bound arguments\n",1442],["T_WHITESPACE","      ",1443],["T_COMMENT","\/\/ are used on the query. TODO: Find a better way to do this.\n",1443],["T_WHITESPACE","      ",1444],["T_IF","if",1444],["T_WHITESPACE"," ",1444],"(","!",["T_EMPTY","empty",1444],"(",["T_VARIABLE","$additional_arguments",1444],")",")",["T_WHITESPACE"," ",1444],"{",["T_WHITESPACE","\n        ",1444],["T_COMMENT","\/\/ $query->where('1 = 1', $additional_arguments);\n",1445],["T_WHITESPACE","        ",1446],["T_COMMENT","\/\/ $count_query->where('1 = 1', $additional_arguments);\n",1446],["T_WHITESPACE","      ",1447],"}",["T_WHITESPACE","\n\n      ",1447],["T_VARIABLE","$start",1449],["T_WHITESPACE"," ",1449],"=",["T_WHITESPACE"," ",1449],["T_STRING","microtime",1449],"(",["T_STRING","TRUE",1449],")",";",["T_WHITESPACE","\n\n      ",1449],["T_TRY","try",1451],["T_WHITESPACE"," ",1451],"{",["T_WHITESPACE","\n        ",1451],["T_IF","if",1452],["T_WHITESPACE"," ",1452],"(",["T_VARIABLE","$view",1452],["T_OBJECT_OPERATOR","->",1452],["T_STRING","pager",1452],["T_OBJECT_OPERATOR","->",1452],["T_STRING","useCountQuery",1452],"(",")",["T_WHITESPACE"," ",1452],["T_BOOLEAN_OR","||",1452],["T_WHITESPACE"," ",1452],"!",["T_EMPTY","empty",1452],"(",["T_VARIABLE","$view",1452],["T_OBJECT_OPERATOR","->",1452],["T_STRING","get_total_rows",1452],")",")",["T_WHITESPACE"," ",1452],"{",["T_WHITESPACE","\n          ",1452],["T_VARIABLE","$view",1453],["T_OBJECT_OPERATOR","->",1453],["T_STRING","pager",1453],["T_OBJECT_OPERATOR","->",1453],["T_STRING","executeCountQuery",1453],"(",["T_VARIABLE","$count_query",1453],")",";",["T_WHITESPACE","\n        ",1453],"}",["T_WHITESPACE","\n\n        ",1454],["T_COMMENT","\/\/ Let the pager modify the query to add limits.\n",1456],["T_WHITESPACE","        ",1457],["T_VARIABLE","$view",1457],["T_OBJECT_OPERATOR","->",1457],["T_STRING","pager",1457],["T_OBJECT_OPERATOR","->",1457],["T_STRING","preExecute",1457],"(",["T_VARIABLE","$query",1457],")",";",["T_WHITESPACE","\n\n        ",1457],["T_IF","if",1459],["T_WHITESPACE"," ",1459],"(","!",["T_EMPTY","empty",1459],"(",["T_VARIABLE","$this",1459],["T_OBJECT_OPERATOR","->",1459],["T_STRING","limit",1459],")",["T_WHITESPACE"," ",1459],["T_BOOLEAN_OR","||",1459],["T_WHITESPACE"," ",1459],"!",["T_EMPTY","empty",1459],"(",["T_VARIABLE","$this",1459],["T_OBJECT_OPERATOR","->",1459],["T_STRING","offset",1459],")",")",["T_WHITESPACE"," ",1459],"{",["T_WHITESPACE","\n          ",1459],["T_COMMENT","\/\/ We can't have an offset without a limit, so provide a very large limit instead.\n",1460],["T_WHITESPACE","          ",1461],["T_VARIABLE","$limit",1461],["T_WHITESPACE","  ",1461],"=",["T_WHITESPACE"," ",1461],["T_STRING","intval",1461],"(","!",["T_EMPTY","empty",1461],"(",["T_VARIABLE","$this",1461],["T_OBJECT_OPERATOR","->",1461],["T_STRING","limit",1461],")",["T_WHITESPACE"," ",1461],"?",["T_WHITESPACE"," ",1461],["T_VARIABLE","$this",1461],["T_OBJECT_OPERATOR","->",1461],["T_STRING","limit",1461],["T_WHITESPACE"," ",1461],":",["T_WHITESPACE"," ",1461],["T_LNUMBER","999999",1461],")",";",["T_WHITESPACE","\n          ",1461],["T_VARIABLE","$offset",1462],["T_WHITESPACE"," ",1462],"=",["T_WHITESPACE"," ",1462],["T_STRING","intval",1462],"(","!",["T_EMPTY","empty",1462],"(",["T_VARIABLE","$this",1462],["T_OBJECT_OPERATOR","->",1462],["T_STRING","offset",1462],")",["T_WHITESPACE"," ",1462],"?",["T_WHITESPACE"," ",1462],["T_VARIABLE","$this",1462],["T_OBJECT_OPERATOR","->",1462],["T_STRING","offset",1462],["T_WHITESPACE"," ",1462],":",["T_WHITESPACE"," ",1462],["T_LNUMBER","0",1462],")",";",["T_WHITESPACE","\n          ",1462],["T_VARIABLE","$query",1463],["T_OBJECT_OPERATOR","->",1463],["T_STRING","range",1463],"(",["T_VARIABLE","$offset",1463],",",["T_WHITESPACE"," ",1463],["T_VARIABLE","$limit",1463],")",";",["T_WHITESPACE","\n        ",1463],"}",["T_WHITESPACE","\n\n        ",1464],["T_VARIABLE","$result",1466],["T_WHITESPACE"," ",1466],"=",["T_WHITESPACE"," ",1466],["T_VARIABLE","$query",1466],["T_OBJECT_OPERATOR","->",1466],["T_STRING","execute",1466],"(",")",";",["T_WHITESPACE","\n        ",1466],["T_VARIABLE","$result",1467],["T_OBJECT_OPERATOR","->",1467],["T_STRING","setFetchMode",1467],"(",["T_NS_SEPARATOR","\\",1467],["T_STRING","PDO",1467],["T_DOUBLE_COLON","::",1467],["T_STRING","FETCH_CLASS",1467],",",["T_WHITESPACE"," ",1467],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\views\\ResultRow'",1467],")",";",["T_WHITESPACE","\n\n        ",1467],["T_COMMENT","\/\/ Setup the result row objects.\n",1469],["T_WHITESPACE","        ",1470],["T_VARIABLE","$view",1470],["T_OBJECT_OPERATOR","->",1470],["T_STRING","result",1470],["T_WHITESPACE"," ",1470],"=",["T_WHITESPACE"," ",1470],["T_STRING","iterator_to_array",1470],"(",["T_VARIABLE","$result",1470],")",";",["T_WHITESPACE","\n        ",1470],["T_STRING","array_walk",1471],"(",["T_VARIABLE","$view",1471],["T_OBJECT_OPERATOR","->",1471],["T_STRING","result",1471],",",["T_WHITESPACE"," ",1471],["T_FUNCTION","function",1471],"(",["T_STRING","ResultRow",1471],["T_WHITESPACE"," ",1471],["T_VARIABLE","$row",1471],",",["T_WHITESPACE"," ",1471],["T_VARIABLE","$index",1471],")",["T_WHITESPACE"," ",1471],"{",["T_WHITESPACE","\n          ",1471],["T_VARIABLE","$row",1472],["T_OBJECT_OPERATOR","->",1472],["T_STRING","index",1472],["T_WHITESPACE"," ",1472],"=",["T_WHITESPACE"," ",1472],["T_VARIABLE","$index",1472],";",["T_WHITESPACE","\n        ",1472],"}",")",";",["T_WHITESPACE","\n\n        ",1473],["T_VARIABLE","$view",1475],["T_OBJECT_OPERATOR","->",1475],["T_STRING","pager",1475],["T_OBJECT_OPERATOR","->",1475],["T_STRING","postExecute",1475],"(",["T_VARIABLE","$view",1475],["T_OBJECT_OPERATOR","->",1475],["T_STRING","result",1475],")",";",["T_WHITESPACE","\n        ",1475],["T_VARIABLE","$view",1476],["T_OBJECT_OPERATOR","->",1476],["T_STRING","pager",1476],["T_OBJECT_OPERATOR","->",1476],["T_STRING","updatePageInfo",1476],"(",")",";",["T_WHITESPACE","\n        ",1476],["T_VARIABLE","$view",1477],["T_OBJECT_OPERATOR","->",1477],["T_STRING","total_rows",1477],["T_WHITESPACE"," ",1477],"=",["T_WHITESPACE"," ",1477],["T_VARIABLE","$view",1477],["T_OBJECT_OPERATOR","->",1477],["T_STRING","pager",1477],["T_OBJECT_OPERATOR","->",1477],["T_STRING","getTotalItems",1477],"(",")",";",["T_WHITESPACE","\n\n        ",1477],["T_COMMENT","\/\/ Load all entities contained in the results.\n",1479],["T_WHITESPACE","        ",1480],["T_VARIABLE","$this",1480],["T_OBJECT_OPERATOR","->",1480],["T_STRING","loadEntities",1480],"(",["T_VARIABLE","$view",1480],["T_OBJECT_OPERATOR","->",1480],["T_STRING","result",1480],")",";",["T_WHITESPACE","\n      ",1480],"}",["T_WHITESPACE","\n      ",1481],["T_CATCH","catch",1482],["T_WHITESPACE"," ",1482],"(",["T_STRING","DatabaseExceptionWrapper",1482],["T_WHITESPACE"," ",1482],["T_VARIABLE","$e",1482],")",["T_WHITESPACE"," ",1482],"{",["T_WHITESPACE","\n        ",1482],["T_VARIABLE","$view",1483],["T_OBJECT_OPERATOR","->",1483],["T_STRING","result",1483],["T_WHITESPACE"," ",1483],"=",["T_WHITESPACE"," ",1483],["T_ARRAY","array",1483],"(",")",";",["T_WHITESPACE","\n        ",1483],["T_IF","if",1484],["T_WHITESPACE"," ",1484],"(","!",["T_EMPTY","empty",1484],"(",["T_VARIABLE","$view",1484],["T_OBJECT_OPERATOR","->",1484],["T_STRING","live_preview",1484],")",")",["T_WHITESPACE"," ",1484],"{",["T_WHITESPACE","\n          ",1484],["T_STRING","drupal_set_message",1485],"(",["T_VARIABLE","$e",1485],["T_OBJECT_OPERATOR","->",1485],["T_STRING","getMessage",1485],"(",")",",",["T_WHITESPACE"," ",1485],["T_CONSTANT_ENCAPSED_STRING","'error'",1485],")",";",["T_WHITESPACE","\n        ",1485],"}",["T_WHITESPACE","\n        ",1486],["T_ELSE","else",1487],["T_WHITESPACE"," ",1487],"{",["T_WHITESPACE","\n          ",1487],["T_THROW","throw",1488],["T_WHITESPACE"," ",1488],["T_NEW","new",1488],["T_WHITESPACE"," ",1488],["T_STRING","DatabaseExceptionWrapper",1488],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Exception in ",1488],["T_CURLY_OPEN","{",1488],["T_VARIABLE","$view",1488],["T_OBJECT_OPERATOR","->",1488],["T_STRING","storage",1488],["T_OBJECT_OPERATOR","->",1488],["T_STRING","label",1488],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","[",1488],["T_CURLY_OPEN","{",1488],["T_VARIABLE","$view",1488],["T_OBJECT_OPERATOR","->",1488],["T_STRING","storage",1488],["T_OBJECT_OPERATOR","->",1488],["T_STRING","id",1488],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","]: ",1488],["T_CURLY_OPEN","{",1488],["T_VARIABLE","$e",1488],["T_OBJECT_OPERATOR","->",1488],["T_STRING","getMessage",1488],"(",")","}","\"",")",";",["T_WHITESPACE","\n        ",1488],"}",["T_WHITESPACE","\n      ",1489],"}",["T_WHITESPACE","\n\n    ",1490],"}",["T_WHITESPACE","\n    ",1492],["T_ELSE","else",1493],["T_WHITESPACE"," ",1493],"{",["T_WHITESPACE","\n      ",1493],["T_VARIABLE","$start",1494],["T_WHITESPACE"," ",1494],"=",["T_WHITESPACE"," ",1494],["T_STRING","microtime",1494],"(",["T_STRING","TRUE",1494],")",";",["T_WHITESPACE","\n    ",1494],"}",["T_WHITESPACE","\n    ",1495],["T_VARIABLE","$view",1496],["T_OBJECT_OPERATOR","->",1496],["T_STRING","execute_time",1496],["T_WHITESPACE"," ",1496],"=",["T_WHITESPACE"," ",1496],["T_STRING","microtime",1496],"(",["T_STRING","TRUE",1496],")",["T_WHITESPACE"," ",1496],"-",["T_WHITESPACE"," ",1496],["T_VARIABLE","$start",1496],";",["T_WHITESPACE","\n  ",1496],"}",["T_WHITESPACE","\n\n  ",1497],["T_DOC_COMMENT","\/**\n   * Loads all entities contained in the passed-in $results.\n   *.\n   * If the entity belongs to the base table, then it gets stored in\n   * $result->_entity. Otherwise, it gets stored in\n   * $result->_relationship_entities[$relationship_id];\n   *\n   * @param \\Drupal\\views\\ResultRow[] $results\n   *   The result of the SQL query.\n   *\/",1499],["T_WHITESPACE","\n  ",1508],["T_PUBLIC","public",1509],["T_WHITESPACE"," ",1509],["T_FUNCTION","function",1509],["T_WHITESPACE"," ",1509],["T_STRING","loadEntities",1509],"(","&",["T_VARIABLE","$results",1509],")",["T_WHITESPACE"," ",1509],"{",["T_WHITESPACE","\n    ",1509],["T_VARIABLE","$entity_information",1510],["T_WHITESPACE"," ",1510],"=",["T_WHITESPACE"," ",1510],["T_VARIABLE","$this",1510],["T_OBJECT_OPERATOR","->",1510],["T_STRING","getEntityTableInfo",1510],"(",")",";",["T_WHITESPACE","\n    ",1510],["T_COMMENT","\/\/ No entity tables found, nothing else to do here.\n",1511],["T_WHITESPACE","    ",1512],["T_IF","if",1512],["T_WHITESPACE"," ",1512],"(",["T_EMPTY","empty",1512],"(",["T_VARIABLE","$entity_information",1512],")",")",["T_WHITESPACE"," ",1512],"{",["T_WHITESPACE","\n      ",1512],["T_RETURN","return",1513],";",["T_WHITESPACE","\n    ",1513],"}",["T_WHITESPACE","\n\n    ",1514],["T_COMMENT","\/\/ Extract all entity types from entity_information.\n",1516],["T_WHITESPACE","    ",1517],["T_VARIABLE","$entity_types",1517],["T_WHITESPACE"," ",1517],"=",["T_WHITESPACE"," ",1517],["T_ARRAY","array",1517],"(",")",";",["T_WHITESPACE","\n    ",1517],["T_FOREACH","foreach",1518],["T_WHITESPACE"," ",1518],"(",["T_VARIABLE","$entity_information",1518],["T_WHITESPACE"," ",1518],["T_AS","as",1518],["T_WHITESPACE"," ",1518],["T_VARIABLE","$info",1518],")",["T_WHITESPACE"," ",1518],"{",["T_WHITESPACE","\n      ",1518],["T_VARIABLE","$entity_type",1519],["T_WHITESPACE"," ",1519],"=",["T_WHITESPACE"," ",1519],["T_VARIABLE","$info",1519],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",1519],"]",";",["T_WHITESPACE","\n      ",1519],["T_IF","if",1520],["T_WHITESPACE"," ",1520],"(","!",["T_ISSET","isset",1520],"(",["T_VARIABLE","$entity_types",1520],"[",["T_VARIABLE","$entity_type",1520],"]",")",")",["T_WHITESPACE"," ",1520],"{",["T_WHITESPACE","\n        ",1520],["T_VARIABLE","$entity_types",1521],"[",["T_VARIABLE","$entity_type",1521],"]",["T_WHITESPACE"," ",1521],"=",["T_WHITESPACE"," ",1521],["T_VARIABLE","$this",1521],["T_OBJECT_OPERATOR","->",1521],["T_STRING","entityTypeManager",1521],["T_OBJECT_OPERATOR","->",1521],["T_STRING","getDefinition",1521],"(",["T_VARIABLE","$entity_type",1521],")",";",["T_WHITESPACE","\n      ",1521],"}",["T_WHITESPACE","\n    ",1522],"}",["T_WHITESPACE","\n\n    ",1523],["T_COMMENT","\/\/ Assemble a list of entities to load.\n",1525],["T_WHITESPACE","    ",1526],["T_VARIABLE","$entity_ids_by_type",1526],["T_WHITESPACE"," ",1526],"=",["T_WHITESPACE"," ",1526],"[","]",";",["T_WHITESPACE","\n    ",1526],["T_VARIABLE","$revision_ids_by_type",1527],["T_WHITESPACE"," ",1527],"=",["T_WHITESPACE"," ",1527],"[","]",";",["T_WHITESPACE","\n    ",1527],["T_FOREACH","foreach",1528],["T_WHITESPACE"," ",1528],"(",["T_VARIABLE","$entity_information",1528],["T_WHITESPACE"," ",1528],["T_AS","as",1528],["T_WHITESPACE"," ",1528],["T_VARIABLE","$info",1528],")",["T_WHITESPACE"," ",1528],"{",["T_WHITESPACE","\n      ",1528],["T_VARIABLE","$relationship_id",1529],["T_WHITESPACE"," ",1529],"=",["T_WHITESPACE"," ",1529],["T_VARIABLE","$info",1529],"[",["T_CONSTANT_ENCAPSED_STRING","'relationship_id'",1529],"]",";",["T_WHITESPACE","\n      ",1529],["T_VARIABLE","$entity_type",1530],["T_WHITESPACE"," ",1530],"=",["T_WHITESPACE"," ",1530],["T_VARIABLE","$info",1530],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",1530],"]",";",["T_WHITESPACE","\n      ",1530],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_info *\/",1531],["T_WHITESPACE","\n      ",1531],["T_VARIABLE","$entity_info",1532],["T_WHITESPACE"," ",1532],"=",["T_WHITESPACE"," ",1532],["T_VARIABLE","$entity_types",1532],"[",["T_VARIABLE","$entity_type",1532],"]",";",["T_WHITESPACE","\n      ",1532],["T_VARIABLE","$revision",1533],["T_WHITESPACE"," ",1533],"=",["T_WHITESPACE"," ",1533],["T_VARIABLE","$info",1533],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",1533],"]",";",["T_WHITESPACE","\n      ",1533],["T_VARIABLE","$id_key",1534],["T_WHITESPACE"," ",1534],"=",["T_WHITESPACE"," ",1534],"!",["T_VARIABLE","$revision",1534],["T_WHITESPACE"," ",1534],"?",["T_WHITESPACE"," ",1534],["T_VARIABLE","$entity_info",1534],["T_OBJECT_OPERATOR","->",1534],["T_STRING","getKey",1534],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",1534],")",["T_WHITESPACE"," ",1534],":",["T_WHITESPACE"," ",1534],["T_VARIABLE","$entity_info",1534],["T_OBJECT_OPERATOR","->",1534],["T_STRING","getKey",1534],"(",["T_CONSTANT_ENCAPSED_STRING","'revision'",1534],")",";",["T_WHITESPACE","\n      ",1534],["T_VARIABLE","$id_alias",1535],["T_WHITESPACE"," ",1535],"=",["T_WHITESPACE"," ",1535],["T_VARIABLE","$this",1535],["T_OBJECT_OPERATOR","->",1535],["T_STRING","getFieldAlias",1535],"(",["T_VARIABLE","$info",1535],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",1535],"]",",",["T_WHITESPACE"," ",1535],["T_VARIABLE","$id_key",1535],")",";",["T_WHITESPACE","\n\n      ",1535],["T_FOREACH","foreach",1537],["T_WHITESPACE"," ",1537],"(",["T_VARIABLE","$results",1537],["T_WHITESPACE"," ",1537],["T_AS","as",1537],["T_WHITESPACE"," ",1537],["T_VARIABLE","$index",1537],["T_WHITESPACE"," ",1537],["T_DOUBLE_ARROW","=>",1537],["T_WHITESPACE"," ",1537],["T_VARIABLE","$result",1537],")",["T_WHITESPACE"," ",1537],"{",["T_WHITESPACE","\n        ",1537],["T_COMMENT","\/\/ Store the entity id if it was found.\n",1538],["T_WHITESPACE","        ",1539],["T_IF","if",1539],["T_WHITESPACE"," ",1539],"(",["T_ISSET","isset",1539],"(",["T_VARIABLE","$result",1539],["T_OBJECT_OPERATOR","->",1539],"{",["T_VARIABLE","$id_alias",1539],"}",")",["T_WHITESPACE"," ",1539],["T_BOOLEAN_AND","&&",1539],["T_WHITESPACE"," ",1539],["T_VARIABLE","$result",1539],["T_OBJECT_OPERATOR","->",1539],"{",["T_VARIABLE","$id_alias",1539],"}",["T_WHITESPACE"," ",1539],["T_IS_NOT_EQUAL","!=",1539],["T_WHITESPACE"," ",1539],["T_CONSTANT_ENCAPSED_STRING","''",1539],")",["T_WHITESPACE"," ",1539],"{",["T_WHITESPACE","\n          ",1539],["T_IF","if",1540],["T_WHITESPACE"," ",1540],"(",["T_VARIABLE","$revision",1540],")",["T_WHITESPACE"," ",1540],"{",["T_WHITESPACE","\n            ",1540],["T_VARIABLE","$revision_ids_by_type",1541],"[",["T_VARIABLE","$entity_type",1541],"]","[",["T_VARIABLE","$index",1541],"]","[",["T_VARIABLE","$relationship_id",1541],"]",["T_WHITESPACE"," ",1541],"=",["T_WHITESPACE"," ",1541],["T_VARIABLE","$result",1541],["T_OBJECT_OPERATOR","->",1541],["T_VARIABLE","$id_alias",1541],";",["T_WHITESPACE","\n          ",1541],"}",["T_WHITESPACE","\n          ",1542],["T_ELSE","else",1543],["T_WHITESPACE"," ",1543],"{",["T_WHITESPACE","\n            ",1543],["T_VARIABLE","$entity_ids_by_type",1544],"[",["T_VARIABLE","$entity_type",1544],"]","[",["T_VARIABLE","$index",1544],"]","[",["T_VARIABLE","$relationship_id",1544],"]",["T_WHITESPACE"," ",1544],"=",["T_WHITESPACE"," ",1544],["T_VARIABLE","$result",1544],["T_OBJECT_OPERATOR","->",1544],["T_VARIABLE","$id_alias",1544],";",["T_WHITESPACE","\n          ",1544],"}",["T_WHITESPACE","\n        ",1545],"}",["T_WHITESPACE","\n      ",1546],"}",["T_WHITESPACE","\n    ",1547],"}",["T_WHITESPACE","\n\n    ",1548],["T_COMMENT","\/\/ Load all entities and assign them to the correct result row.\n",1550],["T_WHITESPACE","    ",1551],["T_FOREACH","foreach",1551],["T_WHITESPACE"," ",1551],"(",["T_VARIABLE","$entity_ids_by_type",1551],["T_WHITESPACE"," ",1551],["T_AS","as",1551],["T_WHITESPACE"," ",1551],["T_VARIABLE","$entity_type",1551],["T_WHITESPACE"," ",1551],["T_DOUBLE_ARROW","=>",1551],["T_WHITESPACE"," ",1551],["T_VARIABLE","$ids",1551],")",["T_WHITESPACE"," ",1551],"{",["T_WHITESPACE","\n      ",1551],["T_VARIABLE","$entity_storage",1552],["T_WHITESPACE"," ",1552],"=",["T_WHITESPACE"," ",1552],["T_VARIABLE","$this",1552],["T_OBJECT_OPERATOR","->",1552],["T_STRING","entityTypeManager",1552],["T_OBJECT_OPERATOR","->",1552],["T_STRING","getStorage",1552],"(",["T_VARIABLE","$entity_type",1552],")",";",["T_WHITESPACE","\n      ",1552],["T_VARIABLE","$flat_ids",1553],["T_WHITESPACE"," ",1553],"=",["T_WHITESPACE"," ",1553],["T_STRING","iterator_to_array",1553],"(",["T_NEW","new",1553],["T_WHITESPACE"," ",1553],["T_NS_SEPARATOR","\\",1553],["T_STRING","RecursiveIteratorIterator",1553],"(",["T_NEW","new",1553],["T_WHITESPACE"," ",1553],["T_NS_SEPARATOR","\\",1553],["T_STRING","RecursiveArrayIterator",1553],"(",["T_VARIABLE","$ids",1553],")",")",",",["T_WHITESPACE"," ",1553],["T_STRING","FALSE",1553],")",";",["T_WHITESPACE","\n\n      ",1553],["T_VARIABLE","$entities",1555],["T_WHITESPACE"," ",1555],"=",["T_WHITESPACE"," ",1555],["T_VARIABLE","$entity_storage",1555],["T_OBJECT_OPERATOR","->",1555],["T_STRING","loadMultiple",1555],"(",["T_STRING","array_unique",1555],"(",["T_VARIABLE","$flat_ids",1555],")",")",";",["T_WHITESPACE","\n      ",1555],["T_VARIABLE","$results",1556],["T_WHITESPACE"," ",1556],"=",["T_WHITESPACE"," ",1556],["T_VARIABLE","$this",1556],["T_OBJECT_OPERATOR","->",1556],["T_STRING","assignEntitiesToResult",1556],"(",["T_VARIABLE","$ids",1556],",",["T_WHITESPACE"," ",1556],["T_VARIABLE","$entities",1556],",",["T_WHITESPACE"," ",1556],["T_VARIABLE","$results",1556],")",";",["T_WHITESPACE","\n    ",1556],"}",["T_WHITESPACE","\n\n    ",1557],["T_COMMENT","\/\/ Now load all revisions.\n",1559],["T_WHITESPACE","    ",1560],["T_FOREACH","foreach",1560],["T_WHITESPACE"," ",1560],"(",["T_VARIABLE","$revision_ids_by_type",1560],["T_WHITESPACE"," ",1560],["T_AS","as",1560],["T_WHITESPACE"," ",1560],["T_VARIABLE","$entity_type",1560],["T_WHITESPACE"," ",1560],["T_DOUBLE_ARROW","=>",1560],["T_WHITESPACE"," ",1560],["T_VARIABLE","$revision_ids",1560],")",["T_WHITESPACE"," ",1560],"{",["T_WHITESPACE","\n      ",1560],["T_VARIABLE","$entity_storage",1561],["T_WHITESPACE"," ",1561],"=",["T_WHITESPACE"," ",1561],["T_VARIABLE","$this",1561],["T_OBJECT_OPERATOR","->",1561],["T_STRING","entityTypeManager",1561],["T_OBJECT_OPERATOR","->",1561],["T_STRING","getStorage",1561],"(",["T_VARIABLE","$entity_type",1561],")",";",["T_WHITESPACE","\n      ",1561],["T_VARIABLE","$entities",1562],["T_WHITESPACE"," ",1562],"=",["T_WHITESPACE"," ",1562],"[","]",";",["T_WHITESPACE","\n\n      ",1562],["T_FOREACH","foreach",1564],["T_WHITESPACE"," ",1564],"(",["T_VARIABLE","$revision_ids",1564],["T_WHITESPACE"," ",1564],["T_AS","as",1564],["T_WHITESPACE"," ",1564],["T_VARIABLE","$index",1564],["T_WHITESPACE"," ",1564],["T_DOUBLE_ARROW","=>",1564],["T_WHITESPACE"," ",1564],["T_VARIABLE","$revision_id_by_relationship",1564],")",["T_WHITESPACE"," ",1564],"{",["T_WHITESPACE","\n        ",1564],["T_FOREACH","foreach",1565],["T_WHITESPACE"," ",1565],"(",["T_VARIABLE","$revision_id_by_relationship",1565],["T_WHITESPACE"," ",1565],["T_AS","as",1565],["T_WHITESPACE"," ",1565],["T_VARIABLE","$revision",1565],["T_WHITESPACE"," ",1565],["T_DOUBLE_ARROW","=>",1565],["T_WHITESPACE"," ",1565],["T_VARIABLE","$revision_id",1565],")",["T_WHITESPACE"," ",1565],"{",["T_WHITESPACE","\n          ",1565],["T_COMMENT","\/\/ Drupal core currently has no way to load multiple revisions.\n",1566],["T_WHITESPACE","          ",1567],["T_VARIABLE","$entity",1567],["T_WHITESPACE"," ",1567],"=",["T_WHITESPACE"," ",1567],["T_VARIABLE","$entity_storage",1567],["T_OBJECT_OPERATOR","->",1567],["T_STRING","loadRevision",1567],"(",["T_VARIABLE","$revision_id",1567],")",";",["T_WHITESPACE","\n          ",1567],["T_VARIABLE","$entities",1568],"[",["T_VARIABLE","$revision_id",1568],"]",["T_WHITESPACE"," ",1568],"=",["T_WHITESPACE"," ",1568],["T_VARIABLE","$entity",1568],";",["T_WHITESPACE","\n        ",1568],"}",["T_WHITESPACE","\n      ",1569],"}",["T_WHITESPACE","\n\n      ",1570],["T_VARIABLE","$results",1572],["T_WHITESPACE"," ",1572],"=",["T_WHITESPACE"," ",1572],["T_VARIABLE","$this",1572],["T_OBJECT_OPERATOR","->",1572],["T_STRING","assignEntitiesToResult",1572],"(",["T_VARIABLE","$revision_ids",1572],",",["T_WHITESPACE"," ",1572],["T_VARIABLE","$entities",1572],",",["T_WHITESPACE"," ",1572],["T_VARIABLE","$results",1572],")",";",["T_WHITESPACE","\n    ",1572],"}",["T_WHITESPACE","\n  ",1573],"}",["T_WHITESPACE","\n\n  ",1574],["T_DOC_COMMENT","\/**\n   * Sets entities onto the view result row objects.\n   *\n   * This method takes into account the relationship in which the entity was\n   * needed in the first place.\n   *\n   * @param mixed[][] $ids\n   *   A two dimensional array of identifiers (entity ID \/ revision ID) keyed by\n   *   relationship.\n   * @param \\Drupal\\Core\\Entity\\EntityInterface[] $entities\n   *   An array of entities keyed by their identified (entity ID \/ revision ID).\n   * @param \\Drupal\\views\\ResultRow[] $results\n   *   The entire views result.\n   *\n   * @return \\Drupal\\views\\ResultRow[]\n   *   The changed views results.\n   *\/",1576],["T_WHITESPACE","\n  ",1592],["T_PROTECTED","protected",1593],["T_WHITESPACE"," ",1593],["T_FUNCTION","function",1593],["T_WHITESPACE"," ",1593],["T_STRING","assignEntitiesToResult",1593],"(",["T_VARIABLE","$ids",1593],",",["T_WHITESPACE"," ",1593],["T_ARRAY","array",1593],["T_WHITESPACE"," ",1593],["T_VARIABLE","$entities",1593],",",["T_WHITESPACE"," ",1593],["T_ARRAY","array",1593],["T_WHITESPACE"," ",1593],["T_VARIABLE","$results",1593],")",["T_WHITESPACE"," ",1593],"{",["T_WHITESPACE","\n    ",1593],["T_FOREACH","foreach",1594],["T_WHITESPACE"," ",1594],"(",["T_VARIABLE","$ids",1594],["T_WHITESPACE"," ",1594],["T_AS","as",1594],["T_WHITESPACE"," ",1594],["T_VARIABLE","$index",1594],["T_WHITESPACE"," ",1594],["T_DOUBLE_ARROW","=>",1594],["T_WHITESPACE"," ",1594],["T_VARIABLE","$relationships",1594],")",["T_WHITESPACE"," ",1594],"{",["T_WHITESPACE","\n      ",1594],["T_FOREACH","foreach",1595],["T_WHITESPACE"," ",1595],"(",["T_VARIABLE","$relationships",1595],["T_WHITESPACE"," ",1595],["T_AS","as",1595],["T_WHITESPACE"," ",1595],["T_VARIABLE","$relationship_id",1595],["T_WHITESPACE"," ",1595],["T_DOUBLE_ARROW","=>",1595],["T_WHITESPACE"," ",1595],["T_VARIABLE","$id",1595],")",["T_WHITESPACE"," ",1595],"{",["T_WHITESPACE","\n        ",1595],["T_IF","if",1596],["T_WHITESPACE"," ",1596],"(",["T_ISSET","isset",1596],"(",["T_VARIABLE","$entities",1596],"[",["T_VARIABLE","$id",1596],"]",")",")",["T_WHITESPACE"," ",1596],"{",["T_WHITESPACE","\n          ",1596],["T_VARIABLE","$entity",1597],["T_WHITESPACE"," ",1597],"=",["T_WHITESPACE"," ",1597],["T_VARIABLE","$entities",1597],"[",["T_VARIABLE","$id",1597],"]",";",["T_WHITESPACE","\n        ",1597],"}",["T_WHITESPACE","\n        ",1598],["T_ELSE","else",1599],["T_WHITESPACE"," ",1599],"{",["T_WHITESPACE","\n          ",1599],["T_VARIABLE","$entity",1600],["T_WHITESPACE"," ",1600],"=",["T_WHITESPACE"," ",1600],["T_STRING","NULL",1600],";",["T_WHITESPACE","\n        ",1600],"}",["T_WHITESPACE","\n\n        ",1601],["T_IF","if",1603],["T_WHITESPACE"," ",1603],"(",["T_VARIABLE","$relationship_id",1603],["T_WHITESPACE"," ",1603],["T_IS_EQUAL","==",1603],["T_WHITESPACE"," ",1603],["T_CONSTANT_ENCAPSED_STRING","'none'",1603],")",["T_WHITESPACE"," ",1603],"{",["T_WHITESPACE","\n          ",1603],["T_VARIABLE","$results",1604],"[",["T_VARIABLE","$index",1604],"]",["T_OBJECT_OPERATOR","->",1604],["T_STRING","_entity",1604],["T_WHITESPACE"," ",1604],"=",["T_WHITESPACE"," ",1604],["T_VARIABLE","$entity",1604],";",["T_WHITESPACE","\n        ",1604],"}",["T_WHITESPACE","\n        ",1605],["T_ELSE","else",1606],["T_WHITESPACE"," ",1606],"{",["T_WHITESPACE","\n          ",1606],["T_VARIABLE","$results",1607],"[",["T_VARIABLE","$index",1607],"]",["T_OBJECT_OPERATOR","->",1607],["T_STRING","_relationship_entities",1607],"[",["T_VARIABLE","$relationship_id",1607],"]",["T_WHITESPACE"," ",1607],"=",["T_WHITESPACE"," ",1607],["T_VARIABLE","$entity",1607],";",["T_WHITESPACE","\n        ",1607],"}",["T_WHITESPACE","\n      ",1608],"}",["T_WHITESPACE","\n    ",1609],"}",["T_WHITESPACE","\n    ",1610],["T_RETURN","return",1611],["T_WHITESPACE"," ",1611],["T_VARIABLE","$results",1611],";",["T_WHITESPACE","\n  ",1611],"}",["T_WHITESPACE","\n\n  ",1612],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",1614],["T_WHITESPACE","\n  ",1616],["T_PUBLIC","public",1617],["T_WHITESPACE"," ",1617],["T_FUNCTION","function",1617],["T_WHITESPACE"," ",1617],["T_STRING","getCacheTags",1617],"(",")",["T_WHITESPACE"," ",1617],"{",["T_WHITESPACE","\n    ",1617],["T_VARIABLE","$tags",1618],["T_WHITESPACE"," ",1618],"=",["T_WHITESPACE"," ",1618],"[","]",";",["T_WHITESPACE","\n    ",1618],["T_COMMENT","\/\/ Add cache tags for each row, if there is an entity associated with it.\n",1619],["T_WHITESPACE","    ",1620],["T_IF","if",1620],["T_WHITESPACE"," ",1620],"(","!",["T_VARIABLE","$this",1620],["T_OBJECT_OPERATOR","->",1620],["T_STRING","hasAggregate",1620],")",["T_WHITESPACE"," ",1620],"{",["T_WHITESPACE","\n      ",1620],["T_FOREACH","foreach",1621],["T_WHITESPACE"," ",1621],"(",["T_VARIABLE","$this",1621],["T_OBJECT_OPERATOR","->",1621],["T_STRING","getAllEntities",1621],"(",")",["T_WHITESPACE"," ",1621],["T_AS","as",1621],["T_WHITESPACE"," ",1621],["T_VARIABLE","$entity",1621],")",["T_WHITESPACE"," ",1621],"{",["T_WHITESPACE","\n        ",1621],["T_VARIABLE","$tags",1622],["T_WHITESPACE"," ",1622],"=",["T_WHITESPACE"," ",1622],["T_STRING","Cache",1622],["T_DOUBLE_COLON","::",1622],["T_STRING","mergeTags",1622],"(",["T_VARIABLE","$entity",1622],["T_OBJECT_OPERATOR","->",1622],["T_STRING","getCacheTags",1622],"(",")",",",["T_WHITESPACE"," ",1622],["T_VARIABLE","$tags",1622],")",";",["T_WHITESPACE","\n      ",1622],"}",["T_WHITESPACE","\n    ",1623],"}",["T_WHITESPACE","\n\n    ",1624],["T_RETURN","return",1626],["T_WHITESPACE"," ",1626],["T_VARIABLE","$tags",1626],";",["T_WHITESPACE","\n  ",1626],"}",["T_WHITESPACE","\n\n  ",1627],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",1629],["T_WHITESPACE","\n  ",1631],["T_PUBLIC","public",1632],["T_WHITESPACE"," ",1632],["T_FUNCTION","function",1632],["T_WHITESPACE"," ",1632],["T_STRING","getCacheMaxAge",1632],"(",")",["T_WHITESPACE"," ",1632],"{",["T_WHITESPACE","\n    ",1632],["T_VARIABLE","$max_age",1633],["T_WHITESPACE"," ",1633],"=",["T_WHITESPACE"," ",1633],["T_STRING","parent",1633],["T_DOUBLE_COLON","::",1633],["T_STRING","getCacheMaxAge",1633],"(",")",";",["T_WHITESPACE","\n    ",1633],["T_FOREACH","foreach",1634],["T_WHITESPACE"," ",1634],"(",["T_VARIABLE","$this",1634],["T_OBJECT_OPERATOR","->",1634],["T_STRING","getAllEntities",1634],"(",")",["T_WHITESPACE"," ",1634],["T_AS","as",1634],["T_WHITESPACE"," ",1634],["T_VARIABLE","$entity",1634],")",["T_WHITESPACE"," ",1634],"{",["T_WHITESPACE","\n      ",1634],["T_VARIABLE","$max_age",1635],["T_WHITESPACE"," ",1635],"=",["T_WHITESPACE"," ",1635],["T_STRING","Cache",1635],["T_DOUBLE_COLON","::",1635],["T_STRING","mergeMaxAges",1635],"(",["T_VARIABLE","$max_age",1635],",",["T_WHITESPACE"," ",1635],["T_VARIABLE","$entity",1635],["T_OBJECT_OPERATOR","->",1635],["T_STRING","getCacheMaxAge",1635],"(",")",")",";",["T_WHITESPACE","\n    ",1635],"}",["T_WHITESPACE","\n\n    ",1636],["T_RETURN","return",1638],["T_WHITESPACE"," ",1638],["T_VARIABLE","$max_age",1638],";",["T_WHITESPACE","\n  ",1638],"}",["T_WHITESPACE","\n\n  ",1639],["T_DOC_COMMENT","\/**\n   * Gets all the involved entities of the view.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface[]\n   *\/",1641],["T_WHITESPACE","\n  ",1645],["T_PROTECTED","protected",1646],["T_WHITESPACE"," ",1646],["T_FUNCTION","function",1646],["T_WHITESPACE"," ",1646],["T_STRING","getAllEntities",1646],"(",")",["T_WHITESPACE"," ",1646],"{",["T_WHITESPACE","\n    ",1646],["T_VARIABLE","$entities",1647],["T_WHITESPACE"," ",1647],"=",["T_WHITESPACE"," ",1647],"[","]",";",["T_WHITESPACE","\n    ",1647],["T_FOREACH","foreach",1648],["T_WHITESPACE"," ",1648],"(",["T_VARIABLE","$this",1648],["T_OBJECT_OPERATOR","->",1648],["T_STRING","view",1648],["T_OBJECT_OPERATOR","->",1648],["T_STRING","result",1648],["T_WHITESPACE"," ",1648],["T_AS","as",1648],["T_WHITESPACE"," ",1648],["T_VARIABLE","$row",1648],")",["T_WHITESPACE"," ",1648],"{",["T_WHITESPACE","\n      ",1648],["T_IF","if",1649],["T_WHITESPACE"," ",1649],"(",["T_VARIABLE","$row",1649],["T_OBJECT_OPERATOR","->",1649],["T_STRING","_entity",1649],")",["T_WHITESPACE"," ",1649],"{",["T_WHITESPACE","\n        ",1649],["T_VARIABLE","$entities",1650],"[","]",["T_WHITESPACE"," ",1650],"=",["T_WHITESPACE"," ",1650],["T_VARIABLE","$row",1650],["T_OBJECT_OPERATOR","->",1650],["T_STRING","_entity",1650],";",["T_WHITESPACE","\n      ",1650],"}",["T_WHITESPACE","\n      ",1651],["T_FOREACH","foreach",1652],["T_WHITESPACE"," ",1652],"(",["T_VARIABLE","$row",1652],["T_OBJECT_OPERATOR","->",1652],["T_STRING","_relationship_entities",1652],["T_WHITESPACE"," ",1652],["T_AS","as",1652],["T_WHITESPACE"," ",1652],["T_VARIABLE","$entity",1652],")",["T_WHITESPACE"," ",1652],"{",["T_WHITESPACE","\n        ",1652],["T_VARIABLE","$entities",1653],"[","]",["T_WHITESPACE"," ",1653],"=",["T_WHITESPACE"," ",1653],["T_VARIABLE","$entity",1653],";",["T_WHITESPACE","\n      ",1653],"}",["T_WHITESPACE","\n    ",1654],"}",["T_WHITESPACE","\n\n    ",1655],["T_RETURN","return",1657],["T_WHITESPACE"," ",1657],["T_VARIABLE","$entities",1657],";",["T_WHITESPACE","\n  ",1657],"}",["T_WHITESPACE","\n\n  ",1658],["T_PUBLIC","public",1660],["T_WHITESPACE"," ",1660],["T_FUNCTION","function",1660],["T_WHITESPACE"," ",1660],["T_STRING","addSignature",1660],"(",["T_STRING","ViewExecutable",1660],["T_WHITESPACE"," ",1660],["T_VARIABLE","$view",1660],")",["T_WHITESPACE"," ",1660],"{",["T_WHITESPACE","\n    ",1660],["T_VARIABLE","$view",1661],["T_OBJECT_OPERATOR","->",1661],["T_STRING","query",1661],["T_OBJECT_OPERATOR","->",1661],["T_STRING","addField",1661],"(",["T_STRING","NULL",1661],",",["T_WHITESPACE"," ",1661],["T_CONSTANT_ENCAPSED_STRING","\"'\"",1661],["T_WHITESPACE"," ",1661],".",["T_WHITESPACE"," ",1661],["T_VARIABLE","$view",1661],["T_OBJECT_OPERATOR","->",1661],["T_STRING","storage",1661],["T_OBJECT_OPERATOR","->",1661],["T_STRING","id",1661],"(",")",["T_WHITESPACE"," ",1661],".",["T_WHITESPACE"," ",1661],["T_CONSTANT_ENCAPSED_STRING","':'",1661],["T_WHITESPACE"," ",1661],".",["T_WHITESPACE"," ",1661],["T_VARIABLE","$view",1661],["T_OBJECT_OPERATOR","->",1661],["T_STRING","current_display",1661],["T_WHITESPACE"," ",1661],".",["T_WHITESPACE"," ",1661],["T_CONSTANT_ENCAPSED_STRING","\"'\"",1661],",",["T_WHITESPACE"," ",1661],["T_CONSTANT_ENCAPSED_STRING","'view_name'",1661],")",";",["T_WHITESPACE","\n  ",1661],"}",["T_WHITESPACE","\n\n  ",1662],["T_PUBLIC","public",1664],["T_WHITESPACE"," ",1664],["T_FUNCTION","function",1664],["T_WHITESPACE"," ",1664],["T_STRING","getAggregationInfo",1664],"(",")",["T_WHITESPACE"," ",1664],"{",["T_WHITESPACE","\n    ",1664],["T_COMMENT","\/\/ @todo -- need a way to get database specific and customized aggregation\n",1665],["T_WHITESPACE","    ",1666],["T_COMMENT","\/\/ functions into here.\n",1666],["T_WHITESPACE","    ",1667],["T_RETURN","return",1667],["T_WHITESPACE"," ",1667],["T_ARRAY","array",1667],"(",["T_WHITESPACE","\n      ",1667],["T_CONSTANT_ENCAPSED_STRING","'group'",1668],["T_WHITESPACE"," ",1668],["T_DOUBLE_ARROW","=>",1668],["T_WHITESPACE"," ",1668],["T_ARRAY","array",1668],"(",["T_WHITESPACE","\n        ",1668],["T_CONSTANT_ENCAPSED_STRING","'title'",1669],["T_WHITESPACE"," ",1669],["T_DOUBLE_ARROW","=>",1669],["T_WHITESPACE"," ",1669],["T_VARIABLE","$this",1669],["T_OBJECT_OPERATOR","->",1669],["T_STRING","t",1669],"(",["T_CONSTANT_ENCAPSED_STRING","'Group results together'",1669],")",",",["T_WHITESPACE","\n        ",1669],["T_CONSTANT_ENCAPSED_STRING","'is aggregate'",1670],["T_WHITESPACE"," ",1670],["T_DOUBLE_ARROW","=>",1670],["T_WHITESPACE"," ",1670],["T_STRING","FALSE",1670],",",["T_WHITESPACE","\n      ",1670],")",",",["T_WHITESPACE","\n      ",1671],["T_CONSTANT_ENCAPSED_STRING","'count'",1672],["T_WHITESPACE"," ",1672],["T_DOUBLE_ARROW","=>",1672],["T_WHITESPACE"," ",1672],["T_ARRAY","array",1672],"(",["T_WHITESPACE","\n        ",1672],["T_CONSTANT_ENCAPSED_STRING","'title'",1673],["T_WHITESPACE"," ",1673],["T_DOUBLE_ARROW","=>",1673],["T_WHITESPACE"," ",1673],["T_VARIABLE","$this",1673],["T_OBJECT_OPERATOR","->",1673],["T_STRING","t",1673],"(",["T_CONSTANT_ENCAPSED_STRING","'Count'",1673],")",",",["T_WHITESPACE","\n        ",1673],["T_CONSTANT_ENCAPSED_STRING","'method'",1674],["T_WHITESPACE"," ",1674],["T_DOUBLE_ARROW","=>",1674],["T_WHITESPACE"," ",1674],["T_CONSTANT_ENCAPSED_STRING","'aggregationMethodSimple'",1674],",",["T_WHITESPACE","\n        ",1674],["T_CONSTANT_ENCAPSED_STRING","'handler'",1675],["T_WHITESPACE"," ",1675],["T_DOUBLE_ARROW","=>",1675],["T_WHITESPACE"," ",1675],["T_ARRAY","array",1675],"(",["T_WHITESPACE","\n          ",1675],["T_CONSTANT_ENCAPSED_STRING","'argument'",1676],["T_WHITESPACE"," ",1676],["T_DOUBLE_ARROW","=>",1676],["T_WHITESPACE"," ",1676],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1676],",",["T_WHITESPACE","\n          ",1676],["T_CONSTANT_ENCAPSED_STRING","'field'",1677],["T_WHITESPACE"," ",1677],["T_DOUBLE_ARROW","=>",1677],["T_WHITESPACE"," ",1677],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1677],",",["T_WHITESPACE","\n          ",1677],["T_CONSTANT_ENCAPSED_STRING","'filter'",1678],["T_WHITESPACE"," ",1678],["T_DOUBLE_ARROW","=>",1678],["T_WHITESPACE"," ",1678],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1678],",",["T_WHITESPACE","\n          ",1678],["T_CONSTANT_ENCAPSED_STRING","'sort'",1679],["T_WHITESPACE"," ",1679],["T_DOUBLE_ARROW","=>",1679],["T_WHITESPACE"," ",1679],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1679],",",["T_WHITESPACE","\n        ",1679],")",",",["T_WHITESPACE","\n      ",1680],")",",",["T_WHITESPACE","\n      ",1681],["T_CONSTANT_ENCAPSED_STRING","'count_distinct'",1682],["T_WHITESPACE"," ",1682],["T_DOUBLE_ARROW","=>",1682],["T_WHITESPACE"," ",1682],["T_ARRAY","array",1682],"(",["T_WHITESPACE","\n        ",1682],["T_CONSTANT_ENCAPSED_STRING","'title'",1683],["T_WHITESPACE"," ",1683],["T_DOUBLE_ARROW","=>",1683],["T_WHITESPACE"," ",1683],["T_VARIABLE","$this",1683],["T_OBJECT_OPERATOR","->",1683],["T_STRING","t",1683],"(",["T_CONSTANT_ENCAPSED_STRING","'Count DISTINCT'",1683],")",",",["T_WHITESPACE","\n        ",1683],["T_CONSTANT_ENCAPSED_STRING","'method'",1684],["T_WHITESPACE"," ",1684],["T_DOUBLE_ARROW","=>",1684],["T_WHITESPACE"," ",1684],["T_CONSTANT_ENCAPSED_STRING","'aggregationMethodDistinct'",1684],",",["T_WHITESPACE","\n        ",1684],["T_CONSTANT_ENCAPSED_STRING","'handler'",1685],["T_WHITESPACE"," ",1685],["T_DOUBLE_ARROW","=>",1685],["T_WHITESPACE"," ",1685],["T_ARRAY","array",1685],"(",["T_WHITESPACE","\n          ",1685],["T_CONSTANT_ENCAPSED_STRING","'argument'",1686],["T_WHITESPACE"," ",1686],["T_DOUBLE_ARROW","=>",1686],["T_WHITESPACE"," ",1686],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1686],",",["T_WHITESPACE","\n          ",1686],["T_CONSTANT_ENCAPSED_STRING","'field'",1687],["T_WHITESPACE"," ",1687],["T_DOUBLE_ARROW","=>",1687],["T_WHITESPACE"," ",1687],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1687],",",["T_WHITESPACE","\n          ",1687],["T_CONSTANT_ENCAPSED_STRING","'filter'",1688],["T_WHITESPACE"," ",1688],["T_DOUBLE_ARROW","=>",1688],["T_WHITESPACE"," ",1688],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1688],",",["T_WHITESPACE","\n          ",1688],["T_CONSTANT_ENCAPSED_STRING","'sort'",1689],["T_WHITESPACE"," ",1689],["T_DOUBLE_ARROW","=>",1689],["T_WHITESPACE"," ",1689],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1689],",",["T_WHITESPACE","\n        ",1689],")",",",["T_WHITESPACE","\n      ",1690],")",",",["T_WHITESPACE","\n      ",1691],["T_CONSTANT_ENCAPSED_STRING","'sum'",1692],["T_WHITESPACE"," ",1692],["T_DOUBLE_ARROW","=>",1692],["T_WHITESPACE"," ",1692],["T_ARRAY","array",1692],"(",["T_WHITESPACE","\n        ",1692],["T_CONSTANT_ENCAPSED_STRING","'title'",1693],["T_WHITESPACE"," ",1693],["T_DOUBLE_ARROW","=>",1693],["T_WHITESPACE"," ",1693],["T_VARIABLE","$this",1693],["T_OBJECT_OPERATOR","->",1693],["T_STRING","t",1693],"(",["T_CONSTANT_ENCAPSED_STRING","'Sum'",1693],")",",",["T_WHITESPACE","\n        ",1693],["T_CONSTANT_ENCAPSED_STRING","'method'",1694],["T_WHITESPACE"," ",1694],["T_DOUBLE_ARROW","=>",1694],["T_WHITESPACE"," ",1694],["T_CONSTANT_ENCAPSED_STRING","'aggregationMethodSimple'",1694],",",["T_WHITESPACE","\n        ",1694],["T_CONSTANT_ENCAPSED_STRING","'handler'",1695],["T_WHITESPACE"," ",1695],["T_DOUBLE_ARROW","=>",1695],["T_WHITESPACE"," ",1695],["T_ARRAY","array",1695],"(",["T_WHITESPACE","\n          ",1695],["T_CONSTANT_ENCAPSED_STRING","'argument'",1696],["T_WHITESPACE"," ",1696],["T_DOUBLE_ARROW","=>",1696],["T_WHITESPACE"," ",1696],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1696],",",["T_WHITESPACE","\n          ",1696],["T_CONSTANT_ENCAPSED_STRING","'field'",1697],["T_WHITESPACE"," ",1697],["T_DOUBLE_ARROW","=>",1697],["T_WHITESPACE"," ",1697],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1697],",",["T_WHITESPACE","\n          ",1697],["T_CONSTANT_ENCAPSED_STRING","'filter'",1698],["T_WHITESPACE"," ",1698],["T_DOUBLE_ARROW","=>",1698],["T_WHITESPACE"," ",1698],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1698],",",["T_WHITESPACE","\n          ",1698],["T_CONSTANT_ENCAPSED_STRING","'sort'",1699],["T_WHITESPACE"," ",1699],["T_DOUBLE_ARROW","=>",1699],["T_WHITESPACE"," ",1699],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1699],",",["T_WHITESPACE","\n        ",1699],")",",",["T_WHITESPACE","\n      ",1700],")",",",["T_WHITESPACE","\n      ",1701],["T_CONSTANT_ENCAPSED_STRING","'avg'",1702],["T_WHITESPACE"," ",1702],["T_DOUBLE_ARROW","=>",1702],["T_WHITESPACE"," ",1702],["T_ARRAY","array",1702],"(",["T_WHITESPACE","\n        ",1702],["T_CONSTANT_ENCAPSED_STRING","'title'",1703],["T_WHITESPACE"," ",1703],["T_DOUBLE_ARROW","=>",1703],["T_WHITESPACE"," ",1703],["T_VARIABLE","$this",1703],["T_OBJECT_OPERATOR","->",1703],["T_STRING","t",1703],"(",["T_CONSTANT_ENCAPSED_STRING","'Average'",1703],")",",",["T_WHITESPACE","\n        ",1703],["T_CONSTANT_ENCAPSED_STRING","'method'",1704],["T_WHITESPACE"," ",1704],["T_DOUBLE_ARROW","=>",1704],["T_WHITESPACE"," ",1704],["T_CONSTANT_ENCAPSED_STRING","'aggregationMethodSimple'",1704],",",["T_WHITESPACE","\n        ",1704],["T_CONSTANT_ENCAPSED_STRING","'handler'",1705],["T_WHITESPACE"," ",1705],["T_DOUBLE_ARROW","=>",1705],["T_WHITESPACE"," ",1705],["T_ARRAY","array",1705],"(",["T_WHITESPACE","\n          ",1705],["T_CONSTANT_ENCAPSED_STRING","'argument'",1706],["T_WHITESPACE"," ",1706],["T_DOUBLE_ARROW","=>",1706],["T_WHITESPACE"," ",1706],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1706],",",["T_WHITESPACE","\n          ",1706],["T_CONSTANT_ENCAPSED_STRING","'field'",1707],["T_WHITESPACE"," ",1707],["T_DOUBLE_ARROW","=>",1707],["T_WHITESPACE"," ",1707],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1707],",",["T_WHITESPACE","\n          ",1707],["T_CONSTANT_ENCAPSED_STRING","'filter'",1708],["T_WHITESPACE"," ",1708],["T_DOUBLE_ARROW","=>",1708],["T_WHITESPACE"," ",1708],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1708],",",["T_WHITESPACE","\n          ",1708],["T_CONSTANT_ENCAPSED_STRING","'sort'",1709],["T_WHITESPACE"," ",1709],["T_DOUBLE_ARROW","=>",1709],["T_WHITESPACE"," ",1709],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1709],",",["T_WHITESPACE","\n        ",1709],")",",",["T_WHITESPACE","\n      ",1710],")",",",["T_WHITESPACE","\n      ",1711],["T_CONSTANT_ENCAPSED_STRING","'min'",1712],["T_WHITESPACE"," ",1712],["T_DOUBLE_ARROW","=>",1712],["T_WHITESPACE"," ",1712],["T_ARRAY","array",1712],"(",["T_WHITESPACE","\n        ",1712],["T_CONSTANT_ENCAPSED_STRING","'title'",1713],["T_WHITESPACE"," ",1713],["T_DOUBLE_ARROW","=>",1713],["T_WHITESPACE"," ",1713],["T_VARIABLE","$this",1713],["T_OBJECT_OPERATOR","->",1713],["T_STRING","t",1713],"(",["T_CONSTANT_ENCAPSED_STRING","'Minimum'",1713],")",",",["T_WHITESPACE","\n        ",1713],["T_CONSTANT_ENCAPSED_STRING","'method'",1714],["T_WHITESPACE"," ",1714],["T_DOUBLE_ARROW","=>",1714],["T_WHITESPACE"," ",1714],["T_CONSTANT_ENCAPSED_STRING","'aggregationMethodSimple'",1714],",",["T_WHITESPACE","\n        ",1714],["T_CONSTANT_ENCAPSED_STRING","'handler'",1715],["T_WHITESPACE"," ",1715],["T_DOUBLE_ARROW","=>",1715],["T_WHITESPACE"," ",1715],["T_ARRAY","array",1715],"(",["T_WHITESPACE","\n          ",1715],["T_CONSTANT_ENCAPSED_STRING","'argument'",1716],["T_WHITESPACE"," ",1716],["T_DOUBLE_ARROW","=>",1716],["T_WHITESPACE"," ",1716],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1716],",",["T_WHITESPACE","\n          ",1716],["T_CONSTANT_ENCAPSED_STRING","'field'",1717],["T_WHITESPACE"," ",1717],["T_DOUBLE_ARROW","=>",1717],["T_WHITESPACE"," ",1717],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1717],",",["T_WHITESPACE","\n          ",1717],["T_CONSTANT_ENCAPSED_STRING","'filter'",1718],["T_WHITESPACE"," ",1718],["T_DOUBLE_ARROW","=>",1718],["T_WHITESPACE"," ",1718],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1718],",",["T_WHITESPACE","\n          ",1718],["T_CONSTANT_ENCAPSED_STRING","'sort'",1719],["T_WHITESPACE"," ",1719],["T_DOUBLE_ARROW","=>",1719],["T_WHITESPACE"," ",1719],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1719],",",["T_WHITESPACE","\n        ",1719],")",",",["T_WHITESPACE","\n      ",1720],")",",",["T_WHITESPACE","\n      ",1721],["T_CONSTANT_ENCAPSED_STRING","'max'",1722],["T_WHITESPACE"," ",1722],["T_DOUBLE_ARROW","=>",1722],["T_WHITESPACE"," ",1722],["T_ARRAY","array",1722],"(",["T_WHITESPACE","\n        ",1722],["T_CONSTANT_ENCAPSED_STRING","'title'",1723],["T_WHITESPACE"," ",1723],["T_DOUBLE_ARROW","=>",1723],["T_WHITESPACE"," ",1723],["T_VARIABLE","$this",1723],["T_OBJECT_OPERATOR","->",1723],["T_STRING","t",1723],"(",["T_CONSTANT_ENCAPSED_STRING","'Maximum'",1723],")",",",["T_WHITESPACE","\n        ",1723],["T_CONSTANT_ENCAPSED_STRING","'method'",1724],["T_WHITESPACE"," ",1724],["T_DOUBLE_ARROW","=>",1724],["T_WHITESPACE"," ",1724],["T_CONSTANT_ENCAPSED_STRING","'aggregationMethodSimple'",1724],",",["T_WHITESPACE","\n        ",1724],["T_CONSTANT_ENCAPSED_STRING","'handler'",1725],["T_WHITESPACE"," ",1725],["T_DOUBLE_ARROW","=>",1725],["T_WHITESPACE"," ",1725],["T_ARRAY","array",1725],"(",["T_WHITESPACE","\n          ",1725],["T_CONSTANT_ENCAPSED_STRING","'argument'",1726],["T_WHITESPACE"," ",1726],["T_DOUBLE_ARROW","=>",1726],["T_WHITESPACE"," ",1726],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1726],",",["T_WHITESPACE","\n          ",1726],["T_CONSTANT_ENCAPSED_STRING","'field'",1727],["T_WHITESPACE"," ",1727],["T_DOUBLE_ARROW","=>",1727],["T_WHITESPACE"," ",1727],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1727],",",["T_WHITESPACE","\n          ",1727],["T_CONSTANT_ENCAPSED_STRING","'filter'",1728],["T_WHITESPACE"," ",1728],["T_DOUBLE_ARROW","=>",1728],["T_WHITESPACE"," ",1728],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1728],",",["T_WHITESPACE","\n          ",1728],["T_CONSTANT_ENCAPSED_STRING","'sort'",1729],["T_WHITESPACE"," ",1729],["T_DOUBLE_ARROW","=>",1729],["T_WHITESPACE"," ",1729],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1729],",",["T_WHITESPACE","\n        ",1729],")",",",["T_WHITESPACE","\n      ",1730],")",",",["T_WHITESPACE","\n      ",1731],["T_CONSTANT_ENCAPSED_STRING","'stddev_pop'",1732],["T_WHITESPACE"," ",1732],["T_DOUBLE_ARROW","=>",1732],["T_WHITESPACE"," ",1732],["T_ARRAY","array",1732],"(",["T_WHITESPACE","\n        ",1732],["T_CONSTANT_ENCAPSED_STRING","'title'",1733],["T_WHITESPACE"," ",1733],["T_DOUBLE_ARROW","=>",1733],["T_WHITESPACE"," ",1733],["T_VARIABLE","$this",1733],["T_OBJECT_OPERATOR","->",1733],["T_STRING","t",1733],"(",["T_CONSTANT_ENCAPSED_STRING","'Standard deviation'",1733],")",",",["T_WHITESPACE","\n        ",1733],["T_CONSTANT_ENCAPSED_STRING","'method'",1734],["T_WHITESPACE"," ",1734],["T_DOUBLE_ARROW","=>",1734],["T_WHITESPACE"," ",1734],["T_CONSTANT_ENCAPSED_STRING","'aggregationMethodSimple'",1734],",",["T_WHITESPACE","\n        ",1734],["T_CONSTANT_ENCAPSED_STRING","'handler'",1735],["T_WHITESPACE"," ",1735],["T_DOUBLE_ARROW","=>",1735],["T_WHITESPACE"," ",1735],["T_ARRAY","array",1735],"(",["T_WHITESPACE","\n          ",1735],["T_CONSTANT_ENCAPSED_STRING","'argument'",1736],["T_WHITESPACE"," ",1736],["T_DOUBLE_ARROW","=>",1736],["T_WHITESPACE"," ",1736],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1736],",",["T_WHITESPACE","\n          ",1736],["T_CONSTANT_ENCAPSED_STRING","'field'",1737],["T_WHITESPACE"," ",1737],["T_DOUBLE_ARROW","=>",1737],["T_WHITESPACE"," ",1737],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1737],",",["T_WHITESPACE","\n          ",1737],["T_CONSTANT_ENCAPSED_STRING","'filter'",1738],["T_WHITESPACE"," ",1738],["T_DOUBLE_ARROW","=>",1738],["T_WHITESPACE"," ",1738],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1738],",",["T_WHITESPACE","\n          ",1738],["T_CONSTANT_ENCAPSED_STRING","'sort'",1739],["T_WHITESPACE"," ",1739],["T_DOUBLE_ARROW","=>",1739],["T_WHITESPACE"," ",1739],["T_CONSTANT_ENCAPSED_STRING","'groupby_numeric'",1739],",",["T_WHITESPACE","\n        ",1739],")",",",["T_WHITESPACE","\n      ",1740],")",["T_WHITESPACE","\n    ",1741],")",";",["T_WHITESPACE","\n  ",1742],"}",["T_WHITESPACE","\n\n  ",1743],["T_PUBLIC","public",1745],["T_WHITESPACE"," ",1745],["T_FUNCTION","function",1745],["T_WHITESPACE"," ",1745],["T_STRING","aggregationMethodSimple",1745],"(",["T_VARIABLE","$group_type",1745],",",["T_WHITESPACE"," ",1745],["T_VARIABLE","$field",1745],")",["T_WHITESPACE"," ",1745],"{",["T_WHITESPACE","\n    ",1745],["T_RETURN","return",1746],["T_WHITESPACE"," ",1746],["T_STRING","strtoupper",1746],"(",["T_VARIABLE","$group_type",1746],")",["T_WHITESPACE"," ",1746],".",["T_WHITESPACE"," ",1746],["T_CONSTANT_ENCAPSED_STRING","'('",1746],["T_WHITESPACE"," ",1746],".",["T_WHITESPACE"," ",1746],["T_VARIABLE","$field",1746],["T_WHITESPACE"," ",1746],".",["T_WHITESPACE"," ",1746],["T_CONSTANT_ENCAPSED_STRING","')'",1746],";",["T_WHITESPACE","\n  ",1746],"}",["T_WHITESPACE","\n\n  ",1747],["T_PUBLIC","public",1749],["T_WHITESPACE"," ",1749],["T_FUNCTION","function",1749],["T_WHITESPACE"," ",1749],["T_STRING","aggregationMethodDistinct",1749],"(",["T_VARIABLE","$group_type",1749],",",["T_WHITESPACE"," ",1749],["T_VARIABLE","$field",1749],")",["T_WHITESPACE"," ",1749],"{",["T_WHITESPACE","\n    ",1749],["T_VARIABLE","$group_type",1750],["T_WHITESPACE"," ",1750],"=",["T_WHITESPACE"," ",1750],["T_STRING","str_replace",1750],"(",["T_CONSTANT_ENCAPSED_STRING","'_distinct'",1750],",",["T_WHITESPACE"," ",1750],["T_CONSTANT_ENCAPSED_STRING","''",1750],",",["T_WHITESPACE"," ",1750],["T_VARIABLE","$group_type",1750],")",";",["T_WHITESPACE","\n    ",1750],["T_RETURN","return",1751],["T_WHITESPACE"," ",1751],["T_STRING","strtoupper",1751],"(",["T_VARIABLE","$group_type",1751],")",["T_WHITESPACE"," ",1751],".",["T_WHITESPACE"," ",1751],["T_CONSTANT_ENCAPSED_STRING","'(DISTINCT '",1751],["T_WHITESPACE"," ",1751],".",["T_WHITESPACE"," ",1751],["T_VARIABLE","$field",1751],["T_WHITESPACE"," ",1751],".",["T_WHITESPACE"," ",1751],["T_CONSTANT_ENCAPSED_STRING","')'",1751],";",["T_WHITESPACE","\n  ",1751],"}",["T_WHITESPACE","\n\n  ",1752],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",1754],["T_WHITESPACE","\n  ",1756],["T_PUBLIC","public",1757],["T_WHITESPACE"," ",1757],["T_FUNCTION","function",1757],["T_WHITESPACE"," ",1757],["T_STRING","getDateField",1757],"(",["T_VARIABLE","$field",1757],")",["T_WHITESPACE"," ",1757],"{",["T_WHITESPACE","\n    ",1757],["T_VARIABLE","$db_type",1758],["T_WHITESPACE"," ",1758],"=",["T_WHITESPACE"," ",1758],["T_STRING","Database",1758],["T_DOUBLE_COLON","::",1758],["T_STRING","getConnection",1758],"(",")",["T_OBJECT_OPERATOR","->",1758],["T_STRING","databaseType",1758],"(",")",";",["T_WHITESPACE","\n    ",1758],["T_VARIABLE","$offset",1759],["T_WHITESPACE"," ",1759],"=",["T_WHITESPACE"," ",1759],["T_VARIABLE","$this",1759],["T_OBJECT_OPERATOR","->",1759],["T_STRING","setupTimezone",1759],"(",")",";",["T_WHITESPACE","\n    ",1759],["T_IF","if",1760],["T_WHITESPACE"," ",1760],"(",["T_ISSET","isset",1760],"(",["T_VARIABLE","$offset",1760],")",["T_WHITESPACE"," ",1760],["T_BOOLEAN_AND","&&",1760],["T_WHITESPACE"," ",1760],"!",["T_STRING","is_numeric",1760],"(",["T_VARIABLE","$offset",1760],")",")",["T_WHITESPACE"," ",1760],"{",["T_WHITESPACE","\n      ",1760],["T_VARIABLE","$dtz",1761],["T_WHITESPACE"," ",1761],"=",["T_WHITESPACE"," ",1761],["T_NEW","new",1761],["T_WHITESPACE"," ",1761],["T_NS_SEPARATOR","\\",1761],["T_STRING","DateTimeZone",1761],"(",["T_VARIABLE","$offset",1761],")",";",["T_WHITESPACE","\n      ",1761],["T_VARIABLE","$dt",1762],["T_WHITESPACE"," ",1762],"=",["T_WHITESPACE"," ",1762],["T_NEW","new",1762],["T_WHITESPACE"," ",1762],["T_NS_SEPARATOR","\\",1762],["T_STRING","DateTime",1762],"(",["T_CONSTANT_ENCAPSED_STRING","'now'",1762],",",["T_WHITESPACE"," ",1762],["T_VARIABLE","$dtz",1762],")",";",["T_WHITESPACE","\n      ",1762],["T_VARIABLE","$offset_seconds",1763],["T_WHITESPACE"," ",1763],"=",["T_WHITESPACE"," ",1763],["T_VARIABLE","$dtz",1763],["T_OBJECT_OPERATOR","->",1763],["T_STRING","getOffset",1763],"(",["T_VARIABLE","$dt",1763],")",";",["T_WHITESPACE","\n    ",1763],"}",["T_WHITESPACE","\n\n    ",1764],["T_SWITCH","switch",1766],["T_WHITESPACE"," ",1766],"(",["T_VARIABLE","$db_type",1766],")",["T_WHITESPACE"," ",1766],"{",["T_WHITESPACE","\n      ",1766],["T_CASE","case",1767],["T_WHITESPACE"," ",1767],["T_CONSTANT_ENCAPSED_STRING","'mysql'",1767],":",["T_WHITESPACE","\n        ",1767],["T_VARIABLE","$field",1768],["T_WHITESPACE"," ",1768],"=",["T_WHITESPACE"," ",1768],"\"",["T_ENCAPSED_AND_WHITESPACE","DATE_ADD('19700101', INTERVAL ",1768],["T_VARIABLE","$field",1768],["T_ENCAPSED_AND_WHITESPACE"," SECOND)",1768],"\"",";",["T_WHITESPACE","\n        ",1768],["T_IF","if",1769],["T_WHITESPACE"," ",1769],"(","!",["T_EMPTY","empty",1769],"(",["T_VARIABLE","$offset",1769],")",")",["T_WHITESPACE"," ",1769],"{",["T_WHITESPACE","\n          ",1769],["T_VARIABLE","$field",1770],["T_WHITESPACE"," ",1770],"=",["T_WHITESPACE"," ",1770],"\"",["T_ENCAPSED_AND_WHITESPACE","(",1770],["T_VARIABLE","$field",1770],["T_ENCAPSED_AND_WHITESPACE"," + INTERVAL ",1770],["T_VARIABLE","$offset_seconds",1770],["T_ENCAPSED_AND_WHITESPACE"," SECOND)",1770],"\"",";",["T_WHITESPACE","\n        ",1770],"}",["T_WHITESPACE","\n        ",1771],["T_BREAK","break",1772],";",["T_WHITESPACE","\n      ",1772],["T_CASE","case",1773],["T_WHITESPACE"," ",1773],["T_CONSTANT_ENCAPSED_STRING","'pgsql'",1773],":",["T_WHITESPACE","\n        ",1773],["T_VARIABLE","$field",1774],["T_WHITESPACE"," ",1774],"=",["T_WHITESPACE"," ",1774],"\"",["T_ENCAPSED_AND_WHITESPACE","TO_TIMESTAMP(",1774],["T_VARIABLE","$field",1774],["T_ENCAPSED_AND_WHITESPACE",")",1774],"\"",";",["T_WHITESPACE","\n        ",1774],["T_IF","if",1775],["T_WHITESPACE"," ",1775],"(","!",["T_EMPTY","empty",1775],"(",["T_VARIABLE","$offset",1775],")",")",["T_WHITESPACE"," ",1775],"{",["T_WHITESPACE","\n          ",1775],["T_VARIABLE","$field",1776],["T_WHITESPACE"," ",1776],"=",["T_WHITESPACE"," ",1776],"\"",["T_ENCAPSED_AND_WHITESPACE","(",1776],["T_VARIABLE","$field",1776],["T_ENCAPSED_AND_WHITESPACE"," + INTERVAL '",1776],["T_VARIABLE","$offset_seconds",1776],["T_ENCAPSED_AND_WHITESPACE"," SECONDS')",1776],"\"",";",["T_WHITESPACE","\n        ",1776],"}",["T_WHITESPACE","\n        ",1777],["T_BREAK","break",1778],";",["T_WHITESPACE","\n      ",1778],["T_CASE","case",1779],["T_WHITESPACE"," ",1779],["T_CONSTANT_ENCAPSED_STRING","'sqlite'",1779],":",["T_WHITESPACE","\n        ",1779],["T_IF","if",1780],["T_WHITESPACE"," ",1780],"(","!",["T_EMPTY","empty",1780],"(",["T_VARIABLE","$offset",1780],")",")",["T_WHITESPACE"," ",1780],"{",["T_WHITESPACE","\n          ",1780],["T_VARIABLE","$field",1781],["T_WHITESPACE"," ",1781],"=",["T_WHITESPACE"," ",1781],"\"",["T_ENCAPSED_AND_WHITESPACE","(",1781],["T_VARIABLE","$field",1781],["T_ENCAPSED_AND_WHITESPACE"," + ",1781],["T_VARIABLE","$offset_seconds",1781],["T_ENCAPSED_AND_WHITESPACE",")",1781],"\"",";",["T_WHITESPACE","\n        ",1781],"}",["T_WHITESPACE","\n        ",1782],["T_BREAK","break",1783],";",["T_WHITESPACE","\n    ",1783],"}",["T_WHITESPACE","\n\n    ",1784],["T_RETURN","return",1786],["T_WHITESPACE"," ",1786],["T_VARIABLE","$field",1786],";",["T_WHITESPACE","\n  ",1786],"}",["T_WHITESPACE","\n\n  ",1787],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",1789],["T_WHITESPACE","\n  ",1791],["T_PUBLIC","public",1792],["T_WHITESPACE"," ",1792],["T_FUNCTION","function",1792],["T_WHITESPACE"," ",1792],["T_STRING","setupTimezone",1792],"(",")",["T_WHITESPACE"," ",1792],"{",["T_WHITESPACE","\n    ",1792],["T_VARIABLE","$timezone",1793],["T_WHITESPACE"," ",1793],"=",["T_WHITESPACE"," ",1793],["T_STRING","drupal_get_user_timezone",1793],"(",")",";",["T_WHITESPACE","\n\n    ",1793],["T_COMMENT","\/\/ set up the database timezone\n",1795],["T_WHITESPACE","    ",1796],["T_VARIABLE","$db_type",1796],["T_WHITESPACE"," ",1796],"=",["T_WHITESPACE"," ",1796],["T_STRING","Database",1796],["T_DOUBLE_COLON","::",1796],["T_STRING","getConnection",1796],"(",")",["T_OBJECT_OPERATOR","->",1796],["T_STRING","databaseType",1796],"(",")",";",["T_WHITESPACE","\n    ",1796],["T_IF","if",1797],["T_WHITESPACE"," ",1797],"(",["T_STRING","in_array",1797],"(",["T_VARIABLE","$db_type",1797],",",["T_WHITESPACE"," ",1797],["T_ARRAY","array",1797],"(",["T_CONSTANT_ENCAPSED_STRING","'mysql'",1797],",",["T_WHITESPACE"," ",1797],["T_CONSTANT_ENCAPSED_STRING","'pgsql'",1797],")",")",")",["T_WHITESPACE"," ",1797],"{",["T_WHITESPACE","\n      ",1797],["T_VARIABLE","$offset",1798],["T_WHITESPACE"," ",1798],"=",["T_WHITESPACE"," ",1798],["T_CONSTANT_ENCAPSED_STRING","'+00:00'",1798],";",["T_WHITESPACE","\n      ",1798],["T_STATIC","static",1799],["T_WHITESPACE"," ",1799],["T_VARIABLE","$already_set",1799],["T_WHITESPACE"," ",1799],"=",["T_WHITESPACE"," ",1799],["T_STRING","FALSE",1799],";",["T_WHITESPACE","\n      ",1799],["T_IF","if",1800],["T_WHITESPACE"," ",1800],"(","!",["T_VARIABLE","$already_set",1800],")",["T_WHITESPACE"," ",1800],"{",["T_WHITESPACE","\n        ",1800],["T_IF","if",1801],["T_WHITESPACE"," ",1801],"(",["T_VARIABLE","$db_type",1801],["T_WHITESPACE"," ",1801],["T_IS_EQUAL","==",1801],["T_WHITESPACE"," ",1801],["T_CONSTANT_ENCAPSED_STRING","'pgsql'",1801],")",["T_WHITESPACE"," ",1801],"{",["T_WHITESPACE","\n          ",1801],["T_STRING","Database",1802],["T_DOUBLE_COLON","::",1802],["T_STRING","getConnection",1802],"(",")",["T_OBJECT_OPERATOR","->",1802],["T_STRING","query",1802],"(","\"",["T_ENCAPSED_AND_WHITESPACE","SET TIME ZONE INTERVAL '",1802],["T_VARIABLE","$offset",1802],["T_ENCAPSED_AND_WHITESPACE","' HOUR TO MINUTE",1802],"\"",")",";",["T_WHITESPACE","\n        ",1802],"}",["T_WHITESPACE","\n        ",1803],["T_ELSEIF","elseif",1804],["T_WHITESPACE"," ",1804],"(",["T_VARIABLE","$db_type",1804],["T_WHITESPACE"," ",1804],["T_IS_EQUAL","==",1804],["T_WHITESPACE"," ",1804],["T_CONSTANT_ENCAPSED_STRING","'mysql'",1804],")",["T_WHITESPACE"," ",1804],"{",["T_WHITESPACE","\n          ",1804],["T_STRING","Database",1805],["T_DOUBLE_COLON","::",1805],["T_STRING","getConnection",1805],"(",")",["T_OBJECT_OPERATOR","->",1805],["T_STRING","query",1805],"(","\"",["T_ENCAPSED_AND_WHITESPACE","SET @@session.time_zone = '",1805],["T_VARIABLE","$offset",1805],["T_ENCAPSED_AND_WHITESPACE","'",1805],"\"",")",";",["T_WHITESPACE","\n        ",1805],"}",["T_WHITESPACE","\n\n        ",1806],["T_VARIABLE","$already_set",1808],["T_WHITESPACE"," ",1808],"=",["T_WHITESPACE"," ",1808],["T_STRING","TRUE",1808],";",["T_WHITESPACE","\n      ",1808],"}",["T_WHITESPACE","\n    ",1809],"}",["T_WHITESPACE","\n\n    ",1810],["T_RETURN","return",1812],["T_WHITESPACE"," ",1812],["T_VARIABLE","$timezone",1812],";",["T_WHITESPACE","\n  ",1812],"}",["T_WHITESPACE","\n\n  ",1813],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",1815],["T_WHITESPACE","\n  ",1817],["T_PUBLIC","public",1818],["T_WHITESPACE"," ",1818],["T_FUNCTION","function",1818],["T_WHITESPACE"," ",1818],["T_STRING","getDateFormat",1818],"(",["T_VARIABLE","$field",1818],",",["T_WHITESPACE"," ",1818],["T_VARIABLE","$format",1818],",",["T_WHITESPACE"," ",1818],["T_VARIABLE","$string_date",1818],["T_WHITESPACE"," ",1818],"=",["T_WHITESPACE"," ",1818],["T_STRING","FALSE",1818],")",["T_WHITESPACE"," ",1818],"{",["T_WHITESPACE","\n    ",1818],["T_VARIABLE","$db_type",1819],["T_WHITESPACE"," ",1819],"=",["T_WHITESPACE"," ",1819],["T_STRING","Database",1819],["T_DOUBLE_COLON","::",1819],["T_STRING","getConnection",1819],"(",")",["T_OBJECT_OPERATOR","->",1819],["T_STRING","databaseType",1819],"(",")",";",["T_WHITESPACE","\n    ",1819],["T_SWITCH","switch",1820],["T_WHITESPACE"," ",1820],"(",["T_VARIABLE","$db_type",1820],")",["T_WHITESPACE"," ",1820],"{",["T_WHITESPACE","\n      ",1820],["T_CASE","case",1821],["T_WHITESPACE"," ",1821],["T_CONSTANT_ENCAPSED_STRING","'mysql'",1821],":",["T_WHITESPACE","\n        ",1821],["T_VARIABLE","$replace",1822],["T_WHITESPACE"," ",1822],"=",["T_WHITESPACE"," ",1822],["T_ARRAY","array",1822],"(",["T_WHITESPACE","\n          ",1822],["T_CONSTANT_ENCAPSED_STRING","'Y'",1823],["T_WHITESPACE"," ",1823],["T_DOUBLE_ARROW","=>",1823],["T_WHITESPACE"," ",1823],["T_CONSTANT_ENCAPSED_STRING","'%Y'",1823],",",["T_WHITESPACE","\n          ",1823],["T_CONSTANT_ENCAPSED_STRING","'y'",1824],["T_WHITESPACE"," ",1824],["T_DOUBLE_ARROW","=>",1824],["T_WHITESPACE"," ",1824],["T_CONSTANT_ENCAPSED_STRING","'%y'",1824],",",["T_WHITESPACE","\n          ",1824],["T_CONSTANT_ENCAPSED_STRING","'M'",1825],["T_WHITESPACE"," ",1825],["T_DOUBLE_ARROW","=>",1825],["T_WHITESPACE"," ",1825],["T_CONSTANT_ENCAPSED_STRING","'%b'",1825],",",["T_WHITESPACE","\n          ",1825],["T_CONSTANT_ENCAPSED_STRING","'m'",1826],["T_WHITESPACE"," ",1826],["T_DOUBLE_ARROW","=>",1826],["T_WHITESPACE"," ",1826],["T_CONSTANT_ENCAPSED_STRING","'%m'",1826],",",["T_WHITESPACE","\n          ",1826],["T_CONSTANT_ENCAPSED_STRING","'n'",1827],["T_WHITESPACE"," ",1827],["T_DOUBLE_ARROW","=>",1827],["T_WHITESPACE"," ",1827],["T_CONSTANT_ENCAPSED_STRING","'%c'",1827],",",["T_WHITESPACE","\n          ",1827],["T_CONSTANT_ENCAPSED_STRING","'F'",1828],["T_WHITESPACE"," ",1828],["T_DOUBLE_ARROW","=>",1828],["T_WHITESPACE"," ",1828],["T_CONSTANT_ENCAPSED_STRING","'%M'",1828],",",["T_WHITESPACE","\n          ",1828],["T_CONSTANT_ENCAPSED_STRING","'D'",1829],["T_WHITESPACE"," ",1829],["T_DOUBLE_ARROW","=>",1829],["T_WHITESPACE"," ",1829],["T_CONSTANT_ENCAPSED_STRING","'%a'",1829],",",["T_WHITESPACE","\n          ",1829],["T_CONSTANT_ENCAPSED_STRING","'d'",1830],["T_WHITESPACE"," ",1830],["T_DOUBLE_ARROW","=>",1830],["T_WHITESPACE"," ",1830],["T_CONSTANT_ENCAPSED_STRING","'%d'",1830],",",["T_WHITESPACE","\n          ",1830],["T_CONSTANT_ENCAPSED_STRING","'l'",1831],["T_WHITESPACE"," ",1831],["T_DOUBLE_ARROW","=>",1831],["T_WHITESPACE"," ",1831],["T_CONSTANT_ENCAPSED_STRING","'%W'",1831],",",["T_WHITESPACE","\n          ",1831],["T_CONSTANT_ENCAPSED_STRING","'j'",1832],["T_WHITESPACE"," ",1832],["T_DOUBLE_ARROW","=>",1832],["T_WHITESPACE"," ",1832],["T_CONSTANT_ENCAPSED_STRING","'%e'",1832],",",["T_WHITESPACE","\n          ",1832],["T_CONSTANT_ENCAPSED_STRING","'W'",1833],["T_WHITESPACE"," ",1833],["T_DOUBLE_ARROW","=>",1833],["T_WHITESPACE"," ",1833],["T_CONSTANT_ENCAPSED_STRING","'%v'",1833],",",["T_WHITESPACE","\n          ",1833],["T_CONSTANT_ENCAPSED_STRING","'H'",1834],["T_WHITESPACE"," ",1834],["T_DOUBLE_ARROW","=>",1834],["T_WHITESPACE"," ",1834],["T_CONSTANT_ENCAPSED_STRING","'%H'",1834],",",["T_WHITESPACE","\n          ",1834],["T_CONSTANT_ENCAPSED_STRING","'h'",1835],["T_WHITESPACE"," ",1835],["T_DOUBLE_ARROW","=>",1835],["T_WHITESPACE"," ",1835],["T_CONSTANT_ENCAPSED_STRING","'%h'",1835],",",["T_WHITESPACE","\n          ",1835],["T_CONSTANT_ENCAPSED_STRING","'i'",1836],["T_WHITESPACE"," ",1836],["T_DOUBLE_ARROW","=>",1836],["T_WHITESPACE"," ",1836],["T_CONSTANT_ENCAPSED_STRING","'%i'",1836],",",["T_WHITESPACE","\n          ",1836],["T_CONSTANT_ENCAPSED_STRING","'s'",1837],["T_WHITESPACE"," ",1837],["T_DOUBLE_ARROW","=>",1837],["T_WHITESPACE"," ",1837],["T_CONSTANT_ENCAPSED_STRING","'%s'",1837],",",["T_WHITESPACE","\n          ",1837],["T_CONSTANT_ENCAPSED_STRING","'A'",1838],["T_WHITESPACE"," ",1838],["T_DOUBLE_ARROW","=>",1838],["T_WHITESPACE"," ",1838],["T_CONSTANT_ENCAPSED_STRING","'%p'",1838],",",["T_WHITESPACE","\n        ",1838],")",";",["T_WHITESPACE","\n        ",1839],["T_VARIABLE","$format",1840],["T_WHITESPACE"," ",1840],"=",["T_WHITESPACE"," ",1840],["T_STRING","strtr",1840],"(",["T_VARIABLE","$format",1840],",",["T_WHITESPACE"," ",1840],["T_VARIABLE","$replace",1840],")",";",["T_WHITESPACE","\n        ",1840],["T_RETURN","return",1841],["T_WHITESPACE"," ",1841],"\"",["T_ENCAPSED_AND_WHITESPACE","DATE_FORMAT(",1841],["T_VARIABLE","$field",1841],["T_ENCAPSED_AND_WHITESPACE",", '",1841],["T_VARIABLE","$format",1841],["T_ENCAPSED_AND_WHITESPACE","')",1841],"\"",";",["T_WHITESPACE","\n      ",1841],["T_CASE","case",1842],["T_WHITESPACE"," ",1842],["T_CONSTANT_ENCAPSED_STRING","'pgsql'",1842],":",["T_WHITESPACE","\n        ",1842],["T_VARIABLE","$replace",1843],["T_WHITESPACE"," ",1843],"=",["T_WHITESPACE"," ",1843],["T_ARRAY","array",1843],"(",["T_WHITESPACE","\n          ",1843],["T_CONSTANT_ENCAPSED_STRING","'Y'",1844],["T_WHITESPACE"," ",1844],["T_DOUBLE_ARROW","=>",1844],["T_WHITESPACE"," ",1844],["T_CONSTANT_ENCAPSED_STRING","'YYYY'",1844],",",["T_WHITESPACE","\n          ",1844],["T_CONSTANT_ENCAPSED_STRING","'y'",1845],["T_WHITESPACE"," ",1845],["T_DOUBLE_ARROW","=>",1845],["T_WHITESPACE"," ",1845],["T_CONSTANT_ENCAPSED_STRING","'YY'",1845],",",["T_WHITESPACE","\n          ",1845],["T_CONSTANT_ENCAPSED_STRING","'M'",1846],["T_WHITESPACE"," ",1846],["T_DOUBLE_ARROW","=>",1846],["T_WHITESPACE"," ",1846],["T_CONSTANT_ENCAPSED_STRING","'Mon'",1846],",",["T_WHITESPACE","\n          ",1846],["T_CONSTANT_ENCAPSED_STRING","'m'",1847],["T_WHITESPACE"," ",1847],["T_DOUBLE_ARROW","=>",1847],["T_WHITESPACE"," ",1847],["T_CONSTANT_ENCAPSED_STRING","'MM'",1847],",",["T_WHITESPACE","\n          ",1847],["T_COMMENT","\/\/ No format for Numeric representation of a month, without leading\n",1848],["T_WHITESPACE","          ",1849],["T_COMMENT","\/\/ zeros.\n",1849],["T_WHITESPACE","          ",1850],["T_CONSTANT_ENCAPSED_STRING","'n'",1850],["T_WHITESPACE"," ",1850],["T_DOUBLE_ARROW","=>",1850],["T_WHITESPACE"," ",1850],["T_CONSTANT_ENCAPSED_STRING","'MM'",1850],",",["T_WHITESPACE","\n          ",1850],["T_CONSTANT_ENCAPSED_STRING","'F'",1851],["T_WHITESPACE"," ",1851],["T_DOUBLE_ARROW","=>",1851],["T_WHITESPACE"," ",1851],["T_CONSTANT_ENCAPSED_STRING","'Month'",1851],",",["T_WHITESPACE","\n          ",1851],["T_CONSTANT_ENCAPSED_STRING","'D'",1852],["T_WHITESPACE"," ",1852],["T_DOUBLE_ARROW","=>",1852],["T_WHITESPACE"," ",1852],["T_CONSTANT_ENCAPSED_STRING","'Dy'",1852],",",["T_WHITESPACE","\n          ",1852],["T_CONSTANT_ENCAPSED_STRING","'d'",1853],["T_WHITESPACE"," ",1853],["T_DOUBLE_ARROW","=>",1853],["T_WHITESPACE"," ",1853],["T_CONSTANT_ENCAPSED_STRING","'DD'",1853],",",["T_WHITESPACE","\n          ",1853],["T_CONSTANT_ENCAPSED_STRING","'l'",1854],["T_WHITESPACE"," ",1854],["T_DOUBLE_ARROW","=>",1854],["T_WHITESPACE"," ",1854],["T_CONSTANT_ENCAPSED_STRING","'Day'",1854],",",["T_WHITESPACE","\n          ",1854],["T_COMMENT","\/\/ No format for Day of the month without leading zeros.\n",1855],["T_WHITESPACE","          ",1856],["T_CONSTANT_ENCAPSED_STRING","'j'",1856],["T_WHITESPACE"," ",1856],["T_DOUBLE_ARROW","=>",1856],["T_WHITESPACE"," ",1856],["T_CONSTANT_ENCAPSED_STRING","'DD'",1856],",",["T_WHITESPACE","\n          ",1856],["T_CONSTANT_ENCAPSED_STRING","'W'",1857],["T_WHITESPACE"," ",1857],["T_DOUBLE_ARROW","=>",1857],["T_WHITESPACE"," ",1857],["T_CONSTANT_ENCAPSED_STRING","'IW'",1857],",",["T_WHITESPACE","\n          ",1857],["T_CONSTANT_ENCAPSED_STRING","'H'",1858],["T_WHITESPACE"," ",1858],["T_DOUBLE_ARROW","=>",1858],["T_WHITESPACE"," ",1858],["T_CONSTANT_ENCAPSED_STRING","'HH24'",1858],",",["T_WHITESPACE","\n          ",1858],["T_CONSTANT_ENCAPSED_STRING","'h'",1859],["T_WHITESPACE"," ",1859],["T_DOUBLE_ARROW","=>",1859],["T_WHITESPACE"," ",1859],["T_CONSTANT_ENCAPSED_STRING","'HH12'",1859],",",["T_WHITESPACE","\n          ",1859],["T_CONSTANT_ENCAPSED_STRING","'i'",1860],["T_WHITESPACE"," ",1860],["T_DOUBLE_ARROW","=>",1860],["T_WHITESPACE"," ",1860],["T_CONSTANT_ENCAPSED_STRING","'MI'",1860],",",["T_WHITESPACE","\n          ",1860],["T_CONSTANT_ENCAPSED_STRING","'s'",1861],["T_WHITESPACE"," ",1861],["T_DOUBLE_ARROW","=>",1861],["T_WHITESPACE"," ",1861],["T_CONSTANT_ENCAPSED_STRING","'SS'",1861],",",["T_WHITESPACE","\n          ",1861],["T_CONSTANT_ENCAPSED_STRING","'A'",1862],["T_WHITESPACE"," ",1862],["T_DOUBLE_ARROW","=>",1862],["T_WHITESPACE"," ",1862],["T_CONSTANT_ENCAPSED_STRING","'AM'",1862],",",["T_WHITESPACE","\n        ",1862],")",";",["T_WHITESPACE","\n        ",1863],["T_VARIABLE","$format",1864],["T_WHITESPACE"," ",1864],"=",["T_WHITESPACE"," ",1864],["T_STRING","strtr",1864],"(",["T_VARIABLE","$format",1864],",",["T_WHITESPACE"," ",1864],["T_VARIABLE","$replace",1864],")",";",["T_WHITESPACE","\n        ",1864],["T_IF","if",1865],["T_WHITESPACE"," ",1865],"(","!",["T_VARIABLE","$string_date",1865],")",["T_WHITESPACE"," ",1865],"{",["T_WHITESPACE","\n          ",1865],["T_RETURN","return",1866],["T_WHITESPACE"," ",1866],"\"",["T_ENCAPSED_AND_WHITESPACE","TO_CHAR(",1866],["T_VARIABLE","$field",1866],["T_ENCAPSED_AND_WHITESPACE",", '",1866],["T_VARIABLE","$format",1866],["T_ENCAPSED_AND_WHITESPACE","')",1866],"\"",";",["T_WHITESPACE","\n        ",1866],"}",["T_WHITESPACE","\n        ",1867],["T_COMMENT","\/\/ In order to allow for partials (eg, only the year), transform to a\n",1868],["T_WHITESPACE","        ",1869],["T_COMMENT","\/\/ date, back to a string again.\n",1869],["T_WHITESPACE","        ",1870],["T_RETURN","return",1870],["T_WHITESPACE"," ",1870],"\"",["T_ENCAPSED_AND_WHITESPACE","TO_CHAR(TO_TIMESTAMP(",1870],["T_VARIABLE","$field",1870],["T_ENCAPSED_AND_WHITESPACE",", 'YYYY-MM-DD HH24:MI:SS'), '",1870],["T_VARIABLE","$format",1870],["T_ENCAPSED_AND_WHITESPACE","')",1870],"\"",";",["T_WHITESPACE","\n      ",1870],["T_CASE","case",1871],["T_WHITESPACE"," ",1871],["T_CONSTANT_ENCAPSED_STRING","'sqlite'",1871],":",["T_WHITESPACE","\n        ",1871],["T_VARIABLE","$replace",1872],["T_WHITESPACE"," ",1872],"=",["T_WHITESPACE"," ",1872],["T_ARRAY","array",1872],"(",["T_WHITESPACE","\n          ",1872],["T_CONSTANT_ENCAPSED_STRING","'Y'",1873],["T_WHITESPACE"," ",1873],["T_DOUBLE_ARROW","=>",1873],["T_WHITESPACE"," ",1873],["T_CONSTANT_ENCAPSED_STRING","'%Y'",1873],",",["T_WHITESPACE","\n          ",1873],["T_COMMENT","\/\/ No format for 2 digit year number.\n",1874],["T_WHITESPACE","          ",1875],["T_CONSTANT_ENCAPSED_STRING","'y'",1875],["T_WHITESPACE"," ",1875],["T_DOUBLE_ARROW","=>",1875],["T_WHITESPACE"," ",1875],["T_CONSTANT_ENCAPSED_STRING","'%Y'",1875],",",["T_WHITESPACE","\n          ",1875],["T_COMMENT","\/\/ No format for 3 letter month name.\n",1876],["T_WHITESPACE","          ",1877],["T_CONSTANT_ENCAPSED_STRING","'M'",1877],["T_WHITESPACE"," ",1877],["T_DOUBLE_ARROW","=>",1877],["T_WHITESPACE"," ",1877],["T_CONSTANT_ENCAPSED_STRING","'%m'",1877],",",["T_WHITESPACE","\n          ",1877],["T_CONSTANT_ENCAPSED_STRING","'m'",1878],["T_WHITESPACE"," ",1878],["T_DOUBLE_ARROW","=>",1878],["T_WHITESPACE"," ",1878],["T_CONSTANT_ENCAPSED_STRING","'%m'",1878],",",["T_WHITESPACE","\n          ",1878],["T_COMMENT","\/\/ No format for month number without leading zeros.\n",1879],["T_WHITESPACE","          ",1880],["T_CONSTANT_ENCAPSED_STRING","'n'",1880],["T_WHITESPACE"," ",1880],["T_DOUBLE_ARROW","=>",1880],["T_WHITESPACE"," ",1880],["T_CONSTANT_ENCAPSED_STRING","'%m'",1880],",",["T_WHITESPACE","\n          ",1880],["T_COMMENT","\/\/ No format for full month name.\n",1881],["T_WHITESPACE","          ",1882],["T_CONSTANT_ENCAPSED_STRING","'F'",1882],["T_WHITESPACE"," ",1882],["T_DOUBLE_ARROW","=>",1882],["T_WHITESPACE"," ",1882],["T_CONSTANT_ENCAPSED_STRING","'%m'",1882],",",["T_WHITESPACE","\n          ",1882],["T_COMMENT","\/\/ No format for 3 letter day name.\n",1883],["T_WHITESPACE","          ",1884],["T_CONSTANT_ENCAPSED_STRING","'D'",1884],["T_WHITESPACE"," ",1884],["T_DOUBLE_ARROW","=>",1884],["T_WHITESPACE"," ",1884],["T_CONSTANT_ENCAPSED_STRING","'%d'",1884],",",["T_WHITESPACE","\n          ",1884],["T_CONSTANT_ENCAPSED_STRING","'d'",1885],["T_WHITESPACE"," ",1885],["T_DOUBLE_ARROW","=>",1885],["T_WHITESPACE"," ",1885],["T_CONSTANT_ENCAPSED_STRING","'%d'",1885],",",["T_WHITESPACE","\n          ",1885],["T_COMMENT","\/\/ No format for full day name.\n",1886],["T_WHITESPACE","          ",1887],["T_CONSTANT_ENCAPSED_STRING","'l'",1887],["T_WHITESPACE"," ",1887],["T_DOUBLE_ARROW","=>",1887],["T_WHITESPACE"," ",1887],["T_CONSTANT_ENCAPSED_STRING","'%d'",1887],",",["T_WHITESPACE","\n          ",1887],["T_COMMENT","\/\/ no format for day of month number without leading zeros.\n",1888],["T_WHITESPACE","          ",1889],["T_CONSTANT_ENCAPSED_STRING","'j'",1889],["T_WHITESPACE"," ",1889],["T_DOUBLE_ARROW","=>",1889],["T_WHITESPACE"," ",1889],["T_CONSTANT_ENCAPSED_STRING","'%d'",1889],",",["T_WHITESPACE","\n          ",1889],["T_CONSTANT_ENCAPSED_STRING","'W'",1890],["T_WHITESPACE"," ",1890],["T_DOUBLE_ARROW","=>",1890],["T_WHITESPACE"," ",1890],["T_CONSTANT_ENCAPSED_STRING","'%W'",1890],",",["T_WHITESPACE","\n          ",1890],["T_CONSTANT_ENCAPSED_STRING","'H'",1891],["T_WHITESPACE"," ",1891],["T_DOUBLE_ARROW","=>",1891],["T_WHITESPACE"," ",1891],["T_CONSTANT_ENCAPSED_STRING","'%H'",1891],",",["T_WHITESPACE","\n          ",1891],["T_COMMENT","\/\/ No format for 12 hour hour with leading zeros.\n",1892],["T_WHITESPACE","          ",1893],["T_CONSTANT_ENCAPSED_STRING","'h'",1893],["T_WHITESPACE"," ",1893],["T_DOUBLE_ARROW","=>",1893],["T_WHITESPACE"," ",1893],["T_CONSTANT_ENCAPSED_STRING","'%H'",1893],",",["T_WHITESPACE","\n          ",1893],["T_CONSTANT_ENCAPSED_STRING","'i'",1894],["T_WHITESPACE"," ",1894],["T_DOUBLE_ARROW","=>",1894],["T_WHITESPACE"," ",1894],["T_CONSTANT_ENCAPSED_STRING","'%M'",1894],",",["T_WHITESPACE","\n          ",1894],["T_CONSTANT_ENCAPSED_STRING","'s'",1895],["T_WHITESPACE"," ",1895],["T_DOUBLE_ARROW","=>",1895],["T_WHITESPACE"," ",1895],["T_CONSTANT_ENCAPSED_STRING","'%S'",1895],",",["T_WHITESPACE","\n          ",1895],["T_COMMENT","\/\/ No format for AM\/PM.\n",1896],["T_WHITESPACE","          ",1897],["T_CONSTANT_ENCAPSED_STRING","'A'",1897],["T_WHITESPACE"," ",1897],["T_DOUBLE_ARROW","=>",1897],["T_WHITESPACE"," ",1897],["T_CONSTANT_ENCAPSED_STRING","''",1897],",",["T_WHITESPACE","\n        ",1897],")",";",["T_WHITESPACE","\n        ",1898],["T_VARIABLE","$format",1899],["T_WHITESPACE"," ",1899],"=",["T_WHITESPACE"," ",1899],["T_STRING","strtr",1899],"(",["T_VARIABLE","$format",1899],",",["T_WHITESPACE"," ",1899],["T_VARIABLE","$replace",1899],")",";",["T_WHITESPACE","\n\n        ",1899],["T_COMMENT","\/\/ Don't use the 'unixepoch' flag for string date comparisons.\n",1901],["T_WHITESPACE","        ",1902],["T_VARIABLE","$unixepoch",1902],["T_WHITESPACE"," ",1902],"=",["T_WHITESPACE"," ",1902],["T_VARIABLE","$string_date",1902],["T_WHITESPACE"," ",1902],"?",["T_WHITESPACE"," ",1902],["T_CONSTANT_ENCAPSED_STRING","''",1902],["T_WHITESPACE"," ",1902],":",["T_WHITESPACE"," ",1902],["T_CONSTANT_ENCAPSED_STRING","\", 'unixepoch'\"",1902],";",["T_WHITESPACE","\n\n        ",1902],["T_COMMENT","\/\/ SQLite does not have a ISO week substitution string, so it needs\n",1904],["T_WHITESPACE","        ",1905],["T_COMMENT","\/\/ special handling.\n",1905],["T_WHITESPACE","        ",1906],["T_COMMENT","\/\/ @see http:\/\/wikipedia.org\/wiki\/ISO_week_date#Calculation\n",1906],["T_WHITESPACE","        ",1907],["T_COMMENT","\/\/ @see http:\/\/stackoverflow.com\/a\/15511864\/1499564\n",1907],["T_WHITESPACE","        ",1908],["T_IF","if",1908],["T_WHITESPACE"," ",1908],"(",["T_VARIABLE","$format",1908],["T_WHITESPACE"," ",1908],["T_IS_IDENTICAL","===",1908],["T_WHITESPACE"," ",1908],["T_CONSTANT_ENCAPSED_STRING","'%W'",1908],")",["T_WHITESPACE"," ",1908],"{",["T_WHITESPACE","\n          ",1908],["T_VARIABLE","$expression",1909],["T_WHITESPACE"," ",1909],"=",["T_WHITESPACE"," ",1909],"\"",["T_ENCAPSED_AND_WHITESPACE","((strftime('%j', date(strftime('%Y-%m-%d', ",1909],["T_VARIABLE","$field",1909],"\"",["T_WHITESPACE"," ",1909],".",["T_WHITESPACE"," ",1909],["T_VARIABLE","$unixepoch",1909],["T_WHITESPACE"," ",1909],".",["T_WHITESPACE"," ",1909],["T_CONSTANT_ENCAPSED_STRING","\"), '-3 days', 'weekday 4')) - 1) \/ 7 + 1)\"",1909],";",["T_WHITESPACE","\n        ",1909],"}",["T_WHITESPACE","\n        ",1910],["T_ELSE","else",1911],["T_WHITESPACE"," ",1911],"{",["T_WHITESPACE","\n          ",1911],["T_VARIABLE","$expression",1912],["T_WHITESPACE"," ",1912],"=",["T_WHITESPACE"," ",1912],"\"",["T_ENCAPSED_AND_WHITESPACE","strftime('",1912],["T_VARIABLE","$format",1912],["T_ENCAPSED_AND_WHITESPACE","', ",1912],["T_VARIABLE","$field",1912],"\"",["T_WHITESPACE"," ",1912],".",["T_WHITESPACE"," ",1912],["T_VARIABLE","$unixepoch",1912],["T_WHITESPACE"," ",1912],".",["T_WHITESPACE"," ",1912],["T_CONSTANT_ENCAPSED_STRING","\")\"",1912],";",["T_WHITESPACE","\n        ",1912],"}",["T_WHITESPACE","\n        ",1913],["T_COMMENT","\/\/ The expression yields a string, but the comparison value is an\n",1914],["T_WHITESPACE","        ",1915],["T_COMMENT","\/\/ integer in case the comparison value is a float, integer, or numeric.\n",1915],["T_WHITESPACE","        ",1916],["T_COMMENT","\/\/ All of the above SQLite format tokens only produce integers. However,\n",1916],["T_WHITESPACE","        ",1917],["T_COMMENT","\/\/ the given $format may contain 'Y-m-d', which results in a string.\n",1917],["T_WHITESPACE","        ",1918],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Database\\Driver\\sqlite\\Connection::expandArguments()\n",1918],["T_WHITESPACE","        ",1919],["T_COMMENT","\/\/ @see http:\/\/www.sqlite.org\/lang_datefunc.html\n",1919],["T_WHITESPACE","        ",1920],["T_COMMENT","\/\/ @see http:\/\/www.sqlite.org\/lang_expr.html#castexpr\n",1920],["T_WHITESPACE","        ",1921],["T_IF","if",1921],["T_WHITESPACE"," ",1921],"(",["T_STRING","preg_match",1921],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(?:%\\w)+$\/'",1921],",",["T_WHITESPACE"," ",1921],["T_VARIABLE","$format",1921],")",")",["T_WHITESPACE"," ",1921],"{",["T_WHITESPACE","\n          ",1921],["T_VARIABLE","$expression",1922],["T_WHITESPACE"," ",1922],"=",["T_WHITESPACE"," ",1922],"\"",["T_ENCAPSED_AND_WHITESPACE","CAST(",1922],["T_VARIABLE","$expression",1922],["T_ENCAPSED_AND_WHITESPACE"," AS NUMERIC)",1922],"\"",";",["T_WHITESPACE","\n        ",1922],"}",["T_WHITESPACE","\n        ",1923],["T_RETURN","return",1924],["T_WHITESPACE"," ",1924],["T_VARIABLE","$expression",1924],";",["T_WHITESPACE","\n    ",1924],"}",["T_WHITESPACE","\n  ",1925],"}",["T_WHITESPACE","\n\n",1926],"}",["T_WHITESPACE","\n",1928]]
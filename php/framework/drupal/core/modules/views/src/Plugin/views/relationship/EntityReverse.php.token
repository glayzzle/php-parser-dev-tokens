[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","relationship",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","views",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ViewsHandlerManager",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Views",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DependencyInjection",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ContainerInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * A relationship handlers which reverse entity references.\n *\n * @ingroup views_relationship_handlers\n *\n * @ViewsRelationship(\"entity_reverse\")\n *\/",9],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","EntityReverse",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","RelationshipPluginBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Constructs an EntityReverse object.\n   *\n   * @param \\Drupal\\views\\Plugin\\ViewsHandlerManager $join_manager\n   *   The views plugin join manager.\n   *\/",18],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","__construct",24],"(",["T_ARRAY","array",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$configuration",24],",",["T_WHITESPACE"," ",24],["T_VARIABLE","$plugin_id",24],",",["T_WHITESPACE"," ",24],["T_VARIABLE","$plugin_definition",24],",",["T_WHITESPACE"," ",24],["T_STRING","ViewsHandlerManager",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$join_manager",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_STRING","parent",25],["T_DOUBLE_COLON","::",25],["T_STRING","__construct",25],"(",["T_VARIABLE","$configuration",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$plugin_id",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$plugin_definition",25],")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","joinManager",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$join_manager",26],";",["T_WHITESPACE","\n  ",26],"}",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",29],["T_WHITESPACE","\n  ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_STATIC","static",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","create",32],"(",["T_STRING","ContainerInterface",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$container",32],",",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$configuration",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$plugin_id",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$plugin_definition",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n    ",32],["T_RETURN","return",33],["T_WHITESPACE"," ",33],["T_NEW","new",33],["T_WHITESPACE"," ",33],["T_STATIC","static",33],"(",["T_WHITESPACE","\n      ",33],["T_VARIABLE","$configuration",34],",",["T_WHITESPACE","\n      ",34],["T_VARIABLE","$plugin_id",35],",",["T_WHITESPACE","\n      ",35],["T_VARIABLE","$plugin_definition",36],",",["T_WHITESPACE","\n      ",36],["T_VARIABLE","$container",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","get",37],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.views.join'",37],")",["T_WHITESPACE","\n    ",37],")",";",["T_WHITESPACE","\n  ",38],"}",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * Called to implement a relationship in a query.\n   *\/",41],["T_WHITESPACE","\n  ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","query",44],"(",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","ensureMyTable",45],"(",")",";",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/\/ First, relate our base table to the current base table to the\n",46],["T_WHITESPACE","    ",47],["T_COMMENT","\/\/ field, using the base table's id field to the field's column.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$views_data",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","Views",48],["T_DOUBLE_COLON","::",48],["T_STRING","viewsData",48],"(",")",["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","table",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$left_field",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$views_data",49],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",49],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",49],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field'",49],"]",";",["T_WHITESPACE","\n\n    ",49],["T_VARIABLE","$first",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'left_table'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","tableAlias",52],",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'left_field'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$left_field",53],",",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'table'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","definition",54],"[",["T_CONSTANT_ENCAPSED_STRING","'field table'",54],"]",",",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'field'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","definition",55],"[",["T_CONSTANT_ENCAPSED_STRING","'field field'",55],"]",",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'adjusted'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_STRING","TRUE",56],["T_WHITESPACE","\n    ",56],")",";",["T_WHITESPACE","\n    ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(","!",["T_EMPTY","empty",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","options",58],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",58],"]",")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n      ",58],["T_VARIABLE","$first",59],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'INNER'",59],";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_EMPTY","empty",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","definition",62],"[",["T_CONSTANT_ENCAPSED_STRING","'join_extra'",62],"]",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_VARIABLE","$first",63],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",63],"]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","definition",63],"[",["T_CONSTANT_ENCAPSED_STRING","'join_extra'",63],"]",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(","!",["T_EMPTY","empty",66],"(",["T_VARIABLE","$def",66],"[",["T_CONSTANT_ENCAPSED_STRING","'join_id'",66],"]",")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n      ",66],["T_VARIABLE","$id",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$def",67],"[",["T_CONSTANT_ENCAPSED_STRING","'join_id'",67],"]",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n    ",68],["T_ELSE","else",69],["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_VARIABLE","$id",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'standard'",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$first_join",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","joinManager",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","createInstance",72],"(",["T_VARIABLE","$id",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$first",72],")",";",["T_WHITESPACE","\n\n\n    ",72],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","first_alias",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","query",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addTable",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","definition",75],"[",["T_CONSTANT_ENCAPSED_STRING","'field table'",75],"]",",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","relationship",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$first_join",75],")",";",["T_WHITESPACE","\n\n    ",75],["T_COMMENT","\/\/ Second, relate the field table to the entity specified using\n",77],["T_WHITESPACE","    ",78],["T_COMMENT","\/\/ the entity id on the field table and the entity's id field.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$second",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'left_table'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","first_alias",80],",",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'left_field'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",81],",",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'table'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","definition",82],"[",["T_CONSTANT_ENCAPSED_STRING","'base'",82],"]",",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'field'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","definition",83],"[",["T_CONSTANT_ENCAPSED_STRING","'base field'",83],"]",",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'adjusted'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_STRING","TRUE",84],["T_WHITESPACE","\n    ",84],")",";",["T_WHITESPACE","\n\n    ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_EMPTY","empty",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","options",87],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",87],"]",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n      ",87],["T_VARIABLE","$second",88],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'INNER'",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","!",["T_EMPTY","empty",91],"(",["T_VARIABLE","$def",91],"[",["T_CONSTANT_ENCAPSED_STRING","'join_id'",91],"]",")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$id",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$def",92],"[",["T_CONSTANT_ENCAPSED_STRING","'join_id'",92],"]",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n    ",93],["T_ELSE","else",94],["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n      ",94],["T_VARIABLE","$id",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'standard'",95],";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$second_join",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","joinManager",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","createInstance",97],"(",["T_VARIABLE","$id",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$second",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$second_join",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","adjusted",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","TRUE",98],";",["T_WHITESPACE","\n\n    ",98],["T_COMMENT","\/\/ use a short alias for this:\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$alias",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","definition",101],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",101],"]",["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'_'",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","table",101],";",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","alias",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","query",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","addRelationship",103],"(",["T_VARIABLE","$alias",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$second_join",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","definition",103],"[",["T_CONSTANT_ENCAPSED_STRING","'base'",103],"]",",",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","relationship",103],")",";",["T_WHITESPACE","\n  ",103],"}",["T_WHITESPACE","\n\n",104],"}",["T_WHITESPACE","\n",106]]
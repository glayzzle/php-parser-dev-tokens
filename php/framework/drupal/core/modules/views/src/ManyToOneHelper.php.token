[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Form",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FormStateInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","HandlerBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * This many to one helper object is used on both arguments and filters.\n *\n * @todo This requires extensive documentation on how this class is to\n * be used. For now, look at the arguments and filters that use it. Lots\n * of stuff is just pass-through but there are definitely some interesting\n * areas where they interact.\n *\n * Any handler that uses this can have the following possibly additional\n * definition terms:\n * - numeric: If true, treat this field as numeric, using %d instead of %s in\n *            queries.\n *\/",8],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","ManyToOneHelper",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\n  ",21],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","__construct",23],"(",["T_VARIABLE","$handler",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","handler",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$handler",24],";",["T_WHITESPACE","\n  ",24],"}",["T_WHITESPACE","\n\n  ",25],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_STATIC","static",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","defineOptions",27],"(","&",["T_VARIABLE","$options",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$options",28],"[",["T_CONSTANT_ENCAPSED_STRING","'reduce_duplicates'",28],"]",["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_STRING","FALSE",28],")",";",["T_WHITESPACE","\n  ",28],"}",["T_WHITESPACE","\n\n  ",29],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","buildOptionsForm",31],"(","&",["T_VARIABLE","$form",31],",",["T_WHITESPACE"," ",31],["T_STRING","FormStateInterface",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$form_state",31],")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$form",32],"[",["T_CONSTANT_ENCAPSED_STRING","'reduce_duplicates'",32],"]",["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'#type'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",33],",",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'#title'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_STRING","t",34],"(",["T_CONSTANT_ENCAPSED_STRING","'Reduce duplicates'",34],")",",",["T_WHITESPACE","\n      ",34],["T_CONSTANT_ENCAPSED_STRING","'#description'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_STRING","t",35],"(",["T_CONSTANT_ENCAPSED_STRING","\"This filter can cause items that have more than one of the selected options to appear as duplicate results. If this filter causes duplicate results to occur, this checkbox can reduce those duplicates; however, the more terms it has to search for, the less performant the query will be, so use this with caution. Shouldn't be set on single-value fields, as it may cause values to disappear from display, if used on an incompatible field.\"",35],")",",",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],"!",["T_EMPTY","empty",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","handler",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","options",36],"[",["T_CONSTANT_ENCAPSED_STRING","'reduce_duplicates'",36],"]",")",",",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'#weight'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_LNUMBER","4",37],",",["T_WHITESPACE","\n    ",37],")",";",["T_WHITESPACE","\n  ",38],"}",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * Sometimes the handler might want us to use some kind of formula, so give\n   * it that option. If it wants us to do this, it must set $helper->formula = TRUE\n   * and implement handler->getFormula();\n   *\/",41],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","getField",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(","!",["T_EMPTY","empty",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","formula",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n      ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","handler",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getFormula",48],"(",")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n    ",49],["T_ELSE","else",50],["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","handler",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","tableAlias",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'.'",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","handler",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","realField",51],";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n  ",52],"}",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * Add a table to the query.\n   *\n   * This is an advanced concept; not only does it add a new instance of the table,\n   * but it follows the relationship path all the way down to the relationship\n   * link point and adds *that* as a new relationship and then adds the table to\n   * the relationship, if necessary.\n   *\/",55],["T_WHITESPACE","\n  ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","addTable",63],"(",["T_VARIABLE","$join",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","NULL",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$alias",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","NULL",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_COMMENT","\/\/ This is used for lookups in the many_to_one table.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$field",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","handler",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","relationship",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'_'",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","handler",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","table",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'.'",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","handler",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","field",65],";",["T_WHITESPACE","\n\n    ",65],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_EMPTY","empty",67],"(",["T_VARIABLE","$join",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n      ",67],["T_VARIABLE","$join",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getJoin",68],"(",")",";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_COMMENT","\/\/ See if there's a chain between us and the base relationship. If so, we need\n",71],["T_WHITESPACE","    ",72],["T_COMMENT","\/\/ to create a new relationship to use.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$relationship",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","handler",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","relationship",73],";",["T_WHITESPACE","\n\n    ",73],["T_COMMENT","\/\/ Determine the primary table to seek\n",75],["T_WHITESPACE","    ",76],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_EMPTY","empty",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","handler",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","query",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","relationships",76],"[",["T_VARIABLE","$relationship",76],"]",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n      ",76],["T_VARIABLE","$base_table",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","handler",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","view",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","storage",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","get",77],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",77],")",";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n    ",78],["T_ELSE","else",79],["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$base_table",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","handler",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","query",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","relationships",80],"[",["T_VARIABLE","$relationship",80],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base'",80],"]",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Cycle through the joins. This isn't as error-safe as the normal\n",83],["T_WHITESPACE","    ",84],["T_COMMENT","\/\/ ensurePath logic. Perhaps it should be.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$r_join",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_CLONE","clone",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$join",85],";",["T_WHITESPACE","\n    ",85],["T_WHILE","while",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$r_join",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","leftTable",86],["T_WHITESPACE"," ",86],["T_IS_NOT_EQUAL","!=",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$base_table",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_VARIABLE","$r_join",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","HandlerBase",87],["T_DOUBLE_COLON","::",87],["T_STRING","getTableJoin",87],"(",["T_VARIABLE","$r_join",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","leftTable",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$base_table",87],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n    ",88],["T_COMMENT","\/\/ If we found that there are tables in between, add the relationship.\n",89],["T_WHITESPACE","    ",90],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$r_join",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","table",90],["T_WHITESPACE"," ",90],["T_IS_NOT_EQUAL","!=",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$join",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","table",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$relationship",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","handler",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","query",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","addRelationship",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","handler",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","table",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'_'",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_VARIABLE","$r_join",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","table",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$r_join",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$r_join",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","table",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","handler",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","relationship",91],")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_COMMENT","\/\/ And now add our table, using the new relationship if one was used.\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$alias",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","handler",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","query",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","addTable",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","handler",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","table",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$relationship",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$join",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$alias",95],")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Store what values are used by this table chain so that other chains can\n",97],["T_WHITESPACE","    ",98],["T_COMMENT","\/\/ automatically discard those values.\n",98],["T_WHITESPACE","    ",99],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_EMPTY","empty",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","handler",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","view",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","many_to_one_tables",99],"[",["T_VARIABLE","$field",99],"]",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n      ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","handler",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","view",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","many_to_one_tables",100],"[",["T_VARIABLE","$field",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","handler",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","value",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n    ",101],["T_ELSE","else",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","handler",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","view",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","many_to_one_tables",103],"[",["T_VARIABLE","$field",103],"]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","array_merge",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","handler",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","view",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","many_to_one_tables",103],"[",["T_VARIABLE","$field",103],"]",",",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","handler",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","value",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$alias",106],";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n  ",107],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getJoin",109],"(",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n    ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","handler",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getJoin",110],"(",")",";",["T_WHITESPACE","\n  ",110],"}",["T_WHITESPACE","\n\n  ",111],["T_DOC_COMMENT","\/**\n   * Provide the proper join for summary queries. This is important in part because\n   * it will cooperate with other arguments if possible.\n   *\/",113],["T_WHITESPACE","\n  ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","summaryJoin",117],"(",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$field",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","handler",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","relationship",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'_'",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","handler",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","table",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'.'",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","handler",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","field",118],";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$join",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getJoin",119],"(",")",";",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ shortcuts\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$options",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","handler",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","options",122],";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$view",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","handler",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","view",123],";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$query",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","handler",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","query",124],";",["T_WHITESPACE","\n\n    ",124],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_EMPTY","empty",126],"(",["T_VARIABLE","$options",126],"[",["T_CONSTANT_ENCAPSED_STRING","'require_value'",126],"]",")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$join",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","type",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'INNER'",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_EMPTY","empty",130],"(",["T_VARIABLE","$options",130],"[",["T_CONSTANT_ENCAPSED_STRING","'add_table'",130],"]",")",["T_WHITESPACE"," ",130],["T_BOOLEAN_OR","||",130],["T_WHITESPACE"," ",130],["T_EMPTY","empty",130],"(",["T_VARIABLE","$view",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","many_to_one_tables",130],"[",["T_VARIABLE","$field",130],"]",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n      ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$query",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","ensureTable",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","handler",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","table",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","handler",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","relationship",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$join",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n    ",132],["T_ELSE","else",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n      ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(","!",["T_EMPTY","empty",134],"(",["T_VARIABLE","$view",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","many_to_one_tables",134],"[",["T_VARIABLE","$field",134],"]",")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n        ",134],["T_FOREACH","foreach",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$view",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","many_to_one_tables",135],"[",["T_VARIABLE","$field",135],"]",["T_WHITESPACE"," ",135],["T_AS","as",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$value",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n          ",135],["T_VARIABLE","$join",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","extra",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_WHITESPACE","\n            ",136],["T_ARRAY","array",137],"(",["T_WHITESPACE","\n              ",137],["T_CONSTANT_ENCAPSED_STRING","'field'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","handler",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","realField",138],",",["T_WHITESPACE","\n              ",138],["T_CONSTANT_ENCAPSED_STRING","'operator'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'!='",139],",",["T_WHITESPACE","\n              ",139],["T_CONSTANT_ENCAPSED_STRING","'value'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$value",140],",",["T_WHITESPACE","\n              ",140],["T_CONSTANT_ENCAPSED_STRING","'numeric'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],"!",["T_EMPTY","empty",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","definition",141],"[",["T_CONSTANT_ENCAPSED_STRING","'numeric'",141],"]",")",",",["T_WHITESPACE","\n            ",141],")",",",["T_WHITESPACE","\n          ",142],")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n      ",144],"}",["T_WHITESPACE","\n      ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addTable",146],"(",["T_VARIABLE","$join",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n  ",147],"}",["T_WHITESPACE","\n\n  ",148],["T_DOC_COMMENT","\/**\n   * Override ensureMyTable so we can control how this joins in.\n   * The operator actually has influence over joining.\n   *\/",150],["T_WHITESPACE","\n  ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","ensureMyTable",154],"(",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n    ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(","!",["T_ISSET","isset",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","handler",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","tableAlias",155],")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n      ",155],["T_COMMENT","\/\/ Case 1: Operator is an 'or' and we're not reducing duplicates.\n",156],["T_WHITESPACE","      ",157],["T_COMMENT","\/\/ We hence get the absolute simplest:\n",157],["T_WHITESPACE","      ",158],["T_VARIABLE","$field",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","handler",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","relationship",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'_'",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","handler",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","table",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'.'",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","handler",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","field",158],";",["T_WHITESPACE","\n      ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","handler",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","operator",159],["T_WHITESPACE"," ",159],["T_IS_EQUAL","==",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'or'",159],["T_WHITESPACE"," ",159],["T_BOOLEAN_AND","&&",159],["T_WHITESPACE"," ",159],["T_EMPTY","empty",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","handler",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","options",159],"[",["T_CONSTANT_ENCAPSED_STRING","'reduce_duplicates'",159],"]",")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_EMPTY","empty",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","handler",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","options",160],"[",["T_CONSTANT_ENCAPSED_STRING","'add_table'",160],"]",")",["T_WHITESPACE"," ",160],["T_BOOLEAN_AND","&&",160],["T_WHITESPACE"," ",160],["T_EMPTY","empty",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","handler",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","view",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","many_to_one_tables",160],"[",["T_VARIABLE","$field",160],"]",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n          ",160],["T_COMMENT","\/\/ query optimization, INNER joins are slightly faster, so use them\n",161],["T_WHITESPACE","          ",162],["T_COMMENT","\/\/ when we know we can.\n",162],["T_WHITESPACE","          ",163],["T_VARIABLE","$join",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getJoin",163],"(",")",";",["T_WHITESPACE","\n          ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_ISSET","isset",164],"(",["T_VARIABLE","$join",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$join",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","type",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'INNER'",165],";",["T_WHITESPACE","\n          ",165],"}",["T_WHITESPACE","\n          ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","handler",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","tableAlias",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","handler",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","query",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","ensureTable",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","handler",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","table",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","handler",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","relationship",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$join",167],")",";",["T_WHITESPACE","\n          ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","handler",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","view",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","many_to_one_tables",168],"[",["T_VARIABLE","$field",168],"]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","handler",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","value",168],";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n        ",169],["T_ELSE","else",170],["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n          ",170],["T_VARIABLE","$join",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getJoin",171],"(",")",";",["T_WHITESPACE","\n          ",171],["T_VARIABLE","$join",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","type",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'LEFT'",172],";",["T_WHITESPACE","\n          ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(","!",["T_EMPTY","empty",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","handler",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","view",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","many_to_one_tables",173],"[",["T_VARIABLE","$field",173],"]",")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_FOREACH","foreach",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","handler",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","view",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","many_to_one_tables",174],"[",["T_VARIABLE","$field",174],"]",["T_WHITESPACE"," ",174],["T_AS","as",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$value",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n              ",174],["T_VARIABLE","$join",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","extra",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_WHITESPACE","\n                ",175],["T_ARRAY","array",176],"(",["T_WHITESPACE","\n                  ",176],["T_CONSTANT_ENCAPSED_STRING","'field'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","handler",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","realField",177],",",["T_WHITESPACE","\n                  ",177],["T_CONSTANT_ENCAPSED_STRING","'operator'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'!='",178],",",["T_WHITESPACE","\n                  ",178],["T_CONSTANT_ENCAPSED_STRING","'value'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$value",179],",",["T_WHITESPACE","\n                  ",179],["T_CONSTANT_ENCAPSED_STRING","'numeric'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],"!",["T_EMPTY","empty",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","handler",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","definition",180],"[",["T_CONSTANT_ENCAPSED_STRING","'numeric'",180],"]",")",",",["T_WHITESPACE","\n                ",180],")",",",["T_WHITESPACE","\n              ",181],")",";",["T_WHITESPACE","\n            ",182],"}",["T_WHITESPACE","\n          ",183],"}",["T_WHITESPACE","\n\n          ",184],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","handler",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","tableAlias",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","addTable",186],"(",["T_VARIABLE","$join",186],")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n\n        ",187],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","handler",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","tableAlias",189],";",["T_WHITESPACE","\n      ",189],"}",["T_WHITESPACE","\n\n      ",190],["T_COMMENT","\/\/ Case 2: it's an 'and' or an 'or'.\n",192],["T_WHITESPACE","      ",193],["T_COMMENT","\/\/ We do one join per selected value.\n",193],["T_WHITESPACE","      ",194],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","handler",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","operator",194],["T_WHITESPACE"," ",194],["T_IS_NOT_EQUAL","!=",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'not'",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n        ",194],["T_COMMENT","\/\/ Clone the join for each table:\n",195],["T_WHITESPACE","        ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","handler",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","tableAliases",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_ARRAY","array",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","handler",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","value",197],["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$value",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n          ",197],["T_VARIABLE","$join",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getJoin",198],"(",")",";",["T_WHITESPACE","\n          ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","handler",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","operator",199],["T_WHITESPACE"," ",199],["T_IS_EQUAL","==",199],["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'and'",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$join",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","type",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'INNER'",200],";",["T_WHITESPACE","\n          ",200],"}",["T_WHITESPACE","\n          ",201],["T_VARIABLE","$join",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","extra",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_WHITESPACE","\n            ",202],["T_ARRAY","array",203],"(",["T_WHITESPACE","\n              ",203],["T_CONSTANT_ENCAPSED_STRING","'field'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","handler",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","realField",204],",",["T_WHITESPACE","\n              ",204],["T_CONSTANT_ENCAPSED_STRING","'value'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$value",205],",",["T_WHITESPACE","\n              ",205],["T_CONSTANT_ENCAPSED_STRING","'numeric'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],"!",["T_EMPTY","empty",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","handler",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","definition",206],"[",["T_CONSTANT_ENCAPSED_STRING","'numeric'",206],"]",")",",",["T_WHITESPACE","\n            ",206],")",",",["T_WHITESPACE","\n          ",207],")",";",["T_WHITESPACE","\n\n          ",208],["T_COMMENT","\/\/ The table alias needs to be unique to this value across the\n",210],["T_WHITESPACE","          ",211],["T_COMMENT","\/\/ multiple times the filter or argument is called by the view.\n",211],["T_WHITESPACE","          ",212],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_ISSET","isset",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","handler",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","view",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","many_to_one_aliases",212],"[",["T_VARIABLE","$field",212],"]","[",["T_VARIABLE","$value",212],"]",")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(","!",["T_ISSET","isset",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","handler",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","view",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","many_to_one_count",213],"[",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","handler",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","table",213],"]",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n              ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","handler",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","view",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","many_to_one_count",214],"[",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","handler",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","table",214],"]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_LNUMBER","0",214],";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","handler",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","view",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","many_to_one_aliases",216],"[",["T_VARIABLE","$field",216],"]","[",["T_VARIABLE","$value",216],"]",["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","handler",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","table",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'_value_'",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","handler",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","view",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","many_to_one_count",216],"[",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","handler",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","table",216],"]",["T_INC","++",216],")",";",["T_WHITESPACE","\n          ",216],"}",["T_WHITESPACE","\n\n          ",217],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","handler",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","tableAliases",219],"[",["T_VARIABLE","$value",219],"]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","addTable",219],"(",["T_VARIABLE","$join",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","handler",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","view",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","many_to_one_aliases",219],"[",["T_VARIABLE","$field",219],"]","[",["T_VARIABLE","$value",219],"]",")",";",["T_WHITESPACE","\n          ",219],["T_COMMENT","\/\/ Set tableAlias to the first of these.\n",220],["T_WHITESPACE","          ",221],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_EMPTY","empty",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","handler",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","tableAlias",221],")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","handler",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","tableAlias",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","handler",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","tableAliases",222],"[",["T_VARIABLE","$value",222],"]",";",["T_WHITESPACE","\n          ",222],"}",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n      ",224],"}",["T_WHITESPACE","\n      ",225],["T_COMMENT","\/\/ Case 3: it's a 'not'.\n",226],["T_WHITESPACE","      ",227],["T_COMMENT","\/\/ We just do one join. We'll add a where clause during\n",227],["T_WHITESPACE","      ",228],["T_COMMENT","\/\/ the query phase to ensure that $table.$field IS NULL.\n",228],["T_WHITESPACE","      ",229],["T_ELSE","else",229],["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$join",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getJoin",230],"(",")",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$join",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","type",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'LEFT'",231],";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$join",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","extra",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_ARRAY","array",232],"(",")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$join",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","extraOperator",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'OR'",233],";",["T_WHITESPACE","\n        ",233],["T_FOREACH","foreach",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","handler",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","value",234],["T_WHITESPACE"," ",234],["T_AS","as",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$value",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n          ",234],["T_VARIABLE","$join",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","extra",235],"[","]",["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_ARRAY","array",235],"(",["T_WHITESPACE","\n            ",235],["T_CONSTANT_ENCAPSED_STRING","'field'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","handler",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","realField",236],",",["T_WHITESPACE","\n            ",236],["T_CONSTANT_ENCAPSED_STRING","'value'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$value",237],",",["T_WHITESPACE","\n            ",237],["T_CONSTANT_ENCAPSED_STRING","'numeric'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],"!",["T_EMPTY","empty",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","handler",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","definition",238],"[",["T_CONSTANT_ENCAPSED_STRING","'numeric'",238],"]",")",",",["T_WHITESPACE","\n          ",238],")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","handler",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","tableAlias",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","addTable",242],"(",["T_VARIABLE","$join",242],")",";",["T_WHITESPACE","\n      ",242],"}",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n    ",244],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","handler",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","tableAlias",245],";",["T_WHITESPACE","\n  ",245],"}",["T_WHITESPACE","\n\n  ",246],["T_DOC_COMMENT","\/**\n   * Provides a unique placeholders for handlers.\n   *\/",248],["T_WHITESPACE","\n  ",250],["T_PROTECTED","protected",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","placeholder",251],"(",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n    ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","handler",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","query",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","placeholder",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","handler",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","options",252],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",252],"]",["T_WHITESPACE"," ",252],".",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'_'",252],["T_WHITESPACE"," ",252],".",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","handler",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","options",252],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",252],"]",")",";",["T_WHITESPACE","\n  ",252],"}",["T_WHITESPACE","\n\n  ",253],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","addFilter",255],"(",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n    ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_EMPTY","empty",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","handler",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","value",256],")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n      ",256],["T_RETURN","return",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","handler",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","ensureMyTable",259],"(",")",";",["T_WHITESPACE","\n\n    ",259],["T_COMMENT","\/\/ Shorten some variables:\n",261],["T_WHITESPACE","    ",262],["T_VARIABLE","$field",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getField",262],"(",")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$options",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","handler",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","options",263],";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$operator",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","handler",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","operator",264],";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$formula",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],"!",["T_EMPTY","empty",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","formula",265],")",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$value",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","handler",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","value",266],";",["T_WHITESPACE","\n    ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_EMPTY","empty",267],"(",["T_VARIABLE","$options",267],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",267],"]",")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n      ",267],["T_VARIABLE","$options",268],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",268],"]",["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_LNUMBER","0",268],";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_COMMENT","\/\/ add_condition determines whether a single expression is enough(FALSE) or the\n",271],["T_WHITESPACE","    ",272],["T_COMMENT","\/\/ conditions should be added via an db_or()\/db_and() (TRUE).\n",272],["T_WHITESPACE","    ",273],["T_VARIABLE","$add_condition",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","TRUE",273],";",["T_WHITESPACE","\n    ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$operator",274],["T_WHITESPACE"," ",274],["T_IS_EQUAL","==",274],["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'not'",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n      ",274],["T_VARIABLE","$value",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","NULL",275],";",["T_WHITESPACE","\n      ",275],["T_VARIABLE","$operator",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'IS NULL'",276],";",["T_WHITESPACE","\n      ",276],["T_VARIABLE","$add_condition",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","FALSE",277],";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n    ",278],["T_ELSEIF","elseif",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$operator",279],["T_WHITESPACE"," ",279],["T_IS_EQUAL","==",279],["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'or'",279],["T_WHITESPACE"," ",279],["T_BOOLEAN_AND","&&",279],["T_WHITESPACE"," ",279],["T_EMPTY","empty",279],"(",["T_VARIABLE","$options",279],"[",["T_CONSTANT_ENCAPSED_STRING","'reduce_duplicates'",279],"]",")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n      ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_STRING","count",280],"(",["T_VARIABLE","$value",280],")",["T_WHITESPACE"," ",280],">",["T_WHITESPACE"," ",280],["T_LNUMBER","1",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$operator",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'IN'",281],";",["T_WHITESPACE","\n      ",281],"}",["T_WHITESPACE","\n      ",282],["T_ELSE","else",283],["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$value",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","is_array",284],"(",["T_VARIABLE","$value",284],")",["T_WHITESPACE"," ",284],"?",["T_WHITESPACE"," ",284],["T_STRING","array_pop",284],"(",["T_VARIABLE","$value",284],")",["T_WHITESPACE"," ",284],":",["T_WHITESPACE"," ",284],["T_VARIABLE","$value",284],";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$operator",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'='",285],";",["T_WHITESPACE","\n      ",285],"}",["T_WHITESPACE","\n      ",286],["T_VARIABLE","$add_condition",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","FALSE",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_IF","if",290],["T_WHITESPACE"," ",290],"(","!",["T_VARIABLE","$add_condition",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n      ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$formula",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$placeholder",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","placeholder",292],"(",")",";",["T_WHITESPACE","\n        ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$operator",293],["T_WHITESPACE"," ",293],["T_IS_EQUAL","==",293],["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'IN'",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n          ",293],["T_VARIABLE","$operator",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],"\"",["T_VARIABLE","$operator",294],["T_ENCAPSED_AND_WHITESPACE"," IN(",294],["T_VARIABLE","$placeholder",294],["T_ENCAPSED_AND_WHITESPACE",")",294],"\"",";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n        ",295],["T_ELSE","else",296],["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n          ",296],["T_VARIABLE","$operator",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],"\"",["T_VARIABLE","$operator",297],["T_ENCAPSED_AND_WHITESPACE"," ",297],["T_VARIABLE","$placeholder",297],"\"",";",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$placeholders",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_ARRAY","array",299],"(",["T_WHITESPACE","\n          ",299],["T_VARIABLE","$placeholder",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$value",300],",",["T_WHITESPACE","\n        ",300],")",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","handler",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","query",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","addWhereExpression",302],"(",["T_VARIABLE","$options",302],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",302],"]",",",["T_WHITESPACE"," ",302],"\"",["T_VARIABLE","$field",302],["T_ENCAPSED_AND_WHITESPACE"," ",302],["T_VARIABLE","$operator",302],"\"",",",["T_WHITESPACE"," ",302],["T_VARIABLE","$placeholders",302],")",";",["T_WHITESPACE","\n      ",302],"}",["T_WHITESPACE","\n      ",303],["T_ELSE","else",304],["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$placeholder",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","placeholder",305],"(",")",";",["T_WHITESPACE","\n        ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_STRING","count",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","handler",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","value",306],")",["T_WHITESPACE"," ",306],">",["T_WHITESPACE"," ",306],["T_LNUMBER","1",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n          ",306],["T_VARIABLE","$placeholder",307],["T_WHITESPACE"," ",307],["T_CONCAT_EQUAL",".=",307],["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'[]'",307],";",["T_WHITESPACE","\n\n          ",307],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$operator",309],["T_WHITESPACE"," ",309],["T_IS_EQUAL","==",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'IS NULL'",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","handler",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","query",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","addWhereExpression",310],"(",["T_LNUMBER","0",310],",",["T_WHITESPACE"," ",310],"\"",["T_VARIABLE","$field",310],["T_ENCAPSED_AND_WHITESPACE"," ",310],["T_VARIABLE","$operator",310],"\"",")",";",["T_WHITESPACE","\n          ",310],"}",["T_WHITESPACE","\n          ",311],["T_ELSE","else",312],["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","handler",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","query",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","addWhereExpression",313],"(",["T_LNUMBER","0",313],",",["T_WHITESPACE"," ",313],"\"",["T_VARIABLE","$field",313],["T_ENCAPSED_AND_WHITESPACE"," ",313],["T_VARIABLE","$operator",313],["T_ENCAPSED_AND_WHITESPACE","(",313],["T_VARIABLE","$placeholder",313],["T_ENCAPSED_AND_WHITESPACE",")",313],"\"",",",["T_WHITESPACE"," ",313],["T_ARRAY","array",313],"(",["T_VARIABLE","$placeholder",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$value",313],")",")",";",["T_WHITESPACE","\n          ",313],"}",["T_WHITESPACE","\n        ",314],"}",["T_WHITESPACE","\n        ",315],["T_ELSE","else",316],["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n          ",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$operator",317],["T_WHITESPACE"," ",317],["T_IS_EQUAL","==",317],["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'IS NULL'",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","handler",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","query",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","addWhereExpression",318],"(",["T_LNUMBER","0",318],",",["T_WHITESPACE"," ",318],"\"",["T_VARIABLE","$field",318],["T_ENCAPSED_AND_WHITESPACE"," ",318],["T_VARIABLE","$operator",318],"\"",")",";",["T_WHITESPACE","\n          ",318],"}",["T_WHITESPACE","\n          ",319],["T_ELSE","else",320],["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","handler",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","query",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","addWhereExpression",321],"(",["T_LNUMBER","0",321],",",["T_WHITESPACE"," ",321],"\"",["T_VARIABLE","$field",321],["T_ENCAPSED_AND_WHITESPACE"," ",321],["T_VARIABLE","$operator",321],["T_ENCAPSED_AND_WHITESPACE"," ",321],["T_VARIABLE","$placeholder",321],"\"",",",["T_WHITESPACE"," ",321],["T_ARRAY","array",321],"(",["T_VARIABLE","$placeholder",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$value",321],")",")",";",["T_WHITESPACE","\n          ",321],"}",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n      ",323],"}",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$add_condition",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n      ",327],["T_VARIABLE","$field",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","handler",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","realField",328],";",["T_WHITESPACE","\n      ",328],["T_VARIABLE","$clause",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$operator",329],["T_WHITESPACE"," ",329],["T_IS_EQUAL","==",329],["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'or'",329],["T_WHITESPACE"," ",329],"?",["T_WHITESPACE"," ",329],["T_STRING","db_or",329],"(",")",["T_WHITESPACE"," ",329],":",["T_WHITESPACE"," ",329],["T_STRING","db_and",329],"(",")",";",["T_WHITESPACE","\n      ",329],["T_FOREACH","foreach",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","handler",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","tableAliases",330],["T_WHITESPACE"," ",330],["T_AS","as",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$value",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$alias",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$clause",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","condition",331],"(","\"",["T_VARIABLE","$alias",331],["T_ENCAPSED_AND_WHITESPACE",".",331],["T_VARIABLE","$field",331],"\"",",",["T_WHITESPACE"," ",331],["T_VARIABLE","$value",331],")",";",["T_WHITESPACE","\n      ",331],"}",["T_WHITESPACE","\n\n      ",332],["T_COMMENT","\/\/ implode on either AND or OR.\n",334],["T_WHITESPACE","      ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","handler",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","query",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","addWhere",335],"(",["T_VARIABLE","$options",335],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",335],"]",",",["T_WHITESPACE"," ",335],["T_VARIABLE","$clause",335],")",";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n  ",336],"}",["T_WHITESPACE","\n\n",337],"}",["T_WHITESPACE","\n",339]]
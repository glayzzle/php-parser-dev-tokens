[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EventSubscriber",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityManagerInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityTypeEventSubscriberTrait",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityTypeInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityTypeListenerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sql",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SqlContentEntityStorage",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","views",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Views",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Symfony",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Component",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EventDispatcher",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EventSubscriberInterface",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Reacts to changes on entity types to update all views entities.\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","ViewsEntitySchemaSubscriber",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE"," ",16],["T_STRING","EntityTypeListenerInterface",16],",",["T_WHITESPACE"," ",16],["T_STRING","EventSubscriberInterface",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","EntityTypeEventSubscriberTrait",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Indicates that a base table got renamed.\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","BASE_TABLE_RENAME",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_LNUMBER","0",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * Indicates that a data table got renamed.\n   *\/",25],["T_WHITESPACE","\n  ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","DATA_TABLE_RENAME",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_LNUMBER","1",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Indicates that a data table got added.\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","DATA_TABLE_ADDITION",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_LNUMBER","2",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * Indicates that a data table got removed.\n   *\/",35],["T_WHITESPACE","\n  ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","DATA_TABLE_REMOVAL",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_LNUMBER","3",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Indicates that a revision table got renamed.\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","REVISION_TABLE_RENAME",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","4",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * Indicates that a revision table got added.\n   *\/",45],["T_WHITESPACE","\n  ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","REVISION_TABLE_ADDITION",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_LNUMBER","5",48],";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Indicates that a revision table got removed.\n   *\/",50],["T_WHITESPACE","\n  ",52],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","REVISION_TABLE_REMOVAL",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_LNUMBER","6",53],";",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * Indicates that a revision data table got renamed.\n   *\/",55],["T_WHITESPACE","\n  ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","REVISION_DATA_TABLE_RENAME",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","7",58],";",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * Indicates that a revision data table got added.\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_CONST","const",63],["T_WHITESPACE"," ",63],["T_STRING","REVISION_DATA_TABLE_ADDITION",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_LNUMBER","8",63],";",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Indicates that a revision data table got removed.\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_CONST","const",68],["T_WHITESPACE"," ",68],["T_STRING","REVISION_DATA_TABLE_REMOVAL",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_LNUMBER","9",68],";",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",70],["T_WHITESPACE","\n  ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$entityManager",75],";",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * Constructs a ViewsEntitySchemaSubscriber.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   *\/",77],["T_WHITESPACE","\n  ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","__construct",83],"(",["T_STRING","EntityManagerInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$entity_manager",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","entityManager",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$entity_manager",84],";",["T_WHITESPACE","\n  ",84],"}",["T_WHITESPACE","\n\n  ",85],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",87],["T_WHITESPACE","\n  ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_STATIC","static",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","getSubscribedEvents",90],"(",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_STATIC","static",91],["T_DOUBLE_COLON","::",91],["T_STRING","getEntityTypeEvents",91],"(",")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",94],["T_WHITESPACE","\n  ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","onEntityTypeUpdate",97],"(",["T_STRING","EntityTypeInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$entity_type",97],",",["T_WHITESPACE"," ",97],["T_STRING","EntityTypeInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$original",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$changes",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[","]",";",["T_WHITESPACE","\n\n    ",98],["T_COMMENT","\/\/ We implement a specific logic for table updates, which is bound to the\n",100],["T_WHITESPACE","    ",101],["T_COMMENT","\/\/ default sql content entity storage.\n",101],["T_WHITESPACE","    ",102],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","entityManager",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getStorage",102],"(",["T_VARIABLE","$entity_type",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","id",102],"(",")",")",["T_WHITESPACE"," ",102],["T_INSTANCEOF","instanceof",102],["T_WHITESPACE"," ",102],["T_STRING","SqlContentEntityStorage",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n      ",102],["T_RETURN","return",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$entity_type",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getBaseTable",106],"(",")",["T_WHITESPACE"," ",106],["T_IS_NOT_EQUAL","!=",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$original",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getBaseTable",106],"(",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$changes",107],"[","]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STATIC","static",107],["T_DOUBLE_COLON","::",107],["T_STRING","BASE_TABLE_RENAME",107],";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_VARIABLE","$revision_add",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$entity_type",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","isRevisionable",110],"(",")",["T_WHITESPACE"," ",110],["T_BOOLEAN_AND","&&",110],["T_WHITESPACE"," ",110],"!",["T_VARIABLE","$original",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","isRevisionable",110],"(",")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$revision_remove",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],"!",["T_VARIABLE","$entity_type",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","isRevisionable",111],"(",")",["T_WHITESPACE"," ",111],["T_BOOLEAN_AND","&&",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$original",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","isRevisionable",111],"(",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$translation_add",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$entity_type",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","isTranslatable",112],"(",")",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],"!",["T_VARIABLE","$original",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","isTranslatable",112],"(",")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$translation_remove",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],"!",["T_VARIABLE","$entity_type",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","isTranslatable",113],"(",")",["T_WHITESPACE"," ",113],["T_BOOLEAN_AND","&&",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$original",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","isTranslatable",113],"(",")",";",["T_WHITESPACE","\n\n    ",113],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$revision_add",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n      ",115],["T_VARIABLE","$changes",116],"[","]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STATIC","static",116],["T_DOUBLE_COLON","::",116],["T_STRING","REVISION_TABLE_ADDITION",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n    ",117],["T_ELSEIF","elseif",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$revision_remove",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n      ",118],["T_VARIABLE","$changes",119],"[","]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STATIC","static",119],["T_DOUBLE_COLON","::",119],["T_STRING","REVISION_TABLE_REMOVAL",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n    ",120],["T_ELSEIF","elseif",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$entity_type",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","isRevisionable",121],"(",")",["T_WHITESPACE"," ",121],["T_BOOLEAN_AND","&&",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$entity_type",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getRevisionTable",121],"(",")",["T_WHITESPACE"," ",121],["T_IS_NOT_EQUAL","!=",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$original",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getRevisionTable",121],"(",")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n      ",121],["T_VARIABLE","$changes",122],"[","]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STATIC","static",122],["T_DOUBLE_COLON","::",122],["T_STRING","REVISION_TABLE_RENAME",122],";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$translation_add",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$changes",126],"[","]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STATIC","static",126],["T_DOUBLE_COLON","::",126],["T_STRING","DATA_TABLE_ADDITION",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n    ",127],["T_ELSEIF","elseif",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$translation_remove",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n      ",128],["T_VARIABLE","$changes",129],"[","]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STATIC","static",129],["T_DOUBLE_COLON","::",129],["T_STRING","DATA_TABLE_REMOVAL",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n    ",130],["T_ELSEIF","elseif",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$entity_type",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","isTranslatable",131],"(",")",["T_WHITESPACE"," ",131],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$entity_type",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getDataTable",131],"(",")",["T_WHITESPACE"," ",131],["T_IS_NOT_EQUAL","!=",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$original",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getDataTable",131],"(",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n      ",131],["T_VARIABLE","$changes",132],"[","]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STATIC","static",132],["T_DOUBLE_COLON","::",132],["T_STRING","DATA_TABLE_RENAME",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$entity_type",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","isRevisionable",135],"(",")",["T_WHITESPACE"," ",135],["T_BOOLEAN_AND","&&",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$entity_type",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","isTranslatable",135],"(",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n      ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$revision_add",136],["T_WHITESPACE"," ",136],["T_BOOLEAN_OR","||",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$translation_add",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$changes",137],"[","]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STATIC","static",137],["T_DOUBLE_COLON","::",137],["T_STRING","REVISION_DATA_TABLE_ADDITION",137],";",["T_WHITESPACE","\n      ",137],"}",["T_WHITESPACE","\n      ",138],["T_ELSEIF","elseif",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$entity_type",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getRevisionDataTable",139],"(",")",["T_WHITESPACE"," ",139],["T_IS_NOT_EQUAL","!=",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$original",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getRevisionDataTable",139],"(",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$changes",140],"[","]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STATIC","static",140],["T_DOUBLE_COLON","::",140],["T_STRING","REVISION_DATA_TABLE_RENAME",140],";",["T_WHITESPACE","\n      ",140],"}",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n    ",142],["T_ELSEIF","elseif",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$original",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","isRevisionable",143],"(",")",["T_WHITESPACE"," ",143],["T_BOOLEAN_AND","&&",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$original",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","isTranslatable",143],"(",")",["T_WHITESPACE"," ",143],["T_BOOLEAN_AND","&&",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$revision_remove",143],["T_WHITESPACE"," ",143],["T_BOOLEAN_OR","||",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$translation_remove",143],")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n      ",143],["T_VARIABLE","$changes",144],"[","]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STATIC","static",144],["T_DOUBLE_COLON","::",144],["T_STRING","REVISION_DATA_TABLE_REMOVAL",144],";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View[] $all_views *\/",147],["T_WHITESPACE","\n    ",147],["T_VARIABLE","$all_views",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","entityManager",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getStorage",148],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","loadMultiple",148],"(",["T_STRING","NULL",148],")",";",["T_WHITESPACE","\n\n    ",148],["T_FOREACH","foreach",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$changes",150],["T_WHITESPACE"," ",150],["T_AS","as",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$change",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n      ",150],["T_SWITCH","switch",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$change",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n        ",151],["T_CASE","case",152],["T_WHITESPACE"," ",152],["T_STATIC","static",152],["T_DOUBLE_COLON","::",152],["T_STRING","BASE_TABLE_RENAME",152],":",["T_WHITESPACE","\n          ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","baseTableRename",153],"(",["T_VARIABLE","$all_views",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$entity_type",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","id",153],"(",")",",",["T_WHITESPACE"," ",153],["T_VARIABLE","$original",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getBaseTable",153],"(",")",",",["T_WHITESPACE"," ",153],["T_VARIABLE","$entity_type",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getBaseTable",153],"(",")",")",";",["T_WHITESPACE","\n          ",153],["T_BREAK","break",154],";",["T_WHITESPACE","\n        ",154],["T_CASE","case",155],["T_WHITESPACE"," ",155],["T_STATIC","static",155],["T_DOUBLE_COLON","::",155],["T_STRING","DATA_TABLE_RENAME",155],":",["T_WHITESPACE","\n          ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","dataTableRename",156],"(",["T_VARIABLE","$all_views",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$entity_type",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","id",156],"(",")",",",["T_WHITESPACE"," ",156],["T_VARIABLE","$original",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getDataTable",156],"(",")",",",["T_WHITESPACE"," ",156],["T_VARIABLE","$entity_type",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getDataTable",156],"(",")",")",";",["T_WHITESPACE","\n          ",156],["T_BREAK","break",157],";",["T_WHITESPACE","\n        ",157],["T_CASE","case",158],["T_WHITESPACE"," ",158],["T_STATIC","static",158],["T_DOUBLE_COLON","::",158],["T_STRING","DATA_TABLE_ADDITION",158],":",["T_WHITESPACE","\n          ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","dataTableAddition",159],"(",["T_VARIABLE","$all_views",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$entity_type",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$entity_type",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getDataTable",159],"(",")",",",["T_WHITESPACE"," ",159],["T_VARIABLE","$entity_type",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getBaseTable",159],"(",")",")",";",["T_WHITESPACE","\n          ",159],["T_BREAK","break",160],";",["T_WHITESPACE","\n        ",160],["T_CASE","case",161],["T_WHITESPACE"," ",161],["T_STATIC","static",161],["T_DOUBLE_COLON","::",161],["T_STRING","DATA_TABLE_REMOVAL",161],":",["T_WHITESPACE","\n          ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","dataTableRemoval",162],"(",["T_VARIABLE","$all_views",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$entity_type",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","id",162],"(",")",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$original",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getDataTable",162],"(",")",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$entity_type",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getBaseTable",162],"(",")",")",";",["T_WHITESPACE","\n          ",162],["T_BREAK","break",163],";",["T_WHITESPACE","\n        ",163],["T_CASE","case",164],["T_WHITESPACE"," ",164],["T_STATIC","static",164],["T_DOUBLE_COLON","::",164],["T_STRING","REVISION_TABLE_RENAME",164],":",["T_WHITESPACE","\n          ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","baseTableRename",165],"(",["T_VARIABLE","$all_views",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$entity_type",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","id",165],"(",")",",",["T_WHITESPACE"," ",165],["T_VARIABLE","$original",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getRevisionTable",165],"(",")",",",["T_WHITESPACE"," ",165],["T_VARIABLE","$entity_type",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getRevisionTable",165],"(",")",")",";",["T_WHITESPACE","\n          ",165],["T_BREAK","break",166],";",["T_WHITESPACE","\n        ",166],["T_CASE","case",167],["T_WHITESPACE"," ",167],["T_STATIC","static",167],["T_DOUBLE_COLON","::",167],["T_STRING","REVISION_TABLE_ADDITION",167],":",["T_WHITESPACE","\n          ",167],["T_COMMENT","\/\/ If we add revision support we don't have to do anything.\n",168],["T_WHITESPACE","          ",169],["T_BREAK","break",169],";",["T_WHITESPACE","\n        ",169],["T_CASE","case",170],["T_WHITESPACE"," ",170],["T_STATIC","static",170],["T_DOUBLE_COLON","::",170],["T_STRING","REVISION_TABLE_REMOVAL",170],":",["T_WHITESPACE","\n          ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","revisionRemoval",171],"(",["T_VARIABLE","$all_views",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$original",171],")",";",["T_WHITESPACE","\n          ",171],["T_BREAK","break",172],";",["T_WHITESPACE","\n        ",172],["T_CASE","case",173],["T_WHITESPACE"," ",173],["T_STATIC","static",173],["T_DOUBLE_COLON","::",173],["T_STRING","REVISION_DATA_TABLE_RENAME",173],":",["T_WHITESPACE","\n          ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","dataTableRename",174],"(",["T_VARIABLE","$all_views",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$entity_type",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","id",174],"(",")",",",["T_WHITESPACE"," ",174],["T_VARIABLE","$original",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getRevisionDataTable",174],"(",")",",",["T_WHITESPACE"," ",174],["T_VARIABLE","$entity_type",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getRevisionDataTable",174],"(",")",")",";",["T_WHITESPACE","\n          ",174],["T_BREAK","break",175],";",["T_WHITESPACE","\n        ",175],["T_CASE","case",176],["T_WHITESPACE"," ",176],["T_STATIC","static",176],["T_DOUBLE_COLON","::",176],["T_STRING","REVISION_DATA_TABLE_ADDITION",176],":",["T_WHITESPACE","\n          ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","dataTableAddition",177],"(",["T_VARIABLE","$all_views",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$entity_type",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$entity_type",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getRevisionDataTable",177],"(",")",",",["T_WHITESPACE"," ",177],["T_VARIABLE","$entity_type",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getRevisionTable",177],"(",")",")",";",["T_WHITESPACE","\n          ",177],["T_BREAK","break",178],";",["T_WHITESPACE","\n        ",178],["T_CASE","case",179],["T_WHITESPACE"," ",179],["T_STATIC","static",179],["T_DOUBLE_COLON","::",179],["T_STRING","REVISION_DATA_TABLE_REMOVAL",179],":",["T_WHITESPACE","\n          ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","dataTableRemoval",180],"(",["T_VARIABLE","$all_views",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$entity_type",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","id",180],"(",")",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$original",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getRevisionDataTable",180],"(",")",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$entity_type",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getRevisionTable",180],"(",")",")",";",["T_WHITESPACE","\n          ",180],["T_BREAK","break",181],";",["T_WHITESPACE","\n      ",181],"}",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_FOREACH","foreach",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$all_views",185],["T_WHITESPACE"," ",185],["T_AS","as",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$view",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n      ",185],["T_COMMENT","\/\/ All changes done to the views here can be trusted and this might be\n",186],["T_WHITESPACE","      ",187],["T_COMMENT","\/\/ called during updates, when it is not safe to rely on configuration\n",187],["T_WHITESPACE","      ",188],["T_COMMENT","\/\/ containing valid schema. Trust the data and disable schema validation\n",188],["T_WHITESPACE","      ",189],["T_COMMENT","\/\/ and casting.\n",189],["T_WHITESPACE","      ",190],["T_VARIABLE","$view",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","trustData",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","save",190],"(",")",";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n  ",191],"}",["T_WHITESPACE","\n\n  ",192],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",194],["T_WHITESPACE","\n  ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","onEntityTypeDelete",197],"(",["T_STRING","EntityTypeInterface",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$entity_type",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$tables",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],"[",["T_WHITESPACE","\n      ",198],["T_VARIABLE","$entity_type",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getBaseTable",199],"(",")",",",["T_WHITESPACE","\n      ",199],["T_VARIABLE","$entity_type",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getDataTable",200],"(",")",",",["T_WHITESPACE","\n      ",200],["T_VARIABLE","$entity_type",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getRevisionTable",201],"(",")",",",["T_WHITESPACE","\n      ",201],["T_VARIABLE","$entity_type",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getRevisionDataTable",202],"(",")",",",["T_WHITESPACE","\n    ",202],"]",";",["T_WHITESPACE","\n\n    ",203],["T_VARIABLE","$all_views",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","entityManager",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getStorage",205],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",205],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","loadMultiple",205],"(",["T_STRING","NULL",205],")",";",["T_WHITESPACE","\n    ",205],["T_DOC_COMMENT","\/** @var \\Drupal\\views\\Entity\\View $view *\/",206],["T_WHITESPACE","\n    ",206],["T_FOREACH","foreach",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$all_views",207],["T_WHITESPACE"," ",207],["T_AS","as",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$id",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$view",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n\n      ",207],["T_COMMENT","\/\/ First check just the base table.\n",209],["T_WHITESPACE","      ",210],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_STRING","in_array",210],"(",["T_VARIABLE","$view",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","get",210],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",210],")",",",["T_WHITESPACE"," ",210],["T_VARIABLE","$tables",210],")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$view",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","disable",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$view",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","save",212],"(",")",";",["T_WHITESPACE","\n      ",212],"}",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n  ",214],"}",["T_WHITESPACE","\n\n  ",215],["T_DOC_COMMENT","\/**\n   * Applies a callable onto all handlers of all passed in views.\n   *\n   * @param \\Drupal\\views\\Entity\\View[] $all_views\n   *   All views entities.\n   * @param callable $process\n   *   A callable which retrieves a handler config array.\n   *\/",217],["T_WHITESPACE","\n  ",224],["T_PROTECTED","protected",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","processHandlers",225],"(",["T_ARRAY","array",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$all_views",225],",",["T_WHITESPACE"," ",225],["T_CALLABLE","callable",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$process",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n    ",225],["T_FOREACH","foreach",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$all_views",226],["T_WHITESPACE"," ",226],["T_AS","as",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$view",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n      ",226],["T_FOREACH","foreach",227],["T_WHITESPACE"," ",227],"(",["T_STRING","array_keys",227],"(",["T_VARIABLE","$view",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","get",227],"(",["T_CONSTANT_ENCAPSED_STRING","'display'",227],")",")",["T_WHITESPACE"," ",227],["T_AS","as",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$display_id",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$display",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],"&",["T_VARIABLE","$view",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getDisplay",228],"(",["T_VARIABLE","$display_id",228],")",";",["T_WHITESPACE","\n        ",228],["T_FOREACH","foreach",229],["T_WHITESPACE"," ",229],"(",["T_STRING","Views",229],["T_DOUBLE_COLON","::",229],["T_STRING","getHandlerTypes",229],"(",")",["T_WHITESPACE"," ",229],["T_AS","as",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$handler_type",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n          ",229],["T_VARIABLE","$handler_type",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$handler_type",230],"[",["T_CONSTANT_ENCAPSED_STRING","'plural'",230],"]",";",["T_WHITESPACE","\n          ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(","!",["T_ISSET","isset",231],"(",["T_VARIABLE","$display",231],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",231],"]","[",["T_VARIABLE","$handler_type",231],"]",")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_CONTINUE","continue",232],";",["T_WHITESPACE","\n          ",232],"}",["T_WHITESPACE","\n          ",233],["T_FOREACH","foreach",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$display",234],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",234],"]","[",["T_VARIABLE","$handler_type",234],"]",["T_WHITESPACE"," ",234],["T_AS","as",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$id",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],"&",["T_VARIABLE","$handler_config",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$process",235],"(",["T_VARIABLE","$handler_config",235],")",";",["T_WHITESPACE","\n            ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$handler_config",236],["T_WHITESPACE"," ",236],["T_IS_IDENTICAL","===",236],["T_WHITESPACE"," ",236],["T_STRING","NULL",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n              ",236],["T_UNSET","unset",237],"(",["T_VARIABLE","$display",237],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",237],"]","[",["T_VARIABLE","$handler_type",237],"]","[",["T_VARIABLE","$id",237],"]",")",";",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE","\n          ",238],"}",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n      ",240],"}",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n  ",242],"}",["T_WHITESPACE","\n\n  ",243],["T_DOC_COMMENT","\/**\n   * Updates views if a base table is renamed.\n   *\n   * @param \\Drupal\\views\\Entity\\View[] $all_views\n   *   All views.\n   * @param string $entity_type_id\n   *   The entity type ID.\n   * @param string $old_base_table\n   *   The old base table name.\n   * @param string $new_base_table\n   *   The new base table name.\n   *\/",245],["T_WHITESPACE","\n  ",256],["T_PROTECTED","protected",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","baseTableRename",257],"(",["T_VARIABLE","$all_views",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$entity_type_id",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$old_base_table",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$new_base_table",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n    ",257],["T_FOREACH","foreach",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$all_views",258],["T_WHITESPACE"," ",258],["T_AS","as",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$view",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n      ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$view",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","get",259],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",259],")",["T_WHITESPACE"," ",259],["T_IS_EQUAL","==",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$old_base_table",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$view",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","set",260],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$new_base_table",260],")",";",["T_WHITESPACE","\n      ",260],"}",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","processHandlers",264],"(",["T_VARIABLE","$all_views",264],",",["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],"(",["T_ARRAY","array",264],["T_WHITESPACE"," ",264],"&",["T_VARIABLE","$handler_config",264],")",["T_WHITESPACE"," ",264],["T_USE","use",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$entity_type_id",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$old_base_table",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$new_base_table",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n      ",264],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_ISSET","isset",265],"(",["T_VARIABLE","$handler_config",265],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",265],"]",")",["T_WHITESPACE"," ",265],["T_BOOLEAN_AND","&&",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$handler_config",265],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",265],"]",["T_WHITESPACE"," ",265],["T_IS_EQUAL","==",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$entity_type_id",265],["T_WHITESPACE"," ",265],["T_BOOLEAN_AND","&&",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$handler_config",265],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",265],"]",["T_WHITESPACE"," ",265],["T_IS_EQUAL","==",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$old_base_table",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$handler_config",266],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$new_base_table",266],";",["T_WHITESPACE","\n      ",266],"}",["T_WHITESPACE","\n    ",267],"}",")",";",["T_WHITESPACE","\n  ",268],"}",["T_WHITESPACE","\n\n  ",269],["T_DOC_COMMENT","\/**\n   * Updates views if a data table is renamed.\n   *\n   * @param \\Drupal\\views\\Entity\\View[] $all_views\n   *   All views.\n   * @param string $entity_type_id\n   *   The entity type ID.\n   * @param string $old_data_table\n   *   The old data table name.\n   * @param string $new_data_table\n   *   The new data table name.\n   *\/",271],["T_WHITESPACE","\n  ",282],["T_PROTECTED","protected",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","dataTableRename",283],"(",["T_VARIABLE","$all_views",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$entity_type_id",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$old_data_table",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$new_data_table",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n    ",283],["T_FOREACH","foreach",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$all_views",284],["T_WHITESPACE"," ",284],["T_AS","as",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$view",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n      ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$view",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","get",285],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",285],")",["T_WHITESPACE"," ",285],["T_IS_EQUAL","==",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$old_data_table",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$view",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","set",286],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$new_data_table",286],")",";",["T_WHITESPACE","\n      ",286],"}",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","processHandlers",290],"(",["T_VARIABLE","$all_views",290],",",["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],"(",["T_ARRAY","array",290],["T_WHITESPACE"," ",290],"&",["T_VARIABLE","$handler_config",290],")",["T_WHITESPACE"," ",290],["T_USE","use",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$entity_type_id",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$old_data_table",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$new_data_table",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n      ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_ISSET","isset",291],"(",["T_VARIABLE","$handler_config",291],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",291],"]",")",["T_WHITESPACE"," ",291],["T_BOOLEAN_AND","&&",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$handler_config",291],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",291],"]",["T_WHITESPACE"," ",291],["T_IS_EQUAL","==",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$entity_type_id",291],["T_WHITESPACE"," ",291],["T_BOOLEAN_AND","&&",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$handler_config",291],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",291],"]",["T_WHITESPACE"," ",291],["T_IS_EQUAL","==",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$old_data_table",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$handler_config",292],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",292],"]",["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$new_data_table",292],";",["T_WHITESPACE","\n      ",292],"}",["T_WHITESPACE","\n    ",293],"}",")",";",["T_WHITESPACE","\n  ",294],"}",["T_WHITESPACE","\n\n  ",295],["T_DOC_COMMENT","\/**\n   * Updates views if a data table is added.\n   *\n   * @param \\Drupal\\views\\Entity\\View[] $all_views\n   *   All views.\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_type\n   *   The entity type.\n   * @param string $new_data_table\n   *   The new data table.\n   * @param string $base_table\n   *   The base table.\n   *\/",297],["T_WHITESPACE","\n  ",308],["T_PROTECTED","protected",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","dataTableAddition",309],"(",["T_VARIABLE","$all_views",309],",",["T_WHITESPACE"," ",309],["T_STRING","EntityTypeInterface",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$entity_type",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$new_data_table",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$base_table",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n    ",309],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\Sql\\SqlContentEntityStorage $storage *\/",310],["T_WHITESPACE","\n    ",310],["T_VARIABLE","$entity_type_id",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$entity_type",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","id",311],"(",")",";",["T_WHITESPACE","\n    ",311],["T_VARIABLE","$storage",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","entityManager",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getStorage",312],"(",["T_VARIABLE","$entity_type_id",312],")",";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$storage",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","setEntityType",313],"(",["T_VARIABLE","$entity_type",313],")",";",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$table_mapping",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$storage",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getTableMapping",314],"(",")",";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$data_table_fields",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$table_mapping",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getFieldNames",315],"(",["T_VARIABLE","$new_data_table",315],")",";",["T_WHITESPACE","\n    ",315],["T_VARIABLE","$base_table_fields",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$table_mapping",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getFieldNames",316],"(",["T_VARIABLE","$base_table",316],")",";",["T_WHITESPACE","\n\n    ",316],["T_VARIABLE","$data_table",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$new_data_table",318],";",["T_WHITESPACE","\n\n    ",318],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","processHandlers",320],"(",["T_VARIABLE","$all_views",320],",",["T_WHITESPACE"," ",320],["T_FUNCTION","function",320],["T_WHITESPACE"," ",320],"(",["T_ARRAY","array",320],["T_WHITESPACE"," ",320],"&",["T_VARIABLE","$handler_config",320],")",["T_WHITESPACE"," ",320],["T_USE","use",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$entity_type_id",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$base_table",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$data_table",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$base_table_fields",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$data_table_fields",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n      ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(",["T_ISSET","isset",321],"(",["T_VARIABLE","$handler_config",321],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",321],"]",")",["T_WHITESPACE"," ",321],["T_BOOLEAN_AND","&&",321],["T_WHITESPACE"," ",321],["T_ISSET","isset",321],"(",["T_VARIABLE","$handler_config",321],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_field'",321],"]",")",["T_WHITESPACE"," ",321],["T_BOOLEAN_AND","&&",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$handler_config",321],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",321],"]",["T_WHITESPACE"," ",321],["T_IS_EQUAL","==",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$entity_type_id",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n        ",321],["T_COMMENT","\/\/ Move all fields which just exists on the data table.\n",322],["T_WHITESPACE","        ",323],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$handler_config",323],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",323],"]",["T_WHITESPACE"," ",323],["T_IS_EQUAL","==",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$base_table",323],["T_WHITESPACE"," ",323],["T_BOOLEAN_AND","&&",323],["T_WHITESPACE"," ",323],["T_STRING","in_array",323],"(",["T_VARIABLE","$handler_config",323],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_field'",323],"]",",",["T_WHITESPACE"," ",323],["T_VARIABLE","$data_table_fields",323],")",["T_WHITESPACE"," ",323],["T_BOOLEAN_AND","&&",323],["T_WHITESPACE"," ",323],"!",["T_STRING","in_array",323],"(",["T_VARIABLE","$handler_config",323],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_field'",323],"]",",",["T_WHITESPACE"," ",323],["T_VARIABLE","$base_table_fields",323],")",")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n          ",323],["T_VARIABLE","$handler_config",324],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",324],"]",["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$data_table",324],";",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n      ",325],"}",["T_WHITESPACE","\n    ",326],"}",")",";",["T_WHITESPACE","\n  ",327],"}",["T_WHITESPACE","\n\n  ",328],["T_DOC_COMMENT","\/**\n   * Updates views if a data table is removed.\n   *\n   * @param \\Drupal\\views\\Entity\\View[] $all_views\n   *   All views.\n   * @param string $entity_type_id\n   *   The entity type ID.\n   * @param string $old_data_table\n   *   The name of the previous existing data table.\n   * @param string $base_table\n   *   The name of the base table.\n   *\/",330],["T_WHITESPACE","\n  ",341],["T_PROTECTED","protected",342],["T_WHITESPACE"," ",342],["T_FUNCTION","function",342],["T_WHITESPACE"," ",342],["T_STRING","dataTableRemoval",342],"(",["T_VARIABLE","$all_views",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$entity_type_id",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$old_data_table",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$base_table",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n    ",342],["T_COMMENT","\/\/ We move back the data table back to the base table.\n",343],["T_WHITESPACE","    ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","processHandlers",344],"(",["T_VARIABLE","$all_views",344],",",["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],"(",["T_ARRAY","array",344],["T_WHITESPACE"," ",344],"&",["T_VARIABLE","$handler_config",344],")",["T_WHITESPACE"," ",344],["T_USE","use",344],["T_WHITESPACE"," ",344],"(",["T_VARIABLE","$entity_type_id",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$old_data_table",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$base_table",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n      ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_ISSET","isset",345],"(",["T_VARIABLE","$handler_config",345],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",345],"]",")",["T_WHITESPACE"," ",345],["T_BOOLEAN_AND","&&",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$handler_config",345],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",345],"]",["T_WHITESPACE"," ",345],["T_IS_EQUAL","==",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$entity_type_id",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n        ",345],["T_IF","if",346],["T_WHITESPACE"," ",346],"(",["T_VARIABLE","$handler_config",346],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",346],"]",["T_WHITESPACE"," ",346],["T_IS_EQUAL","==",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$old_data_table",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n          ",346],["T_VARIABLE","$handler_config",347],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",347],"]",["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$base_table",347],";",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE","\n      ",348],"}",["T_WHITESPACE","\n    ",349],"}",")",";",["T_WHITESPACE","\n  ",350],"}",["T_WHITESPACE","\n\n  ",351],["T_DOC_COMMENT","\/**\n   * Updates views if revision support is removed\n   *\n   * @param \\Drupal\\views\\Entity\\View[] $all_views\n   *   All views.\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $original\n   *   The origin entity type.\n   *\/",353],["T_WHITESPACE","\n  ",360],["T_PROTECTED","protected",361],["T_WHITESPACE"," ",361],["T_FUNCTION","function",361],["T_WHITESPACE"," ",361],["T_STRING","revisionRemoval",361],"(",["T_VARIABLE","$all_views",361],",",["T_WHITESPACE"," ",361],["T_STRING","EntityTypeInterface",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$original",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$revision_base_table",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$original",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getRevisionTable",362],"(",")",";",["T_WHITESPACE","\n    ",362],["T_VARIABLE","$revision_data_table",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$original",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getRevisionDataTable",363],"(",")",";",["T_WHITESPACE","\n\n    ",363],["T_FOREACH","foreach",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$all_views",365],["T_WHITESPACE"," ",365],["T_AS","as",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$view",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n      ",365],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_STRING","in_array",366],"(",["T_VARIABLE","$view",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","get",366],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",366],")",",",["T_WHITESPACE"," ",366],"[",["T_VARIABLE","$revision_base_table",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$revision_data_table",366],"]",")",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n        ",366],["T_COMMENT","\/\/ Let's disable the views as we no longer support revisions.\n",367],["T_WHITESPACE","        ",368],["T_VARIABLE","$view",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","setStatus",368],"(",["T_STRING","FALSE",368],")",";",["T_WHITESPACE","\n      ",368],"}",["T_WHITESPACE","\n\n      ",369],["T_COMMENT","\/\/ For any kind of field, let's rely on the broken handler functionality.\n",371],["T_WHITESPACE","    ",372],"}",["T_WHITESPACE","\n  ",372],"}",["T_WHITESPACE","\n\n",373],"}",["T_WHITESPACE","\n",375]]
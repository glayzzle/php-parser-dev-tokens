[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","views",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","views",5],["T_NS_SEPARATOR","\\",5],["T_STRING","field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Field",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Provides a class for assertions to check for the expected result of a View.\n *\/",7],["T_WHITESPACE","\n",9],["T_TRAIT","trait",10],["T_WHITESPACE"," ",10],["T_STRING","ViewResultAssertionTrait",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Verifies that a result set returned by a View matches expected values.\n   *\n   * The comparison is done on the string representation of the columns of the\n   * column map, taking the order of the rows into account, but not the order\n   * of the columns.\n   *\n   * @param \\Drupal\\views\\ViewExecutable $view\n   *   An executed View.\n   * @param array $expected_result\n   *   An expected result set.\n   * @param array $column_map\n   *   (optional) An associative array mapping the columns of the result set\n   *   from the view (as keys) and the expected result set (as values).\n   * @param string $message\n   *   (optional) A custom message to display with the assertion. Defaults to\n   *   'Identical result set.'\n   *\n   * @return bool\n   *   TRUE if the assertion succeeded, or FALSE otherwise.\n   *\/",12],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","assertIdenticalResultset",33],"(",["T_VARIABLE","$view",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$expected_result",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$column_map",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",")",",",["T_WHITESPACE"," ",33],["T_VARIABLE","$message",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","NULL",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_RETURN","return",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","assertIdenticalResultsetHelper",34],"(",["T_VARIABLE","$view",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$expected_result",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$column_map",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'assertIdentical'",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$message",34],")",";",["T_WHITESPACE","\n  ",34],"}",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Verifies that a result set returned by a View differs from certain values.\n   *\n   * Inverse of ViewsTestCase::assertIdenticalResultset().\n   *\n   * @param \\Drupal\\views\\ViewExecutable $view\n   *   An executed View.\n   * @param array $expected_result\n   *   An expected result set.\n   * @param array $column_map\n   *   (optional) An associative array mapping the columns of the result set\n   *   from the view (as keys) and the expected result set (as values).\n   * @param string $message\n   *   (optional) A custom message to display with the assertion. Defaults to\n   *   'Non-identical result set.'\n   *\n   * @return bool\n   *   TRUE if the assertion succeeded, or FALSE otherwise.\n   *\/",37],["T_WHITESPACE","\n  ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","assertNotIdenticalResultset",56],"(",["T_VARIABLE","$view",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$expected_result",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$column_map",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",")",",",["T_WHITESPACE"," ",56],["T_VARIABLE","$message",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","NULL",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n    ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertIdenticalResultsetHelper",57],"(",["T_VARIABLE","$view",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$expected_result",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$column_map",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'assertNotIdentical'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$message",57],")",";",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * Performs View result assertions.\n   *\n   * This is a helper method for ViewTestBase::assertIdenticalResultset() and\n   * ViewTestBase::assertNotIdenticalResultset().\n   *\n   * @param \\Drupal\\views\\ViewExecutable $view\n   *   An executed View.\n   * @param array $expected_result\n   *   An expected result set.\n   * @param array $column_map\n   *   An associative array mapping the columns of the result set\n   *   from the view (as keys) and the expected result set (as values).\n   * @param string $assert_method\n   *   The TestBase assertion method to use (either 'assertIdentical' or\n   *   'assertNotIdentical').\n   * @param string $message\n   *   (optional) The message to display with the assertion.\n   *\n   * @return bool\n   *   TRUE if the assertion succeeded, or FALSE otherwise.\n   *\/",60],["T_WHITESPACE","\n  ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","assertIdenticalResultsetHelper",82],"(",["T_VARIABLE","$view",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$expected_result",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$column_map",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$assert_method",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$message",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","NULL",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n    ",82],["T_COMMENT","\/\/ Convert $view->result to an array of arrays.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$result",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",")",";",["T_WHITESPACE","\n    ",84],["T_FOREACH","foreach",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$view",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","result",85],["T_WHITESPACE"," ",85],["T_AS","as",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$key",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$value",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n      ",85],["T_VARIABLE","$row",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",")",";",["T_WHITESPACE","\n      ",86],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$column_map",87],["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$view_column",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$expected_column",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_STRING","property_exists",88],"(",["T_VARIABLE","$value",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$view_column",88],")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n          ",88],["T_VARIABLE","$row",89],"[",["T_VARIABLE","$expected_column",89],"]",["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING_CAST","(string)",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$value",89],["T_OBJECT_OPERATOR","->",89],["T_VARIABLE","$view_column",89],";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_COMMENT","\/\/ The comparison will be done on the string representation of the value.\n",91],["T_WHITESPACE","        ",92],["T_COMMENT","\/\/ For entity fields we don't have the raw value. Let's try to fetch it\n",92],["T_WHITESPACE","        ",93],["T_COMMENT","\/\/ using the entity itself.\n",93],["T_WHITESPACE","        ",94],["T_ELSEIF","elseif",94],["T_WHITESPACE"," ",94],"(",["T_EMPTY","empty",94],"(",["T_VARIABLE","$value",94],["T_OBJECT_OPERATOR","->",94],["T_VARIABLE","$view_column",94],")",["T_WHITESPACE"," ",94],["T_BOOLEAN_AND","&&",94],["T_WHITESPACE"," ",94],["T_ISSET","isset",94],"(",["T_VARIABLE","$view",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","field",94],"[",["T_VARIABLE","$expected_column",94],"]",")",["T_WHITESPACE"," ",94],["T_BOOLEAN_AND","&&",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$field",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$view",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","field",94],"[",["T_VARIABLE","$expected_column",94],"]",")",["T_WHITESPACE"," ",94],["T_BOOLEAN_AND","&&",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$field",94],["T_WHITESPACE"," ",94],["T_INSTANCEOF","instanceof",94],["T_WHITESPACE"," ",94],["T_STRING","Field",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n          ",94],["T_VARIABLE","$column",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","NULL",95],";",["T_WHITESPACE","\n          ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_STRING","count",96],"(",["T_STRING","explode",96],"(",["T_CONSTANT_ENCAPSED_STRING","':'",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$view_column",96],")",")",["T_WHITESPACE"," ",96],["T_IS_EQUAL","==",96],["T_WHITESPACE"," ",96],["T_LNUMBER","2",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$column",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","explode",97],"(",["T_CONSTANT_ENCAPSED_STRING","':'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$view_column",97],")","[",["T_LNUMBER","1",97],"]",";",["T_WHITESPACE","\n          ",97],"}",["T_WHITESPACE","\n          ",98],["T_VARIABLE","$row",99],"[",["T_VARIABLE","$expected_column",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$field",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getValue",99],"(",["T_VARIABLE","$value",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$column",99],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n      ",100],"}",["T_WHITESPACE","\n      ",101],["T_VARIABLE","$result",102],"[",["T_VARIABLE","$key",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$row",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_COMMENT","\/\/ Remove the columns we don't need from the expected result.\n",105],["T_WHITESPACE","    ",106],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$expected_result",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$key",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$value",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$row",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",";",["T_WHITESPACE","\n      ",107],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$column_map",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$expected_column",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n        ",108],["T_COMMENT","\/\/ The comparison will be done on the string representation of the value.\n",109],["T_WHITESPACE","        ",110],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_STRING","is_object",110],"(",["T_VARIABLE","$value",110],")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n          ",110],["T_VARIABLE","$row",111],"[",["T_VARIABLE","$expected_column",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING_CAST","(string)",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$value",111],["T_OBJECT_OPERATOR","->",111],["T_VARIABLE","$expected_column",111],";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_COMMENT","\/\/ This case is about fields with multiple values.\n",113],["T_WHITESPACE","        ",114],["T_ELSEIF","elseif",114],["T_WHITESPACE"," ",114],"(",["T_STRING","is_array",114],"(",["T_VARIABLE","$value",114],"[",["T_VARIABLE","$expected_column",114],"]",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n          ",114],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_STRING","array_keys",115],"(",["T_VARIABLE","$value",115],"[",["T_VARIABLE","$expected_column",115],"]",")",["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$delta",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$row",116],"[",["T_VARIABLE","$expected_column",116],"]","[",["T_VARIABLE","$delta",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING_CAST","(string)",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$value",116],"[",["T_VARIABLE","$expected_column",116],"]","[",["T_VARIABLE","$delta",116],"]",";",["T_WHITESPACE","\n          ",116],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_ELSE","else",119],["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n          ",119],["T_VARIABLE","$row",120],"[",["T_VARIABLE","$expected_column",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING_CAST","(string)",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$value",120],"[",["T_VARIABLE","$expected_column",120],"]",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n      ",121],"}",["T_WHITESPACE","\n      ",122],["T_VARIABLE","$expected_result",123],"[",["T_VARIABLE","$key",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$row",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","verbose",126],"(",["T_CONSTANT_ENCAPSED_STRING","'<pre style=\"white-space: pre-wrap;\">'",126],["T_WHITESPACE","\n      ",126],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\nQuery:\\n\"",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$view",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","build_info",127],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",127],"]",["T_WHITESPACE","\n      ",127],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\nQuery arguments:\\n\"",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_STRING","var_export",128],"(",["T_VARIABLE","$view",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","build_info",128],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",128],"]",["T_OBJECT_OPERATOR","->",128],["T_STRING","getArguments",128],"(",")",",",["T_WHITESPACE"," ",128],["T_STRING","TRUE",128],")",["T_WHITESPACE","\n      ",128],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\nActual result:\\n\"",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_STRING","var_export",129],"(",["T_VARIABLE","$result",129],",",["T_WHITESPACE"," ",129],["T_STRING","TRUE",129],")",["T_WHITESPACE","\n      ",129],".",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\nExpected result:\\n\"",130],["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_STRING","var_export",130],"(",["T_VARIABLE","$expected_result",130],",",["T_WHITESPACE"," ",130],["T_STRING","TRUE",130],")",")",";",["T_WHITESPACE","\n\n    ",130],["T_COMMENT","\/\/ Reset the numbering of the arrays.\n",132],["T_WHITESPACE","    ",133],["T_VARIABLE","$result",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","array_values",133],"(",["T_VARIABLE","$result",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$expected_result",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","array_values",134],"(",["T_VARIABLE","$expected_result",134],")",";",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ Do the actual comparison.\n",136],["T_WHITESPACE","    ",137],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_ISSET","isset",137],"(",["T_VARIABLE","$message",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$not",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],"(",["T_STRING","strpos",138],"(",["T_VARIABLE","$assert_method",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'Not'",138],")",["T_WHITESPACE"," ",138],"?",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'not'",138],["T_WHITESPACE"," ",138],":",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","''",138],")",";",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$message",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","format_string",139],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Actual result <pre>\\n@actual\\n<\/pre> is ",139],["T_VARIABLE","$not",139],["T_ENCAPSED_AND_WHITESPACE"," identical to expected <pre>\\n@expected\\n<\/pre>",139],"\"",",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_WHITESPACE","\n        ",139],["T_CONSTANT_ENCAPSED_STRING","'@actual'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_STRING","var_export",140],"(",["T_VARIABLE","$result",140],",",["T_WHITESPACE"," ",140],["T_STRING","TRUE",140],")",",",["T_WHITESPACE","\n        ",140],["T_CONSTANT_ENCAPSED_STRING","'@expected'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_STRING","var_export",141],"(",["T_VARIABLE","$expected_result",141],",",["T_WHITESPACE"," ",141],["T_STRING","TRUE",141],")",",",["T_WHITESPACE","\n      ",141],")",")",";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n    ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_VARIABLE","$assert_method",144],"(",["T_VARIABLE","$result",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$expected_result",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$message",144],")",";",["T_WHITESPACE","\n  ",144],"}",["T_WHITESPACE","\n\n",145],"}",["T_WHITESPACE","\n",147]]
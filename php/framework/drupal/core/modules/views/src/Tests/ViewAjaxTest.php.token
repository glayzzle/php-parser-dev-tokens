[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Serialization",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Json",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EventSubscriber",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MainContentViewSubscriber",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the ajax view functionality.\n *\n * @group views\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ViewAjaxTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","ViewTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$testViews",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'test_ajax_view'",20],")",";",["T_WHITESPACE","\n\n  ",20],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","setUp",22],"(",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_STRING","parent",23],["T_DOUBLE_COLON","::",23],["T_STRING","setUp",23],"(",")",";",["T_WHITESPACE","\n\n    ",23],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","enableViewsTestModule",25],"(",")",";",["T_WHITESPACE","\n  ",25],"}",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Tests an ajax view.\n   *\/",28],["T_WHITESPACE","\n  ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","testAjaxView",31],"(",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","drupalGet",32],"(",["T_CONSTANT_ENCAPSED_STRING","'test_ajax_view'",32],")",";",["T_WHITESPACE","\n\n    ",32],["T_VARIABLE","$drupal_settings",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getDrupalSettings",34],"(",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertTrue",35],"(",["T_ISSET","isset",35],"(",["T_VARIABLE","$drupal_settings",35],"[",["T_CONSTANT_ENCAPSED_STRING","'views'",35],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajax_path'",35],"]",")",",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'The Ajax callback path is set in drupalSettings.'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","assertEqual",36],"(",["T_STRING","count",36],"(",["T_VARIABLE","$drupal_settings",36],"[",["T_CONSTANT_ENCAPSED_STRING","'views'",36],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxViews'",36],"]",")",",",["T_WHITESPACE"," ",36],["T_LNUMBER","1",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$view_entry",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","array_keys",37],"(",["T_VARIABLE","$drupal_settings",37],"[",["T_CONSTANT_ENCAPSED_STRING","'views'",37],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxViews'",37],"]",")","[",["T_LNUMBER","0",37],"]",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertEqual",38],"(",["T_VARIABLE","$drupal_settings",38],"[",["T_CONSTANT_ENCAPSED_STRING","'views'",38],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxViews'",38],"]","[",["T_VARIABLE","$view_entry",38],"]","[",["T_CONSTANT_ENCAPSED_STRING","'view_name'",38],"]",",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'test_ajax_view'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'The view\\'s ajaxViews array entry has the correct \\'view_name\\' key.'",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertEqual",39],"(",["T_VARIABLE","$drupal_settings",39],"[",["T_CONSTANT_ENCAPSED_STRING","'views'",39],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxViews'",39],"]","[",["T_VARIABLE","$view_entry",39],"]","[",["T_CONSTANT_ENCAPSED_STRING","'view_display_id'",39],"]",",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'page_1'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'The view\\'s ajaxViews array entry has the correct \\'view_display_id\\' key.'",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_VARIABLE","$data",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$data",42],"[",["T_CONSTANT_ENCAPSED_STRING","'view_name'",42],"]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'test_ajax_view'",42],";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$data",43],"[",["T_CONSTANT_ENCAPSED_STRING","'view_display_id'",43],"]",["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'test_ajax_view'",43],";",["T_WHITESPACE","\n\n    ",43],["T_VARIABLE","$post",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'view_name'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'test_ajax_view'",46],",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'view_display_id'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'page_1'",47],",",["T_WHITESPACE","\n    ",47],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$post",49],["T_WHITESPACE"," ",49],["T_PLUS_EQUAL","+=",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getAjaxPageStatePostData",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$response",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","drupalPost",50],"(",["T_CONSTANT_ENCAPSED_STRING","'views\/ajax'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","''",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$post",50],",",["T_WHITESPACE"," ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],"[",["T_STRING","MainContentViewSubscriber",50],["T_DOUBLE_COLON","::",50],["T_STRING","WRAPPER_FORMAT",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",50],"]","]",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$data",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","Json",51],["T_DOUBLE_COLON","::",51],["T_STRING","decode",51],"(",["T_VARIABLE","$response",51],")",";",["T_WHITESPACE","\n\n    ",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertTrue",53],"(",["T_ISSET","isset",53],"(",["T_VARIABLE","$data",53],"[",["T_LNUMBER","0",53],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",53],"]","[",["T_CONSTANT_ENCAPSED_STRING","'views'",53],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxViews'",53],"]",")",")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Ensure that the view insert command is part of the result.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertEqual",56],"(",["T_VARIABLE","$data",56],"[",["T_LNUMBER","1",56],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",56],"]",",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'insert'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertTrue",57],"(",["T_STRING","strpos",57],"(",["T_VARIABLE","$data",57],"[",["T_LNUMBER","1",57],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selector'",57],"]",",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'.js-view-dom-id-'",57],")",["T_WHITESPACE"," ",57],["T_IS_IDENTICAL","===",57],["T_WHITESPACE"," ",57],["T_LNUMBER","0",57],")",";",["T_WHITESPACE","\n\n    ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","setRawContent",59],"(",["T_VARIABLE","$data",59],"[",["T_LNUMBER","1",59],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",59],"]",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$result",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","xpath",60],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"views-row\")]'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertEqual",61],"(",["T_STRING","count",61],"(",["T_VARIABLE","$result",61],")",",",["T_WHITESPACE"," ",61],["T_LNUMBER","2",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'Ensure that two items are rendered in the HTML.'",61],")",";",["T_WHITESPACE","\n  ",61],"}",["T_WHITESPACE","\n\n",62],"}",["T_WHITESPACE","\n",64]]
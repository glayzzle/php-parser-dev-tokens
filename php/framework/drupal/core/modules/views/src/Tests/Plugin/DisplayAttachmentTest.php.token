[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","views",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Views",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests the attachment display plugin.\n *\n * @group views\n * @see \\Drupal\\views\\Plugin\\views\\display\\Attachment\n *\/",7],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","DisplayAttachmentTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","PluginTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$testViews",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'test_display_attachment'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'test_attached_disabled'",20],")",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_STATIC","static",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$modules",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_ARRAY","array",27],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'views'",27],")",";",["T_WHITESPACE","\n\n  ",27],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","setUp",29],"(",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_STRING","parent",30],["T_DOUBLE_COLON","::",30],["T_STRING","setUp",30],"(",")",";",["T_WHITESPACE","\n\n    ",30],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","enableViewsTestModule",32],"(",")",";",["T_WHITESPACE","\n\n    ",32],["T_VARIABLE","$admin_user",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","drupalCreateUser",34],"(",["T_ARRAY","array",34],"(",["T_CONSTANT_ENCAPSED_STRING","'administer site configuration'",34],")",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","drupalLogin",35],"(",["T_VARIABLE","$admin_user",35],")",";",["T_WHITESPACE","\n  ",35],"}",["T_WHITESPACE","\n\n\n  ",36],["T_DOC_COMMENT","\/**\n   * Tests the attachment plugin.\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","testAttachment",42],"(",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","drupalGet",43],"(",["T_CONSTANT_ENCAPSED_STRING","'test-display-attachment'",43],")",";",["T_WHITESPACE","\n\n    ",43],["T_VARIABLE","$result",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","xpath",45],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"view-content\")]'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertEqual",46],"(",["T_STRING","count",46],"(",["T_VARIABLE","$result",46],")",",",["T_WHITESPACE"," ",46],["T_LNUMBER","2",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'Both actual view and the attachment is rendered.'",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_VARIABLE","$result",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","xpath",48],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"attachment-after\")]'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertEqual",49],"(",["T_STRING","count",49],"(",["T_VARIABLE","$result",49],")",",",["T_WHITESPACE"," ",49],["T_LNUMBER","0",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'The attachment is not rendered after the actual view.'",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_VARIABLE","$result",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","xpath",51],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"attachment-before\")]'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertEqual",52],"(",["T_STRING","count",52],"(",["T_VARIABLE","$result",52],")",",",["T_WHITESPACE"," ",52],["T_LNUMBER","1",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'The attachment is rendered before the actual view.'",52],")",";",["T_WHITESPACE","\n  ",52],"}",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * Tests that nothing is output when the attachment displays are disabled.\n   *\/",55],["T_WHITESPACE","\n  ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","testDisabledAttachments",58],"(",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","drupalCreateContentType",59],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'page'",59],"]",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","drupalCreateNode",60],"(",")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Ensure that the feed_1 display is attached to the page_1 display.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$view",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","Views",63],["T_DOUBLE_COLON","::",63],["T_STRING","getView",63],"(",["T_CONSTANT_ENCAPSED_STRING","'test_attached_disabled'",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$view",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setDisplay",64],"(",["T_CONSTANT_ENCAPSED_STRING","'page_1'",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$attached_displays",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$view",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","display_handler",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getAttachedDisplays",65],"(",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertTrue",66],"(",["T_STRING","in_array",66],"(",["T_CONSTANT_ENCAPSED_STRING","'attachment_1'",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$attached_displays",66],")",",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'The attachment_1 display is attached to the page display.'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertTrue",67],"(",["T_STRING","in_array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'attachment_2'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$attached_displays",67],")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'The attachment_2 display is attached to the page display.'",67],")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Check that the attachments are output on the page display.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","drupalGet",70],"(",["T_CONSTANT_ENCAPSED_STRING","'test-attached-disabled'",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$result",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","xpath",72],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"view-content\")]'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertEqual",73],"(",["T_STRING","count",73],"(",["T_VARIABLE","$result",73],")",",",["T_WHITESPACE"," ",73],["T_LNUMBER","3",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'The page view and the attachments are rendered.'",73],")",";",["T_WHITESPACE","\n\n    ",73],["T_VARIABLE","$result",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","xpath",75],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"attachment-before\")]'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_STRING","count",76],"(",["T_VARIABLE","$result",76],")",",",["T_WHITESPACE"," ",76],["T_LNUMBER","1",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'The attachment is rendered before the page view.'",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_VARIABLE","$result",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","xpath",78],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"attachment-after\")]'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertEqual",79],"(",["T_STRING","count",79],"(",["T_VARIABLE","$result",79],")",",",["T_WHITESPACE"," ",79],["T_LNUMBER","1",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'The attachment is rendered after the page view.'",79],")",";",["T_WHITESPACE","\n\n    ",79],["T_COMMENT","\/\/ Disable the attachment_1 display.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$view",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","displayHandlers",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","get",82],"(",["T_CONSTANT_ENCAPSED_STRING","'attachment_1'",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","setOption",82],"(",["T_CONSTANT_ENCAPSED_STRING","'enabled'",82],",",["T_WHITESPACE"," ",82],["T_STRING","FALSE",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$view",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","save",83],"(",")",";",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ Test that the before attachment is not displayed.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","drupalGet",86],"(",["T_CONSTANT_ENCAPSED_STRING","'\/test-attached-disabled'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$result",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","xpath",87],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"view-content\")]'",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertEqual",88],"(",["T_STRING","count",88],"(",["T_VARIABLE","$result",88],")",",",["T_WHITESPACE"," ",88],["T_LNUMBER","2",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'The page view and only one attachment are rendered.'",88],")",";",["T_WHITESPACE","\n\n    ",88],["T_VARIABLE","$result",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","xpath",90],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"attachment-before\")]'",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertEqual",91],"(",["T_STRING","count",91],"(",["T_VARIABLE","$result",91],")",",",["T_WHITESPACE"," ",91],["T_LNUMBER","0",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'The attachment_1 is not rendered.'",91],")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Disable the attachment_2 display.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$view",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","displayHandlers",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","get",94],"(",["T_CONSTANT_ENCAPSED_STRING","'attachment_2'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","setOption",94],"(",["T_CONSTANT_ENCAPSED_STRING","'enabled'",94],",",["T_WHITESPACE"," ",94],["T_STRING","FALSE",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$view",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","save",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Test that the after attachment is not displayed.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","drupalGet",98],"(",["T_CONSTANT_ENCAPSED_STRING","'\/test-attached-disabled'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$result",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","xpath",99],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"view-content\")]'",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertEqual",100],"(",["T_STRING","count",100],"(",["T_VARIABLE","$result",100],")",",",["T_WHITESPACE"," ",100],["T_LNUMBER","1",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'The page view is rendered without attachments.'",100],")",";",["T_WHITESPACE","\n\n    ",100],["T_VARIABLE","$result",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","xpath",102],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"attachment-after\")]'",102],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertEqual",103],"(",["T_STRING","count",103],"(",["T_VARIABLE","$result",103],")",",",["T_WHITESPACE"," ",103],["T_LNUMBER","0",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'The attachment_2 is not rendered.'",103],")",";",["T_WHITESPACE","\n  ",103],"}",["T_WHITESPACE","\n\n",104],"}",["T_WHITESPACE","\n",106]]
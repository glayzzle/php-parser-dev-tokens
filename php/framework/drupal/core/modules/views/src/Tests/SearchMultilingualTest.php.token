[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","language",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigurableLanguage",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests search integration filters with multilingual nodes.\n *\n * @group views\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","SearchMultilingualTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","ViewTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'search'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'language'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'content_translation'",19],")",";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_STATIC","static",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$testViews",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_ARRAY","array",26],"(",["T_CONSTANT_ENCAPSED_STRING","'test_search'",26],")",";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Tests search with multilingual nodes.\n   *\/",28],["T_WHITESPACE","\n  ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","testMultilingualSearchFilter",31],"(",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_COMMENT","\/\/ Create a user with admin for languages, content, and content types, plus\n",32],["T_WHITESPACE","    ",33],["T_COMMENT","\/\/ the ability to access content and searches.\n",33],["T_WHITESPACE","    ",34],["T_VARIABLE","$user",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","drupalCreateUser",34],"(",["T_ARRAY","array",34],"(",["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'administer content types'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'administer languages'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'administer content translation'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'access content'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'search content'",34],")",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","drupalLogin",35],"(",["T_VARIABLE","$user",35],")",";",["T_WHITESPACE","\n\n    ",35],["T_COMMENT","\/\/ Add Spanish language programmatically.\n",37],["T_WHITESPACE","    ",38],["T_STRING","ConfigurableLanguage",38],["T_DOUBLE_COLON","::",38],["T_STRING","createFromLangcode",38],"(",["T_CONSTANT_ENCAPSED_STRING","'es'",38],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","save",38],"(",")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Create a content type and make it translatable.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$type",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","drupalCreateContentType",41],"(",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$edit",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_WHITESPACE","\n      ",42],["T_CONSTANT_ENCAPSED_STRING","'language_configuration[language_alterable]'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_STRING","TRUE",43],",",["T_WHITESPACE","\n    ",43],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","drupalPostForm",45],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/'",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_VARIABLE","$type",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","id",45],"(",")",",",["T_WHITESPACE"," ",45],["T_VARIABLE","$edit",45],",",["T_WHITESPACE"," ",45],["T_STRING","t",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Save content type'",45],")",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$edit",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'entity_types[node]'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_STRING","TRUE",47],",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'settings[node]['",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_VARIABLE","$type",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","id",48],"(",")",["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'][translatable]'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_STRING","TRUE",48],",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'settings[node]['",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_VARIABLE","$type",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","id",49],"(",")",["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'][fields][title]'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_STRING","TRUE",49],",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'settings[node]['",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_VARIABLE","$type",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","id",50],"(",")",["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'][fields][body]'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_STRING","TRUE",50],",",["T_WHITESPACE","\n    ",50],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","drupalPostForm",52],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/content-language'",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$edit",52],",",["T_WHITESPACE"," ",52],["T_STRING","t",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Save configuration'",52],")",")",";",["T_WHITESPACE","\n    ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Drupal",53],["T_DOUBLE_COLON","::",53],["T_STRING","entityManager",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","clearCachedDefinitions",53],"(",")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Add a node in English, with title \"sandwich\".\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$values",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'title'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'sandwich'",57],",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'type'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$type",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","id",58],"(",")",",",["T_WHITESPACE","\n    ",58],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$node",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","drupalCreateNode",60],"(",["T_VARIABLE","$values",60],")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ \"Translate\" this node into Spanish, with title \"pizza\".\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$node",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","addTranslation",63],"(",["T_CONSTANT_ENCAPSED_STRING","'es'",63],",",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'pizza'",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'status'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_STRING","NODE_PUBLISHED",63],")",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$node",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","save",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Run cron so that the search index tables are updated.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","cronRun",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Test the keyword filter by visiting the page.\n",69],["T_WHITESPACE","    ",70],["T_COMMENT","\/\/ The views are in the test view 'test_search', and they just display the\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ titles of the nodes in the result, as links.\n",71],["T_WHITESPACE","\n    ",72],["T_COMMENT","\/\/ Page with a keyword filter of 'pizza'. This should find the Spanish\n",73],["T_WHITESPACE","    ",74],["T_COMMENT","\/\/ translated node, which has 'pizza' in the title, but not the English\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ one, which does not have the word 'pizza' in it.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","drupalGet",76],"(",["T_CONSTANT_ENCAPSED_STRING","'test-filter'",76],")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertLink",77],"(",["T_CONSTANT_ENCAPSED_STRING","'pizza'",77],",",["T_WHITESPACE"," ",77],["T_LNUMBER","0",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'Found translation with matching title'",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertNoLink",78],"(",["T_CONSTANT_ENCAPSED_STRING","'sandwich'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'Did not find translation with non-matching title'",78],")",";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n",79],"}",["T_WHITESPACE","\n",81]]
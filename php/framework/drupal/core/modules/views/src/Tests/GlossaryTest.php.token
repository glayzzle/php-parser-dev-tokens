[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LanguageInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Url",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","views",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Views",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests glossary functionality of views.\n *\n * @group views\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","GlossaryTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","ViewTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","AssertViewsCacheTagsTrait",17],";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Tests the default glossary view.\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","testGlossaryView",29],"(",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_COMMENT","\/\/ Create a content type and add some nodes, with a non-random title.\n",30],["T_WHITESPACE","    ",31],["T_VARIABLE","$type",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","drupalCreateContentType",31],"(",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$nodes_per_char",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'d'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_LNUMBER","1",33],",",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'r'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_LNUMBER","4",34],",",["T_WHITESPACE","\n      ",34],["T_CONSTANT_ENCAPSED_STRING","'u'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_LNUMBER","10",35],",",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'p'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_LNUMBER","2",36],",",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'a'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_LNUMBER","3",37],",",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'l'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_LNUMBER","6",38],",",["T_WHITESPACE","\n    ",38],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$nodes_by_char",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],"[","]",";",["T_WHITESPACE","\n    ",40],["T_FOREACH","foreach",41],["T_WHITESPACE"," ",41],"(",["T_VARIABLE","$nodes_per_char",41],["T_WHITESPACE"," ",41],["T_AS","as",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$char",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$count",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n      ",41],["T_VARIABLE","$setting",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_WHITESPACE","\n        ",42],["T_CONSTANT_ENCAPSED_STRING","'type'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$type",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","id",43],"(",")",["T_WHITESPACE","\n      ",43],")",";",["T_WHITESPACE","\n      ",44],["T_FOR","for",45],["T_WHITESPACE"," ",45],"(",["T_VARIABLE","$i",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_LNUMBER","0",45],";",["T_WHITESPACE"," ",45],["T_VARIABLE","$i",45],["T_WHITESPACE"," ",45],"<",["T_WHITESPACE"," ",45],["T_VARIABLE","$count",45],";",["T_WHITESPACE"," ",45],["T_VARIABLE","$i",45],["T_INC","++",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$node",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$setting",46],";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$node",47],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",47],"]",["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$char",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","randomString",47],"(",["T_LNUMBER","3",47],")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$node",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","drupalCreateNode",48],"(",["T_VARIABLE","$node",48],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$nodes_by_char",49],"[",["T_VARIABLE","$char",49],"]","[","]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$node",49],";",["T_WHITESPACE","\n      ",49],"}",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Execute glossary view\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$view",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","Views",54],["T_DOUBLE_COLON","::",54],["T_STRING","getView",54],"(",["T_CONSTANT_ENCAPSED_STRING","'glossary'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$view",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","setDisplay",55],"(",["T_CONSTANT_ENCAPSED_STRING","'attachment_1'",55],")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$view",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","executeDisplay",56],"(",["T_CONSTANT_ENCAPSED_STRING","'attachment_1'",56],")",";",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Check that the amount of nodes per char.\n",58],["T_WHITESPACE","    ",59],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$view",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","result",59],["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$item",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n      ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertEqual",60],"(",["T_VARIABLE","$nodes_per_char",60],"[",["T_VARIABLE","$item",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","title_truncated",60],"]",",",["T_WHITESPACE"," ",60],["T_VARIABLE","$item",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","num_records",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Enable the glossary to be displayed.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$view",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","storage",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","enable",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","save",64],"(",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","container",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","rebuildIfNeeded",65],"(",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$url",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","Url",66],["T_DOUBLE_COLON","::",66],["T_STRING","fromRoute",66],"(",["T_CONSTANT_ENCAPSED_STRING","'view.glossary.page_1'",66],")",";",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ Verify cache tags.\n",68],["T_WHITESPACE","    ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertPageCacheContextsAndTags",69],"(",["T_WHITESPACE","\n      ",69],["T_VARIABLE","$url",70],",",["T_WHITESPACE","\n      ",70],"[",["T_WHITESPACE","\n        ",71],["T_CONSTANT_ENCAPSED_STRING","'timezone'",72],",",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'languages:'",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_STRING","LanguageInterface",73],["T_DOUBLE_COLON","::",73],["T_STRING","TYPE_CONTENT",73],",",["T_WHITESPACE","\n        ",73],["T_CONSTANT_ENCAPSED_STRING","'languages:'",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_STRING","LanguageInterface",74],["T_DOUBLE_COLON","::",74],["T_STRING","TYPE_INTERFACE",74],",",["T_WHITESPACE","\n        ",74],["T_CONSTANT_ENCAPSED_STRING","'theme'",75],",",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'url'",76],",",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'user.node_grants:view'",77],",",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",78],",",["T_WHITESPACE","\n        ",78],["T_CONSTANT_ENCAPSED_STRING","'route'",79],",",["T_WHITESPACE","\n      ",79],"]",",",["T_WHITESPACE","\n      ",80],"[",["T_WHITESPACE","\n        ",81],["T_CONSTANT_ENCAPSED_STRING","'config:views.view.glossary'",82],",",["T_WHITESPACE","\n        ",82],["T_COMMENT","\/\/ Listed for letter 'a'\n",83],["T_WHITESPACE","        ",84],["T_CONSTANT_ENCAPSED_STRING","'node:'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$nodes_by_char",84],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",84],"]","[",["T_LNUMBER","0",84],"]",["T_OBJECT_OPERATOR","->",84],["T_STRING","id",84],"(",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'node:'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$nodes_by_char",84],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",84],"]","[",["T_LNUMBER","1",84],"]",["T_OBJECT_OPERATOR","->",84],["T_STRING","id",84],"(",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'node:'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$nodes_by_char",84],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",84],"]","[",["T_LNUMBER","2",84],"]",["T_OBJECT_OPERATOR","->",84],["T_STRING","id",84],"(",")",",",["T_WHITESPACE","\n        ",84],["T_COMMENT","\/\/ Link for letter 'd'.\n",85],["T_WHITESPACE","        ",86],["T_CONSTANT_ENCAPSED_STRING","'node:1'",86],",",["T_WHITESPACE","\n        ",86],["T_COMMENT","\/\/ Link for letter 'p'.\n",87],["T_WHITESPACE","        ",88],["T_CONSTANT_ENCAPSED_STRING","'node:16'",88],",",["T_WHITESPACE","\n        ",88],["T_COMMENT","\/\/ Link for letter 'r'.\n",89],["T_WHITESPACE","        ",90],["T_CONSTANT_ENCAPSED_STRING","'node:2'",90],",",["T_WHITESPACE","\n        ",90],["T_COMMENT","\/\/ Link for letter 'l'.\n",91],["T_WHITESPACE","        ",92],["T_CONSTANT_ENCAPSED_STRING","'node:21'",92],",",["T_WHITESPACE","\n        ",92],["T_COMMENT","\/\/ Link for letter 'u'.\n",93],["T_WHITESPACE","        ",94],["T_CONSTANT_ENCAPSED_STRING","'node:6'",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'node_list'",95],",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'user:0'",96],",",["T_WHITESPACE","\n        ",96],["T_CONSTANT_ENCAPSED_STRING","'user_list'",97],",",["T_WHITESPACE","\n        ",97],["T_CONSTANT_ENCAPSED_STRING","'rendered'",98],",",["T_WHITESPACE","\n        ",98],["T_COMMENT","\/\/ FinishResponseSubscriber adds this cache tag to responses that have the\n",99],["T_WHITESPACE","        ",100],["T_COMMENT","\/\/ 'user.permissions' cache context for anonymous users.\n",100],["T_WHITESPACE","        ",101],["T_CONSTANT_ENCAPSED_STRING","'config:user.role.anonymous'",101],",",["T_WHITESPACE","\n      ",101],"]",["T_WHITESPACE","\n    ",102],")",";",["T_WHITESPACE","\n\n    ",103],["T_COMMENT","\/\/ Check the actual page response.\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","drupalGet",106],"(",["T_VARIABLE","$url",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertResponse",107],"(",["T_LNUMBER","200",107],")",";",["T_WHITESPACE","\n    ",107],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$nodes_per_char",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$char",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$count",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$href",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","Url",109],["T_DOUBLE_COLON","::",109],["T_STRING","fromRoute",109],"(",["T_CONSTANT_ENCAPSED_STRING","'view.glossary.page_1'",109],",",["T_WHITESPACE"," ",109],"[",["T_CONSTANT_ENCAPSED_STRING","'arg_0'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$char",109],"]",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","toString",109],"(",")",";",["T_WHITESPACE","\n      ",109],["T_VARIABLE","$label",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Unicode",110],["T_DOUBLE_COLON","::",110],["T_STRING","strtoupper",110],"(",["T_VARIABLE","$char",110],")",";",["T_WHITESPACE","\n      ",110],["T_COMMENT","\/\/ Get the summary link for a certain character. Filter by label and href\n",111],["T_WHITESPACE","      ",112],["T_COMMENT","\/\/ to ensure that both of them are correct.\n",112],["T_WHITESPACE","      ",113],["T_VARIABLE","$result",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","xpath",113],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/a[contains(@href, :href) and normalize-space(text())=:label]\/..'",113],",",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","':href'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$href",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","':label'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$label",113],")",")",";",["T_WHITESPACE","\n      ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertTrue",114],"(",["T_STRING","count",114],"(",["T_VARIABLE","$result",114],")",")",";",["T_WHITESPACE","\n      ",114],["T_COMMENT","\/\/ The rendered output looks like \"| (count)\" so let's figure out the int.\n",115],["T_WHITESPACE","      ",116],["T_VARIABLE","$result_count",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","trim",116],"(",["T_STRING","str_replace",116],"(",["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'('",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","')'",116],")",",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","''",116],",",["T_WHITESPACE"," ",116],["T_STRING_CAST","(string)",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$result",116],"[",["T_LNUMBER","0",116],"]",")",")",";",["T_WHITESPACE","\n      ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertEqual",117],"(",["T_VARIABLE","$result_count",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$count",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'The expected number got rendered.'",117],")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n  ",118],"}",["T_WHITESPACE","\n\n",119],"}",["T_WHITESPACE","\n",121]]
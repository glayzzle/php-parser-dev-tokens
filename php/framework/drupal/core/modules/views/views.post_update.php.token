[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * @file\n * Post update functions for Views.\n *\/",3],["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","StringTranslation",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TranslatableMarkup",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","views",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","View",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","views",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Views",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @addtogroup updates-8.0.0-beta\n * @{\n *\/",12],["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Update the cacheability metadata for all views.\n *\/",17],["T_WHITESPACE","\n",19],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","views_post_update_update_cacheability_metadata",20],"(",")",["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n  ",20],["T_COMMENT","\/\/ Load all views.\n",21],["T_WHITESPACE","  ",22],["T_VARIABLE","$views",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Drupal",22],["T_DOUBLE_COLON","::",22],["T_STRING","entityManager",22],"(",")",["T_OBJECT_OPERATOR","->",22],["T_STRING","getStorage",22],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",22],")",["T_OBJECT_OPERATOR","->",22],["T_STRING","loadMultiple",22],"(",")",";",["T_WHITESPACE","\n\n  ",22],["T_COMMENT","\/* @var \\Drupal\\views\\Entity\\View[] $views *\/",24],["T_WHITESPACE","\n  ",24],["T_FOREACH","foreach",25],["T_WHITESPACE"," ",25],"(",["T_VARIABLE","$views",25],["T_WHITESPACE"," ",25],["T_AS","as",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$view",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$displays",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$view",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_CONSTANT_ENCAPSED_STRING","'display'",26],")",";",["T_WHITESPACE","\n    ",26],["T_FOREACH","foreach",27],["T_WHITESPACE"," ",27],"(",["T_STRING","array_keys",27],"(",["T_VARIABLE","$displays",27],")",["T_WHITESPACE"," ",27],["T_AS","as",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$display_id",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n      ",27],["T_VARIABLE","$display",28],["T_WHITESPACE"," ",28],"=","&",["T_WHITESPACE"," ",28],["T_VARIABLE","$view",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getDisplay",28],"(",["T_VARIABLE","$display_id",28],")",";",["T_WHITESPACE","\n      ",28],["T_COMMENT","\/\/ Unset the cache_metadata key, so all cacheability metadata for the\n",29],["T_WHITESPACE","      ",30],["T_COMMENT","\/\/ display is recalculated.\n",30],["T_WHITESPACE","      ",31],["T_UNSET","unset",31],"(",["T_VARIABLE","$display",31],"[",["T_CONSTANT_ENCAPSED_STRING","'cache_metadata'",31],"]",")",";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$view",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","save",33],"(",")",";",["T_WHITESPACE","\n  ",33],"}",["T_WHITESPACE","\n\n",34],"}",["T_WHITESPACE","\n\n",36],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup updates-8.0.0-beta\".\n *\/",38],["T_WHITESPACE","\n\n",40],["T_DOC_COMMENT","\/**\n * @addtogroup updates-8.0.0-rc\n * @{\n *\/",42],["T_WHITESPACE","\n\n",45],["T_DOC_COMMENT","\/**\n * Update some views fields that were previously duplicated.\n *\/",47],["T_WHITESPACE","\n",49],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","views_post_update_cleanup_duplicate_views_data",50],"(",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n  ",50],["T_VARIABLE","$config_factory",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Drupal",51],["T_DOUBLE_COLON","::",51],["T_STRING","configFactory",51],"(",")",";",["T_WHITESPACE","\n  ",51],["T_VARIABLE","$ids",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],"[","]",";",["T_WHITESPACE","\n  ",52],["T_VARIABLE","$message",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","NULL",53],";",["T_WHITESPACE","\n  ",53],["T_VARIABLE","$data_tables",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",";",["T_WHITESPACE","\n  ",54],["T_VARIABLE","$base_tables",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],"[","]",";",["T_WHITESPACE","\n  ",55],["T_VARIABLE","$revision_tables",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[","]",";",["T_WHITESPACE","\n  ",56],["T_VARIABLE","$entities_by_table",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[","]",";",["T_WHITESPACE","\n  ",57],["T_VARIABLE","$duplicate_fields",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[","]",";",["T_WHITESPACE","\n  ",58],["T_VARIABLE","$handler_types",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","Views",59],["T_DOUBLE_COLON","::",59],["T_STRING","getHandlerTypes",59],"(",")",";",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityTypeManagerInterface $entity_type_manager *\/",61],["T_WHITESPACE","\n  ",61],["T_VARIABLE","$entity_type_manager",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Drupal",62],["T_DOUBLE_COLON","::",62],["T_STRING","service",62],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",62],")",";",["T_WHITESPACE","\n  ",62],["T_COMMENT","\/\/ This will allow us to create an index of all entity types of the site.\n",63],["T_WHITESPACE","  ",64],["T_FOREACH","foreach",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$entity_type_manager",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getDefinitions",64],"(",")",["T_WHITESPACE"," ",64],["T_AS","as",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$entity_type_id",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$entity_type",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n    ",64],["T_COMMENT","\/\/ Store the entity keyed by base table. If it has a data table, use that as\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ well.\n",66],["T_WHITESPACE","    ",67],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$data_table",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$entity_type",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getDataTable",67],"(",")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n      ",67],["T_VARIABLE","$entities_by_table",68],"[",["T_VARIABLE","$data_table",68],"]",["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$entity_type",68],";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n    ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$base_table",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$entity_type",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getBaseTable",70],"(",")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n      ",70],["T_VARIABLE","$entities_by_table",71],"[",["T_VARIABLE","$base_table",71],"]",["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$entity_type",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ The following code basically contains the same kind of logic as\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ \\Drupal\\Core\\Entity\\Sql\\SqlContentEntityStorage::initTableLayout() to\n",75],["T_WHITESPACE","    ",76],["T_COMMENT","\/\/ prefetch all tables (base, data, revision, and revision data).\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$base_tables",77],"[",["T_VARIABLE","$entity_type_id",77],"]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$entity_type",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getBaseTable",77],"(",")",["T_WHITESPACE"," ",77],"?",":",["T_WHITESPACE"," ",77],["T_VARIABLE","$entity_type",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","id",77],"(",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$revisionable",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$entity_type",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","isRevisionable",78],"(",")",";",["T_WHITESPACE","\n\n    ",78],["T_VARIABLE","$revision_table",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","''",80],";",["T_WHITESPACE","\n    ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$revisionable",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n      ",81],["T_VARIABLE","$revision_table",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_type",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getRevisionTable",82],"(",")",["T_WHITESPACE"," ",82],"?",":",["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_type",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","id",82],"(",")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'_revision'",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$revision_tables",84],"[",["T_VARIABLE","$entity_type_id",84],"]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$revision_table",84],";",["T_WHITESPACE","\n\n    ",84],["T_VARIABLE","$translatable",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$entity_type",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","isTranslatable",86],"(",")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$data_table",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","''",87],";",["T_WHITESPACE","\n    ",87],["T_COMMENT","\/\/ For example the data table just exists, when the entity type is\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ translatable.\n",89],["T_WHITESPACE","    ",90],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$translatable",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$data_table",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$entity_type",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getDataTable",91],"(",")",["T_WHITESPACE"," ",91],"?",":",["T_WHITESPACE"," ",91],["T_VARIABLE","$entity_type",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","id",91],"(",")",["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'_field_data'",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$data_tables",93],"[",["T_VARIABLE","$entity_type_id",93],"]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$data_table",93],";",["T_WHITESPACE","\n\n    ",93],["T_VARIABLE","$duplicate_fields",95],"[",["T_VARIABLE","$entity_type_id",95],"]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","array_intersect_key",95],"(",["T_VARIABLE","$entity_type",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getKeys",95],"(",")",",",["T_WHITESPACE"," ",95],["T_STRING","array_flip",95],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'revision'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'bundle'",95],"]",")",")",";",["T_WHITESPACE","\n  ",95],"}",["T_WHITESPACE","\n\n  ",96],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$config_factory",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","listAll",98],"(",["T_CONSTANT_ENCAPSED_STRING","'views.view.'",98],")",["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$view_config_name",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$changed",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","FALSE",99],";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$view",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$config_factory",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getEditable",100],"(",["T_VARIABLE","$view_config_name",100],")",";",["T_WHITESPACE","\n\n    ",100],["T_VARIABLE","$displays",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$view",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","get",102],"(",["T_CONSTANT_ENCAPSED_STRING","'display'",102],")",";",["T_WHITESPACE","\n    ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_ISSET","isset",103],"(",["T_VARIABLE","$entities_by_table",103],"[",["T_VARIABLE","$view",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","get",103],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",103],")","]",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$entity_type",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$entities_by_table",104],"[",["T_VARIABLE","$view",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","get",104],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",104],")","]",";",["T_WHITESPACE","\n      ",104],["T_VARIABLE","$entity_type_id",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$entity_type",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","id",105],"(",")",";",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$data_table",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$data_tables",106],"[",["T_VARIABLE","$entity_type_id",106],"]",";",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$base_table",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$base_tables",107],"[",["T_VARIABLE","$entity_type_id",107],"]",";",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$revision_table",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$revision_tables",108],"[",["T_VARIABLE","$entity_type_id",108],"]",";",["T_WHITESPACE","\n\n      ",108],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$data_table",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n        ",110],["T_FOREACH","foreach",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$displays",111],["T_WHITESPACE"," ",111],["T_AS","as",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$display_name",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],"&",["T_VARIABLE","$display",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n          ",111],["T_FOREACH","foreach",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$handler_types",112],["T_WHITESPACE"," ",112],["T_AS","as",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$handler_type",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_EMPTY","empty",113],"(",["T_VARIABLE","$display",113],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",113],"]","[",["T_VARIABLE","$handler_type",113],"[",["T_CONSTANT_ENCAPSED_STRING","'plural'",113],"]","]",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n              ",113],["T_FOREACH","foreach",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$display",114],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",114],"]","[",["T_VARIABLE","$handler_type",114],"[",["T_CONSTANT_ENCAPSED_STRING","'plural'",114],"]","]",["T_WHITESPACE"," ",114],["T_AS","as",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$field_name",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],"&",["T_VARIABLE","$field",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$table",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$field",115],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",115],"]",";",["T_WHITESPACE","\n                ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","(",["T_VARIABLE","$table",116],["T_WHITESPACE"," ",116],["T_IS_IDENTICAL","===",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$base_table",116],["T_WHITESPACE"," ",116],["T_BOOLEAN_OR","||",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$table",116],["T_WHITESPACE"," ",116],["T_IS_IDENTICAL","===",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$revision_table",116],")",["T_WHITESPACE"," ",116],["T_BOOLEAN_AND","&&",116],["T_WHITESPACE"," ",116],["T_STRING","in_array",116],"(",["T_VARIABLE","$field_name",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$duplicate_fields",116],"[",["T_VARIABLE","$entity_type_id",116],"]",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                  ",116],["T_VARIABLE","$field",117],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",117],"]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$data_table",117],";",["T_WHITESPACE","\n                  ",117],["T_VARIABLE","$changed",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","TRUE",118],";",["T_WHITESPACE","\n                ",118],"}",["T_WHITESPACE","\n              ",119],"}",["T_WHITESPACE","\n            ",120],"}",["T_WHITESPACE","\n          ",121],"}",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n      ",123],"}",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$changed",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n      ",127],["T_VARIABLE","$view",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","set",128],"(",["T_CONSTANT_ENCAPSED_STRING","'display'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$displays",128],")",";",["T_WHITESPACE","\n      ",128],["T_VARIABLE","$view",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","save",129],"(",")",";",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$ids",130],"[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$view",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","get",130],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",130],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n  ",131],"}",["T_WHITESPACE","\n  ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_EMPTY","empty",133],"(",["T_VARIABLE","$ids",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$message",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","TranslatableMarkup",134],"(",["T_CONSTANT_ENCAPSED_STRING","'Updated tables for field handlers for views: @ids'",134],",",["T_WHITESPACE"," ",134],"[",["T_CONSTANT_ENCAPSED_STRING","'@ids'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_STRING","implode",134],"(",["T_CONSTANT_ENCAPSED_STRING","', '",134],",",["T_WHITESPACE"," ",134],["T_STRING","array_unique",134],"(",["T_VARIABLE","$ids",134],")",")","]",")",";",["T_WHITESPACE","\n  ",134],"}",["T_WHITESPACE","\n\n  ",135],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$message",137],";",["T_WHITESPACE","\n",137],"}",["T_WHITESPACE","\n\n",138],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup updates-8.0.0-rc\".\n *\/",140],["T_WHITESPACE","\n\n",142],["T_DOC_COMMENT","\/**\n * @addtogroup updates-8.0.x\n * @{\n *\/",144],["T_WHITESPACE","\n\n",147],["T_DOC_COMMENT","\/**\n * Include field formatter dependencies in a view when the formatter is used.\n *\/",149],["T_WHITESPACE","\n",151],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","views_post_update_field_formatter_dependencies",152],"(",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n  ",152],["T_VARIABLE","$views",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","View",153],["T_DOUBLE_COLON","::",153],["T_STRING","loadMultiple",153],"(",")",";",["T_WHITESPACE","\n  ",153],["T_STRING","array_walk",154],"(",["T_VARIABLE","$views",154],",",["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],"(",["T_STRING","View",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$view",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$view",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","save",155],"(",")",";",["T_WHITESPACE","\n  ",155],"}",")",";",["T_WHITESPACE","\n",156],"}",["T_WHITESPACE","\n\n",157],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup updates-8.0.x\".\n *\/",159],["T_WHITESPACE","\n\n",161],["T_DOC_COMMENT","\/**\n * @addtogroup updates-8.1.x\n * @{\n *\/",163],["T_WHITESPACE","\n\n",166],["T_DOC_COMMENT","\/**\n * Fix views with dependencies on taxonomy terms that don't exist.\n *\/",168],["T_WHITESPACE","\n",170],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","views_post_update_taxonomy_index_tid",171],"(",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n  ",171],["T_VARIABLE","$views",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","View",172],["T_DOUBLE_COLON","::",172],["T_STRING","loadMultiple",172],"(",")",";",["T_WHITESPACE","\n  ",172],["T_STRING","array_walk",173],"(",["T_VARIABLE","$views",173],",",["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],"(",["T_STRING","View",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$view",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$old_dependencies",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$view",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getDependencies",174],"(",")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$new_dependencies",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$view",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","calculateDependencies",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getDependencies",175],"(",")",";",["T_WHITESPACE","\n    ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$old_dependencies",176],["T_WHITESPACE"," ",176],["T_IS_NOT_IDENTICAL","!==",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$new_dependencies",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_VARIABLE","$view",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","save",177],"(",")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n  ",178],"}",")",";",["T_WHITESPACE","\n",179],"}",["T_WHITESPACE","\n\n",180],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup updates-8.1.x\".\n *\/",182],["T_WHITESPACE","\n\n",184],["T_DOC_COMMENT","\/**\n * @addtogroup updates-8.2.x\n * @{\n *\/",186],["T_WHITESPACE","\n\n",189],["T_DOC_COMMENT","\/**\n * Fix views with serializer dependencies.\n *\/",191],["T_WHITESPACE","\n",193],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","views_post_update_serializer_dependencies",194],"(",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n  ",194],["T_VARIABLE","$views",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","View",195],["T_DOUBLE_COLON","::",195],["T_STRING","loadMultiple",195],"(",")",";",["T_WHITESPACE","\n  ",195],["T_STRING","array_walk",196],"(",["T_VARIABLE","$views",196],",",["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],"(",["T_STRING","View",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$view",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$old_dependencies",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$view",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getDependencies",197],"(",")",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$new_dependencies",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$view",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","calculateDependencies",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","getDependencies",198],"(",")",";",["T_WHITESPACE","\n    ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$old_dependencies",199],["T_WHITESPACE"," ",199],["T_IS_NOT_IDENTICAL","!==",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$new_dependencies",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n      ",199],["T_VARIABLE","$view",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","save",200],"(",")",";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n  ",201],"}",")",";",["T_WHITESPACE","\n",202],"}",["T_WHITESPACE","\n\n",203],["T_DOC_COMMENT","\/**\n * Set all boolean filter values to strings.\n *\/",205],["T_WHITESPACE","\n",207],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","views_post_update_boolean_filter_values",208],"(",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n  ",208],["T_VARIABLE","$config_factory",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Drupal",209],["T_DOUBLE_COLON","::",209],["T_STRING","configFactory",209],"(",")",";",["T_WHITESPACE","\n  ",209],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$config_factory",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","listAll",210],"(",["T_CONSTANT_ENCAPSED_STRING","'views.view.'",210],")",["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$view_config_name",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$view",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$config_factory",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getEditable",211],"(",["T_VARIABLE","$view_config_name",211],")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$save",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","FALSE",212],";",["T_WHITESPACE","\n    ",212],["T_FOREACH","foreach",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$view",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","get",213],"(",["T_CONSTANT_ENCAPSED_STRING","'display'",213],")",["T_WHITESPACE"," ",213],["T_AS","as",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$display_name",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$display",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n      ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_ISSET","isset",214],"(",["T_VARIABLE","$display",214],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",214],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filters'",214],"]",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n        ",214],["T_FOREACH","foreach",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$display",215],"[",["T_CONSTANT_ENCAPSED_STRING","'display_options'",215],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filters'",215],"]",["T_WHITESPACE"," ",215],["T_AS","as",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$filter_name",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$filter",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n          ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_ISSET","isset",216],"(",["T_VARIABLE","$filter",216],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin_id'",216],"]",")",["T_WHITESPACE"," ",216],["T_BOOLEAN_AND","&&",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$filter",216],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin_id'",216],"]",["T_WHITESPACE"," ",216],["T_IS_IDENTICAL","===",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'boolean'",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$new_value",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","FALSE",217],";",["T_WHITESPACE","\n            ",217],["T_COMMENT","\/\/ Update all boolean and integer values to strings.\n",218],["T_WHITESPACE","            ",219],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$filter",219],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",219],"]",["T_WHITESPACE"," ",219],["T_IS_IDENTICAL","===",219],["T_WHITESPACE"," ",219],["T_STRING","TRUE",219],["T_WHITESPACE"," ",219],["T_BOOLEAN_OR","||",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$filter",219],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",219],"]",["T_WHITESPACE"," ",219],["T_IS_IDENTICAL","===",219],["T_WHITESPACE"," ",219],["T_LNUMBER","1",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n              ",219],["T_VARIABLE","$new_value",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'1'",220],";",["T_WHITESPACE","\n            ",220],"}",["T_WHITESPACE","\n            ",221],["T_ELSEIF","elseif",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$filter",222],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",222],"]",["T_WHITESPACE"," ",222],["T_IS_IDENTICAL","===",222],["T_WHITESPACE"," ",222],["T_STRING","FALSE",222],["T_WHITESPACE"," ",222],["T_BOOLEAN_OR","||",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$filter",222],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",222],"]",["T_WHITESPACE"," ",222],["T_IS_IDENTICAL","===",222],["T_WHITESPACE"," ",222],["T_LNUMBER","0",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n              ",222],["T_VARIABLE","$new_value",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'0'",223],";",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE","\n            ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$new_value",225],["T_WHITESPACE"," ",225],["T_IS_NOT_IDENTICAL","!==",225],["T_WHITESPACE"," ",225],["T_STRING","FALSE",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n              ",225],["T_VARIABLE","$view",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","set",226],"(","\"",["T_ENCAPSED_AND_WHITESPACE","display.",226],["T_VARIABLE","$display_name",226],["T_ENCAPSED_AND_WHITESPACE",".display_options.filters.",226],["T_VARIABLE","$filter_name",226],["T_ENCAPSED_AND_WHITESPACE",".value",226],"\"",",",["T_WHITESPACE"," ",226],["T_VARIABLE","$new_value",226],")",";",["T_WHITESPACE","\n              ",226],["T_VARIABLE","$save",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","TRUE",227],";",["T_WHITESPACE","\n            ",227],"}",["T_WHITESPACE","\n          ",228],"}",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n      ",230],"}",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n    ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$save",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n      ",233],["T_VARIABLE","$view",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","save",234],"(",")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n  ",235],"}",["T_WHITESPACE","\n",236],"}",["T_WHITESPACE","\n\n",237],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup updates-8.2.x\".\n *\/",239],["T_WHITESPACE","\n",241]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","hal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Normalizer",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","NestedArray",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Serializer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Exception",6],["T_NS_SEPARATOR","\\",6],["T_STRING","InvalidArgumentException",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Converts the Drupal field structure to HAL array structure.\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","FieldNormalizer",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_STRING","NormalizerBase",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * The interface or class that this Normalizer supports.\n   *\n   * @var string\n   *\/",13],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$supportedInterfaceOrClass",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Field\\FieldItemListInterface'",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","normalize",23],"(",["T_VARIABLE","$field",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$format",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_STRING","NULL",23],",",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$context",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",")",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$normalized_field_items",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ Get the field definition.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$entity",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$field",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","getEntity",27],"(",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$field_name",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$field",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getName",28],"(",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$field_definition",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$field",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getFieldDefinition",29],"(",")",";",["T_WHITESPACE","\n\n    ",29],["T_COMMENT","\/\/ If this field is not translatable, it can simply be normalized without\n",31],["T_WHITESPACE","    ",32],["T_COMMENT","\/\/ separating it into different translations.\n",32],["T_WHITESPACE","    ",33],["T_IF","if",33],["T_WHITESPACE"," ",33],"(","!",["T_VARIABLE","$field_definition",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","isTranslatable",33],"(",")",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n      ",33],["T_VARIABLE","$normalized_field_items",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","normalizeFieldItems",34],"(",["T_VARIABLE","$field",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$format",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$context",34],")",";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/\/ Otherwise, the languages have to be extracted from the entity and passed\n",36],["T_WHITESPACE","    ",37],["T_COMMENT","\/\/ in to the field item normalizer in the context. The langcode is appended\n",37],["T_WHITESPACE","    ",38],["T_COMMENT","\/\/ to the field item values.\n",38],["T_WHITESPACE","    ",39],["T_ELSE","else",39],["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n      ",39],["T_FOREACH","foreach",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$entity",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getTranslationLanguages",40],"(",")",["T_WHITESPACE"," ",40],["T_AS","as",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$language",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$context",41],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",41],"]",["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$language",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getId",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$translation",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$entity",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getTranslation",42],"(",["T_VARIABLE","$language",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getId",42],"(",")",")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$translated_field",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$translation",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","get",43],"(",["T_VARIABLE","$field_name",43],")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$normalized_field_items",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","array_merge",44],"(",["T_VARIABLE","$normalized_field_items",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","normalizeFieldItems",44],"(",["T_VARIABLE","$translated_field",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$format",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$context",44],")",")",";",["T_WHITESPACE","\n      ",44],"}",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Merge deep so that links set in entity reference normalizers are merged\n",48],["T_WHITESPACE","    ",49],["T_COMMENT","\/\/ into the links property.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$normalized",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","NestedArray",50],["T_DOUBLE_COLON","::",50],["T_STRING","mergeDeepArray",50],"(",["T_VARIABLE","$normalized_field_items",50],")",";",["T_WHITESPACE","\n    ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$normalized",51],";",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n\n  ",52],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",55],["T_WHITESPACE","\n  ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","denormalize",58],"(",["T_VARIABLE","$data",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$class",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$format",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","NULL",58],",",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$context",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n    ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(","!",["T_ISSET","isset",59],"(",["T_VARIABLE","$context",59],"[",["T_CONSTANT_ENCAPSED_STRING","'target_instance'",59],"]",")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n      ",59],["T_THROW","throw",60],["T_WHITESPACE"," ",60],["T_NEW","new",60],["T_WHITESPACE"," ",60],["T_STRING","InvalidArgumentException",60],"(",["T_CONSTANT_ENCAPSED_STRING","'$context[\\'target_instance\\'] must be set to denormalize with the FieldNormalizer'",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n    ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$context",62],"[",["T_CONSTANT_ENCAPSED_STRING","'target_instance'",62],"]",["T_OBJECT_OPERATOR","->",62],["T_STRING","getParent",62],"(",")",["T_WHITESPACE"," ",62],["T_IS_EQUAL","==",62],["T_WHITESPACE"," ",62],["T_STRING","NULL",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_THROW","throw",63],["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_STRING","InvalidArgumentException",63],"(",["T_CONSTANT_ENCAPSED_STRING","'The field passed in via $context[\\'target_instance\\'] must have a parent set.'",63],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$items",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$context",66],"[",["T_CONSTANT_ENCAPSED_STRING","'target_instance'",66],"]",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$item_class",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$items",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getItemDefinition",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getClass",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_FOREACH","foreach",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$data",68],["T_WHITESPACE"," ",68],["T_AS","as",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$item_data",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n      ",68],["T_COMMENT","\/\/ Create a new item and pass it as the target for the unserialization of\n",69],["T_WHITESPACE","      ",70],["T_COMMENT","\/\/ $item_data. Note: if $item_data is about a different language than the\n",70],["T_WHITESPACE","      ",71],["T_COMMENT","\/\/ default, FieldItemNormalizer::denormalize() will dismiss this item and\n",71],["T_WHITESPACE","      ",72],["T_COMMENT","\/\/ create a new one for the right language.\n",72],["T_WHITESPACE","      ",73],["T_VARIABLE","$context",73],"[",["T_CONSTANT_ENCAPSED_STRING","'target_instance'",73],"]",["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$items",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","appendItem",73],"(",")",";",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","serializer",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","denormalize",74],"(",["T_VARIABLE","$item_data",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$item_class",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$format",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$context",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$items",77],";",["T_WHITESPACE","\n\n  ",77],"}",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * Helper function to normalize field items.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldItemListInterface $field\n   *   The field object.\n   * @param string $format\n   *   The format.\n   * @param array $context\n   *   The context array.\n   *\n   * @return array\n   *   The array of normalized field items.\n   *\/",81],["T_WHITESPACE","\n  ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","normalizeFieldItems",94],"(",["T_VARIABLE","$field",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$format",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$context",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$normalized_field_items",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n    ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_VARIABLE","$field",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","isEmpty",96],"(",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_FOREACH","foreach",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$field",97],["T_WHITESPACE"," ",97],["T_AS","as",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$field_item",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$normalized_field_items",98],"[","]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","serializer",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","normalize",98],"(",["T_VARIABLE","$field_item",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$format",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$context",98],")",";",["T_WHITESPACE","\n      ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n    ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$normalized_field_items",101],";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n",102],"}",["T_WHITESPACE","\n",104]]
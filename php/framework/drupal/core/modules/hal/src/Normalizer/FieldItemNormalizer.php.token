[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","hal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Normalizer",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldItemInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Serializer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Exception",6],["T_NS_SEPARATOR","\\",6],["T_STRING","InvalidArgumentException",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Converts the Drupal field item object structure to HAL array structure.\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","FieldItemNormalizer",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_STRING","NormalizerBase",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * The interface or class that this Normalizer supports.\n   *\n   * @var string\n   *\/",13],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$supportedInterfaceOrClass",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Field\\FieldItemInterface'",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","normalize",23],"(",["T_VARIABLE","$field_item",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$format",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_STRING","NULL",23],",",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$context",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",")",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$values",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$field_item",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","toArray",24],"(",")",";",["T_WHITESPACE","\n    ",24],["T_IF","if",25],["T_WHITESPACE"," ",25],"(",["T_ISSET","isset",25],"(",["T_VARIABLE","$context",25],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",25],"]",")",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n      ",25],["T_VARIABLE","$values",26],"[",["T_CONSTANT_ENCAPSED_STRING","'lang'",26],"]",["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$context",26],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",26],"]",";",["T_WHITESPACE","\n    ",26],"}",["T_WHITESPACE","\n\n    ",27],["T_COMMENT","\/\/ The values are wrapped in an array, and then wrapped in another array\n",29],["T_WHITESPACE","    ",30],["T_COMMENT","\/\/ keyed by field name so that field items can be merged by the\n",30],["T_WHITESPACE","    ",31],["T_COMMENT","\/\/ FieldNormalizer. This is necessary for the EntityReferenceItemNormalizer\n",31],["T_WHITESPACE","    ",32],["T_COMMENT","\/\/ to be able to place values in the '_links' array.\n",32],["T_WHITESPACE","    ",33],["T_VARIABLE","$field",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$field_item",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getParent",33],"(",")",";",["T_WHITESPACE","\n    ",33],["T_RETURN","return",34],["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",["T_WHITESPACE","\n      ",34],["T_VARIABLE","$field",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getName",35],"(",")",["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_VARIABLE","$values",35],")",",",["T_WHITESPACE","\n    ",35],")",";",["T_WHITESPACE","\n  ",36],"}",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","denormalize",42],"(",["T_VARIABLE","$data",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$class",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$format",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","NULL",42],",",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$context",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_IF","if",43],["T_WHITESPACE"," ",43],"(","!",["T_ISSET","isset",43],"(",["T_VARIABLE","$context",43],"[",["T_CONSTANT_ENCAPSED_STRING","'target_instance'",43],"]",")",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n      ",43],["T_THROW","throw",44],["T_WHITESPACE"," ",44],["T_NEW","new",44],["T_WHITESPACE"," ",44],["T_STRING","InvalidArgumentException",44],"(",["T_CONSTANT_ENCAPSED_STRING","'$context[\\'target_instance\\'] must be set to denormalize with the FieldItemNormalizer'",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n    ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_VARIABLE","$context",46],"[",["T_CONSTANT_ENCAPSED_STRING","'target_instance'",46],"]",["T_OBJECT_OPERATOR","->",46],["T_STRING","getParent",46],"(",")",["T_WHITESPACE"," ",46],["T_IS_EQUAL","==",46],["T_WHITESPACE"," ",46],["T_STRING","NULL",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n      ",46],["T_THROW","throw",47],["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STRING","InvalidArgumentException",47],"(",["T_CONSTANT_ENCAPSED_STRING","'The field item passed in via $context[\\'target_instance\\'] must have a parent set.'",47],")",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_VARIABLE","$field_item",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$context",50],"[",["T_CONSTANT_ENCAPSED_STRING","'target_instance'",50],"]",";",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/\/ If this field is translatable, we need to create a translated instance.\n",52],["T_WHITESPACE","    ",53],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_ISSET","isset",53],"(",["T_VARIABLE","$data",53],"[",["T_CONSTANT_ENCAPSED_STRING","'lang'",53],"]",")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$langcode",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$data",54],"[",["T_CONSTANT_ENCAPSED_STRING","'lang'",54],"]",";",["T_WHITESPACE","\n      ",54],["T_UNSET","unset",55],"(",["T_VARIABLE","$data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'lang'",55],"]",")",";",["T_WHITESPACE","\n      ",55],["T_VARIABLE","$field_definition",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$field_item",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getFieldDefinition",56],"(",")",";",["T_WHITESPACE","\n      ",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$field_definition",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","isTranslatable",57],"(",")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$field_item",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","createTranslatedInstance",58],"(",["T_VARIABLE","$field_item",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$langcode",58],")",";",["T_WHITESPACE","\n      ",58],"}",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_VARIABLE","$field_item",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","setValue",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","constructValue",62],"(",["T_VARIABLE","$data",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$context",62],")",")",";",["T_WHITESPACE","\n    ",62],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$field_item",63],";",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * Build the field item value using the incoming data.\n   *\n   * @param $data\n   *   The incoming data for this field item.\n   * @param $context\n   *   The context passed into the Normalizer.\n   *\n   * @return mixed\n   *   The value to use in Entity::setValue().\n   *\/",66],["T_WHITESPACE","\n  ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","constructValue",77],"(",["T_VARIABLE","$data",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$context",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$data",78],";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * Get a translated version of the field item instance.\n   *\n   * To indicate that a field item applies to one translation of an entity and\n   * not another, the property path must originate with a translation of the\n   * entity. This is the reason for using target_instances, from which the\n   * property path can be traversed up to the root.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldItemInterface $field_item\n   *   The untranslated field item instance.\n   * @param $langcode\n   *   The langcode.\n   *\n   * @return \\Drupal\\Core\\Field\\FieldItemInterface\n   *   The translated field item instance.\n   *\/",81],["T_WHITESPACE","\n  ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","createTranslatedInstance",97],"(",["T_STRING","FieldItemInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$item",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$langcode",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_COMMENT","\/\/ Remove the untranslated item that was created for the default language\n",98],["T_WHITESPACE","    ",99],["T_COMMENT","\/\/ by FieldNormalizer::denormalize().\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$items",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$item",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getParent",100],"(",")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$delta",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$item",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getName",101],"(",")",";",["T_WHITESPACE","\n    ",101],["T_UNSET","unset",102],"(",["T_VARIABLE","$items",102],"[",["T_VARIABLE","$delta",102],"]",")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Instead, create a new item for the entity in the requested language.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$entity",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$item",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getEntity",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$entity_translation",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$entity",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","hasTranslation",106],"(",["T_VARIABLE","$langcode",106],")",["T_WHITESPACE"," ",106],"?",["T_WHITESPACE"," ",106],["T_VARIABLE","$entity",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getTranslation",106],"(",["T_VARIABLE","$langcode",106],")",["T_WHITESPACE"," ",106],":",["T_WHITESPACE"," ",106],["T_VARIABLE","$entity",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","addTranslation",106],"(",["T_VARIABLE","$langcode",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$field_name",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$item",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getFieldDefinition",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","getName",107],"(",")",";",["T_WHITESPACE","\n    ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$entity_translation",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","get",108],"(",["T_VARIABLE","$field_name",108],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","appendItem",108],"(",")",";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n",109],"}",["T_WHITESPACE","\n",111]]
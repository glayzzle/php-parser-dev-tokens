[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","hal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","MemoryBackend",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","file",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","File",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","hal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Encoder",7],["T_NS_SEPARATOR","\\",7],["T_STRING","JsonEncoder",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","hal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Normalizer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldItemNormalizer",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","hal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Normalizer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FileEntityNormalizer",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","rest",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LinkManager",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LinkManager",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","rest",11],["T_NS_SEPARATOR","\\",11],["T_STRING","LinkManager",11],["T_NS_SEPARATOR","\\",11],["T_STRING","RelationLinkManager",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","rest",12],["T_NS_SEPARATOR","\\",12],["T_STRING","LinkManager",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TypeLinkManager",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Symfony",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Component",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Serializer",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Serializer",13],";",["T_WHITESPACE","\n\n\n",13],["T_DOC_COMMENT","\/**\n * Tests that file entities can be normalized in HAL.\n *\n * @group hal\n *\/",16],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","FileNormalizeTest",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_STRING","NormalizerTestBase",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_STATIC","static",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$modules",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",28],")",";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_STRING","parent",34],["T_DOUBLE_COLON","::",34],["T_STRING","setUp",34],"(",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","installEntitySchema",35],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",35],")",";",["T_WHITESPACE","\n\n    ",35],["T_VARIABLE","$entity_manager",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Drupal",37],["T_DOUBLE_COLON","::",37],["T_STRING","entityManager",37],"(",")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$link_manager",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","LinkManager",38],"(",["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","TypeLinkManager",38],"(",["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","MemoryBackend",38],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",38],")",",",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","moduleHandler",38],"(",")",",",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","service",38],"(",["T_CONSTANT_ENCAPSED_STRING","'config.factory'",38],")",",",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","service",38],"(",["T_CONSTANT_ENCAPSED_STRING","'request_stack'",38],")",",",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","service",38],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.bundle.info'",38],")",")",",",["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","RelationLinkManager",38],"(",["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","MemoryBackend",38],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",38],")",",",["T_WHITESPACE"," ",38],["T_VARIABLE","$entity_manager",38],",",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","moduleHandler",38],"(",")",",",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","service",38],"(",["T_CONSTANT_ENCAPSED_STRING","'config.factory'",38],")",",",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","service",38],"(",["T_CONSTANT_ENCAPSED_STRING","'request_stack'",38],")",")",")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Set up the mock serializer.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$normalizers",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_WHITESPACE","\n      ",41],["T_NEW","new",42],["T_WHITESPACE"," ",42],["T_STRING","FieldItemNormalizer",42],"(",")",",",["T_WHITESPACE","\n      ",42],["T_NEW","new",43],["T_WHITESPACE"," ",43],["T_STRING","FileEntityNormalizer",43],"(",["T_VARIABLE","$entity_manager",43],",",["T_WHITESPACE"," ",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Drupal",43],["T_DOUBLE_COLON","::",43],["T_STRING","httpClient",43],"(",")",",",["T_WHITESPACE"," ",43],["T_VARIABLE","$link_manager",43],",",["T_WHITESPACE"," ",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Drupal",43],["T_DOUBLE_COLON","::",43],["T_STRING","moduleHandler",43],"(",")",")",",",["T_WHITESPACE","\n    ",43],")",";",["T_WHITESPACE","\n\n    ",44],["T_VARIABLE","$encoders",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",["T_WHITESPACE","\n      ",46],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STRING","JsonEncoder",47],"(",")",",",["T_WHITESPACE","\n    ",47],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","serializer",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_NEW","new",49],["T_WHITESPACE"," ",49],["T_STRING","Serializer",49],"(",["T_VARIABLE","$normalizers",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$encoders",49],")",";",["T_WHITESPACE","\n  ",49],"}",["T_WHITESPACE","\n\n\n  ",50],["T_DOC_COMMENT","\/**\n   * Tests the normalize function.\n   *\/",53],["T_WHITESPACE","\n  ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","testNormalize",56],"(",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$file_params",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'filename'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'test_1.txt'",58],",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'uri'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/test_1.txt'",59],",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'filemime'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'text\/plain'",60],",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'status'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_STRING","FILE_STATUS_PERMANENT",61],",",["T_WHITESPACE","\n    ",61],")",";",["T_WHITESPACE","\n    ",62],["T_COMMENT","\/\/ Create a new file entity.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$file",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","File",64],["T_DOUBLE_COLON","::",64],["T_STRING","create",64],"(",["T_VARIABLE","$file_params",64],")",";",["T_WHITESPACE","\n    ",64],["T_STRING","file_put_contents",65],"(",["T_VARIABLE","$file",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getFileUri",65],"(",")",",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'hello world'",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$file",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","save",66],"(",")",";",["T_WHITESPACE","\n\n    ",66],["T_VARIABLE","$expected_array",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",["T_WHITESPACE","\n      ",68],["T_CONSTANT_ENCAPSED_STRING","'uri'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_WHITESPACE","\n        ",69],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n          ",70],["T_CONSTANT_ENCAPSED_STRING","'value'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_STRING","file_create_url",71],"(",["T_VARIABLE","$file",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getFileUri",71],"(",")",")",")",",",["T_WHITESPACE","\n      ",71],")",",",["T_WHITESPACE","\n    ",72],")",";",["T_WHITESPACE","\n\n    ",73],["T_VARIABLE","$normalized",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","serializer",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","normalize",75],"(",["T_VARIABLE","$file",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","format",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_VARIABLE","$normalized",76],"[",["T_CONSTANT_ENCAPSED_STRING","'uri'",76],"]",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$expected_array",76],"[",["T_CONSTANT_ENCAPSED_STRING","'uri'",76],"]",",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'URI is normalized.'",76],")",";",["T_WHITESPACE","\n\n  ",76],"}",["T_WHITESPACE","\n\n",78],"}",["T_WHITESPACE","\n",80]]
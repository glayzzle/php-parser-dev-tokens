[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate_drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","migrate",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Row",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Provides common functionality for testing stubbing.\n *\/",7],["T_WHITESPACE","\n",9],["T_TRAIT","trait",10],["T_WHITESPACE"," ",10],["T_STRING","StubTestTrait",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Test that creating a stub of the given entity type results in a valid\n   * entity.\n   *\n   * @param string $entity_type_id\n   *   The entity type we are stubbing.\n   *\/",12],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","performStubTest",19],"(",["T_VARIABLE","$entity_type_id",19],")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n    ",19],["T_VARIABLE","$entity_id",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","createStub",20],"(",["T_VARIABLE","$entity_type_id",20],")",";",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","assertTrue",21],"(",["T_VARIABLE","$entity_id",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'Stub successfully created'",21],")",";",["T_WHITESPACE","\n    ",21],["T_IF","if",22],["T_WHITESPACE"," ",22],"(",["T_VARIABLE","$entity_id",22],")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n      ",22],["T_VARIABLE","$violations",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","validateStub",23],"(",["T_VARIABLE","$entity_type_id",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$entity_id",23],")",";",["T_WHITESPACE","\n      ",23],["T_IF","if",24],["T_WHITESPACE"," ",24],"(","!",["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","assertIdentical",24],"(",["T_STRING","count",24],"(",["T_VARIABLE","$violations",24],")",",",["T_WHITESPACE"," ",24],["T_LNUMBER","0",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'Stub is a valid entity'",24],")",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n        ",24],["T_FOREACH","foreach",25],["T_WHITESPACE"," ",25],"(",["T_VARIABLE","$violations",25],["T_WHITESPACE"," ",25],["T_AS","as",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$violation",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n          ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","fail",26],"(",["T_STRING_CAST","(string)",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$violation",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","getMessage",26],"(",")",")",";",["T_WHITESPACE","\n        ",26],"}",["T_WHITESPACE","\n      ",27],"}",["T_WHITESPACE","\n    ",28],"}",["T_WHITESPACE","\n  ",29],"}",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Create a stub of the given entity type.\n   *\n   * @param string $entity_type_id\n   *   The entity type we are stubbing.\n   *\n   * @return int\n   *   ID of the created entity.\n   *\/",32],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","createStub",41],"(",["T_VARIABLE","$entity_type_id",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n    ",41],["T_COMMENT","\/\/ Create a dummy migration to pass to the destination plugin.\n",42],["T_WHITESPACE","    ",43],["T_VARIABLE","$definition",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],"[",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'migration_tags'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],"[",["T_CONSTANT_ENCAPSED_STRING","'Stub test'",44],"]",",",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'source'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'empty'",45],"]",",",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'process'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],"[","]",",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'destination'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'entity:'",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$entity_type_id",47],"]",",",["T_WHITESPACE","\n    ",47],"]",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$migration",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Drupal",49],["T_DOUBLE_COLON","::",49],["T_STRING","service",49],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",49],")",["T_OBJECT_OPERATOR","->",49],["T_STRING","createStubMigration",49],"(",["T_VARIABLE","$definition",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$destination_plugin",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$migration",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getDestinationPlugin",50],"(",["T_STRING","TRUE",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$stub_row",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_NEW","new",51],["T_WHITESPACE"," ",51],["T_STRING","Row",51],"(","[","]",",",["T_WHITESPACE"," ",51],"[","]",",",["T_WHITESPACE"," ",51],["T_STRING","TRUE",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$destination_ids",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$destination_plugin",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","import",52],"(",["T_VARIABLE","$stub_row",52],")",";",["T_WHITESPACE","\n    ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_STRING","reset",53],"(",["T_VARIABLE","$destination_ids",53],")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * Perform validation on a stub entity.\n   *\n   * @param string $entity_type_id\n   *   The entity type we are stubbing.\n   * @param string $entity_id\n   *   ID of the stubbed entity to validate.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityConstraintViolationListInterface\n   *   List of constraint violations identified.\n   *\/",56],["T_WHITESPACE","\n  ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","validateStub",67],"(",["T_VARIABLE","$entity_type_id",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$entity_id",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$controller",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Drupal",68],["T_DOUBLE_COLON","::",68],["T_STRING","entityManager",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getStorage",68],"(",["T_VARIABLE","$entity_type_id",68],")",";",["T_WHITESPACE","\n    ",68],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $stub_entity *\/",69],["T_WHITESPACE","\n    ",69],["T_VARIABLE","$stub_entity",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$controller",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","load",70],"(",["T_VARIABLE","$entity_id",70],")",";",["T_WHITESPACE","\n    ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$stub_entity",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","validate",71],"(",")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n",72],"}",["T_WHITESPACE","\n",74]]
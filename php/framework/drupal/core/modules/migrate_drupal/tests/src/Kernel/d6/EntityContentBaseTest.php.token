[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate_drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","d6",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldConfig",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldStorageConfig",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MigrateExecutable",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MigrateMessageInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","user",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","User",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Prophecy",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Argument",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @group migrate_drupal\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","EntityContentBaseTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","MigrateDrupal6TestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",17],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],"[",["T_CONSTANT_ENCAPSED_STRING","'migrate_overwrite_test'",20],"]",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","setUp",25],"(",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_STRING","parent",26],["T_DOUBLE_COLON","::",26],["T_STRING","setUp",26],"(",")",";",["T_WHITESPACE","\n\n    ",26],["T_COMMENT","\/\/ Create a field on the user entity so that we can test nested property\n",28],["T_WHITESPACE","    ",29],["T_COMMENT","\/\/ overwrites.\n",29],["T_WHITESPACE","    ",30],["T_COMMENT","\/\/ @see static::testOverwriteSelectedNestedProperty()\n",30],["T_WHITESPACE","    ",31],["T_STRING","FieldStorageConfig",31],["T_DOUBLE_COLON","::",31],["T_STRING","create",31],"(","[",["T_WHITESPACE","\n      ",31],["T_CONSTANT_ENCAPSED_STRING","'field_name'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'signature'",32],",",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'user'",33],",",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'type'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'text_long'",34],",",["T_WHITESPACE","\n    ",34],"]",")",["T_OBJECT_OPERATOR","->",35],["T_STRING","save",35],"(",")",";",["T_WHITESPACE","\n\n    ",35],["T_STRING","FieldConfig",37],["T_DOUBLE_COLON","::",37],["T_STRING","create",37],"(","[",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'field_name'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'signature'",38],",",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'user'",39],",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'bundle'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'user'",40],",",["T_WHITESPACE","\n    ",40],"]",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","save",41],"(",")",";",["T_WHITESPACE","\n\n    ",41],["T_STRING","User",43],["T_DOUBLE_COLON","::",43],["T_STRING","create",43],"(","[",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'uid'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_LNUMBER","2",44],",",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'name'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Ford Prefect'",45],",",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'mail'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'ford.prefect@localhost'",46],",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'signature'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_WHITESPACE","\n        ",47],["T_ARRAY","array",48],"(",["T_WHITESPACE","\n          ",48],["T_CONSTANT_ENCAPSED_STRING","'value'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Bring a towel.'",49],",",["T_WHITESPACE","\n          ",49],["T_CONSTANT_ENCAPSED_STRING","'format'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",50],",",["T_WHITESPACE","\n        ",50],")",",",["T_WHITESPACE","\n      ",51],")",",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'init'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'proto@zo.an'",53],",",["T_WHITESPACE","\n    ",53],"]",")",["T_OBJECT_OPERATOR","->",54],["T_STRING","save",54],"(",")",";",["T_WHITESPACE","\n\n    ",54],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","executeMigrations",56],"(","[",["T_CONSTANT_ENCAPSED_STRING","'d6_filter_format'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'d6_user_role'",56],"]",")",";",["T_WHITESPACE","\n  ",56],"}",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Tests overwriting all mapped properties in the destination entity (default\n   * behavior).\n   *\/",59],["T_WHITESPACE","\n  ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","testOverwriteAllMappedProperties",63],"(",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","executeMigration",64],"(",["T_CONSTANT_ENCAPSED_STRING","'d6_user'",64],")",";",["T_WHITESPACE","\n    ",64],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\UserInterface $account *\/",65],["T_WHITESPACE","\n    ",65],["T_VARIABLE","$account",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","User",66],["T_DOUBLE_COLON","::",66],["T_STRING","load",66],"(",["T_LNUMBER","2",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertIdentical",67],"(",["T_CONSTANT_ENCAPSED_STRING","'john.doe'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$account",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","label",67],"(",")",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertIdentical",68],"(",["T_CONSTANT_ENCAPSED_STRING","'john.doe@example.com'",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$account",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getEmail",68],"(",")",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertIdentical",69],"(",["T_CONSTANT_ENCAPSED_STRING","'doe@example.com'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$account",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getInitialEmail",69],"(",")",")",";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * Tests overwriting selected properties in the destination entity, specified\n   * in the destination configuration.\n   *\/",72],["T_WHITESPACE","\n  ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","testOverwriteProperties",76],"(",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_COMMENT","\/\/ Execute the migration in migrate_overwrite_test, which documents how\n",77],["T_WHITESPACE","    ",78],["T_COMMENT","\/\/ property overwrites work.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","executeMigration",79],"(",["T_CONSTANT_ENCAPSED_STRING","'users'",79],")",";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\UserInterface $account *\/",81],["T_WHITESPACE","\n    ",81],["T_VARIABLE","$account",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","User",82],["T_DOUBLE_COLON","::",82],["T_STRING","load",82],"(",["T_LNUMBER","2",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertIdentical",83],"(",["T_CONSTANT_ENCAPSED_STRING","'john.doe'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$account",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","label",83],"(",")",")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertIdentical",84],"(",["T_CONSTANT_ENCAPSED_STRING","'john.doe@example.com'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$account",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getEmail",84],"(",")",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertIdentical",85],"(",["T_CONSTANT_ENCAPSED_STRING","'The answer is 42.'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$account",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","signature",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","value",85],")",";",["T_WHITESPACE","\n    ",85],["T_COMMENT","\/\/ This value is not overwritten because it's not listed in\n",86],["T_WHITESPACE","    ",87],["T_COMMENT","\/\/ overwrite_properties.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertIdentical",88],"(",["T_CONSTANT_ENCAPSED_STRING","'proto@zo.an'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$account",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getInitialEmail",88],"(",")",")",";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * Test that translation destination fails for untranslatable entities.\n   *\/",91],["T_WHITESPACE","\n  ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","testUntranslatable",94],"(",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","enableModules",95],"(","[",["T_CONSTANT_ENCAPSED_STRING","'language_test'",95],"]",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","installEntitySchema",96],"(",["T_CONSTANT_ENCAPSED_STRING","'no_language_entity_test'",96],")",";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/** @var MigrationInterface $migration *\/",98],["T_WHITESPACE","\n    ",98],["T_VARIABLE","$migration",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Drupal",99],["T_DOUBLE_COLON","::",99],["T_STRING","service",99],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","createStubMigration",99],"(","[",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'source'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],"[",["T_WHITESPACE","\n        ",100],["T_CONSTANT_ENCAPSED_STRING","'plugin'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'embedded_data'",101],",",["T_WHITESPACE","\n        ",101],["T_CONSTANT_ENCAPSED_STRING","'ids'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'integer'",102],"]","]",",",["T_WHITESPACE","\n        ",102],["T_CONSTANT_ENCAPSED_STRING","'data_rows'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],"[","[",["T_CONSTANT_ENCAPSED_STRING","'id'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_LNUMBER","1",103],"]","]",",",["T_WHITESPACE","\n      ",103],"]",",",["T_WHITESPACE","\n      ",104],["T_CONSTANT_ENCAPSED_STRING","'process'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],"[",["T_WHITESPACE","\n        ",105],["T_CONSTANT_ENCAPSED_STRING","'id'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'id'",106],",",["T_WHITESPACE","\n      ",106],"]",",",["T_WHITESPACE","\n      ",107],["T_CONSTANT_ENCAPSED_STRING","'destination'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],"[",["T_WHITESPACE","\n        ",108],["T_CONSTANT_ENCAPSED_STRING","'plugin'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'entity:no_language_entity_test'",109],",",["T_WHITESPACE","\n        ",109],["T_CONSTANT_ENCAPSED_STRING","'translations'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_STRING","TRUE",110],",",["T_WHITESPACE","\n      ",110],"]",",",["T_WHITESPACE","\n    ",111],"]",")",";",["T_WHITESPACE","\n\n    ",112],["T_VARIABLE","$message",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","prophesize",114],"(",["T_STRING","MigrateMessageInterface",114],["T_DOUBLE_COLON","::",114],["T_CLASS","class",114],")",";",["T_WHITESPACE","\n    ",114],["T_COMMENT","\/\/ Match the expected message. Can't use default argument types, because\n",115],["T_WHITESPACE","    ",116],["T_COMMENT","\/\/ we need to convert to string from TranslatableMarkup.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$argument",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","Argument",117],["T_DOUBLE_COLON","::",117],["T_STRING","that",117],"(",["T_FUNCTION","function",117],"(",["T_VARIABLE","$msg",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n      ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_STRING","strpos",118],"(",["T_STRING_CAST","(string)",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$msg",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"This entity type does not support translation\"",118],")",["T_WHITESPACE"," ",118],["T_IS_NOT_IDENTICAL","!==",118],["T_WHITESPACE"," ",118],["T_STRING","FALSE",118],";",["T_WHITESPACE","\n    ",118],"}",")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$message",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","display",120],"(",["T_VARIABLE","$argument",120],",",["T_WHITESPACE"," ",120],["T_STRING","Argument",120],["T_DOUBLE_COLON","::",120],["T_STRING","any",120],"(",")",")",["T_WHITESPACE","\n      ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","shouldBeCalled",121],"(",")",";",["T_WHITESPACE","\n\n    ",121],["T_VARIABLE","$executable",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_STRING","MigrateExecutable",123],"(",["T_VARIABLE","$migration",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$message",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","reveal",123],"(",")",")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$executable",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","import",124],"(",")",";",["T_WHITESPACE","\n  ",124],"}",["T_WHITESPACE","\n\n",125],"}",["T_WHITESPACE","\n",127]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","content_moderation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Field",3],["T_NS_SEPARATOR","\\",3],["T_STRING","FieldWidget",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ContentEntityInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityStorageInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityTypeManagerInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Query",8],["T_NS_SEPARATOR","\\",8],["T_STRING","QueryInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldDefinitionInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Field",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FieldItemListInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Plugin",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldWidget",11],["T_NS_SEPARATOR","\\",11],["T_STRING","OptionsSelectWidget",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Form",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FormStateInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Plugin",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ContainerFactoryPluginInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Session",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AccountInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","content_moderation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ModerationInformation",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Drupal",16],["T_NS_SEPARATOR","\\",16],["T_STRING","content_moderation",16],["T_NS_SEPARATOR","\\",16],["T_STRING","StateTransitionValidation",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","DependencyInjection",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ContainerInterface",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Plugin implementation of the 'moderation_state_default' widget.\n *\n * @FieldWidget(\n *   id = \"moderation_state_default\",\n *   label = @Translation(\"Moderation state\"),\n *   field_types = {\n *     \"entity_reference\"\n *   }\n * )\n *\/",19],["T_WHITESPACE","\n",29],["T_CLASS","class",30],["T_WHITESPACE"," ",30],["T_STRING","ModerationStateWidget",30],["T_WHITESPACE"," ",30],["T_EXTENDS","extends",30],["T_WHITESPACE"," ",30],["T_STRING","OptionsSelectWidget",30],["T_WHITESPACE"," ",30],["T_IMPLEMENTS","implements",30],["T_WHITESPACE"," ",30],["T_STRING","ContainerFactoryPluginInterface",30],["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Current user service.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountInterface\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$currentUser",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * Moderation state transition entity query.\n   *\n   * @var \\Drupal\\Core\\Entity\\Query\\QueryInterface\n   *\/",39],["T_WHITESPACE","\n  ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$moderationStateTransitionEntityQuery",44],";",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * Moderation state storage.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityStorageInterface\n   *\/",46],["T_WHITESPACE","\n  ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$moderationStateStorage",51],";",["T_WHITESPACE","\n\n  ",51],["T_DOC_COMMENT","\/**\n   * Moderation information service.\n   *\n   * @var \\Drupal\\content_moderation\\ModerationInformation\n   *\/",53],["T_WHITESPACE","\n  ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$moderationInformation",58],";",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * The entity type manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeManagerInterface\n   *\/",60],["T_WHITESPACE","\n  ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$entityTypeManager",65],";",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * Moderation state transition storage.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityStorageInterface\n   *\/",67],["T_WHITESPACE","\n  ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$moderationStateTransitionStorage",72],";",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * Moderation state transition validation service.\n   *\n   * @var \\Drupal\\content_moderation\\StateTransitionValidation\n   *\/",74],["T_WHITESPACE","\n  ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$validator",79],";",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * Constructs a new ModerationStateWidget object.\n   *\n   * @param string $plugin_id\n   *   Plugin id.\n   * @param mixed $plugin_definition\n   *   Plugin definition.\n   * @param \\Drupal\\Core\\Field\\FieldDefinitionInterface $field_definition\n   *   Field definition.\n   * @param array $settings\n   *   Field settings.\n   * @param array $third_party_settings\n   *   Third party settings.\n   * @param \\Drupal\\Core\\Session\\AccountInterface $current_user\n   *   Current user service.\n   * @param \\Drupal\\Core\\Entity\\EntityTypeManagerInterface $entity_type_manager\n   *   Entity type manager.\n   * @param \\Drupal\\Core\\Entity\\EntityStorageInterface $moderation_state_storage\n   *   Moderation state storage.\n   * @param \\Drupal\\Core\\Entity\\EntityStorageInterface $moderation_state_transition_storage\n   *   Moderation state transition storage.\n   * @param \\Drupal\\Core\\Entity\\Query\\QueryInterface $entity_query\n   *   Moderation transition entity query service.\n   * @param \\Drupal\\content_moderation\\ModerationInformation $moderation_information\n   *   Moderation information service.\n   * @param \\Drupal\\content_moderation\\StateTransitionValidation $validator\n   *   Moderation state transition validation service\n   *\/",81],["T_WHITESPACE","\n  ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","__construct",109],"(",["T_VARIABLE","$plugin_id",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$plugin_definition",109],",",["T_WHITESPACE"," ",109],["T_STRING","FieldDefinitionInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$field_definition",109],",",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$settings",109],",",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$third_party_settings",109],",",["T_WHITESPACE"," ",109],["T_STRING","AccountInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$current_user",109],",",["T_WHITESPACE"," ",109],["T_STRING","EntityTypeManagerInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$entity_type_manager",109],",",["T_WHITESPACE"," ",109],["T_STRING","EntityStorageInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$moderation_state_storage",109],",",["T_WHITESPACE"," ",109],["T_STRING","EntityStorageInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$moderation_state_transition_storage",109],",",["T_WHITESPACE"," ",109],["T_STRING","QueryInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$entity_query",109],",",["T_WHITESPACE"," ",109],["T_STRING","ModerationInformation",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$moderation_information",109],",",["T_WHITESPACE"," ",109],["T_STRING","StateTransitionValidation",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$validator",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n    ",109],["T_STRING","parent",110],["T_DOUBLE_COLON","::",110],["T_STRING","__construct",110],"(",["T_VARIABLE","$plugin_id",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$plugin_definition",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$field_definition",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$settings",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$third_party_settings",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","moderationStateTransitionEntityQuery",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$entity_query",111],";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","moderationStateTransitionStorage",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$moderation_state_transition_storage",112],";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","moderationStateStorage",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$moderation_state_storage",113],";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","entityTypeManager",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$entity_type_manager",114],";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","currentUser",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$current_user",115],";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","moderationInformation",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$moderation_information",116],";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","validator",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$validator",117],";",["T_WHITESPACE","\n  ",117],"}",["T_WHITESPACE","\n\n  ",118],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",120],["T_WHITESPACE","\n  ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_STATIC","static",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","create",123],"(",["T_STRING","ContainerInterface",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$container",123],",",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$configuration",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$plugin_id",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$plugin_definition",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n    ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_STATIC","static",124],"(",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$plugin_id",125],",",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$plugin_definition",126],",",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$configuration",127],"[",["T_CONSTANT_ENCAPSED_STRING","'field_definition'",127],"]",",",["T_WHITESPACE","\n      ",127],["T_VARIABLE","$configuration",128],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",128],"]",",",["T_WHITESPACE","\n      ",128],["T_VARIABLE","$configuration",129],"[",["T_CONSTANT_ENCAPSED_STRING","'third_party_settings'",129],"]",",",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$container",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","get",130],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",130],")",",",["T_WHITESPACE","\n      ",130],["T_VARIABLE","$container",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","get",131],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",131],")",",",["T_WHITESPACE","\n      ",131],["T_VARIABLE","$container",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","get",132],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getStorage",132],"(",["T_CONSTANT_ENCAPSED_STRING","'moderation_state'",132],")",",",["T_WHITESPACE","\n      ",132],["T_VARIABLE","$container",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","get",133],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",133],")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getStorage",133],"(",["T_CONSTANT_ENCAPSED_STRING","'moderation_state_transition'",133],")",",",["T_WHITESPACE","\n      ",133],["T_VARIABLE","$container",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","get",134],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.query'",134],")",["T_OBJECT_OPERATOR","->",134],["T_STRING","get",134],"(",["T_CONSTANT_ENCAPSED_STRING","'moderation_state_transition'",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'AND'",134],")",",",["T_WHITESPACE","\n      ",134],["T_VARIABLE","$container",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_CONSTANT_ENCAPSED_STRING","'content_moderation.moderation_information'",135],")",",",["T_WHITESPACE","\n      ",135],["T_VARIABLE","$container",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","get",136],"(",["T_CONSTANT_ENCAPSED_STRING","'content_moderation.state_transition_validation'",136],")",["T_WHITESPACE","\n    ",136],")",";",["T_WHITESPACE","\n  ",137],"}",["T_WHITESPACE","\n\n  ",138],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",140],["T_WHITESPACE","\n  ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","formElement",143],"(",["T_STRING","FieldItemListInterface",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$items",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$delta",143],",",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$element",143],",",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],["T_WHITESPACE"," ",143],"&",["T_VARIABLE","$form",143],",",["T_WHITESPACE"," ",143],["T_STRING","FormStateInterface",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$form_state",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n    ",143],["T_DOC_COMMENT","\/** @var ContentEntityInterface $entity *\/",144],["T_WHITESPACE","\n    ",144],["T_VARIABLE","$entity",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$items",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getEntity",145],"(",")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/* @var \\Drupal\\Core\\Config\\Entity\\ConfigEntityInterface $bundle_entity *\/",147],["T_WHITESPACE","\n    ",147],["T_VARIABLE","$bundle_entity",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","entityTypeManager",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getStorage",148],"(",["T_VARIABLE","$entity",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getEntityType",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getBundleEntityType",148],"(",")",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","load",148],"(",["T_VARIABLE","$entity",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","bundle",148],"(",")",")",";",["T_WHITESPACE","\n    ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(","!",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","moderationInformation",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","isModeratedEntity",149],"(",["T_VARIABLE","$entity",149],")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n      ",149],["T_COMMENT","\/\/ @todo https:\/\/www.drupal.org\/node\/2779933 write a test for this.\n",150],["T_WHITESPACE","      ",151],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$element",151],["T_WHITESPACE"," ",151],"+",["T_WHITESPACE"," ",151],"[",["T_CONSTANT_ENCAPSED_STRING","'#access'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_STRING","FALSE",151],"]",";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_VARIABLE","$default",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$items",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","get",154],"(",["T_VARIABLE","$delta",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","value",154],["T_WHITESPACE"," ",154],"?",":",["T_WHITESPACE"," ",154],["T_VARIABLE","$bundle_entity",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getThirdPartySetting",154],"(",["T_CONSTANT_ENCAPSED_STRING","'content_moderation'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'default_moderation_state'",154],",",["T_WHITESPACE"," ",154],["T_STRING","FALSE",154],")",";",["T_WHITESPACE","\n    ",154],["T_DOC_COMMENT","\/** @var \\Drupal\\content_moderation\\ModerationStateInterface $default_state *\/",155],["T_WHITESPACE","\n    ",155],["T_VARIABLE","$default_state",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","entityTypeManager",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getStorage",156],"(",["T_CONSTANT_ENCAPSED_STRING","'moderation_state'",156],")",["T_OBJECT_OPERATOR","->",156],["T_STRING","load",156],"(",["T_VARIABLE","$default",156],")",";",["T_WHITESPACE","\n    ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(","!",["T_VARIABLE","$default",157],["T_WHITESPACE"," ",157],["T_BOOLEAN_OR","||",157],["T_WHITESPACE"," ",157],"!",["T_VARIABLE","$default_state",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n      ",157],["T_THROW","throw",158],["T_WHITESPACE"," ",158],["T_NEW","new",158],["T_WHITESPACE"," ",158],["T_NS_SEPARATOR","\\",158],["T_STRING","UnexpectedValueException",158],"(",["T_STRING","sprintf",158],"(",["T_CONSTANT_ENCAPSED_STRING","'The %s bundle has an invalid moderation state configuration, moderation states are enabled but no default is set.'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$bundle_entity",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","label",158],"(",")",")",")",";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_VARIABLE","$transitions",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","validator",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getValidTransitions",161],"(",["T_VARIABLE","$entity",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","currentUser",161],")",";",["T_WHITESPACE","\n\n    ",161],["T_VARIABLE","$target_states",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],"[","]",";",["T_WHITESPACE","\n    ",163],["T_DOC_COMMENT","\/** @var \\Drupal\\content_moderation\\Entity\\ModerationStateTransition $transition *\/",164],["T_WHITESPACE","\n    ",164],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$transitions",165],["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$transition",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n      ",165],["T_VARIABLE","$target_states",166],"[",["T_VARIABLE","$transition",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getToState",166],"(",")","]",["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$transition",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","label",166],"(",")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_COMMENT","\/\/ @todo https:\/\/www.drupal.org\/node\/2779933 write a test for this.\n",169],["T_WHITESPACE","    ",170],["T_VARIABLE","$element",170],["T_WHITESPACE"," ",170],["T_PLUS_EQUAL","+=",170],["T_WHITESPACE"," ",170],"[",["T_WHITESPACE","\n      ",170],["T_CONSTANT_ENCAPSED_STRING","'#access'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_STRING","FALSE",171],",",["T_WHITESPACE","\n      ",171],["T_CONSTANT_ENCAPSED_STRING","'#type'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'select'",172],",",["T_WHITESPACE","\n      ",172],["T_CONSTANT_ENCAPSED_STRING","'#options'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$target_states",173],",",["T_WHITESPACE","\n      ",173],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$default",174],",",["T_WHITESPACE","\n      ",174],["T_CONSTANT_ENCAPSED_STRING","'#published'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$default",175],["T_WHITESPACE"," ",175],"?",["T_WHITESPACE"," ",175],["T_VARIABLE","$default_state",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","isPublishedState",175],"(",")",["T_WHITESPACE"," ",175],":",["T_WHITESPACE"," ",175],["T_STRING","FALSE",175],",",["T_WHITESPACE","\n      ",175],["T_CONSTANT_ENCAPSED_STRING","'#key_column'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","column",176],",",["T_WHITESPACE","\n    ",176],"]",";",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$element",178],"[",["T_CONSTANT_ENCAPSED_STRING","'#element_validate'",178],"]","[","]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",["T_STRING","get_class",178],"(",["T_VARIABLE","$this",178],")",",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'validateElement'",178],")",";",["T_WHITESPACE","\n\n    ",178],["T_COMMENT","\/\/ Use the dropbutton.\n",180],["T_WHITESPACE","    ",181],["T_VARIABLE","$element",181],"[",["T_CONSTANT_ENCAPSED_STRING","'#process'",181],"]","[","]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],"[",["T_STRING","get_called_class",181],"(",")",",",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'processActions'",181],"]",";",["T_WHITESPACE","\n    ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$element",182],";",["T_WHITESPACE","\n  ",182],"}",["T_WHITESPACE","\n\n  ",183],["T_DOC_COMMENT","\/**\n   * Entity builder updating the node moderation state with the submitted value.\n   *\n   * @param string $entity_type_id\n   *   The entity type identifier.\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $entity\n   *   The entity updated with the submitted values.\n   * @param array $form\n   *   The complete form array.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\/",185],["T_WHITESPACE","\n  ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_STATIC","static",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","updateStatus",197],"(",["T_VARIABLE","$entity_type_id",197],",",["T_WHITESPACE"," ",197],["T_STRING","ContentEntityInterface",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$entity",197],",",["T_WHITESPACE"," ",197],["T_ARRAY","array",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$form",197],",",["T_WHITESPACE"," ",197],["T_STRING","FormStateInterface",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$form_state",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$element",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$form_state",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getTriggeringElement",198],"(",")",";",["T_WHITESPACE","\n    ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_ISSET","isset",199],"(",["T_VARIABLE","$element",199],"[",["T_CONSTANT_ENCAPSED_STRING","'#moderation_state'",199],"]",")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n      ",199],["T_VARIABLE","$entity",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","moderation_state",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","target_id",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$element",200],"[",["T_CONSTANT_ENCAPSED_STRING","'#moderation_state'",200],"]",";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n  ",201],"}",["T_WHITESPACE","\n\n  ",202],["T_DOC_COMMENT","\/**\n   * Process callback to alter action buttons.\n   *\/",204],["T_WHITESPACE","\n  ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_STATIC","static",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","processActions",207],"(",["T_VARIABLE","$element",207],",",["T_WHITESPACE"," ",207],["T_STRING","FormStateInterface",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$form_state",207],",",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],["T_WHITESPACE"," ",207],"&",["T_VARIABLE","$form",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n\n    ",207],["T_COMMENT","\/\/ We'll steal most of the button configuration from the default submit\n",209],["T_WHITESPACE","    ",210],["T_COMMENT","\/\/ button. However, NodeForm also hides that button for admins (as it adds\n",210],["T_WHITESPACE","    ",211],["T_COMMENT","\/\/ its own, too), so we have to restore it.\n",211],["T_WHITESPACE","    ",212],["T_VARIABLE","$default_button",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$form",212],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",212],"]","[",["T_CONSTANT_ENCAPSED_STRING","'submit'",212],"]",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$default_button",213],"[",["T_CONSTANT_ENCAPSED_STRING","'#access'",213],"]",["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","TRUE",213],";",["T_WHITESPACE","\n\n    ",213],["T_COMMENT","\/\/ Add a custom button for each transition we're allowing. The #dropbutton\n",215],["T_WHITESPACE","    ",216],["T_COMMENT","\/\/ property tells FAPI to cluster them all together into a single widget.\n",216],["T_WHITESPACE","    ",217],["T_VARIABLE","$options",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$element",217],"[",["T_CONSTANT_ENCAPSED_STRING","'#options'",217],"]",";",["T_WHITESPACE","\n\n    ",217],["T_VARIABLE","$entity",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$form_state",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getFormObject",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","getEntity",219],"(",")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$translatable",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],"!",["T_VARIABLE","$entity",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","isNew",220],"(",")",["T_WHITESPACE"," ",220],["T_BOOLEAN_AND","&&",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$entity",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","isTranslatable",220],"(",")",";",["T_WHITESPACE","\n    ",220],["T_FOREACH","foreach",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$options",221],["T_WHITESPACE"," ",221],["T_AS","as",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$id",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$label",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n      ",221],["T_VARIABLE","$button",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],"[",["T_WHITESPACE","\n        ",222],["T_CONSTANT_ENCAPSED_STRING","'#dropbutton'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'save'",223],",",["T_WHITESPACE","\n        ",223],["T_CONSTANT_ENCAPSED_STRING","'#moderation_state'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$id",224],",",["T_WHITESPACE","\n        ",224],["T_CONSTANT_ENCAPSED_STRING","'#weight'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],"-",["T_LNUMBER","10",225],",",["T_WHITESPACE","\n      ",225],"]",";",["T_WHITESPACE","\n\n      ",226],["T_VARIABLE","$button",228],"[",["T_CONSTANT_ENCAPSED_STRING","'#value'",228],"]",["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$translatable",228],["T_WHITESPACE","\n        ",228],"?",["T_WHITESPACE"," ",229],["T_STRING","t",229],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and @transition (this translation)'",229],",",["T_WHITESPACE"," ",229],"[",["T_CONSTANT_ENCAPSED_STRING","'@transition'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$label",229],"]",")",["T_WHITESPACE","\n        ",229],":",["T_WHITESPACE"," ",230],["T_STRING","t",230],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and @transition'",230],",",["T_WHITESPACE"," ",230],"[",["T_CONSTANT_ENCAPSED_STRING","'@transition'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$label",230],"]",")",";",["T_WHITESPACE","\n\n      ",230],["T_VARIABLE","$form",232],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",232],"]","[",["T_CONSTANT_ENCAPSED_STRING","'moderation_state_'",232],["T_WHITESPACE"," ",232],".",["T_WHITESPACE"," ",232],["T_VARIABLE","$id",232],"]",["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$button",232],["T_WHITESPACE"," ",232],"+",["T_WHITESPACE"," ",232],["T_VARIABLE","$default_button",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_COMMENT","\/\/ Hide the default buttons, including the specialty ones added by\n",235],["T_WHITESPACE","    ",236],["T_COMMENT","\/\/ NodeForm.\n",236],["T_WHITESPACE","    ",237],["T_FOREACH","foreach",237],["T_WHITESPACE"," ",237],"(","[",["T_CONSTANT_ENCAPSED_STRING","'publish'",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'unpublish'",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'submit'",237],"]",["T_WHITESPACE"," ",237],["T_AS","as",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$key",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n      ",237],["T_VARIABLE","$form",238],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",238],"]","[",["T_VARIABLE","$key",238],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#access'",238],"]",["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","FALSE",238],";",["T_WHITESPACE","\n      ",238],["T_UNSET","unset",239],"(",["T_VARIABLE","$form",239],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",239],"]","[",["T_VARIABLE","$key",239],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#dropbutton'",239],"]",")",";",["T_WHITESPACE","\n    ",239],"}",["T_WHITESPACE","\n\n    ",240],["T_COMMENT","\/\/ Setup a callback to translate the button selection back into field\n",242],["T_WHITESPACE","    ",243],["T_COMMENT","\/\/ widget, so that it will get saved properly.\n",243],["T_WHITESPACE","    ",244],["T_VARIABLE","$form",244],"[",["T_CONSTANT_ENCAPSED_STRING","'#entity_builders'",244],"]","[",["T_CONSTANT_ENCAPSED_STRING","'update_moderation_state'",244],"]",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],"[",["T_STRING","get_called_class",244],"(",")",",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'updateStatus'",244],"]",";",["T_WHITESPACE","\n    ",244],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$element",245],";",["T_WHITESPACE","\n  ",245],"}",["T_WHITESPACE","\n\n  ",246],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",248],["T_WHITESPACE","\n  ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_STATIC","static",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","isApplicable",251],"(",["T_STRING","FieldDefinitionInterface",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$field_definition",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n    ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_STRING","parent",252],["T_DOUBLE_COLON","::",252],["T_STRING","isApplicable",252],"(",["T_VARIABLE","$field_definition",252],")",["T_WHITESPACE"," ",252],["T_BOOLEAN_AND","&&",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$field_definition",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getName",252],"(",")",["T_WHITESPACE"," ",252],["T_IS_IDENTICAL","===",252],["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'moderation_state'",252],";",["T_WHITESPACE","\n  ",252],"}",["T_WHITESPACE","\n\n",253],"}",["T_WHITESPACE","\n",255]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","content_moderation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","ParamConverter",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityManagerInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ParamConverter",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityConverter",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TypedData",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TranslatableInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","content_moderation",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ModerationInformationInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Routing",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Route",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Defines a class for making sure the edit-route loads the current draft.\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","EntityRevisionConverter",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","EntityConverter",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * Moderation information service.\n   *\n   * @var \\Drupal\\content_moderation\\ModerationInformationInterface\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$moderationInformation",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * EntityRevisionConverter constructor.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager, needed by the parent class.\n   * @param \\Drupal\\content_moderation\\ModerationInformationInterface $moderation_info\n   *   The moderation info utility service.\n   *\n   * @todo: If the parent class is ever cleaned up to use EntityTypeManager\n   *   instead of Entity manager, this method will also need to be adjusted.\n   *\/",24],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","__construct",35],"(",["T_STRING","EntityManagerInterface",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$entity_manager",35],",",["T_WHITESPACE"," ",35],["T_STRING","ModerationInformationInterface",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$moderation_info",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_STRING","parent",36],["T_DOUBLE_COLON","::",36],["T_STRING","__construct",36],"(",["T_VARIABLE","$entity_manager",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","moderationInformation",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$moderation_info",37],";",["T_WHITESPACE","\n  ",37],"}",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","applies",43],"(",["T_VARIABLE","$definition",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$name",43],",",["T_WHITESPACE"," ",43],["T_STRING","Route",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$route",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","hasForwardRevisionFlag",44],"(",["T_VARIABLE","$definition",44],")",["T_WHITESPACE"," ",44],["T_BOOLEAN_OR","||",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","isEditFormPage",44],"(",["T_VARIABLE","$route",44],")",";",["T_WHITESPACE","\n  ",44],"}",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * Determines if the route definition includes a forward-revision flag.\n   *\n   * This is a custom flag defined by the Content Moderation module to load\n   * forward revisions rather than the default revision on a given route.\n   *\n   * @param array $definition\n   *   The parameter definition provided in the route options.\n   *\n   * @return bool\n   *   TRUE if the forward revision flag is set, FALSE otherwise.\n   *\/",47],["T_WHITESPACE","\n  ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","hasForwardRevisionFlag",59],"(",["T_ARRAY","array",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$definition",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],"(",["T_ISSET","isset",60],"(",["T_VARIABLE","$definition",60],"[",["T_CONSTANT_ENCAPSED_STRING","'load_forward_revision'",60],"]",")",["T_WHITESPACE"," ",60],["T_BOOLEAN_AND","&&",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$definition",60],"[",["T_CONSTANT_ENCAPSED_STRING","'load_forward_revision'",60],"]",")",";",["T_WHITESPACE","\n  ",60],"}",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * Determines if a given route is the edit-form for an entity.\n   *\n   * @param \\Symfony\\Component\\Routing\\Route $route\n   *   The route definition.\n   *\n   * @return bool\n   *   Returns TRUE if the route is the edit form of an entity, FALSE otherwise.\n   *\/",63],["T_WHITESPACE","\n  ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","isEditFormPage",72],"(",["T_STRING","Route",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$route",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n    ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$default",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$route",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getDefault",73],"(",["T_CONSTANT_ENCAPSED_STRING","'_entity_form'",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n      ",73],["T_COMMENT","\/\/ If no operation is provided, use 'default'.\n",74],["T_WHITESPACE","      ",75],["T_VARIABLE","$default",75],["T_WHITESPACE"," ",75],["T_CONCAT_EQUAL",".=",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'.default'",75],";",["T_WHITESPACE","\n      ",75],["T_LIST","list",76],"(",["T_VARIABLE","$entity_type_id",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$operation",76],")",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","explode",76],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$default",76],")",";",["T_WHITESPACE","\n      ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(","!",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","entityManager",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","hasDefinition",77],"(",["T_VARIABLE","$entity_type_id",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_STRING","FALSE",78],";",["T_WHITESPACE","\n      ",78],"}",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$entity_type",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","entityManager",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getDefinition",80],"(",["T_VARIABLE","$entity_type_id",80],")",";",["T_WHITESPACE","\n      ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$operation",81],["T_WHITESPACE"," ",81],["T_IS_EQUAL","==",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'edit'",81],["T_WHITESPACE"," ",81],["T_BOOLEAN_AND","&&",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$entity_type",81],["T_WHITESPACE"," ",81],["T_BOOLEAN_AND","&&",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$entity_type",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","isRevisionable",81],"(",")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n  ",82],"}",["T_WHITESPACE","\n\n  ",83],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",85],["T_WHITESPACE","\n  ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","convert",88],"(",["T_VARIABLE","$value",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$definition",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$name",88],",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$defaults",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$entity",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","parent",89],["T_DOUBLE_COLON","::",89],["T_STRING","convert",89],"(",["T_VARIABLE","$value",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$definition",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$name",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$defaults",89],")",";",["T_WHITESPACE","\n\n    ",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$entity",91],["T_WHITESPACE"," ",91],["T_BOOLEAN_AND","&&",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","moderationInformation",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","isModeratedEntity",91],"(",["T_VARIABLE","$entity",91],")",["T_WHITESPACE"," ",91],["T_BOOLEAN_AND","&&",91],["T_WHITESPACE"," ",91],"!",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","moderationInformation",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","isLatestRevision",91],"(",["T_VARIABLE","$entity",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$entity_type_id",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getEntityTypeFromDefaults",92],"(",["T_VARIABLE","$definition",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$name",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$defaults",92],")",";",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$latest_revision",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","moderationInformation",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getLatestRevision",93],"(",["T_VARIABLE","$entity_type_id",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$value",93],")",";",["T_WHITESPACE","\n\n      ",93],["T_COMMENT","\/\/ If the entity type is translatable, ensure we return the proper\n",95],["T_WHITESPACE","      ",96],["T_COMMENT","\/\/ translation object for the current context.\n",96],["T_WHITESPACE","      ",97],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$latest_revision",97],["T_WHITESPACE"," ",97],["T_INSTANCEOF","instanceof",97],["T_WHITESPACE"," ",97],["T_STRING","EntityInterface",97],["T_WHITESPACE"," ",97],["T_BOOLEAN_AND","&&",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$entity",97],["T_WHITESPACE"," ",97],["T_INSTANCEOF","instanceof",97],["T_WHITESPACE"," ",97],["T_STRING","TranslatableInterface",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$latest_revision",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","entityManager",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getTranslationFromContext",98],"(",["T_VARIABLE","$latest_revision",98],",",["T_WHITESPACE"," ",98],["T_STRING","NULL",98],",",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'operation'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'entity_upcast'",98],")",")",";",["T_WHITESPACE","\n      ",98],"}",["T_WHITESPACE","\n\n      ",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$latest_revision",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","isRevisionTranslationAffected",101],"(",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$entity",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$latest_revision",102],";",["T_WHITESPACE","\n      ",102],"}",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$entity",106],";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n",107],"}",["T_WHITESPACE","\n",109]]
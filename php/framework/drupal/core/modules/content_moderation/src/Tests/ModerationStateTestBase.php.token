[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","content_moderation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Session",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AccountInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","user",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Role",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","content_moderation",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ModerationState",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Defines a base class for moderation state tests.\n *\/",10],["T_WHITESPACE","\n",12],["T_ABSTRACT","abstract",13],["T_WHITESPACE"," ",13],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ModerationStateTestBase",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","WebTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Profile to use.\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$profile",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'testing'",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Admin user.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountInterface\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$adminUser",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Permissions to grant admin user.\n   *\n   * @var array\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$permissions",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],"[",["T_WHITESPACE","\n    ",32],["T_CONSTANT_ENCAPSED_STRING","'administer moderation states'",33],",",["T_WHITESPACE","\n    ",33],["T_CONSTANT_ENCAPSED_STRING","'administer moderation state transitions'",34],",",["T_WHITESPACE","\n    ",34],["T_CONSTANT_ENCAPSED_STRING","'use draft_draft transition'",35],",",["T_WHITESPACE","\n    ",35],["T_CONSTANT_ENCAPSED_STRING","'use draft_published transition'",36],",",["T_WHITESPACE","\n    ",36],["T_CONSTANT_ENCAPSED_STRING","'use published_draft transition'",37],",",["T_WHITESPACE","\n    ",37],["T_CONSTANT_ENCAPSED_STRING","'use published_archived transition'",38],",",["T_WHITESPACE","\n    ",38],["T_CONSTANT_ENCAPSED_STRING","'access administration pages'",39],",",["T_WHITESPACE","\n    ",39],["T_CONSTANT_ENCAPSED_STRING","'administer content types'",40],",",["T_WHITESPACE","\n    ",40],["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",41],",",["T_WHITESPACE","\n    ",41],["T_CONSTANT_ENCAPSED_STRING","'view latest version'",42],",",["T_WHITESPACE","\n    ",42],["T_CONSTANT_ENCAPSED_STRING","'view any unpublished content'",43],",",["T_WHITESPACE","\n    ",43],["T_CONSTANT_ENCAPSED_STRING","'access content overview'",44],",",["T_WHITESPACE","\n  ",44],"]",";",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",47],["T_WHITESPACE","\n  ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_STATIC","static",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$modules",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],"[",["T_WHITESPACE","\n    ",52],["T_CONSTANT_ENCAPSED_STRING","'content_moderation'",53],",",["T_WHITESPACE","\n    ",53],["T_CONSTANT_ENCAPSED_STRING","'block'",54],",",["T_WHITESPACE","\n    ",54],["T_CONSTANT_ENCAPSED_STRING","'block_content'",55],",",["T_WHITESPACE","\n    ",55],["T_CONSTANT_ENCAPSED_STRING","'node'",56],",",["T_WHITESPACE","\n  ",56],"]",";",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Sets the test up.\n   *\/",59],["T_WHITESPACE","\n  ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","setUp",62],"(",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n    ",62],["T_STRING","parent",63],["T_DOUBLE_COLON","::",63],["T_STRING","setUp",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","adminUser",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","drupalCreateUser",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","permissions",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","drupalPlaceBlock",65],"(",["T_CONSTANT_ENCAPSED_STRING","'local_tasks_block'",65],",",["T_WHITESPACE"," ",65],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'tabs_block'",65],"]",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","drupalPlaceBlock",66],"(",["T_CONSTANT_ENCAPSED_STRING","'page_title_block'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","drupalPlaceBlock",67],"(",["T_CONSTANT_ENCAPSED_STRING","'local_actions_block'",67],",",["T_WHITESPACE"," ",67],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'actions_block'",67],"]",")",";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * Creates a content-type from the UI.\n   *\n   * @param string $content_type_name\n   *   Content type human name.\n   * @param string $content_type_id\n   *   Machine name.\n   * @param bool $moderated\n   *   TRUE if should be moderated.\n   * @param string[] $allowed_states\n   *   Array of allowed state IDs.\n   * @param string $default_state\n   *   Default state.\n   *\/",70],["T_WHITESPACE","\n  ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","createContentTypeFromUi",84],"(",["T_VARIABLE","$content_type_name",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$content_type_id",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$moderated",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","FALSE",84],",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$allowed_states",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[","]",",",["T_WHITESPACE"," ",84],["T_VARIABLE","$default_state",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","NULL",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","drupalGet",85],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","clickLink",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Add content type'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$edit",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],"[",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'name'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$content_type_name",88],",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'type'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$content_type_id",89],",",["T_WHITESPACE","\n    ",89],"]",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","drupalPostForm",91],"(",["T_STRING","NULL",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$edit",91],",",["T_WHITESPACE"," ",91],["T_STRING","t",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Save content type'",91],")",")",";",["T_WHITESPACE","\n\n    ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$moderated",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","enableModerationThroughUi",94],"(",["T_VARIABLE","$content_type_id",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$allowed_states",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$default_state",94],")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n  ",95],"}",["T_WHITESPACE","\n\n  ",96],["T_DOC_COMMENT","\/**\n   * Enable moderation for a specified content type, using the UI.\n   *\n   * @param string $content_type_id\n   *   Machine name.\n   * @param string[] $allowed_states\n   *   Array of allowed state IDs.\n   * @param string $default_state\n   *   Default state.\n   *\/",98],["T_WHITESPACE","\n  ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","enableModerationThroughUi",108],"(",["T_VARIABLE","$content_type_id",108],",",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$allowed_states",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$default_state",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","drupalGet",109],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertLinkByHref",110],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/'",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_VARIABLE","$content_type_id",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'\/moderation'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","drupalGet",111],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/'",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$content_type_id",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertLinkByHref",112],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/'",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_VARIABLE","$content_type_id",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'\/moderation'",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","drupalGet",113],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/'",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$content_type_id",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'\/moderation'",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertFieldByName",114],"(",["T_CONSTANT_ENCAPSED_STRING","'enable_moderation_state'",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertNoFieldChecked",115],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-enable-moderation-state'",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_VARIABLE","$edit",117],"[",["T_CONSTANT_ENCAPSED_STRING","'enable_moderation_state'",117],"]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_LNUMBER","1",117],";",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/** @var ModerationState $state *\/",119],["T_WHITESPACE","\n    ",119],["T_FOREACH","foreach",120],["T_WHITESPACE"," ",120],"(",["T_STRING","ModerationState",120],["T_DOUBLE_COLON","::",120],["T_STRING","loadMultiple",120],"(",")",["T_WHITESPACE"," ",120],["T_AS","as",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$state",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$key",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$state",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","isPublishedState",121],"(",")",["T_WHITESPACE"," ",121],"?",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'allowed_moderation_states_published['",121],["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_VARIABLE","$state",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","id",121],"(",")",["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","']'",121],["T_WHITESPACE"," ",121],":",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'allowed_moderation_states_unpublished['",121],["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_VARIABLE","$state",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","id",121],"(",")",["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","']'",121],";",["T_WHITESPACE","\n      ",121],["T_VARIABLE","$edit",122],"[",["T_VARIABLE","$key",122],"]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","in_array",122],"(",["T_VARIABLE","$state",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","id",122],"(",")",",",["T_WHITESPACE"," ",122],["T_VARIABLE","$allowed_states",122],",",["T_WHITESPACE"," ",122],["T_STRING","TRUE",122],")",["T_WHITESPACE"," ",122],"?",["T_WHITESPACE"," ",122],["T_VARIABLE","$state",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","id",122],"(",")",["T_WHITESPACE"," ",122],":",["T_WHITESPACE"," ",122],["T_STRING","FALSE",122],";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_VARIABLE","$edit",125],"[",["T_CONSTANT_ENCAPSED_STRING","'default_moderation_state'",125],"]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$default_state",125],";",["T_WHITESPACE","\n\n    ",125],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","drupalPostForm",127],"(",["T_STRING","NULL",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$edit",127],",",["T_WHITESPACE"," ",127],["T_STRING","t",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",127],")",")",";",["T_WHITESPACE","\n  ",127],"}",["T_WHITESPACE","\n\n  ",128],["T_DOC_COMMENT","\/**\n   * Grants given user permission to create content of given type.\n   *\n   * @param \\Drupal\\Core\\Session\\AccountInterface $account\n   *   User to grant permission to.\n   * @param string $content_type_id\n   *   Content type ID.\n   *\/",130],["T_WHITESPACE","\n  ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","grantUserPermissionToCreateContentOfType",138],"(",["T_STRING","AccountInterface",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$account",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$content_type_id",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$role_ids",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$account",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getRoles",139],"(",["T_STRING","TRUE",139],")",";",["T_WHITESPACE","\n    ",139],["T_COMMENT","\/* @var \\Drupal\\user\\RoleInterface $role *\/",140],["T_WHITESPACE","\n    ",140],["T_VARIABLE","$role_id",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","reset",141],"(",["T_VARIABLE","$role_ids",141],")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$role",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","Role",142],["T_DOUBLE_COLON","::",142],["T_STRING","load",142],"(",["T_VARIABLE","$role_id",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$role",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","grantPermission",143],"(",["T_STRING","sprintf",143],"(",["T_CONSTANT_ENCAPSED_STRING","'create %s content'",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$content_type_id",143],")",")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$role",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","grantPermission",144],"(",["T_STRING","sprintf",144],"(",["T_CONSTANT_ENCAPSED_STRING","'edit any %s content'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$content_type_id",144],")",")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$role",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","grantPermission",145],"(",["T_STRING","sprintf",145],"(",["T_CONSTANT_ENCAPSED_STRING","'delete any %s content'",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$content_type_id",145],")",")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$role",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","save",146],"(",")",";",["T_WHITESPACE","\n  ",146],"}",["T_WHITESPACE","\n\n",147],"}",["T_WHITESPACE","\n",149]]
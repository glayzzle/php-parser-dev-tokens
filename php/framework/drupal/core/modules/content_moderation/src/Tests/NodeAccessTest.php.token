[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","content_moderation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests permission access control around nodes.\n *\n * @group content_moderation\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","NodeAccessTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","ModerationStateTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",12],["T_WHITESPACE","\n  ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","setUp",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_STRING","parent",16],["T_DOUBLE_COLON","::",16],["T_STRING","setUp",16],"(",")",";",["T_WHITESPACE","\n    ",16],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","drupalLogin",17],"(",["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","adminUser",17],")",";",["T_WHITESPACE","\n    ",17],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","createContentTypeFromUi",18],"(",["T_WHITESPACE","\n      ",18],["T_CONSTANT_ENCAPSED_STRING","'Moderated content'",19],",",["T_WHITESPACE","\n      ",19],["T_CONSTANT_ENCAPSED_STRING","'moderated_content'",20],",",["T_WHITESPACE","\n      ",20],["T_STRING","TRUE",21],",",["T_WHITESPACE","\n      ",21],"[",["T_CONSTANT_ENCAPSED_STRING","'draft'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'published'",22],"]",",",["T_WHITESPACE","\n      ",22],["T_CONSTANT_ENCAPSED_STRING","'draft'",23],["T_WHITESPACE","\n    ",23],")",";",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","grantUserPermissionToCreateContentOfType",25],"(",["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","adminUser",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'moderated_content'",25],")",";",["T_WHITESPACE","\n  ",25],"}",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Verifies that a non-admin user can still access the appropriate pages.\n   *\/",28],["T_WHITESPACE","\n  ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","testPageAccess",31],"(",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","drupalLogin",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","adminUser",32],")",";",["T_WHITESPACE","\n\n    ",32],["T_COMMENT","\/\/ Create a node to test with.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","drupalPostForm",35],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/moderated_content'",35],",",["T_WHITESPACE"," ",35],"[",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'moderated content'",36],",",["T_WHITESPACE","\n    ",36],"]",",",["T_WHITESPACE"," ",37],["T_STRING","t",37],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and Create New Draft'",37],")",")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$nodes",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","entityTypeManager",38],"(",")",["T_WHITESPACE","\n      ",38],["T_OBJECT_OPERATOR","->",39],["T_STRING","getStorage",39],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",39],")",["T_WHITESPACE","\n      ",39],["T_OBJECT_OPERATOR","->",40],["T_STRING","loadByProperties",40],"(","[",["T_WHITESPACE","\n        ",40],["T_CONSTANT_ENCAPSED_STRING","'title'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'moderated content'",41],",",["T_WHITESPACE","\n      ",41],"]",")",";",["T_WHITESPACE","\n\n    ",42],["T_IF","if",44],["T_WHITESPACE"," ",44],"(","!",["T_VARIABLE","$nodes",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n      ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","fail",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Test node was not saved correctly.'",45],")",";",["T_WHITESPACE","\n      ",45],["T_RETURN","return",46],";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/** @var \\Drupal\\node\\NodeInterface $node *\/",49],["T_WHITESPACE","\n    ",49],["T_VARIABLE","$node",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","reset",50],"(",["T_VARIABLE","$nodes",50],")",";",["T_WHITESPACE","\n\n    ",50],["T_VARIABLE","$view_path",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'node\/'",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$node",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","id",52],"(",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$edit_path",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'node\/'",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$node",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","id",53],"(",")",["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",53],";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$latest_path",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'node\/'",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_VARIABLE","$node",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","id",54],"(",")",["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'\/latest'",54],";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Publish the node.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalPostForm",57],"(",["T_VARIABLE","$edit_path",57],",",["T_WHITESPACE"," ",57],"[","]",",",["T_WHITESPACE"," ",57],["T_STRING","t",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and Publish'",57],")",")",";",["T_WHITESPACE","\n\n    ",57],["T_COMMENT","\/\/ Ensure access works correctly for anonymous users.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","drupalLogout",60],"(",")",";",["T_WHITESPACE","\n\n    ",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","drupalGet",62],"(",["T_VARIABLE","$edit_path",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertResponse",63],"(",["T_LNUMBER","403",63],")",";",["T_WHITESPACE","\n\n    ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","drupalGet",65],"(",["T_VARIABLE","$latest_path",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertResponse",66],"(",["T_LNUMBER","403",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","drupalGet",67],"(",["T_VARIABLE","$view_path",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertResponse",68],"(",["T_LNUMBER","200",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Create a forward revision for the 'Latest revision' tab.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","drupalLogin",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","adminUser",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","drupalPostForm",72],"(",["T_VARIABLE","$edit_path",72],",",["T_WHITESPACE"," ",72],"[",["T_WHITESPACE","\n      ",72],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'moderated content revised'",73],",",["T_WHITESPACE","\n    ",73],"]",",",["T_WHITESPACE"," ",74],["T_STRING","t",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and Create New Draft'",74],")",")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Now make a new user and verify that the new user's access is correct.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$user",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","createUser",77],"(","[",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'use draft_draft transition'",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'use published_draft transition'",79],",",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'view latest version'",80],",",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'view any unpublished content'",81],",",["T_WHITESPACE","\n    ",81],"]",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","drupalLogin",83],"(",["T_VARIABLE","$user",83],")",";",["T_WHITESPACE","\n\n    ",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","drupalGet",85],"(",["T_VARIABLE","$edit_path",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertResponse",86],"(",["T_LNUMBER","403",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","drupalGet",88],"(",["T_VARIABLE","$latest_path",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertResponse",89],"(",["T_LNUMBER","200",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","drupalGet",90],"(",["T_VARIABLE","$view_path",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertResponse",91],"(",["T_LNUMBER","200",91],")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Now make another user, who should not be able to see forward revisions.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$user",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","createUser",94],"(","[",["T_WHITESPACE","\n      ",94],["T_CONSTANT_ENCAPSED_STRING","'use published_draft transition'",95],",",["T_WHITESPACE","\n    ",95],"]",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","drupalLogin",97],"(",["T_VARIABLE","$user",97],")",";",["T_WHITESPACE","\n\n    ",97],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","drupalGet",99],"(",["T_VARIABLE","$edit_path",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertResponse",100],"(",["T_LNUMBER","403",100],")",";",["T_WHITESPACE","\n\n    ",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","drupalGet",102],"(",["T_VARIABLE","$latest_path",102],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertResponse",103],"(",["T_LNUMBER","403",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","drupalGet",104],"(",["T_VARIABLE","$view_path",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertResponse",105],"(",["T_LNUMBER","200",105],")",";",["T_WHITESPACE","\n  ",105],"}",["T_WHITESPACE","\n\n",106],"}",["T_WHITESPACE","\n",108]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","content_moderation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n\n",3],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","content_moderation",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ModerationState",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","node",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Node",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","node",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","NodeType",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\content_moderation\\EntityOperations\n *\n * @group content_moderation\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","EntityOperationsTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","KernelTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",18],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],"[",["T_WHITESPACE","\n    ",21],["T_CONSTANT_ENCAPSED_STRING","'content_moderation'",22],",",["T_WHITESPACE","\n    ",22],["T_CONSTANT_ENCAPSED_STRING","'node'",23],",",["T_WHITESPACE","\n    ",23],["T_CONSTANT_ENCAPSED_STRING","'user'",24],",",["T_WHITESPACE","\n    ",24],["T_CONSTANT_ENCAPSED_STRING","'system'",25],",",["T_WHITESPACE","\n  ",25],"]",";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",28],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","setUp",31],"(",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_STRING","parent",32],["T_DOUBLE_COLON","::",32],["T_STRING","setUp",32],"(",")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","installEntitySchema",33],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",33],")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","installSchema",34],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'node_access'",34],")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","installEntitySchema",35],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","installEntitySchema",36],"(",["T_CONSTANT_ENCAPSED_STRING","'content_moderation_state'",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","installConfig",37],"(",["T_CONSTANT_ENCAPSED_STRING","'content_moderation'",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","createNodeType",39],"(",")",";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Creates a page node type to test with, ensuring that it's moderated.\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","createNodeType",45],"(",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$node_type",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","NodeType",46],["T_DOUBLE_COLON","::",46],["T_STRING","create",46],"(","[",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'type'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'page'",47],",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'label'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'Page'",48],",",["T_WHITESPACE","\n    ",48],"]",")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$node_type",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setThirdPartySetting",50],"(",["T_CONSTANT_ENCAPSED_STRING","'content_moderation'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'enabled'",50],",",["T_WHITESPACE"," ",50],["T_STRING","TRUE",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$node_type",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","save",51],"(",")",";",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * Verifies that the process of saving forward-revisions works as expected.\n   *\/",54],["T_WHITESPACE","\n  ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","testForwardRevisions",57],"(",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n    ",57],["T_COMMENT","\/\/ Create a new node in draft.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$page",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","Node",59],["T_DOUBLE_COLON","::",59],["T_STRING","create",59],"(","[",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'type'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'page'",60],",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'title'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'A'",61],",",["T_WHITESPACE","\n    ",61],"]",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$page",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","moderation_state",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","target_id",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'draft'",63],";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$page",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","save",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$id",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$page",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","id",66],"(",")",";",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ Verify the entity saved correctly, and that the presence of forward\n",68],["T_WHITESPACE","    ",69],["T_COMMENT","\/\/ revisions doesn't affect the default node load.\n",69],["T_WHITESPACE","    ",70],["T_DOC_COMMENT","\/** @var Node $page *\/",70],["T_WHITESPACE","\n    ",70],["T_VARIABLE","$page",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","Node",71],["T_DOUBLE_COLON","::",71],["T_STRING","load",71],"(",["T_VARIABLE","$id",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertEquals",72],"(",["T_CONSTANT_ENCAPSED_STRING","'A'",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$page",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getTitle",72],"(",")",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertTrue",73],"(",["T_VARIABLE","$page",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","isDefaultRevision",73],"(",")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertFalse",74],"(",["T_VARIABLE","$page",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","isPublished",74],"(",")",")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Moderate the entity to published.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$page",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setTitle",77],"(",["T_CONSTANT_ENCAPSED_STRING","'B'",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$page",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","moderation_state",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","target_id",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'published'",78],";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$page",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","save",79],"(",")",";",["T_WHITESPACE","\n\n    ",79],["T_COMMENT","\/\/ Verify the entity is now published and public.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$page",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","Node",82],["T_DOUBLE_COLON","::",82],["T_STRING","load",82],"(",["T_VARIABLE","$id",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertEquals",83],"(",["T_CONSTANT_ENCAPSED_STRING","'B'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$page",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getTitle",83],"(",")",")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertTrue",84],"(",["T_VARIABLE","$page",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","isDefaultRevision",84],"(",")",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertTrue",85],"(",["T_VARIABLE","$page",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","isPublished",85],"(",")",")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Make a new forward-revision in Draft.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$page",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setTitle",88],"(",["T_CONSTANT_ENCAPSED_STRING","'C'",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$page",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","moderation_state",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","target_id",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'draft'",89],";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$page",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","save",90],"(",")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ Verify normal loads return the still-default previous version.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$page",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","Node",93],["T_DOUBLE_COLON","::",93],["T_STRING","load",93],"(",["T_VARIABLE","$id",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertEquals",94],"(",["T_CONSTANT_ENCAPSED_STRING","'B'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$page",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getTitle",94],"(",")",")",";",["T_WHITESPACE","\n\n    ",94],["T_COMMENT","\/\/ Verify we can load the forward revision, even if the mechanism is kind\n",96],["T_WHITESPACE","    ",97],["T_COMMENT","\/\/ of gross. Note: revisionIds() is only available on NodeStorageInterface,\n",97],["T_WHITESPACE","    ",98],["T_COMMENT","\/\/ so this won't work for non-nodes. We'd need to use entity queries. This\n",98],["T_WHITESPACE","    ",99],["T_COMMENT","\/\/ is a core bug that should get fixed.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$storage",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Drupal",100],["T_DOUBLE_COLON","::",100],["T_STRING","entityTypeManager",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","getStorage",100],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$revision_ids",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$storage",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","revisionIds",101],"(",["T_VARIABLE","$page",101],")",";",["T_WHITESPACE","\n    ",101],["T_STRING","sort",102],"(",["T_VARIABLE","$revision_ids",102],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$latest",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","end",103],"(",["T_VARIABLE","$revision_ids",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$page",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$storage",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","loadRevision",104],"(",["T_VARIABLE","$latest",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertEquals",105],"(",["T_CONSTANT_ENCAPSED_STRING","'C'",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$page",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getTitle",105],"(",")",")",";",["T_WHITESPACE","\n\n    ",105],["T_VARIABLE","$page",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setTitle",107],"(",["T_CONSTANT_ENCAPSED_STRING","'D'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$page",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","moderation_state",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","target_id",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'published'",108],";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$page",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","save",109],"(",")",";",["T_WHITESPACE","\n\n    ",109],["T_COMMENT","\/\/ Verify normal loads return the still-default previous version.\n",111],["T_WHITESPACE","    ",112],["T_VARIABLE","$page",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Node",112],["T_DOUBLE_COLON","::",112],["T_STRING","load",112],"(",["T_VARIABLE","$id",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertEquals",113],"(",["T_CONSTANT_ENCAPSED_STRING","'D'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$page",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getTitle",113],"(",")",")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertTrue",114],"(",["T_VARIABLE","$page",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","isDefaultRevision",114],"(",")",")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertTrue",115],"(",["T_VARIABLE","$page",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","isPublished",115],"(",")",")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Now check that we can immediately add a new published revision over it.\n",117],["T_WHITESPACE","    ",118],["T_VARIABLE","$page",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setTitle",118],"(",["T_CONSTANT_ENCAPSED_STRING","'E'",118],")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$page",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","moderation_state",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","target_id",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'published'",119],";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$page",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","save",120],"(",")",";",["T_WHITESPACE","\n\n    ",120],["T_VARIABLE","$page",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","Node",122],["T_DOUBLE_COLON","::",122],["T_STRING","load",122],"(",["T_VARIABLE","$id",122],")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","assertEquals",123],"(",["T_CONSTANT_ENCAPSED_STRING","'E'",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$page",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getTitle",123],"(",")",")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","assertTrue",124],"(",["T_VARIABLE","$page",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","isDefaultRevision",124],"(",")",")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertTrue",125],"(",["T_VARIABLE","$page",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","isPublished",125],"(",")",")",";",["T_WHITESPACE","\n  ",125],"}",["T_WHITESPACE","\n\n  ",126],["T_DOC_COMMENT","\/**\n   * Verifies that a newly-created node can go straight to published.\n   *\/",128],["T_WHITESPACE","\n  ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","testPublishedCreation",131],"(",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n    ",131],["T_COMMENT","\/\/ Create a new node in draft.\n",132],["T_WHITESPACE","    ",133],["T_VARIABLE","$page",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","Node",133],["T_DOUBLE_COLON","::",133],["T_STRING","create",133],"(","[",["T_WHITESPACE","\n      ",133],["T_CONSTANT_ENCAPSED_STRING","'type'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'page'",134],",",["T_WHITESPACE","\n      ",134],["T_CONSTANT_ENCAPSED_STRING","'title'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'A'",135],",",["T_WHITESPACE","\n    ",135],"]",")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$page",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","moderation_state",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","target_id",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'published'",137],";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$page",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","save",138],"(",")",";",["T_WHITESPACE","\n\n    ",138],["T_VARIABLE","$id",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$page",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","id",140],"(",")",";",["T_WHITESPACE","\n\n    ",140],["T_COMMENT","\/\/ Verify the entity saved correctly.\n",142],["T_WHITESPACE","    ",143],["T_DOC_COMMENT","\/** @var Node $page *\/",143],["T_WHITESPACE","\n    ",143],["T_VARIABLE","$page",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","Node",144],["T_DOUBLE_COLON","::",144],["T_STRING","load",144],"(",["T_VARIABLE","$id",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertEquals",145],"(",["T_CONSTANT_ENCAPSED_STRING","'A'",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$page",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getTitle",145],"(",")",")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertTrue",146],"(",["T_VARIABLE","$page",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","isDefaultRevision",146],"(",")",")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertTrue",147],"(",["T_VARIABLE","$page",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","isPublished",147],"(",")",")",";",["T_WHITESPACE","\n  ",147],"}",["T_WHITESPACE","\n\n  ",148],["T_DOC_COMMENT","\/**\n   * Verifies that an unpublished state may be made the default revision.\n   *\/",150],["T_WHITESPACE","\n  ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","testArchive",153],"(",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$published_id",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","randomMachineName",154],"(",")",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$published_state",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","ModerationState",155],["T_DOUBLE_COLON","::",155],["T_STRING","create",155],"(","[",["T_WHITESPACE","\n      ",155],["T_CONSTANT_ENCAPSED_STRING","'id'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$published_id",156],",",["T_WHITESPACE","\n      ",156],["T_CONSTANT_ENCAPSED_STRING","'label'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","randomString",157],"(",")",",",["T_WHITESPACE","\n      ",157],["T_CONSTANT_ENCAPSED_STRING","'published'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_STRING","TRUE",158],",",["T_WHITESPACE","\n      ",158],["T_CONSTANT_ENCAPSED_STRING","'default_revision'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_STRING","TRUE",159],",",["T_WHITESPACE","\n    ",159],"]",")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$published_state",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","save",161],"(",")",";",["T_WHITESPACE","\n\n    ",161],["T_VARIABLE","$archived_id",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","randomMachineName",163],"(",")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$archived_state",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","ModerationState",164],["T_DOUBLE_COLON","::",164],["T_STRING","create",164],"(","[",["T_WHITESPACE","\n      ",164],["T_CONSTANT_ENCAPSED_STRING","'id'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$archived_id",165],",",["T_WHITESPACE","\n      ",165],["T_CONSTANT_ENCAPSED_STRING","'label'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","randomString",166],"(",")",",",["T_WHITESPACE","\n      ",166],["T_CONSTANT_ENCAPSED_STRING","'published'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_STRING","FALSE",167],",",["T_WHITESPACE","\n      ",167],["T_CONSTANT_ENCAPSED_STRING","'default_revision'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_STRING","TRUE",168],",",["T_WHITESPACE","\n    ",168],"]",")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$archived_state",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","save",170],"(",")",";",["T_WHITESPACE","\n\n    ",170],["T_VARIABLE","$page",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","Node",172],["T_DOUBLE_COLON","::",172],["T_STRING","create",172],"(","[",["T_WHITESPACE","\n      ",172],["T_CONSTANT_ENCAPSED_STRING","'type'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'page'",173],",",["T_WHITESPACE","\n      ",173],["T_CONSTANT_ENCAPSED_STRING","'title'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","randomString",174],"(",")",",",["T_WHITESPACE","\n    ",174],"]",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$page",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","moderation_state",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","target_id",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$published_id",176],";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$page",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","save",177],"(",")",";",["T_WHITESPACE","\n\n    ",177],["T_VARIABLE","$id",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$page",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","id",179],"(",")",";",["T_WHITESPACE","\n\n    ",179],["T_COMMENT","\/\/ The newly-created page should already be published.\n",181],["T_WHITESPACE","    ",182],["T_VARIABLE","$page",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","Node",182],["T_DOUBLE_COLON","::",182],["T_STRING","load",182],"(",["T_VARIABLE","$id",182],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertTrue",183],"(",["T_VARIABLE","$page",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","isPublished",183],"(",")",")",";",["T_WHITESPACE","\n\n    ",183],["T_COMMENT","\/\/ When the page is moderated to the archived state, then the latest\n",185],["T_WHITESPACE","    ",186],["T_COMMENT","\/\/ revision should be the default revision, and it should be unpublished.\n",186],["T_WHITESPACE","    ",187],["T_VARIABLE","$page",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","moderation_state",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","target_id",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$archived_id",187],";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$page",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","save",188],"(",")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$new_revision_id",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$page",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getRevisionId",189],"(",")",";",["T_WHITESPACE","\n\n    ",189],["T_VARIABLE","$storage",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Drupal",191],["T_DOUBLE_COLON","::",191],["T_STRING","entityTypeManager",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","getStorage",191],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",191],")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$new_revision",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$storage",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","loadRevision",192],"(",["T_VARIABLE","$new_revision_id",192],")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertFalse",193],"(",["T_VARIABLE","$new_revision",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","isPublished",193],"(",")",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertTrue",194],"(",["T_VARIABLE","$new_revision",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","isDefaultRevision",194],"(",")",")",";",["T_WHITESPACE","\n  ",194],"}",["T_WHITESPACE","\n\n",195],"}",["T_WHITESPACE","\n",197]]
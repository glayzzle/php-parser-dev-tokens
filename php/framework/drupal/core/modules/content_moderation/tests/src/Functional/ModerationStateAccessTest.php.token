[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","content_moderation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Functional",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","node",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Node",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","node",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","NodeType",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","BrowserTestBase",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests the view access control handler for moderation state entities.\n *\n * @group content_moderation\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","ModerationStateAccessTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","BrowserTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",16],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],"[",["T_WHITESPACE","\n    ",19],["T_CONSTANT_ENCAPSED_STRING","'content_moderation_test_views'",20],",",["T_WHITESPACE","\n    ",20],["T_CONSTANT_ENCAPSED_STRING","'content_moderation'",21],",",["T_WHITESPACE","\n  ",21],"]",";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Test the view operation access handler with the view permission.\n   *\/",24],["T_WHITESPACE","\n  ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","testViewShowsCorrectStates",27],"(",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$node_type_id",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'test'",28],";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","createNodeType",29],"(",["T_CONSTANT_ENCAPSED_STRING","'Test'",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$node_type_id",29],")",";",["T_WHITESPACE","\n\n    ",29],["T_VARIABLE","$permissions",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[",["T_WHITESPACE","\n      ",31],["T_CONSTANT_ENCAPSED_STRING","'access content'",32],",",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'view all revisions'",33],",",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'view moderation states'",34],",",["T_WHITESPACE","\n    ",34],"]",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$editor1",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalCreateUser",36],"(",["T_VARIABLE","$permissions",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","drupalLogin",37],"(",["T_VARIABLE","$editor1",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$node_1",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","Node",39],["T_DOUBLE_COLON","::",39],["T_STRING","create",39],"(","[",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'type'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$node_type_id",40],",",["T_WHITESPACE","\n      ",40],["T_CONSTANT_ENCAPSED_STRING","'title'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Draft node'",41],",",["T_WHITESPACE","\n      ",41],["T_CONSTANT_ENCAPSED_STRING","'uid'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$editor1",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","id",42],"(",")",",",["T_WHITESPACE","\n    ",42],"]",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$node_1",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","moderation_state",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","target_id",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'draft'",44],";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$node_1",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","save",45],"(",")",";",["T_WHITESPACE","\n\n    ",45],["T_VARIABLE","$node_2",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","Node",47],["T_DOUBLE_COLON","::",47],["T_STRING","create",47],"(","[",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'type'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$node_type_id",48],",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'title'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Published node'",49],",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'uid'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$editor1",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","id",50],"(",")",",",["T_WHITESPACE","\n    ",50],"]",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$node_2",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","moderation_state",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","target_id",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'published'",52],";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$node_2",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","save",53],"(",")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Resave the node with a new state.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$node_2",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","setTitle",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Archived node'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$node_2",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","moderation_state",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","target_id",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'archived'",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$node_2",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","save",58],"(",")",";",["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/\/ Now show the View, and confirm that the state labels are showing.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","drupalGet",61],"(",["T_CONSTANT_ENCAPSED_STRING","'\/latest'",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$page",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getSession",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getPage",62],"(",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertTrue",63],"(",["T_VARIABLE","$page",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","hasLink",63],"(",["T_CONSTANT_ENCAPSED_STRING","'Draft'",63],")",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertTrue",64],"(",["T_VARIABLE","$page",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","hasLink",64],"(",["T_CONSTANT_ENCAPSED_STRING","'Archived'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertFalse",65],"(",["T_VARIABLE","$page",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","hasLink",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Published'",65],")",")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ Now log in as an admin and test the same thing.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$permissions",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],"[",["T_WHITESPACE","\n      ",68],["T_CONSTANT_ENCAPSED_STRING","'access content'",69],",",["T_WHITESPACE","\n      ",69],["T_CONSTANT_ENCAPSED_STRING","'view all revisions'",70],",",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'administer moderation states'",71],",",["T_WHITESPACE","\n    ",71],"]",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$admin1",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","drupalCreateUser",73],"(",["T_VARIABLE","$permissions",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","drupalLogin",74],"(",["T_VARIABLE","$admin1",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","drupalGet",76],"(",["T_CONSTANT_ENCAPSED_STRING","'\/latest'",76],")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$page",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getSession",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","getPage",77],"(",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertEquals",78],"(",["T_LNUMBER","200",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getSession",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getStatusCode",78],"(",")",")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertTrue",79],"(",["T_VARIABLE","$page",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","hasLink",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Draft'",79],")",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertTrue",80],"(",["T_VARIABLE","$page",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","hasLink",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Archived'",80],")",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertFalse",81],"(",["T_VARIABLE","$page",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","hasLink",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Published'",81],")",")",";",["T_WHITESPACE","\n  ",81],"}",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * Creates a new node type.\n   *\n   * @param string $label\n   *   The human-readable label of the type to create.\n   * @param string $machine_name\n   *   The machine name of the type to create.\n   *\n   * @return NodeType\n   *   The node type just created.\n   *\/",84],["T_WHITESPACE","\n  ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","createNodeType",95],"(",["T_VARIABLE","$label",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$machine_name",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_DOC_COMMENT","\/** @var NodeType $node_type *\/",96],["T_WHITESPACE","\n    ",96],["T_VARIABLE","$node_type",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","NodeType",97],["T_DOUBLE_COLON","::",97],["T_STRING","create",97],"(","[",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'type'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$machine_name",98],",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'label'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$label",99],",",["T_WHITESPACE","\n    ",99],"]",")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$node_type",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","setThirdPartySetting",101],"(",["T_CONSTANT_ENCAPSED_STRING","'content_moderation'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'enabled'",101],",",["T_WHITESPACE"," ",101],["T_STRING","TRUE",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$node_type",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","save",102],"(",")",";",["T_WHITESPACE","\n\n    ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$node_type",104],";",["T_WHITESPACE","\n  ",104],"}",["T_WHITESPACE","\n\n",105],"}",["T_WHITESPACE","\n",107]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","node",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Access",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AccessResult",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityHandlerInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityTypeInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldDefinitionInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldItemListInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityAccessControlHandler",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EntityInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Session",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AccountInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Symfony",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Component",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DependencyInjection",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ContainerInterface",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Defines the access control handler for the node entity type.\n *\n * @see \\Drupal\\node\\Entity\\Node\n * @ingroup node_access\n *\/",15],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","NodeAccessControlHandler",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_STRING","EntityAccessControlHandler",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_STRING","NodeAccessControlHandlerInterface",21],",",["T_WHITESPACE"," ",21],["T_STRING","EntityHandlerInterface",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The node grant storage.\n   *\n   * @var \\Drupal\\node\\NodeGrantDatabaseStorageInterface\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$grantStorage",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Constructs a NodeAccessControlHandler object.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_type\n   *   The entity type definition.\n   * @param \\Drupal\\node\\NodeGrantDatabaseStorageInterface $grant_storage\n   *   The node grant storage.\n   *\/",30],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_STRING","EntityTypeInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entity_type",38],",",["T_WHITESPACE"," ",38],["T_STRING","NodeGrantDatabaseStorageInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$grant_storage",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_STRING","parent",39],["T_DOUBLE_COLON","::",39],["T_STRING","__construct",39],"(",["T_VARIABLE","$entity_type",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","grantStorage",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$grant_storage",40],";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_STATIC","static",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","createInstance",46],"(",["T_STRING","ContainerInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$container",46],",",["T_WHITESPACE"," ",46],["T_STRING","EntityTypeInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$entity_type",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STATIC","static",47],"(",["T_WHITESPACE","\n      ",47],["T_VARIABLE","$entity_type",48],",",["T_WHITESPACE","\n      ",48],["T_VARIABLE","$container",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_CONSTANT_ENCAPSED_STRING","'node.grant_storage'",49],")",["T_WHITESPACE","\n    ",49],")",";",["T_WHITESPACE","\n  ",50],"}",["T_WHITESPACE","\n\n\n  ",51],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",54],["T_WHITESPACE","\n  ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","access",57],"(",["T_STRING","EntityInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$entity",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$operation",57],",",["T_WHITESPACE"," ",57],["T_STRING","AccountInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$account",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","NULL",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$return_as_object",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","FALSE",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$account",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","prepareUser",58],"(",["T_VARIABLE","$account",58],")",";",["T_WHITESPACE","\n\n    ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$account",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","hasPermission",60],"(",["T_CONSTANT_ENCAPSED_STRING","'bypass node access'",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$result",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","AccessResult",61],["T_DOUBLE_COLON","::",61],["T_STRING","allowed",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","cachePerPermissions",61],"(",")",";",["T_WHITESPACE","\n      ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$return_as_object",62],["T_WHITESPACE"," ",62],"?",["T_WHITESPACE"," ",62],["T_VARIABLE","$result",62],["T_WHITESPACE"," ",62],":",["T_WHITESPACE"," ",62],["T_VARIABLE","$result",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","isAllowed",62],"(",")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n    ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(","!",["T_VARIABLE","$account",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","hasPermission",64],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",64],")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$result",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","AccessResult",65],["T_DOUBLE_COLON","::",65],["T_STRING","forbidden",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","cachePerPermissions",65],"(",")",";",["T_WHITESPACE","\n      ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$return_as_object",66],["T_WHITESPACE"," ",66],"?",["T_WHITESPACE"," ",66],["T_VARIABLE","$result",66],["T_WHITESPACE"," ",66],":",["T_WHITESPACE"," ",66],["T_VARIABLE","$result",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","isAllowed",66],"(",")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$result",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","parent",68],["T_DOUBLE_COLON","::",68],["T_STRING","access",68],"(",["T_VARIABLE","$entity",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$operation",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$account",68],",",["T_WHITESPACE"," ",68],["T_STRING","TRUE",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","cachePerPermissions",68],"(",")",";",["T_WHITESPACE","\n    ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$return_as_object",69],["T_WHITESPACE"," ",69],"?",["T_WHITESPACE"," ",69],["T_VARIABLE","$result",69],["T_WHITESPACE"," ",69],":",["T_WHITESPACE"," ",69],["T_VARIABLE","$result",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","isAllowed",69],"(",")",";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",72],["T_WHITESPACE","\n  ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","createAccess",75],"(",["T_VARIABLE","$entity_bundle",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","NULL",75],",",["T_WHITESPACE"," ",75],["T_STRING","AccountInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$account",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","NULL",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$context",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",",",["T_WHITESPACE"," ",75],["T_VARIABLE","$return_as_object",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","FALSE",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$account",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","prepareUser",76],"(",["T_VARIABLE","$account",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$account",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","hasPermission",78],"(",["T_CONSTANT_ENCAPSED_STRING","'bypass node access'",78],")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$result",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","AccessResult",79],["T_DOUBLE_COLON","::",79],["T_STRING","allowed",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","cachePerPermissions",79],"(",")",";",["T_WHITESPACE","\n      ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$return_as_object",80],["T_WHITESPACE"," ",80],"?",["T_WHITESPACE"," ",80],["T_VARIABLE","$result",80],["T_WHITESPACE"," ",80],":",["T_WHITESPACE"," ",80],["T_VARIABLE","$result",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","isAllowed",80],"(",")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n    ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_VARIABLE","$account",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","hasPermission",82],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$result",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","AccessResult",83],["T_DOUBLE_COLON","::",83],["T_STRING","forbidden",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","cachePerPermissions",83],"(",")",";",["T_WHITESPACE","\n      ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$return_as_object",84],["T_WHITESPACE"," ",84],"?",["T_WHITESPACE"," ",84],["T_VARIABLE","$result",84],["T_WHITESPACE"," ",84],":",["T_WHITESPACE"," ",84],["T_VARIABLE","$result",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","isAllowed",84],"(",")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_VARIABLE","$result",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","parent",87],["T_DOUBLE_COLON","::",87],["T_STRING","createAccess",87],"(",["T_VARIABLE","$entity_bundle",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$account",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$context",87],",",["T_WHITESPACE"," ",87],["T_STRING","TRUE",87],")",["T_OBJECT_OPERATOR","->",87],["T_STRING","cachePerPermissions",87],"(",")",";",["T_WHITESPACE","\n    ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$return_as_object",88],["T_WHITESPACE"," ",88],"?",["T_WHITESPACE"," ",88],["T_VARIABLE","$result",88],["T_WHITESPACE"," ",88],":",["T_WHITESPACE"," ",88],["T_VARIABLE","$result",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","isAllowed",88],"(",")",";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",91],["T_WHITESPACE","\n  ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","checkAccess",94],"(",["T_STRING","EntityInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$node",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$operation",94],",",["T_WHITESPACE"," ",94],["T_STRING","AccountInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$account",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n    ",94],["T_DOC_COMMENT","\/** @var \\Drupal\\node\\NodeInterface $node *\/",95],["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Fetch information from the node object if possible.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$status",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$node",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","isPublished",98],"(",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$uid",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$node",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getOwnerId",99],"(",")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Check if authors can view their own unpublished nodes.\n",101],["T_WHITESPACE","    ",102],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$operation",102],["T_WHITESPACE"," ",102],["T_IS_IDENTICAL","===",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'view'",102],["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],"!",["T_VARIABLE","$status",102],["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$account",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","hasPermission",102],"(",["T_CONSTANT_ENCAPSED_STRING","'view own unpublished content'",102],")",["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$account",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","isAuthenticated",102],"(",")",["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$account",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","id",102],"(",")",["T_WHITESPACE"," ",102],["T_IS_EQUAL","==",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$uid",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n      ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","AccessResult",103],["T_DOUBLE_COLON","::",103],["T_STRING","allowed",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","cachePerPermissions",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","cachePerUser",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","addCacheableDependency",103],"(",["T_VARIABLE","$node",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_COMMENT","\/\/ Evaluate node grants.\n",106],["T_WHITESPACE","    ",107],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","grantStorage",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","access",107],"(",["T_VARIABLE","$node",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$operation",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$account",107],")",";",["T_WHITESPACE","\n  ",107],"}",["T_WHITESPACE","\n\n  ",108],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",110],["T_WHITESPACE","\n  ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","checkCreateAccess",113],"(",["T_STRING","AccountInterface",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$account",113],",",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$context",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$entity_bundle",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","NULL",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n    ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_STRING","AccessResult",114],["T_DOUBLE_COLON","::",114],["T_STRING","allowedIf",114],"(",["T_VARIABLE","$account",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","hasPermission",114],"(",["T_CONSTANT_ENCAPSED_STRING","'create '",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$entity_bundle",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","' content'",114],")",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","cachePerPermissions",114],"(",")",";",["T_WHITESPACE","\n  ",114],"}",["T_WHITESPACE","\n\n  ",115],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",117],["T_WHITESPACE","\n  ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","checkFieldAccess",120],"(",["T_VARIABLE","$operation",120],",",["T_WHITESPACE"," ",120],["T_STRING","FieldDefinitionInterface",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$field_definition",120],",",["T_WHITESPACE"," ",120],["T_STRING","AccountInterface",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$account",120],",",["T_WHITESPACE"," ",120],["T_STRING","FieldItemListInterface",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$items",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","NULL",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n    ",120],["T_COMMENT","\/\/ Only users with the administer nodes permission can edit administrative\n",121],["T_WHITESPACE","    ",122],["T_COMMENT","\/\/ fields.\n",122],["T_WHITESPACE","    ",123],["T_VARIABLE","$administrative_fields",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'status'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'created'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'promote'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'sticky'",123],")",";",["T_WHITESPACE","\n    ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$operation",124],["T_WHITESPACE"," ",124],["T_IS_EQUAL","==",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'edit'",124],["T_WHITESPACE"," ",124],["T_BOOLEAN_AND","&&",124],["T_WHITESPACE"," ",124],["T_STRING","in_array",124],"(",["T_VARIABLE","$field_definition",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getName",124],"(",")",",",["T_WHITESPACE"," ",124],["T_VARIABLE","$administrative_fields",124],",",["T_WHITESPACE"," ",124],["T_STRING","TRUE",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n      ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_STRING","AccessResult",125],["T_DOUBLE_COLON","::",125],["T_STRING","allowedIfHasPermission",125],"(",["T_VARIABLE","$account",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",125],")",";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_COMMENT","\/\/ No user can change read only fields.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$read_only_fields",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'revision_timestamp'",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'revision_uid'",129],")",";",["T_WHITESPACE","\n    ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$operation",130],["T_WHITESPACE"," ",130],["T_IS_EQUAL","==",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'edit'",130],["T_WHITESPACE"," ",130],["T_BOOLEAN_AND","&&",130],["T_WHITESPACE"," ",130],["T_STRING","in_array",130],"(",["T_VARIABLE","$field_definition",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getName",130],"(",")",",",["T_WHITESPACE"," ",130],["T_VARIABLE","$read_only_fields",130],",",["T_WHITESPACE"," ",130],["T_STRING","TRUE",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n      ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","AccessResult",131],["T_DOUBLE_COLON","::",131],["T_STRING","forbidden",131],"(",")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_COMMENT","\/\/ Users have access to the revision_log field either if they have\n",134],["T_WHITESPACE","    ",135],["T_COMMENT","\/\/ administrative permissions or if the new revision option is enabled.\n",135],["T_WHITESPACE","    ",136],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$operation",136],["T_WHITESPACE"," ",136],["T_IS_EQUAL","==",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'edit'",136],["T_WHITESPACE"," ",136],["T_BOOLEAN_AND","&&",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$field_definition",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getName",136],"(",")",["T_WHITESPACE"," ",136],["T_IS_EQUAL","==",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'revision_log'",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n      ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$account",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","hasPermission",137],"(",["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_STRING","AccessResult",138],["T_DOUBLE_COLON","::",138],["T_STRING","allowed",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","cachePerPermissions",138],"(",")",";",["T_WHITESPACE","\n      ",138],"}",["T_WHITESPACE","\n      ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","AccessResult",140],["T_DOUBLE_COLON","::",140],["T_STRING","allowedIf",140],"(",["T_VARIABLE","$items",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getEntity",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","type",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","entity",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","isNewRevision",140],"(",")",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","cachePerPermissions",140],"(",")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n    ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_STRING","parent",142],["T_DOUBLE_COLON","::",142],["T_STRING","checkFieldAccess",142],"(",["T_VARIABLE","$operation",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$field_definition",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$account",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$items",142],")",";",["T_WHITESPACE","\n  ",142],"}",["T_WHITESPACE","\n\n  ",143],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",145],["T_WHITESPACE","\n  ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","acquireGrants",148],"(",["T_STRING","NodeInterface",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$node",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$grants",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","moduleHandler",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","invokeAll",149],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access_records'",149],",",["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_VARIABLE","$node",149],")",")",";",["T_WHITESPACE","\n    ",149],["T_COMMENT","\/\/ Let modules alter the grants.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","moduleHandler",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","alter",151],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access_records'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$grants",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$node",151],")",";",["T_WHITESPACE","\n    ",151],["T_COMMENT","\/\/ If no grants are set and the node is published, then use the default grant.\n",152],["T_WHITESPACE","    ",153],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_EMPTY","empty",153],"(",["T_VARIABLE","$grants",153],")",["T_WHITESPACE"," ",153],["T_BOOLEAN_AND","&&",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$node",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","isPublished",153],"(",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_VARIABLE","$grants",154],"[","]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",["T_CONSTANT_ENCAPSED_STRING","'realm'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'all'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'gid'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_LNUMBER","0",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'grant_view'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_LNUMBER","1",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'grant_update'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_LNUMBER","0",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'grant_delete'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_LNUMBER","0",154],")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n    ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$grants",156],";",["T_WHITESPACE","\n  ",156],"}",["T_WHITESPACE","\n\n  ",157],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",159],["T_WHITESPACE","\n  ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","writeGrants",162],"(",["T_STRING","NodeInterface",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$node",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$delete",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","TRUE",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$grants",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","acquireGrants",163],"(",["T_VARIABLE","$node",163],")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","grantStorage",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","write",164],"(",["T_VARIABLE","$node",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$grants",164],",",["T_WHITESPACE"," ",164],["T_STRING","NULL",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$delete",164],")",";",["T_WHITESPACE","\n  ",164],"}",["T_WHITESPACE","\n\n  ",165],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",167],["T_WHITESPACE","\n  ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","writeDefaultGrant",170],"(",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","grantStorage",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","writeDefault",171],"(",")",";",["T_WHITESPACE","\n  ",171],"}",["T_WHITESPACE","\n\n  ",172],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",174],["T_WHITESPACE","\n  ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","deleteGrants",177],"(",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","grantStorage",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","delete",178],"(",")",";",["T_WHITESPACE","\n  ",178],"}",["T_WHITESPACE","\n\n  ",179],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",181],["T_WHITESPACE","\n  ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","countGrants",184],"(",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n    ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","grantStorage",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","count",185],"(",")",";",["T_WHITESPACE","\n  ",185],"}",["T_WHITESPACE","\n\n  ",186],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",188],["T_WHITESPACE","\n  ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","checkAllGrants",191],"(",["T_STRING","AccountInterface",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$account",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n    ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","grantStorage",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","checkAll",192],"(",["T_VARIABLE","$account",192],")",";",["T_WHITESPACE","\n  ",192],"}",["T_WHITESPACE","\n\n",193],"}",["T_WHITESPACE","\n",195]]
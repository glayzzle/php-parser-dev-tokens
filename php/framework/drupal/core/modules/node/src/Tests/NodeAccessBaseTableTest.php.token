[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","node",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","node",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","NodeType",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests behavior of the node access subsystem if the base table is not node.\n *\n * @group node\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","NodeAccessBaseTableTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","NodeTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access_test'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'views'",19],")",";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The installation profile to use with this test.\n   *\n   * This test class requires the \"tags\" taxonomy field.\n   *\n   * @var string\n   *\/",21],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$profile",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'standard'",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Nodes by user.\n   *\n   * @var array\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$nodesByUser",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * A public tid.\n   *\n   * @var \\Drupal\\Core\\Database\\StatementInterface\n   *\/",37],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$publicTid",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * A private tid.\n   *\n   * @var \\Drupal\\Core\\Database\\StatementInterface\n   *\/",44],["T_WHITESPACE","\n  ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$privateTid",49],";",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * A web user.\n   *\/",51],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$webUser",54],";",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * The nids visible.\n   *\n   * @var array\n   *\/",56],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$nidsVisible",61],";",["T_WHITESPACE","\n\n  ",61],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","setUp",63],"(",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_STRING","parent",64],["T_DOUBLE_COLON","::",64],["T_STRING","setUp",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_STRING","node_access_test_add_field",66],"(",["T_STRING","NodeType",66],["T_DOUBLE_COLON","::",66],["T_STRING","load",66],"(",["T_CONSTANT_ENCAPSED_STRING","'article'",66],")",")",";",["T_WHITESPACE","\n\n    ",66],["T_STRING","node_access_rebuild",68],"(",")",";",["T_WHITESPACE","\n    ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Drupal",69],["T_DOUBLE_COLON","::",69],["T_STRING","state",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","set",69],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access_test.private'",69],",",["T_WHITESPACE"," ",69],["T_STRING","TRUE",69],")",";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * Tests the \"private\" node access functionality.\n   *\n   * - Create 2 users with \"access content\" and \"create article\" permissions.\n   * - Each user creates one private and one not private article.\n   *\n   * - Test that each user can view the other user's non-private article.\n   * - Test that each user cannot view the other user's private article.\n   * - Test that each user finds only appropriate (non-private + own private)\n   *   in taxonomy listing.\n   * - Create another user with 'view any private content'.\n   * - Test that user 4 can view all content created above.\n   * - Test that user 4 can view all content on taxonomy listing.\n   *\/",72],["T_WHITESPACE","\n  ",85],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","testNodeAccessBasic",86],"(",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$num_simple_users",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_LNUMBER","2",87],";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$simple_users",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",")",";",["T_WHITESPACE","\n\n    ",88],["T_COMMENT","\/\/ Nodes keyed by uid and nid: $nodes[$uid][$nid] = $is_private;\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","nodesByUser",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_COMMENT","\/\/ Titles keyed by nid.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$titles",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],"[","]",";",["T_WHITESPACE","\n    ",93],["T_COMMENT","\/\/ Array of nids marked private.\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$private_nodes",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[","]",";",["T_WHITESPACE","\n    ",95],["T_FOR","for",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$i",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_LNUMBER","0",96],";",["T_WHITESPACE"," ",96],["T_VARIABLE","$i",96],["T_WHITESPACE"," ",96],"<",["T_WHITESPACE"," ",96],["T_VARIABLE","$num_simple_users",96],";",["T_WHITESPACE"," ",96],["T_VARIABLE","$i",96],["T_INC","++",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$simple_users",97],"[",["T_VARIABLE","$i",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","drupalCreateUser",97],"(",["T_ARRAY","array",97],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'create article content'",97],")",")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n    ",98],["T_FOREACH","foreach",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$simple_users",99],["T_WHITESPACE"," ",99],["T_AS","as",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","webUser",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n      ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","drupalLogin",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","webUser",100],")",";",["T_WHITESPACE","\n      ",100],["T_FOREACH","foreach",101],["T_WHITESPACE"," ",101],"(",["T_ARRAY","array",101],"(",["T_LNUMBER","0",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Public'",101],",",["T_WHITESPACE"," ",101],["T_LNUMBER","1",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Private'",101],")",["T_WHITESPACE"," ",101],["T_AS","as",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$is_private",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$type",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$edit",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_WHITESPACE","\n          ",102],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_STRING","t",103],"(",["T_CONSTANT_ENCAPSED_STRING","'@private_public Article created by @user'",103],",",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'@private_public'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$type",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'@user'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","webUser",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getUsername",103],"(",")",")",")",",",["T_WHITESPACE","\n        ",103],")",";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$is_private",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n          ",105],["T_VARIABLE","$edit",106],"[",["T_CONSTANT_ENCAPSED_STRING","'private[0][value]'",106],"]",["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","TRUE",106],";",["T_WHITESPACE","\n          ",106],["T_VARIABLE","$edit",107],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'private node'",107],";",["T_WHITESPACE","\n          ",107],["T_VARIABLE","$edit",108],"[",["T_CONSTANT_ENCAPSED_STRING","'field_tags[target_id]'",108],"]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'private'",108],";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_ELSE","else",110],["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n          ",110],["T_VARIABLE","$edit",111],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'public node'",111],";",["T_WHITESPACE","\n          ",111],["T_VARIABLE","$edit",112],"[",["T_CONSTANT_ENCAPSED_STRING","'field_tags[target_id]'",112],"]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'public'",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","drupalPostForm",115],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$edit",115],",",["T_WHITESPACE"," ",115],["T_STRING","t",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",115],")",")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$node",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","drupalGetNodeByTitle",116],"(",["T_VARIABLE","$edit",116],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",116],"]",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertEqual",117],"(",["T_VARIABLE","$is_private",117],",",["T_WHITESPACE"," ",117],["T_INT_CAST","(int)",117],["T_VARIABLE","$node",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","private",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","value",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'The private status of the node was properly set in the node_access_test table.'",117],")",";",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$is_private",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n          ",118],["T_VARIABLE","$private_nodes",119],"[","]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$node",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","id",119],"(",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$titles",121],"[",["T_VARIABLE","$node",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","id",121],"(",")","]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$edit",121],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",121],"]",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","nodesByUser",122],"[",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","webUser",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","id",122],"(",")","]","[",["T_VARIABLE","$node",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","id",122],"(",")","]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$is_private",122],";",["T_WHITESPACE","\n      ",122],"}",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","publicTid",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","db_query",125],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT tid FROM {taxonomy_term_field_data} WHERE name = :name AND default_langcode = 1'",125],",",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'public'",125],")",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","fetchField",125],"(",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","privateTid",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","db_query",126],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT tid FROM {taxonomy_term_field_data} WHERE name = :name AND default_langcode = 1'",126],",",["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'private'",126],")",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","fetchField",126],"(",")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertTrue",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","publicTid",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'Public tid was found'",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertTrue",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","privateTid",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'Private tid was found'",128],")",";",["T_WHITESPACE","\n    ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$simple_users",129],["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","webUser",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","drupalLogin",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","webUser",130],")",";",["T_WHITESPACE","\n      ",130],["T_COMMENT","\/\/ Check own nodes to see that all are readable.\n",131],["T_WHITESPACE","      ",132],["T_FOREACH","foreach",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","nodesByUser",132],["T_WHITESPACE"," ",132],["T_AS","as",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$uid",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$data",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n        ",132],["T_FOREACH","foreach",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$data",133],["T_WHITESPACE"," ",133],["T_AS","as",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$nid",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$is_private",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n          ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","drupalGet",134],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_VARIABLE","$nid",134],")",";",["T_WHITESPACE","\n          ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$is_private",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$should_be_visible",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$uid",136],["T_WHITESPACE"," ",136],["T_IS_EQUAL","==",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","webUser",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","id",136],"(",")",";",["T_WHITESPACE","\n          ",136],"}",["T_WHITESPACE","\n          ",137],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$should_be_visible",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","TRUE",139],";",["T_WHITESPACE","\n          ",139],"}",["T_WHITESPACE","\n          ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertResponse",141],"(",["T_VARIABLE","$should_be_visible",141],["T_WHITESPACE"," ",141],"?",["T_WHITESPACE"," ",141],["T_LNUMBER","200",141],["T_WHITESPACE"," ",141],":",["T_WHITESPACE"," ",141],["T_LNUMBER","403",141],",",["T_WHITESPACE"," ",141],["T_STRING","strtr",141],"(",["T_CONSTANT_ENCAPSED_STRING","'A %private node by user %uid is %visible for user %current_uid.'",141],",",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",["T_WHITESPACE","\n            ",141],["T_CONSTANT_ENCAPSED_STRING","'%private'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$is_private",142],["T_WHITESPACE"," ",142],"?",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'private'",142],["T_WHITESPACE"," ",142],":",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'public'",142],",",["T_WHITESPACE","\n            ",142],["T_CONSTANT_ENCAPSED_STRING","'%uid'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$uid",143],",",["T_WHITESPACE","\n            ",143],["T_CONSTANT_ENCAPSED_STRING","'%visible'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$should_be_visible",144],["T_WHITESPACE"," ",144],"?",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'visible'",144],["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'not visible'",144],",",["T_WHITESPACE","\n            ",144],["T_CONSTANT_ENCAPSED_STRING","'%current_uid'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","webUser",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","id",145],"(",")",",",["T_WHITESPACE","\n          ",145],")",")",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n      ",147],"}",["T_WHITESPACE","\n\n      ",148],["T_COMMENT","\/\/ Check to see that the correct nodes are shown on taxonomy\/private\n",150],["T_WHITESPACE","      ",151],["T_COMMENT","\/\/ and taxonomy\/public.\n",151],["T_WHITESPACE","      ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertTaxonomyPage",152],"(",["T_STRING","FALSE",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_COMMENT","\/\/ Now test that a user with 'node test view' permissions can view content.\n",155],["T_WHITESPACE","    ",156],["T_VARIABLE","$access_user",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","drupalCreateUser",156],"(",["T_ARRAY","array",156],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'create article content'",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'node test view'",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'search content'",156],")",")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","drupalLogin",157],"(",["T_VARIABLE","$access_user",157],")",";",["T_WHITESPACE","\n\n    ",157],["T_FOREACH","foreach",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","nodesByUser",159],["T_WHITESPACE"," ",159],["T_AS","as",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$private_status",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n      ",159],["T_FOREACH","foreach",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$private_status",160],["T_WHITESPACE"," ",160],["T_AS","as",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$nid",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$is_private",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","drupalGet",161],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_VARIABLE","$nid",161],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertResponse",162],"(",["T_LNUMBER","200",162],")",";",["T_WHITESPACE","\n      ",162],"}",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_COMMENT","\/\/ This user should be able to see all of the nodes on the relevant\n",166],["T_WHITESPACE","    ",167],["T_COMMENT","\/\/ taxonomy pages.\n",167],["T_WHITESPACE","    ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertTaxonomyPage",168],"(",["T_STRING","TRUE",168],")",";",["T_WHITESPACE","\n\n    ",168],["T_COMMENT","\/\/ Rebuild the node access permissions, repeat the test. This is done to\n",170],["T_WHITESPACE","    ",171],["T_COMMENT","\/\/ ensure that node access is rebuilt correctly even if the current user\n",171],["T_WHITESPACE","    ",172],["T_COMMENT","\/\/ does not have the bypass node access permission.\n",172],["T_WHITESPACE","    ",173],["T_STRING","node_access_rebuild",173],"(",")",";",["T_WHITESPACE","\n\n    ",173],["T_FOREACH","foreach",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","nodesByUser",175],["T_WHITESPACE"," ",175],["T_AS","as",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$private_status",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n      ",175],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$private_status",176],["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$nid",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$is_private",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","drupalGet",177],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$nid",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","assertResponse",178],"(",["T_LNUMBER","200",178],")",";",["T_WHITESPACE","\n      ",178],"}",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_COMMENT","\/\/ This user should be able to see all of the nodes on the relevant\n",182],["T_WHITESPACE","    ",183],["T_COMMENT","\/\/ taxonomy pages.\n",183],["T_WHITESPACE","    ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertTaxonomyPage",184],"(",["T_STRING","TRUE",184],")",";",["T_WHITESPACE","\n  ",184],"}",["T_WHITESPACE","\n\n  ",185],["T_DOC_COMMENT","\/**\n   * Checks taxonomy\/term listings to ensure only accessible nodes are listed.\n   *\n   * @param $is_admin\n   *   A boolean indicating whether the current user is an administrator. If\n   *   TRUE, all nodes should be listed. If FALSE, only public nodes and the\n   *   user's own private nodes should be listed.\n   *\/",187],["T_WHITESPACE","\n  ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","assertTaxonomyPage",195],"(",["T_VARIABLE","$is_admin",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n    ",195],["T_FOREACH","foreach",196],["T_WHITESPACE"," ",196],"(",["T_ARRAY","array",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","publicTid",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","privateTid",196],")",["T_WHITESPACE"," ",196],["T_AS","as",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$tid_is_private",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$tid",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n      ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","drupalGet",197],"(","\"",["T_ENCAPSED_AND_WHITESPACE","taxonomy\/term\/",197],["T_VARIABLE","$tid",197],"\"",")",";",["T_WHITESPACE","\n      ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","nidsVisible",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],"[","]",";",["T_WHITESPACE","\n      ",198],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","xpath",199],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\/a[text()='Read more']\"",199],")",["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$link",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n        ",199],["T_COMMENT","\/\/ See also testTranslationRendering() in NodeTranslationUITest.\n",200],["T_WHITESPACE","        ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","assertTrue",201],"(",["T_STRING","preg_match",201],"(",["T_CONSTANT_ENCAPSED_STRING","'|node\/(\\d+)$|'",201],",",["T_WHITESPACE"," ",201],["T_STRING_CAST","(string)",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$link",201],"[",["T_CONSTANT_ENCAPSED_STRING","'href'",201],"]",",",["T_WHITESPACE"," ",201],["T_VARIABLE","$matches",201],")",",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'Read more points to a node'",201],")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","nidsVisible",202],"[",["T_VARIABLE","$matches",202],"[",["T_LNUMBER","1",202],"]","]",["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","TRUE",202],";",["T_WHITESPACE","\n      ",202],"}",["T_WHITESPACE","\n      ",203],["T_FOREACH","foreach",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","nodesByUser",204],["T_WHITESPACE"," ",204],["T_AS","as",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$uid",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$data",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n        ",204],["T_FOREACH","foreach",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$data",205],["T_WHITESPACE"," ",205],["T_AS","as",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$nid",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$is_private",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n          ",205],["T_COMMENT","\/\/ Private nodes should be visible on the private term page,\n",206],["T_WHITESPACE","          ",207],["T_COMMENT","\/\/ public nodes should be visible on the public term page.\n",207],["T_WHITESPACE","          ",208],["T_VARIABLE","$should_be_visible",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$tid_is_private",208],["T_WHITESPACE"," ",208],["T_IS_EQUAL","==",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$is_private",208],";",["T_WHITESPACE","\n          ",208],["T_COMMENT","\/\/ Non-administrators can only see their own nodes on the private\n",209],["T_WHITESPACE","          ",210],["T_COMMENT","\/\/ term page.\n",210],["T_WHITESPACE","          ",211],["T_IF","if",211],["T_WHITESPACE"," ",211],"(","!",["T_VARIABLE","$is_admin",211],["T_WHITESPACE"," ",211],["T_BOOLEAN_AND","&&",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$tid_is_private",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$should_be_visible",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$should_be_visible",212],["T_WHITESPACE"," ",212],["T_BOOLEAN_AND","&&",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$uid",212],["T_WHITESPACE"," ",212],["T_IS_EQUAL","==",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","webUser",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","id",212],"(",")",";",["T_WHITESPACE","\n          ",212],"}",["T_WHITESPACE","\n          ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","assertIdentical",214],"(",["T_ISSET","isset",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","nidsVisible",214],"[",["T_VARIABLE","$nid",214],"]",")",",",["T_WHITESPACE"," ",214],["T_VARIABLE","$should_be_visible",214],",",["T_WHITESPACE"," ",214],["T_STRING","strtr",214],"(",["T_CONSTANT_ENCAPSED_STRING","'A %private node by user %uid is %visible for user %current_uid on the %tid_is_private page.'",214],",",["T_WHITESPACE"," ",214],["T_ARRAY","array",214],"(",["T_WHITESPACE","\n            ",214],["T_CONSTANT_ENCAPSED_STRING","'%private'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$is_private",215],["T_WHITESPACE"," ",215],"?",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'private'",215],["T_WHITESPACE"," ",215],":",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'public'",215],",",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'%uid'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$uid",216],",",["T_WHITESPACE","\n            ",216],["T_CONSTANT_ENCAPSED_STRING","'%visible'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_ISSET","isset",217],"(",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","nidsVisible",217],"[",["T_VARIABLE","$nid",217],"]",")",["T_WHITESPACE"," ",217],"?",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'visible'",217],["T_WHITESPACE"," ",217],":",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'not visible'",217],",",["T_WHITESPACE","\n            ",217],["T_CONSTANT_ENCAPSED_STRING","'%current_uid'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","webUser",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","id",218],"(",")",",",["T_WHITESPACE","\n            ",218],["T_CONSTANT_ENCAPSED_STRING","'%tid_is_private'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$tid_is_private",219],["T_WHITESPACE"," ",219],"?",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'private'",219],["T_WHITESPACE"," ",219],":",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'public'",219],",",["T_WHITESPACE","\n          ",219],")",")",")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n      ",221],"}",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n  ",223],"}",["T_WHITESPACE","\n\n",224],"}",["T_WHITESPACE","\n",226]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","node",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","node",5],["T_NS_SEPARATOR","\\",5],["T_STRING","NodeInterface",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Create a node with revisions and test viewing, saving, reverting, and\n * deleting revisions for user with access to all.\n *\n * @group node\n *\/",7],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","NodeRevisionsAllTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","NodeTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n  ",13],["T_PROTECTED","protected",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$nodes",14],";",["T_WHITESPACE","\n  ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$revisionLogs",15],";",["T_WHITESPACE","\n  ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$profile",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","\"standard\"",16],";",["T_WHITESPACE","\n\n  ",16],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","setUp",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_STRING","parent",19],["T_DOUBLE_COLON","::",19],["T_STRING","setUp",19],"(",")",";",["T_WHITESPACE","\n\n    ",19],["T_COMMENT","\/\/ Create and log in user.\n",21],["T_WHITESPACE","    ",22],["T_VARIABLE","$web_user",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","drupalCreateUser",22],"(",["T_WHITESPACE","\n      ",22],["T_ARRAY","array",23],"(",["T_WHITESPACE","\n        ",23],["T_CONSTANT_ENCAPSED_STRING","'view page revisions'",24],",",["T_WHITESPACE","\n        ",24],["T_CONSTANT_ENCAPSED_STRING","'revert page revisions'",25],",",["T_WHITESPACE","\n        ",25],["T_CONSTANT_ENCAPSED_STRING","'delete page revisions'",26],",",["T_WHITESPACE","\n        ",26],["T_CONSTANT_ENCAPSED_STRING","'edit any page content'",27],",",["T_WHITESPACE","\n        ",27],["T_CONSTANT_ENCAPSED_STRING","'delete any page content'",28],["T_WHITESPACE","\n      ",28],")",["T_WHITESPACE","\n    ",29],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","drupalLogin",31],"(",["T_VARIABLE","$web_user",31],")",";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ Create an initial node.\n",33],["T_WHITESPACE","    ",34],["T_VARIABLE","$node",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","drupalCreateNode",34],"(",")",";",["T_WHITESPACE","\n\n    ",34],["T_VARIABLE","$settings",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","get_object_vars",36],"(",["T_VARIABLE","$node",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$settings",37],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",37],"]",["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","1",37],";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$nodes",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$logs",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ Get the original node.\n",42],["T_WHITESPACE","    ",43],["T_VARIABLE","$nodes",43],"[","]",["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CLONE","clone",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$node",43],";",["T_WHITESPACE","\n\n    ",43],["T_COMMENT","\/\/ Create three revisions.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$revision_count",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_LNUMBER","3",46],";",["T_WHITESPACE","\n    ",46],["T_FOR","for",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$i",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],";",["T_WHITESPACE"," ",47],["T_VARIABLE","$i",47],["T_WHITESPACE"," ",47],"<",["T_WHITESPACE"," ",47],["T_VARIABLE","$revision_count",47],";",["T_WHITESPACE"," ",47],["T_VARIABLE","$i",47],["T_INC","++",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n      ",47],["T_VARIABLE","$logs",48],"[","]",["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$node",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","revision_log",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","randomMachineName",48],"(",["T_LNUMBER","32",48],")",";",["T_WHITESPACE","\n\n      ",48],["T_VARIABLE","$node",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","createNodeRevision",50],"(",["T_VARIABLE","$node",50],")",";",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$nodes",51],"[","]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CLONE","clone",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$node",51],";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","nodes",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$nodes",54],";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","revisionLogs",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$logs",55],";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Creates a new revision for a given node.\n   *\n   * @param \\Drupal\\node\\NodeInterface $node\n   *   A node object.\n   *\n   * @return \\Drupal\\node\\NodeInterface\n   *   A node object with up to date revision information.\n   *\/",58],["T_WHITESPACE","\n  ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","createNodeRevision",67],"(",["T_STRING","NodeInterface",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$node",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n    ",67],["T_COMMENT","\/\/ Create revision with a random title and body and update variables.\n",68],["T_WHITESPACE","    ",69],["T_VARIABLE","$node",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","title",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","randomMachineName",69],"(",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$node",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","body",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'value'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","randomMachineName",71],"(",["T_LNUMBER","32",71],")",",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'format'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_STRING","filter_default_format",72],"(",")",",",["T_WHITESPACE","\n    ",72],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$node",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","setNewRevision",74],"(",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$node",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","save",75],"(",")",";",["T_WHITESPACE","\n\n    ",75],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$node",77],";",["T_WHITESPACE","\n  ",77],"}",["T_WHITESPACE","\n\n  ",78],["T_DOC_COMMENT","\/**\n   * Checks node revision operations.\n   *\/",80],["T_WHITESPACE","\n  ",82],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","testRevisions",83],"(",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$node_storage",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","container",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","get",84],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",84],")",["T_OBJECT_OPERATOR","->",84],["T_STRING","getStorage",84],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$nodes",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","nodes",85],";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$logs",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","revisionLogs",86],";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Get last node for simple checks.\n",88],["T_WHITESPACE","    ",89],["T_VARIABLE","$node",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$nodes",89],"[",["T_LNUMBER","3",89],"]",";",["T_WHITESPACE","\n\n    ",89],["T_COMMENT","\/\/ Create and log in user.\n",91],["T_WHITESPACE","    ",92],["T_VARIABLE","$content_admin",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","drupalCreateUser",92],"(",["T_WHITESPACE","\n      ",92],["T_ARRAY","array",93],"(",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'view all revisions'",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'revert all revisions'",95],",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'delete all revisions'",96],",",["T_WHITESPACE","\n        ",96],["T_CONSTANT_ENCAPSED_STRING","'edit any page content'",97],",",["T_WHITESPACE","\n        ",97],["T_CONSTANT_ENCAPSED_STRING","'delete any page content'",98],["T_WHITESPACE","\n      ",98],")",["T_WHITESPACE","\n    ",99],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","drupalLogin",101],"(",["T_VARIABLE","$content_admin",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Confirm the correct revision text appears on \"view revisions\" page.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","drupalGet",104],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$node",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","id",104],"(",")",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$node",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getRevisionId",104],"(",")",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","\"\/view\"",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertText",105],"(",["T_VARIABLE","$node",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","body",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","value",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'Correct text displays for version.'",105],")",";",["T_WHITESPACE","\n\n    ",105],["T_COMMENT","\/\/ Confirm the correct revision log message appears on the \"revisions\n",107],["T_WHITESPACE","    ",108],["T_COMMENT","\/\/ overview\" page.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","drupalGet",109],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$node",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","id",109],"(",")",["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\"",109],")",";",["T_WHITESPACE","\n    ",109],["T_FOREACH","foreach",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$logs",110],["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$revision_log",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n      ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertText",111],"(",["T_VARIABLE","$revision_log",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'Revision log message found.'",111],")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Confirm that this is the current revision.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertTrue",115],"(",["T_VARIABLE","$node",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","isDefaultRevision",115],"(",")",",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Third node revision is the current one.'",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Confirm that revisions revert properly.\n",117],["T_WHITESPACE","    ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","drupalPostForm",118],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$node",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","id",118],"(",")",["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$nodes",118],"[",["T_LNUMBER","1",118],"]",["T_OBJECT_OPERATOR","->",118],["T_STRING","getRevisionId",118],"(",")",["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"\/revert\"",118],",",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",")",",",["T_WHITESPACE"," ",118],["T_STRING","t",118],"(",["T_CONSTANT_ENCAPSED_STRING","'Revert'",118],")",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertRaw",119],"(",["T_STRING","t",119],"(",["T_CONSTANT_ENCAPSED_STRING","'@type %title has been reverted to the revision from %revision-date.'",119],",",["T_WHITESPACE","\n      ",119],["T_ARRAY","array",120],"(",["T_WHITESPACE","\n        ",120],["T_CONSTANT_ENCAPSED_STRING","'@type'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",121],",",["T_WHITESPACE","\n        ",121],["T_CONSTANT_ENCAPSED_STRING","'%title'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$nodes",122],"[",["T_LNUMBER","1",122],"]",["T_OBJECT_OPERATOR","->",122],["T_STRING","getTitle",122],"(",")",",",["T_WHITESPACE","\n        ",122],["T_CONSTANT_ENCAPSED_STRING","'%revision-date'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_STRING","format_date",123],"(",["T_VARIABLE","$nodes",123],"[",["T_LNUMBER","1",123],"]",["T_OBJECT_OPERATOR","->",123],["T_STRING","getRevisionCreationTime",123],"(",")",")",["T_WHITESPACE","\n      ",123],")",")",",",["T_WHITESPACE","\n      ",124],["T_CONSTANT_ENCAPSED_STRING","'Revision reverted.'",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$node_storage",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","resetCache",126],"(",["T_ARRAY","array",126],"(",["T_VARIABLE","$node",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","id",126],"(",")",")",")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$reverted_node",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$node_storage",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","load",127],"(",["T_VARIABLE","$node",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","id",127],"(",")",")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertTrue",128],"(","(",["T_VARIABLE","$nodes",128],"[",["T_LNUMBER","1",128],"]",["T_OBJECT_OPERATOR","->",128],["T_STRING","body",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","value",128],["T_WHITESPACE"," ",128],["T_IS_EQUAL","==",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$reverted_node",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","body",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","value",128],")",",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'Node reverted correctly.'",128],")",";",["T_WHITESPACE","\n\n    ",128],["T_COMMENT","\/\/ Confirm that this is not the current version.\n",130],["T_WHITESPACE","    ",131],["T_VARIABLE","$node",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","node_revision_load",131],"(",["T_VARIABLE","$node",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getRevisionId",131],"(",")",")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertFalse",132],"(",["T_VARIABLE","$node",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","isDefaultRevision",132],"(",")",",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'Third node revision is not the current one.'",132],")",";",["T_WHITESPACE","\n\n    ",132],["T_COMMENT","\/\/ Confirm revisions delete properly.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","drupalPostForm",135],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_VARIABLE","$node",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","id",135],"(",")",["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_VARIABLE","$nodes",135],"[",["T_LNUMBER","1",135],"]",["T_OBJECT_OPERATOR","->",135],["T_STRING","getRevisionId",135],"(",")",["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","\"\/delete\"",135],",",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",")",",",["T_WHITESPACE"," ",135],["T_STRING","t",135],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",135],")",")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertRaw",136],"(",["T_STRING","t",136],"(",["T_CONSTANT_ENCAPSED_STRING","'Revision from %revision-date of @type %title has been deleted.'",136],",",["T_WHITESPACE","\n      ",136],["T_ARRAY","array",137],"(",["T_WHITESPACE","\n        ",137],["T_CONSTANT_ENCAPSED_STRING","'%revision-date'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_STRING","format_date",138],"(",["T_VARIABLE","$nodes",138],"[",["T_LNUMBER","1",138],"]",["T_OBJECT_OPERATOR","->",138],["T_STRING","getRevisionCreationTime",138],"(",")",")",",",["T_WHITESPACE","\n        ",138],["T_CONSTANT_ENCAPSED_STRING","'@type'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",139],",",["T_WHITESPACE","\n        ",139],["T_CONSTANT_ENCAPSED_STRING","'%title'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$nodes",140],"[",["T_LNUMBER","1",140],"]",["T_OBJECT_OPERATOR","->",140],["T_STRING","getTitle",140],"(",")",",",["T_WHITESPACE","\n      ",140],")",")",",",["T_WHITESPACE","\n      ",141],["T_CONSTANT_ENCAPSED_STRING","'Revision deleted.'",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","assertTrue",143],"(",["T_STRING","db_query",143],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(vid) FROM {node_revision} WHERE nid = :nid and vid = :vid'",143],",",["T_WHITESPACE","\n      ",143],["T_ARRAY","array",144],"(",["T_CONSTANT_ENCAPSED_STRING","':nid'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$node",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","id",144],"(",")",",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","':vid'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$nodes",144],"[",["T_LNUMBER","1",144],"]",["T_OBJECT_OPERATOR","->",144],["T_STRING","getRevisionId",144],"(",")",")",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","fetchField",144],"(",")",["T_WHITESPACE"," ",144],["T_IS_EQUAL","==",144],["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],",",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'Revision not found.'",145],")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ Set the revision timestamp to an older date to make sure that the\n",147],["T_WHITESPACE","    ",148],["T_COMMENT","\/\/ confirmation message correctly displays the stored revision date.\n",148],["T_WHITESPACE","    ",149],["T_VARIABLE","$old_revision_date",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","REQUEST_TIME",149],["T_WHITESPACE"," ",149],"-",["T_WHITESPACE"," ",149],["T_LNUMBER","86400",149],";",["T_WHITESPACE","\n    ",149],["T_STRING","db_update",150],"(",["T_CONSTANT_ENCAPSED_STRING","'node_revision'",150],")",["T_WHITESPACE","\n      ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","condition",151],"(",["T_CONSTANT_ENCAPSED_STRING","'vid'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$nodes",151],"[",["T_LNUMBER","2",151],"]",["T_OBJECT_OPERATOR","->",151],["T_STRING","getRevisionId",151],"(",")",")",["T_WHITESPACE","\n      ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","fields",152],"(",["T_ARRAY","array",152],"(",["T_WHITESPACE","\n        ",152],["T_CONSTANT_ENCAPSED_STRING","'revision_timestamp'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$old_revision_date",153],",",["T_WHITESPACE","\n      ",153],")",")",["T_WHITESPACE","\n      ",154],["T_OBJECT_OPERATOR","->",155],["T_STRING","execute",155],"(",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","drupalPostForm",156],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",156],["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_VARIABLE","$node",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","id",156],"(",")",["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",156],["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_VARIABLE","$nodes",156],"[",["T_LNUMBER","2",156],"]",["T_OBJECT_OPERATOR","->",156],["T_STRING","getRevisionId",156],"(",")",["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","\"\/revert\"",156],",",["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",")",",",["T_WHITESPACE"," ",156],["T_STRING","t",156],"(",["T_CONSTANT_ENCAPSED_STRING","'Revert'",156],")",")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertRaw",157],"(",["T_STRING","t",157],"(",["T_CONSTANT_ENCAPSED_STRING","'@type %title has been reverted to the revision from %revision-date.'",157],",",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],"(",["T_WHITESPACE","\n      ",157],["T_CONSTANT_ENCAPSED_STRING","'@type'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",158],",",["T_WHITESPACE","\n      ",158],["T_CONSTANT_ENCAPSED_STRING","'%title'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$nodes",159],"[",["T_LNUMBER","2",159],"]",["T_OBJECT_OPERATOR","->",159],["T_STRING","getTitle",159],"(",")",",",["T_WHITESPACE","\n      ",159],["T_CONSTANT_ENCAPSED_STRING","'%revision-date'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_STRING","format_date",160],"(",["T_VARIABLE","$old_revision_date",160],")",",",["T_WHITESPACE","\n    ",160],")",")",")",";",["T_WHITESPACE","\n\n    ",161],["T_COMMENT","\/\/ Create 50 more revisions in order to trigger paging on the revisions\n",163],["T_WHITESPACE","    ",164],["T_COMMENT","\/\/ overview screen.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$node",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$nodes",165],"[",["T_LNUMBER","0",165],"]",";",["T_WHITESPACE","\n    ",165],["T_FOR","for",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$i",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_LNUMBER","0",166],";",["T_WHITESPACE"," ",166],["T_VARIABLE","$i",166],["T_WHITESPACE"," ",166],"<",["T_WHITESPACE"," ",166],["T_LNUMBER","50",166],";",["T_WHITESPACE"," ",166],["T_VARIABLE","$i",166],["T_INC","++",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n      ",166],["T_VARIABLE","$logs",167],"[","]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$node",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","revision_log",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","randomMachineName",167],"(",["T_LNUMBER","32",167],")",";",["T_WHITESPACE","\n\n      ",167],["T_VARIABLE","$node",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","createNodeRevision",169],"(",["T_VARIABLE","$node",169],")",";",["T_WHITESPACE","\n      ",169],["T_VARIABLE","$nodes",170],"[","]",["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_CLONE","clone",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$node",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","drupalGet",173],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$node",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","id",173],"(",")",["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'\/revisions'",173],")",";",["T_WHITESPACE","\n\n    ",173],["T_COMMENT","\/\/ Check that the pager exists.\n",175],["T_WHITESPACE","    ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertRaw",176],"(",["T_CONSTANT_ENCAPSED_STRING","'page=1'",176],")",";",["T_WHITESPACE","\n\n    ",176],["T_COMMENT","\/\/ Check that the last revision is displayed on the first page.\n",178],["T_WHITESPACE","    ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","assertText",179],"(",["T_STRING","end",179],"(",["T_VARIABLE","$logs",179],")",")",";",["T_WHITESPACE","\n\n    ",179],["T_COMMENT","\/\/ Go to the second page and check that one of the initial three revisions\n",181],["T_WHITESPACE","    ",182],["T_COMMENT","\/\/ is displayed.\n",182],["T_WHITESPACE","    ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","clickLink",183],"(",["T_STRING","t",183],"(",["T_CONSTANT_ENCAPSED_STRING","'Page 2'",183],")",")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertText",184],"(",["T_VARIABLE","$logs",184],"[",["T_LNUMBER","2",184],"]",")",";",["T_WHITESPACE","\n  ",184],"}",["T_WHITESPACE","\n\n",185],"}",["T_WHITESPACE","\n",187]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","node",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests changing view modes for nodes.\n *\n * @group node\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","NodeEntityViewModeAlterTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","NodeTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Enable dummy module that implements hook_ENTITY_TYPE_view() for nodes.\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_PUBLIC","public",17],["T_WHITESPACE"," ",17],["T_STATIC","static",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$modules",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",["T_CONSTANT_ENCAPSED_STRING","'node_test'",17],")",";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Create a \"Basic page\" node and verify its consistency in the database.\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","testNodeViewModeChange",22],"(",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_VARIABLE","$web_user",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","drupalCreateUser",23],"(",["T_ARRAY","array",23],"(",["T_CONSTANT_ENCAPSED_STRING","'create page content'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'edit own page content'",23],")",")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","drupalLogin",24],"(",["T_VARIABLE","$web_user",24],")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ Create a node.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$edit",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_ARRAY","array",27],"(",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$edit",28],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",28],"]",["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","randomMachineName",28],"(",["T_LNUMBER","8",28],")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$edit",29],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",29],"]",["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","t",29],"(",["T_CONSTANT_ENCAPSED_STRING","'Data that should appear only in the body for the node.'",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$edit",30],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][summary]'",30],"]",["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","t",30],"(",["T_CONSTANT_ENCAPSED_STRING","'Extra data that should appear only in the teaser for the node.'",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","drupalPostForm",31],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/page'",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$edit",31],",",["T_WHITESPACE"," ",31],["T_STRING","t",31],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",31],")",")",";",["T_WHITESPACE","\n\n    ",31],["T_VARIABLE","$node",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","drupalGetNodeByTitle",33],"(",["T_VARIABLE","$edit",33],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",33],"]",")",";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Set the flag to alter the view mode and view the node.\n",35],["T_WHITESPACE","    ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Drupal",36],["T_DOUBLE_COLON","::",36],["T_STRING","state",36],"(",")",["T_OBJECT_OPERATOR","->",36],["T_STRING","set",36],"(",["T_CONSTANT_ENCAPSED_STRING","'node_test_change_view_mode'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'teaser'",36],")",";",["T_WHITESPACE","\n    ",36],["T_STRING","Cache",37],["T_DOUBLE_COLON","::",37],["T_STRING","invalidateTags",37],"(","[",["T_CONSTANT_ENCAPSED_STRING","'rendered'",37],"]",")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","drupalGet",38],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_VARIABLE","$node",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","id",38],"(",")",")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Check that teaser mode is viewed.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertText",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Extra data that should appear only in the teaser for the node.'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Teaser text present'",41],")",";",["T_WHITESPACE","\n    ",41],["T_COMMENT","\/\/ Make sure body text is not present.\n",42],["T_WHITESPACE","    ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertNoText",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Data that should appear only in the body for the node.'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'Body text not present'",43],")",";",["T_WHITESPACE","\n\n    ",43],["T_COMMENT","\/\/ Test that the correct build mode has been set.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$build",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","drupalBuildEntityView",46],"(",["T_VARIABLE","$node",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEqual",47],"(",["T_VARIABLE","$build",47],"[",["T_CONSTANT_ENCAPSED_STRING","'#view_mode'",47],"]",",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'teaser'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'The view mode has correctly been set to teaser.'",47],")",";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n",48],"}",["T_WHITESPACE","\n",50]]
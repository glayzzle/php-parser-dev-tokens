[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","node",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Url",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldConfig",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldStorageConfig",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","language",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigurableLanguage",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","node",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Node",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","node",10],["T_NS_SEPARATOR","\\",10],["T_STRING","NodeInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Component",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Serialization",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Json",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Create a node with revisions and test viewing, saving, reverting, and\n * deleting revisions for users with access for this content type.\n *\n * @group node\n *\/",13],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","NodeRevisionsTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","NodeTestBase",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * An array of node revisions.\n   *\n   * @var \\Drupal\\node\\NodeInterface[]\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$nodes",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Revision log messages.\n   *\n   * @var array\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$revisionLogs",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",35],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_STATIC","static",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$modules",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],"[",["T_CONSTANT_ENCAPSED_STRING","'node'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'contextual'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'datetime'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'language'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'content_translation'",38],"]",";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","setUp",43],"(",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_STRING","parent",44],["T_DOUBLE_COLON","::",44],["T_STRING","setUp",44],"(",")",";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ Enable additional languages.\n",46],["T_WHITESPACE","    ",47],["T_STRING","ConfigurableLanguage",47],["T_DOUBLE_COLON","::",47],["T_STRING","createFromLangcode",47],"(",["T_CONSTANT_ENCAPSED_STRING","'de'",47],")",["T_OBJECT_OPERATOR","->",47],["T_STRING","save",47],"(",")",";",["T_WHITESPACE","\n    ",47],["T_STRING","ConfigurableLanguage",48],["T_DOUBLE_COLON","::",48],["T_STRING","createFromLangcode",48],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","save",48],"(",")",";",["T_WHITESPACE","\n\n    ",48],["T_VARIABLE","$field_storage_definition",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'field_name'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'untranslatable_string_field'",51],",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'node'",52],",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'type'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'string'",53],",",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_LNUMBER","1",54],",",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'translatable'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_STRING","FALSE",55],",",["T_WHITESPACE","\n    ",55],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$field_storage",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","FieldStorageConfig",57],["T_DOUBLE_COLON","::",57],["T_STRING","create",57],"(",["T_VARIABLE","$field_storage_definition",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$field_storage",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","save",58],"(",")",";",["T_WHITESPACE","\n\n    ",58],["T_VARIABLE","$field_definition",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'field_storage'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$field_storage",61],",",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'bundle'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'page'",62],",",["T_WHITESPACE","\n    ",62],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$field",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","FieldConfig",64],["T_DOUBLE_COLON","::",64],["T_STRING","create",64],"(",["T_VARIABLE","$field_definition",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$field",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","save",65],"(",")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ Create and log in user.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$web_user",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","drupalCreateUser",68],"(",["T_WHITESPACE","\n      ",68],["T_ARRAY","array",69],"(",["T_WHITESPACE","\n        ",69],["T_CONSTANT_ENCAPSED_STRING","'view page revisions'",70],",",["T_WHITESPACE","\n        ",70],["T_CONSTANT_ENCAPSED_STRING","'revert page revisions'",71],",",["T_WHITESPACE","\n        ",71],["T_CONSTANT_ENCAPSED_STRING","'delete page revisions'",72],",",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'edit any page content'",73],",",["T_WHITESPACE","\n        ",73],["T_CONSTANT_ENCAPSED_STRING","'delete any page content'",74],",",["T_WHITESPACE","\n        ",74],["T_CONSTANT_ENCAPSED_STRING","'access contextual links'",75],",",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'translate any entity'",76],",",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'administer content types'",77],",",["T_WHITESPACE","\n      ",77],")",["T_WHITESPACE","\n    ",78],")",";",["T_WHITESPACE","\n\n    ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","drupalLogin",81],"(",["T_VARIABLE","$web_user",81],")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Create initial node.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$node",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","drupalCreateNode",84],"(",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$settings",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","get_object_vars",85],"(",["T_VARIABLE","$node",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$settings",86],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_LNUMBER","1",86],";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$settings",87],"[",["T_CONSTANT_ENCAPSED_STRING","'isDefaultRevision'",87],"]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","TRUE",87],";",["T_WHITESPACE","\n\n    ",87],["T_VARIABLE","$nodes",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$logs",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ Get original node.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$nodes",93],"[","]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_CLONE","clone",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$node",93],";",["T_WHITESPACE","\n\n    ",93],["T_COMMENT","\/\/ Create three revisions.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$revision_count",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_LNUMBER","3",96],";",["T_WHITESPACE","\n    ",96],["T_FOR","for",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$i",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_LNUMBER","0",97],";",["T_WHITESPACE"," ",97],["T_VARIABLE","$i",97],["T_WHITESPACE"," ",97],"<",["T_WHITESPACE"," ",97],["T_VARIABLE","$revision_count",97],";",["T_WHITESPACE"," ",97],["T_VARIABLE","$i",97],["T_INC","++",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n      ",97],["T_VARIABLE","$logs",98],"[","]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$node",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","revision_log",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","randomMachineName",98],"(",["T_LNUMBER","32",98],")",";",["T_WHITESPACE","\n\n      ",98],["T_COMMENT","\/\/ Create revision with a random title and body and update variables.\n",100],["T_WHITESPACE","      ",101],["T_VARIABLE","$node",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","title",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","randomMachineName",101],"(",")",";",["T_WHITESPACE","\n      ",101],["T_VARIABLE","$node",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","body",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_WHITESPACE","\n        ",102],["T_CONSTANT_ENCAPSED_STRING","'value'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","randomMachineName",103],"(",["T_LNUMBER","32",103],")",",",["T_WHITESPACE","\n        ",103],["T_CONSTANT_ENCAPSED_STRING","'format'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_STRING","filter_default_format",104],"(",")",",",["T_WHITESPACE","\n      ",104],")",";",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$node",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","untranslatable_string_field",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","value",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","randomString",106],"(",")",";",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$node",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setNewRevision",107],"(",")",";",["T_WHITESPACE","\n\n      ",107],["T_COMMENT","\/\/ Edit the 2nd revision with a different user.\n",109],["T_WHITESPACE","      ",110],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$i",110],["T_WHITESPACE"," ",110],["T_IS_EQUAL","==",110],["T_WHITESPACE"," ",110],["T_LNUMBER","1",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$editor",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","drupalCreateUser",111],"(",")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$node",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","setRevisionUserId",112],"(",["T_VARIABLE","$editor",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","id",112],"(",")",")",";",["T_WHITESPACE","\n      ",112],"}",["T_WHITESPACE","\n      ",113],["T_ELSE","else",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$node",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setRevisionUserId",115],"(",["T_VARIABLE","$web_user",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","id",115],"(",")",")",";",["T_WHITESPACE","\n      ",115],"}",["T_WHITESPACE","\n\n      ",116],["T_VARIABLE","$node",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","save",118],"(",")",";",["T_WHITESPACE","\n\n      ",118],["T_VARIABLE","$node",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","Node",120],["T_DOUBLE_COLON","::",120],["T_STRING","load",120],"(",["T_VARIABLE","$node",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","id",120],"(",")",")",";",["T_WHITESPACE"," ",120],["T_COMMENT","\/\/ Make sure we get revision information.\n",120],["T_WHITESPACE","      ",121],["T_VARIABLE","$nodes",121],"[","]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_CLONE","clone",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$node",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","nodes",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$nodes",124],";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","revisionLogs",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$logs",125],";",["T_WHITESPACE","\n  ",125],"}",["T_WHITESPACE","\n\n  ",126],["T_DOC_COMMENT","\/**\n   * Checks node revision related operations.\n   *\/",128],["T_WHITESPACE","\n  ",130],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","testRevisions",131],"(",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$node_storage",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","container",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","get",132],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getStorage",132],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",132],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$nodes",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","nodes",133],";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$logs",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","revisionLogs",134],";",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ Get last node for simple checks.\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$node",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$nodes",137],"[",["T_LNUMBER","3",137],"]",";",["T_WHITESPACE","\n\n    ",137],["T_COMMENT","\/\/ Confirm the correct revision text appears on \"view revisions\" page.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","drupalGet",140],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$node",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","id",140],"(",")",["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$node",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getRevisionId",140],"(",")",["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","\"\/view\"",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertText",141],"(",["T_VARIABLE","$node",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","body",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","value",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'Correct text displays for version.'",141],")",";",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Confirm the correct log message appears on \"revisions overview\" page.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","drupalGet",144],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_VARIABLE","$node",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","id",144],"(",")",["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\"",144],")",";",["T_WHITESPACE","\n    ",144],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$logs",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$revision_log",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n      ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertText",146],"(",["T_VARIABLE","$revision_log",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'Revision log message found.'",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n    ",147],["T_COMMENT","\/\/ Original author, and editor names should appear on revisions overview.\n",148],["T_WHITESPACE","    ",149],["T_VARIABLE","$web_user",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$nodes",149],"[",["T_LNUMBER","0",149],"]",["T_OBJECT_OPERATOR","->",149],["T_STRING","revision_uid",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","entity",149],";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertText",150],"(",["T_STRING","t",150],"(",["T_CONSTANT_ENCAPSED_STRING","'by @name'",150],",",["T_WHITESPACE"," ",150],"[",["T_CONSTANT_ENCAPSED_STRING","'@name'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$web_user",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getAccountName",150],"(",")","]",")",")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$editor",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$nodes",151],"[",["T_LNUMBER","2",151],"]",["T_OBJECT_OPERATOR","->",151],["T_STRING","revision_uid",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","entity",151],";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertText",152],"(",["T_STRING","t",152],"(",["T_CONSTANT_ENCAPSED_STRING","'by @name'",152],",",["T_WHITESPACE"," ",152],"[",["T_CONSTANT_ENCAPSED_STRING","'@name'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$editor",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getAccountName",152],"(",")","]",")",")",";",["T_WHITESPACE","\n\n    ",152],["T_COMMENT","\/\/ Confirm that this is the default revision.\n",154],["T_WHITESPACE","    ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","assertTrue",155],"(",["T_VARIABLE","$node",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","isDefaultRevision",155],"(",")",",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'Third node revision is the default one.'",155],")",";",["T_WHITESPACE","\n\n    ",155],["T_COMMENT","\/\/ Confirm that the \"Edit\" and \"Delete\" contextual links appear for the\n",157],["T_WHITESPACE","    ",158],["T_COMMENT","\/\/ default revision.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$ids",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[",["T_CONSTANT_ENCAPSED_STRING","'node:node='",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$node",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","id",159],"(",")",["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","':changed='",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$node",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getChangedTime",159],"(",")","]",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$json",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","renderContextualLinks",160],"(",["T_VARIABLE","$ids",160],",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'node\/'",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_VARIABLE","$node",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","id",160],"(",")",")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","verbose",161],"(",["T_VARIABLE","$json",161],"[",["T_VARIABLE","$ids",161],"[",["T_LNUMBER","0",161],"]","]",")",";",["T_WHITESPACE","\n\n    ",161],["T_VARIABLE","$expected",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'<li class=\"entitynodeedit-form\"><a href=\"'",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_STRING","base_path",163],"(",")",["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'node\/'",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$node",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","id",163],"(",")",["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'\/edit\">Edit<\/a><\/li>'",163],";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","assertTrue",164],"(",["T_STRING","strstr",164],"(",["T_VARIABLE","$json",164],"[",["T_VARIABLE","$ids",164],"[",["T_LNUMBER","0",164],"]","]",",",["T_WHITESPACE"," ",164],["T_VARIABLE","$expected",164],")",",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'The \"Edit\" contextual link is shown for the default revision.'",164],")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$expected",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'<li class=\"entitynodedelete-form\"><a href=\"'",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_STRING","base_path",165],"(",")",["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'node\/'",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_VARIABLE","$node",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","id",165],"(",")",["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'\/delete\">Delete<\/a><\/li>'",165],";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertTrue",166],"(",["T_STRING","strstr",166],"(",["T_VARIABLE","$json",166],"[",["T_VARIABLE","$ids",166],"[",["T_LNUMBER","0",166],"]","]",",",["T_WHITESPACE"," ",166],["T_VARIABLE","$expected",166],")",",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'The \"Delete\" contextual link is shown for the default revision.'",166],")",";",["T_WHITESPACE","\n\n\n    ",166],["T_COMMENT","\/\/ Confirm that revisions revert properly.\n",169],["T_WHITESPACE","    ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","drupalPostForm",170],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_VARIABLE","$node",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","id",170],"(",")",["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_VARIABLE","$nodes",170],"[",["T_LNUMBER","1",170],"]",["T_OBJECT_OPERATOR","->",170],["T_STRING","getRevisionid",170],"(",")",["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","\"\/revert\"",170],",",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",")",",",["T_WHITESPACE"," ",170],["T_STRING","t",170],"(",["T_CONSTANT_ENCAPSED_STRING","'Revert'",170],")",")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertRaw",171],"(",["T_STRING","t",171],"(",["T_CONSTANT_ENCAPSED_STRING","'@type %title has been reverted to the revision from %revision-date.'",171],",",["T_WHITESPACE","\n                        ",171],["T_ARRAY","array",172],"(",["T_CONSTANT_ENCAPSED_STRING","'@type'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'%title'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$nodes",172],"[",["T_LNUMBER","1",172],"]",["T_OBJECT_OPERATOR","->",172],["T_STRING","label",172],"(",")",",",["T_WHITESPACE","\n                              ",172],["T_CONSTANT_ENCAPSED_STRING","'%revision-date'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_STRING","format_date",173],"(",["T_VARIABLE","$nodes",173],"[",["T_LNUMBER","1",173],"]",["T_OBJECT_OPERATOR","->",173],["T_STRING","getRevisionCreationTime",173],"(",")",")",")",")",",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'Revision reverted.'",173],")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$node_storage",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","resetCache",174],"(",["T_ARRAY","array",174],"(",["T_VARIABLE","$node",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","id",174],"(",")",")",")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$reverted_node",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$node_storage",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","load",175],"(",["T_VARIABLE","$node",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","id",175],"(",")",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertTrue",176],"(","(",["T_VARIABLE","$nodes",176],"[",["T_LNUMBER","1",176],"]",["T_OBJECT_OPERATOR","->",176],["T_STRING","body",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","value",176],["T_WHITESPACE"," ",176],["T_IS_EQUAL","==",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$reverted_node",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","body",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","value",176],")",",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'Node reverted correctly.'",176],")",";",["T_WHITESPACE","\n\n    ",176],["T_COMMENT","\/\/ Confirm that this is not the default version.\n",178],["T_WHITESPACE","    ",179],["T_VARIABLE","$node",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","node_revision_load",179],"(",["T_VARIABLE","$node",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getRevisionId",179],"(",")",")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertFalse",180],"(",["T_VARIABLE","$node",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","isDefaultRevision",180],"(",")",",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'Third node revision is not the default one.'",180],")",";",["T_WHITESPACE","\n\n    ",180],["T_COMMENT","\/\/ Confirm that \"Edit\" and \"Delete\" contextual links don't appear for\n",182],["T_WHITESPACE","    ",183],["T_COMMENT","\/\/ non-default revision.\n",183],["T_WHITESPACE","    ",184],["T_VARIABLE","$ids",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],"[",["T_CONSTANT_ENCAPSED_STRING","'node_revision::node='",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_VARIABLE","$node",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","id",184],"(",")",["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'&node_revision='",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_VARIABLE","$node",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getRevisionId",184],"(",")",["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","':'",184],"]",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$json",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","renderContextualLinks",185],"(",["T_VARIABLE","$ids",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'node\/'",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$node",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","id",185],"(",")",["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'\/revisions\/'",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$node",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getRevisionId",185],"(",")",["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'\/view'",185],")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","verbose",186],"(",["T_VARIABLE","$json",186],"[",["T_VARIABLE","$ids",186],"[",["T_LNUMBER","0",186],"]","]",")",";",["T_WHITESPACE","\n\n    ",186],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","assertFalse",188],"(",["T_STRING","strstr",188],"(",["T_VARIABLE","$json",188],"[",["T_VARIABLE","$ids",188],"[",["T_LNUMBER","0",188],"]","]",",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'<li class=\"entitynodeedit-form\">'",188],")",",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'The \"Edit\" contextual link is not shown for a non-default revision.'",188],")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","assertFalse",189],"(",["T_STRING","strstr",189],"(",["T_VARIABLE","$json",189],"[",["T_VARIABLE","$ids",189],"[",["T_LNUMBER","0",189],"]","]",",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'<li class=\"entitynodedelete-form\">'",189],")",",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'The \"Delete\" contextual link is not shown for a non-default revision.'",189],")",";",["T_WHITESPACE","\n\n\n    ",189],["T_COMMENT","\/\/ Confirm revisions delete properly.\n",192],["T_WHITESPACE","    ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","drupalPostForm",193],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_VARIABLE","$node",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","id",193],"(",")",["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_VARIABLE","$nodes",193],"[",["T_LNUMBER","1",193],"]",["T_OBJECT_OPERATOR","->",193],["T_STRING","getRevisionId",193],"(",")",["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"\/delete\"",193],",",["T_WHITESPACE"," ",193],["T_ARRAY","array",193],"(",")",",",["T_WHITESPACE"," ",193],["T_STRING","t",193],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",193],")",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertRaw",194],"(",["T_STRING","t",194],"(",["T_CONSTANT_ENCAPSED_STRING","'Revision from %revision-date of @type %title has been deleted.'",194],",",["T_WHITESPACE","\n                        ",194],["T_ARRAY","array",195],"(",["T_CONSTANT_ENCAPSED_STRING","'%revision-date'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_STRING","format_date",195],"(",["T_VARIABLE","$nodes",195],"[",["T_LNUMBER","1",195],"]",["T_OBJECT_OPERATOR","->",195],["T_STRING","getRevisionCreationTime",195],"(",")",")",",",["T_WHITESPACE","\n                              ",195],["T_CONSTANT_ENCAPSED_STRING","'@type'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",196],",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'%title'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$nodes",196],"[",["T_LNUMBER","1",196],"]",["T_OBJECT_OPERATOR","->",196],["T_STRING","label",196],"(",")",")",")",",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'Revision deleted.'",196],")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertTrue",197],"(",["T_STRING","db_query",197],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(vid) FROM {node_revision} WHERE nid = :nid and vid = :vid'",197],",",["T_WHITESPACE"," ",197],["T_ARRAY","array",197],"(",["T_CONSTANT_ENCAPSED_STRING","':nid'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$node",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","id",197],"(",")",",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","':vid'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$nodes",197],"[",["T_LNUMBER","1",197],"]",["T_OBJECT_OPERATOR","->",197],["T_STRING","getRevisionId",197],"(",")",")",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","fetchField",197],"(",")",["T_WHITESPACE"," ",197],["T_IS_EQUAL","==",197],["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'Revision not found.'",197],")",";",["T_WHITESPACE","\n\n    ",197],["T_COMMENT","\/\/ Set the revision timestamp to an older date to make sure that the\n",199],["T_WHITESPACE","    ",200],["T_COMMENT","\/\/ confirmation message correctly displays the stored revision date.\n",200],["T_WHITESPACE","    ",201],["T_VARIABLE","$old_revision_date",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","REQUEST_TIME",201],["T_WHITESPACE"," ",201],"-",["T_WHITESPACE"," ",201],["T_LNUMBER","86400",201],";",["T_WHITESPACE","\n    ",201],["T_STRING","db_update",202],"(",["T_CONSTANT_ENCAPSED_STRING","'node_revision'",202],")",["T_WHITESPACE","\n      ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","condition",203],"(",["T_CONSTANT_ENCAPSED_STRING","'vid'",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$nodes",203],"[",["T_LNUMBER","2",203],"]",["T_OBJECT_OPERATOR","->",203],["T_STRING","getRevisionId",203],"(",")",")",["T_WHITESPACE","\n      ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","fields",204],"(",["T_ARRAY","array",204],"(",["T_WHITESPACE","\n        ",204],["T_CONSTANT_ENCAPSED_STRING","'revision_timestamp'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$old_revision_date",205],",",["T_WHITESPACE","\n      ",205],")",")",["T_WHITESPACE","\n      ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","execute",207],"(",")",";",["T_WHITESPACE","\n    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","drupalPostForm",208],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_VARIABLE","$node",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","id",208],"(",")",["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_VARIABLE","$nodes",208],"[",["T_LNUMBER","2",208],"]",["T_OBJECT_OPERATOR","->",208],["T_STRING","getRevisionId",208],"(",")",["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","\"\/revert\"",208],",",["T_WHITESPACE"," ",208],["T_ARRAY","array",208],"(",")",",",["T_WHITESPACE"," ",208],["T_STRING","t",208],"(",["T_CONSTANT_ENCAPSED_STRING","'Revert'",208],")",")",";",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","assertRaw",209],"(",["T_STRING","t",209],"(",["T_CONSTANT_ENCAPSED_STRING","'@type %title has been reverted to the revision from %revision-date.'",209],",",["T_WHITESPACE"," ",209],["T_ARRAY","array",209],"(",["T_WHITESPACE","\n      ",209],["T_CONSTANT_ENCAPSED_STRING","'@type'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",210],",",["T_WHITESPACE","\n      ",210],["T_CONSTANT_ENCAPSED_STRING","'%title'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$nodes",211],"[",["T_LNUMBER","2",211],"]",["T_OBJECT_OPERATOR","->",211],["T_STRING","label",211],"(",")",",",["T_WHITESPACE","\n      ",211],["T_CONSTANT_ENCAPSED_STRING","'%revision-date'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_STRING","format_date",212],"(",["T_VARIABLE","$old_revision_date",212],")",",",["T_WHITESPACE","\n    ",212],")",")",")",";",["T_WHITESPACE","\n\n    ",213],["T_COMMENT","\/\/ Make a new revision and set it to not be default.\n",215],["T_WHITESPACE","    ",216],["T_COMMENT","\/\/ This will create a new revision that is not \"front facing\".\n",216],["T_WHITESPACE","    ",217],["T_VARIABLE","$new_node_revision",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_CLONE","clone",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$node",217],";",["T_WHITESPACE","\n    ",217],["T_VARIABLE","$new_body",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","randomMachineName",218],"(",")",";",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$new_node_revision",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","body",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","value",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$new_body",219],";",["T_WHITESPACE","\n    ",219],["T_COMMENT","\/\/ Save this as a non-default revision.\n",220],["T_WHITESPACE","    ",221],["T_VARIABLE","$new_node_revision",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setNewRevision",221],"(",")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$new_node_revision",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","isDefaultRevision",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","FALSE",222],";",["T_WHITESPACE","\n    ",222],["T_VARIABLE","$new_node_revision",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","save",223],"(",")",";",["T_WHITESPACE","\n\n    ",223],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","drupalGet",225],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_VARIABLE","$node",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","id",225],"(",")",")",";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertNoText",226],"(",["T_VARIABLE","$new_body",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'Revision body text is not present on default version of node.'",226],")",";",["T_WHITESPACE","\n\n    ",226],["T_COMMENT","\/\/ Verify that the new body text is present on the revision.\n",228],["T_WHITESPACE","    ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","drupalGet",229],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$node",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","id",229],"(",")",["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\/\"",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$new_node_revision",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getRevisionId",229],"(",")",["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","\"\/view\"",229],")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","assertText",230],"(",["T_VARIABLE","$new_body",230],",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'Revision body text is present when loading specific revision.'",230],")",";",["T_WHITESPACE","\n\n    ",230],["T_COMMENT","\/\/ Verify that the non-default revision vid is greater than the default\n",232],["T_WHITESPACE","    ",233],["T_COMMENT","\/\/ revision vid.\n",233],["T_WHITESPACE","    ",234],["T_VARIABLE","$default_revision",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","db_select",234],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'n'",234],")",["T_WHITESPACE","\n      ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","fields",235],"(",["T_CONSTANT_ENCAPSED_STRING","'n'",235],",",["T_WHITESPACE"," ",235],["T_ARRAY","array",235],"(",["T_CONSTANT_ENCAPSED_STRING","'vid'",235],")",")",["T_WHITESPACE","\n      ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","condition",236],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$node",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","id",236],"(",")",")",["T_WHITESPACE","\n      ",236],["T_OBJECT_OPERATOR","->",237],["T_STRING","execute",237],"(",")",["T_WHITESPACE","\n      ",237],["T_OBJECT_OPERATOR","->",238],["T_STRING","fetchCol",238],"(",")",";",["T_WHITESPACE","\n    ",238],["T_VARIABLE","$default_revision_vid",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$default_revision",239],"[",["T_LNUMBER","0",239],"]",";",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","assertTrue",240],"(",["T_VARIABLE","$new_node_revision",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getRevisionId",240],"(",")",["T_WHITESPACE"," ",240],">",["T_WHITESPACE"," ",240],["T_VARIABLE","$default_revision_vid",240],",",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'Revision vid is greater than default revision vid.'",240],")",";",["T_WHITESPACE","\n\n    ",240],["T_COMMENT","\/\/ Create an 'EN' node with a revision log message.\n",242],["T_WHITESPACE","    ",243],["T_VARIABLE","$node",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","drupalCreateNode",243],"(",")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$node",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","title",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'Node title in EN'",244],";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$node",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","revision_log",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'Simple revision message (EN)'",245],";",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$node",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","save",246],"(",")",";",["T_WHITESPACE","\n\n    ",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","drupalGet",248],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",248],["T_WHITESPACE"," ",248],".",["T_WHITESPACE"," ",248],["T_VARIABLE","$node",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","id",248],"(",")",["T_WHITESPACE"," ",248],".",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\"",248],")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertResponse",249],"(",["T_LNUMBER","403",249],")",";",["T_WHITESPACE","\n\n    ",249],["T_COMMENT","\/\/ Create a new revision and new log message.\n",251],["T_WHITESPACE","    ",252],["T_VARIABLE","$node",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_STRING","Node",252],["T_DOUBLE_COLON","::",252],["T_STRING","load",252],"(",["T_VARIABLE","$node",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","id",252],"(",")",")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$node",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","body",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","value",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'New text (EN)'",253],";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$node",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","revision_log",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'New revision message (EN)'",254],";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$node",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setNewRevision",255],"(",")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$node",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","save",256],"(",")",";",["T_WHITESPACE","\n\n    ",256],["T_COMMENT","\/\/ Check both revisions are shown on the node revisions overview page.\n",258],["T_WHITESPACE","    ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","drupalGet",259],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_VARIABLE","$node",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","id",259],"(",")",["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\"",259],")",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","assertText",260],"(",["T_CONSTANT_ENCAPSED_STRING","'Simple revision message (EN)'",260],")",";",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertText",261],"(",["T_CONSTANT_ENCAPSED_STRING","'New revision message (EN)'",261],")",";",["T_WHITESPACE","\n\n    ",261],["T_COMMENT","\/\/ Create an 'EN' node with a revision log message.\n",263],["T_WHITESPACE","    ",264],["T_VARIABLE","$node",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","drupalCreateNode",264],"(",")",";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$node",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","langcode",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'en'",265],";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$node",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","title",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'Node title in EN'",266],";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$node",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","revision_log",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'Simple revision message (EN)'",267],";",["T_WHITESPACE","\n    ",267],["T_VARIABLE","$node",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","save",268],"(",")",";",["T_WHITESPACE","\n\n    ",268],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","drupalGet",270],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_VARIABLE","$node",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","id",270],"(",")",["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\"",270],")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","assertResponse",271],"(",["T_LNUMBER","403",271],")",";",["T_WHITESPACE","\n\n    ",271],["T_COMMENT","\/\/ Add a translation in 'DE' and create a new revision and new log message.\n",273],["T_WHITESPACE","    ",274],["T_VARIABLE","$translation",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$node",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","addTranslation",274],"(",["T_CONSTANT_ENCAPSED_STRING","'de'",274],")",";",["T_WHITESPACE","\n    ",274],["T_VARIABLE","$translation",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","title",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","value",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'Node title in DE'",275],";",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$translation",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","body",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","value",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'New text (DE)'",276],";",["T_WHITESPACE","\n    ",276],["T_VARIABLE","$translation",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","revision_log",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'New revision message (DE)'",277],";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$translation",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","setNewRevision",278],"(",")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$translation",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","save",279],"(",")",";",["T_WHITESPACE","\n\n    ",279],["T_COMMENT","\/\/ View the revision UI in 'IT', only the original node revision is shown.\n",281],["T_WHITESPACE","    ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","drupalGet",282],"(",["T_CONSTANT_ENCAPSED_STRING","\"it\/node\/\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$node",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","id",282],"(",")",["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\"",282],")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","assertText",283],"(",["T_CONSTANT_ENCAPSED_STRING","'Simple revision message (EN)'",283],")",";",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","assertNoText",284],"(",["T_CONSTANT_ENCAPSED_STRING","'New revision message (DE)'",284],")",";",["T_WHITESPACE","\n\n    ",284],["T_COMMENT","\/\/ View the revision UI in 'DE', only the translated node revision is shown.\n",286],["T_WHITESPACE","    ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","drupalGet",287],"(",["T_CONSTANT_ENCAPSED_STRING","\"de\/node\/\"",287],["T_WHITESPACE"," ",287],".",["T_WHITESPACE"," ",287],["T_VARIABLE","$node",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","id",287],"(",")",["T_WHITESPACE"," ",287],".",["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\"",287],")",";",["T_WHITESPACE","\n    ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","assertNoText",288],"(",["T_CONSTANT_ENCAPSED_STRING","'Simple revision message (EN)'",288],")",";",["T_WHITESPACE","\n    ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","assertText",289],"(",["T_CONSTANT_ENCAPSED_STRING","'New revision message (DE)'",289],")",";",["T_WHITESPACE","\n\n    ",289],["T_COMMENT","\/\/ View the revision UI in 'EN', only the original node revision is shown.\n",291],["T_WHITESPACE","    ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","drupalGet",292],"(",["T_CONSTANT_ENCAPSED_STRING","\"node\/\"",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_VARIABLE","$node",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","id",292],"(",")",["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","\"\/revisions\"",292],")",";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","assertText",293],"(",["T_CONSTANT_ENCAPSED_STRING","'Simple revision message (EN)'",293],")",";",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","assertNoText",294],"(",["T_CONSTANT_ENCAPSED_STRING","'New revision message (DE)'",294],")",";",["T_WHITESPACE","\n  ",294],"}",["T_WHITESPACE","\n\n  ",295],["T_DOC_COMMENT","\/**\n   * Checks that revisions are correctly saved without log messages.\n   *\/",297],["T_WHITESPACE","\n  ",299],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","testNodeRevisionWithoutLogMessage",300],"(",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$node_storage",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","container",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","get",301],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",301],")",["T_OBJECT_OPERATOR","->",301],["T_STRING","getStorage",301],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",301],")",";",["T_WHITESPACE","\n    ",301],["T_COMMENT","\/\/ Create a node with an initial log message.\n",302],["T_WHITESPACE","    ",303],["T_VARIABLE","$revision_log",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","randomMachineName",303],"(",["T_LNUMBER","10",303],")",";",["T_WHITESPACE","\n    ",303],["T_VARIABLE","$node",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","drupalCreateNode",304],"(",["T_ARRAY","array",304],"(",["T_CONSTANT_ENCAPSED_STRING","'revision_log'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$revision_log",304],")",")",";",["T_WHITESPACE","\n\n    ",304],["T_COMMENT","\/\/ Save over the same revision and explicitly provide an empty log message\n",306],["T_WHITESPACE","    ",307],["T_COMMENT","\/\/ (for example, to mimic the case of a node form submitted with no text in\n",307],["T_WHITESPACE","    ",308],["T_COMMENT","\/\/ the \"log message\" field), and check that the original log message is\n",308],["T_WHITESPACE","    ",309],["T_COMMENT","\/\/ preserved.\n",309],["T_WHITESPACE","    ",310],["T_VARIABLE","$new_title",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","randomMachineName",310],"(",["T_LNUMBER","10",310],")",["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'testNodeRevisionWithoutLogMessage1'",310],";",["T_WHITESPACE","\n\n    ",310],["T_VARIABLE","$node",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_CLONE","clone",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$node",312],";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$node",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","title",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$new_title",313],";",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$node",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","revision_log",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","''",314],";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$node",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","setNewRevision",315],"(",["T_STRING","FALSE",315],")",";",["T_WHITESPACE","\n\n    ",315],["T_VARIABLE","$node",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","save",317],"(",")",";",["T_WHITESPACE","\n    ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","drupalGet",318],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",318],["T_WHITESPACE"," ",318],".",["T_WHITESPACE"," ",318],["T_VARIABLE","$node",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","id",318],"(",")",")",";",["T_WHITESPACE","\n    ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","assertText",319],"(",["T_VARIABLE","$new_title",319],",",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'New node title appears on the page.'",319],")",";",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$node_storage",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","resetCache",320],"(",["T_ARRAY","array",320],"(",["T_VARIABLE","$node",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","id",320],"(",")",")",")",";",["T_WHITESPACE","\n    ",320],["T_VARIABLE","$node_revision",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$node_storage",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","load",321],"(",["T_VARIABLE","$node",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","id",321],"(",")",")",";",["T_WHITESPACE","\n    ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","assertEqual",322],"(",["T_VARIABLE","$node_revision",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","revision_log",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","value",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$revision_log",322],",",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'After an existing node revision is re-saved without a log message, the original log message is preserved.'",322],")",";",["T_WHITESPACE","\n\n    ",322],["T_COMMENT","\/\/ Create another node with an initial revision log message.\n",324],["T_WHITESPACE","    ",325],["T_VARIABLE","$node",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","drupalCreateNode",325],"(",["T_ARRAY","array",325],"(",["T_CONSTANT_ENCAPSED_STRING","'revision_log'",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$revision_log",325],")",")",";",["T_WHITESPACE","\n\n    ",325],["T_COMMENT","\/\/ Save a new node revision without providing a log message, and check that\n",327],["T_WHITESPACE","    ",328],["T_COMMENT","\/\/ this revision has an empty log message.\n",328],["T_WHITESPACE","    ",329],["T_VARIABLE","$new_title",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","randomMachineName",329],"(",["T_LNUMBER","10",329],")",["T_WHITESPACE"," ",329],".",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'testNodeRevisionWithoutLogMessage2'",329],";",["T_WHITESPACE","\n\n    ",329],["T_VARIABLE","$node",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_CLONE","clone",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$node",331],";",["T_WHITESPACE","\n    ",331],["T_VARIABLE","$node",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","title",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$new_title",332],";",["T_WHITESPACE","\n    ",332],["T_VARIABLE","$node",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","setNewRevision",333],"(",")",";",["T_WHITESPACE","\n    ",333],["T_VARIABLE","$node",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","revision_log",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","NULL",334],";",["T_WHITESPACE","\n\n    ",334],["T_VARIABLE","$node",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","save",336],"(",")",";",["T_WHITESPACE","\n    ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","drupalGet",337],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",337],["T_WHITESPACE"," ",337],".",["T_WHITESPACE"," ",337],["T_VARIABLE","$node",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","id",337],"(",")",")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","assertText",338],"(",["T_VARIABLE","$new_title",338],",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'New node title appears on the page.'",338],")",";",["T_WHITESPACE","\n    ",338],["T_VARIABLE","$node_storage",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","resetCache",339],"(",["T_ARRAY","array",339],"(",["T_VARIABLE","$node",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","id",339],"(",")",")",")",";",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$node_revision",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$node_storage",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","load",340],"(",["T_VARIABLE","$node",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","id",340],"(",")",")",";",["T_WHITESPACE","\n    ",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","assertTrue",341],"(",["T_EMPTY","empty",341],"(",["T_VARIABLE","$node_revision",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","revision_log",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","value",341],")",",",["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","'After a new node revision is saved with an empty log message, the log message for the node is empty.'",341],")",";",["T_WHITESPACE","\n  ",341],"}",["T_WHITESPACE","\n\n  ",342],["T_DOC_COMMENT","\/**\n   * Gets server-rendered contextual links for the given contextual links IDs.\n   *\n   * @param string[] $ids\n   *   An array of contextual link IDs.\n   * @param string $current_path\n   *   The Drupal path for the page for which the contextual links are rendered.\n   *\n   * @return string\n   *   The decoded JSON response body.\n   *\/",344],["T_WHITESPACE","\n  ",354],["T_PROTECTED","protected",355],["T_WHITESPACE"," ",355],["T_FUNCTION","function",355],["T_WHITESPACE"," ",355],["T_STRING","renderContextualLinks",355],"(",["T_ARRAY","array",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$ids",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$current_path",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n    ",355],["T_VARIABLE","$post",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_ARRAY","array",356],"(",")",";",["T_WHITESPACE","\n    ",356],["T_FOR","for",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$i",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_LNUMBER","0",357],";",["T_WHITESPACE"," ",357],["T_VARIABLE","$i",357],["T_WHITESPACE"," ",357],"<",["T_WHITESPACE"," ",357],["T_STRING","count",357],"(",["T_VARIABLE","$ids",357],")",";",["T_WHITESPACE"," ",357],["T_VARIABLE","$i",357],["T_INC","++",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n      ",357],["T_VARIABLE","$post",358],"[",["T_CONSTANT_ENCAPSED_STRING","'ids['",358],["T_WHITESPACE"," ",358],".",["T_WHITESPACE"," ",358],["T_VARIABLE","$i",358],["T_WHITESPACE"," ",358],".",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","']'",358],"]",["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$ids",358],"[",["T_VARIABLE","$i",358],"]",";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n    ",359],["T_VARIABLE","$response",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","drupalPost",360],"(",["T_CONSTANT_ENCAPSED_STRING","'contextual\/render'",360],",",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",360],",",["T_WHITESPACE"," ",360],["T_VARIABLE","$post",360],",",["T_WHITESPACE"," ",360],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],"[",["T_CONSTANT_ENCAPSED_STRING","'destination'",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$current_path",360],"]","]",")",";",["T_WHITESPACE","\n\n    ",360],["T_RETURN","return",362],["T_WHITESPACE"," ",362],["T_STRING","Json",362],["T_DOUBLE_COLON","::",362],["T_STRING","decode",362],"(",["T_VARIABLE","$response",362],")",";",["T_WHITESPACE","\n  ",362],"}",["T_WHITESPACE","\n\n  ",363],["T_DOC_COMMENT","\/**\n   * Tests the revision translations are correctly reverted.\n   *\/",365],["T_WHITESPACE","\n  ",367],["T_PUBLIC","public",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","testRevisionTranslationRevert",368],"(",")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n    ",368],["T_COMMENT","\/\/ Create a node and a few revisions.\n",369],["T_WHITESPACE","    ",370],["T_VARIABLE","$node",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","drupalCreateNode",370],"(","[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'en'",370],"]",")",";",["T_WHITESPACE","\n\n    ",370],["T_VARIABLE","$initial_revision_id",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$node",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getRevisionId",372],"(",")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$initial_title",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$node",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","label",373],"(",")",";",["T_WHITESPACE","\n    ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","createRevisions",374],"(",["T_VARIABLE","$node",374],",",["T_WHITESPACE"," ",374],["T_LNUMBER","2",374],")",";",["T_WHITESPACE","\n\n    ",374],["T_COMMENT","\/\/ Translate the node and create a few translation revisions.\n",376],["T_WHITESPACE","    ",377],["T_VARIABLE","$translation",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$node",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","addTranslation",377],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",377],")",";",["T_WHITESPACE","\n    ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","createRevisions",378],"(",["T_VARIABLE","$translation",378],",",["T_WHITESPACE"," ",378],["T_LNUMBER","3",378],")",";",["T_WHITESPACE","\n    ",378],["T_VARIABLE","$revert_id",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$node",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getRevisionId",379],"(",")",";",["T_WHITESPACE","\n    ",379],["T_VARIABLE","$translated_title",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$translation",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","label",380],"(",")",";",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$untranslatable_string",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_VARIABLE","$node",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","untranslatable_string_field",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","value",381],";",["T_WHITESPACE","\n\n    ",381],["T_COMMENT","\/\/ Create a new revision for the default translation in-between a series of\n",383],["T_WHITESPACE","    ",384],["T_COMMENT","\/\/ translation revisions.\n",384],["T_WHITESPACE","    ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","createRevisions",385],"(",["T_VARIABLE","$node",385],",",["T_WHITESPACE"," ",385],["T_LNUMBER","1",385],")",";",["T_WHITESPACE","\n    ",385],["T_VARIABLE","$default_translation_title",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$node",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","label",386],"(",")",";",["T_WHITESPACE","\n\n    ",386],["T_COMMENT","\/\/ And create a few more translation revisions.\n",388],["T_WHITESPACE","    ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","createRevisions",389],"(",["T_VARIABLE","$translation",389],",",["T_WHITESPACE"," ",389],["T_LNUMBER","2",389],")",";",["T_WHITESPACE","\n    ",389],["T_VARIABLE","$translation_revision_id",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$translation",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getRevisionId",390],"(",")",";",["T_WHITESPACE","\n\n    ",390],["T_COMMENT","\/\/ Now revert the a translation revision preceding the last default\n",392],["T_WHITESPACE","    ",393],["T_COMMENT","\/\/ translation revision, and check that the desired value was reverted but\n",393],["T_WHITESPACE","    ",394],["T_COMMENT","\/\/ the default translation value was preserved.\n",394],["T_WHITESPACE","    ",395],["T_VARIABLE","$revert_translation_url",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_STRING","Url",395],["T_DOUBLE_COLON","::",395],["T_STRING","fromRoute",395],"(",["T_CONSTANT_ENCAPSED_STRING","'node.revision_revert_translation_confirm'",395],",",["T_WHITESPACE"," ",395],"[",["T_WHITESPACE","\n      ",395],["T_CONSTANT_ENCAPSED_STRING","'node'",396],["T_WHITESPACE"," ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$node",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","id",396],"(",")",",",["T_WHITESPACE","\n      ",396],["T_CONSTANT_ENCAPSED_STRING","'node_revision'",397],["T_WHITESPACE"," ",397],["T_DOUBLE_ARROW","=>",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$revert_id",397],",",["T_WHITESPACE","\n      ",397],["T_CONSTANT_ENCAPSED_STRING","'langcode'",398],["T_WHITESPACE"," ",398],["T_DOUBLE_ARROW","=>",398],["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'it'",398],",",["T_WHITESPACE","\n    ",398],"]",")",";",["T_WHITESPACE","\n    ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","drupalPostForm",400],"(",["T_VARIABLE","$revert_translation_url",400],",",["T_WHITESPACE"," ",400],"[","]",",",["T_WHITESPACE"," ",400],["T_STRING","t",400],"(",["T_CONSTANT_ENCAPSED_STRING","'Revert'",400],")",")",";",["T_WHITESPACE","\n    ",400],["T_DOC_COMMENT","\/** @var \\Drupal\\node\\NodeStorage $node_storage *\/",401],["T_WHITESPACE","\n    ",401],["T_VARIABLE","$node_storage",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","container",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","get",402],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",402],")",["T_OBJECT_OPERATOR","->",402],["T_STRING","getStorage",402],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",402],")",";",["T_WHITESPACE","\n    ",402],["T_VARIABLE","$node_storage",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","resetCache",403],"(",")",";",["T_WHITESPACE","\n    ",403],["T_DOC_COMMENT","\/** @var \\Drupal\\node\\NodeInterface $node *\/",404],["T_WHITESPACE","\n    ",404],["T_VARIABLE","$node",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$node_storage",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","load",405],"(",["T_VARIABLE","$node",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","id",405],"(",")",")",";",["T_WHITESPACE","\n    ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","assertTrue",406],"(",["T_VARIABLE","$node",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getRevisionId",406],"(",")",["T_WHITESPACE"," ",406],">",["T_WHITESPACE"," ",406],["T_VARIABLE","$translation_revision_id",406],")",";",["T_WHITESPACE","\n    ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","assertEqual",407],"(",["T_VARIABLE","$node",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","label",407],"(",")",",",["T_WHITESPACE"," ",407],["T_VARIABLE","$default_translation_title",407],")",";",["T_WHITESPACE","\n    ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","assertEqual",408],"(",["T_VARIABLE","$node",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","getTranslation",408],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",408],")",["T_OBJECT_OPERATOR","->",408],["T_STRING","label",408],"(",")",",",["T_WHITESPACE"," ",408],["T_VARIABLE","$translated_title",408],")",";",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","assertNotEqual",409],"(",["T_VARIABLE","$node",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","untranslatable_string_field",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","value",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$untranslatable_string",409],")",";",["T_WHITESPACE","\n\n    ",409],["T_VARIABLE","$latest_revision_id",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$translation",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getRevisionId",411],"(",")",";",["T_WHITESPACE","\n\n    ",411],["T_COMMENT","\/\/ Now revert the a translation revision preceding the last default\n",413],["T_WHITESPACE","    ",414],["T_COMMENT","\/\/ translation revision again, and check that the desired value was reverted\n",414],["T_WHITESPACE","    ",415],["T_COMMENT","\/\/ but the default translation value was preserved. But in addition the\n",415],["T_WHITESPACE","    ",416],["T_COMMENT","\/\/ untranslated field will be reverted as well.\n",416],["T_WHITESPACE","    ",417],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","drupalPostForm",417],"(",["T_VARIABLE","$revert_translation_url",417],",",["T_WHITESPACE"," ",417],"[",["T_CONSTANT_ENCAPSED_STRING","'revert_untranslated_fields'",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_STRING","TRUE",417],"]",",",["T_WHITESPACE"," ",417],["T_STRING","t",417],"(",["T_CONSTANT_ENCAPSED_STRING","'Revert'",417],")",")",";",["T_WHITESPACE","\n    ",417],["T_VARIABLE","$node_storage",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","resetCache",418],"(",")",";",["T_WHITESPACE","\n    ",418],["T_DOC_COMMENT","\/** @var \\Drupal\\node\\NodeInterface $node *\/",419],["T_WHITESPACE","\n    ",419],["T_VARIABLE","$node",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$node_storage",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","load",420],"(",["T_VARIABLE","$node",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","id",420],"(",")",")",";",["T_WHITESPACE","\n    ",420],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","assertTrue",421],"(",["T_VARIABLE","$node",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getRevisionId",421],"(",")",["T_WHITESPACE"," ",421],">",["T_WHITESPACE"," ",421],["T_VARIABLE","$latest_revision_id",421],")",";",["T_WHITESPACE","\n    ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","assertEqual",422],"(",["T_VARIABLE","$node",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","label",422],"(",")",",",["T_WHITESPACE"," ",422],["T_VARIABLE","$default_translation_title",422],")",";",["T_WHITESPACE","\n    ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","assertEqual",423],"(",["T_VARIABLE","$node",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","getTranslation",423],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",423],")",["T_OBJECT_OPERATOR","->",423],["T_STRING","label",423],"(",")",",",["T_WHITESPACE"," ",423],["T_VARIABLE","$translated_title",423],")",";",["T_WHITESPACE","\n    ",423],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","assertEqual",424],"(",["T_VARIABLE","$node",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","untranslatable_string_field",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","value",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$untranslatable_string",424],")",";",["T_WHITESPACE","\n\n    ",424],["T_VARIABLE","$latest_revision_id",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_VARIABLE","$translation",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getRevisionId",426],"(",")",";",["T_WHITESPACE","\n\n    ",426],["T_COMMENT","\/\/ Now revert the entity revision to the initial one where the translation\n",428],["T_WHITESPACE","    ",429],["T_COMMENT","\/\/ didn't exist.\n",429],["T_WHITESPACE","    ",430],["T_VARIABLE","$revert_url",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","Url",430],["T_DOUBLE_COLON","::",430],["T_STRING","fromRoute",430],"(",["T_CONSTANT_ENCAPSED_STRING","'node.revision_revert_confirm'",430],",",["T_WHITESPACE"," ",430],"[",["T_WHITESPACE","\n      ",430],["T_CONSTANT_ENCAPSED_STRING","'node'",431],["T_WHITESPACE"," ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$node",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","id",431],"(",")",",",["T_WHITESPACE","\n      ",431],["T_CONSTANT_ENCAPSED_STRING","'node_revision'",432],["T_WHITESPACE"," ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$initial_revision_id",432],",",["T_WHITESPACE","\n    ",432],"]",")",";",["T_WHITESPACE","\n    ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","drupalPostForm",434],"(",["T_VARIABLE","$revert_url",434],",",["T_WHITESPACE"," ",434],"[","]",",",["T_WHITESPACE"," ",434],["T_STRING","t",434],"(",["T_CONSTANT_ENCAPSED_STRING","'Revert'",434],")",")",";",["T_WHITESPACE","\n    ",434],["T_VARIABLE","$node_storage",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","resetCache",435],"(",")",";",["T_WHITESPACE","\n    ",435],["T_DOC_COMMENT","\/** @var \\Drupal\\node\\NodeInterface $node *\/",436],["T_WHITESPACE","\n    ",436],["T_VARIABLE","$node",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$node_storage",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","load",437],"(",["T_VARIABLE","$node",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","id",437],"(",")",")",";",["T_WHITESPACE","\n    ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","assertTrue",438],"(",["T_VARIABLE","$node",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getRevisionId",438],"(",")",["T_WHITESPACE"," ",438],">",["T_WHITESPACE"," ",438],["T_VARIABLE","$latest_revision_id",438],")",";",["T_WHITESPACE","\n    ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","assertEqual",439],"(",["T_VARIABLE","$node",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","label",439],"(",")",",",["T_WHITESPACE"," ",439],["T_VARIABLE","$initial_title",439],")",";",["T_WHITESPACE","\n    ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","assertFalse",440],"(",["T_VARIABLE","$node",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","hasTranslation",440],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",440],")",")",";",["T_WHITESPACE","\n  ",440],"}",["T_WHITESPACE","\n\n  ",441],["T_DOC_COMMENT","\/**\n   * Creates a series of revisions for the specified node.\n   *\n   * @param \\Drupal\\node\\NodeInterface $node\n   *   The node object.\n   * @param $count\n   *   The number of revisions to be created.\n   *\/",443],["T_WHITESPACE","\n  ",450],["T_PROTECTED","protected",451],["T_WHITESPACE"," ",451],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","createRevisions",451],"(",["T_STRING","NodeInterface",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$node",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$count",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n    ",451],["T_FOR","for",452],["T_WHITESPACE"," ",452],"(",["T_VARIABLE","$i",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_LNUMBER","0",452],";",["T_WHITESPACE"," ",452],["T_VARIABLE","$i",452],["T_WHITESPACE"," ",452],"<",["T_WHITESPACE"," ",452],["T_VARIABLE","$count",452],";",["T_WHITESPACE"," ",452],["T_VARIABLE","$i",452],["T_INC","++",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n      ",452],["T_VARIABLE","$node",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","title",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","randomString",453],"(",")",";",["T_WHITESPACE","\n      ",453],["T_VARIABLE","$node",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","untranslatable_string_field",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","value",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","randomString",454],"(",")",";",["T_WHITESPACE","\n      ",454],["T_VARIABLE","$node",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","setNewRevision",455],"(",["T_STRING","TRUE",455],")",";",["T_WHITESPACE","\n      ",455],["T_VARIABLE","$node",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","save",456],"(",")",";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n  ",457],"}",["T_WHITESPACE","\n\n",458],"}",["T_WHITESPACE","\n",460]]
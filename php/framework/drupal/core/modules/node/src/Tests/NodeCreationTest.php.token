[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","node",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LanguageInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","node",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Node",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Create a node and test saving it.\n *\n * @group node\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","NodeCreationTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","NodeTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * Enable dummy module that implements hook_ENTITY_TYPE_insert() for\n   * exceptions (function node_test_exception_node_insert() ).\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'node_test_exception'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'dblog'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'test_page_test'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setUp",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_STRING","parent",27],["T_DOUBLE_COLON","::",27],["T_STRING","setUp",27],"(",")",";",["T_WHITESPACE","\n\n    ",27],["T_VARIABLE","$web_user",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","drupalCreateUser",29],"(",["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'create page content'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'edit own page content'",29],")",")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","drupalLogin",30],"(",["T_VARIABLE","$web_user",30],")",";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Creates a \"Basic page\" node and verifies its consistency in the database.\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","testNodeCreation",36],"(",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$node_type_storage",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Drupal",37],["T_DOUBLE_COLON","::",37],["T_STRING","entityManager",37],"(",")",["T_OBJECT_OPERATOR","->",37],["T_STRING","getStorage",37],"(",["T_CONSTANT_ENCAPSED_STRING","'node_type'",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Test \/node\/add page with only one content type.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$node_type_storage",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","load",40],"(",["T_CONSTANT_ENCAPSED_STRING","'article'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","delete",40],"(",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","drupalGet",41],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add'",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertResponse",42],"(",["T_LNUMBER","200",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertUrl",43],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/page'",43],")",";",["T_WHITESPACE","\n    ",43],["T_COMMENT","\/\/ Create a node.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$edit",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$edit",46],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",46],"]",["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","randomMachineName",46],"(",["T_LNUMBER","8",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$edit",47],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",47],"]",["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","randomMachineName",47],"(",["T_LNUMBER","16",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","drupalPostForm",48],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/page'",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$edit",48],",",["T_WHITESPACE"," ",48],["T_STRING","t",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",48],")",")",";",["T_WHITESPACE","\n\n    ",48],["T_COMMENT","\/\/ Check that the Basic page has been created.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertText",51],"(",["T_STRING","t",51],"(",["T_CONSTANT_ENCAPSED_STRING","'@post @title has been created.'",51],",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'@post'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'@title'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$edit",51],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",51],"]",")",")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Basic page created.'",51],")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Verify that the creation message contains a link to a node.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$view_link",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","xpath",54],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[@class=\"messages\"]\/\/a[contains(@href, :href)]'",54],",",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","':href'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'node\/'",54],")",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assert",55],"(",["T_ISSET","isset",55],"(",["T_VARIABLE","$view_link",55],")",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'The message area contains a link to a node'",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_COMMENT","\/\/ Check that the node exists in the database.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$node",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","drupalGetNodeByTitle",58],"(",["T_VARIABLE","$edit",58],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",58],"]",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertTrue",59],"(",["T_VARIABLE","$node",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'Node found in database.'",59],")",";",["T_WHITESPACE","\n\n    ",59],["T_COMMENT","\/\/ Verify that pages do not show submitted information by default.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","drupalGet",62],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_VARIABLE","$node",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","id",62],"(",")",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertNoText",63],"(",["T_VARIABLE","$node",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getOwner",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getUsername",63],"(",")",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertNoText",64],"(",["T_STRING","format_date",64],"(",["T_VARIABLE","$node",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getCreatedTime",64],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Change the node type setting to show submitted by information.\n",66],["T_WHITESPACE","    ",67],["T_DOC_COMMENT","\/** @var \\Drupal\\node\\NodeTypeInterface $node_type *\/",67],["T_WHITESPACE","\n    ",67],["T_VARIABLE","$node_type",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$node_type_storage",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","load",68],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$node_type",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setDisplaySubmitted",69],"(",["T_STRING","TRUE",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$node_type",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","save",70],"(",")",";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","drupalGet",72],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$node",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","id",72],"(",")",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertText",73],"(",["T_VARIABLE","$node",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getOwner",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","getUsername",73],"(",")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertText",74],"(",["T_STRING","format_date",74],"(",["T_VARIABLE","$node",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getCreatedTime",74],"(",")",")",")",";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * Verifies that a transaction rolls back the failed creation.\n   *\/",77],["T_WHITESPACE","\n  ",79],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","testFailedPageCreation",80],"(",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_COMMENT","\/\/ Create a node.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$edit",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'uid'",83],["T_WHITESPACE","      ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","loggedInUser",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","id",83],"(",")",",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'name'",84],["T_WHITESPACE","     ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","loggedInUser",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","name",84],",",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'type'",85],["T_WHITESPACE","     ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'page'",85],",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'langcode'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_STRING","LanguageInterface",86],["T_DOUBLE_COLON","::",86],["T_STRING","LANGCODE_NOT_SPECIFIED",86],",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'title'",87],["T_WHITESPACE","    ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'testing_transaction_exception'",87],",",["T_WHITESPACE","\n    ",87],")",";",["T_WHITESPACE","\n\n    ",88],["T_TRY","try",90],["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n      ",90],["T_COMMENT","\/\/ An exception is generated by node_test_exception_node_insert() if the\n",91],["T_WHITESPACE","      ",92],["T_COMMENT","\/\/ title is 'testing_transaction_exception'.\n",92],["T_WHITESPACE","      ",93],["T_STRING","Node",93],["T_DOUBLE_COLON","::",93],["T_STRING","create",93],"(",["T_VARIABLE","$edit",93],")",["T_OBJECT_OPERATOR","->",93],["T_STRING","save",93],"(",")",";",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","fail",94],"(",["T_STRING","t",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected exception has not been thrown.'",94],")",")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n    ",95],["T_CATCH","catch",96],["T_WHITESPACE"," ",96],"(",["T_NS_SEPARATOR","\\",96],["T_STRING","Exception",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$e",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","pass",97],"(",["T_STRING","t",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected exception has been thrown.'",97],")",")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_STRING","Database",100],["T_DOUBLE_COLON","::",100],["T_STRING","getConnection",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","supportsTransactions",100],"(",")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n      ",100],["T_COMMENT","\/\/ Check that the node does not exist in the database.\n",101],["T_WHITESPACE","      ",102],["T_VARIABLE","$node",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","drupalGetNodeByTitle",102],"(",["T_VARIABLE","$edit",102],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",102],"]",")",";",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertFalse",103],"(",["T_VARIABLE","$node",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'Transactions supported, and node not found in database.'",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n    ",104],["T_ELSE","else",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_COMMENT","\/\/ Check that the node exists in the database.\n",106],["T_WHITESPACE","      ",107],["T_VARIABLE","$node",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","drupalGetNodeByTitle",107],"(",["T_VARIABLE","$edit",107],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",107],"]",")",";",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertTrue",108],"(",["T_VARIABLE","$node",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'Transactions not supported, and node found in database.'",108],")",";",["T_WHITESPACE","\n\n      ",108],["T_COMMENT","\/\/ Check that the failed rollback was logged.\n",110],["T_WHITESPACE","      ",111],["T_VARIABLE","$records",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STATIC","static",111],["T_DOUBLE_COLON","::",111],["T_STRING","getWatchdogIdsForFailedExplicitRollback",111],"(",")",";",["T_WHITESPACE","\n      ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertTrue",112],"(",["T_STRING","count",112],"(",["T_VARIABLE","$records",112],")",["T_WHITESPACE"," ",112],">",["T_WHITESPACE"," ",112],["T_LNUMBER","0",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'Transactions not supported, and rollback error logged to watchdog.'",112],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_COMMENT","\/\/ Check that the rollback error was logged.\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$records",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STATIC","static",116],["T_DOUBLE_COLON","::",116],["T_STRING","getWatchdogIdsForTestExceptionRollback",116],"(",")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertTrue",117],"(",["T_STRING","count",117],"(",["T_VARIABLE","$records",117],")",["T_WHITESPACE"," ",117],">",["T_WHITESPACE"," ",117],["T_LNUMBER","0",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'Rollback explanatory error logged to watchdog.'",117],")",";",["T_WHITESPACE","\n  ",117],"}",["T_WHITESPACE","\n\n  ",118],["T_DOC_COMMENT","\/**\n   * Creates an unpublished node and confirms correct redirect behavior.\n   *\/",120],["T_WHITESPACE","\n  ",122],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","testUnpublishedNodeCreation",123],"(",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n    ",123],["T_COMMENT","\/\/ Set the front page to the test page.\n",124],["T_WHITESPACE","    ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","config",125],"(",["T_CONSTANT_ENCAPSED_STRING","'system.site'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","set",125],"(",["T_CONSTANT_ENCAPSED_STRING","'page.front'",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'\/test-page'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","save",125],"(",")",";",["T_WHITESPACE","\n\n    ",125],["T_COMMENT","\/\/ Set \"Basic page\" content type to be unpublished by default.\n",127],["T_WHITESPACE","    ",128],["T_VARIABLE","$fields",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Drupal",128],["T_DOUBLE_COLON","::",128],["T_STRING","entityManager",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getFieldDefinitions",128],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'page'",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$fields",129],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",129],"]",["T_OBJECT_OPERATOR","->",129],["T_STRING","getConfig",129],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",129],")",["T_WHITESPACE","\n      ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","setDefaultValue",130],"(",["T_STRING","FALSE",130],")",["T_WHITESPACE","\n      ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","save",131],"(",")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Create a node.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$edit",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_ARRAY","array",134],"(",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$edit",135],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","randomMachineName",135],"(",["T_LNUMBER","8",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$edit",136],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",136],"]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","randomMachineName",136],"(",["T_LNUMBER","16",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","drupalPostForm",137],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/page'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$edit",137],",",["T_WHITESPACE"," ",137],["T_STRING","t",137],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",137],")",")",";",["T_WHITESPACE","\n\n    ",137],["T_COMMENT","\/\/ Check that the user was redirected to the home page.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertUrl",140],"(",["T_CONSTANT_ENCAPSED_STRING","''",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertText",141],"(",["T_STRING","t",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Test page text'",141],")",")",";",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Confirm that the node was created.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertText",144],"(",["T_STRING","t",144],"(",["T_CONSTANT_ENCAPSED_STRING","'@post @title has been created.'",144],",",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",["T_CONSTANT_ENCAPSED_STRING","'@post'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'@title'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$edit",144],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",144],"]",")",")",")",";",["T_WHITESPACE","\n\n    ",144],["T_COMMENT","\/\/ Verify that the creation message contains a link to a node.\n",146],["T_WHITESPACE","    ",147],["T_VARIABLE","$view_link",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","xpath",147],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[@class=\"messages\"]\/\/a[contains(@href, :href)]'",147],",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_CONSTANT_ENCAPSED_STRING","':href'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'node\/'",147],")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assert",148],"(",["T_ISSET","isset",148],"(",["T_VARIABLE","$view_link",148],")",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'The message area contains a link to a node'",148],")",";",["T_WHITESPACE","\n  ",148],"}",["T_WHITESPACE","\n\n  ",149],["T_DOC_COMMENT","\/**\n   * Tests the author autocompletion textfield.\n   *\/",151],["T_WHITESPACE","\n  ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","testAuthorAutocomplete",154],"(",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$admin_user",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","drupalCreateUser",155],"(",["T_ARRAY","array",155],"(",["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",155],",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'create page content'",155],")",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","drupalLogin",156],"(",["T_VARIABLE","$admin_user",156],")",";",["T_WHITESPACE","\n\n    ",156],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","drupalGet",158],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/page'",158],")",";",["T_WHITESPACE","\n\n    ",158],["T_VARIABLE","$result",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","xpath",160],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@id=\"edit-uid-0-value\" and contains(@data-autocomplete-path, \"user\/autocomplete\")]'",160],")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertEqual",161],"(",["T_STRING","count",161],"(",["T_VARIABLE","$result",161],")",",",["T_WHITESPACE"," ",161],["T_LNUMBER","0",161],",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'No autocompletion without access user profiles.'",161],")",";",["T_WHITESPACE","\n\n    ",161],["T_VARIABLE","$admin_user",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","drupalCreateUser",163],"(",["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'create page content'",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'access user profiles'",163],")",")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","drupalLogin",164],"(",["T_VARIABLE","$admin_user",164],")",";",["T_WHITESPACE","\n\n    ",164],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","drupalGet",166],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/page'",166],")",";",["T_WHITESPACE","\n\n    ",166],["T_VARIABLE","$result",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","xpath",168],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@id=\"edit-uid-0-target-id\" and contains(@data-autocomplete-path, \"\/entity_reference_autocomplete\/user\/default\")]'",168],")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertEqual",169],"(",["T_STRING","count",169],"(",["T_VARIABLE","$result",169],")",",",["T_WHITESPACE"," ",169],["T_LNUMBER","1",169],",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'Ensure that the user does have access to the autocompletion'",169],")",";",["T_WHITESPACE","\n  ",169],"}",["T_WHITESPACE","\n\n  ",170],["T_DOC_COMMENT","\/**\n   * Check node\/add when no node types exist.\n   *\/",172],["T_WHITESPACE","\n  ",174],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","testNodeAddWithoutContentTypes",175],"(",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","drupalGet",176],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add'",176],")",";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","assertResponse",177],"(",["T_LNUMBER","200",177],")",";",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","assertNoLinkByHref",178],"(",["T_CONSTANT_ENCAPSED_STRING","'\/admin\/structure\/types\/add'",178],")",";",["T_WHITESPACE","\n\n    ",178],["T_COMMENT","\/\/ Test \/node\/add page without content types.\n",180],["T_WHITESPACE","    ",181],["T_FOREACH","foreach",181],["T_WHITESPACE"," ",181],"(",["T_NS_SEPARATOR","\\",181],["T_STRING","Drupal",181],["T_DOUBLE_COLON","::",181],["T_STRING","entityManager",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","getStorage",181],"(",["T_CONSTANT_ENCAPSED_STRING","'node_type'",181],")",["T_OBJECT_OPERATOR","->",181],["T_STRING","loadMultiple",181],"(",")",["T_WHITESPACE"," ",181],["T_AS","as",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$entity",181],["T_WHITESPACE"," ",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n      ",181],["T_VARIABLE","$entity",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","delete",182],"(",")",";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","drupalGet",185],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add'",185],")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertResponse",186],"(",["T_LNUMBER","403",186],")",";",["T_WHITESPACE","\n\n    ",186],["T_VARIABLE","$admin_content_types",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","drupalCreateUser",188],"(",["T_ARRAY","array",188],"(",["T_CONSTANT_ENCAPSED_STRING","'administer content types'",188],")",")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","drupalLogin",189],"(",["T_VARIABLE","$admin_content_types",189],")",";",["T_WHITESPACE","\n\n    ",189],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","drupalGet",191],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add'",191],")",";",["T_WHITESPACE","\n\n    ",191],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertLinkByHref",193],"(",["T_CONSTANT_ENCAPSED_STRING","'\/admin\/structure\/types\/add'",193],")",";",["T_WHITESPACE","\n  ",193],"}",["T_WHITESPACE","\n\n  ",194],["T_DOC_COMMENT","\/**\n   * Gets the watchdog IDs of the records with the rollback exception message.\n   *\n   * @return int[]\n   *   Array containing the IDs of the log records with the rollback exception\n   *   message.\n   *\/",196],["T_WHITESPACE","\n  ",202],["T_PROTECTED","protected",203],["T_WHITESPACE"," ",203],["T_STATIC","static",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","getWatchdogIdsForTestExceptionRollback",203],"(",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n    ",203],["T_COMMENT","\/\/ PostgreSQL doesn't support bytea LIKE queries, so we need to unserialize\n",204],["T_WHITESPACE","    ",205],["T_COMMENT","\/\/ first to check for the rollback exception message.\n",205],["T_WHITESPACE","    ",206],["T_VARIABLE","$matches",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_ARRAY","array",206],"(",")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$query",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","db_query",207],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT wid, variables FROM {watchdog}\"",207],")",";",["T_WHITESPACE","\n    ",207],["T_FOREACH","foreach",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$query",208],["T_WHITESPACE"," ",208],["T_AS","as",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$row",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n      ",208],["T_VARIABLE","$variables",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_ARRAY_CAST","(array)",209],["T_WHITESPACE"," ",209],["T_STRING","unserialize",209],"(",["T_VARIABLE","$row",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","variables",209],")",";",["T_WHITESPACE","\n      ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_ISSET","isset",210],"(",["T_VARIABLE","$variables",210],"[",["T_CONSTANT_ENCAPSED_STRING","'@message'",210],"]",")",["T_WHITESPACE"," ",210],["T_BOOLEAN_AND","&&",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$variables",210],"[",["T_CONSTANT_ENCAPSED_STRING","'@message'",210],"]",["T_WHITESPACE"," ",210],["T_IS_IDENTICAL","===",210],["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'Test exception for rollback.'",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$matches",211],"[","]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$row",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","wid",211],";",["T_WHITESPACE","\n      ",211],"}",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n    ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$matches",214],";",["T_WHITESPACE","\n  ",214],"}",["T_WHITESPACE","\n\n  ",215],["T_DOC_COMMENT","\/**\n   * Gets the log records with the explicit rollback failed exception message.\n   *\n   * @return \\Drupal\\Core\\Database\\StatementInterface\n   *   A prepared statement object (already executed), which contains the log\n   *   records with the explicit rollback failed exception message.\n   *\/",217],["T_WHITESPACE","\n  ",223],["T_PROTECTED","protected",224],["T_WHITESPACE"," ",224],["T_STATIC","static",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getWatchdogIdsForFailedExplicitRollback",224],"(",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n    ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_STRING","db_query",225],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT wid FROM {watchdog} WHERE message LIKE 'Explicit rollback failed%'\"",225],")",["T_OBJECT_OPERATOR","->",225],["T_STRING","fetchAll",225],"(",")",";",["T_WHITESPACE","\n  ",225],"}",["T_WHITESPACE","\n\n",226],"}",["T_WHITESPACE","\n",228]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","locale",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Gettext",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PoHeader",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Gettext",6],["T_NS_SEPARATOR","\\",6],["T_STRING","PoItem",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Gettext",7],["T_NS_SEPARATOR","\\",7],["T_STRING","PoReaderInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Gettext PO reader working with the locale module database.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","PoDatabaseReader",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","PoReaderInterface",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * An associative array indicating which type of strings should be read.\n   *\n   * Elements of the array:\n   *  - not_customized: boolean indicating if not customized strings should be\n   *    read.\n   *  - customized: boolean indicating if customized strings should be read.\n   *  - no_translated: boolean indicating if non-translated should be read.\n   *\n   * The three options define three distinct sets of strings, which combined\n   * cover all strings.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$options",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Language code of the language being read from the database.\n   *\n   * @var string\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$langcode",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Store the result of the query so it can be iterated later.\n   *\n   * @var resource\n   *\/",37],["T_WHITESPACE","\n  ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$result",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Constructor, initializes with default options.\n   *\/",44],["T_WHITESPACE","\n  ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","__construct",47],"(",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setOptions",48],"(",["T_ARRAY","array",48],"(",")",")",";",["T_WHITESPACE","\n  ",48],"}",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",51],["T_WHITESPACE","\n  ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","getLangcode",54],"(",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n    ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","langcode",55],";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","setLangcode",61],"(",["T_VARIABLE","$langcode",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","langcode",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$langcode",62],";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Get the options used by the reader.\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","getOptions",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","options",69],";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * Set the options for the current reader.\n   *\/",72],["T_WHITESPACE","\n  ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","setOptions",75],"(",["T_ARRAY","array",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$options",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$options",76],["T_WHITESPACE"," ",76],["T_PLUS_EQUAL","+=",76],["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'customized'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_STRING","FALSE",77],",",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'not_customized'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_STRING","FALSE",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'not_translated'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_STRING","FALSE",79],",",["T_WHITESPACE","\n    ",79],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","options",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$options",81],";",["T_WHITESPACE","\n  ",81],"}",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",84],["T_WHITESPACE","\n  ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getHeader",87],"(",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n    ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_STRING","PoHeader",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getLangcode",88],"(",")",")",";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * Implements Drupal\\Component\\Gettext\\PoMetadataInterface::setHeader().\n   *\n   * @throws Exception\n   *   Always, because you cannot set the PO header of a reader.\n   *\/",91],["T_WHITESPACE","\n  ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","setHeader",97],"(",["T_STRING","PoHeader",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$header",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_THROW","throw",98],["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Exception",98],"(",["T_CONSTANT_ENCAPSED_STRING","'You cannot set the PO header in a reader.'",98],")",";",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n\n  ",99],["T_DOC_COMMENT","\/**\n   * Builds and executes a database query based on options set earlier.\n   *\/",101],["T_WHITESPACE","\n  ",103],["T_PRIVATE","private",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","loadStrings",104],"(",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$langcode",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","langcode",105],";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$options",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","options",106],";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$conditions",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",";",["T_WHITESPACE","\n\n    ",107],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_STRING","array_sum",109],"(",["T_VARIABLE","$options",109],")",["T_WHITESPACE"," ",109],["T_IS_EQUAL","==",109],["T_WHITESPACE"," ",109],["T_LNUMBER","0",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n      ",109],["T_COMMENT","\/\/ If user asked to not include anything in the translation files,\n",110],["T_WHITESPACE","      ",111],["T_COMMENT","\/\/ that would not make sense, so just fall back on providing a template.\n",111],["T_WHITESPACE","      ",112],["T_VARIABLE","$langcode",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","NULL",112],";",["T_WHITESPACE","\n      ",112],["T_COMMENT","\/\/ Force option to get both translated and untranslated strings.\n",113],["T_WHITESPACE","      ",114],["T_VARIABLE","$options",114],"[",["T_CONSTANT_ENCAPSED_STRING","'not_translated'",114],"]",["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","TRUE",114],";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n    ",115],["T_COMMENT","\/\/ Build and execute query to collect source strings and translations.\n",116],["T_WHITESPACE","    ",117],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_EMPTY","empty",117],"(",["T_VARIABLE","$langcode",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n      ",117],["T_VARIABLE","$conditions",118],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",118],"]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$langcode",118],";",["T_WHITESPACE","\n      ",118],["T_COMMENT","\/\/ Translate some options into field conditions.\n",119],["T_WHITESPACE","      ",120],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$options",120],"[",["T_CONSTANT_ENCAPSED_STRING","'customized'",120],"]",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(","!",["T_VARIABLE","$options",121],"[",["T_CONSTANT_ENCAPSED_STRING","'not_customized'",121],"]",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n          ",121],["T_COMMENT","\/\/ Filter for customized strings only.\n",122],["T_WHITESPACE","          ",123],["T_VARIABLE","$conditions",123],"[",["T_CONSTANT_ENCAPSED_STRING","'customized'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","LOCALE_CUSTOMIZED",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        ",124],["T_COMMENT","\/\/ Else no filtering needed in this case.\n",125],["T_WHITESPACE","      ",126],"}",["T_WHITESPACE","\n      ",126],["T_ELSE","else",127],["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$options",128],"[",["T_CONSTANT_ENCAPSED_STRING","'not_customized'",128],"]",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n          ",128],["T_COMMENT","\/\/ Filter for non-customized strings only.\n",129],["T_WHITESPACE","          ",130],["T_VARIABLE","$conditions",130],"[",["T_CONSTANT_ENCAPSED_STRING","'customized'",130],"]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","LOCALE_NOT_CUSTOMIZED",130],";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_ELSE","else",132],["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n          ",132],["T_COMMENT","\/\/ Filter for strings without translation.\n",133],["T_WHITESPACE","          ",134],["T_VARIABLE","$conditions",134],"[",["T_CONSTANT_ENCAPSED_STRING","'translated'",134],"]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","FALSE",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n      ",135],"}",["T_WHITESPACE","\n      ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_VARIABLE","$options",137],"[",["T_CONSTANT_ENCAPSED_STRING","'not_translated'",137],"]",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n        ",137],["T_COMMENT","\/\/ Filter for string with translation.\n",138],["T_WHITESPACE","        ",139],["T_VARIABLE","$conditions",139],"[",["T_CONSTANT_ENCAPSED_STRING","'translated'",139],"]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","TRUE",139],";",["T_WHITESPACE","\n      ",139],"}",["T_WHITESPACE","\n      ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Drupal",141],["T_DOUBLE_COLON","::",141],["T_STRING","service",141],"(",["T_CONSTANT_ENCAPSED_STRING","'locale.storage'",141],")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getTranslations",141],"(",["T_VARIABLE","$conditions",141],")",";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n    ",142],["T_ELSE","else",143],["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n      ",143],["T_COMMENT","\/\/ If no language, we don't need any of the target fields.\n",144],["T_WHITESPACE","      ",145],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Drupal",145],["T_DOUBLE_COLON","::",145],["T_STRING","service",145],"(",["T_CONSTANT_ENCAPSED_STRING","'locale.storage'",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","getStrings",145],"(",["T_VARIABLE","$conditions",145],")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n  ",146],"}",["T_WHITESPACE","\n\n  ",147],["T_DOC_COMMENT","\/**\n   * Get the database result resource for the given language and options.\n   *\/",149],["T_WHITESPACE","\n  ",151],["T_PRIVATE","private",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","readString",152],"(",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n    ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(","!",["T_ISSET","isset",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","result",153],")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","result",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","loadStrings",154],"(",")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n    ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_STRING","array_shift",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","result",156],")",";",["T_WHITESPACE","\n  ",156],"}",["T_WHITESPACE","\n\n  ",157],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",159],["T_WHITESPACE","\n  ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","readItem",162],"(",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n    ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$string",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","readString",163],"(",")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n      ",163],["T_VARIABLE","$values",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_ARRAY_CAST","(array)",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$string",164],";",["T_WHITESPACE","\n      ",164],["T_VARIABLE","$po_item",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_NEW","new",165],["T_WHITESPACE"," ",165],["T_STRING","PoItem",165],"(",")",";",["T_WHITESPACE","\n      ",165],["T_VARIABLE","$po_item",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","setFromArray",166],"(",["T_VARIABLE","$values",166],")",";",["T_WHITESPACE","\n      ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$po_item",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n  ",168],"}",["T_WHITESPACE","\n\n",169],"}",["T_WHITESPACE","\n",171]]
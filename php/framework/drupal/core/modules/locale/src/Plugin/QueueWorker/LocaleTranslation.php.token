[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","locale",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","QueueWorker",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Extension",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ModuleHandlerInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ContainerFactoryPluginInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Queue",7],["T_NS_SEPARATOR","\\",7],["T_STRING","QueueInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Queue",8],["T_NS_SEPARATOR","\\",8],["T_STRING","QueueWorkerBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DependencyInjection",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ContainerInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Executes interface translation queue tasks.\n *\n * @QueueWorker(\n *   id = \"locale_translation\",\n *   title = @Translation(\"Update translations\"),\n *   cron = {\"time\" = 30}\n * )\n *\/",11],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","LocaleTranslation",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","QueueWorkerBase",20],["T_WHITESPACE"," ",20],["T_IMPLEMENTS","implements",20],["T_WHITESPACE"," ",20],["T_STRING","ContainerFactoryPluginInterface",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The module handler.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$moduleHandler",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The queue object.\n   *\n   * @var \\Drupal\\Core\\Queue\\QueueInterface\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$queue",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Constructs a new LocaleTranslation object.\n   *\n   * @param array $configuration\n   *   A configuration array containing information about the plugin instance.\n   * @param string $plugin_id\n   *   The plugin_id for the plugin instance.\n   * @param array $plugin_definition\n   *   The plugin implementation definition.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler.\n   * @param \\Drupal\\Core\\Queue\\QueueInterface $queue\n   *   The queue object.\n   *\/",36],["T_WHITESPACE","\n  ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","__construct",50],"(",["T_ARRAY","array",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$configuration",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$plugin_id",50],",",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$plugin_definition",50],",",["T_WHITESPACE"," ",50],["T_STRING","ModuleHandlerInterface",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$module_handler",50],",",["T_WHITESPACE"," ",50],["T_STRING","QueueInterface",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$queue",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n    ",50],["T_STRING","parent",51],["T_DOUBLE_COLON","::",51],["T_STRING","__construct",51],"(",["T_VARIABLE","$configuration",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$plugin_id",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$plugin_definition",51],")",";",["T_WHITESPACE","\n\n    ",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","moduleHandler",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$module_handler",53],";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","queue",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$queue",54],";",["T_WHITESPACE","\n  ",54],"}",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",57],["T_WHITESPACE","\n  ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_STATIC","static",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","create",60],"(",["T_STRING","ContainerInterface",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$container",60],",",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$configuration",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$plugin_id",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$plugin_definition",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_NEW","new",61],["T_WHITESPACE"," ",61],["T_STATIC","static",61],"(",["T_WHITESPACE","\n      ",61],["T_VARIABLE","$configuration",62],",",["T_WHITESPACE","\n      ",62],["T_VARIABLE","$plugin_id",63],",",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$plugin_definition",64],",",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$container",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",65],")",",",["T_WHITESPACE","\n      ",65],["T_VARIABLE","$container",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","get",66],"(",["T_CONSTANT_ENCAPSED_STRING","'queue'",66],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","get",66],"(",["T_CONSTANT_ENCAPSED_STRING","'locale_translation'",66],",",["T_WHITESPACE"," ",66],["T_STRING","TRUE",66],")",["T_WHITESPACE","\n    ",66],")",";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * The translation update functions executed here are batch operations which\n   * are also used in translation update batches. The batch functions may need\n   * to be executed multiple times to complete their task, typically this is the\n   * translation import function. When a batch function is not finished, a new\n   * queue task is created and added to the end of the queue. The batch context\n   * data is needed to continue the batch task is stored in the queue with the\n   * queue data.\n   *\/",70],["T_WHITESPACE","\n  ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","processItem",81],"(",["T_VARIABLE","$data",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","moduleHandler",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","loadInclude",82],"(",["T_CONSTANT_ENCAPSED_STRING","'locale'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'batch.inc'",82],")",";",["T_WHITESPACE","\n    ",82],["T_LIST","list",83],"(",["T_VARIABLE","$function",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$args",83],")",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$data",83],";",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ We execute batch operation functions here to check, download and import\n",85],["T_WHITESPACE","    ",86],["T_COMMENT","\/\/ the translation files. Batch functions use a context variable as last\n",86],["T_WHITESPACE","    ",87],["T_COMMENT","\/\/ argument which is passed by reference. When a batch operation is called\n",87],["T_WHITESPACE","    ",88],["T_COMMENT","\/\/ for the first time a default batch context is created. When called\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ iterative (usually the batch import function) the batch context is passed\n",89],["T_WHITESPACE","    ",90],["T_COMMENT","\/\/ through via the queue and is part of the $data.\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$last",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","count",91],"(",["T_VARIABLE","$args",91],")",["T_WHITESPACE"," ",91],"-",["T_WHITESPACE"," ",91],["T_LNUMBER","1",91],";",["T_WHITESPACE","\n    ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(","!",["T_STRING","is_array",92],"(",["T_VARIABLE","$args",92],"[",["T_VARIABLE","$last",92],"]",")",["T_WHITESPACE"," ",92],["T_BOOLEAN_OR","||",92],["T_WHITESPACE"," ",92],"!",["T_ISSET","isset",92],"(",["T_VARIABLE","$args",92],"[",["T_VARIABLE","$last",92],"]","[",["T_CONSTANT_ENCAPSED_STRING","'finished'",92],"]",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$batch_context",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],"[",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'sandbox'",94],["T_WHITESPACE","  ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],"[","]",",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'results'",95],["T_WHITESPACE","  ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],"[","]",",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'finished'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_LNUMBER","1",96],",",["T_WHITESPACE","\n        ",96],["T_CONSTANT_ENCAPSED_STRING","'message'",97],["T_WHITESPACE","  ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","''",97],",",["T_WHITESPACE","\n      ",97],"]",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n    ",99],["T_ELSE","else",100],["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n      ",100],["T_VARIABLE","$batch_context",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$args",101],"[",["T_VARIABLE","$last",101],"]",";",["T_WHITESPACE","\n      ",101],["T_UNSET","unset",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$args",102],"[",["T_VARIABLE","$last",102],"]",")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$args",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","array_merge",104],"(",["T_VARIABLE","$args",104],",",["T_WHITESPACE"," ",104],"[","&",["T_VARIABLE","$batch_context",104],"]",")",";",["T_WHITESPACE","\n\n    ",104],["T_COMMENT","\/\/ Call the batch operation function.\n",106],["T_WHITESPACE","    ",107],["T_STRING","call_user_func_array",107],"(",["T_VARIABLE","$function",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$args",107],")",";",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ If the batch operation is not finished we create a new queue task to\n",109],["T_WHITESPACE","    ",110],["T_COMMENT","\/\/ continue the task. This is typically the translation import task.\n",110],["T_WHITESPACE","    ",111],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$batch_context",111],"[",["T_CONSTANT_ENCAPSED_STRING","'finished'",111],"]",["T_WHITESPACE"," ",111],"<",["T_WHITESPACE"," ",111],["T_LNUMBER","1",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n      ",111],["T_UNSET","unset",112],"(",["T_VARIABLE","$batch_context",112],"[",["T_CONSTANT_ENCAPSED_STRING","'strings'",112],"]",")",";",["T_WHITESPACE","\n      ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","queue",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","createItem",113],"(","[",["T_VARIABLE","$function",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$args",113],"]",")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n  ",114],"}",["T_WHITESPACE","\n\n",115],"}",["T_WHITESPACE","\n",117]]
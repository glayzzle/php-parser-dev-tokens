[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","locale",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests locale translation safe string handling.\n *\n * @group locale\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","LocaleStringIsSafeTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","KernelTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],"[",["T_CONSTANT_ENCAPSED_STRING","'locale'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'locale_test'",19],"]",";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Tests for locale_string_is_safe().\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","testLocaleStringIsSafe",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_COMMENT","\/\/ Check a translatable string without HTML.\n",25],["T_WHITESPACE","    ",26],["T_VARIABLE","$string",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'Hello world!'",26],";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$result",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","locale_string_is_safe",27],"(",["T_VARIABLE","$string",27],")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","assertTrue",28],"(",["T_VARIABLE","$result",28],")",";",["T_WHITESPACE","\n\n    ",28],["T_COMMENT","\/\/ Check a translatable string which includes trustable HTML.\n",30],["T_WHITESPACE","    ",31],["T_VARIABLE","$string",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'Hello <strong>world<\/strong>!'",31],";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$result",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","locale_string_is_safe",32],"(",["T_VARIABLE","$string",32],")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","assertTrue",33],"(",["T_VARIABLE","$result",33],")",";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Check an untranslatable string which includes untrustable HTML (according\n",35],["T_WHITESPACE","    ",36],["T_COMMENT","\/\/ to the locale_string_is_safe() function definition).\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$string",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'Hello <img src=\"world.png\" alt=\"world\" \/>!'",37],";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$result",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","locale_string_is_safe",38],"(",["T_VARIABLE","$string",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertFalse",39],"(",["T_VARIABLE","$result",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Check a translatable string which includes a token in an href attribute.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$string",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Hi <a href=\"[current-user:url]\">user<\/a>'",42],";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$result",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","locale_string_is_safe",43],"(",["T_VARIABLE","$string",43],")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","assertTrue",44],"(",["T_VARIABLE","$result",44],")",";",["T_WHITESPACE","\n  ",44],"}",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * Tests if a translated and tokenized string is properly escaped by Twig.\n   *\n   * In each assert* call we add a new line at the expected result to match the\n   * newline at the end of the template file.\n   *\/",47],["T_WHITESPACE","\n  ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testLocalizedTokenizedString",53],"(",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$tests_to_do",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[",["T_WHITESPACE","\n      ",54],["T_LNUMBER","1",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],"[",["T_WHITESPACE","\n        ",55],["T_CONSTANT_ENCAPSED_STRING","'original'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Go to the <a href=\"[locale_test:security_test1]\">frontpage<\/a>'",56],",",["T_WHITESPACE","\n        ",56],["T_CONSTANT_ENCAPSED_STRING","'replaced'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Go to the &lt;a href=&quot;javascript:alert(&amp;#039;Mooooh!&amp;#039;);&quot;&gt;frontpage&lt;\/a&gt;'",57],",",["T_WHITESPACE","\n      ",57],"]",",",["T_WHITESPACE","\n      ",58],["T_LNUMBER","2",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],"[",["T_WHITESPACE","\n        ",59],["T_CONSTANT_ENCAPSED_STRING","'original'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Hello <strong>[locale_test:security_test2]<\/strong>!'",60],",",["T_WHITESPACE","\n        ",60],["T_CONSTANT_ENCAPSED_STRING","'replaced'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'Hello &lt;strong&gt;&amp;lt;script&amp;gt;alert(&amp;#039;Mooooh!&amp;#039;);&amp;lt;\/script&amp;gt;&lt;\/strong&gt;!'",61],",",["T_WHITESPACE","\n      ",61],"]",",",["T_WHITESPACE","\n    ",62],"]",";",["T_WHITESPACE","\n\n    ",63],["T_FOREACH","foreach",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$tests_to_do",65],["T_WHITESPACE"," ",65],["T_AS","as",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$i",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$test",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n      ",65],["T_VARIABLE","$original_string",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$test",66],"[",["T_CONSTANT_ENCAPSED_STRING","'original'",66],"]",";",["T_WHITESPACE","\n      ",66],["T_VARIABLE","$rendered_original_string",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Drupal",67],["T_DOUBLE_COLON","::",67],["T_STRING","theme",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","render",67],"(",["T_CONSTANT_ENCAPSED_STRING","'locale_test_tokenized'",67],",",["T_WHITESPACE"," ",67],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$original_string",67],"]",")",";",["T_WHITESPACE","\n      ",67],["T_COMMENT","\/\/ Twig assumes that strings are unsafe so it escapes them, and so the\n",68],["T_WHITESPACE","      ",69],["T_COMMENT","\/\/ original and the rendered version should be different.\n",69],["T_WHITESPACE","      ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertNotEqual",70],"(",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$rendered_original_string",71],",",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$original_string",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",72],",",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'Security test '",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_VARIABLE","$i",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","' before translation'",73],["T_WHITESPACE","\n      ",73],")",";",["T_WHITESPACE","\n\n      ",74],["T_COMMENT","\/\/ Pass the original string to the t() function to get it marked as safe.\n",76],["T_WHITESPACE","      ",77],["T_VARIABLE","$safe_string",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","t",77],"(",["T_VARIABLE","$original_string",77],")",";",["T_WHITESPACE","\n      ",77],["T_VARIABLE","$rendered_safe_string",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Drupal",78],["T_DOUBLE_COLON","::",78],["T_STRING","theme",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","render",78],"(",["T_CONSTANT_ENCAPSED_STRING","'locale_test_tokenized'",78],",",["T_WHITESPACE"," ",78],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$safe_string",78],"]",")",";",["T_WHITESPACE","\n      ",78],["T_COMMENT","\/\/ t() function always marks the string as safe so it won't be escaped,\n",79],["T_WHITESPACE","      ",80],["T_COMMENT","\/\/ and should be the same as the original.\n",80],["T_WHITESPACE","      ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertEqual",81],"(",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$rendered_safe_string",82],",",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$original_string",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",83],",",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'Security test '",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$i",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","' after translation before token replacement'",84],["T_WHITESPACE","\n      ",84],")",";",["T_WHITESPACE","\n\n      ",85],["T_COMMENT","\/\/ Replace tokens in the safe string to inject it with dangerous content.\n",87],["T_WHITESPACE","      ",88],["T_COMMENT","\/\/ @see locale_test_tokens().\n",88],["T_WHITESPACE","      ",89],["T_VARIABLE","$unsafe_string",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Drupal",89],["T_DOUBLE_COLON","::",89],["T_STRING","token",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","replace",89],"(",["T_VARIABLE","$safe_string",89],")",";",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$rendered_unsafe_string",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Drupal",90],["T_DOUBLE_COLON","::",90],["T_STRING","theme",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","render",90],"(",["T_CONSTANT_ENCAPSED_STRING","'locale_test_tokenized'",90],",",["T_WHITESPACE"," ",90],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$unsafe_string",90],"]",")",";",["T_WHITESPACE","\n      ",90],["T_COMMENT","\/\/ Token replacement changes the string so it is not marked as safe\n",91],["T_WHITESPACE","      ",92],["T_COMMENT","\/\/ anymore. Check it is escaped the way we expect.\n",92],["T_WHITESPACE","      ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertEqual",93],"(",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$rendered_unsafe_string",94],",",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$test",95],"[",["T_CONSTANT_ENCAPSED_STRING","'replaced'",95],"]",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",95],",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'Security test '",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$i",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","' after translation  after token replacement'",96],["T_WHITESPACE","\n      ",96],")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n\n",99],"}",["T_WHITESPACE","\n",101]]
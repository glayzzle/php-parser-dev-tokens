[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","editor",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","editor",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Editor",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityKernelTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","node",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Node",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","node",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","NodeType",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","file",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","File",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","field",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FieldStorageConfig",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldStorageDefinitionInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","filter",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FilterFormat",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Tests tracking of file usage by the Text Editor module.\n *\n * @group editor\n *\/",14],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","EditorFileUsageTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","EntityKernelTestBase",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_STATIC","static",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$modules",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_ARRAY","array",26],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'editor_test'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'node'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'file'",26],")",";",["T_WHITESPACE","\n\n  ",26],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","setUp",28],"(",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_STRING","parent",29],["T_DOUBLE_COLON","::",29],["T_STRING","setUp",29],"(",")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","installEntitySchema",30],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","installSchema",31],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",31],",",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access'",31],")",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","installSchema",32],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",32],",",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_CONSTANT_ENCAPSED_STRING","'file_usage'",32],")",")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","installConfig",33],"(","[",["T_CONSTANT_ENCAPSED_STRING","'node'",33],"]",")",";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Add text formats.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$filtered_html_format",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","FilterFormat",36],["T_DOUBLE_COLON","::",36],["T_STRING","create",36],"(",["T_ARRAY","array",36],"(",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'format'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",37],",",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'name'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Filtered HTML'",38],",",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","'weight'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_LNUMBER","0",39],",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'filters'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",")",",",["T_WHITESPACE","\n    ",40],")",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$filtered_html_format",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","save",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Set cardinality for body field.\n",44],["T_WHITESPACE","    ",45],["T_STRING","FieldStorageConfig",45],["T_DOUBLE_COLON","::",45],["T_STRING","loadByName",45],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'body'",45],")",["T_WHITESPACE","\n      ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","setCardinality",46],"(",["T_STRING","FieldStorageDefinitionInterface",46],["T_DOUBLE_COLON","::",46],["T_STRING","CARDINALITY_UNLIMITED",46],")",["T_WHITESPACE","\n      ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","save",47],"(",")",";",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Set up text editor.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$editor",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","Editor",50],["T_DOUBLE_COLON","::",50],["T_STRING","create",50],"(","[",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'format'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",51],",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'editor'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",52],",",["T_WHITESPACE","\n    ",52],"]",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$editor",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","save",54],"(",")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Create a node type for testing.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$type",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","NodeType",57],["T_DOUBLE_COLON","::",57],["T_STRING","create",57],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'page'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'name'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'page'",57],"]",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$type",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","save",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_STRING","node_add_body_field",59],"(",["T_VARIABLE","$type",59],")",";",["T_WHITESPACE","\n  ",59],"}",["T_WHITESPACE","\n\n  ",60],["T_DOC_COMMENT","\/**\n   * Tests the configurable text editor manager.\n   *\/",62],["T_WHITESPACE","\n  ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","testEditorEntityHooks",65],"(",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$image_paths",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_WHITESPACE","\n      ",66],["T_LNUMBER","0",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/druplicon.png'",67],",",["T_WHITESPACE","\n      ",67],["T_LNUMBER","1",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/tree.png'",68],",",["T_WHITESPACE","\n      ",68],["T_LNUMBER","2",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/help.png'",69],",",["T_WHITESPACE","\n    ",69],")",";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$image_entities",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",")",";",["T_WHITESPACE","\n    ",72],["T_FOREACH","foreach",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$image_paths",73],["T_WHITESPACE"," ",73],["T_AS","as",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$key",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$image_path",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$image",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","File",74],["T_DOUBLE_COLON","::",74],["T_STRING","create",74],"(",")",";",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$image",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","setFileUri",75],"(",["T_VARIABLE","$image_path",75],")",";",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$image",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setFilename",76],"(",["T_STRING","drupal_basename",76],"(",["T_VARIABLE","$image",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getFileUri",76],"(",")",")",")",";",["T_WHITESPACE","\n      ",76],["T_VARIABLE","$image",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","save",77],"(",")",";",["T_WHITESPACE","\n\n      ",77],["T_VARIABLE","$file_usage",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","container",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","get",79],"(",["T_CONSTANT_ENCAPSED_STRING","'file.usage'",79],")",";",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertIdentical",80],"(",["T_ARRAY","array",80],"(",")",",",["T_WHITESPACE"," ",80],["T_VARIABLE","$file_usage",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","listUsage",80],"(",["T_VARIABLE","$image",80],")",",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'The image '",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_VARIABLE","$image_paths",80],"[",["T_VARIABLE","$key",80],"]",["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","' has zero usages.'",80],")",";",["T_WHITESPACE","\n\n      ",80],["T_VARIABLE","$image_entities",82],"[","]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$image",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_VARIABLE","$body",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",")",";",["T_WHITESPACE","\n    ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$image_entities",86],["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$key",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$image_entity",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_COMMENT","\/\/ Don't be rude, say hello.\n",87],["T_WHITESPACE","      ",88],["T_VARIABLE","$body_value",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'<p>Hello, world!<\/p>'",88],";",["T_WHITESPACE","\n      ",88],["T_COMMENT","\/\/ Test handling of a valid image entry.\n",89],["T_WHITESPACE","      ",90],["T_VARIABLE","$body_value",90],["T_WHITESPACE"," ",90],["T_CONCAT_EQUAL",".=",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"awesome-llama-'",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$key",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'.jpg\" data-entity-type=\"file\" data-entity-uuid=\"'",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$image_entity",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","uuid",90],"(",")",["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'\" \/>'",90],";",["T_WHITESPACE","\n      ",90],["T_COMMENT","\/\/ Test handling of an invalid data-entity-uuid attribute.\n",91],["T_WHITESPACE","      ",92],["T_VARIABLE","$body_value",92],["T_WHITESPACE"," ",92],["T_CONCAT_EQUAL",".=",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"awesome-llama-'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$key",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'.jpg\" data-entity-type=\"file\" data-entity-uuid=\"invalid-entity-uuid-value\" \/>'",92],";",["T_WHITESPACE","\n      ",92],["T_COMMENT","\/\/ Test handling of an invalid data-entity-type attribute.\n",93],["T_WHITESPACE","      ",94],["T_VARIABLE","$body_value",94],["T_WHITESPACE"," ",94],["T_CONCAT_EQUAL",".=",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"awesome-llama-'",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$key",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'.jpg\" data-entity-type=\"invalid-entity-type-value\" data-entity-uuid=\"'",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$image_entity",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","uuid",94],"(",")",["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'\" \/>'",94],";",["T_WHITESPACE","\n      ",94],["T_COMMENT","\/\/ Test handling of a non-existing UUID.\n",95],["T_WHITESPACE","      ",96],["T_VARIABLE","$body_value",96],["T_WHITESPACE"," ",96],["T_CONCAT_EQUAL",".=",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"awesome-llama-'",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$key",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'.jpg\" data-entity-type=\"file\" data-entity-uuid=\"30aac704-ba2c-40fc-b609-9ed121aa90f4\" \/>'",96],";",["T_WHITESPACE","\n\n      ",96],["T_VARIABLE","$body",98],"[","]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_WHITESPACE","\n        ",98],["T_CONSTANT_ENCAPSED_STRING","'value'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$body_value",99],",",["T_WHITESPACE","\n        ",99],["T_CONSTANT_ENCAPSED_STRING","'format'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",100],",",["T_WHITESPACE","\n      ",100],")",";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Test editor_entity_insert(): increment.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","createUser",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$node",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$node",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","Node",106],["T_DOUBLE_COLON","::",106],["T_STRING","create",106],"(","[",["T_WHITESPACE","\n      ",106],["T_CONSTANT_ENCAPSED_STRING","'type'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'page'",107],",",["T_WHITESPACE","\n      ",107],["T_CONSTANT_ENCAPSED_STRING","'title'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'test'",108],",",["T_WHITESPACE","\n      ",108],["T_CONSTANT_ENCAPSED_STRING","'body'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$body",109],",",["T_WHITESPACE","\n      ",109],["T_CONSTANT_ENCAPSED_STRING","'uid'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_LNUMBER","1",110],",",["T_WHITESPACE","\n    ",110],"]",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$node",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","save",112],"(",")",";",["T_WHITESPACE","\n    ",112],["T_FOREACH","foreach",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$image_entities",113],["T_WHITESPACE"," ",113],["T_AS","as",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$key",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$image_entity",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n      ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertIdentical",114],"(",["T_ARRAY","array",114],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_LNUMBER","1",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'1'",114],")",")",")",",",["T_WHITESPACE"," ",114],["T_VARIABLE","$file_usage",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","listUsage",114],"(",["T_VARIABLE","$image_entity",114],")",",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'The image '",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$image_paths",114],"[",["T_VARIABLE","$key",114],"]",["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","' has 1 usage.'",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Test editor_entity_update(): increment, twice, by creating new revisions.\n",117],["T_WHITESPACE","    ",118],["T_VARIABLE","$node",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setNewRevision",118],"(",["T_STRING","TRUE",118],")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$node",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","save",119],"(",")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$second_revision_id",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$node",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getRevisionId",120],"(",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$node",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setNewRevision",121],"(",["T_STRING","TRUE",121],")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$node",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","save",122],"(",")",";",["T_WHITESPACE","\n    ",122],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$image_entities",123],["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$key",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$image_entity",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n      ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","assertIdentical",124],"(",["T_ARRAY","array",124],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_LNUMBER","1",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'3'",124],")",")",")",",",["T_WHITESPACE"," ",124],["T_VARIABLE","$file_usage",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","listUsage",124],"(",["T_VARIABLE","$image_entity",124],")",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'The image '",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$image_paths",124],"[",["T_VARIABLE","$key",124],"]",["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","' has 3 usages.'",124],")",";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_COMMENT","\/\/ Test hook_entity_update(): decrement, by modifying the last revision:\n",127],["T_WHITESPACE","    ",128],["T_COMMENT","\/\/ remove the data-entity-type attribute from the body field.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$original_values",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",")",";",["T_WHITESPACE","\n    ",129],["T_FOR","for",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$i",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_LNUMBER","0",130],";",["T_WHITESPACE"," ",130],["T_VARIABLE","$i",130],["T_WHITESPACE"," ",130],"<",["T_WHITESPACE"," ",130],["T_STRING","count",130],"(",["T_VARIABLE","$image_entities",130],")",";",["T_WHITESPACE"," ",130],["T_VARIABLE","$i",130],["T_INC","++",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n      ",130],["T_VARIABLE","$original_value",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$node",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","body",131],"[",["T_VARIABLE","$i",131],"]",["T_OBJECT_OPERATOR","->",131],["T_STRING","value",131],";",["T_WHITESPACE","\n      ",131],["T_VARIABLE","$new_value",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","str_replace",132],"(",["T_CONSTANT_ENCAPSED_STRING","'data-entity-type'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'data-entity-type-modified'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$original_value",132],")",";",["T_WHITESPACE","\n      ",132],["T_VARIABLE","$node",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","body",133],"[",["T_VARIABLE","$i",133],"]",["T_OBJECT_OPERATOR","->",133],["T_STRING","value",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$new_value",133],";",["T_WHITESPACE","\n      ",133],["T_VARIABLE","$original_values",134],"[",["T_VARIABLE","$i",134],"]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$original_value",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$node",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","save",136],"(",")",";",["T_WHITESPACE","\n    ",136],["T_FOREACH","foreach",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$image_entities",137],["T_WHITESPACE"," ",137],["T_AS","as",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$key",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$image_entity",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","assertIdentical",138],"(",["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_LNUMBER","1",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'2'",138],")",")",")",",",["T_WHITESPACE"," ",138],["T_VARIABLE","$file_usage",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","listUsage",138],"(",["T_VARIABLE","$image_entity",138],")",",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'The image '",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_VARIABLE","$image_paths",138],"[",["T_VARIABLE","$key",138],"]",["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","' has 2 usages.'",138],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_COMMENT","\/\/ Test editor_entity_update(): increment again by creating a new revision:\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ read the data- attributes to the body field.\n",142],["T_WHITESPACE","    ",143],["T_VARIABLE","$node",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","setNewRevision",143],"(",["T_STRING","TRUE",143],")",";",["T_WHITESPACE","\n    ",143],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$original_values",144],["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$key",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$original_value",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n      ",144],["T_VARIABLE","$node",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","body",145],"[",["T_VARIABLE","$key",145],"]",["T_OBJECT_OPERATOR","->",145],["T_STRING","value",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$original_value",145],";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$node",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","save",147],"(",")",";",["T_WHITESPACE","\n    ",147],["T_FOREACH","foreach",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$image_entities",148],["T_WHITESPACE"," ",148],["T_AS","as",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$key",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$image_entity",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n      ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertIdentical",149],"(",["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_LNUMBER","1",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'3'",149],")",")",")",",",["T_WHITESPACE"," ",149],["T_VARIABLE","$file_usage",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","listUsage",149],"(",["T_VARIABLE","$image_entity",149],")",",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'The image '",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_VARIABLE","$image_paths",149],"[",["T_VARIABLE","$key",149],"]",["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","' has 3 usages.'",149],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_COMMENT","\/\/ Test hook_entity_update(): decrement, by modifying the last revision:\n",152],["T_WHITESPACE","    ",153],["T_COMMENT","\/\/ remove the data-entity-uuid attribute from the body field.\n",153],["T_WHITESPACE","    ",154],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$original_values",154],["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$key",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$original_value",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n      ",154],["T_VARIABLE","$original_value",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$node",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","body",155],"[",["T_VARIABLE","$key",155],"]",["T_OBJECT_OPERATOR","->",155],["T_STRING","value",155],";",["T_WHITESPACE","\n      ",155],["T_VARIABLE","$new_value",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","str_replace",156],"(",["T_CONSTANT_ENCAPSED_STRING","'data-entity-type'",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'data-entity-type-modified'",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$original_value",156],")",";",["T_WHITESPACE","\n      ",156],["T_VARIABLE","$node",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","body",157],"[",["T_VARIABLE","$key",157],"]",["T_OBJECT_OPERATOR","->",157],["T_STRING","value",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$new_value",157],";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$node",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","save",159],"(",")",";",["T_WHITESPACE","\n    ",159],["T_FOREACH","foreach",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$image_entities",160],["T_WHITESPACE"," ",160],["T_AS","as",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$key",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$image_entity",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n      ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertIdentical",161],"(",["T_ARRAY","array",161],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_LNUMBER","1",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'2'",161],")",")",")",",",["T_WHITESPACE"," ",161],["T_VARIABLE","$file_usage",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","listUsage",161],"(",["T_VARIABLE","$image_entity",161],")",",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'The image '",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_VARIABLE","$image_paths",161],"[",["T_VARIABLE","$key",161],"]",["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","' has 2 usages.'",161],")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_COMMENT","\/\/ Test hook_entity_update(): increment, by modifying the last revision:\n",164],["T_WHITESPACE","    ",165],["T_COMMENT","\/\/ read the data- attributes to the body field.\n",165],["T_WHITESPACE","    ",166],["T_FOREACH","foreach",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$original_values",166],["T_WHITESPACE"," ",166],["T_AS","as",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$key",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$original_value",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n      ",166],["T_VARIABLE","$node",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","body",167],"[",["T_VARIABLE","$key",167],"]",["T_OBJECT_OPERATOR","->",167],["T_STRING","value",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$original_value",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$node",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","save",169],"(",")",";",["T_WHITESPACE","\n    ",169],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$image_entities",170],["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$key",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$image_entity",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n      ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertIdentical",171],"(",["T_ARRAY","array",171],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",["T_LNUMBER","1",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'3'",171],")",")",")",",",["T_WHITESPACE"," ",171],["T_VARIABLE","$file_usage",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","listUsage",171],"(",["T_VARIABLE","$image_entity",171],")",",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'The image '",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_VARIABLE","$image_paths",171],"[",["T_VARIABLE","$key",171],"]",["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","' has 3 usages.'",171],")",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_COMMENT","\/\/ Test editor_entity_revision_delete(): decrement, by deleting a revision.\n",174],["T_WHITESPACE","    ",175],["T_STRING","entity_revision_delete",175],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$second_revision_id",175],")",";",["T_WHITESPACE","\n    ",175],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$image_entities",176],["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$key",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$image_entity",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","assertIdentical",177],"(",["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_LNUMBER","1",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'2'",177],")",")",")",",",["T_WHITESPACE"," ",177],["T_VARIABLE","$file_usage",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","listUsage",177],"(",["T_VARIABLE","$image_entity",177],")",",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'The image '",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$image_paths",177],"[",["T_VARIABLE","$key",177],"]",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","' has 2 usages.'",177],")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_COMMENT","\/\/ Populate both the body and summary. Because this will be the same\n",180],["T_WHITESPACE","    ",181],["T_COMMENT","\/\/ revision of the same node, it will record only one usage.\n",181],["T_WHITESPACE","    ",182],["T_FOREACH","foreach",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$original_values",182],["T_WHITESPACE"," ",182],["T_AS","as",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$key",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$original_value",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n      ",182],["T_VARIABLE","$node",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","body",183],"[",["T_VARIABLE","$key",183],"]",["T_OBJECT_OPERATOR","->",183],["T_STRING","value",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$original_value",183],";",["T_WHITESPACE","\n      ",183],["T_VARIABLE","$node",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","body",184],"[",["T_VARIABLE","$key",184],"]",["T_OBJECT_OPERATOR","->",184],["T_STRING","summary",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$original_value",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$node",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","save",186],"(",")",";",["T_WHITESPACE","\n    ",186],["T_FOREACH","foreach",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$image_entities",187],["T_WHITESPACE"," ",187],["T_AS","as",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$key",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$image_entity",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n      ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","assertIdentical",188],"(",["T_ARRAY","array",188],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_ARRAY","array",188],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_ARRAY","array",188],"(",["T_LNUMBER","1",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'2'",188],")",")",")",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$file_usage",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","listUsage",188],"(",["T_VARIABLE","$image_entity",188],")",",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'The image '",188],["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_VARIABLE","$image_paths",188],"[",["T_VARIABLE","$key",188],"]",["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","' has 2 usages.'",188],")",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_COMMENT","\/\/ Empty out the body value, but keep the summary. The number of usages\n",191],["T_WHITESPACE","    ",192],["T_COMMENT","\/\/ should not change.\n",192],["T_WHITESPACE","    ",193],["T_FOREACH","foreach",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$original_values",193],["T_WHITESPACE"," ",193],["T_AS","as",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$key",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$original_value",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n      ",193],["T_VARIABLE","$node",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","body",194],"[",["T_VARIABLE","$key",194],"]",["T_OBJECT_OPERATOR","->",194],["T_STRING","value",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","''",194],";",["T_WHITESPACE","\n      ",194],["T_VARIABLE","$node",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","body",195],"[",["T_VARIABLE","$key",195],"]",["T_OBJECT_OPERATOR","->",195],["T_STRING","summary",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$original_value",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$node",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","save",197],"(",")",";",["T_WHITESPACE","\n    ",197],["T_FOREACH","foreach",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$image_entities",198],["T_WHITESPACE"," ",198],["T_AS","as",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$key",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$image_entity",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n      ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","assertIdentical",199],"(",["T_ARRAY","array",199],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_LNUMBER","1",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'2'",199],")",")",")",",",["T_WHITESPACE"," ",199],["T_VARIABLE","$file_usage",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","listUsage",199],"(",["T_VARIABLE","$image_entity",199],")",",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'The image '",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_VARIABLE","$image_paths",199],"[",["T_VARIABLE","$key",199],"]",["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","' has 2 usages.'",199],")",";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_COMMENT","\/\/ Test editor_entity_delete().\n",202],["T_WHITESPACE","    ",203],["T_VARIABLE","$node",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","delete",203],"(",")",";",["T_WHITESPACE","\n    ",203],["T_FOREACH","foreach",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$image_entities",204],["T_WHITESPACE"," ",204],["T_AS","as",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$key",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$image_entity",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n      ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","assertIdentical",205],"(",["T_ARRAY","array",205],"(",")",",",["T_WHITESPACE"," ",205],["T_VARIABLE","$file_usage",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","listUsage",205],"(",["T_VARIABLE","$image_entity",205],")",",",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'The image '",205],["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_VARIABLE","$image_paths",205],"[",["T_VARIABLE","$key",205],"]",["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","' has zero usages again.'",205],")",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n  ",206],"}",["T_WHITESPACE","\n\n",207],"}",["T_WHITESPACE","\n",209]]
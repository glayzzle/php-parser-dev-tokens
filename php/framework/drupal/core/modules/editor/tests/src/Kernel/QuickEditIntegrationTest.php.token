[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","editor",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Serialization",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Json",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EventSubscriber",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AjaxResponseSubscriber",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Language",7],["T_NS_SEPARATOR","\\",7],["T_STRING","LanguageInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","editor",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Editor",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","entity_test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityTest",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","quickedit",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MetadataGenerator",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Tests",11],["T_NS_SEPARATOR","\\",11],["T_STRING","quickedit",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Kernel",11],["T_NS_SEPARATOR","\\",11],["T_STRING","QuickEditTestBase",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","quickedit_test",12],["T_NS_SEPARATOR","\\",12],["T_STRING","MockEditEntityFieldAccessCheck",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","editor",13],["T_NS_SEPARATOR","\\",13],["T_STRING","EditorController",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Request",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpKernel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Event",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FilterResponseEvent",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernelInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Drupal",17],["T_NS_SEPARATOR","\\",17],["T_STRING","filter",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Entity",17],["T_NS_SEPARATOR","\\",17],["T_STRING","FilterFormat",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Tests Edit module integration (Editor module's inline editing support).\n *\n * @group editor\n *\/",19],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","QuickEditIntegrationTest",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","QuickEditTestBase",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_STATIC","static",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$modules",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'editor_test'",29],")",";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * The manager for editor plug-ins.\n   *\n   * @var \\Drupal\\Component\\Plugin\\PluginManagerInterface\n   *\/",31],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$editorManager",36],";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * The metadata generator object to be tested.\n   *\n   * @var \\Drupal\\quickedit\\MetadataGeneratorInterface.php\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$metadataGenerator",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * The editor selector object to be used by the metadata generator object.\n   *\n   * @var \\Drupal\\quickedit\\EditorSelectorInterface\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$editorSelector",50],";",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * The access checker object to be used by the metadata generator object.\n   *\n   * @var \\Drupal\\quickedit\\Access\\EditEntityFieldAccessCheckInterface\n   *\/",52],["T_WHITESPACE","\n  ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$accessChecker",57],";",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * The name of the field ued for tests.\n   *\n   * @var string\n   *\/",59],["T_WHITESPACE","\n  ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$fieldName",64],";",["T_WHITESPACE","\n\n  ",64],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","setUp",66],"(",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n    ",66],["T_STRING","parent",67],["T_DOUBLE_COLON","::",67],["T_STRING","setUp",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Install the Filter module.\n",69],["T_WHITESPACE","\n    ",70],["T_COMMENT","\/\/ Create a field.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","fieldName",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'field_textarea'",72],";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","createFieldWithStorage",73],"(",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","fieldName",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'text'",74],",",["T_WHITESPACE"," ",74],["T_LNUMBER","1",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'Long text field'",74],",",["T_WHITESPACE","\n      ",74],["T_COMMENT","\/\/ Instance settings.\n",75],["T_WHITESPACE","      ",76],["T_ARRAY","array",76],"(",")",",",["T_WHITESPACE","\n      ",76],["T_COMMENT","\/\/ Widget type & settings.\n",77],["T_WHITESPACE","      ",78],["T_CONSTANT_ENCAPSED_STRING","'text_textarea'",78],",",["T_WHITESPACE","\n      ",78],["T_ARRAY","array",79],"(",["T_CONSTANT_ENCAPSED_STRING","'size'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_LNUMBER","42",79],")",",",["T_WHITESPACE","\n      ",79],["T_COMMENT","\/\/ 'default' formatter type & settings.\n",80],["T_WHITESPACE","      ",81],["T_CONSTANT_ENCAPSED_STRING","'text_default'",81],",",["T_WHITESPACE","\n      ",81],["T_ARRAY","array",82],"(",")",["T_WHITESPACE","\n    ",82],")",";",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ Create text format.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$full_html_format",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","FilterFormat",86],["T_DOUBLE_COLON","::",86],["T_STRING","create",86],"(",["T_ARRAY","array",86],"(",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'format'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'full_html'",87],",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'name'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'Full HTML'",88],",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'weight'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_LNUMBER","1",89],",",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'filters'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",")",",",["T_WHITESPACE","\n    ",90],")",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$full_html_format",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","save",92],"(",")",";",["T_WHITESPACE","\n\n    ",92],["T_COMMENT","\/\/ Associate text editor with text format.\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$editor",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","Editor",95],["T_DOUBLE_COLON","::",95],["T_STRING","create",95],"(","[",["T_WHITESPACE","\n      ",95],["T_CONSTANT_ENCAPSED_STRING","'format'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$full_html_format",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","id",96],"(",")",",",["T_WHITESPACE","\n      ",96],["T_CONSTANT_ENCAPSED_STRING","'editor'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",97],",",["T_WHITESPACE","\n    ",97],"]",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$editor",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","save",99],"(",")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Also create a text format without an associated text editor.\n",101],["T_WHITESPACE","    ",102],["T_STRING","FilterFormat",102],["T_DOUBLE_COLON","::",102],["T_STRING","create",102],"(",["T_ARRAY","array",102],"(",["T_WHITESPACE","\n      ",102],["T_CONSTANT_ENCAPSED_STRING","'format'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'no_editor'",103],",",["T_WHITESPACE","\n      ",103],["T_CONSTANT_ENCAPSED_STRING","'name'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'No Text Editor'",104],",",["T_WHITESPACE","\n      ",104],["T_CONSTANT_ENCAPSED_STRING","'weight'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_LNUMBER","2",105],",",["T_WHITESPACE","\n      ",105],["T_CONSTANT_ENCAPSED_STRING","'filters'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",")",",",["T_WHITESPACE","\n    ",106],")",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","save",107],"(",")",";",["T_WHITESPACE","\n  ",107],"}",["T_WHITESPACE","\n\n  ",108],["T_DOC_COMMENT","\/**\n   * Returns the in-place editor that quickedit selects.\n   *\n   * @param int $entity_id\n   *   An entity ID.\n   * @param string $field_name\n   *   A field name.\n   * @param string $view_mode\n   *   A view mode.\n   *\n   * @return string\n   *   Returns the selected in-place editor.\n   *\/",110],["T_WHITESPACE","\n  ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getSelectedEditor",123],"(",["T_VARIABLE","$entity_id",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$field_name",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$view_mode",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'default'",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$storage",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","container",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getStorage",124],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$storage",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","resetCache",125],"(","[",["T_VARIABLE","$entity_id",125],"]",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$entity",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$storage",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","load",126],"(",["T_VARIABLE","$entity_id",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$items",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$entity",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","get",127],"(",["T_VARIABLE","$field_name",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$options",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","entity_get_display",128],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$view_mode",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getComponent",128],"(",["T_VARIABLE","$field_name",128],")",";",["T_WHITESPACE","\n    ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","editorSelector",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getEditor",129],"(",["T_VARIABLE","$options",129],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",129],"]",",",["T_WHITESPACE"," ",129],["T_VARIABLE","$items",129],")",";",["T_WHITESPACE","\n  ",129],"}",["T_WHITESPACE","\n\n  ",130],["T_DOC_COMMENT","\/**\n   * Tests editor selection when the Editor module is present.\n   *\n   * Tests a textual field, with text filtering, with cardinality 1 and >1,\n   * always with a ProcessedTextEditor plug-in present, but with varying text\n   * format compatibility.\n   *\/",132],["T_WHITESPACE","\n  ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","testEditorSelection",139],"(",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","editorManager",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","container",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","get",140],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.quickedit.editor'",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","editorSelector",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","container",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit.editor.selector'",141],")",";",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Create an entity with values for this text field.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$entity",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","EntityTest",144],["T_DOUBLE_COLON","::",144],["T_STRING","create",144],"(",")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$entity",145],["T_OBJECT_OPERATOR","->",145],"{",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","fieldName",145],"}",["T_OBJECT_OPERATOR","->",145],["T_STRING","value",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'Hello, world!'",145],";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$entity",146],["T_OBJECT_OPERATOR","->",146],"{",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","fieldName",146],"}",["T_OBJECT_OPERATOR","->",146],["T_STRING","format",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",146],";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$entity",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","save",147],"(",")",";",["T_WHITESPACE","\n\n    ",147],["T_COMMENT","\/\/ Editor selection w\/ cardinality 1, text format w\/o associated text editor.\n",149],["T_WHITESPACE","    ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertEqual",150],"(",["T_CONSTANT_ENCAPSED_STRING","'form'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getSelectedEditor",150],"(",["T_VARIABLE","$entity",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","id",150],"(",")",",",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","fieldName",150],")",",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","\"With cardinality 1, and the filtered_html text format, the 'form' editor is selected.\"",150],")",";",["T_WHITESPACE","\n\n    ",150],["T_COMMENT","\/\/ Editor selection w\/ cardinality 1, text format w\/ associated text editor.\n",152],["T_WHITESPACE","    ",153],["T_VARIABLE","$entity",153],["T_OBJECT_OPERATOR","->",153],"{",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","fieldName",153],"}",["T_OBJECT_OPERATOR","->",153],["T_STRING","format",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'full_html'",153],";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$entity",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","save",154],"(",")",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","assertEqual",155],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getSelectedEditor",155],"(",["T_VARIABLE","$entity",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","id",155],"(",")",",",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","fieldName",155],")",",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","\"With cardinality 1, and the full_html text format, the 'editor' editor is selected.\"",155],")",";",["T_WHITESPACE","\n\n    ",155],["T_COMMENT","\/\/ Editor selection with text processing, cardinality >1\n",157],["T_WHITESPACE","    ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","fields",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","field_textarea_field_storage",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setCardinality",158],"(",["T_LNUMBER","2",158],")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","fields",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","field_textarea_field_storage",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","save",159],"(",")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","assertEqual",160],"(",["T_CONSTANT_ENCAPSED_STRING","'form'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getSelectedEditor",160],"(",["T_VARIABLE","$entity",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","id",160],"(",")",",",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","fieldName",160],")",",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","\"With cardinality >1, and both items using the full_html text format, the 'form' editor is selected.\"",160],")",";",["T_WHITESPACE","\n  ",160],"}",["T_WHITESPACE","\n\n  ",161],["T_DOC_COMMENT","\/**\n   * Tests (custom) metadata when the formatted text editor is used.\n   *\/",163],["T_WHITESPACE","\n  ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","testMetadata",166],"(",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","editorManager",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","container",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","get",167],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.quickedit.editor'",167],")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","accessChecker",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_STRING","MockEditEntityFieldAccessCheck",168],"(",")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","editorSelector",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","container",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","get",169],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit.editor.selector'",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","metadataGenerator",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_NEW","new",170],["T_WHITESPACE"," ",170],["T_STRING","MetadataGenerator",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","accessChecker",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","editorSelector",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","editorManager",170],")",";",["T_WHITESPACE","\n\n    ",170],["T_COMMENT","\/\/ Create an entity with values for the field.\n",172],["T_WHITESPACE","    ",173],["T_VARIABLE","$entity",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","EntityTest",173],["T_DOUBLE_COLON","::",173],["T_STRING","create",173],"(",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$entity",174],["T_OBJECT_OPERATOR","->",174],"{",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","fieldName",174],"}",["T_OBJECT_OPERATOR","->",174],["T_STRING","value",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'Test'",174],";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$entity",175],["T_OBJECT_OPERATOR","->",175],"{",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","fieldName",175],"}",["T_OBJECT_OPERATOR","->",175],["T_STRING","format",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'full_html'",175],";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$entity",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","save",176],"(",")",";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$entity",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","EntityTest",177],["T_DOUBLE_COLON","::",177],["T_STRING","load",177],"(",["T_VARIABLE","$entity",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","id",177],"(",")",")",";",["T_WHITESPACE","\n\n    ",177],["T_COMMENT","\/\/ Verify metadata.\n",179],["T_WHITESPACE","    ",180],["T_VARIABLE","$items",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$entity",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","get",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","fieldName",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$metadata",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","metadataGenerator",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","generateFieldMetadata",181],"(",["T_VARIABLE","$items",181],",",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'default'",181],")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$expected",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_WHITESPACE","\n      ",182],["T_CONSTANT_ENCAPSED_STRING","'access'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_STRING","TRUE",183],",",["T_WHITESPACE","\n      ",183],["T_CONSTANT_ENCAPSED_STRING","'label'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'Long text field'",184],",",["T_WHITESPACE","\n      ",184],["T_CONSTANT_ENCAPSED_STRING","'editor'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'editor'",185],",",["T_WHITESPACE","\n      ",185],["T_CONSTANT_ENCAPSED_STRING","'custom'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_WHITESPACE","\n        ",186],["T_CONSTANT_ENCAPSED_STRING","'format'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'full_html'",187],",",["T_WHITESPACE","\n        ",187],["T_CONSTANT_ENCAPSED_STRING","'formatHasTransformations'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_STRING","FALSE",188],",",["T_WHITESPACE","\n      ",188],")",",",["T_WHITESPACE","\n    ",189],")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","assertEqual",191],"(",["T_VARIABLE","$expected",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$metadata",191],",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'The correct metadata (including custom metadata) is generated.'",191],")",";",["T_WHITESPACE","\n  ",191],"}",["T_WHITESPACE","\n\n  ",192],["T_DOC_COMMENT","\/**\n   * Tests in-place editor attachments when the Editor module is present.\n   *\/",194],["T_WHITESPACE","\n  ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","testAttachments",197],"(",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","editorSelector",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","container",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","get",198],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit.editor.selector'",198],")",";",["T_WHITESPACE","\n\n    ",198],["T_VARIABLE","$editors",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_CONSTANT_ENCAPSED_STRING","'editor'",200],")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$attachments",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","editorSelector",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getEditorAttachments",201],"(",["T_VARIABLE","$editors",201],")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","assertIdentical",202],"(",["T_VARIABLE","$attachments",202],",",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_CONSTANT_ENCAPSED_STRING","'library'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_CONSTANT_ENCAPSED_STRING","'editor\/quickedit.inPlaceEditor.formattedText'",202],")",")",",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","\"Expected attachments for Editor module's in-place editor found.\"",202],")",";",["T_WHITESPACE","\n  ",202],"}",["T_WHITESPACE","\n\n  ",203],["T_DOC_COMMENT","\/**\n   * Tests GetUntransformedTextCommand AJAX command.\n   *\/",205],["T_WHITESPACE","\n  ",207],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","testGetUntransformedTextCommand",208],"(",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n    ",208],["T_COMMENT","\/\/ Create an entity with values for the field.\n",209],["T_WHITESPACE","    ",210],["T_VARIABLE","$entity",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","EntityTest",210],["T_DOUBLE_COLON","::",210],["T_STRING","create",210],"(",")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$entity",211],["T_OBJECT_OPERATOR","->",211],"{",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","fieldName",211],"}",["T_OBJECT_OPERATOR","->",211],["T_STRING","value",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'Test'",211],";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$entity",212],["T_OBJECT_OPERATOR","->",212],"{",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","fieldName",212],"}",["T_OBJECT_OPERATOR","->",212],["T_STRING","format",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'full_html'",212],";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$entity",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","save",213],"(",")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$entity",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","EntityTest",214],["T_DOUBLE_COLON","::",214],["T_STRING","load",214],"(",["T_VARIABLE","$entity",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","id",214],"(",")",")",";",["T_WHITESPACE","\n\n    ",214],["T_COMMENT","\/\/ Verify AJAX response.\n",216],["T_WHITESPACE","    ",217],["T_VARIABLE","$controller",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_NEW","new",217],["T_WHITESPACE"," ",217],["T_STRING","EditorController",217],"(",")",";",["T_WHITESPACE","\n    ",217],["T_VARIABLE","$request",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_NEW","new",218],["T_WHITESPACE"," ",218],["T_STRING","Request",218],"(",")",";",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$response",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$controller",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getUntransformedText",219],"(",["T_VARIABLE","$entity",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","fieldName",219],",",["T_WHITESPACE"," ",219],["T_STRING","LanguageInterface",219],["T_DOUBLE_COLON","::",219],["T_STRING","LANGCODE_DEFAULT",219],",",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'default'",219],")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$expected",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_WHITESPACE","\n      ",220],["T_ARRAY","array",221],"(",["T_WHITESPACE","\n        ",221],["T_CONSTANT_ENCAPSED_STRING","'command'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'editorGetUntransformedText'",222],",",["T_WHITESPACE","\n        ",222],["T_CONSTANT_ENCAPSED_STRING","'data'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'Test'",223],",",["T_WHITESPACE","\n      ",223],")",["T_WHITESPACE","\n    ",224],")",";",["T_WHITESPACE","\n\n    ",225],["T_VARIABLE","$ajax_response_attachments_processor",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Drupal",227],["T_DOUBLE_COLON","::",227],["T_STRING","service",227],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_response.attachments_processor'",227],")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$subscriber",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_NEW","new",228],["T_WHITESPACE"," ",228],["T_STRING","AjaxResponseSubscriber",228],"(",["T_VARIABLE","$ajax_response_attachments_processor",228],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$event",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_STRING","FilterResponseEvent",229],"(",["T_WHITESPACE","\n      ",229],["T_NS_SEPARATOR","\\",230],["T_STRING","Drupal",230],["T_DOUBLE_COLON","::",230],["T_STRING","service",230],"(",["T_CONSTANT_ENCAPSED_STRING","'http_kernel'",230],")",",",["T_WHITESPACE","\n      ",230],["T_VARIABLE","$request",231],",",["T_WHITESPACE","\n      ",231],["T_STRING","HttpKernelInterface",232],["T_DOUBLE_COLON","::",232],["T_STRING","MASTER_REQUEST",232],",",["T_WHITESPACE","\n      ",232],["T_VARIABLE","$response",233],["T_WHITESPACE","\n    ",233],")",";",["T_WHITESPACE","\n    ",234],["T_VARIABLE","$subscriber",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","onResponse",235],"(",["T_VARIABLE","$event",235],")",";",["T_WHITESPACE","\n\n    ",235],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","assertEqual",237],"(",["T_STRING","Json",237],["T_DOUBLE_COLON","::",237],["T_STRING","encode",237],"(",["T_VARIABLE","$expected",237],")",",",["T_WHITESPACE"," ",237],["T_VARIABLE","$response",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getContent",237],"(",")",",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'The GetUntransformedTextCommand AJAX command works correctly.'",237],")",";",["T_WHITESPACE","\n  ",237],"}",["T_WHITESPACE","\n\n",238],"}",["T_WHITESPACE","\n",240]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","editor",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","editor",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Editor",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","filter",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FilterFormat",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","KernelTests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","KernelTestBase",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests detection of text editors and correct generation of attachments.\n *\n * @group editor\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","EditorManagerTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","KernelTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'user'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'filter'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'editor'",21],")",";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The manager for text editor plugins.\n   *\n   * @var \\Drupal\\Component\\Plugin\\PluginManagerInterface\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$editorManager",28],";",["T_WHITESPACE","\n\n  ",28],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","setUp",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","setUp",31],"(",")",";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ Install the Filter module.\n",33],["T_WHITESPACE","\n    ",34],["T_COMMENT","\/\/ Add text formats.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$filtered_html_format",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","FilterFormat",36],["T_DOUBLE_COLON","::",36],["T_STRING","create",36],"(",["T_ARRAY","array",36],"(",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'format'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",37],",",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'name'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Filtered HTML'",38],",",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","'weight'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_LNUMBER","0",39],",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'filters'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",")",",",["T_WHITESPACE","\n    ",40],")",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$filtered_html_format",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","save",42],"(",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$full_html_format",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","FilterFormat",43],["T_DOUBLE_COLON","::",43],["T_STRING","create",43],"(",["T_ARRAY","array",43],"(",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'format'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'full_html'",44],",",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'name'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Full HTML'",45],",",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'weight'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'filters'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",")",",",["T_WHITESPACE","\n    ",47],")",")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$full_html_format",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","save",49],"(",")",";",["T_WHITESPACE","\n  ",49],"}",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * Tests the configurable text editor manager.\n   *\/",52],["T_WHITESPACE","\n  ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","testManager",55],"(",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","editorManager",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","container",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","get",56],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.editor'",56],")",";",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Case 1: no text editor available:\n",58],["T_WHITESPACE","    ",59],["T_COMMENT","\/\/ - listOptions() should return an empty list of options\n",59],["T_WHITESPACE","    ",60],["T_COMMENT","\/\/ - getAttachments() should return an empty #attachments array (and not\n",60],["T_WHITESPACE","    ",61],["T_COMMENT","\/\/   a JS settings structure that is empty)\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertIdentical",62],"(",["T_ARRAY","array",62],"(",")",",",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","editorManager",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","listOptions",62],"(",")",",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'When no text editor is enabled, the manager works correctly.'",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertIdentical",63],"(",["T_ARRAY","array",63],"(",")",",",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","editorManager",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getAttachments",63],"(",["T_ARRAY","array",63],"(",")",")",",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'No attachments when no text editor is enabled and retrieving attachments for zero text formats.'",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertIdentical",64],"(",["T_ARRAY","array",64],"(",")",",",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","editorManager",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getAttachments",64],"(",["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'full_html'",64],")",")",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'No attachments when no text editor is enabled and retrieving attachments for multiple text formats.'",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Enable the Text Editor Test module, which has the Unicorn Editor and\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ clear the editor manager's cache so it is picked up.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","enableModules",68],"(",["T_ARRAY","array",68],"(",["T_CONSTANT_ENCAPSED_STRING","'editor_test'",68],")",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","editorManager",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","container",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.editor'",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","editorManager",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","clearCachedDefinitions",70],"(",")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Case 2: a text editor available.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertIdentical",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Unicorn Editor'",73],",",["T_WHITESPACE"," ",73],["T_STRING_CAST","(string)",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","editorManager",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","listOptions",73],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'unicorn'",73],"]",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'When some text editor is enabled, the manager works correctly.'",73],")",";",["T_WHITESPACE","\n\n    ",73],["T_COMMENT","\/\/ Case 3: a text editor available & associated (but associated only with\n",75],["T_WHITESPACE","    ",76],["T_COMMENT","\/\/ the 'Full HTML' text format).\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$unicorn_plugin",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","editorManager",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","createInstance",77],"(",["T_CONSTANT_ENCAPSED_STRING","'unicorn'",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$editor",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","Editor",78],["T_DOUBLE_COLON","::",78],["T_STRING","create",78],"(","[",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'format'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'full_html'",79],",",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'editor'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",80],",",["T_WHITESPACE","\n    ",80],"]",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$editor",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","save",82],"(",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertIdentical",83],"(",["T_ARRAY","array",83],"(",")",",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","editorManager",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAttachments",83],"(",["T_ARRAY","array",83],"(",")",")",",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'No attachments when one text editor is enabled and retrieving attachments for zero text formats.'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$expected",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'library'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",["T_WHITESPACE","\n        ",85],["T_LNUMBER","0",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'editor_test\/unicorn'",86],",",["T_WHITESPACE","\n      ",86],")",",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],"[",["T_WHITESPACE","\n        ",88],["T_CONSTANT_ENCAPSED_STRING","'editor'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],"[",["T_WHITESPACE","\n          ",89],["T_CONSTANT_ENCAPSED_STRING","'formats'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],"[",["T_WHITESPACE","\n            ",90],["T_CONSTANT_ENCAPSED_STRING","'full_html'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],"[",["T_WHITESPACE","\n              ",91],["T_CONSTANT_ENCAPSED_STRING","'format'",92],["T_WHITESPACE","  ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'full_html'",92],",",["T_WHITESPACE","\n              ",92],["T_CONSTANT_ENCAPSED_STRING","'editor'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",93],",",["T_WHITESPACE","\n              ",93],["T_CONSTANT_ENCAPSED_STRING","'editorSettings'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$unicorn_plugin",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getJSSettings",94],"(",["T_VARIABLE","$editor",94],")",",",["T_WHITESPACE","\n              ",94],["T_CONSTANT_ENCAPSED_STRING","'editorSupportsContentFiltering'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_STRING","TRUE",95],",",["T_WHITESPACE","\n              ",95],["T_CONSTANT_ENCAPSED_STRING","'isXssSafe'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_STRING","FALSE",96],",",["T_WHITESPACE","\n            ",96],"]",",",["T_WHITESPACE","\n          ",97],"]",",",["T_WHITESPACE","\n        ",98],"]",",",["T_WHITESPACE","\n      ",99],"]",",",["T_WHITESPACE","\n    ",100],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertIdentical",102],"(",["T_VARIABLE","$expected",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","editorManager",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getAttachments",102],"(",["T_ARRAY","array",102],"(",["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'full_html'",102],")",")",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'Correct attachments when one text editor is enabled and retrieving attachments for multiple text formats.'",102],")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Case 4: a text editor available associated, but now with its JS settings\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ being altered via hook_editor_js_settings_alter().\n",105],["T_WHITESPACE","    ",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Drupal",106],["T_DOUBLE_COLON","::",106],["T_STRING","state",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","set",106],"(",["T_CONSTANT_ENCAPSED_STRING","'editor_test_js_settings_alter_enabled'",106],",",["T_WHITESPACE"," ",106],["T_STRING","TRUE",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$expected",107],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'editor'",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'formats'",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'full_html'",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'editorSettings'",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ponyModeEnabled'",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","FALSE",107],";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertIdentical",108],"(",["T_VARIABLE","$expected",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","editorManager",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getAttachments",108],"(",["T_ARRAY","array",108],"(",["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'full_html'",108],")",")",",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'hook_editor_js_settings_alter() works correctly.'",108],")",";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n",109],"}",["T_WHITESPACE","\n",111]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","editor",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Form",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Bytes",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Form",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FormBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Form",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FormStateInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","editor",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Editor",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Ajax",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AjaxResponse",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Ajax",10],["T_NS_SEPARATOR","\\",10],["T_STRING","HtmlCommand",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","editor",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Ajax",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EditorDialogSave",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Ajax",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CloseModalDialogCommand",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Symfony",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Component",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DependencyInjection",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ContainerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Entity",14],["T_NS_SEPARATOR","\\",14],["T_STRING","EntityStorageInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Provides an image dialog for text editors.\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","EditorImageDialog",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","FormBase",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The file storage service.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityStorageInterface\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$fileStorage",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Constructs a form object for image dialog.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityStorageInterface $file_storage\n   *   The file storage service.\n   *\/",28],["T_WHITESPACE","\n  ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","__construct",34],"(",["T_STRING","EntityStorageInterface",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$file_storage",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","fileStorage",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$file_storage",35],";",["T_WHITESPACE","\n  ",35],"}",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",38],["T_WHITESPACE","\n  ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_STATIC","static",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","create",41],"(",["T_STRING","ContainerInterface",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$container",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n    ",41],["T_RETURN","return",42],["T_WHITESPACE"," ",42],["T_NEW","new",42],["T_WHITESPACE"," ",42],["T_STATIC","static",42],"(",["T_WHITESPACE","\n      ",42],["T_VARIABLE","$container",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","get",43],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","getStorage",43],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",43],")",["T_WHITESPACE","\n    ",43],")",";",["T_WHITESPACE","\n  ",44],"}",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",47],["T_WHITESPACE","\n  ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","getFormId",50],"(",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n    ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'editor_image_dialog'",51],";",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * @param \\Drupal\\editor\\Entity\\Editor $editor\n   *   The text editor to which this dialog corresponds.\n   *\/",54],["T_WHITESPACE","\n  ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","buildForm",60],"(",["T_ARRAY","array",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$form",60],",",["T_WHITESPACE"," ",60],["T_STRING","FormStateInterface",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$form_state",60],",",["T_WHITESPACE"," ",60],["T_STRING","Editor",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$editor",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","NULL",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_COMMENT","\/\/ This form is special, in that the default values do not come from the\n",61],["T_WHITESPACE","    ",62],["T_COMMENT","\/\/ server side, but from the client side, from a text editor. We must cache\n",62],["T_WHITESPACE","    ",63],["T_COMMENT","\/\/ this data in form state, because when the form is rebuilt, we will be\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ receiving values from the form, instead of the values from the text\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ editor. If we don't cache it, this data will be lost.\n",65],["T_WHITESPACE","    ",66],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_ISSET","isset",66],"(",["T_VARIABLE","$form_state",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getUserInput",66],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'editor_object'",66],"]",")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n      ",66],["T_COMMENT","\/\/ By convention, the data that the text editor sends to any dialog is in\n",67],["T_WHITESPACE","      ",68],["T_COMMENT","\/\/ the 'editor_object' key. And the image dialog for text editors expects\n",68],["T_WHITESPACE","      ",69],["T_COMMENT","\/\/ that data to be the attributes for an <img> element.\n",69],["T_WHITESPACE","      ",70],["T_VARIABLE","$image_element",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$form_state",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getUserInput",70],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'editor_object'",70],"]",";",["T_WHITESPACE","\n      ",70],["T_VARIABLE","$form_state",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","set",71],"(",["T_CONSTANT_ENCAPSED_STRING","'image_element'",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$image_element",71],")",";",["T_WHITESPACE","\n      ",71],["T_VARIABLE","$form_state",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setCached",72],"(",["T_STRING","TRUE",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n    ",73],["T_ELSE","else",74],["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n      ",74],["T_COMMENT","\/\/ Retrieve the image element's attributes from form state.\n",75],["T_WHITESPACE","      ",76],["T_VARIABLE","$image_element",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$form_state",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'image_element'",76],")",["T_WHITESPACE"," ",76],"?",":",["T_WHITESPACE"," ",76],"[","]",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_VARIABLE","$form",79],"[",["T_CONSTANT_ENCAPSED_STRING","'#tree'",79],"]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","TRUE",79],";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$form",80],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",80],"]","[",["T_CONSTANT_ENCAPSED_STRING","'library'",80],"]","[","]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'editor\/drupal.editor.dialog'",80],";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$form",81],"[",["T_CONSTANT_ENCAPSED_STRING","'#prefix'",81],"]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'<div id=\"editor-image-dialog-form\">'",81],";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$form",82],"[",["T_CONSTANT_ENCAPSED_STRING","'#suffix'",82],"]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'<\/div>'",82],";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Construct strings to use in the upload validators.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$image_upload",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$editor",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getImageUploadSettings",85],"(",")",";",["T_WHITESPACE","\n    ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(","!",["T_EMPTY","empty",86],"(",["T_VARIABLE","$image_upload",86],"[",["T_CONSTANT_ENCAPSED_STRING","'max_dimensions'",86],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",86],"]",")",["T_WHITESPACE"," ",86],["T_BOOLEAN_OR","||",86],["T_WHITESPACE"," ",86],"!",["T_EMPTY","empty",86],"(",["T_VARIABLE","$image_upload",86],"[",["T_CONSTANT_ENCAPSED_STRING","'max_dimensions'",86],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",86],"]",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_VARIABLE","$max_dimensions",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$image_upload",87],"[",["T_CONSTANT_ENCAPSED_STRING","'max_dimensions'",87],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",87],"]",["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'x'",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_VARIABLE","$image_upload",87],"[",["T_CONSTANT_ENCAPSED_STRING","'max_dimensions'",87],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",87],"]",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n    ",88],["T_ELSE","else",89],["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$max_dimensions",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_LNUMBER","0",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$max_filesize",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","min",92],"(",["T_STRING","Bytes",92],["T_DOUBLE_COLON","::",92],["T_STRING","toInt",92],"(",["T_VARIABLE","$image_upload",92],"[",["T_CONSTANT_ENCAPSED_STRING","'max_size'",92],"]",")",",",["T_WHITESPACE"," ",92],["T_STRING","file_upload_max_size",92],"(",")",")",";",["T_WHITESPACE","\n\n    ",92],["T_VARIABLE","$existing_file",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_ISSET","isset",94],"(",["T_VARIABLE","$image_element",94],"[",["T_CONSTANT_ENCAPSED_STRING","'data-entity-uuid'",94],"]",")",["T_WHITESPACE"," ",94],"?",["T_WHITESPACE"," ",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Drupal",94],["T_DOUBLE_COLON","::",94],["T_STRING","entityManager",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","loadEntityByUuid",94],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$image_element",94],"[",["T_CONSTANT_ENCAPSED_STRING","'data-entity-uuid'",94],"]",")",["T_WHITESPACE"," ",94],":",["T_WHITESPACE"," ",94],["T_STRING","NULL",94],";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$fid",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$existing_file",95],["T_WHITESPACE"," ",95],"?",["T_WHITESPACE"," ",95],["T_VARIABLE","$existing_file",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","id",95],"(",")",["T_WHITESPACE"," ",95],":",["T_WHITESPACE"," ",95],["T_STRING","NULL",95],";",["T_WHITESPACE","\n\n    ",95],["T_VARIABLE","$form",97],"[",["T_CONSTANT_ENCAPSED_STRING","'fid'",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'#title'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","t",98],"(",["T_CONSTANT_ENCAPSED_STRING","'Image'",98],")",",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'#type'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'managed_file'",99],",",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'#upload_location'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$image_upload",100],"[",["T_CONSTANT_ENCAPSED_STRING","'scheme'",100],"]",["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_VARIABLE","$image_upload",100],"[",["T_CONSTANT_ENCAPSED_STRING","'directory'",100],"]",",",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$fid",101],["T_WHITESPACE"," ",101],"?",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_VARIABLE","$fid",101],")",["T_WHITESPACE"," ",101],":",["T_WHITESPACE"," ",101],["T_STRING","NULL",101],",",["T_WHITESPACE","\n      ",101],["T_CONSTANT_ENCAPSED_STRING","'#upload_validators'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_WHITESPACE","\n        ",102],["T_CONSTANT_ENCAPSED_STRING","'file_validate_extensions'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'gif png jpg jpeg'",103],")",",",["T_WHITESPACE","\n        ",103],["T_CONSTANT_ENCAPSED_STRING","'file_validate_size'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_VARIABLE","$max_filesize",104],")",",",["T_WHITESPACE","\n        ",104],["T_CONSTANT_ENCAPSED_STRING","'file_validate_image_resolution'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",["T_VARIABLE","$max_dimensions",105],")",",",["T_WHITESPACE","\n      ",105],")",",",["T_WHITESPACE","\n      ",106],["T_CONSTANT_ENCAPSED_STRING","'#required'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_STRING","TRUE",107],",",["T_WHITESPACE","\n    ",107],")",";",["T_WHITESPACE","\n\n    ",108],["T_VARIABLE","$form",110],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",110],"]","[",["T_CONSTANT_ENCAPSED_STRING","'src'",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_WHITESPACE","\n      ",110],["T_CONSTANT_ENCAPSED_STRING","'#title'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","t",111],"(",["T_CONSTANT_ENCAPSED_STRING","'URL'",111],")",",",["T_WHITESPACE","\n      ",111],["T_CONSTANT_ENCAPSED_STRING","'#type'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'textfield'",112],",",["T_WHITESPACE","\n      ",112],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_ISSET","isset",113],"(",["T_VARIABLE","$image_element",113],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",113],"]",")",["T_WHITESPACE"," ",113],"?",["T_WHITESPACE"," ",113],["T_VARIABLE","$image_element",113],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",113],"]",["T_WHITESPACE"," ",113],":",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","''",113],",",["T_WHITESPACE","\n      ",113],["T_CONSTANT_ENCAPSED_STRING","'#maxlength'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_LNUMBER","2048",114],",",["T_WHITESPACE","\n      ",114],["T_CONSTANT_ENCAPSED_STRING","'#required'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_STRING","TRUE",115],",",["T_WHITESPACE","\n    ",115],")",";",["T_WHITESPACE","\n\n    ",116],["T_COMMENT","\/\/ If the editor has image uploads enabled, show a managed_file form item,\n",118],["T_WHITESPACE","    ",119],["T_COMMENT","\/\/ otherwise show a (file URL) text form item.\n",119],["T_WHITESPACE","    ",120],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$image_upload",120],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",120],"]",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$form",121],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",121],"]","[",["T_CONSTANT_ENCAPSED_STRING","'src'",121],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#access'",121],"]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","FALSE",121],";",["T_WHITESPACE","\n      ",121],["T_VARIABLE","$form",122],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",122],"]","[",["T_CONSTANT_ENCAPSED_STRING","'src'",122],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#required'",122],"]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","FALSE",122],";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n    ",123],["T_ELSE","else",124],["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$form",125],"[",["T_CONSTANT_ENCAPSED_STRING","'fid'",125],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#access'",125],"]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","FALSE",125],";",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$form",126],"[",["T_CONSTANT_ENCAPSED_STRING","'fid'",126],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#required'",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","FALSE",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ The alt attribute is *required*, but we allow users to opt-in to empty\n",129],["T_WHITESPACE","    ",130],["T_COMMENT","\/\/ alt attributes for the very rare edge cases where that is valid by\n",130],["T_WHITESPACE","    ",131],["T_COMMENT","\/\/ specifying two double quotes as the alternative text in the dialog.\n",131],["T_WHITESPACE","    ",132],["T_COMMENT","\/\/ However, that *is* stored as an empty alt attribute, so if we're editing\n",132],["T_WHITESPACE","    ",133],["T_COMMENT","\/\/ an existing image (which means the src attribute is set) and its alt\n",133],["T_WHITESPACE","    ",134],["T_COMMENT","\/\/ attribute is empty, then we show that as two double quotes in the dialog.\n",134],["T_WHITESPACE","    ",135],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2307647\n",135],["T_WHITESPACE","    ",136],["T_VARIABLE","$alt",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_ISSET","isset",136],"(",["T_VARIABLE","$image_element",136],"[",["T_CONSTANT_ENCAPSED_STRING","'alt'",136],"]",")",["T_WHITESPACE"," ",136],"?",["T_WHITESPACE"," ",136],["T_VARIABLE","$image_element",136],"[",["T_CONSTANT_ENCAPSED_STRING","'alt'",136],"]",["T_WHITESPACE"," ",136],":",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","''",136],";",["T_WHITESPACE","\n    ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$alt",137],["T_WHITESPACE"," ",137],["T_IS_IDENTICAL","===",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","''",137],["T_WHITESPACE"," ",137],["T_BOOLEAN_AND","&&",137],["T_WHITESPACE"," ",137],"!",["T_EMPTY","empty",137],"(",["T_VARIABLE","$image_element",137],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",137],"]",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$alt",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'\"\"'",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$form",140],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",140],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alt'",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",["T_WHITESPACE","\n      ",140],["T_CONSTANT_ENCAPSED_STRING","'#title'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","t",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Alternative text'",141],")",",",["T_WHITESPACE","\n      ",141],["T_CONSTANT_ENCAPSED_STRING","'#placeholder'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","t",142],"(",["T_CONSTANT_ENCAPSED_STRING","'Short description for the visually impaired'",142],")",",",["T_WHITESPACE","\n      ",142],["T_CONSTANT_ENCAPSED_STRING","'#type'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'textfield'",143],",",["T_WHITESPACE","\n      ",143],["T_CONSTANT_ENCAPSED_STRING","'#required'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_STRING","TRUE",144],",",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'#required_error'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","t",145],"(",["T_CONSTANT_ENCAPSED_STRING","'Alternative text is required.<br \/>(Only in rare cases should this be left empty. To create empty alternative text, enter <code>\"\"<\/code> \u00e2\u0080\u0094 two double quotes without any content).'",145],")",",",["T_WHITESPACE","\n      ",145],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$alt",146],",",["T_WHITESPACE","\n      ",146],["T_CONSTANT_ENCAPSED_STRING","'#maxlength'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_LNUMBER","2048",147],",",["T_WHITESPACE","\n    ",147],")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ When Drupal core's filter_align is being used, the text editor may\n",150],["T_WHITESPACE","    ",151],["T_COMMENT","\/\/ offer the ability to change the alignment.\n",151],["T_WHITESPACE","    ",152],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_ISSET","isset",152],"(",["T_VARIABLE","$image_element",152],"[",["T_CONSTANT_ENCAPSED_STRING","'data-align'",152],"]",")",["T_WHITESPACE"," ",152],["T_BOOLEAN_AND","&&",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$editor",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getFilterFormat",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","filters",152],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_align'",152],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","status",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n      ",152],["T_VARIABLE","$form",153],"[",["T_CONSTANT_ENCAPSED_STRING","'align'",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_WHITESPACE","\n        ",153],["T_CONSTANT_ENCAPSED_STRING","'#title'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","t",154],"(",["T_CONSTANT_ENCAPSED_STRING","'Align'",154],")",",",["T_WHITESPACE","\n        ",154],["T_CONSTANT_ENCAPSED_STRING","'#type'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'radios'",155],",",["T_WHITESPACE","\n        ",155],["T_CONSTANT_ENCAPSED_STRING","'#options'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",["T_WHITESPACE","\n          ",156],["T_CONSTANT_ENCAPSED_STRING","'none'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","t",157],"(",["T_CONSTANT_ENCAPSED_STRING","'None'",157],")",",",["T_WHITESPACE","\n          ",157],["T_CONSTANT_ENCAPSED_STRING","'left'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","t",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Left'",158],")",",",["T_WHITESPACE","\n          ",158],["T_CONSTANT_ENCAPSED_STRING","'center'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","t",159],"(",["T_CONSTANT_ENCAPSED_STRING","'Center'",159],")",",",["T_WHITESPACE","\n          ",159],["T_CONSTANT_ENCAPSED_STRING","'right'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","t",160],"(",["T_CONSTANT_ENCAPSED_STRING","'Right'",160],")",",",["T_WHITESPACE","\n        ",160],")",",",["T_WHITESPACE","\n        ",161],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$image_element",162],"[",["T_CONSTANT_ENCAPSED_STRING","'data-align'",162],"]",["T_WHITESPACE"," ",162],["T_IS_IDENTICAL","===",162],["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","''",162],["T_WHITESPACE"," ",162],"?",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'none'",162],["T_WHITESPACE"," ",162],":",["T_WHITESPACE"," ",162],["T_VARIABLE","$image_element",162],"[",["T_CONSTANT_ENCAPSED_STRING","'data-align'",162],"]",",",["T_WHITESPACE","\n        ",162],["T_CONSTANT_ENCAPSED_STRING","'#wrapper_attributes'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'class'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'container-inline'",163],")",")",",",["T_WHITESPACE","\n        ",163],["T_CONSTANT_ENCAPSED_STRING","'#attributes'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_ARRAY","array",164],"(",["T_CONSTANT_ENCAPSED_STRING","'class'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_ARRAY","array",164],"(",["T_CONSTANT_ENCAPSED_STRING","'container-inline'",164],")",")",",",["T_WHITESPACE","\n        ",164],["T_CONSTANT_ENCAPSED_STRING","'#parents'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_ARRAY","array",165],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",165],",",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'data-align'",165],")",",",["T_WHITESPACE","\n      ",165],")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_COMMENT","\/\/ When Drupal core's filter_caption is being used, the text editor may\n",169],["T_WHITESPACE","    ",170],["T_COMMENT","\/\/ offer the ability to in-place edit the image's caption: show a toggle.\n",170],["T_WHITESPACE","    ",171],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_ISSET","isset",171],"(",["T_VARIABLE","$image_element",171],"[",["T_CONSTANT_ENCAPSED_STRING","'hasCaption'",171],"]",")",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$editor",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getFilterFormat",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","filters",171],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_caption'",171],")",["T_OBJECT_OPERATOR","->",171],["T_STRING","status",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n      ",171],["T_VARIABLE","$form",172],"[",["T_CONSTANT_ENCAPSED_STRING","'caption'",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_ARRAY","array",172],"(",["T_WHITESPACE","\n        ",172],["T_CONSTANT_ENCAPSED_STRING","'#title'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","t",173],"(",["T_CONSTANT_ENCAPSED_STRING","'Caption'",173],")",",",["T_WHITESPACE","\n        ",173],["T_CONSTANT_ENCAPSED_STRING","'#type'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",174],",",["T_WHITESPACE","\n        ",174],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$image_element",175],"[",["T_CONSTANT_ENCAPSED_STRING","'hasCaption'",175],"]",["T_WHITESPACE"," ",175],["T_IS_IDENTICAL","===",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'true'",175],",",["T_WHITESPACE","\n        ",175],["T_CONSTANT_ENCAPSED_STRING","'#parents'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'hasCaption'",176],")",",",["T_WHITESPACE","\n      ",176],")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_VARIABLE","$form",180],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",180],"]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_WHITESPACE","\n      ",180],["T_CONSTANT_ENCAPSED_STRING","'#type'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'actions'",181],",",["T_WHITESPACE","\n    ",181],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$form",183],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",183],"]","[",["T_CONSTANT_ENCAPSED_STRING","'save_modal'",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",["T_WHITESPACE","\n      ",183],["T_CONSTANT_ENCAPSED_STRING","'#type'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'submit'",184],",",["T_WHITESPACE","\n      ",184],["T_CONSTANT_ENCAPSED_STRING","'#value'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","t",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",185],")",",",["T_WHITESPACE","\n      ",185],["T_COMMENT","\/\/ No regular submit-handler. This form only works via JavaScript.\n",186],["T_WHITESPACE","      ",187],["T_CONSTANT_ENCAPSED_STRING","'#submit'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",")",",",["T_WHITESPACE","\n      ",187],["T_CONSTANT_ENCAPSED_STRING","'#ajax'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_ARRAY","array",188],"(",["T_WHITESPACE","\n        ",188],["T_CONSTANT_ENCAPSED_STRING","'callback'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'::submitForm'",189],",",["T_WHITESPACE","\n        ",189],["T_CONSTANT_ENCAPSED_STRING","'event'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'click'",190],",",["T_WHITESPACE","\n      ",190],")",",",["T_WHITESPACE","\n    ",191],")",";",["T_WHITESPACE","\n\n    ",192],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$form",194],";",["T_WHITESPACE","\n  ",194],"}",["T_WHITESPACE","\n\n  ",195],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",197],["T_WHITESPACE","\n  ",199],["T_PUBLIC","public",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","submitForm",200],"(",["T_ARRAY","array",200],["T_WHITESPACE"," ",200],"&",["T_VARIABLE","$form",200],",",["T_WHITESPACE"," ",200],["T_STRING","FormStateInterface",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$form_state",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$response",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_NEW","new",201],["T_WHITESPACE"," ",201],["T_STRING","AjaxResponse",201],"(",")",";",["T_WHITESPACE","\n\n    ",201],["T_COMMENT","\/\/ Convert any uploaded files from the FID values to data-entity-uuid\n",203],["T_WHITESPACE","    ",204],["T_COMMENT","\/\/ attributes and set data-entity-type to 'file'.\n",204],["T_WHITESPACE","    ",205],["T_VARIABLE","$fid",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$form_state",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getValue",205],"(",["T_ARRAY","array",205],"(",["T_CONSTANT_ENCAPSED_STRING","'fid'",205],",",["T_WHITESPACE"," ",205],["T_LNUMBER","0",205],")",")",";",["T_WHITESPACE","\n    ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(","!",["T_EMPTY","empty",206],"(",["T_VARIABLE","$fid",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n      ",206],["T_VARIABLE","$file",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","fileStorage",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","load",207],"(",["T_VARIABLE","$fid",207],")",";",["T_WHITESPACE","\n      ",207],["T_VARIABLE","$file_url",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","file_create_url",208],"(",["T_VARIABLE","$file",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getFileUri",208],"(",")",")",";",["T_WHITESPACE","\n      ",208],["T_COMMENT","\/\/ Transform absolute image URLs to relative image URLs: prevent problems\n",209],["T_WHITESPACE","      ",210],["T_COMMENT","\/\/ on multisite set-ups and prevent mixed content errors.\n",210],["T_WHITESPACE","      ",211],["T_VARIABLE","$file_url",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","file_url_transform_relative",211],"(",["T_VARIABLE","$file_url",211],")",";",["T_WHITESPACE","\n      ",211],["T_VARIABLE","$form_state",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","setValue",212],"(",["T_ARRAY","array",212],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",212],",",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'src'",212],")",",",["T_WHITESPACE"," ",212],["T_VARIABLE","$file_url",212],")",";",["T_WHITESPACE","\n      ",212],["T_VARIABLE","$form_state",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","setValue",213],"(",["T_ARRAY","array",213],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'data-entity-uuid'",213],")",",",["T_WHITESPACE"," ",213],["T_VARIABLE","$file",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","uuid",213],"(",")",")",";",["T_WHITESPACE","\n      ",213],["T_VARIABLE","$form_state",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","setValue",214],"(",["T_ARRAY","array",214],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",214],",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'data-entity-type'",214],")",",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'file'",214],")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_COMMENT","\/\/ When the alt attribute is set to two double quotes, transform it to the\n",217],["T_WHITESPACE","    ",218],["T_COMMENT","\/\/ empty string: two double quotes signify \"empty alt attribute\". See above.\n",218],["T_WHITESPACE","    ",219],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_STRING","trim",219],"(",["T_VARIABLE","$form_state",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getValue",219],"(",["T_ARRAY","array",219],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",219],",",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'alt'",219],")",")",")",["T_WHITESPACE"," ",219],["T_IS_IDENTICAL","===",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'\"\"'",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n      ",219],["T_VARIABLE","$form_state",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","setValue",220],"(",["T_ARRAY","array",220],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",220],",",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'alt'",220],")",",",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","''",220],")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$form_state",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getErrors",223],"(",")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n      ",223],["T_UNSET","unset",224],"(",["T_VARIABLE","$form",224],"[",["T_CONSTANT_ENCAPSED_STRING","'#prefix'",224],"]",",",["T_WHITESPACE"," ",224],["T_VARIABLE","$form",224],"[",["T_CONSTANT_ENCAPSED_STRING","'#suffix'",224],"]",")",";",["T_WHITESPACE","\n      ",224],["T_VARIABLE","$form",225],"[",["T_CONSTANT_ENCAPSED_STRING","'status_messages'",225],"]",["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],"[",["T_WHITESPACE","\n        ",225],["T_CONSTANT_ENCAPSED_STRING","'#type'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'status_messages'",226],",",["T_WHITESPACE","\n        ",226],["T_CONSTANT_ENCAPSED_STRING","'#weight'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],"-",["T_LNUMBER","10",227],",",["T_WHITESPACE","\n      ",227],"]",";",["T_WHITESPACE","\n      ",228],["T_VARIABLE","$response",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","addCommand",229],"(",["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_STRING","HtmlCommand",229],"(",["T_CONSTANT_ENCAPSED_STRING","'#editor-image-dialog-form'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$form",229],")",")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n    ",230],["T_ELSE","else",231],["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n      ",231],["T_VARIABLE","$response",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","addCommand",232],"(",["T_NEW","new",232],["T_WHITESPACE"," ",232],["T_STRING","EditorDialogSave",232],"(",["T_VARIABLE","$form_state",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getValues",232],"(",")",")",")",";",["T_WHITESPACE","\n      ",232],["T_VARIABLE","$response",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","addCommand",233],"(",["T_NEW","new",233],["T_WHITESPACE"," ",233],["T_STRING","CloseModalDialogCommand",233],"(",")",")",";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$response",236],";",["T_WHITESPACE","\n  ",236],"}",["T_WHITESPACE","\n\n",237],"}",["T_WHITESPACE","\n",239]]
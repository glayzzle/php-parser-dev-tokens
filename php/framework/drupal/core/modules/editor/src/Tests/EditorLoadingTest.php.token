[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","editor",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","editor",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Editor",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldConfig",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldStorageConfig",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","simpletest",8],["T_NS_SEPARATOR","\\",8],["T_STRING","WebTestBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","filter",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FilterFormat",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests loading of text editors.\n *\n * @group editor\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","EditorLoadingTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","WebTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$modules",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",["T_CONSTANT_ENCAPSED_STRING","'filter'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'editor'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'editor_test'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'node'",23],")",";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * An untrusted user, with access to the 'plain_text' format.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$untrustedUser",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * A normal user with additional access to the 'filtered_html' format.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$normalUser",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * A privileged user with additional access to the 'full_html' format.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",39],["T_WHITESPACE","\n  ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$privilegedUser",44],";",["T_WHITESPACE","\n\n  ",44],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","setUp",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_STRING","parent",47],["T_DOUBLE_COLON","::",47],["T_STRING","setUp",47],"(",")",";",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Let there be T-rex.\n",49],["T_WHITESPACE","    ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Drupal",50],["T_DOUBLE_COLON","::",50],["T_STRING","state",50],"(",")",["T_OBJECT_OPERATOR","->",50],["T_STRING","set",50],"(",["T_CONSTANT_ENCAPSED_STRING","'editor_test_give_me_a_trex_thanks'",50],",",["T_WHITESPACE"," ",50],["T_STRING","TRUE",50],")",";",["T_WHITESPACE","\n    ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Drupal",51],["T_DOUBLE_COLON","::",51],["T_STRING","service",51],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.editor'",51],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","clearCachedDefinitions",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Add text formats.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$filtered_html_format",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","FilterFormat",54],["T_DOUBLE_COLON","::",54],["T_STRING","create",54],"(",["T_ARRAY","array",54],"(",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'format'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",55],",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'name'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Filtered HTML'",56],",",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'weight'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_LNUMBER","0",57],",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'filters'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",",",["T_WHITESPACE","\n    ",58],")",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$filtered_html_format",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","save",60],"(",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$full_html_format",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","FilterFormat",61],["T_DOUBLE_COLON","::",61],["T_STRING","create",61],"(",["T_ARRAY","array",61],"(",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'format'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'full_html'",62],",",["T_WHITESPACE","\n      ",62],["T_CONSTANT_ENCAPSED_STRING","'name'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'Full HTML'",63],",",["T_WHITESPACE","\n      ",63],["T_CONSTANT_ENCAPSED_STRING","'weight'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_LNUMBER","1",64],",",["T_WHITESPACE","\n      ",64],["T_CONSTANT_ENCAPSED_STRING","'filters'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",")",",",["T_WHITESPACE","\n    ",65],")",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$full_html_format",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","save",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Create article node type.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","drupalCreateContentType",70],"(",["T_ARRAY","array",70],"(",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'type'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'article'",71],",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'name'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'Article'",72],",",["T_WHITESPACE","\n    ",72],")",")",";",["T_WHITESPACE","\n\n    ",73],["T_COMMENT","\/\/ Create page node type, but remove the body.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","drupalCreateContentType",76],"(",["T_ARRAY","array",76],"(",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'type'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'page'",77],",",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'name'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'Page'",78],",",["T_WHITESPACE","\n    ",78],")",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$body",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","FieldConfig",80],["T_DOUBLE_COLON","::",80],["T_STRING","loadByName",80],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'page'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'body'",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$body",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","delete",81],"(",")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Create a formatted text field, which uses an <input type=\"text\">.\n",83],["T_WHITESPACE","    ",84],["T_STRING","FieldStorageConfig",84],["T_DOUBLE_COLON","::",84],["T_STRING","create",84],"(",["T_ARRAY","array",84],"(",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'field_name'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'field_text'",85],",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'node'",86],",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'type'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'text'",87],",",["T_WHITESPACE","\n    ",87],")",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","save",88],"(",")",";",["T_WHITESPACE","\n\n    ",88],["T_STRING","FieldConfig",90],["T_DOUBLE_COLON","::",90],["T_STRING","create",90],"(",["T_ARRAY","array",90],"(",["T_WHITESPACE","\n      ",90],["T_CONSTANT_ENCAPSED_STRING","'field_name'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'field_text'",91],",",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'node'",92],",",["T_WHITESPACE","\n      ",92],["T_CONSTANT_ENCAPSED_STRING","'label'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'Textfield'",93],",",["T_WHITESPACE","\n      ",93],["T_CONSTANT_ENCAPSED_STRING","'bundle'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'page'",94],",",["T_WHITESPACE","\n    ",94],")",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","save",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_STRING","entity_get_form_display",97],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'page'",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'default'",97],")",["T_WHITESPACE","\n      ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","setComponent",98],"(",["T_CONSTANT_ENCAPSED_STRING","'field_text'",98],")",["T_WHITESPACE","\n      ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","save",99],"(",")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Create 3 users, each with access to different text formats.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","untrustedUser",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","drupalCreateUser",102],"(",["T_ARRAY","array",102],"(",["T_CONSTANT_ENCAPSED_STRING","'create article content'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'edit any article content'",102],")",")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","normalUser",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","drupalCreateUser",103],"(",["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'create article content'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'edit any article content'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'use text format filtered_html'",103],")",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","privilegedUser",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","drupalCreateUser",104],"(",["T_ARRAY","array",104],"(",["T_CONSTANT_ENCAPSED_STRING","'create article content'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'edit any article content'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'create page content'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'edit any page content'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'use text format filtered_html'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'use text format full_html'",104],")",")",";",["T_WHITESPACE","\n  ",104],"}",["T_WHITESPACE","\n\n  ",105],["T_DOC_COMMENT","\/**\n   * Tests loading of text editors.\n   *\/",107],["T_WHITESPACE","\n  ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","testLoading",110],"(",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n    ",110],["T_COMMENT","\/\/ Only associate a text editor with the \"Full HTML\" text format.\n",111],["T_WHITESPACE","    ",112],["T_VARIABLE","$editor",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Editor",112],["T_DOUBLE_COLON","::",112],["T_STRING","create",112],"(","[",["T_WHITESPACE","\n      ",112],["T_CONSTANT_ENCAPSED_STRING","'format'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'full_html'",113],",",["T_WHITESPACE","\n      ",113],["T_CONSTANT_ENCAPSED_STRING","'editor'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",114],",",["T_WHITESPACE","\n      ",114],["T_CONSTANT_ENCAPSED_STRING","'image_upload'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_WHITESPACE","\n        ",115],["T_CONSTANT_ENCAPSED_STRING","'status'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_STRING","FALSE",116],",",["T_WHITESPACE","\n        ",116],["T_CONSTANT_ENCAPSED_STRING","'scheme'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_STRING","file_default_scheme",117],"(",")",",",["T_WHITESPACE","\n        ",117],["T_CONSTANT_ENCAPSED_STRING","'directory'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'inline-images'",118],",",["T_WHITESPACE","\n        ",118],["T_CONSTANT_ENCAPSED_STRING","'max_size'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","''",119],",",["T_WHITESPACE","\n        ",119],["T_CONSTANT_ENCAPSED_STRING","'max_dimensions'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_CONSTANT_ENCAPSED_STRING","'width'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","''",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'height'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","''",120],")",",",["T_WHITESPACE","\n      ",120],")",["T_WHITESPACE","\n    ",121],"]",")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$editor",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","save",123],"(",")",";",["T_WHITESPACE","\n\n    ",123],["T_COMMENT","\/\/ The normal user:\n",125],["T_WHITESPACE","    ",126],["T_COMMENT","\/\/ - has access to 2 text formats;\n",126],["T_WHITESPACE","    ",127],["T_COMMENT","\/\/ - doesn't have access to the full_html text format, so: no text editor.\n",127],["T_WHITESPACE","    ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","drupalLogin",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","normalUser",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","drupalGet",129],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",129],")",";",["T_WHITESPACE","\n    ",129],["T_LIST","list",130],"(",["T_WHITESPACE"," ",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$editor_settings_present",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$editor_js_present",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$body",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$format_selector",130],")",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getThingsToCheck",130],"(",["T_CONSTANT_ENCAPSED_STRING","'body'",130],")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertFalse",131],"(",["T_VARIABLE","$editor_settings_present",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'No Text Editor module settings.'",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertFalse",132],"(",["T_VARIABLE","$editor_js_present",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'No Text Editor JavaScript.'",132],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertTrue",133],"(",["T_STRING","count",133],"(",["T_VARIABLE","$body",133],")",["T_WHITESPACE"," ",133],["T_IS_IDENTICAL","===",133],["T_WHITESPACE"," ",133],["T_LNUMBER","1",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'A body field exists.'",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertTrue",134],"(",["T_STRING","count",134],"(",["T_VARIABLE","$format_selector",134],")",["T_WHITESPACE"," ",134],["T_IS_IDENTICAL","===",134],["T_WHITESPACE"," ",134],["T_LNUMBER","0",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'No text format selector exists on the page because the user only has access to a single format.'",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","drupalLogout",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","normalUser",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ The privileged user:\n",137],["T_WHITESPACE","    ",138],["T_COMMENT","\/\/ - has access to 2 text formats (and the fallback format);\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ - does have access to the full_html text format, so: Unicorn text editor.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","drupalLogin",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","privilegedUser",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","drupalGet",141],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",141],")",";",["T_WHITESPACE","\n    ",141],["T_LIST","list",142],"(",["T_VARIABLE","$settings",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$editor_settings_present",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$editor_js_present",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$body",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$format_selector",142],")",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getThingsToCheck",142],"(",["T_CONSTANT_ENCAPSED_STRING","'body'",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$expected",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_CONSTANT_ENCAPSED_STRING","'formats'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_CONSTANT_ENCAPSED_STRING","'full_html'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_WHITESPACE","\n      ",143],["T_CONSTANT_ENCAPSED_STRING","'format'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'full_html'",144],",",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'editor'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",145],",",["T_WHITESPACE","\n      ",145],["T_CONSTANT_ENCAPSED_STRING","'editorSettings'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'ponyModeEnabled'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_STRING","TRUE",146],")",",",["T_WHITESPACE","\n      ",146],["T_CONSTANT_ENCAPSED_STRING","'editorSupportsContentFiltering'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_STRING","TRUE",147],",",["T_WHITESPACE","\n      ",147],["T_CONSTANT_ENCAPSED_STRING","'isXssSafe'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_STRING","FALSE",148],",",["T_WHITESPACE","\n    ",148],")",")",")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertTrue",150],"(",["T_VARIABLE","$editor_settings_present",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","\"Text Editor module's JavaScript settings are on the page.\"",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertIdentical",151],"(",["T_VARIABLE","$expected",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$settings",151],"[",["T_CONSTANT_ENCAPSED_STRING","'editor'",151],"]",",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","\"Text Editor module's JavaScript settings on the page are correct.\"",151],")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertTrue",152],"(",["T_VARIABLE","$editor_js_present",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'Text Editor JavaScript is present.'",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertTrue",153],"(",["T_STRING","count",153],"(",["T_VARIABLE","$body",153],")",["T_WHITESPACE"," ",153],["T_IS_IDENTICAL","===",153],["T_WHITESPACE"," ",153],["T_LNUMBER","1",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'A body field exists.'",153],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertTrue",154],"(",["T_STRING","count",154],"(",["T_VARIABLE","$format_selector",154],")",["T_WHITESPACE"," ",154],["T_IS_IDENTICAL","===",154],["T_WHITESPACE"," ",154],["T_LNUMBER","1",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'A single text format selector exists on the page.'",154],")",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$specific_format_selector",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","xpath",155],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[contains(@class, \"filter-list\") and @data-editor-for=\"edit-body-0-value\"]'",155],")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","assertTrue",156],"(",["T_STRING","count",156],"(",["T_VARIABLE","$specific_format_selector",156],")",["T_WHITESPACE"," ",156],["T_IS_IDENTICAL","===",156],["T_WHITESPACE"," ",156],["T_LNUMBER","1",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'A single text format selector exists on the page and has a \"data-editor-for\" attribute with the correct value.'",156],")",";",["T_WHITESPACE","\n\n    ",156],["T_COMMENT","\/\/ Load the editor image dialog form and make sure it does not fatal.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","drupalGet",159],"(",["T_CONSTANT_ENCAPSED_STRING","'editor\/dialog\/image\/full_html'",159],")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","assertResponse",160],"(",["T_LNUMBER","200",160],")",";",["T_WHITESPACE","\n\n    ",160],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","drupalLogout",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","privilegedUser",162],")",";",["T_WHITESPACE","\n\n    ",162],["T_COMMENT","\/\/ Also associate a text editor with the \"Plain Text\" text format.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$editor",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","Editor",165],["T_DOUBLE_COLON","::",165],["T_STRING","create",165],"(","[",["T_WHITESPACE","\n      ",165],["T_CONSTANT_ENCAPSED_STRING","'format'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'plain_text'",166],",",["T_WHITESPACE","\n      ",166],["T_CONSTANT_ENCAPSED_STRING","'editor'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",167],",",["T_WHITESPACE","\n    ",167],"]",")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$editor",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","save",169],"(",")",";",["T_WHITESPACE","\n\n    ",169],["T_COMMENT","\/\/ The untrusted user:\n",171],["T_WHITESPACE","    ",172],["T_COMMENT","\/\/ - has access to 1 text format (plain_text);\n",172],["T_WHITESPACE","    ",173],["T_COMMENT","\/\/ - has access to the plain_text text format, so: Unicorn text editor.\n",173],["T_WHITESPACE","    ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","drupalLogin",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","untrustedUser",174],")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","drupalGet",175],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",175],")",";",["T_WHITESPACE","\n    ",175],["T_LIST","list",176],"(",["T_VARIABLE","$settings",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$editor_settings_present",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$editor_js_present",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$body",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$format_selector",176],")",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getThingsToCheck",176],"(",["T_CONSTANT_ENCAPSED_STRING","'body'",176],")",";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$expected",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'formats'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'plain_text'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_WHITESPACE","\n      ",177],["T_CONSTANT_ENCAPSED_STRING","'format'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'plain_text'",178],",",["T_WHITESPACE","\n      ",178],["T_CONSTANT_ENCAPSED_STRING","'editor'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",179],",",["T_WHITESPACE","\n      ",179],["T_CONSTANT_ENCAPSED_STRING","'editorSettings'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_CONSTANT_ENCAPSED_STRING","'ponyModeEnabled'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_STRING","TRUE",180],")",",",["T_WHITESPACE","\n      ",180],["T_CONSTANT_ENCAPSED_STRING","'editorSupportsContentFiltering'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_STRING","TRUE",181],",",["T_WHITESPACE","\n      ",181],["T_CONSTANT_ENCAPSED_STRING","'isXssSafe'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_STRING","FALSE",182],",",["T_WHITESPACE","\n    ",182],")",")",")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertTrue",184],"(",["T_VARIABLE","$editor_settings_present",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","\"Text Editor module's JavaScript settings are on the page.\"",184],")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","assertIdentical",185],"(",["T_VARIABLE","$expected",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$settings",185],"[",["T_CONSTANT_ENCAPSED_STRING","'editor'",185],"]",",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\"Text Editor module's JavaScript settings on the page are correct.\"",185],")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertTrue",186],"(",["T_VARIABLE","$editor_js_present",186],",",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'Text Editor JavaScript is present.'",186],")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","assertTrue",187],"(",["T_STRING","count",187],"(",["T_VARIABLE","$body",187],")",["T_WHITESPACE"," ",187],["T_IS_IDENTICAL","===",187],["T_WHITESPACE"," ",187],["T_LNUMBER","1",187],",",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'A body field exists.'",187],")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","assertTrue",188],"(",["T_STRING","count",188],"(",["T_VARIABLE","$format_selector",188],")",["T_WHITESPACE"," ",188],["T_IS_IDENTICAL","===",188],["T_WHITESPACE"," ",188],["T_LNUMBER","0",188],",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'No text format selector exists on the page.'",188],")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$hidden_input",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","xpath",189],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"hidden\" and @value=\"plain_text\" and @data-editor-for=\"edit-body-0-value\"]'",189],")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertTrue",190],"(",["T_STRING","count",190],"(",["T_VARIABLE","$hidden_input",190],")",["T_WHITESPACE"," ",190],["T_IS_IDENTICAL","===",190],["T_WHITESPACE"," ",190],["T_LNUMBER","1",190],",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'A single text format hidden input exists on the page and has a \"data-editor-for\" attribute with the correct value.'",190],")",";",["T_WHITESPACE","\n\n    ",190],["T_COMMENT","\/\/ Create an \"article\" node that uses the full_html text format, then try\n",192],["T_WHITESPACE","    ",193],["T_COMMENT","\/\/ to let the untrusted user edit it.\n",193],["T_WHITESPACE","    ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","drupalCreateNode",194],"(",["T_ARRAY","array",194],"(",["T_WHITESPACE","\n      ",194],["T_CONSTANT_ENCAPSED_STRING","'type'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'article'",195],",",["T_WHITESPACE","\n      ",195],["T_CONSTANT_ENCAPSED_STRING","'body'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_ARRAY","array",196],"(",["T_WHITESPACE","\n        ",196],["T_ARRAY","array",197],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","randomMachineName",197],"(",["T_LNUMBER","32",197],")",",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'format'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'full_html'",197],")",["T_WHITESPACE","\n      ",197],")",",",["T_WHITESPACE","\n    ",198],")",")",";",["T_WHITESPACE","\n\n    ",199],["T_COMMENT","\/\/ The untrusted user tries to edit content that is written in a text format\n",201],["T_WHITESPACE","    ",202],["T_COMMENT","\/\/ that (s)he is not allowed to use. The editor is still loaded. CKEditor,\n",202],["T_WHITESPACE","    ",203],["T_COMMENT","\/\/ for example, supports being loaded in a disabled state.\n",203],["T_WHITESPACE","    ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","drupalGet",204],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1\/edit'",204],")",";",["T_WHITESPACE","\n    ",204],["T_LIST","list",205],"(",["T_WHITESPACE"," ",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$editor_settings_present",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$editor_js_present",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$body",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$format_selector",205],")",["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getThingsToCheck",205],"(",["T_CONSTANT_ENCAPSED_STRING","'body'",205],")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","assertTrue",206],"(",["T_VARIABLE","$editor_settings_present",206],",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'Text Editor module settings.'",206],")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","assertTrue",207],"(",["T_VARIABLE","$editor_js_present",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'Text Editor JavaScript.'",207],")",";",["T_WHITESPACE","\n    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","assertTrue",208],"(",["T_STRING","count",208],"(",["T_VARIABLE","$body",208],")",["T_WHITESPACE"," ",208],["T_IS_IDENTICAL","===",208],["T_WHITESPACE"," ",208],["T_LNUMBER","1",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'A body field exists.'",208],")",";",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","assertFieldByXPath",209],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/textarea[@id=\"edit-body-0-value\" and @disabled=\"disabled\"]'",209],",",["T_WHITESPACE"," ",209],["T_STRING","t",209],"(",["T_CONSTANT_ENCAPSED_STRING","'This field has been disabled because you do not have sufficient permissions to edit it.'",209],")",",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'Text format access denied message found.'",209],")",";",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","assertTrue",210],"(",["T_STRING","count",210],"(",["T_VARIABLE","$format_selector",210],")",["T_WHITESPACE"," ",210],["T_IS_IDENTICAL","===",210],["T_WHITESPACE"," ",210],["T_LNUMBER","0",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'No text format selector exists on the page.'",210],")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$hidden_input",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","xpath",211],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@type=\"hidden\" and contains(@class, \"editor\")]'",211],")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","assertTrue",212],"(",["T_STRING","count",212],"(",["T_VARIABLE","$hidden_input",212],")",["T_WHITESPACE"," ",212],["T_IS_IDENTICAL","===",212],["T_WHITESPACE"," ",212],["T_LNUMBER","0",212],",",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'A single text format hidden input does not exist on the page.'",212],")",";",["T_WHITESPACE","\n  ",212],"}",["T_WHITESPACE","\n\n  ",213],["T_DOC_COMMENT","\/**\n   * Test supported element types.\n   *\/",215],["T_WHITESPACE","\n  ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","testSupportedElementTypes",218],"(",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n    ",218],["T_COMMENT","\/\/ Associate the unicorn text editor with the \"Full HTML\" text format.\n",219],["T_WHITESPACE","    ",220],["T_VARIABLE","$editor",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","Editor",220],["T_DOUBLE_COLON","::",220],["T_STRING","create",220],"(","[",["T_WHITESPACE","\n      ",220],["T_CONSTANT_ENCAPSED_STRING","'format'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'full_html'",221],",",["T_WHITESPACE","\n      ",221],["T_CONSTANT_ENCAPSED_STRING","'editor'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'unicorn'",222],",",["T_WHITESPACE","\n      ",222],["T_CONSTANT_ENCAPSED_STRING","'image_upload'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",["T_WHITESPACE","\n        ",223],["T_CONSTANT_ENCAPSED_STRING","'status'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_STRING","FALSE",224],",",["T_WHITESPACE","\n        ",224],["T_CONSTANT_ENCAPSED_STRING","'scheme'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_STRING","file_default_scheme",225],"(",")",",",["T_WHITESPACE","\n        ",225],["T_CONSTANT_ENCAPSED_STRING","'directory'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'inline-images'",226],",",["T_WHITESPACE","\n        ",226],["T_CONSTANT_ENCAPSED_STRING","'max_size'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","''",227],",",["T_WHITESPACE","\n        ",227],["T_CONSTANT_ENCAPSED_STRING","'max_dimensions'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_ARRAY","array",228],"(",["T_CONSTANT_ENCAPSED_STRING","'width'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","''",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'height'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","''",228],")",",",["T_WHITESPACE","\n      ",228],")",["T_WHITESPACE","\n    ",229],"]",")",";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$editor",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","save",231],"(",")",";",["T_WHITESPACE","\n\n    ",231],["T_COMMENT","\/\/ Create an \"page\" node that uses the full_html text format.\n",233],["T_WHITESPACE","    ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","drupalCreateNode",234],"(",["T_ARRAY","array",234],"(",["T_WHITESPACE","\n      ",234],["T_CONSTANT_ENCAPSED_STRING","'type'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'page'",235],",",["T_WHITESPACE","\n      ",235],["T_CONSTANT_ENCAPSED_STRING","'field_text'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_ARRAY","array",236],"(",["T_WHITESPACE","\n        ",236],["T_ARRAY","array",237],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","randomMachineName",237],"(",["T_LNUMBER","32",237],")",",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'format'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'full_html'",237],")",["T_WHITESPACE","\n      ",237],")",",",["T_WHITESPACE","\n    ",238],")",")",";",["T_WHITESPACE","\n\n    ",239],["T_COMMENT","\/\/ Assert the unicorn editor works with textfields.\n",241],["T_WHITESPACE","    ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","drupalLogin",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","privilegedUser",242],")",";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","drupalGet",243],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1\/edit'",243],")",";",["T_WHITESPACE","\n    ",243],["T_LIST","list",244],"(",["T_WHITESPACE"," ",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$editor_settings_present",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$editor_js_present",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$field",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$format_selector",244],")",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getThingsToCheck",244],"(",["T_CONSTANT_ENCAPSED_STRING","'field-text'",244],",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'input'",244],")",";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","assertTrue",245],"(",["T_VARIABLE","$editor_settings_present",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","\"Text Editor module's JavaScript settings are on the page.\"",245],")",";",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","assertTrue",246],"(",["T_VARIABLE","$editor_js_present",246],",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'Text Editor JavaScript is present.'",246],")",";",["T_WHITESPACE","\n    ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","assertTrue",247],"(",["T_STRING","count",247],"(",["T_VARIABLE","$field",247],")",["T_WHITESPACE"," ",247],["T_IS_IDENTICAL","===",247],["T_WHITESPACE"," ",247],["T_LNUMBER","1",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'A text field exists.'",247],")",";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","assertTrue",248],"(",["T_STRING","count",248],"(",["T_VARIABLE","$format_selector",248],")",["T_WHITESPACE"," ",248],["T_IS_IDENTICAL","===",248],["T_WHITESPACE"," ",248],["T_LNUMBER","1",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'A single text format selector exists on the page.'",248],")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$specific_format_selector",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","xpath",249],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[contains(@class, \"filter-list\") and contains(@class, \"editor\") and @data-editor-for=\"edit-field-text-0-value\"]'",249],")",";",["T_WHITESPACE","\n    ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertTrue",250],"(",["T_STRING","count",250],"(",["T_VARIABLE","$specific_format_selector",250],")",["T_WHITESPACE"," ",250],["T_IS_IDENTICAL","===",250],["T_WHITESPACE"," ",250],["T_LNUMBER","1",250],",",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'A single text format selector exists on the page and has the \"editor\" class and a \"data-editor-for\" attribute with the correct value.'",250],")",";",["T_WHITESPACE","\n\n    ",250],["T_COMMENT","\/\/ Associate the trex text editor with the \"Full HTML\" text format.\n",252],["T_WHITESPACE","    ",253],["T_VARIABLE","$editor",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","delete",253],"(",")",";",["T_WHITESPACE","\n    ",253],["T_STRING","Editor",254],["T_DOUBLE_COLON","::",254],["T_STRING","create",254],"(","[",["T_WHITESPACE","\n      ",254],["T_CONSTANT_ENCAPSED_STRING","'format'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'full_html'",255],",",["T_WHITESPACE","\n      ",255],["T_CONSTANT_ENCAPSED_STRING","'editor'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'trex'",256],",",["T_WHITESPACE","\n    ",256],"]",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","save",257],"(",")",";",["T_WHITESPACE","\n\n    ",257],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","drupalGet",259],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1\/edit'",259],")",";",["T_WHITESPACE","\n    ",259],["T_LIST","list",260],"(",["T_WHITESPACE"," ",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$editor_settings_present",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$editor_js_present",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$field",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$format_selector",260],")",["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getThingsToCheck",260],"(",["T_CONSTANT_ENCAPSED_STRING","'field-text'",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'input'",260],")",";",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertFalse",261],"(",["T_VARIABLE","$editor_settings_present",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","\"Text Editor module's JavaScript settings are not on the page.\"",261],")",";",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","assertFalse",262],"(",["T_VARIABLE","$editor_js_present",262],",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'Text Editor JavaScript is not present.'",262],")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","assertTrue",263],"(",["T_STRING","count",263],"(",["T_VARIABLE","$field",263],")",["T_WHITESPACE"," ",263],["T_IS_IDENTICAL","===",263],["T_WHITESPACE"," ",263],["T_LNUMBER","1",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'A text field exists.'",263],")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","assertTrue",264],"(",["T_STRING","count",264],"(",["T_VARIABLE","$format_selector",264],")",["T_WHITESPACE"," ",264],["T_IS_IDENTICAL","===",264],["T_WHITESPACE"," ",264],["T_LNUMBER","1",264],",",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'A single text format selector exists on the page.'",264],")",";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$specific_format_selector",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","xpath",265],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[contains(@class, \"filter-list\") and contains(@class, \"editor\") and @data-editor-for=\"edit-field-text-0-value\"]'",265],")",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","assertFalse",266],"(",["T_STRING","count",266],"(",["T_VARIABLE","$specific_format_selector",266],")",["T_WHITESPACE"," ",266],["T_IS_IDENTICAL","===",266],["T_WHITESPACE"," ",266],["T_LNUMBER","1",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'A single text format selector exists on the page and has the \"editor\" class and a \"data-editor-for\" attribute with the correct value.'",266],")",";",["T_WHITESPACE","\n  ",266],"}",["T_WHITESPACE","\n\n  ",267],["T_PROTECTED","protected",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","getThingsToCheck",269],"(",["T_VARIABLE","$field_name",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$type",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'textarea'",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$settings",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getDrupalSettings",270],"(",")",";",["T_WHITESPACE","\n    ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_ARRAY","array",271],"(",["T_WHITESPACE","\n      ",271],["T_COMMENT","\/\/ JavaScript settings.\n",272],["T_WHITESPACE","      ",273],["T_VARIABLE","$settings",273],",",["T_WHITESPACE","\n      ",273],["T_COMMENT","\/\/ Editor.module's JS settings present.\n",274],["T_WHITESPACE","      ",275],["T_ISSET","isset",275],"(",["T_VARIABLE","$settings",275],"[",["T_CONSTANT_ENCAPSED_STRING","'editor'",275],"]",")",",",["T_WHITESPACE","\n      ",275],["T_COMMENT","\/\/ Editor.module's JS present.\n",276],["T_WHITESPACE","      ",277],["T_STRING","strpos",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getRawContent",277],"(",")",",",["T_WHITESPACE"," ",277],["T_STRING","drupal_get_path",277],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",277],",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'editor'",277],")",["T_WHITESPACE"," ",277],".",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'\/js\/editor.js'",277],")",["T_WHITESPACE"," ",277],["T_IS_NOT_IDENTICAL","!==",277],["T_WHITESPACE"," ",277],["T_STRING","FALSE",277],",",["T_WHITESPACE","\n      ",277],["T_COMMENT","\/\/ Body field.\n",278],["T_WHITESPACE","      ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","xpath",279],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/'",279],["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_VARIABLE","$type",279],["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'[@id=\"edit-'",279],["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_VARIABLE","$field_name",279],["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'-0-value\"]'",279],")",",",["T_WHITESPACE","\n      ",279],["T_COMMENT","\/\/ Format selector.\n",280],["T_WHITESPACE","      ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","xpath",281],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[contains(@class, \"filter-list\")]'",281],")",",",["T_WHITESPACE","\n    ",281],")",";",["T_WHITESPACE","\n  ",282],"}",["T_WHITESPACE","\n\n",283],"}",["T_WHITESPACE","\n",285]]
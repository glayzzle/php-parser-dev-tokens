[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","contact",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Access",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Access",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AccessResult",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigFactoryInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Routing",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Access",7],["T_NS_SEPARATOR","\\",7],["T_STRING","AccessInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Session",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AccountInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","user",9],["T_NS_SEPARATOR","\\",9],["T_STRING","UserDataInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","user",10],["T_NS_SEPARATOR","\\",10],["T_STRING","UserInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Access check for contact_personal_page route.\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ContactPageAccess",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","AccessInterface",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * The contact settings config object.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigFactoryInterface\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$configFactory",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * The user data service.\n   *\n   * @var \\Drupal\\user\\UserDataInterface;\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$userData",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Constructs a ContactPageAccess instance.\n   *\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The config factory.\n   * @param \\Drupal\\user\\UserDataInterface $user_data\n   *   The user data service.\n   *\/",31],["T_WHITESPACE","\n  ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","__construct",39],"(",["T_STRING","ConfigFactoryInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$config_factory",39],",",["T_WHITESPACE"," ",39],["T_STRING","UserDataInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$user_data",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","configFactory",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$config_factory",40],";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","userData",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$user_data",41],";",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Checks access to the given user's contact page.\n   *\n   * @param \\Drupal\\user\\UserInterface $user\n   *   The user being contacted.\n   * @param \\Drupal\\Core\\Session\\AccountInterface $account\n   *   The currently logged in account.\n   *\n   * @return \\Drupal\\Core\\Access\\AccessResultInterface\n   *   The access result.\n   *\/",44],["T_WHITESPACE","\n  ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","access",55],"(",["T_STRING","UserInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$user",55],",",["T_WHITESPACE"," ",55],["T_STRING","AccountInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$account",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$contact_account",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$user",56],";",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Anonymous users cannot have contact forms.\n",58],["T_WHITESPACE","    ",59],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$contact_account",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","isAnonymous",59],"(",")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n      ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_STRING","AccessResult",60],["T_DOUBLE_COLON","::",60],["T_STRING","forbidden",60],"(",")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Users may not contact themselves by default, hence this requires user\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ granularity for caching.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$access",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","AccessResult",65],["T_DOUBLE_COLON","::",65],["T_STRING","neutral",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","cachePerUser",65],"(",")",";",["T_WHITESPACE","\n    ",65],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$account",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","id",66],"(",")",["T_WHITESPACE"," ",66],["T_IS_EQUAL","==",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$contact_account",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","id",66],"(",")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n      ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$access",67],";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ User administrators should always have access to personal contact forms.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$permission_access",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","AccessResult",71],["T_DOUBLE_COLON","::",71],["T_STRING","allowedIfHasPermission",71],"(",["T_VARIABLE","$account",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'administer users'",71],")",";",["T_WHITESPACE","\n    ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$permission_access",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","isAllowed",72],"(",")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n      ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$access",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","orIf",73],"(",["T_VARIABLE","$permission_access",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ If requested user has been blocked, do not allow users to contact them.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$access",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","addCacheableDependency",77],"(",["T_VARIABLE","$contact_account",77],")",";",["T_WHITESPACE","\n    ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$contact_account",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","isBlocked",78],"(",")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n      ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$access",79],";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_COMMENT","\/\/ Forbid access if the requested user has disabled their contact form.\n",82],["T_WHITESPACE","    ",83],["T_VARIABLE","$account_data",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","userData",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","get",83],"(",["T_CONSTANT_ENCAPSED_STRING","'contact'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$contact_account",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","id",83],"(",")",",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'enabled'",83],")",";",["T_WHITESPACE","\n    ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_ISSET","isset",84],"(",["T_VARIABLE","$account_data",84],")",["T_WHITESPACE"," ",84],["T_BOOLEAN_AND","&&",84],["T_WHITESPACE"," ",84],"!",["T_VARIABLE","$account_data",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n      ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$access",85],";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ If the requested user did not save a preference yet, deny access if the\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ configured default is disabled.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$contact_settings",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","configFactory",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","get",90],"(",["T_CONSTANT_ENCAPSED_STRING","'contact.settings'",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$access",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","cacheUntilConfigurationChanges",91],"(",["T_VARIABLE","$contact_settings",91],")",";",["T_WHITESPACE","\n    ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(","!",["T_ISSET","isset",92],"(",["T_VARIABLE","$account_data",92],")",["T_WHITESPACE"," ",92],["T_BOOLEAN_AND","&&",92],["T_WHITESPACE"," ",92],"!",["T_VARIABLE","$contact_settings",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","get",92],"(",["T_CONSTANT_ENCAPSED_STRING","'user_default_enabled'",92],")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n      ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$access",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$access",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","orIf",96],"(",["T_STRING","AccessResult",96],["T_DOUBLE_COLON","::",96],["T_STRING","allowedIfHasPermission",96],"(",["T_VARIABLE","$account",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'access user contact forms'",96],")",")",";",["T_WHITESPACE","\n  ",96],"}",["T_WHITESPACE","\n\n",97],"}",["T_WHITESPACE","\n",99]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","contact",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Views",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ViewTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","views",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ViewTestData",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","user",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","User",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests the contact link field.\n *\n * @group contact\n * @see \\Drupal\\contact\\Plugin\\views\\field\\ContactLink.\n *\/",10],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","ContactLinkTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","ViewTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Stores the user data service used by the test.\n   *\n   * @var \\Drupal\\user\\UserDataInterface\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$userData",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_STATIC","static",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$modules",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",["T_CONSTANT_ENCAPSED_STRING","'contact_test_views'",30],")",";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_STATIC","static",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$testViews",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",["T_CONSTANT_ENCAPSED_STRING","'test_contact_link'",37],")",";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","setUp",42],"(",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_STRING","parent",43],["T_DOUBLE_COLON","::",43],["T_STRING","setUp",43],"(",")",";",["T_WHITESPACE","\n\n    ",43],["T_STRING","ViewTestData",45],["T_DOUBLE_COLON","::",45],["T_STRING","createTestViews",45],"(",["T_STRING","get_class",45],"(",["T_VARIABLE","$this",45],")",",",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_CONSTANT_ENCAPSED_STRING","'contact_test_views'",45],")",")",";",["T_WHITESPACE","\n\n    ",45],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","userData",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","container",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","get",47],"(",["T_CONSTANT_ENCAPSED_STRING","'user.data'",47],")",";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Tests contact link.\n   *\/",50],["T_WHITESPACE","\n  ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testContactLink",53],"(",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$accounts",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$accounts",55],"[",["T_CONSTANT_ENCAPSED_STRING","'root'",55],"]",["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","User",55],["T_DOUBLE_COLON","::",55],["T_STRING","load",55],"(",["T_LNUMBER","1",55],")",";",["T_WHITESPACE","\n    ",55],["T_COMMENT","\/\/ Create an account with access to all contact pages.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$admin_account",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalCreateUser",57],"(",["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'administer users'",57],")",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$accounts",58],"[",["T_CONSTANT_ENCAPSED_STRING","'admin'",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$admin_account",58],";",["T_WHITESPACE","\n    ",58],["T_COMMENT","\/\/ Create an account with no access to contact pages.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$no_contact_account",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","drupalCreateUser",60],"(",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$accounts",61],"[",["T_CONSTANT_ENCAPSED_STRING","'no_contact'",61],"]",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$no_contact_account",61],";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Create an account with access to contact pages.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$contact_account",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","drupalCreateUser",64],"(",["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'access user contact forms'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$accounts",65],"[",["T_CONSTANT_ENCAPSED_STRING","'contact'",65],"]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$contact_account",65],";",["T_WHITESPACE","\n\n    ",65],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","drupalLogin",67],"(",["T_VARIABLE","$admin_account",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","drupalGet",68],"(",["T_CONSTANT_ENCAPSED_STRING","'test-contact-link'",68],")",";",["T_WHITESPACE","\n    ",68],["T_COMMENT","\/\/ The admin user has access to all contact links beside his own.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertContactLinks",70],"(",["T_VARIABLE","$accounts",70],",",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_CONSTANT_ENCAPSED_STRING","'root'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'no_contact'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'contact'",70],")",")",";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","drupalLogin",72],"(",["T_VARIABLE","$no_contact_account",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","drupalGet",73],"(",["T_CONSTANT_ENCAPSED_STRING","'test-contact-link'",73],")",";",["T_WHITESPACE","\n    ",73],["T_COMMENT","\/\/ Ensure that the user without the permission doesn't see any link.\n",74],["T_WHITESPACE","    ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertContactLinks",75],"(",["T_VARIABLE","$accounts",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",")",";",["T_WHITESPACE","\n\n    ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","drupalLogin",77],"(",["T_VARIABLE","$contact_account",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","drupalGet",78],"(",["T_CONSTANT_ENCAPSED_STRING","'test-contact-link'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertContactLinks",79],"(",["T_VARIABLE","$accounts",79],",",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_CONSTANT_ENCAPSED_STRING","'root'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'admin'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'no_contact'",79],")",")",";",["T_WHITESPACE","\n\n    ",79],["T_COMMENT","\/\/ Disable contact link for no_contact.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","userData",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","set",82],"(",["T_CONSTANT_ENCAPSED_STRING","'contact'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$no_contact_account",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","id",82],"(",")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'enabled'",82],",",["T_WHITESPACE"," ",82],["T_STRING","FALSE",82],")",";",["T_WHITESPACE","\n    ",82],["T_COMMENT","\/\/ @todo Remove cache invalidation in https:\/\/www.drupal.org\/node\/2477903.\n",83],["T_WHITESPACE","    ",84],["T_STRING","Cache",84],["T_DOUBLE_COLON","::",84],["T_STRING","invalidateTags",84],"(",["T_VARIABLE","$no_contact_account",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getCacheTagsToInvalidate",84],"(",")",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","drupalGet",85],"(",["T_CONSTANT_ENCAPSED_STRING","'test-contact-link'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertContactLinks",86],"(",["T_VARIABLE","$accounts",86],",",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_CONSTANT_ENCAPSED_STRING","'root'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'admin'",86],")",")",";",["T_WHITESPACE","\n  ",86],"}",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * Asserts whether certain users contact links appear on the page.\n   *\n   * @param array $accounts\n   *   All user objects used by the test.\n   * @param array $names\n   *   Users which should have contact links.\n   *\/",89],["T_WHITESPACE","\n  ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","assertContactLinks",97],"(",["T_ARRAY","array",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$accounts",97],",",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$names",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$result",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","xpath",98],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"views-field-contact\")]\/\/a'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEqual",99],"(",["T_STRING","count",99],"(",["T_VARIABLE","$result",99],")",",",["T_WHITESPACE"," ",99],["T_STRING","count",99],"(",["T_VARIABLE","$names",99],")",")",";",["T_WHITESPACE","\n    ",99],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$names",100],["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$name",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n      ",100],["T_VARIABLE","$account",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$accounts",101],"[",["T_VARIABLE","$name",101],"]",";",["T_WHITESPACE","\n\n      ",101],["T_VARIABLE","$result",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","xpath",103],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"views-field-contact\")]\/\/a[contains(@href, :url)]'",103],",",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","':url'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$account",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","url",103],"(",["T_CONSTANT_ENCAPSED_STRING","'contact-form'",103],")",")",")",";",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertTrue",104],"(",["T_STRING","count",104],"(",["T_VARIABLE","$result",104],")",")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n  ",105],"}",["T_WHITESPACE","\n\n",106],"}",["T_WHITESPACE","\n",108]]
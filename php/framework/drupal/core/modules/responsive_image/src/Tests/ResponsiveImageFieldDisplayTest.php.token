[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","responsive_image",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","image",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ImageFieldTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","image",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ImageStyle",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","node",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Node",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","file",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","File",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","responsive_image",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Plugin",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Field",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FieldFormatter",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResponsiveImageFormatter",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","responsive_image",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResponsiveImageStyle",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","user",12],["T_NS_SEPARATOR","\\",12],["T_STRING","RoleInterface",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Tests responsive image display formatter.\n *\n * @group responsive_image\n *\/",14],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","ResponsiveImageFieldDisplayTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","ImageFieldTestBase",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$dumpHeaders",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","TRUE",21],";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Responsive image style entity instance we test with.\n   *\n   * @var \\Drupal\\responsive_image\\Entity\\ResponsiveImageStyle\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$responsiveImgStyle",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_STATIC","static",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$modules",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_CONSTANT_ENCAPSED_STRING","'field_ui'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'responsive_image'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module'",35],")",";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Drupal\\simpletest\\WebTestBase\\setUp().\n   *\/",37],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","setUp",40],"(",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n    ",40],["T_STRING","parent",41],["T_DOUBLE_COLON","::",41],["T_STRING","setUp",41],"(",")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Create user.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","adminUser",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","drupalCreateUser",44],"(",["T_ARRAY","array",44],"(",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'administer responsive images'",45],",",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'access content'",46],",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'access administration pages'",47],",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'administer site configuration'",48],",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'administer content types'",49],",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'administer node display'",50],",",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",51],",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'create article content'",52],",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'edit any article content'",53],",",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'delete any article content'",54],",",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'administer image styles'",55],["T_WHITESPACE","\n    ",55],")",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalLogin",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","adminUser",57],")",";",["T_WHITESPACE","\n    ",57],["T_COMMENT","\/\/ Add responsive image style.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","responsiveImgStyle",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","ResponsiveImageStyle",59],["T_DOUBLE_COLON","::",59],["T_STRING","create",59],"(",["T_ARRAY","array",59],"(",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'id'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'style_one'",60],",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'label'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'Style One'",61],",",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'breakpoint_group'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module'",62],",",["T_WHITESPACE","\n      ",62],["T_CONSTANT_ENCAPSED_STRING","'fallback_image_style'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'large'",63],",",["T_WHITESPACE","\n    ",63],")",")",";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * Tests responsive image formatters on node display for public files.\n   *\/",67],["T_WHITESPACE","\n  ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testResponsiveImageFieldFormattersPublic",70],"(",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","addTestImageStyleMappings",71],"(",")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","doTestResponsiveImageFieldFormatters",72],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",72],")",";",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * Tests responsive image formatters on node display for private files.\n   *\/",75],["T_WHITESPACE","\n  ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","testResponsiveImageFieldFormattersPrivate",78],"(",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","addTestImageStyleMappings",79],"(",")",";",["T_WHITESPACE","\n    ",79],["T_COMMENT","\/\/ Remove access content permission from anonymous users.\n",80],["T_WHITESPACE","    ",81],["T_STRING","user_role_change_permissions",81],"(",["T_STRING","RoleInterface",81],["T_DOUBLE_COLON","::",81],["T_STRING","ANONYMOUS_ID",81],",",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","FALSE",81],")",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","doTestResponsiveImageFieldFormatters",82],"(",["T_CONSTANT_ENCAPSED_STRING","'private'",82],")",";",["T_WHITESPACE","\n  ",82],"}",["T_WHITESPACE","\n\n  ",83],["T_DOC_COMMENT","\/**\n   * Test responsive image formatters when image style is empty.\n   *\/",85],["T_WHITESPACE","\n  ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","testResponsiveImageFieldFormattersEmptyStyle",88],"(",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","addTestImageStyleMappings",89],"(",["T_STRING","TRUE",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","doTestResponsiveImageFieldFormatters",90],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",90],",",["T_WHITESPACE"," ",90],["T_STRING","TRUE",90],")",";",["T_WHITESPACE","\n  ",90],"}",["T_WHITESPACE","\n\n  ",91],["T_DOC_COMMENT","\/**\n   * Add image style mappings to the responsive image style entity.\n   *\n   * @param bool $empty_styles\n   *   If true, the image style mappings will get empty image styles.\n   *\/",93],["T_WHITESPACE","\n  ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","addTestImageStyleMappings",99],"(",["T_VARIABLE","$empty_styles",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","FALSE",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n    ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$empty_styles",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n      ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","responsiveImgStyle",101],["T_WHITESPACE","\n        ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","addImageStyleMapping",102],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.mobile'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'1x'",102],",",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_WHITESPACE","\n          ",102],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'image_style'",103],",",["T_WHITESPACE","\n          ",103],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","''",104],",",["T_WHITESPACE","\n        ",104],")",")",["T_WHITESPACE","\n        ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","addImageStyleMapping",106],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.narrow'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'1x'",106],",",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",["T_WHITESPACE","\n          ",106],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'sizes'",107],",",["T_WHITESPACE","\n          ",107],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_WHITESPACE","\n            ",108],["T_CONSTANT_ENCAPSED_STRING","'sizes'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'(min-width: 700px) 700px, 100vw'",109],",",["T_WHITESPACE","\n            ",109],["T_CONSTANT_ENCAPSED_STRING","'sizes_image_styles'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",")",",",["T_WHITESPACE","\n          ",110],")",",",["T_WHITESPACE","\n        ",111],")",")",["T_WHITESPACE","\n        ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","addImageStyleMapping",113],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.wide'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'1x'",113],",",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",["T_WHITESPACE","\n          ",113],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'image_style'",114],",",["T_WHITESPACE","\n          ",114],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","''",115],",",["T_WHITESPACE","\n        ",115],")",")",["T_WHITESPACE","\n        ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","save",117],"(",")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n    ",118],["T_ELSE","else",119],["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n      ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","responsiveImgStyle",120],["T_WHITESPACE","\n        ",120],["T_COMMENT","\/\/ Test the output of an empty image.\n",121],["T_WHITESPACE","        ",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","addImageStyleMapping",122],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.mobile'",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'1x'",122],",",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",["T_WHITESPACE","\n          ",122],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'image_style'",123],",",["T_WHITESPACE","\n          ",123],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_STRING","RESPONSIVE_IMAGE_EMPTY_IMAGE",124],",",["T_WHITESPACE","\n        ",124],")",")",["T_WHITESPACE","\n        ",125],["T_COMMENT","\/\/ Test the output with a 1.5x multiplier.\n",126],["T_WHITESPACE","        ",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","addImageStyleMapping",127],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.mobile'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'1.5x'",127],",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_WHITESPACE","\n          ",127],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'image_style'",128],",",["T_WHITESPACE","\n          ",128],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",129],",",["T_WHITESPACE","\n        ",129],")",")",["T_WHITESPACE","\n        ",130],["T_COMMENT","\/\/ Test the output of the 'sizes' attribute.\n",131],["T_WHITESPACE","        ",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","addImageStyleMapping",132],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.narrow'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'1x'",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_WHITESPACE","\n          ",132],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'sizes'",133],",",["T_WHITESPACE","\n          ",133],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_ARRAY","array",134],"(",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'sizes'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'(min-width: 700px) 700px, 100vw'",135],",",["T_WHITESPACE","\n            ",135],["T_CONSTANT_ENCAPSED_STRING","'sizes_image_styles'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_WHITESPACE","\n              ",136],["T_CONSTANT_ENCAPSED_STRING","'large'",137],",",["T_WHITESPACE","\n              ",137],["T_CONSTANT_ENCAPSED_STRING","'medium'",138],",",["T_WHITESPACE","\n            ",138],")",",",["T_WHITESPACE","\n          ",139],")",",",["T_WHITESPACE","\n        ",140],")",")",["T_WHITESPACE","\n        ",141],["T_COMMENT","\/\/ Test the normal output of mapping to an image style.\n",142],["T_WHITESPACE","        ",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","addImageStyleMapping",143],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.wide'",143],",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'1x'",143],",",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_WHITESPACE","\n          ",143],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'image_style'",144],",",["T_WHITESPACE","\n          ",144],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'large'",145],",",["T_WHITESPACE","\n        ",145],")",")",["T_WHITESPACE","\n        ",146],["T_COMMENT","\/\/ Test the output of the original image.\n",147],["T_WHITESPACE","        ",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","addImageStyleMapping",148],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.wide'",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'3x'",148],",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_WHITESPACE","\n          ",148],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'image_style'",149],",",["T_WHITESPACE","\n          ",149],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_STRING","RESPONSIVE_IMAGE_ORIGINAL_IMAGE",150],",",["T_WHITESPACE","\n        ",150],")",")",["T_WHITESPACE","\n        ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","save",152],"(",")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n  ",153],"}",["T_WHITESPACE","\n  ",154],["T_DOC_COMMENT","\/**\n   * Test responsive image formatters on node display.\n   *\n   * If the empty styles param is set, then the function only tests for the\n   * fallback image style (large).\n   *\n   * @param string $scheme\n   *   File scheme to use.\n   * @param bool $empty_styles\n   *   If true, use an empty string for image style names.\n   *   Defaults to false.\n   *\/",155],["T_WHITESPACE","\n  ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","doTestResponsiveImageFieldFormatters",167],"(",["T_VARIABLE","$scheme",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$empty_styles",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","FALSE",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n    ",167],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",168],["T_WHITESPACE","\n    ",168],["T_VARIABLE","$renderer",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","container",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","get",169],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$node_storage",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","container",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","get",170],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",170],")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getStorage",170],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",170],")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$field_name",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","Unicode",171],["T_DOUBLE_COLON","::",171],["T_STRING","strtolower",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","randomMachineName",171],"(",")",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","createImageField",172],"(",["T_VARIABLE","$field_name",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'article'",172],",",["T_WHITESPACE"," ",172],["T_ARRAY","array",172],"(",["T_CONSTANT_ENCAPSED_STRING","'uri_scheme'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$scheme",172],")",")",";",["T_WHITESPACE","\n    ",172],["T_COMMENT","\/\/ Create a new node with an image attached. Make sure we use a large image\n",173],["T_WHITESPACE","    ",174],["T_COMMENT","\/\/ so the scale effects of the image styles always have an effect.\n",174],["T_WHITESPACE","    ",175],["T_VARIABLE","$test_image",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","current",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","drupalGetTestFiles",175],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",175],",",["T_WHITESPACE"," ",175],["T_LNUMBER","39325",175],")",")",";",["T_WHITESPACE","\n\n    ",175],["T_COMMENT","\/\/ Create alt text for the image.\n",177],["T_WHITESPACE","    ",178],["T_VARIABLE","$alt",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","randomMachineName",178],"(",")",";",["T_WHITESPACE","\n\n    ",178],["T_VARIABLE","$nid",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","uploadNodeImage",180],"(",["T_VARIABLE","$test_image",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$field_name",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'article'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$alt",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$node_storage",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","resetCache",181],"(",["T_ARRAY","array",181],"(",["T_VARIABLE","$nid",181],")",")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$node",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$node_storage",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","load",182],"(",["T_VARIABLE","$nid",182],")",";",["T_WHITESPACE","\n\n    ",182],["T_COMMENT","\/\/ Test that the default formatter is being used.\n",184],["T_WHITESPACE","    ",185],["T_VARIABLE","$image_uri",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","File",185],["T_DOUBLE_COLON","::",185],["T_STRING","load",185],"(",["T_VARIABLE","$node",185],["T_OBJECT_OPERATOR","->",185],"{",["T_VARIABLE","$field_name",185],"}",["T_OBJECT_OPERATOR","->",185],["T_STRING","target_id",185],")",["T_OBJECT_OPERATOR","->",185],["T_STRING","getFileUri",185],"(",")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$image",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_WHITESPACE","\n      ",186],["T_CONSTANT_ENCAPSED_STRING","'#theme'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'image'",187],",",["T_WHITESPACE","\n      ",187],["T_CONSTANT_ENCAPSED_STRING","'#uri'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$image_uri",188],",",["T_WHITESPACE","\n      ",188],["T_CONSTANT_ENCAPSED_STRING","'#width'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_LNUMBER","360",189],",",["T_WHITESPACE","\n      ",189],["T_CONSTANT_ENCAPSED_STRING","'#height'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_LNUMBER","240",190],",",["T_WHITESPACE","\n      ",190],["T_CONSTANT_ENCAPSED_STRING","'#alt'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$alt",191],",",["T_WHITESPACE","\n    ",191],")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$default_output",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","str_replace",193],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",193],",",["T_WHITESPACE"," ",193],["T_STRING","NULL",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$renderer",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","renderRoot",193],"(",["T_VARIABLE","$image",193],")",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertRaw",194],"(",["T_VARIABLE","$default_output",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'Default formatter displaying correctly on full node view.'",194],")",";",["T_WHITESPACE","\n\n    ",194],["T_COMMENT","\/\/ Test field not being configured. This should not cause a fatal error.\n",196],["T_WHITESPACE","    ",197],["T_VARIABLE","$display_options",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_ARRAY","array",197],"(",["T_WHITESPACE","\n      ",197],["T_CONSTANT_ENCAPSED_STRING","'type'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test'",198],",",["T_WHITESPACE","\n      ",198],["T_CONSTANT_ENCAPSED_STRING","'settings'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_STRING","ResponsiveImageFormatter",199],["T_DOUBLE_COLON","::",199],["T_STRING","defaultSettings",199],"(",")",",",["T_WHITESPACE","\n    ",199],")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$display",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","container",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","get",201],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",201],")",["T_WHITESPACE","\n      ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","getStorage",202],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_view_display'",202],")",["T_WHITESPACE","\n      ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","load",203],"(",["T_CONSTANT_ENCAPSED_STRING","'node.article.default'",203],")",";",["T_WHITESPACE","\n    ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(","!",["T_VARIABLE","$display",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n      ",204],["T_VARIABLE","$values",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],"[",["T_WHITESPACE","\n        ",205],["T_CONSTANT_ENCAPSED_STRING","'targetEntityType'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'node'",206],",",["T_WHITESPACE","\n        ",206],["T_CONSTANT_ENCAPSED_STRING","'bundle'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'article'",207],",",["T_WHITESPACE","\n        ",207],["T_CONSTANT_ENCAPSED_STRING","'mode'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'default'",208],",",["T_WHITESPACE","\n        ",208],["T_CONSTANT_ENCAPSED_STRING","'status'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_STRING","TRUE",209],",",["T_WHITESPACE","\n      ",209],"]",";",["T_WHITESPACE","\n      ",210],["T_VARIABLE","$display",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","container",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","get",211],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","getStorage",211],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_view_display'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","create",211],"(",["T_VARIABLE","$values",211],")",";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$display",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","setComponent",213],"(",["T_VARIABLE","$field_name",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$display_options",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","save",213],"(",")",";",["T_WHITESPACE","\n\n    ",213],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","drupalGet",215],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_VARIABLE","$nid",215],")",";",["T_WHITESPACE","\n\n    ",215],["T_COMMENT","\/\/ Test theme function for responsive image, but using the test formatter.\n",217],["T_WHITESPACE","    ",218],["T_VARIABLE","$display_options",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",["T_WHITESPACE","\n      ",218],["T_CONSTANT_ENCAPSED_STRING","'type'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test'",219],",",["T_WHITESPACE","\n      ",219],["T_CONSTANT_ENCAPSED_STRING","'settings'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_WHITESPACE","\n        ",220],["T_CONSTANT_ENCAPSED_STRING","'image_link'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'file'",221],",",["T_WHITESPACE","\n        ",221],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_style'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'style_one'",222],",",["T_WHITESPACE","\n      ",222],")",",",["T_WHITESPACE","\n    ",223],")",";",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$display",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_STRING","entity_get_display",225],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",225],",",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'article'",225],",",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'default'",225],")",";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$display",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setComponent",226],"(",["T_VARIABLE","$field_name",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$display_options",226],")",["T_WHITESPACE","\n      ",226],["T_OBJECT_OPERATOR","->",227],["T_STRING","save",227],"(",")",";",["T_WHITESPACE","\n\n    ",227],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","drupalGet",229],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$nid",229],")",";",["T_WHITESPACE","\n\n    ",229],["T_COMMENT","\/\/ Use the responsive image formatter linked to file formatter.\n",231],["T_WHITESPACE","    ",232],["T_VARIABLE","$display_options",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_ARRAY","array",232],"(",["T_WHITESPACE","\n      ",232],["T_CONSTANT_ENCAPSED_STRING","'type'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'responsive_image'",233],",",["T_WHITESPACE","\n      ",233],["T_CONSTANT_ENCAPSED_STRING","'settings'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",["T_WHITESPACE","\n        ",234],["T_CONSTANT_ENCAPSED_STRING","'image_link'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'file'",235],",",["T_WHITESPACE","\n        ",235],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_style'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'style_one'",236],",",["T_WHITESPACE","\n      ",236],")",",",["T_WHITESPACE","\n    ",237],")",";",["T_WHITESPACE","\n    ",238],["T_VARIABLE","$display",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","entity_get_display",239],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",239],",",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'article'",239],",",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'default'",239],")",";",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$display",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","setComponent",240],"(",["T_VARIABLE","$field_name",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$display_options",240],")",["T_WHITESPACE","\n      ",240],["T_OBJECT_OPERATOR","->",241],["T_STRING","save",241],"(",")",";",["T_WHITESPACE","\n\n    ",241],["T_VARIABLE","$default_output",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"'",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_STRING","file_url_transform_relative",243],"(",["T_STRING","file_create_url",243],"(",["T_VARIABLE","$image_uri",243],")",")",["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'\"><picture'",243],";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","drupalGet",244],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",244],["T_WHITESPACE"," ",244],".",["T_WHITESPACE"," ",244],["T_VARIABLE","$nid",244],")",";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$cache_tags_header",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","drupalGetHeader",245],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",245],")",";",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","assertTrue",246],"(","!",["T_STRING","preg_match",246],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ image_style\\:\/'",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$cache_tags_header",246],")",",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'No image style cache tag found.'",246],")",";",["T_WHITESPACE","\n\n    ",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","removeWhiteSpace",248],"(",")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertRaw",249],"(",["T_VARIABLE","$default_output",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'Image linked to file formatter displaying correctly on full node view.'",249],")",";",["T_WHITESPACE","\n    ",249],["T_COMMENT","\/\/ Verify that the image can be downloaded.\n",250],["T_WHITESPACE","    ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","assertEqual",251],"(",["T_STRING","file_get_contents",251],"(",["T_VARIABLE","$test_image",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","uri",251],")",",",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","drupalGet",251],"(",["T_STRING","file_create_url",251],"(",["T_VARIABLE","$image_uri",251],")",")",",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'File was downloaded successfully.'",251],")",";",["T_WHITESPACE","\n    ",251],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$scheme",252],["T_WHITESPACE"," ",252],["T_IS_EQUAL","==",252],["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'private'",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n      ",252],["T_COMMENT","\/\/ Only verify HTTP headers when using private scheme and the headers are\n",253],["T_WHITESPACE","      ",254],["T_COMMENT","\/\/ sent by Drupal.\n",254],["T_WHITESPACE","      ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertEqual",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","drupalGetHeader",255],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",255],")",",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'Content-Type header was sent.'",255],")",";",["T_WHITESPACE","\n      ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","assertTrue",256],"(",["T_STRING","strstr",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","drupalGetHeader",256],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",256],")",",",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'private'",256],")",["T_WHITESPACE"," ",256],["T_IS_NOT_IDENTICAL","!==",256],["T_WHITESPACE"," ",256],["T_STRING","FALSE",256],",",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'Cache-Control header was sent.'",256],")",";",["T_WHITESPACE","\n\n      ",256],["T_COMMENT","\/\/ Log out and try to access the file.\n",258],["T_WHITESPACE","      ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","drupalLogout",259],"(",")",";",["T_WHITESPACE","\n      ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","drupalGet",260],"(",["T_STRING","file_create_url",260],"(",["T_VARIABLE","$image_uri",260],")",")",";",["T_WHITESPACE","\n      ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertResponse",261],"(",["T_CONSTANT_ENCAPSED_STRING","'403'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'Access denied to original image as anonymous user.'",261],")",";",["T_WHITESPACE","\n\n      ",261],["T_COMMENT","\/\/ Log in again.\n",263],["T_WHITESPACE","      ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","drupalLogin",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","adminUser",264],")",";",["T_WHITESPACE","\n    ",264],"}",["T_WHITESPACE","\n\n    ",265],["T_COMMENT","\/\/ Use the responsive image formatter with a responsive image style.\n",267],["T_WHITESPACE","    ",268],["T_VARIABLE","$display_options",268],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",268],"]","[",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_style'",268],"]",["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'style_one'",268],";",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$display_options",269],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",269],"]","[",["T_CONSTANT_ENCAPSED_STRING","'image_link'",269],"]",["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","''",269],";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$display",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","setComponent",270],"(",["T_VARIABLE","$field_name",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$display_options",270],")",["T_WHITESPACE","\n      ",270],["T_OBJECT_OPERATOR","->",271],["T_STRING","save",271],"(",")",";",["T_WHITESPACE","\n\n    ",271],["T_COMMENT","\/\/ Create a derivative so at least one MIME type will be known.\n",273],["T_WHITESPACE","    ",274],["T_VARIABLE","$large_style",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","ImageStyle",274],["T_DOUBLE_COLON","::",274],["T_STRING","load",274],"(",["T_CONSTANT_ENCAPSED_STRING","'large'",274],")",";",["T_WHITESPACE","\n    ",274],["T_VARIABLE","$large_style",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","createDerivative",275],"(",["T_VARIABLE","$image_uri",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$large_style",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","buildUri",275],"(",["T_VARIABLE","$image_uri",275],")",")",";",["T_WHITESPACE","\n\n    ",275],["T_COMMENT","\/\/ Output should contain all image styles and all breakpoints.\n",277],["T_WHITESPACE","    ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","drupalGet",278],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",278],["T_WHITESPACE"," ",278],".",["T_WHITESPACE"," ",278],["T_VARIABLE","$nid",278],")",";",["T_WHITESPACE","\n    ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(","!",["T_VARIABLE","$empty_styles",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n      ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","assertRaw",280],"(",["T_CONSTANT_ENCAPSED_STRING","'\/styles\/medium\/'",280],")",";",["T_WHITESPACE","\n      ",280],["T_COMMENT","\/\/ Make sure the IE9 workaround is present.\n",281],["T_WHITESPACE","      ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","assertRaw",282],"(",["T_CONSTANT_ENCAPSED_STRING","'<!--[if IE 9]><video style=\"display: none;\"><![endif]-->'",282],")",";",["T_WHITESPACE","\n      ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","assertRaw",283],"(",["T_CONSTANT_ENCAPSED_STRING","'<!--[if IE 9]><\/video><![endif]-->'",283],")",";",["T_WHITESPACE","\n      ",283],["T_COMMENT","\/\/ Assert the empty image is present.\n",284],["T_WHITESPACE","      ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","assertRaw",285],"(",["T_CONSTANT_ENCAPSED_STRING","'data:image\/gif;base64,R0lGODlhAQABAIABAP\/\/\/wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='",285],")",";",["T_WHITESPACE","\n      ",285],["T_VARIABLE","$thumbnail_style",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","ImageStyle",286],["T_DOUBLE_COLON","::",286],["T_STRING","load",286],"(",["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",286],")",";",["T_WHITESPACE","\n      ",286],["T_COMMENT","\/\/ Assert the output of the 'srcset' attribute (small multipliers first).\n",287],["T_WHITESPACE","      ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","assertRaw",288],"(",["T_CONSTANT_ENCAPSED_STRING","'data:image\/gif;base64,R0lGODlhAQABAIABAP\/\/\/wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw== 1x, '",288],["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_STRING","file_url_transform_relative",288],"(",["T_VARIABLE","$thumbnail_style",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","buildUrl",288],"(",["T_VARIABLE","$image_uri",288],")",")",["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","' 1.5x'",288],")",";",["T_WHITESPACE","\n      ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","assertRaw",289],"(",["T_CONSTANT_ENCAPSED_STRING","'\/styles\/medium\/'",289],")",";",["T_WHITESPACE","\n      ",289],["T_COMMENT","\/\/ Assert the output of the original image.\n",290],["T_WHITESPACE","      ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","assertRaw",291],"(",["T_STRING","file_url_transform_relative",291],"(",["T_STRING","file_create_url",291],"(",["T_VARIABLE","$image_uri",291],")",")",["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","' 3x'",291],")",";",["T_WHITESPACE","\n      ",291],["T_COMMENT","\/\/ Assert the output of the breakpoints.\n",292],["T_WHITESPACE","      ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","assertRaw",293],"(",["T_CONSTANT_ENCAPSED_STRING","'media=\"(min-width: 0px)\"'",293],")",";",["T_WHITESPACE","\n      ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","assertRaw",294],"(",["T_CONSTANT_ENCAPSED_STRING","'media=\"(min-width: 560px)\"'",294],")",";",["T_WHITESPACE","\n      ",294],["T_COMMENT","\/\/ Assert the output of the 'sizes' attribute.\n",295],["T_WHITESPACE","      ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assertRaw",296],"(",["T_CONSTANT_ENCAPSED_STRING","'sizes=\"(min-width: 700px) 700px, 100vw\"'",296],")",";",["T_WHITESPACE","\n      ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","assertPattern",297],"(",["T_CONSTANT_ENCAPSED_STRING","'\/media=\"\\(min-width: 560px\\)\".+?sizes=\"\\(min-width: 700px\\) 700px, 100vw\"\/'",297],")",";",["T_WHITESPACE","\n      ",297],["T_COMMENT","\/\/ Assert the output of the 'srcset' attribute (small images first).\n",298],["T_WHITESPACE","      ",299],["T_VARIABLE","$medium_style",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","ImageStyle",299],["T_DOUBLE_COLON","::",299],["T_STRING","load",299],"(",["T_CONSTANT_ENCAPSED_STRING","'medium'",299],")",";",["T_WHITESPACE","\n      ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","assertRaw",300],"(",["T_STRING","file_url_transform_relative",300],"(",["T_VARIABLE","$medium_style",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","buildUrl",300],"(",["T_VARIABLE","$image_uri",300],")",")",["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","' 220w, '",300],["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_STRING","file_url_transform_relative",300],"(",["T_VARIABLE","$large_style",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","buildUrl",300],"(",["T_VARIABLE","$image_uri",300],")",")",["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","' 360w'",300],")",";",["T_WHITESPACE","\n      ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","assertRaw",301],"(",["T_CONSTANT_ENCAPSED_STRING","'media=\"(min-width: 851px)\"'",301],")",";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n    ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","assertRaw",303],"(",["T_CONSTANT_ENCAPSED_STRING","'\/styles\/large\/'",303],")",";",["T_WHITESPACE","\n    ",303],["T_VARIABLE","$cache_tags",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","explode",304],"(",["T_CONSTANT_ENCAPSED_STRING","' '",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","drupalGetHeader",304],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",304],")",")",";",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","assertTrue",305],"(",["T_STRING","in_array",305],"(",["T_CONSTANT_ENCAPSED_STRING","'config:responsive_image.styles.style_one'",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$cache_tags",305],")",")",";",["T_WHITESPACE","\n    ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(","!",["T_VARIABLE","$empty_styles",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n      ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","assertTrue",307],"(",["T_STRING","in_array",307],"(",["T_CONSTANT_ENCAPSED_STRING","'config:image.style.medium'",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$cache_tags",307],")",")",";",["T_WHITESPACE","\n      ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","assertTrue",308],"(",["T_STRING","in_array",308],"(",["T_CONSTANT_ENCAPSED_STRING","'config:image.style.thumbnail'",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$cache_tags",308],")",")",";",["T_WHITESPACE","\n      ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","assertRaw",309],"(",["T_CONSTANT_ENCAPSED_STRING","'type=\"image\/png\"'",309],")",";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n    ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","assertTrue",311],"(",["T_STRING","in_array",311],"(",["T_CONSTANT_ENCAPSED_STRING","'config:image.style.large'",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$cache_tags",311],")",")",";",["T_WHITESPACE","\n\n    ",311],["T_COMMENT","\/\/ Test the fallback image style.\n",313],["T_WHITESPACE","    ",314],["T_VARIABLE","$image",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_NS_SEPARATOR","\\",314],["T_STRING","Drupal",314],["T_DOUBLE_COLON","::",314],["T_STRING","service",314],"(",["T_CONSTANT_ENCAPSED_STRING","'image.factory'",314],")",["T_OBJECT_OPERATOR","->",314],["T_STRING","get",314],"(",["T_VARIABLE","$image_uri",314],")",";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$fallback_image",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_ARRAY","array",315],"(",["T_WHITESPACE","\n      ",315],["T_CONSTANT_ENCAPSED_STRING","'#theme'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'image'",316],",",["T_WHITESPACE","\n      ",316],["T_CONSTANT_ENCAPSED_STRING","'#alt'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$alt",317],",",["T_WHITESPACE","\n      ",317],["T_CONSTANT_ENCAPSED_STRING","'#srcset'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_ARRAY","array",318],"(",["T_WHITESPACE","\n        ",318],["T_ARRAY","array",319],"(",["T_WHITESPACE","\n          ",319],["T_CONSTANT_ENCAPSED_STRING","'uri'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_STRING","file_url_transform_relative",320],"(",["T_VARIABLE","$large_style",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","buildUrl",320],"(",["T_VARIABLE","$image",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getSource",320],"(",")",")",")",",",["T_WHITESPACE","\n        ",320],")",",",["T_WHITESPACE","\n      ",321],")",",",["T_WHITESPACE","\n    ",322],")",";",["T_WHITESPACE","\n    ",323],["T_COMMENT","\/\/ The image.html.twig template has a newline after the <img> tag but\n",324],["T_WHITESPACE","    ",325],["T_COMMENT","\/\/ responsive-image.html.twig doesn't have one after the fallback image, so\n",325],["T_WHITESPACE","    ",326],["T_COMMENT","\/\/ we remove it here.\n",326],["T_WHITESPACE","    ",327],["T_VARIABLE","$default_output",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_STRING","trim",327],"(",["T_VARIABLE","$renderer",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","renderRoot",327],"(",["T_VARIABLE","$fallback_image",327],")",")",";",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","assertRaw",328],"(",["T_VARIABLE","$default_output",328],",",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'Image style large formatter displaying correctly on full node view.'",328],")",";",["T_WHITESPACE","\n\n    ",328],["T_IF","if",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$scheme",330],["T_WHITESPACE"," ",330],["T_IS_EQUAL","==",330],["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'private'",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n      ",330],["T_COMMENT","\/\/ Log out and try to access the file.\n",331],["T_WHITESPACE","      ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","drupalLogout",332],"(",")",";",["T_WHITESPACE","\n      ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","drupalGet",333],"(",["T_VARIABLE","$large_style",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","buildUrl",333],"(",["T_VARIABLE","$image_uri",333],")",")",";",["T_WHITESPACE","\n      ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","assertResponse",334],"(",["T_CONSTANT_ENCAPSED_STRING","'403'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'Access denied to image style large as anonymous user.'",334],")",";",["T_WHITESPACE","\n      ",334],["T_VARIABLE","$cache_tags_header",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","drupalGetHeader",335],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",335],")",";",["T_WHITESPACE","\n      ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","assertTrue",336],"(","!",["T_STRING","preg_match",336],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ image_style\\:\/'",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$cache_tags_header",336],")",",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'No image style cache tag found.'",336],")",";",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n  ",337],"}",["T_WHITESPACE","\n\n  ",338],["T_DOC_COMMENT","\/**\n   * Tests responsive image formatters on node display linked to the file.\n   *\/",340],["T_WHITESPACE","\n  ",342],["T_PUBLIC","public",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","testResponsiveImageFieldFormattersLinkToFile",343],"(",")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n    ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","addTestImageStyleMappings",344],"(",")",";",["T_WHITESPACE","\n    ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","assertResponsiveImageFieldFormattersLink",345],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",345],")",";",["T_WHITESPACE","\n  ",345],"}",["T_WHITESPACE","\n\n  ",346],["T_DOC_COMMENT","\/**\n   * Tests responsive image formatters on node display linked to the node.\n   *\/",348],["T_WHITESPACE","\n  ",350],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","testResponsiveImageFieldFormattersLinkToNode",351],"(",")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n    ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","addTestImageStyleMappings",352],"(",")",";",["T_WHITESPACE","\n    ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","assertResponsiveImageFieldFormattersLink",353],"(",["T_CONSTANT_ENCAPSED_STRING","'content'",353],")",";",["T_WHITESPACE","\n  ",353],"}",["T_WHITESPACE","\n\n  ",354],["T_DOC_COMMENT","\/**\n   * Tests responsive image formatter on node display with an empty media query.\n   *\/",356],["T_WHITESPACE","\n  ",358],["T_PUBLIC","public",359],["T_WHITESPACE"," ",359],["T_FUNCTION","function",359],["T_WHITESPACE"," ",359],["T_STRING","testResponsiveImageFieldFormattersEmptyMediaQuery",359],"(",")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n    ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","responsiveImgStyle",360],["T_WHITESPACE","\n      ",360],["T_COMMENT","\/\/ Test the output of an empty media query.\n",361],["T_WHITESPACE","      ",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","addImageStyleMapping",362],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.empty'",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'1x'",362],",",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",["T_WHITESPACE","\n        ",362],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'image_style'",363],",",["T_WHITESPACE","\n        ",363],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_STRING","RESPONSIVE_IMAGE_EMPTY_IMAGE",364],",",["T_WHITESPACE","\n      ",364],")",")",["T_WHITESPACE","\n      ",365],["T_COMMENT","\/\/ Test the output with a 1.5x multiplier.\n",366],["T_WHITESPACE","      ",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","addImageStyleMapping",367],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.mobile'",367],",",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'1x'",367],",",["T_WHITESPACE"," ",367],["T_ARRAY","array",367],"(",["T_WHITESPACE","\n        ",367],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'image_style'",368],",",["T_WHITESPACE","\n        ",368],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",369],["T_WHITESPACE"," ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",369],",",["T_WHITESPACE","\n      ",369],")",")",["T_WHITESPACE","\n      ",370],["T_OBJECT_OPERATOR","->",371],["T_STRING","save",371],"(",")",";",["T_WHITESPACE","\n    ",371],["T_VARIABLE","$node_storage",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","container",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","get",372],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",372],")",["T_OBJECT_OPERATOR","->",372],["T_STRING","getStorage",372],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",372],")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$field_name",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_STRING","Unicode",373],["T_DOUBLE_COLON","::",373],["T_STRING","strtolower",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","randomMachineName",373],"(",")",")",";",["T_WHITESPACE","\n    ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","createImageField",374],"(",["T_VARIABLE","$field_name",374],",",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'article'",374],",",["T_WHITESPACE"," ",374],["T_ARRAY","array",374],"(",["T_CONSTANT_ENCAPSED_STRING","'uri_scheme'",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'public'",374],")",")",";",["T_WHITESPACE","\n    ",374],["T_COMMENT","\/\/ Create a new node with an image attached.\n",375],["T_WHITESPACE","    ",376],["T_VARIABLE","$test_image",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_STRING","current",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","drupalGetTestFiles",376],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",376],")",")",";",["T_WHITESPACE","\n    ",376],["T_VARIABLE","$nid",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","uploadNodeImage",377],"(",["T_VARIABLE","$test_image",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$field_name",377],",",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'article'",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","randomMachineName",377],"(",")",")",";",["T_WHITESPACE","\n    ",377],["T_VARIABLE","$node_storage",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","resetCache",378],"(",["T_ARRAY","array",378],"(",["T_VARIABLE","$nid",378],")",")",";",["T_WHITESPACE","\n\n    ",378],["T_COMMENT","\/\/ Use the responsive image formatter linked to file formatter.\n",380],["T_WHITESPACE","    ",381],["T_VARIABLE","$display_options",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_ARRAY","array",381],"(",["T_WHITESPACE","\n      ",381],["T_CONSTANT_ENCAPSED_STRING","'type'",382],["T_WHITESPACE"," ",382],["T_DOUBLE_ARROW","=>",382],["T_WHITESPACE"," ",382],["T_CONSTANT_ENCAPSED_STRING","'responsive_image'",382],",",["T_WHITESPACE","\n      ",382],["T_CONSTANT_ENCAPSED_STRING","'settings'",383],["T_WHITESPACE"," ",383],["T_DOUBLE_ARROW","=>",383],["T_WHITESPACE"," ",383],["T_ARRAY","array",383],"(",["T_WHITESPACE","\n        ",383],["T_CONSTANT_ENCAPSED_STRING","'image_link'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","''",384],",",["T_WHITESPACE","\n        ",384],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_style'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'style_one'",385],",",["T_WHITESPACE","\n      ",385],")",",",["T_WHITESPACE","\n    ",386],")",";",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$display",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","entity_get_display",388],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'article'",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'default'",388],")",";",["T_WHITESPACE","\n    ",388],["T_VARIABLE","$display",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","setComponent",389],"(",["T_VARIABLE","$field_name",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$display_options",389],")",["T_WHITESPACE","\n      ",389],["T_OBJECT_OPERATOR","->",390],["T_STRING","save",390],"(",")",";",["T_WHITESPACE","\n\n    ",390],["T_COMMENT","\/\/ View the node.\n",392],["T_WHITESPACE","    ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","drupalGet",393],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",393],["T_WHITESPACE"," ",393],".",["T_WHITESPACE"," ",393],["T_VARIABLE","$nid",393],")",";",["T_WHITESPACE","\n\n    ",393],["T_COMMENT","\/\/ Assert an empty media attribute is not output.\n",395],["T_WHITESPACE","    ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","assertNoPattern",396],"(",["T_CONSTANT_ENCAPSED_STRING","'@srcset=\"data:image\/gif;base64,R0lGODlhAQABAIABAP\/\/\/wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw== 1x\".+?media=\".+?\/><source@'",396],")",";",["T_WHITESPACE","\n\n    ",396],["T_COMMENT","\/\/ Assert the media attribute is present if it has a value.\n",398],["T_WHITESPACE","    ",399],["T_VARIABLE","$thumbnail_style",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_STRING","ImageStyle",399],["T_DOUBLE_COLON","::",399],["T_STRING","load",399],"(",["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",399],")",";",["T_WHITESPACE","\n    ",399],["T_VARIABLE","$node",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_VARIABLE","$node_storage",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","load",400],"(",["T_VARIABLE","$nid",400],")",";",["T_WHITESPACE","\n    ",400],["T_VARIABLE","$image_uri",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","File",401],["T_DOUBLE_COLON","::",401],["T_STRING","load",401],"(",["T_VARIABLE","$node",401],["T_OBJECT_OPERATOR","->",401],"{",["T_VARIABLE","$field_name",401],"}",["T_OBJECT_OPERATOR","->",401],["T_STRING","target_id",401],")",["T_OBJECT_OPERATOR","->",401],["T_STRING","getFileUri",401],"(",")",";",["T_WHITESPACE","\n    ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","assertPattern",402],"(",["T_CONSTANT_ENCAPSED_STRING","'\/srcset=\"'",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_STRING","preg_quote",402],"(",["T_STRING","file_url_transform_relative",402],"(",["T_VARIABLE","$thumbnail_style",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","buildUrl",402],"(",["T_VARIABLE","$image_uri",402],")",")",",",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'\/'",402],")",["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","' 1x\".+?media=\"\\(min-width: 0px\\)\"\/'",402],")",";",["T_WHITESPACE","\n  ",402],"}",["T_WHITESPACE","\n\n  ",403],["T_DOC_COMMENT","\/**\n   * Tests responsive image formatter on node display with one source.\n   *\/",405],["T_WHITESPACE","\n  ",407],["T_PUBLIC","public",408],["T_WHITESPACE"," ",408],["T_FUNCTION","function",408],["T_WHITESPACE"," ",408],["T_STRING","testResponsiveImageFieldFormattersOneSource",408],"(",")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","responsiveImgStyle",409],["T_WHITESPACE","\n      ",409],["T_COMMENT","\/\/ Test the output of an empty media query.\n",410],["T_WHITESPACE","      ",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","addImageStyleMapping",411],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.empty'",411],",",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'1x'",411],",",["T_WHITESPACE"," ",411],["T_ARRAY","array",411],"(",["T_WHITESPACE","\n        ",411],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'image_style'",412],",",["T_WHITESPACE","\n        ",412],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'medium'",413],",",["T_WHITESPACE","\n      ",413],")",")",["T_WHITESPACE","\n      ",414],["T_OBJECT_OPERATOR","->",415],["T_STRING","addImageStyleMapping",415],"(",["T_CONSTANT_ENCAPSED_STRING","'responsive_image_test_module.empty'",415],",",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'2x'",415],",",["T_WHITESPACE"," ",415],["T_ARRAY","array",415],"(",["T_WHITESPACE","\n          ",415],["T_CONSTANT_ENCAPSED_STRING","'image_mapping_type'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'image_style'",416],",",["T_WHITESPACE","\n          ",416],["T_CONSTANT_ENCAPSED_STRING","'image_mapping'",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","'large'",417],",",["T_WHITESPACE","\n        ",417],")",")",["T_WHITESPACE","\n      ",418],["T_OBJECT_OPERATOR","->",419],["T_STRING","save",419],"(",")",";",["T_WHITESPACE","\n    ",419],["T_VARIABLE","$node_storage",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","container",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","get",420],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",420],")",["T_OBJECT_OPERATOR","->",420],["T_STRING","getStorage",420],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",420],")",";",["T_WHITESPACE","\n    ",420],["T_VARIABLE","$field_name",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","Unicode",421],["T_DOUBLE_COLON","::",421],["T_STRING","strtolower",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","randomMachineName",421],"(",")",")",";",["T_WHITESPACE","\n    ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","createImageField",422],"(",["T_VARIABLE","$field_name",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'article'",422],",",["T_WHITESPACE"," ",422],["T_ARRAY","array",422],"(",["T_CONSTANT_ENCAPSED_STRING","'uri_scheme'",422],["T_WHITESPACE"," ",422],["T_DOUBLE_ARROW","=>",422],["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'public'",422],")",")",";",["T_WHITESPACE","\n    ",422],["T_COMMENT","\/\/ Create a new node with an image attached.\n",423],["T_WHITESPACE","    ",424],["T_VARIABLE","$test_image",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_STRING","current",424],"(",["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","drupalGetTestFiles",424],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",424],")",")",";",["T_WHITESPACE","\n    ",424],["T_VARIABLE","$nid",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","uploadNodeImage",425],"(",["T_VARIABLE","$test_image",425],",",["T_WHITESPACE"," ",425],["T_VARIABLE","$field_name",425],",",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","'article'",425],",",["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","randomMachineName",425],"(",")",")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$node_storage",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","resetCache",426],"(",["T_ARRAY","array",426],"(",["T_VARIABLE","$nid",426],")",")",";",["T_WHITESPACE","\n\n    ",426],["T_COMMENT","\/\/ Use the responsive image formatter linked to file formatter.\n",428],["T_WHITESPACE","    ",429],["T_VARIABLE","$display_options",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_ARRAY","array",429],"(",["T_WHITESPACE","\n      ",429],["T_CONSTANT_ENCAPSED_STRING","'type'",430],["T_WHITESPACE"," ",430],["T_DOUBLE_ARROW","=>",430],["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'responsive_image'",430],",",["T_WHITESPACE","\n      ",430],["T_CONSTANT_ENCAPSED_STRING","'settings'",431],["T_WHITESPACE"," ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_ARRAY","array",431],"(",["T_WHITESPACE","\n        ",431],["T_CONSTANT_ENCAPSED_STRING","'image_link'",432],["T_WHITESPACE"," ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","''",432],",",["T_WHITESPACE","\n        ",432],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_style'",433],["T_WHITESPACE"," ",433],["T_DOUBLE_ARROW","=>",433],["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'style_one'",433],",",["T_WHITESPACE","\n      ",433],")",",",["T_WHITESPACE","\n    ",434],")",";",["T_WHITESPACE","\n    ",435],["T_VARIABLE","$display",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_STRING","entity_get_display",436],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",436],",",["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","'article'",436],",",["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","'default'",436],")",";",["T_WHITESPACE","\n    ",436],["T_VARIABLE","$display",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","setComponent",437],"(",["T_VARIABLE","$field_name",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$display_options",437],")",["T_WHITESPACE","\n      ",437],["T_OBJECT_OPERATOR","->",438],["T_STRING","save",438],"(",")",";",["T_WHITESPACE","\n\n    ",438],["T_COMMENT","\/\/ View the node.\n",440],["T_WHITESPACE","    ",441],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","drupalGet",441],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",441],["T_WHITESPACE"," ",441],".",["T_WHITESPACE"," ",441],["T_VARIABLE","$nid",441],")",";",["T_WHITESPACE","\n\n    ",441],["T_COMMENT","\/\/ Assert the media attribute is present if it has a value.\n",443],["T_WHITESPACE","    ",444],["T_VARIABLE","$large_style",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_STRING","ImageStyle",444],["T_DOUBLE_COLON","::",444],["T_STRING","load",444],"(",["T_CONSTANT_ENCAPSED_STRING","'large'",444],")",";",["T_WHITESPACE","\n    ",444],["T_VARIABLE","$medium_style",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_STRING","ImageStyle",445],["T_DOUBLE_COLON","::",445],["T_STRING","load",445],"(",["T_CONSTANT_ENCAPSED_STRING","'medium'",445],")",";",["T_WHITESPACE","\n    ",445],["T_VARIABLE","$node",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$node_storage",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","load",446],"(",["T_VARIABLE","$nid",446],")",";",["T_WHITESPACE","\n    ",446],["T_VARIABLE","$image_uri",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","File",447],["T_DOUBLE_COLON","::",447],["T_STRING","load",447],"(",["T_VARIABLE","$node",447],["T_OBJECT_OPERATOR","->",447],"{",["T_VARIABLE","$field_name",447],"}",["T_OBJECT_OPERATOR","->",447],["T_STRING","target_id",447],")",["T_OBJECT_OPERATOR","->",447],["T_STRING","getFileUri",447],"(",")",";",["T_WHITESPACE","\n    ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","assertRaw",448],"(",["T_CONSTANT_ENCAPSED_STRING","'<img srcset=\"'",448],["T_WHITESPACE"," ",448],".",["T_WHITESPACE"," ",448],["T_STRING","file_url_transform_relative",448],"(",["T_VARIABLE","$medium_style",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","buildUrl",448],"(",["T_VARIABLE","$image_uri",448],")",")",["T_WHITESPACE"," ",448],".",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","' 1x, '",448],["T_WHITESPACE"," ",448],".",["T_WHITESPACE"," ",448],["T_STRING","file_url_transform_relative",448],"(",["T_VARIABLE","$large_style",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","buildUrl",448],"(",["T_VARIABLE","$image_uri",448],")",")",["T_WHITESPACE"," ",448],".",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","' 2x\"'",448],")",";",["T_WHITESPACE","\n  ",448],"}",["T_WHITESPACE","\n\n  ",449],["T_DOC_COMMENT","\/**\n   * Tests responsive image formatters linked to the file or node.\n   *\n   * @param string $link_type\n   *   The link type to test. Either 'file' or 'content'.\n   *\/",451],["T_WHITESPACE","\n  ",456],["T_PRIVATE","private",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","assertResponsiveImageFieldFormattersLink",457],"(",["T_VARIABLE","$link_type",457],")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n    ",457],["T_VARIABLE","$field_name",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","Unicode",458],["T_DOUBLE_COLON","::",458],["T_STRING","strtolower",458],"(",["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","randomMachineName",458],"(",")",")",";",["T_WHITESPACE","\n    ",458],["T_VARIABLE","$field_settings",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_ARRAY","array",459],"(",["T_CONSTANT_ENCAPSED_STRING","'alt_field_required'",459],["T_WHITESPACE"," ",459],["T_DOUBLE_ARROW","=>",459],["T_WHITESPACE"," ",459],["T_LNUMBER","0",459],")",";",["T_WHITESPACE","\n    ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","createImageField",460],"(",["T_VARIABLE","$field_name",460],",",["T_WHITESPACE"," ",460],["T_CONSTANT_ENCAPSED_STRING","'article'",460],",",["T_WHITESPACE"," ",460],["T_ARRAY","array",460],"(",["T_CONSTANT_ENCAPSED_STRING","'uri_scheme'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_CONSTANT_ENCAPSED_STRING","'public'",460],")",",",["T_WHITESPACE"," ",460],["T_VARIABLE","$field_settings",460],")",";",["T_WHITESPACE","\n    ",460],["T_COMMENT","\/\/ Create a new node with an image attached.\n",461],["T_WHITESPACE","    ",462],["T_VARIABLE","$test_image",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_STRING","current",462],"(",["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","drupalGetTestFiles",462],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",462],")",")",";",["T_WHITESPACE","\n\n    ",462],["T_COMMENT","\/\/ Test the image linked to file formatter.\n",464],["T_WHITESPACE","    ",465],["T_VARIABLE","$display_options",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_ARRAY","array",465],"(",["T_WHITESPACE","\n      ",465],["T_CONSTANT_ENCAPSED_STRING","'type'",466],["T_WHITESPACE"," ",466],["T_DOUBLE_ARROW","=>",466],["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'responsive_image'",466],",",["T_WHITESPACE","\n      ",466],["T_CONSTANT_ENCAPSED_STRING","'settings'",467],["T_WHITESPACE"," ",467],["T_DOUBLE_ARROW","=>",467],["T_WHITESPACE"," ",467],["T_ARRAY","array",467],"(",["T_WHITESPACE","\n        ",467],["T_CONSTANT_ENCAPSED_STRING","'image_link'",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$link_type",468],",",["T_WHITESPACE","\n        ",468],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_style'",469],["T_WHITESPACE"," ",469],["T_DOUBLE_ARROW","=>",469],["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'style_one'",469],",",["T_WHITESPACE","\n      ",469],")",",",["T_WHITESPACE","\n    ",470],")",";",["T_WHITESPACE","\n    ",471],["T_STRING","entity_get_display",472],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",472],",",["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'article'",472],",",["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'default'",472],")",["T_WHITESPACE","\n      ",472],["T_OBJECT_OPERATOR","->",473],["T_STRING","setComponent",473],"(",["T_VARIABLE","$field_name",473],",",["T_WHITESPACE"," ",473],["T_VARIABLE","$display_options",473],")",["T_WHITESPACE","\n      ",473],["T_OBJECT_OPERATOR","->",474],["T_STRING","save",474],"(",")",";",["T_WHITESPACE","\n    ",474],["T_COMMENT","\/\/ Ensure that preview works.\n",475],["T_WHITESPACE","    ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","previewNodeImage",476],"(",["T_VARIABLE","$test_image",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$field_name",476],",",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","'article'",476],")",";",["T_WHITESPACE","\n\n    ",476],["T_COMMENT","\/\/ Look for a picture tag in the preview output\n",478],["T_WHITESPACE","    ",479],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","assertPattern",479],"(",["T_CONSTANT_ENCAPSED_STRING","'\/picture\/'",479],")",";",["T_WHITESPACE","\n\n    ",479],["T_VARIABLE","$nid",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","uploadNodeImage",481],"(",["T_VARIABLE","$test_image",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$field_name",481],",",["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","'article'",481],")",";",["T_WHITESPACE","\n    ",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","container",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","get",482],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",482],")",["T_OBJECT_OPERATOR","->",482],["T_STRING","getStorage",482],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",482],")",["T_OBJECT_OPERATOR","->",482],["T_STRING","resetCache",482],"(",["T_ARRAY","array",482],"(",["T_VARIABLE","$nid",482],")",")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$node",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_STRING","Node",483],["T_DOUBLE_COLON","::",483],["T_STRING","load",483],"(",["T_VARIABLE","$nid",483],")",";",["T_WHITESPACE","\n\n    ",483],["T_COMMENT","\/\/ Use the responsive image formatter linked to file formatter.\n",485],["T_WHITESPACE","    ",486],["T_VARIABLE","$display_options",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_ARRAY","array",486],"(",["T_WHITESPACE","\n      ",486],["T_CONSTANT_ENCAPSED_STRING","'type'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","'responsive_image'",487],",",["T_WHITESPACE","\n      ",487],["T_CONSTANT_ENCAPSED_STRING","'settings'",488],["T_WHITESPACE"," ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_ARRAY","array",488],"(",["T_WHITESPACE","\n        ",488],["T_CONSTANT_ENCAPSED_STRING","'image_link'",489],["T_WHITESPACE"," ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$link_type",489],",",["T_WHITESPACE","\n        ",489],["T_CONSTANT_ENCAPSED_STRING","'responsive_image_style'",490],["T_WHITESPACE"," ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'style_one'",490],",",["T_WHITESPACE","\n      ",490],")",",",["T_WHITESPACE","\n    ",491],")",";",["T_WHITESPACE","\n    ",492],["T_STRING","entity_get_display",493],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'article'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'default'",493],")",["T_WHITESPACE","\n      ",493],["T_OBJECT_OPERATOR","->",494],["T_STRING","setComponent",494],"(",["T_VARIABLE","$field_name",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$display_options",494],")",["T_WHITESPACE","\n      ",494],["T_OBJECT_OPERATOR","->",495],["T_STRING","save",495],"(",")",";",["T_WHITESPACE","\n\n    ",495],["T_COMMENT","\/\/ Create a derivative so at least one MIME type will be known.\n",497],["T_WHITESPACE","    ",498],["T_VARIABLE","$large_style",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_STRING","ImageStyle",498],["T_DOUBLE_COLON","::",498],["T_STRING","load",498],"(",["T_CONSTANT_ENCAPSED_STRING","'large'",498],")",";",["T_WHITESPACE","\n    ",498],["T_VARIABLE","$image_uri",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_STRING","File",499],["T_DOUBLE_COLON","::",499],["T_STRING","load",499],"(",["T_VARIABLE","$node",499],["T_OBJECT_OPERATOR","->",499],"{",["T_VARIABLE","$field_name",499],"}",["T_OBJECT_OPERATOR","->",499],["T_STRING","target_id",499],")",["T_OBJECT_OPERATOR","->",499],["T_STRING","getFileUri",499],"(",")",";",["T_WHITESPACE","\n    ",499],["T_VARIABLE","$large_style",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","createDerivative",500],"(",["T_VARIABLE","$image_uri",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$large_style",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","buildUri",500],"(",["T_VARIABLE","$image_uri",500],")",")",";",["T_WHITESPACE","\n\n    ",500],["T_COMMENT","\/\/ Output should contain all image styles and all breakpoints.\n",502],["T_WHITESPACE","    ",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","drupalGet",503],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",503],["T_WHITESPACE"," ",503],".",["T_WHITESPACE"," ",503],["T_VARIABLE","$nid",503],")",";",["T_WHITESPACE","\n    ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","removeWhiteSpace",504],"(",")",";",["T_WHITESPACE","\n    ",504],["T_SWITCH","switch",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$link_type",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n      ",505],["T_CASE","case",506],["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'file'",506],":",["T_WHITESPACE","\n        ",506],["T_COMMENT","\/\/ Make sure the link to the file is present.\n",507],["T_WHITESPACE","        ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","assertPattern",508],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<a(.*?)href=\"'",508],["T_WHITESPACE"," ",508],".",["T_WHITESPACE"," ",508],["T_STRING","preg_quote",508],"(",["T_STRING","file_url_transform_relative",508],"(",["T_STRING","file_create_url",508],"(",["T_VARIABLE","$image_uri",508],")",")",",",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'\/'",508],")",["T_WHITESPACE"," ",508],".",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'\"(.*?)><picture\/'",508],")",";",["T_WHITESPACE","\n        ",508],["T_BREAK","break",509],";",["T_WHITESPACE","\n\n      ",509],["T_CASE","case",511],["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'content'",511],":",["T_WHITESPACE","\n        ",511],["T_COMMENT","\/\/ Make sure the link to the node is present.\n",512],["T_WHITESPACE","        ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","assertPattern",513],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<a(.*?)href=\"'",513],["T_WHITESPACE"," ",513],".",["T_WHITESPACE"," ",513],["T_STRING","preg_quote",513],"(",["T_VARIABLE","$node",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","url",513],"(",")",",",["T_WHITESPACE"," ",513],["T_CONSTANT_ENCAPSED_STRING","'\/'",513],")",["T_WHITESPACE"," ",513],".",["T_WHITESPACE"," ",513],["T_CONSTANT_ENCAPSED_STRING","'\"(.*?)><picture\/'",513],")",";",["T_WHITESPACE","\n        ",513],["T_BREAK","break",514],";",["T_WHITESPACE","\n    ",514],"}",["T_WHITESPACE","\n  ",515],"}",["T_WHITESPACE","\n\n",516],"}",["T_WHITESPACE","\n",518]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Language",7],["T_NS_SEPARATOR","\\",7],["T_STRING","LanguageInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldConfig",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldStorageConfig",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","KernelTests",10],["T_NS_SEPARATOR","\\",10],["T_STRING","KernelTestBase",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Parent class for Field API unit tests.\n *\/",12],["T_WHITESPACE","\n",14],["T_ABSTRACT","abstract",15],["T_WHITESPACE"," ",15],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","FieldKernelTestBase",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","KernelTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_STATIC","static",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$modules",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'system'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'field'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'text'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'field_test'",22],"]",";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Bag of created field storages and fields.\n   *\n   * Allows easy access to test field storage\/field names\/IDs\/objects via:\n   * - $this->fieldTestData->field_name[suffix]\n   * - $this->fieldTestData->field_storage[suffix]\n   * - $this->fieldTestData->field_storage_uuid[suffix]\n   * - $this->fieldTestData->field[suffix]\n   * - $this->fieldTestData->field_definition[suffix]\n   *\n   * @see \\Drupal\\field\\Tests\\FieldUnitTestBase::createFieldWithStorage()\n   *\n   * @var \\ArrayObject\n   *\/",24],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$fieldTestData",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Set the default field storage backend for fields created during tests.\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","setUp",43],"(",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_STRING","parent",44],["T_DOUBLE_COLON","::",44],["T_STRING","setUp",44],"(",")",";",["T_WHITESPACE","\n\n    ",44],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","fieldTestData",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_NEW","new",46],["T_WHITESPACE"," ",46],["T_NS_SEPARATOR","\\",46],["T_STRING","ArrayObject",46],"(",["T_ARRAY","array",46],"(",")",",",["T_WHITESPACE"," ",46],["T_NS_SEPARATOR","\\",46],["T_STRING","ArrayObject",46],["T_DOUBLE_COLON","::",46],["T_STRING","ARRAY_AS_PROPS",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","installEntitySchema",48],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","installEntitySchema",49],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","installSchema",50],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",50],",",["T_WHITESPACE"," ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'sequences'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'key_value'",50],"]",")",";",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/\/ Set default storage backend and configure the theme system.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","installConfig",53],"(",["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'system'",53],")",")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Create user 1.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$storage",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Drupal",56],["T_DOUBLE_COLON","::",56],["T_STRING","entityManager",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","getStorage",56],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$storage",57],["T_WHITESPACE","\n      ",57],["T_OBJECT_OPERATOR","->",58],["T_STRING","create",58],"(",["T_ARRAY","array",58],"(",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'uid'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_LNUMBER","1",59],",",["T_WHITESPACE","\n        ",59],["T_CONSTANT_ENCAPSED_STRING","'name'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'entity-test'",60],",",["T_WHITESPACE","\n        ",60],["T_CONSTANT_ENCAPSED_STRING","'mail'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'entity@localhost'",61],",",["T_WHITESPACE","\n        ",61],["T_CONSTANT_ENCAPSED_STRING","'status'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","TRUE",62],",",["T_WHITESPACE","\n      ",62],")",")",["T_WHITESPACE","\n      ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","save",64],"(",")",";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * Create a field and an associated field storage.\n   *\n   * @param string $suffix\n   *   (optional) A string that should only contain characters that are valid in\n   *   PHP variable names as well.\n   * @param string $entity_type\n   *   (optional) The entity type on which the field should be created.\n   *   Defaults to \"entity_test\".\n   * @param string $bundle\n   *   (optional) The entity type on which the field should be created.\n   *   Defaults to the default bundle of the entity type.\n   *\/",67],["T_WHITESPACE","\n  ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","createFieldWithStorage",80],"(",["T_VARIABLE","$suffix",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","''",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$entity_type",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$bundle",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","NULL",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_EMPTY","empty",81],"(",["T_VARIABLE","$bundle",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n      ",81],["T_VARIABLE","$bundle",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_type",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$field_name",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'field_name'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$suffix",84],";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$field_storage",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'field_storage'",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_VARIABLE","$suffix",85],";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$field_storage_uuid",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'field_storage_uuid'",86],["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_VARIABLE","$suffix",86],";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$field",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'field'",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_VARIABLE","$suffix",87],";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$field_definition",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'field_definition'",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_VARIABLE","$suffix",88],";",["T_WHITESPACE","\n\n    ",88],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","fieldTestData",90],["T_OBJECT_OPERATOR","->",90],["T_VARIABLE","$field_name",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","Unicode",90],["T_DOUBLE_COLON","::",90],["T_STRING","strtolower",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","randomMachineName",90],"(",")",["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'_field_name'",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$suffix",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","fieldTestData",91],["T_OBJECT_OPERATOR","->",91],["T_VARIABLE","$field_storage",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","FieldStorageConfig",91],["T_DOUBLE_COLON","::",91],["T_STRING","create",91],"(",["T_ARRAY","array",91],"(",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'field_name'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","fieldTestData",92],["T_OBJECT_OPERATOR","->",92],["T_VARIABLE","$field_name",92],",",["T_WHITESPACE","\n      ",92],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$entity_type",93],",",["T_WHITESPACE","\n      ",93],["T_CONSTANT_ENCAPSED_STRING","'type'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'test_field'",94],",",["T_WHITESPACE","\n      ",94],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_LNUMBER","4",95],",",["T_WHITESPACE","\n    ",95],")",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","fieldTestData",97],["T_OBJECT_OPERATOR","->",97],["T_VARIABLE","$field_storage",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","save",97],"(",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","fieldTestData",98],["T_OBJECT_OPERATOR","->",98],["T_VARIABLE","$field_storage_uuid",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","fieldTestData",98],["T_OBJECT_OPERATOR","->",98],["T_VARIABLE","$field_storage",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","uuid",98],"(",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","fieldTestData",99],["T_OBJECT_OPERATOR","->",99],["T_VARIABLE","$field_definition",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'field_storage'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","fieldTestData",100],["T_OBJECT_OPERATOR","->",100],["T_VARIABLE","$field_storage",100],",",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'bundle'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$bundle",101],",",["T_WHITESPACE","\n      ",101],["T_CONSTANT_ENCAPSED_STRING","'label'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","randomMachineName",102],"(",")",["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'_label'",102],",",["T_WHITESPACE","\n      ",102],["T_CONSTANT_ENCAPSED_STRING","'description'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","randomMachineName",103],"(",")",["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'_description'",103],",",["T_WHITESPACE","\n      ",103],["T_CONSTANT_ENCAPSED_STRING","'settings'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_WHITESPACE","\n        ",104],["T_CONSTANT_ENCAPSED_STRING","'test_field_setting'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","randomMachineName",105],"(",")",",",["T_WHITESPACE","\n      ",105],")",",",["T_WHITESPACE","\n    ",106],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","fieldTestData",108],["T_OBJECT_OPERATOR","->",108],["T_VARIABLE","$field",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","FieldConfig",108],["T_DOUBLE_COLON","::",108],["T_STRING","create",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","fieldTestData",108],["T_OBJECT_OPERATOR","->",108],["T_VARIABLE","$field_definition",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","fieldTestData",109],["T_OBJECT_OPERATOR","->",109],["T_VARIABLE","$field",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","save",109],"(",")",";",["T_WHITESPACE","\n\n    ",109],["T_STRING","entity_get_form_display",111],"(",["T_VARIABLE","$entity_type",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$bundle",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'default'",111],")",["T_WHITESPACE","\n      ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","setComponent",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","fieldTestData",112],["T_OBJECT_OPERATOR","->",112],["T_VARIABLE","$field_name",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_WHITESPACE","\n        ",112],["T_CONSTANT_ENCAPSED_STRING","'type'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'test_field_widget'",113],",",["T_WHITESPACE","\n        ",113],["T_CONSTANT_ENCAPSED_STRING","'settings'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_WHITESPACE","\n          ",114],["T_CONSTANT_ENCAPSED_STRING","'test_widget_setting'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","randomMachineName",115],"(",")",",",["T_WHITESPACE","\n        ",115],")",["T_WHITESPACE","\n      ",116],")",")",["T_WHITESPACE","\n      ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","save",118],"(",")",";",["T_WHITESPACE","\n  ",118],"}",["T_WHITESPACE","\n\n  ",119],["T_DOC_COMMENT","\/**\n   * Saves and reloads an entity.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity to save.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface\n   *   The entity, freshly reloaded from storage.\n   *\/",121],["T_WHITESPACE","\n  ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","entitySaveReload",130],"(",["T_STRING","EntityInterface",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$entity",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$entity",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","save",131],"(",")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$controller",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","container",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","get",132],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getStorage",132],"(",["T_VARIABLE","$entity",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getEntityTypeId",132],"(",")",")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$controller",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","resetCache",133],"(",")",";",["T_WHITESPACE","\n    ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$controller",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","load",134],"(",["T_VARIABLE","$entity",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","id",134],"(",")",")",";",["T_WHITESPACE","\n  ",134],"}",["T_WHITESPACE","\n\n  ",135],["T_DOC_COMMENT","\/**\n   * Validate and save entity. Fail if violations are found.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity to save.\n   *\/",137],["T_WHITESPACE","\n  ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","entityValidateAndSave",143],"(",["T_STRING","EntityInterface",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$entity",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$violations",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$entity",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","validate",144],"(",")",";",["T_WHITESPACE","\n    ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$violations",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","count",145],"(",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n      ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","fail",146],"(",["T_VARIABLE","$violations",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n    ",147],["T_ELSE","else",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n      ",148],["T_VARIABLE","$entity",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","save",149],"(",")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n  ",150],"}",["T_WHITESPACE","\n\n  ",151],["T_DOC_COMMENT","\/**\n   * Generate random values for a field_test field.\n   *\n   * @param $cardinality\n   *   Number of values to generate.\n   * @return\n   *   An array of random values, in the format expected for field values.\n   *\/",153],["T_WHITESPACE","\n  ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","_generateTestFieldValues",161],"(",["T_VARIABLE","$cardinality",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$values",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",")",";",["T_WHITESPACE","\n    ",162],["T_FOR","for",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$i",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_LNUMBER","0",163],";",["T_WHITESPACE"," ",163],["T_VARIABLE","$i",163],["T_WHITESPACE"," ",163],"<",["T_WHITESPACE"," ",163],["T_VARIABLE","$cardinality",163],";",["T_WHITESPACE"," ",163],["T_VARIABLE","$i",163],["T_INC","++",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n      ",163],["T_COMMENT","\/\/ field_test fields treat 0 as 'empty value'.\n",164],["T_WHITESPACE","      ",165],["T_VARIABLE","$values",165],"[",["T_VARIABLE","$i",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",165],"]",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","mt_rand",165],"(",["T_LNUMBER","1",165],",",["T_WHITESPACE"," ",165],["T_LNUMBER","127",165],")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n    ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$values",167],";",["T_WHITESPACE","\n  ",167],"}",["T_WHITESPACE","\n\n  ",168],["T_DOC_COMMENT","\/**\n   * Assert that a field has the expected values in an entity.\n   *\n   * This function only checks a single column in the field values.\n   *\n   * @param EntityInterface $entity\n   *   The entity to test.\n   * @param $field_name\n   *   The name of the field to test\n   * @param $expected_values\n   *   The array of expected values.\n   * @param $langcode\n   *   (Optional) The language code for the values. Defaults to\n   *   \\Drupal\\Core\\Language\\LanguageInterface::LANGCODE_NOT_SPECIFIED.\n   * @param $column\n   *   (Optional) The name of the column to check. Defaults to 'value'.\n   *\/",170],["T_WHITESPACE","\n  ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","assertFieldValues",187],"(",["T_STRING","EntityInterface",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$entity",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$field_name",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$expected_values",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$langcode",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","LanguageInterface",187],["T_DOUBLE_COLON","::",187],["T_STRING","LANGCODE_NOT_SPECIFIED",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$column",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'value'",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n    ",187],["T_COMMENT","\/\/ Re-load the entity to make sure we have the latest changes.\n",188],["T_WHITESPACE","    ",189],["T_VARIABLE","$storage",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","container",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","get",189],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",189],")",["T_WHITESPACE","\n      ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","getStorage",190],"(",["T_VARIABLE","$entity",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getEntityTypeId",190],"(",")",")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$storage",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","resetCache",191],"(","[",["T_VARIABLE","$entity",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","id",191],"(",")","]",")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$e",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$storage",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","load",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","entityId",192],")",";",["T_WHITESPACE","\n\n    ",192],["T_VARIABLE","$field",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$values",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$e",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getTranslation",194],"(",["T_VARIABLE","$langcode",194],")",["T_OBJECT_OPERATOR","->",194],["T_VARIABLE","$field_name",194],";",["T_WHITESPACE","\n    ",194],["T_COMMENT","\/\/ Filter out empty values so that they don't mess with the assertions.\n",195],["T_WHITESPACE","    ",196],["T_VARIABLE","$field",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","filterEmptyItems",196],"(",")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$values",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$field",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getValue",197],"(",")",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","assertEqual",198],"(",["T_STRING","count",198],"(",["T_VARIABLE","$values",198],")",",",["T_WHITESPACE"," ",198],["T_STRING","count",198],"(",["T_VARIABLE","$expected_values",198],")",",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'Expected number of values were saved.'",198],")",";",["T_WHITESPACE","\n    ",198],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$expected_values",199],["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$key",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$value",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n      ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","assertEqual",200],"(",["T_VARIABLE","$values",200],"[",["T_VARIABLE","$key",200],"]","[",["T_VARIABLE","$column",200],"]",",",["T_WHITESPACE"," ",200],["T_VARIABLE","$value",200],",",["T_WHITESPACE"," ",200],["T_STRING","format_string",200],"(",["T_CONSTANT_ENCAPSED_STRING","'Value @value was saved correctly.'",200],",",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_CONSTANT_ENCAPSED_STRING","'@value'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$value",200],")",")",")",";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n  ",201],"}",["T_WHITESPACE","\n\n",202],"}",["T_WHITESPACE","\n",204]]
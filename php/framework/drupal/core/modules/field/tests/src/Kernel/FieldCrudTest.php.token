[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityStorageException",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldException",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","entity_test",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityTest",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldStorageConfig",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","field",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FieldConfig",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Create field entities by attaching fields to entities.\n *\n * @group field\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","FieldCrudTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","FieldKernelTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * The field storage entity.\n   *\n   * @var \\Drupal\\field\\Entity\\FieldStorageConfig\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$fieldStorage",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * The field entity definition.\n   *\n   * @var array\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$fieldStorageDefinition",31],";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * The field entity definition.\n   *\n   * @var array\n   *\/",33],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$fieldDefinition",38],";",["T_WHITESPACE","\n\n  ",38],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","setUp",40],"(",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n    ",40],["T_STRING","parent",41],["T_DOUBLE_COLON","::",41],["T_STRING","setUp",41],"(",")",";",["T_WHITESPACE","\n\n    ",41],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","fieldStorageDefinition",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'field_name'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_STRING","Unicode",44],["T_DOUBLE_COLON","::",44],["T_STRING","strtolower",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","randomMachineName",44],"(",")",")",",",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",45],",",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'type'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'test_field'",46],",",["T_WHITESPACE","\n    ",46],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","fieldStorage",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","FieldStorageConfig",48],["T_DOUBLE_COLON","::",48],["T_STRING","create",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","fieldStorageDefinition",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","fieldStorage",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","save",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","fieldDefinition",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'field_name'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","fieldStorage",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getName",51],"(",")",",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",52],",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'bundle'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",53],",",["T_WHITESPACE","\n    ",53],")",";",["T_WHITESPACE","\n  ",54],"}",["T_WHITESPACE","\n\n  ",55],["T_COMMENT","\/\/ TODO : test creation with\n",57],["T_WHITESPACE","  ",58],["T_COMMENT","\/\/ - a full fledged $field structure, check that all the values are there\n",58],["T_WHITESPACE","  ",59],["T_COMMENT","\/\/ - a minimal $field structure, check all default values are set\n",59],["T_WHITESPACE","  ",60],["T_COMMENT","\/\/ defer actual $field comparison to a helper function, used for the two cases above,\n",60],["T_WHITESPACE","  ",61],["T_COMMENT","\/\/ and for testUpdateField\n",61],["T_WHITESPACE","\n  ",62],["T_DOC_COMMENT","\/**\n   * Test the creation of a field.\n   *\/",63],["T_WHITESPACE","\n  ",65],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","testCreateField",66],"(",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n    ",66],["T_COMMENT","\/\/ Set a state flag so that field_test.module knows to add an in-memory\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/ constraint for this field.\n",68],["T_WHITESPACE","    ",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Drupal",69],["T_DOUBLE_COLON","::",69],["T_STRING","state",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","set",69],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_add_constraint'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","fieldStorage",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getName",69],"(",")",")",";",["T_WHITESPACE","\n    ",69],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Field\\FieldConfigInterface $field *\/",70],["T_WHITESPACE","\n    ",70],["T_VARIABLE","$field",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","FieldConfig",71],["T_DOUBLE_COLON","::",71],["T_STRING","create",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","fieldDefinition",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$field",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","save",72],"(",")",";",["T_WHITESPACE","\n\n    ",72],["T_VARIABLE","$field",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","FieldConfig",74],["T_DOUBLE_COLON","::",74],["T_STRING","load",74],"(",["T_VARIABLE","$field",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","id",74],"(",")",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertTrue",75],"(",["T_VARIABLE","$field",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getSetting",75],"(",["T_CONSTANT_ENCAPSED_STRING","'field_setting_from_config_data'",75],")",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertNull",76],"(",["T_VARIABLE","$field",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getSetting",76],"(",["T_CONSTANT_ENCAPSED_STRING","'config_data_from_field_setting'",76],")",")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ Read the configuration. Check against raw configuration data rather than\n",78],["T_WHITESPACE","    ",79],["T_COMMENT","\/\/ the loaded ConfigEntity, to be sure we check that the defaults are\n",79],["T_WHITESPACE","    ",80],["T_COMMENT","\/\/ applied on write.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$config",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","config",81],"(",["T_CONSTANT_ENCAPSED_STRING","'field.field.'",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$field",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","id",81],"(",")",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","get",81],"(",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$field_type_manager",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Drupal",82],["T_DOUBLE_COLON","::",82],["T_STRING","service",82],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.field.field_type'",82],")",";",["T_WHITESPACE","\n\n    ",82],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertTrue",84],"(",["T_VARIABLE","$config",84],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",84],"]","[",["T_CONSTANT_ENCAPSED_STRING","'config_data_from_field_setting'",84],"]",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertTrue",85],"(","!",["T_ISSET","isset",85],"(",["T_VARIABLE","$config",85],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",85],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field_setting_from_config_data'",85],"]",")",")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Since we are working with raw configuration, this needs to be unset\n",87],["T_WHITESPACE","    ",88],["T_COMMENT","\/\/ manually.\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ @see Drupal\\field_test\\Plugin\\Field\\FieldType\\TestItem::fieldSettingsFromConfigData()\n",89],["T_WHITESPACE","    ",90],["T_UNSET","unset",90],"(",["T_VARIABLE","$config",90],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",90],"]","[",["T_CONSTANT_ENCAPSED_STRING","'config_data_from_field_setting'",90],"]",")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ Check that default values are set.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertEqual",93],"(",["T_VARIABLE","$config",93],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",93],"]",",",["T_WHITESPACE"," ",93],["T_STRING","FALSE",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'Required defaults to false.'",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertIdentical",94],"(",["T_VARIABLE","$config",94],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",94],"]",",",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","fieldDefinition",94],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",94],"]",",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'Label defaults to field name.'",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertIdentical",95],"(",["T_VARIABLE","$config",95],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",95],"]",",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","''",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'Description defaults to empty string.'",95],")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Check that default settings are set.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertEqual",98],"(",["T_VARIABLE","$config",98],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",98],"]",",",["T_WHITESPACE"," ",98],["T_VARIABLE","$field_type_manager",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getDefaultFieldSettings",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","fieldStorageDefinition",98],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",98],"]",")",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'Default field settings have been written.'",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_COMMENT","\/\/ Check that the denormalized 'field_type' was properly written.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEqual",101],"(",["T_VARIABLE","$config",101],"[",["T_CONSTANT_ENCAPSED_STRING","'field_type'",101],"]",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","fieldStorageDefinition",101],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",101],"]",")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Test constraints are applied. A Range constraint is added dynamically to\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ limit the field to values between 0 and 32.\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ @see field_test_entity_bundle_field_info_alter()\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","doFieldValidationTests",106],"(",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Test FieldConfigBase::setPropertyConstraints().\n",108],["T_WHITESPACE","    ",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Drupal",109],["T_DOUBLE_COLON","::",109],["T_STRING","state",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","set",109],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_set_constraint'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","fieldStorage",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getName",109],"(",")",")",";",["T_WHITESPACE","\n    ",109],["T_NS_SEPARATOR","\\",110],["T_STRING","Drupal",110],["T_DOUBLE_COLON","::",110],["T_STRING","state",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","set",110],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_add_constraint'",110],",",["T_WHITESPACE"," ",110],["T_STRING","FALSE",110],")",";",["T_WHITESPACE","\n    ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Drupal",111],["T_DOUBLE_COLON","::",111],["T_STRING","entityManager",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","clearCachedFieldDefinitions",111],"(",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","doFieldValidationTests",112],"(",")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Guarantee that the field\/bundle combination is unique.\n",114],["T_WHITESPACE","    ",115],["T_TRY","try",115],["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n      ",115],["T_STRING","FieldConfig",116],["T_DOUBLE_COLON","::",116],["T_STRING","create",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","fieldDefinition",116],")",["T_OBJECT_OPERATOR","->",116],["T_STRING","save",116],"(",")",";",["T_WHITESPACE","\n      ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","fail",117],"(",["T_STRING","t",117],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot create two fields with the same field \/ bundle combination.'",117],")",")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n    ",118],["T_CATCH","catch",119],["T_WHITESPACE"," ",119],"(",["T_STRING","EntityStorageException",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$e",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n      ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","pass",120],"(",["T_STRING","t",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot create two fields with the same field \/ bundle combination.'",120],")",")",";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_COMMENT","\/\/ Check that the specified field exists.\n",123],["T_WHITESPACE","    ",124],["T_TRY","try",124],["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","fieldDefinition",125],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",125],"]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","randomMachineName",125],"(",")",";",["T_WHITESPACE","\n      ",125],["T_STRING","FieldConfig",126],["T_DOUBLE_COLON","::",126],["T_STRING","create",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","fieldDefinition",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","save",126],"(",")",";",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","fail",127],"(",["T_STRING","t",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot create a field with a non-existing storage.'",127],")",")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n    ",128],["T_CATCH","catch",129],["T_WHITESPACE"," ",129],"(",["T_STRING","FieldException",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$e",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","pass",130],"(",["T_STRING","t",130],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot create a field with a non-existing storage.'",130],")",")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ TODO: test other failures.\n",133],["T_WHITESPACE","  ",134],"}",["T_WHITESPACE","\n\n  ",134],["T_DOC_COMMENT","\/**\n   * Test creating a field with custom storage set.\n   *\/",136],["T_WHITESPACE","\n  ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","testCreateFieldCustomStorage",139],"(",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$field_name",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","Unicode",140],["T_DOUBLE_COLON","::",140],["T_STRING","strtolower",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","randomMachineName",140],"(",")",")",";",["T_WHITESPACE","\n    ",140],["T_NS_SEPARATOR","\\",141],["T_STRING","Drupal",141],["T_DOUBLE_COLON","::",141],["T_STRING","state",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","set",141],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_custom_storage'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$field_name",141],")",";",["T_WHITESPACE","\n\n    ",141],["T_VARIABLE","$field_storage",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","FieldStorageConfig",143],["T_DOUBLE_COLON","::",143],["T_STRING","create",143],"(","[",["T_WHITESPACE","\n      ",143],["T_CONSTANT_ENCAPSED_STRING","'field_name'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$field_name",144],",",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",145],",",["T_WHITESPACE","\n      ",145],["T_CONSTANT_ENCAPSED_STRING","'type'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'test_field'",146],",",["T_WHITESPACE","\n      ",146],["T_CONSTANT_ENCAPSED_STRING","'custom_storage'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_STRING","TRUE",147],",",["T_WHITESPACE","\n    ",147],"]",")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$field_storage",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","save",149],"(",")",";",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$field",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","FieldConfig",151],["T_DOUBLE_COLON","::",151],["T_STRING","create",151],"(","[",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'field_name'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$field_storage",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getName",152],"(",")",",",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",153],",",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'bundle'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",154],",",["T_WHITESPACE","\n    ",154],"]",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$field",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","save",156],"(",")",";",["T_WHITESPACE","\n\n    ",156],["T_NS_SEPARATOR","\\",158],["T_STRING","Drupal",158],["T_DOUBLE_COLON","::",158],["T_STRING","entityManager",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","clearCachedFieldDefinitions",158],"(",")",";",["T_WHITESPACE","\n\n    ",158],["T_COMMENT","\/\/ Check that no table has been created for the field.\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertFalse",161],"(",["T_NS_SEPARATOR","\\",161],["T_STRING","Drupal",161],["T_DOUBLE_COLON","::",161],["T_STRING","database",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","schema",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","tableExists",161],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test__'",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_VARIABLE","$field_storage",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getName",161],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",161],["T_COMMENT","\/\/ Save an entity with a value in the custom storage field and verify no\n",163],["T_WHITESPACE","    ",164],["T_COMMENT","\/\/ data is retrieved on load.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$entity",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","EntityTest",165],["T_DOUBLE_COLON","::",165],["T_STRING","create",165],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","randomString",165],"(",")",",",["T_WHITESPACE"," ",165],["T_VARIABLE","$field_name",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'Test value'",165],"]",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertIdentical",166],"(",["T_CONSTANT_ENCAPSED_STRING","'Test value'",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$entity",166],["T_OBJECT_OPERATOR","->",166],"{",["T_VARIABLE","$field_name",166],"}",["T_OBJECT_OPERATOR","->",166],["T_STRING","value",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'The test value is set on the field.'",166],")",";",["T_WHITESPACE","\n\n    ",166],["T_VARIABLE","$entity",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","save",168],"(",")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$entity",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","EntityTest",169],["T_DOUBLE_COLON","::",169],["T_STRING","load",169],"(",["T_VARIABLE","$entity",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","id",169],"(",")",")",";",["T_WHITESPACE","\n\n    ",169],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertNull",171],"(",["T_VARIABLE","$entity",171],["T_OBJECT_OPERATOR","->",171],"{",["T_VARIABLE","$field_name",171],"}",["T_OBJECT_OPERATOR","->",171],["T_STRING","value",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'The loaded entity field value is NULL.'",171],")",";",["T_WHITESPACE","\n  ",171],"}",["T_WHITESPACE","\n\n  ",172],["T_DOC_COMMENT","\/**\n   * Test reading back a field definition.\n   *\/",174],["T_WHITESPACE","\n  ",176],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","testReadField",177],"(",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n    ",177],["T_STRING","FieldConfig",178],["T_DOUBLE_COLON","::",178],["T_STRING","create",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","fieldDefinition",178],")",["T_OBJECT_OPERATOR","->",178],["T_STRING","save",178],"(",")",";",["T_WHITESPACE","\n\n    ",178],["T_COMMENT","\/\/ Read the field back.\n",180],["T_WHITESPACE","    ",181],["T_VARIABLE","$field",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","FieldConfig",181],["T_DOUBLE_COLON","::",181],["T_STRING","load",181],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.'",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","fieldDefinition",181],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",181],"]",["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'.'",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","fieldDefinition",181],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",181],"]",")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","assertTrue",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","fieldDefinition",182],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",182],"]",["T_WHITESPACE"," ",182],["T_IS_EQUAL","==",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$field",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getName",182],"(",")",",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'The field was properly read.'",182],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertTrue",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","fieldDefinition",183],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",183],"]",["T_WHITESPACE"," ",183],["T_IS_EQUAL","==",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$field",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getTargetEntityTypeId",183],"(",")",",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'The field was properly read.'",183],")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertTrue",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","fieldDefinition",184],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",184],"]",["T_WHITESPACE"," ",184],["T_IS_EQUAL","==",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$field",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getTargetBundle",184],"(",")",",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'The field was properly read.'",184],")",";",["T_WHITESPACE","\n  ",184],"}",["T_WHITESPACE","\n\n  ",185],["T_DOC_COMMENT","\/**\n   * Test the update of a field.\n   *\/",187],["T_WHITESPACE","\n  ",189],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","testUpdateField",190],"(",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n    ",190],["T_STRING","FieldConfig",191],["T_DOUBLE_COLON","::",191],["T_STRING","create",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","fieldDefinition",191],")",["T_OBJECT_OPERATOR","->",191],["T_STRING","save",191],"(",")",";",["T_WHITESPACE","\n\n    ",191],["T_COMMENT","\/\/ Check that basic changes are saved.\n",193],["T_WHITESPACE","    ",194],["T_VARIABLE","$field",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","FieldConfig",194],["T_DOUBLE_COLON","::",194],["T_STRING","load",194],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.'",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","fieldDefinition",194],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",194],"]",["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'.'",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","fieldDefinition",194],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",194],"]",")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$field",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","setRequired",195],"(","!",["T_VARIABLE","$field",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","isRequired",195],"(",")",")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$field",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setLabel",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","randomMachineName",196],"(",")",")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$field",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","set",197],"(",["T_CONSTANT_ENCAPSED_STRING","'description'",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","randomMachineName",197],"(",")",")",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$field",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","setSetting",198],"(",["T_CONSTANT_ENCAPSED_STRING","'test_field_setting'",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","randomMachineName",198],"(",")",")",";",["T_WHITESPACE","\n    ",198],["T_VARIABLE","$field",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","save",199],"(",")",";",["T_WHITESPACE","\n\n    ",199],["T_VARIABLE","$field_new",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","FieldConfig",201],["T_DOUBLE_COLON","::",201],["T_STRING","load",201],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.'",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","fieldDefinition",201],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",201],"]",["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'.'",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","fieldDefinition",201],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",201],"]",")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","assertEqual",202],"(",["T_VARIABLE","$field",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","isRequired",202],"(",")",",",["T_WHITESPACE"," ",202],["T_VARIABLE","$field_new",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","isRequired",202],"(",")",",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'\"required\" change is saved'",202],")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","assertEqual",203],"(",["T_VARIABLE","$field",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getLabel",203],"(",")",",",["T_WHITESPACE"," ",203],["T_VARIABLE","$field_new",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getLabel",203],"(",")",",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'\"label\" change is saved'",203],")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertEqual",204],"(",["T_VARIABLE","$field",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getDescription",204],"(",")",",",["T_WHITESPACE"," ",204],["T_VARIABLE","$field_new",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getDescription",204],"(",")",",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'\"description\" change is saved'",204],")",";",["T_WHITESPACE","\n\n    ",204],["T_COMMENT","\/\/ TODO: test failures.\n",206],["T_WHITESPACE","  ",207],"}",["T_WHITESPACE","\n\n  ",207],["T_DOC_COMMENT","\/**\n   * Test the deletion of a field.\n   *\/",209],["T_WHITESPACE","\n  ",211],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","testDeleteField",212],"(",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n    ",212],["T_COMMENT","\/\/ TODO: Test deletion of the data stored in the field also.\n",213],["T_WHITESPACE","    ",214],["T_COMMENT","\/\/ Need to check that data for a 'deleted' field \/ storage doesn't get loaded\n",214],["T_WHITESPACE","    ",215],["T_COMMENT","\/\/ Need to check data marked deleted is cleaned on cron (not implemented yet...)\n",215],["T_WHITESPACE","\n    ",216],["T_COMMENT","\/\/ Create two fields for the same field storage so we can test that only one\n",217],["T_WHITESPACE","    ",218],["T_COMMENT","\/\/ is deleted.\n",218],["T_WHITESPACE","    ",219],["T_STRING","FieldConfig",219],["T_DOUBLE_COLON","::",219],["T_STRING","create",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","fieldDefinition",219],")",["T_OBJECT_OPERATOR","->",219],["T_STRING","save",219],"(",")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$another_field_definition",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","fieldDefinition",220],";",["T_WHITESPACE","\n    ",220],["T_VARIABLE","$another_field_definition",221],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",221],"]",["T_WHITESPACE"," ",221],["T_CONCAT_EQUAL",".=",221],["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'_another_bundle'",221],";",["T_WHITESPACE","\n    ",221],["T_STRING","entity_test_create_bundle",222],"(",["T_VARIABLE","$another_field_definition",222],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",222],"]",")",";",["T_WHITESPACE","\n    ",222],["T_STRING","FieldConfig",223],["T_DOUBLE_COLON","::",223],["T_STRING","create",223],"(",["T_VARIABLE","$another_field_definition",223],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","save",223],"(",")",";",["T_WHITESPACE","\n\n    ",223],["T_COMMENT","\/\/ Test that the first field is not deleted, and then delete it.\n",225],["T_WHITESPACE","    ",226],["T_VARIABLE","$field",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","current",226],"(",["T_STRING","entity_load_multiple_by_properties",226],"(",["T_CONSTANT_ENCAPSED_STRING","'field_config'",226],",",["T_WHITESPACE"," ",226],["T_ARRAY","array",226],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'field_name'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","fieldDefinition",226],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",226],"]",",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'bundle'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","fieldDefinition",226],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",226],"]",",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'include_deleted'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_STRING","TRUE",226],")",")",")",";",["T_WHITESPACE","\n    ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","assertTrue",227],"(","!",["T_EMPTY","empty",227],"(",["T_VARIABLE","$field",227],")",["T_WHITESPACE"," ",227],["T_BOOLEAN_AND","&&",227],["T_WHITESPACE"," ",227],["T_EMPTY","empty",227],"(",["T_VARIABLE","$field",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","deleted",227],")",",",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'A new field is not marked for deletion.'",227],")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$field",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","delete",228],"(",")",";",["T_WHITESPACE","\n\n    ",228],["T_COMMENT","\/\/ Make sure the field is marked as deleted when it is specifically loaded.\n",230],["T_WHITESPACE","    ",231],["T_VARIABLE","$field",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","current",231],"(",["T_STRING","entity_load_multiple_by_properties",231],"(",["T_CONSTANT_ENCAPSED_STRING","'field_config'",231],",",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'field_name'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","fieldDefinition",231],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",231],"]",",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'bundle'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","fieldDefinition",231],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",231],"]",",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'include_deleted'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_STRING","TRUE",231],")",")",")",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","assertTrue",232],"(",["T_VARIABLE","$field",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","isDeleted",232],"(",")",",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'A deleted field is marked for deletion.'",232],")",";",["T_WHITESPACE","\n\n    ",232],["T_COMMENT","\/\/ Try to load the field normally and make sure it does not show up.\n",234],["T_WHITESPACE","    ",235],["T_VARIABLE","$field",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","FieldConfig",235],["T_DOUBLE_COLON","::",235],["T_STRING","load",235],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.'",235],["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'.'",235],["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","fieldDefinition",235],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",235],"]",["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'.'",235],["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","fieldDefinition",235],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",235],"]",")",";",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","assertTrue",236],"(",["T_EMPTY","empty",236],"(",["T_VARIABLE","$field",236],")",",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'A deleted field is not loaded by default.'",236],")",";",["T_WHITESPACE","\n\n    ",236],["T_COMMENT","\/\/ Make sure the other field is not deleted.\n",238],["T_WHITESPACE","    ",239],["T_VARIABLE","$another_field",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","FieldConfig",239],["T_DOUBLE_COLON","::",239],["T_STRING","load",239],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.'",239],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_VARIABLE","$another_field_definition",239],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",239],"]",["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'.'",239],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_VARIABLE","$another_field_definition",239],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",239],"]",")",";",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","assertTrue",240],"(","!",["T_EMPTY","empty",240],"(",["T_VARIABLE","$another_field",240],")",["T_WHITESPACE"," ",240],["T_BOOLEAN_AND","&&",240],["T_WHITESPACE"," ",240],["T_EMPTY","empty",240],"(",["T_VARIABLE","$another_field",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","deleted",240],")",",",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'A non-deleted field is not marked for deletion.'",240],")",";",["T_WHITESPACE","\n  ",240],"}",["T_WHITESPACE","\n\n  ",241],["T_DOC_COMMENT","\/**\n   * Tests the cross deletion behavior between field storages and fields.\n   *\/",243],["T_WHITESPACE","\n  ",245],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","testDeleteFieldCrossDeletion",246],"(",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n    ",246],["T_VARIABLE","$field_definition_2",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","fieldDefinition",247],";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$field_definition_2",248],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",248],"]",["T_WHITESPACE"," ",248],["T_CONCAT_EQUAL",".=",248],["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'_another_bundle'",248],";",["T_WHITESPACE","\n    ",248],["T_STRING","entity_test_create_bundle",249],"(",["T_VARIABLE","$field_definition_2",249],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",249],"]",")",";",["T_WHITESPACE","\n\n    ",249],["T_COMMENT","\/\/ Check that deletion of a field storage deletes its fields.\n",251],["T_WHITESPACE","    ",252],["T_VARIABLE","$field_storage",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","fieldStorage",252],";",["T_WHITESPACE","\n    ",252],["T_STRING","FieldConfig",253],["T_DOUBLE_COLON","::",253],["T_STRING","create",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","fieldDefinition",253],")",["T_OBJECT_OPERATOR","->",253],["T_STRING","save",253],"(",")",";",["T_WHITESPACE","\n    ",253],["T_STRING","FieldConfig",254],["T_DOUBLE_COLON","::",254],["T_STRING","create",254],"(",["T_VARIABLE","$field_definition_2",254],")",["T_OBJECT_OPERATOR","->",254],["T_STRING","save",254],"(",")",";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$field_storage",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","delete",255],"(",")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","assertFalse",256],"(",["T_STRING","FieldConfig",256],["T_DOUBLE_COLON","::",256],["T_STRING","loadByName",256],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","fieldDefinition",256],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",256],"]",",",["T_WHITESPACE"," ",256],["T_VARIABLE","$field_storage",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getName",256],"(",")",")",")",";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","assertFalse",257],"(",["T_STRING","FieldConfig",257],["T_DOUBLE_COLON","::",257],["T_STRING","loadByName",257],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$field_definition_2",257],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",257],"]",",",["T_WHITESPACE"," ",257],["T_VARIABLE","$field_storage",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getName",257],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",257],["T_COMMENT","\/\/ Check that deletion of the last field deletes the storage.\n",259],["T_WHITESPACE","    ",260],["T_VARIABLE","$field_storage",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","FieldStorageConfig",260],["T_DOUBLE_COLON","::",260],["T_STRING","create",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","fieldStorageDefinition",260],")",";",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$field_storage",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","save",261],"(",")",";",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$field",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_STRING","FieldConfig",262],["T_DOUBLE_COLON","::",262],["T_STRING","create",262],"(",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","fieldDefinition",262],")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$field",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","save",263],"(",")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$field_2",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","FieldConfig",264],["T_DOUBLE_COLON","::",264],["T_STRING","create",264],"(",["T_VARIABLE","$field_definition_2",264],")",";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$field_2",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","save",265],"(",")",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$field",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","delete",266],"(",")",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","assertTrue",267],"(",["T_STRING","FieldStorageConfig",267],["T_DOUBLE_COLON","::",267],["T_STRING","loadByName",267],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$field_storage",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getName",267],"(",")",")",")",";",["T_WHITESPACE","\n    ",267],["T_VARIABLE","$field_2",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","delete",268],"(",")",";",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","assertFalse",269],"(",["T_STRING","FieldStorageConfig",269],["T_DOUBLE_COLON","::",269],["T_STRING","loadByName",269],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$field_storage",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getName",269],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",269],["T_COMMENT","\/\/ Check that deletion of all fields using a storage simultaneously deletes\n",271],["T_WHITESPACE","    ",272],["T_COMMENT","\/\/ the storage.\n",272],["T_WHITESPACE","    ",273],["T_VARIABLE","$field_storage",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","FieldStorageConfig",273],["T_DOUBLE_COLON","::",273],["T_STRING","create",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","fieldStorageDefinition",273],")",";",["T_WHITESPACE","\n    ",273],["T_VARIABLE","$field_storage",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","save",274],"(",")",";",["T_WHITESPACE","\n    ",274],["T_VARIABLE","$field",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","FieldConfig",275],["T_DOUBLE_COLON","::",275],["T_STRING","create",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","fieldDefinition",275],")",";",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$field",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","save",276],"(",")",";",["T_WHITESPACE","\n    ",276],["T_VARIABLE","$field_2",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","FieldConfig",277],["T_DOUBLE_COLON","::",277],["T_STRING","create",277],"(",["T_VARIABLE","$field_definition_2",277],")",";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$field_2",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","save",278],"(",")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","container",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","get",279],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",279],")",["T_OBJECT_OPERATOR","->",279],["T_STRING","getStorage",279],"(",["T_CONSTANT_ENCAPSED_STRING","'field_config'",279],")",["T_OBJECT_OPERATOR","->",279],["T_STRING","delete",279],"(",["T_ARRAY","array",279],"(",["T_VARIABLE","$field",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$field_2",279],")",")",";",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","assertFalse",280],"(",["T_STRING","FieldStorageConfig",280],["T_DOUBLE_COLON","::",280],["T_STRING","loadByName",280],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$field_storage",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getName",280],"(",")",")",")",";",["T_WHITESPACE","\n  ",280],"}",["T_WHITESPACE","\n\n  ",281],["T_DOC_COMMENT","\/**\n   * Tests configurable field validation.\n   *\n   * @see field_test_entity_bundle_field_info_alter()\n   *\/",283],["T_WHITESPACE","\n  ",287],["T_PROTECTED","protected",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","doFieldValidationTests",288],"(",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n    ",288],["T_VARIABLE","$entity",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","EntityTest",289],["T_DOUBLE_COLON","::",289],["T_STRING","create",289],"(",")",";",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$entity",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","set",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","fieldStorage",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getName",290],"(",")",",",["T_WHITESPACE"," ",290],["T_LNUMBER","1",290],")",";",["T_WHITESPACE","\n    ",290],["T_VARIABLE","$violations",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$entity",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","validate",291],"(",")",";",["T_WHITESPACE","\n    ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","assertEqual",292],"(",["T_STRING","count",292],"(",["T_VARIABLE","$violations",292],")",",",["T_WHITESPACE"," ",292],["T_LNUMBER","0",292],",",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'No violations found when in-range value passed.'",292],")",";",["T_WHITESPACE","\n\n    ",292],["T_VARIABLE","$entity",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","set",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","fieldStorage",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getName",294],"(",")",",",["T_WHITESPACE"," ",294],["T_LNUMBER","33",294],")",";",["T_WHITESPACE","\n    ",294],["T_VARIABLE","$violations",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$entity",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","validate",295],"(",")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assertEqual",296],"(",["T_STRING","count",296],"(",["T_VARIABLE","$violations",296],")",",",["T_WHITESPACE"," ",296],["T_LNUMBER","1",296],",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'Violations found when using value outside the range.'",296],")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","assertEqual",297],"(",["T_VARIABLE","$violations",297],"[",["T_LNUMBER","0",297],"]",["T_OBJECT_OPERATOR","->",297],["T_STRING","getPropertyPath",297],"(",")",",",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","fieldStorage",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getName",297],"(",")",["T_WHITESPACE"," ",297],".",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","'.0.value'",297],")",";",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","assertEqual",298],"(",["T_VARIABLE","$violations",298],"[",["T_LNUMBER","0",298],"]",["T_OBJECT_OPERATOR","->",298],["T_STRING","getMessage",298],"(",")",",",["T_WHITESPACE"," ",298],["T_STRING","t",298],"(",["T_CONSTANT_ENCAPSED_STRING","'This value should be %limit or less.'",298],",",["T_WHITESPACE"," ",298],"[",["T_WHITESPACE","\n      ",298],["T_CONSTANT_ENCAPSED_STRING","'%limit'",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_LNUMBER","32",299],",",["T_WHITESPACE","\n    ",299],"]",")",")",";",["T_WHITESPACE","\n  ",300],"}",["T_WHITESPACE","\n\n",301],"}",["T_WHITESPACE","\n",303]]
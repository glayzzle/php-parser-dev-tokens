[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldConfig",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","language",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigurableLanguage",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldStorageConfig",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests multilanguage fields logic.\n *\n * The following tests will check the multilanguage logic in field handling.\n *\n * @group field\n *\/",10],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","TranslationTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","FieldKernelTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * node is required because the tests alter the node entity type.\n   *\n   * @var array\n   *\/",19],["T_WHITESPACE","\n  ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_STATIC","static",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$modules",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_ARRAY","array",26],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'node'",26],")",";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The name of the field to use in this test.\n   *\n   * @var string\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$fieldName",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * The name of the entity type to use in this test.\n   *\n   * @var string\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$entityType",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'test_entity'",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * An array defining the field storage to use in this test.\n   *\n   * @var array\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$fieldStorageDefinition",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * An array defining the field to use in this test.\n   *\n   * @var array\n   *\/",49],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$fieldDefinition",54],";",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * The field storage to use in this test.\n   *\n   * @var \\Drupal\\field\\Entity\\FieldStorageConfig\n   *\/",56],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$fieldStorage",61],";",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * The field to use in this test.\n   *\n   * @var \\Drupal\\field\\Entity\\FieldConfig\n   *\/",63],["T_WHITESPACE","\n  ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$field",68],";",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",70],["T_WHITESPACE","\n  ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","setUp",73],"(",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_STRING","parent",74],["T_DOUBLE_COLON","::",74],["T_STRING","setUp",74],"(",")",";",["T_WHITESPACE","\n\n    ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","installConfig",76],"(",["T_ARRAY","array",76],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",76],")",")",";",["T_WHITESPACE","\n\n    ",76],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","fieldName",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","Unicode",78],["T_DOUBLE_COLON","::",78],["T_STRING","strtolower",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","randomMachineName",78],"(",")",")",";",["T_WHITESPACE","\n\n    ",78],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","entityType",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",80],";",["T_WHITESPACE","\n\n    ",80],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","fieldStorageDefinition",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'field_name'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","fieldName",83],",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","entityType",84],",",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'type'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'test_field'",85],",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_LNUMBER","4",86],",",["T_WHITESPACE","\n    ",86],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","fieldStorage",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","FieldStorageConfig",88],["T_DOUBLE_COLON","::",88],["T_STRING","create",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","fieldStorageDefinition",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","fieldStorage",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","save",89],"(",")",";",["T_WHITESPACE","\n\n    ",89],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","fieldDefinition",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'field_storage'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","fieldStorage",92],",",["T_WHITESPACE","\n      ",92],["T_CONSTANT_ENCAPSED_STRING","'bundle'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",93],",",["T_WHITESPACE","\n    ",93],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","field",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","FieldConfig",95],["T_DOUBLE_COLON","::",95],["T_STRING","create",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","fieldDefinition",95],")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","field",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","save",96],"(",")",";",["T_WHITESPACE","\n\n    ",96],["T_FOR","for",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$i",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_LNUMBER","0",98],";",["T_WHITESPACE"," ",98],["T_VARIABLE","$i",98],["T_WHITESPACE"," ",98],"<",["T_WHITESPACE"," ",98],["T_LNUMBER","3",98],";",["T_WHITESPACE"," ",98],["T_INC","++",98],["T_VARIABLE","$i",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_STRING","ConfigurableLanguage",99],["T_DOUBLE_COLON","::",99],["T_STRING","create",99],"(",["T_ARRAY","array",99],"(",["T_WHITESPACE","\n        ",99],["T_CONSTANT_ENCAPSED_STRING","'id'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'l'",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_VARIABLE","$i",100],",",["T_WHITESPACE","\n        ",100],["T_CONSTANT_ENCAPSED_STRING","'label'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","randomString",101],"(",")",",",["T_WHITESPACE","\n      ",101],")",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","save",102],"(",")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n  ",103],"}",["T_WHITESPACE","\n\n  ",104],["T_DOC_COMMENT","\/**\n   * Test translatable fields storage\/retrieval.\n   *\/",106],["T_WHITESPACE","\n  ",108],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","testTranslatableFieldSaveLoad",109],"(",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n    ",109],["T_COMMENT","\/\/ Enable field translations for nodes.\n",110],["T_WHITESPACE","    ",111],["T_STRING","field_test_entity_info_translatable",111],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",111],",",["T_WHITESPACE"," ",111],["T_STRING","TRUE",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$entity_type",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Drupal",112],["T_DOUBLE_COLON","::",112],["T_STRING","entityManager",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getDefinition",112],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertTrue",113],"(",["T_VARIABLE","$entity_type",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","isTranslatable",113],"(",")",",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'Nodes are translatable.'",113],")",";",["T_WHITESPACE","\n\n    ",113],["T_COMMENT","\/\/ Prepare the field translations.\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$entity_type_id",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",116],";",["T_WHITESPACE","\n    ",116],["T_STRING","field_test_entity_info_translatable",117],"(",["T_VARIABLE","$entity_type_id",117],",",["T_WHITESPACE"," ",117],["T_STRING","TRUE",117],")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$entity",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","container",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","get",118],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",118],")",["T_WHITESPACE","\n      ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","getStorage",119],"(",["T_VARIABLE","$entity_type_id",119],")",["T_WHITESPACE","\n      ",119],["T_OBJECT_OPERATOR","->",120],["T_STRING","create",120],"(",["T_ARRAY","array",120],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","field",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getTargetBundle",120],"(",")",")",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$field_translations",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$available_langcodes",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","array_keys",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","container",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","get",122],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",122],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","getLanguages",122],"(",")",")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$entity",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","langcode",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","value",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","reset",123],"(",["T_VARIABLE","$available_langcodes",123],")",";",["T_WHITESPACE","\n    ",123],["T_FOREACH","foreach",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$available_langcodes",124],["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$langcode",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$field_translations",125],"[",["T_VARIABLE","$langcode",125],"]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_generateTestFieldValues",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","fieldStorage",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getCardinality",125],"(",")",")",";",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$translation",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$entity",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","hasTranslation",126],"(",["T_VARIABLE","$langcode",126],")",["T_WHITESPACE"," ",126],"?",["T_WHITESPACE"," ",126],["T_VARIABLE","$entity",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getTranslation",126],"(",["T_VARIABLE","$langcode",126],")",["T_WHITESPACE"," ",126],":",["T_WHITESPACE"," ",126],["T_VARIABLE","$entity",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","addTranslation",126],"(",["T_VARIABLE","$langcode",126],")",";",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$translation",127],["T_OBJECT_OPERATOR","->",127],"{",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","fieldName",127],"}",["T_OBJECT_OPERATOR","->",127],["T_STRING","setValue",127],"(",["T_VARIABLE","$field_translations",127],"[",["T_VARIABLE","$langcode",127],"]",")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_COMMENT","\/\/ Save and reload the field translations.\n",130],["T_WHITESPACE","    ",131],["T_VARIABLE","$entity",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","entitySaveReload",131],"(",["T_VARIABLE","$entity",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Check if the correct values were saved\/loaded.\n",133],["T_WHITESPACE","    ",134],["T_FOREACH","foreach",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$field_translations",134],["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$langcode",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$items",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n      ",134],["T_VARIABLE","$result",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","TRUE",135],";",["T_WHITESPACE","\n      ",135],["T_FOREACH","foreach",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$items",136],["T_WHITESPACE"," ",136],["T_AS","as",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$delta",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$item",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$result",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$result",137],["T_WHITESPACE"," ",137],["T_BOOLEAN_AND","&&",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$item",137],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",137],"]",["T_WHITESPACE"," ",137],["T_IS_EQUAL","==",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$entity",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTranslation",137],"(",["T_VARIABLE","$langcode",137],")",["T_OBJECT_OPERATOR","->",137],"{",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","fieldName",137],"}","[",["T_VARIABLE","$delta",137],"]",["T_OBJECT_OPERATOR","->",137],["T_STRING","value",137],";",["T_WHITESPACE","\n      ",137],"}",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertTrue",139],"(",["T_VARIABLE","$result",139],",",["T_WHITESPACE"," ",139],["T_STRING","format_string",139],"(",["T_CONSTANT_ENCAPSED_STRING","'%language translation correctly handled.'",139],",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'%language'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$langcode",139],")",")",")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_COMMENT","\/\/ Test default values.\n",142],["T_WHITESPACE","    ",143],["T_VARIABLE","$field_name_default",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","Unicode",143],["T_DOUBLE_COLON","::",143],["T_STRING","strtolower",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","randomMachineName",143],"(",")",["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'_field_name'",143],")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$field_storage_definition",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","fieldStorageDefinition",144],";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$field_storage_definition",145],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",145],"]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$field_name_default",145],";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$field_storage",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","FieldStorageConfig",146],["T_DOUBLE_COLON","::",146],["T_STRING","create",146],"(",["T_VARIABLE","$field_storage_definition",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$field_storage",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","save",147],"(",")",";",["T_WHITESPACE","\n\n    ",147],["T_VARIABLE","$field_definition",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","fieldDefinition",149],";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$field_definition",150],"[",["T_CONSTANT_ENCAPSED_STRING","'field_storage'",150],"]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$field_storage",150],";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$field_definition",151],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",151],"]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_STRING","rand",151],"(",["T_LNUMBER","1",151],",",["T_WHITESPACE"," ",151],["T_LNUMBER","127",151],")",")",")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$field",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","FieldConfig",152],["T_DOUBLE_COLON","::",152],["T_STRING","create",152],"(",["T_VARIABLE","$field_definition",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$field",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","save",153],"(",")",";",["T_WHITESPACE","\n\n    ",153],["T_VARIABLE","$translation_langcodes",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","array_slice",155],"(",["T_VARIABLE","$available_langcodes",155],",",["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],",",["T_WHITESPACE"," ",155],["T_LNUMBER","2",155],")",";",["T_WHITESPACE","\n    ",155],["T_STRING","asort",156],"(",["T_VARIABLE","$translation_langcodes",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$translation_langcodes",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","array_values",157],"(",["T_VARIABLE","$translation_langcodes",157],")",";",["T_WHITESPACE","\n\n    ",157],["T_VARIABLE","$values",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$field",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getTargetBundle",159],"(",")",",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'langcode'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$translation_langcodes",159],"[",["T_LNUMBER","0",159],"]",")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$entity",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","container",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","get",160],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",160],")",["T_WHITESPACE","\n      ",160],["T_OBJECT_OPERATOR","->",161],["T_STRING","getStorage",161],"(",["T_VARIABLE","$entity_type_id",161],")",["T_WHITESPACE","\n      ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","create",162],"(",["T_VARIABLE","$values",162],")",";",["T_WHITESPACE","\n    ",162],["T_FOREACH","foreach",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$translation_langcodes",163],["T_WHITESPACE"," ",163],["T_AS","as",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$langcode",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n      ",163],["T_VARIABLE","$values",164],"[",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","fieldName",164],"]","[",["T_VARIABLE","$langcode",164],"]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_generateTestFieldValues",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","fieldStorage",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getCardinality",164],"(",")",")",";",["T_WHITESPACE","\n      ",164],["T_VARIABLE","$translation",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$entity",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","hasTranslation",165],"(",["T_VARIABLE","$langcode",165],")",["T_WHITESPACE"," ",165],"?",["T_WHITESPACE"," ",165],["T_VARIABLE","$entity",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getTranslation",165],"(",["T_VARIABLE","$langcode",165],")",["T_WHITESPACE"," ",165],":",["T_WHITESPACE"," ",165],["T_VARIABLE","$entity",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","addTranslation",165],"(",["T_VARIABLE","$langcode",165],")",";",["T_WHITESPACE","\n      ",165],["T_VARIABLE","$translation",166],["T_OBJECT_OPERATOR","->",166],"{",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","fieldName",166],"}",["T_OBJECT_OPERATOR","->",166],["T_STRING","setValue",166],"(",["T_VARIABLE","$values",166],"[",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","fieldName",166],"]","[",["T_VARIABLE","$langcode",166],"]",")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_VARIABLE","$field_langcodes",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","array_keys",169],"(",["T_VARIABLE","$entity",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getTranslationLanguages",169],"(",")",")",";",["T_WHITESPACE","\n    ",169],["T_STRING","sort",170],"(",["T_VARIABLE","$field_langcodes",170],")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertEqual",171],"(",["T_VARIABLE","$translation_langcodes",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$field_langcodes",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'Missing translations did not get a default value.'",171],")",";",["T_WHITESPACE","\n\n    ",171],["T_COMMENT","\/\/ @todo Test every translation once the Entity Translation API allows for\n",173],["T_WHITESPACE","    ",174],["T_COMMENT","\/\/   multilingual defaults.\n",174],["T_WHITESPACE","    ",175],["T_VARIABLE","$langcode",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$entity",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","language",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getId",175],"(",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertEqual",176],"(",["T_VARIABLE","$entity",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getTranslation",176],"(",["T_VARIABLE","$langcode",176],")",["T_OBJECT_OPERATOR","->",176],"{",["T_VARIABLE","$field_name_default",176],"}",["T_OBJECT_OPERATOR","->",176],["T_STRING","getValue",176],"(",")",",",["T_WHITESPACE"," ",176],["T_VARIABLE","$field",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getDefaultValueLiteral",176],"(",")",",",["T_WHITESPACE"," ",176],["T_STRING","format_string",176],"(",["T_CONSTANT_ENCAPSED_STRING","'Default value correctly populated for language %language.'",176],",",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'%language'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$langcode",176],")",")",")",";",["T_WHITESPACE","\n\n    ",176],["T_COMMENT","\/\/ Check that explicit empty values are not overridden with default values.\n",178],["T_WHITESPACE","    ",179],["T_FOREACH","foreach",179],["T_WHITESPACE"," ",179],"(",["T_ARRAY","array",179],"(",["T_STRING","NULL",179],",",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",")",")",["T_WHITESPACE"," ",179],["T_AS","as",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$empty_items",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n      ",179],["T_VARIABLE","$values",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$field",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getTargetBundle",180],"(",")",",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'langcode'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$translation_langcodes",180],"[",["T_LNUMBER","0",180],"]",")",";",["T_WHITESPACE","\n      ",180],["T_VARIABLE","$entity",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","entity_create",181],"(",["T_VARIABLE","$entity_type_id",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$values",181],")",";",["T_WHITESPACE","\n      ",181],["T_FOREACH","foreach",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$translation_langcodes",182],["T_WHITESPACE"," ",182],["T_AS","as",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$langcode",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$values",183],"[",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","fieldName",183],"]","[",["T_VARIABLE","$langcode",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_generateTestFieldValues",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","fieldStorage",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getCardinality",183],"(",")",")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$translation",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$entity",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","hasTranslation",184],"(",["T_VARIABLE","$langcode",184],")",["T_WHITESPACE"," ",184],"?",["T_WHITESPACE"," ",184],["T_VARIABLE","$entity",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getTranslation",184],"(",["T_VARIABLE","$langcode",184],")",["T_WHITESPACE"," ",184],":",["T_WHITESPACE"," ",184],["T_VARIABLE","$entity",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","addTranslation",184],"(",["T_VARIABLE","$langcode",184],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$translation",185],["T_OBJECT_OPERATOR","->",185],"{",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","fieldName",185],"}",["T_OBJECT_OPERATOR","->",185],["T_STRING","setValue",185],"(",["T_VARIABLE","$values",185],"[",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","fieldName",185],"]","[",["T_VARIABLE","$langcode",185],"]",")",";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$translation",186],["T_OBJECT_OPERATOR","->",186],"{",["T_VARIABLE","$field_name_default",186],"}",["T_OBJECT_OPERATOR","->",186],["T_STRING","setValue",186],"(",["T_VARIABLE","$empty_items",186],")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$values",187],"[",["T_VARIABLE","$field_name_default",187],"]","[",["T_VARIABLE","$langcode",187],"]",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$empty_items",187],";",["T_WHITESPACE","\n      ",187],"}",["T_WHITESPACE","\n\n      ",188],["T_FOREACH","foreach",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$entity",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getTranslationLanguages",190],"(",")",["T_WHITESPACE"," ",190],["T_AS","as",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$langcode",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$language",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","assertEquals",191],"(","[","]",",",["T_WHITESPACE"," ",191],["T_VARIABLE","$entity",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getTranslation",191],"(",["T_VARIABLE","$langcode",191],")",["T_OBJECT_OPERATOR","->",191],"{",["T_VARIABLE","$field_name_default",191],"}",["T_OBJECT_OPERATOR","->",191],["T_STRING","getValue",191],"(",")",",",["T_WHITESPACE"," ",191],["T_STRING","format_string",191],"(",["T_CONSTANT_ENCAPSED_STRING","'Empty value correctly populated for language %language.'",191],",",["T_WHITESPACE"," ",191],["T_ARRAY","array",191],"(",["T_CONSTANT_ENCAPSED_STRING","'%language'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$langcode",191],")",")",")",";",["T_WHITESPACE","\n      ",191],"}",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n  ",193],"}",["T_WHITESPACE","\n\n  ",194],["T_DOC_COMMENT","\/**\n   * Tests field access.\n   *\n   * Regression test to verify that fieldAccess() can be called while only\n   * passing the required parameters.\n   *\n   * @see https:\/\/www.drupal.org\/node\/2404739\n   *\/",196],["T_WHITESPACE","\n  ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","testFieldAccess",204],"(",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n    ",204],["T_VARIABLE","$access_control_handler",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Drupal",205],["T_DOUBLE_COLON","::",205],["T_STRING","entityManager",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getAccessControlHandler",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","entityType",205],")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","assertTrue",206],"(",["T_VARIABLE","$access_control_handler",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","fieldAccess",206],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","field",206],")",")",";",["T_WHITESPACE","\n  ",206],"}",["T_WHITESPACE","\n\n",207],"}",["T_WHITESPACE","\n",209]]
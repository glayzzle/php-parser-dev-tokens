[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Extension",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Extension",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the integrity of field API plugin definitions.\n *\n * @group field\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","FieldDefinitionIntegrityTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","KernelTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * @var array\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_STATIC","static",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$modules",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],"[",["T_CONSTANT_ENCAPSED_STRING","'system'",18],"]",";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Tests the integrity of field plugin definitions.\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","testFieldPluginDefinitionIntegrity",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\n    ",23],["T_COMMENT","\/\/ Enable all core modules that provide field plugins.\n",25],["T_WHITESPACE","    ",26],["T_VARIABLE","$modules",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","system_rebuild_module_data",26],"(",")",";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$modules",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","array_filter",27],"(",["T_VARIABLE","$modules",27],",",["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],"(",["T_STRING","Extension",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$module",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n      ",27],["T_COMMENT","\/\/ Filter contrib, hidden, already enabled modules and modules in the\n",28],["T_WHITESPACE","      ",29],["T_COMMENT","\/\/ Testing package.\n",29],["T_WHITESPACE","      ",30],["T_IF","if",30],["T_WHITESPACE"," ",30],"(",["T_VARIABLE","$module",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","origin",30],["T_WHITESPACE"," ",30],["T_IS_IDENTICAL","===",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'core'",30],["T_WHITESPACE","\n        ",30],["T_BOOLEAN_AND","&&",31],["T_WHITESPACE"," ",31],["T_EMPTY","empty",31],"(",["T_VARIABLE","$module",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","info",31],"[",["T_CONSTANT_ENCAPSED_STRING","'hidden'",31],"]",")",["T_WHITESPACE","\n        ",31],["T_BOOLEAN_AND","&&",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$module",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","status",32],["T_WHITESPACE"," ",32],["T_IS_EQUAL","==",32],["T_WHITESPACE"," ",32],["T_STRING","FALSE",32],["T_WHITESPACE","\n        ",32],["T_BOOLEAN_AND","&&",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$module",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","info",33],"[",["T_CONSTANT_ENCAPSED_STRING","'package'",33],"]",["T_WHITESPACE"," ",33],["T_IS_NOT_IDENTICAL","!==",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'Testing'",33],["T_WHITESPACE","\n        ",33],["T_BOOLEAN_AND","&&",34],["T_WHITESPACE"," ",34],["T_STRING","is_readable",34],"(",["T_VARIABLE","$module",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getPath",34],"(",")",["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'\/src\/Plugin\/Field'",34],")",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n        ",34],["T_RETURN","return",35],["T_WHITESPACE"," ",35],["T_STRING","TRUE",35],";",["T_WHITESPACE","\n      ",35],"}",["T_WHITESPACE","\n      ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_STRING","FALSE",37],";",["T_WHITESPACE","\n    ",37],"}",")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","enableModules",39],"(",["T_STRING","array_keys",39],"(",["T_VARIABLE","$modules",39],")",")",";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/** @var \\Drupal\\Component\\Plugin\\Discovery\\DiscoveryInterface $field_type_manager *\/",41],["T_WHITESPACE","\n    ",41],["T_VARIABLE","$field_type_manager",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Drupal",42],["T_DOUBLE_COLON","::",42],["T_STRING","service",42],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.field.field_type'",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/** @var \\Drupal\\Component\\Plugin\\Discovery\\DiscoveryInterface $field_type_manager *\/",44],["T_WHITESPACE","\n    ",44],["T_VARIABLE","$field_formatter_manager",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Drupal",45],["T_DOUBLE_COLON","::",45],["T_STRING","service",45],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.field.formatter'",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/** @var \\Drupal\\Component\\Plugin\\Discovery\\DiscoveryInterface $field_type_manager *\/",47],["T_WHITESPACE","\n    ",47],["T_VARIABLE","$field_widget_manager",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Drupal",48],["T_DOUBLE_COLON","::",48],["T_STRING","service",48],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.field.widget'",48],")",";",["T_WHITESPACE","\n\n    ",48],["T_COMMENT","\/\/ Load the IDs of all available field type plugins.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$available_field_type_ids",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],"[","]",";",["T_WHITESPACE","\n    ",51],["T_FOREACH","foreach",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$field_type_manager",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getDefinitions",52],"(",")",["T_WHITESPACE"," ",52],["T_AS","as",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$definition",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n      ",52],["T_VARIABLE","$available_field_type_ids",53],"[","]",["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$definition",53],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",53],"]",";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Load the IDs of all available field widget plugins.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$available_field_widget_ids",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[","]",";",["T_WHITESPACE","\n    ",57],["T_FOREACH","foreach",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$field_widget_manager",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getDefinitions",58],"(",")",["T_WHITESPACE"," ",58],["T_AS","as",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$definition",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n      ",58],["T_VARIABLE","$available_field_widget_ids",59],"[","]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$definition",59],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",59],"]",";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Load the IDs of all available field formatter plugins.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$available_field_formatter_ids",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],"[","]",";",["T_WHITESPACE","\n    ",63],["T_FOREACH","foreach",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$field_formatter_manager",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getDefinitions",64],"(",")",["T_WHITESPACE"," ",64],["T_AS","as",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$definition",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$available_field_formatter_ids",65],"[","]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$definition",65],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",65],"]",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ Test the field type plugins.\n",68],["T_WHITESPACE","    ",69],["T_FOREACH","foreach",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$field_type_manager",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getDefinitions",69],"(",")",["T_WHITESPACE"," ",69],["T_AS","as",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$definition",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_COMMENT","\/\/ Test default field widgets.\n",70],["T_WHITESPACE","      ",71],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_ISSET","isset",71],"(",["T_VARIABLE","$definition",71],"[",["T_CONSTANT_ENCAPSED_STRING","'default_widget'",71],"]",")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n        ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_STRING","in_array",72],"(",["T_VARIABLE","$definition",72],"[",["T_CONSTANT_ENCAPSED_STRING","'default_widget'",72],"]",",",["T_WHITESPACE"," ",72],["T_VARIABLE","$available_field_widget_ids",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n          ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","pass",73],"(",["T_STRING","sprintf",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Field type %s uses an existing field widget by default.'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$definition",73],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",73],"]",")",")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n        ",74],["T_ELSE","else",75],["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n          ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","fail",76],"(",["T_STRING","sprintf",76],"(",["T_CONSTANT_ENCAPSED_STRING","'Field type %s uses a non-existent field widget by default: %s'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$definition",76],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",76],"]",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$definition",76],"[",["T_CONSTANT_ENCAPSED_STRING","'default_widget'",76],"]",")",")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n      ",77],"}",["T_WHITESPACE","\n\n      ",78],["T_COMMENT","\/\/ Test default field formatters.\n",80],["T_WHITESPACE","      ",81],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_ISSET","isset",81],"(",["T_VARIABLE","$definition",81],"[",["T_CONSTANT_ENCAPSED_STRING","'default_formatter'",81],"]",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_STRING","in_array",82],"(",["T_VARIABLE","$definition",82],"[",["T_CONSTANT_ENCAPSED_STRING","'default_formatter'",82],"]",",",["T_WHITESPACE"," ",82],["T_VARIABLE","$available_field_formatter_ids",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n          ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","pass",83],"(",["T_STRING","sprintf",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Field type %s uses an existing field formatter by default.'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$definition",83],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",83],"]",")",")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n        ",84],["T_ELSE","else",85],["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n          ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","fail",86],"(",["T_STRING","sprintf",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Field type %s uses a non-existent field formatter by default: %s'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$definition",86],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",86],"]",",",["T_WHITESPACE"," ",86],["T_VARIABLE","$definition",86],"[",["T_CONSTANT_ENCAPSED_STRING","'default_formatter'",86],"]",")",")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n      ",87],"}",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_COMMENT","\/\/ Test the field widget plugins.\n",91],["T_WHITESPACE","    ",92],["T_FOREACH","foreach",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$field_widget_manager",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getDefinitions",92],"(",")",["T_WHITESPACE"," ",92],["T_AS","as",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$definition",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$missing_field_type_ids",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","array_diff",93],"(",["T_VARIABLE","$definition",93],"[",["T_CONSTANT_ENCAPSED_STRING","'field_types'",93],"]",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$available_field_type_ids",93],")",";",["T_WHITESPACE","\n      ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$missing_field_type_ids",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","fail",95],"(",["T_STRING","sprintf",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Field widget %s integrates with non-existent field types: %s'",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$definition",95],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",95],"]",",",["T_WHITESPACE"," ",95],["T_STRING","implode",95],"(",["T_CONSTANT_ENCAPSED_STRING","', '",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$missing_field_type_ids",95],")",")",")",";",["T_WHITESPACE","\n      ",95],"}",["T_WHITESPACE","\n      ",96],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","pass",98],"(",["T_STRING","sprintf",98],"(",["T_CONSTANT_ENCAPSED_STRING","'Field widget %s integrates with existing field types.'",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$definition",98],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",98],"]",")",")",";",["T_WHITESPACE","\n      ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ Test the field formatter plugins.\n",102],["T_WHITESPACE","    ",103],["T_FOREACH","foreach",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$field_formatter_manager",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getDefinitions",103],"(",")",["T_WHITESPACE"," ",103],["T_AS","as",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$definition",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$missing_field_type_ids",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","array_diff",104],"(",["T_VARIABLE","$definition",104],"[",["T_CONSTANT_ENCAPSED_STRING","'field_types'",104],"]",",",["T_WHITESPACE"," ",104],["T_VARIABLE","$available_field_type_ids",104],")",";",["T_WHITESPACE","\n      ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$missing_field_type_ids",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","fail",106],"(",["T_STRING","sprintf",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Field formatter %s integrates with non-existent field types: %s'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$definition",106],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",106],"]",",",["T_WHITESPACE"," ",106],["T_STRING","implode",106],"(",["T_CONSTANT_ENCAPSED_STRING","', '",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$missing_field_type_ids",106],")",")",")",";",["T_WHITESPACE","\n      ",106],"}",["T_WHITESPACE","\n      ",107],["T_ELSE","else",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","pass",109],"(",["T_STRING","sprintf",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Field formatter %s integrates with existing field types.'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$definition",109],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",109],"]",")",")",";",["T_WHITESPACE","\n      ",109],"}",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n",112],"}",["T_WHITESPACE","\n",114]]
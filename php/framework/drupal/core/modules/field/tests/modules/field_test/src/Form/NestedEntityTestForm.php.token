[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field_test",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Form",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityChangedInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Form",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FormBase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Form",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FormStateInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityFormDisplay",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Provides a form for field_test routes.\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","NestedEntityTestForm",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","FormBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * {@inheritdoc]\n   *\/",16],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","getFormId",19],"(",")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n    ",19],["T_RETURN","return",20],["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'field_test_entity_nested_form'",20],";",["T_WHITESPACE","\n  ",20],"}",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * {@inheritdoc]\n   *\/",23],["T_WHITESPACE","\n  ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","buildForm",26],"(",["T_ARRAY","array",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$form",26],",",["T_WHITESPACE"," ",26],["T_STRING","FormStateInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$form_state",26],",",["T_WHITESPACE"," ",26],["T_STRING","EntityInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$entity_1",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","NULL",26],",",["T_WHITESPACE"," ",26],["T_STRING","EntityInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$entity_2",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","NULL",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_COMMENT","\/\/ First entity.\n",27],["T_WHITESPACE","    ",28],["T_VARIABLE","$form_state",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","set",28],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_1'",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$entity_1",28],")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$form_display_1",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","EntityFormDisplay",29],["T_DOUBLE_COLON","::",29],["T_STRING","collectRenderDisplay",29],"(",["T_VARIABLE","$entity_1",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'default'",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$form_state",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","set",30],"(",["T_CONSTANT_ENCAPSED_STRING","'form_display_1'",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$form_display_1",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$form_display_1",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","buildForm",31],"(",["T_VARIABLE","$entity_1",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$form",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$form_state",31],")",";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ Second entity.\n",33],["T_WHITESPACE","    ",34],["T_VARIABLE","$form_state",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","set",34],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$entity_2",34],")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$form_display_2",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","EntityFormDisplay",35],["T_DOUBLE_COLON","::",35],["T_STRING","collectRenderDisplay",35],"(",["T_VARIABLE","$entity_2",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'default'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$form_state",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","set",36],"(",["T_CONSTANT_ENCAPSED_STRING","'form_display_2'",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$form_display_2",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$form",37],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",37],"]",["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],"[",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'#type'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'details'",38],",",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","'#title'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_STRING","t",39],"(",["T_CONSTANT_ENCAPSED_STRING","'Second entity'",39],")",",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'#tree'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_STRING","TRUE",40],",",["T_WHITESPACE","\n      ",40],["T_CONSTANT_ENCAPSED_STRING","'#parents'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",41],"]",",",["T_WHITESPACE","\n      ",41],["T_CONSTANT_ENCAPSED_STRING","'#weight'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_LNUMBER","50",42],",",["T_WHITESPACE","\n      ",42],["T_CONSTANT_ENCAPSED_STRING","'#attributes'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],"[",["T_CONSTANT_ENCAPSED_STRING","'entity-2'",43],"]","]",["T_WHITESPACE","\n    ",43],"]",";",["T_WHITESPACE","\n\n    ",44],["T_VARIABLE","$form_display_2",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","buildForm",46],"(",["T_VARIABLE","$entity_2",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$form",46],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",46],"]",",",["T_WHITESPACE"," ",46],["T_VARIABLE","$form_state",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$entity_2",48],["T_WHITESPACE"," ",48],["T_INSTANCEOF","instanceof",48],["T_WHITESPACE"," ",48],["T_STRING","EntityChangedInterface",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n      ",48],["T_COMMENT","\/\/ Changed must be sent to the client, for later overwrite error checking.\n",49],["T_WHITESPACE","      ",50],["T_COMMENT","\/\/ @see Drupal\\field\\Tests\\NestedFormTest::testNestedEntityFormEntityLevelValidation()\n",50],["T_WHITESPACE","      ",51],["T_VARIABLE","$form",51],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",51],"]","[",["T_CONSTANT_ENCAPSED_STRING","'changed'",51],"]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],"[",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","'#type'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'hidden'",52],",",["T_WHITESPACE","\n        ",52],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$entity_1",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getChangedTime",53],"(",")",",",["T_WHITESPACE","\n      ",53],"]",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_VARIABLE","$form",57],"[",["T_CONSTANT_ENCAPSED_STRING","'save'",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'#type'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'submit'",58],",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'#value'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_STRING","t",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",59],")",",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'#weight'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_LNUMBER","100",60],",",["T_WHITESPACE","\n    ",60],")",";",["T_WHITESPACE","\n\n    ",61],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$form",63],";",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * {@inheritdoc]\n   *\/",66],["T_WHITESPACE","\n  ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","validateForm",69],"(",["T_ARRAY","array",69],["T_WHITESPACE"," ",69],"&",["T_VARIABLE","$form",69],",",["T_WHITESPACE"," ",69],["T_STRING","FormStateInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$form_state",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$entity_1",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$form_state",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_1'",70],")",";",["T_WHITESPACE","\n    ",70],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\Display\\EntityFormDisplayInterface $form_display_1 *\/",71],["T_WHITESPACE","\n    ",71],["T_VARIABLE","$form_display_1",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$form_state",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","get",72],"(",["T_CONSTANT_ENCAPSED_STRING","'form_display_1'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$form_display_1",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","extractFormValues",73],"(",["T_VARIABLE","$entity_1",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$form",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$form_state",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$form_display_1",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","validateFormValues",74],"(",["T_VARIABLE","$entity_1",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$form",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$form_state",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_VARIABLE","$entity_2",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$form_state",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",76],")",";",["T_WHITESPACE","\n    ",76],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\Display\\EntityFormDisplayInterface $form_display_2 *\/",77],["T_WHITESPACE","\n    ",77],["T_VARIABLE","$form_display_2",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$form_state",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","get",78],"(",["T_CONSTANT_ENCAPSED_STRING","'form_display_2'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$extracted",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$form_display_2",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","extractFormValues",79],"(",["T_VARIABLE","$entity_2",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$form",79],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",79],"]",",",["T_WHITESPACE"," ",79],["T_VARIABLE","$form_state",79],")",";",["T_WHITESPACE","\n    ",79],["T_COMMENT","\/\/ Extract the values of fields that are not rendered through widgets, by\n",80],["T_WHITESPACE","    ",81],["T_COMMENT","\/\/ simply copying from top-level form values. This leaves the fields that\n",81],["T_WHITESPACE","    ",82],["T_COMMENT","\/\/ are not being edited within this form untouched.\n",82],["T_WHITESPACE","    ",83],["T_COMMENT","\/\/ @see Drupal\\field\\Tests\\NestedFormTest::testNestedEntityFormEntityLevelValidation()\n",83],["T_WHITESPACE","    ",84],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$form_state",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getValues",84],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",84],"]",["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$name",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$values",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n      ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$entity_2",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","hasField",85],"(",["T_VARIABLE","$name",85],")",["T_WHITESPACE"," ",85],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],"!",["T_ISSET","isset",85],"(",["T_VARIABLE","$extracted",85],"[",["T_VARIABLE","$name",85],"]",")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$entity_2",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","set",86],"(",["T_VARIABLE","$name",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$values",86],")",";",["T_WHITESPACE","\n      ",86],"}",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$form_display_2",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","validateFormValues",89],"(",["T_VARIABLE","$entity_2",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$form",89],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",89],"]",",",["T_WHITESPACE"," ",89],["T_VARIABLE","$form_state",89],")",";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * {@inheritdoc]\n   *\/",92],["T_WHITESPACE","\n  ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","submitForm",95],"(",["T_ARRAY","array",95],["T_WHITESPACE"," ",95],"&",["T_VARIABLE","$form",95],",",["T_WHITESPACE"," ",95],["T_STRING","FormStateInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$form_state",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityInterface $entity_1 *\/",96],["T_WHITESPACE","\n    ",96],["T_VARIABLE","$entity_1",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$form_state",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","get",97],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_1'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$entity_1",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","save",98],"(",")",";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityInterface $entity_2 *\/",100],["T_WHITESPACE","\n    ",100],["T_VARIABLE","$entity_2",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$form_state",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_2'",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$entity_2",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","save",102],"(",")",";",["T_WHITESPACE","\n\n    ",102],["T_STRING","drupal_set_message",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","t",104],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entities @id_1 and @id_2 have been updated.'",104],",",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_CONSTANT_ENCAPSED_STRING","'@id_1'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$entity_1",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","id",104],"(",")",",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'@id_2'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$entity_2",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","id",104],"(",")",")",")",")",";",["T_WHITESPACE","\n  ",104],"}",["T_WHITESPACE","\n\n",105],"}",["T_WHITESPACE","\n",107]]
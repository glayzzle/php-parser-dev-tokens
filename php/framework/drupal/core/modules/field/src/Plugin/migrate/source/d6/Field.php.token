[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","source",3],["T_NS_SEPARATOR","\\",3],["T_STRING","d6",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","migrate",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Row",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate_drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","source",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DrupalSqlBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Drupal 6 field source from database.\n *\n * @MigrateSource(\n *   id = \"d6_field\",\n *   source_provider = \"content\"\n * )\n *\/",8],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Field",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","DrupalSqlBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",18],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","query",21],"(",")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_VARIABLE","$query",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","select",22],"(",["T_CONSTANT_ENCAPSED_STRING","'content_node_field'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'cnf'",22],")",["T_WHITESPACE","\n      ",22],["T_OBJECT_OPERATOR","->",23],["T_STRING","fields",23],"(",["T_CONSTANT_ENCAPSED_STRING","'cnf'",23],",",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",["T_WHITESPACE","\n        ",23],["T_CONSTANT_ENCAPSED_STRING","'field_name'",24],",",["T_WHITESPACE","\n        ",24],["T_CONSTANT_ENCAPSED_STRING","'type'",25],",",["T_WHITESPACE","\n        ",25],["T_CONSTANT_ENCAPSED_STRING","'global_settings'",26],",",["T_WHITESPACE","\n        ",26],["T_CONSTANT_ENCAPSED_STRING","'required'",27],",",["T_WHITESPACE","\n        ",27],["T_CONSTANT_ENCAPSED_STRING","'multiple'",28],",",["T_WHITESPACE","\n        ",28],["T_CONSTANT_ENCAPSED_STRING","'db_storage'",29],",",["T_WHITESPACE","\n        ",29],["T_CONSTANT_ENCAPSED_STRING","'module'",30],",",["T_WHITESPACE","\n        ",30],["T_CONSTANT_ENCAPSED_STRING","'db_columns'",31],",",["T_WHITESPACE","\n        ",31],["T_CONSTANT_ENCAPSED_STRING","'active'",32],",",["T_WHITESPACE","\n        ",32],["T_CONSTANT_ENCAPSED_STRING","'locked'",33],",",["T_WHITESPACE","\n      ",33],")",")",["T_WHITESPACE","\n      ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","distinct",35],"(",")",";",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/\/ Only import fields which are actually being used.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$query",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","innerJoin",37],"(",["T_CONSTANT_ENCAPSED_STRING","'content_node_field_instance'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'cnfi'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'cnfi.field_name = cnf.field_name'",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$query",39],";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","fields",45],"(",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'field_name'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","t",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Field name'",47],")",",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'type'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","t",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Type (text, integer, ....)'",48],")",",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'widget_type'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","t",49],"(",["T_CONSTANT_ENCAPSED_STRING","'An instance-specific widget type'",49],")",",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'global_settings'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","t",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Global settings. Shared with every field instance.'",50],")",",",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'required'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","t",51],"(",["T_CONSTANT_ENCAPSED_STRING","'Required'",51],")",",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'multiple'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","t",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Multiple'",52],")",",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'db_storage'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","t",53],"(",["T_CONSTANT_ENCAPSED_STRING","'DB storage'",53],")",",",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'module'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","t",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Module'",54],")",",",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'db_columns'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","t",55],"(",["T_CONSTANT_ENCAPSED_STRING","'DB Columns'",55],")",",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'active'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","t",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Active'",56],")",",",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'locked'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","t",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Locked'",57],")",",",["T_WHITESPACE","\n    ",57],")",";",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",61],["T_WHITESPACE","\n  ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","prepareRow",64],"(",["T_STRING","Row",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$row",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n    ",64],["T_COMMENT","\/\/ The instance widget_type helps determine what D8 field type we'll use.\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ Identify the distinct widget_types being used in D6.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$widget_types",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","select",67],"(",["T_CONSTANT_ENCAPSED_STRING","'content_node_field_instance'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'cnfi'",67],")",["T_WHITESPACE","\n      ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","fields",68],"(",["T_CONSTANT_ENCAPSED_STRING","'cnfi'",68],",",["T_WHITESPACE"," ",68],"[",["T_CONSTANT_ENCAPSED_STRING","'widget_type'",68],"]",")",["T_WHITESPACE","\n      ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","condition",69],"(",["T_CONSTANT_ENCAPSED_STRING","'field_name'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$row",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getSourceProperty",69],"(",["T_CONSTANT_ENCAPSED_STRING","'field_name'",69],")",")",["T_WHITESPACE","\n      ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","distinct",70],"(",")",["T_WHITESPACE","\n      ",70],["T_OBJECT_OPERATOR","->",71],["T_STRING","orderBy",71],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_type'",71],")",["T_WHITESPACE","\n      ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","execute",72],"(",")",["T_WHITESPACE","\n      ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","fetchCol",73],"(",")",";",["T_WHITESPACE","\n    ",73],["T_COMMENT","\/\/ Arbitrarily use the first widget_type - if there are multiples, let the\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ migrator know.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$row",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setSourceProperty",76],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_type'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$widget_types",76],"[",["T_LNUMBER","0",76],"]",")",";",["T_WHITESPACE","\n    ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_STRING","count",77],"(",["T_VARIABLE","$widget_types",77],")",["T_WHITESPACE"," ",77],">",["T_WHITESPACE"," ",77],["T_LNUMBER","1",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n      ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","migration",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getIdMap",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","saveMessage",78],"(",["T_WHITESPACE","\n        ",78],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$row",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getSourceProperty",79],"(",["T_CONSTANT_ENCAPSED_STRING","'field_name'",79],")","]",",",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","t",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Widget types @types are used in Drupal 6 field instances: widget type @selected_type applied to the Drupal 8 base field'",80],",",["T_WHITESPACE"," ",80],"[",["T_WHITESPACE","\n          ",80],["T_CONSTANT_ENCAPSED_STRING","'@types'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","implode",81],"(",["T_CONSTANT_ENCAPSED_STRING","', '",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$widget_types",81],")",",",["T_WHITESPACE","\n          ",81],["T_CONSTANT_ENCAPSED_STRING","'@selected_type'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$widget_types",82],"[",["T_LNUMBER","0",82],"]",",",["T_WHITESPACE","\n        ",82],"]",")",["T_WHITESPACE","\n      ",83],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Unserialize data.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$global_settings",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","unserialize",88],"(",["T_VARIABLE","$row",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getSourceProperty",88],"(",["T_CONSTANT_ENCAPSED_STRING","'global_settings'",88],")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$db_columns",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","unserialize",89],"(",["T_VARIABLE","$row",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getSourceProperty",89],"(",["T_CONSTANT_ENCAPSED_STRING","'db_columns'",89],")",")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$row",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","setSourceProperty",90],"(",["T_CONSTANT_ENCAPSED_STRING","'global_settings'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$global_settings",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$row",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","setSourceProperty",91],"(",["T_CONSTANT_ENCAPSED_STRING","'db_columns'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$db_columns",91],")",";",["T_WHITESPACE","\n    ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_STRING","parent",92],["T_DOUBLE_COLON","::",92],["T_STRING","prepareRow",92],"(",["T_VARIABLE","$row",92],")",";",["T_WHITESPACE","\n  ",92],"}",["T_WHITESPACE","\n\n  ",93],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",95],["T_WHITESPACE","\n  ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","getIds",98],"(",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$ids",99],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'type'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'string'",100],",",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'alias'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'cnf'",101],",",["T_WHITESPACE","\n    ",101],")",";",["T_WHITESPACE","\n    ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$ids",103],";",["T_WHITESPACE","\n  ",103],"}",["T_WHITESPACE","\n\n",104],"}",["T_WHITESPACE","\n",106]]
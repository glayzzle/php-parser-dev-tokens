[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Html",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityFormDisplay",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldStorageDefinitionInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Form",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FormState",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","entity_test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityTest",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","entity_test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityTestBaseFieldDisplay",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldConfig",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","field",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FieldStorageConfig",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Tests field form handling.\n *\n * @group field\n *\/",14],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","FormTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","FieldTestBase",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * Locale is installed so that TranslatableMarkup actually does something.\n   *\n   * @var array\n   *\/",21],["T_WHITESPACE","\n  ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_STATIC","static",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$modules",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'field_test'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'options'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'locale'",28],")",";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * An array of values defining a field single.\n   *\n   * @var array\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$fieldStorageSingle",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * An array of values defining a field multiple.\n   *\n   * @var array\n   *\/",37],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$fieldStorageMultiple",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * An array of values defining a field with unlimited cardinality.\n   *\n   * @var array\n   *\/",44],["T_WHITESPACE","\n  ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$fieldStorageUnlimited",49],";",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * An array of values defining a field.\n   *\n   * @var array\n   *\/",51],["T_WHITESPACE","\n  ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$field",56],";",["T_WHITESPACE","\n\n  ",56],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","setUp",58],"(",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n    ",58],["T_STRING","parent",59],["T_DOUBLE_COLON","::",59],["T_STRING","setUp",59],"(",")",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$web_user",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","drupalCreateUser",61],"(",["T_ARRAY","array",61],"(",["T_CONSTANT_ENCAPSED_STRING","'view test entity'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'administer entity_test content'",61],")",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","drupalLogin",62],"(",["T_VARIABLE","$web_user",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","fieldStorageSingle",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_WHITESPACE","\n      ",64],["T_CONSTANT_ENCAPSED_STRING","'field_name'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'field_single'",65],",",["T_WHITESPACE","\n      ",65],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",66],",",["T_WHITESPACE","\n      ",66],["T_CONSTANT_ENCAPSED_STRING","'type'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'test_field'",67],",",["T_WHITESPACE","\n    ",67],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","fieldStorageMultiple",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_WHITESPACE","\n      ",69],["T_CONSTANT_ENCAPSED_STRING","'field_name'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'field_multiple'",70],",",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",71],",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'type'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'test_field'",72],",",["T_WHITESPACE","\n      ",72],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_LNUMBER","4",73],",",["T_WHITESPACE","\n    ",73],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","fieldStorageUnlimited",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_WHITESPACE","\n      ",75],["T_CONSTANT_ENCAPSED_STRING","'field_name'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'field_unlimited'",76],",",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",77],",",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'type'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'test_field'",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_STRING","FieldStorageDefinitionInterface",79],["T_DOUBLE_COLON","::",79],["T_STRING","CARDINALITY_UNLIMITED",79],",",["T_WHITESPACE","\n    ",79],")",";",["T_WHITESPACE","\n\n    ",80],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","field",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",83],",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'bundle'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",84],",",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'label'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","randomMachineName",85],"(",")",["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'_label'",85],",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'description'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'[site:name]_description'",86],",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'weight'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_STRING","mt_rand",87],"(",["T_LNUMBER","0",87],",",["T_WHITESPACE"," ",87],["T_LNUMBER","127",87],")",",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'settings'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_WHITESPACE","\n        ",88],["T_CONSTANT_ENCAPSED_STRING","'test_field_setting'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","randomMachineName",89],"(",")",",",["T_WHITESPACE","\n      ",89],")",",",["T_WHITESPACE","\n    ",90],")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","testFieldFormSingle",94],"(",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$field_storage",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","fieldStorageSingle",95],";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$field_name",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$field_storage",96],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",96],"]",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","field",97],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$field_name",97],";",["T_WHITESPACE","\n    ",97],["T_STRING","FieldStorageConfig",98],["T_DOUBLE_COLON","::",98],["T_STRING","create",98],"(",["T_VARIABLE","$field_storage",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","save",98],"(",")",";",["T_WHITESPACE","\n    ",98],["T_STRING","FieldConfig",99],["T_DOUBLE_COLON","::",99],["T_STRING","create",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","field",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","save",99],"(",")",";",["T_WHITESPACE","\n    ",99],["T_STRING","entity_get_form_display",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","field",100],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",100],"]",",",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","field",100],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",100],"]",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'default'",100],")",["T_WHITESPACE","\n      ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","setComponent",101],"(",["T_VARIABLE","$field_name",101],")",["T_WHITESPACE","\n      ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","save",102],"(",")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Display creation form.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","drupalGet",105],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/add'",105],")",";",["T_WHITESPACE","\n\n    ",105],["T_COMMENT","\/\/ Create token value expected for description.\n",107],["T_WHITESPACE","    ",108],["T_VARIABLE","$token_description",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","Html",108],["T_DOUBLE_COLON","::",108],["T_STRING","escape",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","config",108],"(",["T_CONSTANT_ENCAPSED_STRING","'system.site'",108],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","get",108],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",108],")",")",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'_description'",108],";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertText",109],"(",["T_VARIABLE","$token_description",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'Token replacement for description is displayed'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertFieldByName",110],"(","\"",["T_CURLY_OPEN","{",110],["T_VARIABLE","$field_name",110],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",110],"\"",",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","''",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'Widget is displayed'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertNoField",111],"(","\"",["T_CURLY_OPEN","{",111],["T_VARIABLE","$field_name",111],"}",["T_ENCAPSED_AND_WHITESPACE","[1][value]",111],"\"",",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'No extraneous widget is displayed'",111],")",";",["T_WHITESPACE","\n\n    ",111],["T_COMMENT","\/\/ Check that hook_field_widget_form_alter() does not believe this is the\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ default value form.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertNoText",115],"(",["T_CONSTANT_ENCAPSED_STRING","'From hook_field_widget_form_alter(): Default form is true.'",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Not default value form in hook_field_widget_form_alter().'",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Submit with invalid value (field-level validation).\n",117],["T_WHITESPACE","    ",118],["T_VARIABLE","$edit",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",["T_WHITESPACE","\n      ",118],"\"",["T_CURLY_OPEN","{",119],["T_VARIABLE","$field_name",119],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",119],"\"",["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],"-",["T_LNUMBER","1",119],["T_WHITESPACE","\n    ",119],")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","drupalPostForm",121],"(",["T_STRING","NULL",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$edit",121],",",["T_WHITESPACE"," ",121],["T_STRING","t",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",121],")",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertRaw",122],"(",["T_STRING","t",122],"(",["T_CONSTANT_ENCAPSED_STRING","'%name does not accept the value -1.'",122],",",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","field",122],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",122],"]",")",")",",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'Field validation fails with invalid input.'",122],")",";",["T_WHITESPACE","\n    ",122],["T_COMMENT","\/\/ TODO : check that the correct field is flagged for error.\n",123],["T_WHITESPACE","\n    ",124],["T_COMMENT","\/\/ Create an entity\n",125],["T_WHITESPACE","    ",126],["T_VARIABLE","$value",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","mt_rand",126],"(",["T_LNUMBER","1",126],",",["T_WHITESPACE"," ",126],["T_LNUMBER","127",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$edit",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_WHITESPACE","\n      ",127],"\"",["T_CURLY_OPEN","{",128],["T_VARIABLE","$field_name",128],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",128],"\"",["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$value",128],",",["T_WHITESPACE","\n    ",128],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","drupalPostForm",130],"(",["T_STRING","NULL",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$edit",130],",",["T_WHITESPACE"," ",130],["T_STRING","t",130],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",130],")",")",";",["T_WHITESPACE","\n    ",130],["T_STRING","preg_match",131],"(",["T_CONSTANT_ENCAPSED_STRING","'|entity_test\/manage\/(\\d+)|'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","url",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$match",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$id",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$match",132],"[",["T_LNUMBER","1",132],"]",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertText",133],"(",["T_STRING","t",133],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test @id has been created.'",133],",",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$id",133],")",")",",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'Entity was created'",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$entity",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","EntityTest",134],["T_DOUBLE_COLON","::",134],["T_STRING","load",134],"(",["T_VARIABLE","$id",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEqual",135],"(",["T_VARIABLE","$entity",135],["T_OBJECT_OPERATOR","->",135],"{",["T_VARIABLE","$field_name",135],"}",["T_OBJECT_OPERATOR","->",135],["T_STRING","value",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$value",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'Field value was saved'",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ Display edit form.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","drupalGet",138],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/manage\/'",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_VARIABLE","$id",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",138],")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertFieldByName",139],"(","\"",["T_CURLY_OPEN","{",139],["T_VARIABLE","$field_name",139],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",139],"\"",",",["T_WHITESPACE"," ",139],["T_VARIABLE","$value",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'Widget is displayed with the correct default value'",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertNoField",140],"(","\"",["T_CURLY_OPEN","{",140],["T_VARIABLE","$field_name",140],"}",["T_ENCAPSED_AND_WHITESPACE","[1][value]",140],"\"",",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'No extraneous widget is displayed'",140],")",";",["T_WHITESPACE","\n\n    ",140],["T_COMMENT","\/\/ Update the entity.\n",142],["T_WHITESPACE","    ",143],["T_VARIABLE","$value",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","mt_rand",143],"(",["T_LNUMBER","1",143],",",["T_WHITESPACE"," ",143],["T_LNUMBER","127",143],")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$edit",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",["T_WHITESPACE","\n      ",144],"\"",["T_CURLY_OPEN","{",145],["T_VARIABLE","$field_name",145],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",145],"\"",["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$value",145],",",["T_WHITESPACE","\n    ",145],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","drupalPostForm",147],"(",["T_STRING","NULL",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$edit",147],",",["T_WHITESPACE"," ",147],["T_STRING","t",147],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",147],")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertText",148],"(",["T_STRING","t",148],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test @id has been updated.'",148],",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$id",148],")",")",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'Entity was updated'",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","container",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","get",149],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getStorage",149],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","resetCache",149],"(",["T_ARRAY","array",149],"(",["T_VARIABLE","$id",149],")",")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$entity",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","EntityTest",150],["T_DOUBLE_COLON","::",150],["T_STRING","load",150],"(",["T_VARIABLE","$id",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertEqual",151],"(",["T_VARIABLE","$entity",151],["T_OBJECT_OPERATOR","->",151],"{",["T_VARIABLE","$field_name",151],"}",["T_OBJECT_OPERATOR","->",151],["T_STRING","value",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$value",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'Field value was updated'",151],")",";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Empty the field.\n",153],["T_WHITESPACE","    ",154],["T_VARIABLE","$value",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","''",154],";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$edit",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",["T_WHITESPACE","\n      ",155],"\"",["T_CURLY_OPEN","{",156],["T_VARIABLE","$field_name",156],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",156],"\"",["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$value",156],["T_WHITESPACE","\n    ",156],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","drupalPostForm",158],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/manage\/'",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_VARIABLE","$id",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$edit",158],",",["T_WHITESPACE"," ",158],["T_STRING","t",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",158],")",")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","assertText",159],"(",["T_STRING","t",159],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test @id has been updated.'",159],",",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$id",159],")",")",",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'Entity was updated'",159],")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","container",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","get",160],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",160],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","getStorage",160],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",160],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","resetCache",160],"(",["T_ARRAY","array",160],"(",["T_VARIABLE","$id",160],")",")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$entity",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","EntityTest",161],["T_DOUBLE_COLON","::",161],["T_STRING","load",161],"(",["T_VARIABLE","$id",161],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertTrue",162],"(",["T_VARIABLE","$entity",162],["T_OBJECT_OPERATOR","->",162],"{",["T_VARIABLE","$field_name",162],"}",["T_OBJECT_OPERATOR","->",162],["T_STRING","isEmpty",162],"(",")",",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'Field was emptied'",162],")",";",["T_WHITESPACE","\n  ",162],"}",["T_WHITESPACE","\n\n  ",163],["T_DOC_COMMENT","\/**\n   * Tests field widget default values on entity forms.\n   *\/",165],["T_WHITESPACE","\n  ",167],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","testFieldFormDefaultValue",168],"(",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$field_storage",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","fieldStorageSingle",169],";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$field_name",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$field_storage",170],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",170],"]",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","field",171],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",171],"]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$field_name",171],";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$default",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","rand",172],"(",["T_LNUMBER","1",172],",",["T_WHITESPACE"," ",172],["T_LNUMBER","127",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","field",173],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",173],"]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_ARRAY","array",173],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$default",173],")",")",";",["T_WHITESPACE","\n    ",173],["T_STRING","FieldStorageConfig",174],["T_DOUBLE_COLON","::",174],["T_STRING","create",174],"(",["T_VARIABLE","$field_storage",174],")",["T_OBJECT_OPERATOR","->",174],["T_STRING","save",174],"(",")",";",["T_WHITESPACE","\n    ",174],["T_STRING","FieldConfig",175],["T_DOUBLE_COLON","::",175],["T_STRING","create",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","field",175],")",["T_OBJECT_OPERATOR","->",175],["T_STRING","save",175],"(",")",";",["T_WHITESPACE","\n    ",175],["T_STRING","entity_get_form_display",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","field",176],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",176],"]",",",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","field",176],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",176],"]",",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'default'",176],")",["T_WHITESPACE","\n      ",176],["T_OBJECT_OPERATOR","->",177],["T_STRING","setComponent",177],"(",["T_VARIABLE","$field_name",177],")",["T_WHITESPACE","\n      ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","save",178],"(",")",";",["T_WHITESPACE","\n\n    ",178],["T_COMMENT","\/\/ Display creation form.\n",180],["T_WHITESPACE","    ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","drupalGet",181],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/add'",181],")",";",["T_WHITESPACE","\n    ",181],["T_COMMENT","\/\/ Test that the default value is displayed correctly.\n",182],["T_WHITESPACE","    ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertFieldByXpath",183],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\/\/input[@name='",183],["T_CURLY_OPEN","{",183],["T_VARIABLE","$field_name",183],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]' and @value='",183],["T_VARIABLE","$default",183],["T_ENCAPSED_AND_WHITESPACE","']",183],"\"",")",";",["T_WHITESPACE","\n\n    ",183],["T_COMMENT","\/\/ Try to submit an empty value.\n",185],["T_WHITESPACE","    ",186],["T_VARIABLE","$edit",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_WHITESPACE","\n      ",186],"\"",["T_CURLY_OPEN","{",187],["T_VARIABLE","$field_name",187],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",187],"\"",["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","''",187],",",["T_WHITESPACE","\n    ",187],")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","drupalPostForm",189],"(",["T_STRING","NULL",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$edit",189],",",["T_WHITESPACE"," ",189],["T_STRING","t",189],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",189],")",")",";",["T_WHITESPACE","\n    ",189],["T_STRING","preg_match",190],"(",["T_CONSTANT_ENCAPSED_STRING","'|entity_test\/manage\/(\\d+)|'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","url",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$match",190],")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$id",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$match",191],"[",["T_LNUMBER","1",191],"]",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertText",192],"(",["T_STRING","t",192],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test @id has been created.'",192],",",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$id",192],")",")",",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'Entity was created.'",192],")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$entity",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","EntityTest",193],["T_DOUBLE_COLON","::",193],["T_STRING","load",193],"(",["T_VARIABLE","$id",193],")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertTrue",194],"(",["T_VARIABLE","$entity",194],["T_OBJECT_OPERATOR","->",194],"{",["T_VARIABLE","$field_name",194],"}",["T_OBJECT_OPERATOR","->",194],["T_STRING","isEmpty",194],"(",")",",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'Field is now empty.'",194],")",";",["T_WHITESPACE","\n  ",194],"}",["T_WHITESPACE","\n\n  ",195],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","testFieldFormSingleRequired",197],"(",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$field_storage",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","fieldStorageSingle",198],";",["T_WHITESPACE","\n    ",198],["T_VARIABLE","$field_name",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$field_storage",199],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",199],"]",";",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","field",200],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",200],"]",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$field_name",200],";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","field",201],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",201],"]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","TRUE",201],";",["T_WHITESPACE","\n    ",201],["T_STRING","FieldStorageConfig",202],["T_DOUBLE_COLON","::",202],["T_STRING","create",202],"(",["T_VARIABLE","$field_storage",202],")",["T_OBJECT_OPERATOR","->",202],["T_STRING","save",202],"(",")",";",["T_WHITESPACE","\n    ",202],["T_STRING","FieldConfig",203],["T_DOUBLE_COLON","::",203],["T_STRING","create",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","field",203],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","save",203],"(",")",";",["T_WHITESPACE","\n    ",203],["T_STRING","entity_get_form_display",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","field",204],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",204],"]",",",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","field",204],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",204],"]",",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'default'",204],")",["T_WHITESPACE","\n      ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","setComponent",205],"(",["T_VARIABLE","$field_name",205],")",["T_WHITESPACE","\n      ",205],["T_OBJECT_OPERATOR","->",206],["T_STRING","save",206],"(",")",";",["T_WHITESPACE","\n\n    ",206],["T_COMMENT","\/\/ Submit with missing required value.\n",208],["T_WHITESPACE","    ",209],["T_VARIABLE","$edit",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_ARRAY","array",209],"(",")",";",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","drupalPostForm",210],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/add'",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$edit",210],",",["T_WHITESPACE"," ",210],["T_STRING","t",210],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",210],")",")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","assertRaw",211],"(",["T_STRING","t",211],"(",["T_CONSTANT_ENCAPSED_STRING","'@name field is required.'",211],",",["T_WHITESPACE"," ",211],["T_ARRAY","array",211],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","field",211],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",211],"]",")",")",",",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'Required field with no value fails validation'",211],")",";",["T_WHITESPACE","\n\n    ",211],["T_COMMENT","\/\/ Create an entity\n",213],["T_WHITESPACE","    ",214],["T_VARIABLE","$value",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","mt_rand",214],"(",["T_LNUMBER","1",214],",",["T_WHITESPACE"," ",214],["T_LNUMBER","127",214],")",";",["T_WHITESPACE","\n    ",214],["T_VARIABLE","$edit",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",["T_WHITESPACE","\n      ",215],"\"",["T_CURLY_OPEN","{",216],["T_VARIABLE","$field_name",216],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",216],"\"",["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$value",216],",",["T_WHITESPACE","\n    ",216],")",";",["T_WHITESPACE","\n    ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","drupalPostForm",218],"(",["T_STRING","NULL",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$edit",218],",",["T_WHITESPACE"," ",218],["T_STRING","t",218],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",218],")",")",";",["T_WHITESPACE","\n    ",218],["T_STRING","preg_match",219],"(",["T_CONSTANT_ENCAPSED_STRING","'|entity_test\/manage\/(\\d+)|'",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","url",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$match",219],")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$id",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$match",220],"[",["T_LNUMBER","1",220],"]",";",["T_WHITESPACE","\n    ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","assertText",221],"(",["T_STRING","t",221],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test @id has been created.'",221],",",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$id",221],")",")",",",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'Entity was created'",221],")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$entity",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","EntityTest",222],["T_DOUBLE_COLON","::",222],["T_STRING","load",222],"(",["T_VARIABLE","$id",222],")",";",["T_WHITESPACE","\n    ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","assertEqual",223],"(",["T_VARIABLE","$entity",223],["T_OBJECT_OPERATOR","->",223],"{",["T_VARIABLE","$field_name",223],"}",["T_OBJECT_OPERATOR","->",223],["T_STRING","value",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$value",223],",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'Field value was saved'",223],")",";",["T_WHITESPACE","\n\n    ",223],["T_COMMENT","\/\/ Edit with missing required value.\n",225],["T_WHITESPACE","    ",226],["T_VARIABLE","$value",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","''",226],";",["T_WHITESPACE","\n    ",226],["T_VARIABLE","$edit",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_ARRAY","array",227],"(",["T_WHITESPACE","\n      ",227],"\"",["T_CURLY_OPEN","{",228],["T_VARIABLE","$field_name",228],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",228],"\"",["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$value",228],",",["T_WHITESPACE","\n    ",228],")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","drupalPostForm",230],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/manage\/'",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_VARIABLE","$id",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$edit",230],",",["T_WHITESPACE"," ",230],["T_STRING","t",230],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",230],")",")",";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","assertRaw",231],"(",["T_STRING","t",231],"(",["T_CONSTANT_ENCAPSED_STRING","'@name field is required.'",231],",",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","field",231],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",231],"]",")",")",",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'Required field with no value fails validation'",231],")",";",["T_WHITESPACE","\n  ",231],"}",["T_WHITESPACE","\n\n  ",232],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","testFieldFormUnlimited",234],"(",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n    ",234],["T_VARIABLE","$field_storage",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","fieldStorageUnlimited",235],";",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$field_name",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$field_storage",236],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",236],"]",";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","field",237],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",237],"]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$field_name",237],";",["T_WHITESPACE","\n    ",237],["T_STRING","FieldStorageConfig",238],["T_DOUBLE_COLON","::",238],["T_STRING","create",238],"(",["T_VARIABLE","$field_storage",238],")",["T_OBJECT_OPERATOR","->",238],["T_STRING","save",238],"(",")",";",["T_WHITESPACE","\n    ",238],["T_STRING","FieldConfig",239],["T_DOUBLE_COLON","::",239],["T_STRING","create",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","field",239],")",["T_OBJECT_OPERATOR","->",239],["T_STRING","save",239],"(",")",";",["T_WHITESPACE","\n    ",239],["T_STRING","entity_get_form_display",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","field",240],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",240],"]",",",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","field",240],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",240],"]",",",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'default'",240],")",["T_WHITESPACE","\n      ",240],["T_OBJECT_OPERATOR","->",241],["T_STRING","setComponent",241],"(",["T_VARIABLE","$field_name",241],")",["T_WHITESPACE","\n      ",241],["T_OBJECT_OPERATOR","->",242],["T_STRING","save",242],"(",")",";",["T_WHITESPACE","\n\n    ",242],["T_COMMENT","\/\/ Display creation form -> 1 widget.\n",244],["T_WHITESPACE","    ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","drupalGet",245],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/add'",245],")",";",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","assertFieldByName",246],"(","\"",["T_CURLY_OPEN","{",246],["T_VARIABLE","$field_name",246],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",246],"\"",",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","''",246],",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'Widget 1 is displayed'",246],")",";",["T_WHITESPACE","\n    ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","assertNoField",247],"(","\"",["T_CURLY_OPEN","{",247],["T_VARIABLE","$field_name",247],"}",["T_ENCAPSED_AND_WHITESPACE","[1][value]",247],"\"",",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'No extraneous widget is displayed'",247],")",";",["T_WHITESPACE","\n\n    ",247],["T_COMMENT","\/\/ Check if aria-describedby attribute is placed on multiple value widgets.\n",249],["T_WHITESPACE","    ",250],["T_VARIABLE","$elements",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","xpath",250],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/table[@id=\"field-unlimited-values\" and @aria-describedby=\"edit-field-unlimited--description\"]'",250],")",";",["T_WHITESPACE","\n    ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","assertTrue",251],"(",["T_ISSET","isset",251],"(",["T_VARIABLE","$elements",251],"[",["T_LNUMBER","0",251],"]",")",",",["T_WHITESPACE"," ",251],["T_STRING","t",251],"(",["T_CONSTANT_ENCAPSED_STRING","'aria-describedby attribute is properly placed on multiple value widgets.'",251],")",")",";",["T_WHITESPACE","\n\n    ",251],["T_COMMENT","\/\/ Press 'add more' button -> 2 widgets.\n",253],["T_WHITESPACE","    ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","drupalPostForm",254],"(",["T_STRING","NULL",254],",",["T_WHITESPACE"," ",254],["T_ARRAY","array",254],"(",")",",",["T_WHITESPACE"," ",254],["T_STRING","t",254],"(",["T_CONSTANT_ENCAPSED_STRING","'Add another item'",254],")",")",";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertFieldByName",255],"(","\"",["T_CURLY_OPEN","{",255],["T_VARIABLE","$field_name",255],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",255],"\"",",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","''",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'Widget 1 is displayed'",255],")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","assertFieldByName",256],"(","\"",["T_CURLY_OPEN","{",256],["T_VARIABLE","$field_name",256],"}",["T_ENCAPSED_AND_WHITESPACE","[1][value]",256],"\"",",",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","''",256],",",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'New widget is displayed'",256],")",";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","assertNoField",257],"(","\"",["T_CURLY_OPEN","{",257],["T_VARIABLE","$field_name",257],"}",["T_ENCAPSED_AND_WHITESPACE","[2][value]",257],"\"",",",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'No extraneous widget is displayed'",257],")",";",["T_WHITESPACE","\n    ",257],["T_COMMENT","\/\/ TODO : check that non-field inputs are preserved ('title'), etc.\n",258],["T_WHITESPACE","\n    ",259],["T_COMMENT","\/\/ Yet another time so that we can play with more values -> 3 widgets.\n",260],["T_WHITESPACE","    ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","drupalPostForm",261],"(",["T_STRING","NULL",261],",",["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",")",",",["T_WHITESPACE"," ",261],["T_STRING","t",261],"(",["T_CONSTANT_ENCAPSED_STRING","'Add another item'",261],")",")",";",["T_WHITESPACE","\n\n    ",261],["T_COMMENT","\/\/ Prepare values and weights.\n",263],["T_WHITESPACE","    ",264],["T_VARIABLE","$count",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_LNUMBER","3",264],";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$delta_range",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$count",265],["T_WHITESPACE"," ",265],"-",["T_WHITESPACE"," ",265],["T_LNUMBER","1",265],";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$values",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$weights",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$pattern",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$expected_values",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",")",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$edit",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",")",";",["T_WHITESPACE","\n    ",267],["T_FOR","for",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$delta",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_LNUMBER","0",268],";",["T_WHITESPACE"," ",268],["T_VARIABLE","$delta",268],["T_WHITESPACE"," ",268],["T_IS_SMALLER_OR_EQUAL","<=",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$delta_range",268],";",["T_WHITESPACE"," ",268],["T_VARIABLE","$delta",268],["T_INC","++",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n      ",268],["T_COMMENT","\/\/ Assign unique random values and weights.\n",269],["T_WHITESPACE","      ",270],["T_DO","do",270],["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$value",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","mt_rand",271],"(",["T_LNUMBER","1",271],",",["T_WHITESPACE"," ",271],["T_LNUMBER","127",271],")",";",["T_WHITESPACE","\n      ",271],"}",["T_WHITESPACE"," ",272],["T_WHILE","while",272],["T_WHITESPACE"," ",272],"(",["T_STRING","in_array",272],"(",["T_VARIABLE","$value",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$values",272],")",")",";",["T_WHITESPACE","\n      ",272],["T_DO","do",273],["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$weight",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","mt_rand",274],"(","-",["T_VARIABLE","$delta_range",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$delta_range",274],")",";",["T_WHITESPACE","\n      ",274],"}",["T_WHITESPACE"," ",275],["T_WHILE","while",275],["T_WHITESPACE"," ",275],"(",["T_STRING","in_array",275],"(",["T_VARIABLE","$weight",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$weights",275],")",")",";",["T_WHITESPACE","\n      ",275],["T_VARIABLE","$edit",276],"[","\"",["T_CURLY_OPEN","{",276],["T_VARIABLE","$field_name",276],"}",["T_ENCAPSED_AND_WHITESPACE","[",276],["T_VARIABLE","$delta",276],["T_ENCAPSED_AND_WHITESPACE","][value]",276],"\"","]",["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$value",276],";",["T_WHITESPACE","\n      ",276],["T_VARIABLE","$edit",277],"[","\"",["T_CURLY_OPEN","{",277],["T_VARIABLE","$field_name",277],"}",["T_ENCAPSED_AND_WHITESPACE","[",277],["T_VARIABLE","$delta",277],["T_ENCAPSED_AND_WHITESPACE","][_weight]",277],"\"","]",["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$weight",277],";",["T_WHITESPACE","\n      ",277],["T_COMMENT","\/\/ We'll need three slightly different formats to check the values.\n",278],["T_WHITESPACE","      ",279],["T_VARIABLE","$values",279],"[",["T_VARIABLE","$delta",279],"]",["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$value",279],";",["T_WHITESPACE","\n      ",279],["T_VARIABLE","$weights",280],"[",["T_VARIABLE","$delta",280],"]",["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$weight",280],";",["T_WHITESPACE","\n      ",280],["T_VARIABLE","$field_values",281],"[",["T_VARIABLE","$weight",281],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",281],"]",["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING_CAST","(string)",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$value",281],";",["T_WHITESPACE","\n      ",281],["T_VARIABLE","$pattern",282],"[",["T_VARIABLE","$weight",282],"]",["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],"\"",["T_ENCAPSED_AND_WHITESPACE","<input [^>]*value=\\\"",282],["T_VARIABLE","$value",282],["T_ENCAPSED_AND_WHITESPACE","\\\" [^>]*",282],"\"",";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_COMMENT","\/\/ Press 'add more' button -> 4 widgets\n",285],["T_WHITESPACE","    ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","drupalPostForm",286],"(",["T_STRING","NULL",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$edit",286],",",["T_WHITESPACE"," ",286],["T_STRING","t",286],"(",["T_CONSTANT_ENCAPSED_STRING","'Add another item'",286],")",")",";",["T_WHITESPACE","\n    ",286],["T_FOR","for",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$delta",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_LNUMBER","0",287],";",["T_WHITESPACE"," ",287],["T_VARIABLE","$delta",287],["T_WHITESPACE"," ",287],["T_IS_SMALLER_OR_EQUAL","<=",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$delta_range",287],";",["T_WHITESPACE"," ",287],["T_VARIABLE","$delta",287],["T_INC","++",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n      ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","assertFieldByName",288],"(","\"",["T_CURLY_OPEN","{",288],["T_VARIABLE","$field_name",288],"}",["T_ENCAPSED_AND_WHITESPACE","[",288],["T_VARIABLE","$delta",288],["T_ENCAPSED_AND_WHITESPACE","][value]",288],"\"",",",["T_WHITESPACE"," ",288],["T_VARIABLE","$values",288],"[",["T_VARIABLE","$delta",288],"]",",",["T_WHITESPACE"," ",288],"\"",["T_ENCAPSED_AND_WHITESPACE","Widget ",288],["T_VARIABLE","$delta",288],["T_ENCAPSED_AND_WHITESPACE"," is displayed and has the right value",288],"\"",")",";",["T_WHITESPACE","\n      ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","assertFieldByName",289],"(","\"",["T_CURLY_OPEN","{",289],["T_VARIABLE","$field_name",289],"}",["T_ENCAPSED_AND_WHITESPACE","[",289],["T_VARIABLE","$delta",289],["T_ENCAPSED_AND_WHITESPACE","][_weight]",289],"\"",",",["T_WHITESPACE"," ",289],["T_VARIABLE","$weights",289],"[",["T_VARIABLE","$delta",289],"]",",",["T_WHITESPACE"," ",289],"\"",["T_ENCAPSED_AND_WHITESPACE","Widget ",289],["T_VARIABLE","$delta",289],["T_ENCAPSED_AND_WHITESPACE"," has the right weight",289],"\"",")",";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n    ",290],["T_STRING","ksort",291],"(",["T_VARIABLE","$pattern",291],")",";",["T_WHITESPACE","\n    ",291],["T_VARIABLE","$pattern",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","implode",292],"(",["T_CONSTANT_ENCAPSED_STRING","'.*'",292],",",["T_WHITESPACE"," ",292],["T_STRING","array_values",292],"(",["T_VARIABLE","$pattern",292],")",")",";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","assertPattern",293],"(","\"",["T_ENCAPSED_AND_WHITESPACE","|",293],["T_VARIABLE","$pattern",293],["T_ENCAPSED_AND_WHITESPACE","|s",293],"\"",",",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'Widgets are displayed in the correct order'",293],")",";",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","assertFieldByName",294],"(","\"",["T_CURLY_OPEN","{",294],["T_VARIABLE","$field_name",294],"}",["T_ENCAPSED_AND_WHITESPACE","[",294],["T_VARIABLE","$delta",294],["T_ENCAPSED_AND_WHITESPACE","][value]",294],"\"",",",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","''",294],",",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","\"New widget is displayed\"",294],")",";",["T_WHITESPACE","\n    ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","assertFieldByName",295],"(","\"",["T_CURLY_OPEN","{",295],["T_VARIABLE","$field_name",295],"}",["T_ENCAPSED_AND_WHITESPACE","[",295],["T_VARIABLE","$delta",295],["T_ENCAPSED_AND_WHITESPACE","][_weight]",295],"\"",",",["T_WHITESPACE"," ",295],["T_VARIABLE","$delta",295],",",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","\"New widget has the right weight\"",295],")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assertNoField",296],"(","\"",["T_CURLY_OPEN","{",296],["T_VARIABLE","$field_name",296],"}",["T_ENCAPSED_AND_WHITESPACE","[",296],"\"",["T_WHITESPACE"," ",296],".",["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$delta",296],["T_WHITESPACE"," ",296],"+",["T_WHITESPACE"," ",296],["T_LNUMBER","1",296],")",["T_WHITESPACE"," ",296],".",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'][value]'",296],",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'No extraneous widget is displayed'",296],")",";",["T_WHITESPACE","\n\n    ",296],["T_COMMENT","\/\/ Submit the form and create the entity.\n",298],["T_WHITESPACE","    ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","drupalPostForm",299],"(",["T_STRING","NULL",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$edit",299],",",["T_WHITESPACE"," ",299],["T_STRING","t",299],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",299],")",")",";",["T_WHITESPACE","\n    ",299],["T_STRING","preg_match",300],"(",["T_CONSTANT_ENCAPSED_STRING","'|entity_test\/manage\/(\\d+)|'",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","url",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$match",300],")",";",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$id",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$match",301],"[",["T_LNUMBER","1",301],"]",";",["T_WHITESPACE","\n    ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","assertText",302],"(",["T_STRING","t",302],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test @id has been created.'",302],",",["T_WHITESPACE"," ",302],["T_ARRAY","array",302],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$id",302],")",")",",",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'Entity was created'",302],")",";",["T_WHITESPACE","\n    ",302],["T_VARIABLE","$entity",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","EntityTest",303],["T_DOUBLE_COLON","::",303],["T_STRING","load",303],"(",["T_VARIABLE","$id",303],")",";",["T_WHITESPACE","\n    ",303],["T_STRING","ksort",304],"(",["T_VARIABLE","$field_values",304],")",";",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$field_values",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_STRING","array_values",305],"(",["T_VARIABLE","$field_values",305],")",";",["T_WHITESPACE","\n    ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","assertIdentical",306],"(",["T_VARIABLE","$entity",306],["T_OBJECT_OPERATOR","->",306],"{",["T_VARIABLE","$field_name",306],"}",["T_OBJECT_OPERATOR","->",306],["T_STRING","getValue",306],"(",")",",",["T_WHITESPACE"," ",306],["T_VARIABLE","$field_values",306],",",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'Field values were saved in the correct order'",306],")",";",["T_WHITESPACE","\n\n    ",306],["T_COMMENT","\/\/ Display edit form: check that the expected number of widgets is\n",308],["T_WHITESPACE","    ",309],["T_COMMENT","\/\/ displayed, with correct values change values, reorder, leave an empty\n",309],["T_WHITESPACE","    ",310],["T_COMMENT","\/\/ value in the middle.\n",310],["T_WHITESPACE","    ",311],["T_COMMENT","\/\/ Submit: check that the entity is updated with correct values\n",311],["T_WHITESPACE","    ",312],["T_COMMENT","\/\/ Re-submit: check that the field can be emptied.\n",312],["T_WHITESPACE","\n    ",313],["T_COMMENT","\/\/ Test with several multiple fields in a form\n",314],["T_WHITESPACE","  ",315],"}",["T_WHITESPACE","\n\n  ",315],["T_DOC_COMMENT","\/**\n   * Tests the position of the required label.\n   *\/",317],["T_WHITESPACE","\n  ",319],["T_PUBLIC","public",320],["T_WHITESPACE"," ",320],["T_FUNCTION","function",320],["T_WHITESPACE"," ",320],["T_STRING","testFieldFormUnlimitedRequired",320],"(",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n    ",320],["T_VARIABLE","$field_name",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","fieldStorageUnlimited",321],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",321],"]",";",["T_WHITESPACE","\n    ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","field",322],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",322],"]",["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$field_name",322],";",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","field",323],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",323],"]",["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","TRUE",323],";",["T_WHITESPACE","\n    ",323],["T_STRING","FieldStorageConfig",324],["T_DOUBLE_COLON","::",324],["T_STRING","create",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","fieldStorageUnlimited",324],")",["T_OBJECT_OPERATOR","->",324],["T_STRING","save",324],"(",")",";",["T_WHITESPACE","\n    ",324],["T_STRING","FieldConfig",325],["T_DOUBLE_COLON","::",325],["T_STRING","create",325],"(",["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","field",325],")",["T_OBJECT_OPERATOR","->",325],["T_STRING","save",325],"(",")",";",["T_WHITESPACE","\n    ",325],["T_STRING","entity_get_form_display",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","field",326],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",326],"]",",",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","field",326],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",326],"]",",",["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'default'",326],")",["T_WHITESPACE","\n      ",326],["T_OBJECT_OPERATOR","->",327],["T_STRING","setComponent",327],"(",["T_VARIABLE","$field_name",327],")",["T_WHITESPACE","\n      ",327],["T_OBJECT_OPERATOR","->",328],["T_STRING","save",328],"(",")",";",["T_WHITESPACE","\n\n    ",328],["T_COMMENT","\/\/ Display creation form -> 1 widget.\n",330],["T_WHITESPACE","    ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","drupalGet",331],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/add'",331],")",";",["T_WHITESPACE","\n    ",331],["T_COMMENT","\/\/ Check that the Required symbol is present for the multifield label.\n",332],["T_WHITESPACE","    ",333],["T_VARIABLE","$element",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","xpath",333],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/h4[contains(@class, \"label\") and contains(@class, \"js-form-required\") and contains(text(), :value)]'",333],",",["T_WHITESPACE"," ",333],["T_ARRAY","array",333],"(",["T_CONSTANT_ENCAPSED_STRING","':value'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","field",333],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",333],"]",")",")",";",["T_WHITESPACE","\n    ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","assertTrue",334],"(",["T_ISSET","isset",334],"(",["T_VARIABLE","$element",334],"[",["T_LNUMBER","0",334],"]",")",",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'Required symbol added field label.'",334],")",";",["T_WHITESPACE","\n    ",334],["T_COMMENT","\/\/ Check that the label of the field input is visually hidden and contains\n",335],["T_WHITESPACE","    ",336],["T_COMMENT","\/\/ the field title and an indication of the delta for a11y.\n",336],["T_WHITESPACE","    ",337],["T_VARIABLE","$element",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","xpath",337],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/label[@for=:for and contains(@class, \"visually-hidden\") and contains(text(), :value)]'",337],",",["T_WHITESPACE"," ",337],["T_ARRAY","array",337],"(",["T_CONSTANT_ENCAPSED_STRING","':for'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'edit-field-unlimited-0-value'",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","':value'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","field",337],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",337],"]",["T_WHITESPACE"," ",337],".",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","' (value 1)'",337],")",")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","assertTrue",338],"(",["T_ISSET","isset",338],"(",["T_VARIABLE","$element",338],"[",["T_LNUMBER","0",338],"]",")",",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'Required symbol not added for field input.'",338],")",";",["T_WHITESPACE","\n  ",338],"}",["T_WHITESPACE","\n\n  ",339],["T_DOC_COMMENT","\/**\n   * Tests widget handling of multiple required radios.\n   *\/",341],["T_WHITESPACE","\n  ",343],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","testFieldFormMultivalueWithRequiredRadio",344],"(",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n    ",344],["T_COMMENT","\/\/ Create a multivalue test field.\n",345],["T_WHITESPACE","    ",346],["T_VARIABLE","$field_storage",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","fieldStorageUnlimited",346],";",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$field_name",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$field_storage",347],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",347],"]",";",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","field",348],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",348],"]",["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$field_name",348],";",["T_WHITESPACE","\n    ",348],["T_STRING","FieldStorageConfig",349],["T_DOUBLE_COLON","::",349],["T_STRING","create",349],"(",["T_VARIABLE","$field_storage",349],")",["T_OBJECT_OPERATOR","->",349],["T_STRING","save",349],"(",")",";",["T_WHITESPACE","\n    ",349],["T_STRING","FieldConfig",350],["T_DOUBLE_COLON","::",350],["T_STRING","create",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","field",350],")",["T_OBJECT_OPERATOR","->",350],["T_STRING","save",350],"(",")",";",["T_WHITESPACE","\n    ",350],["T_STRING","entity_get_form_display",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","field",351],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",351],"]",",",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","field",351],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",351],"]",",",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'default'",351],")",["T_WHITESPACE","\n      ",351],["T_OBJECT_OPERATOR","->",352],["T_STRING","setComponent",352],"(",["T_VARIABLE","$field_name",352],")",["T_WHITESPACE","\n      ",352],["T_OBJECT_OPERATOR","->",353],["T_STRING","save",353],"(",")",";",["T_WHITESPACE","\n\n    ",353],["T_COMMENT","\/\/ Add a required radio field.\n",355],["T_WHITESPACE","    ",356],["T_STRING","FieldStorageConfig",356],["T_DOUBLE_COLON","::",356],["T_STRING","create",356],"(",["T_ARRAY","array",356],"(",["T_WHITESPACE","\n      ",356],["T_CONSTANT_ENCAPSED_STRING","'field_name'",357],["T_WHITESPACE"," ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'required_radio_test'",357],",",["T_WHITESPACE","\n      ",357],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",358],["T_WHITESPACE"," ",358],["T_DOUBLE_ARROW","=>",358],["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",358],",",["T_WHITESPACE","\n      ",358],["T_CONSTANT_ENCAPSED_STRING","'type'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'list_string'",359],",",["T_WHITESPACE","\n      ",359],["T_CONSTANT_ENCAPSED_STRING","'settings'",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],["T_ARRAY","array",360],"(",["T_WHITESPACE","\n        ",360],["T_CONSTANT_ENCAPSED_STRING","'allowed_values'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_ARRAY","array",361],"(",["T_CONSTANT_ENCAPSED_STRING","'yes'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'yes'",361],",",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'no'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'no'",361],")",",",["T_WHITESPACE","\n      ",361],")",",",["T_WHITESPACE","\n    ",362],")",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","save",363],"(",")",";",["T_WHITESPACE","\n    ",363],["T_VARIABLE","$field",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_ARRAY","array",364],"(",["T_WHITESPACE","\n      ",364],["T_CONSTANT_ENCAPSED_STRING","'field_name'",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","'required_radio_test'",365],",",["T_WHITESPACE","\n      ",365],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",366],",",["T_WHITESPACE","\n      ",366],["T_CONSTANT_ENCAPSED_STRING","'bundle'",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",367],",",["T_WHITESPACE","\n      ",367],["T_CONSTANT_ENCAPSED_STRING","'required'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_STRING","TRUE",368],",",["T_WHITESPACE","\n    ",368],")",";",["T_WHITESPACE","\n    ",369],["T_STRING","FieldConfig",370],["T_DOUBLE_COLON","::",370],["T_STRING","create",370],"(",["T_VARIABLE","$field",370],")",["T_OBJECT_OPERATOR","->",370],["T_STRING","save",370],"(",")",";",["T_WHITESPACE","\n    ",370],["T_STRING","entity_get_form_display",371],"(",["T_VARIABLE","$field",371],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",371],"]",",",["T_WHITESPACE"," ",371],["T_VARIABLE","$field",371],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",371],"]",",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'default'",371],")",["T_WHITESPACE","\n      ",371],["T_OBJECT_OPERATOR","->",372],["T_STRING","setComponent",372],"(",["T_VARIABLE","$field",372],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",372],"]",",",["T_WHITESPACE"," ",372],["T_ARRAY","array",372],"(",["T_WHITESPACE","\n        ",372],["T_CONSTANT_ENCAPSED_STRING","'type'",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'options_buttons'",373],",",["T_WHITESPACE","\n      ",373],")",")",["T_WHITESPACE","\n      ",374],["T_OBJECT_OPERATOR","->",375],["T_STRING","save",375],"(",")",";",["T_WHITESPACE","\n\n    ",375],["T_COMMENT","\/\/ Display creation form.\n",377],["T_WHITESPACE","    ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","drupalGet",378],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/add'",378],")",";",["T_WHITESPACE","\n\n    ",378],["T_COMMENT","\/\/ Press the 'Add more' button.\n",380],["T_WHITESPACE","    ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","drupalPostForm",381],"(",["T_STRING","NULL",381],",",["T_WHITESPACE"," ",381],["T_ARRAY","array",381],"(",")",",",["T_WHITESPACE"," ",381],["T_STRING","t",381],"(",["T_CONSTANT_ENCAPSED_STRING","'Add another item'",381],")",")",";",["T_WHITESPACE","\n\n    ",381],["T_COMMENT","\/\/ Verify that no error is thrown by the radio element.\n",383],["T_WHITESPACE","    ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","assertNoFieldByXpath",384],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/div[contains(@class, \"error\")]'",384],",",["T_WHITESPACE"," ",384],["T_STRING","FALSE",384],",",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'No error message is displayed.'",384],")",";",["T_WHITESPACE","\n\n    ",384],["T_COMMENT","\/\/ Verify that the widget is added.\n",386],["T_WHITESPACE","    ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","assertFieldByName",387],"(","\"",["T_CURLY_OPEN","{",387],["T_VARIABLE","$field_name",387],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",387],"\"",",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","''",387],",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'Widget 1 is displayed'",387],")",";",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","assertFieldByName",388],"(","\"",["T_CURLY_OPEN","{",388],["T_VARIABLE","$field_name",388],"}",["T_ENCAPSED_AND_WHITESPACE","[1][value]",388],"\"",",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","''",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'New widget is displayed'",388],")",";",["T_WHITESPACE","\n    ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","assertNoField",389],"(","\"",["T_CURLY_OPEN","{",389],["T_VARIABLE","$field_name",389],"}",["T_ENCAPSED_AND_WHITESPACE","[2][value]",389],"\"",",",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'No extraneous widget is displayed'",389],")",";",["T_WHITESPACE","\n  ",389],"}",["T_WHITESPACE","\n\n  ",390],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","testFieldFormJSAddMore",392],"(",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$field_storage",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","fieldStorageUnlimited",393],";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$field_name",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$field_storage",394],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",394],"]",";",["T_WHITESPACE","\n    ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","field",395],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",395],"]",["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$field_name",395],";",["T_WHITESPACE","\n    ",395],["T_STRING","FieldStorageConfig",396],["T_DOUBLE_COLON","::",396],["T_STRING","create",396],"(",["T_VARIABLE","$field_storage",396],")",["T_OBJECT_OPERATOR","->",396],["T_STRING","save",396],"(",")",";",["T_WHITESPACE","\n    ",396],["T_STRING","FieldConfig",397],["T_DOUBLE_COLON","::",397],["T_STRING","create",397],"(",["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","field",397],")",["T_OBJECT_OPERATOR","->",397],["T_STRING","save",397],"(",")",";",["T_WHITESPACE","\n    ",397],["T_STRING","entity_get_form_display",398],"(",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","field",398],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",398],"]",",",["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","field",398],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",398],"]",",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'default'",398],")",["T_WHITESPACE","\n      ",398],["T_OBJECT_OPERATOR","->",399],["T_STRING","setComponent",399],"(",["T_VARIABLE","$field_name",399],")",["T_WHITESPACE","\n      ",399],["T_OBJECT_OPERATOR","->",400],["T_STRING","save",400],"(",")",";",["T_WHITESPACE","\n\n    ",400],["T_COMMENT","\/\/ Display creation form -> 1 widget.\n",402],["T_WHITESPACE","    ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","drupalGet",403],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/add'",403],")",";",["T_WHITESPACE","\n\n    ",403],["T_COMMENT","\/\/ Press 'add more' button a couple times -> 3 widgets.\n",405],["T_WHITESPACE","    ",406],["T_COMMENT","\/\/ drupalPostAjaxForm() will not work iteratively, so we add those through\n",406],["T_WHITESPACE","    ",407],["T_COMMENT","\/\/ non-JS submission.\n",407],["T_WHITESPACE","    ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","drupalPostForm",408],"(",["T_STRING","NULL",408],",",["T_WHITESPACE"," ",408],["T_ARRAY","array",408],"(",")",",",["T_WHITESPACE"," ",408],["T_STRING","t",408],"(",["T_CONSTANT_ENCAPSED_STRING","'Add another item'",408],")",")",";",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","drupalPostForm",409],"(",["T_STRING","NULL",409],",",["T_WHITESPACE"," ",409],["T_ARRAY","array",409],"(",")",",",["T_WHITESPACE"," ",409],["T_STRING","t",409],"(",["T_CONSTANT_ENCAPSED_STRING","'Add another item'",409],")",")",";",["T_WHITESPACE","\n\n    ",409],["T_COMMENT","\/\/ Prepare values and weights.\n",411],["T_WHITESPACE","    ",412],["T_VARIABLE","$count",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_LNUMBER","3",412],";",["T_WHITESPACE","\n    ",412],["T_VARIABLE","$delta_range",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$count",413],["T_WHITESPACE"," ",413],"-",["T_WHITESPACE"," ",413],["T_LNUMBER","1",413],";",["T_WHITESPACE","\n    ",413],["T_VARIABLE","$values",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$weights",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$pattern",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$expected_values",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$edit",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_ARRAY","array",414],"(",")",";",["T_WHITESPACE","\n    ",414],["T_FOR","for",415],["T_WHITESPACE"," ",415],"(",["T_VARIABLE","$delta",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_LNUMBER","0",415],";",["T_WHITESPACE"," ",415],["T_VARIABLE","$delta",415],["T_WHITESPACE"," ",415],["T_IS_SMALLER_OR_EQUAL","<=",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$delta_range",415],";",["T_WHITESPACE"," ",415],["T_VARIABLE","$delta",415],["T_INC","++",415],")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n      ",415],["T_COMMENT","\/\/ Assign unique random values and weights.\n",416],["T_WHITESPACE","      ",417],["T_DO","do",417],["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$value",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","mt_rand",418],"(",["T_LNUMBER","1",418],",",["T_WHITESPACE"," ",418],["T_LNUMBER","127",418],")",";",["T_WHITESPACE","\n      ",418],"}",["T_WHITESPACE"," ",419],["T_WHILE","while",419],["T_WHITESPACE"," ",419],"(",["T_STRING","in_array",419],"(",["T_VARIABLE","$value",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$values",419],")",")",";",["T_WHITESPACE","\n      ",419],["T_DO","do",420],["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$weight",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","mt_rand",421],"(","-",["T_VARIABLE","$delta_range",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$delta_range",421],")",";",["T_WHITESPACE","\n      ",421],"}",["T_WHITESPACE"," ",422],["T_WHILE","while",422],["T_WHITESPACE"," ",422],"(",["T_STRING","in_array",422],"(",["T_VARIABLE","$weight",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$weights",422],")",")",";",["T_WHITESPACE","\n      ",422],["T_VARIABLE","$edit",423],"[","\"",["T_CURLY_OPEN","{",423],["T_VARIABLE","$field_name",423],"}",["T_ENCAPSED_AND_WHITESPACE","[",423],["T_VARIABLE","$delta",423],["T_ENCAPSED_AND_WHITESPACE","][value]",423],"\"","]",["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$value",423],";",["T_WHITESPACE","\n      ",423],["T_VARIABLE","$edit",424],"[","\"",["T_CURLY_OPEN","{",424],["T_VARIABLE","$field_name",424],"}",["T_ENCAPSED_AND_WHITESPACE","[",424],["T_VARIABLE","$delta",424],["T_ENCAPSED_AND_WHITESPACE","][_weight]",424],"\"","]",["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$weight",424],";",["T_WHITESPACE","\n      ",424],["T_COMMENT","\/\/ We'll need three slightly different formats to check the values.\n",425],["T_WHITESPACE","      ",426],["T_VARIABLE","$values",426],"[",["T_VARIABLE","$delta",426],"]",["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_VARIABLE","$value",426],";",["T_WHITESPACE","\n      ",426],["T_VARIABLE","$weights",427],"[",["T_VARIABLE","$delta",427],"]",["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$weight",427],";",["T_WHITESPACE","\n      ",427],["T_VARIABLE","$field_values",428],"[",["T_VARIABLE","$weight",428],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",428],"]",["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_STRING_CAST","(string)",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$value",428],";",["T_WHITESPACE","\n      ",428],["T_VARIABLE","$pattern",429],"[",["T_VARIABLE","$weight",429],"]",["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],"\"",["T_ENCAPSED_AND_WHITESPACE","<input [^>]*value=\\\"",429],["T_VARIABLE","$value",429],["T_ENCAPSED_AND_WHITESPACE","\\\" [^>]*",429],"\"",";",["T_WHITESPACE","\n    ",429],"}",["T_WHITESPACE","\n    ",430],["T_COMMENT","\/\/ Press 'add more' button through Ajax, and place the expected HTML result\n",431],["T_WHITESPACE","    ",432],["T_COMMENT","\/\/ as the tested content.\n",432],["T_WHITESPACE","    ",433],["T_VARIABLE","$commands",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","drupalPostAjaxForm",433],"(",["T_STRING","NULL",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$edit",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$field_name",433],["T_WHITESPACE"," ",433],".",["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'_add_more'",433],")",";",["T_WHITESPACE","\n    ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","setRawContent",434],"(",["T_VARIABLE","$commands",434],"[",["T_LNUMBER","2",434],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",434],"]",")",";",["T_WHITESPACE","\n\n    ",434],["T_FOR","for",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$delta",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_LNUMBER","0",436],";",["T_WHITESPACE"," ",436],["T_VARIABLE","$delta",436],["T_WHITESPACE"," ",436],["T_IS_SMALLER_OR_EQUAL","<=",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$delta_range",436],";",["T_WHITESPACE"," ",436],["T_VARIABLE","$delta",436],["T_INC","++",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n      ",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","assertFieldByName",437],"(","\"",["T_CURLY_OPEN","{",437],["T_VARIABLE","$field_name",437],"}",["T_ENCAPSED_AND_WHITESPACE","[",437],["T_VARIABLE","$delta",437],["T_ENCAPSED_AND_WHITESPACE","][value]",437],"\"",",",["T_WHITESPACE"," ",437],["T_VARIABLE","$values",437],"[",["T_VARIABLE","$delta",437],"]",",",["T_WHITESPACE"," ",437],"\"",["T_ENCAPSED_AND_WHITESPACE","Widget ",437],["T_VARIABLE","$delta",437],["T_ENCAPSED_AND_WHITESPACE"," is displayed and has the right value",437],"\"",")",";",["T_WHITESPACE","\n      ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","assertFieldByName",438],"(","\"",["T_CURLY_OPEN","{",438],["T_VARIABLE","$field_name",438],"}",["T_ENCAPSED_AND_WHITESPACE","[",438],["T_VARIABLE","$delta",438],["T_ENCAPSED_AND_WHITESPACE","][_weight]",438],"\"",",",["T_WHITESPACE"," ",438],["T_VARIABLE","$weights",438],"[",["T_VARIABLE","$delta",438],"]",",",["T_WHITESPACE"," ",438],"\"",["T_ENCAPSED_AND_WHITESPACE","Widget ",438],["T_VARIABLE","$delta",438],["T_ENCAPSED_AND_WHITESPACE"," has the right weight",438],"\"",")",";",["T_WHITESPACE","\n    ",438],"}",["T_WHITESPACE","\n    ",439],["T_STRING","ksort",440],"(",["T_VARIABLE","$pattern",440],")",";",["T_WHITESPACE","\n    ",440],["T_VARIABLE","$pattern",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","implode",441],"(",["T_CONSTANT_ENCAPSED_STRING","'.*'",441],",",["T_WHITESPACE"," ",441],["T_STRING","array_values",441],"(",["T_VARIABLE","$pattern",441],")",")",";",["T_WHITESPACE","\n    ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","assertPattern",442],"(","\"",["T_ENCAPSED_AND_WHITESPACE","|",442],["T_VARIABLE","$pattern",442],["T_ENCAPSED_AND_WHITESPACE","|s",442],"\"",",",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'Widgets are displayed in the correct order'",442],")",";",["T_WHITESPACE","\n    ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","assertFieldByName",443],"(","\"",["T_CURLY_OPEN","{",443],["T_VARIABLE","$field_name",443],"}",["T_ENCAPSED_AND_WHITESPACE","[",443],["T_VARIABLE","$delta",443],["T_ENCAPSED_AND_WHITESPACE","][value]",443],"\"",",",["T_WHITESPACE"," ",443],["T_CONSTANT_ENCAPSED_STRING","''",443],",",["T_WHITESPACE"," ",443],["T_CONSTANT_ENCAPSED_STRING","\"New widget is displayed\"",443],")",";",["T_WHITESPACE","\n    ",443],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","assertFieldByName",444],"(","\"",["T_CURLY_OPEN","{",444],["T_VARIABLE","$field_name",444],"}",["T_ENCAPSED_AND_WHITESPACE","[",444],["T_VARIABLE","$delta",444],["T_ENCAPSED_AND_WHITESPACE","][_weight]",444],"\"",",",["T_WHITESPACE"," ",444],["T_VARIABLE","$delta",444],",",["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","\"New widget has the right weight\"",444],")",";",["T_WHITESPACE","\n    ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","assertNoField",445],"(","\"",["T_CURLY_OPEN","{",445],["T_VARIABLE","$field_name",445],"}",["T_ENCAPSED_AND_WHITESPACE","[",445],"\"",["T_WHITESPACE"," ",445],".",["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$delta",445],["T_WHITESPACE"," ",445],"+",["T_WHITESPACE"," ",445],["T_LNUMBER","1",445],")",["T_WHITESPACE"," ",445],".",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'][value]'",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'No extraneous widget is displayed'",445],")",";",["T_WHITESPACE","\n  ",445],"}",["T_WHITESPACE","\n\n  ",446],["T_DOC_COMMENT","\/**\n   * Tests widgets handling multiple values.\n   *\/",448],["T_WHITESPACE","\n  ",450],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","testFieldFormMultipleWidget",451],"(",")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n    ",451],["T_COMMENT","\/\/ Create a field with fixed cardinality, configure the form to use a\n",452],["T_WHITESPACE","    ",453],["T_COMMENT","\/\/ \"multiple\" widget.\n",453],["T_WHITESPACE","    ",454],["T_VARIABLE","$field_storage",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","fieldStorageMultiple",454],";",["T_WHITESPACE","\n    ",454],["T_VARIABLE","$field_name",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_VARIABLE","$field_storage",455],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",455],"]",";",["T_WHITESPACE","\n    ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","field",456],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",456],"]",["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$field_name",456],";",["T_WHITESPACE","\n    ",456],["T_STRING","FieldStorageConfig",457],["T_DOUBLE_COLON","::",457],["T_STRING","create",457],"(",["T_VARIABLE","$field_storage",457],")",["T_OBJECT_OPERATOR","->",457],["T_STRING","save",457],"(",")",";",["T_WHITESPACE","\n    ",457],["T_STRING","FieldConfig",458],["T_DOUBLE_COLON","::",458],["T_STRING","create",458],"(",["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","field",458],")",["T_OBJECT_OPERATOR","->",458],["T_STRING","save",458],"(",")",";",["T_WHITESPACE","\n    ",458],["T_STRING","entity_get_form_display",459],"(",["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","field",459],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",459],"]",",",["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","field",459],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",459],"]",",",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'default'",459],")",["T_WHITESPACE","\n      ",459],["T_OBJECT_OPERATOR","->",460],["T_STRING","setComponent",460],"(",["T_VARIABLE","$field_name",460],",",["T_WHITESPACE"," ",460],["T_ARRAY","array",460],"(",["T_WHITESPACE","\n        ",460],["T_CONSTANT_ENCAPSED_STRING","'type'",461],["T_WHITESPACE"," ",461],["T_DOUBLE_ARROW","=>",461],["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'test_field_widget_multiple'",461],",",["T_WHITESPACE","\n      ",461],")",")",["T_WHITESPACE","\n      ",462],["T_OBJECT_OPERATOR","->",463],["T_STRING","save",463],"(",")",";",["T_WHITESPACE","\n\n    ",463],["T_COMMENT","\/\/ Display creation form.\n",465],["T_WHITESPACE","    ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","drupalGet",466],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/add'",466],")",";",["T_WHITESPACE","\n    ",466],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","assertFieldByName",467],"(",["T_VARIABLE","$field_name",467],",",["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","''",467],",",["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","'Widget is displayed.'",467],")",";",["T_WHITESPACE","\n\n    ",467],["T_COMMENT","\/\/ Create entity with three values.\n",469],["T_WHITESPACE","    ",470],["T_VARIABLE","$edit",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_ARRAY","array",470],"(",["T_WHITESPACE","\n      ",470],["T_VARIABLE","$field_name",471],["T_WHITESPACE"," ",471],["T_DOUBLE_ARROW","=>",471],["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'1, 2, 3'",471],",",["T_WHITESPACE","\n    ",471],")",";",["T_WHITESPACE","\n    ",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","drupalPostForm",473],"(",["T_STRING","NULL",473],",",["T_WHITESPACE"," ",473],["T_VARIABLE","$edit",473],",",["T_WHITESPACE"," ",473],["T_STRING","t",473],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",473],")",")",";",["T_WHITESPACE","\n    ",473],["T_STRING","preg_match",474],"(",["T_CONSTANT_ENCAPSED_STRING","'|entity_test\/manage\/(\\d+)|'",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","url",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$match",474],")",";",["T_WHITESPACE","\n    ",474],["T_VARIABLE","$id",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$match",475],"[",["T_LNUMBER","1",475],"]",";",["T_WHITESPACE","\n\n    ",475],["T_COMMENT","\/\/ Check that the values were saved.\n",477],["T_WHITESPACE","    ",478],["T_VARIABLE","$entity_init",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_STRING","EntityTest",478],["T_DOUBLE_COLON","::",478],["T_STRING","load",478],"(",["T_VARIABLE","$id",478],")",";",["T_WHITESPACE","\n    ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","assertFieldValues",479],"(",["T_VARIABLE","$entity_init",479],",",["T_WHITESPACE"," ",479],["T_VARIABLE","$field_name",479],",",["T_WHITESPACE"," ",479],["T_ARRAY","array",479],"(",["T_LNUMBER","1",479],",",["T_WHITESPACE"," ",479],["T_LNUMBER","2",479],",",["T_WHITESPACE"," ",479],["T_LNUMBER","3",479],")",")",";",["T_WHITESPACE","\n\n    ",479],["T_COMMENT","\/\/ Display the form, check that the values are correctly filled in.\n",481],["T_WHITESPACE","    ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","drupalGet",482],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test\/manage\/'",482],["T_WHITESPACE"," ",482],".",["T_WHITESPACE"," ",482],["T_VARIABLE","$id",482],["T_WHITESPACE"," ",482],".",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",482],")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","assertFieldByName",483],"(",["T_VARIABLE","$field_name",483],",",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'1, 2, 3'",483],",",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'Widget is displayed.'",483],")",";",["T_WHITESPACE","\n\n    ",483],["T_COMMENT","\/\/ Submit the form with more values than the field accepts.\n",485],["T_WHITESPACE","    ",486],["T_VARIABLE","$edit",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_ARRAY","array",486],"(",["T_VARIABLE","$field_name",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'1, 2, 3, 4, 5'",486],")",";",["T_WHITESPACE","\n    ",486],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","drupalPostForm",487],"(",["T_STRING","NULL",487],",",["T_WHITESPACE"," ",487],["T_VARIABLE","$edit",487],",",["T_WHITESPACE"," ",487],["T_STRING","t",487],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",487],")",")",";",["T_WHITESPACE","\n    ",487],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","assertRaw",488],"(",["T_CONSTANT_ENCAPSED_STRING","'this field cannot hold more than 4 values'",488],",",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'Form validation failed.'",488],")",";",["T_WHITESPACE","\n    ",488],["T_COMMENT","\/\/ Check that the field values were not submitted.\n",489],["T_WHITESPACE","    ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","assertFieldValues",490],"(",["T_VARIABLE","$entity_init",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$field_name",490],",",["T_WHITESPACE"," ",490],["T_ARRAY","array",490],"(",["T_LNUMBER","1",490],",",["T_WHITESPACE"," ",490],["T_LNUMBER","2",490],",",["T_WHITESPACE"," ",490],["T_LNUMBER","3",490],")",")",";",["T_WHITESPACE","\n  ",490],"}",["T_WHITESPACE","\n\n  ",491],["T_DOC_COMMENT","\/**\n   * Tests fields with no 'edit' access.\n   *\/",493],["T_WHITESPACE","\n  ",495],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","testFieldFormAccess",496],"(",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n    ",496],["T_VARIABLE","$entity_type",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'entity_test_rev'",497],";",["T_WHITESPACE","\n    ",497],["T_COMMENT","\/\/ Create a \"regular\" field.\n",498],["T_WHITESPACE","    ",499],["T_VARIABLE","$field_storage",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","fieldStorageSingle",499],";",["T_WHITESPACE","\n    ",499],["T_VARIABLE","$field_storage",500],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",500],"]",["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$entity_type",500],";",["T_WHITESPACE","\n    ",500],["T_VARIABLE","$field_name",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$field_storage",501],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",501],"]",";",["T_WHITESPACE","\n    ",501],["T_VARIABLE","$field",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","field",502],";",["T_WHITESPACE","\n    ",502],["T_VARIABLE","$field",503],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",503],"]",["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$field_name",503],";",["T_WHITESPACE","\n    ",503],["T_VARIABLE","$field",504],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",504],"]",["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$entity_type",504],";",["T_WHITESPACE","\n    ",504],["T_VARIABLE","$field",505],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",505],"]",["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$entity_type",505],";",["T_WHITESPACE","\n    ",505],["T_STRING","FieldStorageConfig",506],["T_DOUBLE_COLON","::",506],["T_STRING","create",506],"(",["T_VARIABLE","$field_storage",506],")",["T_OBJECT_OPERATOR","->",506],["T_STRING","save",506],"(",")",";",["T_WHITESPACE","\n    ",506],["T_STRING","FieldConfig",507],["T_DOUBLE_COLON","::",507],["T_STRING","create",507],"(",["T_VARIABLE","$field",507],")",["T_OBJECT_OPERATOR","->",507],["T_STRING","save",507],"(",")",";",["T_WHITESPACE","\n    ",507],["T_STRING","entity_get_form_display",508],"(",["T_VARIABLE","$entity_type",508],",",["T_WHITESPACE"," ",508],["T_VARIABLE","$entity_type",508],",",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'default'",508],")",["T_WHITESPACE","\n      ",508],["T_OBJECT_OPERATOR","->",509],["T_STRING","setComponent",509],"(",["T_VARIABLE","$field_name",509],")",["T_WHITESPACE","\n      ",509],["T_OBJECT_OPERATOR","->",510],["T_STRING","save",510],"(",")",";",["T_WHITESPACE","\n\n    ",510],["T_COMMENT","\/\/ Create a field with no edit access. See\n",512],["T_WHITESPACE","    ",513],["T_COMMENT","\/\/ field_test_entity_field_access().\n",513],["T_WHITESPACE","    ",514],["T_VARIABLE","$field_storage_no_access",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_ARRAY","array",514],"(",["T_WHITESPACE","\n      ",514],["T_CONSTANT_ENCAPSED_STRING","'field_name'",515],["T_WHITESPACE"," ",515],["T_DOUBLE_ARROW","=>",515],["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'field_no_edit_access'",515],",",["T_WHITESPACE","\n      ",515],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",516],["T_WHITESPACE"," ",516],["T_DOUBLE_ARROW","=>",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$entity_type",516],",",["T_WHITESPACE","\n      ",516],["T_CONSTANT_ENCAPSED_STRING","'type'",517],["T_WHITESPACE"," ",517],["T_DOUBLE_ARROW","=>",517],["T_WHITESPACE"," ",517],["T_CONSTANT_ENCAPSED_STRING","'test_field'",517],",",["T_WHITESPACE","\n    ",517],")",";",["T_WHITESPACE","\n    ",518],["T_VARIABLE","$field_name_no_access",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$field_storage_no_access",519],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",519],"]",";",["T_WHITESPACE","\n    ",519],["T_VARIABLE","$field_no_access",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_ARRAY","array",520],"(",["T_WHITESPACE","\n      ",520],["T_CONSTANT_ENCAPSED_STRING","'field_name'",521],["T_WHITESPACE"," ",521],["T_DOUBLE_ARROW","=>",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$field_name_no_access",521],",",["T_WHITESPACE","\n      ",521],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",522],["T_WHITESPACE"," ",522],["T_DOUBLE_ARROW","=>",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$entity_type",522],",",["T_WHITESPACE","\n      ",522],["T_CONSTANT_ENCAPSED_STRING","'bundle'",523],["T_WHITESPACE"," ",523],["T_DOUBLE_ARROW","=>",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$entity_type",523],",",["T_WHITESPACE","\n      ",523],["T_CONSTANT_ENCAPSED_STRING","'default_value'",524],["T_WHITESPACE"," ",524],["T_DOUBLE_ARROW","=>",524],["T_WHITESPACE"," ",524],["T_ARRAY","array",524],"(",["T_LNUMBER","0",524],["T_WHITESPACE"," ",524],["T_DOUBLE_ARROW","=>",524],["T_WHITESPACE"," ",524],["T_ARRAY","array",524],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",524],["T_WHITESPACE"," ",524],["T_DOUBLE_ARROW","=>",524],["T_WHITESPACE"," ",524],["T_LNUMBER","99",524],")",")",",",["T_WHITESPACE","\n    ",524],")",";",["T_WHITESPACE","\n    ",525],["T_STRING","FieldStorageConfig",526],["T_DOUBLE_COLON","::",526],["T_STRING","create",526],"(",["T_VARIABLE","$field_storage_no_access",526],")",["T_OBJECT_OPERATOR","->",526],["T_STRING","save",526],"(",")",";",["T_WHITESPACE","\n    ",526],["T_STRING","FieldConfig",527],["T_DOUBLE_COLON","::",527],["T_STRING","create",527],"(",["T_VARIABLE","$field_no_access",527],")",["T_OBJECT_OPERATOR","->",527],["T_STRING","save",527],"(",")",";",["T_WHITESPACE","\n    ",527],["T_STRING","entity_get_form_display",528],"(",["T_VARIABLE","$field_no_access",528],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",528],"]",",",["T_WHITESPACE"," ",528],["T_VARIABLE","$field_no_access",528],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",528],"]",",",["T_WHITESPACE"," ",528],["T_CONSTANT_ENCAPSED_STRING","'default'",528],")",["T_WHITESPACE","\n      ",528],["T_OBJECT_OPERATOR","->",529],["T_STRING","setComponent",529],"(",["T_VARIABLE","$field_name_no_access",529],")",["T_WHITESPACE","\n      ",529],["T_OBJECT_OPERATOR","->",530],["T_STRING","save",530],"(",")",";",["T_WHITESPACE","\n\n    ",530],["T_COMMENT","\/\/ Test that the form structure includes full information for each delta\n",532],["T_WHITESPACE","    ",533],["T_COMMENT","\/\/ apart from #access.\n",533],["T_WHITESPACE","    ",534],["T_VARIABLE","$entity",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","container",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","get",534],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",534],")",["T_WHITESPACE","\n      ",534],["T_OBJECT_OPERATOR","->",535],["T_STRING","getStorage",535],"(",["T_VARIABLE","$entity_type",535],")",["T_WHITESPACE","\n      ",535],["T_OBJECT_OPERATOR","->",536],["T_STRING","create",536],"(",["T_ARRAY","array",536],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",536],["T_WHITESPACE"," ",536],["T_DOUBLE_ARROW","=>",536],["T_WHITESPACE"," ",536],["T_LNUMBER","0",536],",",["T_WHITESPACE"," ",536],["T_CONSTANT_ENCAPSED_STRING","'revision_id'",536],["T_WHITESPACE"," ",536],["T_DOUBLE_ARROW","=>",536],["T_WHITESPACE"," ",536],["T_LNUMBER","0",536],")",")",";",["T_WHITESPACE","\n\n    ",536],["T_VARIABLE","$display",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_STRING","entity_get_form_display",538],"(",["T_VARIABLE","$entity_type",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$entity_type",538],",",["T_WHITESPACE"," ",538],["T_CONSTANT_ENCAPSED_STRING","'default'",538],")",";",["T_WHITESPACE","\n    ",538],["T_VARIABLE","$form",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_ARRAY","array",539],"(",")",";",["T_WHITESPACE","\n    ",539],["T_VARIABLE","$form_state",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_NEW","new",540],["T_WHITESPACE"," ",540],["T_STRING","FormState",540],"(",")",";",["T_WHITESPACE","\n    ",540],["T_VARIABLE","$display",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","buildForm",541],"(",["T_VARIABLE","$entity",541],",",["T_WHITESPACE"," ",541],["T_VARIABLE","$form",541],",",["T_WHITESPACE"," ",541],["T_VARIABLE","$form_state",541],")",";",["T_WHITESPACE","\n\n    ",541],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","assertFalse",543],"(",["T_VARIABLE","$form",543],"[",["T_VARIABLE","$field_name_no_access",543],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#access'",543],"]",",",["T_WHITESPACE"," ",543],["T_CONSTANT_ENCAPSED_STRING","'Field #access is FALSE for the field without edit access.'",543],")",";",["T_WHITESPACE","\n\n    ",543],["T_COMMENT","\/\/ Display creation form.\n",545],["T_WHITESPACE","    ",546],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","drupalGet",546],"(",["T_VARIABLE","$entity_type",546],["T_WHITESPACE"," ",546],".",["T_WHITESPACE"," ",546],["T_CONSTANT_ENCAPSED_STRING","'\/add'",546],")",";",["T_WHITESPACE","\n    ",546],["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","assertNoFieldByName",547],"(","\"",["T_CURLY_OPEN","{",547],["T_VARIABLE","$field_name_no_access",547],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",547],"\"",",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","''",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'Widget is not displayed if field access is denied.'",547],")",";",["T_WHITESPACE","\n\n    ",547],["T_COMMENT","\/\/ Create entity.\n",549],["T_WHITESPACE","    ",550],["T_VARIABLE","$edit",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_ARRAY","array",550],"(",["T_WHITESPACE","\n      ",550],"\"",["T_CURLY_OPEN","{",551],["T_VARIABLE","$field_name",551],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",551],"\"",["T_WHITESPACE"," ",551],["T_DOUBLE_ARROW","=>",551],["T_WHITESPACE"," ",551],["T_LNUMBER","1",551],",",["T_WHITESPACE","\n    ",551],")",";",["T_WHITESPACE","\n    ",552],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","drupalPostForm",553],"(",["T_STRING","NULL",553],",",["T_WHITESPACE"," ",553],["T_VARIABLE","$edit",553],",",["T_WHITESPACE"," ",553],["T_STRING","t",553],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",553],")",")",";",["T_WHITESPACE","\n    ",553],["T_STRING","preg_match",554],"(","\"",["T_ENCAPSED_AND_WHITESPACE","|",554],["T_VARIABLE","$entity_type",554],["T_ENCAPSED_AND_WHITESPACE","\/manage\/(\\d+)|",554],"\"",",",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","url",554],",",["T_WHITESPACE"," ",554],["T_VARIABLE","$match",554],")",";",["T_WHITESPACE","\n    ",554],["T_VARIABLE","$id",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_VARIABLE","$match",555],"[",["T_LNUMBER","1",555],"]",";",["T_WHITESPACE","\n\n    ",555],["T_COMMENT","\/\/ Check that the default value was saved.\n",557],["T_WHITESPACE","    ",558],["T_VARIABLE","$storage",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","container",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","get",558],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",558],")",["T_WHITESPACE","\n      ",558],["T_OBJECT_OPERATOR","->",559],["T_STRING","getStorage",559],"(",["T_VARIABLE","$entity_type",559],")",";",["T_WHITESPACE","\n    ",559],["T_VARIABLE","$entity",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_VARIABLE","$storage",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","load",560],"(",["T_VARIABLE","$id",560],")",";",["T_WHITESPACE","\n    ",560],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","assertEqual",561],"(",["T_VARIABLE","$entity",561],["T_OBJECT_OPERATOR","->",561],["T_VARIABLE","$field_name_no_access",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","value",561],",",["T_WHITESPACE"," ",561],["T_LNUMBER","99",561],",",["T_WHITESPACE"," ",561],["T_CONSTANT_ENCAPSED_STRING","'Default value was saved for the field with no edit access.'",561],")",";",["T_WHITESPACE","\n    ",561],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","assertEqual",562],"(",["T_VARIABLE","$entity",562],["T_OBJECT_OPERATOR","->",562],["T_VARIABLE","$field_name",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","value",562],",",["T_WHITESPACE"," ",562],["T_LNUMBER","1",562],",",["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'Entered value vas saved for the field with edit access.'",562],")",";",["T_WHITESPACE","\n\n    ",562],["T_COMMENT","\/\/ Create a new revision.\n",564],["T_WHITESPACE","    ",565],["T_VARIABLE","$edit",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_ARRAY","array",565],"(",["T_WHITESPACE","\n      ",565],"\"",["T_CURLY_OPEN","{",566],["T_VARIABLE","$field_name",566],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",566],"\"",["T_WHITESPACE"," ",566],["T_DOUBLE_ARROW","=>",566],["T_WHITESPACE"," ",566],["T_LNUMBER","2",566],",",["T_WHITESPACE","\n      ",566],["T_CONSTANT_ENCAPSED_STRING","'revision'",567],["T_WHITESPACE"," ",567],["T_DOUBLE_ARROW","=>",567],["T_WHITESPACE"," ",567],["T_STRING","TRUE",567],",",["T_WHITESPACE","\n    ",567],")",";",["T_WHITESPACE","\n    ",568],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","drupalPostForm",569],"(",["T_VARIABLE","$entity_type",569],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","'\/manage\/'",569],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_VARIABLE","$id",569],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",569],",",["T_WHITESPACE"," ",569],["T_VARIABLE","$edit",569],",",["T_WHITESPACE"," ",569],["T_STRING","t",569],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",569],")",")",";",["T_WHITESPACE","\n\n    ",569],["T_COMMENT","\/\/ Check that the new revision has the expected values.\n",571],["T_WHITESPACE","    ",572],["T_VARIABLE","$storage",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","resetCache",572],"(","[",["T_VARIABLE","$id",572],"]",")",";",["T_WHITESPACE","\n    ",572],["T_VARIABLE","$entity",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_VARIABLE","$storage",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","load",573],"(",["T_VARIABLE","$id",573],")",";",["T_WHITESPACE","\n    ",573],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","assertEqual",574],"(",["T_VARIABLE","$entity",574],["T_OBJECT_OPERATOR","->",574],["T_VARIABLE","$field_name_no_access",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","value",574],",",["T_WHITESPACE"," ",574],["T_LNUMBER","99",574],",",["T_WHITESPACE"," ",574],["T_CONSTANT_ENCAPSED_STRING","'New revision has the expected value for the field with no edit access.'",574],")",";",["T_WHITESPACE","\n    ",574],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","assertEqual",575],"(",["T_VARIABLE","$entity",575],["T_OBJECT_OPERATOR","->",575],["T_VARIABLE","$field_name",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","value",575],",",["T_WHITESPACE"," ",575],["T_LNUMBER","2",575],",",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","'New revision has the expected value for the field with edit access.'",575],")",";",["T_WHITESPACE","\n\n    ",575],["T_COMMENT","\/\/ Check that the revision is also saved in the revisions table.\n",577],["T_WHITESPACE","    ",578],["T_COMMENT","\/\/ $entity = entity_revision_load($entity_type, $entity->getRevisionId());\n",578],["T_WHITESPACE","    ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","assertEqual",579],"(",["T_VARIABLE","$entity",579],["T_OBJECT_OPERATOR","->",579],["T_VARIABLE","$field_name_no_access",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","value",579],",",["T_WHITESPACE"," ",579],["T_LNUMBER","99",579],",",["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","'New revision has the expected value for the field with no edit access.'",579],")",";",["T_WHITESPACE","\n    ",579],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","assertEqual",580],"(",["T_VARIABLE","$entity",580],["T_OBJECT_OPERATOR","->",580],["T_VARIABLE","$field_name",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","value",580],",",["T_WHITESPACE"," ",580],["T_LNUMBER","2",580],",",["T_WHITESPACE"," ",580],["T_CONSTANT_ENCAPSED_STRING","'New revision has the expected value for the field with edit access.'",580],")",";",["T_WHITESPACE","\n  ",580],"}",["T_WHITESPACE","\n\n  ",581],["T_DOC_COMMENT","\/**\n   * Tests hiding a field in a form.\n   *\/",583],["T_WHITESPACE","\n  ",585],["T_FUNCTION","function",586],["T_WHITESPACE"," ",586],["T_STRING","testHiddenField",586],"(",")",["T_WHITESPACE"," ",586],"{",["T_WHITESPACE","\n    ",586],["T_VARIABLE","$entity_type",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_CONSTANT_ENCAPSED_STRING","'entity_test_rev'",587],";",["T_WHITESPACE","\n    ",587],["T_VARIABLE","$field_storage",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","fieldStorageSingle",588],";",["T_WHITESPACE","\n    ",588],["T_VARIABLE","$field_storage",589],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",589],"]",["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$entity_type",589],";",["T_WHITESPACE","\n    ",589],["T_VARIABLE","$field_name",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_VARIABLE","$field_storage",590],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",590],"]",";",["T_WHITESPACE","\n    ",590],["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","field",591],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",591],"]",["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_VARIABLE","$field_name",591],";",["T_WHITESPACE","\n    ",591],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","field",592],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",592],"]",["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_ARRAY","array",592],"(",["T_LNUMBER","0",592],["T_WHITESPACE"," ",592],["T_DOUBLE_ARROW","=>",592],["T_WHITESPACE"," ",592],["T_ARRAY","array",592],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",592],["T_WHITESPACE"," ",592],["T_DOUBLE_ARROW","=>",592],["T_WHITESPACE"," ",592],["T_LNUMBER","99",592],")",")",";",["T_WHITESPACE","\n    ",592],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","field",593],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",593],"]",["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_VARIABLE","$entity_type",593],";",["T_WHITESPACE","\n    ",593],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","field",594],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle'",594],"]",["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_VARIABLE","$entity_type",594],";",["T_WHITESPACE","\n    ",594],["T_STRING","FieldStorageConfig",595],["T_DOUBLE_COLON","::",595],["T_STRING","create",595],"(",["T_VARIABLE","$field_storage",595],")",["T_OBJECT_OPERATOR","->",595],["T_STRING","save",595],"(",")",";",["T_WHITESPACE","\n    ",595],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","field",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","FieldConfig",596],["T_DOUBLE_COLON","::",596],["T_STRING","create",596],"(",["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","field",596],")",";",["T_WHITESPACE","\n    ",596],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","field",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","save",597],"(",")",";",["T_WHITESPACE","\n    ",597],["T_COMMENT","\/\/ We explicitly do not assign a widget in a form display, so the field\n",598],["T_WHITESPACE","    ",599],["T_COMMENT","\/\/ stays hidden in forms.\n",599],["T_WHITESPACE","\n    ",600],["T_COMMENT","\/\/ Display the entity creation form.\n",601],["T_WHITESPACE","    ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","drupalGet",602],"(",["T_VARIABLE","$entity_type",602],["T_WHITESPACE"," ",602],".",["T_WHITESPACE"," ",602],["T_CONSTANT_ENCAPSED_STRING","'\/add'",602],")",";",["T_WHITESPACE","\n\n    ",602],["T_COMMENT","\/\/ Create an entity and test that the default value is assigned correctly to\n",604],["T_WHITESPACE","    ",605],["T_COMMENT","\/\/ the field that uses the hidden widget.\n",605],["T_WHITESPACE","    ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","assertNoField",606],"(","\"",["T_CURLY_OPEN","{",606],["T_VARIABLE","$field_name",606],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",606],"\"",",",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","'The field does not appear in the form'",606],")",";",["T_WHITESPACE","\n    ",606],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","drupalPostForm",607],"(",["T_STRING","NULL",607],",",["T_WHITESPACE"," ",607],["T_ARRAY","array",607],"(",")",",",["T_WHITESPACE"," ",607],["T_STRING","t",607],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",607],")",")",";",["T_WHITESPACE","\n    ",607],["T_STRING","preg_match",608],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",608],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_VARIABLE","$entity_type",608],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","'\/manage\/(\\d+)|'",608],",",["T_WHITESPACE"," ",608],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","url",608],",",["T_WHITESPACE"," ",608],["T_VARIABLE","$match",608],")",";",["T_WHITESPACE","\n    ",608],["T_VARIABLE","$id",609],["T_WHITESPACE"," ",609],"=",["T_WHITESPACE"," ",609],["T_VARIABLE","$match",609],"[",["T_LNUMBER","1",609],"]",";",["T_WHITESPACE","\n    ",609],["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","assertText",610],"(",["T_STRING","t",610],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_rev @id has been created.'",610],",",["T_WHITESPACE"," ",610],["T_ARRAY","array",610],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",610],["T_WHITESPACE"," ",610],["T_DOUBLE_ARROW","=>",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$id",610],")",")",",",["T_WHITESPACE"," ",610],["T_CONSTANT_ENCAPSED_STRING","'Entity was created'",610],")",";",["T_WHITESPACE","\n    ",610],["T_VARIABLE","$storage",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","container",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","get",611],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",611],")",["T_WHITESPACE","\n      ",611],["T_OBJECT_OPERATOR","->",612],["T_STRING","getStorage",612],"(",["T_VARIABLE","$entity_type",612],")",";",["T_WHITESPACE","\n\n    ",612],["T_VARIABLE","$entity",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$storage",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","load",614],"(",["T_VARIABLE","$id",614],")",";",["T_WHITESPACE","\n    ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","assertEqual",615],"(",["T_VARIABLE","$entity",615],["T_OBJECT_OPERATOR","->",615],"{",["T_VARIABLE","$field_name",615],"}",["T_OBJECT_OPERATOR","->",615],["T_STRING","value",615],",",["T_WHITESPACE"," ",615],["T_LNUMBER","99",615],",",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'Default value was saved'",615],")",";",["T_WHITESPACE","\n\n    ",615],["T_COMMENT","\/\/ Update the field to remove the default value, and switch to the default\n",617],["T_WHITESPACE","    ",618],["T_COMMENT","\/\/ widget.\n",618],["T_WHITESPACE","    ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","field",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","setDefaultValue",619],"(",["T_ARRAY","array",619],"(",")",")",";",["T_WHITESPACE","\n    ",619],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","field",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","save",620],"(",")",";",["T_WHITESPACE","\n    ",620],["T_STRING","entity_get_form_display",621],"(",["T_VARIABLE","$entity_type",621],",",["T_WHITESPACE"," ",621],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","field",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","getTargetBundle",621],"(",")",",",["T_WHITESPACE"," ",621],["T_CONSTANT_ENCAPSED_STRING","'default'",621],")",["T_WHITESPACE","\n      ",621],["T_OBJECT_OPERATOR","->",622],["T_STRING","setComponent",622],"(",["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","field",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","getName",622],"(",")",",",["T_WHITESPACE"," ",622],["T_ARRAY","array",622],"(",["T_WHITESPACE","\n        ",622],["T_CONSTANT_ENCAPSED_STRING","'type'",623],["T_WHITESPACE"," ",623],["T_DOUBLE_ARROW","=>",623],["T_WHITESPACE"," ",623],["T_CONSTANT_ENCAPSED_STRING","'test_field_widget'",623],",",["T_WHITESPACE","\n      ",623],")",")",["T_WHITESPACE","\n      ",624],["T_OBJECT_OPERATOR","->",625],["T_STRING","save",625],"(",")",";",["T_WHITESPACE","\n\n    ",625],["T_COMMENT","\/\/ Display edit form.\n",627],["T_WHITESPACE","    ",628],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","drupalGet",628],"(",["T_VARIABLE","$entity_type",628],["T_WHITESPACE"," ",628],".",["T_WHITESPACE"," ",628],["T_CONSTANT_ENCAPSED_STRING","'\/manage\/'",628],["T_WHITESPACE"," ",628],".",["T_WHITESPACE"," ",628],["T_VARIABLE","$id",628],["T_WHITESPACE"," ",628],".",["T_WHITESPACE"," ",628],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",628],")",";",["T_WHITESPACE","\n    ",628],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","assertFieldByName",629],"(","\"",["T_CURLY_OPEN","{",629],["T_VARIABLE","$field_name",629],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",629],"\"",",",["T_WHITESPACE"," ",629],["T_LNUMBER","99",629],",",["T_WHITESPACE"," ",629],["T_CONSTANT_ENCAPSED_STRING","'Widget is displayed with the correct default value'",629],")",";",["T_WHITESPACE","\n\n    ",629],["T_COMMENT","\/\/ Update the entity.\n",631],["T_WHITESPACE","    ",632],["T_VARIABLE","$value",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_STRING","mt_rand",632],"(",["T_LNUMBER","1",632],",",["T_WHITESPACE"," ",632],["T_LNUMBER","127",632],")",";",["T_WHITESPACE","\n    ",632],["T_VARIABLE","$edit",633],["T_WHITESPACE"," ",633],"=",["T_WHITESPACE"," ",633],["T_ARRAY","array",633],"(","\"",["T_CURLY_OPEN","{",633],["T_VARIABLE","$field_name",633],"}",["T_ENCAPSED_AND_WHITESPACE","[0][value]",633],"\"",["T_WHITESPACE"," ",633],["T_DOUBLE_ARROW","=>",633],["T_WHITESPACE"," ",633],["T_VARIABLE","$value",633],")",";",["T_WHITESPACE","\n    ",633],["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","drupalPostForm",634],"(",["T_STRING","NULL",634],",",["T_WHITESPACE"," ",634],["T_VARIABLE","$edit",634],",",["T_WHITESPACE"," ",634],["T_STRING","t",634],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",634],")",")",";",["T_WHITESPACE","\n    ",634],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","assertText",635],"(",["T_STRING","t",635],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_rev @id has been updated.'",635],",",["T_WHITESPACE"," ",635],["T_ARRAY","array",635],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",635],["T_WHITESPACE"," ",635],["T_DOUBLE_ARROW","=>",635],["T_WHITESPACE"," ",635],["T_VARIABLE","$id",635],")",")",",",["T_WHITESPACE"," ",635],["T_CONSTANT_ENCAPSED_STRING","'Entity was updated'",635],")",";",["T_WHITESPACE","\n    ",635],["T_VARIABLE","$storage",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","resetCache",636],"(","[",["T_VARIABLE","$id",636],"]",")",";",["T_WHITESPACE","\n    ",636],["T_VARIABLE","$entity",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_VARIABLE","$storage",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","load",637],"(",["T_VARIABLE","$id",637],")",";",["T_WHITESPACE","\n    ",637],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","assertEqual",638],"(",["T_VARIABLE","$entity",638],["T_OBJECT_OPERATOR","->",638],"{",["T_VARIABLE","$field_name",638],"}",["T_OBJECT_OPERATOR","->",638],["T_STRING","value",638],",",["T_WHITESPACE"," ",638],["T_VARIABLE","$value",638],",",["T_WHITESPACE"," ",638],["T_CONSTANT_ENCAPSED_STRING","'Field value was updated'",638],")",";",["T_WHITESPACE","\n\n    ",638],["T_COMMENT","\/\/ Set the field back to hidden.\n",640],["T_WHITESPACE","    ",641],["T_STRING","entity_get_form_display",641],"(",["T_VARIABLE","$entity_type",641],",",["T_WHITESPACE"," ",641],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","field",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","getTargetBundle",641],"(",")",",",["T_WHITESPACE"," ",641],["T_CONSTANT_ENCAPSED_STRING","'default'",641],")",["T_WHITESPACE","\n      ",641],["T_OBJECT_OPERATOR","->",642],["T_STRING","removeComponent",642],"(",["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","field",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","getName",642],"(",")",")",["T_WHITESPACE","\n      ",642],["T_OBJECT_OPERATOR","->",643],["T_STRING","save",643],"(",")",";",["T_WHITESPACE","\n\n    ",643],["T_COMMENT","\/\/ Create a new revision.\n",645],["T_WHITESPACE","    ",646],["T_VARIABLE","$edit",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],["T_ARRAY","array",646],"(",["T_CONSTANT_ENCAPSED_STRING","'revision'",646],["T_WHITESPACE"," ",646],["T_DOUBLE_ARROW","=>",646],["T_WHITESPACE"," ",646],["T_STRING","TRUE",646],")",";",["T_WHITESPACE","\n    ",646],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","drupalPostForm",647],"(",["T_VARIABLE","$entity_type",647],["T_WHITESPACE"," ",647],".",["T_WHITESPACE"," ",647],["T_CONSTANT_ENCAPSED_STRING","'\/manage\/'",647],["T_WHITESPACE"," ",647],".",["T_WHITESPACE"," ",647],["T_VARIABLE","$id",647],["T_WHITESPACE"," ",647],".",["T_WHITESPACE"," ",647],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$edit",647],",",["T_WHITESPACE"," ",647],["T_STRING","t",647],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",647],")",")",";",["T_WHITESPACE","\n\n    ",647],["T_COMMENT","\/\/ Check that the expected value has been carried over to the new revision.\n",649],["T_WHITESPACE","    ",650],["T_VARIABLE","$storage",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","resetCache",650],"(",["T_ARRAY","array",650],"(",["T_VARIABLE","$id",650],")",")",";",["T_WHITESPACE","\n    ",650],["T_VARIABLE","$entity",651],["T_WHITESPACE"," ",651],"=",["T_WHITESPACE"," ",651],["T_VARIABLE","$storage",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","load",651],"(",["T_VARIABLE","$id",651],")",";",["T_WHITESPACE","\n    ",651],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","assertEqual",652],"(",["T_VARIABLE","$entity",652],["T_OBJECT_OPERATOR","->",652],"{",["T_VARIABLE","$field_name",652],"}",["T_OBJECT_OPERATOR","->",652],["T_STRING","value",652],",",["T_WHITESPACE"," ",652],["T_VARIABLE","$value",652],",",["T_WHITESPACE"," ",652],["T_CONSTANT_ENCAPSED_STRING","'New revision has the expected value for the field with the Hidden widget'",652],")",";",["T_WHITESPACE","\n  ",652],"}",["T_WHITESPACE","\n\n  ",653],["T_DOC_COMMENT","\/**\n   * Tests the form display of the label for multi-value fields.\n   *\/",655],["T_WHITESPACE","\n  ",657],["T_PUBLIC","public",658],["T_WHITESPACE"," ",658],["T_FUNCTION","function",658],["T_WHITESPACE"," ",658],["T_STRING","testLabelOnMultiValueFields",658],"(",")",["T_WHITESPACE"," ",658],"{",["T_WHITESPACE","\n    ",658],["T_VARIABLE","$user",659],["T_WHITESPACE"," ",659],"=",["T_WHITESPACE"," ",659],["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","drupalCreateUser",659],"(","[",["T_CONSTANT_ENCAPSED_STRING","'administer entity_test content'",659],"]",")",";",["T_WHITESPACE","\n    ",659],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","drupalLogin",660],"(",["T_VARIABLE","$user",660],")",";",["T_WHITESPACE","\n\n    ",660],["T_STRING","FieldStorageConfig",662],["T_DOUBLE_COLON","::",662],["T_STRING","create",662],"(","[",["T_WHITESPACE","\n      ",662],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",663],["T_WHITESPACE"," ",663],["T_DOUBLE_ARROW","=>",663],["T_WHITESPACE"," ",663],["T_CONSTANT_ENCAPSED_STRING","'entity_test_base_field_display'",663],",",["T_WHITESPACE","\n      ",663],["T_CONSTANT_ENCAPSED_STRING","'field_name'",664],["T_WHITESPACE"," ",664],["T_DOUBLE_ARROW","=>",664],["T_WHITESPACE"," ",664],["T_CONSTANT_ENCAPSED_STRING","'foo'",664],",",["T_WHITESPACE","\n      ",664],["T_CONSTANT_ENCAPSED_STRING","'type'",665],["T_WHITESPACE"," ",665],["T_DOUBLE_ARROW","=>",665],["T_WHITESPACE"," ",665],["T_CONSTANT_ENCAPSED_STRING","'text'",665],",",["T_WHITESPACE","\n      ",665],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",666],["T_WHITESPACE"," ",666],["T_DOUBLE_ARROW","=>",666],["T_WHITESPACE"," ",666],["T_STRING","FieldStorageConfig",666],["T_DOUBLE_COLON","::",666],["T_STRING","CARDINALITY_UNLIMITED",666],",",["T_WHITESPACE","\n    ",666],"]",")",["T_OBJECT_OPERATOR","->",667],["T_STRING","save",667],"(",")",";",["T_WHITESPACE","\n    ",667],["T_STRING","FieldConfig",668],["T_DOUBLE_COLON","::",668],["T_STRING","create",668],"(","[",["T_WHITESPACE","\n      ",668],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",669],["T_WHITESPACE"," ",669],["T_DOUBLE_ARROW","=>",669],["T_WHITESPACE"," ",669],["T_CONSTANT_ENCAPSED_STRING","'entity_test_base_field_display'",669],",",["T_WHITESPACE","\n      ",669],["T_CONSTANT_ENCAPSED_STRING","'bundle'",670],["T_WHITESPACE"," ",670],["T_DOUBLE_ARROW","=>",670],["T_WHITESPACE"," ",670],["T_CONSTANT_ENCAPSED_STRING","'bar'",670],",",["T_WHITESPACE","\n      ",670],["T_CONSTANT_ENCAPSED_STRING","'field_name'",671],["T_WHITESPACE"," ",671],["T_DOUBLE_ARROW","=>",671],["T_WHITESPACE"," ",671],["T_CONSTANT_ENCAPSED_STRING","'foo'",671],",",["T_WHITESPACE","\n      ",671],["T_COMMENT","\/\/ Set a dangerous label to test XSS filtering.\n",672],["T_WHITESPACE","      ",673],["T_CONSTANT_ENCAPSED_STRING","'label'",673],["T_WHITESPACE"," ",673],["T_DOUBLE_ARROW","=>",673],["T_WHITESPACE"," ",673],["T_CONSTANT_ENCAPSED_STRING","\"<script>alert('a configurable field');<\/script>\"",673],",",["T_WHITESPACE","\n    ",673],"]",")",["T_OBJECT_OPERATOR","->",674],["T_STRING","save",674],"(",")",";",["T_WHITESPACE","\n    ",674],["T_STRING","EntityFormDisplay",675],["T_DOUBLE_COLON","::",675],["T_STRING","create",675],"(","[",["T_WHITESPACE","\n      ",675],["T_CONSTANT_ENCAPSED_STRING","'targetEntityType'",676],["T_WHITESPACE"," ",676],["T_DOUBLE_ARROW","=>",676],["T_WHITESPACE"," ",676],["T_CONSTANT_ENCAPSED_STRING","'entity_test_base_field_display'",676],",",["T_WHITESPACE","\n      ",676],["T_CONSTANT_ENCAPSED_STRING","'bundle'",677],["T_WHITESPACE"," ",677],["T_DOUBLE_ARROW","=>",677],["T_WHITESPACE"," ",677],["T_CONSTANT_ENCAPSED_STRING","'bar'",677],",",["T_WHITESPACE","\n      ",677],["T_CONSTANT_ENCAPSED_STRING","'mode'",678],["T_WHITESPACE"," ",678],["T_DOUBLE_ARROW","=>",678],["T_WHITESPACE"," ",678],["T_CONSTANT_ENCAPSED_STRING","'default'",678],",",["T_WHITESPACE","\n    ",678],"]",")",["T_OBJECT_OPERATOR","->",679],["T_STRING","setComponent",679],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",679],",",["T_WHITESPACE"," ",679],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",679],["T_WHITESPACE"," ",679],["T_DOUBLE_ARROW","=>",679],["T_WHITESPACE"," ",679],["T_CONSTANT_ENCAPSED_STRING","'text_textfield'",679],"]",")",["T_OBJECT_OPERATOR","->",679],["T_STRING","enable",679],"(",")",["T_OBJECT_OPERATOR","->",679],["T_STRING","save",679],"(",")",";",["T_WHITESPACE","\n\n    ",679],["T_VARIABLE","$entity",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_STRING","EntityTestBaseFieldDisplay",681],["T_DOUBLE_COLON","::",681],["T_STRING","create",681],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",681],["T_WHITESPACE"," ",681],["T_DOUBLE_ARROW","=>",681],["T_WHITESPACE"," ",681],["T_CONSTANT_ENCAPSED_STRING","'bar'",681],"]",")",";",["T_WHITESPACE","\n    ",681],["T_VARIABLE","$entity",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","save",682],"(",")",";",["T_WHITESPACE","\n\n    ",682],["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","drupalGet",684],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_base_field_display\/manage\/'",684],["T_WHITESPACE"," ",684],".",["T_WHITESPACE"," ",684],["T_VARIABLE","$entity",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","id",684],"(",")",")",";",["T_WHITESPACE","\n    ",684],["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","assertResponse",685],"(",["T_LNUMBER","200",685],")",";",["T_WHITESPACE","\n    ",685],["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","assertText",686],"(",["T_CONSTANT_ENCAPSED_STRING","'A field with multiple values'",686],")",";",["T_WHITESPACE","\n    ",686],["T_COMMENT","\/\/ Test if labels were XSS filtered.\n",687],["T_WHITESPACE","    ",688],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","assertEscaped",688],"(",["T_CONSTANT_ENCAPSED_STRING","\"<script>alert('a configurable field');<\/script>\"",688],")",";",["T_WHITESPACE","\n  ",688],"}",["T_WHITESPACE","\n\n",689],"}",["T_WHITESPACE","\n",691]]
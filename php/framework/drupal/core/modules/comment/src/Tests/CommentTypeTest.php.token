[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n",3],["T_USE","use",4],["T_WHITESPACE"," ",4],["T_STRING","Drupal",4],["T_NS_SEPARATOR","\\",4],["T_STRING","comment",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Entity",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Comment",4],";",["T_WHITESPACE","\n",4],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CommentType",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","comment",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldType",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CommentItemInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldStorageConfig",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldConfig",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","node",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Node",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Ensures that comment type functions work correctly.\n *\n * @group comment\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","CommentTypeTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","CommentTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Admin user.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountInterface\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$adminUser",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * Permissions to grant admin user.\n   *\n   * @var array\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$permissions",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",["T_WHITESPACE","\n    ",30],["T_CONSTANT_ENCAPSED_STRING","'administer comments'",31],",",["T_WHITESPACE","\n    ",31],["T_CONSTANT_ENCAPSED_STRING","'administer comment fields'",32],",",["T_WHITESPACE","\n    ",32],["T_CONSTANT_ENCAPSED_STRING","'administer comment types'",33],",",["T_WHITESPACE","\n  ",33],")",";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Sets the test up.\n   *\/",36],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","setUp",39],"(",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_STRING","parent",40],["T_DOUBLE_COLON","::",40],["T_STRING","setUp",40],"(",")",";",["T_WHITESPACE","\n\n    ",40],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalPlaceBlock",42],"(",["T_CONSTANT_ENCAPSED_STRING","'page_title_block'",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","adminUser",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","drupalCreateUser",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","permissions",44],")",";",["T_WHITESPACE","\n  ",44],"}",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * Tests creating a comment type programmatically and via a form.\n   *\/",47],["T_WHITESPACE","\n  ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","testCommentTypeCreation",50],"(",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n    ",50],["T_COMMENT","\/\/ Create a comment type programmatically.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$type",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","createCommentType",52],"(",["T_CONSTANT_ENCAPSED_STRING","'other'",52],")",";",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$comment_type",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","CommentType",54],["T_DOUBLE_COLON","::",54],["T_STRING","load",54],"(",["T_CONSTANT_ENCAPSED_STRING","'other'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertTrue",55],"(",["T_VARIABLE","$comment_type",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'The new comment type has been created.'",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_COMMENT","\/\/ Log in a test user.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","drupalLogin",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","adminUser",58],")",";",["T_WHITESPACE","\n\n    ",58],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","drupalGet",60],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/'",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_VARIABLE","$type",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","id",60],"(",")",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertResponse",61],"(",["T_LNUMBER","200",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'The new comment type can be accessed at the edit form.'",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Create a comment type via the user interface.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$edit",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_WHITESPACE","\n      ",64],["T_CONSTANT_ENCAPSED_STRING","'id'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'foo'",65],",",["T_WHITESPACE","\n      ",65],["T_CONSTANT_ENCAPSED_STRING","'label'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'title for foo'",66],",",["T_WHITESPACE","\n      ",66],["T_CONSTANT_ENCAPSED_STRING","'description'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","''",67],",",["T_WHITESPACE","\n      ",67],["T_CONSTANT_ENCAPSED_STRING","'target_entity_type_id'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'node'",68],",",["T_WHITESPACE","\n    ",68],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","drupalPostForm",70],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/types\/add'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$edit",70],",",["T_WHITESPACE"," ",70],["T_STRING","t",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",70],")",")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$comment_type",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","CommentType",71],["T_DOUBLE_COLON","::",71],["T_STRING","load",71],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertTrue",72],"(",["T_VARIABLE","$comment_type",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'The new comment type has been created.'",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Check that the comment type was created in site default language.\n",74],["T_WHITESPACE","    ",75],["T_VARIABLE","$default_langcode",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Drupal",75],["T_DOUBLE_COLON","::",75],["T_STRING","languageManager",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getDefaultLanguage",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getId",75],"(",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_VARIABLE","$comment_type",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","language",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getId",76],"(",")",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$default_langcode",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ Edit the comment-type and ensure that we cannot change the entity-type.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","drupalGet",79],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/foo'",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertNoField",80],"(",["T_CONSTANT_ENCAPSED_STRING","'target_entity_type_id'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'Entity type file not present'",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertText",81],"(",["T_STRING","t",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Target entity type'",81],")",")",";",["T_WHITESPACE","\n    ",81],["T_COMMENT","\/\/ Save the form and ensure the entity-type value is preserved even though\n",82],["T_WHITESPACE","    ",83],["T_COMMENT","\/\/ the field isn't present.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","drupalPostForm",84],"(",["T_STRING","NULL",84],",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",")",",",["T_WHITESPACE"," ",84],["T_STRING","t",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",84],")",")",";",["T_WHITESPACE","\n    ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Drupal",85],["T_DOUBLE_COLON","::",85],["T_STRING","entityManager",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getStorage",85],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_type'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","resetCache",85],"(",["T_ARRAY","array",85],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",85],")",")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$comment_type",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","CommentType",86],["T_DOUBLE_COLON","::",86],["T_STRING","load",86],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertEqual",87],"(",["T_VARIABLE","$comment_type",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getTargetEntityTypeId",87],"(",")",",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'node'",87],")",";",["T_WHITESPACE","\n  ",87],"}",["T_WHITESPACE","\n\n  ",88],["T_DOC_COMMENT","\/**\n   * Tests editing a comment type using the UI.\n   *\/",90],["T_WHITESPACE","\n  ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","testCommentTypeEditing",93],"(",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","drupalLogin",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","adminUser",94],")",";",["T_WHITESPACE","\n\n    ",94],["T_VARIABLE","$field",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","FieldConfig",96],["T_DOUBLE_COLON","::",96],["T_STRING","loadByName",96],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'comment'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'comment_body'",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertEqual",97],"(",["T_VARIABLE","$field",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getLabel",97],"(",")",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'Comment'",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'Comment body field was found.'",97],")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ Change the comment type name.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","drupalGet",100],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$edit",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_WHITESPACE","\n      ",101],["T_CONSTANT_ENCAPSED_STRING","'label'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'Bar'",102],",",["T_WHITESPACE","\n    ",102],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","drupalPostForm",104],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/comment'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$edit",104],",",["T_WHITESPACE"," ",104],["T_STRING","t",104],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",104],")",")",";",["T_WHITESPACE","\n\n    ",104],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","drupalGet",106],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertRaw",107],"(",["T_CONSTANT_ENCAPSED_STRING","'Bar'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'New name was displayed.'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","clickLink",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Manage fields'",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertUrl",109],"(",["T_NS_SEPARATOR","\\",109],["T_STRING","Drupal",109],["T_DOUBLE_COLON","::",109],["T_STRING","url",109],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.comment.field_ui_fields'",109],",",["T_WHITESPACE"," ",109],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_type'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'comment'",109],"]",",",["T_WHITESPACE"," ",109],"[",["T_CONSTANT_ENCAPSED_STRING","'absolute'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_STRING","TRUE",109],"]",")",",",["T_WHITESPACE"," ",109],"[","]",",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'Original machine name was used in URL.'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertTrue",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","cssSelect",110],"(",["T_CONSTANT_ENCAPSED_STRING","'tr#comment-body'",110],")",",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'Body field exists.'",110],")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Remove the body field.\n",112],["T_WHITESPACE","    ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","drupalPostForm",113],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/comment\/fields\/comment.comment.comment_body\/delete'",113],",",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",")",",",["T_WHITESPACE"," ",113],["T_STRING","t",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",113],")",")",";",["T_WHITESPACE","\n    ",113],["T_COMMENT","\/\/ Resave the settings for this type.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","drupalPostForm",115],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/comment'",115],",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",")",",",["T_WHITESPACE"," ",115],["T_STRING","t",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",115],")",")",";",["T_WHITESPACE","\n    ",115],["T_COMMENT","\/\/ Check that the body field doesn't exist.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","drupalGet",117],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/comment\/fields'",117],")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","assertFalse",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","cssSelect",118],"(",["T_CONSTANT_ENCAPSED_STRING","'tr#comment-body'",118],")",",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'Body field does not exist.'",118],")",";",["T_WHITESPACE","\n  ",118],"}",["T_WHITESPACE","\n\n  ",119],["T_DOC_COMMENT","\/**\n   * Tests deleting a comment type that still has content.\n   *\/",121],["T_WHITESPACE","\n  ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","testCommentTypeDeletion",124],"(",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n    ",124],["T_COMMENT","\/\/ Create a comment type programmatically.\n",125],["T_WHITESPACE","    ",126],["T_VARIABLE","$type",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","createCommentType",126],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","drupalCreateContentType",127],"(",["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'page'",127],")",")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","addDefaultCommentField",128],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'page'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'foo'",128],",",["T_WHITESPACE"," ",128],["T_STRING","CommentItemInterface",128],["T_DOUBLE_COLON","::",128],["T_STRING","OPEN",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'foo'",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$field_storage",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","FieldStorageConfig",129],["T_DOUBLE_COLON","::",129],["T_STRING","loadByName",129],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'foo'",129],")",";",["T_WHITESPACE","\n\n    ",129],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","drupalLogin",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","adminUser",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Create a node.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$node",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","Node",134],["T_DOUBLE_COLON","::",134],["T_STRING","create",134],"(",["T_ARRAY","array",134],"(",["T_WHITESPACE","\n      ",134],["T_CONSTANT_ENCAPSED_STRING","'type'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'page'",135],",",["T_WHITESPACE","\n      ",135],["T_CONSTANT_ENCAPSED_STRING","'title'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'foo'",136],",",["T_WHITESPACE","\n    ",136],")",")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$node",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","save",138],"(",")",";",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ Add a new comment of this type.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$comment",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","Comment",141],["T_DOUBLE_COLON","::",141],["T_STRING","create",141],"(",["T_ARRAY","array",141],"(",["T_WHITESPACE","\n      ",141],["T_CONSTANT_ENCAPSED_STRING","'comment_type'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'foo'",142],",",["T_WHITESPACE","\n      ",142],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'node'",143],",",["T_WHITESPACE","\n      ",143],["T_CONSTANT_ENCAPSED_STRING","'field_name'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'foo'",144],",",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$node",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","id",145],"(",")",",",["T_WHITESPACE","\n    ",145],")",")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$comment",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","save",147],"(",")",";",["T_WHITESPACE","\n\n    ",147],["T_COMMENT","\/\/ Attempt to delete the comment type, which should not be allowed.\n",149],["T_WHITESPACE","    ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","drupalGet",150],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/'",150],["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_VARIABLE","$type",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","id",150],"(",")",["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'\/delete'",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertRaw",151],"(",["T_WHITESPACE","\n      ",151],["T_STRING","t",152],"(",["T_CONSTANT_ENCAPSED_STRING","'%label is used by 1 comment on your site. You can not remove this comment type until you have removed all of the %label comments.'",152],",",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",["T_CONSTANT_ENCAPSED_STRING","'%label'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$type",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","label",152],"(",")",")",")",",",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'The comment type will not be deleted until all comments of that type are removed.'",153],["T_WHITESPACE","\n    ",153],")",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","assertRaw",155],"(",["T_WHITESPACE","\n      ",155],["T_STRING","t",156],"(",["T_CONSTANT_ENCAPSED_STRING","'%label is used by the %field field on your site. You can not remove this comment type until you have removed the field.'",156],",",["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",["T_WHITESPACE","\n        ",156],["T_CONSTANT_ENCAPSED_STRING","'%label'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'foo'",157],",",["T_WHITESPACE","\n        ",157],["T_CONSTANT_ENCAPSED_STRING","'%field'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'node.foo'",158],",",["T_WHITESPACE","\n      ",158],")",")",",",["T_WHITESPACE","\n      ",159],["T_CONSTANT_ENCAPSED_STRING","'The comment type will not be deleted until all fields of that type are removed.'",160],["T_WHITESPACE","\n    ",160],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertNoText",162],"(",["T_STRING","t",162],"(",["T_CONSTANT_ENCAPSED_STRING","'This action cannot be undone.'",162],")",",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'The comment type deletion confirmation form is not available.'",162],")",";",["T_WHITESPACE","\n\n    ",162],["T_COMMENT","\/\/ Delete the comment and the field.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$comment",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","delete",165],"(",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$field_storage",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","delete",166],"(",")",";",["T_WHITESPACE","\n    ",166],["T_COMMENT","\/\/ Attempt to delete the comment type, which should now be allowed.\n",167],["T_WHITESPACE","    ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","drupalGet",168],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/'",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_VARIABLE","$type",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","id",168],"(",")",["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'\/delete'",168],")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertRaw",169],"(",["T_WHITESPACE","\n      ",169],["T_STRING","t",170],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to delete the comment type %type?'",170],",",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$type",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","id",170],"(",")",")",")",",",["T_WHITESPACE","\n      ",170],["T_CONSTANT_ENCAPSED_STRING","'The comment type is available for deletion.'",171],["T_WHITESPACE","\n    ",171],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertText",173],"(",["T_STRING","t",173],"(",["T_CONSTANT_ENCAPSED_STRING","'This action cannot be undone.'",173],")",",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'The comment type deletion confirmation form is available.'",173],")",";",["T_WHITESPACE","\n\n    ",173],["T_COMMENT","\/\/ Test exception thrown when re-using an existing comment type.\n",175],["T_WHITESPACE","    ",176],["T_TRY","try",176],["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","addDefaultCommentField",177],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'comment'",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'bar'",177],")",";",["T_WHITESPACE","\n      ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","fail",178],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception not thrown.'",178],")",";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n    ",179],["T_CATCH","catch",180],["T_WHITESPACE"," ",180],"(",["T_NS_SEPARATOR","\\",180],["T_STRING","InvalidArgumentException",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$e",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n      ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","pass",181],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception thrown if attempting to re-use comment-type from another entity type.'",181],")",";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_COMMENT","\/\/ Delete the comment type.\n",184],["T_WHITESPACE","    ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","drupalPostForm",185],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/comment\/manage\/'",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$type",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","id",185],"(",")",["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'\/delete'",185],",",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",")",",",["T_WHITESPACE"," ",185],["T_STRING","t",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",185],")",")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertNull",186],"(",["T_STRING","CommentType",186],["T_DOUBLE_COLON","::",186],["T_STRING","load",186],"(",["T_VARIABLE","$type",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","id",186],"(",")",")",",",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'Comment type deleted.'",186],")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","assertRaw",187],"(",["T_STRING","t",187],"(",["T_CONSTANT_ENCAPSED_STRING","'The comment type %label has been deleted.'",187],",",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",["T_CONSTANT_ENCAPSED_STRING","'%label'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$type",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","label",187],"(",")",")",")",")",";",["T_WHITESPACE","\n  ",187],"}",["T_WHITESPACE","\n\n",188],"}",["T_WHITESPACE","\n",190]]
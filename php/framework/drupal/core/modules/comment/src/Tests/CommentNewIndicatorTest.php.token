[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Serialization",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Json",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LanguageInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","comment",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CommentInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Url",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","comment",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Comment",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests the 'new' indicator posted on comments.\n *\n * @group comment\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","CommentNewIndicatorTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","CommentTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Use the main node listing to test rendering on teasers.\n   *\n   * @var array\n   *\n   * @todo Remove this dependency.\n   *\/",18],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_STATIC","static",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$modules",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'views'",25],")",";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Get node \"x new comments\" metadata from the server for the current user.\n   *\n   * @param array $node_ids\n   *   An array of node IDs.\n   *\n   * @return string\n   *   The response body.\n   *\/",27],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","renderNewCommentsNodeLinks",36],"(",["T_ARRAY","array",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$node_ids",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_COMMENT","\/\/ Build POST values.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$post",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",")",";",["T_WHITESPACE","\n    ",38],["T_FOR","for",39],["T_WHITESPACE"," ",39],"(",["T_VARIABLE","$i",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_LNUMBER","0",39],";",["T_WHITESPACE"," ",39],["T_VARIABLE","$i",39],["T_WHITESPACE"," ",39],"<",["T_WHITESPACE"," ",39],["T_STRING","count",39],"(",["T_VARIABLE","$node_ids",39],")",";",["T_WHITESPACE"," ",39],["T_VARIABLE","$i",39],["T_INC","++",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n      ",39],["T_VARIABLE","$post",40],"[",["T_CONSTANT_ENCAPSED_STRING","'node_ids['",40],["T_WHITESPACE"," ",40],".",["T_WHITESPACE"," ",40],["T_VARIABLE","$i",40],["T_WHITESPACE"," ",40],".",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","']'",40],"]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$node_ids",40],"[",["T_VARIABLE","$i",40],"]",";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$post",42],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",42],"]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'comment'",42],";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Serialize POST values.\n",44],["T_WHITESPACE","    ",45],["T_FOREACH","foreach",45],["T_WHITESPACE"," ",45],"(",["T_VARIABLE","$post",45],["T_WHITESPACE"," ",45],["T_AS","as",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$key",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$value",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n      ",45],["T_COMMENT","\/\/ Encode according to application\/x-www-form-urlencoded\n",46],["T_WHITESPACE","      ",47],["T_COMMENT","\/\/ Both names and values needs to be urlencoded, according to\n",47],["T_WHITESPACE","      ",48],["T_COMMENT","\/\/ http:\/\/www.w3.org\/TR\/html4\/interact\/forms.html#h-17.13.4.1\n",48],["T_WHITESPACE","      ",49],["T_VARIABLE","$post",49],"[",["T_VARIABLE","$key",49],"]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","urlencode",49],"(",["T_VARIABLE","$key",49],")",["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'='",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_STRING","urlencode",49],"(",["T_VARIABLE","$value",49],")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$post",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","implode",51],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$post",51],")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Perform HTTP request.\n",53],["T_WHITESPACE","    ",54],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","curlExec",54],"(",["T_ARRAY","array",54],"(",["T_WHITESPACE","\n      ",54],["T_STRING","CURLOPT_URL",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Drupal",55],["T_DOUBLE_COLON","::",55],["T_STRING","url",55],"(",["T_CONSTANT_ENCAPSED_STRING","'comment.new_comments_node_links'",55],",",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",",",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","'absolute'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_STRING","TRUE",55],")",")",",",["T_WHITESPACE","\n      ",55],["T_STRING","CURLOPT_POST",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_STRING","TRUE",56],",",["T_WHITESPACE","\n      ",56],["T_STRING","CURLOPT_POSTFIELDS",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$post",57],",",["T_WHITESPACE","\n      ",57],["T_STRING","CURLOPT_HTTPHEADER",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'Accept: application\/json'",59],",",["T_WHITESPACE","\n        ",59],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/x-www-form-urlencoded'",60],",",["T_WHITESPACE","\n      ",60],")",",",["T_WHITESPACE","\n    ",61],")",")",";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Tests new comment marker.\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","testCommentNewCommentsIndicator",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_COMMENT","\/\/ Test if the right links are displayed when no comment is present for the\n",69],["T_WHITESPACE","    ",70],["T_COMMENT","\/\/ node.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","drupalLogin",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","adminUser",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","drupalGet",72],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertNoLink",73],"(",["T_STRING","t",73],"(",["T_CONSTANT_ENCAPSED_STRING","'@count comments'",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'@count'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_LNUMBER","0",73],")",")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertLink",74],"(",["T_STRING","t",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Read more'",74],")",")",";",["T_WHITESPACE","\n    ",74],["T_COMMENT","\/\/ Verify the data-history-node-last-comment-timestamp attribute, which is\n",75],["T_WHITESPACE","    ",76],["T_COMMENT","\/\/ used by the drupal.node-new-comments-link library to determine whether\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ a \"x new comments\" link might be necessary or not. We do this in\n",77],["T_WHITESPACE","    ",78],["T_COMMENT","\/\/ JavaScript to prevent breaking the render cache.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertIdentical",79],"(",["T_LNUMBER","0",79],",",["T_WHITESPACE"," ",79],["T_STRING","count",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","xpath",79],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/*[@data-history-node-last-comment-timestamp]'",79],")",")",",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'data-history-node-last-comment-timestamp attribute is not set.'",79],")",";",["T_WHITESPACE","\n\n    ",79],["T_COMMENT","\/\/ Create a new comment. This helper function may be run with different\n",81],["T_WHITESPACE","    ",82],["T_COMMENT","\/\/ comment settings so use $comment->save() to avoid complex setup.\n",82],["T_WHITESPACE","    ",83],["T_DOC_COMMENT","\/** @var \\Drupal\\comment\\CommentInterface $comment *\/",83],["T_WHITESPACE","\n    ",83],["T_VARIABLE","$comment",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","Comment",84],["T_DOUBLE_COLON","::",84],["T_STRING","create",84],"(",["T_ARRAY","array",84],"(",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'cid'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_STRING","NULL",85],",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","node",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","id",86],"(",")",",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'node'",87],",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'field_name'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'comment'",88],",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'pid'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_LNUMBER","0",89],",",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'uid'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","loggedInUser",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","id",90],"(",")",",",["T_WHITESPACE","\n      ",90],["T_CONSTANT_ENCAPSED_STRING","'status'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_STRING","CommentInterface",91],["T_DOUBLE_COLON","::",91],["T_STRING","PUBLISHED",91],",",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'subject'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","randomMachineName",92],"(",")",",",["T_WHITESPACE","\n      ",92],["T_CONSTANT_ENCAPSED_STRING","'hostname'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'127.0.0.1'",93],",",["T_WHITESPACE","\n      ",93],["T_CONSTANT_ENCAPSED_STRING","'langcode'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_STRING","LanguageInterface",94],["T_DOUBLE_COLON","::",94],["T_STRING","LANGCODE_NOT_SPECIFIED",94],",",["T_WHITESPACE","\n      ",94],["T_CONSTANT_ENCAPSED_STRING","'comment_body'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_STRING","LanguageInterface",95],["T_DOUBLE_COLON","::",95],["T_STRING","LANGCODE_NOT_SPECIFIED",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","randomMachineName",95],"(",")",")",")",",",["T_WHITESPACE","\n    ",95],")",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$comment",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","save",97],"(",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","drupalLogout",98],"(",")",";",["T_WHITESPACE","\n\n    ",98],["T_COMMENT","\/\/ Log in with 'web user' and check comment links.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","drupalLogin",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","webUser",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","drupalGet",102],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",102],")",";",["T_WHITESPACE","\n    ",102],["T_COMMENT","\/\/ Verify the data-history-node-last-comment-timestamp attribute. Given its\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ value, the drupal.node-new-comments-link library would determine that the\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ node received a comment after the user last viewed it, and hence it would\n",105],["T_WHITESPACE","    ",106],["T_COMMENT","\/\/ perform an HTTP request to render the \"new comments\" node link.\n",106],["T_WHITESPACE","    ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertIdentical",107],"(",["T_LNUMBER","1",107],",",["T_WHITESPACE"," ",107],["T_STRING","count",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","xpath",107],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/*[@data-history-node-last-comment-timestamp=\"'",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$comment",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getChangedTime",107],"(",")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'\"]'",107],")",")",",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'data-history-node-last-comment-timestamp attribute is set to the correct value.'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertIdentical",108],"(",["T_LNUMBER","1",108],",",["T_WHITESPACE"," ",108],["T_STRING","count",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","xpath",108],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/*[@data-history-node-field-name=\"comment\"]'",108],")",")",",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'data-history-node-field-name attribute is set to the correct value.'",108],")",";",["T_WHITESPACE","\n    ",108],["T_COMMENT","\/\/ The data will be pre-seeded on this particular page in drupalSettings, to\n",109],["T_WHITESPACE","    ",110],["T_COMMENT","\/\/ avoid the need for the client to make a separate request to the server.\n",110],["T_WHITESPACE","    ",111],["T_VARIABLE","$settings",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getDrupalSettings",111],"(",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertEqual",112],"(",["T_VARIABLE","$settings",112],"[",["T_CONSTANT_ENCAPSED_STRING","'history'",112],"]",",",["T_WHITESPACE"," ",112],"[",["T_CONSTANT_ENCAPSED_STRING","'lastReadTimestamps'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],"[",["T_LNUMBER","1",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_LNUMBER","0",112],"]","]",")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertEqual",113],"(",["T_VARIABLE","$settings",113],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",113],"]",",",["T_WHITESPACE"," ",113],"[",["T_WHITESPACE","\n      ",113],["T_CONSTANT_ENCAPSED_STRING","'newCommentsLinks'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],"[",["T_WHITESPACE","\n        ",114],["T_CONSTANT_ENCAPSED_STRING","'node'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],"[",["T_WHITESPACE","\n          ",115],["T_CONSTANT_ENCAPSED_STRING","'comment'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],"[",["T_WHITESPACE","\n            ",116],["T_LNUMBER","1",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],"[",["T_WHITESPACE","\n              ",117],["T_CONSTANT_ENCAPSED_STRING","'new_comment_count'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_LNUMBER","1",118],",",["T_WHITESPACE","\n              ",118],["T_CONSTANT_ENCAPSED_STRING","'first_new_comment_link'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_STRING","Url",119],["T_DOUBLE_COLON","::",119],["T_STRING","fromRoute",119],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.node.canonical'",119],",",["T_WHITESPACE"," ",119],"[",["T_CONSTANT_ENCAPSED_STRING","'node'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_LNUMBER","1",119],"]",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","setOptions",119],"(","[",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'fragment'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'new'",120],",",["T_WHITESPACE","\n              ",120],"]",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","toString",121],"(",")",",",["T_WHITESPACE","\n            ",121],"]",",",["T_WHITESPACE","\n          ",122],"]",",",["T_WHITESPACE","\n        ",123],"]",",",["T_WHITESPACE","\n      ",124],"]",",",["T_WHITESPACE","\n    ",125],"]",")",";",["T_WHITESPACE","\n    ",126],["T_COMMENT","\/\/ Pretend the data was not present in drupalSettings, i.e. test the\n",127],["T_WHITESPACE","    ",128],["T_COMMENT","\/\/ separate request to the server.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$response",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","renderNewCommentsNodeLinks",129],"(",["T_ARRAY","array",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","node",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","id",129],"(",")",")",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertResponse",130],"(",["T_LNUMBER","200",130],")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$json",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","Json",131],["T_DOUBLE_COLON","::",131],["T_STRING","decode",131],"(",["T_VARIABLE","$response",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$expected",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","node",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","id",132],"(",")",["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_WHITESPACE","\n      ",132],["T_CONSTANT_ENCAPSED_STRING","'new_comment_count'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_LNUMBER","1",133],",",["T_WHITESPACE","\n      ",133],["T_CONSTANT_ENCAPSED_STRING","'first_new_comment_link'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","node",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","url",134],"(",["T_CONSTANT_ENCAPSED_STRING","'canonical'",134],",",["T_WHITESPACE"," ",134],["T_ARRAY","array",134],"(",["T_CONSTANT_ENCAPSED_STRING","'fragment'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'new'",134],")",")",",",["T_WHITESPACE","\n    ",134],")",")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertIdentical",136],"(",["T_VARIABLE","$expected",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$json",136],")",";",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ Failing to specify node IDs for the endpoint should return a 404.\n",138],["T_WHITESPACE","    ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","renderNewCommentsNodeLinks",139],"(",["T_ARRAY","array",139],"(",")",")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertResponse",140],"(",["T_LNUMBER","404",140],")",";",["T_WHITESPACE","\n\n    ",140],["T_COMMENT","\/\/ Accessing the endpoint as the anonymous user should return a 403.\n",142],["T_WHITESPACE","    ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","drupalLogout",143],"(",")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","renderNewCommentsNodeLinks",144],"(",["T_ARRAY","array",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","node",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","id",144],"(",")",")",")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertResponse",145],"(",["T_LNUMBER","403",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","renderNewCommentsNodeLinks",146],"(",["T_ARRAY","array",146],"(",")",")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertResponse",147],"(",["T_LNUMBER","403",147],")",";",["T_WHITESPACE","\n  ",147],"}",["T_WHITESPACE","\n\n",148],"}",["T_WHITESPACE","\n",150]]
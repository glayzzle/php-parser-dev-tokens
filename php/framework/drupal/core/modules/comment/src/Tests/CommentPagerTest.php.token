[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CommentManagerInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SafeMarkup",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","node",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Node",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests paging of comments and their settings.\n *\n * @group comment\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","CommentPagerTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","CommentTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n  ",14],["T_DOC_COMMENT","\/**\n   * Confirms comment paging works correctly with flat and threaded comments.\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","testCommentPaging",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","drupalLogin",19],"(",["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","adminUser",19],")",";",["T_WHITESPACE","\n\n    ",19],["T_COMMENT","\/\/ Set comment variables.\n",21],["T_WHITESPACE","    ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","setCommentForm",22],"(",["T_STRING","TRUE",22],")",";",["T_WHITESPACE","\n    ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","setCommentSubject",23],"(",["T_STRING","TRUE",23],")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","setCommentPreview",24],"(",["T_STRING","DRUPAL_DISABLED",24],")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ Create a node and three comments.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$node",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","drupalCreateNode",27],"(",["T_ARRAY","array",27],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'article'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'promote'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_LNUMBER","1",27],")",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$comments",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$comments",29],"[","]",["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","postComment",29],"(",["T_VARIABLE","$node",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","randomMachineName",29],"(",")",",",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","randomMachineName",29],"(",")",",",["T_WHITESPACE"," ",29],["T_STRING","TRUE",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$comments",30],"[","]",["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","postComment",30],"(",["T_VARIABLE","$node",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","randomMachineName",30],"(",")",",",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","randomMachineName",30],"(",")",",",["T_WHITESPACE"," ",30],["T_STRING","TRUE",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$comments",31],"[","]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","postComment",31],"(",["T_VARIABLE","$node",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","randomMachineName",31],"(",")",",",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","randomMachineName",31],"(",")",",",["T_WHITESPACE"," ",31],["T_STRING","TRUE",31],")",";",["T_WHITESPACE","\n\n    ",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","setCommentSettings",33],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",33],",",["T_WHITESPACE"," ",33],["T_STRING","CommentManagerInterface",33],["T_DOUBLE_COLON","::",33],["T_STRING","COMMENT_MODE_FLAT",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'Comment paging changed.'",33],")",";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Set comments to one per page so that we are able to test paging without\n",35],["T_WHITESPACE","    ",36],["T_COMMENT","\/\/ needing to insert large numbers of comments.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","setCommentsPerPage",37],"(",["T_LNUMBER","1",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Check the first page of the node, and confirm the correct comments are\n",39],["T_WHITESPACE","    ",40],["T_COMMENT","\/\/ shown.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","drupalGet",41],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$node",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","id",41],"(",")",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertRaw",42],"(",["T_STRING","t",42],"(",["T_CONSTANT_ENCAPSED_STRING","'next'",42],")",",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Paging links found.'",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertTrue",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","commentExists",43],"(",["T_VARIABLE","$comments",43],"[",["T_LNUMBER","0",43],"]",")",",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'Comment 1 appears on page 1.'",43],")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","assertFalse",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","commentExists",44],"(",["T_VARIABLE","$comments",44],"[",["T_LNUMBER","1",44],"]",")",",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'Comment 2 does not appear on page 1.'",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertFalse",45],"(",["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","commentExists",45],"(",["T_VARIABLE","$comments",45],"[",["T_LNUMBER","2",45],"]",")",",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Comment 3 does not appear on page 1.'",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ Check the second page.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","drupalGet",48],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_VARIABLE","$node",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","id",48],"(",")",",",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_LNUMBER","1",48],")",")",")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertTrue",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","commentExists",49],"(",["T_VARIABLE","$comments",49],"[",["T_LNUMBER","1",49],"]",")",",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Comment 2 appears on page 2.'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertFalse",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","commentExists",50],"(",["T_VARIABLE","$comments",50],"[",["T_LNUMBER","0",50],"]",")",",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'Comment 1 does not appear on page 2.'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertFalse",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","commentExists",51],"(",["T_VARIABLE","$comments",51],"[",["T_LNUMBER","2",51],"]",")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Comment 3 does not appear on page 2.'",51],")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Check the third page.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalGet",54],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_VARIABLE","$node",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","id",54],"(",")",",",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_LNUMBER","2",54],")",")",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertTrue",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","commentExists",55],"(",["T_VARIABLE","$comments",55],"[",["T_LNUMBER","2",55],"]",")",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'Comment 3 appears on page 3.'",55],")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertFalse",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","commentExists",56],"(",["T_VARIABLE","$comments",56],"[",["T_LNUMBER","0",56],"]",")",",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Comment 1 does not appear on page 3.'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertFalse",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","commentExists",57],"(",["T_VARIABLE","$comments",57],"[",["T_LNUMBER","1",57],"]",")",",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Comment 2 does not appear on page 3.'",57],")",";",["T_WHITESPACE","\n\n    ",57],["T_COMMENT","\/\/ Post a reply to the oldest comment and test again.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$oldest_comment",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","reset",60],"(",["T_VARIABLE","$comments",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","drupalGet",61],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",61],["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_VARIABLE","$node",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","id",61],"(",")",["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'\/comment\/'",61],["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_VARIABLE","$oldest_comment",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","id",61],"(",")",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$reply",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","postComment",62],"(",["T_STRING","NULL",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","randomMachineName",62],"(",")",",",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","randomMachineName",62],"(",")",",",["T_WHITESPACE"," ",62],["T_STRING","TRUE",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setCommentsPerPage",64],"(",["T_LNUMBER","2",64],")",";",["T_WHITESPACE","\n    ",64],["T_COMMENT","\/\/ We are still in flat view - the replies should not be on the first page,\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ even though they are replies to the oldest comment.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","drupalGet",67],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",67],["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_VARIABLE","$node",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","id",67],"(",")",",",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_LNUMBER","0",67],")",")",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertFalse",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","commentExists",68],"(",["T_VARIABLE","$reply",68],",",["T_WHITESPACE"," ",68],["T_STRING","TRUE",68],")",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'In flat mode, reply does not appear on page 1.'",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ If we switch to threaded mode, the replies on the oldest comment\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ should be bumped to the first page and comment 6 should be bumped\n",71],["T_WHITESPACE","    ",72],["T_COMMENT","\/\/ to the second page.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","setCommentSettings",73],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",73],",",["T_WHITESPACE"," ",73],["T_STRING","CommentManagerInterface",73],["T_DOUBLE_COLON","::",73],["T_STRING","COMMENT_MODE_THREADED",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'Switched to threaded mode.'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","drupalGet",74],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_VARIABLE","$node",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","id",74],"(",")",",",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_LNUMBER","0",74],")",")",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertTrue",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","commentExists",75],"(",["T_VARIABLE","$reply",75],",",["T_WHITESPACE"," ",75],["T_STRING","TRUE",75],")",",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'In threaded mode, reply appears on page 1.'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertFalse",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","commentExists",76],"(",["T_VARIABLE","$comments",76],"[",["T_LNUMBER","1",76],"]",")",",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'In threaded mode, comment 2 has been bumped off of page 1.'",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ If (# replies > # comments per page) in threaded expanded view,\n",78],["T_WHITESPACE","    ",79],["T_COMMENT","\/\/ the overage should be bumped.\n",79],["T_WHITESPACE","    ",80],["T_VARIABLE","$reply2",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","postComment",80],"(",["T_STRING","NULL",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","randomMachineName",80],"(",")",",",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","randomMachineName",80],"(",")",",",["T_WHITESPACE"," ",80],["T_STRING","TRUE",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","drupalGet",81],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$node",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","id",81],"(",")",",",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","0",81],")",")",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertFalse",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","commentExists",82],"(",["T_VARIABLE","$reply2",82],",",["T_WHITESPACE"," ",82],["T_STRING","TRUE",82],")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'In threaded mode where # replies > # comments per page, the newest reply does not appear on page 1.'",82],")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Test that the page build process does not somehow generate errors when\n",84],["T_WHITESPACE","    ",85],["T_COMMENT","\/\/ # comments per page is set to 0.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setCommentsPerPage",86],"(",["T_LNUMBER","0",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","drupalGet",87],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_VARIABLE","$node",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","id",87],"(",")",",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_LNUMBER","0",87],")",")",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertFalse",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","commentExists",88],"(",["T_VARIABLE","$reply2",88],",",["T_WHITESPACE"," ",88],["T_STRING","TRUE",88],")",",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'Threaded mode works correctly when comments per page is 0.'",88],")",";",["T_WHITESPACE","\n\n    ",88],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","drupalLogout",90],"(",")",";",["T_WHITESPACE","\n  ",90],"}",["T_WHITESPACE","\n\n  ",91],["T_DOC_COMMENT","\/**\n   * Confirms comment paging works correctly with flat and threaded comments.\n   *\/",93],["T_WHITESPACE","\n  ",95],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","testCommentPermalink",96],"(",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","drupalLogin",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","adminUser",97],")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ Set comment variables.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","setCommentForm",100],"(",["T_STRING","TRUE",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","setCommentSubject",101],"(",["T_STRING","TRUE",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","setCommentPreview",102],"(",["T_STRING","DRUPAL_DISABLED",102],")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Create a node and three comments.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$node",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","drupalCreateNode",105],"(",["T_ARRAY","array",105],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'article'",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'promote'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_LNUMBER","1",105],")",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$comments",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$comments",107],"[","]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","postComment",107],"(",["T_VARIABLE","$node",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'comment 1: '",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","randomMachineName",107],"(",")",",",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","randomMachineName",107],"(",")",",",["T_WHITESPACE"," ",107],["T_STRING","TRUE",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$comments",108],"[","]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","postComment",108],"(",["T_VARIABLE","$node",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'comment 2: '",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","randomMachineName",108],"(",")",",",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","randomMachineName",108],"(",")",",",["T_WHITESPACE"," ",108],["T_STRING","TRUE",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$comments",109],"[","]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","postComment",109],"(",["T_VARIABLE","$node",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'comment 3: '",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","randomMachineName",109],"(",")",",",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","randomMachineName",109],"(",")",",",["T_WHITESPACE"," ",109],["T_STRING","TRUE",109],")",";",["T_WHITESPACE","\n\n    ",109],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","setCommentSettings",111],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",111],",",["T_WHITESPACE"," ",111],["T_STRING","CommentManagerInterface",111],["T_DOUBLE_COLON","::",111],["T_STRING","COMMENT_MODE_FLAT",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'Comment paging changed.'",111],")",";",["T_WHITESPACE","\n\n    ",111],["T_COMMENT","\/\/ Set comments to one per page so that we are able to test paging without\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ needing to insert large numbers of comments.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setCommentsPerPage",115],"(",["T_LNUMBER","1",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Navigate to each comment permalink as anonymous and assert it appears on\n",117],["T_WHITESPACE","    ",118],["T_COMMENT","\/\/ the page.\n",118],["T_WHITESPACE","    ",119],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$comments",119],["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$index",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$comment",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n      ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","drupalGet",120],"(",["T_VARIABLE","$comment",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","toUrl",120],"(",")",")",";",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertTrue",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","commentExists",121],"(",["T_VARIABLE","$comment",121],")",",",["T_WHITESPACE"," ",121],["T_STRING","sprintf",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment %d appears on page %d.'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$index",121],["T_WHITESPACE"," ",121],"+",["T_WHITESPACE"," ",121],["T_LNUMBER","1",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$index",121],["T_WHITESPACE"," ",121],"+",["T_WHITESPACE"," ",121],["T_LNUMBER","1",121],")",")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n  ",122],"}",["T_WHITESPACE","\n\n  ",123],["T_DOC_COMMENT","\/**\n   * Tests comment ordering and threading.\n   *\/",125],["T_WHITESPACE","\n  ",127],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","testCommentOrderingThreading",128],"(",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","drupalLogin",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","adminUser",129],")",";",["T_WHITESPACE","\n\n    ",129],["T_COMMENT","\/\/ Set comment variables.\n",131],["T_WHITESPACE","    ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setCommentForm",132],"(",["T_STRING","TRUE",132],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setCommentSubject",133],"(",["T_STRING","TRUE",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","setCommentPreview",134],"(",["T_STRING","DRUPAL_DISABLED",134],")",";",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ Display all the comments on the same page.\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","setCommentsPerPage",137],"(",["T_LNUMBER","1000",137],")",";",["T_WHITESPACE","\n\n    ",137],["T_COMMENT","\/\/ Create a node and three comments.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$node",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","drupalCreateNode",140],"(",["T_ARRAY","array",140],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'article'",140],",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'promote'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_LNUMBER","1",140],")",")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$comments",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$comments",142],"[","]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","postComment",142],"(",["T_VARIABLE","$node",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","randomMachineName",142],"(",")",",",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","randomMachineName",142],"(",")",",",["T_WHITESPACE"," ",142],["T_STRING","TRUE",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$comments",143],"[","]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","postComment",143],"(",["T_VARIABLE","$node",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","randomMachineName",143],"(",")",",",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","randomMachineName",143],"(",")",",",["T_WHITESPACE"," ",143],["T_STRING","TRUE",143],")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$comments",144],"[","]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","postComment",144],"(",["T_VARIABLE","$node",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","randomMachineName",144],"(",")",",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","randomMachineName",144],"(",")",",",["T_WHITESPACE"," ",144],["T_STRING","TRUE",144],")",";",["T_WHITESPACE","\n\n    ",144],["T_COMMENT","\/\/ Post a reply to the second comment.\n",146],["T_WHITESPACE","    ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","drupalGet",147],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_VARIABLE","$node",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","id",147],"(",")",["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'\/comment\/'",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_VARIABLE","$comments",147],"[",["T_LNUMBER","1",147],"]",["T_OBJECT_OPERATOR","->",147],["T_STRING","id",147],"(",")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$comments",148],"[","]",["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","postComment",148],"(",["T_STRING","NULL",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","randomMachineName",148],"(",")",",",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","randomMachineName",148],"(",")",",",["T_WHITESPACE"," ",148],["T_STRING","TRUE",148],")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ Post a reply to the first comment.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","drupalGet",151],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",151],["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_VARIABLE","$node",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","id",151],"(",")",["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'\/comment\/'",151],["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_VARIABLE","$comments",151],"[",["T_LNUMBER","0",151],"]",["T_OBJECT_OPERATOR","->",151],["T_STRING","id",151],"(",")",")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$comments",152],"[","]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","postComment",152],"(",["T_STRING","NULL",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","randomMachineName",152],"(",")",",",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","randomMachineName",152],"(",")",",",["T_WHITESPACE"," ",152],["T_STRING","TRUE",152],")",";",["T_WHITESPACE","\n\n    ",152],["T_COMMENT","\/\/ Post a reply to the last comment.\n",154],["T_WHITESPACE","    ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","drupalGet",155],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_VARIABLE","$node",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","id",155],"(",")",["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'\/comment\/'",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_VARIABLE","$comments",155],"[",["T_LNUMBER","2",155],"]",["T_OBJECT_OPERATOR","->",155],["T_STRING","id",155],"(",")",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$comments",156],"[","]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","postComment",156],"(",["T_STRING","NULL",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","randomMachineName",156],"(",")",",",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","randomMachineName",156],"(",")",",",["T_WHITESPACE"," ",156],["T_STRING","TRUE",156],")",";",["T_WHITESPACE","\n\n    ",156],["T_COMMENT","\/\/ Post a reply to the second comment.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","drupalGet",159],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$node",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","id",159],"(",")",["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'\/comment\/'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$comments",159],"[",["T_LNUMBER","3",159],"]",["T_OBJECT_OPERATOR","->",159],["T_STRING","id",159],"(",")",")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$comments",160],"[","]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","postComment",160],"(",["T_STRING","NULL",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","randomMachineName",160],"(",")",",",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","randomMachineName",160],"(",")",",",["T_WHITESPACE"," ",160],["T_STRING","TRUE",160],")",";",["T_WHITESPACE","\n\n    ",160],["T_COMMENT","\/\/ At this point, the comment tree is:\n",162],["T_WHITESPACE","    ",163],["T_COMMENT","\/\/ - 0\n",163],["T_WHITESPACE","    ",164],["T_COMMENT","\/\/   - 4\n",164],["T_WHITESPACE","    ",165],["T_COMMENT","\/\/ - 1\n",165],["T_WHITESPACE","    ",166],["T_COMMENT","\/\/   - 3\n",166],["T_WHITESPACE","    ",167],["T_COMMENT","\/\/     - 6\n",167],["T_WHITESPACE","    ",168],["T_COMMENT","\/\/ - 2\n",168],["T_WHITESPACE","    ",169],["T_COMMENT","\/\/   - 5\n",169],["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setCommentSettings",171],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",171],",",["T_WHITESPACE"," ",171],["T_STRING","CommentManagerInterface",171],["T_DOUBLE_COLON","::",171],["T_STRING","COMMENT_MODE_FLAT",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'Comment paging changed.'",171],")",";",["T_WHITESPACE","\n\n    ",171],["T_VARIABLE","$expected_order",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_WHITESPACE","\n      ",173],["T_LNUMBER","0",174],",",["T_WHITESPACE","\n      ",174],["T_LNUMBER","1",175],",",["T_WHITESPACE","\n      ",175],["T_LNUMBER","2",176],",",["T_WHITESPACE","\n      ",176],["T_LNUMBER","3",177],",",["T_WHITESPACE","\n      ",177],["T_LNUMBER","4",178],",",["T_WHITESPACE","\n      ",178],["T_LNUMBER","5",179],",",["T_WHITESPACE","\n      ",179],["T_LNUMBER","6",180],",",["T_WHITESPACE","\n    ",180],")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","drupalGet",182],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_VARIABLE","$node",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","id",182],"(",")",")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertCommentOrder",183],"(",["T_VARIABLE","$comments",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$expected_order",183],")",";",["T_WHITESPACE","\n\n    ",183],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","setCommentSettings",185],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",185],",",["T_WHITESPACE"," ",185],["T_STRING","CommentManagerInterface",185],["T_DOUBLE_COLON","::",185],["T_STRING","COMMENT_MODE_THREADED",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'Switched to threaded mode.'",185],")",";",["T_WHITESPACE","\n\n    ",185],["T_VARIABLE","$expected_order",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",["T_WHITESPACE","\n      ",187],["T_LNUMBER","0",188],",",["T_WHITESPACE","\n      ",188],["T_LNUMBER","4",189],",",["T_WHITESPACE","\n      ",189],["T_LNUMBER","1",190],",",["T_WHITESPACE","\n      ",190],["T_LNUMBER","3",191],",",["T_WHITESPACE","\n      ",191],["T_LNUMBER","6",192],",",["T_WHITESPACE","\n      ",192],["T_LNUMBER","2",193],",",["T_WHITESPACE","\n      ",193],["T_LNUMBER","5",194],",",["T_WHITESPACE","\n    ",194],")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","drupalGet",196],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_VARIABLE","$node",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","id",196],"(",")",")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertCommentOrder",197],"(",["T_VARIABLE","$comments",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$expected_order",197],")",";",["T_WHITESPACE","\n  ",197],"}",["T_WHITESPACE","\n\n  ",198],["T_DOC_COMMENT","\/**\n   * Asserts that the comments are displayed in the correct order.\n   *\n   * @param \\Drupal\\comment\\CommentInterface[] $comments\n   *   An array of comments, must be of the type CommentInterface.\n   * @param array $expected_order\n   *   An array of keys from $comments describing the expected order.\n   *\/",200],["T_WHITESPACE","\n  ",207],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","assertCommentOrder",208],"(",["T_ARRAY","array",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$comments",208],",",["T_WHITESPACE"," ",208],["T_ARRAY","array",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$expected_order",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$expected_cids",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_ARRAY","array",209],"(",")",";",["T_WHITESPACE","\n\n    ",209],["T_COMMENT","\/\/ First, rekey the expected order by cid.\n",211],["T_WHITESPACE","    ",212],["T_FOREACH","foreach",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$expected_order",212],["T_WHITESPACE"," ",212],["T_AS","as",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$key",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n      ",212],["T_VARIABLE","$expected_cids",213],"[","]",["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$comments",213],"[",["T_VARIABLE","$key",213],"]",["T_OBJECT_OPERATOR","->",213],["T_STRING","id",213],"(",")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_VARIABLE","$comment_anchors",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","xpath",216],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/a[starts-with(@id,\"comment-\")]'",216],")",";",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$result_order",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],"(",")",";",["T_WHITESPACE","\n    ",217],["T_FOREACH","foreach",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$comment_anchors",218],["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$anchor",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n      ",218],["T_VARIABLE","$result_order",219],"[","]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","substr",219],"(",["T_VARIABLE","$anchor",219],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",219],"]",",",["T_WHITESPACE"," ",219],["T_LNUMBER","8",219],")",";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n    ",220],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","assertEqual",221],"(",["T_VARIABLE","$expected_cids",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$result_order",221],",",["T_WHITESPACE"," ",221],["T_STRING","format_string",221],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment order: expected @expected, returned @returned.'",221],",",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],"(",["T_CONSTANT_ENCAPSED_STRING","'@expected'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_STRING","implode",221],"(",["T_CONSTANT_ENCAPSED_STRING","','",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$expected_cids",221],")",",",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'@returned'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_STRING","implode",221],"(",["T_CONSTANT_ENCAPSED_STRING","','",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$result_order",221],")",")",")",")",";",["T_WHITESPACE","\n  ",221],"}",["T_WHITESPACE","\n\n  ",222],["T_DOC_COMMENT","\/**\n   * Tests calculation of first page with new comment.\n   *\/",224],["T_WHITESPACE","\n  ",226],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","testCommentNewPageIndicator",227],"(",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","drupalLogin",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","adminUser",228],")",";",["T_WHITESPACE","\n\n    ",228],["T_COMMENT","\/\/ Set comment variables.\n",230],["T_WHITESPACE","    ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setCommentForm",231],"(",["T_STRING","TRUE",231],")",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","setCommentSubject",232],"(",["T_STRING","TRUE",232],")",";",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","setCommentPreview",233],"(",["T_STRING","DRUPAL_DISABLED",233],")",";",["T_WHITESPACE","\n\n    ",233],["T_COMMENT","\/\/ Set comments to one per page so that we are able to test paging without\n",235],["T_WHITESPACE","    ",236],["T_COMMENT","\/\/ needing to insert large numbers of comments.\n",236],["T_WHITESPACE","    ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","setCommentsPerPage",237],"(",["T_LNUMBER","1",237],")",";",["T_WHITESPACE","\n\n    ",237],["T_COMMENT","\/\/ Create a node and three comments.\n",239],["T_WHITESPACE","    ",240],["T_VARIABLE","$node",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","drupalCreateNode",240],"(",["T_ARRAY","array",240],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'article'",240],",",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'promote'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_LNUMBER","1",240],")",")",";",["T_WHITESPACE","\n    ",240],["T_VARIABLE","$comments",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_ARRAY","array",241],"(",")",";",["T_WHITESPACE","\n    ",241],["T_VARIABLE","$comments",242],"[","]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","postComment",242],"(",["T_VARIABLE","$node",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","randomMachineName",242],"(",")",",",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","randomMachineName",242],"(",")",",",["T_WHITESPACE"," ",242],["T_STRING","TRUE",242],")",";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$comments",243],"[","]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","postComment",243],"(",["T_VARIABLE","$node",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","randomMachineName",243],"(",")",",",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","randomMachineName",243],"(",")",",",["T_WHITESPACE"," ",243],["T_STRING","TRUE",243],")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$comments",244],"[","]",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","postComment",244],"(",["T_VARIABLE","$node",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","randomMachineName",244],"(",")",",",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","randomMachineName",244],"(",")",",",["T_WHITESPACE"," ",244],["T_STRING","TRUE",244],")",";",["T_WHITESPACE","\n\n    ",244],["T_COMMENT","\/\/ Post a reply to the second comment.\n",246],["T_WHITESPACE","    ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","drupalGet",247],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$node",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","id",247],"(",")",["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'\/comment\/'",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$comments",247],"[",["T_LNUMBER","1",247],"]",["T_OBJECT_OPERATOR","->",247],["T_STRING","id",247],"(",")",")",";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$comments",248],"[","]",["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","postComment",248],"(",["T_STRING","NULL",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","randomMachineName",248],"(",")",",",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","randomMachineName",248],"(",")",",",["T_WHITESPACE"," ",248],["T_STRING","TRUE",248],")",";",["T_WHITESPACE","\n\n    ",248],["T_COMMENT","\/\/ Post a reply to the first comment.\n",250],["T_WHITESPACE","    ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","drupalGet",251],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_VARIABLE","$node",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","id",251],"(",")",["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'\/comment\/'",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_VARIABLE","$comments",251],"[",["T_LNUMBER","0",251],"]",["T_OBJECT_OPERATOR","->",251],["T_STRING","id",251],"(",")",")",";",["T_WHITESPACE","\n    ",251],["T_VARIABLE","$comments",252],"[","]",["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","postComment",252],"(",["T_STRING","NULL",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","randomMachineName",252],"(",")",",",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","randomMachineName",252],"(",")",",",["T_WHITESPACE"," ",252],["T_STRING","TRUE",252],")",";",["T_WHITESPACE","\n\n    ",252],["T_COMMENT","\/\/ Post a reply to the last comment.\n",254],["T_WHITESPACE","    ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","drupalGet",255],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",255],["T_WHITESPACE"," ",255],".",["T_WHITESPACE"," ",255],["T_VARIABLE","$node",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","id",255],"(",")",["T_WHITESPACE"," ",255],".",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'\/comment\/'",255],["T_WHITESPACE"," ",255],".",["T_WHITESPACE"," ",255],["T_VARIABLE","$comments",255],"[",["T_LNUMBER","2",255],"]",["T_OBJECT_OPERATOR","->",255],["T_STRING","id",255],"(",")",")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$comments",256],"[","]",["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","postComment",256],"(",["T_STRING","NULL",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","randomMachineName",256],"(",")",",",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","randomMachineName",256],"(",")",",",["T_WHITESPACE"," ",256],["T_STRING","TRUE",256],")",";",["T_WHITESPACE","\n\n    ",256],["T_COMMENT","\/\/ At this point, the comment tree is:\n",258],["T_WHITESPACE","    ",259],["T_COMMENT","\/\/ - 0\n",259],["T_WHITESPACE","    ",260],["T_COMMENT","\/\/   - 4\n",260],["T_WHITESPACE","    ",261],["T_COMMENT","\/\/ - 1\n",261],["T_WHITESPACE","    ",262],["T_COMMENT","\/\/   - 3\n",262],["T_WHITESPACE","    ",263],["T_COMMENT","\/\/ - 2\n",263],["T_WHITESPACE","    ",264],["T_COMMENT","\/\/   - 5\n",264],["T_WHITESPACE","\n    ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","setCommentSettings",266],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",266],",",["T_WHITESPACE"," ",266],["T_STRING","CommentManagerInterface",266],["T_DOUBLE_COLON","::",266],["T_STRING","COMMENT_MODE_FLAT",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'Comment paging changed.'",266],")",";",["T_WHITESPACE","\n\n    ",266],["T_VARIABLE","$expected_pages",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",["T_WHITESPACE","\n      ",268],["T_LNUMBER","1",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_LNUMBER","5",269],",",["T_WHITESPACE"," ",269],["T_COMMENT","\/\/ Page of comment 5\n",269],["T_WHITESPACE","      ",270],["T_LNUMBER","2",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_LNUMBER","4",270],",",["T_WHITESPACE"," ",270],["T_COMMENT","\/\/ Page of comment 4\n",270],["T_WHITESPACE","      ",271],["T_LNUMBER","3",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_LNUMBER","3",271],",",["T_WHITESPACE"," ",271],["T_COMMENT","\/\/ Page of comment 3\n",271],["T_WHITESPACE","      ",272],["T_LNUMBER","4",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_LNUMBER","2",272],",",["T_WHITESPACE"," ",272],["T_COMMENT","\/\/ Page of comment 2\n",272],["T_WHITESPACE","      ",273],["T_LNUMBER","5",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_LNUMBER","1",273],",",["T_WHITESPACE"," ",273],["T_COMMENT","\/\/ Page of comment 1\n",273],["T_WHITESPACE","      ",274],["T_LNUMBER","6",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_LNUMBER","0",274],",",["T_WHITESPACE"," ",274],["T_COMMENT","\/\/ Page of comment 0\n",274],["T_WHITESPACE","    ",275],")",";",["T_WHITESPACE","\n\n    ",275],["T_VARIABLE","$node",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","Node",277],["T_DOUBLE_COLON","::",277],["T_STRING","load",277],"(",["T_VARIABLE","$node",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","id",277],"(",")",")",";",["T_WHITESPACE","\n    ",277],["T_FOREACH","foreach",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$expected_pages",278],["T_WHITESPACE"," ",278],["T_AS","as",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$new_replies",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$expected_page",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n      ",278],["T_VARIABLE","$returned_page",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Drupal",279],["T_DOUBLE_COLON","::",279],["T_STRING","entityManager",279],"(",")",["T_OBJECT_OPERATOR","->",279],["T_STRING","getStorage",279],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",279],")",["T_WHITESPACE","\n        ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","getNewCommentPageNumber",280],"(",["T_VARIABLE","$node",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","get",280],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",280],")",["T_OBJECT_OPERATOR","->",280],["T_STRING","comment_count",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$new_replies",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$node",280],",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'comment'",280],")",";",["T_WHITESPACE","\n      ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","assertIdentical",281],"(",["T_VARIABLE","$expected_page",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$returned_page",281],",",["T_WHITESPACE"," ",281],["T_STRING","format_string",281],"(",["T_CONSTANT_ENCAPSED_STRING","'Flat mode, @new replies: expected page @expected, returned page @returned.'",281],",",["T_WHITESPACE"," ",281],["T_ARRAY","array",281],"(",["T_CONSTANT_ENCAPSED_STRING","'@new'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$new_replies",281],",",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'@expected'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$expected_page",281],",",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'@returned'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$returned_page",281],")",")",")",";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","setCommentSettings",284],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",284],",",["T_WHITESPACE"," ",284],["T_STRING","CommentManagerInterface",284],["T_DOUBLE_COLON","::",284],["T_STRING","COMMENT_MODE_THREADED",284],",",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'Switched to threaded mode.'",284],")",";",["T_WHITESPACE","\n\n    ",284],["T_VARIABLE","$expected_pages",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_ARRAY","array",286],"(",["T_WHITESPACE","\n      ",286],["T_LNUMBER","1",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_LNUMBER","5",287],",",["T_WHITESPACE"," ",287],["T_COMMENT","\/\/ Page of comment 5\n",287],["T_WHITESPACE","      ",288],["T_LNUMBER","2",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_LNUMBER","1",288],",",["T_WHITESPACE"," ",288],["T_COMMENT","\/\/ Page of comment 4\n",288],["T_WHITESPACE","      ",289],["T_LNUMBER","3",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_LNUMBER","1",289],",",["T_WHITESPACE"," ",289],["T_COMMENT","\/\/ Page of comment 4\n",289],["T_WHITESPACE","      ",290],["T_LNUMBER","4",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_LNUMBER","1",290],",",["T_WHITESPACE"," ",290],["T_COMMENT","\/\/ Page of comment 4\n",290],["T_WHITESPACE","      ",291],["T_LNUMBER","5",291],["T_WHITESPACE"," ",291],["T_DOUBLE_ARROW","=>",291],["T_WHITESPACE"," ",291],["T_LNUMBER","1",291],",",["T_WHITESPACE"," ",291],["T_COMMENT","\/\/ Page of comment 4\n",291],["T_WHITESPACE","      ",292],["T_LNUMBER","6",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_LNUMBER","0",292],",",["T_WHITESPACE"," ",292],["T_COMMENT","\/\/ Page of comment 0\n",292],["T_WHITESPACE","    ",293],")",";",["T_WHITESPACE","\n\n    ",293],["T_NS_SEPARATOR","\\",295],["T_STRING","Drupal",295],["T_DOUBLE_COLON","::",295],["T_STRING","entityManager",295],"(",")",["T_OBJECT_OPERATOR","->",295],["T_STRING","getStorage",295],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",295],")",["T_OBJECT_OPERATOR","->",295],["T_STRING","resetCache",295],"(",["T_ARRAY","array",295],"(",["T_VARIABLE","$node",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","id",295],"(",")",")",")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$node",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","Node",296],["T_DOUBLE_COLON","::",296],["T_STRING","load",296],"(",["T_VARIABLE","$node",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","id",296],"(",")",")",";",["T_WHITESPACE","\n    ",296],["T_FOREACH","foreach",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$expected_pages",297],["T_WHITESPACE"," ",297],["T_AS","as",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$new_replies",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$expected_page",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n      ",297],["T_VARIABLE","$returned_page",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_NS_SEPARATOR","\\",298],["T_STRING","Drupal",298],["T_DOUBLE_COLON","::",298],["T_STRING","entityManager",298],"(",")",["T_OBJECT_OPERATOR","->",298],["T_STRING","getStorage",298],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",298],")",["T_WHITESPACE","\n        ",298],["T_OBJECT_OPERATOR","->",299],["T_STRING","getNewCommentPageNumber",299],"(",["T_VARIABLE","$node",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","get",299],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",299],")",["T_OBJECT_OPERATOR","->",299],["T_STRING","comment_count",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$new_replies",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$node",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'comment'",299],")",";",["T_WHITESPACE","\n      ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","assertEqual",300],"(",["T_VARIABLE","$expected_page",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$returned_page",300],",",["T_WHITESPACE"," ",300],["T_STRING","format_string",300],"(",["T_CONSTANT_ENCAPSED_STRING","'Threaded mode, @new replies: expected page @expected, returned page @returned.'",300],",",["T_WHITESPACE"," ",300],["T_ARRAY","array",300],"(",["T_CONSTANT_ENCAPSED_STRING","'@new'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$new_replies",300],",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'@expected'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$expected_page",300],",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'@returned'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$returned_page",300],")",")",")",";",["T_WHITESPACE","\n    ",300],"}",["T_WHITESPACE","\n  ",301],"}",["T_WHITESPACE","\n\n  ",302],["T_DOC_COMMENT","\/**\n   * Confirms comment paging works correctly with two pagers.\n   *\/",304],["T_WHITESPACE","\n  ",306],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","testTwoPagers",307],"(",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n    ",307],["T_COMMENT","\/\/ Add another field to article content-type.\n",308],["T_WHITESPACE","    ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","addDefaultCommentField",309],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",309],",",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'article'",309],",",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'comment_2'",309],")",";",["T_WHITESPACE","\n    ",309],["T_COMMENT","\/\/ Set default to display comment list with unique pager id.\n",310],["T_WHITESPACE","    ",311],["T_STRING","entity_get_display",311],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",311],",",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'article'",311],",",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'default'",311],")",["T_WHITESPACE","\n      ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","setComponent",312],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_2'",312],",",["T_WHITESPACE"," ",312],["T_ARRAY","array",312],"(",["T_WHITESPACE","\n        ",312],["T_CONSTANT_ENCAPSED_STRING","'label'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'hidden'",313],",",["T_WHITESPACE","\n        ",313],["T_CONSTANT_ENCAPSED_STRING","'type'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'comment_default'",314],",",["T_WHITESPACE","\n        ",314],["T_CONSTANT_ENCAPSED_STRING","'weight'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_LNUMBER","30",315],",",["T_WHITESPACE","\n        ",315],["T_CONSTANT_ENCAPSED_STRING","'settings'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_ARRAY","array",316],"(",["T_WHITESPACE","\n          ",316],["T_CONSTANT_ENCAPSED_STRING","'pager_id'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_LNUMBER","1",317],",",["T_WHITESPACE","\n          ",317],["T_CONSTANT_ENCAPSED_STRING","'view_mode'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'default'",318],",",["T_WHITESPACE","\n        ",318],")",["T_WHITESPACE","\n      ",319],")",")",["T_WHITESPACE","\n      ",320],["T_OBJECT_OPERATOR","->",321],["T_STRING","save",321],"(",")",";",["T_WHITESPACE","\n\n    ",321],["T_COMMENT","\/\/ Make sure pager appears in formatter summary and settings form.\n",323],["T_WHITESPACE","    ",324],["T_VARIABLE","$account",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","drupalCreateUser",324],"(",["T_ARRAY","array",324],"(",["T_CONSTANT_ENCAPSED_STRING","'administer node display'",324],")",")",";",["T_WHITESPACE","\n    ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","drupalLogin",325],"(",["T_VARIABLE","$account",325],")",";",["T_WHITESPACE","\n    ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","drupalGet",326],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/article\/display'",326],")",";",["T_WHITESPACE","\n    ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","assertNoText",327],"(",["T_STRING","t",327],"(",["T_CONSTANT_ENCAPSED_STRING","'Pager ID: @id'",327],",",["T_WHITESPACE"," ",327],["T_ARRAY","array",327],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",327],["T_WHITESPACE"," ",327],["T_DOUBLE_ARROW","=>",327],["T_WHITESPACE"," ",327],["T_LNUMBER","0",327],")",")",",",["T_WHITESPACE"," ",327],["T_CONSTANT_ENCAPSED_STRING","'No summary for standard pager'",327],")",";",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","assertText",328],"(",["T_STRING","t",328],"(",["T_CONSTANT_ENCAPSED_STRING","'Pager ID: @id'",328],",",["T_WHITESPACE"," ",328],["T_ARRAY","array",328],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_LNUMBER","1",328],")",")",")",";",["T_WHITESPACE","\n    ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","drupalPostAjaxForm",329],"(",["T_STRING","NULL",329],",",["T_WHITESPACE"," ",329],["T_ARRAY","array",329],"(",")",",",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'comment_settings_edit'",329],")",";",["T_WHITESPACE","\n    ",329],["T_COMMENT","\/\/ Change default pager to 2.\n",330],["T_WHITESPACE","    ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","drupalPostForm",331],"(",["T_STRING","NULL",331],",",["T_WHITESPACE"," ",331],["T_ARRAY","array",331],"(",["T_CONSTANT_ENCAPSED_STRING","'fields[comment][settings_edit_form][settings][pager_id]'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_LNUMBER","2",331],")",",",["T_WHITESPACE"," ",331],["T_STRING","t",331],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",331],")",")",";",["T_WHITESPACE","\n    ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","assertText",332],"(",["T_STRING","t",332],"(",["T_CONSTANT_ENCAPSED_STRING","'Pager ID: @id'",332],",",["T_WHITESPACE"," ",332],["T_ARRAY","array",332],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_LNUMBER","2",332],")",")",")",";",["T_WHITESPACE","\n    ",332],["T_COMMENT","\/\/ Revert the changes.\n",333],["T_WHITESPACE","    ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","drupalPostAjaxForm",334],"(",["T_STRING","NULL",334],",",["T_WHITESPACE"," ",334],["T_ARRAY","array",334],"(",")",",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'comment_settings_edit'",334],")",";",["T_WHITESPACE","\n    ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","drupalPostForm",335],"(",["T_STRING","NULL",335],",",["T_WHITESPACE"," ",335],["T_ARRAY","array",335],"(",["T_CONSTANT_ENCAPSED_STRING","'fields[comment][settings_edit_form][settings][pager_id]'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_LNUMBER","0",335],")",",",["T_WHITESPACE"," ",335],["T_STRING","t",335],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",335],")",")",";",["T_WHITESPACE","\n    ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","assertNoText",336],"(",["T_STRING","t",336],"(",["T_CONSTANT_ENCAPSED_STRING","'Pager ID: @id'",336],",",["T_WHITESPACE"," ",336],["T_ARRAY","array",336],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_LNUMBER","0",336],")",")",",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'No summary for standard pager'",336],")",";",["T_WHITESPACE","\n\n    ",336],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","drupalLogin",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","adminUser",338],")",";",["T_WHITESPACE","\n\n    ",338],["T_COMMENT","\/\/ Add a new node with both comment fields open.\n",340],["T_WHITESPACE","    ",341],["T_VARIABLE","$node",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","drupalCreateNode",341],"(",["T_ARRAY","array",341],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","'article'",341],",",["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","'promote'",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_LNUMBER","1",341],",",["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","'uid'",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","webUser",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","id",341],"(",")",")",")",";",["T_WHITESPACE","\n    ",341],["T_COMMENT","\/\/ Set comment options.\n",342],["T_WHITESPACE","    ",343],["T_VARIABLE","$comments",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_ARRAY","array",343],"(",")",";",["T_WHITESPACE","\n    ",343],["T_FOREACH","foreach",344],["T_WHITESPACE"," ",344],"(",["T_ARRAY","array",344],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",344],",",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'comment_2'",344],")",["T_WHITESPACE"," ",344],["T_AS","as",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$field_name",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n      ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","setCommentForm",345],"(",["T_STRING","TRUE",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$field_name",345],")",";",["T_WHITESPACE","\n      ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","setCommentPreview",346],"(",["T_STRING","DRUPAL_OPTIONAL",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$field_name",346],")",";",["T_WHITESPACE","\n      ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","setCommentSettings",347],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",347],",",["T_WHITESPACE"," ",347],["T_STRING","CommentManagerInterface",347],["T_DOUBLE_COLON","::",347],["T_STRING","COMMENT_MODE_FLAT",347],",",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'Comment paging changed.'",347],",",["T_WHITESPACE"," ",347],["T_VARIABLE","$field_name",347],")",";",["T_WHITESPACE","\n\n      ",347],["T_COMMENT","\/\/ Set comments to one per page so that we are able to test paging without\n",349],["T_WHITESPACE","      ",350],["T_COMMENT","\/\/ needing to insert large numbers of comments.\n",350],["T_WHITESPACE","      ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","setCommentsPerPage",351],"(",["T_LNUMBER","1",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$field_name",351],")",";",["T_WHITESPACE","\n      ",351],["T_FOR","for",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$i",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_LNUMBER","0",352],";",["T_WHITESPACE"," ",352],["T_VARIABLE","$i",352],["T_WHITESPACE"," ",352],"<",["T_WHITESPACE"," ",352],["T_LNUMBER","3",352],";",["T_WHITESPACE"," ",352],["T_VARIABLE","$i",352],["T_INC","++",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$comment",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_STRING","t",353],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment @count on field @field'",353],",",["T_WHITESPACE"," ",353],["T_ARRAY","array",353],"(",["T_WHITESPACE","\n          ",353],["T_CONSTANT_ENCAPSED_STRING","'@count'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$i",354],["T_WHITESPACE"," ",354],"+",["T_WHITESPACE"," ",354],["T_LNUMBER","1",354],",",["T_WHITESPACE","\n          ",354],["T_CONSTANT_ENCAPSED_STRING","'@field'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$field_name",355],",",["T_WHITESPACE","\n        ",355],")",")",";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$comments",357],"[","]",["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","postComment",357],"(",["T_VARIABLE","$node",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$comment",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$comment",357],",",["T_WHITESPACE"," ",357],["T_STRING","TRUE",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$field_name",357],")",";",["T_WHITESPACE","\n      ",357],"}",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_COMMENT","\/\/ Check the first page of the node, and confirm the correct comments are\n",361],["T_WHITESPACE","    ",362],["T_COMMENT","\/\/ shown.\n",362],["T_WHITESPACE","    ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","drupalGet",363],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",363],["T_WHITESPACE"," ",363],".",["T_WHITESPACE"," ",363],["T_VARIABLE","$node",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","id",363],"(",")",")",";",["T_WHITESPACE","\n    ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","assertRaw",364],"(",["T_STRING","t",364],"(",["T_CONSTANT_ENCAPSED_STRING","'next'",364],")",",",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'Paging links found.'",364],")",";",["T_WHITESPACE","\n    ",364],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","assertRaw",365],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment 1 on field comment'",365],")",";",["T_WHITESPACE","\n    ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","assertRaw",366],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment 1 on field comment_2'",366],")",";",["T_WHITESPACE","\n    ",366],["T_COMMENT","\/\/ Navigate to next page of field 1.\n",367],["T_WHITESPACE","    ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","clickLinkWithXPath",368],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/h3\/a[normalize-space(text())=:label]\/ancestor::section[1]\/\/a[@rel=\"next\"]'",368],",",["T_WHITESPACE"," ",368],["T_ARRAY","array",368],"(",["T_CONSTANT_ENCAPSED_STRING","':label'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'Comment 1 on field comment'",368],")",")",";",["T_WHITESPACE","\n    ",368],["T_COMMENT","\/\/ Check only one pager updated.\n",369],["T_WHITESPACE","    ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","assertRaw",370],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment 2 on field comment'",370],")",";",["T_WHITESPACE","\n    ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","assertRaw",371],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment 1 on field comment_2'",371],")",";",["T_WHITESPACE","\n    ",371],["T_COMMENT","\/\/ Return to page 1.\n",372],["T_WHITESPACE","    ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","drupalGet",373],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",373],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_VARIABLE","$node",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","id",373],"(",")",")",";",["T_WHITESPACE","\n    ",373],["T_COMMENT","\/\/ Navigate to next page of field 2.\n",374],["T_WHITESPACE","    ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","clickLinkWithXPath",375],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/h3\/a[normalize-space(text())=:label]\/ancestor::section[1]\/\/a[@rel=\"next\"]'",375],",",["T_WHITESPACE"," ",375],["T_ARRAY","array",375],"(",["T_CONSTANT_ENCAPSED_STRING","':label'",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'Comment 1 on field comment_2'",375],")",")",";",["T_WHITESPACE","\n    ",375],["T_COMMENT","\/\/ Check only one pager updated.\n",376],["T_WHITESPACE","    ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","assertRaw",377],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment 1 on field comment'",377],")",";",["T_WHITESPACE","\n    ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","assertRaw",378],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment 2 on field comment_2'",378],")",";",["T_WHITESPACE","\n    ",378],["T_COMMENT","\/\/ Navigate to next page of field 1.\n",379],["T_WHITESPACE","    ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","clickLinkWithXPath",380],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/h3\/a[normalize-space(text())=:label]\/ancestor::section[1]\/\/a[@rel=\"next\"]'",380],",",["T_WHITESPACE"," ",380],["T_ARRAY","array",380],"(",["T_CONSTANT_ENCAPSED_STRING","':label'",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'Comment 1 on field comment'",380],")",")",";",["T_WHITESPACE","\n    ",380],["T_COMMENT","\/\/ Check only one pager updated.\n",381],["T_WHITESPACE","    ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","assertRaw",382],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment 2 on field comment'",382],")",";",["T_WHITESPACE","\n    ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","assertRaw",383],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment 2 on field comment_2'",383],")",";",["T_WHITESPACE","\n  ",383],"}",["T_WHITESPACE","\n\n  ",384],["T_DOC_COMMENT","\/**\n   * Follows a link found at a give xpath query.\n   *\n   * Will click the first link found with the given xpath query by default,\n   * or a later one if an index is given.\n   *\n   * If the link is discovered and clicked, the test passes. Fail otherwise.\n   *\n   * @param string $xpath\n   *   Xpath query that targets an anchor tag, or set of anchor tags.\n   * @param array $arguments\n   *   An array of arguments with keys in the form ':name' matching the\n   *   placeholders in the query. The values may be either strings or numeric\n   *   values.\n   * @param int $index\n   *   Link position counting from zero.\n   *\n   * @return string|false\n   *   Page contents on success, or FALSE on failure.\n   *\n   * @see WebTestBase::clickLink()\n   *\/",386],["T_WHITESPACE","\n  ",407],["T_PROTECTED","protected",408],["T_WHITESPACE"," ",408],["T_FUNCTION","function",408],["T_WHITESPACE"," ",408],["T_STRING","clickLinkWithXPath",408],"(",["T_VARIABLE","$xpath",408],",",["T_WHITESPACE"," ",408],["T_VARIABLE","$arguments",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_ARRAY","array",408],"(",")",",",["T_WHITESPACE"," ",408],["T_VARIABLE","$index",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_LNUMBER","0",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$url_before",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getUrl",409],"(",")",";",["T_WHITESPACE","\n    ",409],["T_VARIABLE","$urls",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","xpath",410],"(",["T_VARIABLE","$xpath",410],",",["T_WHITESPACE"," ",410],["T_VARIABLE","$arguments",410],")",";",["T_WHITESPACE","\n    ",410],["T_IF","if",411],["T_WHITESPACE"," ",411],"(",["T_ISSET","isset",411],"(",["T_VARIABLE","$urls",411],"[",["T_VARIABLE","$index",411],"]",")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n      ",411],["T_VARIABLE","$url_target",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getAbsoluteUrl",412],"(",["T_VARIABLE","$urls",412],"[",["T_VARIABLE","$index",412],"]","[",["T_CONSTANT_ENCAPSED_STRING","'href'",412],"]",")",";",["T_WHITESPACE","\n      ",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","pass",413],"(",["T_STRING","SafeMarkup",413],["T_DOUBLE_COLON","::",413],["T_STRING","format",413],"(",["T_CONSTANT_ENCAPSED_STRING","'Clicked link %label (@url_target) from @url_before'",413],",",["T_WHITESPACE"," ",413],["T_ARRAY","array",413],"(",["T_CONSTANT_ENCAPSED_STRING","'%label'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$xpath",413],",",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'@url_target'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$url_target",413],",",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'@url_before'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$url_before",413],")",")",",",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'Browser'",413],")",";",["T_WHITESPACE","\n      ",413],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","drupalGet",414],"(",["T_VARIABLE","$url_target",414],")",";",["T_WHITESPACE","\n    ",414],"}",["T_WHITESPACE","\n    ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","fail",416],"(",["T_STRING","SafeMarkup",416],["T_DOUBLE_COLON","::",416],["T_STRING","format",416],"(",["T_CONSTANT_ENCAPSED_STRING","'Link %label does not exist on @url_before'",416],",",["T_WHITESPACE"," ",416],["T_ARRAY","array",416],"(",["T_CONSTANT_ENCAPSED_STRING","'%label'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$xpath",416],",",["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'@url_before'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$url_before",416],")",")",",",["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'Browser'",416],")",";",["T_WHITESPACE","\n    ",416],["T_RETURN","return",417],["T_WHITESPACE"," ",417],["T_STRING","FALSE",417],";",["T_WHITESPACE","\n  ",417],"}",["T_WHITESPACE","\n\n",418],"}",["T_WHITESPACE","\n",420]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Views",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","language",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigurableLanguage",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","comment",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Comment",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests comment field filters with translations.\n *\n * @group comment\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","CommentFieldFilterTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","CommentTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_STATIC","static",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$modules",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_ARRAY","array",18],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",18],")",";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_STATIC","static",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$testViews",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'test_field_filters'",25],")",";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * List of comment titles by language.\n   *\n   * @var array\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$commentTitles",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",")",";",["T_WHITESPACE","\n\n  ",32],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","setUp",34],"(",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_STRING","parent",35],["T_DOUBLE_COLON","::",35],["T_STRING","setUp",35],"(",")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalLogin",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalCreateUser",36],"(","[",["T_CONSTANT_ENCAPSED_STRING","'access comments'",36],"]",")",")",";",["T_WHITESPACE","\n\n    ",36],["T_COMMENT","\/\/ Add two new languages.\n",38],["T_WHITESPACE","    ",39],["T_STRING","ConfigurableLanguage",39],["T_DOUBLE_COLON","::",39],["T_STRING","createFromLangcode",39],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","save",39],"(",")",";",["T_WHITESPACE","\n    ",39],["T_STRING","ConfigurableLanguage",40],["T_DOUBLE_COLON","::",40],["T_STRING","createFromLangcode",40],"(",["T_CONSTANT_ENCAPSED_STRING","'es'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","save",40],"(",")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ Set up comment titles.\n",42],["T_WHITESPACE","    ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","commentTitles",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'en'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'Food in Paris'",44],",",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'es'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Comida en Paris'",45],",",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'fr'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'Nouriture en Paris'",46],",",["T_WHITESPACE","\n    ",46],")",";",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Create a new comment. Using the one created earlier will not work,\n",49],["T_WHITESPACE","    ",50],["T_COMMENT","\/\/ as it predates the language set-up.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$comment",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'uid'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","loggedInUser",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","id",52],"(",")",",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","nodeUserCommented",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","id",53],"(",")",",",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'node'",54],",",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'field_name'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'comment'",55],",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'cid'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","''",56],",",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'pid'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","''",57],",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'node_type'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","''",58],",",["T_WHITESPACE","\n    ",58],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","comment",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","Comment",60],["T_DOUBLE_COLON","::",60],["T_STRING","create",60],"(",["T_VARIABLE","$comment",60],")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Add field values and translate the comment.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","comment",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","subject",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","value",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","commentTitles",63],"[",["T_CONSTANT_ENCAPSED_STRING","'en'",63],"]",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","comment",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","comment_body",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","value",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","commentTitles",64],"[",["T_CONSTANT_ENCAPSED_STRING","'en'",64],"]",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","comment",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","langcode",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'en'",65],";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","comment",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","save",66],"(",")",";",["T_WHITESPACE","\n    ",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'es'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'fr'",67],")",["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$langcode",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n      ",67],["T_VARIABLE","$translation",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","comment",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","addTranslation",68],"(",["T_VARIABLE","$langcode",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",")",";",["T_WHITESPACE","\n      ",68],["T_VARIABLE","$translation",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","comment_body",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","value",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","commentTitles",69],"[",["T_VARIABLE","$langcode",69],"]",";",["T_WHITESPACE","\n      ",69],["T_VARIABLE","$translation",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","subject",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","value",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","commentTitles",70],"[",["T_VARIABLE","$langcode",70],"]",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","comment",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","save",72],"(",")",";",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * Tests body and title filters.\n   *\/",75],["T_WHITESPACE","\n  ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","testFilters",78],"(",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n    ",78],["T_COMMENT","\/\/ Test the title filter page, which filters for title contains 'Comida'.\n",79],["T_WHITESPACE","    ",80],["T_COMMENT","\/\/ Should show just the Spanish translation, once.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertPageCounts",81],"(",["T_CONSTANT_ENCAPSED_STRING","'test-title-filter'",81],",",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'es'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'fr'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","0",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'en'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","0",81],")",",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'Comida title filter'",81],")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Test the body filter page, which filters for body contains 'Comida'.\n",83],["T_WHITESPACE","    ",84],["T_COMMENT","\/\/ Should show just the Spanish translation, once.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertPageCounts",85],"(",["T_CONSTANT_ENCAPSED_STRING","'test-body-filter'",85],",",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",["T_CONSTANT_ENCAPSED_STRING","'es'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_LNUMBER","1",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'fr'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'en'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],")",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'Comida body filter'",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Test the title Paris filter page, which filters for title contains\n",87],["T_WHITESPACE","    ",88],["T_COMMENT","\/\/ 'Paris'. Should show each translation once.\n",88],["T_WHITESPACE","    ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertPageCounts",89],"(",["T_CONSTANT_ENCAPSED_STRING","'test-title-paris'",89],",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'es'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_LNUMBER","1",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'fr'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_LNUMBER","1",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'en'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_LNUMBER","1",89],")",",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'Paris title filter'",89],")",";",["T_WHITESPACE","\n\n    ",89],["T_COMMENT","\/\/ Test the body Paris filter page, which filters for body contains\n",91],["T_WHITESPACE","    ",92],["T_COMMENT","\/\/ 'Paris'. Should show each translation once.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertPageCounts",93],"(",["T_CONSTANT_ENCAPSED_STRING","'test-body-paris'",93],",",["T_WHITESPACE"," ",93],["T_ARRAY","array",93],"(",["T_CONSTANT_ENCAPSED_STRING","'es'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_LNUMBER","1",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'fr'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_LNUMBER","1",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'en'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_LNUMBER","1",93],")",",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'Paris body filter'",93],")",";",["T_WHITESPACE","\n  ",93],"}",["T_WHITESPACE","\n\n  ",94],["T_DOC_COMMENT","\/**\n   * Asserts that the given comment translation counts are correct.\n   *\n   * @param string $path\n   *   Path of the page to test.\n   * @param array $counts\n   *   Array whose keys are languages, and values are the number of times\n   *   that translation should be shown on the given page.\n   * @param string $message\n   *   Message suffix to display.\n   *\/",96],["T_WHITESPACE","\n  ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","assertPageCounts",107],"(",["T_VARIABLE","$path",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$counts",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$message",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_COMMENT","\/\/ Get the text of the page.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","drupalGet",109],"(",["T_VARIABLE","$path",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$text",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getTextContent",110],"(",")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Check the counts. Note that the title and body are both shown on the\n",112],["T_WHITESPACE","    ",113],["T_COMMENT","\/\/ page, and they are the same. So the title\/body string should appear on\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ the page twice as many times as the input count.\n",114],["T_WHITESPACE","    ",115],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$counts",115],["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$langcode",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$count",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n      ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertEqual",116],"(",["T_STRING","substr_count",116],"(",["T_VARIABLE","$text",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","commentTitles",116],"[",["T_VARIABLE","$langcode",116],"]",")",",",["T_WHITESPACE"," ",116],["T_LNUMBER","2",116],["T_WHITESPACE"," ",116],"*",["T_WHITESPACE"," ",116],["T_VARIABLE","$count",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'Translation '",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_VARIABLE","$langcode",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","' has count '",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_VARIABLE","$count",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","' with '",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_VARIABLE","$message",116],")",";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n  ",117],"}",["T_WHITESPACE","\n\n",118],"}",["T_WHITESPACE","\n",120]]
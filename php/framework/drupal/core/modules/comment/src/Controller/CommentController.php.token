[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Controller",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CommentInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","comment",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CommentManagerInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","comment",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldType",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CommentItemInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Access",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AccessResult",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Cache",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CacheableResponseInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Controller",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ControllerBase",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EntityInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EntityManagerInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Symfony",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Component",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DependencyInjection",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ContainerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","JsonResponse",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","RedirectResponse",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpFoundation",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Request",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","HttpKernel",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Exception",17],["T_NS_SEPARATOR","\\",17],["T_STRING","AccessDeniedHttpException",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","HttpKernel",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Exception",18],["T_NS_SEPARATOR","\\",18],["T_STRING","NotFoundHttpException",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","HttpKernel",19],["T_NS_SEPARATOR","\\",19],["T_STRING","HttpKernelInterface",19],";",["T_WHITESPACE","\n\n",19],["T_DOC_COMMENT","\/**\n * Controller for the comment entity.\n *\n * @see \\Drupal\\comment\\Entity\\Comment.\n *\/",21],["T_WHITESPACE","\n",25],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","CommentController",26],["T_WHITESPACE"," ",26],["T_EXTENDS","extends",26],["T_WHITESPACE"," ",26],["T_STRING","ControllerBase",26],["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The HTTP kernel.\n   *\n   * @var \\Symfony\\Component\\HttpKernel\\HttpKernelInterface\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$httpKernel",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * The comment manager service.\n   *\n   * @var \\Drupal\\comment\\CommentManagerInterface\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$commentManager",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityStorageInterface\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$entityManager",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * Constructs a CommentController object.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\HttpKernelInterface $http_kernel\n   *   HTTP kernel to handle requests.\n   * @param \\Drupal\\comment\\CommentManagerInterface $comment_manager\n   *   The comment manager service.\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager service.\n   *\/",49],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","__construct",59],"(",["T_STRING","HttpKernelInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$http_kernel",59],",",["T_WHITESPACE"," ",59],["T_STRING","CommentManagerInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$comment_manager",59],",",["T_WHITESPACE"," ",59],["T_STRING","EntityManagerInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$entity_manager",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","httpKernel",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$http_kernel",60],";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","commentManager",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$comment_manager",61],";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","entityManager",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$entity_manager",62],";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_STATIC","static",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","create",68],"(",["T_STRING","ContainerInterface",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$container",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STATIC","static",69],"(",["T_WHITESPACE","\n      ",69],["T_VARIABLE","$container",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'http_kernel'",70],")",",",["T_WHITESPACE","\n      ",70],["T_VARIABLE","$container",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","get",71],"(",["T_CONSTANT_ENCAPSED_STRING","'comment.manager'",71],")",",",["T_WHITESPACE","\n      ",71],["T_VARIABLE","$container",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","get",72],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",72],")",["T_WHITESPACE","\n    ",72],")",";",["T_WHITESPACE","\n  ",73],"}",["T_WHITESPACE","\n\n  ",74],["T_DOC_COMMENT","\/**\n   * Publishes the specified comment.\n   *\n   * @param \\Drupal\\comment\\CommentInterface $comment\n   *   A comment entity.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *\/",76],["T_WHITESPACE","\n  ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","commentApprove",84],"(",["T_STRING","CommentInterface",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$comment",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$comment",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","setPublished",85],"(",["T_STRING","TRUE",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$comment",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","save",86],"(",")",";",["T_WHITESPACE","\n\n    ",86],["T_STRING","drupal_set_message",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","t",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment approved.'",88],")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$permalink_uri",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$comment",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","permalink",89],"(",")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$permalink_uri",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","setAbsolute",90],"(",")",";",["T_WHITESPACE","\n    ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_NEW","new",91],["T_WHITESPACE"," ",91],["T_STRING","RedirectResponse",91],"(",["T_VARIABLE","$permalink_uri",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","toString",91],"(",")",")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * Redirects comment links to the correct page depending on comment settings.\n   *\n   * Since comments are paged there is no way to guarantee which page a comment\n   * appears on. Comment paging and threading settings may be changed at any\n   * time. With threaded comments, an individual comment may move between pages\n   * as comments can be added either before or after it in the overall\n   * discussion. Therefore we use a central routing function for comment links,\n   * which calculates the page number based on current comment settings and\n   * returns the full comment view with the pager set dynamically.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The request of the page.\n   * @param \\Drupal\\comment\\CommentInterface $comment\n   *   A comment entity.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\Response\n   *   The comment listing set to the page on which the comment appears.\n   *\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\AccessDeniedHttpException\n   *\/",94],["T_WHITESPACE","\n  ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","commentPermalink",116],"(",["T_STRING","Request",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$request",116],",",["T_WHITESPACE"," ",116],["T_STRING","CommentInterface",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$comment",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n    ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$entity",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$comment",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getCommentedEntity",117],"(",")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n      ",117],["T_COMMENT","\/\/ Check access permissions for the entity.\n",118],["T_WHITESPACE","      ",119],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_VARIABLE","$entity",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","access",119],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",119],")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n        ",119],["T_THROW","throw",120],["T_WHITESPACE"," ",120],["T_NEW","new",120],["T_WHITESPACE"," ",120],["T_STRING","AccessDeniedHttpException",120],"(",")",";",["T_WHITESPACE","\n      ",120],"}",["T_WHITESPACE","\n      ",121],["T_VARIABLE","$field_definition",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","entityManager",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","getFieldDefinitions",122],"(",["T_VARIABLE","$entity",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getEntityTypeId",122],"(",")",",",["T_WHITESPACE"," ",122],["T_VARIABLE","$entity",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","bundle",122],"(",")",")","[",["T_VARIABLE","$comment",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getFieldName",122],"(",")","]",";",["T_WHITESPACE","\n\n      ",122],["T_COMMENT","\/\/ Find the current display page for this comment.\n",124],["T_WHITESPACE","      ",125],["T_VARIABLE","$page",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","entityManager",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getStorage",125],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getDisplayOrdinal",125],"(",["T_VARIABLE","$comment",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$field_definition",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getSetting",125],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",125],")",",",["T_WHITESPACE"," ",125],["T_VARIABLE","$field_definition",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getSetting",125],"(",["T_CONSTANT_ENCAPSED_STRING","'per_page'",125],")",")",";",["T_WHITESPACE","\n      ",125],["T_COMMENT","\/\/ @todo: Cleaner sub request handling.\n",126],["T_WHITESPACE","      ",127],["T_VARIABLE","$subrequest_url",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$entity",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","urlInfo",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","setOption",127],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",127],",",["T_WHITESPACE"," ",127],"[",["T_CONSTANT_ENCAPSED_STRING","'page'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$page",127],"]",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","toString",127],"(",["T_STRING","TRUE",127],")",";",["T_WHITESPACE","\n      ",127],["T_VARIABLE","$redirect_request",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","Request",128],["T_DOUBLE_COLON","::",128],["T_STRING","create",128],"(",["T_VARIABLE","$subrequest_url",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getGeneratedUrl",128],"(",")",",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'GET'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$request",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","query",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","all",128],"(",")",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$request",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","cookies",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","all",128],"(",")",",",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",")",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$request",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","server",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","all",128],"(",")",")",";",["T_WHITESPACE","\n      ",128],["T_COMMENT","\/\/ Carry over the session to the subrequest.\n",129],["T_WHITESPACE","      ",130],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$session",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$request",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getSession",130],"(",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$redirect_request",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setSession",131],"(",["T_VARIABLE","$session",131],")",";",["T_WHITESPACE","\n      ",131],"}",["T_WHITESPACE","\n      ",132],["T_VARIABLE","$request",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","query",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","set",133],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$page",133],")",";",["T_WHITESPACE","\n      ",133],["T_VARIABLE","$response",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","httpKernel",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","handle",134],"(",["T_VARIABLE","$redirect_request",134],",",["T_WHITESPACE"," ",134],["T_STRING","HttpKernelInterface",134],["T_DOUBLE_COLON","::",134],["T_STRING","SUB_REQUEST",134],")",";",["T_WHITESPACE","\n      ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$response",135],["T_WHITESPACE"," ",135],["T_INSTANCEOF","instanceof",135],["T_WHITESPACE"," ",135],["T_STRING","CacheableResponseInterface",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n        ",135],["T_COMMENT","\/\/ @todo Once path aliases have cache tags (see\n",136],["T_WHITESPACE","        ",137],["T_COMMENT","\/\/   https:\/\/www.drupal.org\/node\/2480077), add test coverage that\n",137],["T_WHITESPACE","        ",138],["T_COMMENT","\/\/   the cache tag for a commented entity's path alias is added to the\n",138],["T_WHITESPACE","        ",139],["T_COMMENT","\/\/   comment's permalink response, because there can be blocks or\n",139],["T_WHITESPACE","        ",140],["T_COMMENT","\/\/   other content whose renderings depend on the subrequest's URL.\n",140],["T_WHITESPACE","        ",141],["T_VARIABLE","$response",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","addCacheableDependency",141],"(",["T_VARIABLE","$subrequest_url",141],")",";",["T_WHITESPACE","\n      ",141],"}",["T_WHITESPACE","\n      ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$response",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n    ",144],["T_THROW","throw",145],["T_WHITESPACE"," ",145],["T_NEW","new",145],["T_WHITESPACE"," ",145],["T_STRING","NotFoundHttpException",145],"(",")",";",["T_WHITESPACE","\n  ",145],"}",["T_WHITESPACE","\n\n  ",146],["T_DOC_COMMENT","\/**\n   * The _title_callback for the page that renders the comment permalink.\n   *\n   * @param \\Drupal\\comment\\CommentInterface $comment\n   *   The current comment.\n   *\n   * @return string\n   *   The translated comment subject.\n   *\/",148],["T_WHITESPACE","\n  ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","commentPermalinkTitle",157],"(",["T_STRING","CommentInterface",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$comment",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n    ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","entityManager",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","getTranslationFromContext",158],"(",["T_VARIABLE","$comment",158],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","label",158],"(",")",";",["T_WHITESPACE","\n  ",158],"}",["T_WHITESPACE","\n\n  ",159],["T_DOC_COMMENT","\/**\n   * Redirects legacy node links to the new path.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $node\n   *   The node object identified by the legacy URL.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   Redirects user to new url.\n   *\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException\n   *\/",161],["T_WHITESPACE","\n  ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","redirectNode",172],"(",["T_STRING","EntityInterface",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$node",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$fields",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","commentManager",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getFields",173],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",173],")",";",["T_WHITESPACE","\n    ",173],["T_COMMENT","\/\/ Legacy nodes only had a single comment field, so use the first comment\n",174],["T_WHITESPACE","    ",175],["T_COMMENT","\/\/ field on the entity.\n",175],["T_WHITESPACE","    ",176],["T_IF","if",176],["T_WHITESPACE"," ",176],"(","!",["T_EMPTY","empty",176],"(",["T_VARIABLE","$fields",176],")",["T_WHITESPACE"," ",176],["T_BOOLEAN_AND","&&",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$field_names",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","array_keys",176],"(",["T_VARIABLE","$fields",176],")",")",["T_WHITESPACE"," ",176],["T_BOOLEAN_AND","&&",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$field_name",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","reset",176],"(",["T_VARIABLE","$field_names",176],")",")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","redirect",177],"(",["T_CONSTANT_ENCAPSED_STRING","'comment.reply'",177],",",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_WHITESPACE","\n        ",177],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'node'",178],",",["T_WHITESPACE","\n        ",178],["T_CONSTANT_ENCAPSED_STRING","'entity'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$node",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","id",179],"(",")",",",["T_WHITESPACE","\n        ",179],["T_CONSTANT_ENCAPSED_STRING","'field_name'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$field_name",180],",",["T_WHITESPACE","\n      ",180],")",")",";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n    ",182],["T_THROW","throw",183],["T_WHITESPACE"," ",183],["T_NEW","new",183],["T_WHITESPACE"," ",183],["T_STRING","NotFoundHttpException",183],"(",")",";",["T_WHITESPACE","\n  ",183],"}",["T_WHITESPACE","\n\n  ",184],["T_DOC_COMMENT","\/**\n   * Form constructor for the comment reply form.\n   *\n   * There are several cases that have to be handled, including:\n   *   - replies to comments\n   *   - replies to entities\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The current request object.\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity this comment belongs to.\n   * @param string $field_name\n   *   The field_name to which the comment belongs.\n   * @param int $pid\n   *   (optional) Some comments are replies to other comments. In those cases,\n   *   $pid is the parent comment's comment ID. Defaults to NULL.\n   *\n   * @return array|\\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   An associative array containing:\n   *   - An array for rendering the entity or parent comment.\n   *     - comment_entity: If the comment is a reply to the entity.\n   *     - comment_parent: If the comment is a reply to another comment.\n   *   - comment_form: The comment form as a renderable array.\n   *\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException\n   *\/",186],["T_WHITESPACE","\n  ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","getReplyForm",212],"(",["T_STRING","Request",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$request",212],",",["T_WHITESPACE"," ",212],["T_STRING","EntityInterface",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$entity",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$field_name",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$pid",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","NULL",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$account",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","currentUser",213],"(",")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$build",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_ARRAY","array",214],"(",")",";",["T_WHITESPACE","\n\n    ",214],["T_COMMENT","\/\/ The user is not just previewing a comment.\n",216],["T_WHITESPACE","    ",217],["T_IF","if",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$request",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","request",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","get",217],"(",["T_CONSTANT_ENCAPSED_STRING","'op'",217],")",["T_WHITESPACE"," ",217],["T_IS_NOT_EQUAL","!=",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","t",217],"(",["T_CONSTANT_ENCAPSED_STRING","'Preview'",217],")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n\n      ",217],["T_COMMENT","\/\/ $pid indicates that this is a reply to a comment.\n",219],["T_WHITESPACE","      ",220],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$pid",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n        ",220],["T_COMMENT","\/\/ Load the parent comment.\n",221],["T_WHITESPACE","        ",222],["T_VARIABLE","$comment",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","entityManager",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","getStorage",222],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",222],")",["T_OBJECT_OPERATOR","->",222],["T_STRING","load",222],"(",["T_VARIABLE","$pid",222],")",";",["T_WHITESPACE","\n        ",222],["T_COMMENT","\/\/ Display the parent comment.\n",223],["T_WHITESPACE","        ",224],["T_VARIABLE","$build",224],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_parent'",224],"]",["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","entityManager",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","getViewBuilder",224],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",224],")",["T_OBJECT_OPERATOR","->",224],["T_STRING","view",224],"(",["T_VARIABLE","$comment",224],")",";",["T_WHITESPACE","\n      ",224],"}",["T_WHITESPACE","\n\n      ",225],["T_COMMENT","\/\/ The comment is in response to a entity.\n",227],["T_WHITESPACE","      ",228],["T_ELSEIF","elseif",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$entity",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","access",228],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$account",228],")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n        ",228],["T_COMMENT","\/\/ We make sure the field value isn't set so we don't end up with a\n",229],["T_WHITESPACE","        ",230],["T_COMMENT","\/\/ redirect loop.\n",230],["T_WHITESPACE","        ",231],["T_VARIABLE","$entity",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_CLONE","clone",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$entity",231],";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$entity",232],["T_OBJECT_OPERATOR","->",232],"{",["T_VARIABLE","$field_name",232],"}",["T_OBJECT_OPERATOR","->",232],["T_STRING","status",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","CommentItemInterface",232],["T_DOUBLE_COLON","::",232],["T_STRING","HIDDEN",232],";",["T_WHITESPACE","\n        ",232],["T_COMMENT","\/\/ Render array of the entity full view mode.\n",233],["T_WHITESPACE","        ",234],["T_VARIABLE","$build",234],"[",["T_CONSTANT_ENCAPSED_STRING","'commented_entity'",234],"]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","entityManager",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","getViewBuilder",234],"(",["T_VARIABLE","$entity",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getEntityTypeId",234],"(",")",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","view",234],"(",["T_VARIABLE","$entity",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'full'",234],")",";",["T_WHITESPACE","\n        ",234],["T_UNSET","unset",235],"(",["T_VARIABLE","$build",235],"[",["T_CONSTANT_ENCAPSED_STRING","'commented_entity'",235],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",235],"]",")",";",["T_WHITESPACE","\n      ",235],"}",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n    ",237],["T_ELSE","else",238],["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n      ",238],["T_VARIABLE","$build",239],"[",["T_CONSTANT_ENCAPSED_STRING","'#title'",239],"]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","t",239],"(",["T_CONSTANT_ENCAPSED_STRING","'Preview comment'",239],")",";",["T_WHITESPACE","\n    ",239],"}",["T_WHITESPACE","\n\n    ",240],["T_COMMENT","\/\/ Show the actual reply box.\n",242],["T_WHITESPACE","    ",243],["T_VARIABLE","$comment",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","entityManager",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","getStorage",243],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",243],")",["T_OBJECT_OPERATOR","->",243],["T_STRING","create",243],"(",["T_ARRAY","array",243],"(",["T_WHITESPACE","\n      ",243],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$entity",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","id",244],"(",")",",",["T_WHITESPACE","\n      ",244],["T_CONSTANT_ENCAPSED_STRING","'pid'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$pid",245],",",["T_WHITESPACE","\n      ",245],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$entity",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getEntityTypeId",246],"(",")",",",["T_WHITESPACE","\n      ",246],["T_CONSTANT_ENCAPSED_STRING","'field_name'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$field_name",247],",",["T_WHITESPACE","\n    ",247],")",")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$build",249],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_form'",249],"]",["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","entityFormBuilder",249],"(",")",["T_OBJECT_OPERATOR","->",249],["T_STRING","getForm",249],"(",["T_VARIABLE","$comment",249],")",";",["T_WHITESPACE","\n\n    ",249],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$build",251],";",["T_WHITESPACE","\n  ",251],"}",["T_WHITESPACE","\n\n  ",252],["T_DOC_COMMENT","\/**\n   * Access check for the reply form.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity this comment belongs to.\n   * @param string $field_name\n   *   The field_name to which the comment belongs.\n   * @param int $pid\n   *   (optional) Some comments are replies to other comments. In those cases,\n   *   $pid is the parent comment's comment ID. Defaults to NULL.\n   *\n   * @return \\Drupal\\Core\\Access\\AccessResultInterface\n   *   An access result\n   *\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException\n   *\/",254],["T_WHITESPACE","\n  ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","replyFormAccess",270],"(",["T_STRING","EntityInterface",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$entity",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$field_name",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$pid",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","NULL",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n    ",270],["T_COMMENT","\/\/ Check if entity and field exists.\n",271],["T_WHITESPACE","    ",272],["T_VARIABLE","$fields",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","commentManager",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getFields",272],"(",["T_VARIABLE","$entity",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getEntityTypeId",272],"(",")",")",";",["T_WHITESPACE","\n    ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_EMPTY","empty",273],"(",["T_VARIABLE","$fields",273],"[",["T_VARIABLE","$field_name",273],"]",")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n      ",273],["T_THROW","throw",274],["T_WHITESPACE"," ",274],["T_NEW","new",274],["T_WHITESPACE"," ",274],["T_STRING","NotFoundHttpException",274],"(",")",";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_VARIABLE","$account",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","currentUser",277],"(",")",";",["T_WHITESPACE","\n\n    ",277],["T_COMMENT","\/\/ Check if the user has the proper permissions.\n",279],["T_WHITESPACE","    ",280],["T_VARIABLE","$access",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_STRING","AccessResult",280],["T_DOUBLE_COLON","::",280],["T_STRING","allowedIfHasPermission",280],"(",["T_VARIABLE","$account",280],",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'post comments'",280],")",";",["T_WHITESPACE","\n\n    ",280],["T_VARIABLE","$status",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$entity",282],["T_OBJECT_OPERATOR","->",282],"{",["T_VARIABLE","$field_name",282],"}",["T_OBJECT_OPERATOR","->",282],["T_STRING","status",282],";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$access",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$access",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","andIf",283],"(",["T_STRING","AccessResult",283],["T_DOUBLE_COLON","::",283],["T_STRING","allowedIf",283],"(",["T_VARIABLE","$status",283],["T_WHITESPACE"," ",283],["T_IS_EQUAL","==",283],["T_WHITESPACE"," ",283],["T_STRING","CommentItemInterface",283],["T_DOUBLE_COLON","::",283],["T_STRING","OPEN",283],")",["T_WHITESPACE","\n      ",283],["T_OBJECT_OPERATOR","->",284],["T_STRING","addCacheableDependency",284],"(",["T_VARIABLE","$entity",284],")",")",";",["T_WHITESPACE","\n\n    ",284],["T_COMMENT","\/\/ $pid indicates that this is a reply to a comment.\n",286],["T_WHITESPACE","    ",287],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$pid",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n      ",287],["T_COMMENT","\/\/ Check if the user has the proper permissions.\n",288],["T_WHITESPACE","      ",289],["T_VARIABLE","$access",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$access",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","andIf",289],"(",["T_STRING","AccessResult",289],["T_DOUBLE_COLON","::",289],["T_STRING","allowedIfHasPermission",289],"(",["T_VARIABLE","$account",289],",",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'access comments'",289],")",")",";",["T_WHITESPACE","\n\n      ",289],["T_COMMENT","\/\/\/ Load the parent comment.\n",291],["T_WHITESPACE","      ",292],["T_VARIABLE","$comment",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","entityManager",292],"(",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","getStorage",292],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",292],")",["T_OBJECT_OPERATOR","->",292],["T_STRING","load",292],"(",["T_VARIABLE","$pid",292],")",";",["T_WHITESPACE","\n      ",292],["T_COMMENT","\/\/ Check if the parent comment is published and belongs to the entity.\n",293],["T_WHITESPACE","      ",294],["T_VARIABLE","$access",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$access",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","andIf",294],"(",["T_STRING","AccessResult",294],["T_DOUBLE_COLON","::",294],["T_STRING","allowedIf",294],"(",["T_VARIABLE","$comment",294],["T_WHITESPACE"," ",294],["T_BOOLEAN_AND","&&",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$comment",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","isPublished",294],"(",")",["T_WHITESPACE"," ",294],["T_BOOLEAN_AND","&&",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$comment",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getCommentedEntityId",294],"(",")",["T_WHITESPACE"," ",294],["T_IS_EQUAL","==",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$entity",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","id",294],"(",")",")",")",";",["T_WHITESPACE","\n      ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$comment",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$access",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","addCacheableDependency",296],"(",["T_VARIABLE","$comment",296],")",";",["T_WHITESPACE","\n      ",296],"}",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n    ",298],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$access",299],";",["T_WHITESPACE","\n  ",299],"}",["T_WHITESPACE","\n\n  ",300],["T_DOC_COMMENT","\/**\n   * Returns a set of nodes' last read timestamps.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The request of the page.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\JsonResponse\n   *   The JSON response.\n   *\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\AccessDeniedHttpException\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException\n   *\/",302],["T_WHITESPACE","\n  ",313],["T_PUBLIC","public",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","renderNewCommentsNodeLinks",314],"(",["T_STRING","Request",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$request",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n    ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","currentUser",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","isAnonymous",315],"(",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n      ",315],["T_THROW","throw",316],["T_WHITESPACE"," ",316],["T_NEW","new",316],["T_WHITESPACE"," ",316],["T_STRING","AccessDeniedHttpException",316],"(",")",";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n\n    ",317],["T_VARIABLE","$nids",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$request",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","request",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","get",319],"(",["T_CONSTANT_ENCAPSED_STRING","'node_ids'",319],")",";",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$field_name",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$request",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","request",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","get",320],"(",["T_CONSTANT_ENCAPSED_STRING","'field_name'",320],")",";",["T_WHITESPACE","\n    ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(","!",["T_ISSET","isset",321],"(",["T_VARIABLE","$nids",321],")",")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n      ",321],["T_THROW","throw",322],["T_WHITESPACE"," ",322],["T_NEW","new",322],["T_WHITESPACE"," ",322],["T_STRING","NotFoundHttpException",322],"(",")",";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n    ",323],["T_COMMENT","\/\/ Only handle up to 100 nodes.\n",324],["T_WHITESPACE","    ",325],["T_VARIABLE","$nids",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_STRING","array_slice",325],"(",["T_VARIABLE","$nids",325],",",["T_WHITESPACE"," ",325],["T_LNUMBER","0",325],",",["T_WHITESPACE"," ",325],["T_LNUMBER","100",325],")",";",["T_WHITESPACE","\n\n    ",325],["T_VARIABLE","$links",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_ARRAY","array",327],"(",")",";",["T_WHITESPACE","\n    ",327],["T_FOREACH","foreach",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$nids",328],["T_WHITESPACE"," ",328],["T_AS","as",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$nid",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n      ",328],["T_VARIABLE","$node",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","entityManager",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getStorage",329],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",329],")",["T_OBJECT_OPERATOR","->",329],["T_STRING","load",329],"(",["T_VARIABLE","$nid",329],")",";",["T_WHITESPACE","\n      ",329],["T_VARIABLE","$new",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","commentManager",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getCountNewComments",330],"(",["T_VARIABLE","$node",330],")",";",["T_WHITESPACE","\n      ",330],["T_VARIABLE","$page_number",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","entityManager",331],"(",")",["T_OBJECT_OPERATOR","->",331],["T_STRING","getStorage",331],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",331],")",["T_WHITESPACE","\n        ",331],["T_OBJECT_OPERATOR","->",332],["T_STRING","getNewCommentPageNumber",332],"(",["T_VARIABLE","$node",332],["T_OBJECT_OPERATOR","->",332],"{",["T_VARIABLE","$field_name",332],"}",["T_OBJECT_OPERATOR","->",332],["T_STRING","comment_count",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$new",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$node",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$field_name",332],")",";",["T_WHITESPACE","\n      ",332],["T_VARIABLE","$query",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$page_number",333],["T_WHITESPACE"," ",333],"?",["T_WHITESPACE"," ",333],["T_ARRAY","array",333],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$page_number",333],")",["T_WHITESPACE"," ",333],":",["T_WHITESPACE"," ",333],["T_STRING","NULL",333],";",["T_WHITESPACE","\n      ",333],["T_VARIABLE","$links",334],"[",["T_VARIABLE","$nid",334],"]",["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_ARRAY","array",334],"(",["T_WHITESPACE","\n        ",334],["T_CONSTANT_ENCAPSED_STRING","'new_comment_count'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_INT_CAST","(int)",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$new",335],",",["T_WHITESPACE","\n        ",335],["T_CONSTANT_ENCAPSED_STRING","'first_new_comment_link'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getUrlGenerator",336],"(",")",["T_OBJECT_OPERATOR","->",336],["T_STRING","generateFromRoute",336],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.node.canonical'",336],",",["T_WHITESPACE"," ",336],["T_ARRAY","array",336],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$node",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","id",336],"(",")",")",",",["T_WHITESPACE"," ",336],["T_ARRAY","array",336],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$query",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'fragment'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'new'",336],")",")",",",["T_WHITESPACE","\n      ",336],")",";",["T_WHITESPACE","\n    ",337],"}",["T_WHITESPACE","\n\n    ",338],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_NEW","new",340],["T_WHITESPACE"," ",340],["T_STRING","JsonResponse",340],"(",["T_VARIABLE","$links",340],")",";",["T_WHITESPACE","\n  ",340],"}",["T_WHITESPACE","\n\n",341],"}",["T_WHITESPACE","\n",343]]
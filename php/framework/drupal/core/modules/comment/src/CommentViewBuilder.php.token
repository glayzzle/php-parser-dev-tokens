[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Display",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityViewDisplayInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityManagerInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityTypeInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityViewBuilder",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Language",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LanguageManagerInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Session",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AccountInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DependencyInjection",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ContainerInterface",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * View builder handler for comments.\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","CommentViewBuilder",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","EntityViewBuilder",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * The current user.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountInterface\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$currentUser",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Constructs a new CommentViewBuilder.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_type\n   *   The entity type definition.\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager service.\n   * @param \\Drupal\\Core\\Language\\LanguageManagerInterface $language_manager\n   *   The language manager.\n   * @param \\Drupal\\Core\\Session\\AccountInterface $current_user\n   *   The current user.\n   *\/",26],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_STRING","EntityTypeInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entity_type",38],",",["T_WHITESPACE"," ",38],["T_STRING","EntityManagerInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entity_manager",38],",",["T_WHITESPACE"," ",38],["T_STRING","LanguageManagerInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$language_manager",38],",",["T_WHITESPACE"," ",38],["T_STRING","AccountInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$current_user",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_STRING","parent",39],["T_DOUBLE_COLON","::",39],["T_STRING","__construct",39],"(",["T_VARIABLE","$entity_type",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$entity_manager",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$language_manager",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","currentUser",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$current_user",40],";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_STATIC","static",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","createInstance",46],"(",["T_STRING","ContainerInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$container",46],",",["T_WHITESPACE"," ",46],["T_STRING","EntityTypeInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$entity_type",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STATIC","static",47],"(",["T_WHITESPACE","\n      ",47],["T_VARIABLE","$entity_type",48],",",["T_WHITESPACE","\n      ",48],["T_VARIABLE","$container",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",49],")",",",["T_WHITESPACE","\n      ",49],["T_VARIABLE","$container",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","get",50],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",50],")",",",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$container",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","get",51],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",51],")",["T_WHITESPACE","\n    ",51],")",";",["T_WHITESPACE","\n  ",52],"}",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",55],["T_WHITESPACE","\n  ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","getBuildDefaults",58],"(",["T_STRING","EntityInterface",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$entity",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$view_mode",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$build",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","parent",59],["T_DOUBLE_COLON","::",59],["T_STRING","getBuildDefaults",59],"(",["T_VARIABLE","$entity",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$view_mode",59],")",";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/** @var \\Drupal\\comment\\CommentInterface $entity *\/",61],["T_WHITESPACE","\n    ",61],["T_COMMENT","\/\/ Store a threading field setting to use later in self::buildComponents().\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$build",63],"[",["T_CONSTANT_ENCAPSED_STRING","'#comment_threaded'",63],"]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$entity",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getCommentedEntity",63],"(",")",["T_WHITESPACE","\n      ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","getFieldDefinition",64],"(",["T_VARIABLE","$entity",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getFieldName",64],"(",")",")",["T_WHITESPACE","\n      ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","getSetting",65],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",65],")",["T_WHITESPACE"," ",65],["T_IS_IDENTICAL","===",65],["T_WHITESPACE"," ",65],["T_STRING","CommentManagerInterface",65],["T_DOUBLE_COLON","::",65],["T_STRING","COMMENT_MODE_THREADED",65],";",["T_WHITESPACE","\n    ",65],["T_COMMENT","\/\/ If threading is enabled, don't render cache individual comments, but do\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ keep the cacheability metadata, so it can bubble up.\n",67],["T_WHITESPACE","    ",68],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$build",68],"[",["T_CONSTANT_ENCAPSED_STRING","'#comment_threaded'",68],"]",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n      ",68],["T_UNSET","unset",69],"(",["T_VARIABLE","$build",69],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",69],"]","[",["T_CONSTANT_ENCAPSED_STRING","'keys'",69],"]",")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$build",72],";",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * In addition to modifying the content key on entities, this implementation\n   * will also set the comment entity key which all comments carry.\n   *\n   * @throws \\InvalidArgumentException\n   *   Thrown when a comment is attached to an entity that no longer exists.\n   *\/",75],["T_WHITESPACE","\n  ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","buildComponents",84],"(",["T_ARRAY","array",84],["T_WHITESPACE"," ",84],"&",["T_VARIABLE","$build",84],",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$entities",84],",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$displays",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$view_mode",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n    ",84],["T_DOC_COMMENT","\/** @var \\Drupal\\comment\\CommentInterface[] $entities *\/",85],["T_WHITESPACE","\n    ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_EMPTY","empty",86],"(",["T_VARIABLE","$entities",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_RETURN","return",87],";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_COMMENT","\/\/ Pre-load associated users into cache to leverage multiple loading.\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$uids",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_FOREACH","foreach",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$entities",92],["T_WHITESPACE"," ",92],["T_AS","as",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$entity",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$uids",93],"[","]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$entity",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getOwnerId",93],"(",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","entityManager",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getStorage",95],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",95],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","loadMultiple",95],"(",["T_STRING","array_unique",95],"(",["T_VARIABLE","$uids",95],")",")",";",["T_WHITESPACE","\n\n    ",95],["T_STRING","parent",97],["T_DOUBLE_COLON","::",97],["T_STRING","buildComponents",97],"(",["T_VARIABLE","$build",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$entities",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$displays",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$view_mode",97],")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ A counter to track the indentation level.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$current_indent",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_LNUMBER","0",100],";",["T_WHITESPACE","\n\n    ",100],["T_FOREACH","foreach",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$entities",102],["T_WHITESPACE"," ",102],["T_AS","as",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$id",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$entity",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n      ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$build",103],"[",["T_VARIABLE","$id",103],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#comment_threaded'",103],"]",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$comment_indent",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","count",104],"(",["T_STRING","explode",104],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$entity",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getThread",104],"(",")",")",")",["T_WHITESPACE"," ",104],"-",["T_WHITESPACE"," ",104],["T_LNUMBER","1",104],";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$comment_indent",105],["T_WHITESPACE"," ",105],">",["T_WHITESPACE"," ",105],["T_VARIABLE","$current_indent",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n          ",105],["T_COMMENT","\/\/ Set 1 to indent this comment from the previous one (its parent).\n",106],["T_WHITESPACE","          ",107],["T_COMMENT","\/\/ Set only one extra level of indenting even if the difference in\n",107],["T_WHITESPACE","          ",108],["T_COMMENT","\/\/ depth is higher.\n",108],["T_WHITESPACE","          ",109],["T_VARIABLE","$build",109],"[",["T_VARIABLE","$id",109],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#comment_indent'",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_LNUMBER","1",109],";",["T_WHITESPACE","\n          ",109],["T_VARIABLE","$current_indent",110],["T_INC","++",110],";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_ELSE","else",112],["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n          ",112],["T_COMMENT","\/\/ Set zero if this comment is on the same level as the previous one\n",113],["T_WHITESPACE","          ",114],["T_COMMENT","\/\/ or negative value to point an amount indents to close.\n",114],["T_WHITESPACE","          ",115],["T_VARIABLE","$build",115],"[",["T_VARIABLE","$id",115],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#comment_indent'",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$comment_indent",115],["T_WHITESPACE"," ",115],"-",["T_WHITESPACE"," ",115],["T_VARIABLE","$current_indent",115],";",["T_WHITESPACE","\n          ",115],["T_VARIABLE","$current_indent",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$comment_indent",116],";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n      ",117],"}",["T_WHITESPACE","\n\n      ",118],["T_COMMENT","\/\/ Commented entities already loaded after self::getBuildDefaults().\n",120],["T_WHITESPACE","      ",121],["T_VARIABLE","$commented_entity",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$entity",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getCommentedEntity",121],"(",")",";",["T_WHITESPACE","\n\n      ",121],["T_VARIABLE","$build",123],"[",["T_VARIABLE","$id",123],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#entity'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$entity",123],";",["T_WHITESPACE","\n      ",123],["T_VARIABLE","$build",124],"[",["T_VARIABLE","$id",124],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#theme'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'comment__'",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$entity",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getFieldName",124],"(",")",["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'__'",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$commented_entity",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","bundle",124],"(",")",";",["T_WHITESPACE","\n\n      ",124],["T_VARIABLE","$display",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$displays",126],"[",["T_VARIABLE","$entity",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","bundle",126],"(",")","]",";",["T_WHITESPACE","\n      ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$display",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getComponent",127],"(",["T_CONSTANT_ENCAPSED_STRING","'links'",127],")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$build",128],"[",["T_VARIABLE","$id",128],"]","[",["T_CONSTANT_ENCAPSED_STRING","'links'",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_WHITESPACE","\n          ",128],["T_CONSTANT_ENCAPSED_STRING","'#lazy_builder'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'comment.lazy_builders:renderLinks'",129],",",["T_WHITESPACE"," ",129],"[",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$entity",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","id",130],"(",")",",",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$view_mode",131],",",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$entity",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","language",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getId",132],"(",")",",",["T_WHITESPACE","\n            ",132],"!",["T_EMPTY","empty",133],"(",["T_VARIABLE","$entity",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","in_preview",133],")",",",["T_WHITESPACE","\n          ",133],"]","]",",",["T_WHITESPACE","\n          ",134],["T_CONSTANT_ENCAPSED_STRING","'#create_placeholder'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_STRING","TRUE",135],",",["T_WHITESPACE","\n        ",135],")",";",["T_WHITESPACE","\n      ",136],"}",["T_WHITESPACE","\n\n      ",137],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_ISSET","isset",139],"(",["T_VARIABLE","$build",139],"[",["T_VARIABLE","$id",139],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",139],"]",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$build",140],"[",["T_VARIABLE","$id",140],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",")",";",["T_WHITESPACE","\n      ",140],"}",["T_WHITESPACE","\n      ",141],["T_VARIABLE","$build",142],"[",["T_VARIABLE","$id",142],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",142],"]","[",["T_CONSTANT_ENCAPSED_STRING","'library'",142],"]","[","]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'comment\/drupal.comment-by-viewer'",142],";",["T_WHITESPACE","\n      ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","moduleHandler",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","moduleExists",143],"(",["T_CONSTANT_ENCAPSED_STRING","'history'",143],")",["T_WHITESPACE"," ",143],["T_BOOLEAN_AND","&&",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","currentUser",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","isAuthenticated",143],"(",")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$build",144],"[",["T_VARIABLE","$id",144],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",144],"]","[",["T_CONSTANT_ENCAPSED_STRING","'library'",144],"]","[","]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'comment\/drupal.comment-new-indicator'",144],";",["T_WHITESPACE","\n\n        ",144],["T_COMMENT","\/\/ Embed the metadata for the comment \"new\" indicators on this node.\n",146],["T_WHITESPACE","        ",147],["T_VARIABLE","$build",147],"[",["T_VARIABLE","$id",147],"]","[",["T_CONSTANT_ENCAPSED_STRING","'history'",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],"[",["T_WHITESPACE","\n          ",147],["T_CONSTANT_ENCAPSED_STRING","'#lazy_builder'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],"[",["T_CONSTANT_ENCAPSED_STRING","'history_attach_timestamp'",148],",",["T_WHITESPACE"," ",148],"[",["T_VARIABLE","$commented_entity",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","id",148],"(",")","]","]",",",["T_WHITESPACE","\n          ",148],["T_CONSTANT_ENCAPSED_STRING","'#create_placeholder'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_STRING","TRUE",149],",",["T_WHITESPACE","\n        ",149],"]",";",["T_WHITESPACE","\n      ",150],"}",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n    ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$build",153],"[",["T_VARIABLE","$id",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#comment_threaded'",153],"]",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_COMMENT","\/\/ The final comment must close up some hanging divs.\n",154],["T_WHITESPACE","      ",155],["T_VARIABLE","$build",155],"[",["T_VARIABLE","$id",155],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#comment_indent_final'",155],"]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$current_indent",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n  ",156],"}",["T_WHITESPACE","\n\n  ",157],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",159],["T_WHITESPACE","\n  ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","alterBuild",162],"(",["T_ARRAY","array",162],["T_WHITESPACE"," ",162],"&",["T_VARIABLE","$build",162],",",["T_WHITESPACE"," ",162],["T_STRING","EntityInterface",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$comment",162],",",["T_WHITESPACE"," ",162],["T_STRING","EntityViewDisplayInterface",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$display",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$view_mode",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n    ",162],["T_STRING","parent",163],["T_DOUBLE_COLON","::",163],["T_STRING","alterBuild",163],"(",["T_VARIABLE","$build",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$comment",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$display",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$view_mode",163],")",";",["T_WHITESPACE","\n    ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_EMPTY","empty",164],"(",["T_VARIABLE","$comment",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","in_preview",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n      ",164],["T_VARIABLE","$prefix",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","''",165],";",["T_WHITESPACE","\n\n      ",165],["T_COMMENT","\/\/ Add indentation div or close open divs as needed.\n",167],["T_WHITESPACE","      ",168],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$build",168],"[",["T_CONSTANT_ENCAPSED_STRING","'#comment_threaded'",168],"]",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$prefix",169],["T_WHITESPACE"," ",169],["T_CONCAT_EQUAL",".=",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$build",169],"[",["T_CONSTANT_ENCAPSED_STRING","'#comment_indent'",169],"]",["T_WHITESPACE"," ",169],["T_IS_SMALLER_OR_EQUAL","<=",169],["T_WHITESPACE"," ",169],["T_LNUMBER","0",169],["T_WHITESPACE"," ",169],"?",["T_WHITESPACE"," ",169],["T_STRING","str_repeat",169],"(",["T_CONSTANT_ENCAPSED_STRING","'<\/div>'",169],",",["T_WHITESPACE"," ",169],["T_STRING","abs",169],"(",["T_VARIABLE","$build",169],"[",["T_CONSTANT_ENCAPSED_STRING","'#comment_indent'",169],"]",")",")",["T_WHITESPACE"," ",169],":",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'<div class=\"indented\">'",169],";",["T_WHITESPACE","\n      ",169],"}",["T_WHITESPACE","\n\n      ",170],["T_COMMENT","\/\/ Add anchor for each comment.\n",172],["T_WHITESPACE","      ",173],["T_VARIABLE","$prefix",173],["T_WHITESPACE"," ",173],["T_CONCAT_EQUAL",".=",173],["T_WHITESPACE"," ",173],"\"",["T_ENCAPSED_AND_WHITESPACE","<a id=\\\"comment-",173],["T_CURLY_OPEN","{",173],["T_VARIABLE","$comment",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","id",173],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","\\\"><\/a>\\n",173],"\"",";",["T_WHITESPACE","\n      ",173],["T_VARIABLE","$build",174],"[",["T_CONSTANT_ENCAPSED_STRING","'#prefix'",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$prefix",174],";",["T_WHITESPACE","\n\n      ",174],["T_COMMENT","\/\/ Close all open divs.\n",176],["T_WHITESPACE","      ",177],["T_IF","if",177],["T_WHITESPACE"," ",177],"(","!",["T_EMPTY","empty",177],"(",["T_VARIABLE","$build",177],"[",["T_CONSTANT_ENCAPSED_STRING","'#comment_indent_final'",177],"]",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$build",178],"[",["T_CONSTANT_ENCAPSED_STRING","'#suffix'",178],"]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","str_repeat",178],"(",["T_CONSTANT_ENCAPSED_STRING","'<\/div>'",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$build",178],"[",["T_CONSTANT_ENCAPSED_STRING","'#comment_indent_final'",178],"]",")",";",["T_WHITESPACE","\n      ",178],"}",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n  ",180],"}",["T_WHITESPACE","\n\n",181],"}",["T_WHITESPACE","\n",183]]
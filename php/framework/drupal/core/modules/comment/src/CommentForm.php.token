[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldType",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CommentItemInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Html",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unicode",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Datetime",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DrupalDateTime",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ContentEntityForm",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityConstraintViolationListInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EntityManagerInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Form",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FormStateInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Render",13],["T_NS_SEPARATOR","\\",13],["T_STRING","RendererInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Session",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AccountInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","DependencyInjection",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ContainerInterface",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Base handler for comment forms.\n *\/",17],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","CommentForm",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","ContentEntityForm",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The current user.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountInterface\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$currentUser",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The renderer.\n   *\n   * @var \\Drupal\\Core\\Render\\RendererInterface\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$renderer",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",36],["T_WHITESPACE","\n  ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_STATIC","static",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","create",39],"(",["T_STRING","ContainerInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$container",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_RETURN","return",40],["T_WHITESPACE"," ",40],["T_NEW","new",40],["T_WHITESPACE"," ",40],["T_STATIC","static",40],"(",["T_WHITESPACE","\n      ",40],["T_VARIABLE","$container",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",41],")",",",["T_WHITESPACE","\n      ",41],["T_VARIABLE","$container",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",42],")",",",["T_WHITESPACE","\n      ",42],["T_VARIABLE","$container",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","get",43],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",43],")",["T_WHITESPACE","\n    ",43],")",";",["T_WHITESPACE","\n  ",44],"}",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * Constructs a new CommentForm.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager service.\n   * @param \\Drupal\\Core\\Session\\AccountInterface $current_user\n   *   The current user.\n   * @param \\Drupal\\Core\\Render\\RendererInterface $renderer\n   *   The renderer.\n   *\/",47],["T_WHITESPACE","\n  ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","__construct",57],"(",["T_STRING","EntityManagerInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$entity_manager",57],",",["T_WHITESPACE"," ",57],["T_STRING","AccountInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$current_user",57],",",["T_WHITESPACE"," ",57],["T_STRING","RendererInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$renderer",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n    ",57],["T_STRING","parent",58],["T_DOUBLE_COLON","::",58],["T_STRING","__construct",58],"(",["T_VARIABLE","$entity_manager",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","currentUser",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$current_user",59],";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","renderer",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$renderer",60],";",["T_WHITESPACE","\n  ",60],"}",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",63],["T_WHITESPACE","\n  ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","form",66],"(",["T_ARRAY","array",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$form",66],",",["T_WHITESPACE"," ",66],["T_STRING","FormStateInterface",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$form_state",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n    ",66],["T_DOC_COMMENT","\/** @var \\Drupal\\comment\\CommentInterface $comment *\/",67],["T_WHITESPACE","\n    ",67],["T_VARIABLE","$comment",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","entity",68],";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$entity",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","entityManager",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getStorage",69],"(",["T_VARIABLE","$comment",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getCommentedEntityTypeId",69],"(",")",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","load",69],"(",["T_VARIABLE","$comment",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getCommentedEntityId",69],"(",")",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$field_name",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$comment",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getFieldName",70],"(",")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$field_definition",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","entityManager",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getFieldDefinitions",71],"(",["T_VARIABLE","$entity",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getEntityTypeId",71],"(",")",",",["T_WHITESPACE"," ",71],["T_VARIABLE","$entity",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","bundle",71],"(",")",")","[",["T_VARIABLE","$comment",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getFieldName",71],"(",")","]",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$config",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","config",72],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ In several places within this function, we vary $form on:\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ - The current user's permissions.\n",75],["T_WHITESPACE","    ",76],["T_COMMENT","\/\/ - Whether the current user is authenticated or anonymous.\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ - The 'user.settings' configuration.\n",77],["T_WHITESPACE","    ",78],["T_COMMENT","\/\/ - The comment field's definition.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$form",79],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",79],"]","[",["T_CONSTANT_ENCAPSED_STRING","'contexts'",79],"]","[","]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",79],";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$form",80],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",80],"]","[",["T_CONSTANT_ENCAPSED_STRING","'contexts'",80],"]","[","]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'user.roles:authenticated'",80],";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","renderer",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","addCacheableDependency",81],"(",["T_VARIABLE","$form",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$config",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","renderer",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","addCacheableDependency",82],"(",["T_VARIABLE","$form",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$field_definition",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getConfig",82],"(",["T_VARIABLE","$entity",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","bundle",82],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Use #comment-form as unique jump target, regardless of entity type.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$form",85],"[",["T_CONSTANT_ENCAPSED_STRING","'#id'",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","Html",85],["T_DOUBLE_COLON","::",85],["T_STRING","getUniqueId",85],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_form'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$form",86],"[",["T_CONSTANT_ENCAPSED_STRING","'#theme'",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_form__'",86],["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_VARIABLE","$entity",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getEntityTypeId",86],"(",")",["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'__'",86],["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_VARIABLE","$entity",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","bundle",86],"(",")",["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'__'",86],["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_VARIABLE","$field_name",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'comment_form'",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_VARIABLE","$anonymous_contact",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$field_definition",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getSetting",88],"(",["T_CONSTANT_ENCAPSED_STRING","'anonymous'",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$is_admin",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$comment",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","id",89],"(",")",["T_WHITESPACE"," ",89],["T_BOOLEAN_AND","&&",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","currentUser",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","hasPermission",89],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",89],")",";",["T_WHITESPACE","\n\n    ",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","!",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","currentUser",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","isAuthenticated",91],"(",")",["T_WHITESPACE"," ",91],["T_BOOLEAN_AND","&&",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$anonymous_contact",91],["T_WHITESPACE"," ",91],["T_IS_NOT_EQUAL","!=",91],["T_WHITESPACE"," ",91],["T_STRING","COMMENT_ANONYMOUS_MAYNOT_CONTACT",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$form",92],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",92],"]","[",["T_CONSTANT_ENCAPSED_STRING","'library'",92],"]","[","]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'core\/drupal.form'",92],";",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$form",93],"[",["T_CONSTANT_ENCAPSED_STRING","'#attributes'",93],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data-user-info-from-browser'",93],"]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","TRUE",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_COMMENT","\/\/ If not replying to a comment, use our dedicated page callback for new\n",96],["T_WHITESPACE","    ",97],["T_COMMENT","\/\/ Comments on entities.\n",97],["T_WHITESPACE","    ",98],["T_IF","if",98],["T_WHITESPACE"," ",98],"(","!",["T_VARIABLE","$comment",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","id",98],"(",")",["T_WHITESPACE"," ",98],["T_BOOLEAN_AND","&&",98],["T_WHITESPACE"," ",98],"!",["T_VARIABLE","$comment",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","hasParentComment",98],"(",")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_VARIABLE","$form",99],"[",["T_CONSTANT_ENCAPSED_STRING","'#action'",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","url",99],"(",["T_CONSTANT_ENCAPSED_STRING","'comment.reply'",99],",",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$entity",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getEntityTypeId",99],"(",")",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'entity'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$entity",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","id",99],"(",")",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'field_name'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$field_name",99],")",")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_VARIABLE","$comment_preview",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$form_state",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","get",102],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_preview'",102],")",";",["T_WHITESPACE","\n    ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_ISSET","isset",103],"(",["T_VARIABLE","$comment_preview",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$form",104],["T_WHITESPACE"," ",104],["T_PLUS_EQUAL","+=",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$comment_preview",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_VARIABLE","$form",107],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",";",["T_WHITESPACE","\n    ",107],["T_COMMENT","\/\/ Display author information in a details element for comment moderators.\n",108],["T_WHITESPACE","    ",109],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$is_admin",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n      ",109],["T_VARIABLE","$form",110],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",110],"]",["T_WHITESPACE"," ",110],["T_PLUS_EQUAL","+=",110],["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_WHITESPACE","\n        ",110],["T_CONSTANT_ENCAPSED_STRING","'#type'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'details'",111],",",["T_WHITESPACE","\n        ",111],["T_CONSTANT_ENCAPSED_STRING","'#title'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","t",112],"(",["T_CONSTANT_ENCAPSED_STRING","'Administration'",112],")",",",["T_WHITESPACE","\n      ",112],")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_COMMENT","\/\/ Prepare default values for form elements.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$author",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","''",117],";",["T_WHITESPACE","\n    ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$is_admin",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n      ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_VARIABLE","$comment",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getOwnerId",119],"(",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$author",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$comment",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getAuthorName",120],"(",")",";",["T_WHITESPACE","\n      ",120],"}",["T_WHITESPACE","\n      ",121],["T_VARIABLE","$status",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$comment",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getStatus",122],"(",")",";",["T_WHITESPACE","\n      ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_EMPTY","empty",123],"(",["T_VARIABLE","$comment_preview",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$form",124],"[",["T_CONSTANT_ENCAPSED_STRING","'#title'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","t",124],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit comment %title'",124],",",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_WHITESPACE","\n          ",124],["T_CONSTANT_ENCAPSED_STRING","'%title'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$comment",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getSubject",125],"(",")",",",["T_WHITESPACE","\n        ",125],")",")",";",["T_WHITESPACE","\n      ",126],"}",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n    ",128],["T_ELSE","else",129],["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$status",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","currentUser",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","hasPermission",130],"(",["T_CONSTANT_ENCAPSED_STRING","'skip comment approval'",130],")",["T_WHITESPACE"," ",130],"?",["T_WHITESPACE"," ",130],["T_STRING","CommentInterface",130],["T_DOUBLE_COLON","::",130],["T_STRING","PUBLISHED",130],["T_WHITESPACE"," ",130],":",["T_WHITESPACE"," ",130],["T_STRING","CommentInterface",130],["T_DOUBLE_COLON","::",130],["T_STRING","NOT_PUBLISHED",130],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_VARIABLE","$date",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","''",133],";",["T_WHITESPACE","\n    ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$comment",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","id",134],"(",")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n      ",134],["T_VARIABLE","$date",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],"!",["T_EMPTY","empty",135],"(",["T_VARIABLE","$comment",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","date",135],")",["T_WHITESPACE"," ",135],"?",["T_WHITESPACE"," ",135],["T_VARIABLE","$comment",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","date",135],["T_WHITESPACE"," ",135],":",["T_WHITESPACE"," ",135],["T_STRING","DrupalDateTime",135],["T_DOUBLE_COLON","::",135],["T_STRING","createFromTimestamp",135],"(",["T_VARIABLE","$comment",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getCreatedTime",135],"(",")",")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ The uid field is only displayed when a user with the permission\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ 'administer comments' is editing an existing comment from an\n",139],["T_WHITESPACE","    ",140],["T_COMMENT","\/\/ authenticated user.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$owner",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$comment",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getOwner",141],"(",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$form",142],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",142],"]","[",["T_CONSTANT_ENCAPSED_STRING","'uid'",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],"[",["T_WHITESPACE","\n      ",142],["T_CONSTANT_ENCAPSED_STRING","'#type'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'entity_autocomplete'",143],",",["T_WHITESPACE","\n      ",143],["T_CONSTANT_ENCAPSED_STRING","'#target_type'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'user'",144],",",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$owner",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","isAnonymous",145],"(",")",["T_WHITESPACE"," ",145],"?",["T_WHITESPACE"," ",145],["T_STRING","NULL",145],["T_WHITESPACE"," ",145],":",["T_WHITESPACE"," ",145],["T_VARIABLE","$owner",145],",",["T_WHITESPACE","\n      ",145],["T_COMMENT","\/\/ A comment can be made anonymous by leaving this field empty therefore\n",146],["T_WHITESPACE","      ",147],["T_COMMENT","\/\/ there is no need to list them in the autocomplete.\n",147],["T_WHITESPACE","      ",148],["T_CONSTANT_ENCAPSED_STRING","'#selection_settings'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],"[",["T_CONSTANT_ENCAPSED_STRING","'include_anonymous'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_STRING","FALSE",148],"]",",",["T_WHITESPACE","\n      ",148],["T_CONSTANT_ENCAPSED_STRING","'#title'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","t",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Authored by'",149],")",",",["T_WHITESPACE","\n      ",149],["T_CONSTANT_ENCAPSED_STRING","'#description'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","t",150],"(",["T_CONSTANT_ENCAPSED_STRING","'Leave blank for %anonymous.'",150],",",["T_WHITESPACE"," ",150],"[",["T_CONSTANT_ENCAPSED_STRING","'%anonymous'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$config",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","get",150],"(",["T_CONSTANT_ENCAPSED_STRING","'anonymous'",150],")","]",")",",",["T_WHITESPACE","\n      ",150],["T_CONSTANT_ENCAPSED_STRING","'#access'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$is_admin",151],",",["T_WHITESPACE","\n    ",151],"]",";",["T_WHITESPACE","\n\n    ",152],["T_COMMENT","\/\/ The name field is displayed when an anonymous user is adding a comment or\n",154],["T_WHITESPACE","    ",155],["T_COMMENT","\/\/ when a user with the permission 'administer comments' is editing an\n",155],["T_WHITESPACE","    ",156],["T_COMMENT","\/\/ existing comment from an anonymous user.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$form",157],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",157],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",157],"]",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],"(",["T_WHITESPACE","\n      ",157],["T_CONSTANT_ENCAPSED_STRING","'#type'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'textfield'",158],",",["T_WHITESPACE","\n      ",158],["T_CONSTANT_ENCAPSED_STRING","'#title'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$is_admin",159],["T_WHITESPACE"," ",159],"?",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","t",159],"(",["T_CONSTANT_ENCAPSED_STRING","'Name for @anonymous'",159],",",["T_WHITESPACE"," ",159],"[",["T_CONSTANT_ENCAPSED_STRING","'@anonymous'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$config",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","get",159],"(",["T_CONSTANT_ENCAPSED_STRING","'anonymous'",159],")","]",")",["T_WHITESPACE"," ",159],":",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","t",159],"(",["T_CONSTANT_ENCAPSED_STRING","'Your name'",159],")",",",["T_WHITESPACE","\n      ",159],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$author",160],",",["T_WHITESPACE","\n      ",160],["T_CONSTANT_ENCAPSED_STRING","'#required'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","currentUser",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","isAnonymous",161],"(",")",["T_WHITESPACE"," ",161],["T_BOOLEAN_AND","&&",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$anonymous_contact",161],["T_WHITESPACE"," ",161],["T_IS_EQUAL","==",161],["T_WHITESPACE"," ",161],["T_STRING","COMMENT_ANONYMOUS_MUST_CONTACT",161],")",",",["T_WHITESPACE","\n      ",161],["T_CONSTANT_ENCAPSED_STRING","'#maxlength'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_LNUMBER","60",162],",",["T_WHITESPACE","\n      ",162],["T_CONSTANT_ENCAPSED_STRING","'#access'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","currentUser",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","isAnonymous",163],"(",")",["T_WHITESPACE"," ",163],["T_BOOLEAN_OR","||",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$is_admin",163],",",["T_WHITESPACE","\n      ",163],["T_CONSTANT_ENCAPSED_STRING","'#size'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_LNUMBER","30",164],",",["T_WHITESPACE","\n      ",164],["T_CONSTANT_ENCAPSED_STRING","'#attributes'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],"[",["T_WHITESPACE","\n        ",165],["T_CONSTANT_ENCAPSED_STRING","'data-drupal-default-value'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$config",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","get",166],"(",["T_CONSTANT_ENCAPSED_STRING","'anonymous'",166],")",",",["T_WHITESPACE","\n      ",166],"]",",",["T_WHITESPACE","\n    ",167],")",";",["T_WHITESPACE","\n\n    ",168],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$is_admin",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n      ",170],["T_COMMENT","\/\/ When editing a comment only display the name textfield if the uid field\n",171],["T_WHITESPACE","      ",172],["T_COMMENT","\/\/ is empty.\n",172],["T_WHITESPACE","      ",173],["T_VARIABLE","$form",173],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",173],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",173],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#states'",173],"]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],"[",["T_WHITESPACE","\n        ",173],["T_CONSTANT_ENCAPSED_STRING","'visible'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],"[",["T_WHITESPACE","\n          ",174],["T_CONSTANT_ENCAPSED_STRING","':input[name=\"uid\"]'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_CONSTANT_ENCAPSED_STRING","'empty'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_STRING","TRUE",175],")",",",["T_WHITESPACE","\n        ",175],"]",",",["T_WHITESPACE","\n      ",176],"]",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_COMMENT","\/\/ Add author email and homepage fields depending on the current user.\n",180],["T_WHITESPACE","    ",181],["T_VARIABLE","$form",181],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",181],"]","[",["T_CONSTANT_ENCAPSED_STRING","'mail'",181],"]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",["T_WHITESPACE","\n      ",181],["T_CONSTANT_ENCAPSED_STRING","'#type'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'email'",182],",",["T_WHITESPACE","\n      ",182],["T_CONSTANT_ENCAPSED_STRING","'#title'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","t",183],"(",["T_CONSTANT_ENCAPSED_STRING","'Email'",183],")",",",["T_WHITESPACE","\n      ",183],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$comment",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getAuthorEmail",184],"(",")",",",["T_WHITESPACE","\n      ",184],["T_CONSTANT_ENCAPSED_STRING","'#required'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","currentUser",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","isAnonymous",185],"(",")",["T_WHITESPACE"," ",185],["T_BOOLEAN_AND","&&",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$anonymous_contact",185],["T_WHITESPACE"," ",185],["T_IS_EQUAL","==",185],["T_WHITESPACE"," ",185],["T_STRING","COMMENT_ANONYMOUS_MUST_CONTACT",185],")",",",["T_WHITESPACE","\n      ",185],["T_CONSTANT_ENCAPSED_STRING","'#maxlength'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_LNUMBER","64",186],",",["T_WHITESPACE","\n      ",186],["T_CONSTANT_ENCAPSED_STRING","'#size'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_LNUMBER","30",187],",",["T_WHITESPACE","\n      ",187],["T_CONSTANT_ENCAPSED_STRING","'#description'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","t",188],"(",["T_CONSTANT_ENCAPSED_STRING","'The content of this field is kept private and will not be shown publicly.'",188],")",",",["T_WHITESPACE","\n      ",188],["T_CONSTANT_ENCAPSED_STRING","'#access'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$comment",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getOwner",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","isAnonymous",189],"(",")",["T_WHITESPACE"," ",189],["T_BOOLEAN_AND","&&",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$is_admin",189],")",["T_WHITESPACE"," ",189],["T_BOOLEAN_OR","||",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","currentUser",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","isAnonymous",189],"(",")",["T_WHITESPACE"," ",189],["T_BOOLEAN_AND","&&",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$anonymous_contact",189],["T_WHITESPACE"," ",189],["T_IS_NOT_EQUAL","!=",189],["T_WHITESPACE"," ",189],["T_STRING","COMMENT_ANONYMOUS_MAYNOT_CONTACT",189],")",",",["T_WHITESPACE","\n    ",189],")",";",["T_WHITESPACE","\n\n    ",190],["T_VARIABLE","$form",192],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",192],"]","[",["T_CONSTANT_ENCAPSED_STRING","'homepage'",192],"]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_WHITESPACE","\n      ",192],["T_CONSTANT_ENCAPSED_STRING","'#type'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'url'",193],",",["T_WHITESPACE","\n      ",193],["T_CONSTANT_ENCAPSED_STRING","'#title'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","t",194],"(",["T_CONSTANT_ENCAPSED_STRING","'Homepage'",194],")",",",["T_WHITESPACE","\n      ",194],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$comment",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getHomepage",195],"(",")",",",["T_WHITESPACE","\n      ",195],["T_CONSTANT_ENCAPSED_STRING","'#maxlength'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_LNUMBER","255",196],",",["T_WHITESPACE","\n      ",196],["T_CONSTANT_ENCAPSED_STRING","'#size'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_LNUMBER","30",197],",",["T_WHITESPACE","\n      ",197],["T_CONSTANT_ENCAPSED_STRING","'#access'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$is_admin",198],["T_WHITESPACE"," ",198],["T_BOOLEAN_OR","||",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","currentUser",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","isAnonymous",198],"(",")",["T_WHITESPACE"," ",198],["T_BOOLEAN_AND","&&",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$anonymous_contact",198],["T_WHITESPACE"," ",198],["T_IS_NOT_EQUAL","!=",198],["T_WHITESPACE"," ",198],["T_STRING","COMMENT_ANONYMOUS_MAYNOT_CONTACT",198],")",",",["T_WHITESPACE","\n    ",198],")",";",["T_WHITESPACE","\n\n    ",199],["T_COMMENT","\/\/ Add administrative comment publishing options.\n",201],["T_WHITESPACE","    ",202],["T_VARIABLE","$form",202],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",202],"]","[",["T_CONSTANT_ENCAPSED_STRING","'date'",202],"]",["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_WHITESPACE","\n      ",202],["T_CONSTANT_ENCAPSED_STRING","'#type'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'datetime'",203],",",["T_WHITESPACE","\n      ",203],["T_CONSTANT_ENCAPSED_STRING","'#title'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","t",204],"(",["T_CONSTANT_ENCAPSED_STRING","'Authored on'",204],")",",",["T_WHITESPACE","\n      ",204],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$date",205],",",["T_WHITESPACE","\n      ",205],["T_CONSTANT_ENCAPSED_STRING","'#size'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_LNUMBER","20",206],",",["T_WHITESPACE","\n      ",206],["T_CONSTANT_ENCAPSED_STRING","'#access'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$is_admin",207],",",["T_WHITESPACE","\n    ",207],")",";",["T_WHITESPACE","\n\n    ",208],["T_VARIABLE","$form",210],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",210],"]","[",["T_CONSTANT_ENCAPSED_STRING","'status'",210],"]",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_WHITESPACE","\n      ",210],["T_CONSTANT_ENCAPSED_STRING","'#type'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'radios'",211],",",["T_WHITESPACE","\n      ",211],["T_CONSTANT_ENCAPSED_STRING","'#title'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","t",212],"(",["T_CONSTANT_ENCAPSED_STRING","'Status'",212],")",",",["T_WHITESPACE","\n      ",212],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$status",213],",",["T_WHITESPACE","\n      ",213],["T_CONSTANT_ENCAPSED_STRING","'#options'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_ARRAY","array",214],"(",["T_WHITESPACE","\n        ",214],["T_STRING","CommentInterface",215],["T_DOUBLE_COLON","::",215],["T_STRING","PUBLISHED",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","t",215],"(",["T_CONSTANT_ENCAPSED_STRING","'Published'",215],")",",",["T_WHITESPACE","\n        ",215],["T_STRING","CommentInterface",216],["T_DOUBLE_COLON","::",216],["T_STRING","NOT_PUBLISHED",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","t",216],"(",["T_CONSTANT_ENCAPSED_STRING","'Not published'",216],")",",",["T_WHITESPACE","\n      ",216],")",",",["T_WHITESPACE","\n      ",217],["T_CONSTANT_ENCAPSED_STRING","'#access'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$is_admin",218],",",["T_WHITESPACE","\n    ",218],")",";",["T_WHITESPACE","\n\n    ",219],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_STRING","parent",221],["T_DOUBLE_COLON","::",221],["T_STRING","form",221],"(",["T_VARIABLE","$form",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$form_state",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$comment",221],")",";",["T_WHITESPACE","\n  ",221],"}",["T_WHITESPACE","\n\n  ",222],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",224],["T_WHITESPACE","\n  ",226],["T_PROTECTED","protected",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","actions",227],"(",["T_ARRAY","array",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$form",227],",",["T_WHITESPACE"," ",227],["T_STRING","FormStateInterface",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$form_state",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$element",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","parent",228],["T_DOUBLE_COLON","::",228],["T_STRING","actions",228],"(",["T_VARIABLE","$form",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$form_state",228],")",";",["T_WHITESPACE","\n    ",228],["T_COMMENT","\/* @var \\Drupal\\comment\\CommentInterface $comment *\/",229],["T_WHITESPACE","\n    ",229],["T_VARIABLE","$comment",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","entity",230],";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$entity",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$comment",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getCommentedEntity",231],"(",")",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$field_definition",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","entityManager",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getFieldDefinitions",232],"(",["T_VARIABLE","$entity",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getEntityTypeId",232],"(",")",",",["T_WHITESPACE"," ",232],["T_VARIABLE","$entity",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","bundle",232],"(",")",")","[",["T_VARIABLE","$comment",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getFieldName",232],"(",")","]",";",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$preview_mode",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$field_definition",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getSetting",233],"(",["T_CONSTANT_ENCAPSED_STRING","'preview'",233],")",";",["T_WHITESPACE","\n\n    ",233],["T_COMMENT","\/\/ No delete action on the comment form.\n",235],["T_WHITESPACE","    ",236],["T_UNSET","unset",236],"(",["T_VARIABLE","$element",236],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",236],"]",")",";",["T_WHITESPACE","\n\n    ",236],["T_COMMENT","\/\/ Mark the submit action as the primary action, when it appears.\n",238],["T_WHITESPACE","    ",239],["T_VARIABLE","$element",239],"[",["T_CONSTANT_ENCAPSED_STRING","'submit'",239],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#button_type'",239],"]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'primary'",239],";",["T_WHITESPACE","\n\n    ",239],["T_COMMENT","\/\/ Only show the save button if comment previews are optional or if we are\n",241],["T_WHITESPACE","    ",242],["T_COMMENT","\/\/ already previewing the submission.\n",242],["T_WHITESPACE","    ",243],["T_VARIABLE","$element",243],"[",["T_CONSTANT_ENCAPSED_STRING","'submit'",243],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#access'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$comment",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","id",243],"(",")",["T_WHITESPACE"," ",243],["T_BOOLEAN_AND","&&",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","currentUser",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","hasPermission",243],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",243],")",")",["T_WHITESPACE"," ",243],["T_BOOLEAN_OR","||",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$preview_mode",243],["T_WHITESPACE"," ",243],["T_IS_NOT_EQUAL","!=",243],["T_WHITESPACE"," ",243],["T_STRING","DRUPAL_REQUIRED",243],["T_WHITESPACE"," ",243],["T_BOOLEAN_OR","||",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$form_state",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","get",243],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_preview'",243],")",";",["T_WHITESPACE","\n\n    ",243],["T_VARIABLE","$element",245],"[",["T_CONSTANT_ENCAPSED_STRING","'preview'",245],"]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",["T_WHITESPACE","\n      ",245],["T_CONSTANT_ENCAPSED_STRING","'#type'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'submit'",246],",",["T_WHITESPACE","\n      ",246],["T_CONSTANT_ENCAPSED_STRING","'#value'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","t",247],"(",["T_CONSTANT_ENCAPSED_STRING","'Preview'",247],")",",",["T_WHITESPACE","\n      ",247],["T_CONSTANT_ENCAPSED_STRING","'#access'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$preview_mode",248],["T_WHITESPACE"," ",248],["T_IS_NOT_EQUAL","!=",248],["T_WHITESPACE"," ",248],["T_STRING","DRUPAL_DISABLED",248],",",["T_WHITESPACE","\n      ",248],["T_CONSTANT_ENCAPSED_STRING","'#submit'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_ARRAY","array",249],"(",["T_CONSTANT_ENCAPSED_STRING","'::submitForm'",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'::preview'",249],")",",",["T_WHITESPACE","\n    ",249],")",";",["T_WHITESPACE","\n\n    ",250],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$element",252],";",["T_WHITESPACE","\n  ",252],"}",["T_WHITESPACE","\n\n  ",253],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",255],["T_WHITESPACE","\n  ",257],["T_PUBLIC","public",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","buildEntity",258],"(",["T_ARRAY","array",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$form",258],",",["T_WHITESPACE"," ",258],["T_STRING","FormStateInterface",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$form_state",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n    ",258],["T_DOC_COMMENT","\/** @var \\Drupal\\comment\\CommentInterface $comment *\/",259],["T_WHITESPACE","\n    ",259],["T_VARIABLE","$comment",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","parent",260],["T_DOUBLE_COLON","::",260],["T_STRING","buildEntity",260],"(",["T_VARIABLE","$form",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$form_state",260],")",";",["T_WHITESPACE","\n    ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(","!",["T_VARIABLE","$form_state",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","isValueEmpty",261],"(",["T_CONSTANT_ENCAPSED_STRING","'date'",261],")",["T_WHITESPACE"," ",261],["T_BOOLEAN_AND","&&",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$form_state",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getValue",261],"(",["T_CONSTANT_ENCAPSED_STRING","'date'",261],")",["T_WHITESPACE"," ",261],["T_INSTANCEOF","instanceof",261],["T_WHITESPACE"," ",261],["T_STRING","DrupalDateTime",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n      ",261],["T_VARIABLE","$comment",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","setCreatedTime",262],"(",["T_VARIABLE","$form_state",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getValue",262],"(",["T_CONSTANT_ENCAPSED_STRING","'date'",262],")",["T_OBJECT_OPERATOR","->",262],["T_STRING","getTimestamp",262],"(",")",")",";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n    ",263],["T_ELSE","else",264],["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n      ",264],["T_VARIABLE","$comment",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","setCreatedTime",265],"(",["T_STRING","REQUEST_TIME",265],")",";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n    ",266],["T_COMMENT","\/\/ Empty author ID should revert to anonymous.\n",267],["T_WHITESPACE","    ",268],["T_VARIABLE","$author_id",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$form_state",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getValue",268],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",268],")",";",["T_WHITESPACE","\n    ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$comment",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","id",269],"(",")",["T_WHITESPACE"," ",269],["T_BOOLEAN_AND","&&",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","currentUser",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","hasPermission",269],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",269],")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n      ",269],["T_COMMENT","\/\/ Admin can leave the author ID blank to revert to anonymous.\n",270],["T_WHITESPACE","      ",271],["T_VARIABLE","$author_id",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$author_id",271],["T_WHITESPACE"," ",271],"?",":",["T_WHITESPACE"," ",271],["T_LNUMBER","0",271],";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n    ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(","!",["T_STRING","is_null",273],"(",["T_VARIABLE","$author_id",273],")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n      ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$author_id",274],["T_WHITESPACE"," ",274],["T_IS_IDENTICAL","===",274],["T_WHITESPACE"," ",274],["T_LNUMBER","0",274],["T_WHITESPACE"," ",274],["T_BOOLEAN_AND","&&",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$form",274],"[",["T_CONSTANT_ENCAPSED_STRING","'author'",274],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",274],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#access'",274],"]",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n        ",274],["T_COMMENT","\/\/ Use the author name value when the form has access to the element and\n",275],["T_WHITESPACE","        ",276],["T_COMMENT","\/\/ the author ID is anonymous.\n",276],["T_WHITESPACE","        ",277],["T_VARIABLE","$comment",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","setAuthorName",277],"(",["T_VARIABLE","$form_state",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getValue",277],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",277],")",")",";",["T_WHITESPACE","\n      ",277],"}",["T_WHITESPACE","\n      ",278],["T_ELSE","else",279],["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n        ",279],["T_COMMENT","\/\/ Ensure the author name is not set.\n",280],["T_WHITESPACE","        ",281],["T_VARIABLE","$comment",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","setAuthorName",281],"(",["T_STRING","NULL",281],")",";",["T_WHITESPACE","\n      ",281],"}",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n    ",283],["T_ELSE","else",284],["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n      ",284],["T_VARIABLE","$author_id",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","currentUser",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","id",285],"(",")",";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n    ",286],["T_VARIABLE","$comment",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","setOwnerId",287],"(",["T_VARIABLE","$author_id",287],")",";",["T_WHITESPACE","\n\n    ",287],["T_COMMENT","\/\/ Validate the comment's subject. If not specified, extract from comment\n",289],["T_WHITESPACE","    ",290],["T_COMMENT","\/\/ body.\n",290],["T_WHITESPACE","    ",291],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_STRING","trim",291],"(",["T_VARIABLE","$comment",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getSubject",291],"(",")",")",["T_WHITESPACE"," ",291],["T_IS_EQUAL","==",291],["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","''",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n      ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$comment",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","hasField",292],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_body'",292],")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n        ",292],["T_COMMENT","\/\/ The body may be in any format, so:\n",293],["T_WHITESPACE","        ",294],["T_COMMENT","\/\/ 1) Filter it into HTML\n",294],["T_WHITESPACE","        ",295],["T_COMMENT","\/\/ 2) Strip out all HTML tags\n",295],["T_WHITESPACE","        ",296],["T_COMMENT","\/\/ 3) Convert entities back to plain-text.\n",296],["T_WHITESPACE","        ",297],["T_VARIABLE","$comment_text",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$comment",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","comment_body",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","processed",297],";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$comment",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","setSubject",298],"(",["T_STRING","Unicode",298],["T_DOUBLE_COLON","::",298],["T_STRING","truncate",298],"(",["T_STRING","trim",298],"(",["T_STRING","Html",298],["T_DOUBLE_COLON","::",298],["T_STRING","decodeEntities",298],"(",["T_STRING","strip_tags",298],"(",["T_VARIABLE","$comment_text",298],")",")",")",",",["T_WHITESPACE"," ",298],["T_LNUMBER","29",298],",",["T_WHITESPACE"," ",298],["T_STRING","TRUE",298],",",["T_WHITESPACE"," ",298],["T_STRING","TRUE",298],")",")",";",["T_WHITESPACE","\n      ",298],"}",["T_WHITESPACE","\n      ",299],["T_COMMENT","\/\/ Edge cases where the comment body is populated only by HTML tags will\n",300],["T_WHITESPACE","      ",301],["T_COMMENT","\/\/ require a default subject.\n",301],["T_WHITESPACE","      ",302],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$comment",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getSubject",302],"(",")",["T_WHITESPACE"," ",302],["T_IS_EQUAL","==",302],["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","''",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$comment",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","setSubject",303],"(",["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","t",303],"(",["T_CONSTANT_ENCAPSED_STRING","'(No subject)'",303],")",")",";",["T_WHITESPACE","\n      ",303],"}",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n    ",305],["T_RETURN","return",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$comment",306],";",["T_WHITESPACE","\n  ",306],"}",["T_WHITESPACE","\n\n  ",307],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",309],["T_WHITESPACE","\n  ",311],["T_PROTECTED","protected",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","getEditedFieldNames",312],"(",["T_STRING","FormStateInterface",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$form_state",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n    ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_STRING","array_merge",313],"(","[",["T_CONSTANT_ENCAPSED_STRING","'created'",313],",",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'name'",313],"]",",",["T_WHITESPACE"," ",313],["T_STRING","parent",313],["T_DOUBLE_COLON","::",313],["T_STRING","getEditedFieldNames",313],"(",["T_VARIABLE","$form_state",313],")",")",";",["T_WHITESPACE","\n  ",313],"}",["T_WHITESPACE","\n\n  ",314],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",316],["T_WHITESPACE","\n  ",318],["T_PROTECTED","protected",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","flagViolations",319],"(",["T_STRING","EntityConstraintViolationListInterface",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$violations",319],",",["T_WHITESPACE"," ",319],["T_ARRAY","array",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$form",319],",",["T_WHITESPACE"," ",319],["T_STRING","FormStateInterface",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$form_state",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n    ",319],["T_COMMENT","\/\/ Manually flag violations of fields not handled by the form display.\n",320],["T_WHITESPACE","    ",321],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$violations",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getByField",321],"(",["T_CONSTANT_ENCAPSED_STRING","'created'",321],")",["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$violation",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n      ",321],["T_VARIABLE","$form_state",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","setErrorByName",322],"(",["T_CONSTANT_ENCAPSED_STRING","'date'",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$violation",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getMessage",322],"(",")",")",";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n    ",323],["T_FOREACH","foreach",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$violations",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getByField",324],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",324],")",["T_WHITESPACE"," ",324],["T_AS","as",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$violation",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n      ",324],["T_VARIABLE","$form_state",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","setErrorByName",325],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$violation",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getMessage",325],"(",")",")",";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n    ",326],["T_STRING","parent",327],["T_DOUBLE_COLON","::",327],["T_STRING","flagViolations",327],"(",["T_VARIABLE","$violations",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$form",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$form_state",327],")",";",["T_WHITESPACE","\n  ",327],"}",["T_WHITESPACE","\n\n  ",328],["T_DOC_COMMENT","\/**\n   * Form submission handler for the 'preview' action.\n   *\n   * @param array $form\n   *   An associative array containing the structure of the form.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\/",330],["T_WHITESPACE","\n  ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","preview",338],"(",["T_ARRAY","array",338],["T_WHITESPACE"," ",338],"&",["T_VARIABLE","$form",338],",",["T_WHITESPACE"," ",338],["T_STRING","FormStateInterface",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$form_state",338],")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n    ",338],["T_VARIABLE","$comment_preview",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_STRING","comment_preview",339],"(",["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","entity",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$form_state",339],")",";",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$comment_preview",340],"[",["T_CONSTANT_ENCAPSED_STRING","'#title'",340],"]",["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","t",340],"(",["T_CONSTANT_ENCAPSED_STRING","'Preview comment'",340],")",";",["T_WHITESPACE","\n    ",340],["T_VARIABLE","$form_state",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","set",341],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_preview'",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$comment_preview",341],")",";",["T_WHITESPACE","\n    ",341],["T_VARIABLE","$form_state",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","setRebuild",342],"(",")",";",["T_WHITESPACE","\n  ",342],"}",["T_WHITESPACE","\n\n  ",343],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",345],["T_WHITESPACE","\n  ",347],["T_PUBLIC","public",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","save",348],"(",["T_ARRAY","array",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$form",348],",",["T_WHITESPACE"," ",348],["T_STRING","FormStateInterface",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$form_state",348],")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n    ",348],["T_VARIABLE","$comment",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","entity",349],";",["T_WHITESPACE","\n    ",349],["T_VARIABLE","$entity",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$comment",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getCommentedEntity",350],"(",")",";",["T_WHITESPACE","\n    ",350],["T_VARIABLE","$field_name",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$comment",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getFieldName",351],"(",")",";",["T_WHITESPACE","\n    ",351],["T_VARIABLE","$uri",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$entity",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","urlInfo",352],"(",")",";",["T_WHITESPACE","\n    ",352],["T_VARIABLE","$logger",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","logger",353],"(",["T_CONSTANT_ENCAPSED_STRING","'content'",353],")",";",["T_WHITESPACE","\n\n    ",353],["T_IF","if",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","currentUser",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","hasPermission",355],"(",["T_CONSTANT_ENCAPSED_STRING","'post comments'",355],")",["T_WHITESPACE"," ",355],["T_BOOLEAN_AND","&&",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","currentUser",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","hasPermission",355],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",355],")",["T_WHITESPACE"," ",355],["T_BOOLEAN_OR","||",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$entity",355],["T_OBJECT_OPERATOR","->",355],"{",["T_VARIABLE","$field_name",355],"}",["T_OBJECT_OPERATOR","->",355],["T_STRING","status",355],["T_WHITESPACE"," ",355],["T_IS_EQUAL","==",355],["T_WHITESPACE"," ",355],["T_STRING","CommentItemInterface",355],["T_DOUBLE_COLON","::",355],["T_STRING","OPEN",355],")",")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n      ",355],["T_VARIABLE","$comment",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","save",356],"(",")",";",["T_WHITESPACE","\n      ",356],["T_VARIABLE","$form_state",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","setValue",357],"(",["T_CONSTANT_ENCAPSED_STRING","'cid'",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$comment",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","id",357],"(",")",")",";",["T_WHITESPACE","\n\n      ",357],["T_COMMENT","\/\/ Add a log entry.\n",359],["T_WHITESPACE","      ",360],["T_VARIABLE","$logger",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","notice",360],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment posted: %subject.'",360],",",["T_WHITESPACE"," ",360],["T_ARRAY","array",360],"(",["T_WHITESPACE","\n          ",360],["T_CONSTANT_ENCAPSED_STRING","'%subject'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$comment",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getSubject",361],"(",")",",",["T_WHITESPACE","\n          ",361],["T_CONSTANT_ENCAPSED_STRING","'link'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","l",362],"(",["T_STRING","t",362],"(",["T_CONSTANT_ENCAPSED_STRING","'View'",362],")",",",["T_WHITESPACE"," ",362],["T_VARIABLE","$comment",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","urlInfo",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","setOption",362],"(",["T_CONSTANT_ENCAPSED_STRING","'fragment'",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'comment-'",362],["T_WHITESPACE"," ",362],".",["T_WHITESPACE"," ",362],["T_VARIABLE","$comment",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","id",362],"(",")",")",")",["T_WHITESPACE","\n        ",362],")",")",";",["T_WHITESPACE","\n\n      ",363],["T_COMMENT","\/\/ Explain the approval queue if necessary.\n",365],["T_WHITESPACE","      ",366],["T_IF","if",366],["T_WHITESPACE"," ",366],"(","!",["T_VARIABLE","$comment",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","isPublished",366],"(",")",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n        ",366],["T_IF","if",367],["T_WHITESPACE"," ",367],"(","!",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","currentUser",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","hasPermission",367],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",367],")",")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n          ",367],["T_STRING","drupal_set_message",368],"(",["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","t",368],"(",["T_CONSTANT_ENCAPSED_STRING","'Your comment has been queued for review by site administrators and will be published after approval.'",368],")",")",";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n      ",369],"}",["T_WHITESPACE","\n      ",370],["T_ELSE","else",371],["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n        ",371],["T_STRING","drupal_set_message",372],"(",["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","t",372],"(",["T_CONSTANT_ENCAPSED_STRING","'Your comment has been posted.'",372],")",")",";",["T_WHITESPACE","\n      ",372],"}",["T_WHITESPACE","\n      ",373],["T_VARIABLE","$query",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_ARRAY","array",374],"(",")",";",["T_WHITESPACE","\n      ",374],["T_COMMENT","\/\/ Find the current display page for this comment.\n",375],["T_WHITESPACE","      ",376],["T_VARIABLE","$field_definition",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","entityManager",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getFieldDefinitions",376],"(",["T_VARIABLE","$entity",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getEntityTypeId",376],"(",")",",",["T_WHITESPACE"," ",376],["T_VARIABLE","$entity",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","bundle",376],"(",")",")","[",["T_VARIABLE","$field_name",376],"]",";",["T_WHITESPACE","\n      ",376],["T_VARIABLE","$page",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","entityManager",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getStorage",377],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",377],")",["T_OBJECT_OPERATOR","->",377],["T_STRING","getDisplayOrdinal",377],"(",["T_VARIABLE","$comment",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$field_definition",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getSetting",377],"(",["T_CONSTANT_ENCAPSED_STRING","'default_mode'",377],")",",",["T_WHITESPACE"," ",377],["T_VARIABLE","$field_definition",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getSetting",377],"(",["T_CONSTANT_ENCAPSED_STRING","'per_page'",377],")",")",";",["T_WHITESPACE","\n      ",377],["T_IF","if",378],["T_WHITESPACE"," ",378],"(",["T_VARIABLE","$page",378],["T_WHITESPACE"," ",378],">",["T_WHITESPACE"," ",378],["T_LNUMBER","0",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$query",379],"[",["T_CONSTANT_ENCAPSED_STRING","'page'",379],"]",["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$page",379],";",["T_WHITESPACE","\n      ",379],"}",["T_WHITESPACE","\n      ",380],["T_COMMENT","\/\/ Redirect to the newly posted comment.\n",381],["T_WHITESPACE","      ",382],["T_VARIABLE","$uri",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","setOption",382],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$query",382],")",";",["T_WHITESPACE","\n      ",382],["T_VARIABLE","$uri",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","setOption",383],"(",["T_CONSTANT_ENCAPSED_STRING","'fragment'",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'comment-'",383],["T_WHITESPACE"," ",383],".",["T_WHITESPACE"," ",383],["T_VARIABLE","$comment",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","id",383],"(",")",")",";",["T_WHITESPACE","\n    ",383],"}",["T_WHITESPACE","\n    ",384],["T_ELSE","else",385],["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n      ",385],["T_VARIABLE","$logger",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","warning",386],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment: unauthorized comment submitted or comment submitted to a closed post %subject.'",386],",",["T_WHITESPACE"," ",386],["T_ARRAY","array",386],"(",["T_CONSTANT_ENCAPSED_STRING","'%subject'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$comment",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getSubject",386],"(",")",")",")",";",["T_WHITESPACE","\n      ",386],["T_STRING","drupal_set_message",387],"(",["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","t",387],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment: unauthorized comment submitted or comment submitted to a closed post %subject.'",387],",",["T_WHITESPACE"," ",387],["T_ARRAY","array",387],"(",["T_CONSTANT_ENCAPSED_STRING","'%subject'",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$comment",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getSubject",387],"(",")",")",")",",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'error'",387],")",";",["T_WHITESPACE","\n      ",387],["T_COMMENT","\/\/ Redirect the user to the entity they are commenting on.\n",388],["T_WHITESPACE","    ",389],"}",["T_WHITESPACE","\n    ",389],["T_VARIABLE","$form_state",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","setRedirectUrl",390],"(",["T_VARIABLE","$uri",390],")",";",["T_WHITESPACE","\n  ",390],"}",["T_WHITESPACE","\n\n",391],"}",["T_WHITESPACE","\n",393]]
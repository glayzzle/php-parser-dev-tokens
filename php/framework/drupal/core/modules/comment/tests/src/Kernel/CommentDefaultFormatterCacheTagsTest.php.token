[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Tests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CommentTestTrait",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","comment",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CommentInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityKernelTestBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","HttpFoundation",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Request",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","HttpFoundation",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Session",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Session",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","comment",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Comment",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","entity_test",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EntityTest",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Tests the bubbling up of comment cache tags when using the Comment list\n * formatter on an entity.\n *\n * @group comment\n *\/",14],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","CommentDefaultFormatterCacheTagsTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","EntityKernelTestBase",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","CommentTestTrait",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_STATIC","static",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$modules",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'comment'",29],")",";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",31],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","setUp",34],"(",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_STRING","parent",35],["T_DOUBLE_COLON","::",35],["T_STRING","setUp",35],"(",")",";",["T_WHITESPACE","\n\n    ",35],["T_VARIABLE","$session",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","Session",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$request",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","Request",39],["T_DOUBLE_COLON","::",39],["T_STRING","create",39],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$request",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","setSession",40],"(",["T_VARIABLE","$session",40],")",";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/** @var \\Symfony\\Component\\HttpFoundation\\RequestStack $stack *\/",42],["T_WHITESPACE","\n    ",42],["T_VARIABLE","$stack",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","container",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","get",43],"(",["T_CONSTANT_ENCAPSED_STRING","'request_stack'",43],")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$stack",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","pop",44],"(",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$stack",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","push",45],"(",["T_VARIABLE","$request",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ Set the current user to one that can access comments. Specifically, this\n",47],["T_WHITESPACE","    ",48],["T_COMMENT","\/\/ user does not have access to the 'administer comments' permission, to\n",48],["T_WHITESPACE","    ",49],["T_COMMENT","\/\/ ensure only published comments are visible to the end user.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$current_user",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","container",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","get",50],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$current_user",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","setAccount",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","createUser",51],"(",["T_ARRAY","array",51],"(",")",",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'access comments'",51],")",")",")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Install tables and config needed to render comments.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","installSchema",54],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",54],",",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_entity_statistics'",54],")",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","installConfig",55],"(",["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'filter'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'comment'",55],")",")",";",["T_WHITESPACE","\n\n    ",55],["T_COMMENT","\/\/ Comment rendering generates links, so build the router.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","container",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","rebuild",58],"(",")",";",["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/\/ Set up a field, so that the entity that'll be referenced bubbles up a\n",60],["T_WHITESPACE","    ",61],["T_COMMENT","\/\/ cache tag when rendering it entirely.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","addDefaultCommentField",62],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",62],")",";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Tests the bubbling of cache tags.\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","testCacheTags",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",69],["T_WHITESPACE","\n    ",69],["T_VARIABLE","$renderer",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","container",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Create the entity that will be commented upon.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$commented_entity",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","EntityTest",73],["T_DOUBLE_COLON","::",73],["T_STRING","create",73],"(",["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","randomMachineName",73],"(",")",")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$commented_entity",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","save",74],"(",")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Verify cache tags on the rendered entity before it has comments.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$build",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Drupal",77],["T_DOUBLE_COLON","::",77],["T_STRING","entityManager",77],"(",")",["T_WHITESPACE","\n      ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","getViewBuilder",78],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",78],")",["T_WHITESPACE","\n      ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","view",79],"(",["T_VARIABLE","$commented_entity",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$renderer",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","renderRoot",80],"(",["T_VARIABLE","$build",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$expected_cache_tags",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],"[",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'entity_test_view'",82],",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'entity_test:'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$commented_entity",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","id",83],"(",")",",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'config:core.entity_form_display.comment.comment.default'",84],",",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'config:field.field.comment.comment.comment_body'",85],",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'config:field.field.entity_test.entity_test.comment'",86],",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'config:field.storage.comment.comment_body'",87],",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'config:user.settings'",88],",",["T_WHITESPACE","\n    ",88],"]",";",["T_WHITESPACE","\n    ",89],["T_STRING","sort",90],"(",["T_VARIABLE","$expected_cache_tags",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertEqual",91],"(",["T_VARIABLE","$build",91],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",91],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tags'",91],"]",",",["T_WHITESPACE"," ",91],["T_VARIABLE","$expected_cache_tags",91],")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Create a comment on that entity. Comment loading requires that the uid\n",93],["T_WHITESPACE","    ",94],["T_COMMENT","\/\/ also exists in the {users} table.\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$user",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","createUser",95],"(",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$user",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","save",96],"(",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$comment",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","Comment",97],["T_DOUBLE_COLON","::",97],["T_STRING","create",97],"(",["T_ARRAY","array",97],"(",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'subject'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'Llama'",98],",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'comment_body'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",["T_WHITESPACE","\n        ",99],["T_CONSTANT_ENCAPSED_STRING","'value'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'Llamas are cool!'",100],",",["T_WHITESPACE","\n        ",100],["T_CONSTANT_ENCAPSED_STRING","'format'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'plain_text'",101],",",["T_WHITESPACE","\n      ",101],")",",",["T_WHITESPACE","\n      ",102],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$commented_entity",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","id",103],"(",")",",",["T_WHITESPACE","\n      ",103],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",104],",",["T_WHITESPACE","\n      ",104],["T_CONSTANT_ENCAPSED_STRING","'field_name'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'comment'",105],",",["T_WHITESPACE","\n      ",105],["T_CONSTANT_ENCAPSED_STRING","'comment_type'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'comment'",106],",",["T_WHITESPACE","\n      ",106],["T_CONSTANT_ENCAPSED_STRING","'status'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_STRING","CommentInterface",107],["T_DOUBLE_COLON","::",107],["T_STRING","PUBLISHED",107],",",["T_WHITESPACE","\n      ",107],["T_CONSTANT_ENCAPSED_STRING","'uid'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$user",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","id",108],"(",")",",",["T_WHITESPACE","\n    ",108],")",")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$comment",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","save",110],"(",")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Load commented entity so comment_count gets computed.\n",112],["T_WHITESPACE","    ",113],["T_COMMENT","\/\/ @todo Remove the $reset = TRUE parameter after\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/   https:\/\/www.drupal.org\/node\/597236 lands. It's a temporary work-around.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$storage",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","container",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","get",115],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getStorage",115],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$storage",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","resetCache",116],"(","[",["T_VARIABLE","$commented_entity",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","id",116],"(",")","]",")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$commented_entity",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$storage",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","load",117],"(",["T_VARIABLE","$commented_entity",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","id",117],"(",")",")",";",["T_WHITESPACE","\n\n    ",117],["T_COMMENT","\/\/ Verify cache tags on the rendered entity when it has comments.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$build",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Drupal",120],["T_DOUBLE_COLON","::",120],["T_STRING","entityManager",120],"(",")",["T_WHITESPACE","\n      ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","getViewBuilder",121],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",121],")",["T_WHITESPACE","\n      ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","view",122],"(",["T_VARIABLE","$commented_entity",122],")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$renderer",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","renderRoot",123],"(",["T_VARIABLE","$build",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$expected_cache_tags",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],"[",["T_WHITESPACE","\n      ",124],["T_CONSTANT_ENCAPSED_STRING","'entity_test_view'",125],",",["T_WHITESPACE","\n      ",125],["T_CONSTANT_ENCAPSED_STRING","'entity_test:'",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_VARIABLE","$commented_entity",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","id",126],"(",")",",",["T_WHITESPACE","\n      ",126],["T_CONSTANT_ENCAPSED_STRING","'comment_view'",127],",",["T_WHITESPACE","\n      ",127],["T_CONSTANT_ENCAPSED_STRING","'comment:'",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$comment",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","id",128],"(",")",",",["T_WHITESPACE","\n      ",128],["T_CONSTANT_ENCAPSED_STRING","'config:filter.format.plain_text'",129],",",["T_WHITESPACE","\n      ",129],["T_CONSTANT_ENCAPSED_STRING","'user_view'",130],",",["T_WHITESPACE","\n      ",130],["T_CONSTANT_ENCAPSED_STRING","'user:2'",131],",",["T_WHITESPACE","\n      ",131],["T_CONSTANT_ENCAPSED_STRING","'config:core.entity_form_display.comment.comment.default'",132],",",["T_WHITESPACE","\n      ",132],["T_CONSTANT_ENCAPSED_STRING","'config:field.field.comment.comment.comment_body'",133],",",["T_WHITESPACE","\n      ",133],["T_CONSTANT_ENCAPSED_STRING","'config:field.field.entity_test.entity_test.comment'",134],",",["T_WHITESPACE","\n      ",134],["T_CONSTANT_ENCAPSED_STRING","'config:field.storage.comment.comment_body'",135],",",["T_WHITESPACE","\n      ",135],["T_CONSTANT_ENCAPSED_STRING","'config:user.settings'",136],",",["T_WHITESPACE","\n    ",136],"]",";",["T_WHITESPACE","\n    ",137],["T_STRING","sort",138],"(",["T_VARIABLE","$expected_cache_tags",138],")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertEqual",139],"(",["T_VARIABLE","$build",139],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",139],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tags'",139],"]",",",["T_WHITESPACE"," ",139],["T_VARIABLE","$expected_cache_tags",139],")",";",["T_WHITESPACE","\n\n    ",139],["T_COMMENT","\/\/ Build a render array with the entity in a sub-element so that lazy\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ builder elements bubble up outside of the entity and we can check that\n",142],["T_WHITESPACE","    ",143],["T_COMMENT","\/\/ it got the correct cache max age.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$build",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],"[",["T_CONSTANT_ENCAPSED_STRING","'#type'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'container'",144],"]",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$build",145],"[",["T_CONSTANT_ENCAPSED_STRING","'entity'",145],"]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Drupal",145],["T_DOUBLE_COLON","::",145],["T_STRING","entityManager",145],"(",")",["T_WHITESPACE","\n      ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","getViewBuilder",146],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",146],")",["T_WHITESPACE","\n      ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","view",147],"(",["T_VARIABLE","$commented_entity",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$renderer",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","renderRoot",148],"(",["T_VARIABLE","$build",148],")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ The entity itself was cached but the top-level element is max-age 0 due\n",150],["T_WHITESPACE","    ",151],["T_COMMENT","\/\/ to the bubbled up max age due to the lazy-built comment form.\n",151],["T_WHITESPACE","    ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertIdentical",152],"(",["T_STRING","Cache",152],["T_DOUBLE_COLON","::",152],["T_STRING","PERMANENT",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$build",152],"[",["T_CONSTANT_ENCAPSED_STRING","'entity'",152],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",152],"]","[",["T_CONSTANT_ENCAPSED_STRING","'max-age'",152],"]",")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertIdentical",153],"(",["T_LNUMBER","0",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$build",153],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'max-age'",153],"]",",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'Top level render array has max-age 0'",153],")",";",["T_WHITESPACE","\n\n    ",153],["T_COMMENT","\/\/ The children (fields) of the entity render array are only built in case\n",155],["T_WHITESPACE","    ",156],["T_COMMENT","\/\/ of a cache miss.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertFalse",157],"(",["T_ISSET","isset",157],"(",["T_VARIABLE","$build",157],"[",["T_CONSTANT_ENCAPSED_STRING","'entity'",157],"]","[",["T_CONSTANT_ENCAPSED_STRING","'comment'",157],"]",")",",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'Cache hit'",157],")",";",["T_WHITESPACE","\n  ",157],"}",["T_WHITESPACE","\n\n",158],"}",["T_WHITESPACE","\n",160]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","comment",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Comment",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","comment",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CommentType",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","comment",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CommentTestTrait",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Utility",8],["T_NS_SEPARATOR","\\",8],["T_STRING","SafeMarkup",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Session",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AnonymousUserSession",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","entity_test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityTest",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldConfig",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","KernelTests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EntityKernelTestBase",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","simpletest",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TestBase",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","user",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Entity",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Role",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","user",15],["T_NS_SEPARATOR","\\",15],["T_STRING","RoleInterface",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Tests comment field level access.\n *\n * @group comment\n * @group Access\n *\/",17],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","CommentFieldAccessTest",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","EntityKernelTestBase",23],["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\n  ",23],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","CommentTestTrait",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_STATIC","static",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$modules",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'user'",32],")",";",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * Fields that only users with administer comments permissions can change.\n   *\n   * @var array\n   *\/",34],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$administrativeFields",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",["T_WHITESPACE","\n    ",39],["T_CONSTANT_ENCAPSED_STRING","'uid'",40],",",["T_WHITESPACE","\n    ",40],["T_CONSTANT_ENCAPSED_STRING","'status'",41],",",["T_WHITESPACE","\n    ",41],["T_CONSTANT_ENCAPSED_STRING","'created'",42],",",["T_WHITESPACE","\n  ",42],")",";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * These fields are automatically managed and can not be changed by any user.\n   *\n   * @var array\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$readOnlyFields",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n    ",50],["T_CONSTANT_ENCAPSED_STRING","'changed'",51],",",["T_WHITESPACE","\n    ",51],["T_CONSTANT_ENCAPSED_STRING","'hostname'",52],",",["T_WHITESPACE","\n    ",52],["T_CONSTANT_ENCAPSED_STRING","'cid'",53],",",["T_WHITESPACE","\n    ",53],["T_CONSTANT_ENCAPSED_STRING","'thread'",54],",",["T_WHITESPACE","\n  ",54],")",";",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * These fields can be edited on create only.\n   *\n   * @var array\n   *\/",57],["T_WHITESPACE","\n  ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$createOnlyFields",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[",["T_WHITESPACE","\n    ",62],["T_CONSTANT_ENCAPSED_STRING","'uuid'",63],",",["T_WHITESPACE","\n    ",63],["T_CONSTANT_ENCAPSED_STRING","'pid'",64],",",["T_WHITESPACE","\n    ",64],["T_CONSTANT_ENCAPSED_STRING","'comment_type'",65],",",["T_WHITESPACE","\n    ",65],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",66],",",["T_WHITESPACE","\n    ",66],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",67],",",["T_WHITESPACE","\n    ",67],["T_CONSTANT_ENCAPSED_STRING","'field_name'",68],",",["T_WHITESPACE","\n  ",68],"]",";",["T_WHITESPACE","\n\n  ",69],["T_DOC_COMMENT","\/**\n   * These fields can only be edited by the admin or anonymous users if allowed.\n   *\n   * @var array\n   *\/",71],["T_WHITESPACE","\n  ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$contactFields",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_WHITESPACE","\n    ",76],["T_CONSTANT_ENCAPSED_STRING","'name'",77],",",["T_WHITESPACE","\n    ",77],["T_CONSTANT_ENCAPSED_STRING","'mail'",78],",",["T_WHITESPACE","\n    ",78],["T_CONSTANT_ENCAPSED_STRING","'homepage'",79],",",["T_WHITESPACE","\n  ",79],")",";",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_PROTECTED","protected",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","setUp",85],"(",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_STRING","parent",86],["T_DOUBLE_COLON","::",86],["T_STRING","setUp",86],"(",")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","installConfig",87],"(",["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'comment'",87],")",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","installSchema",88],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",88],",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_entity_statistics'",88],")",")",";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * Test permissions on comment fields.\n   *\/",91],["T_WHITESPACE","\n  ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","testAccessToAdministrativeFields",94],"(",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n    ",94],["T_COMMENT","\/\/ Create a comment type.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$comment_type",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","CommentType",96],["T_DOUBLE_COLON","::",96],["T_STRING","create",96],"(","[",["T_WHITESPACE","\n      ",96],["T_CONSTANT_ENCAPSED_STRING","'id'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'comment'",97],",",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'label'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'Default comments'",98],",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'description'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Default comment field'",99],",",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'target_entity_type_id'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",100],",",["T_WHITESPACE","\n    ",100],"]",")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$comment_type",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","save",102],"(",")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Create a comment against a test entity.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$host",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","EntityTest",105],["T_DOUBLE_COLON","::",105],["T_STRING","create",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$host",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","save",106],"(",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ An administrator user. No user exists yet, ensure that the first user\n",108],["T_WHITESPACE","    ",109],["T_COMMENT","\/\/ does not have UID 1.\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$comment_admin_user",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","createUser",110],"(","[",["T_CONSTANT_ENCAPSED_STRING","'uid'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_LNUMBER","2",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'name'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'admin'",110],"]",",",["T_WHITESPACE"," ",110],"[",["T_WHITESPACE","\n      ",110],["T_CONSTANT_ENCAPSED_STRING","'administer comments'",111],",",["T_WHITESPACE","\n      ",111],["T_CONSTANT_ENCAPSED_STRING","'access comments'",112],",",["T_WHITESPACE","\n    ",112],"]",")",";",["T_WHITESPACE","\n\n    ",113],["T_COMMENT","\/\/ Two comment enabled users, one with edit access.\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$comment_enabled_user",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","createUser",116],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'enabled'",116],"]",",",["T_WHITESPACE"," ",116],"[",["T_WHITESPACE","\n      ",116],["T_CONSTANT_ENCAPSED_STRING","'post comments'",117],",",["T_WHITESPACE","\n      ",117],["T_CONSTANT_ENCAPSED_STRING","'skip comment approval'",118],",",["T_WHITESPACE","\n      ",118],["T_CONSTANT_ENCAPSED_STRING","'edit own comments'",119],",",["T_WHITESPACE","\n      ",119],["T_CONSTANT_ENCAPSED_STRING","'access comments'",120],",",["T_WHITESPACE","\n    ",120],"]",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$comment_no_edit_user",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","createUser",122],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'no edit'",122],"]",",",["T_WHITESPACE"," ",122],"[",["T_WHITESPACE","\n      ",122],["T_CONSTANT_ENCAPSED_STRING","'post comments'",123],",",["T_WHITESPACE","\n      ",123],["T_CONSTANT_ENCAPSED_STRING","'skip comment approval'",124],",",["T_WHITESPACE","\n      ",124],["T_CONSTANT_ENCAPSED_STRING","'access comments'",125],",",["T_WHITESPACE","\n    ",125],"]",")",";",["T_WHITESPACE","\n\n    ",126],["T_COMMENT","\/\/ An unprivileged user.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$comment_disabled_user",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","createUser",129],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'disabled'",129],"]",",",["T_WHITESPACE"," ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'access content'",129],"]",")",";",["T_WHITESPACE","\n\n    ",129],["T_VARIABLE","$role",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","Role",131],["T_DOUBLE_COLON","::",131],["T_STRING","load",131],"(",["T_STRING","RoleInterface",131],["T_DOUBLE_COLON","::",131],["T_STRING","ANONYMOUS_ID",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$role",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","grantPermission",132],"(",["T_CONSTANT_ENCAPSED_STRING","'post comments'",132],")",["T_WHITESPACE","\n      ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","save",133],"(",")",";",["T_WHITESPACE","\n\n    ",133],["T_VARIABLE","$anonymous_user",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_NEW","new",135],["T_WHITESPACE"," ",135],["T_STRING","AnonymousUserSession",135],"(",")",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ Add two fields.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","addDefaultCommentField",138],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'comment'",138],")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","addDefaultCommentField",139],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'comment_other'",139],")",";",["T_WHITESPACE","\n\n    ",139],["T_COMMENT","\/\/ Change the second field's anonymous contact setting.\n",141],["T_WHITESPACE","    ",142],["T_VARIABLE","$instance",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","FieldConfig",142],["T_DOUBLE_COLON","::",142],["T_STRING","loadByName",142],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'comment_other'",142],")",";",["T_WHITESPACE","\n    ",142],["T_COMMENT","\/\/ Default is 'May not contact', for this field - they may contact.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$instance",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setSetting",144],"(",["T_CONSTANT_ENCAPSED_STRING","'anonymous'",144],",",["T_WHITESPACE"," ",144],["T_STRING","COMMENT_ANONYMOUS_MAY_CONTACT",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$instance",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","save",145],"(",")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ Create three \"Comments\". One is owned by our edit-enabled user.\n",147],["T_WHITESPACE","    ",148],["T_VARIABLE","$comment1",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","Comment",148],["T_DOUBLE_COLON","::",148],["T_STRING","create",148],"(","[",["T_WHITESPACE","\n      ",148],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",149],",",["T_WHITESPACE","\n      ",149],["T_CONSTANT_ENCAPSED_STRING","'name'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'Tony'",150],",",["T_WHITESPACE","\n      ",150],["T_CONSTANT_ENCAPSED_STRING","'hostname'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'magic.example.com'",151],",",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'mail'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'tonythemagicalpony@example.com'",152],",",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'subject'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'Bruce the Mesopotamian moose'",153],",",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$host",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","id",154],"(",")",",",["T_WHITESPACE","\n      ",154],["T_CONSTANT_ENCAPSED_STRING","'comment_type'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'comment'",155],",",["T_WHITESPACE","\n      ",155],["T_CONSTANT_ENCAPSED_STRING","'field_name'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'comment'",156],",",["T_WHITESPACE","\n      ",156],["T_CONSTANT_ENCAPSED_STRING","'pid'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_LNUMBER","0",157],",",["T_WHITESPACE","\n      ",157],["T_CONSTANT_ENCAPSED_STRING","'uid'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_LNUMBER","0",158],",",["T_WHITESPACE","\n      ",158],["T_CONSTANT_ENCAPSED_STRING","'status'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_LNUMBER","1",159],",",["T_WHITESPACE","\n    ",159],"]",")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$comment1",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","save",161],"(",")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$comment2",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","Comment",162],["T_DOUBLE_COLON","::",162],["T_STRING","create",162],"(","[",["T_WHITESPACE","\n      ",162],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",163],",",["T_WHITESPACE","\n      ",163],["T_CONSTANT_ENCAPSED_STRING","'hostname'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'magic.example.com'",164],",",["T_WHITESPACE","\n      ",164],["T_CONSTANT_ENCAPSED_STRING","'subject'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'Brian the messed up lion'",165],",",["T_WHITESPACE","\n      ",165],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$host",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","id",166],"(",")",",",["T_WHITESPACE","\n      ",166],["T_CONSTANT_ENCAPSED_STRING","'comment_type'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'comment'",167],",",["T_WHITESPACE","\n      ",167],["T_CONSTANT_ENCAPSED_STRING","'field_name'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'comment'",168],",",["T_WHITESPACE","\n      ",168],["T_CONSTANT_ENCAPSED_STRING","'status'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_LNUMBER","1",169],",",["T_WHITESPACE","\n      ",169],["T_CONSTANT_ENCAPSED_STRING","'pid'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_LNUMBER","0",170],",",["T_WHITESPACE","\n      ",170],["T_CONSTANT_ENCAPSED_STRING","'uid'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$comment_enabled_user",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","id",171],"(",")",",",["T_WHITESPACE","\n    ",171],"]",")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$comment2",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","save",173],"(",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$comment3",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","Comment",174],["T_DOUBLE_COLON","::",174],["T_STRING","create",174],"(","[",["T_WHITESPACE","\n      ",174],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",175],",",["T_WHITESPACE","\n      ",175],["T_CONSTANT_ENCAPSED_STRING","'hostname'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'magic.example.com'",176],",",["T_WHITESPACE","\n      ",176],["T_COMMENT","\/\/ Unpublished.\n",177],["T_WHITESPACE","      ",178],["T_CONSTANT_ENCAPSED_STRING","'status'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],",",["T_WHITESPACE","\n      ",178],["T_CONSTANT_ENCAPSED_STRING","'subject'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'Gail the minky whale'",179],",",["T_WHITESPACE","\n      ",179],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$host",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","id",180],"(",")",",",["T_WHITESPACE","\n      ",180],["T_CONSTANT_ENCAPSED_STRING","'comment_type'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'comment'",181],",",["T_WHITESPACE","\n      ",181],["T_CONSTANT_ENCAPSED_STRING","'field_name'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'comment_other'",182],",",["T_WHITESPACE","\n      ",182],["T_CONSTANT_ENCAPSED_STRING","'pid'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$comment2",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","id",183],"(",")",",",["T_WHITESPACE","\n      ",183],["T_CONSTANT_ENCAPSED_STRING","'uid'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$comment_no_edit_user",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","id",184],"(",")",",",["T_WHITESPACE","\n    ",184],"]",")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$comment3",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","save",186],"(",")",";",["T_WHITESPACE","\n    ",186],["T_COMMENT","\/\/ Note we intentionally don't save this comment so it remains 'new'.\n",187],["T_WHITESPACE","    ",188],["T_VARIABLE","$comment4",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","Comment",188],["T_DOUBLE_COLON","::",188],["T_STRING","create",188],"(","[",["T_WHITESPACE","\n      ",188],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",189],",",["T_WHITESPACE","\n      ",189],["T_CONSTANT_ENCAPSED_STRING","'hostname'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'magic.example.com'",190],",",["T_WHITESPACE","\n      ",190],["T_COMMENT","\/\/ Unpublished.\n",191],["T_WHITESPACE","      ",192],["T_CONSTANT_ENCAPSED_STRING","'status'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_LNUMBER","0",192],",",["T_WHITESPACE","\n      ",192],["T_CONSTANT_ENCAPSED_STRING","'subject'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'Daniel the Cocker-Spaniel'",193],",",["T_WHITESPACE","\n      ",193],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$host",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","id",194],"(",")",",",["T_WHITESPACE","\n      ",194],["T_CONSTANT_ENCAPSED_STRING","'comment_type'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'comment'",195],",",["T_WHITESPACE","\n      ",195],["T_CONSTANT_ENCAPSED_STRING","'field_name'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'comment_other'",196],",",["T_WHITESPACE","\n      ",196],["T_CONSTANT_ENCAPSED_STRING","'pid'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],",",["T_WHITESPACE","\n      ",197],["T_CONSTANT_ENCAPSED_STRING","'uid'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$anonymous_user",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","id",198],"(",")",",",["T_WHITESPACE","\n    ",198],"]",")",";",["T_WHITESPACE","\n\n    ",199],["T_COMMENT","\/\/ Generate permutations.\n",201],["T_WHITESPACE","    ",202],["T_VARIABLE","$combinations",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],"[",["T_WHITESPACE","\n      ",202],["T_CONSTANT_ENCAPSED_STRING","'comment'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],"[",["T_VARIABLE","$comment1",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$comment2",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$comment3",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$comment4",203],"]",",",["T_WHITESPACE","\n      ",203],["T_CONSTANT_ENCAPSED_STRING","'user'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],"[",["T_VARIABLE","$comment_admin_user",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$comment_enabled_user",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$comment_no_edit_user",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$comment_disabled_user",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$anonymous_user",204],"]",["T_WHITESPACE","\n    ",204],"]",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$permutations",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","TestBase",206],["T_DOUBLE_COLON","::",206],["T_STRING","generatePermutations",206],"(",["T_VARIABLE","$combinations",206],")",";",["T_WHITESPACE","\n\n    ",206],["T_COMMENT","\/\/ Check access to administrative fields.\n",208],["T_WHITESPACE","    ",209],["T_FOREACH","foreach",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","administrativeFields",209],["T_WHITESPACE"," ",209],["T_AS","as",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$field",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n      ",209],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$permutations",210],["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$set",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$may_view",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$set",211],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",211],"]",["T_OBJECT_OPERATOR","->",211],"{",["T_VARIABLE","$field",211],"}",["T_OBJECT_OPERATOR","->",211],["T_STRING","access",211],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$set",211],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",211],"]",")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$may_update",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$set",212],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",212],"]",["T_OBJECT_OPERATOR","->",212],"{",["T_VARIABLE","$field",212],"}",["T_OBJECT_OPERATOR","->",212],["T_STRING","access",212],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$set",212],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",212],"]",")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","assertTrue",213],"(",["T_VARIABLE","$may_view",213],",",["T_WHITESPACE"," ",213],["T_STRING","SafeMarkup",213],["T_DOUBLE_COLON","::",213],["T_STRING","format",213],"(",["T_CONSTANT_ENCAPSED_STRING","'User @user can view field @field on comment @comment'",213],",",["T_WHITESPACE"," ",213],"[",["T_WHITESPACE","\n          ",213],["T_CONSTANT_ENCAPSED_STRING","'@user'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$set",214],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",214],"]",["T_OBJECT_OPERATOR","->",214],["T_STRING","getUsername",214],"(",")",",",["T_WHITESPACE","\n          ",214],["T_CONSTANT_ENCAPSED_STRING","'@comment'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$set",215],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",215],"]",["T_OBJECT_OPERATOR","->",215],["T_STRING","getSubject",215],"(",")",",",["T_WHITESPACE","\n          ",215],["T_CONSTANT_ENCAPSED_STRING","'@field'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$field",216],",",["T_WHITESPACE","\n        ",216],"]",")",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertEqual",218],"(",["T_VARIABLE","$may_update",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$set",218],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",218],"]",["T_OBJECT_OPERATOR","->",218],["T_STRING","hasPermission",218],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",218],")",",",["T_WHITESPACE"," ",218],["T_STRING","SafeMarkup",218],["T_DOUBLE_COLON","::",218],["T_STRING","format",218],"(",["T_CONSTANT_ENCAPSED_STRING","'User @user @state update field @field on comment @comment'",218],",",["T_WHITESPACE"," ",218],"[",["T_WHITESPACE","\n          ",218],["T_CONSTANT_ENCAPSED_STRING","'@user'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$set",219],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",219],"]",["T_OBJECT_OPERATOR","->",219],["T_STRING","getUsername",219],"(",")",",",["T_WHITESPACE","\n          ",219],["T_CONSTANT_ENCAPSED_STRING","'@state'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$may_update",220],["T_WHITESPACE"," ",220],"?",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'can'",220],["T_WHITESPACE"," ",220],":",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'cannot'",220],",",["T_WHITESPACE","\n          ",220],["T_CONSTANT_ENCAPSED_STRING","'@comment'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$set",221],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",221],"]",["T_OBJECT_OPERATOR","->",221],["T_STRING","getSubject",221],"(",")",",",["T_WHITESPACE","\n          ",221],["T_CONSTANT_ENCAPSED_STRING","'@field'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$field",222],",",["T_WHITESPACE","\n        ",222],"]",")",")",";",["T_WHITESPACE","\n      ",223],"}",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_COMMENT","\/\/ Check access to normal field.\n",227],["T_WHITESPACE","    ",228],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$permutations",228],["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$set",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n      ",228],["T_VARIABLE","$may_update",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$set",229],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",229],"]",["T_OBJECT_OPERATOR","->",229],["T_STRING","access",229],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$set",229],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",229],"]",")",["T_WHITESPACE"," ",229],["T_BOOLEAN_AND","&&",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$set",229],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",229],"]",["T_OBJECT_OPERATOR","->",229],["T_STRING","subject",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","access",229],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$set",229],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",229],"]",")",";",["T_WHITESPACE","\n      ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","assertEqual",230],"(",["T_VARIABLE","$may_update",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$set",230],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",230],"]",["T_OBJECT_OPERATOR","->",230],["T_STRING","hasPermission",230],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",230],")",["T_WHITESPACE"," ",230],["T_BOOLEAN_OR","||",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$set",230],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",230],"]",["T_OBJECT_OPERATOR","->",230],["T_STRING","hasPermission",230],"(",["T_CONSTANT_ENCAPSED_STRING","'edit own comments'",230],")",["T_WHITESPACE"," ",230],["T_BOOLEAN_AND","&&",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$set",230],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",230],"]",["T_OBJECT_OPERATOR","->",230],["T_STRING","id",230],"(",")",["T_WHITESPACE"," ",230],["T_IS_EQUAL","==",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$set",230],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",230],"]",["T_OBJECT_OPERATOR","->",230],["T_STRING","getOwnerId",230],"(",")",")",",",["T_WHITESPACE"," ",230],["T_STRING","SafeMarkup",230],["T_DOUBLE_COLON","::",230],["T_STRING","format",230],"(",["T_CONSTANT_ENCAPSED_STRING","'User @user @state update field subject on comment @comment'",230],",",["T_WHITESPACE"," ",230],"[",["T_WHITESPACE","\n        ",230],["T_CONSTANT_ENCAPSED_STRING","'@user'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$set",231],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",231],"]",["T_OBJECT_OPERATOR","->",231],["T_STRING","getUsername",231],"(",")",",",["T_WHITESPACE","\n        ",231],["T_CONSTANT_ENCAPSED_STRING","'@state'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$may_update",232],["T_WHITESPACE"," ",232],"?",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'can'",232],["T_WHITESPACE"," ",232],":",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'cannot'",232],",",["T_WHITESPACE","\n        ",232],["T_CONSTANT_ENCAPSED_STRING","'@comment'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$set",233],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",233],"]",["T_OBJECT_OPERATOR","->",233],["T_STRING","getSubject",233],"(",")",",",["T_WHITESPACE","\n      ",233],"]",")",")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_COMMENT","\/\/ Check read-only fields.\n",237],["T_WHITESPACE","    ",238],["T_FOREACH","foreach",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","readOnlyFields",238],["T_WHITESPACE"," ",238],["T_AS","as",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$field",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n      ",238],["T_COMMENT","\/\/ Check view operation.\n",239],["T_WHITESPACE","      ",240],["T_FOREACH","foreach",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$permutations",240],["T_WHITESPACE"," ",240],["T_AS","as",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$set",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$may_view",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$set",241],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",241],"]",["T_OBJECT_OPERATOR","->",241],"{",["T_VARIABLE","$field",241],"}",["T_OBJECT_OPERATOR","->",241],["T_STRING","access",241],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$set",241],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",241],"]",")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$may_update",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$set",242],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",242],"]",["T_OBJECT_OPERATOR","->",242],"{",["T_VARIABLE","$field",242],"}",["T_OBJECT_OPERATOR","->",242],["T_STRING","access",242],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$set",242],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",242],"]",")",";",["T_WHITESPACE","\n        ",242],["T_COMMENT","\/\/ Nobody has access to view the hostname field.\n",243],["T_WHITESPACE","        ",244],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$field",244],["T_WHITESPACE"," ",244],["T_IS_IDENTICAL","===",244],["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'hostname'",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n          ",244],["T_VARIABLE","$view_access",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","FALSE",245],";",["T_WHITESPACE","\n          ",245],["T_VARIABLE","$state",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'cannot'",246],";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n        ",247],["T_ELSE","else",248],["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n          ",248],["T_VARIABLE","$view_access",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_STRING","TRUE",249],";",["T_WHITESPACE","\n          ",249],["T_VARIABLE","$state",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'can'",250],";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","assertEqual",252],"(",["T_VARIABLE","$may_view",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$view_access",252],",",["T_WHITESPACE"," ",252],["T_STRING","SafeMarkup",252],["T_DOUBLE_COLON","::",252],["T_STRING","format",252],"(",["T_CONSTANT_ENCAPSED_STRING","'User @user @state view field @field on comment @comment'",252],",",["T_WHITESPACE"," ",252],"[",["T_WHITESPACE","\n          ",252],["T_CONSTANT_ENCAPSED_STRING","'@user'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$set",253],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",253],"]",["T_OBJECT_OPERATOR","->",253],["T_STRING","getUsername",253],"(",")",",",["T_WHITESPACE","\n          ",253],["T_CONSTANT_ENCAPSED_STRING","'@comment'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$set",254],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",254],"]",["T_OBJECT_OPERATOR","->",254],["T_STRING","getSubject",254],"(",")",",",["T_WHITESPACE","\n          ",254],["T_CONSTANT_ENCAPSED_STRING","'@field'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$field",255],",",["T_WHITESPACE","\n          ",255],["T_CONSTANT_ENCAPSED_STRING","'@state'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$state",256],",",["T_WHITESPACE","\n        ",256],"]",")",")",";",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","assertFalse",258],"(",["T_VARIABLE","$may_update",258],",",["T_WHITESPACE"," ",258],["T_STRING","SafeMarkup",258],["T_DOUBLE_COLON","::",258],["T_STRING","format",258],"(",["T_CONSTANT_ENCAPSED_STRING","'User @user @state update field @field on comment @comment'",258],",",["T_WHITESPACE"," ",258],"[",["T_WHITESPACE","\n          ",258],["T_CONSTANT_ENCAPSED_STRING","'@user'",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$set",259],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",259],"]",["T_OBJECT_OPERATOR","->",259],["T_STRING","getUsername",259],"(",")",",",["T_WHITESPACE","\n          ",259],["T_CONSTANT_ENCAPSED_STRING","'@state'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$may_update",260],["T_WHITESPACE"," ",260],"?",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'can'",260],["T_WHITESPACE"," ",260],":",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'cannot'",260],",",["T_WHITESPACE","\n          ",260],["T_CONSTANT_ENCAPSED_STRING","'@comment'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$set",261],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",261],"]",["T_OBJECT_OPERATOR","->",261],["T_STRING","getSubject",261],"(",")",",",["T_WHITESPACE","\n          ",261],["T_CONSTANT_ENCAPSED_STRING","'@field'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$field",262],",",["T_WHITESPACE","\n        ",262],"]",")",")",";",["T_WHITESPACE","\n      ",263],"}",["T_WHITESPACE","\n    ",264],"}",["T_WHITESPACE","\n\n    ",265],["T_COMMENT","\/\/ Check create-only fields.\n",267],["T_WHITESPACE","    ",268],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","createOnlyFields",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$field",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n      ",268],["T_COMMENT","\/\/ Check view operation.\n",269],["T_WHITESPACE","      ",270],["T_FOREACH","foreach",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$permutations",270],["T_WHITESPACE"," ",270],["T_AS","as",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$set",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$may_view",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$set",271],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",271],"]",["T_OBJECT_OPERATOR","->",271],"{",["T_VARIABLE","$field",271],"}",["T_OBJECT_OPERATOR","->",271],["T_STRING","access",271],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$set",271],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",271],"]",")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$may_update",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$set",272],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",272],"]",["T_OBJECT_OPERATOR","->",272],"{",["T_VARIABLE","$field",272],"}",["T_OBJECT_OPERATOR","->",272],["T_STRING","access",272],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$set",272],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",272],"]",")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","assertEqual",273],"(",["T_VARIABLE","$may_view",273],",",["T_WHITESPACE"," ",273],["T_STRING","TRUE",273],",",["T_WHITESPACE"," ",273],["T_STRING","SafeMarkup",273],["T_DOUBLE_COLON","::",273],["T_STRING","format",273],"(",["T_CONSTANT_ENCAPSED_STRING","'User @user can view field @field on comment @comment'",273],",",["T_WHITESPACE"," ",273],"[",["T_WHITESPACE","\n          ",273],["T_CONSTANT_ENCAPSED_STRING","'@user'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$set",274],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",274],"]",["T_OBJECT_OPERATOR","->",274],["T_STRING","getUsername",274],"(",")",",",["T_WHITESPACE","\n          ",274],["T_CONSTANT_ENCAPSED_STRING","'@comment'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$set",275],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",275],"]",["T_OBJECT_OPERATOR","->",275],["T_STRING","getSubject",275],"(",")",",",["T_WHITESPACE","\n          ",275],["T_CONSTANT_ENCAPSED_STRING","'@field'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$field",276],",",["T_WHITESPACE","\n        ",276],"]",")",")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","assertEqual",278],"(",["T_VARIABLE","$may_update",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$set",278],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",278],"]",["T_OBJECT_OPERATOR","->",278],["T_STRING","hasPermission",278],"(",["T_CONSTANT_ENCAPSED_STRING","'post comments'",278],")",["T_WHITESPACE"," ",278],["T_BOOLEAN_AND","&&",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$set",278],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",278],"]",["T_OBJECT_OPERATOR","->",278],["T_STRING","isNew",278],"(",")",",",["T_WHITESPACE"," ",278],["T_STRING","SafeMarkup",278],["T_DOUBLE_COLON","::",278],["T_STRING","format",278],"(",["T_CONSTANT_ENCAPSED_STRING","'User @user @state update field @field on comment @comment'",278],",",["T_WHITESPACE"," ",278],"[",["T_WHITESPACE","\n          ",278],["T_CONSTANT_ENCAPSED_STRING","'@user'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$set",279],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",279],"]",["T_OBJECT_OPERATOR","->",279],["T_STRING","getUsername",279],"(",")",",",["T_WHITESPACE","\n          ",279],["T_CONSTANT_ENCAPSED_STRING","'@state'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$may_update",280],["T_WHITESPACE"," ",280],"?",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'can'",280],["T_WHITESPACE"," ",280],":",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'cannot'",280],",",["T_WHITESPACE","\n          ",280],["T_CONSTANT_ENCAPSED_STRING","'@comment'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$set",281],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",281],"]",["T_OBJECT_OPERATOR","->",281],["T_STRING","getSubject",281],"(",")",",",["T_WHITESPACE","\n          ",281],["T_CONSTANT_ENCAPSED_STRING","'@field'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$field",282],",",["T_WHITESPACE","\n        ",282],"]",")",")",";",["T_WHITESPACE","\n      ",283],"}",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_COMMENT","\/\/ Check contact fields.\n",287],["T_WHITESPACE","    ",288],["T_FOREACH","foreach",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","contactFields",288],["T_WHITESPACE"," ",288],["T_AS","as",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$field",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n      ",288],["T_COMMENT","\/\/ Check view operation.\n",289],["T_WHITESPACE","      ",290],["T_FOREACH","foreach",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$permutations",290],["T_WHITESPACE"," ",290],["T_AS","as",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$set",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$may_update",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$set",291],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",291],"]",["T_OBJECT_OPERATOR","->",291],"{",["T_VARIABLE","$field",291],"}",["T_OBJECT_OPERATOR","->",291],["T_STRING","access",291],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$set",291],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",291],"]",")",";",["T_WHITESPACE","\n        ",291],["T_COMMENT","\/\/ To edit the 'mail' or 'name' field, either the user has the\n",292],["T_WHITESPACE","        ",293],["T_COMMENT","\/\/ \"administer comments\" permissions or the user is anonymous and\n",293],["T_WHITESPACE","        ",294],["T_COMMENT","\/\/ adding a new comment using a field that allows contact details.\n",294],["T_WHITESPACE","        ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","assertEqual",295],"(",["T_VARIABLE","$may_update",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$set",295],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",295],"]",["T_OBJECT_OPERATOR","->",295],["T_STRING","hasPermission",295],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",295],")",["T_WHITESPACE"," ",295],["T_BOOLEAN_OR","||",295],["T_WHITESPACE"," ",295],"(",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$set",296],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",296],"]",["T_OBJECT_OPERATOR","->",296],["T_STRING","isAnonymous",296],"(",")",["T_WHITESPACE"," ",296],["T_BOOLEAN_AND","&&",296],["T_WHITESPACE","\n            ",296],["T_VARIABLE","$set",297],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",297],"]",["T_OBJECT_OPERATOR","->",297],["T_STRING","isNew",297],"(",")",["T_WHITESPACE"," ",297],["T_BOOLEAN_AND","&&",297],["T_WHITESPACE","\n            ",297],["T_VARIABLE","$set",298],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",298],"]",["T_OBJECT_OPERATOR","->",298],["T_STRING","hasPermission",298],"(",["T_CONSTANT_ENCAPSED_STRING","'post comments'",298],")",["T_WHITESPACE"," ",298],["T_BOOLEAN_AND","&&",298],["T_WHITESPACE","\n            ",298],["T_VARIABLE","$set",299],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",299],"]",["T_OBJECT_OPERATOR","->",299],["T_STRING","getFieldName",299],"(",")",["T_WHITESPACE"," ",299],["T_IS_EQUAL","==",299],["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'comment_other'",299],["T_WHITESPACE","\n          ",299],")",",",["T_WHITESPACE"," ",300],["T_STRING","SafeMarkup",300],["T_DOUBLE_COLON","::",300],["T_STRING","format",300],"(",["T_CONSTANT_ENCAPSED_STRING","'User @user @state update field @field on comment @comment'",300],",",["T_WHITESPACE"," ",300],"[",["T_WHITESPACE","\n          ",300],["T_CONSTANT_ENCAPSED_STRING","'@user'",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$set",301],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",301],"]",["T_OBJECT_OPERATOR","->",301],["T_STRING","getUsername",301],"(",")",",",["T_WHITESPACE","\n          ",301],["T_CONSTANT_ENCAPSED_STRING","'@state'",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$may_update",302],["T_WHITESPACE"," ",302],"?",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'can'",302],["T_WHITESPACE"," ",302],":",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'cannot'",302],",",["T_WHITESPACE","\n          ",302],["T_CONSTANT_ENCAPSED_STRING","'@comment'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$set",303],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",303],"]",["T_OBJECT_OPERATOR","->",303],["T_STRING","getSubject",303],"(",")",",",["T_WHITESPACE","\n          ",303],["T_CONSTANT_ENCAPSED_STRING","'@field'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$field",304],",",["T_WHITESPACE","\n        ",304],"]",")",")",";",["T_WHITESPACE","\n      ",305],"}",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n    ",307],["T_FOREACH","foreach",308],["T_WHITESPACE"," ",308],"(",["T_VARIABLE","$permutations",308],["T_WHITESPACE"," ",308],["T_AS","as",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$set",308],")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n      ",308],["T_COMMENT","\/\/ Check no view-access to mail field for other than admin.\n",309],["T_WHITESPACE","      ",310],["T_VARIABLE","$may_view",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$set",310],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",310],"]",["T_OBJECT_OPERATOR","->",310],["T_STRING","mail",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","access",310],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$set",310],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",310],"]",")",";",["T_WHITESPACE","\n      ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","assertEqual",311],"(",["T_VARIABLE","$may_view",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$set",311],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",311],"]",["T_OBJECT_OPERATOR","->",311],["T_STRING","hasPermission",311],"(",["T_CONSTANT_ENCAPSED_STRING","'administer comments'",311],")",")",";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n  ",312],"}",["T_WHITESPACE","\n\n",313],"}",["T_WHITESPACE","\n",315]]
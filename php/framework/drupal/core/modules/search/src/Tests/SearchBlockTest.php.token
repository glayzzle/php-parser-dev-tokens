[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","search",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests if the search form block is available.\n *\n * @group search\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","SearchBlockTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","SearchTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",12],["T_WHITESPACE","\n  ",16],["T_PUBLIC","public",17],["T_WHITESPACE"," ",17],["T_STATIC","static",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$modules",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",17],")",";",["T_WHITESPACE","\n\n  ",17],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","setUp",19],"(",")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n    ",19],["T_STRING","parent",20],["T_DOUBLE_COLON","::",20],["T_STRING","setUp",20],"(",")",";",["T_WHITESPACE","\n\n    ",20],["T_COMMENT","\/\/ Create and log in user.\n",22],["T_WHITESPACE","    ",23],["T_VARIABLE","$admin_user",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","drupalCreateUser",23],"(",["T_ARRAY","array",23],"(",["T_CONSTANT_ENCAPSED_STRING","'administer blocks'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'search content'",23],")",")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","drupalLogin",24],"(",["T_VARIABLE","$admin_user",24],")",";",["T_WHITESPACE","\n  ",24],"}",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Test that the search form block can be placed and works.\n   *\/",27],["T_WHITESPACE","\n  ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","testSearchFormBlock",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\n    ",30],["T_COMMENT","\/\/ Test availability of the search block in the admin \"Place blocks\" list.\n",32],["T_WHITESPACE","    ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","drupalGet",33],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block'",33],")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","clickLinkPartialName",34],"(",["T_CONSTANT_ENCAPSED_STRING","'Place block'",34],")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertLinkByHref",35],"(",["T_CONSTANT_ENCAPSED_STRING","'\/admin\/structure\/block\/add\/search_form_block\/classy'",35],",",["T_WHITESPACE"," ",35],["T_LNUMBER","0",35],",",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'Did not find the search block in block candidate list.'",36],")",";",["T_WHITESPACE","\n\n    ",36],["T_VARIABLE","$block",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","drupalPlaceBlock",38],"(",["T_CONSTANT_ENCAPSED_STRING","'search_form_block'",38],")",";",["T_WHITESPACE","\n\n    ",38],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","drupalGet",40],"(",["T_CONSTANT_ENCAPSED_STRING","''",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertText",41],"(",["T_VARIABLE","$block",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","label",41],"(",")",",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Block title was found.'",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Check that name attribute is not empty.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$pattern",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","\"\/\/input[@type='submit' and @name='']\"",44],";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$elements",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","xpath",45],"(",["T_VARIABLE","$pattern",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertTrue",46],"(",["T_EMPTY","empty",46],"(",["T_VARIABLE","$elements",46],")",",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'The search input field does not have empty name attribute.'",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Test a normal search via the block form, from the front page.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$terms",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'test'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","submitGetForm",50],"(",["T_CONSTANT_ENCAPSED_STRING","''",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$terms",50],",",["T_WHITESPACE"," ",50],["T_STRING","t",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",50],")",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertResponse",51],"(",["T_LNUMBER","200",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertText",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Your search yielded no results'",52],")",";",["T_WHITESPACE","\n\n    ",52],["T_COMMENT","\/\/ Test a search from the block on a 404 page.\n",54],["T_WHITESPACE","    ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","drupalGet",55],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",55],")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertResponse",56],"(",["T_LNUMBER","404",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","submitGetForm",57],"(",["T_STRING","NULL",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$terms",57],",",["T_WHITESPACE"," ",57],["T_STRING","t",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",57],")",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertResponse",58],"(",["T_LNUMBER","200",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertText",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Your search yielded no results'",59],")",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$visibility",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$block",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getVisibility",61],"(",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$visibility",62],"[",["T_CONSTANT_ENCAPSED_STRING","'request_path'",62],"]","[",["T_CONSTANT_ENCAPSED_STRING","'pages'",62],"]",["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'search'",62],";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$block",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setVisibilityConfig",63],"(",["T_CONSTANT_ENCAPSED_STRING","'request_path'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$visibility",63],"[",["T_CONSTANT_ENCAPSED_STRING","'request_path'",63],"]",")",";",["T_WHITESPACE","\n\n    ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","submitGetForm",65],"(",["T_CONSTANT_ENCAPSED_STRING","''",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$terms",65],",",["T_WHITESPACE"," ",65],["T_STRING","t",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",65],")",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertResponse",66],"(",["T_LNUMBER","200",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertText",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Your search yielded no results'",67],")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Confirm that the form submits to the default search page.\n",69],["T_WHITESPACE","    ",70],["T_DOC_COMMENT","\/** @var $search_page_repository \\Drupal\\search\\SearchPageRepositoryInterface *\/",70],["T_WHITESPACE","\n    ",70],["T_VARIABLE","$search_page_repository",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Drupal",71],["T_DOUBLE_COLON","::",71],["T_STRING","service",71],"(",["T_CONSTANT_ENCAPSED_STRING","'search.search_page_repository'",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$entity_id",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$search_page_repository",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getDefaultSearchPage",72],"(",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertEqual",73],"(",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getUrl",74],"(",")",",",["T_WHITESPACE","\n      ",74],["T_NS_SEPARATOR","\\",75],["T_STRING","Drupal",75],["T_DOUBLE_COLON","::",75],["T_STRING","url",75],"(",["T_CONSTANT_ENCAPSED_STRING","'search.view_'",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_VARIABLE","$entity_id",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$terms",75],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",75],"]",")",",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'absolute'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_STRING","TRUE",75],")",")",",",["T_WHITESPACE","\n      ",75],["T_CONSTANT_ENCAPSED_STRING","'Submitted to correct URL.'",76],["T_WHITESPACE","\n    ",76],")",";",["T_WHITESPACE","\n\n    ",77],["T_COMMENT","\/\/ Test an empty search via the block form, from the front page.\n",79],["T_WHITESPACE","    ",80],["T_VARIABLE","$terms",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","''",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","submitGetForm",81],"(",["T_CONSTANT_ENCAPSED_STRING","''",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$terms",81],",",["T_WHITESPACE"," ",81],["T_STRING","t",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",81],")",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertResponse",82],"(",["T_LNUMBER","200",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertText",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter some keywords'",83],")",";",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ Confirm that the user is redirected to the search page, when form is\n",85],["T_WHITESPACE","    ",86],["T_COMMENT","\/\/ submitted empty.\n",86],["T_WHITESPACE","    ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertEqual",87],"(",["T_WHITESPACE","\n      ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getUrl",88],"(",")",",",["T_WHITESPACE","\n      ",88],["T_NS_SEPARATOR","\\",89],["T_STRING","Drupal",89],["T_DOUBLE_COLON","::",89],["T_STRING","url",89],"(",["T_CONSTANT_ENCAPSED_STRING","'search.view_'",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_VARIABLE","$entity_id",89],",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","''",89],")",",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'absolute'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_STRING","TRUE",89],")",")",",",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'Redirected to correct URL.'",90],["T_WHITESPACE","\n    ",90],")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Test that after entering a too-short keyword in the form, you can then\n",93],["T_WHITESPACE","    ",94],["T_COMMENT","\/\/ search again with a longer keyword. First test using the block form.\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","submitGetForm",95],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",95],",",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","randomMachineName",95],"(",["T_LNUMBER","1",95],")",")",",",["T_WHITESPACE"," ",95],["T_STRING","t",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",95],")",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertText",96],"(",["T_CONSTANT_ENCAPSED_STRING","'You must include at least one keyword to match in the content'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'Keyword message is displayed when searching for short word'",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertNoText",97],"(",["T_STRING","t",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter some keywords'",97],")",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'With short word entered, no keywords message is not displayed'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","submitGetForm",98],"(",["T_STRING","NULL",98],",",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","randomMachineName",98],"(",")",")",",",["T_WHITESPACE"," ",98],["T_STRING","t",98],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",98],")",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'search-block-form'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertNoText",99],"(",["T_CONSTANT_ENCAPSED_STRING","'You must include at least one keyword to match in the content'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Keyword message is not displayed when searching for long word after short word search'",99],")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Same test again, using the search page form for the second search this\n",101],["T_WHITESPACE","    ",102],["T_COMMENT","\/\/ time.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","submitGetForm",103],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",103],",",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","randomMachineName",103],"(",["T_LNUMBER","1",103],")",")",",",["T_WHITESPACE"," ",103],["T_STRING","t",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",103],")",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","drupalPostForm",104],"(",["T_STRING","NULL",104],",",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","randomMachineName",104],"(",")",")",",",["T_WHITESPACE"," ",104],["T_STRING","t",104],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",104],")",",",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",",",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'search-form'",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertNoText",105],"(",["T_CONSTANT_ENCAPSED_STRING","'You must include at least one keyword to match in the content'",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'Keyword message is not displayed when searching for long word after short word search'",105],")",";",["T_WHITESPACE","\n\n  ",105],"}",["T_WHITESPACE","\n\n",107],"}",["T_WHITESPACE","\n",109]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","search",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests that the node search query can be altered via the query alter hook.\n *\n * @group search\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","SearchQueryAlterTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","SearchTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n  ",10],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",11],["T_WHITESPACE","\n  ",15],["T_PUBLIC","public",16],["T_WHITESPACE"," ",16],["T_STATIC","static",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$modules",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_ARRAY","array",16],"(",["T_CONSTANT_ENCAPSED_STRING","'search_query_alter'",16],")",";",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Tests that the query alter works.\n   *\/",18],["T_WHITESPACE","\n  ",20],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","testQueryAlter",21],"(",")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_COMMENT","\/\/ Log in with sufficient privileges.\n",22],["T_WHITESPACE","    ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","drupalLogin",23],"(",["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","drupalCreateUser",23],"(",["T_ARRAY","array",23],"(",["T_CONSTANT_ENCAPSED_STRING","'create page content'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'search content'",23],")",")",")",";",["T_WHITESPACE","\n\n    ",23],["T_COMMENT","\/\/ Create a node and an article with the same keyword. The query alter\n",25],["T_WHITESPACE","    ",26],["T_COMMENT","\/\/ test module will alter the query so only articles should be returned.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$data",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_ARRAY","array",27],"(",["T_WHITESPACE","\n      ",27],["T_CONSTANT_ENCAPSED_STRING","'type'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'page'",28],",",["T_WHITESPACE","\n      ",28],["T_CONSTANT_ENCAPSED_STRING","'title'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'test page'",29],",",["T_WHITESPACE","\n      ",29],["T_CONSTANT_ENCAPSED_STRING","'body'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",["T_ARRAY","array",30],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'pizza'",30],")",")",",",["T_WHITESPACE","\n    ",30],")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","drupalCreateNode",32],"(",["T_VARIABLE","$data",32],")",";",["T_WHITESPACE","\n\n    ",32],["T_VARIABLE","$data",34],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",34],"]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'article'",34],";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$data",35],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",35],"]",["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'test article'",35],";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalCreateNode",36],"(",["T_VARIABLE","$data",36],")",";",["T_WHITESPACE","\n\n    ",36],["T_COMMENT","\/\/ Update the search index.\n",38],["T_WHITESPACE","    ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.search'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","createInstance",39],"(",["T_CONSTANT_ENCAPSED_STRING","'node_search'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","updateIndex",39],"(",")",";",["T_WHITESPACE","\n    ",39],["T_STRING","search_update_totals",40],"(",")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ Search for the body keyword 'pizza'.\n",42],["T_WHITESPACE","    ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","drupalPostForm",43],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/node'",43],",",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'keys'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'pizza'",43],")",",",["T_WHITESPACE"," ",43],["T_STRING","t",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",43],")",")",";",["T_WHITESPACE","\n    ",43],["T_COMMENT","\/\/ The article should be there but not the page.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertText",45],"(",["T_CONSTANT_ENCAPSED_STRING","'article'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Article is in search results'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertNoText",46],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'Page is not in search results'",46],")",";",["T_WHITESPACE","\n  ",46],"}",["T_WHITESPACE","\n\n",47],"}",["T_WHITESPACE","\n",49]]
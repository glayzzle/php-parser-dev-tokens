[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","search",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldType",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CommentItemInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","comment",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CommentTestTrait",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Url",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","filter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FilterFormat",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","search",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SearchPage",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Indexes content and tests ranking factors.\n *\n * @group search\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","SearchRankingTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","SearchTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","CommentTestTrait",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * The node search page.\n   *\n   * @var \\Drupal\\search\\SearchPageInterface\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$nodeSearch",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_STATIC","static",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$modules",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_CONSTANT_ENCAPSED_STRING","'statistics'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'comment'",32],")",";",["T_WHITESPACE","\n\n  ",32],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","setUp",34],"(",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_STRING","parent",35],["T_DOUBLE_COLON","::",35],["T_STRING","setUp",35],"(",")",";",["T_WHITESPACE","\n\n    ",35],["T_COMMENT","\/\/ Create a plugin instance.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","nodeSearch",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","SearchPage",38],["T_DOUBLE_COLON","::",38],["T_STRING","load",38],"(",["T_CONSTANT_ENCAPSED_STRING","'node_search'",38],")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Log in with sufficient privileges.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","drupalLogin",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","drupalCreateUser",41],"(",["T_ARRAY","array",41],"(",["T_CONSTANT_ENCAPSED_STRING","'post comments'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'skip comment approval'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'create page content'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'administer search'",41],")",")",")",";",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n  ",42],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","testRankings",44],"(",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_COMMENT","\/\/ Add a comment field.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","addDefaultCommentField",46],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'page'",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Build a list of the rankings to test.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$node_ranks",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",["T_CONSTANT_ENCAPSED_STRING","'sticky'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'promote'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'relevance'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'recent'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'comments'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'views'",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Create nodes for testing.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$nodes",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",";",["T_WHITESPACE","\n    ",52],["T_FOREACH","foreach",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$node_ranks",53],["T_WHITESPACE"," ",53],["T_AS","as",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$node_rank",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$settings",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_WHITESPACE","\n        ",54],["T_CONSTANT_ENCAPSED_STRING","'type'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'page'",55],",",["T_WHITESPACE","\n        ",55],["T_CONSTANT_ENCAPSED_STRING","'comment'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_ARRAY","array",56],"(",["T_WHITESPACE","\n          ",56],["T_CONSTANT_ENCAPSED_STRING","'status'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_STRING","CommentItemInterface",57],["T_DOUBLE_COLON","::",57],["T_STRING","HIDDEN",57],",",["T_WHITESPACE","\n        ",57],")",")",",",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'title'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'Drupal rocks'",59],",",["T_WHITESPACE","\n        ",59],["T_CONSTANT_ENCAPSED_STRING","'body'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_ARRAY","array",60],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","\"Drupal's search rocks\"",60],")",")",",",["T_WHITESPACE","\n        ",60],["T_COMMENT","\/\/ Node is one day old.\n",61],["T_WHITESPACE","        ",62],["T_CONSTANT_ENCAPSED_STRING","'created'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","REQUEST_TIME",62],["T_WHITESPACE"," ",62],"-",["T_WHITESPACE"," ",62],["T_LNUMBER","24",62],["T_WHITESPACE"," ",62],"*",["T_WHITESPACE"," ",62],["T_LNUMBER","3600",62],",",["T_WHITESPACE","\n        ",62],["T_CONSTANT_ENCAPSED_STRING","'sticky'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_LNUMBER","0",63],",",["T_WHITESPACE","\n        ",63],["T_CONSTANT_ENCAPSED_STRING","'promote'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_LNUMBER","0",64],",",["T_WHITESPACE","\n      ",64],")",";",["T_WHITESPACE","\n      ",65],["T_FOREACH","foreach",66],["T_WHITESPACE"," ",66],"(",["T_ARRAY","array",66],"(",["T_LNUMBER","0",66],",",["T_WHITESPACE"," ",66],["T_LNUMBER","1",66],")",["T_WHITESPACE"," ",66],["T_AS","as",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$num",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n        ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$num",67],["T_WHITESPACE"," ",67],["T_IS_EQUAL","==",67],["T_WHITESPACE"," ",67],["T_LNUMBER","1",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n          ",67],["T_SWITCH","switch",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$node_rank",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_CASE","case",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'sticky'",69],":",["T_WHITESPACE","\n            ",69],["T_CASE","case",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'promote'",70],":",["T_WHITESPACE","\n              ",70],["T_VARIABLE","$settings",71],"[",["T_VARIABLE","$node_rank",71],"]",["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_LNUMBER","1",71],";",["T_WHITESPACE","\n              ",71],["T_BREAK","break",72],";",["T_WHITESPACE","\n            ",72],["T_CASE","case",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'relevance'",73],":",["T_WHITESPACE","\n              ",73],["T_VARIABLE","$settings",74],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",74],"]","[",["T_LNUMBER","0",74],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",74],"]",["T_WHITESPACE"," ",74],["T_CONCAT_EQUAL",".=",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","\" really rocks\"",74],";",["T_WHITESPACE","\n              ",74],["T_BREAK","break",75],";",["T_WHITESPACE","\n            ",75],["T_CASE","case",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'recent'",76],":",["T_WHITESPACE","\n              ",76],["T_COMMENT","\/\/ Node is 1 hour hold.\n",77],["T_WHITESPACE","              ",78],["T_VARIABLE","$settings",78],"[",["T_CONSTANT_ENCAPSED_STRING","'created'",78],"]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","REQUEST_TIME",78],["T_WHITESPACE"," ",78],"-",["T_WHITESPACE"," ",78],["T_LNUMBER","3600",78],";",["T_WHITESPACE","\n              ",78],["T_BREAK","break",79],";",["T_WHITESPACE","\n            ",79],["T_CASE","case",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'comments'",80],":",["T_WHITESPACE","\n              ",80],["T_VARIABLE","$settings",81],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",81],"]","[",["T_LNUMBER","0",81],"]","[",["T_CONSTANT_ENCAPSED_STRING","'status'",81],"]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","CommentItemInterface",81],["T_DOUBLE_COLON","::",81],["T_STRING","OPEN",81],";",["T_WHITESPACE","\n              ",81],["T_BREAK","break",82],";",["T_WHITESPACE","\n          ",82],"}",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$nodes",85],"[",["T_VARIABLE","$node_rank",85],"]","[",["T_VARIABLE","$num",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","drupalCreateNode",85],"(",["T_VARIABLE","$settings",85],")",";",["T_WHITESPACE","\n      ",85],"}",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_COMMENT","\/\/ Add a comment to one of the nodes.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$edit",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$edit",91],"[",["T_CONSTANT_ENCAPSED_STRING","'subject[0][value]'",91],"]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'my comment title'",91],";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$edit",92],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_body[0][value]'",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'some random comment'",92],";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","drupalGet",93],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_VARIABLE","$nodes",93],"[",["T_CONSTANT_ENCAPSED_STRING","'comments'",93],"]","[",["T_LNUMBER","1",93],"]",["T_OBJECT_OPERATOR","->",93],["T_STRING","id",93],"(",")",["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'\/comment'",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","drupalPostForm",94],"(",["T_STRING","NULL",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$edit",94],",",["T_WHITESPACE"," ",94],["T_STRING","t",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Preview'",94],")",")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","drupalPostForm",95],"(",["T_STRING","NULL",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$edit",95],",",["T_WHITESPACE"," ",95],["T_STRING","t",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",95],")",")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Enable counting of statistics.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","config",98],"(",["T_CONSTANT_ENCAPSED_STRING","'statistics.settings'",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","set",98],"(",["T_CONSTANT_ENCAPSED_STRING","'count_content_views'",98],",",["T_WHITESPACE"," ",98],["T_LNUMBER","1",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","save",98],"(",")",";",["T_WHITESPACE","\n\n    ",98],["T_COMMENT","\/\/ Simulating content views is kind of difficult in the test. Leave that\n",100],["T_WHITESPACE","    ",101],["T_COMMENT","\/\/ to the Statistics module. So instead go ahead and manually update the\n",101],["T_WHITESPACE","    ",102],["T_COMMENT","\/\/ counter for this node.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$nid",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$nodes",103],"[",["T_CONSTANT_ENCAPSED_STRING","'views'",103],"]","[",["T_LNUMBER","1",103],"]",["T_OBJECT_OPERATOR","->",103],["T_STRING","id",103],"(",")",";",["T_WHITESPACE","\n    ",103],["T_STRING","db_insert",104],"(",["T_CONSTANT_ENCAPSED_STRING","'node_counter'",104],")",["T_WHITESPACE","\n      ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","fields",105],"(",["T_ARRAY","array",105],"(",["T_CONSTANT_ENCAPSED_STRING","'totalcount'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_LNUMBER","5",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'daycount'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_LNUMBER","5",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_STRING","REQUEST_TIME",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'nid'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$nid",105],")",")",["T_WHITESPACE","\n      ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","execute",106],"(",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Run cron to update the search index and comment\/statistics totals.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","cronRun",109],"(",")",";",["T_WHITESPACE","\n\n    ",109],["T_COMMENT","\/\/ Test that the settings form displays the content ranking section.\n",111],["T_WHITESPACE","    ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","drupalGet",112],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/search\/pages\/manage\/node_search'",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertText",113],"(",["T_STRING","t",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Content ranking'",113],")",")",";",["T_WHITESPACE","\n\n    ",113],["T_COMMENT","\/\/ Check that all rankings are visible and set to 0.\n",115],["T_WHITESPACE","    ",116],["T_FOREACH","foreach",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$node_ranks",116],["T_WHITESPACE"," ",116],["T_AS","as",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$node_rank",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n      ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertTrue",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","xpath",117],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[@id=\"edit-rankings-'",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_VARIABLE","$node_rank",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'-value\"]\/\/option[@value=\"0\"]'",117],")",",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'Select list to prioritize '",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_VARIABLE","$node_rank",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","' for node ranks is visible and set to 0.'",117],")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_COMMENT","\/\/ Test each of the possible rankings.\n",120],["T_WHITESPACE","    ",121],["T_VARIABLE","$edit",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",")",";",["T_WHITESPACE","\n    ",121],["T_FOREACH","foreach",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$node_ranks",122],["T_WHITESPACE"," ",122],["T_AS","as",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$node_rank",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n      ",122],["T_COMMENT","\/\/ Enable the ranking we are testing.\n",123],["T_WHITESPACE","      ",124],["T_VARIABLE","$edit",124],"[",["T_CONSTANT_ENCAPSED_STRING","'rankings['",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$node_rank",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'][value]'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_LNUMBER","10",124],";",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","drupalPostForm",125],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/search\/pages\/manage\/node_search'",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$edit",125],",",["T_WHITESPACE"," ",125],["T_STRING","t",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Save search page'",125],")",")",";",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","drupalGet",126],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/search\/pages\/manage\/node_search'",126],")",";",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertTrue",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","xpath",127],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[@id=\"edit-rankings-'",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$node_rank",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'-value\"]\/\/option[@value=\"10\"]'",127],")",",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'Select list to prioritize '",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$node_rank",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","' for node ranks is visible and set to 10.'",127],")",";",["T_WHITESPACE","\n\n      ",127],["T_COMMENT","\/\/ Reload the plugin to get the up-to-date values.\n",129],["T_WHITESPACE","      ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","nodeSearch",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","SearchPage",130],["T_DOUBLE_COLON","::",130],["T_STRING","load",130],"(",["T_CONSTANT_ENCAPSED_STRING","'node_search'",130],")",";",["T_WHITESPACE","\n      ",130],["T_COMMENT","\/\/ Do the search and assert the results.\n",131],["T_WHITESPACE","      ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","nodeSearch",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getPlugin",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","setSearch",132],"(",["T_CONSTANT_ENCAPSED_STRING","'rocks'",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",")",",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",")",")",";",["T_WHITESPACE","\n      ",132],["T_VARIABLE","$set",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","nodeSearch",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getPlugin",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","execute",133],"(",")",";",["T_WHITESPACE","\n      ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertEqual",134],"(",["T_VARIABLE","$set",134],"[",["T_LNUMBER","0",134],"]","[",["T_CONSTANT_ENCAPSED_STRING","'node'",134],"]",["T_OBJECT_OPERATOR","->",134],["T_STRING","id",134],"(",")",",",["T_WHITESPACE"," ",134],["T_VARIABLE","$nodes",134],"[",["T_VARIABLE","$node_rank",134],"]","[",["T_LNUMBER","1",134],"]",["T_OBJECT_OPERATOR","->",134],["T_STRING","id",134],"(",")",",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'Search ranking \"'",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_VARIABLE","$node_rank",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'\" order.'",134],")",";",["T_WHITESPACE","\n\n      ",134],["T_COMMENT","\/\/ Clear this ranking for the next test.\n",136],["T_WHITESPACE","      ",137],["T_VARIABLE","$edit",137],"[",["T_CONSTANT_ENCAPSED_STRING","'rankings['",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$node_rank",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'][value]'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_LNUMBER","0",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ Save the final node_rank change then check that all rankings are visible\n",140],["T_WHITESPACE","    ",141],["T_COMMENT","\/\/ and have been set back to 0.\n",141],["T_WHITESPACE","    ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","drupalPostForm",142],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/search\/pages\/manage\/node_search'",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$edit",142],",",["T_WHITESPACE"," ",142],["T_STRING","t",142],"(",["T_CONSTANT_ENCAPSED_STRING","'Save search page'",142],")",")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","drupalGet",143],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/search\/pages\/manage\/node_search'",143],")",";",["T_WHITESPACE","\n    ",143],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$node_ranks",144],["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$node_rank",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n      ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertTrue",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","xpath",145],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[@id=\"edit-rankings-'",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_VARIABLE","$node_rank",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'-value\"]\/\/option[@value=\"0\"]'",145],")",",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'Select list to prioritize '",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_VARIABLE","$node_rank",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","' for node ranks is visible and set to 0.'",145],")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_COMMENT","\/\/ Try with sticky, then promoted. This is a test for issue\n",148],["T_WHITESPACE","    ",149],["T_COMMENT","\/\/ https:\/\/www.drupal.org\/node\/771596.\n",149],["T_WHITESPACE","    ",150],["T_VARIABLE","$node_ranks",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",["T_WHITESPACE","\n      ",150],["T_CONSTANT_ENCAPSED_STRING","'sticky'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","10",151],",",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'promote'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_LNUMBER","1",152],",",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'relevance'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_LNUMBER","0",153],",",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'recent'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_LNUMBER","0",154],",",["T_WHITESPACE","\n      ",154],["T_CONSTANT_ENCAPSED_STRING","'comments'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],",",["T_WHITESPACE","\n      ",155],["T_CONSTANT_ENCAPSED_STRING","'views'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_LNUMBER","0",156],",",["T_WHITESPACE","\n    ",156],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$configuration",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","nodeSearch",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getPlugin",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","getConfiguration",158],"(",")",";",["T_WHITESPACE","\n    ",158],["T_FOREACH","foreach",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$node_ranks",159],["T_WHITESPACE"," ",159],["T_AS","as",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$var",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$value",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n      ",159],["T_VARIABLE","$configuration",160],"[",["T_CONSTANT_ENCAPSED_STRING","'rankings'",160],"]","[",["T_VARIABLE","$var",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$value",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","nodeSearch",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getPlugin",162],"(",")",["T_OBJECT_OPERATOR","->",162],["T_STRING","setConfiguration",162],"(",["T_VARIABLE","$configuration",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","nodeSearch",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","save",163],"(",")",";",["T_WHITESPACE","\n\n    ",163],["T_COMMENT","\/\/ Do the search and assert the results. The sticky node should show up\n",165],["T_WHITESPACE","    ",166],["T_COMMENT","\/\/ first, then the promoted node, then all the rest.\n",166],["T_WHITESPACE","    ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","nodeSearch",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getPlugin",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","setSearch",167],"(",["T_CONSTANT_ENCAPSED_STRING","'rocks'",167],",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",")",",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",")",")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$set",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","nodeSearch",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getPlugin",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","execute",168],"(",")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertEqual",169],"(",["T_VARIABLE","$set",169],"[",["T_LNUMBER","0",169],"]","[",["T_CONSTANT_ENCAPSED_STRING","'node'",169],"]",["T_OBJECT_OPERATOR","->",169],["T_STRING","id",169],"(",")",",",["T_WHITESPACE"," ",169],["T_VARIABLE","$nodes",169],"[",["T_CONSTANT_ENCAPSED_STRING","'sticky'",169],"]","[",["T_LNUMBER","1",169],"]",["T_OBJECT_OPERATOR","->",169],["T_STRING","id",169],"(",")",",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'Search ranking for sticky first worked.'",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","assertEqual",170],"(",["T_VARIABLE","$set",170],"[",["T_LNUMBER","1",170],"]","[",["T_CONSTANT_ENCAPSED_STRING","'node'",170],"]",["T_OBJECT_OPERATOR","->",170],["T_STRING","id",170],"(",")",",",["T_WHITESPACE"," ",170],["T_VARIABLE","$nodes",170],"[",["T_CONSTANT_ENCAPSED_STRING","'promote'",170],"]","[",["T_LNUMBER","1",170],"]",["T_OBJECT_OPERATOR","->",170],["T_STRING","id",170],"(",")",",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'Search ranking for promoted second worked.'",170],")",";",["T_WHITESPACE","\n\n    ",170],["T_COMMENT","\/\/ Try with recent, then comments. This is a test for issues\n",172],["T_WHITESPACE","    ",173],["T_COMMENT","\/\/ https:\/\/www.drupal.org\/node\/771596 and\n",173],["T_WHITESPACE","    ",174],["T_COMMENT","\/\/ https:\/\/www.drupal.org\/node\/303574.\n",174],["T_WHITESPACE","    ",175],["T_VARIABLE","$node_ranks",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_WHITESPACE","\n      ",175],["T_CONSTANT_ENCAPSED_STRING","'sticky'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_LNUMBER","0",176],",",["T_WHITESPACE","\n      ",176],["T_CONSTANT_ENCAPSED_STRING","'promote'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_LNUMBER","0",177],",",["T_WHITESPACE","\n      ",177],["T_CONSTANT_ENCAPSED_STRING","'relevance'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],",",["T_WHITESPACE","\n      ",178],["T_CONSTANT_ENCAPSED_STRING","'recent'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_LNUMBER","10",179],",",["T_WHITESPACE","\n      ",179],["T_CONSTANT_ENCAPSED_STRING","'comments'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_LNUMBER","1",180],",",["T_WHITESPACE","\n      ",180],["T_CONSTANT_ENCAPSED_STRING","'views'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_LNUMBER","0",181],",",["T_WHITESPACE","\n    ",181],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$configuration",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","nodeSearch",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getPlugin",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","getConfiguration",183],"(",")",";",["T_WHITESPACE","\n    ",183],["T_FOREACH","foreach",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$node_ranks",184],["T_WHITESPACE"," ",184],["T_AS","as",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$var",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$value",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n      ",184],["T_VARIABLE","$configuration",185],"[",["T_CONSTANT_ENCAPSED_STRING","'rankings'",185],"]","[",["T_VARIABLE","$var",185],"]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$value",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","nodeSearch",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getPlugin",187],"(",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","setConfiguration",187],"(",["T_VARIABLE","$configuration",187],")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","nodeSearch",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","save",188],"(",")",";",["T_WHITESPACE","\n\n    ",188],["T_COMMENT","\/\/ Do the search and assert the results. The recent node should show up\n",190],["T_WHITESPACE","    ",191],["T_COMMENT","\/\/ first, then the commented node, then all the rest.\n",191],["T_WHITESPACE","    ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","nodeSearch",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getPlugin",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","setSearch",192],"(",["T_CONSTANT_ENCAPSED_STRING","'rocks'",192],",",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",")",",",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",")",")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$set",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","nodeSearch",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getPlugin",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","execute",193],"(",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertEqual",194],"(",["T_VARIABLE","$set",194],"[",["T_LNUMBER","0",194],"]","[",["T_CONSTANT_ENCAPSED_STRING","'node'",194],"]",["T_OBJECT_OPERATOR","->",194],["T_STRING","id",194],"(",")",",",["T_WHITESPACE"," ",194],["T_VARIABLE","$nodes",194],"[",["T_CONSTANT_ENCAPSED_STRING","'recent'",194],"]","[",["T_LNUMBER","1",194],"]",["T_OBJECT_OPERATOR","->",194],["T_STRING","id",194],"(",")",",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'Search ranking for recent first worked.'",194],")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertEqual",195],"(",["T_VARIABLE","$set",195],"[",["T_LNUMBER","1",195],"]","[",["T_CONSTANT_ENCAPSED_STRING","'node'",195],"]",["T_OBJECT_OPERATOR","->",195],["T_STRING","id",195],"(",")",",",["T_WHITESPACE"," ",195],["T_VARIABLE","$nodes",195],"[",["T_CONSTANT_ENCAPSED_STRING","'comments'",195],"]","[",["T_LNUMBER","1",195],"]",["T_OBJECT_OPERATOR","->",195],["T_STRING","id",195],"(",")",",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'Search ranking for comments second worked.'",195],")",";",["T_WHITESPACE","\n\n  ",195],"}",["T_WHITESPACE","\n\n  ",197],["T_DOC_COMMENT","\/**\n   * Test rankings of HTML tags.\n   *\/",199],["T_WHITESPACE","\n  ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","testHTMLRankings",202],"(",")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$full_html_format",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","FilterFormat",203],["T_DOUBLE_COLON","::",203],["T_STRING","create",203],"(",["T_ARRAY","array",203],"(",["T_WHITESPACE","\n      ",203],["T_CONSTANT_ENCAPSED_STRING","'format'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'full_html'",204],",",["T_WHITESPACE","\n      ",204],["T_CONSTANT_ENCAPSED_STRING","'name'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'Full HTML'",205],",",["T_WHITESPACE","\n    ",205],")",")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$full_html_format",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","save",207],"(",")",";",["T_WHITESPACE","\n\n    ",207],["T_COMMENT","\/\/ Test HTML tags with different weights.\n",209],["T_WHITESPACE","    ",210],["T_VARIABLE","$sorted_tags",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_CONSTANT_ENCAPSED_STRING","'h1'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'h2'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'h3'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'h4'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'a'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'h5'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'h6'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'notag'",210],")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$shuffled_tags",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$sorted_tags",211],";",["T_WHITESPACE","\n\n    ",211],["T_COMMENT","\/\/ Shuffle tags to ensure HTML tags are ranked properly.\n",213],["T_WHITESPACE","    ",214],["T_STRING","shuffle",214],"(",["T_VARIABLE","$shuffled_tags",214],")",";",["T_WHITESPACE","\n    ",214],["T_VARIABLE","$settings",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",["T_WHITESPACE","\n      ",215],["T_CONSTANT_ENCAPSED_STRING","'type'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'page'",216],",",["T_WHITESPACE","\n      ",216],["T_CONSTANT_ENCAPSED_STRING","'title'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'Simple node'",217],",",["T_WHITESPACE","\n    ",217],")",";",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$nodes",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],"(",")",";",["T_WHITESPACE","\n    ",219],["T_FOREACH","foreach",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$shuffled_tags",220],["T_WHITESPACE"," ",220],["T_AS","as",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$tag",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n      ",220],["T_SWITCH","switch",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$tag",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n        ",221],["T_CASE","case",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'a'",222],":",["T_WHITESPACE","\n          ",222],["T_VARIABLE","$settings",223],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",223],"]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",["T_ARRAY","array",223],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_NS_SEPARATOR","\\",223],["T_STRING","Drupal",223],["T_DOUBLE_COLON","::",223],["T_STRING","l",223],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal Rocks'",223],",",["T_WHITESPACE"," ",223],["T_NEW","new",223],["T_WHITESPACE"," ",223],["T_STRING","Url",223],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",223],")",")",",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'format'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'full_html'",223],")",")",";",["T_WHITESPACE","\n          ",223],["T_BREAK","break",224],";",["T_WHITESPACE","\n        ",224],["T_CASE","case",225],["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'notag'",225],":",["T_WHITESPACE","\n          ",225],["T_VARIABLE","$settings",226],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",226],"]",["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_ARRAY","array",226],"(",["T_ARRAY","array",226],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'Drupal Rocks'",226],")",")",";",["T_WHITESPACE","\n          ",226],["T_BREAK","break",227],";",["T_WHITESPACE","\n        ",227],["T_DEFAULT","default",228],":",["T_WHITESPACE","\n          ",228],["T_VARIABLE","$settings",229],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_ARRAY","array",229],"(",["T_ARRAY","array",229],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],"\"",["T_ENCAPSED_AND_WHITESPACE","<",229],["T_VARIABLE","$tag",229],["T_ENCAPSED_AND_WHITESPACE",">Drupal Rocks<\/",229],["T_VARIABLE","$tag",229],["T_ENCAPSED_AND_WHITESPACE",">",229],"\"",",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'format'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'full_html'",229],")",")",";",["T_WHITESPACE","\n          ",229],["T_BREAK","break",230],";",["T_WHITESPACE","\n      ",230],"}",["T_WHITESPACE","\n      ",231],["T_VARIABLE","$nodes",232],"[",["T_VARIABLE","$tag",232],"]",["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","drupalCreateNode",232],"(",["T_VARIABLE","$settings",232],")",";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_COMMENT","\/\/ Update the search index.\n",235],["T_WHITESPACE","    ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","nodeSearch",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getPlugin",236],"(",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","updateIndex",236],"(",")",";",["T_WHITESPACE","\n    ",236],["T_STRING","search_update_totals",237],"(",")",";",["T_WHITESPACE","\n\n    ",237],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","nodeSearch",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getPlugin",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","setSearch",239],"(",["T_CONSTANT_ENCAPSED_STRING","'rocks'",239],",",["T_WHITESPACE"," ",239],["T_ARRAY","array",239],"(",")",",",["T_WHITESPACE"," ",239],["T_ARRAY","array",239],"(",")",")",";",["T_WHITESPACE","\n    ",239],["T_COMMENT","\/\/ Do the search and assert the results.\n",240],["T_WHITESPACE","    ",241],["T_VARIABLE","$set",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","nodeSearch",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getPlugin",241],"(",")",["T_OBJECT_OPERATOR","->",241],["T_STRING","execute",241],"(",")",";",["T_WHITESPACE","\n\n    ",241],["T_COMMENT","\/\/ Test the ranking of each tag.\n",243],["T_WHITESPACE","    ",244],["T_FOREACH","foreach",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$sorted_tags",244],["T_WHITESPACE"," ",244],["T_AS","as",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$tag_rank",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$tag",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n      ",244],["T_COMMENT","\/\/ Assert the results.\n",245],["T_WHITESPACE","      ",246],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$tag",246],["T_WHITESPACE"," ",246],["T_IS_EQUAL","==",246],["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'notag'",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","assertEqual",247],"(",["T_VARIABLE","$set",247],"[",["T_VARIABLE","$tag_rank",247],"]","[",["T_CONSTANT_ENCAPSED_STRING","'node'",247],"]",["T_OBJECT_OPERATOR","->",247],["T_STRING","id",247],"(",")",",",["T_WHITESPACE"," ",247],["T_VARIABLE","$nodes",247],"[",["T_VARIABLE","$tag",247],"]",["T_OBJECT_OPERATOR","->",247],["T_STRING","id",247],"(",")",",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'Search tag ranking for plain text order.'",247],")",";",["T_WHITESPACE","\n      ",247],"}",["T_WHITESPACE","\n      ",248],["T_ELSE","else",249],["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertEqual",250],"(",["T_VARIABLE","$set",250],"[",["T_VARIABLE","$tag_rank",250],"]","[",["T_CONSTANT_ENCAPSED_STRING","'node'",250],"]",["T_OBJECT_OPERATOR","->",250],["T_STRING","id",250],"(",")",",",["T_WHITESPACE"," ",250],["T_VARIABLE","$nodes",250],"[",["T_VARIABLE","$tag",250],"]",["T_OBJECT_OPERATOR","->",250],["T_STRING","id",250],"(",")",",",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'Search tag ranking for \"&lt;'",250],["T_WHITESPACE"," ",250],".",["T_WHITESPACE"," ",250],["T_VARIABLE","$sorted_tags",250],"[",["T_VARIABLE","$tag_rank",250],"]",["T_WHITESPACE"," ",250],".",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'&gt;\" order.'",250],")",";",["T_WHITESPACE","\n      ",250],"}",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_COMMENT","\/\/ Test tags with the same weight against the sorted tags.\n",254],["T_WHITESPACE","    ",255],["T_VARIABLE","$unsorted_tags",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_ARRAY","array",255],"(",["T_CONSTANT_ENCAPSED_STRING","'u'",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'b'",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'i'",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'strong'",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'em'",255],")",";",["T_WHITESPACE","\n    ",255],["T_FOREACH","foreach",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$unsorted_tags",256],["T_WHITESPACE"," ",256],["T_AS","as",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$tag",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n      ",256],["T_VARIABLE","$settings",257],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",257],"]",["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",["T_ARRAY","array",257],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],"\"",["T_ENCAPSED_AND_WHITESPACE","<",257],["T_VARIABLE","$tag",257],["T_ENCAPSED_AND_WHITESPACE",">Drupal Rocks<\/",257],["T_VARIABLE","$tag",257],["T_ENCAPSED_AND_WHITESPACE",">",257],"\"",",",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'format'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'full_html'",257],")",")",";",["T_WHITESPACE","\n      ",257],["T_VARIABLE","$node",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","drupalCreateNode",258],"(",["T_VARIABLE","$settings",258],")",";",["T_WHITESPACE","\n\n      ",258],["T_COMMENT","\/\/ Update the search index.\n",260],["T_WHITESPACE","      ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","nodeSearch",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getPlugin",261],"(",")",["T_OBJECT_OPERATOR","->",261],["T_STRING","updateIndex",261],"(",")",";",["T_WHITESPACE","\n      ",261],["T_STRING","search_update_totals",262],"(",")",";",["T_WHITESPACE","\n\n      ",262],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","nodeSearch",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getPlugin",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","setSearch",264],"(",["T_CONSTANT_ENCAPSED_STRING","'rocks'",264],",",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],"(",")",",",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],"(",")",")",";",["T_WHITESPACE","\n      ",264],["T_COMMENT","\/\/ Do the search and assert the results.\n",265],["T_WHITESPACE","      ",266],["T_VARIABLE","$set",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","nodeSearch",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getPlugin",266],"(",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","execute",266],"(",")",";",["T_WHITESPACE","\n\n      ",266],["T_COMMENT","\/\/ Ranking should always be second to last.\n",268],["T_WHITESPACE","      ",269],["T_VARIABLE","$set",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","array_slice",269],"(",["T_VARIABLE","$set",269],",",["T_WHITESPACE"," ",269],"-",["T_LNUMBER","2",269],",",["T_WHITESPACE"," ",269],["T_LNUMBER","1",269],")",";",["T_WHITESPACE","\n\n      ",269],["T_COMMENT","\/\/ Assert the results.\n",271],["T_WHITESPACE","      ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","assertEqual",272],"(",["T_VARIABLE","$set",272],"[",["T_LNUMBER","0",272],"]","[",["T_CONSTANT_ENCAPSED_STRING","'node'",272],"]",["T_OBJECT_OPERATOR","->",272],["T_STRING","id",272],"(",")",",",["T_WHITESPACE"," ",272],["T_VARIABLE","$node",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","id",272],"(",")",",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'Search tag ranking for \"&lt;'",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_VARIABLE","$tag",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'&gt;\" order.'",272],")",";",["T_WHITESPACE","\n\n      ",272],["T_COMMENT","\/\/ Delete node so it doesn't show up in subsequent search results.\n",274],["T_WHITESPACE","      ",275],["T_VARIABLE","$node",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","delete",275],"(",")",";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n  ",276],"}",["T_WHITESPACE","\n\n",277],"}",["T_WHITESPACE","\n",279]]
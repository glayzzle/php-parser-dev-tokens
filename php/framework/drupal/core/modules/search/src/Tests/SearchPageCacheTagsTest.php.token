[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","search",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests the search_page entity cache tags on the search results pages.\n *\n * @group search\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","SearchPageCacheTagsTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","SearchTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$dumpHeaders",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_STRING","TRUE",17],";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * A user with permission to search content.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$searchingUser",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * A node that is indexed by the search module.\n   *\n   * @var \\Drupal\\node\\NodeInterface\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$node",31],";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","setUp",36],"(",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_STRING","parent",37],["T_DOUBLE_COLON","::",37],["T_STRING","setUp",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Create user.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","searchingUser",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","drupalCreateUser",40],"(",["T_ARRAY","array",40],"(",["T_CONSTANT_ENCAPSED_STRING","'search content'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'access user profiles'",40],")",")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ Create a node and update the search index.\n",42],["T_WHITESPACE","    ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","node",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","drupalCreateNode",43],"(","[",["T_CONSTANT_ENCAPSED_STRING","'title'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'bike shed shop'",43],"]",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","node",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","setOwner",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","searchingUser",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","node",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","save",45],"(",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","container",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","get",46],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.search'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","createInstance",46],"(",["T_CONSTANT_ENCAPSED_STRING","'node_search'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","updateIndex",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_STRING","search_update_totals",47],"(",")",";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Tests the presence of the expected cache tag in various situations.\n   *\/",50],["T_WHITESPACE","\n  ",52],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testSearchText",53],"(",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalLogin",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","searchingUser",54],")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Initial page for searching nodes.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalGet",57],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/node'",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertCacheTag",58],"(",["T_CONSTANT_ENCAPSED_STRING","'config:search.page.node_search'",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertCacheTag",59],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index:node_search'",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertCacheTag",60],"(",["T_CONSTANT_ENCAPSED_STRING","'node_list'",60],")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Node search results.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$edit",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$edit",64],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",64],"]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'bike shed'",64],";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","drupalPostForm",65],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/node'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$edit",65],",",["T_WHITESPACE"," ",65],["T_STRING","t",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",65],")",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertText",66],"(",["T_CONSTANT_ENCAPSED_STRING","'bike shed shop'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertCacheTag",67],"(",["T_CONSTANT_ENCAPSED_STRING","'config:search.page.node_search'",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertCacheTag",68],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertCacheTag",69],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index:node_search'",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertCacheTag",70],"(",["T_CONSTANT_ENCAPSED_STRING","'node:1'",70],")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertCacheTag",71],"(",["T_CONSTANT_ENCAPSED_STRING","'user:2'",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertCacheTag",72],"(",["T_CONSTANT_ENCAPSED_STRING","'rendered'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertCacheTag",73],"(",["T_CONSTANT_ENCAPSED_STRING","'node_list'",73],")",";",["T_WHITESPACE","\n\n    ",73],["T_COMMENT","\/\/ Updating a node should invalidate the search plugin's index cache tag.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","node",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","title",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'bike shop'",76],";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","node",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","save",77],"(",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","drupalPostForm",78],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/node'",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$edit",78],",",["T_WHITESPACE"," ",78],["T_STRING","t",78],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",78],")",")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertText",79],"(",["T_CONSTANT_ENCAPSED_STRING","'bike shop'",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertCacheTag",80],"(",["T_CONSTANT_ENCAPSED_STRING","'config:search.page.node_search'",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertCacheTag",81],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index'",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertCacheTag",82],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index:node_search'",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertCacheTag",83],"(",["T_CONSTANT_ENCAPSED_STRING","'node:1'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertCacheTag",84],"(",["T_CONSTANT_ENCAPSED_STRING","'user:2'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertCacheTag",85],"(",["T_CONSTANT_ENCAPSED_STRING","'rendered'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertCacheTag",86],"(",["T_CONSTANT_ENCAPSED_STRING","'node_list'",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Deleting a node should invalidate the search plugin's index cache tag.\n",88],["T_WHITESPACE","    ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","node",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","delete",89],"(",")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","drupalPostForm",90],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/node'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$edit",90],",",["T_WHITESPACE"," ",90],["T_STRING","t",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",90],")",")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertText",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Your search yielded no results.'",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertCacheTag",92],"(",["T_CONSTANT_ENCAPSED_STRING","'config:search.page.node_search'",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertCacheTag",93],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index'",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertCacheTag",94],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index:node_search'",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertCacheTag",95],"(",["T_CONSTANT_ENCAPSED_STRING","'node_list'",95],")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Initial page for searching users.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","drupalGet",98],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/user'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertCacheTag",99],"(",["T_CONSTANT_ENCAPSED_STRING","'config:search.page.user_search'",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertCacheTag",100],"(",["T_CONSTANT_ENCAPSED_STRING","'user_list'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertNoCacheTag",101],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index'",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertNoCacheTag",102],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index:user_search'",102],")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ User search results.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$edit",105],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",105],"]",["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","searchingUser",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getUsername",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","drupalPostForm",106],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/user'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$edit",106],",",["T_WHITESPACE"," ",106],["T_STRING","t",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",106],")",")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertCacheTag",107],"(",["T_CONSTANT_ENCAPSED_STRING","'config:search.page.user_search'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertCacheTag",108],"(",["T_CONSTANT_ENCAPSED_STRING","'user_list'",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertCacheTag",109],"(",["T_CONSTANT_ENCAPSED_STRING","'user:2'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertNoCacheTag",110],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertNoCacheTag",111],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index:user_search'",111],")",";",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n  ",112],["T_DOC_COMMENT","\/**\n   * Tests the presence of expected cache tags with referenced entities.\n   *\/",114],["T_WHITESPACE","\n  ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","testSearchTagsBubbling",117],"(",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n\n    ",117],["T_COMMENT","\/\/ Install field UI and entity reference modules.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","container",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","get",120],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","install",120],"(","[",["T_CONSTANT_ENCAPSED_STRING","'field_ui'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'entity_reference'",120],"]",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","resetAll",121],"(",")",";",["T_WHITESPACE","\n\n\n    ",121],["T_COMMENT","\/\/ Creates a new content type that will have an entity reference.\n",124],["T_WHITESPACE","    ",125],["T_VARIABLE","$type_name",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'entity_reference_test'",125],";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$type",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","drupalCreateContentType",126],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$type_name",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'type'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$type_name",126],"]",")",";",["T_WHITESPACE","\n\n    ",126],["T_VARIABLE","$bundle_path",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/'",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$type",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","id",128],"(",")",";",["T_WHITESPACE","\n\n    ",128],["T_COMMENT","\/\/ Create test user.\n",130],["T_WHITESPACE","    ",131],["T_VARIABLE","$admin_user",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","drupalCreateUser",131],"(","[",["T_WHITESPACE","\n      ",131],["T_CONSTANT_ENCAPSED_STRING","'access content'",132],",",["T_WHITESPACE","\n      ",132],["T_CONSTANT_ENCAPSED_STRING","'create '",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_VARIABLE","$type_name",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","' content'",133],",",["T_WHITESPACE","\n      ",133],["T_CONSTANT_ENCAPSED_STRING","'administer node fields'",134],",",["T_WHITESPACE","\n      ",134],["T_CONSTANT_ENCAPSED_STRING","'administer node display'",135],",",["T_WHITESPACE","\n\n    ",135],"]",")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","drupalLogin",138],"(",["T_VARIABLE","$admin_user",138],")",";",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ First step: 'Add new field' on the 'Manage fields' page.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","drupalGet",141],"(",["T_VARIABLE","$bundle_path",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'\/fields\/add-field'",141],")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","drupalPostForm",142],"(",["T_STRING","NULL",142],",",["T_WHITESPACE"," ",142],"[",["T_WHITESPACE","\n      ",142],["T_CONSTANT_ENCAPSED_STRING","'label'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'Test label'",143],",",["T_WHITESPACE","\n      ",143],["T_CONSTANT_ENCAPSED_STRING","'field_name'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'test__ref'",144],",",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'entity_reference'",145],",",["T_WHITESPACE","\n    ",145],"]",",",["T_WHITESPACE"," ",146],["T_STRING","t",146],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and continue'",146],")",")",";",["T_WHITESPACE","\n\n    ",146],["T_COMMENT","\/\/ Second step: 'Field settings' form.\n",148],["T_WHITESPACE","    ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","drupalPostForm",149],"(",["T_STRING","NULL",149],",",["T_WHITESPACE"," ",149],"[","]",",",["T_WHITESPACE"," ",149],["T_STRING","t",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Save field settings'",149],")",")",";",["T_WHITESPACE","\n\n    ",149],["T_COMMENT","\/\/ Create a new node of our newly created node type and fill in the entity\n",151],["T_WHITESPACE","    ",152],["T_COMMENT","\/\/ reference field.\n",152],["T_WHITESPACE","    ",153],["T_VARIABLE","$edit",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],"[",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'Llama shop'",154],",",["T_WHITESPACE","\n      ",154],["T_CONSTANT_ENCAPSED_STRING","'field_test__ref[0][target_id]'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","node",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getTitle",155],"(",")",["T_WHITESPACE","\n    ",155],"]",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","drupalPostForm",157],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/'",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_VARIABLE","$type",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","id",157],"(",")",",",["T_WHITESPACE"," ",157],["T_VARIABLE","$edit",157],",",["T_WHITESPACE"," ",157],["T_STRING","t",157],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",157],")",")",";",["T_WHITESPACE","\n\n    ",157],["T_COMMENT","\/\/ Test that the value of the entity reference field is shown.\n",159],["T_WHITESPACE","    ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","drupalGet",160],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/2'",160],")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertText",161],"(",["T_CONSTANT_ENCAPSED_STRING","'bike shed shop'",161],")",";",["T_WHITESPACE","\n\n    ",161],["T_COMMENT","\/\/ Refresh the search index.\n",163],["T_WHITESPACE","    ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","container",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","get",164],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.search'",164],")",["T_OBJECT_OPERATOR","->",164],["T_STRING","createInstance",164],"(",["T_CONSTANT_ENCAPSED_STRING","'node_search'",164],")",["T_OBJECT_OPERATOR","->",164],["T_STRING","updateIndex",164],"(",")",";",["T_WHITESPACE","\n    ",164],["T_STRING","search_update_totals",165],"(",")",";",["T_WHITESPACE","\n\n    ",165],["T_COMMENT","\/\/ Log in with searching user again.\n",167],["T_WHITESPACE","    ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","drupalLogin",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","searchingUser",168],")",";",["T_WHITESPACE","\n\n    ",168],["T_COMMENT","\/\/ Default search cache tags.\n",170],["T_WHITESPACE","    ",171],["T_VARIABLE","$default_search_tags",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],"[",["T_WHITESPACE","\n      ",171],["T_CONSTANT_ENCAPSED_STRING","'config:search.page.node_search'",172],",",["T_WHITESPACE","\n      ",172],["T_CONSTANT_ENCAPSED_STRING","'search_index'",173],",",["T_WHITESPACE","\n      ",173],["T_CONSTANT_ENCAPSED_STRING","'search_index:node_search'",174],",",["T_WHITESPACE","\n      ",174],["T_CONSTANT_ENCAPSED_STRING","'rendered'",175],",",["T_WHITESPACE","\n      ",175],["T_CONSTANT_ENCAPSED_STRING","'node_list'",176],",",["T_WHITESPACE","\n    ",176],"]",";",["T_WHITESPACE","\n\n    ",177],["T_COMMENT","\/\/ Node search results for shop, should return node:1 (bike shed shop) and\n",179],["T_WHITESPACE","    ",180],["T_COMMENT","\/\/ node:2 (Llama shop). The related authors cache tags should be visible as\n",180],["T_WHITESPACE","    ",181],["T_COMMENT","\/\/ well.\n",181],["T_WHITESPACE","    ",182],["T_VARIABLE","$edit",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$edit",183],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'shop'",183],";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","drupalPostForm",184],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/node'",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$edit",184],",",["T_WHITESPACE"," ",184],["T_STRING","t",184],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",184],")",")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","assertText",185],"(",["T_CONSTANT_ENCAPSED_STRING","'bike shed shop'",185],")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertText",186],"(",["T_CONSTANT_ENCAPSED_STRING","'Llama shop'",186],")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$expected_cache_tags",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","Cache",187],["T_DOUBLE_COLON","::",187],["T_STRING","mergeTags",187],"(",["T_VARIABLE","$default_search_tags",187],",",["T_WHITESPACE"," ",187],"[",["T_WHITESPACE","\n      ",187],["T_CONSTANT_ENCAPSED_STRING","'node:1'",188],",",["T_WHITESPACE","\n      ",188],["T_CONSTANT_ENCAPSED_STRING","'user:2'",189],",",["T_WHITESPACE","\n      ",189],["T_CONSTANT_ENCAPSED_STRING","'node:2'",190],",",["T_WHITESPACE","\n      ",190],["T_CONSTANT_ENCAPSED_STRING","'user:3'",191],",",["T_WHITESPACE","\n      ",191],["T_CONSTANT_ENCAPSED_STRING","'node_view'",192],",",["T_WHITESPACE","\n      ",192],["T_CONSTANT_ENCAPSED_STRING","'config:filter.format.plain_text'",193],",",["T_WHITESPACE","\n    ",193],"]",")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$cache_tags",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","drupalGetHeader",195],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",195],")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","assertEqual",196],"(",["T_STRING","explode",196],"(",["T_CONSTANT_ENCAPSED_STRING","' '",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$cache_tags",196],")",",",["T_WHITESPACE"," ",196],["T_VARIABLE","$expected_cache_tags",196],")",";",["T_WHITESPACE","\n\n    ",196],["T_COMMENT","\/\/ Only get the new node in the search results, should result in node:1,\n",198],["T_WHITESPACE","    ",199],["T_COMMENT","\/\/ node:2 and user:3 as cache tags even though only node:1 is shown. This is\n",199],["T_WHITESPACE","    ",200],["T_COMMENT","\/\/ because node:2 is reference in node:1 as an entity reference.\n",200],["T_WHITESPACE","    ",201],["T_VARIABLE","$edit",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$edit",202],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",202],"]",["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'Llama'",202],";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","drupalPostForm",203],"(",["T_CONSTANT_ENCAPSED_STRING","'search\/node'",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$edit",203],",",["T_WHITESPACE"," ",203],["T_STRING","t",203],"(",["T_CONSTANT_ENCAPSED_STRING","'Search'",203],")",")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertText",204],"(",["T_CONSTANT_ENCAPSED_STRING","'Llama shop'",204],")",";",["T_WHITESPACE","\n    ",204],["T_VARIABLE","$expected_cache_tags",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","Cache",205],["T_DOUBLE_COLON","::",205],["T_STRING","mergeTags",205],"(",["T_VARIABLE","$default_search_tags",205],",",["T_WHITESPACE"," ",205],"[",["T_WHITESPACE","\n      ",205],["T_CONSTANT_ENCAPSED_STRING","'node:1'",206],",",["T_WHITESPACE","\n      ",206],["T_CONSTANT_ENCAPSED_STRING","'node:2'",207],",",["T_WHITESPACE","\n      ",207],["T_CONSTANT_ENCAPSED_STRING","'user:3'",208],",",["T_WHITESPACE","\n      ",208],["T_CONSTANT_ENCAPSED_STRING","'node_view'",209],",",["T_WHITESPACE","\n    ",209],"]",")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$cache_tags",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","drupalGetHeader",211],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",211],")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","assertEqual",212],"(",["T_STRING","explode",212],"(",["T_CONSTANT_ENCAPSED_STRING","' '",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$cache_tags",212],")",",",["T_WHITESPACE"," ",212],["T_VARIABLE","$expected_cache_tags",212],")",";",["T_WHITESPACE","\n  ",212],"}",["T_WHITESPACE","\n\n",213],"}",["T_WHITESPACE","\n",215]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","search",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views",3],["T_NS_SEPARATOR","\\",3],["T_STRING","filter",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Form",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FormStateInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","filter",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FilterPluginBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","views",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],["T_NS_SEPARATOR","\\",7],["T_STRING","views",7],["T_NS_SEPARATOR","\\",7],["T_STRING","display",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DisplayPluginBase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","views",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ViewExecutable",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","views",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Views",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Filter handler for search keywords.\n *\n * @ingroup views_filter_handlers\n *\n * @ViewsFilter(\"search_keywords\")\n *\/",11],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Search",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","FilterPluginBase",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * This filter is always considered multiple-valued.\n   *\n   * @var bool\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$alwaysMultiple",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","TRUE",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * A search query to use for parsing search keywords.\n    *\n    * @var \\Drupal\\search\\ViewsSearchQuery\n    *\/",27],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$searchQuery",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","NULL",32],";",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * TRUE if the search query has been parsed.\n   *\/",34],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$parsed",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","FALSE",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * The search type name (value of {search_index}.type in the database).\n   *\n   * @var string\n   *\/",39],["T_WHITESPACE","\n  ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$searchType",44],";",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",46],["T_WHITESPACE","\n  ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","init",49],"(",["T_STRING","ViewExecutable",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$view",49],",",["T_WHITESPACE"," ",49],["T_STRING","DisplayPluginBase",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$display",49],",",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],["T_WHITESPACE"," ",49],"&",["T_VARIABLE","$options",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","NULL",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_STRING","parent",50],["T_DOUBLE_COLON","::",50],["T_STRING","init",50],"(",["T_VARIABLE","$view",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$display",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$options",50],")",";",["T_WHITESPACE","\n\n    ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","searchType",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","definition",52],"[",["T_CONSTANT_ENCAPSED_STRING","'search_type'",52],"]",";",["T_WHITESPACE","\n  ",52],"}",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",55],["T_WHITESPACE","\n  ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","defineOptions",58],"(",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$options",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","parent",59],["T_DOUBLE_COLON","::",59],["T_STRING","defineOptions",59],"(",")",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$options",61],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",61],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default'",61],"]",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'optional'",61],";",["T_WHITESPACE","\n\n    ",61],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$options",63],";",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",66],["T_WHITESPACE","\n  ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","operatorForm",69],"(","&",["T_VARIABLE","$form",69],",",["T_WHITESPACE"," ",69],["T_STRING","FormStateInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$form_state",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$form",70],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",70],"]",["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'#type'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'radios'",71],",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'#title'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","t",72],"(",["T_CONSTANT_ENCAPSED_STRING","'On empty input'",72],")",",",["T_WHITESPACE","\n      ",72],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","operator",73],",",["T_WHITESPACE","\n      ",73],["T_CONSTANT_ENCAPSED_STRING","'#options'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_WHITESPACE","\n        ",74],["T_CONSTANT_ENCAPSED_STRING","'optional'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","t",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Show All'",75],")",",",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'required'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","t",76],"(",["T_CONSTANT_ENCAPSED_STRING","'Show None'",76],")",",",["T_WHITESPACE","\n      ",76],")",",",["T_WHITESPACE","\n    ",77],")",";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",81],["T_WHITESPACE","\n  ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","valueForm",84],"(","&",["T_VARIABLE","$form",84],",",["T_WHITESPACE"," ",84],["T_STRING","FormStateInterface",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$form_state",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$form",85],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'#type'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'textfield'",86],",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'#size'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_LNUMBER","15",87],",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","value",88],",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'#attributes'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","t",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Search keywords'",89],")",")",",",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'#title'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],"!",["T_VARIABLE","$form_state",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","get",90],"(",["T_CONSTANT_ENCAPSED_STRING","'exposed'",90],")",["T_WHITESPACE"," ",90],"?",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","t",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Keywords'",90],")",["T_WHITESPACE"," ",90],":",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","''",90],",",["T_WHITESPACE","\n    ",90],")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",94],["T_WHITESPACE","\n  ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","validateExposed",97],"(","&",["T_VARIABLE","$form",97],",",["T_WHITESPACE"," ",97],["T_STRING","FormStateInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$form_state",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(","!",["T_ISSET","isset",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","options",98],"[",["T_CONSTANT_ENCAPSED_STRING","'expose'",98],"]","[",["T_CONSTANT_ENCAPSED_STRING","'identifier'",98],"]",")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_RETURN","return",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_VARIABLE","$key",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","options",102],"[",["T_CONSTANT_ENCAPSED_STRING","'expose'",102],"]","[",["T_CONSTANT_ENCAPSED_STRING","'identifier'",102],"]",";",["T_WHITESPACE","\n    ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_VARIABLE","$form_state",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isValueEmpty",103],"(",["T_VARIABLE","$key",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","queryParseSearchExpression",104],"(",["T_VARIABLE","$form_state",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getValue",104],"(",["T_VARIABLE","$key",104],")",")",";",["T_WHITESPACE","\n      ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_STRING","count",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","searchQuery",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","words",105],"(",")",")",["T_WHITESPACE"," ",105],["T_IS_EQUAL","==",105],["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$form_state",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","setErrorByName",106],"(",["T_VARIABLE","$key",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","formatPlural",106],"(",["T_NS_SEPARATOR","\\",106],["T_STRING","Drupal",106],["T_DOUBLE_COLON","::",106],["T_STRING","config",106],"(",["T_CONSTANT_ENCAPSED_STRING","'search.settings'",106],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","get",106],"(",["T_CONSTANT_ENCAPSED_STRING","'index.minimum_word_size'",106],")",",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'You must include at least one keyword to match in the content, and punctuation is ignored.'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'You must include at least one keyword to match in the content. Keywords must be at least @count characters, and punctuation is ignored.'",106],")",")",";",["T_WHITESPACE","\n      ",106],"}",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n  ",109],["T_DOC_COMMENT","\/**\n   * Sets up and parses the search query.\n   *\n   * @param string $input\n   *   The search keywords entered by the user.\n   *\/",111],["T_WHITESPACE","\n  ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","queryParseSearchExpression",117],"(",["T_VARIABLE","$input",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n    ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(","!",["T_ISSET","isset",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","searchQuery",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n      ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","parsed",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","TRUE",119],";",["T_WHITESPACE","\n      ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","searchQuery",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","db_select",120],"(",["T_CONSTANT_ENCAPSED_STRING","'search_index'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'i'",120],",",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_CONSTANT_ENCAPSED_STRING","'target'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'replica'",120],")",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","extend",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\search\\ViewsSearchQuery'",120],")",";",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","searchQuery",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","searchExpression",121],"(",["T_VARIABLE","$input",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","searchType",121],")",";",["T_WHITESPACE","\n      ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","searchQuery",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","publicParseSearchExpression",122],"(",")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n  ",123],"}",["T_WHITESPACE","\n\n  ",124],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",126],["T_WHITESPACE","\n  ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","query",129],"(",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n    ",129],["T_COMMENT","\/\/ Since attachment views don't validate the exposed input, parse the search\n",130],["T_WHITESPACE","    ",131],["T_COMMENT","\/\/ expression if required.\n",131],["T_WHITESPACE","    ",132],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","parsed",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n      ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","queryParseSearchExpression",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","value",133],")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$required",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","FALSE",135],";",["T_WHITESPACE","\n    ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_ISSET","isset",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","searchQuery",136],")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n      ",136],["T_VARIABLE","$required",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","TRUE",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n    ",138],["T_ELSE","else",139],["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n      ",139],["T_VARIABLE","$words",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","searchQuery",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","words",140],"(",")",";",["T_WHITESPACE","\n      ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_EMPTY","empty",141],"(",["T_VARIABLE","$words",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$required",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","TRUE",142],";",["T_WHITESPACE","\n      ",142],"}",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n    ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$required",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n      ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","operator",146],["T_WHITESPACE"," ",146],["T_IS_EQUAL","==",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'required'",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","query",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","addWhere",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","options",147],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",147],"]",",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'FALSE'",147],")",";",["T_WHITESPACE","\n      ",147],"}",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n    ",149],["T_ELSE","else",150],["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n      ",150],["T_VARIABLE","$search_index",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","ensureMyTable",151],"(",")",";",["T_WHITESPACE","\n\n      ",151],["T_VARIABLE","$search_condition",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","db_and",153],"(",")",";",["T_WHITESPACE","\n\n      ",153],["T_COMMENT","\/\/ Create a new join to relate the 'search_total' table to our current\n",155],["T_WHITESPACE","      ",156],["T_COMMENT","\/\/ 'search_index' table.\n",156],["T_WHITESPACE","      ",157],["T_VARIABLE","$definition",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],"(",["T_WHITESPACE","\n        ",157],["T_CONSTANT_ENCAPSED_STRING","'table'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'search_total'",158],",",["T_WHITESPACE","\n        ",158],["T_CONSTANT_ENCAPSED_STRING","'field'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'word'",159],",",["T_WHITESPACE","\n        ",159],["T_CONSTANT_ENCAPSED_STRING","'left_table'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$search_index",160],",",["T_WHITESPACE","\n        ",160],["T_CONSTANT_ENCAPSED_STRING","'left_field'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'word'",161],",",["T_WHITESPACE","\n      ",161],")",";",["T_WHITESPACE","\n      ",162],["T_VARIABLE","$join",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","Views",163],["T_DOUBLE_COLON","::",163],["T_STRING","pluginManager",163],"(",["T_CONSTANT_ENCAPSED_STRING","'join'",163],")",["T_OBJECT_OPERATOR","->",163],["T_STRING","createInstance",163],"(",["T_CONSTANT_ENCAPSED_STRING","'standard'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$definition",163],")",";",["T_WHITESPACE","\n      ",163],["T_VARIABLE","$search_total",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","query",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","addRelationship",164],"(",["T_CONSTANT_ENCAPSED_STRING","'search_total'",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$join",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$search_index",164],")",";",["T_WHITESPACE","\n\n      ",164],["T_COMMENT","\/\/ Add the search score field to the query.\n",166],["T_WHITESPACE","      ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","search_score",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","query",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","addField",167],"(",["T_CONSTANT_ENCAPSED_STRING","''",167],",",["T_WHITESPACE"," ",167],"\"",["T_VARIABLE","$search_index",167],["T_ENCAPSED_AND_WHITESPACE",".score * ",167],["T_VARIABLE","$search_total",167],["T_ENCAPSED_AND_WHITESPACE",".count",167],"\"",",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'score'",167],",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_CONSTANT_ENCAPSED_STRING","'function'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'sum'",167],")",")",";",["T_WHITESPACE","\n\n      ",167],["T_COMMENT","\/\/ Add the conditions set up by the search query to the views query.\n",169],["T_WHITESPACE","      ",170],["T_VARIABLE","$search_condition",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","condition",170],"(","\"",["T_VARIABLE","$search_index",170],["T_ENCAPSED_AND_WHITESPACE",".type",170],"\"",",",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","searchType",170],")",";",["T_WHITESPACE","\n      ",170],["T_VARIABLE","$search_dataset",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","query",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","addTable",171],"(",["T_CONSTANT_ENCAPSED_STRING","'node_search_dataset'",171],")",";",["T_WHITESPACE","\n      ",171],["T_VARIABLE","$conditions",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","searchQuery",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","conditions",172],"(",")",";",["T_WHITESPACE","\n      ",172],["T_VARIABLE","$condition_conditions",173],["T_WHITESPACE"," ",173],"=","&",["T_WHITESPACE"," ",173],["T_VARIABLE","$conditions",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","conditions",173],"(",")",";",["T_WHITESPACE","\n      ",173],["T_FOREACH","foreach",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$condition_conditions",174],["T_WHITESPACE","  ",174],["T_AS","as",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$key",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],"&",["T_VARIABLE","$condition",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n        ",174],["T_COMMENT","\/\/ Make sure we just look at real conditions.\n",175],["T_WHITESPACE","        ",176],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_STRING","is_numeric",176],"(",["T_VARIABLE","$key",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n          ",176],["T_COMMENT","\/\/ Replace the conditions with the table alias of views.\n",177],["T_WHITESPACE","          ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","searchQuery",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","conditionReplaceString",178],"(",["T_CONSTANT_ENCAPSED_STRING","'d.'",178],",",["T_WHITESPACE"," ",178],"\"",["T_VARIABLE","$search_dataset",178],["T_ENCAPSED_AND_WHITESPACE",".",178],"\"",",",["T_WHITESPACE"," ",178],["T_VARIABLE","$condition",178],")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n      ",179],"}",["T_WHITESPACE","\n      ",180],["T_VARIABLE","$search_conditions",181],["T_WHITESPACE"," ",181],"=","&",["T_WHITESPACE"," ",181],["T_VARIABLE","$search_condition",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","conditions",181],"(",")",";",["T_WHITESPACE","\n      ",181],["T_VARIABLE","$search_conditions",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","array_merge",182],"(",["T_VARIABLE","$search_conditions",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$condition_conditions",182],")",";",["T_WHITESPACE","\n\n      ",182],["T_COMMENT","\/\/ Add the keyword conditions, as is done in\n",184],["T_WHITESPACE","      ",185],["T_COMMENT","\/\/ SearchQuery::prepareAndNormalize(), but simplified because we are\n",185],["T_WHITESPACE","      ",186],["T_COMMENT","\/\/ only concerned with relevance ranking so we do not need to normalize.\n",186],["T_WHITESPACE","      ",187],["T_VARIABLE","$or",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","db_or",187],"(",")",";",["T_WHITESPACE","\n      ",187],["T_FOREACH","foreach",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$words",188],["T_WHITESPACE"," ",188],["T_AS","as",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$word",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$or",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","condition",189],"(","\"",["T_VARIABLE","$search_index",189],["T_ENCAPSED_AND_WHITESPACE",".word",189],"\"",",",["T_WHITESPACE"," ",189],["T_VARIABLE","$word",189],")",";",["T_WHITESPACE","\n      ",189],"}",["T_WHITESPACE","\n      ",190],["T_VARIABLE","$search_condition",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","condition",191],"(",["T_VARIABLE","$or",191],")",";",["T_WHITESPACE","\n\n      ",191],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","query",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","addWhere",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","options",193],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",193],"]",",",["T_WHITESPACE"," ",193],["T_VARIABLE","$search_condition",193],")",";",["T_WHITESPACE","\n\n      ",193],["T_COMMENT","\/\/ Add the GROUP BY and HAVING expressions to the query.\n",195],["T_WHITESPACE","      ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","query",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","addGroupBy",196],"(","\"",["T_VARIABLE","$search_index",196],["T_ENCAPSED_AND_WHITESPACE",".sid",196],"\"",")",";",["T_WHITESPACE","\n      ",196],["T_VARIABLE","$matches",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","searchQuery",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","matches",197],"(",")",";",["T_WHITESPACE","\n      ",197],["T_VARIABLE","$placeholder",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","placeholder",198],"(",")",";",["T_WHITESPACE","\n      ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","query",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","addHavingExpression",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","options",199],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",199],"]",",",["T_WHITESPACE"," ",199],"\"",["T_ENCAPSED_AND_WHITESPACE","COUNT(*) >= ",199],["T_VARIABLE","$placeholder",199],"\"",",",["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_VARIABLE","$placeholder",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$matches",199],")",")",";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n    ",200],["T_COMMENT","\/\/ Set to NULL to prevent PDO exception when views object is cached.\n",201],["T_WHITESPACE","    ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","searchQuery",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","NULL",202],";",["T_WHITESPACE","\n  ",202],"}",["T_WHITESPACE","\n\n",203],"}",["T_WHITESPACE","\n",205]]
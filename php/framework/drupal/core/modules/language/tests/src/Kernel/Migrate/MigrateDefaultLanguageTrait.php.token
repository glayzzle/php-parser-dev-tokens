[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","language",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Migrate",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","language",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigurableLanguage",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MigrationInterface",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the default language variable migration.\n *\/",8],["T_WHITESPACE","\n",10],["T_TRAIT","trait",11],["T_WHITESPACE"," ",11],["T_STRING","MigrateDefaultLanguageTrait",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * Helper method to test the migration.\n   *\n   * @param string $langcode\n   *   The langcode of the default language.\n   * @param bool $existing\n   *   Whether the default language exists on the destination.\n   *\/",13],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","doTestMigration",21],"(",["T_VARIABLE","$langcode",21],",",["T_WHITESPACE"," ",21],["T_VARIABLE","$existing",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","TRUE",21],")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_COMMENT","\/\/ The default language of the test fixture is English. Change it to\n",22],["T_WHITESPACE","    ",23],["T_COMMENT","\/\/ something else before migrating, to be sure that the source site\n",23],["T_WHITESPACE","    ",24],["T_COMMENT","\/\/ default language is migrated.\n",24],["T_WHITESPACE","    ",25],["T_VARIABLE","$value",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'O:8:\"stdClass\":11:{s:8:\"language\";s:2:\"'",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_VARIABLE","$langcode",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'\";s:4:\"name\";s:6:\"French\";s:6:\"native\";s:6:\"French\";s:9:\"direction\";s:1:\"0\";s:7:\"enabled\";i:1;s:7:\"plurals\";s:1:\"0\";s:7:\"formula\";s:0:\"\";s:6:\"domain\";s:0:\"\";s:6:\"prefix\";s:0:\"\";s:6:\"weight\";s:1:\"0\";s:10:\"javascript\";s:0:\"\";}'",25],";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","sourceDatabase",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","update",26],"(",["T_CONSTANT_ENCAPSED_STRING","'variable'",26],")",["T_WHITESPACE","\n      ",26],["T_OBJECT_OPERATOR","->",27],["T_STRING","fields",27],"(",["T_ARRAY","array",27],"(",["T_WHITESPACE","\n        ",27],["T_CONSTANT_ENCAPSED_STRING","'value'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$value",28],["T_WHITESPACE","\n      ",28],")",")",["T_WHITESPACE","\n      ",29],["T_OBJECT_OPERATOR","->",30],["T_STRING","condition",30],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'language_default'",30],["T_WHITESPACE"," ",30],")",["T_WHITESPACE","\n      ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","execute",31],"(",")",";",["T_WHITESPACE","\n\n    ",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","startCollectingMessages",33],"(",")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","executeMigrations",34],"(","[",["T_CONSTANT_ENCAPSED_STRING","'language'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'default_language'",34],"]",")",";",["T_WHITESPACE","\n\n    ",34],["T_IF","if",36],["T_WHITESPACE"," ",36],"(",["T_VARIABLE","$existing",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n      ",36],["T_COMMENT","\/\/ If the default language exists, we should be able to load it and the\n",37],["T_WHITESPACE","      ",38],["T_COMMENT","\/\/ default_langcode config should be set.\n",38],["T_WHITESPACE","      ",39],["T_VARIABLE","$default_language",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","ConfigurableLanguage",39],["T_DOUBLE_COLON","::",39],["T_STRING","load",39],"(",["T_VARIABLE","$langcode",39],")",";",["T_WHITESPACE","\n      ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertNotNull",40],"(",["T_VARIABLE","$default_language",40],")",";",["T_WHITESPACE","\n      ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertSame",41],"(",["T_VARIABLE","$langcode",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","config",41],"(",["T_CONSTANT_ENCAPSED_STRING","'system.site'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_CONSTANT_ENCAPSED_STRING","'default_langcode'",41],")",")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n    ",42],["T_ELSE","else",43],["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n      ",43],["T_COMMENT","\/\/ Otherwise, the migration log should contain an error message.\n",44],["T_WHITESPACE","      ",45],["T_VARIABLE","$messages",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","migration",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getIdMap",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","getMessageIterator",45],"(",")",";",["T_WHITESPACE","\n      ",45],["T_VARIABLE","$count",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_LNUMBER","0",46],";",["T_WHITESPACE","\n      ",46],["T_FOREACH","foreach",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$messages",47],["T_WHITESPACE"," ",47],["T_AS","as",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$message",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$count",48],["T_INC","++",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertSame",49],"(",["T_VARIABLE","$message",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","message",49],",",["T_WHITESPACE"," ",49],"\"",["T_ENCAPSED_AND_WHITESPACE","The language '",49],["T_VARIABLE","$langcode",49],["T_ENCAPSED_AND_WHITESPACE","' does not exist on this site.",49],"\"",")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertSame",50],"(",["T_INT_CAST","(int)",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$message",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","level",50],",",["T_WHITESPACE"," ",50],["T_STRING","MigrationInterface",50],["T_DOUBLE_COLON","::",50],["T_STRING","MESSAGE_ERROR",50],")",";",["T_WHITESPACE","\n      ",50],"}",["T_WHITESPACE","\n      ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertSame",52],"(",["T_VARIABLE","$count",52],",",["T_WHITESPACE"," ",52],["T_LNUMBER","1",52],")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * Helper method to test migrating the default language when no default language is set.\n   *\/",56],["T_WHITESPACE","\n  ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","doTestMigrationWithUnsetVariable",59],"(",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_COMMENT","\/\/ Delete the language_default variable.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","sourceDatabase",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","delete",61],"(",["T_CONSTANT_ENCAPSED_STRING","'variable'",61],")",["T_WHITESPACE","\n      ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","condition",62],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'language_default'",62],["T_WHITESPACE"," ",62],")",["T_WHITESPACE","\n      ",62],["T_OBJECT_OPERATOR","->",63],["T_STRING","execute",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","startCollectingMessages",65],"(",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","executeMigrations",66],"(","[",["T_CONSTANT_ENCAPSED_STRING","'language'",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'default_language'",66],"]",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$messages",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","migration",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getIdMap",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getMessageIterator",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","fetchAll",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Make sure there's no migration exceptions.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertEmpty",70],"(",["T_VARIABLE","$messages",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Make sure the default langcode is 'en', since it was the default on D6 & D7.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertSame",73],"(",["T_CONSTANT_ENCAPSED_STRING","'en'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","config",73],"(",["T_CONSTANT_ENCAPSED_STRING","'system.site'",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_CONSTANT_ENCAPSED_STRING","'default_langcode'",73],")",")",";",["T_WHITESPACE","\n  ",73],"}",["T_WHITESPACE","\n\n",74],"}",["T_WHITESPACE","\n",76]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","language",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Language",5],["T_NS_SEPARATOR","\\",5],["T_STRING","LanguageInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LanguageNegotiation",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LanguageNegotiationUI",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","simpletest",7],["T_NS_SEPARATOR","\\",7],["T_STRING","WebTestBase",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests alterations to language types\/negotiation info.\n *\n * @group language\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","LanguageNegotiationInfoTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","WebTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'content_translation'",21],"]",";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",23],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setUp",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_STRING","parent",27],["T_DOUBLE_COLON","::",27],["T_STRING","setUp",27],"(",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$admin_user",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalCreateUser",28],"(","[",["T_CONSTANT_ENCAPSED_STRING","'administer languages'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'access administration pages'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'view the administration theme'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'administer modules'",28],"]",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","drupalLogin",29],"(",["T_VARIABLE","$admin_user",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","drupalPostForm",30],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/add'",30],",",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",["T_CONSTANT_ENCAPSED_STRING","'predefined_langcode'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'it'",30],")",",",["T_WHITESPACE"," ",30],["T_STRING","t",30],"(",["T_CONSTANT_ENCAPSED_STRING","'Add language'",30],")",")",";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Returns the configurable language manager.\n   *\n   * @return \\Drupal\\language\\ConfigurableLanguageManager\n   *\/",33],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","languageManager",38],"(",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",39],")",";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Sets state flags for language_test module.\n   *\n   * Ensures to correctly update data both in the child site and the test runner\n   * environment.\n   *\n   * @param array $values\n   *   The key\/value pairs to set in state.\n   *\/",42],["T_WHITESPACE","\n  ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","stateSet",51],"(",["T_ARRAY","array",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$values",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n    ",51],["T_COMMENT","\/\/ Set the new state values.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","container",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","get",53],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",53],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","setMultiple",53],"(",["T_VARIABLE","$values",53],")",";",["T_WHITESPACE","\n    ",53],["T_COMMENT","\/\/ Refresh in-memory static state\/config caches and static variables.\n",54],["T_WHITESPACE","    ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","refreshVariables",55],"(",")",";",["T_WHITESPACE","\n    ",55],["T_COMMENT","\/\/ Refresh\/rewrite language negotiation configuration, in order to pick up\n",56],["T_WHITESPACE","    ",57],["T_COMMENT","\/\/ the manipulations performed by language_test module's info alter hooks.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","container",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'language_negotiator'",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","purgeConfiguration",58],"(",")",";",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * Tests alterations to language types\/negotiation info.\n   *\/",61],["T_WHITESPACE","\n  ",63],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","testInfoAlterations",64],"(",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","stateSet",65],"(",["T_ARRAY","array",65],"(",["T_WHITESPACE","\n      ",65],["T_COMMENT","\/\/ Enable language_test type info.\n",66],["T_WHITESPACE","      ",67],["T_CONSTANT_ENCAPSED_STRING","'language_test.language_types'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_STRING","TRUE",67],",",["T_WHITESPACE","\n      ",67],["T_COMMENT","\/\/ Enable language_test negotiation info (not altered yet).\n",68],["T_WHITESPACE","      ",69],["T_CONSTANT_ENCAPSED_STRING","'language_test.language_negotiation_info'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_STRING","TRUE",69],",",["T_WHITESPACE","\n      ",69],["T_COMMENT","\/\/ Alter LanguageInterface::TYPE_CONTENT to be configurable.\n",70],["T_WHITESPACE","      ",71],["T_CONSTANT_ENCAPSED_STRING","'language_test.content_language_type'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_STRING","TRUE",71],",",["T_WHITESPACE","\n    ",71],")",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","container",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","install",73],"(",["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'language_test'",73],")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","resetAll",74],"(",")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Check that fixed language types are properly configured without the need\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ of saving the language negotiation settings.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","checkFixedLanguageTypes",78],"(",")",";",["T_WHITESPACE","\n\n    ",78],["T_VARIABLE","$type",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","LanguageInterface",80],["T_DOUBLE_COLON","::",80],["T_STRING","TYPE_CONTENT",80],";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$language_types",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","languageManager",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getLanguageTypes",81],"(",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertTrue",82],"(",["T_STRING","in_array",82],"(",["T_VARIABLE","$type",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$language_types",82],")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'Content language type is configurable.'",82],")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Enable some core and custom language negotiation methods. The test\n",84],["T_WHITESPACE","    ",85],["T_COMMENT","\/\/ language type is supposed to be configurable.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$test_type",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'test_language_type'",86],";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$interface_method_id",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","LanguageNegotiationUI",87],["T_DOUBLE_COLON","::",87],["T_STRING","METHOD_ID",87],";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$test_method_id",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'test_language_negotiation_method'",88],";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$form_field",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$type",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'[enabled]['",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_VARIABLE","$interface_method_id",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","']'",89],";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$edit",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$form_field",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_STRING","TRUE",91],",",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$type",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'[enabled]['",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$test_method_id",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","']'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_STRING","TRUE",92],",",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$test_type",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'[enabled]['",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_VARIABLE","$test_method_id",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","']'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_STRING","TRUE",93],",",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$test_type",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'[configurable]'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_STRING","TRUE",94],",",["T_WHITESPACE","\n    ",94],")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","drupalPostForm",96],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$edit",96],",",["T_WHITESPACE"," ",96],["T_STRING","t",96],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",96],")",")",";",["T_WHITESPACE","\n\n    ",96],["T_COMMENT","\/\/ Alter language negotiation info to remove interface language negotiation\n",98],["T_WHITESPACE","    ",99],["T_COMMENT","\/\/ method.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","stateSet",100],"(",["T_ARRAY","array",100],"(",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'language_test.language_negotiation_info_alter'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_STRING","TRUE",101],",",["T_WHITESPACE","\n    ",101],")",")",";",["T_WHITESPACE","\n\n    ",102],["T_VARIABLE","$negotiation",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","config",104],"(",["T_CONSTANT_ENCAPSED_STRING","'language.types'",104],")",["T_OBJECT_OPERATOR","->",104],["T_STRING","get",104],"(",["T_CONSTANT_ENCAPSED_STRING","'negotiation.'",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$type",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'.enabled'",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertFalse",105],"(",["T_ISSET","isset",105],"(",["T_VARIABLE","$negotiation",105],"[",["T_VARIABLE","$interface_method_id",105],"]",")",",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'Interface language negotiation method removed from the stored settings.'",105],")",";",["T_WHITESPACE","\n\n    ",105],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","drupalGet",107],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertNoFieldByName",108],"(",["T_VARIABLE","$form_field",108],",",["T_WHITESPACE"," ",108],["T_STRING","NULL",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'Interface language negotiation method unavailable.'",108],")",";",["T_WHITESPACE","\n\n    ",108],["T_COMMENT","\/\/ Check that type-specific language negotiation methods can be assigned\n",110],["T_WHITESPACE","    ",111],["T_COMMENT","\/\/ only to the corresponding language types.\n",111],["T_WHITESPACE","    ",112],["T_FOREACH","foreach",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","languageManager",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getLanguageTypes",112],"(",")",["T_WHITESPACE"," ",112],["T_AS","as",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$type",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n      ",112],["T_VARIABLE","$form_field",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$type",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'[enabled][test_language_negotiation_method_ts]'",113],";",["T_WHITESPACE","\n      ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$type",114],["T_WHITESPACE"," ",114],["T_IS_EQUAL","==",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$test_type",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertFieldByName",115],"(",["T_VARIABLE","$form_field",115],",",["T_WHITESPACE"," ",115],["T_STRING","NULL",115],",",["T_WHITESPACE"," ",115],["T_STRING","format_string",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Type-specific test language negotiation method available for %type.'",115],",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$type",115],")",")",")",";",["T_WHITESPACE","\n      ",115],"}",["T_WHITESPACE","\n      ",116],["T_ELSE","else",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","assertNoFieldByName",118],"(",["T_VARIABLE","$form_field",118],",",["T_WHITESPACE"," ",118],["T_STRING","NULL",118],",",["T_WHITESPACE"," ",118],["T_STRING","format_string",118],"(",["T_CONSTANT_ENCAPSED_STRING","'Type-specific test language negotiation method unavailable for %type.'",118],",",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$type",118],")",")",")",";",["T_WHITESPACE","\n      ",118],"}",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_COMMENT","\/\/ Check language negotiation results.\n",122],["T_WHITESPACE","    ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","drupalGet",123],"(",["T_CONSTANT_ENCAPSED_STRING","''",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$last",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","container",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",["T_CONSTANT_ENCAPSED_STRING","'language_test.language_negotiation_last'",124],")",";",["T_WHITESPACE","\n    ",124],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","languageManager",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getDefinedLanguageTypes",125],"(",")",["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$type",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$langcode",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$last",126],"[",["T_VARIABLE","$type",126],"]",";",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$value",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$type",127],["T_WHITESPACE"," ",127],["T_IS_EQUAL","==",127],["T_WHITESPACE"," ",127],["T_STRING","LanguageInterface",127],["T_DOUBLE_COLON","::",127],["T_STRING","TYPE_CONTENT",127],["T_WHITESPACE"," ",127],["T_BOOLEAN_OR","||",127],["T_WHITESPACE"," ",127],["T_STRING","strpos",127],"(",["T_VARIABLE","$type",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'test'",127],")",["T_WHITESPACE"," ",127],["T_IS_NOT_IDENTICAL","!==",127],["T_WHITESPACE"," ",127],["T_STRING","FALSE",127],["T_WHITESPACE"," ",127],"?",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'it'",127],["T_WHITESPACE"," ",127],":",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'en'",127],";",["T_WHITESPACE","\n      ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertEqual",128],"(",["T_VARIABLE","$langcode",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$value",128],",",["T_WHITESPACE"," ",128],["T_STRING","format_string",128],"(",["T_CONSTANT_ENCAPSED_STRING","'The negotiated language for %type is %language'",128],",",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$type",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'%language'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$value",128],")",")",")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_COMMENT","\/\/ Uninstall language_test and check that everything is set back to the\n",131],["T_WHITESPACE","    ",132],["T_COMMENT","\/\/ original status.\n",132],["T_WHITESPACE","    ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","container",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","get",133],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",133],")",["T_OBJECT_OPERATOR","->",133],["T_STRING","uninstall",133],"(",["T_ARRAY","array",133],"(",["T_CONSTANT_ENCAPSED_STRING","'language_test'",133],")",")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","rebuildContainer",134],"(",")",";",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ Check that only the core language types are available.\n",136],["T_WHITESPACE","    ",137],["T_FOREACH","foreach",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","languageManager",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getDefinedLanguageTypes",137],"(",")",["T_WHITESPACE"," ",137],["T_AS","as",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$type",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","assertTrue",138],"(",["T_STRING","strpos",138],"(",["T_VARIABLE","$type",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'test'",138],")",["T_WHITESPACE"," ",138],["T_IS_IDENTICAL","===",138],["T_WHITESPACE"," ",138],["T_STRING","FALSE",138],",",["T_WHITESPACE"," ",138],["T_STRING","format_string",138],"(",["T_CONSTANT_ENCAPSED_STRING","'The %type language is still available'",138],",",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$type",138],")",")",")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_COMMENT","\/\/ Check that fixed language types are properly configured, even those\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ previously set to configurable.\n",142],["T_WHITESPACE","    ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","checkFixedLanguageTypes",143],"(",")",";",["T_WHITESPACE","\n\n    ",143],["T_COMMENT","\/\/ Check that unavailable language negotiation methods are not present in\n",145],["T_WHITESPACE","    ",146],["T_COMMENT","\/\/ the negotiation settings.\n",146],["T_WHITESPACE","    ",147],["T_VARIABLE","$negotiation",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","config",147],"(",["T_CONSTANT_ENCAPSED_STRING","'language.types'",147],")",["T_OBJECT_OPERATOR","->",147],["T_STRING","get",147],"(",["T_CONSTANT_ENCAPSED_STRING","'negotiation.'",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_VARIABLE","$type",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'.enabled'",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertFalse",148],"(",["T_ISSET","isset",148],"(",["T_VARIABLE","$negotiation",148],"[",["T_VARIABLE","$test_method_id",148],"]",")",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'The disabled test language negotiation method is not part of the content language negotiation settings.'",148],")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ Check that configuration page presents the correct options and settings.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertNoRaw",151],"(",["T_STRING","t",151],"(",["T_CONSTANT_ENCAPSED_STRING","'Test language detection'",151],")",",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'No test language type configuration available.'",151],")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertNoRaw",152],"(",["T_STRING","t",152],"(",["T_CONSTANT_ENCAPSED_STRING","'This is a test language negotiation method'",152],")",",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'No test language negotiation method available.'",152],")",";",["T_WHITESPACE","\n  ",152],"}",["T_WHITESPACE","\n\n  ",153],["T_DOC_COMMENT","\/**\n   * Check that language negotiation for fixed types matches the stored one.\n   *\/",155],["T_WHITESPACE","\n  ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","checkFixedLanguageTypes",158],"(",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$configurable",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","languageManager",159],"(",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","getLanguageTypes",159],"(",")",";",["T_WHITESPACE","\n    ",159],["T_FOREACH","foreach",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","languageManager",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","getDefinedLanguageTypesInfo",160],"(",")",["T_WHITESPACE"," ",160],["T_AS","as",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$type",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$info",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n      ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(","!",["T_STRING","in_array",161],"(",["T_VARIABLE","$type",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$configurable",161],")",["T_WHITESPACE"," ",161],["T_BOOLEAN_AND","&&",161],["T_WHITESPACE"," ",161],["T_ISSET","isset",161],"(",["T_VARIABLE","$info",161],"[",["T_CONSTANT_ENCAPSED_STRING","'fixed'",161],"]",")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$negotiation",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","config",162],"(",["T_CONSTANT_ENCAPSED_STRING","'language.types'",162],")",["T_OBJECT_OPERATOR","->",162],["T_STRING","get",162],"(",["T_CONSTANT_ENCAPSED_STRING","'negotiation.'",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_VARIABLE","$type",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'.enabled'",162],")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$equal",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","count",163],"(",["T_VARIABLE","$info",163],"[",["T_CONSTANT_ENCAPSED_STRING","'fixed'",163],"]",")",["T_WHITESPACE"," ",163],["T_IS_EQUAL","==",163],["T_WHITESPACE"," ",163],["T_STRING","count",163],"(",["T_VARIABLE","$negotiation",163],")",";",["T_WHITESPACE","\n        ",163],["T_WHILE","while",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$equal",164],["T_WHITESPACE"," ",164],["T_BOOLEAN_AND","&&",164],["T_WHITESPACE"," ",164],["T_LIST","list",164],"(",["T_VARIABLE","$id",164],")",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","each",164],"(",["T_VARIABLE","$negotiation",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n          ",164],["T_LIST","list",165],"(",",",["T_WHITESPACE"," ",165],["T_VARIABLE","$info_id",165],")",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","each",165],"(",["T_VARIABLE","$info",165],"[",["T_CONSTANT_ENCAPSED_STRING","'fixed'",165],"]",")",";",["T_WHITESPACE","\n          ",165],["T_VARIABLE","$equal",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$info_id",166],["T_WHITESPACE"," ",166],["T_IS_EQUAL","==",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$id",166],";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertTrue",168],"(",["T_VARIABLE","$equal",168],",",["T_WHITESPACE"," ",168],["T_STRING","format_string",168],"(",["T_CONSTANT_ENCAPSED_STRING","'language negotiation for %type is properly set up'",168],",",["T_WHITESPACE"," ",168],["T_ARRAY","array",168],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$type",168],")",")",")",";",["T_WHITESPACE","\n      ",168],"}",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n  ",170],"}",["T_WHITESPACE","\n\n  ",171],["T_DOC_COMMENT","\/**\n   * Tests altering config of configurable language types.\n   *\/",173],["T_WHITESPACE","\n  ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","testConfigLangTypeAlterations",176],"(",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n    ",176],["T_COMMENT","\/\/ Default of config.\n",177],["T_WHITESPACE","    ",178],["T_VARIABLE","$test_type",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","LanguageInterface",178],["T_DOUBLE_COLON","::",178],["T_STRING","TYPE_CONTENT",178],";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","assertFalse",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","isLanguageTypeConfigurable",179],"(",["T_VARIABLE","$test_type",179],")",",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'Language type is not configurable.'",179],")",";",["T_WHITESPACE","\n\n    ",179],["T_COMMENT","\/\/ Editing config.\n",181],["T_WHITESPACE","    ",182],["T_VARIABLE","$edit",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],"[",["T_VARIABLE","$test_type",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'[configurable]'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_STRING","TRUE",182],"]",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","drupalPostForm",183],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$edit",183],",",["T_WHITESPACE"," ",183],["T_STRING","t",183],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",183],")",")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertTrue",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","isLanguageTypeConfigurable",184],"(",["T_VARIABLE","$test_type",184],")",",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'Language type is now configurable.'",184],")",";",["T_WHITESPACE","\n\n    ",184],["T_COMMENT","\/\/ After installing another module, the config should be the same.\n",186],["T_WHITESPACE","    ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","drupalPostForm",187],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules'",187],",",["T_WHITESPACE"," ",187],"[",["T_CONSTANT_ENCAPSED_STRING","'modules[Testing][test_module][enable]'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_LNUMBER","1",187],"]",",",["T_WHITESPACE"," ",187],["T_STRING","t",187],"(",["T_CONSTANT_ENCAPSED_STRING","'Install'",187],")",")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","assertTrue",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","isLanguageTypeConfigurable",188],"(",["T_VARIABLE","$test_type",188],")",",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'Language type is still configurable.'",188],")",";",["T_WHITESPACE","\n\n    ",188],["T_COMMENT","\/\/ After uninstalling the other module, the config should be the same.\n",190],["T_WHITESPACE","    ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","drupalPostForm",191],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/uninstall'",191],",",["T_WHITESPACE"," ",191],"[",["T_CONSTANT_ENCAPSED_STRING","'uninstall[test_module]'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_LNUMBER","1",191],"]",",",["T_WHITESPACE"," ",191],["T_STRING","t",191],"(",["T_CONSTANT_ENCAPSED_STRING","'Uninstall'",191],")",")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertTrue",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","isLanguageTypeConfigurable",192],"(",["T_VARIABLE","$test_type",192],")",",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'Language type is still configurable.'",192],")",";",["T_WHITESPACE","\n  ",192],"}",["T_WHITESPACE","\n\n  ",193],["T_DOC_COMMENT","\/**\n   * Checks whether the given language type is configurable.\n   *\n   * @param string $type\n   *   The language type.\n   *\n   * @return bool\n   *   TRUE if the specified language type is configurable, FALSE otherwise.\n   *\/",195],["T_WHITESPACE","\n  ",203],["T_PROTECTED","protected",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","isLanguageTypeConfigurable",204],"(",["T_VARIABLE","$type",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n    ",204],["T_VARIABLE","$configurable_types",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","config",205],"(",["T_CONSTANT_ENCAPSED_STRING","'language.types'",205],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","get",205],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable'",205],")",";",["T_WHITESPACE","\n    ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_STRING","in_array",206],"(",["T_VARIABLE","$type",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$configurable_types",206],")",";",["T_WHITESPACE","\n  ",206],"}",["T_WHITESPACE","\n\n",207],"}",["T_WHITESPACE","\n",209]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","language",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Language",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Language",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LanguageInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Url",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","language",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Plugin",8],["T_NS_SEPARATOR","\\",8],["T_STRING","LanguageNegotiation",8],["T_NS_SEPARATOR","\\",8],["T_STRING","LanguageNegotiationUrl",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","simpletest",9],["T_NS_SEPARATOR","\\",9],["T_STRING","WebTestBase",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","HttpFoundation",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Request",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Tests that URL rewriting works as expected.\n *\n * @group language\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","LanguageUrlRewritingTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","WebTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'language_test'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * An user with permissions to administer languages.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$webUser",31],";",["T_WHITESPACE","\n\n  ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_STRING","parent",34],["T_DOUBLE_COLON","::",34],["T_STRING","setUp",34],"(",")",";",["T_WHITESPACE","\n\n    ",34],["T_COMMENT","\/\/ Create and log in user.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","webUser",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","drupalCreateUser",37],"(",["T_ARRAY","array",37],"(",["T_CONSTANT_ENCAPSED_STRING","'administer languages'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'access administration pages'",37],")",")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","drupalLogin",38],"(",["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","webUser",38],")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Install French language.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$edit",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$edit",42],"[",["T_CONSTANT_ENCAPSED_STRING","'predefined_langcode'",42],"]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'fr'",42],";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","drupalPostForm",43],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/add'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$edit",43],",",["T_WHITESPACE"," ",43],["T_STRING","t",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Add language'",43],")",")",";",["T_WHITESPACE","\n\n    ",43],["T_COMMENT","\/\/ Enable URL language detection and selection.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$edit",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",["T_CONSTANT_ENCAPSED_STRING","'language_interface[enabled][language-url]'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","drupalPostForm",47],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$edit",47],",",["T_WHITESPACE"," ",47],["T_STRING","t",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",47],")",")",";",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Check that drupalSettings contains path prefix.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","drupalGet",50],"(",["T_CONSTANT_ENCAPSED_STRING","'fr\/admin\/config\/regional\/language\/detection'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertRaw",51],"(",["T_CONSTANT_ENCAPSED_STRING","'\"pathPrefix\":\"fr\\\/\"'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'drupalSettings path prefix contains language code.'",51],")",";",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * Check that non-installed languages are not considered.\n   *\/",54],["T_WHITESPACE","\n  ",56],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","testUrlRewritingEdgeCases",57],"(",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n    ",57],["T_COMMENT","\/\/ Check URL rewriting with a non-installed language.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$non_existing",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_STRING","Language",59],"(",["T_ARRAY","array",59],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","randomMachineName",59],"(",")",")",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","checkUrl",60],"(",["T_VARIABLE","$non_existing",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Path language is ignored if language is not installed.'",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'URL language negotiation does not work with non-installed languages'",60],")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Check that URL rewriting is not applied to subrequests.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","drupalGet",63],"(",["T_CONSTANT_ENCAPSED_STRING","'language_test\/subrequest'",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertText",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","webUser",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getUsername",64],"(",")",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Page correctly retrieved'",64],")",";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * Check URL rewriting for the given language.\n   *\n   * The test is performed with a fixed URL (the default front page) to simply\n   * check that language prefixes are not added to it and that the prefixed URL\n   * is actually not working.\n   *\n   * @param \\Drupal\\Core\\Language\\LanguageInterface $language\n   *   The language object.\n   * @param string $message1\n   *   Message to display in assertion that language prefixes are not added.\n   * @param string $message2\n   *   The message to display confirming prefixed URL is not working.\n   *\/",67],["T_WHITESPACE","\n  ",80],["T_PRIVATE","private",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","checkUrl",81],"(",["T_STRING","LanguageInterface",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$language",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$message1",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$message2",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$options",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$language",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'script'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","''",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$base_path",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","trim",83],"(",["T_STRING","base_path",83],"(",")",",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\/'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$rewritten_path",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","trim",84],"(",["T_STRING","str_replace",84],"(",["T_VARIABLE","$base_path",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","''",84],",",["T_WHITESPACE"," ",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Drupal",84],["T_DOUBLE_COLON","::",84],["T_STRING","url",84],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",84],",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",")",",",["T_WHITESPACE"," ",84],["T_VARIABLE","$options",84],")",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'\/'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$segments",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","explode",85],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$rewritten_path",85],",",["T_WHITESPACE"," ",85],["T_LNUMBER","2",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$prefix",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$segments",86],"[",["T_LNUMBER","0",86],"]",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$path",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ISSET","isset",87],"(",["T_VARIABLE","$segments",87],"[",["T_LNUMBER","1",87],"]",")",["T_WHITESPACE"," ",87],"?",["T_WHITESPACE"," ",87],["T_VARIABLE","$segments",87],"[",["T_LNUMBER","1",87],"]",["T_WHITESPACE"," ",87],":",["T_WHITESPACE"," ",87],["T_VARIABLE","$prefix",87],";",["T_WHITESPACE","\n\n    ",87],["T_COMMENT","\/\/ If the rewritten URL has not a language prefix we pick a random prefix so\n",89],["T_WHITESPACE","    ",90],["T_COMMENT","\/\/ we can always check the prefixed URL.\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$prefixes",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","language_negotiation_url_prefixes",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$stored_prefix",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_ISSET","isset",92],"(",["T_VARIABLE","$prefixes",92],"[",["T_VARIABLE","$language",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getId",92],"(",")","]",")",["T_WHITESPACE"," ",92],"?",["T_WHITESPACE"," ",92],["T_VARIABLE","$prefixes",92],"[",["T_VARIABLE","$language",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getId",92],"(",")","]",["T_WHITESPACE"," ",92],":",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","randomMachineName",92],"(",")",";",["T_WHITESPACE","\n    ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertNotEqual",93],"(",["T_VARIABLE","$stored_prefix",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$prefix",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$message1",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$prefix",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$stored_prefix",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","drupalGet",97],"(","\"",["T_VARIABLE","$prefix",97],["T_ENCAPSED_AND_WHITESPACE","\/",97],["T_VARIABLE","$path",97],"\"",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertResponse",98],"(",["T_LNUMBER","404",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$message2",98],")",";",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n\n  ",99],["T_DOC_COMMENT","\/**\n   * Check URL rewriting when using a domain name and a non-standard port.\n   *\/",101],["T_WHITESPACE","\n  ",103],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","testDomainNameNegotiationPort",104],"(",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_GLOBAL","global",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$base_url",105],";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$language_domain",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'example.fr'",106],";",["T_WHITESPACE","\n    ",106],["T_COMMENT","\/\/ Get the current host URI we're running on.\n",107],["T_WHITESPACE","    ",108],["T_VARIABLE","$base_url_host",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","parse_url",108],"(",["T_VARIABLE","$base_url",108],",",["T_WHITESPACE"," ",108],["T_STRING","PHP_URL_HOST",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$edit",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",["T_WHITESPACE","\n      ",109],["T_CONSTANT_ENCAPSED_STRING","'language_negotiation_url_part'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_STRING","LanguageNegotiationUrl",110],["T_DOUBLE_COLON","::",110],["T_STRING","CONFIG_DOMAIN",110],",",["T_WHITESPACE","\n      ",110],["T_CONSTANT_ENCAPSED_STRING","'domain[en]'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$base_url_host",111],",",["T_WHITESPACE","\n      ",111],["T_CONSTANT_ENCAPSED_STRING","'domain[fr]'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$language_domain",112],["T_WHITESPACE","\n    ",112],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","drupalPostForm",114],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection\/url'",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$edit",114],",",["T_WHITESPACE"," ",114],["T_STRING","t",114],"(",["T_CONSTANT_ENCAPSED_STRING","'Save configuration'",114],")",")",";",["T_WHITESPACE","\n    ",114],["T_COMMENT","\/\/ Rebuild the container so that the new language gets picked up by services\n",115],["T_WHITESPACE","    ",116],["T_COMMENT","\/\/ that hold the list of languages.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","rebuildContainer",117],"(",")",";",["T_WHITESPACE","\n\n    ",117],["T_COMMENT","\/\/ Enable domain configuration.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","config",120],"(",["T_CONSTANT_ENCAPSED_STRING","'language.negotiation'",120],")",["T_WHITESPACE","\n      ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","set",121],"(",["T_CONSTANT_ENCAPSED_STRING","'url.source'",121],",",["T_WHITESPACE"," ",121],["T_STRING","LanguageNegotiationUrl",121],["T_DOUBLE_COLON","::",121],["T_STRING","CONFIG_DOMAIN",121],")",["T_WHITESPACE","\n      ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","save",122],"(",")",";",["T_WHITESPACE","\n\n    ",122],["T_COMMENT","\/\/ Reset static caching.\n",124],["T_WHITESPACE","    ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","container",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","get",125],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","reset",125],"(",")",";",["T_WHITESPACE","\n\n    ",125],["T_COMMENT","\/\/ In case index.php is part of the URLs, we need to adapt the asserted\n",127],["T_WHITESPACE","    ",128],["T_COMMENT","\/\/ URLs as well.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$index_php",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","strpos",129],"(",["T_NS_SEPARATOR","\\",129],["T_STRING","Drupal",129],["T_DOUBLE_COLON","::",129],["T_STRING","url",129],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",129],",",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",")",",",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'absolute'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_STRING","TRUE",129],")",")",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'index.php'",129],")",["T_WHITESPACE"," ",129],["T_IS_NOT_IDENTICAL","!==",129],["T_WHITESPACE"," ",129],["T_STRING","FALSE",129],";",["T_WHITESPACE","\n\n    ",129],["T_VARIABLE","$request",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","Request",131],["T_DOUBLE_COLON","::",131],["T_STRING","createFromGlobals",131],"(",")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$server",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$request",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","server",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","all",132],"(",")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$request",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","prepareRequestForGenerator",133],"(",["T_STRING","TRUE",133],",",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$server",133],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",133],"]",["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","':88'",133],")",")",";",["T_WHITESPACE","\n\n    ",133],["T_COMMENT","\/\/ Create an absolute French link.\n",135],["T_WHITESPACE","    ",136],["T_VARIABLE","$language",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Drupal",136],["T_DOUBLE_COLON","::",136],["T_STRING","languageManager",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","getLanguage",136],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$url",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","Url",137],["T_DOUBLE_COLON","::",137],["T_STRING","fromRoute",137],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",137],",",["T_WHITESPACE"," ",137],"[","]",",",["T_WHITESPACE"," ",137],"[",["T_WHITESPACE","\n      ",137],["T_CONSTANT_ENCAPSED_STRING","'absolute'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_STRING","TRUE",138],",",["T_WHITESPACE","\n      ",138],["T_CONSTANT_ENCAPSED_STRING","'language'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$language",139],",",["T_WHITESPACE","\n    ",139],"]",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","toString",140],"(",")",";",["T_WHITESPACE","\n\n    ",140],["T_VARIABLE","$expected",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$index_php",142],["T_WHITESPACE"," ",142],"?",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.fr:88\/index.php'",142],["T_WHITESPACE"," ",142],":",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.fr:88'",142],")",["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_STRING","rtrim",142],"(",["T_STRING","base_path",142],"(",")",",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'\/'",142],")",["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'\/'",142],";",["T_WHITESPACE","\n\n    ",142],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertEqual",144],"(",["T_VARIABLE","$url",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$expected",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'The right port is used.'",144],")",";",["T_WHITESPACE","\n\n    ",144],["T_COMMENT","\/\/ If we set the port explicitly, it should not be overridden.\n",146],["T_WHITESPACE","    ",147],["T_VARIABLE","$url",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","Url",147],["T_DOUBLE_COLON","::",147],["T_STRING","fromRoute",147],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",147],",",["T_WHITESPACE"," ",147],"[","]",",",["T_WHITESPACE"," ",147],"[",["T_WHITESPACE","\n      ",147],["T_CONSTANT_ENCAPSED_STRING","'absolute'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_STRING","TRUE",148],",",["T_WHITESPACE","\n      ",148],["T_CONSTANT_ENCAPSED_STRING","'language'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$language",149],",",["T_WHITESPACE","\n      ",149],["T_CONSTANT_ENCAPSED_STRING","'base_url'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$request",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getBaseUrl",150],"(",")",["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","':90'",150],",",["T_WHITESPACE","\n    ",150],"]",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","toString",151],"(",")",";",["T_WHITESPACE","\n\n    ",151],["T_VARIABLE","$expected",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$index_php",153],["T_WHITESPACE"," ",153],"?",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.fr:90\/index.php'",153],["T_WHITESPACE"," ",153],":",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.fr:90'",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_STRING","rtrim",153],"(",["T_STRING","base_path",153],"(",")",",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'\/'",153],")",["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'\/'",153],";",["T_WHITESPACE","\n\n    ",153],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","assertEqual",155],"(",["T_VARIABLE","$url",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$expected",155],",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'A given port is not overridden.'",155],")",";",["T_WHITESPACE","\n\n  ",155],"}",["T_WHITESPACE","\n\n",157],"}",["T_WHITESPACE","\n",159]]
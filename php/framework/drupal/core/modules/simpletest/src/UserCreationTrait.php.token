[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","simpletest",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","SafeMarkup",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Session",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AccountInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","user",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Role",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","user",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","User",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","user",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RoleInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Provides methods to create additional test users and switch the currently\n * logged in one.\n *\n * This trait is meant to be used only by test classes extending\n * \\Drupal\\simpletest\\TestBase.\n *\/",11],["T_WHITESPACE","\n",17],["T_TRAIT","trait",18],["T_WHITESPACE"," ",18],["T_STRING","UserCreationTrait",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Switch the current logged in user.\n   *\n   * @param \\Drupal\\Core\\Session\\AccountInterface $account\n   *   The user account object.\n   *\/",20],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setCurrentUser",26],"(",["T_STRING","AccountInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$account",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_NS_SEPARATOR","\\",27],["T_STRING","Drupal",27],["T_DOUBLE_COLON","::",27],["T_STRING","currentUser",27],"(",")",["T_OBJECT_OPERATOR","->",27],["T_STRING","setAccount",27],"(",["T_VARIABLE","$account",27],")",";",["T_WHITESPACE","\n  ",27],"}",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Create a user with a given set of permissions.\n   *\n   * @param array $permissions\n   *   Array of permission names to assign to user. Note that the user always\n   *   has the default permissions derived from the \"authenticated users\" role.\n   * @param string $name\n   *   The user name.\n   * @param bool $admin\n   *   (optional) Whether the user should be an administrator\n   *   with all the available permissions.\n   *\n   * @return \\Drupal\\user\\Entity\\User|false\n   *   A fully loaded user object with pass_raw property, or FALSE if account\n   *   creation fails.\n   *\/",30],["T_WHITESPACE","\n  ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","createUser",46],"(",["T_ARRAY","array",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$permissions",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",")",",",["T_WHITESPACE"," ",46],["T_VARIABLE","$name",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","NULL",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$admin",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","FALSE",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_COMMENT","\/\/ Create a role with the given permission set, if any.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$rid",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","FALSE",48],";",["T_WHITESPACE","\n    ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$permissions",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n      ",49],["T_VARIABLE","$rid",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","createRole",50],"(",["T_VARIABLE","$permissions",50],")",";",["T_WHITESPACE","\n      ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(","!",["T_VARIABLE","$rid",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n        ",51],["T_RETURN","return",52],["T_WHITESPACE"," ",52],["T_STRING","FALSE",52],";",["T_WHITESPACE","\n      ",52],"}",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Create a user assigned to that role.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$edit",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$edit",58],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"!",["T_EMPTY","empty",58],"(",["T_VARIABLE","$name",58],")",["T_WHITESPACE"," ",58],"?",["T_WHITESPACE"," ",58],["T_VARIABLE","$name",58],["T_WHITESPACE"," ",58],":",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","randomMachineName",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$edit",59],"[",["T_CONSTANT_ENCAPSED_STRING","'mail'",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$edit",59],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",59],"]",["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'@example.com'",59],";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$edit",60],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",60],"]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","user_password",60],"(",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$edit",61],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",61],"]",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_LNUMBER","1",61],";",["T_WHITESPACE","\n    ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$rid",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_VARIABLE","$edit",63],"[",["T_CONSTANT_ENCAPSED_STRING","'roles'",63],"]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_VARIABLE","$rid",63],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$admin",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n      ",66],["T_VARIABLE","$edit",67],"[",["T_CONSTANT_ENCAPSED_STRING","'roles'",67],"]","[","]",["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","createAdminRole",67],"(",")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_VARIABLE","$account",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","User",70],["T_DOUBLE_COLON","::",70],["T_STRING","create",70],"(",["T_VARIABLE","$edit",70],")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$account",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","save",71],"(",")",";",["T_WHITESPACE","\n\n    ",71],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertTrue",73],"(",["T_VARIABLE","$account",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","id",73],"(",")",",",["T_WHITESPACE"," ",73],["T_STRING","SafeMarkup",73],["T_DOUBLE_COLON","::",73],["T_STRING","format",73],"(",["T_CONSTANT_ENCAPSED_STRING","'User created with name %name and pass %pass'",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$edit",73],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",73],"]",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'%pass'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$edit",73],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",73],"]",")",")",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'User login'",73],")",";",["T_WHITESPACE","\n    ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_VARIABLE","$account",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","id",74],"(",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n      ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_STRING","FALSE",75],";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ Add the raw password so that we can log in as this user.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$account",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","pass_raw",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$edit",79],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",79],"]",";",["T_WHITESPACE","\n    ",79],["T_COMMENT","\/\/ Support BrowserTestBase as well.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$account",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","passRaw",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$account",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","pass_raw",81],";",["T_WHITESPACE","\n    ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$account",82],";",["T_WHITESPACE","\n  ",82],"}",["T_WHITESPACE","\n\n  ",83],["T_DOC_COMMENT","\/**\n   * Creates an administrative role.\n   *\n   * @param string $rid\n   *   (optional) The role ID (machine name). Defaults to a random name.\n   * @param string $name\n   *   (optional) The label for the role. Defaults to a random string.\n   * @param int $weight\n   *   (optional) The weight for the role. Defaults NULL so that entity_create()\n   *   sets the weight to maximum + 1.\n   *\n   * @return string\n   *   Role ID of newly created role, or FALSE if role creation failed.\n   *\/",85],["T_WHITESPACE","\n  ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","createAdminRole",99],"(",["T_VARIABLE","$rid",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","NULL",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$name",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","NULL",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$weight",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","NULL",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$rid",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","createRole",100],"(","[","]",",",["T_WHITESPACE"," ",100],["T_VARIABLE","$rid",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$name",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$weight",100],")",";",["T_WHITESPACE","\n    ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$rid",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n      ",101],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\RoleInterface $role *\/",102],["T_WHITESPACE","\n      ",102],["T_VARIABLE","$role",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","Role",103],["T_DOUBLE_COLON","::",103],["T_STRING","load",103],"(",["T_VARIABLE","$rid",103],")",";",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$role",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setIsAdmin",104],"(",["T_STRING","TRUE",104],")",";",["T_WHITESPACE","\n      ",104],["T_VARIABLE","$role",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","save",105],"(",")",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n    ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$rid",107],";",["T_WHITESPACE","\n  ",107],"}",["T_WHITESPACE","\n\n  ",108],["T_DOC_COMMENT","\/**\n   * Creates a role with specified permissions.\n   *\n   * @param array $permissions\n   *   Array of permission names to assign to role.\n   * @param string $rid\n   *   (optional) The role ID (machine name). Defaults to a random name.\n   * @param string $name\n   *   (optional) The label for the role. Defaults to a random string.\n   * @param int $weight\n   *   (optional) The weight for the role. Defaults NULL so that entity_create()\n   *   sets the weight to maximum + 1.\n   *\n   * @return string\n   *   Role ID of newly created role, or FALSE if role creation failed.\n   *\/",110],["T_WHITESPACE","\n  ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","createRole",126],"(",["T_ARRAY","array",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$permissions",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$rid",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","NULL",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$name",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","NULL",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$weight",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","NULL",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n    ",126],["T_COMMENT","\/\/ Generate a random, lowercase machine name if none was passed.\n",127],["T_WHITESPACE","    ",128],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_ISSET","isset",128],"(",["T_VARIABLE","$rid",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n      ",128],["T_VARIABLE","$rid",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","strtolower",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","randomMachineName",129],"(",["T_LNUMBER","8",129],")",")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n    ",130],["T_COMMENT","\/\/ Generate a random label.\n",131],["T_WHITESPACE","    ",132],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_ISSET","isset",132],"(",["T_VARIABLE","$name",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n      ",132],["T_COMMENT","\/\/ In the role UI role names are trimmed and random string can start or\n",133],["T_WHITESPACE","      ",134],["T_COMMENT","\/\/ end with a space.\n",134],["T_WHITESPACE","      ",135],["T_VARIABLE","$name",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","trim",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","randomString",135],"(",["T_LNUMBER","8",135],")",")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ Check the all the permissions strings are valid.\n",138],["T_WHITESPACE","    ",139],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","checkPermissions",139],"(",["T_VARIABLE","$permissions",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n      ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","FALSE",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Create new role.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$role",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","Role",144],["T_DOUBLE_COLON","::",144],["T_STRING","create",144],"(",["T_ARRAY","array",144],"(",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'id'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$rid",145],",",["T_WHITESPACE","\n      ",145],["T_CONSTANT_ENCAPSED_STRING","'label'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$name",146],",",["T_WHITESPACE","\n    ",146],")",")",";",["T_WHITESPACE","\n    ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_ISSET","isset",148],"(",["T_VARIABLE","$weight",148],")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n      ",148],["T_VARIABLE","$role",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","set",149],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$weight",149],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$result",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$role",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","save",151],"(",")",";",["T_WHITESPACE","\n\n    ",151],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertIdentical",153],"(",["T_VARIABLE","$result",153],",",["T_WHITESPACE"," ",153],["T_STRING","SAVED_NEW",153],",",["T_WHITESPACE"," ",153],["T_STRING","SafeMarkup",153],["T_DOUBLE_COLON","::",153],["T_STRING","format",153],"(",["T_CONSTANT_ENCAPSED_STRING","'Created role ID @rid with name @name.'",153],",",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'@name'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_STRING","var_export",154],"(",["T_VARIABLE","$role",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","label",154],"(",")",",",["T_WHITESPACE"," ",154],["T_STRING","TRUE",154],")",",",["T_WHITESPACE","\n      ",154],["T_CONSTANT_ENCAPSED_STRING","'@rid'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_STRING","var_export",155],"(",["T_VARIABLE","$role",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","id",155],"(",")",",",["T_WHITESPACE"," ",155],["T_STRING","TRUE",155],")",",",["T_WHITESPACE","\n    ",155],")",")",",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'Role'",156],")",";",["T_WHITESPACE","\n\n    ",156],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$result",158],["T_WHITESPACE"," ",158],["T_IS_IDENTICAL","===",158],["T_WHITESPACE"," ",158],["T_STRING","SAVED_NEW",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n      ",158],["T_COMMENT","\/\/ Grant the specified permissions to the role, if any.\n",159],["T_WHITESPACE","      ",160],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_EMPTY","empty",160],"(",["T_VARIABLE","$permissions",160],")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","grantPermissions",161],"(",["T_VARIABLE","$role",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$permissions",161],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$assigned_permissions",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","Role",162],["T_DOUBLE_COLON","::",162],["T_STRING","load",162],"(",["T_VARIABLE","$role",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","id",162],"(",")",")",["T_OBJECT_OPERATOR","->",162],["T_STRING","getPermissions",162],"(",")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$missing_permissions",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","array_diff",163],"(",["T_VARIABLE","$permissions",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$assigned_permissions",163],")",";",["T_WHITESPACE","\n        ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(","!",["T_VARIABLE","$missing_permissions",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n          ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","pass",165],"(",["T_STRING","SafeMarkup",165],["T_DOUBLE_COLON","::",165],["T_STRING","format",165],"(",["T_CONSTANT_ENCAPSED_STRING","'Created permissions: @perms'",165],",",["T_WHITESPACE"," ",165],["T_ARRAY","array",165],"(",["T_CONSTANT_ENCAPSED_STRING","'@perms'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_STRING","implode",165],"(",["T_CONSTANT_ENCAPSED_STRING","', '",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$permissions",165],")",")",")",",",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'Role'",165],")",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_ELSE","else",167],["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n          ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","fail",168],"(",["T_STRING","SafeMarkup",168],["T_DOUBLE_COLON","::",168],["T_STRING","format",168],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create permissions: @perms'",168],",",["T_WHITESPACE"," ",168],["T_ARRAY","array",168],"(",["T_CONSTANT_ENCAPSED_STRING","'@perms'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_STRING","implode",168],"(",["T_CONSTANT_ENCAPSED_STRING","', '",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$missing_permissions",168],")",")",")",",",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'Role'",168],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n      ",169],"}",["T_WHITESPACE","\n      ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$role",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","id",171],"(",")",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n    ",172],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n      ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","FALSE",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n  ",175],"}",["T_WHITESPACE","\n\n  ",176],["T_DOC_COMMENT","\/**\n   * Checks whether a given list of permission names is valid.\n   *\n   * @param array $permissions\n   *   The permission names to check.\n   *\n   * @return bool\n   *   TRUE if the permissions are valid, FALSE otherwise.\n   *\/",178],["T_WHITESPACE","\n  ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","checkPermissions",187],"(",["T_ARRAY","array",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$permissions",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$available",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","array_keys",188],"(",["T_NS_SEPARATOR","\\",188],["T_STRING","Drupal",188],["T_DOUBLE_COLON","::",188],["T_STRING","service",188],"(",["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","getPermissions",188],"(",")",")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$valid",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","TRUE",189],";",["T_WHITESPACE","\n    ",189],["T_FOREACH","foreach",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$permissions",190],["T_WHITESPACE"," ",190],["T_AS","as",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$permission",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n      ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(","!",["T_STRING","in_array",191],"(",["T_VARIABLE","$permission",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$available",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","fail",192],"(",["T_STRING","SafeMarkup",192],["T_DOUBLE_COLON","::",192],["T_STRING","format",192],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid permission %permission.'",192],",",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_CONSTANT_ENCAPSED_STRING","'%permission'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$permission",192],")",")",",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'Role'",192],")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$valid",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","FALSE",193],";",["T_WHITESPACE","\n      ",193],"}",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n    ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$valid",196],";",["T_WHITESPACE","\n  ",196],"}",["T_WHITESPACE","\n\n  ",197],["T_DOC_COMMENT","\/**\n   * Grant permissions to a user role.\n   *\n   * @param \\Drupal\\user\\RoleInterface $role\n   *   The ID of a user role to alter.\n   * @param array $permissions\n   *   (optional) A list of permission names to grant.\n   *\/",199],["T_WHITESPACE","\n  ",206],["T_PROTECTED","protected",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","grantPermissions",207],"(",["T_STRING","RoleInterface",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$role",207],",",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$permissions",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n    ",207],["T_FOREACH","foreach",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$permissions",208],["T_WHITESPACE"," ",208],["T_AS","as",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$permission",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n      ",208],["T_VARIABLE","$role",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","grantPermission",209],"(",["T_VARIABLE","$permission",209],")",";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$role",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","trustData",211],"(",")",["T_OBJECT_OPERATOR","->",211],["T_STRING","save",211],"(",")",";",["T_WHITESPACE","\n  ",211],"}",["T_WHITESPACE","\n\n",212],"}",["T_WHITESPACE","\n",214]]
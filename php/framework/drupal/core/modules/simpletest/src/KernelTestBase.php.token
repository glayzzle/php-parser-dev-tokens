[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","simpletest",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Html",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SafeMarkup",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Variable",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Database",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Database",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DependencyInjection",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ContainerBuilder",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DrupalKernel",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Sql",11],["T_NS_SEPARATOR","\\",11],["T_STRING","SqlEntityStorageInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Extension",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ExtensionDiscovery",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","KeyValueStore",13],["T_NS_SEPARATOR","\\",13],["T_STRING","KeyValueMemoryFactory",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Language",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Language",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Core",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Site",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Settings",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","DependencyInjection",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Parameter",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Drupal",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Core",17],["T_NS_SEPARATOR","\\",17],["T_STRING","StreamWrapper",17],["T_NS_SEPARATOR","\\",17],["T_STRING","StreamWrapperInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","DependencyInjection",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Reference",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","HttpFoundation",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Request",19],";",["T_WHITESPACE","\n\n",19],["T_DOC_COMMENT","\/**\n * Base class for integration tests.\n *\n * Tests extending this base class can access files and the database, but the\n * entire environment is initially empty. Drupal runs in a minimal mocked\n * environment, comparable to the one in the early installer.\n *\n * The module\/hook system is functional and operates on a fixed module list.\n * Additional modules needed in a test may be loaded and added to the fixed\n * module list.\n *\n * @deprecated in Drupal 8.0.x, will be removed before Drupal 9.0.0. Use\n *   \\Drupal\\KernelTests\\KernelTestBase instead.\n *\n * @see \\Drupal\\simpletest\\KernelTestBase::$modules\n * @see \\Drupal\\simpletest\\KernelTestBase::enableModules()\n *\n * @ingroup testing\n *\/",21],["T_WHITESPACE","\n",39],["T_ABSTRACT","abstract",40],["T_WHITESPACE"," ",40],["T_CLASS","class",40],["T_WHITESPACE"," ",40],["T_STRING","KernelTestBase",40],["T_WHITESPACE"," ",40],["T_EXTENDS","extends",40],["T_WHITESPACE"," ",40],["T_STRING","TestBase",40],["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\n  ",40],["T_USE","use",42],["T_WHITESPACE"," ",42],["T_STRING","AssertContentTrait",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * Test classes extending this class, and any classes in the hierarchy up to\n   * this class, may specify individual lists of modules to enable by setting\n   * this property. The values of all properties in all classes in the hierarchy\n   * are merged.\n   *\n   * Any modules specified in the $modules property are automatically loaded and\n   * set as the fixed module list.\n   *\n   * Unlike WebTestBase::setUp(), the specified modules are loaded only, but not\n   * automatically installed. Modules need to be installed manually, if needed.\n   *\n   * @see \\Drupal\\simpletest\\KernelTestBase::enableModules()\n   * @see \\Drupal\\simpletest\\KernelTestBase::setUp()\n   *\n   * @var array\n   *\/",44],["T_WHITESPACE","\n  ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_STATIC","static",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$modules",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n\n  ",63],["T_PRIVATE","private",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$moduleFiles",65],";",["T_WHITESPACE","\n  ",65],["T_PRIVATE","private",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$themeFiles",66],";",["T_WHITESPACE","\n\n  ",66],["T_DOC_COMMENT","\/**\n   * The configuration directories for this test run.\n   *\n   * @var array\n   *\/",68],["T_WHITESPACE","\n  ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$configDirectories",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",")",";",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * A KeyValueMemoryFactory instance to use when building the container.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueMemoryFactory.\n   *\/",75],["T_WHITESPACE","\n  ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$keyValueFactory",80],";",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * Array of registered stream wrappers.\n   *\n   * @var array\n   *\/",82],["T_WHITESPACE","\n  ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$streamWrappers",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",")",";",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",89],["T_WHITESPACE","\n  ",91],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","__construct",92],"(",["T_VARIABLE","$test_id",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","NULL",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n    ",92],["T_STRING","parent",93],["T_DOUBLE_COLON","::",93],["T_STRING","__construct",93],"(",["T_VARIABLE","$test_id",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","skipClasses",94],"[",["T_CLASS_C","__CLASS__",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","TRUE",94],";",["T_WHITESPACE","\n  ",94],"}",["T_WHITESPACE","\n\n  ",95],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",97],["T_WHITESPACE","\n  ",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","beforePrepareEnvironment",100],"(",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n    ",100],["T_COMMENT","\/\/ Copy\/prime extension file lists once to avoid filesystem scans.\n",101],["T_WHITESPACE","    ",102],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_ISSET","isset",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","moduleFiles",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","moduleFiles",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Drupal",103],["T_DOUBLE_COLON","::",103],["T_STRING","state",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","get",103],"(",["T_CONSTANT_ENCAPSED_STRING","'system.module.files'",103],")",["T_WHITESPACE"," ",103],"?",":",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",")",";",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","themeFiles",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Drupal",104],["T_DOUBLE_COLON","::",104],["T_STRING","state",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","get",104],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme.files'",104],")",["T_WHITESPACE"," ",104],"?",":",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n  ",105],"}",["T_WHITESPACE","\n\n  ",106],["T_DOC_COMMENT","\/**\n   * Create and set new configuration directories.\n   *\n   * @see config_get_config_directory()\n   *\n   * @throws \\RuntimeException\n   *   Thrown when CONFIG_SYNC_DIRECTORY cannot be created or made writable.\n   *\/",108],["T_WHITESPACE","\n  ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","prepareConfigDirectories",116],"(",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","configDirectories",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",")",";",["T_WHITESPACE","\n    ",117],["T_INCLUDE_ONCE","include_once",118],["T_WHITESPACE"," ",118],["T_STRING","DRUPAL_ROOT",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'\/core\/includes\/install.inc'",118],";",["T_WHITESPACE","\n    ",118],["T_COMMENT","\/\/ Assign the relative path to the global variable.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$path",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","siteDirectory",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'\/config_'",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_STRING","CONFIG_SYNC_DIRECTORY",120],";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$GLOBALS",121],"[",["T_CONSTANT_ENCAPSED_STRING","'config_directories'",121],"]","[",["T_STRING","CONFIG_SYNC_DIRECTORY",121],"]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$path",121],";",["T_WHITESPACE","\n    ",121],["T_COMMENT","\/\/ Ensure the directory can be created and is writeable.\n",122],["T_WHITESPACE","    ",123],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_STRING","install_ensure_config_directory",123],"(",["T_STRING","CONFIG_SYNC_DIRECTORY",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n      ",123],["T_THROW","throw",124],["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_NS_SEPARATOR","\\",124],["T_STRING","RuntimeException",124],"(",["T_CONSTANT_ENCAPSED_STRING","\"Failed to create '\"",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_STRING","CONFIG_SYNC_DIRECTORY",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],"\"",["T_ENCAPSED_AND_WHITESPACE","' config directory ",124],["T_VARIABLE","$path",124],"\"",")",";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n    ",125],["T_COMMENT","\/\/ Provide the already resolved path for tests.\n",126],["T_WHITESPACE","    ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","configDirectories",127],"[",["T_STRING","CONFIG_SYNC_DIRECTORY",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$path",127],";",["T_WHITESPACE","\n  ",127],"}",["T_WHITESPACE","\n\n  ",128],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",130],["T_WHITESPACE","\n  ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","setUp",133],"(",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","keyValueFactory",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","KeyValueMemoryFactory",134],"(",")",";",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ Back up settings from TestBase::prepareEnvironment().\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$settings",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","Settings",137],["T_DOUBLE_COLON","::",137],["T_STRING","getAll",137],"(",")",";",["T_WHITESPACE","\n\n    ",137],["T_COMMENT","\/\/ Allow for test-specific overrides.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$directory",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","DRUPAL_ROOT",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'\/'",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","siteDirectory",140],";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$settings_services_file",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","DRUPAL_ROOT",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'\/'",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","originalSite",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'\/testing.services.yml'",141],";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$container_yamls",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],"[","]",";",["T_WHITESPACE","\n    ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_STRING","file_exists",143],"(",["T_VARIABLE","$settings_services_file",143],")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n      ",143],["T_COMMENT","\/\/ Copy the testing-specific service overrides in place.\n",144],["T_WHITESPACE","      ",145],["T_VARIABLE","$testing_services_file",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$directory",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'\/services.yml'",145],";",["T_WHITESPACE","\n      ",145],["T_STRING","copy",146],"(",["T_VARIABLE","$settings_services_file",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$testing_services_file",146],")",";",["T_WHITESPACE","\n      ",146],["T_VARIABLE","$container_yamls",147],"[","]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$testing_services_file",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$settings_testing_file",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","DRUPAL_ROOT",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'\/'",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","originalSite",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'\/settings.testing.php'",149],";",["T_WHITESPACE","\n    ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_STRING","file_exists",150],"(",["T_VARIABLE","$settings_testing_file",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n      ",150],["T_COMMENT","\/\/ Copy the testing-specific settings.php overrides in place.\n",151],["T_WHITESPACE","      ",152],["T_STRING","copy",152],"(",["T_VARIABLE","$settings_testing_file",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$directory",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'\/settings.testing.php'",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_STRING","file_exists",155],"(",["T_VARIABLE","$directory",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'\/settings.testing.php'",155],")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n      ",155],["T_COMMENT","\/\/ Add the name of the testing class to settings.php and include the\n",156],["T_WHITESPACE","      ",157],["T_COMMENT","\/\/ testing specific overrides\n",157],["T_WHITESPACE","      ",158],["T_VARIABLE","$hash_salt",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","Settings",158],["T_DOUBLE_COLON","::",158],["T_STRING","getHashSalt",158],"(",")",";",["T_WHITESPACE","\n      ",158],["T_VARIABLE","$test_class",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","get_class",159],"(",["T_VARIABLE","$this",159],")",";",["T_WHITESPACE","\n      ",159],["T_VARIABLE","$container_yamls_export",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","Variable",160],["T_DOUBLE_COLON","::",160],["T_STRING","export",160],"(",["T_VARIABLE","$container_yamls",160],")",";",["T_WHITESPACE","\n      ",160],["T_VARIABLE","$php",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_START_HEREDOC","<<<EOD\n",161],["T_ENCAPSED_AND_WHITESPACE","<?php\n\n\\$settings['hash_salt'] = '",162],["T_VARIABLE","$hash_salt",164],["T_ENCAPSED_AND_WHITESPACE","';\n\\$settings['container_yamls'] = ",164],["T_VARIABLE","$container_yamls_export",165],["T_ENCAPSED_AND_WHITESPACE",";\n\n\\$test_class = '",165],["T_VARIABLE","$test_class",167],["T_ENCAPSED_AND_WHITESPACE","';\ninclude DRUPAL_ROOT . '\/' . \\$site_path . '\/settings.testing.php';\n",167],["T_END_HEREDOC","EOD",169],";",["T_WHITESPACE","\n      ",169],["T_STRING","file_put_contents",170],"(",["T_VARIABLE","$directory",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'\/settings.php'",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$php",170],")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_COMMENT","\/\/ Add this test class as a service provider.\n",173],["T_WHITESPACE","    ",174],["T_COMMENT","\/\/ @todo Remove the indirection; implement ServiceProviderInterface instead.\n",174],["T_WHITESPACE","    ",175],["T_VARIABLE","$GLOBALS",175],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",175],"]","[",["T_CONSTANT_ENCAPSED_STRING","'container_service_providers'",175],"]","[",["T_CONSTANT_ENCAPSED_STRING","'TestServiceProvider'",175],"]",["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\simpletest\\TestServiceProvider'",175],";",["T_WHITESPACE","\n\n    ",175],["T_COMMENT","\/\/ Bootstrap a new kernel.\n",177],["T_WHITESPACE","    ",178],["T_VARIABLE","$class_loader",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_REQUIRE","require",178],["T_WHITESPACE"," ",178],["T_STRING","DRUPAL_ROOT",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'\/autoload.php'",178],";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","kernel",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_NEW","new",179],["T_WHITESPACE"," ",179],["T_STRING","DrupalKernel",179],"(",["T_CONSTANT_ENCAPSED_STRING","'testing'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$class_loader",179],",",["T_WHITESPACE"," ",179],["T_STRING","FALSE",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$request",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","Request",180],["T_DOUBLE_COLON","::",180],["T_STRING","create",180],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$site_path",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","DrupalKernel",181],["T_DOUBLE_COLON","::",181],["T_STRING","findSitePath",181],"(",["T_VARIABLE","$request",181],")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","kernel",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","setSitePath",182],"(",["T_VARIABLE","$site_path",182],")",";",["T_WHITESPACE","\n    ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_STRING","file_exists",183],"(",["T_VARIABLE","$directory",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'\/settings.testing.php'",183],")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n      ",183],["T_STRING","Settings",184],["T_DOUBLE_COLON","::",184],["T_STRING","initialize",184],"(",["T_STRING","DRUPAL_ROOT",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$site_path",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$class_loader",184],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","kernel",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","boot",186],"(",")",";",["T_WHITESPACE","\n\n    ",186],["T_COMMENT","\/\/ Ensure database install tasks have been run.\n",188],["T_WHITESPACE","    ",189],["T_REQUIRE_ONCE","require_once",189],["T_WHITESPACE"," ",189],["T_DIR","__DIR__",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/includes\/install.inc'",189],";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$connection",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","Database",190],["T_DOUBLE_COLON","::",190],["T_STRING","getConnection",190],"(",")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$errors",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","db_installer_object",191],"(",["T_VARIABLE","$connection",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","driver",191],"(",")",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","runTasks",191],"(",")",";",["T_WHITESPACE","\n    ",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(","!",["T_EMPTY","empty",192],"(",["T_VARIABLE","$errors",192],")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n      ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","fail",193],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to run installer database tasks: '",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_STRING","implode",193],"(",["T_CONSTANT_ENCAPSED_STRING","', '",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$errors",193],")",")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_COMMENT","\/\/ Reboot the kernel because the container might contain a connection to the\n",196],["T_WHITESPACE","    ",197],["T_COMMENT","\/\/ database that has been closed during the database install tasks. This\n",197],["T_WHITESPACE","    ",198],["T_COMMENT","\/\/ prevents any services created during the first boot from having stale\n",198],["T_WHITESPACE","    ",199],["T_COMMENT","\/\/ database connections, for example, \\Drupal\\Core\\Config\\DatabaseStorage.\n",199],["T_WHITESPACE","    ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","kernel",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","shutdown",200],"(",")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","kernel",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","boot",201],"(",")",";",["T_WHITESPACE","\n\n\n    ",201],["T_COMMENT","\/\/ Save the original site directory path, so that extensions in the\n",204],["T_WHITESPACE","    ",205],["T_COMMENT","\/\/ site-specific directory can still be discovered in the test site\n",205],["T_WHITESPACE","    ",206],["T_COMMENT","\/\/ environment.\n",206],["T_WHITESPACE","    ",207],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Extension\\ExtensionDiscovery::scan()\n",207],["T_WHITESPACE","    ",208],["T_VARIABLE","$settings",208],"[",["T_CONSTANT_ENCAPSED_STRING","'test_parent_site'",208],"]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","originalSite",208],";",["T_WHITESPACE","\n\n    ",208],["T_COMMENT","\/\/ Restore and merge settings.\n",210],["T_WHITESPACE","    ",211],["T_COMMENT","\/\/ DrupalKernel::boot() initializes new Settings, and the containerBuild()\n",211],["T_WHITESPACE","    ",212],["T_COMMENT","\/\/ method sets additional settings.\n",212],["T_WHITESPACE","    ",213],["T_NEW","new",213],["T_WHITESPACE"," ",213],["T_STRING","Settings",213],"(",["T_VARIABLE","$settings",213],["T_WHITESPACE"," ",213],"+",["T_WHITESPACE"," ",213],["T_STRING","Settings",213],["T_DOUBLE_COLON","::",213],["T_STRING","getAll",213],"(",")",")",";",["T_WHITESPACE","\n\n    ",213],["T_COMMENT","\/\/ Create and set new configuration directories.\n",215],["T_WHITESPACE","    ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","prepareConfigDirectories",216],"(",")",";",["T_WHITESPACE","\n\n    ",216],["T_COMMENT","\/\/ Set the request scope.\n",218],["T_WHITESPACE","    ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","container",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","kernel",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getContainer",219],"(",")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","container",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","get",220],"(",["T_CONSTANT_ENCAPSED_STRING","'request_stack'",220],")",["T_OBJECT_OPERATOR","->",220],["T_STRING","push",220],"(",["T_VARIABLE","$request",220],")",";",["T_WHITESPACE","\n\n    ",220],["T_COMMENT","\/\/ Re-inject extension file listings into state, unless the key\/value\n",222],["T_WHITESPACE","    ",223],["T_COMMENT","\/\/ service was overridden (in which case its storage does not exist yet).\n",223],["T_WHITESPACE","    ",224],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","container",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","get",224],"(",["T_CONSTANT_ENCAPSED_STRING","'keyvalue'",224],")",["T_WHITESPACE"," ",224],["T_INSTANCEOF","instanceof",224],["T_WHITESPACE"," ",224],["T_STRING","KeyValueMemoryFactory",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n      ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","container",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","get",225],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",225],")",["T_OBJECT_OPERATOR","->",225],["T_STRING","set",225],"(",["T_CONSTANT_ENCAPSED_STRING","'system.module.files'",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","moduleFiles",225],")",";",["T_WHITESPACE","\n      ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","container",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","get",226],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","set",226],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme.files'",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","themeFiles",226],")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_COMMENT","\/\/ Create a minimal core.extension configuration object so that the list of\n",229],["T_WHITESPACE","    ",230],["T_COMMENT","\/\/ enabled modules can be maintained allowing\n",230],["T_WHITESPACE","    ",231],["T_COMMENT","\/\/ \\Drupal\\Core\\Config\\ConfigInstaller::installDefaultConfig() to work.\n",231],["T_WHITESPACE","    ",232],["T_COMMENT","\/\/ Write directly to active storage to avoid early instantiation of\n",232],["T_WHITESPACE","    ",233],["T_COMMENT","\/\/ the event dispatcher which can prevent modules from registering events.\n",233],["T_WHITESPACE","    ",234],["T_NS_SEPARATOR","\\",234],["T_STRING","Drupal",234],["T_DOUBLE_COLON","::",234],["T_STRING","service",234],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage'",234],")",["T_OBJECT_OPERATOR","->",234],["T_STRING","write",234],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",234],",",["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",")",",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'theme'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",234],["T_COMMENT","\/\/ Collect and set a fixed module list.\n",236],["T_WHITESPACE","    ",237],["T_VARIABLE","$class",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","get_class",237],"(",["T_VARIABLE","$this",237],")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$modules",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_ARRAY","array",238],"(",")",";",["T_WHITESPACE","\n    ",238],["T_WHILE","while",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$class",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n      ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_STRING","property_exists",240],"(",["T_VARIABLE","$class",240],",",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'modules'",240],")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n        ",240],["T_COMMENT","\/\/ Only add the modules, if the $modules property was not inherited.\n",241],["T_WHITESPACE","        ",242],["T_VARIABLE","$rp",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_NEW","new",242],["T_WHITESPACE"," ",242],["T_NS_SEPARATOR","\\",242],["T_STRING","ReflectionProperty",242],"(",["T_VARIABLE","$class",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'modules'",242],")",";",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$rp",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","class",243],["T_WHITESPACE"," ",243],["T_IS_EQUAL","==",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$class",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n          ",243],["T_VARIABLE","$modules",244],"[",["T_VARIABLE","$class",244],"]",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$class",244],["T_DOUBLE_COLON","::",244],["T_VARIABLE","$modules",244],";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n      ",245],"}",["T_WHITESPACE","\n      ",246],["T_VARIABLE","$class",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","get_parent_class",247],"(",["T_VARIABLE","$class",247],")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n    ",248],["T_COMMENT","\/\/ Modules have been collected in reverse class hierarchy order; modules\n",249],["T_WHITESPACE","    ",250],["T_COMMENT","\/\/ defined by base classes should be sorted first. Then, merge the results\n",250],["T_WHITESPACE","    ",251],["T_COMMENT","\/\/ together.\n",251],["T_WHITESPACE","    ",252],["T_VARIABLE","$modules",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_STRING","array_reverse",252],"(",["T_VARIABLE","$modules",252],")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$modules",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_STRING","call_user_func_array",253],"(",["T_CONSTANT_ENCAPSED_STRING","'array_merge_recursive'",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$modules",253],")",";",["T_WHITESPACE","\n    ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$modules",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n      ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","enableModules",255],"(",["T_VARIABLE","$modules",255],")",";",["T_WHITESPACE","\n    ",255],"}",["T_WHITESPACE","\n\n    ",256],["T_COMMENT","\/\/ Tests based on this class are entitled to use Drupal's File and\n",258],["T_WHITESPACE","    ",259],["T_COMMENT","\/\/ StreamWrapper APIs.\n",259],["T_WHITESPACE","    ",260],["T_COMMENT","\/\/ @todo Move StreamWrapper management into DrupalKernel.\n",260],["T_WHITESPACE","    ",261],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2028109\n",261],["T_WHITESPACE","    ",262],["T_STRING","file_prepare_directory",262],"(",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","publicFilesDirectory",262],",",["T_WHITESPACE"," ",262],["T_STRING","FILE_CREATE_DIRECTORY",262],["T_WHITESPACE"," ",262],"|",["T_WHITESPACE"," ",262],["T_STRING","FILE_MODIFY_PERMISSIONS",262],")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","settingsSet",263],"(",["T_CONSTANT_ENCAPSED_STRING","'file_public_path'",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","publicFilesDirectory",263],")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","streamWrappers",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],"(",")",";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","registerStreamWrapper",265],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\StreamWrapper\\PublicStream'",265],")",";",["T_WHITESPACE","\n    ",265],["T_COMMENT","\/\/ The temporary stream wrapper is able to operate both with and without\n",266],["T_WHITESPACE","    ",267],["T_COMMENT","\/\/ configuration.\n",267],["T_WHITESPACE","    ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","registerStreamWrapper",268],"(",["T_CONSTANT_ENCAPSED_STRING","'temporary'",268],",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\StreamWrapper\\TemporaryStream'",268],")",";",["T_WHITESPACE","\n\n    ",268],["T_COMMENT","\/\/ Manually configure the test mail collector implementation to prevent\n",270],["T_WHITESPACE","    ",271],["T_COMMENT","\/\/ tests from sending out emails and collect them in state instead.\n",271],["T_WHITESPACE","    ",272],["T_COMMENT","\/\/ While this should be enforced via settings.php prior to installation,\n",272],["T_WHITESPACE","    ",273],["T_COMMENT","\/\/ some tests expect to be able to test mail system implementations.\n",273],["T_WHITESPACE","    ",274],["T_VARIABLE","$GLOBALS",274],"[",["T_CONSTANT_ENCAPSED_STRING","'config'",274],"]","[",["T_CONSTANT_ENCAPSED_STRING","'system.mail'",274],"]","[",["T_CONSTANT_ENCAPSED_STRING","'interface'",274],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default'",274],"]",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'test_mail_collector'",274],";",["T_WHITESPACE","\n  ",274],"}",["T_WHITESPACE","\n\n  ",275],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",277],["T_WHITESPACE","\n  ",279],["T_PROTECTED","protected",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","tearDown",280],"(",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n    ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","kernel",281],["T_WHITESPACE"," ",281],["T_INSTANCEOF","instanceof",281],["T_WHITESPACE"," ",281],["T_STRING","DrupalKernel",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n      ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","kernel",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","shutdown",282],"(",")",";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n    ",283],["T_COMMENT","\/\/ Before tearing down the test environment, ensure that no stream wrapper\n",284],["T_WHITESPACE","    ",285],["T_COMMENT","\/\/ of this test leaks into the parent environment. Unlike all other global\n",285],["T_WHITESPACE","    ",286],["T_COMMENT","\/\/ state variables in Drupal, stream wrappers are a global state construct\n",286],["T_WHITESPACE","    ",287],["T_COMMENT","\/\/ of PHP core, which has to be maintained manually.\n",287],["T_WHITESPACE","    ",288],["T_COMMENT","\/\/ @todo Move StreamWrapper management into DrupalKernel.\n",288],["T_WHITESPACE","    ",289],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2028109\n",289],["T_WHITESPACE","    ",290],["T_FOREACH","foreach",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","streamWrappers",290],["T_WHITESPACE"," ",290],["T_AS","as",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$scheme",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$type",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n      ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","unregisterStreamWrapper",291],"(",["T_VARIABLE","$scheme",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$type",291],")",";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n    ",292],["T_STRING","parent",293],["T_DOUBLE_COLON","::",293],["T_STRING","tearDown",293],"(",")",";",["T_WHITESPACE","\n  ",293],"}",["T_WHITESPACE","\n\n  ",294],["T_DOC_COMMENT","\/**\n   * Sets up the base service container for this test.\n   *\n   * Extend this method in your test to register additional service overrides\n   * that need to persist a DrupalKernel reboot. This method is called whenever\n   * the kernel is rebuilt.\n   *\n   * @see \\Drupal\\simpletest\\KernelTestBase::setUp()\n   * @see \\Drupal\\simpletest\\KernelTestBase::enableModules()\n   * @see \\Drupal\\simpletest\\KernelTestBase::disableModules()\n   *\/",296],["T_WHITESPACE","\n  ",306],["T_PUBLIC","public",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","containerBuild",307],"(",["T_STRING","ContainerBuilder",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$container",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n    ",307],["T_COMMENT","\/\/ Keep the container object around for tests.\n",308],["T_WHITESPACE","    ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","container",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$container",309],";",["T_WHITESPACE","\n\n    ",309],["T_COMMENT","\/\/ Set the default language on the minimal container.\n",311],["T_WHITESPACE","    ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","container",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","setParameter",312],"(",["T_CONSTANT_ENCAPSED_STRING","'language.default_values'",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","defaultLanguageData",312],"(",")",")",";",["T_WHITESPACE","\n\n    ",312],["T_VARIABLE","$container",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","register",314],"(",["T_CONSTANT_ENCAPSED_STRING","'lock'",314],",",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Lock\\NullLockBackend'",314],")",";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$container",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","register",315],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_factory'",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Cache\\MemoryBackendFactory'",315],")",";",["T_WHITESPACE","\n\n    ",315],["T_VARIABLE","$container",317],["T_WHITESPACE","\n      ",317],["T_OBJECT_OPERATOR","->",318],["T_STRING","register",318],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage'",318],",",["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Config\\DatabaseStorage'",318],")",["T_WHITESPACE","\n      ",318],["T_OBJECT_OPERATOR","->",319],["T_STRING","addArgument",319],"(",["T_STRING","Database",319],["T_DOUBLE_COLON","::",319],["T_STRING","getConnection",319],"(",")",")",["T_WHITESPACE","\n      ",319],["T_OBJECT_OPERATOR","->",320],["T_STRING","addArgument",320],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",320],")",";",["T_WHITESPACE","\n\n    ",320],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","strictConfigSchema",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n      ",322],["T_VARIABLE","$container",323],["T_WHITESPACE","\n        ",323],["T_OBJECT_OPERATOR","->",324],["T_STRING","register",324],"(",["T_CONSTANT_ENCAPSED_STRING","'simpletest.config_schema_checker'",324],",",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Config\\Testing\\ConfigSchemaChecker'",324],")",["T_WHITESPACE","\n        ",324],["T_OBJECT_OPERATOR","->",325],["T_STRING","addArgument",325],"(",["T_NEW","new",325],["T_WHITESPACE"," ",325],["T_STRING","Reference",325],"(",["T_CONSTANT_ENCAPSED_STRING","'config.typed'",325],")",")",["T_WHITESPACE","\n        ",325],["T_OBJECT_OPERATOR","->",326],["T_STRING","addArgument",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getConfigSchemaExclusions",326],"(",")",")",["T_WHITESPACE","\n        ",326],["T_OBJECT_OPERATOR","->",327],["T_STRING","addTag",327],"(",["T_CONSTANT_ENCAPSED_STRING","'event_subscriber'",327],")",";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_VARIABLE","$keyvalue_options",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$container",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getParameter",330],"(",["T_CONSTANT_ENCAPSED_STRING","'factory.keyvalue'",330],")",["T_WHITESPACE"," ",330],"?",":",["T_WHITESPACE"," ",330],["T_ARRAY","array",330],"(",")",";",["T_WHITESPACE","\n    ",330],["T_VARIABLE","$keyvalue_options",331],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",331],"]",["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'keyvalue.memory'",331],";",["T_WHITESPACE","\n    ",331],["T_VARIABLE","$container",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","setParameter",332],"(",["T_CONSTANT_ENCAPSED_STRING","'factory.keyvalue'",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$keyvalue_options",332],")",";",["T_WHITESPACE","\n    ",332],["T_VARIABLE","$container",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","set",333],"(",["T_CONSTANT_ENCAPSED_STRING","'keyvalue.memory'",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","keyValueFactory",333],")",";",["T_WHITESPACE","\n    ",333],["T_IF","if",334],["T_WHITESPACE"," ",334],"(","!",["T_VARIABLE","$container",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","has",334],"(",["T_CONSTANT_ENCAPSED_STRING","'keyvalue'",334],")",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n      ",334],["T_COMMENT","\/\/ TestBase::setUp puts a completely empty container in\n",335],["T_WHITESPACE","      ",336],["T_COMMENT","\/\/ $this->container which is somewhat the mirror of the empty\n",336],["T_WHITESPACE","      ",337],["T_COMMENT","\/\/ environment being set up. Unit tests need not to waste time with\n",337],["T_WHITESPACE","      ",338],["T_COMMENT","\/\/ getting a container set up for them. Drupal Unit Tests might just get\n",338],["T_WHITESPACE","      ",339],["T_COMMENT","\/\/ away with a simple container holding the absolute bare minimum. When\n",339],["T_WHITESPACE","      ",340],["T_COMMENT","\/\/ a kernel is overridden then there's no need to re-register the keyvalue\n",340],["T_WHITESPACE","      ",341],["T_COMMENT","\/\/ service but when a test is happy with the superminimal container put\n",341],["T_WHITESPACE","      ",342],["T_COMMENT","\/\/ together here, it still might a keyvalue storage for anything using\n",342],["T_WHITESPACE","      ",343],["T_COMMENT","\/\/ \\Drupal::state() -- that's why a memory service was added in the first\n",343],["T_WHITESPACE","      ",344],["T_COMMENT","\/\/ place.\n",344],["T_WHITESPACE","      ",345],["T_VARIABLE","$container",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","register",345],"(",["T_CONSTANT_ENCAPSED_STRING","'settings'",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Site\\Settings'",345],")",["T_WHITESPACE","\n        ",345],["T_OBJECT_OPERATOR","->",346],["T_STRING","setFactoryClass",346],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Site\\Settings'",346],")",["T_WHITESPACE","\n        ",346],["T_OBJECT_OPERATOR","->",347],["T_STRING","setFactoryMethod",347],"(",["T_CONSTANT_ENCAPSED_STRING","'getInstance'",347],")",";",["T_WHITESPACE","\n\n      ",347],["T_VARIABLE","$container",349],["T_WHITESPACE","\n        ",349],["T_OBJECT_OPERATOR","->",350],["T_STRING","register",350],"(",["T_CONSTANT_ENCAPSED_STRING","'keyvalue'",350],",",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\KeyValueStore\\KeyValueFactory'",350],")",["T_WHITESPACE","\n        ",350],["T_OBJECT_OPERATOR","->",351],["T_STRING","addArgument",351],"(",["T_NEW","new",351],["T_WHITESPACE"," ",351],["T_STRING","Reference",351],"(",["T_CONSTANT_ENCAPSED_STRING","'service_container'",351],")",")",["T_WHITESPACE","\n        ",351],["T_OBJECT_OPERATOR","->",352],["T_STRING","addArgument",352],"(",["T_NEW","new",352],["T_WHITESPACE"," ",352],["T_STRING","Parameter",352],"(",["T_CONSTANT_ENCAPSED_STRING","'factory.keyvalue'",352],")",")",";",["T_WHITESPACE","\n\n      ",352],["T_VARIABLE","$container",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","register",354],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",354],",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\State\\State'",354],")",["T_WHITESPACE","\n        ",354],["T_OBJECT_OPERATOR","->",355],["T_STRING","addArgument",355],"(",["T_NEW","new",355],["T_WHITESPACE"," ",355],["T_STRING","Reference",355],"(",["T_CONSTANT_ENCAPSED_STRING","'keyvalue'",355],")",")",";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n\n    ",356],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$container",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","hasDefinition",358],"(",["T_CONSTANT_ENCAPSED_STRING","'path_processor_alias'",358],")",")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n      ",358],["T_COMMENT","\/\/ Prevent the alias-based path processor, which requires a url_alias db\n",359],["T_WHITESPACE","      ",360],["T_COMMENT","\/\/ table, from being registered to the path processor manager. We do this\n",360],["T_WHITESPACE","      ",361],["T_COMMENT","\/\/ by removing the tags that the compiler pass looks for. This means the\n",361],["T_WHITESPACE","      ",362],["T_COMMENT","\/\/ url generator can safely be used within tests.\n",362],["T_WHITESPACE","      ",363],["T_VARIABLE","$definition",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$container",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getDefinition",363],"(",["T_CONSTANT_ENCAPSED_STRING","'path_processor_alias'",363],")",";",["T_WHITESPACE","\n      ",363],["T_VARIABLE","$definition",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","clearTag",364],"(",["T_CONSTANT_ENCAPSED_STRING","'path_processor_inbound'",364],")",["T_OBJECT_OPERATOR","->",364],["T_STRING","clearTag",364],"(",["T_CONSTANT_ENCAPSED_STRING","'path_processor_outbound'",364],")",";",["T_WHITESPACE","\n    ",364],"}",["T_WHITESPACE","\n\n    ",365],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$container",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","hasDefinition",367],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",367],")",")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n      ",367],["T_VARIABLE","$container",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getDefinition",368],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",368],")",["T_OBJECT_OPERATOR","->",368],["T_STRING","setArguments",368],"(",["T_ARRAY","array",368],"(",["T_LNUMBER","1",368],")",")",";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_COMMENT","\/\/ Register the stream wrapper manager.\n",371],["T_WHITESPACE","    ",372],["T_VARIABLE","$container",372],["T_WHITESPACE","\n      ",372],["T_OBJECT_OPERATOR","->",373],["T_STRING","register",373],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\StreamWrapper\\StreamWrapperManager'",373],")",["T_WHITESPACE","\n      ",373],["T_OBJECT_OPERATOR","->",374],["T_STRING","addArgument",374],"(",["T_NEW","new",374],["T_WHITESPACE"," ",374],["T_STRING","Reference",374],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",374],")",")",["T_WHITESPACE","\n      ",374],["T_OBJECT_OPERATOR","->",375],["T_STRING","addMethodCall",375],"(",["T_CONSTANT_ENCAPSED_STRING","'setContainer'",375],",",["T_WHITESPACE"," ",375],["T_ARRAY","array",375],"(",["T_NEW","new",375],["T_WHITESPACE"," ",375],["T_STRING","Reference",375],"(",["T_CONSTANT_ENCAPSED_STRING","'service_container'",375],")",")",")",";",["T_WHITESPACE","\n\n    ",375],["T_VARIABLE","$request",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","Request",377],["T_DOUBLE_COLON","::",377],["T_STRING","create",377],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",377],")",";",["T_WHITESPACE","\n    ",377],["T_VARIABLE","$container",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","get",378],"(",["T_CONSTANT_ENCAPSED_STRING","'request_stack'",378],")",["T_OBJECT_OPERATOR","->",378],["T_STRING","push",378],"(",["T_VARIABLE","$request",378],")",";",["T_WHITESPACE","\n  ",378],"}",["T_WHITESPACE","\n\n  ",379],["T_DOC_COMMENT","\/**\n   * Provides the data for setting the default language on the container.\n   *\n   * @return array\n   *   The data array for the default language.\n   *\/",381],["T_WHITESPACE","\n  ",386],["T_PROTECTED","protected",387],["T_WHITESPACE"," ",387],["T_FUNCTION","function",387],["T_WHITESPACE"," ",387],["T_STRING","defaultLanguageData",387],"(",")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n    ",387],["T_RETURN","return",388],["T_WHITESPACE"," ",388],["T_STRING","Language",388],["T_DOUBLE_COLON","::",388],["T_VARIABLE","$defaultValues",388],";",["T_WHITESPACE","\n  ",388],"}",["T_WHITESPACE","\n\n  ",389],["T_DOC_COMMENT","\/**\n   * Installs default configuration for a given list of modules.\n   *\n   * @param array $modules\n   *   A list of modules for which to install default configuration.\n   *\n   * @throws \\RuntimeException\n   *   Thrown when any module listed in $modules is not enabled.\n   *\/",391],["T_WHITESPACE","\n  ",399],["T_PROTECTED","protected",400],["T_WHITESPACE"," ",400],["T_FUNCTION","function",400],["T_WHITESPACE"," ",400],["T_STRING","installConfig",400],"(",["T_ARRAY","array",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$modules",400],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n    ",400],["T_FOREACH","foreach",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$modules",401],["T_WHITESPACE"," ",401],["T_AS","as",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$module",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n      ",401],["T_IF","if",402],["T_WHITESPACE"," ",402],"(","!",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","container",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","get",402],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",402],")",["T_OBJECT_OPERATOR","->",402],["T_STRING","moduleExists",402],"(",["T_VARIABLE","$module",402],")",")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n        ",402],["T_THROW","throw",403],["T_WHITESPACE"," ",403],["T_NEW","new",403],["T_WHITESPACE"," ",403],["T_NS_SEPARATOR","\\",403],["T_STRING","RuntimeException",403],"(","\"",["T_ENCAPSED_AND_WHITESPACE","'",403],["T_VARIABLE","$module",403],["T_ENCAPSED_AND_WHITESPACE","' module is not enabled",403],"\"",")",";",["T_WHITESPACE","\n      ",403],"}",["T_WHITESPACE","\n      ",404],["T_NS_SEPARATOR","\\",405],["T_STRING","Drupal",405],["T_DOUBLE_COLON","::",405],["T_STRING","service",405],"(",["T_CONSTANT_ENCAPSED_STRING","'config.installer'",405],")",["T_OBJECT_OPERATOR","->",405],["T_STRING","installDefaultConfig",405],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$module",405],")",";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n    ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","pass",407],"(",["T_STRING","format_string",407],"(",["T_CONSTANT_ENCAPSED_STRING","'Installed default config: %modules.'",407],",",["T_WHITESPACE"," ",407],["T_ARRAY","array",407],"(",["T_WHITESPACE","\n      ",407],["T_CONSTANT_ENCAPSED_STRING","'%modules'",408],["T_WHITESPACE"," ",408],["T_DOUBLE_ARROW","=>",408],["T_WHITESPACE"," ",408],["T_STRING","implode",408],"(",["T_CONSTANT_ENCAPSED_STRING","', '",408],",",["T_WHITESPACE"," ",408],["T_VARIABLE","$modules",408],")",",",["T_WHITESPACE","\n    ",408],")",")",")",";",["T_WHITESPACE","\n  ",409],"}",["T_WHITESPACE","\n\n  ",410],["T_DOC_COMMENT","\/**\n   * Installs a specific table from a module schema definition.\n   *\n   * @param string $module\n   *   The name of the module that defines the table's schema.\n   * @param string|array $tables\n   *   The name or an array of the names of the tables to install.\n   *\n   * @throws \\RuntimeException\n   *   Thrown when $module is not enabled or when the table schema cannot be\n   *   found in the module specified.\n   *\/",412],["T_WHITESPACE","\n  ",423],["T_PROTECTED","protected",424],["T_WHITESPACE"," ",424],["T_FUNCTION","function",424],["T_WHITESPACE"," ",424],["T_STRING","installSchema",424],"(",["T_VARIABLE","$module",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$tables",424],")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n    ",424],["T_COMMENT","\/\/ drupal_get_module_schema() is technically able to install a schema\n",425],["T_WHITESPACE","    ",426],["T_COMMENT","\/\/ of a non-enabled module, but its ability to load the module's .install\n",426],["T_WHITESPACE","    ",427],["T_COMMENT","\/\/ file depends on many other factors. To prevent differences in test\n",427],["T_WHITESPACE","    ",428],["T_COMMENT","\/\/ behavior and non-reproducible test failures, we only allow the schema of\n",428],["T_WHITESPACE","    ",429],["T_COMMENT","\/\/ explicitly loaded\/enabled modules to be installed.\n",429],["T_WHITESPACE","    ",430],["T_IF","if",430],["T_WHITESPACE"," ",430],"(","!",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","container",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","get",430],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",430],")",["T_OBJECT_OPERATOR","->",430],["T_STRING","moduleExists",430],"(",["T_VARIABLE","$module",430],")",")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n      ",430],["T_THROW","throw",431],["T_WHITESPACE"," ",431],["T_NEW","new",431],["T_WHITESPACE"," ",431],["T_NS_SEPARATOR","\\",431],["T_STRING","RuntimeException",431],"(","\"",["T_ENCAPSED_AND_WHITESPACE","'",431],["T_VARIABLE","$module",431],["T_ENCAPSED_AND_WHITESPACE","' module is not enabled",431],"\"",")",";",["T_WHITESPACE","\n    ",431],"}",["T_WHITESPACE","\n\n    ",432],["T_VARIABLE","$tables",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_ARRAY_CAST","(array)",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$tables",434],";",["T_WHITESPACE","\n    ",434],["T_FOREACH","foreach",435],["T_WHITESPACE"," ",435],"(",["T_VARIABLE","$tables",435],["T_WHITESPACE"," ",435],["T_AS","as",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$table",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n      ",435],["T_VARIABLE","$schema",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_STRING","drupal_get_module_schema",436],"(",["T_VARIABLE","$module",436],",",["T_WHITESPACE"," ",436],["T_VARIABLE","$table",436],")",";",["T_WHITESPACE","\n      ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(",["T_EMPTY","empty",437],"(",["T_VARIABLE","$schema",437],")",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n        ",437],["T_COMMENT","\/\/ BC layer to avoid some contrib tests to fail.\n",438],["T_WHITESPACE","        ",439],["T_COMMENT","\/\/ @todo Remove the BC layer before 8.1.x release.\n",439],["T_WHITESPACE","        ",440],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2670360\n",440],["T_WHITESPACE","        ",441],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2670454\n",441],["T_WHITESPACE","        ",442],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_VARIABLE","$module",442],["T_WHITESPACE"," ",442],["T_IS_EQUAL","==",442],["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'system'",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n          ",442],["T_CONTINUE","continue",443],";",["T_WHITESPACE","\n        ",443],"}",["T_WHITESPACE","\n        ",444],["T_THROW","throw",445],["T_WHITESPACE"," ",445],["T_NEW","new",445],["T_WHITESPACE"," ",445],["T_NS_SEPARATOR","\\",445],["T_STRING","RuntimeException",445],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unknown '",445],["T_VARIABLE","$table",445],["T_ENCAPSED_AND_WHITESPACE","' table schema in '",445],["T_VARIABLE","$module",445],["T_ENCAPSED_AND_WHITESPACE","' module.",445],"\"",")",";",["T_WHITESPACE","\n      ",445],"}",["T_WHITESPACE","\n      ",446],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","container",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","get",447],"(",["T_CONSTANT_ENCAPSED_STRING","'database'",447],")",["T_OBJECT_OPERATOR","->",447],["T_STRING","schema",447],"(",")",["T_OBJECT_OPERATOR","->",447],["T_STRING","createTable",447],"(",["T_VARIABLE","$table",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$schema",447],")",";",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","pass",449],"(",["T_STRING","format_string",449],"(",["T_CONSTANT_ENCAPSED_STRING","'Installed %module tables: %tables.'",449],",",["T_WHITESPACE"," ",449],["T_ARRAY","array",449],"(",["T_WHITESPACE","\n      ",449],["T_CONSTANT_ENCAPSED_STRING","'%tables'",450],["T_WHITESPACE"," ",450],["T_DOUBLE_ARROW","=>",450],["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'{'",450],["T_WHITESPACE"," ",450],".",["T_WHITESPACE"," ",450],["T_STRING","implode",450],"(",["T_CONSTANT_ENCAPSED_STRING","'}, {'",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$tables",450],")",["T_WHITESPACE"," ",450],".",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'}'",450],",",["T_WHITESPACE","\n      ",450],["T_CONSTANT_ENCAPSED_STRING","'%module'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$module",451],",",["T_WHITESPACE","\n    ",451],")",")",")",";",["T_WHITESPACE","\n  ",452],"}",["T_WHITESPACE","\n\n\n\n  ",453],["T_DOC_COMMENT","\/**\n   * Installs the storage schema for a specific entity type.\n   *\n   * @param string $entity_type_id\n   *   The ID of the entity type.\n   *\/",457],["T_WHITESPACE","\n  ",462],["T_PROTECTED","protected",463],["T_WHITESPACE"," ",463],["T_FUNCTION","function",463],["T_WHITESPACE"," ",463],["T_STRING","installEntitySchema",463],"(",["T_VARIABLE","$entity_type_id",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n    ",463],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager *\/",464],["T_WHITESPACE","\n    ",464],["T_VARIABLE","$entity_manager",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","container",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","get",465],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",465],")",";",["T_WHITESPACE","\n    ",465],["T_VARIABLE","$entity_type",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$entity_manager",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getDefinition",466],"(",["T_VARIABLE","$entity_type_id",466],")",";",["T_WHITESPACE","\n    ",466],["T_VARIABLE","$entity_manager",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","onEntityTypeCreate",467],"(",["T_VARIABLE","$entity_type",467],")",";",["T_WHITESPACE","\n\n    ",467],["T_COMMENT","\/\/ For test runs, the most common storage backend is a SQL database. For\n",469],["T_WHITESPACE","    ",470],["T_COMMENT","\/\/ this case, ensure the tables got created.\n",470],["T_WHITESPACE","    ",471],["T_VARIABLE","$storage",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$entity_manager",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","getStorage",471],"(",["T_VARIABLE","$entity_type_id",471],")",";",["T_WHITESPACE","\n    ",471],["T_IF","if",472],["T_WHITESPACE"," ",472],"(",["T_VARIABLE","$storage",472],["T_WHITESPACE"," ",472],["T_INSTANCEOF","instanceof",472],["T_WHITESPACE"," ",472],["T_STRING","SqlEntityStorageInterface",472],")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n      ",472],["T_VARIABLE","$tables",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$storage",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","getTableMapping",473],"(",")",["T_OBJECT_OPERATOR","->",473],["T_STRING","getTableNames",473],"(",")",";",["T_WHITESPACE","\n      ",473],["T_VARIABLE","$db_schema",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","container",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","get",474],"(",["T_CONSTANT_ENCAPSED_STRING","'database'",474],")",["T_OBJECT_OPERATOR","->",474],["T_STRING","schema",474],"(",")",";",["T_WHITESPACE","\n      ",474],["T_VARIABLE","$all_tables_exist",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","TRUE",475],";",["T_WHITESPACE","\n      ",475],["T_FOREACH","foreach",476],["T_WHITESPACE"," ",476],"(",["T_VARIABLE","$tables",476],["T_WHITESPACE"," ",476],["T_AS","as",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$table",476],")",["T_WHITESPACE"," ",476],"{",["T_WHITESPACE","\n        ",476],["T_IF","if",477],["T_WHITESPACE"," ",477],"(","!",["T_VARIABLE","$db_schema",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","tableExists",477],"(",["T_VARIABLE","$table",477],")",")",["T_WHITESPACE"," ",477],"{",["T_WHITESPACE","\n          ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","fail",478],"(",["T_STRING","SafeMarkup",478],["T_DOUBLE_COLON","::",478],["T_STRING","format",478],"(",["T_CONSTANT_ENCAPSED_STRING","'Installed entity type table for the %entity_type entity type: %table'",478],",",["T_WHITESPACE"," ",478],["T_ARRAY","array",478],"(",["T_WHITESPACE","\n            ",478],["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$entity_type_id",479],",",["T_WHITESPACE","\n            ",479],["T_CONSTANT_ENCAPSED_STRING","'%table'",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$table",480],",",["T_WHITESPACE","\n          ",480],")",")",")",";",["T_WHITESPACE","\n          ",481],["T_VARIABLE","$all_tables_exist",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_STRING","FALSE",482],";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE","\n      ",483],"}",["T_WHITESPACE","\n      ",484],["T_IF","if",485],["T_WHITESPACE"," ",485],"(",["T_VARIABLE","$all_tables_exist",485],")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","pass",486],"(",["T_STRING","SafeMarkup",486],["T_DOUBLE_COLON","::",486],["T_STRING","format",486],"(",["T_CONSTANT_ENCAPSED_STRING","'Installed entity type tables for the %entity_type entity type: %tables'",486],",",["T_WHITESPACE"," ",486],["T_ARRAY","array",486],"(",["T_WHITESPACE","\n          ",486],["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$entity_type_id",487],",",["T_WHITESPACE","\n          ",487],["T_CONSTANT_ENCAPSED_STRING","'%tables'",488],["T_WHITESPACE"," ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'{'",488],["T_WHITESPACE"," ",488],".",["T_WHITESPACE"," ",488],["T_STRING","implode",488],"(",["T_CONSTANT_ENCAPSED_STRING","'}, {'",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$tables",488],")",["T_WHITESPACE"," ",488],".",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'}'",488],",",["T_WHITESPACE","\n        ",488],")",")",")",";",["T_WHITESPACE","\n      ",489],"}",["T_WHITESPACE","\n    ",490],"}",["T_WHITESPACE","\n  ",491],"}",["T_WHITESPACE","\n\n  ",492],["T_DOC_COMMENT","\/**\n   * Enables modules for this test.\n   *\n   * To install test modules outside of the testing environment, add\n   * @code\n   * $settings['extension_discovery_scan_tests'] = TRUE;\n   * @endcode\n   * to your settings.php.\n   *\n   * @param array $modules\n   *   A list of modules to enable. Dependencies are not resolved; i.e.,\n   *   multiple modules have to be specified with dependent modules first.\n   *   The new modules are only added to the active module list and loaded.\n   *\/",494],["T_WHITESPACE","\n  ",507],["T_PROTECTED","protected",508],["T_WHITESPACE"," ",508],["T_FUNCTION","function",508],["T_WHITESPACE"," ",508],["T_STRING","enableModules",508],"(",["T_ARRAY","array",508],["T_WHITESPACE"," ",508],["T_VARIABLE","$modules",508],")",["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n    ",508],["T_COMMENT","\/\/ Perform an ExtensionDiscovery scan as this function may receive a\n",509],["T_WHITESPACE","    ",510],["T_COMMENT","\/\/ profile that is not the current profile, and we don't yet have a cached\n",510],["T_WHITESPACE","    ",511],["T_COMMENT","\/\/ way to receive inactive profile information.\n",511],["T_WHITESPACE","    ",512],["T_COMMENT","\/\/ @todo Remove as part of https:\/\/www.drupal.org\/node\/2186491\n",512],["T_WHITESPACE","    ",513],["T_VARIABLE","$listing",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_NEW","new",513],["T_WHITESPACE"," ",513],["T_STRING","ExtensionDiscovery",513],"(",["T_NS_SEPARATOR","\\",513],["T_STRING","Drupal",513],["T_DOUBLE_COLON","::",513],["T_STRING","root",513],"(",")",")",";",["T_WHITESPACE","\n    ",513],["T_VARIABLE","$module_list",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_VARIABLE","$listing",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","scan",514],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",514],")",";",["T_WHITESPACE","\n    ",514],["T_COMMENT","\/\/ In ModuleHandlerTest we pass in a profile as if it were a module.\n",515],["T_WHITESPACE","    ",516],["T_VARIABLE","$module_list",516],["T_WHITESPACE"," ",516],["T_PLUS_EQUAL","+=",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$listing",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","scan",516],"(",["T_CONSTANT_ENCAPSED_STRING","'profile'",516],")",";",["T_WHITESPACE","\n    ",516],["T_COMMENT","\/\/ Set the list of modules in the extension handler.\n",517],["T_WHITESPACE","    ",518],["T_VARIABLE","$module_handler",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","container",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","get",518],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",518],")",";",["T_WHITESPACE","\n\n    ",518],["T_COMMENT","\/\/ Write directly to active storage to avoid early instantiation of\n",520],["T_WHITESPACE","    ",521],["T_COMMENT","\/\/ the event dispatcher which can prevent modules from registering events.\n",521],["T_WHITESPACE","    ",522],["T_VARIABLE","$active_storage",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_NS_SEPARATOR","\\",522],["T_STRING","Drupal",522],["T_DOUBLE_COLON","::",522],["T_STRING","service",522],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage'",522],")",";",["T_WHITESPACE","\n    ",522],["T_VARIABLE","$extensions",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_VARIABLE","$active_storage",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","read",523],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",523],")",";",["T_WHITESPACE","\n\n    ",523],["T_FOREACH","foreach",525],["T_WHITESPACE"," ",525],"(",["T_VARIABLE","$modules",525],["T_WHITESPACE"," ",525],["T_AS","as",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$module",525],")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n      ",525],["T_VARIABLE","$module_handler",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","addModule",526],"(",["T_VARIABLE","$module",526],",",["T_WHITESPACE"," ",526],["T_VARIABLE","$module_list",526],"[",["T_VARIABLE","$module",526],"]",["T_OBJECT_OPERATOR","->",526],["T_STRING","getPath",526],"(",")",")",";",["T_WHITESPACE","\n      ",526],["T_COMMENT","\/\/ Maintain the list of enabled modules in configuration.\n",527],["T_WHITESPACE","      ",528],["T_VARIABLE","$extensions",528],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",528],"]","[",["T_VARIABLE","$module",528],"]",["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_LNUMBER","0",528],";",["T_WHITESPACE","\n    ",528],"}",["T_WHITESPACE","\n    ",529],["T_VARIABLE","$active_storage",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","write",530],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",530],",",["T_WHITESPACE"," ",530],["T_VARIABLE","$extensions",530],")",";",["T_WHITESPACE","\n\n    ",530],["T_COMMENT","\/\/ Update the kernel to make their services available.\n",532],["T_WHITESPACE","    ",533],["T_VARIABLE","$module_filenames",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$module_handler",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","getModuleList",533],"(",")",";",["T_WHITESPACE","\n    ",533],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","kernel",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","updateModules",534],"(",["T_VARIABLE","$module_filenames",534],",",["T_WHITESPACE"," ",534],["T_VARIABLE","$module_filenames",534],")",";",["T_WHITESPACE","\n\n    ",534],["T_COMMENT","\/\/ Ensure isLoaded() is TRUE in order to make\n",536],["T_WHITESPACE","    ",537],["T_COMMENT","\/\/ \\Drupal\\Core\\Theme\\ThemeManagerInterface::render() work.\n",537],["T_WHITESPACE","    ",538],["T_COMMENT","\/\/ Note that the kernel has rebuilt the container; this $module_handler is\n",538],["T_WHITESPACE","    ",539],["T_COMMENT","\/\/ no longer the $module_handler instance from above.\n",539],["T_WHITESPACE","    ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","container",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","get",540],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",540],")",["T_OBJECT_OPERATOR","->",540],["T_STRING","reload",540],"(",")",";",["T_WHITESPACE","\n    ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","pass",541],"(",["T_STRING","format_string",541],"(",["T_CONSTANT_ENCAPSED_STRING","'Enabled modules: %modules.'",541],",",["T_WHITESPACE"," ",541],["T_ARRAY","array",541],"(",["T_WHITESPACE","\n      ",541],["T_CONSTANT_ENCAPSED_STRING","'%modules'",542],["T_WHITESPACE"," ",542],["T_DOUBLE_ARROW","=>",542],["T_WHITESPACE"," ",542],["T_STRING","implode",542],"(",["T_CONSTANT_ENCAPSED_STRING","', '",542],",",["T_WHITESPACE"," ",542],["T_VARIABLE","$modules",542],")",",",["T_WHITESPACE","\n    ",542],")",")",")",";",["T_WHITESPACE","\n  ",543],"}",["T_WHITESPACE","\n\n  ",544],["T_DOC_COMMENT","\/**\n   * Disables modules for this test.\n   *\n   * @param array $modules\n   *   A list of modules to disable. Dependencies are not resolved; i.e.,\n   *   multiple modules have to be specified with dependent modules first.\n   *   Code of previously active modules is still loaded. The modules are only\n   *   removed from the active module list.\n   *\/",546],["T_WHITESPACE","\n  ",554],["T_PROTECTED","protected",555],["T_WHITESPACE"," ",555],["T_FUNCTION","function",555],["T_WHITESPACE"," ",555],["T_STRING","disableModules",555],"(",["T_ARRAY","array",555],["T_WHITESPACE"," ",555],["T_VARIABLE","$modules",555],")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n    ",555],["T_COMMENT","\/\/ Unset the list of modules in the extension handler.\n",556],["T_WHITESPACE","    ",557],["T_VARIABLE","$module_handler",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","container",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","get",557],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",557],")",";",["T_WHITESPACE","\n    ",557],["T_VARIABLE","$module_filenames",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_VARIABLE","$module_handler",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","getModuleList",558],"(",")",";",["T_WHITESPACE","\n    ",558],["T_VARIABLE","$extension_config",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","config",559],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",559],")",";",["T_WHITESPACE","\n    ",559],["T_FOREACH","foreach",560],["T_WHITESPACE"," ",560],"(",["T_VARIABLE","$modules",560],["T_WHITESPACE"," ",560],["T_AS","as",560],["T_WHITESPACE"," ",560],["T_VARIABLE","$module",560],")",["T_WHITESPACE"," ",560],"{",["T_WHITESPACE","\n      ",560],["T_UNSET","unset",561],"(",["T_VARIABLE","$module_filenames",561],"[",["T_VARIABLE","$module",561],"]",")",";",["T_WHITESPACE","\n      ",561],["T_VARIABLE","$extension_config",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","clear",562],"(",["T_CONSTANT_ENCAPSED_STRING","'module.'",562],["T_WHITESPACE"," ",562],".",["T_WHITESPACE"," ",562],["T_VARIABLE","$module",562],")",";",["T_WHITESPACE","\n    ",562],"}",["T_WHITESPACE","\n    ",563],["T_VARIABLE","$extension_config",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","save",564],"(",")",";",["T_WHITESPACE","\n    ",564],["T_VARIABLE","$module_handler",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","setModuleList",565],"(",["T_VARIABLE","$module_filenames",565],")",";",["T_WHITESPACE","\n    ",565],["T_VARIABLE","$module_handler",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","resetImplementations",566],"(",")",";",["T_WHITESPACE","\n    ",566],["T_COMMENT","\/\/ Update the kernel to remove their services.\n",567],["T_WHITESPACE","    ",568],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","kernel",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","updateModules",568],"(",["T_VARIABLE","$module_filenames",568],",",["T_WHITESPACE"," ",568],["T_VARIABLE","$module_filenames",568],")",";",["T_WHITESPACE","\n\n    ",568],["T_COMMENT","\/\/ Ensure isLoaded() is TRUE in order to make\n",570],["T_WHITESPACE","    ",571],["T_COMMENT","\/\/ \\Drupal\\Core\\Theme\\ThemeManagerInterface::render() work.\n",571],["T_WHITESPACE","    ",572],["T_COMMENT","\/\/ Note that the kernel has rebuilt the container; this $module_handler is\n",572],["T_WHITESPACE","    ",573],["T_COMMENT","\/\/ no longer the $module_handler instance from above.\n",573],["T_WHITESPACE","    ",574],["T_VARIABLE","$module_handler",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","container",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","get",574],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",574],")",";",["T_WHITESPACE","\n    ",574],["T_VARIABLE","$module_handler",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","reload",575],"(",")",";",["T_WHITESPACE","\n    ",575],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","pass",576],"(",["T_STRING","format_string",576],"(",["T_CONSTANT_ENCAPSED_STRING","'Disabled modules: %modules.'",576],",",["T_WHITESPACE"," ",576],["T_ARRAY","array",576],"(",["T_WHITESPACE","\n      ",576],["T_CONSTANT_ENCAPSED_STRING","'%modules'",577],["T_WHITESPACE"," ",577],["T_DOUBLE_ARROW","=>",577],["T_WHITESPACE"," ",577],["T_STRING","implode",577],"(",["T_CONSTANT_ENCAPSED_STRING","', '",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$modules",577],")",",",["T_WHITESPACE","\n    ",577],")",")",")",";",["T_WHITESPACE","\n  ",578],"}",["T_WHITESPACE","\n\n  ",579],["T_DOC_COMMENT","\/**\n   * Registers a stream wrapper for this test.\n   *\n   * @param string $scheme\n   *   The scheme to register.\n   * @param string $class\n   *   The fully qualified class name to register.\n   * @param int $type\n   *   The Drupal Stream Wrapper API type. Defaults to\n   *   StreamWrapperInterface::NORMAL.\n   *\/",581],["T_WHITESPACE","\n  ",591],["T_PROTECTED","protected",592],["T_WHITESPACE"," ",592],["T_FUNCTION","function",592],["T_WHITESPACE"," ",592],["T_STRING","registerStreamWrapper",592],"(",["T_VARIABLE","$scheme",592],",",["T_WHITESPACE"," ",592],["T_VARIABLE","$class",592],",",["T_WHITESPACE"," ",592],["T_VARIABLE","$type",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_STRING","StreamWrapperInterface",592],["T_DOUBLE_COLON","::",592],["T_STRING","NORMAL",592],")",["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n    ",592],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","container",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","get",593],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",593],")",["T_OBJECT_OPERATOR","->",593],["T_STRING","registerWrapper",593],"(",["T_VARIABLE","$scheme",593],",",["T_WHITESPACE"," ",593],["T_VARIABLE","$class",593],",",["T_WHITESPACE"," ",593],["T_VARIABLE","$type",593],")",";",["T_WHITESPACE","\n  ",593],"}",["T_WHITESPACE","\n\n  ",594],["T_DOC_COMMENT","\/**\n   * Renders a render array.\n   *\n   * @param array $elements\n   *   The elements to render.\n   *\n   * @return string\n   *   The rendered string output (typically HTML).\n   *\/",596],["T_WHITESPACE","\n  ",604],["T_PROTECTED","protected",605],["T_WHITESPACE"," ",605],["T_FUNCTION","function",605],["T_WHITESPACE"," ",605],["T_STRING","render",605],"(",["T_ARRAY","array",605],["T_WHITESPACE"," ",605],"&",["T_VARIABLE","$elements",605],")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n    ",605],["T_COMMENT","\/\/ Use the bare HTML page renderer to render our links.\n",606],["T_WHITESPACE","    ",607],["T_VARIABLE","$renderer",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","container",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","get",607],"(",["T_CONSTANT_ENCAPSED_STRING","'bare_html_page_renderer'",607],")",";",["T_WHITESPACE","\n    ",607],["T_VARIABLE","$response",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_VARIABLE","$renderer",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","renderBarePage",608],"(",["T_VARIABLE","$elements",608],",",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","''",608],",",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","'maintenance_page'",608],")",";",["T_WHITESPACE","\n\n    ",608],["T_COMMENT","\/\/ Glean the content from the response object.\n",610],["T_WHITESPACE","    ",611],["T_VARIABLE","$content",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_VARIABLE","$response",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","getContent",611],"(",")",";",["T_WHITESPACE","\n    ",611],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","setRawContent",612],"(",["T_VARIABLE","$content",612],")",";",["T_WHITESPACE","\n    ",612],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","verbose",613],"(",["T_CONSTANT_ENCAPSED_STRING","'<pre style=\"white-space: pre-wrap\">'",613],["T_WHITESPACE"," ",613],".",["T_WHITESPACE"," ",613],["T_STRING","Html",613],["T_DOUBLE_COLON","::",613],["T_STRING","escape",613],"(",["T_VARIABLE","$content",613],")",")",";",["T_WHITESPACE","\n    ",613],["T_RETURN","return",614],["T_WHITESPACE"," ",614],["T_VARIABLE","$content",614],";",["T_WHITESPACE","\n  ",614],"}",["T_WHITESPACE","\n\n",615],"}",["T_WHITESPACE","\n",617]]
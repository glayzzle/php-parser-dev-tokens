[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","simpletest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Url",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","simpletest",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Functional",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ThroughUITest",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests the Simpletest UI internal browser.\n *\n * @group simpletest\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","SimpleTestBrowserTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","WebTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'simpletest'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'test_page_test'",21],")",";",["T_WHITESPACE","\n\n  ",21],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","setUp",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_STRING","parent",24],["T_DOUBLE_COLON","::",24],["T_STRING","setUp",24],"(",")",";",["T_WHITESPACE","\n    ",24],["T_COMMENT","\/\/ Create and log in an admin user.\n",25],["T_WHITESPACE","    ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","drupalLogin",26],"(",["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","drupalCreateUser",26],"(",["T_ARRAY","array",26],"(",["T_CONSTANT_ENCAPSED_STRING","'administer unit tests'",26],")",")",")",";",["T_WHITESPACE","\n  ",26],"}",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Test the internal browsers functionality.\n   *\/",29],["T_WHITESPACE","\n  ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","testInternalBrowser",32],"(",")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n    ",32],["T_COMMENT","\/\/ Retrieve the test page and check its title and headers.\n",33],["T_WHITESPACE","    ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","drupalGet",34],"(",["T_CONSTANT_ENCAPSED_STRING","'test-page'",34],")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertTrue",35],"(",["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","drupalGetHeader",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Date'",35],")",",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'An HTTP header was received.'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","assertTitle",36],"(",["T_STRING","t",36],"(",["T_CONSTANT_ENCAPSED_STRING","'Test page | @site-name'",36],",",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'@site-name'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","config",37],"(",["T_CONSTANT_ENCAPSED_STRING","'system.site'",37],")",["T_OBJECT_OPERATOR","->",37],["T_STRING","get",37],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",37],")",",",["T_WHITESPACE","\n    ",37],")",")",")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertNoTitle",39],"(",["T_CONSTANT_ENCAPSED_STRING","'Foo'",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_VARIABLE","$old_user_id",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","container",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","id",41],"(",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$user",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalCreateUser",42],"(",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","drupalLogin",43],"(",["T_VARIABLE","$user",43],")",";",["T_WHITESPACE","\n    ",43],["T_COMMENT","\/\/ Check that current user service updated.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertNotEqual",45],"(",["T_VARIABLE","$old_user_id",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","container",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","id",45],"(",")",",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Current user service updated.'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$headers",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","drupalGetHeaders",46],"(",["T_STRING","TRUE",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEqual",47],"(",["T_STRING","count",47],"(",["T_VARIABLE","$headers",47],")",",",["T_WHITESPACE"," ",47],["T_LNUMBER","2",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'There was one intermediate request.'",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertTrue",48],"(",["T_STRING","strpos",48],"(",["T_VARIABLE","$headers",48],"[",["T_LNUMBER","0",48],"]","[",["T_CONSTANT_ENCAPSED_STRING","':status'",48],"]",",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'303'",48],")",["T_WHITESPACE"," ",48],["T_IS_NOT_IDENTICAL","!==",48],["T_WHITESPACE"," ",48],["T_STRING","FALSE",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'Intermediate response code was 303.'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertFalse",49],"(",["T_EMPTY","empty",49],"(",["T_VARIABLE","$headers",49],"[",["T_LNUMBER","0",49],"]","[",["T_CONSTANT_ENCAPSED_STRING","'location'",49],"]",")",",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Intermediate request contained a Location header.'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertEqual",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getUrl",50],"(",")",",",["T_WHITESPACE"," ",50],["T_VARIABLE","$headers",50],"[",["T_LNUMBER","0",50],"]","[",["T_CONSTANT_ENCAPSED_STRING","'location'",50],"]",",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'HTTP redirect was followed'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertFalse",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","drupalGetHeader",51],"(",["T_CONSTANT_ENCAPSED_STRING","'Location'",51],")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Headers from intermediate request were reset.'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertResponse",52],"(",["T_LNUMBER","200",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Response code from intermediate request was reset.'",52],")",";",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalLogout",54],"(",")",";",["T_WHITESPACE","\n    ",54],["T_COMMENT","\/\/ Check that current user service updated to anonymous user.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertEqual",56],"(",["T_LNUMBER","0",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","container",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","get",56],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","id",56],"(",")",",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Current user service updated.'",56],")",";",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Test the maximum redirection option.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","maximumRedirects",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_LNUMBER","1",59],";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$edit",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'name'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$user",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getUsername",61],"(",")",",",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'pass'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$user",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","pass_raw",62],["T_WHITESPACE","\n    ",62],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","drupalPostForm",64],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/login'",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$edit",64],",",["T_WHITESPACE"," ",64],["T_STRING","t",64],"(",["T_CONSTANT_ENCAPSED_STRING","'Log in'",64],")",",",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_WHITESPACE","\n      ",64],["T_CONSTANT_ENCAPSED_STRING","'query'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'destination'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'user\/logout'",65],")",",",["T_WHITESPACE","\n    ",65],")",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$headers",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","drupalGetHeaders",67],"(",["T_STRING","TRUE",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertEqual",68],"(",["T_STRING","count",68],"(",["T_VARIABLE","$headers",68],")",",",["T_WHITESPACE"," ",68],["T_LNUMBER","2",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Simpletest stopped following redirects after the first one.'",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Remove the Simpletest private key file so we can test the protection\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ against requests that forge a valid testing user agent to gain access\n",71],["T_WHITESPACE","    ",72],["T_COMMENT","\/\/ to the installer.\n",72],["T_WHITESPACE","    ",73],["T_COMMENT","\/\/ @see drupal_valid_test_ua()\n",73],["T_WHITESPACE","    ",74],["T_COMMENT","\/\/ Not using File API; a potential error must trigger a PHP warning.\n",74],["T_WHITESPACE","    ",75],["T_STRING","unlink",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","siteDirectory",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'\/.htkey'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","drupalGet",76],"(",["T_STRING","Url",76],["T_DOUBLE_COLON","::",76],["T_STRING","fromUri",76],"(",["T_CONSTANT_ENCAPSED_STRING","'base:core\/install.php'",76],",",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_CONSTANT_ENCAPSED_STRING","'external'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_STRING","TRUE",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'absolute'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_STRING","TRUE",76],")",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","toString",76],"(",")",")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertResponse",77],"(",["T_LNUMBER","403",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'Cannot access install.php.'",77],")",";",["T_WHITESPACE","\n  ",77],"}",["T_WHITESPACE","\n\n  ",78],["T_DOC_COMMENT","\/**\n   * Test validation of the User-Agent header we use to perform test requests.\n   *\/",80],["T_WHITESPACE","\n  ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","testUserAgentValidation",83],"(",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n    ",83],["T_GLOBAL","global",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$base_url",84],";",["T_WHITESPACE","\n\n    ",84],["T_COMMENT","\/\/ Logout the user which was logged in during test-setup.\n",86],["T_WHITESPACE","    ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","drupalLogout",87],"(",")",";",["T_WHITESPACE","\n\n    ",87],["T_VARIABLE","$system_path",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$base_url",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'\/'",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","drupal_get_path",89],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'system'",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$HTTP_path",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$system_path",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'\/tests\/http.php\/user\/login'",90],";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$https_path",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$system_path",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'\/tests\/https.php\/user\/login'",91],";",["T_WHITESPACE","\n    ",91],["T_COMMENT","\/\/ Generate a valid simpletest User-Agent to pass validation.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertTrue",93],"(",["T_STRING","preg_match",93],"(",["T_CONSTANT_ENCAPSED_STRING","'\/test\\d+\/'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","databasePrefix",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$matches",93],")",",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'Database prefix contains test prefix.'",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$test_ua",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","drupal_generate_test_ua",94],"(",["T_VARIABLE","$matches",94],"[",["T_LNUMBER","0",94],"]",")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","additionalCurlOptions",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_STRING","CURLOPT_USERAGENT",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$test_ua",95],")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Test pages only available for testing.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","drupalGet",98],"(",["T_VARIABLE","$HTTP_path",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertResponse",99],"(",["T_LNUMBER","200",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Requesting http.php with a legitimate simpletest User-Agent returns OK.'",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","drupalGet",100],"(",["T_VARIABLE","$https_path",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertResponse",101],"(",["T_LNUMBER","200",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Requesting https.php with a legitimate simpletest User-Agent returns OK.'",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Now slightly modify the HMAC on the header, which should not validate.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","additionalCurlOptions",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_STRING","CURLOPT_USERAGENT",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$test_ua",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'X'",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","drupalGet",105],"(",["T_VARIABLE","$HTTP_path",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertResponse",106],"(",["T_LNUMBER","403",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Requesting http.php with a bad simpletest User-Agent fails.'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","drupalGet",107],"(",["T_VARIABLE","$https_path",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertResponse",108],"(",["T_LNUMBER","403",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'Requesting https.php with a bad simpletest User-Agent fails.'",108],")",";",["T_WHITESPACE","\n\n    ",108],["T_COMMENT","\/\/ Use a real User-Agent and verify that the special files http.php and\n",110],["T_WHITESPACE","    ",111],["T_COMMENT","\/\/ https.php can't be accessed.\n",111],["T_WHITESPACE","    ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","additionalCurlOptions",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_STRING","CURLOPT_USERAGENT",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'Mozilla\/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.12) Gecko\/20101026 Firefox\/3.6.12'",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","drupalGet",113],"(",["T_VARIABLE","$HTTP_path",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertResponse",114],"(",["T_LNUMBER","403",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'Requesting http.php with a normal User-Agent fails.'",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","drupalGet",115],"(",["T_VARIABLE","$https_path",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertResponse",116],"(",["T_LNUMBER","403",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'Requesting https.php with a normal User-Agent fails.'",116],")",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Tests that PHPUnit and KernelTestBase tests work through the UI.\n   *\/",119],["T_WHITESPACE","\n  ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","testTestingThroughUI",122],"(",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","drupalGet",123],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/development\/testing'",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","assertTrue",124],"(",["T_STRING","strpos",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","drupalSettings",124],"[",["T_CONSTANT_ENCAPSED_STRING","'simpleTest'",124],"]","[",["T_CONSTANT_ENCAPSED_STRING","'images'",124],"]","[",["T_LNUMBER","0",124],"]",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/menu-collapsed.png'",124],")",["T_WHITESPACE"," ",124],">",["T_WHITESPACE"," ",124],["T_LNUMBER","0",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'drupalSettings contains a link to core\/misc\/menu-collapsed.png.'",124],")",";",["T_WHITESPACE","\n    ",124],["T_COMMENT","\/\/ We can not test WebTestBase tests here since they require a valid .htkey\n",125],["T_WHITESPACE","    ",126],["T_COMMENT","\/\/ to be created. However this scenario is covered by the testception of\n",126],["T_WHITESPACE","    ",127],["T_COMMENT","\/\/ \\Drupal\\simpletest\\Tests\\SimpleTestTest.\n",127],["T_WHITESPACE","\n    ",128],["T_VARIABLE","$tests",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_WHITESPACE","\n      ",129],["T_COMMENT","\/\/ A KernelTestBase test.\n",130],["T_WHITESPACE","      ",131],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\KernelTests\\KernelTestBaseTest'",131],",",["T_WHITESPACE","\n      ",131],["T_COMMENT","\/\/ A PHPUnit unit test.\n",132],["T_WHITESPACE","      ",133],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\action\\Unit\\Menu\\ActionLocalTasksTest'",133],",",["T_WHITESPACE","\n      ",133],["T_COMMENT","\/\/ A PHPUnit functional test.\n",134],["T_WHITESPACE","      ",135],["T_STRING","ThroughUITest",135],["T_DOUBLE_COLON","::",135],["T_CLASS","class",135],",",["T_WHITESPACE","\n    ",135],")",";",["T_WHITESPACE","\n\n    ",136],["T_FOREACH","foreach",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$tests",138],["T_WHITESPACE"," ",138],["T_AS","as",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$test",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","drupalGet",139],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/development\/testing'",139],")",";",["T_WHITESPACE","\n      ",139],["T_VARIABLE","$edit",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",["T_WHITESPACE","\n        ",140],"\"",["T_ENCAPSED_AND_WHITESPACE","tests[",141],["T_VARIABLE","$test",141],["T_ENCAPSED_AND_WHITESPACE","]",141],"\"",["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_STRING","TRUE",141],",",["T_WHITESPACE","\n      ",141],")",";",["T_WHITESPACE","\n      ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","drupalPostForm",143],"(",["T_STRING","NULL",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$edit",143],",",["T_WHITESPACE"," ",143],["T_STRING","t",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Run tests'",143],")",")",";",["T_WHITESPACE","\n      ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertText",144],"(",["T_CONSTANT_ENCAPSED_STRING","'0 fails, 0 exceptions'",144],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n  ",145],"}",["T_WHITESPACE","\n\n",146],"}",["T_WHITESPACE","\n",148]]
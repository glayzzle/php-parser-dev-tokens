[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * @file\n * Post update functions for Rest.\n *\/",3],["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","rest",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RestResourceConfig",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","rest",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RestResourceConfigInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * @addtogroup updates-8.1.x-to-8.2.x\n * @{\n *\/",11],["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Create REST resource configuration entities.\n *\n * @see rest_update_8201()\n * @see https:\/\/www.drupal.org\/node\/2308745\n *\/",16],["T_WHITESPACE","\n",21],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","rest_post_update_create_rest_resource_config_entities",22],"(",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n  ",22],["T_VARIABLE","$resources",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Drupal",23],["T_DOUBLE_COLON","::",23],["T_STRING","state",23],"(",")",["T_OBJECT_OPERATOR","->",23],["T_STRING","get",23],"(",["T_CONSTANT_ENCAPSED_STRING","'rest_update_8201_resources'",23],",",["T_WHITESPACE"," ",23],"[","]",")",";",["T_WHITESPACE","\n  ",23],["T_FOREACH","foreach",24],["T_WHITESPACE"," ",24],"(",["T_VARIABLE","$resources",24],["T_WHITESPACE"," ",24],["T_AS","as",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$key",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$resource",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$resource",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","RestResourceConfig",25],["T_DOUBLE_COLON","::",25],["T_STRING","create",25],"(","[",["T_WHITESPACE","\n      ",25],["T_CONSTANT_ENCAPSED_STRING","'id'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_STRING","str_replace",26],"(",["T_CONSTANT_ENCAPSED_STRING","':'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'.'",26],",",["T_WHITESPACE"," ",26],["T_VARIABLE","$key",26],")",",",["T_WHITESPACE","\n      ",26],["T_CONSTANT_ENCAPSED_STRING","'granularity'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_STRING","RestResourceConfigInterface",27],["T_DOUBLE_COLON","::",27],["T_STRING","METHOD_GRANULARITY",27],",",["T_WHITESPACE","\n      ",27],["T_CONSTANT_ENCAPSED_STRING","'configuration'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$resource",28],",",["T_WHITESPACE","\n    ",28],"]",")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$resource",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","save",30],"(",")",";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n",31],"}",["T_WHITESPACE","\n\n",32],["T_DOC_COMMENT","\/**\n * Simplify method-granularity REST resource config to resource-granularity.\n *\n * @see https:\/\/www.drupal.org\/node\/2721595\n *\/",34],["T_WHITESPACE","\n",38],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","rest_post_update_resource_granularity",39],"(",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n  ",39],["T_DOC_COMMENT","\/** @var \\Drupal\\rest\\RestResourceConfigInterface[] $resource_config_entities *\/",40],["T_WHITESPACE","\n  ",40],["T_VARIABLE","$resource_config_entities",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","RestResourceConfig",41],["T_DOUBLE_COLON","::",41],["T_STRING","loadMultiple",41],"(",")",";",["T_WHITESPACE","\n\n  ",41],["T_FOREACH","foreach",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$resource_config_entities",43],["T_WHITESPACE"," ",43],["T_AS","as",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$resource_config_entity",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$resource_config_entity",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","get",44],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",44],")",["T_WHITESPACE"," ",44],["T_IS_IDENTICAL","===",44],["T_WHITESPACE"," ",44],["T_STRING","RestResourceConfigInterface",44],["T_DOUBLE_COLON","::",44],["T_STRING","METHOD_GRANULARITY",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n      ",44],["T_VARIABLE","$configuration",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$resource_config_entity",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",45],")",";",["T_WHITESPACE","\n\n      ",45],["T_VARIABLE","$format_and_auth_configuration",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],"[","]",";",["T_WHITESPACE","\n      ",47],["T_FOREACH","foreach",48],["T_WHITESPACE"," ",48],"(",["T_STRING","array_keys",48],"(",["T_VARIABLE","$configuration",48],")",["T_WHITESPACE"," ",48],["T_AS","as",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$method",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$format_and_auth_configuration",49],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",49],"]","[",["T_VARIABLE","$method",49],"]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","implode",49],"(",["T_CONSTANT_ENCAPSED_STRING","','",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$configuration",49],"[",["T_VARIABLE","$method",49],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_formats'",49],"]",")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$format_and_auth_configuration",50],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",50],"]","[",["T_VARIABLE","$method",50],"]",["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","implode",50],"(",["T_CONSTANT_ENCAPSED_STRING","','",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$configuration",50],"[",["T_VARIABLE","$method",50],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_auth'",50],"]",")",";",["T_WHITESPACE","\n      ",50],"}",["T_WHITESPACE","\n\n      ",51],["T_COMMENT","\/\/ If each method has the same formats and the same authentication\n",53],["T_WHITESPACE","      ",54],["T_COMMENT","\/\/ providers configured, convert it to 'granularity: resource', which has\n",54],["T_WHITESPACE","      ",55],["T_COMMENT","\/\/ a simpler\/less verbose configuration.\n",55],["T_WHITESPACE","      ",56],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_STRING","count",56],"(",["T_STRING","array_unique",56],"(",["T_VARIABLE","$format_and_auth_configuration",56],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",56],"]",")",")",["T_WHITESPACE"," ",56],["T_IS_IDENTICAL","===",56],["T_WHITESPACE"," ",56],["T_LNUMBER","1",56],["T_WHITESPACE"," ",56],["T_BOOLEAN_AND","&&",56],["T_WHITESPACE"," ",56],["T_STRING","count",56],"(",["T_STRING","array_unique",56],"(",["T_VARIABLE","$format_and_auth_configuration",56],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",56],"]",")",")",["T_WHITESPACE"," ",56],["T_IS_IDENTICAL","===",56],["T_WHITESPACE"," ",56],["T_LNUMBER","1",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$first_method",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","array_keys",57],"(",["T_VARIABLE","$configuration",57],")","[",["T_LNUMBER","0",57],"]",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$resource_config_entity",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","set",58],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",58],",",["T_WHITESPACE"," ",58],"[",["T_WHITESPACE","\n          ",58],["T_CONSTANT_ENCAPSED_STRING","'methods'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_STRING","array_keys",59],"(",["T_VARIABLE","$configuration",59],")",",",["T_WHITESPACE","\n          ",59],["T_CONSTANT_ENCAPSED_STRING","'formats'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$configuration",60],"[",["T_VARIABLE","$first_method",60],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_formats'",60],"]",",",["T_WHITESPACE","\n          ",60],["T_CONSTANT_ENCAPSED_STRING","'authentication'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$configuration",61],"[",["T_VARIABLE","$first_method",61],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_auth'",61],"]",["T_WHITESPACE","\n        ",61],"]",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$resource_config_entity",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","set",63],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",63],",",["T_WHITESPACE"," ",63],["T_STRING","RestResourceConfigInterface",63],["T_DOUBLE_COLON","::",63],["T_STRING","RESOURCE_GRANULARITY",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$resource_config_entity",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","save",64],"(",")",";",["T_WHITESPACE","\n      ",64],"}",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n",67],"}",["T_WHITESPACE","\n\n\n",68],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup updates-8.1.x-to-8.2.x\".\n *\/",71],["T_WHITESPACE","\n",73]]
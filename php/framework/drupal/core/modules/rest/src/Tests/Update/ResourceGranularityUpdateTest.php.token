[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Update",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","system",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Tests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Update",5],["T_NS_SEPARATOR","\\",5],["T_STRING","UpdatePathTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests method-granularity REST config is simplified to resource-granularity.\n *\n * @see https:\/\/www.drupal.org\/node\/2721595\n * @see rest_post_update_resource_granularity()\n *\n * @group rest\n *\/",7],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ResourceGranularityUpdateTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","UpdatePathTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",17],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],"[",["T_CONSTANT_ENCAPSED_STRING","'rest'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'serialization'",20],"]",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","setDatabaseDumpFiles",25],"(",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","databaseDumpFiles",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],"[",["T_WHITESPACE","\n      ",26],["T_DIR","__DIR__",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/..\/system\/tests\/fixtures\/update\/drupal-8.bare.standard.php.gz'",27],",",["T_WHITESPACE","\n      ",27],["T_DIR","__DIR__",28],["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/..\/rest\/tests\/fixtures\/update\/drupal-8.rest-rest_post_update_resource_granularity.php'",28],",",["T_WHITESPACE","\n    ",28],"]",";",["T_WHITESPACE","\n  ",29],"}",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Tests rest_post_update_simplify_resource_granularity().\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","testMethodGranularityConvertedToResourceGranularity",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityStorageInterface $resource_config_storage *\/",36],["T_WHITESPACE","\n    ",36],["T_VARIABLE","$resource_config_storage",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","container",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","get",37],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",37],")",["T_OBJECT_OPERATOR","->",37],["T_STRING","getStorage",37],"(",["T_CONSTANT_ENCAPSED_STRING","'rest_resource_config'",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Make sure we have the expected values before the update.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$resource_config_entities",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$resource_config_storage",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","loadMultiple",40],"(",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertIdentical",41],"(","[",["T_CONSTANT_ENCAPSED_STRING","'entity.comment'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'entity.node'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'entity.user'",41],"]",",",["T_WHITESPACE"," ",41],["T_STRING","array_keys",41],"(",["T_VARIABLE","$resource_config_entities",41],")",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertIdentical",42],"(",["T_CONSTANT_ENCAPSED_STRING","'method'",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$resource_config_entities",42],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.node'",42],"]",["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",42],")",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertIdentical",43],"(",["T_CONSTANT_ENCAPSED_STRING","'method'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$resource_config_entities",43],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.comment'",43],"]",["T_OBJECT_OPERATOR","->",43],["T_STRING","get",43],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",43],")",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","assertIdentical",44],"(",["T_CONSTANT_ENCAPSED_STRING","'method'",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$resource_config_entities",44],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.user'",44],"]",["T_OBJECT_OPERATOR","->",44],["T_STRING","get",44],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",44],")",")",";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ Read the existing 'entity:comment' and 'entity:user' resource\n",46],["T_WHITESPACE","    ",47],["T_COMMENT","\/\/ configuration so we can verify it after the update.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$comment_resource_configuration",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$resource_config_entities",48],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.comment'",48],"]",["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$user_resource_configuration",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$resource_config_entities",49],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.user'",49],"]",["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","runUpdates",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Make sure we have the expected values after the update.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$resource_config_entities",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$resource_config_storage",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","loadMultiple",54],"(",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertIdentical",55],"(","[",["T_CONSTANT_ENCAPSED_STRING","'entity.comment'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'entity.node'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'entity.user'",55],"]",",",["T_WHITESPACE"," ",55],["T_STRING","array_keys",55],"(",["T_VARIABLE","$resource_config_entities",55],")",")",";",["T_WHITESPACE","\n    ",55],["T_COMMENT","\/\/ 'entity:node' should be updated.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertIdentical",57],"(",["T_CONSTANT_ENCAPSED_STRING","'resource'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$resource_config_entities",57],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.node'",57],"]",["T_OBJECT_OPERATOR","->",57],["T_STRING","get",57],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",57],")",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertidentical",58],"(",["T_VARIABLE","$resource_config_entities",58],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.node'",58],"]",["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",58],")",",",["T_WHITESPACE"," ",58],"[",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'methods'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'GET'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'POST'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'PATCH'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'DELETE'",59],"]",",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'formats'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],"[",["T_CONSTANT_ENCAPSED_STRING","'hal_json'",60],"]",",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'authentication'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],"[",["T_CONSTANT_ENCAPSED_STRING","'basic_auth'",61],"]",",",["T_WHITESPACE","\n    ",61],"]",")",";",["T_WHITESPACE","\n    ",62],["T_COMMENT","\/\/ 'entity:comment' should be unchanged.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertIdentical",64],"(",["T_CONSTANT_ENCAPSED_STRING","'method'",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$resource_config_entities",64],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.comment'",64],"]",["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertIdentical",65],"(",["T_VARIABLE","$comment_resource_configuration",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$resource_config_entities",65],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.comment'",65],"]",["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",65],")",")",";",["T_WHITESPACE","\n    ",65],["T_COMMENT","\/\/ 'entity:user' should be unchanged.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertIdentical",67],"(",["T_CONSTANT_ENCAPSED_STRING","'method'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$resource_config_entities",67],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.user'",67],"]",["T_OBJECT_OPERATOR","->",67],["T_STRING","get",67],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",67],")",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertIdentical",68],"(",["T_VARIABLE","$user_resource_configuration",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$resource_config_entities",68],"[",["T_CONSTANT_ENCAPSED_STRING","'entity.user'",68],"]",["T_OBJECT_OPERATOR","->",68],["T_STRING","get",68],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",68],")",")",";",["T_WHITESPACE","\n  ",68],"}",["T_WHITESPACE","\n\n",69],"}",["T_WHITESPACE","\n",71]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DependencyInjection",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ContainerInjectionInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","rest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","RestResourceConfigInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DependencyInjection",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ContainerInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Calculates rest resource config dependencies.\n *\n * @internal\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","ConfigDependencies",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_STRING","ContainerInjectionInterface",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * The serialization format providers, keyed by format.\n   *\n   * @var string[]\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$formatProviders",21],";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The authentication providers, keyed by ID.\n   *\n   * @var string[]\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$authProviders",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Creates a new ConfigDependencies instance.\n   *\n   * @param string[] $format_providers\n   *   The serialization format providers, keyed by format.\n   * @param string[] $auth_providers\n   *   The authentication providers, keyed by ID.\n   *\/",30],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_ARRAY","array",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$format_providers",38],",",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$auth_providers",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","formatProviders",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$format_providers",39],";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","authProviders",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$auth_providers",40],";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_STATIC","static",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","create",46],"(",["T_STRING","ContainerInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$container",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STATIC","static",47],"(",["T_WHITESPACE","\n      ",47],["T_VARIABLE","$container",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getParameter",48],"(",["T_CONSTANT_ENCAPSED_STRING","'serializer.format_providers'",48],")",",",["T_WHITESPACE","\n      ",48],["T_VARIABLE","$container",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getParameter",49],"(",["T_CONSTANT_ENCAPSED_STRING","'authentication_providers'",49],")",["T_WHITESPACE","\n    ",49],")",";",["T_WHITESPACE","\n  ",50],"}",["T_WHITESPACE","\n\n  ",51],["T_DOC_COMMENT","\/**\n   * Calculates dependencies of a specific rest resource configuration.\n   *\n   * This function returns dependencies in a non-sorted, non-unique manner. It\n   * is therefore the caller's responsibility to sort and remove duplicates\n   * from the result prior to saving it with the configuration or otherwise\n   * using it in a way that requires that. For example,\n   * \\Drupal\\rest\\Entity\\RestResourceConfig::calculateDependencies() does this\n   * via its \\Drupal\\Core\\Entity\\DependencyTrait::addDependency() method.\n   *\n   * @param \\Drupal\\rest\\RestResourceConfigInterface $rest_config\n   *   The rest configuration.\n   *\n   * @return string[][]\n   *   Dependencies keyed by dependency type.\n   *\n   * @see \\Drupal\\rest\\Entity\\RestResourceConfig::calculateDependencies()\n   *\/",53],["T_WHITESPACE","\n  ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","calculateDependencies",71],"(",["T_STRING","RestResourceConfigInterface",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$rest_config",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$granularity",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$rest_config",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","get",72],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Dependency calculation is the same for either granularity, the most\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ notable difference is that for the 'resource' granularity, the same\n",75],["T_WHITESPACE","    ",76],["T_COMMENT","\/\/ authentication providers and formats are supported for every method.\n",76],["T_WHITESPACE","    ",77],["T_SWITCH","switch",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$granularity",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n      ",77],["T_CASE","case",78],["T_WHITESPACE"," ",78],["T_STRING","RestResourceConfigInterface",78],["T_DOUBLE_COLON","::",78],["T_STRING","METHOD_GRANULARITY",78],":",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$methods",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$rest_config",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMethods",79],"(",")",";",["T_WHITESPACE","\n        ",79],["T_BREAK","break",80],";",["T_WHITESPACE","\n      ",80],["T_CASE","case",81],["T_WHITESPACE"," ",81],["T_STRING","RestResourceConfigInterface",81],["T_DOUBLE_COLON","::",81],["T_STRING","RESOURCE_GRANULARITY",81],":",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$methods",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","array_slice",82],"(",["T_VARIABLE","$rest_config",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getMethods",82],"(",")",",",["T_WHITESPACE"," ",82],["T_LNUMBER","0",82],",",["T_WHITESPACE"," ",82],["T_LNUMBER","1",82],")",";",["T_WHITESPACE","\n        ",82],["T_BREAK","break",83],";",["T_WHITESPACE","\n      ",83],["T_DEFAULT","default",84],":",["T_WHITESPACE","\n        ",84],["T_THROW","throw",85],["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_NS_SEPARATOR","\\",85],["T_STRING","InvalidArgumentException",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid granularity specified.'",85],")",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ The dependency lists for authentication providers and formats\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ generated on container build.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$dependencies",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"[","]",";",["T_WHITESPACE","\n    ",90],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$methods",91],["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$request_method",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_COMMENT","\/\/ Add dependencies based on the supported authentication providers.\n",92],["T_WHITESPACE","      ",93],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$rest_config",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getAuthenticationProviders",93],"(",["T_VARIABLE","$request_method",93],")",["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$auth",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_ISSET","isset",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","authProviders",94],"[",["T_VARIABLE","$auth",94],"]",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n          ",94],["T_VARIABLE","$module_name",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","authProviders",95],"[",["T_VARIABLE","$auth",95],"]",";",["T_WHITESPACE","\n          ",95],["T_VARIABLE","$dependencies",96],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",96],"]","[","]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$module_name",96],";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n      ",97],"}",["T_WHITESPACE","\n      ",98],["T_COMMENT","\/\/ Add dependencies based on the supported authentication formats.\n",99],["T_WHITESPACE","      ",100],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$rest_config",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getFormats",100],"(",["T_VARIABLE","$request_method",100],")",["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$format",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_ISSET","isset",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","formatProviders",101],"[",["T_VARIABLE","$format",101],"]",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n          ",101],["T_VARIABLE","$module_name",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","formatProviders",102],"[",["T_VARIABLE","$format",102],"]",";",["T_WHITESPACE","\n          ",102],["T_VARIABLE","$dependencies",103],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",103],"]","[","]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$module_name",103],";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n      ",104],"}",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$dependencies",108],";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n  ",109],["T_DOC_COMMENT","\/**\n   * Informs the entity that entities it depends on will be deleted.\n   *\n   * @param \\Drupal\\rest\\RestResourceConfigInterface $rest_config\n   *   The rest configuration.\n   * @param array $dependencies\n   *   An array of dependencies that will be deleted keyed by dependency type.\n   *   Dependency types are, for example, entity, module and theme.\n   *\n   * @return bool\n   *   TRUE if the entity has been changed as a result, FALSE if not.\n   *\n   * @see \\Drupal\\Core\\Config\\Entity\\ConfigEntityInterface::onDependencyRemoval()\n   *\/",111],["T_WHITESPACE","\n  ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","onDependencyRemoval",125],"(",["T_STRING","RestResourceConfigInterface",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$rest_config",125],",",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$dependencies",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$granularity",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$rest_config",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","get",126],"(",["T_CONSTANT_ENCAPSED_STRING","'granularity'",126],")",";",["T_WHITESPACE","\n    ",126],["T_SWITCH","switch",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$granularity",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n      ",127],["T_CASE","case",128],["T_WHITESPACE"," ",128],["T_STRING","RestResourceConfigInterface",128],["T_DOUBLE_COLON","::",128],["T_STRING","METHOD_GRANULARITY",128],":",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","onDependencyRemovalForMethodGranularity",129],"(",["T_VARIABLE","$rest_config",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$dependencies",129],")",";",["T_WHITESPACE","\n      ",129],["T_CASE","case",130],["T_WHITESPACE"," ",130],["T_STRING","RestResourceConfigInterface",130],["T_DOUBLE_COLON","::",130],["T_STRING","RESOURCE_GRANULARITY",130],":",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","onDependencyRemovalForResourceGranularity",131],"(",["T_VARIABLE","$rest_config",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$dependencies",131],")",";",["T_WHITESPACE","\n      ",131],["T_DEFAULT","default",132],":",["T_WHITESPACE","\n        ",132],["T_THROW","throw",133],["T_WHITESPACE"," ",133],["T_NEW","new",133],["T_WHITESPACE"," ",133],["T_NS_SEPARATOR","\\",133],["T_STRING","InvalidArgumentException",133],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid granularity specified.'",133],")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n  ",134],"}",["T_WHITESPACE","\n\n  ",135],["T_DOC_COMMENT","\/**\n   * Informs the entity that entities it depends on will be deleted.\n   *\n   * @param \\Drupal\\rest\\RestResourceConfigInterface $rest_config\n   *   The rest configuration.\n   * @param array $dependencies\n   *   An array of dependencies that will be deleted keyed by dependency type.\n   *   Dependency types are, for example, entity, module and theme.\n   *\n   * @return bool\n   *   TRUE if the entity has been changed as a result, FALSE if not.\n   *\/",137],["T_WHITESPACE","\n  ",148],["T_PROTECTED","protected",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","onDependencyRemovalForMethodGranularity",149],"(",["T_STRING","RestResourceConfigInterface",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$rest_config",149],",",["T_WHITESPACE"," ",149],["T_ARRAY","array",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$dependencies",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$changed",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","FALSE",150],";",["T_WHITESPACE","\n    ",150],["T_COMMENT","\/\/ Only module-related dependencies can be fixed. All other types of\n",151],["T_WHITESPACE","    ",152],["T_COMMENT","\/\/ dependencies cannot, because they were not generated based on supported\n",152],["T_WHITESPACE","    ",153],["T_COMMENT","\/\/ authentication providers or formats.\n",153],["T_WHITESPACE","    ",154],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_ISSET","isset",154],"(",["T_VARIABLE","$dependencies",154],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",154],"]",")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n      ",154],["T_COMMENT","\/\/ Try to fix dependencies.\n",155],["T_WHITESPACE","      ",156],["T_VARIABLE","$removed_auth",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","array_keys",156],"(",["T_STRING","array_intersect",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","authProviders",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$dependencies",156],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",156],"]",")",")",";",["T_WHITESPACE","\n      ",156],["T_VARIABLE","$removed_formats",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","array_keys",157],"(",["T_STRING","array_intersect",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","formatProviders",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$dependencies",157],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",157],"]",")",")",";",["T_WHITESPACE","\n      ",157],["T_VARIABLE","$configuration_before",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$configuration",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$rest_config",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","get",158],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",158],")",";",["T_WHITESPACE","\n      ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_EMPTY","empty",159],"(",["T_VARIABLE","$removed_auth",159],")",["T_WHITESPACE"," ",159],["T_BOOLEAN_OR","||",159],["T_WHITESPACE"," ",159],"!",["T_EMPTY","empty",159],"(",["T_VARIABLE","$removed_formats",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n        ",159],["T_COMMENT","\/\/ Try to fix dependency problems by removing affected\n",160],["T_WHITESPACE","        ",161],["T_COMMENT","\/\/ authentication providers and formats.\n",161],["T_WHITESPACE","        ",162],["T_FOREACH","foreach",162],["T_WHITESPACE"," ",162],"(",["T_STRING","array_keys",162],"(",["T_VARIABLE","$rest_config",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","get",162],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",162],")",")",["T_WHITESPACE"," ",162],["T_AS","as",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$request_method",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n          ",162],["T_FOREACH","foreach",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$removed_formats",163],["T_WHITESPACE"," ",163],["T_AS","as",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$format",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_STRING","in_array",164],"(",["T_VARIABLE","$format",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$rest_config",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getFormats",164],"(",["T_VARIABLE","$request_method",164],")",",",["T_WHITESPACE"," ",164],["T_STRING","TRUE",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n              ",164],["T_VARIABLE","$configuration",165],"[",["T_VARIABLE","$request_method",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_formats'",165],"]",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","array_diff",165],"(",["T_VARIABLE","$configuration",165],"[",["T_VARIABLE","$request_method",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_formats'",165],"]",",",["T_WHITESPACE"," ",165],["T_VARIABLE","$removed_formats",165],")",";",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE","\n          ",166],"}",["T_WHITESPACE","\n          ",167],["T_FOREACH","foreach",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$removed_auth",168],["T_WHITESPACE"," ",168],["T_AS","as",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$auth",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_STRING","in_array",169],"(",["T_VARIABLE","$auth",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$rest_config",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getAuthenticationProviders",169],"(",["T_VARIABLE","$request_method",169],")",",",["T_WHITESPACE"," ",169],["T_STRING","TRUE",169],")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n              ",169],["T_VARIABLE","$configuration",170],"[",["T_VARIABLE","$request_method",170],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_auth'",170],"]",["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","array_diff",170],"(",["T_VARIABLE","$configuration",170],"[",["T_VARIABLE","$request_method",170],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_auth'",170],"]",",",["T_WHITESPACE"," ",170],["T_VARIABLE","$removed_auth",170],")",";",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE","\n          ",171],"}",["T_WHITESPACE","\n          ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_EMPTY","empty",173],"(",["T_VARIABLE","$configuration",173],"[",["T_VARIABLE","$request_method",173],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_auth'",173],"]",")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_COMMENT","\/\/ Remove the key if there are no more authentication providers\n",174],["T_WHITESPACE","            ",175],["T_COMMENT","\/\/ supported by this request method.\n",175],["T_WHITESPACE","            ",176],["T_UNSET","unset",176],"(",["T_VARIABLE","$configuration",176],"[",["T_VARIABLE","$request_method",176],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_auth'",176],"]",")",";",["T_WHITESPACE","\n          ",176],"}",["T_WHITESPACE","\n          ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_EMPTY","empty",178],"(",["T_VARIABLE","$configuration",178],"[",["T_VARIABLE","$request_method",178],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_formats'",178],"]",")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_COMMENT","\/\/ Remove the key if there are no more formats supported by this\n",179],["T_WHITESPACE","            ",180],["T_COMMENT","\/\/ request method.\n",180],["T_WHITESPACE","            ",181],["T_UNSET","unset",181],"(",["T_VARIABLE","$configuration",181],"[",["T_VARIABLE","$request_method",181],"]","[",["T_CONSTANT_ENCAPSED_STRING","'supported_formats'",181],"]",")",";",["T_WHITESPACE","\n          ",181],"}",["T_WHITESPACE","\n          ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_EMPTY","empty",183],"(",["T_VARIABLE","$configuration",183],"[",["T_VARIABLE","$request_method",183],"]",")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_COMMENT","\/\/ Remove the request method altogether if it no longer has any\n",184],["T_WHITESPACE","            ",185],["T_COMMENT","\/\/ supported authentication providers or formats.\n",185],["T_WHITESPACE","            ",186],["T_UNSET","unset",186],"(",["T_VARIABLE","$configuration",186],"[",["T_VARIABLE","$request_method",186],"]",")",";",["T_WHITESPACE","\n          ",186],"}",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n      ",188],"}",["T_WHITESPACE","\n      ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$configuration_before",190],["T_WHITESPACE"," ",190],["T_IS_NOT_EQUAL","!=",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$configuration",190],["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],"!",["T_EMPTY","empty",190],"(",["T_VARIABLE","$configuration",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$rest_config",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","set",191],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$configuration",191],")",";",["T_WHITESPACE","\n        ",191],["T_COMMENT","\/\/ Only mark the dependencies problems as fixed if there is any\n",192],["T_WHITESPACE","        ",193],["T_COMMENT","\/\/ configuration left.\n",193],["T_WHITESPACE","        ",194],["T_VARIABLE","$changed",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","TRUE",194],";",["T_WHITESPACE","\n      ",194],"}",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n    ",196],["T_COMMENT","\/\/ If the dependency problems are not marked as fixed at this point they\n",197],["T_WHITESPACE","    ",198],["T_COMMENT","\/\/ should be related to the resource plugin and the config entity should\n",198],["T_WHITESPACE","    ",199],["T_COMMENT","\/\/ be deleted.\n",199],["T_WHITESPACE","    ",200],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$changed",200],";",["T_WHITESPACE","\n  ",200],"}",["T_WHITESPACE","\n\n  ",201],["T_DOC_COMMENT","\/**\n   * Informs the entity that entities it depends on will be deleted.\n   *\n   * @param \\Drupal\\rest\\RestResourceConfigInterface $rest_config\n   *   The rest configuration.\n   * @param array $dependencies\n   *   An array of dependencies that will be deleted keyed by dependency type.\n   *   Dependency types are, for example, entity, module and theme.\n   *\n   * @return bool\n   *   TRUE if the entity has been changed as a result, FALSE if not.\n   *\/",203],["T_WHITESPACE","\n  ",214],["T_PROTECTED","protected",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","onDependencyRemovalForResourceGranularity",215],"(",["T_STRING","RestResourceConfigInterface",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$rest_config",215],",",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$dependencies",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n    ",215],["T_VARIABLE","$changed",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_STRING","FALSE",216],";",["T_WHITESPACE","\n    ",216],["T_COMMENT","\/\/ Only module-related dependencies can be fixed. All other types of\n",217],["T_WHITESPACE","    ",218],["T_COMMENT","\/\/ dependencies cannot, because they were not generated based on supported\n",218],["T_WHITESPACE","    ",219],["T_COMMENT","\/\/ authentication providers or formats.\n",219],["T_WHITESPACE","    ",220],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_ISSET","isset",220],"(",["T_VARIABLE","$dependencies",220],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",220],"]",")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n      ",220],["T_COMMENT","\/\/ Try to fix dependencies.\n",221],["T_WHITESPACE","      ",222],["T_VARIABLE","$removed_auth",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","array_keys",222],"(",["T_STRING","array_intersect",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","authProviders",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$dependencies",222],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",222],"]",")",")",";",["T_WHITESPACE","\n      ",222],["T_VARIABLE","$removed_formats",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_STRING","array_keys",223],"(",["T_STRING","array_intersect",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","formatProviders",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$dependencies",223],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",223],"]",")",")",";",["T_WHITESPACE","\n      ",223],["T_VARIABLE","$configuration_before",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$configuration",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$rest_config",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","get",224],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",224],")",";",["T_WHITESPACE","\n      ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(","!",["T_EMPTY","empty",225],"(",["T_VARIABLE","$removed_auth",225],")",["T_WHITESPACE"," ",225],["T_BOOLEAN_OR","||",225],["T_WHITESPACE"," ",225],"!",["T_EMPTY","empty",225],"(",["T_VARIABLE","$removed_formats",225],")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n        ",225],["T_COMMENT","\/\/ All methods support the same formats and authentication providers, so\n",226],["T_WHITESPACE","        ",227],["T_COMMENT","\/\/ get those for whichever the first listed method is.\n",227],["T_WHITESPACE","        ",228],["T_VARIABLE","$first_method",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$rest_config",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getMethods",228],"(",")","[",["T_LNUMBER","0",228],"]",";",["T_WHITESPACE","\n\n        ",228],["T_COMMENT","\/\/ Try to fix dependency problems by removing affected\n",230],["T_WHITESPACE","        ",231],["T_COMMENT","\/\/ authentication providers and formats.\n",231],["T_WHITESPACE","        ",232],["T_FOREACH","foreach",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$removed_formats",232],["T_WHITESPACE"," ",232],["T_AS","as",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$format",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n          ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_STRING","in_array",233],"(",["T_VARIABLE","$format",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$rest_config",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getFormats",233],"(",["T_VARIABLE","$first_method",233],")",",",["T_WHITESPACE"," ",233],["T_STRING","TRUE",233],")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$configuration",234],"[",["T_CONSTANT_ENCAPSED_STRING","'formats'",234],"]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","array_diff",234],"(",["T_VARIABLE","$configuration",234],"[",["T_CONSTANT_ENCAPSED_STRING","'formats'",234],"]",",",["T_WHITESPACE"," ",234],["T_VARIABLE","$removed_formats",234],")",";",["T_WHITESPACE","\n          ",234],"}",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n        ",236],["T_FOREACH","foreach",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$removed_auth",237],["T_WHITESPACE"," ",237],["T_AS","as",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$auth",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n          ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_STRING","in_array",238],"(",["T_VARIABLE","$auth",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$rest_config",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getAuthenticationProviders",238],"(",["T_VARIABLE","$first_method",238],")",",",["T_WHITESPACE"," ",238],["T_STRING","TRUE",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$configuration",239],"[",["T_CONSTANT_ENCAPSED_STRING","'authentication'",239],"]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","array_diff",239],"(",["T_VARIABLE","$configuration",239],"[",["T_CONSTANT_ENCAPSED_STRING","'authentication'",239],"]",",",["T_WHITESPACE"," ",239],["T_VARIABLE","$removed_auth",239],")",";",["T_WHITESPACE","\n          ",239],"}",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_EMPTY","empty",242],"(",["T_VARIABLE","$configuration",242],"[",["T_CONSTANT_ENCAPSED_STRING","'authentication'",242],"]",")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n          ",242],["T_COMMENT","\/\/ Remove the key if there are no more authentication providers\n",243],["T_WHITESPACE","          ",244],["T_COMMENT","\/\/ supported.\n",244],["T_WHITESPACE","          ",245],["T_UNSET","unset",245],"(",["T_VARIABLE","$configuration",245],"[",["T_CONSTANT_ENCAPSED_STRING","'authentication'",245],"]",")",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n        ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_EMPTY","empty",247],"(",["T_VARIABLE","$configuration",247],"[",["T_CONSTANT_ENCAPSED_STRING","'formats'",247],"]",")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n          ",247],["T_COMMENT","\/\/ Remove the key if there are no more formats supported.\n",248],["T_WHITESPACE","          ",249],["T_UNSET","unset",249],"(",["T_VARIABLE","$configuration",249],"[",["T_CONSTANT_ENCAPSED_STRING","'formats'",249],"]",")",";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n        ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_EMPTY","empty",251],"(",["T_VARIABLE","$configuration",251],"[",["T_CONSTANT_ENCAPSED_STRING","'authentication'",251],"]",")",["T_WHITESPACE"," ",251],["T_BOOLEAN_OR","||",251],["T_WHITESPACE"," ",251],["T_EMPTY","empty",251],"(",["T_VARIABLE","$configuration",251],"[",["T_CONSTANT_ENCAPSED_STRING","'formats'",251],"]",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n          ",251],["T_COMMENT","\/\/ If there no longer are any supported authentication providers or\n",252],["T_WHITESPACE","          ",253],["T_COMMENT","\/\/ formats, this REST resource can no longer function, and so we\n",253],["T_WHITESPACE","          ",254],["T_COMMENT","\/\/ cannot fix this config entity to keep it working.\n",254],["T_WHITESPACE","          ",255],["T_VARIABLE","$configuration",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],"[","]",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n      ",256],"}",["T_WHITESPACE","\n      ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$configuration_before",258],["T_WHITESPACE"," ",258],["T_IS_NOT_EQUAL","!=",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$configuration",258],["T_WHITESPACE"," ",258],["T_BOOLEAN_AND","&&",258],["T_WHITESPACE"," ",258],"!",["T_EMPTY","empty",258],"(",["T_VARIABLE","$configuration",258],")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$rest_config",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","set",259],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration'",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$configuration",259],")",";",["T_WHITESPACE","\n        ",259],["T_COMMENT","\/\/ Only mark the dependencies problems as fixed if there is any\n",260],["T_WHITESPACE","        ",261],["T_COMMENT","\/\/ configuration left.\n",261],["T_WHITESPACE","        ",262],["T_VARIABLE","$changed",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_STRING","TRUE",262],";",["T_WHITESPACE","\n      ",262],"}",["T_WHITESPACE","\n    ",263],"}",["T_WHITESPACE","\n    ",264],["T_COMMENT","\/\/ If the dependency problems are not marked as fixed at this point they\n",265],["T_WHITESPACE","    ",266],["T_COMMENT","\/\/ should be related to the resource plugin and the config entity should\n",266],["T_WHITESPACE","    ",267],["T_COMMENT","\/\/ be deleted.\n",267],["T_WHITESPACE","    ",268],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$changed",268],";",["T_WHITESPACE","\n  ",268],"}",["T_WHITESPACE","\n\n",269],"}",["T_WHITESPACE","\n",271]]
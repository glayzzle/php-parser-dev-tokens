[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","LinkManager",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheBackendInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Config",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigFactoryInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityTypeBundleInfoInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Extension",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ModuleHandlerInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","HttpFoundation",10],["T_NS_SEPARATOR","\\",10],["T_STRING","RequestStack",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","TypeLinkManager",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","LinkManagerBase",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","TypeLinkManagerInterface",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Injected cache backend.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface;\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$cache",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Module handler service.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$moduleHandler",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The bundle info service.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeBundleInfoInterface\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$bundleInfoService",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * Constructor.\n   *\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $cache\n   *   The injected cache backend for caching type URIs.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler service.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The config factory service.\n   * @param \\Symfony\\Component\\HttpFoundation\\RequestStack $request_stack\n   *   The request stack.\n   * @param \\Drupal\\Core\\Entity\\EntityTypeBundleInfoInterface $bundle_info_service\n   *   The bundle info service.\n   *\/",35],["T_WHITESPACE","\n  ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","__construct",49],"(",["T_STRING","CacheBackendInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$cache",49],",",["T_WHITESPACE"," ",49],["T_STRING","ModuleHandlerInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$module_handler",49],",",["T_WHITESPACE"," ",49],["T_STRING","ConfigFactoryInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$config_factory",49],",",["T_WHITESPACE"," ",49],["T_STRING","RequestStack",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$request_stack",49],",",["T_WHITESPACE"," ",49],["T_STRING","EntityTypeBundleInfoInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$bundle_info_service",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","cache",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$cache",50],";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","configFactory",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$config_factory",51],";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","moduleHandler",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$module_handler",52],";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","requestStack",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$request_stack",53],";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","bundleInfoService",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$bundle_info_service",54],";",["T_WHITESPACE","\n  ",54],"}",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",57],["T_WHITESPACE","\n  ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","getTypeUri",60],"(",["T_VARIABLE","$entity_type",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$bundle",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$context",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_COMMENT","\/\/ Per the interface documention of this method, the returned URI may\n",61],["T_WHITESPACE","    ",62],["T_COMMENT","\/\/ optionally also serve as the URL of a documentation page about this\n",62],["T_WHITESPACE","    ",63],["T_COMMENT","\/\/ bundle. However, the REST module does not currently implement such\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ a documentation page. Therefore, we return a URI assembled relative to\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ the site's base URL, which is sufficient to uniquely identify the site's\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ entity type and bundle for use in hypermedia formats, but we do not\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ take into account unclean URLs, language prefixing, or anything else\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/ that would be required for Drupal to be able to respond with content\n",68],["T_WHITESPACE","    ",69],["T_COMMENT","\/\/ at this URL. If a module is installed that adds such content, but\n",69],["T_WHITESPACE","    ",70],["T_COMMENT","\/\/ requires this URL to be different (e.g., include a language prefix),\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ then the module must also override the TypeLinkManager class\/service to\n",71],["T_WHITESPACE","    ",72],["T_COMMENT","\/\/ return the desired URL.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$uri",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getLinkDomain",73],"(",")",["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],"\"",["T_ENCAPSED_AND_WHITESPACE","\/rest\/type\/",73],["T_VARIABLE","$entity_type",73],["T_ENCAPSED_AND_WHITESPACE","\/",73],["T_VARIABLE","$bundle",73],"\"",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","moduleHandler",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","alter",74],"(",["T_CONSTANT_ENCAPSED_STRING","'rest_type_uri'",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$uri",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$context",74],")",";",["T_WHITESPACE","\n    ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$uri",75],";",["T_WHITESPACE","\n  ",75],"}",["T_WHITESPACE","\n\n  ",76],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",78],["T_WHITESPACE","\n  ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","getTypeInternalIds",81],"(",["T_VARIABLE","$type_uri",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$context",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$types",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getTypes",82],"(",["T_VARIABLE","$context",82],")",";",["T_WHITESPACE","\n    ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_ISSET","isset",83],"(",["T_VARIABLE","$types",83],"[",["T_VARIABLE","$type_uri",83],"]",")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n      ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$types",84],"[",["T_VARIABLE","$type_uri",84],"]",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n    ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_STRING","FALSE",86],";",["T_WHITESPACE","\n  ",86],"}",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * Get the array of type links.\n   *\n   * @param array $context\n   *   Context from the normalizer\/serializer operation.\n   *\n   * @return array\n   *   An array of typed data ids (entity_type and bundle) keyed by\n   *   corresponding type URI.\n   *\/",89],["T_WHITESPACE","\n  ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","getTypes",99],"(",["T_VARIABLE","$context",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$cid",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'rest:links:types'",100],";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$cache",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","cache",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_VARIABLE","$cid",101],")",";",["T_WHITESPACE","\n    ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_VARIABLE","$cache",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$data",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","writeCache",103],"(",["T_VARIABLE","$context",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n    ",104],["T_ELSE","else",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$data",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$cache",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","data",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n    ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$data",108],";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n  ",109],["T_DOC_COMMENT","\/**\n   * Writes the cache of type links.\n   *\n   * @param array $context\n   *   Context from the normalizer\/serializer operation.\n   *\n   * @return array\n   *   An array of typed data ids (entity_type and bundle) keyed by\n   *   corresponding type URI.\n   *\/",111],["T_WHITESPACE","\n  ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","writeCache",121],"(",["T_VARIABLE","$context",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$data",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",")",";",["T_WHITESPACE","\n\n    ",122],["T_COMMENT","\/\/ Type URIs correspond to bundles. Iterate through the bundles to get the\n",124],["T_WHITESPACE","    ",125],["T_COMMENT","\/\/ URI and data for them.\n",125],["T_WHITESPACE","    ",126],["T_VARIABLE","$entity_types",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Drupal",126],["T_DOUBLE_COLON","::",126],["T_STRING","entityManager",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getDefinitions",126],"(",")",";",["T_WHITESPACE","\n    ",126],["T_FOREACH","foreach",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","bundleInfoService",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getAllBundleInfo",127],"(",")",["T_WHITESPACE"," ",127],["T_AS","as",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$entity_type_id",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$bundles",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n      ",127],["T_COMMENT","\/\/ Only content entities are supported currently.\n",128],["T_WHITESPACE","      ",129],["T_COMMENT","\/\/ @todo Consider supporting config entities.\n",129],["T_WHITESPACE","      ",130],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$entity_types",130],"[",["T_VARIABLE","$entity_type_id",130],"]",["T_OBJECT_OPERATOR","->",130],["T_STRING","isSubclassOf",130],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Config\\Entity\\ConfigEntityInterface'",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n        ",130],["T_CONTINUE","continue",131],";",["T_WHITESPACE","\n      ",131],"}",["T_WHITESPACE","\n      ",132],["T_FOREACH","foreach",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$bundles",133],["T_WHITESPACE"," ",133],["T_AS","as",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$bundle",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$bundle_info",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n        ",133],["T_COMMENT","\/\/ Get a type URI for the bundle.\n",134],["T_WHITESPACE","        ",135],["T_VARIABLE","$bundle_uri",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getTypeUri",135],"(",["T_VARIABLE","$entity_type_id",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$bundle",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$context",135],")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$data",136],"[",["T_VARIABLE","$bundle_uri",136],"]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_WHITESPACE","\n          ",136],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$entity_type_id",137],",",["T_WHITESPACE","\n          ",137],["T_CONSTANT_ENCAPSED_STRING","'bundle'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$bundle",138],",",["T_WHITESPACE","\n        ",138],")",";",["T_WHITESPACE","\n      ",139],"}",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n    ",141],["T_COMMENT","\/\/ These URIs only change when entity info changes, so cache it permanently\n",142],["T_WHITESPACE","    ",143],["T_COMMENT","\/\/ and only clear it when entity_info is cleared.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","cache",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","set",144],"(",["T_CONSTANT_ENCAPSED_STRING","'rest:links:types'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$data",144],",",["T_WHITESPACE"," ",144],["T_STRING","Cache",144],["T_DOUBLE_COLON","::",144],["T_STRING","PERMANENT",144],",",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_types'",144],")",")",";",["T_WHITESPACE","\n    ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$data",145],";",["T_WHITESPACE","\n  ",145],"}",["T_WHITESPACE","\n\n",146],"}",["T_WHITESPACE","\n",148]]
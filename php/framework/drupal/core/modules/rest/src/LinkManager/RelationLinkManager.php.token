[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","LinkManager",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheBackendInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Config",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigFactoryInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ContentEntityTypeInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityManagerInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Extension",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ModuleHandlerInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Symfony",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Component",11],["T_NS_SEPARATOR","\\",11],["T_STRING","HttpFoundation",11],["T_NS_SEPARATOR","\\",11],["T_STRING","RequestStack",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","RelationLinkManager",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","LinkManagerBase",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_STRING","RelationLinkManagerInterface",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface;\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$cache",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$entityManager",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Module handler service.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$moduleHandler",32],";",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * Constructor.\n   *\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $cache\n   *   The cache of relation URIs and their associated Typed Data IDs.\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler service.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The config factory service.\n   * @param \\Symfony\\Component\\HttpFoundation\\RequestStack $request_stack\n   *   The request stack.\n   *\/",34],["T_WHITESPACE","\n  ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","__construct",48],"(",["T_STRING","CacheBackendInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$cache",48],",",["T_WHITESPACE"," ",48],["T_STRING","EntityManagerInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$entity_manager",48],",",["T_WHITESPACE"," ",48],["T_STRING","ModuleHandlerInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$module_handler",48],",",["T_WHITESPACE"," ",48],["T_STRING","ConfigFactoryInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$config_factory",48],",",["T_WHITESPACE"," ",48],["T_STRING","RequestStack",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$request_stack",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","cache",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$cache",49],";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","entityManager",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$entity_manager",50],";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","configFactory",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$config_factory",51],";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","moduleHandler",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$module_handler",52],";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","requestStack",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$request_stack",53],";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",56],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","getRelationUri",59],"(",["T_VARIABLE","$entity_type",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$bundle",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$field_name",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$context",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_COMMENT","\/\/ Per the interface documention of this method, the returned URI may\n",60],["T_WHITESPACE","    ",61],["T_COMMENT","\/\/ optionally also serve as the URL of a documentation page about this\n",61],["T_WHITESPACE","    ",62],["T_COMMENT","\/\/ field. However, the REST module does not currently implement such\n",62],["T_WHITESPACE","    ",63],["T_COMMENT","\/\/ a documentation page. Therefore, we return a URI assembled relative to\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ the site's base URL, which is sufficient to uniquely identify the site's\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ entity type + bundle + field for use in hypermedia formats, but we do\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ not take into account unclean URLs, language prefixing, or anything else\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ that would be required for Drupal to be able to respond with content\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/ at this URL. If a module is installed that adds such content, but\n",68],["T_WHITESPACE","    ",69],["T_COMMENT","\/\/ requires this URL to be different (e.g., include a language prefix),\n",69],["T_WHITESPACE","    ",70],["T_COMMENT","\/\/ then the module must also override the RelationLinkManager class\/service\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ to return the desired URL.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$uri",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getLinkDomain",72],"(",")",["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],"\"",["T_ENCAPSED_AND_WHITESPACE","\/rest\/relation\/",72],["T_VARIABLE","$entity_type",72],["T_ENCAPSED_AND_WHITESPACE","\/",72],["T_VARIABLE","$bundle",72],["T_ENCAPSED_AND_WHITESPACE","\/",72],["T_VARIABLE","$field_name",72],"\"",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","moduleHandler",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","alter",73],"(",["T_CONSTANT_ENCAPSED_STRING","'rest_relation_uri'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$uri",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$context",73],")",";",["T_WHITESPACE","\n    ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$uri",74],";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",77],["T_WHITESPACE","\n  ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","getRelationInternalIds",80],"(",["T_VARIABLE","$relation_uri",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$context",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$relations",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getRelations",81],"(",["T_VARIABLE","$context",81],")",";",["T_WHITESPACE","\n    ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_ISSET","isset",82],"(",["T_VARIABLE","$relations",82],"[",["T_VARIABLE","$relation_uri",82],"]",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$relations",83],"[",["T_VARIABLE","$relation_uri",83],"]",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n    ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_STRING","FALSE",85],";",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n  ",86],["T_DOC_COMMENT","\/**\n   * Get the array of relation links.\n   *\n   * Any field can be handled as a relation simply by changing how it is\n   * normalized. Therefore, there is no prior knowledge that can be used here\n   * to determine which fields to assign relation URIs. Instead, each field,\n   * even primitives, are given a relation URI. It is up to the caller to\n   * determine which URIs to use.\n   *\n   * @param array $context\n   *   Context from the normalizer\/serializer operation.\n   *\n   * @return array\n   *   An array of typed data ids (entity_type, bundle, and field name) keyed\n   *   by corresponding relation URI.\n   *\/",88],["T_WHITESPACE","\n  ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","getRelations",104],"(",["T_VARIABLE","$context",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$cid",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'rest:links:relations'",105],";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$cache",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","cache",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","get",106],"(",["T_VARIABLE","$cid",106],")",";",["T_WHITESPACE","\n    ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(","!",["T_VARIABLE","$cache",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","writeCache",108],"(",["T_VARIABLE","$context",108],")",";",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$cache",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","cache",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","get",109],"(",["T_VARIABLE","$cid",109],")",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n    ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$cache",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","data",111],";",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n  ",112],["T_DOC_COMMENT","\/**\n   * Writes the cache of relation links.\n   *\n   * @param array $context\n   *   Context from the normalizer\/serializer operation.\n   *\/",114],["T_WHITESPACE","\n  ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","writeCache",120],"(",["T_VARIABLE","$context",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$data",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",")",";",["T_WHITESPACE","\n\n    ",121],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","entityManager",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getDefinitions",123],"(",")",["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$entity_type",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n      ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$entity_type",124],["T_WHITESPACE"," ",124],["T_INSTANCEOF","instanceof",124],["T_WHITESPACE"," ",124],["T_STRING","ContentEntityTypeInterface",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n        ",124],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","entityManager",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getBundleInfo",125],"(",["T_VARIABLE","$entity_type",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","id",125],"(",")",")",["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$bundle",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$bundle_info",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n          ",125],["T_FOREACH","foreach",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","entityManager",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getFieldDefinitions",126],"(",["T_VARIABLE","$entity_type",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","id",126],"(",")",",",["T_WHITESPACE"," ",126],["T_VARIABLE","$bundle",126],")",["T_WHITESPACE"," ",126],["T_AS","as",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$field_definition",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$relation_uri",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getRelationUri",127],"(",["T_VARIABLE","$entity_type",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","id",127],"(",")",",",["T_WHITESPACE"," ",127],["T_VARIABLE","$bundle",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$field_definition",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getName",127],"(",")",",",["T_WHITESPACE"," ",127],["T_VARIABLE","$context",127],")",";",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$data",128],"[",["T_VARIABLE","$relation_uri",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_WHITESPACE","\n              ",128],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$entity_type",129],",",["T_WHITESPACE","\n              ",129],["T_CONSTANT_ENCAPSED_STRING","'bundle'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$bundle",130],",",["T_WHITESPACE","\n              ",130],["T_CONSTANT_ENCAPSED_STRING","'field_name'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$field_definition",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getName",131],"(",")",",",["T_WHITESPACE","\n            ",131],")",";",["T_WHITESPACE","\n          ",132],"}",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n      ",134],"}",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n    ",136],["T_COMMENT","\/\/ These URIs only change when field info changes, so cache it permanently\n",137],["T_WHITESPACE","    ",138],["T_COMMENT","\/\/ and only clear it when the fields cache is cleared.\n",138],["T_WHITESPACE","    ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","cache",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","set",139],"(",["T_CONSTANT_ENCAPSED_STRING","'rest:links:relations'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$data",139],",",["T_WHITESPACE"," ",139],["T_STRING","Cache",139],["T_DOUBLE_COLON","::",139],["T_STRING","PERMANENT",139],",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_field_info'",139],")",")",";",["T_WHITESPACE","\n  ",139],"}",["T_WHITESPACE","\n\n",140],"}",["T_WHITESPACE","\n",142]]
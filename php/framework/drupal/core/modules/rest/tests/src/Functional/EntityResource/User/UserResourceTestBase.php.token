[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Functional",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EntityResource",3],["T_NS_SEPARATOR","\\",3],["T_STRING","User",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Url",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","rest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Functional",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityResource",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityResourceTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","user",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","User",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","GuzzleHttp",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RequestOptions",8],";",["T_WHITESPACE","\n\n",8],["T_ABSTRACT","abstract",10],["T_WHITESPACE"," ",10],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","UserResourceTestBase",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","EntityResourceTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",12],["T_WHITESPACE","\n  ",14],["T_PUBLIC","public",15],["T_WHITESPACE"," ",15],["T_STATIC","static",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$modules",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",15],"]",";",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",17],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$entityTypeId",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'user'",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_STATIC","static",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$patchProtectedFieldNames",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[",["T_WHITESPACE","\n    ",25],["T_CONSTANT_ENCAPSED_STRING","'changed'",26],",",["T_WHITESPACE","\n  ",26],"]",";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\user\\UserInterface\n   *\/",29],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$entity",32],";",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",34],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_STATIC","static",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$labelFieldName",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'name'",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_STATIC","static",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$firstCreatedEntityId",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_LNUMBER","4",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",44],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_STATIC","static",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$secondCreatedEntityId",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","5",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",49],["T_WHITESPACE","\n  ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","setUpAuthorization",52],"(",["T_VARIABLE","$method",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_SWITCH","switch",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$method",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n      ",53],["T_CASE","case",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'GET'",54],":",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","grantPermissionsToTestedRole",55],"(","[",["T_CONSTANT_ENCAPSED_STRING","'access user profiles'",55],"]",")",";",["T_WHITESPACE","\n        ",55],["T_BREAK","break",56],";",["T_WHITESPACE","\n      ",56],["T_CASE","case",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'POST'",57],":",["T_WHITESPACE","\n      ",57],["T_CASE","case",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'PATCH'",58],":",["T_WHITESPACE","\n      ",58],["T_CASE","case",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'DELETE'",59],":",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","grantPermissionsToTestedRole",60],"(","[",["T_CONSTANT_ENCAPSED_STRING","'administer users'",60],"]",")",";",["T_WHITESPACE","\n        ",60],["T_BREAK","break",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","createEntity",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_COMMENT","\/\/ Create a \"Llama\" user.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$user",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","User",70],["T_DOUBLE_COLON","::",70],["T_STRING","create",70],"(","[",["T_CONSTANT_ENCAPSED_STRING","'created'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_LNUMBER","123456789",70],"]",")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$user",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setUsername",71],"(",["T_CONSTANT_ENCAPSED_STRING","'Llama'",71],")",["T_WHITESPACE","\n      ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","setChangedTime",72],"(",["T_LNUMBER","123456789",72],")",["T_WHITESPACE","\n      ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","activate",73],"(",")",["T_WHITESPACE","\n      ",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","save",74],"(",")",";",["T_WHITESPACE","\n\n    ",74],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$user",76],";",["T_WHITESPACE","\n  ",76],"}",["T_WHITESPACE","\n\n  ",77],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",79],["T_WHITESPACE","\n  ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","getExpectedNormalizedEntity",82],"(",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n    ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],"[",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'uid'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],"[",["T_WHITESPACE","\n        ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'3'",85],"]",",",["T_WHITESPACE","\n      ",85],"]",",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'uuid'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],"[",["T_WHITESPACE","\n        ",87],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","entity",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","uuid",88],"(",")","]",",",["T_WHITESPACE","\n      ",88],"]",",",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'langcode'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],"[",["T_WHITESPACE","\n        ",90],"[",["T_WHITESPACE","\n          ",91],["T_CONSTANT_ENCAPSED_STRING","'value'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'en'",92],",",["T_WHITESPACE","\n        ",92],"]",",",["T_WHITESPACE","\n      ",93],"]",",",["T_WHITESPACE","\n      ",94],["T_CONSTANT_ENCAPSED_STRING","'name'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],"[",["T_WHITESPACE","\n        ",95],"[",["T_WHITESPACE","\n          ",96],["T_CONSTANT_ENCAPSED_STRING","'value'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'Llama'",97],",",["T_WHITESPACE","\n        ",97],"]",",",["T_WHITESPACE","\n      ",98],"]",",",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'created'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],"[",["T_WHITESPACE","\n        ",100],"[",["T_WHITESPACE","\n          ",101],["T_CONSTANT_ENCAPSED_STRING","'value'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'123456789'",102],",",["T_WHITESPACE","\n        ",102],"]",",",["T_WHITESPACE","\n      ",103],"]",",",["T_WHITESPACE","\n      ",104],["T_CONSTANT_ENCAPSED_STRING","'changed'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],"[",["T_WHITESPACE","\n        ",105],"[",["T_WHITESPACE","\n          ",106],["T_CONSTANT_ENCAPSED_STRING","'value'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'123456789'",107],",",["T_WHITESPACE","\n        ",107],"]",",",["T_WHITESPACE","\n      ",108],"]",",",["T_WHITESPACE","\n      ",109],["T_CONSTANT_ENCAPSED_STRING","'default_langcode'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],"[",["T_WHITESPACE","\n        ",110],"[",["T_WHITESPACE","\n          ",111],["T_CONSTANT_ENCAPSED_STRING","'value'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_STRING","TRUE",112],",",["T_WHITESPACE","\n        ",112],"]",",",["T_WHITESPACE","\n      ",113],"]",",",["T_WHITESPACE","\n    ",114],"]",";",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n  ",116],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",118],["T_WHITESPACE","\n  ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getNormalizedPostEntity",121],"(",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n    ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],"[",["T_WHITESPACE","\n      ",122],["T_CONSTANT_ENCAPSED_STRING","'name'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],"[",["T_WHITESPACE","\n        ",123],"[",["T_WHITESPACE","\n          ",124],["T_CONSTANT_ENCAPSED_STRING","'value'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'Dramallama '",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","randomMachineName",125],"(",")",",",["T_WHITESPACE","\n        ",125],"]",",",["T_WHITESPACE","\n      ",126],"]",",",["T_WHITESPACE","\n    ",127],"]",";",["T_WHITESPACE","\n  ",128],"}",["T_WHITESPACE","\n\n  ",129],["T_DOC_COMMENT","\/**\n   * Tests PATCHing security-sensitive base fields of the logged in account.\n   *\/",131],["T_WHITESPACE","\n  ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","testPatchDxForSecuritySensitiveBaseFields",134],"(",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n    ",134],["T_COMMENT","\/\/ The anonymous user is never allowed to modify itself.\n",135],["T_WHITESPACE","    ",136],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_STATIC","static",136],["T_DOUBLE_COLON","::",136],["T_VARIABLE","$auth",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n      ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","markTestSkipped",137],"(",")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","initAuthentication",140],"(",")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","provisionEntityResource",141],"(",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","setUpAuthorization",142],"(",["T_CONSTANT_ENCAPSED_STRING","'PATCH'",142],")",";",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\UserInterface $user *\/",144],["T_WHITESPACE","\n    ",144],["T_VARIABLE","$user",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STATIC","static",145],["T_DOUBLE_COLON","::",145],["T_VARIABLE","$auth",145],["T_WHITESPACE"," ",145],"?",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","account",145],["T_WHITESPACE"," ",145],":",["T_WHITESPACE"," ",145],["T_STRING","User",145],["T_DOUBLE_COLON","::",145],["T_STRING","load",145],"(",["T_LNUMBER","0",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$original_normalization",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","array_diff_key",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","serializer",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","normalize",146],"(",["T_VARIABLE","$user",146],",",["T_WHITESPACE"," ",146],["T_STATIC","static",146],["T_DOUBLE_COLON","::",146],["T_VARIABLE","$format",146],")",",",["T_WHITESPACE"," ",146],"[",["T_CONSTANT_ENCAPSED_STRING","'changed'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_STRING","TRUE",146],"]",")",";",["T_WHITESPACE","\n\n\n    ",146],["T_COMMENT","\/\/ Since this test must be performed by the user that is being modified,\n",149],["T_WHITESPACE","    ",150],["T_COMMENT","\/\/ we cannot use $this->getUrl().\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$url",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$user",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","toUrl",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","setOption",151],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",151],",",["T_WHITESPACE"," ",151],"[",["T_CONSTANT_ENCAPSED_STRING","'_format'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_STATIC","static",151],["T_DOUBLE_COLON","::",151],["T_VARIABLE","$format",151],"]",")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$request_options",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],"[",["T_WHITESPACE","\n      ",152],["T_STRING","RequestOptions",153],["T_DOUBLE_COLON","::",153],["T_STRING","HEADERS",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_STATIC","static",153],["T_DOUBLE_COLON","::",153],["T_VARIABLE","$mimeType",153],"]",",",["T_WHITESPACE","\n    ",153],"]",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$request_options",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","array_merge_recursive",155],"(",["T_VARIABLE","$request_options",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getAuthenticationRequestOptions",155],"(",["T_CONSTANT_ENCAPSED_STRING","'PATCH'",155],")",")",";",["T_WHITESPACE","\n\n\n    ",155],["T_COMMENT","\/\/ Test case 1: changing email.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$normalization",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$original_normalization",159],";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$normalization",160],"[",["T_CONSTANT_ENCAPSED_STRING","'mail'",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],"[","[",["T_CONSTANT_ENCAPSED_STRING","'value'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'new-email@example.com'",160],"]","]",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$request_options",161],"[",["T_STRING","RequestOptions",161],["T_DOUBLE_COLON","::",161],["T_STRING","BODY",161],"]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","serializer",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","encode",161],"(",["T_VARIABLE","$normalization",161],",",["T_WHITESPACE"," ",161],["T_STATIC","static",161],["T_DOUBLE_COLON","::",161],["T_VARIABLE","$format",161],")",";",["T_WHITESPACE","\n\n\n    ",161],["T_COMMENT","\/\/ DX: 422 when changing email without providing the password.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$response",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","request",165],"(",["T_CONSTANT_ENCAPSED_STRING","'PATCH'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$url",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$request_options",165],")",";",["T_WHITESPACE","\n    ",165],["T_COMMENT","\/\/ @todo use this commented line instead of the 3 lines thereafter once https:\/\/www.drupal.org\/node\/2813755 lands.\n",166],["T_WHITESPACE","    ",167],["T_COMMENT","\/\/ $this->assertResourceErrorResponse(422, \"Unprocessable Entity: validation failed.\\nmail: Your current password is missing or incorrect; it's required to change the <em class=\\\"placeholder\\\">Email<\/em>.\\n\", $response);\n",167],["T_WHITESPACE","    ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertSame",168],"(",["T_LNUMBER","422",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$response",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getStatusCode",168],"(",")",")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertSame",169],"(","[",["T_STATIC","static",169],["T_DOUBLE_COLON","::",169],["T_VARIABLE","$mimeType",169],"]",",",["T_WHITESPACE"," ",169],["T_VARIABLE","$response",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getHeader",169],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",169],")",")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","assertSame",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","serializer",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","encode",170],"(","[",["T_CONSTANT_ENCAPSED_STRING","'message'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","\"Unprocessable Entity: validation failed.\\nmail: Your current password is missing or incorrect; it's required to change the <em class=\\\"placeholder\\\">Email<\/em>.\\n\"",170],"]",",",["T_WHITESPACE"," ",170],["T_STATIC","static",170],["T_DOUBLE_COLON","::",170],["T_VARIABLE","$format",170],")",",",["T_WHITESPACE"," ",170],["T_STRING_CAST","(string)",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$response",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getBody",170],"(",")",")",";",["T_WHITESPACE","\n\n\n    ",170],["T_VARIABLE","$normalization",173],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",173],"]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],"[","[",["T_CONSTANT_ENCAPSED_STRING","'existing'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'wrong'",173],"]","]",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$request_options",174],"[",["T_STRING","RequestOptions",174],["T_DOUBLE_COLON","::",174],["T_STRING","BODY",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","serializer",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","encode",174],"(",["T_VARIABLE","$normalization",174],",",["T_WHITESPACE"," ",174],["T_STATIC","static",174],["T_DOUBLE_COLON","::",174],["T_VARIABLE","$format",174],")",";",["T_WHITESPACE","\n\n    ",174],["T_COMMENT","\/\/ DX: 422 when changing email while providing a wrong password.\n",176],["T_WHITESPACE","    ",177],["T_VARIABLE","$response",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","request",177],"(",["T_CONSTANT_ENCAPSED_STRING","'PATCH'",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$url",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$request_options",177],")",";",["T_WHITESPACE","\n    ",177],["T_COMMENT","\/\/ @todo use this commented line instead of the 3 lines thereafter once https:\/\/www.drupal.org\/node\/2813755 lands.\n",178],["T_WHITESPACE","    ",179],["T_COMMENT","\/\/ $this->assertResourceErrorResponse(422, \"Unprocessable Entity: validation failed.\\nmail: Your current password is missing or incorrect; it's required to change the <em class=\\\"placeholder\\\">Email<\/em>.\\n\", $response);\n",179],["T_WHITESPACE","    ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertSame",180],"(",["T_LNUMBER","422",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$response",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getStatusCode",180],"(",")",")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","assertSame",181],"(","[",["T_STATIC","static",181],["T_DOUBLE_COLON","::",181],["T_VARIABLE","$mimeType",181],"]",",",["T_WHITESPACE"," ",181],["T_VARIABLE","$response",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getHeader",181],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",181],")",")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","assertSame",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","serializer",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","encode",182],"(","[",["T_CONSTANT_ENCAPSED_STRING","'message'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","\"Unprocessable Entity: validation failed.\\nmail: Your current password is missing or incorrect; it's required to change the <em class=\\\"placeholder\\\">Email<\/em>.\\n\"",182],"]",",",["T_WHITESPACE"," ",182],["T_STATIC","static",182],["T_DOUBLE_COLON","::",182],["T_VARIABLE","$format",182],")",",",["T_WHITESPACE"," ",182],["T_STRING_CAST","(string)",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$response",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getBody",182],"(",")",")",";",["T_WHITESPACE","\n\n\n    ",182],["T_VARIABLE","$normalization",185],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",185],"]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],"[","[",["T_CONSTANT_ENCAPSED_STRING","'existing'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","account",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","passRaw",185],"]","]",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$request_options",186],"[",["T_STRING","RequestOptions",186],["T_DOUBLE_COLON","::",186],["T_STRING","BODY",186],"]",["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","serializer",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","encode",186],"(",["T_VARIABLE","$normalization",186],",",["T_WHITESPACE"," ",186],["T_STATIC","static",186],["T_DOUBLE_COLON","::",186],["T_VARIABLE","$format",186],")",";",["T_WHITESPACE","\n\n\n    ",186],["T_COMMENT","\/\/ 200 for well-formed request.\n",189],["T_WHITESPACE","    ",190],["T_VARIABLE","$response",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","request",190],"(",["T_CONSTANT_ENCAPSED_STRING","'PATCH'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$url",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$request_options",190],")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","assertResourceResponse",191],"(",["T_LNUMBER","200",191],",",["T_WHITESPACE"," ",191],["T_STRING","FALSE",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$response",191],")",";",["T_WHITESPACE","\n\n\n    ",191],["T_COMMENT","\/\/ Test case 2: changing password.\n",194],["T_WHITESPACE","    ",195],["T_VARIABLE","$normalization",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$original_normalization",195],";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$new_password",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","randomString",196],"(",")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$normalization",197],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",197],"]",["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],"[","[",["T_CONSTANT_ENCAPSED_STRING","'value'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$new_password",197],"]","]",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$request_options",198],"[",["T_STRING","RequestOptions",198],["T_DOUBLE_COLON","::",198],["T_STRING","BODY",198],"]",["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","serializer",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","encode",198],"(",["T_VARIABLE","$normalization",198],",",["T_WHITESPACE"," ",198],["T_STATIC","static",198],["T_DOUBLE_COLON","::",198],["T_VARIABLE","$format",198],")",";",["T_WHITESPACE","\n\n\n    ",198],["T_COMMENT","\/\/ DX: 422 when changing password without providing the current password.\n",201],["T_WHITESPACE","    ",202],["T_VARIABLE","$response",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","request",202],"(",["T_CONSTANT_ENCAPSED_STRING","'PATCH'",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$url",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$request_options",202],")",";",["T_WHITESPACE","\n    ",202],["T_COMMENT","\/\/ @todo use this commented line instead of the 3 lines thereafter once https:\/\/www.drupal.org\/node\/2813755 lands.\n",203],["T_WHITESPACE","    ",204],["T_COMMENT","\/\/ $this->assertResourceErrorResponse(422, \"Unprocessable Entity: validation failed.\\npass: Your current password is missing or incorrect; it's required to change the <em class=\\\"placeholder\\\">Password<\/em>.\\n\", $response);\n",204],["T_WHITESPACE","    ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","assertSame",205],"(",["T_LNUMBER","422",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$response",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getStatusCode",205],"(",")",")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","assertSame",206],"(","[",["T_STATIC","static",206],["T_DOUBLE_COLON","::",206],["T_VARIABLE","$mimeType",206],"]",",",["T_WHITESPACE"," ",206],["T_VARIABLE","$response",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getHeader",206],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",206],")",")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","assertSame",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","serializer",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","encode",207],"(","[",["T_CONSTANT_ENCAPSED_STRING","'message'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","\"Unprocessable Entity: validation failed.\\npass: Your current password is missing or incorrect; it's required to change the <em class=\\\"placeholder\\\">Password<\/em>.\\n\"",207],"]",",",["T_WHITESPACE"," ",207],["T_STATIC","static",207],["T_DOUBLE_COLON","::",207],["T_VARIABLE","$format",207],")",",",["T_WHITESPACE"," ",207],["T_STRING_CAST","(string)",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$response",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getBody",207],"(",")",")",";",["T_WHITESPACE","\n\n\n    ",207],["T_VARIABLE","$normalization",210],"[",["T_CONSTANT_ENCAPSED_STRING","'pass'",210],"]","[",["T_LNUMBER","0",210],"]","[",["T_CONSTANT_ENCAPSED_STRING","'existing'",210],"]",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","account",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","pass_raw",210],";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$request_options",211],"[",["T_STRING","RequestOptions",211],["T_DOUBLE_COLON","::",211],["T_STRING","BODY",211],"]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","serializer",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","encode",211],"(",["T_VARIABLE","$normalization",211],",",["T_WHITESPACE"," ",211],["T_STATIC","static",211],["T_DOUBLE_COLON","::",211],["T_VARIABLE","$format",211],")",";",["T_WHITESPACE","\n\n\n    ",211],["T_COMMENT","\/\/ 200 for well-formed request.\n",214],["T_WHITESPACE","    ",215],["T_VARIABLE","$response",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","request",215],"(",["T_CONSTANT_ENCAPSED_STRING","'PATCH'",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$url",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$request_options",215],")",";",["T_WHITESPACE","\n    ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","assertResourceResponse",216],"(",["T_LNUMBER","200",216],",",["T_WHITESPACE"," ",216],["T_STRING","FALSE",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$response",216],")",";",["T_WHITESPACE","\n\n\n    ",216],["T_COMMENT","\/\/ Verify that we can log in with the new password.\n",219],["T_WHITESPACE","    ",220],["T_VARIABLE","$request_body",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],"[",["T_WHITESPACE","\n      ",220],["T_CONSTANT_ENCAPSED_STRING","'name'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$user",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getAccountName",221],"(",")",",",["T_WHITESPACE","\n      ",221],["T_CONSTANT_ENCAPSED_STRING","'pass'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$new_password",222],",",["T_WHITESPACE","\n    ",222],"]",";",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$request_options",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],"[",["T_WHITESPACE","\n      ",224],["T_STRING","RequestOptions",225],["T_DOUBLE_COLON","::",225],["T_STRING","HEADERS",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],"[","]",",",["T_WHITESPACE","\n      ",225],["T_STRING","RequestOptions",226],["T_DOUBLE_COLON","::",226],["T_STRING","BODY",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","serializer",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","encode",226],"(",["T_VARIABLE","$request_body",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'json'",226],")",",",["T_WHITESPACE","\n    ",226],"]",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$response",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","httpClient",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","request",228],"(",["T_CONSTANT_ENCAPSED_STRING","'POST'",228],",",["T_WHITESPACE"," ",228],["T_STRING","Url",228],["T_DOUBLE_COLON","::",228],["T_STRING","fromRoute",228],"(",["T_CONSTANT_ENCAPSED_STRING","'user.login.http'",228],")",["T_OBJECT_OPERATOR","->",228],["T_STRING","setRouteParameter",228],"(",["T_CONSTANT_ENCAPSED_STRING","'_format'",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'json'",228],")",["T_OBJECT_OPERATOR","->",228],["T_STRING","toString",228],"(",")",",",["T_WHITESPACE"," ",228],["T_VARIABLE","$request_options",228],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","assertSame",229],"(",["T_LNUMBER","200",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$response",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getStatusCode",229],"(",")",")",";",["T_WHITESPACE","\n  ",229],"}",["T_WHITESPACE","\n\n",230],"}",["T_WHITESPACE","\n",232]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Functional",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EntityResource",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Block",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","block",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Block",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","rest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Functional",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityResource",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityResourceTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_ABSTRACT","abstract",8],["T_WHITESPACE"," ",8],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","BlockResourceTestBase",8],["T_WHITESPACE"," ",8],["T_EXTENDS","extends",8],["T_WHITESPACE"," ",8],["T_STRING","EntityResourceTestBase",8],["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\n  ",8],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",10],["T_WHITESPACE","\n  ",12],["T_PUBLIC","public",13],["T_WHITESPACE"," ",13],["T_STATIC","static",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$modules",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],"[",["T_CONSTANT_ENCAPSED_STRING","'block'",13],"]",";",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_STATIC","static",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$entityTypeId",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'block'",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\block\\BlockInterface\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$entity",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",25],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","setUpAuthorization",28],"(",["T_VARIABLE","$method",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_SWITCH","switch",29],["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$method",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n      ",29],["T_CASE","case",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'GET'",30],":",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","entity",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","setVisibilityConfig",31],"(",["T_CONSTANT_ENCAPSED_STRING","'user_role'",31],",",["T_WHITESPACE"," ",31],"[","]",")",["T_OBJECT_OPERATOR","->",31],["T_STRING","save",31],"(",")",";",["T_WHITESPACE","\n        ",31],["T_BREAK","break",32],";",["T_WHITESPACE","\n      ",32],["T_CASE","case",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'POST'",33],":",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","grantPermissionsToTestedRole",34],"(","[",["T_CONSTANT_ENCAPSED_STRING","'administer blocks'",34],"]",")",";",["T_WHITESPACE","\n        ",34],["T_BREAK","break",35],";",["T_WHITESPACE","\n      ",35],["T_CASE","case",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'PATCH'",36],":",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","grantPermissionsToTestedRole",37],"(","[",["T_CONSTANT_ENCAPSED_STRING","'administer blocks'",37],"]",")",";",["T_WHITESPACE","\n        ",37],["T_BREAK","break",38],";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","createEntity",45],"(",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$block",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Block",46],["T_DOUBLE_COLON","::",46],["T_STRING","create",46],"(","[",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'plugin'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'llama_block'",47],",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'region'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'header'",48],",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'id'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'llama'",49],",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'theme'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'classy'",50],",",["T_WHITESPACE","\n    ",50],"]",")",";",["T_WHITESPACE","\n    ",51],["T_COMMENT","\/\/ All blocks can be viewed by the anonymous user by default. An interesting\n",52],["T_WHITESPACE","    ",53],["T_COMMENT","\/\/ side effect of this is that any anonymous user is also able to read the\n",53],["T_WHITESPACE","    ",54],["T_COMMENT","\/\/ corresponding block config entity via REST, even if an authentication\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/ provider is configured for the block config entity REST resource! In\n",55],["T_WHITESPACE","    ",56],["T_COMMENT","\/\/ other words: Block entities do not distinguish between 'view' as in\n",56],["T_WHITESPACE","    ",57],["T_COMMENT","\/\/ \"render on a page\" and 'view' as in \"read the configuration\".\n",57],["T_WHITESPACE","    ",58],["T_COMMENT","\/\/ This prevents that.\n",58],["T_WHITESPACE","    ",59],["T_COMMENT","\/\/ @todo Fix this in https:\/\/www.drupal.org\/node\/2820315.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$block",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","setVisibilityConfig",60],"(",["T_CONSTANT_ENCAPSED_STRING","'user_role'",60],",",["T_WHITESPACE"," ",60],"[",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'id'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'user_role'",61],",",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'roles'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],"[",["T_CONSTANT_ENCAPSED_STRING","'non-existing-role'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'non-existing-role'",62],"]",",",["T_WHITESPACE","\n      ",62],["T_CONSTANT_ENCAPSED_STRING","'negate'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_STRING","FALSE",63],",",["T_WHITESPACE","\n      ",63],["T_CONSTANT_ENCAPSED_STRING","'context_mapping'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],"[",["T_WHITESPACE","\n        ",64],["T_CONSTANT_ENCAPSED_STRING","'user'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'@user.current_user_context:current_user'",65],",",["T_WHITESPACE","\n      ",65],"]",",",["T_WHITESPACE","\n    ",66],"]",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$block",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","save",68],"(",")",";",["T_WHITESPACE","\n\n    ",68],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$block",70],";",["T_WHITESPACE","\n  ",70],"}",["T_WHITESPACE","\n\n  ",71],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",73],["T_WHITESPACE","\n  ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","getExpectedNormalizedEntity",76],"(",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$normalization",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],"[",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'uuid'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","entity",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","uuid",78],"(",")",",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'id'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'llama'",79],",",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'weight'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_STRING","NULL",80],",",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'langcode'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'en'",81],",",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'status'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_STRING","TRUE",82],",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],"[",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'theme'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],"[",["T_WHITESPACE","\n          ",84],["T_CONSTANT_ENCAPSED_STRING","'classy'",85],",",["T_WHITESPACE","\n        ",85],"]",",",["T_WHITESPACE","\n      ",86],"]",",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'theme'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'classy'",88],",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'region'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'header'",89],",",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'provider'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_STRING","NULL",90],",",["T_WHITESPACE","\n      ",90],["T_CONSTANT_ENCAPSED_STRING","'plugin'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'llama_block'",91],",",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'settings'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],"[",["T_WHITESPACE","\n        ",92],["T_CONSTANT_ENCAPSED_STRING","'id'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'broken'",93],",",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'label'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","''",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'provider'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'core'",95],",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'label_display'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'visible'",96],",",["T_WHITESPACE","\n      ",96],"]",",",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'visibility'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],"[","]",",",["T_WHITESPACE","\n    ",98],"]",";",["T_WHITESPACE","\n\n    ",99],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$normalization",101],";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",104],["T_WHITESPACE","\n  ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getNormalizedPostEntity",107],"(",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_COMMENT","\/\/ @todo Update in https:\/\/www.drupal.org\/node\/2300677.\n",108],["T_WHITESPACE","  ",109],"}",["T_WHITESPACE","\n\n  ",109],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",111],["T_WHITESPACE","\n  ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getExpectedCacheContexts",114],"(",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n    ",114],["T_COMMENT","\/\/ @see ::createEntity()\n",115],["T_WHITESPACE","    ",116],["T_RETURN","return",116],["T_WHITESPACE"," ",116],"[","]",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",119],["T_WHITESPACE","\n  ",121],["T_PROTECTED","protected",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","getExpectedCacheTags",122],"(",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_COMMENT","\/\/ Because the 'user.permissions' cache context is missing, the cache tag\n",123],["T_WHITESPACE","    ",124],["T_COMMENT","\/\/ for the anonymous user role is never added automatically.\n",124],["T_WHITESPACE","    ",125],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_STRING","array_filter",125],"(",["T_STRING","parent",125],["T_DOUBLE_COLON","::",125],["T_STRING","getExpectedCacheTags",125],"(",")",",",["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$tag",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$tag",126],["T_WHITESPACE"," ",126],["T_IS_NOT_IDENTICAL","!==",126],["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'config:user.role.anonymous'",126],";",["T_WHITESPACE","\n    ",126],"}",")",";",["T_WHITESPACE","\n  ",127],"}",["T_WHITESPACE","\n\n",128],"}",["T_WHITESPACE","\n",130]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Serialization",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Json",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityStorageInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Routing",7],["T_NS_SEPARATOR","\\",7],["T_STRING","RouteMatch",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTestBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","rest",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Plugin",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceBase",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","rest",10],["T_NS_SEPARATOR","\\",10],["T_STRING","RequestHandler",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","rest",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResourceResponse",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","rest",12],["T_NS_SEPARATOR","\\",12],["T_STRING","RestResourceConfigInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Prophecy",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Argument",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Prophecy",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Prophecy",14],["T_NS_SEPARATOR","\\",14],["T_STRING","MethodProphecy",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Request",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Routing",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Route",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Test REST RequestHandler controller logic.\n *\n * @group rest\n * @coversDefaultClass \\Drupal\\rest\\RequestHandler\n *\/",18],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","RequestHandlerTest",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","KernelTestBase",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\rest\\RequestHandler\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$requestHandler",29],";",["T_WHITESPACE","\n\n  ",29],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_STATIC","static",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$modules",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[",["T_CONSTANT_ENCAPSED_STRING","'serialization'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'rest'",31],"]",";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * The entity storage.\n   *\n   * @var \\Prophecy\\Prophecy\\ObjectProphecy\n   *\/",33],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entityStorage",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","setUp",43],"(",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_STRING","parent",44],["T_DOUBLE_COLON","::",44],["T_STRING","setUp",44],"(",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","entityStorage",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","prophesize",45],"(",["T_STRING","EntityStorageInterface",45],["T_DOUBLE_COLON","::",45],["T_CLASS","class",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","requestHandler",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_NEW","new",46],["T_WHITESPACE"," ",46],["T_STRING","RequestHandler",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","entityStorage",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","reveal",46],"(",")",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","requestHandler",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","setContainer",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","container",47],")",";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Assert some basic handler method logic.\n   *\n   * @covers ::handle\n   *\/",50],["T_WHITESPACE","\n  ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","testBaseHandler",55],"(",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$request",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_NEW","new",56],["T_WHITESPACE"," ",56],["T_STRING","Request",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$route_match",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","RouteMatch",57],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",57],",",["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","Route",57],"(",["T_CONSTANT_ENCAPSED_STRING","'\/rest\/test'",57],",",["T_WHITESPACE"," ",57],"[",["T_CONSTANT_ENCAPSED_STRING","'_rest_resource_config'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'restplugin'",57],"]",",",["T_WHITESPACE"," ",57],"[",["T_CONSTANT_ENCAPSED_STRING","'_format'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'json'",57],"]",")",")",";",["T_WHITESPACE","\n\n    ",57],["T_VARIABLE","$resource",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","prophesize",59],"(",["T_STRING","StubRequestHandlerResourcePlugin",59],["T_DOUBLE_COLON","::",59],["T_CLASS","class",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$resource",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_STRING","NULL",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$request",60],")",["T_WHITESPACE","\n      ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","shouldBeCalled",61],"(",")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Setup the configuration.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$config",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","prophesize",64],"(",["T_STRING","RestResourceConfigInterface",64],["T_DOUBLE_COLON","::",64],["T_CLASS","class",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$config",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getResourcePlugin",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","willReturn",65],"(",["T_VARIABLE","$resource",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","reveal",65],"(",")",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$config",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getCacheContexts",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","willReturn",66],"(","[","]",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$config",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getCacheTags",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","willReturn",67],"(","[","]",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$config",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getCacheMaxAge",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","willReturn",68],"(",["T_LNUMBER","12",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","entityStorage",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","load",69],"(",["T_CONSTANT_ENCAPSED_STRING","'restplugin'",69],")",["T_OBJECT_OPERATOR","->",69],["T_STRING","willReturn",69],"(",["T_VARIABLE","$config",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","reveal",69],"(",")",")",";",["T_WHITESPACE","\n\n    ",69],["T_COMMENT","\/\/ Response returns NULL this time because response from plugin is not\n",71],["T_WHITESPACE","    ",72],["T_COMMENT","\/\/ a ResourceResponse so it is passed through directly.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$response",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","requestHandler",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","handle",73],"(",["T_VARIABLE","$route_match",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$request",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertEquals",74],"(",["T_STRING","NULL",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$response",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Response will return a ResourceResponse this time.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$response",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_NEW","new",77],["T_WHITESPACE"," ",77],["T_STRING","ResourceResponse",77],"(","[","]",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$resource",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","get",78],"(",["T_STRING","NULL",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$request",78],")",["T_WHITESPACE","\n      ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","willReturn",79],"(",["T_VARIABLE","$response",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$handler_response",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","requestHandler",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","handle",80],"(",["T_VARIABLE","$route_match",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$request",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertEquals",81],"(",["T_VARIABLE","$response",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$handler_response",81],")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ We will call the patch method this time.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$route_match",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","RouteMatch",84],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",84],",",["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","Route",84],"(",["T_CONSTANT_ENCAPSED_STRING","'\/rest\/test'",84],",",["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'_rest_resource_config'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'restplugin'",84],"]",",",["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'_content_type_format'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'json'",84],"]",")",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$request",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","setMethod",85],"(",["T_CONSTANT_ENCAPSED_STRING","'PATCH'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$response",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_STRING","ResourceResponse",86],"(","[","]",")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$resource",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","patch",87],"(",["T_STRING","NULL",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$request",87],")",["T_WHITESPACE","\n      ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","shouldBeCalledTimes",88],"(",["T_LNUMBER","1",88],")",["T_WHITESPACE","\n      ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","willReturn",89],"(",["T_VARIABLE","$response",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$handler_response",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","requestHandler",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","handle",90],"(",["T_VARIABLE","$route_match",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$request",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertEquals",91],"(",["T_VARIABLE","$response",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$handler_response",91],")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * Test that given structured data, the request handler will serialize it.\n   *\n   * @dataProvider providerTestSerialization\n   * @covers ::handle\n   *\/",94],["T_WHITESPACE","\n  ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","testSerialization",100],"(",["T_VARIABLE","$data",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$expected_response",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","FALSE",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$request",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","Request",101],"(",")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$route_match",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","RouteMatch",102],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",102],",",["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","Route",102],"(",["T_CONSTANT_ENCAPSED_STRING","'\/rest\/test'",102],",",["T_WHITESPACE"," ",102],"[",["T_CONSTANT_ENCAPSED_STRING","'_rest_resource_config'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'restplugin'",102],"]",",",["T_WHITESPACE"," ",102],"[",["T_CONSTANT_ENCAPSED_STRING","'_format'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'json'",102],"]",")",")",";",["T_WHITESPACE","\n\n    ",102],["T_VARIABLE","$resource",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","prophesize",104],"(",["T_STRING","StubRequestHandlerResourcePlugin",104],["T_DOUBLE_COLON","::",104],["T_CLASS","class",104],")",";",["T_WHITESPACE","\n\n    ",104],["T_COMMENT","\/\/ Mock the configuration.\n",106],["T_WHITESPACE","    ",107],["T_VARIABLE","$config",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","prophesize",107],"(",["T_STRING","RestResourceConfigInterface",107],["T_DOUBLE_COLON","::",107],["T_CLASS","class",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$config",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getResourcePlugin",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","willReturn",108],"(",["T_VARIABLE","$resource",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","reveal",108],"(",")",")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$config",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getCacheContexts",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","willReturn",109],"(","[","]",")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$config",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getCacheTags",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","willReturn",110],"(","[","]",")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$config",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getCacheMaxAge",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","willReturn",111],"(",["T_LNUMBER","12",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","entityStorage",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","load",112],"(",["T_CONSTANT_ENCAPSED_STRING","'restplugin'",112],")",["T_OBJECT_OPERATOR","->",112],["T_STRING","willReturn",112],"(",["T_VARIABLE","$config",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","reveal",112],"(",")",")",";",["T_WHITESPACE","\n\n    ",112],["T_VARIABLE","$response",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","ResourceResponse",114],"(",["T_VARIABLE","$data",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$resource",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","get",115],"(",["T_STRING","NULL",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$request",115],")",["T_WHITESPACE","\n      ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","willReturn",116],"(",["T_VARIABLE","$response",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$handler_response",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","requestHandler",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","handle",117],"(",["T_VARIABLE","$route_match",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$request",117],")",";",["T_WHITESPACE","\n    ",117],["T_COMMENT","\/\/ Content is a serialized version of the data we provided.\n",118],["T_WHITESPACE","    ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertEquals",119],"(",["T_VARIABLE","$expected_response",119],["T_WHITESPACE"," ",119],["T_IS_NOT_IDENTICAL","!==",119],["T_WHITESPACE"," ",119],["T_STRING","FALSE",119],["T_WHITESPACE"," ",119],"?",["T_WHITESPACE"," ",119],["T_VARIABLE","$expected_response",119],["T_WHITESPACE"," ",119],":",["T_WHITESPACE"," ",119],["T_STRING","json_encode",119],"(",["T_VARIABLE","$data",119],")",",",["T_WHITESPACE"," ",119],["T_VARIABLE","$handler_response",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getContent",119],"(",")",")",";",["T_WHITESPACE","\n  ",119],"}",["T_WHITESPACE","\n\n  ",120],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","providerTestSerialization",122],"(",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],"[",["T_WHITESPACE","\n      ",123],["T_COMMENT","\/\/ The default data for \\Drupal\\rest\\ResourceResponse.\n",124],["T_WHITESPACE","      ",125],"[",["T_STRING","NULL",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","''",125],"]",",",["T_WHITESPACE","\n      ",125],"[",["T_CONSTANT_ENCAPSED_STRING","''",126],"]",",",["T_WHITESPACE","\n      ",126],"[",["T_CONSTANT_ENCAPSED_STRING","'string'",127],"]",",",["T_WHITESPACE","\n      ",127],"[",["T_CONSTANT_ENCAPSED_STRING","'Complex \\ string $%^&@ with unicode \u00ce\u0091\u00ce\u0092\u00ce\u0093\u00ce\u0094\u00ce\u0095\u00ce\u0096\u00ce\u0097\u00ce\u0098\u00ce\u0099\u00ce\u009a\u00ce\u009b\u00ce\u009c\u00ce\u009d\u00ce\u009e\u00ce\u009f\u00ce\u00a3\u00e1\u00bd\u00a8'",128],"]",",",["T_WHITESPACE","\n      ",128],"[","[","]","]",",",["T_WHITESPACE","\n      ",129],"[","[",["T_CONSTANT_ENCAPSED_STRING","'test'",130],"]","]",",",["T_WHITESPACE","\n      ",130],"[","[",["T_CONSTANT_ENCAPSED_STRING","'test'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'foobar'",131],"]","]",",",["T_WHITESPACE","\n      ",131],"[",["T_STRING","TRUE",132],"]",",",["T_WHITESPACE","\n      ",132],"[",["T_STRING","FALSE",133],"]",",",["T_WHITESPACE","\n      ",133],["T_COMMENT","\/\/ @todo Not supported. https:\/\/www.drupal.org\/node\/2427811\n",134],["T_WHITESPACE","      ",135],["T_COMMENT","\/\/ [new \\stdClass()],\n",135],["T_WHITESPACE","      ",136],["T_COMMENT","\/\/ [(object) ['test' => 'foobar']],\n",136],["T_WHITESPACE","    ",137],"]",";",["T_WHITESPACE","\n  ",137],"}",["T_WHITESPACE","\n\n  ",138],["T_DOC_COMMENT","\/**\n   * @covers ::getResponseFormat\n   *\n   * Note this does *not* need to test formats being requested that are not\n   * accepted by the server, because the routing system would have already\n   * prevented those from reaching RequestHandler.\n   *\n   * @param string[] $methods\n   *   The HTTP methods to test.\n   * @param string[] $supported_formats\n   *   The supported formats for the REST route to be tested.\n   * @param string|false $request_format\n   *   The value for the ?_format URL query argument, if any.\n   * @param string[] $request_headers\n   *   The request headers to send, if any.\n   * @param string|null $request_body\n   *   The request body to send, if any.\n   * @param string|null $expected_response_content_type\n   *   The expected MIME type of the response, if any.\n   * @param string $expected_response_content\n   *   The expected content of the response.\n   *\n   * @dataProvider providerTestResponseFormat\n   *\/",140],["T_WHITESPACE","\n  ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","testResponseFormat",164],"(",["T_VARIABLE","$methods",164],",",["T_WHITESPACE"," ",164],["T_ARRAY","array",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$supported_formats",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$request_format",164],",",["T_WHITESPACE"," ",164],["T_ARRAY","array",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$request_headers",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$request_body",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$expected_response_content_type",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$expected_response_content",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$rest_config_name",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","randomMachineName",165],"(",")",";",["T_WHITESPACE","\n\n    ",165],["T_VARIABLE","$parameters",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],"[","]",";",["T_WHITESPACE","\n    ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$request_format",168],["T_WHITESPACE"," ",168],["T_IS_NOT_IDENTICAL","!==",168],["T_WHITESPACE"," ",168],["T_STRING","FALSE",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n      ",168],["T_VARIABLE","$parameters",169],"[",["T_CONSTANT_ENCAPSED_STRING","'_format'",169],"]",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$request_format",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_FOREACH","foreach",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$request_headers",172],["T_WHITESPACE"," ",172],["T_AS","as",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$key",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$value",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n      ",172],["T_UNSET","unset",173],"(",["T_VARIABLE","$request_headers",173],"[",["T_VARIABLE","$key",173],"]",")",";",["T_WHITESPACE","\n      ",173],["T_VARIABLE","$key",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","strtoupper",174],"(",["T_STRING","str_replace",174],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",174],",",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'_'",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$key",174],")",")",";",["T_WHITESPACE","\n      ",174],["T_VARIABLE","$request_headers",175],"[",["T_VARIABLE","$key",175],"]",["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$value",175],";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_FOREACH","foreach",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$methods",178],["T_WHITESPACE"," ",178],["T_AS","as",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$method",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n      ",178],["T_VARIABLE","$request",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","Request",179],["T_DOUBLE_COLON","::",179],["T_STRING","create",179],"(",["T_CONSTANT_ENCAPSED_STRING","'\/rest\/test'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$method",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$parameters",179],",",["T_WHITESPACE"," ",179],"[","]",",",["T_WHITESPACE"," ",179],"[","]",",",["T_WHITESPACE"," ",179],["T_VARIABLE","$request_headers",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$request_body",179],")",";",["T_WHITESPACE","\n      ",179],["T_VARIABLE","$route_requirement_key_format",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$request",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","isMethodSafe",180],"(",")",["T_WHITESPACE"," ",180],"?",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'_format'",180],["T_WHITESPACE"," ",180],":",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'_content_type_format'",180],";",["T_WHITESPACE","\n      ",180],["T_VARIABLE","$route_match",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_NEW","new",181],["T_WHITESPACE"," ",181],["T_STRING","RouteMatch",181],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",181],",",["T_WHITESPACE"," ",181],["T_NEW","new",181],["T_WHITESPACE"," ",181],["T_STRING","Route",181],"(",["T_CONSTANT_ENCAPSED_STRING","'\/rest\/test'",181],",",["T_WHITESPACE"," ",181],"[",["T_CONSTANT_ENCAPSED_STRING","'_rest_resource_config'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$rest_config_name",181],"]",",",["T_WHITESPACE"," ",181],"[",["T_VARIABLE","$route_requirement_key_format",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_STRING","implode",181],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$supported_formats",181],")","]",")",")",";",["T_WHITESPACE","\n\n      ",181],["T_VARIABLE","$resource",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","prophesize",183],"(",["T_STRING","StubRequestHandlerResourcePlugin",183],["T_DOUBLE_COLON","::",183],["T_CLASS","class",183],")",";",["T_WHITESPACE","\n\n      ",183],["T_COMMENT","\/\/ Mock the configuration.\n",185],["T_WHITESPACE","      ",186],["T_VARIABLE","$config",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","prophesize",186],"(",["T_STRING","RestResourceConfigInterface",186],["T_DOUBLE_COLON","::",186],["T_CLASS","class",186],")",";",["T_WHITESPACE","\n      ",186],["T_VARIABLE","$config",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getFormats",187],"(",["T_VARIABLE","$method",187],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","willReturn",187],"(",["T_VARIABLE","$supported_formats",187],")",";",["T_WHITESPACE","\n      ",187],["T_VARIABLE","$config",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getResourcePlugin",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","willReturn",188],"(",["T_VARIABLE","$resource",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","reveal",188],"(",")",")",";",["T_WHITESPACE","\n      ",188],["T_VARIABLE","$config",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getCacheContexts",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","willReturn",189],"(","[","]",")",";",["T_WHITESPACE","\n      ",189],["T_VARIABLE","$config",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getCacheTags",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","willReturn",190],"(","[","]",")",";",["T_WHITESPACE","\n      ",190],["T_VARIABLE","$config",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getCacheMaxAge",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","willReturn",191],"(",["T_LNUMBER","12",191],")",";",["T_WHITESPACE","\n      ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","entityStorage",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","load",192],"(",["T_VARIABLE","$rest_config_name",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","willReturn",192],"(",["T_VARIABLE","$config",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","reveal",192],"(",")",")",";",["T_WHITESPACE","\n\n      ",192],["T_COMMENT","\/\/ Mock the resource plugin.\n",194],["T_WHITESPACE","      ",195],["T_VARIABLE","$response",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_NEW","new",195],["T_WHITESPACE"," ",195],["T_STRING","ResourceResponse",195],"(",["T_VARIABLE","$method",195],["T_WHITESPACE"," ",195],["T_IS_NOT_IDENTICAL","!==",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'DELETE'",195],["T_WHITESPACE"," ",195],"?",["T_WHITESPACE"," ",195],"[",["T_CONSTANT_ENCAPSED_STRING","'REST'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'Drupal'",195],"]",["T_WHITESPACE"," ",195],":",["T_WHITESPACE"," ",195],["T_STRING","NULL",195],")",";",["T_WHITESPACE","\n      ",195],["T_VARIABLE","$resource",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getPluginDefinition",196],"(",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","willReturn",196],"(","[","]",")",";",["T_WHITESPACE","\n      ",196],["T_VARIABLE","$method_prophecy",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_NEW","new",197],["T_WHITESPACE"," ",197],["T_STRING","MethodProphecy",197],"(",["T_VARIABLE","$resource",197],",",["T_WHITESPACE"," ",197],["T_STRING","strtolower",197],"(",["T_VARIABLE","$method",197],")",",",["T_WHITESPACE"," ",197],"[",["T_STRING","Argument",197],["T_DOUBLE_COLON","::",197],["T_STRING","any",197],"(",")",",",["T_WHITESPACE"," ",197],["T_VARIABLE","$request",197],"]",")",";",["T_WHITESPACE","\n      ",197],["T_VARIABLE","$method_prophecy",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","willReturn",198],"(",["T_VARIABLE","$response",198],")",";",["T_WHITESPACE","\n      ",198],["T_VARIABLE","$resource",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","addMethodProphecy",199],"(",["T_VARIABLE","$method_prophecy",199],")",";",["T_WHITESPACE","\n\n      ",199],["T_COMMENT","\/\/ Test the request handler.\n",201],["T_WHITESPACE","      ",202],["T_VARIABLE","$handler_response",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","requestHandler",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","handle",202],"(",["T_VARIABLE","$route_match",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$request",202],")",";",["T_WHITESPACE","\n      ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","assertSame",203],"(",["T_VARIABLE","$expected_response_content_type",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$handler_response",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","headers",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","get",203],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",203],")",")",";",["T_WHITESPACE","\n      ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertEquals",204],"(",["T_VARIABLE","$expected_response_content",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$handler_response",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getContent",204],"(",")",")",";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n  ",205],"}",["T_WHITESPACE","\n\n  ",206],["T_DOC_COMMENT","\/**\n   * @return array\n   *   0. methods to test\n   *   1. supported formats for route requirements\n   *   2. request format\n   *   3. request headers\n   *   4. request body\n   *   5. expected response content type\n   *   6. expected response body\n   *\/",208],["T_WHITESPACE","\n  ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","providerTestResponseFormat",218],"(",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$json_encoded",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","Json",219],["T_DOUBLE_COLON","::",219],["T_STRING","encode",219],"(","[",["T_CONSTANT_ENCAPSED_STRING","'REST'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'Drupal'",219],"]",")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$xml_encoded",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","\"<?xml version=\\\"1.0\\\"?>\\n<response><REST>Drupal<\/REST><\/response>\\n\"",220],";",["T_WHITESPACE","\n\n    ",220],["T_VARIABLE","$safe_method_test_cases",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],"[",["T_WHITESPACE","\n      ",222],["T_CONSTANT_ENCAPSED_STRING","'safe methods: client requested format (JSON)'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],"[",["T_WHITESPACE","\n        ",223],["T_COMMENT","\/\/ @todo add 'HEAD' in https:\/\/www.drupal.org\/node\/2752325\n",224],["T_WHITESPACE","        ",225],"[",["T_CONSTANT_ENCAPSED_STRING","'GET'",225],"]",",",["T_WHITESPACE","\n        ",225],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'json'",226],"]",",",["T_WHITESPACE","\n        ",226],["T_CONSTANT_ENCAPSED_STRING","'json'",227],",",["T_WHITESPACE","\n        ",227],"[","]",",",["T_WHITESPACE","\n        ",228],["T_STRING","NULL",229],",",["T_WHITESPACE","\n        ",229],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",230],",",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$json_encoded",231],",",["T_WHITESPACE","\n      ",231],"]",",",["T_WHITESPACE","\n      ",232],["T_CONSTANT_ENCAPSED_STRING","'safe methods: client requested format (XML)'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],"[",["T_WHITESPACE","\n        ",233],["T_COMMENT","\/\/ @todo add 'HEAD' in https:\/\/www.drupal.org\/node\/2752325\n",234],["T_WHITESPACE","        ",235],"[",["T_CONSTANT_ENCAPSED_STRING","'GET'",235],"]",",",["T_WHITESPACE","\n        ",235],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'json'",236],"]",",",["T_WHITESPACE","\n        ",236],["T_CONSTANT_ENCAPSED_STRING","'xml'",237],",",["T_WHITESPACE","\n        ",237],"[","]",",",["T_WHITESPACE","\n        ",238],["T_STRING","NULL",239],",",["T_WHITESPACE","\n        ",239],["T_CONSTANT_ENCAPSED_STRING","'text\/xml'",240],",",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$xml_encoded",241],",",["T_WHITESPACE","\n      ",241],"]",",",["T_WHITESPACE","\n      ",242],["T_CONSTANT_ENCAPSED_STRING","'safe methods: client requested no format: response should use the first configured format (JSON)'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],"[",["T_WHITESPACE","\n        ",243],["T_COMMENT","\/\/ @todo add 'HEAD' in https:\/\/www.drupal.org\/node\/2752325\n",244],["T_WHITESPACE","        ",245],"[",["T_CONSTANT_ENCAPSED_STRING","'GET'",245],"]",",",["T_WHITESPACE","\n        ",245],"[",["T_CONSTANT_ENCAPSED_STRING","'json'",246],",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'xml'",246],"]",",",["T_WHITESPACE","\n        ",246],["T_STRING","FALSE",247],",",["T_WHITESPACE","\n        ",247],"[","]",",",["T_WHITESPACE","\n        ",248],["T_STRING","NULL",249],",",["T_WHITESPACE","\n        ",249],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",250],",",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$json_encoded",251],",",["T_WHITESPACE","\n      ",251],"]",",",["T_WHITESPACE","\n      ",252],["T_CONSTANT_ENCAPSED_STRING","'safe methods: client requested no format: response should use the first configured format (XML)'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],"[",["T_WHITESPACE","\n        ",253],["T_COMMENT","\/\/ @todo add 'HEAD' in https:\/\/www.drupal.org\/node\/2752325\n",254],["T_WHITESPACE","        ",255],"[",["T_CONSTANT_ENCAPSED_STRING","'GET'",255],"]",",",["T_WHITESPACE","\n        ",255],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",256],",",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'json'",256],"]",",",["T_WHITESPACE","\n        ",256],["T_STRING","FALSE",257],",",["T_WHITESPACE","\n        ",257],"[","]",",",["T_WHITESPACE","\n        ",258],["T_STRING","NULL",259],",",["T_WHITESPACE","\n        ",259],["T_CONSTANT_ENCAPSED_STRING","'text\/xml'",260],",",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$xml_encoded",261],",",["T_WHITESPACE","\n      ",261],"]",",",["T_WHITESPACE","\n    ",262],"]",";",["T_WHITESPACE","\n\n    ",263],["T_VARIABLE","$unsafe_method_bodied_test_cases",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],"[",["T_WHITESPACE","\n      ",265],["T_CONSTANT_ENCAPSED_STRING","'unsafe methods with response (POST, PATCH): client requested no format, response should use request body format (JSON)'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],"[",["T_WHITESPACE","\n        ",266],"[",["T_CONSTANT_ENCAPSED_STRING","'POST'",267],",",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'PATCH'",267],"]",",",["T_WHITESPACE","\n        ",267],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",268],",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'json'",268],"]",",",["T_WHITESPACE","\n        ",268],["T_STRING","FALSE",269],",",["T_WHITESPACE","\n        ",269],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",270],"]",",",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$json_encoded",271],",",["T_WHITESPACE","\n        ",271],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",272],",",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$json_encoded",273],",",["T_WHITESPACE","\n      ",273],"]",",",["T_WHITESPACE","\n      ",274],["T_CONSTANT_ENCAPSED_STRING","'unsafe methods with response (POST, PATCH): client requested no format, response should use request body format (XML)'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],"[",["T_WHITESPACE","\n        ",275],"[",["T_CONSTANT_ENCAPSED_STRING","'POST'",276],",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'PATCH'",276],"]",",",["T_WHITESPACE","\n        ",276],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",277],",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'json'",277],"]",",",["T_WHITESPACE","\n        ",277],["T_STRING","FALSE",278],",",["T_WHITESPACE","\n        ",278],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'text\/xml'",279],"]",",",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$xml_encoded",280],",",["T_WHITESPACE","\n        ",280],["T_CONSTANT_ENCAPSED_STRING","'text\/xml'",281],",",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$xml_encoded",282],",",["T_WHITESPACE","\n      ",282],"]",",",["T_WHITESPACE","\n      ",283],["T_CONSTANT_ENCAPSED_STRING","'unsafe methods with response (POST, PATCH): client requested format other than request body format (JSON): response format should use requested format (XML)'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],"[",["T_WHITESPACE","\n        ",284],"[",["T_CONSTANT_ENCAPSED_STRING","'POST'",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'PATCH'",285],"]",",",["T_WHITESPACE","\n        ",285],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",286],",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'json'",286],"]",",",["T_WHITESPACE","\n        ",286],["T_CONSTANT_ENCAPSED_STRING","'xml'",287],",",["T_WHITESPACE","\n        ",287],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",288],"]",",",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$json_encoded",289],",",["T_WHITESPACE","\n        ",289],["T_CONSTANT_ENCAPSED_STRING","'text\/xml'",290],",",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$xml_encoded",291],",",["T_WHITESPACE","\n      ",291],"]",",",["T_WHITESPACE","\n      ",292],["T_CONSTANT_ENCAPSED_STRING","'unsafe methods with response (POST, PATCH): client requested format other than request body format (XML), but is allowed for the request body (JSON)'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],"[",["T_WHITESPACE","\n        ",293],"[",["T_CONSTANT_ENCAPSED_STRING","'POST'",294],",",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'PATCH'",294],"]",",",["T_WHITESPACE","\n        ",294],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",295],",",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'json'",295],"]",",",["T_WHITESPACE","\n        ",295],["T_CONSTANT_ENCAPSED_STRING","'json'",296],",",["T_WHITESPACE","\n        ",296],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","'text\/xml'",297],"]",",",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$xml_encoded",298],",",["T_WHITESPACE","\n        ",298],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",299],",",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$json_encoded",300],",",["T_WHITESPACE","\n      ",300],"]",",",["T_WHITESPACE","\n    ",301],"]",";",["T_WHITESPACE","\n\n    ",302],["T_VARIABLE","$unsafe_method_bodyless_test_cases",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],"[",["T_WHITESPACE","\n      ",304],["T_CONSTANT_ENCAPSED_STRING","'unsafe methods with response bodies (DELETE): client requested no format, response should have no format'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],"[",["T_WHITESPACE","\n        ",305],"[",["T_CONSTANT_ENCAPSED_STRING","'DELETE'",306],"]",",",["T_WHITESPACE","\n        ",306],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'json'",307],"]",",",["T_WHITESPACE","\n        ",307],["T_STRING","FALSE",308],",",["T_WHITESPACE","\n        ",308],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",309],"]",",",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$json_encoded",310],",",["T_WHITESPACE","\n        ",310],["T_STRING","NULL",311],",",["T_WHITESPACE","\n        ",311],["T_CONSTANT_ENCAPSED_STRING","''",312],",",["T_WHITESPACE","\n      ",312],"]",",",["T_WHITESPACE","\n      ",313],["T_CONSTANT_ENCAPSED_STRING","'unsafe methods with response bodies (DELETE): client requested format (XML), response should have no format'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],"[",["T_WHITESPACE","\n        ",314],"[",["T_CONSTANT_ENCAPSED_STRING","'DELETE'",315],"]",",",["T_WHITESPACE","\n        ",315],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",316],",",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'json'",316],"]",",",["T_WHITESPACE","\n        ",316],["T_CONSTANT_ENCAPSED_STRING","'xml'",317],",",["T_WHITESPACE","\n        ",317],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",318],"]",",",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$json_encoded",319],",",["T_WHITESPACE","\n        ",319],["T_STRING","NULL",320],",",["T_WHITESPACE","\n        ",320],["T_CONSTANT_ENCAPSED_STRING","''",321],",",["T_WHITESPACE","\n      ",321],"]",",",["T_WHITESPACE","\n      ",322],["T_CONSTANT_ENCAPSED_STRING","'unsafe methods with response bodies (DELETE): client requested format (JSON), response should have no format'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],"[",["T_WHITESPACE","\n        ",323],"[",["T_CONSTANT_ENCAPSED_STRING","'DELETE'",324],"]",",",["T_WHITESPACE","\n        ",324],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",325],",",["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","'json'",325],"]",",",["T_WHITESPACE","\n        ",325],["T_CONSTANT_ENCAPSED_STRING","'json'",326],",",["T_WHITESPACE","\n        ",326],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",327],["T_WHITESPACE"," ",327],["T_DOUBLE_ARROW","=>",327],["T_WHITESPACE"," ",327],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",327],"]",",",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$json_encoded",328],",",["T_WHITESPACE","\n        ",328],["T_STRING","NULL",329],",",["T_WHITESPACE","\n        ",329],["T_CONSTANT_ENCAPSED_STRING","''",330],",",["T_WHITESPACE","\n      ",330],"]",",",["T_WHITESPACE","\n    ",331],"]",";",["T_WHITESPACE","\n\n    ",332],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$safe_method_test_cases",334],["T_WHITESPACE"," ",334],"+",["T_WHITESPACE"," ",334],["T_VARIABLE","$unsafe_method_bodied_test_cases",334],["T_WHITESPACE"," ",334],"+",["T_WHITESPACE"," ",334],["T_VARIABLE","$unsafe_method_bodyless_test_cases",334],";",["T_WHITESPACE","\n  ",334],"}",["T_WHITESPACE","\n\n",335],"}",["T_WHITESPACE","\n\n",337],["T_DOC_COMMENT","\/**\n * Stub class where we can prophesize methods.\n *\/",339],["T_WHITESPACE","\n",341],["T_CLASS","class",342],["T_WHITESPACE"," ",342],["T_STRING","StubRequestHandlerResourcePlugin",342],["T_WHITESPACE"," ",342],["T_EXTENDS","extends",342],["T_WHITESPACE"," ",342],["T_STRING","ResourceBase",342],["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n\n  ",342],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","get",344],"(",")",["T_WHITESPACE"," ",344],"{","}",["T_WHITESPACE","\n  ",344],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","post",345],"(",")",["T_WHITESPACE"," ",345],"{","}",["T_WHITESPACE","\n  ",345],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","patch",346],"(",")",["T_WHITESPACE"," ",346],"{","}",["T_WHITESPACE","\n  ",346],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","delete",347],"(",")",["T_WHITESPACE"," ",347],"{","}",["T_WHITESPACE","\n\n",347],"}",["T_WHITESPACE","\n",349]]
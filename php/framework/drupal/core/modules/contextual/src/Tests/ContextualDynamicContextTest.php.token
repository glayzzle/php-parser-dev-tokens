[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","contextual",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Serialization",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Json",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Url",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","language",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigurableLanguage",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","simpletest",8],["T_NS_SEPARATOR","\\",8],["T_STRING","WebTestBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Template",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Attribute",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests if contextual links are showing on the front page depending on\n * permissions.\n *\n * @group contextual\n *\/",11],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","ContextualDynamicContextTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","WebTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * A user with permission to access contextual links and edit content.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$editorUser",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * An authenticated user with permission to access contextual links.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$authenticatedUser",31],";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * A simulated anonymous user with access only to node content.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",33],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$anonymousUser",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",40],["T_WHITESPACE","\n  ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_STATIC","static",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$modules",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_CONSTANT_ENCAPSED_STRING","'contextual'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'node'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'views'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'views_ui'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'language'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'menu_test'",45],")",";",["T_WHITESPACE","\n\n  ",45],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","setUp",47],"(",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n    ",47],["T_STRING","parent",48],["T_DOUBLE_COLON","::",48],["T_STRING","setUp",48],"(",")",";",["T_WHITESPACE","\n\n    ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","drupalCreateContentType",50],"(",["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'page'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'name'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",50],")",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","drupalCreateContentType",51],"(",["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'article'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'name'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Article'",51],")",")",";",["T_WHITESPACE","\n\n    ",51],["T_STRING","ConfigurableLanguage",53],["T_DOUBLE_COLON","::",53],["T_STRING","createFromLangcode",53],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",53],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","save",53],"(",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","rebuildContainer",54],"(",")",";",["T_WHITESPACE","\n\n    ",54],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","editorUser",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","drupalCreateUser",56],"(",["T_ARRAY","array",56],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'access contextual links'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'edit any article content'",56],")",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","authenticatedUser",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalCreateUser",57],"(",["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'access contextual links'",57],")",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","anonymousUser",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","drupalCreateUser",58],"(",["T_ARRAY","array",58],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",58],")",")",";",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * Tests contextual links with different permissions.\n   *\n   * Ensures that contextual link placeholders always exist, even if the user is\n   * not allowed to use contextual links.\n   *\/",61],["T_WHITESPACE","\n  ",66],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","testDifferentPermissions",67],"(",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","drupalLogin",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","editorUser",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Create three nodes in the following order:\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ - An article, which should be user-editable.\n",71],["T_WHITESPACE","    ",72],["T_COMMENT","\/\/ - A page, which should not be user-editable.\n",72],["T_WHITESPACE","    ",73],["T_COMMENT","\/\/ - A second article, which should also be user-editable.\n",73],["T_WHITESPACE","    ",74],["T_VARIABLE","$node1",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","drupalCreateNode",74],"(",["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'article'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'promote'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_LNUMBER","1",74],")",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$node2",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","drupalCreateNode",75],"(",["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'page'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'promote'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_LNUMBER","1",75],")",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$node3",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","drupalCreateNode",76],"(",["T_ARRAY","array",76],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'article'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'promote'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_LNUMBER","1",76],")",")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ Now, on the front page, all article nodes should have contextual links\n",78],["T_WHITESPACE","    ",79],["T_COMMENT","\/\/ placeholders, as should the view that contains them.\n",79],["T_WHITESPACE","    ",80],["T_VARIABLE","$ids",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"[",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'node:node='",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$node1",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","id",81],"(",")",["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","':changed='",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$node1",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getChangedTime",81],"(",")",["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'&langcode=en'",81],",",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'node:node='",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$node2",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","id",82],"(",")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","':changed='",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$node2",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getChangedTime",82],"(",")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'&langcode=en'",82],",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'node:node='",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$node3",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","id",83],"(",")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","':changed='",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$node3",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getChangedTime",83],"(",")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'&langcode=en'",83],",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'entity.view.edit_form:view=frontpage:location=page&name=frontpage&display_id=page_1&langcode=en'",84],",",["T_WHITESPACE","\n    ",84],"]",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Editor user: can access contextual links and can edit articles.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","drupalGet",88],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",88],")",";",["T_WHITESPACE","\n    ",88],["T_FOR","for",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$i",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_LNUMBER","0",89],";",["T_WHITESPACE"," ",89],["T_VARIABLE","$i",89],["T_WHITESPACE"," ",89],"<",["T_WHITESPACE"," ",89],["T_STRING","count",89],"(",["T_VARIABLE","$ids",89],")",";",["T_WHITESPACE"," ",89],["T_VARIABLE","$i",89],["T_INC","++",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertContextualLinkPlaceHolder",90],"(",["T_VARIABLE","$ids",90],"[",["T_VARIABLE","$i",90],"]",")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","renderContextualLinks",92],"(",["T_ARRAY","array",92],"(",")",",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'node'",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertResponse",93],"(",["T_LNUMBER","400",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertRaw",94],"(",["T_CONSTANT_ENCAPSED_STRING","'No contextual ids specified.'",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$response",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","renderContextualLinks",95],"(",["T_VARIABLE","$ids",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'node'",95],")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertResponse",96],"(",["T_LNUMBER","200",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$json",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","Json",97],["T_DOUBLE_COLON","::",97],["T_STRING","decode",97],"(",["T_VARIABLE","$response",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertIdentical",98],"(",["T_VARIABLE","$json",98],"[",["T_VARIABLE","$ids",98],"[",["T_LNUMBER","0",98],"]","]",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'<ul class=\"contextual-links\"><li class=\"entitynodeedit-form\"><a href=\"'",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_STRING","base_path",98],"(",")",["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/edit\">Edit<\/a><\/li><\/ul>'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertIdentical",99],"(",["T_VARIABLE","$json",99],"[",["T_VARIABLE","$ids",99],"[",["T_LNUMBER","1",99],"]","]",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","''",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertIdentical",100],"(",["T_VARIABLE","$json",100],"[",["T_VARIABLE","$ids",100],"[",["T_LNUMBER","2",100],"]","]",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'<ul class=\"contextual-links\"><li class=\"entitynodeedit-form\"><a href=\"'",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_STRING","base_path",100],"(",")",["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'node\/3\/edit\">Edit<\/a><\/li><\/ul>'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertIdentical",101],"(",["T_VARIABLE","$json",101],"[",["T_VARIABLE","$ids",101],"[",["T_LNUMBER","3",101],"]","]",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","''",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Verify that link language is properly handled.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$node3",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","addTranslation",104],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",104],")",["T_OBJECT_OPERATOR","->",104],["T_STRING","set",104],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","randomString",104],"(",")",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","save",104],"(",")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$id",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'node:node='",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_VARIABLE","$node3",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","id",105],"(",")",["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","':changed='",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_VARIABLE","$node3",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getChangedTime",105],"(",")",["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'&langcode=it'",105],";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","drupalGet",106],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",106],",",["T_WHITESPACE"," ",106],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_STRING","ConfigurableLanguage",106],["T_DOUBLE_COLON","::",106],["T_STRING","createFromLangcode",106],"(",["T_CONSTANT_ENCAPSED_STRING","'it'",106],")","]",")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertContextualLinkPlaceHolder",107],"(",["T_VARIABLE","$id",107],")",";",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ Authenticated user: can access contextual links, cannot edit articles.\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","drupalLogin",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","authenticatedUser",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","drupalGet",111],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",111],")",";",["T_WHITESPACE","\n    ",111],["T_FOR","for",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$i",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_LNUMBER","0",112],";",["T_WHITESPACE"," ",112],["T_VARIABLE","$i",112],["T_WHITESPACE"," ",112],"<",["T_WHITESPACE"," ",112],["T_STRING","count",112],"(",["T_VARIABLE","$ids",112],")",";",["T_WHITESPACE"," ",112],["T_VARIABLE","$i",112],["T_INC","++",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n      ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertContextualLinkPlaceHolder",113],"(",["T_VARIABLE","$ids",113],"[",["T_VARIABLE","$i",113],"]",")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","renderContextualLinks",115],"(",["T_ARRAY","array",115],"(",")",",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'node'",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertResponse",116],"(",["T_LNUMBER","400",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertRaw",117],"(",["T_CONSTANT_ENCAPSED_STRING","'No contextual ids specified.'",117],")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$response",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","renderContextualLinks",118],"(",["T_VARIABLE","$ids",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'node'",118],")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertResponse",119],"(",["T_LNUMBER","200",119],")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$json",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","Json",120],["T_DOUBLE_COLON","::",120],["T_STRING","decode",120],"(",["T_VARIABLE","$response",120],")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertIdentical",121],"(",["T_VARIABLE","$json",121],"[",["T_VARIABLE","$ids",121],"[",["T_LNUMBER","0",121],"]","]",",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","''",121],")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertIdentical",122],"(",["T_VARIABLE","$json",122],"[",["T_VARIABLE","$ids",122],"[",["T_LNUMBER","1",122],"]","]",",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","''",122],")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","assertIdentical",123],"(",["T_VARIABLE","$json",123],"[",["T_VARIABLE","$ids",123],"[",["T_LNUMBER","2",123],"]","]",",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","''",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","assertIdentical",124],"(",["T_VARIABLE","$json",124],"[",["T_VARIABLE","$ids",124],"[",["T_LNUMBER","3",124],"]","]",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","''",124],")",";",["T_WHITESPACE","\n\n    ",124],["T_COMMENT","\/\/ Anonymous user: cannot access contextual links.\n",126],["T_WHITESPACE","    ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","drupalLogin",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","anonymousUser",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","drupalGet",128],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",128],")",";",["T_WHITESPACE","\n    ",128],["T_FOR","for",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$i",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_LNUMBER","0",129],";",["T_WHITESPACE"," ",129],["T_VARIABLE","$i",129],["T_WHITESPACE"," ",129],"<",["T_WHITESPACE"," ",129],["T_STRING","count",129],"(",["T_VARIABLE","$ids",129],")",";",["T_WHITESPACE"," ",129],["T_VARIABLE","$i",129],["T_INC","++",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertNoContextualLinkPlaceHolder",130],"(",["T_VARIABLE","$ids",130],"[",["T_VARIABLE","$i",130],"]",")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","renderContextualLinks",132],"(",["T_ARRAY","array",132],"(",")",",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'node'",132],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertResponse",133],"(",["T_LNUMBER","403",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","renderContextualLinks",134],"(",["T_VARIABLE","$ids",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'node'",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertResponse",135],"(",["T_LNUMBER","403",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ Get a page where contextual links are directly rendered.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","drupalGet",138],"(",["T_STRING","Url",138],["T_DOUBLE_COLON","::",138],["T_STRING","fromRoute",138],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.contextual_test'",138],")",")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertEscaped",139],"(",["T_CONSTANT_ENCAPSED_STRING","\"<script>alert('Welcome to the jungle!')<\/script>\"",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertLink",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit menu - contextual'",140],")",";",["T_WHITESPACE","\n  ",140],"}",["T_WHITESPACE","\n\n  ",141],["T_DOC_COMMENT","\/**\n   * Asserts that a contextual link placeholder with the given id exists.\n   *\n   * @param string $id\n   *   A contextual link id.\n   *\n   * @return bool\n   *   The result of the assertion.\n   *\/",143],["T_WHITESPACE","\n  ",151],["T_PROTECTED","protected",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","assertContextualLinkPlaceHolder",152],"(",["T_VARIABLE","$id",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n    ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertRaw",153],"(",["T_CONSTANT_ENCAPSED_STRING","'<div'",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_NEW","new",153],["T_WHITESPACE"," ",153],["T_STRING","Attribute",153],"(",["T_ARRAY","array",153],"(",["T_CONSTANT_ENCAPSED_STRING","'data-contextual-id'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$id",153],")",")",["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'><\/div>'",153],",",["T_WHITESPACE"," ",153],["T_STRING","format_string",153],"(",["T_CONSTANT_ENCAPSED_STRING","'Contextual link placeholder with id @id exists.'",153],",",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$id",153],")",")",")",";",["T_WHITESPACE","\n  ",153],"}",["T_WHITESPACE","\n\n  ",154],["T_DOC_COMMENT","\/**\n   * Asserts that a contextual link placeholder with the given id does not exist.\n   *\n   * @param string $id\n   *   A contextual link id.\n   *\n   * @return bool\n   *   The result of the assertion.\n   *\/",156],["T_WHITESPACE","\n  ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","assertNoContextualLinkPlaceHolder",165],"(",["T_VARIABLE","$id",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n    ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertNoRaw",166],"(",["T_CONSTANT_ENCAPSED_STRING","'<div'",166],["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_NEW","new",166],["T_WHITESPACE"," ",166],["T_STRING","Attribute",166],"(",["T_ARRAY","array",166],"(",["T_CONSTANT_ENCAPSED_STRING","'data-contextual-id'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$id",166],")",")",["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'><\/div>'",166],",",["T_WHITESPACE"," ",166],["T_STRING","format_string",166],"(",["T_CONSTANT_ENCAPSED_STRING","'Contextual link placeholder with id @id does not exist.'",166],",",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$id",166],")",")",")",";",["T_WHITESPACE","\n  ",166],"}",["T_WHITESPACE","\n\n  ",167],["T_DOC_COMMENT","\/**\n   * Get server-rendered contextual links for the given contextual link ids.\n   *\n   * @param array $ids\n   *   An array of contextual link ids.\n   * @param string $current_path\n   *   The Drupal path for the page for which the contextual links are rendered.\n   *\n   * @return string\n   *   The response body.\n   *\/",169],["T_WHITESPACE","\n  ",179],["T_PROTECTED","protected",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","renderContextualLinks",180],"(",["T_VARIABLE","$ids",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$current_path",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$post",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",")",";",["T_WHITESPACE","\n    ",181],["T_FOR","for",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$i",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_LNUMBER","0",182],";",["T_WHITESPACE"," ",182],["T_VARIABLE","$i",182],["T_WHITESPACE"," ",182],"<",["T_WHITESPACE"," ",182],["T_STRING","count",182],"(",["T_VARIABLE","$ids",182],")",";",["T_WHITESPACE"," ",182],["T_VARIABLE","$i",182],["T_INC","++",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n      ",182],["T_VARIABLE","$post",183],"[",["T_CONSTANT_ENCAPSED_STRING","'ids['",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_VARIABLE","$i",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","']'",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$ids",183],"[",["T_VARIABLE","$i",183],"]",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n    ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","drupalPostWithFormat",185],"(",["T_CONSTANT_ENCAPSED_STRING","'contextual\/render'",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'json'",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$post",185],",",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",["T_CONSTANT_ENCAPSED_STRING","'destination'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$current_path",185],")",")",")",";",["T_WHITESPACE","\n  ",185],"}",["T_WHITESPACE","\n\n",186],"}",["T_WHITESPACE","\n",188]]
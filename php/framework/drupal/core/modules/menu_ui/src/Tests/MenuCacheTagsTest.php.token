[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","menu_ui",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Url",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","menu_link_content",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MenuLinkContent",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","system",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Cache",7],["T_NS_SEPARATOR","\\",7],["T_STRING","PageCacheTagsTestBase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","system",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Menu",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests the Menu and Menu Link entities' cache tags.\n *\n * @group menu_ui\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","MenuCacheTagsTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","PageCacheTagsTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",17],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_ui'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'block'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'test_page_test'",20],")",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Tests cache tags presence and invalidation of the Menu entity.\n   *\n   * Tests the following cache tags:\n   * - \"menu:<menu ID>\"\n   *\/",22],["T_WHITESPACE","\n  ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","testMenuBlock",28],"(",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$url",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","Url",29],["T_DOUBLE_COLON","::",29],["T_STRING","fromRoute",29],"(",["T_CONSTANT_ENCAPSED_STRING","'test_page_test.test_page'",29],")",";",["T_WHITESPACE","\n\n    ",29],["T_COMMENT","\/\/ Create a Llama menu, add a link to it and place the corresponding block.\n",31],["T_WHITESPACE","    ",32],["T_VARIABLE","$menu",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","Menu",32],["T_DOUBLE_COLON","::",32],["T_STRING","create",32],"(",["T_ARRAY","array",32],"(",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'id'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'llama'",33],",",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'label'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'Llama'",34],",",["T_WHITESPACE","\n      ",34],["T_CONSTANT_ENCAPSED_STRING","'description'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'Description text'",35],",",["T_WHITESPACE","\n    ",35],")",")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$menu",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","save",37],"(",")",";",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Menu\\MenuLinkManagerInterface $menu_link_manager *\/",38],["T_WHITESPACE","\n    ",38],["T_VARIABLE","$menu_link_manager",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Drupal",39],["T_DOUBLE_COLON","::",39],["T_STRING","service",39],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.menu.link'",39],")",";",["T_WHITESPACE","\n    ",39],["T_COMMENT","\/\/ Move a link into the new menu.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$menu_link",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$menu_link_manager",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","updateDefinition",41],"(",["T_CONSTANT_ENCAPSED_STRING","'test_page_test.test_page'",41],",",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_name'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'llama'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'parent'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","''",41],")",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$block",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalPlaceBlock",42],"(",["T_CONSTANT_ENCAPSED_STRING","'system_menu_block:llama'",42],",",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Llama'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'provider'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'system'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'region'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'footer'",42],")",")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Prime the page cache.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","verifyPageCache",45],"(",["T_VARIABLE","$url",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'MISS'",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ Verify a cache hit, but also the presence of the correct cache tags.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$expected_tags",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'rendered'",49],",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'block_view'",50],",",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'config:block_list'",51],",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'config:block.block.'",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$block",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","id",52],"(",")",",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'config:system.menu.llama'",53],",",["T_WHITESPACE","\n      ",53],["T_COMMENT","\/\/ The cache contexts associated with the (in)accessible menu links are\n",54],["T_WHITESPACE","      ",55],["T_COMMENT","\/\/ bubbled.\n",55],["T_WHITESPACE","      ",56],["T_CONSTANT_ENCAPSED_STRING","'config:user.role.anonymous'",56],",",["T_WHITESPACE","\n    ",56],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","verifyPageCache",58],"(",["T_VARIABLE","$url",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'HIT'",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$expected_tags",58],")",";",["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/\/ Verify that after modifying the menu, there is a cache miss.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","pass",61],"(",["T_CONSTANT_ENCAPSED_STRING","'Test modification of menu.'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'Debug'",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$menu",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","set",62],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Awesome llama'",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$menu",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","save",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","verifyPageCache",64],"(",["T_VARIABLE","$url",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'MISS'",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Verify a cache hit.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","verifyPageCache",67],"(",["T_VARIABLE","$url",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'HIT'",67],")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Verify that after modifying the menu link weight, there is a cache miss.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$menu_link_manager",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","updateDefinition",70],"(",["T_CONSTANT_ENCAPSED_STRING","'test_page_test.test_page'",70],",",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],"-",["T_LNUMBER","10",70],")",")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","pass",71],"(",["T_CONSTANT_ENCAPSED_STRING","'Test modification of menu link.'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'Debug'",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","verifyPageCache",72],"(",["T_VARIABLE","$url",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'MISS'",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Verify a cache hit.\n",74],["T_WHITESPACE","    ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","verifyPageCache",75],"(",["T_VARIABLE","$url",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'HIT'",75],")",";",["T_WHITESPACE","\n\n    ",75],["T_COMMENT","\/\/ Verify that after adding a menu link, there is a cache miss.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","pass",78],"(",["T_CONSTANT_ENCAPSED_STRING","'Test addition of menu link.'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'Debug'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$menu_link_2",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","MenuLinkContent",79],["T_DOUBLE_COLON","::",79],["T_STRING","create",79],"(",["T_ARRAY","array",79],"(",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'id'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","''",80],",",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'parent'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","''",81],",",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'title'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'Alpaca'",82],",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'menu_name'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'llama'",83],",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'link'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],"[","[",["T_WHITESPACE","\n        ",84],["T_CONSTANT_ENCAPSED_STRING","'uri'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'internal:\/'",85],",",["T_WHITESPACE","\n      ",85],"]","]",",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'bundle'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'menu_name'",87],",",["T_WHITESPACE","\n    ",87],")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$menu_link_2",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","save",89],"(",")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","verifyPageCache",90],"(",["T_VARIABLE","$url",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'MISS'",90],")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ Verify a cache hit.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","verifyPageCache",93],"(",["T_VARIABLE","$url",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'HIT'",93],")",";",["T_WHITESPACE","\n\n    ",93],["T_COMMENT","\/\/ Verify that after resetting the first menu link, there is a cache miss.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","pass",96],"(",["T_CONSTANT_ENCAPSED_STRING","'Test reset of menu link.'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'Debug'",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertTrue",97],"(",["T_VARIABLE","$menu_link",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","isResettable",97],"(",")",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'First link can be reset'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$menu_link",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$menu_link_manager",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","resetLink",98],"(",["T_VARIABLE","$menu_link",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getPluginId",98],"(",")",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","verifyPageCache",99],"(",["T_VARIABLE","$url",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'MISS'",99],")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Verify a cache hit.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","verifyPageCache",102],"(",["T_VARIABLE","$url",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'HIT'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$expected_tags",102],")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Verify that after deleting the menu, there is a cache miss.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","pass",105],"(",["T_CONSTANT_ENCAPSED_STRING","'Test deletion of menu.'",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'Debug'",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$menu",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","delete",106],"(",")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","verifyPageCache",107],"(",["T_VARIABLE","$url",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'MISS'",107],")",";",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ Verify a cache hit.\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","verifyPageCache",110],"(",["T_VARIABLE","$url",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'HIT'",110],",",["T_WHITESPACE"," ",110],"[",["T_CONSTANT_ENCAPSED_STRING","'config:block_list'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'config:user.role.anonymous'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'rendered'",110],"]",")",";",["T_WHITESPACE","\n  ",110],"}",["T_WHITESPACE","\n\n",111],"}",["T_WHITESPACE","\n",113]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","content_translation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","content_translation",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldTranslationSynchronizer",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the field synchronization logic.\n *\n * @group content_translation\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ContentTranslationSyncUnitTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","KernelTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * The synchronizer class to be tested.\n   *\n   * @var \\Drupal\\content_translation\\FieldTranslationSynchronizer\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$synchronizer",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The columns to be synchronized.\n   *\n   * @var array\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$synchronized",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * All the field columns.\n   *\n   * @var array\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$columns",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * The available language codes.\n   *\n   * @var array\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$langcodes",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * The field cardinality.\n   *\n   * @var int\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$cardinality",48],";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * The unchanged field values.\n   *\n   * @var array\n   *\/",50],["T_WHITESPACE","\n  ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$unchangedFieldValues",55],";",["T_WHITESPACE","\n\n  ",55],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_STATIC","static",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$modules",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'content_translation'",57],")",";",["T_WHITESPACE","\n\n  ",57],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","setUp",59],"(",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_STRING","parent",60],["T_DOUBLE_COLON","::",60],["T_STRING","setUp",60],"(",")",";",["T_WHITESPACE","\n\n    ",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","synchronizer",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_NEW","new",62],["T_WHITESPACE"," ",62],["T_STRING","FieldTranslationSynchronizer",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","container",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",62],")",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","synchronized",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_CONSTANT_ENCAPSED_STRING","'sync1'",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'sync2'",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","columns",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","array_merge",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","synchronized",64],",",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'var1'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'var2'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","langcodes",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'en'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'it'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'fr'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'de'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'es'",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","cardinality",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_LNUMBER","4",66],";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","unchangedFieldValues",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Set up an initial set of values in the correct state, that is with\n",69],["T_WHITESPACE","    ",70],["T_COMMENT","\/\/ \"synchronized\" values being equal.\n",70],["T_WHITESPACE","    ",71],["T_FOREACH","foreach",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","langcodes",71],["T_WHITESPACE"," ",71],["T_AS","as",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$langcode",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n      ",71],["T_FOR","for",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$delta",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_LNUMBER","0",72],";",["T_WHITESPACE"," ",72],["T_VARIABLE","$delta",72],["T_WHITESPACE"," ",72],"<",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","cardinality",72],";",["T_WHITESPACE"," ",72],["T_VARIABLE","$delta",72],["T_INC","++",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n        ",72],["T_FOREACH","foreach",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","columns",73],["T_WHITESPACE"," ",73],["T_AS","as",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$column",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n          ",73],["T_VARIABLE","$sync",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","in_array",74],"(",["T_VARIABLE","$column",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","synchronized",74],")",["T_WHITESPACE"," ",74],["T_BOOLEAN_AND","&&",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$langcode",74],["T_WHITESPACE"," ",74],["T_IS_NOT_EQUAL","!=",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","langcodes",74],"[",["T_LNUMBER","0",74],"]",";",["T_WHITESPACE","\n          ",74],["T_VARIABLE","$value",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$sync",75],["T_WHITESPACE"," ",75],"?",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","unchangedFieldValues",75],"[",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","langcodes",75],"[",["T_LNUMBER","0",75],"]","]","[",["T_VARIABLE","$delta",75],"]","[",["T_VARIABLE","$column",75],"]",["T_WHITESPACE"," ",75],":",["T_WHITESPACE"," ",75],["T_VARIABLE","$langcode",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'-'",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_VARIABLE","$delta",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'-'",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_VARIABLE","$column",75],";",["T_WHITESPACE","\n          ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","unchangedFieldValues",76],"[",["T_VARIABLE","$langcode",76],"]","[",["T_VARIABLE","$delta",76],"]","[",["T_VARIABLE","$column",76],"]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$value",76],";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n      ",77],"}",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * Tests the field synchronization algorithm.\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","testFieldSync",85],"(",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_COMMENT","\/\/ Add a new item to the source items and check that its added to all the\n",86],["T_WHITESPACE","    ",87],["T_COMMENT","\/\/ translations.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$sync_langcode",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","langcodes",88],"[",["T_LNUMBER","2",88],"]",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$unchanged_items",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","unchangedFieldValues",89],"[",["T_VARIABLE","$sync_langcode",89],"]",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$field_values",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","unchangedFieldValues",90],";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$item",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_FOREACH","foreach",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","columns",92],["T_WHITESPACE"," ",92],["T_AS","as",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$column",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$item",93],"[",["T_VARIABLE","$column",93],"]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","randomMachineName",93],"(",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$field_values",95],"[",["T_VARIABLE","$sync_langcode",95],"]","[","]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$item",95],";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","synchronizer",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","synchronizeItems",96],"(",["T_VARIABLE","$field_values",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$unchanged_items",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$sync_langcode",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","langcodes",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","synchronized",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$result",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","TRUE",97],";",["T_WHITESPACE","\n    ",97],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","unchangedFieldValues",98],["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$langcode",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$items",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_COMMENT","\/\/ Check that the old values are still in place.\n",99],["T_WHITESPACE","      ",100],["T_FOR","for",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$delta",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_LNUMBER","0",100],";",["T_WHITESPACE"," ",100],["T_VARIABLE","$delta",100],["T_WHITESPACE"," ",100],"<",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","cardinality",100],";",["T_WHITESPACE"," ",100],["T_VARIABLE","$delta",100],["T_INC","++",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n        ",100],["T_FOREACH","foreach",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","columns",101],["T_WHITESPACE"," ",101],["T_AS","as",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$column",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n          ",101],["T_VARIABLE","$result",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$result",102],["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","unchangedFieldValues",102],"[",["T_VARIABLE","$langcode",102],"]","[",["T_VARIABLE","$delta",102],"]","[",["T_VARIABLE","$column",102],"]",["T_WHITESPACE"," ",102],["T_IS_EQUAL","==",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$field_values",102],"[",["T_VARIABLE","$langcode",102],"]","[",["T_VARIABLE","$delta",102],"]","[",["T_VARIABLE","$column",102],"]",")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n      ",103],"}",["T_WHITESPACE","\n      ",104],["T_COMMENT","\/\/ Check that the new item is available in all languages.\n",105],["T_WHITESPACE","      ",106],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","columns",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$column",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$field_values",107],"[",["T_VARIABLE","$langcode",107],"]","[",["T_VARIABLE","$delta",107],"]","[",["T_VARIABLE","$column",107],"]",["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$field_values",107],"[",["T_VARIABLE","$sync_langcode",107],"]","[",["T_VARIABLE","$delta",107],"]","[",["T_VARIABLE","$column",107],"]",")",";",["T_WHITESPACE","\n      ",107],"}",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertTrue",110],"(",["T_VARIABLE","$result",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'A new item has been correctly synchronized.'",110],")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Remove an item from the source items and check that its removed from all\n",112],["T_WHITESPACE","    ",113],["T_COMMENT","\/\/ the translations.\n",113],["T_WHITESPACE","    ",114],["T_VARIABLE","$sync_langcode",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","langcodes",114],"[",["T_LNUMBER","1",114],"]",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$unchanged_items",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","unchangedFieldValues",115],"[",["T_VARIABLE","$sync_langcode",115],"]",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$field_values",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","unchangedFieldValues",116],";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$sync_delta",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","mt_rand",117],"(",["T_LNUMBER","0",117],",",["T_WHITESPACE"," ",117],["T_STRING","count",117],"(",["T_VARIABLE","$field_values",117],"[",["T_VARIABLE","$sync_langcode",117],"]",")",["T_WHITESPACE"," ",117],"-",["T_WHITESPACE"," ",117],["T_LNUMBER","1",117],")",";",["T_WHITESPACE","\n    ",117],["T_UNSET","unset",118],"(",["T_VARIABLE","$field_values",118],"[",["T_VARIABLE","$sync_langcode",118],"]","[",["T_VARIABLE","$sync_delta",118],"]",")",";",["T_WHITESPACE","\n    ",118],["T_COMMENT","\/\/ Renumber deltas to start from 0.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$field_values",120],"[",["T_VARIABLE","$sync_langcode",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","array_values",120],"(",["T_VARIABLE","$field_values",120],"[",["T_VARIABLE","$sync_langcode",120],"]",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","synchronizer",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","synchronizeItems",121],"(",["T_VARIABLE","$field_values",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$unchanged_items",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$sync_langcode",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","langcodes",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","synchronized",121],")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$result",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","TRUE",122],";",["T_WHITESPACE","\n    ",122],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","unchangedFieldValues",123],["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$langcode",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$items",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n      ",123],["T_VARIABLE","$new_delta",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_LNUMBER","0",124],";",["T_WHITESPACE","\n      ",124],["T_COMMENT","\/\/ Check that the old values are still in place.\n",125],["T_WHITESPACE","      ",126],["T_FOR","for",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$delta",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_LNUMBER","0",126],";",["T_WHITESPACE"," ",126],["T_VARIABLE","$delta",126],["T_WHITESPACE"," ",126],"<",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","cardinality",126],";",["T_WHITESPACE"," ",126],["T_VARIABLE","$delta",126],["T_INC","++",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n        ",126],["T_COMMENT","\/\/ Skip the removed item.\n",127],["T_WHITESPACE","        ",128],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$delta",128],["T_WHITESPACE"," ",128],["T_IS_NOT_EQUAL","!=",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$sync_delta",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n          ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","columns",129],["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$column",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$result",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$result",130],["T_WHITESPACE"," ",130],["T_BOOLEAN_AND","&&",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","unchangedFieldValues",130],"[",["T_VARIABLE","$langcode",130],"]","[",["T_VARIABLE","$delta",130],"]","[",["T_VARIABLE","$column",130],"]",["T_WHITESPACE"," ",130],["T_IS_EQUAL","==",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$field_values",130],"[",["T_VARIABLE","$langcode",130],"]","[",["T_VARIABLE","$new_delta",130],"]","[",["T_VARIABLE","$column",130],"]",")",";",["T_WHITESPACE","\n          ",130],"}",["T_WHITESPACE","\n          ",131],["T_VARIABLE","$new_delta",132],["T_INC","++",132],";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n      ",133],"}",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertTrue",136],"(",["T_VARIABLE","$result",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'A removed item has been correctly synchronized.'",136],")",";",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ Move the items around in the source items and check that they are moved\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ in all the translations.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$sync_langcode",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","langcodes",140],"[",["T_LNUMBER","3",140],"]",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$unchanged_items",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","unchangedFieldValues",141],"[",["T_VARIABLE","$sync_langcode",141],"]",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$field_values",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","unchangedFieldValues",142],";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$field_values",143],"[",["T_VARIABLE","$sync_langcode",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",")",";",["T_WHITESPACE","\n    ",143],["T_COMMENT","\/\/ Scramble the items.\n",144],["T_WHITESPACE","    ",145],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$unchanged_items",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$delta",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$item",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n      ",145],["T_VARIABLE","$new_delta",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$delta",146],["T_WHITESPACE"," ",146],"+",["T_WHITESPACE"," ",146],["T_LNUMBER","1",146],")",["T_WHITESPACE"," ",146],"%",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","cardinality",146],";",["T_WHITESPACE","\n      ",146],["T_VARIABLE","$field_values",147],"[",["T_VARIABLE","$sync_langcode",147],"]","[",["T_VARIABLE","$new_delta",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$item",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n    ",148],["T_COMMENT","\/\/ Renumber deltas to start from 0.\n",149],["T_WHITESPACE","    ",150],["T_STRING","ksort",150],"(",["T_VARIABLE","$field_values",150],"[",["T_VARIABLE","$sync_langcode",150],"]",")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","synchronizer",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","synchronizeItems",151],"(",["T_VARIABLE","$field_values",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$unchanged_items",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$sync_langcode",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","langcodes",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","synchronized",151],")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$result",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","TRUE",152],";",["T_WHITESPACE","\n    ",152],["T_FOREACH","foreach",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$field_values",153],["T_WHITESPACE"," ",153],["T_AS","as",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$langcode",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$items",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_FOR","for",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$delta",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_LNUMBER","0",154],";",["T_WHITESPACE"," ",154],["T_VARIABLE","$delta",154],["T_WHITESPACE"," ",154],"<",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","cardinality",154],";",["T_WHITESPACE"," ",154],["T_VARIABLE","$delta",154],["T_INC","++",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n        ",154],["T_FOREACH","foreach",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","columns",155],["T_WHITESPACE"," ",155],["T_AS","as",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$column",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n          ",155],["T_VARIABLE","$value",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$field_values",156],"[",["T_VARIABLE","$langcode",156],"]","[",["T_VARIABLE","$delta",156],"]","[",["T_VARIABLE","$column",156],"]",";",["T_WHITESPACE","\n          ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_STRING","in_array",157],"(",["T_VARIABLE","$column",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","synchronized",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_COMMENT","\/\/ If we are dealing with a synchronize column the current value is\n",158],["T_WHITESPACE","            ",159],["T_COMMENT","\/\/ supposed to be the same of the source items.\n",159],["T_WHITESPACE","            ",160],["T_VARIABLE","$result",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$result",160],["T_WHITESPACE"," ",160],["T_BOOLEAN_AND","&&",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$field_values",160],"[",["T_VARIABLE","$sync_langcode",160],"]","[",["T_VARIABLE","$delta",160],"]","[",["T_VARIABLE","$column",160],"]",["T_WHITESPACE"," ",160],["T_IS_EQUAL","==",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$value",160],";",["T_WHITESPACE","\n          ",160],"}",["T_WHITESPACE","\n          ",161],["T_ELSE","else",162],["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_COMMENT","\/\/ Otherwise the values should be unchanged.\n",163],["T_WHITESPACE","            ",164],["T_VARIABLE","$old_delta",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$delta",164],["T_WHITESPACE"," ",164],">",["T_WHITESPACE"," ",164],["T_LNUMBER","0",164],["T_WHITESPACE"," ",164],"?",["T_WHITESPACE"," ",164],["T_VARIABLE","$delta",164],["T_WHITESPACE"," ",164],":",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","cardinality",164],")",["T_WHITESPACE"," ",164],"-",["T_WHITESPACE"," ",164],["T_LNUMBER","1",164],";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$result",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$result",165],["T_WHITESPACE"," ",165],["T_BOOLEAN_AND","&&",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","unchangedFieldValues",165],"[",["T_VARIABLE","$langcode",165],"]","[",["T_VARIABLE","$old_delta",165],"]","[",["T_VARIABLE","$column",165],"]",["T_WHITESPACE"," ",165],["T_IS_EQUAL","==",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$value",165],";",["T_WHITESPACE","\n          ",165],"}",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n      ",167],"}",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","assertTrue",170],"(",["T_VARIABLE","$result",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'Scrambled items have been correctly synchronized.'",170],")",";",["T_WHITESPACE","\n  ",170],"}",["T_WHITESPACE","\n\n  ",171],["T_DOC_COMMENT","\/**\n   * Tests that items holding the same values are correctly synchronized.\n   *\/",173],["T_WHITESPACE","\n  ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","testMultipleSyncedValues",176],"(",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$sync_langcode",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","langcodes",177],"[",["T_LNUMBER","1",177],"]",";",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$unchanged_items",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","unchangedFieldValues",178],"[",["T_VARIABLE","$sync_langcode",178],"]",";",["T_WHITESPACE","\n\n    ",178],["T_COMMENT","\/\/ Determine whether the unchanged values should be altered depending on\n",180],["T_WHITESPACE","    ",181],["T_COMMENT","\/\/ their delta.\n",181],["T_WHITESPACE","    ",182],["T_VARIABLE","$delta_callbacks",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_WHITESPACE","\n      ",182],["T_COMMENT","\/\/ Continuous field values: all values are equal.\n",183],["T_WHITESPACE","      ",184],["T_FUNCTION","function",184],"(",["T_VARIABLE","$delta",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE"," ",184],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_STRING","TRUE",184],";",["T_WHITESPACE"," ",184],"}",",",["T_WHITESPACE","\n      ",184],["T_COMMENT","\/\/ Alternated field values: only the even ones are equal.\n",185],["T_WHITESPACE","      ",186],["T_FUNCTION","function",186],"(",["T_VARIABLE","$delta",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE"," ",186],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$delta",186],["T_WHITESPACE"," ",186],"%",["T_WHITESPACE"," ",186],["T_LNUMBER","2",186],["T_WHITESPACE"," ",186],["T_IS_NOT_IDENTICAL","!==",186],["T_WHITESPACE"," ",186],["T_LNUMBER","0",186],";",["T_WHITESPACE"," ",186],"}",",",["T_WHITESPACE","\n      ",186],["T_COMMENT","\/\/ Sparse field values: only the \"middle\" ones are equal.\n",187],["T_WHITESPACE","      ",188],["T_FUNCTION","function",188],"(",["T_VARIABLE","$delta",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE"," ",188],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$delta",188],["T_WHITESPACE"," ",188],["T_IS_IDENTICAL","===",188],["T_WHITESPACE"," ",188],["T_LNUMBER","1",188],["T_WHITESPACE"," ",188],["T_BOOLEAN_OR","||",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$delta",188],["T_WHITESPACE"," ",188],["T_IS_IDENTICAL","===",188],["T_WHITESPACE"," ",188],["T_LNUMBER","2",188],";",["T_WHITESPACE"," ",188],"}",",",["T_WHITESPACE","\n      ",188],["T_COMMENT","\/\/ Sparse field values: only the \"extreme\" ones are equal.\n",189],["T_WHITESPACE","      ",190],["T_FUNCTION","function",190],"(",["T_VARIABLE","$delta",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE"," ",190],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$delta",190],["T_WHITESPACE"," ",190],["T_IS_IDENTICAL","===",190],["T_WHITESPACE"," ",190],["T_LNUMBER","0",190],["T_WHITESPACE"," ",190],["T_BOOLEAN_OR","||",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$delta",190],["T_WHITESPACE"," ",190],["T_IS_IDENTICAL","===",190],["T_WHITESPACE"," ",190],["T_LNUMBER","3",190],";",["T_WHITESPACE"," ",190],"}",",",["T_WHITESPACE","\n    ",190],")",";",["T_WHITESPACE","\n\n    ",191],["T_FOREACH","foreach",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$delta_callbacks",193],["T_WHITESPACE"," ",193],["T_AS","as",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$delta_callback",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n      ",193],["T_VARIABLE","$field_values",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","unchangedFieldValues",194],";",["T_WHITESPACE","\n\n      ",194],["T_FOR","for",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$delta",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],";",["T_WHITESPACE"," ",196],["T_VARIABLE","$delta",196],["T_WHITESPACE"," ",196],"<",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","cardinality",196],";",["T_WHITESPACE"," ",196],["T_VARIABLE","$delta",196],["T_INC","++",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$delta_callback",197],"(",["T_VARIABLE","$delta",197],")",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n          ",197],["T_FOREACH","foreach",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","columns",198],["T_WHITESPACE"," ",198],["T_AS","as",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$column",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_STRING","in_array",199],"(",["T_VARIABLE","$column",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","synchronized",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n              ",199],["T_VARIABLE","$field_values",200],"[",["T_VARIABLE","$sync_langcode",200],"]","[",["T_VARIABLE","$delta",200],"]","[",["T_VARIABLE","$column",200],"]",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$field_values",200],"[",["T_VARIABLE","$sync_langcode",200],"]","[",["T_LNUMBER","0",200],"]","[",["T_VARIABLE","$column",200],"]",";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n          ",201],"}",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n      ",203],"}",["T_WHITESPACE","\n\n      ",204],["T_VARIABLE","$changed_items",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$field_values",206],"[",["T_VARIABLE","$sync_langcode",206],"]",";",["T_WHITESPACE","\n      ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","synchronizer",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","synchronizeItems",207],"(",["T_VARIABLE","$field_values",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$unchanged_items",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$sync_langcode",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","langcodes",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","synchronized",207],")",";",["T_WHITESPACE","\n\n      ",207],["T_FOREACH","foreach",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","unchangedFieldValues",209],["T_WHITESPACE"," ",209],["T_AS","as",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$langcode",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$unchanged_items",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n        ",209],["T_FOR","for",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$delta",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_LNUMBER","0",210],";",["T_WHITESPACE"," ",210],["T_VARIABLE","$delta",210],["T_WHITESPACE"," ",210],"<",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","cardinality",210],";",["T_WHITESPACE"," ",210],["T_VARIABLE","$delta",210],["T_INC","++",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n          ",210],["T_FOREACH","foreach",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","columns",211],["T_WHITESPACE"," ",211],["T_AS","as",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$column",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_COMMENT","\/\/ The first item is always unchanged hence it is retained by the\n",212],["T_WHITESPACE","            ",213],["T_COMMENT","\/\/ synchronization process. The other ones are retained or synced\n",213],["T_WHITESPACE","            ",214],["T_COMMENT","\/\/ depending on the logic implemented by the delta callback and\n",214],["T_WHITESPACE","            ",215],["T_COMMENT","\/\/ whether it is a sync column or not.\n",215],["T_WHITESPACE","            ",216],["T_VARIABLE","$value",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$delta",216],["T_WHITESPACE"," ",216],">",["T_WHITESPACE"," ",216],["T_LNUMBER","0",216],["T_WHITESPACE"," ",216],["T_BOOLEAN_AND","&&",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$delta_callback",216],"(",["T_VARIABLE","$delta",216],")",["T_WHITESPACE"," ",216],["T_BOOLEAN_AND","&&",216],["T_WHITESPACE"," ",216],["T_STRING","in_array",216],"(",["T_VARIABLE","$column",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","synchronized",216],")",["T_WHITESPACE"," ",216],"?",["T_WHITESPACE"," ",216],["T_VARIABLE","$changed_items",216],"[",["T_LNUMBER","0",216],"]","[",["T_VARIABLE","$column",216],"]",["T_WHITESPACE"," ",216],":",["T_WHITESPACE"," ",216],["T_VARIABLE","$unchanged_items",216],"[",["T_VARIABLE","$delta",216],"]","[",["T_VARIABLE","$column",216],"]",";",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","assertEqual",217],"(",["T_VARIABLE","$field_values",217],"[",["T_VARIABLE","$langcode",217],"]","[",["T_VARIABLE","$delta",217],"]","[",["T_VARIABLE","$column",217],"]",",",["T_WHITESPACE"," ",217],["T_VARIABLE","$value",217],",",["T_WHITESPACE"," ",217],"\"",["T_ENCAPSED_AND_WHITESPACE","Item ",217],["T_VARIABLE","$delta",217],["T_ENCAPSED_AND_WHITESPACE"," column ",217],["T_VARIABLE","$column",217],["T_ENCAPSED_AND_WHITESPACE"," for langcode ",217],["T_VARIABLE","$langcode",217],["T_ENCAPSED_AND_WHITESPACE"," synced correctly",217],"\"",")",";",["T_WHITESPACE","\n          ",217],"}",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n      ",219],"}",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n  ",221],"}",["T_WHITESPACE","\n\n  ",222],["T_DOC_COMMENT","\/**\n   * Tests that one change in a synchronized column triggers a change in all columns.\n   *\/",224],["T_WHITESPACE","\n  ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","testDifferingSyncedColumns",227],"(",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$sync_langcode",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","langcodes",228],"[",["T_LNUMBER","2",228],"]",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$unchanged_items",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","unchangedFieldValues",229],"[",["T_VARIABLE","$sync_langcode",229],"]",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$field_values",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","unchangedFieldValues",230],";",["T_WHITESPACE","\n\n    ",230],["T_FOR","for",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$delta",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_LNUMBER","0",232],";",["T_WHITESPACE"," ",232],["T_VARIABLE","$delta",232],["T_WHITESPACE"," ",232],"<",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","cardinality",232],";",["T_WHITESPACE"," ",232],["T_VARIABLE","$delta",232],["T_INC","++",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n      ",232],["T_VARIABLE","$index",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$delta",233],["T_WHITESPACE"," ",233],"%",["T_WHITESPACE"," ",233],["T_LNUMBER","2",233],")",["T_WHITESPACE"," ",233],"+",["T_WHITESPACE"," ",233],["T_LNUMBER","1",233],";",["T_WHITESPACE","\n      ",233],["T_VARIABLE","$field_values",234],"[",["T_VARIABLE","$sync_langcode",234],"]","[",["T_VARIABLE","$delta",234],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sync'",234],["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_VARIABLE","$index",234],"]",["T_WHITESPACE"," ",234],["T_CONCAT_EQUAL",".=",234],["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'-updated'",234],";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_VARIABLE","$changed_items",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$field_values",237],"[",["T_VARIABLE","$sync_langcode",237],"]",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","synchronizer",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","synchronizeItems",238],"(",["T_VARIABLE","$field_values",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$unchanged_items",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$sync_langcode",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","langcodes",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","synchronized",238],")",";",["T_WHITESPACE","\n\n    ",238],["T_FOREACH","foreach",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","unchangedFieldValues",240],["T_WHITESPACE"," ",240],["T_AS","as",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$langcode",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$unchanged_items",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n      ",240],["T_FOR","for",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$delta",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_LNUMBER","0",241],";",["T_WHITESPACE"," ",241],["T_VARIABLE","$delta",241],["T_WHITESPACE"," ",241],"<",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","cardinality",241],";",["T_WHITESPACE"," ",241],["T_VARIABLE","$delta",241],["T_INC","++",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n        ",241],["T_FOREACH","foreach",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","columns",242],["T_WHITESPACE"," ",242],["T_AS","as",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$column",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n          ",242],["T_COMMENT","\/\/ If the column is synchronized, the value should have been synced,\n",243],["T_WHITESPACE","          ",244],["T_COMMENT","\/\/ for unsychronized columns, the value must not change.\n",244],["T_WHITESPACE","          ",245],["T_VARIABLE","$expected_value",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","in_array",245],"(",["T_VARIABLE","$column",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","synchronized",245],")",["T_WHITESPACE"," ",245],"?",["T_WHITESPACE"," ",245],["T_VARIABLE","$changed_items",245],"[",["T_VARIABLE","$delta",245],"]","[",["T_VARIABLE","$column",245],"]",["T_WHITESPACE"," ",245],":",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","unchangedFieldValues",245],"[",["T_VARIABLE","$langcode",245],"]","[",["T_VARIABLE","$delta",245],"]","[",["T_VARIABLE","$column",245],"]",";",["T_WHITESPACE","\n          ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","assertEqual",246],"(",["T_VARIABLE","$field_values",246],"[",["T_VARIABLE","$langcode",246],"]","[",["T_VARIABLE","$delta",246],"]","[",["T_VARIABLE","$column",246],"]",",",["T_WHITESPACE"," ",246],["T_VARIABLE","$expected_value",246],",",["T_WHITESPACE"," ",246],"\"",["T_ENCAPSED_AND_WHITESPACE","Differing Item ",246],["T_VARIABLE","$delta",246],["T_ENCAPSED_AND_WHITESPACE"," column ",246],["T_VARIABLE","$column",246],["T_ENCAPSED_AND_WHITESPACE"," for langcode ",246],["T_VARIABLE","$langcode",246],["T_ENCAPSED_AND_WHITESPACE"," synced correctly",246],"\"",")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n      ",247],"}",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n  ",249],"}",["T_WHITESPACE","\n\n",250],"}",["T_WHITESPACE","\n",252]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","filter",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","filter",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FilterFormat",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","user",7],["T_NS_SEPARATOR","\\",7],["T_STRING","RoleInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests text format default configuration.\n *\n * @group filter\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","FilterDefaultConfigTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","KernelTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_PUBLIC","public",16],["T_WHITESPACE"," ",16],["T_STATIC","static",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$modules",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_ARRAY","array",16],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",16],",",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'user'",16],",",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'filter'",16],",",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'filter_test'",16],")",";",["T_WHITESPACE","\n\n  ",16],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","setUp",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_STRING","parent",19],["T_DOUBLE_COLON","::",19],["T_STRING","setUp",19],"(",")",";",["T_WHITESPACE","\n\n    ",19],["T_COMMENT","\/\/ Drupal\\filter\\FilterPermissions::permissions() builds a URL to output\n",21],["T_WHITESPACE","    ",22],["T_COMMENT","\/\/ a link in the description.\n",22],["T_WHITESPACE","\n    ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","installEntitySchema",24],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",24],")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ Install filter_test module, which ships with custom default format.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","installConfig",27],"(",["T_ARRAY","array",27],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'filter_test'",27],")",")",";",["T_WHITESPACE","\n  ",27],"}",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Tests installation of default formats.\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","testInstallation",33],"(",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_COMMENT","\/\/ Verify that the format was installed correctly.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$format",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","FilterFormat",35],["T_DOUBLE_COLON","::",35],["T_STRING","load",35],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_test'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","assertTrue",36],"(",["T_BOOL_CAST","(bool)",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$format",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","assertEqual",37],"(",["T_VARIABLE","$format",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","id",37],"(",")",",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'filter_test'",37],")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertEqual",38],"(",["T_VARIABLE","$format",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","label",38],"(",")",",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Test format'",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertEqual",39],"(",["T_VARIABLE","$format",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",39],")",",",["T_WHITESPACE"," ",39],["T_LNUMBER","2",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Verify that format default property values have been added\/injected.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertTrue",42],"(",["T_VARIABLE","$format",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","uuid",42],"(",")",")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Verify that the loaded format does not contain any roles.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertEqual",45],"(",["T_VARIABLE","$format",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'roles'",45],")",",",["T_WHITESPACE"," ",45],["T_STRING","NULL",45],")",";",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/\/ Verify that the defined roles in the default config have been processed.\n",46],["T_WHITESPACE","    ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEqual",47],"(",["T_STRING","array_keys",47],"(",["T_STRING","filter_get_roles_by_format",47],"(",["T_VARIABLE","$format",47],")",")",",",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_WHITESPACE","\n      ",47],["T_STRING","RoleInterface",48],["T_DOUBLE_COLON","::",48],["T_STRING","ANONYMOUS_ID",48],",",["T_WHITESPACE","\n      ",48],["T_STRING","RoleInterface",49],["T_DOUBLE_COLON","::",49],["T_STRING","AUTHENTICATED_ID",49],",",["T_WHITESPACE","\n    ",49],")",")",";",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/\/ Verify enabled filters.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$filters",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$format",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","get",53],"(",["T_CONSTANT_ENCAPSED_STRING","'filters'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertEqual",54],"(",["T_VARIABLE","$filters",54],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_html_escape'",54],"]","[",["T_CONSTANT_ENCAPSED_STRING","'status'",54],"]",",",["T_WHITESPACE"," ",54],["T_LNUMBER","1",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEqual",55],"(",["T_VARIABLE","$filters",55],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_html_escape'",55],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",55],"]",",",["T_WHITESPACE"," ",55],"-",["T_LNUMBER","10",55],")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertEqual",56],"(",["T_VARIABLE","$filters",56],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_html_escape'",56],"]","[",["T_CONSTANT_ENCAPSED_STRING","'provider'",56],"]",",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'filter'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertEqual",57],"(",["T_VARIABLE","$filters",57],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_html_escape'",57],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",57],"]",",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",")",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertEqual",58],"(",["T_VARIABLE","$filters",58],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_autop'",58],"]","[",["T_CONSTANT_ENCAPSED_STRING","'status'",58],"]",",",["T_WHITESPACE"," ",58],["T_LNUMBER","1",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertEqual",59],"(",["T_VARIABLE","$filters",59],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_autop'",59],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",59],"]",",",["T_WHITESPACE"," ",59],["T_LNUMBER","0",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertEqual",60],"(",["T_VARIABLE","$filters",60],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_autop'",60],"]","[",["T_CONSTANT_ENCAPSED_STRING","'provider'",60],"]",",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'filter'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertEqual",61],"(",["T_VARIABLE","$filters",61],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_autop'",61],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",61],"]",",",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",")",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertEqual",62],"(",["T_VARIABLE","$filters",62],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_url'",62],"]","[",["T_CONSTANT_ENCAPSED_STRING","'status'",62],"]",",",["T_WHITESPACE"," ",62],["T_LNUMBER","1",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertEqual",63],"(",["T_VARIABLE","$filters",63],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_url'",63],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",63],"]",",",["T_WHITESPACE"," ",63],["T_LNUMBER","0",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertEqual",64],"(",["T_VARIABLE","$filters",64],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_url'",64],"]","[",["T_CONSTANT_ENCAPSED_STRING","'provider'",64],"]",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'filter'",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertEqual",65],"(",["T_VARIABLE","$filters",65],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_url'",65],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",65],"]",",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_WHITESPACE","\n      ",65],["T_CONSTANT_ENCAPSED_STRING","'filter_url_length'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_LNUMBER","72",66],",",["T_WHITESPACE","\n    ",66],")",")",";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * Tests that changes to FilterFormat::$roles do not have an effect.\n   *\/",70],["T_WHITESPACE","\n  ",72],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","testUpdateRoles",73],"(",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_COMMENT","\/\/ Verify role permissions declared in default config.\n",74],["T_WHITESPACE","    ",75],["T_VARIABLE","$format",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","FilterFormat",75],["T_DOUBLE_COLON","::",75],["T_STRING","load",75],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_test'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_STRING","array_keys",76],"(",["T_STRING","filter_get_roles_by_format",76],"(",["T_VARIABLE","$format",76],")",")",",",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_WHITESPACE","\n      ",76],["T_STRING","RoleInterface",77],["T_DOUBLE_COLON","::",77],["T_STRING","ANONYMOUS_ID",77],",",["T_WHITESPACE","\n      ",77],["T_STRING","RoleInterface",78],["T_DOUBLE_COLON","::",78],["T_STRING","AUTHENTICATED_ID",78],",",["T_WHITESPACE","\n    ",78],")",")",";",["T_WHITESPACE","\n\n    ",79],["T_COMMENT","\/\/ Attempt to change roles.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$format",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","set",82],"(",["T_CONSTANT_ENCAPSED_STRING","'roles'",82],",",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n      ",82],["T_STRING","RoleInterface",83],["T_DOUBLE_COLON","::",83],["T_STRING","AUTHENTICATED_ID",83],",",["T_WHITESPACE","\n    ",83],")",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$format",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","save",85],"(",")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Verify that roles have not been updated.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$format",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","FilterFormat",88],["T_DOUBLE_COLON","::",88],["T_STRING","load",88],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_test'",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertEqual",89],"(",["T_STRING","array_keys",89],"(",["T_STRING","filter_get_roles_by_format",89],"(",["T_VARIABLE","$format",89],")",")",",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_WHITESPACE","\n      ",89],["T_STRING","RoleInterface",90],["T_DOUBLE_COLON","::",90],["T_STRING","ANONYMOUS_ID",90],",",["T_WHITESPACE","\n      ",90],["T_STRING","RoleInterface",91],["T_DOUBLE_COLON","::",91],["T_STRING","AUTHENTICATED_ID",91],",",["T_WHITESPACE","\n    ",91],")",")",";",["T_WHITESPACE","\n  ",92],"}",["T_WHITESPACE","\n\n",93],"}",["T_WHITESPACE","\n",95]]
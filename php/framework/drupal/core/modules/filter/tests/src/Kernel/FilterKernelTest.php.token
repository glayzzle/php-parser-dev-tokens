[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","filter",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Html",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Render",7],["T_NS_SEPARATOR","\\",7],["T_STRING","RenderContext",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","editor",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EditorXssFilter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Standard",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","filter",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FilterFormat",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","filter",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FilterPluginCollection",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","KernelTests",11],["T_NS_SEPARATOR","\\",11],["T_STRING","KernelTestBase",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Tests Filter module filters individually.\n *\n * @group filter\n *\/",13],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","FilterKernelTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","KernelTestBase",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_STATIC","static",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$modules",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'filter'",25],")",";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\filter\\Plugin\\FilterInterface[]\n   *\/",27],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$filters",30],";",["T_WHITESPACE","\n\n  ",30],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","setUp",32],"(",")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n    ",32],["T_STRING","parent",33],["T_DOUBLE_COLON","::",33],["T_STRING","setUp",33],"(",")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","installConfig",34],"(",["T_ARRAY","array",34],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",34],")",")",";",["T_WHITESPACE","\n\n    ",34],["T_VARIABLE","$manager",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","container",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","get",36],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.filter'",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$bag",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","FilterPluginCollection",37],"(",["T_VARIABLE","$manager",37],",",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",")",")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","filters",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$bag",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getAll",38],"(",")",";",["T_WHITESPACE","\n  ",38],"}",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * Tests the align filter.\n   *\/",41],["T_WHITESPACE","\n  ",43],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","testAlignFilter",44],"(",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$filter",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","filters",45],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_align'",45],"]",";",["T_WHITESPACE","\n\n    ",45],["T_VARIABLE","$test",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],"(",["T_VARIABLE","$input",47],")",["T_WHITESPACE"," ",47],["T_USE","use",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$filter",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n      ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$filter",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","process",48],"(",["T_VARIABLE","$input",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'und'",48],")",";",["T_WHITESPACE","\n    ",48],"}",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ No data-align attribute.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$input",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" \/>'",52],";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$expected",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$input",53],";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertIdentical",54],"(",["T_VARIABLE","$expected",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$test",54],"(",["T_VARIABLE","$input",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","getProcessedText",54],"(",")",")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Data-align attribute: all 3 allowed values.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$input",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-align=\"left\" \/>'",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$expected",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" class=\"align-left\" \/>'",58],";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertIdentical",59],"(",["T_VARIABLE","$expected",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$test",59],"(",["T_VARIABLE","$input",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getProcessedText",59],"(",")",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$input",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-align=\"center\" \/>'",60],";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$expected",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" class=\"align-center\" \/>'",61],";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertIdentical",62],"(",["T_VARIABLE","$expected",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$test",62],"(",["T_VARIABLE","$input",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getProcessedText",62],"(",")",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$input",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-align=\"right\" \/>'",63],";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$expected",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" class=\"align-right\" \/>'",64],";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertIdentical",65],"(",["T_VARIABLE","$expected",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$test",65],"(",["T_VARIABLE","$input",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getProcessedText",65],"(",")",")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ Data-align attribute: a disallowed value.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$input",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-align=\"left foobar\" \/>'",68],";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$expected",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" \/>'",69],";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertIdentical",70],"(",["T_VARIABLE","$expected",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$test",70],"(",["T_VARIABLE","$input",70],")",["T_OBJECT_OPERATOR","->",70],["T_STRING","getProcessedText",70],"(",")",")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Empty data-align attribute.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$input",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-align=\"\" \/>'",73],";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$expected",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" \/>'",74],";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertIdentical",75],"(",["T_VARIABLE","$expected",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$test",75],"(",["T_VARIABLE","$input",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getProcessedText",75],"(",")",")",";",["T_WHITESPACE","\n\n    ",75],["T_COMMENT","\/\/ Ensure the filter also works with uncommon yet valid attribute quoting.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$input",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'<img src=llama.jpg data-align=right \/>'",78],";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$expected",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" class=\"align-right\" \/>'",79],";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$output",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$test",80],"(",["T_VARIABLE","$input",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertIdentical",81],"(",["T_VARIABLE","$expected",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$output",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getProcessedText",81],"(",")",")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Security test: attempt to inject an additional class.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$input",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-align=\"center another-class-here\" \/>'",84],";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$expected",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" \/>'",85],";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$output",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$test",86],"(",["T_VARIABLE","$input",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertIdentical",87],"(",["T_VARIABLE","$expected",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$output",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getProcessedText",87],"(",")",")",";",["T_WHITESPACE","\n\n    ",87],["T_COMMENT","\/\/ Security test: attempt an XSS.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$input",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-align=\"center \\'onclick=\\'alert(foo);\" \/>'",90],";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$expected",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" \/>'",91],";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$output",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$test",92],"(",["T_VARIABLE","$input",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertIdentical",93],"(",["T_VARIABLE","$expected",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$output",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getProcessedText",93],"(",")",")",";",["T_WHITESPACE","\n  ",93],"}",["T_WHITESPACE","\n\n  ",94],["T_DOC_COMMENT","\/**\n   * Tests the caption filter.\n   *\/",96],["T_WHITESPACE","\n  ",98],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","testCaptionFilter",99],"(",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n    ",99],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",100],["T_WHITESPACE","\n    ",100],["T_VARIABLE","$renderer",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Drupal",101],["T_DOUBLE_COLON","::",101],["T_STRING","service",101],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$filter",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","filters",102],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_caption'",102],"]",";",["T_WHITESPACE","\n\n    ",102],["T_VARIABLE","$test",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],"(",["T_VARIABLE","$input",104],")",["T_WHITESPACE"," ",104],["T_USE","use",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$filter",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$renderer",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n      ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$renderer",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","executeInRenderContext",105],"(",["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","RenderContext",105],"(",")",",",["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],"(",")",["T_WHITESPACE"," ",105],["T_USE","use",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$input",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$filter",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$filter",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","process",106],"(",["T_VARIABLE","$input",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'und'",106],")",";",["T_WHITESPACE","\n      ",106],"}",")",";",["T_WHITESPACE","\n    ",107],"}",";",["T_WHITESPACE","\n\n    ",108],["T_VARIABLE","$attached_library",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_WHITESPACE","\n      ",110],["T_CONSTANT_ENCAPSED_STRING","'library'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_WHITESPACE","\n        ",111],["T_CONSTANT_ENCAPSED_STRING","'filter\/caption'",112],",",["T_WHITESPACE","\n      ",112],")",",",["T_WHITESPACE","\n    ",113],")",";",["T_WHITESPACE","\n\n    ",114],["T_COMMENT","\/\/ No data-caption attribute.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$input",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" \/>'",117],";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$expected",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$input",118],";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertIdentical",119],"(",["T_VARIABLE","$expected",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$test",119],"(",["T_VARIABLE","$input",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getProcessedText",119],"(",")",")",";",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ Data-caption attribute.\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$input",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"Loquacious llama!\" \/>'",122],";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$expected",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>Loquacious llama!<\/figcaption><\/figure>'",123],";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$output",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$test",124],"(",["T_VARIABLE","$input",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertIdentical",125],"(",["T_VARIABLE","$expected",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$output",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getProcessedText",125],"(",")",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertIdentical",126],"(",["T_VARIABLE","$attached_library",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$output",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getAttachments",126],"(",")",")",";",["T_WHITESPACE","\n\n    ",126],["T_COMMENT","\/\/ Empty data-caption attribute.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$input",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"\" \/>'",129],";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$expected",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" \/>'",130],";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertIdentical",131],"(",["T_VARIABLE","$expected",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$test",131],"(",["T_VARIABLE","$input",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getProcessedText",131],"(",")",")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ HTML entities in the caption.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$input",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"&ldquo;Loquacious llama!&rdquo;\" \/>'",134],";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$expected",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>\u00e2\u0080\u009cLoquacious llama!\u00e2\u0080\u009d<\/figcaption><\/figure>'",135],";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$output",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$test",136],"(",["T_VARIABLE","$input",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertIdentical",137],"(",["T_VARIABLE","$expected",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$output",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getProcessedText",137],"(",")",")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","assertIdentical",138],"(",["T_VARIABLE","$attached_library",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$output",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getAttachments",138],"(",")",")",";",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ HTML encoded as HTML entities in data-caption attribute.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$input",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"&lt;em&gt;Loquacious llama!&lt;\/em&gt;\" \/>'",141],";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$expected",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption><em>Loquacious llama!<\/em><\/figcaption><\/figure>'",142],";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$output",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$test",143],"(",["T_VARIABLE","$input",143],")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertIdentical",144],"(",["T_VARIABLE","$expected",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$output",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getProcessedText",144],"(",")",")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertIdentical",145],"(",["T_VARIABLE","$attached_library",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$output",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getAttachments",145],"(",")",")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ HTML (not encoded as HTML entities) in data-caption attribute, which is\n",147],["T_WHITESPACE","    ",148],["T_COMMENT","\/\/ not allowed by the HTML spec, but may happen when people manually write\n",148],["T_WHITESPACE","    ",149],["T_COMMENT","\/\/ HTML, so we explicitly support it.\n",149],["T_WHITESPACE","    ",150],["T_VARIABLE","$input",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"<em>Loquacious llama!<\/em>\" \/>'",150],";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$expected",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption><em>Loquacious llama!<\/em><\/figcaption><\/figure>'",151],";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$output",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$test",152],"(",["T_VARIABLE","$input",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertIdentical",153],"(",["T_VARIABLE","$expected",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$output",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getProcessedText",153],"(",")",")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertIdentical",154],"(",["T_VARIABLE","$attached_library",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$output",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getAttachments",154],"(",")",")",";",["T_WHITESPACE","\n\n    ",154],["T_COMMENT","\/\/ Security test: attempt an XSS.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$input",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"<script>alert(\\'Loquacious llama!\\')<\/script>\" \/>'",157],";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$expected",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>alert(\\'Loquacious llama!\\')<\/figcaption><\/figure>'",158],";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$output",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$test",159],"(",["T_VARIABLE","$input",159],")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","assertIdentical",160],"(",["T_VARIABLE","$expected",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$output",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getProcessedText",160],"(",")",")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertIdentical",161],"(",["T_VARIABLE","$attached_library",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$output",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getAttachments",161],"(",")",")",";",["T_WHITESPACE","\n\n    ",161],["T_COMMENT","\/\/ Ensure the filter also works with uncommon yet valid attribute quoting.\n",163],["T_WHITESPACE","    ",164],["T_VARIABLE","$input",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'<img src=llama.jpg data-caption=\\'Loquacious llama!\\' \/>'",164],";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$expected",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>Loquacious llama!<\/figcaption><\/figure>'",165],";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$output",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$test",166],"(",["T_VARIABLE","$input",166],")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assertIdentical",167],"(",["T_VARIABLE","$expected",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$output",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getProcessedText",167],"(",")",")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertIdentical",168],"(",["T_VARIABLE","$attached_library",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$output",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getAttachments",168],"(",")",")",";",["T_WHITESPACE","\n\n    ",168],["T_COMMENT","\/\/ Finally, ensure that this also works on any other tag.\n",170],["T_WHITESPACE","    ",171],["T_VARIABLE","$input",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'<video src=\"llama.jpg\" data-caption=\"Loquacious llama!\" \/>'",171],";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$expected",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><video src=\"llama.jpg\"><\/video><figcaption>Loquacious llama!<\/figcaption><\/figure>'",172],";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$output",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$test",173],"(",["T_VARIABLE","$input",173],")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","assertIdentical",174],"(",["T_VARIABLE","$expected",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$output",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getProcessedText",174],"(",")",")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertIdentical",175],"(",["T_VARIABLE","$attached_library",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$output",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getAttachments",175],"(",")",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$input",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'<foobar data-caption=\"Loquacious llama!\">baz<\/foobar>'",176],";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$expected",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><foobar>baz<\/foobar><figcaption>Loquacious llama!<\/figcaption><\/figure>'",177],";",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$output",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$test",178],"(",["T_VARIABLE","$input",178],")",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","assertIdentical",179],"(",["T_VARIABLE","$expected",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$output",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getProcessedText",179],"(",")",")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertIdentical",180],"(",["T_VARIABLE","$attached_library",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$output",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getAttachments",180],"(",")",")",";",["T_WHITESPACE","\n\n    ",180],["T_COMMENT","\/\/ Ensure the caption filter works for linked images.\n",182],["T_WHITESPACE","    ",183],["T_VARIABLE","$input",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/example.com\/llamas\/are\/awesome\/but\/kittens\/are\/cool\/too\"><img src=\"llama.jpg\" data-caption=\"Loquacious llama!\" \/><\/a>'",183],";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$expected",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><a href=\"http:\/\/example.com\/llamas\/are\/awesome\/but\/kittens\/are\/cool\/too\"><img src=\"llama.jpg\" \/><\/a>'",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'<figcaption>Loquacious llama!<\/figcaption><\/figure>'",184],";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$output",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$test",185],"(",["T_VARIABLE","$input",185],")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertIdentical",186],"(",["T_VARIABLE","$expected",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$output",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getProcessedText",186],"(",")",")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","assertIdentical",187],"(",["T_VARIABLE","$attached_library",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$output",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getAttachments",187],"(",")",")",";",["T_WHITESPACE","\n\n    ",187],["T_COMMENT","\/\/ So far we've tested that the caption filter works correctly. But we also\n",189],["T_WHITESPACE","    ",190],["T_COMMENT","\/\/ want to make sure that it works well in tandem with the \"Limit allowed\n",190],["T_WHITESPACE","    ",191],["T_COMMENT","\/\/ HTML tags\" filter, which it is typically used with.\n",191],["T_WHITESPACE","    ",192],["T_VARIABLE","$html_filter",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","filters",192],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_html'",192],"]",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$html_filter",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","setConfiguration",193],"(",["T_ARRAY","array",193],"(",["T_WHITESPACE","\n      ",193],["T_CONSTANT_ENCAPSED_STRING","'settings'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n        ",194],["T_CONSTANT_ENCAPSED_STRING","'allowed_html'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'<img src data-align data-caption>'",195],",",["T_WHITESPACE","\n        ",195],["T_CONSTANT_ENCAPSED_STRING","'filter_html_help'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_LNUMBER","1",196],",",["T_WHITESPACE","\n        ",196],["T_CONSTANT_ENCAPSED_STRING","'filter_html_nofollow'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],",",["T_WHITESPACE","\n      ",197],")",["T_WHITESPACE","\n    ",198],")",")",";",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$test_with_html_filter",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$input",200],")",["T_WHITESPACE"," ",200],["T_USE","use",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$filter",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$html_filter",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$renderer",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n      ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$renderer",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","executeInRenderContext",201],"(",["T_NEW","new",201],["T_WHITESPACE"," ",201],["T_STRING","RenderContext",201],"(",")",",",["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],"(",")",["T_WHITESPACE"," ",201],["T_USE","use",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$input",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$filter",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$html_filter",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n        ",201],["T_COMMENT","\/\/ 1. Apply HTML filter's processing step.\n",202],["T_WHITESPACE","        ",203],["T_VARIABLE","$output",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$html_filter",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","process",203],"(",["T_VARIABLE","$input",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'und'",203],")",";",["T_WHITESPACE","\n        ",203],["T_COMMENT","\/\/ 2. Apply caption filter's processing step.\n",204],["T_WHITESPACE","        ",205],["T_VARIABLE","$output",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$filter",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","process",205],"(",["T_VARIABLE","$output",205],",",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'und'",205],")",";",["T_WHITESPACE","\n        ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$output",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getProcessedText",206],"(",")",";",["T_WHITESPACE","\n      ",206],"}",")",";",["T_WHITESPACE","\n    ",207],"}",";",["T_WHITESPACE","\n    ",208],["T_COMMENT","\/\/ Editor XSS filter.\n",209],["T_WHITESPACE","    ",210],["T_VARIABLE","$test_editor_xss_filter",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$input",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n      ",210],["T_VARIABLE","$dummy_filter_format",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","FilterFormat",211],["T_DOUBLE_COLON","::",211],["T_STRING","create",211],"(",")",";",["T_WHITESPACE","\n      ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_STRING","Standard",212],["T_DOUBLE_COLON","::",212],["T_STRING","filterXss",212],"(",["T_VARIABLE","$input",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$dummy_filter_format",212],")",";",["T_WHITESPACE","\n    ",212],"}",";",["T_WHITESPACE","\n\n    ",213],["T_COMMENT","\/\/ All the tricky cases encountered at https:\/\/www.drupal.org\/node\/2105841.\n",215],["T_WHITESPACE","    ",216],["T_COMMENT","\/\/ A plain URL preceded by text.\n",216],["T_WHITESPACE","    ",217],["T_VARIABLE","$input",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'<img data-caption=\"See https:\/\/www.drupal.org\" src=\"llama.jpg\" \/>'",217],";",["T_WHITESPACE","\n    ",217],["T_VARIABLE","$expected",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>See https:\/\/www.drupal.org<\/figcaption><\/figure>'",218],";",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","assertIdentical",219],"(",["T_VARIABLE","$expected",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$test_with_html_filter",219],"(",["T_VARIABLE","$input",219],")",")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","assertIdentical",220],"(",["T_VARIABLE","$input",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$test_editor_xss_filter",220],"(",["T_VARIABLE","$input",220],")",")",";",["T_WHITESPACE","\n\n    ",220],["T_COMMENT","\/\/ An anchor.\n",222],["T_WHITESPACE","    ",223],["T_VARIABLE","$input",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'<img data-caption=\"This is a &lt;a href=&quot;https:\/\/www.drupal.org&quot;&gt;quick&lt;\/a&gt; test\u00e2\u0080\u00a6\" src=\"llama.jpg\" \/>'",223],";",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$expected",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>This is a <a href=\"https:\/\/www.drupal.org\">quick<\/a> test\u00e2\u0080\u00a6<\/figcaption><\/figure>'",224],";",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","assertIdentical",225],"(",["T_VARIABLE","$expected",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$test_with_html_filter",225],"(",["T_VARIABLE","$input",225],")",")",";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertIdentical",226],"(",["T_VARIABLE","$input",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$test_editor_xss_filter",226],"(",["T_VARIABLE","$input",226],")",")",";",["T_WHITESPACE","\n\n    ",226],["T_COMMENT","\/\/ A plain URL surrounded by parentheses.\n",228],["T_WHITESPACE","    ",229],["T_VARIABLE","$input",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'<img data-caption=\"(https:\/\/www.drupal.org)\" src=\"llama.jpg\" \/>'",229],";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$expected",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>(https:\/\/www.drupal.org)<\/figcaption><\/figure>'",230],";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","assertIdentical",231],"(",["T_VARIABLE","$expected",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$test_with_html_filter",231],"(",["T_VARIABLE","$input",231],")",")",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","assertIdentical",232],"(",["T_VARIABLE","$input",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$test_editor_xss_filter",232],"(",["T_VARIABLE","$input",232],")",")",";",["T_WHITESPACE","\n\n    ",232],["T_COMMENT","\/\/ A source being credited.\n",234],["T_WHITESPACE","    ",235],["T_VARIABLE","$input",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'<img data-caption=\"Source: Wikipedia\" src=\"llama.jpg\" \/>'",235],";",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$expected",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>Source: Wikipedia<\/figcaption><\/figure>'",236],";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","assertIdentical",237],"(",["T_VARIABLE","$expected",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$test_with_html_filter",237],"(",["T_VARIABLE","$input",237],")",")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","assertIdentical",238],"(",["T_VARIABLE","$input",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$test_editor_xss_filter",238],"(",["T_VARIABLE","$input",238],")",")",";",["T_WHITESPACE","\n\n    ",238],["T_COMMENT","\/\/ A source being credited, without a space after the colon.\n",240],["T_WHITESPACE","    ",241],["T_VARIABLE","$input",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'<img data-caption=\"Source:Wikipedia\" src=\"llama.jpg\" \/>'",241],";",["T_WHITESPACE","\n    ",241],["T_VARIABLE","$expected",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>Source:Wikipedia<\/figcaption><\/figure>'",242],";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","assertIdentical",243],"(",["T_VARIABLE","$expected",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$test_with_html_filter",243],"(",["T_VARIABLE","$input",243],")",")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","assertIdentical",244],"(",["T_VARIABLE","$input",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$test_editor_xss_filter",244],"(",["T_VARIABLE","$input",244],")",")",";",["T_WHITESPACE","\n\n    ",244],["T_COMMENT","\/\/ A pretty crazy edge case where we have two colons.\n",246],["T_WHITESPACE","    ",247],["T_VARIABLE","$input",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'<img data-caption=\"Interesting (Scope resolution operator ::)\" src=\"llama.jpg\" \/>'",247],";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$expected",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>Interesting (Scope resolution operator ::)<\/figcaption><\/figure>'",248],";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertIdentical",249],"(",["T_VARIABLE","$expected",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$test_with_html_filter",249],"(",["T_VARIABLE","$input",249],")",")",";",["T_WHITESPACE","\n    ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertIdentical",250],"(",["T_VARIABLE","$input",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$test_editor_xss_filter",250],"(",["T_VARIABLE","$input",250],")",")",";",["T_WHITESPACE","\n\n    ",250],["T_COMMENT","\/\/ An evil anchor (to ensure XSS filtering is applied to the caption also).\n",252],["T_WHITESPACE","    ",253],["T_VARIABLE","$input",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'<img data-caption=\"This is an &lt;a href=&quot;javascript:alert();&quot;&gt;evil&lt;\/a&gt; test\u00e2\u0080\u00a6\" src=\"llama.jpg\" \/>'",253],";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$expected",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>This is an <a href=\"alert();\">evil<\/a> test\u00e2\u0080\u00a6<\/figcaption><\/figure>'",254],";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertIdentical",255],"(",["T_VARIABLE","$expected",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$test_with_html_filter",255],"(",["T_VARIABLE","$input",255],")",")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$expected_xss_filtered",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'<img data-caption=\"This is an &lt;a href=&quot;alert();&quot;&gt;evil&lt;\/a&gt; test\u00e2\u0080\u00a6\" src=\"llama.jpg\" \/>'",256],";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","assertIdentical",257],"(",["T_VARIABLE","$expected_xss_filtered",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$test_editor_xss_filter",257],"(",["T_VARIABLE","$input",257],")",")",";",["T_WHITESPACE","\n  ",257],"}",["T_WHITESPACE","\n\n  ",258],["T_DOC_COMMENT","\/**\n   * Tests the combination of the align and caption filters.\n   *\/",260],["T_WHITESPACE","\n  ",262],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","testAlignAndCaptionFilters",263],"(",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n    ",263],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",264],["T_WHITESPACE","\n    ",264],["T_VARIABLE","$renderer",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_NS_SEPARATOR","\\",265],["T_STRING","Drupal",265],["T_DOUBLE_COLON","::",265],["T_STRING","service",265],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",265],")",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$align_filter",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","filters",266],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_align'",266],"]",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$caption_filter",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","filters",267],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_caption'",267],"]",";",["T_WHITESPACE","\n\n    ",267],["T_VARIABLE","$test",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],"(",["T_VARIABLE","$input",269],")",["T_WHITESPACE"," ",269],["T_USE","use",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$align_filter",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$caption_filter",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$renderer",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n      ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$renderer",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","executeInRenderContext",270],"(",["T_NEW","new",270],["T_WHITESPACE"," ",270],["T_STRING","RenderContext",270],"(",")",",",["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],"(",")",["T_WHITESPACE"," ",270],["T_USE","use",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$input",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$align_filter",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$caption_filter",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n        ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$caption_filter",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","process",271],"(",["T_VARIABLE","$align_filter",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","process",271],"(",["T_VARIABLE","$input",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'und'",271],")",",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'und'",271],")",";",["T_WHITESPACE","\n      ",271],"}",")",";",["T_WHITESPACE","\n    ",272],"}",";",["T_WHITESPACE","\n\n    ",273],["T_VARIABLE","$attached_library",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_ARRAY","array",275],"(",["T_WHITESPACE","\n      ",275],["T_CONSTANT_ENCAPSED_STRING","'library'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_ARRAY","array",276],"(",["T_WHITESPACE","\n        ",276],["T_CONSTANT_ENCAPSED_STRING","'filter\/caption'",277],",",["T_WHITESPACE","\n      ",277],")",",",["T_WHITESPACE","\n    ",278],")",";",["T_WHITESPACE","\n\n    ",279],["T_COMMENT","\/\/ Both data-caption and data-align attributes: all 3 allowed values for the\n",281],["T_WHITESPACE","    ",282],["T_COMMENT","\/\/ data-align attribute.\n",282],["T_WHITESPACE","    ",283],["T_VARIABLE","$input",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"Loquacious llama!\" data-align=\"left\" \/>'",283],";",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$expected",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\" class=\"align-left\"><img src=\"llama.jpg\" \/><figcaption>Loquacious llama!<\/figcaption><\/figure>'",284],";",["T_WHITESPACE","\n    ",284],["T_VARIABLE","$output",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$test",285],"(",["T_VARIABLE","$input",285],")",";",["T_WHITESPACE","\n    ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","assertIdentical",286],"(",["T_VARIABLE","$expected",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$output",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getProcessedText",286],"(",")",")",";",["T_WHITESPACE","\n    ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","assertIdentical",287],"(",["T_VARIABLE","$attached_library",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$output",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getAttachments",287],"(",")",")",";",["T_WHITESPACE","\n    ",287],["T_VARIABLE","$input",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"Loquacious llama!\" data-align=\"center\" \/>'",288],";",["T_WHITESPACE","\n    ",288],["T_VARIABLE","$expected",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\" class=\"align-center\"><img src=\"llama.jpg\" \/><figcaption>Loquacious llama!<\/figcaption><\/figure>'",289],";",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$output",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$test",290],"(",["T_VARIABLE","$input",290],")",";",["T_WHITESPACE","\n    ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","assertIdentical",291],"(",["T_VARIABLE","$expected",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$output",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getProcessedText",291],"(",")",")",";",["T_WHITESPACE","\n    ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","assertIdentical",292],"(",["T_VARIABLE","$attached_library",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$output",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getAttachments",292],"(",")",")",";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$input",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"Loquacious llama!\" data-align=\"right\" \/>'",293],";",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$expected",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\" class=\"align-right\"><img src=\"llama.jpg\" \/><figcaption>Loquacious llama!<\/figcaption><\/figure>'",294],";",["T_WHITESPACE","\n    ",294],["T_VARIABLE","$output",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$test",295],"(",["T_VARIABLE","$input",295],")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assertIdentical",296],"(",["T_VARIABLE","$expected",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$output",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getProcessedText",296],"(",")",")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","assertIdentical",297],"(",["T_VARIABLE","$attached_library",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$output",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getAttachments",297],"(",")",")",";",["T_WHITESPACE","\n\n    ",297],["T_COMMENT","\/\/ Both data-caption and data-align attributes, but a disallowed data-align\n",299],["T_WHITESPACE","    ",300],["T_COMMENT","\/\/ attribute value.\n",300],["T_WHITESPACE","    ",301],["T_VARIABLE","$input",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"llama.jpg\" data-caption=\"Loquacious llama!\" data-align=\"left foobar\" \/>'",301],";",["T_WHITESPACE","\n    ",301],["T_VARIABLE","$expected",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\"><img src=\"llama.jpg\" \/><figcaption>Loquacious llama!<\/figcaption><\/figure>'",302],";",["T_WHITESPACE","\n    ",302],["T_VARIABLE","$output",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$test",303],"(",["T_VARIABLE","$input",303],")",";",["T_WHITESPACE","\n    ",303],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","assertIdentical",304],"(",["T_VARIABLE","$expected",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$output",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getProcessedText",304],"(",")",")",";",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","assertIdentical",305],"(",["T_VARIABLE","$attached_library",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$output",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getAttachments",305],"(",")",")",";",["T_WHITESPACE","\n\n    ",305],["T_COMMENT","\/\/ Ensure both filters together work for linked images.\n",307],["T_WHITESPACE","    ",308],["T_VARIABLE","$input",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/example.com\/llamas\/are\/awesome\/but\/kittens\/are\/cool\/too\"><img src=\"llama.jpg\" data-caption=\"Loquacious llama!\" data-align=\"center\" \/><\/a>'",308],";",["T_WHITESPACE","\n    ",308],["T_VARIABLE","$expected",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'<figure role=\"group\" class=\"align-center\"><a href=\"http:\/\/example.com\/llamas\/are\/awesome\/but\/kittens\/are\/cool\/too\"><img src=\"llama.jpg\" \/><\/a>'",309],["T_WHITESPACE"," ",309],".",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",309],["T_WHITESPACE"," ",309],".",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'<figcaption>Loquacious llama!<\/figcaption><\/figure>'",309],";",["T_WHITESPACE","\n    ",309],["T_VARIABLE","$output",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$test",310],"(",["T_VARIABLE","$input",310],")",";",["T_WHITESPACE","\n    ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","assertIdentical",311],"(",["T_VARIABLE","$expected",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$output",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getProcessedText",311],"(",")",")",";",["T_WHITESPACE","\n    ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","assertIdentical",312],"(",["T_VARIABLE","$attached_library",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$output",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getAttachments",312],"(",")",")",";",["T_WHITESPACE","\n  ",312],"}",["T_WHITESPACE","\n\n  ",313],["T_DOC_COMMENT","\/**\n   * Tests the line break filter.\n   *\/",315],["T_WHITESPACE","\n  ",317],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","testLineBreakFilter",318],"(",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n    ",318],["T_COMMENT","\/\/ Get FilterAutoP object.\n",319],["T_WHITESPACE","    ",320],["T_VARIABLE","$filter",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","filters",320],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_autop'",320],"]",";",["T_WHITESPACE","\n\n    ",320],["T_COMMENT","\/\/ Since the line break filter naturally needs plenty of newlines in test\n",322],["T_WHITESPACE","    ",323],["T_COMMENT","\/\/ strings and expectations, we're using \"\\n\" instead of regular newlines\n",323],["T_WHITESPACE","    ",324],["T_COMMENT","\/\/ here.\n",324],["T_WHITESPACE","    ",325],["T_VARIABLE","$tests",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_ARRAY","array",325],"(",["T_WHITESPACE","\n      ",325],["T_COMMENT","\/\/ Single line breaks should be changed to <br \/> tags, while paragraphs\n",326],["T_WHITESPACE","      ",327],["T_COMMENT","\/\/ separated with double line breaks should be enclosed with <p><\/p> tags.\n",327],["T_WHITESPACE","      ",328],["T_CONSTANT_ENCAPSED_STRING","\"aaa\\nbbb\\n\\nccc\"",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_ARRAY","array",328],"(",["T_WHITESPACE","\n        ",328],["T_CONSTANT_ENCAPSED_STRING","\"<p>aaa<br \/>\\nbbb<\/p>\\n<p>ccc<\/p>\"",329],["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_STRING","TRUE",329],",",["T_WHITESPACE","\n      ",329],")",",",["T_WHITESPACE","\n      ",330],["T_COMMENT","\/\/ Skip contents of certain block tags entirely.\n",331],["T_WHITESPACE","      ",332],["T_CONSTANT_ENCAPSED_STRING","\"<script>aaa\\nbbb\\n\\nccc<\/script>\n<style>aaa\\nbbb\\n\\nccc<\/style>\n<pre>aaa\\nbbb\\n\\nccc<\/pre>\n<object>aaa\\nbbb\\n\\nccc<\/object>\n<iframe>aaa\\nbbb\\n\\nccc<\/iframe>\n\"",332],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_ARRAY","array",337],"(",["T_WHITESPACE","\n        ",337],["T_CONSTANT_ENCAPSED_STRING","\"<script>aaa\\nbbb\\n\\nccc<\/script>\"",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_STRING","TRUE",338],",",["T_WHITESPACE","\n        ",338],["T_CONSTANT_ENCAPSED_STRING","\"<style>aaa\\nbbb\\n\\nccc<\/style>\"",339],["T_WHITESPACE"," ",339],["T_DOUBLE_ARROW","=>",339],["T_WHITESPACE"," ",339],["T_STRING","TRUE",339],",",["T_WHITESPACE","\n        ",339],["T_CONSTANT_ENCAPSED_STRING","\"<pre>aaa\\nbbb\\n\\nccc<\/pre>\"",340],["T_WHITESPACE"," ",340],["T_DOUBLE_ARROW","=>",340],["T_WHITESPACE"," ",340],["T_STRING","TRUE",340],",",["T_WHITESPACE","\n        ",340],["T_CONSTANT_ENCAPSED_STRING","\"<object>aaa\\nbbb\\n\\nccc<\/object>\"",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_STRING","TRUE",341],",",["T_WHITESPACE","\n        ",341],["T_CONSTANT_ENCAPSED_STRING","\"<iframe>aaa\\nbbb\\n\\nccc<\/iframe>\"",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],["T_STRING","TRUE",342],",",["T_WHITESPACE","\n      ",342],")",",",["T_WHITESPACE","\n      ",343],["T_COMMENT","\/\/ Skip comments entirely.\n",344],["T_WHITESPACE","      ",345],["T_CONSTANT_ENCAPSED_STRING","\"One. <!-- comment --> Two.\\n<!--\\nThree.\\n-->\\n\"",345],["T_WHITESPACE"," ",345],["T_DOUBLE_ARROW","=>",345],["T_WHITESPACE"," ",345],["T_ARRAY","array",345],"(",["T_WHITESPACE","\n        ",345],["T_CONSTANT_ENCAPSED_STRING","'<!-- comment -->'",346],["T_WHITESPACE"," ",346],["T_DOUBLE_ARROW","=>",346],["T_WHITESPACE"," ",346],["T_STRING","TRUE",346],",",["T_WHITESPACE","\n        ",346],["T_CONSTANT_ENCAPSED_STRING","\"<!--\\nThree.\\n-->\"",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_STRING","TRUE",347],",",["T_WHITESPACE","\n      ",347],")",",",["T_WHITESPACE","\n      ",348],["T_COMMENT","\/\/ Resulting HTML should produce matching paragraph tags.\n",349],["T_WHITESPACE","      ",350],["T_CONSTANT_ENCAPSED_STRING","'<p><div>  <\/div><\/p>'",350],["T_WHITESPACE"," ",350],["T_DOUBLE_ARROW","=>",350],["T_WHITESPACE"," ",350],["T_ARRAY","array",350],"(",["T_WHITESPACE","\n        ",350],["T_CONSTANT_ENCAPSED_STRING","\"<p>\\n<div>  <\/div>\\n<\/p>\"",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_STRING","TRUE",351],",",["T_WHITESPACE","\n      ",351],")",",",["T_WHITESPACE","\n      ",352],["T_CONSTANT_ENCAPSED_STRING","'<div><p>  <\/p><\/div>'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_ARRAY","array",353],"(",["T_WHITESPACE","\n        ",353],["T_CONSTANT_ENCAPSED_STRING","\"<div>\\n<\/div>\"",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_STRING","TRUE",354],",",["T_WHITESPACE","\n      ",354],")",",",["T_WHITESPACE","\n      ",355],["T_CONSTANT_ENCAPSED_STRING","'<blockquote><pre>aaa<\/pre><\/blockquote>'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_ARRAY","array",356],"(",["T_WHITESPACE","\n        ",356],["T_CONSTANT_ENCAPSED_STRING","\"<blockquote><pre>aaa<\/pre><\/blockquote>\"",357],["T_WHITESPACE"," ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_STRING","TRUE",357],",",["T_WHITESPACE","\n      ",357],")",",",["T_WHITESPACE","\n      ",358],["T_CONSTANT_ENCAPSED_STRING","\"<pre>aaa\\nbbb\\nccc<\/pre>\\nddd\\neee\"",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],["T_ARRAY","array",359],"(",["T_WHITESPACE","\n        ",359],["T_CONSTANT_ENCAPSED_STRING","\"<pre>aaa\\nbbb\\nccc<\/pre>\"",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],["T_STRING","TRUE",360],",",["T_WHITESPACE","\n        ",360],["T_CONSTANT_ENCAPSED_STRING","\"<p>ddd<br \/>\\neee<\/p>\"",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_STRING","TRUE",361],",",["T_WHITESPACE","\n      ",361],")",",",["T_WHITESPACE","\n      ",362],["T_COMMENT","\/\/ Comments remain unchanged and subsequent lines\/paragraphs are\n",363],["T_WHITESPACE","      ",364],["T_COMMENT","\/\/ transformed normally.\n",364],["T_WHITESPACE","      ",365],["T_CONSTANT_ENCAPSED_STRING","\"aaa<!--comment-->\\n\\nbbb\\n\\nccc\\n\\nddd<!--comment\\nwith linebreak-->\\n\\neee\\n\\nfff\"",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_ARRAY","array",365],"(",["T_WHITESPACE","\n        ",365],["T_CONSTANT_ENCAPSED_STRING","\"<p>aaa<\/p>\\n<!--comment--><p>\\nbbb<\/p>\\n<p>ccc<\/p>\\n<p>ddd<\/p>\"",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_STRING","TRUE",366],",",["T_WHITESPACE","\n        ",366],["T_CONSTANT_ENCAPSED_STRING","\"<!--comment\\nwith linebreak--><p>\\neee<\/p>\\n<p>fff<\/p>\"",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_STRING","TRUE",367],",",["T_WHITESPACE","\n      ",367],")",",",["T_WHITESPACE","\n      ",368],["T_COMMENT","\/\/ Check that a comment in a PRE will result that the text after\n",369],["T_WHITESPACE","      ",370],["T_COMMENT","\/\/ the comment, but still in PRE, is not transformed.\n",370],["T_WHITESPACE","      ",371],["T_CONSTANT_ENCAPSED_STRING","\"<pre>aaa\\nbbb<!-- comment -->\\n\\nccc<\/pre>\\nddd\"",371],["T_WHITESPACE"," ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],["T_ARRAY","array",371],"(",["T_WHITESPACE","\n        ",371],["T_CONSTANT_ENCAPSED_STRING","\"<pre>aaa\\nbbb<!-- comment -->\\n\\nccc<\/pre>\"",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_STRING","TRUE",372],",",["T_WHITESPACE","\n      ",372],")",",",["T_WHITESPACE","\n      ",373],["T_COMMENT","\/\/ Bug 810824, paragraphs were appearing around iframe tags.\n",374],["T_WHITESPACE","      ",375],["T_CONSTANT_ENCAPSED_STRING","\"<iframe>aaa<\/iframe>\\n\\n\"",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_ARRAY","array",375],"(",["T_WHITESPACE","\n        ",375],["T_CONSTANT_ENCAPSED_STRING","\"<p><iframe>aaa<\/iframe><\/p>\"",376],["T_WHITESPACE"," ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_STRING","FALSE",376],",",["T_WHITESPACE","\n      ",376],")",",",["T_WHITESPACE","\n    ",377],")",";",["T_WHITESPACE","\n    ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","assertFilteredString",379],"(",["T_VARIABLE","$filter",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$tests",379],")",";",["T_WHITESPACE","\n\n    ",379],["T_COMMENT","\/\/ Very long string hitting PCRE limits.\n",381],["T_WHITESPACE","    ",382],["T_VARIABLE","$limit",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","max",382],"(",["T_STRING","ini_get",382],"(",["T_CONSTANT_ENCAPSED_STRING","'pcre.backtrack_limit'",382],")",",",["T_WHITESPACE"," ",382],["T_STRING","ini_get",382],"(",["T_CONSTANT_ENCAPSED_STRING","'pcre.recursion_limit'",382],")",")",";",["T_WHITESPACE","\n    ",382],["T_VARIABLE","$source",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","randomMachineName",383],"(",["T_VARIABLE","$limit",383],")",";",["T_WHITESPACE","\n    ",383],["T_VARIABLE","$result",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","_filter_autop",384],"(",["T_VARIABLE","$source",384],")",";",["T_WHITESPACE","\n    ",384],["T_VARIABLE","$success",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","assertEqual",385],"(",["T_VARIABLE","$result",385],",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'<p>'",385],["T_WHITESPACE"," ",385],".",["T_WHITESPACE"," ",385],["T_VARIABLE","$source",385],["T_WHITESPACE"," ",385],".",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","\"<\/p>\\n\"",385],",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'Line break filter can process very long strings.'",385],")",";",["T_WHITESPACE","\n    ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(","!",["T_VARIABLE","$success",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n      ",386],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","verbose",387],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",387],["T_WHITESPACE"," ",387],".",["T_WHITESPACE"," ",387],["T_VARIABLE","$source",387],["T_WHITESPACE"," ",387],".",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","\"\\n<hr \/>\\n\"",387],["T_WHITESPACE"," ",387],".",["T_WHITESPACE"," ",387],["T_VARIABLE","$result",387],")",";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n  ",388],"}",["T_WHITESPACE","\n\n\n  ",389],["T_DOC_COMMENT","\/**\n   * Tests filter settings, defaults, access restrictions and similar.\n   *\n   * @todo This is for functions like filter_filter and check_markup, whose\n   *   functionality is not completely focused on filtering. Some ideas:\n   *   restricting formats according to user permissions, proper cache\n   *   handling, defaults -- allowed tags\/attributes\/protocols.\n   *\n   * @todo It is possible to add script, iframe etc. to allowed tags, but this\n   *   makes HTML filter completely ineffective.\n   *\n   * @todo Class, id, name and xmlns should be added to disallowed attributes,\n   *   or better a whitelist approach should be used for that too.\n   *\/",392],["T_WHITESPACE","\n  ",405],["T_FUNCTION","function",406],["T_WHITESPACE"," ",406],["T_STRING","testHtmlFilter",406],"(",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n    ",406],["T_COMMENT","\/\/ Get FilterHtml object.\n",407],["T_WHITESPACE","    ",408],["T_VARIABLE","$filter",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","filters",408],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_html'",408],"]",";",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$filter",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","setConfiguration",409],"(",["T_ARRAY","array",409],"(",["T_WHITESPACE","\n      ",409],["T_CONSTANT_ENCAPSED_STRING","'settings'",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_ARRAY","array",410],"(",["T_WHITESPACE","\n        ",410],["T_CONSTANT_ENCAPSED_STRING","'allowed_html'",411],["T_WHITESPACE"," ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'<a> <p> <em> <strong> <cite> <blockquote> <code> <ul> <ol> <li> <dl> <dt> <dd> <br>'",411],",",["T_WHITESPACE","\n        ",411],["T_CONSTANT_ENCAPSED_STRING","'filter_html_help'",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_LNUMBER","1",412],",",["T_WHITESPACE","\n        ",412],["T_CONSTANT_ENCAPSED_STRING","'filter_html_nofollow'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_LNUMBER","0",413],",",["T_WHITESPACE","\n      ",413],")",["T_WHITESPACE","\n    ",414],")",")",";",["T_WHITESPACE","\n\n    ",415],["T_COMMENT","\/\/ HTML filter is not able to secure some tags, these should never be\n",417],["T_WHITESPACE","    ",418],["T_COMMENT","\/\/ allowed.\n",418],["T_WHITESPACE","    ",419],["T_VARIABLE","$f",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING_CAST","(string)",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$filter",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","process",419],"(",["T_CONSTANT_ENCAPSED_STRING","'<script \/>'",419],",",["T_WHITESPACE"," ",419],["T_STRING","Language",419],["T_DOUBLE_COLON","::",419],["T_STRING","LANGCODE_NOT_SPECIFIED",419],")",";",["T_WHITESPACE","\n    ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","assertIdentical",420],"(",["T_VARIABLE","$f",420],",",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","''",420],",",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove script tags.'",420],")",";",["T_WHITESPACE","\n\n    ",420],["T_VARIABLE","$f",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING_CAST","(string)",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$filter",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","process",422],"(",["T_CONSTANT_ENCAPSED_STRING","'<iframe \/>'",422],",",["T_WHITESPACE"," ",422],["T_STRING","Language",422],["T_DOUBLE_COLON","::",422],["T_STRING","LANGCODE_NOT_SPECIFIED",422],")",";",["T_WHITESPACE","\n    ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","assertIdentical",423],"(",["T_VARIABLE","$f",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","''",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove iframe tags.'",423],")",";",["T_WHITESPACE","\n\n    ",423],["T_VARIABLE","$f",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING_CAST","(string)",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$filter",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","process",425],"(",["T_CONSTANT_ENCAPSED_STRING","'<object \/>'",425],",",["T_WHITESPACE"," ",425],["T_STRING","Language",425],["T_DOUBLE_COLON","::",425],["T_STRING","LANGCODE_NOT_SPECIFIED",425],")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","assertIdentical",426],"(",["T_VARIABLE","$f",426],",",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","''",426],",",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove object tags.'",426],")",";",["T_WHITESPACE","\n\n    ",426],["T_VARIABLE","$f",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_STRING_CAST","(string)",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$filter",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","process",428],"(",["T_CONSTANT_ENCAPSED_STRING","'<style \/>'",428],",",["T_WHITESPACE"," ",428],["T_STRING","Language",428],["T_DOUBLE_COLON","::",428],["T_STRING","LANGCODE_NOT_SPECIFIED",428],")",";",["T_WHITESPACE","\n    ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","assertIdentical",429],"(",["T_VARIABLE","$f",429],",",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","''",429],",",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove style tags.'",429],")",";",["T_WHITESPACE","\n\n    ",429],["T_COMMENT","\/\/ Some tags make CSRF attacks easier, let the user take the risk herself.\n",431],["T_WHITESPACE","    ",432],["T_VARIABLE","$f",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING_CAST","(string)",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$filter",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","process",432],"(",["T_CONSTANT_ENCAPSED_STRING","'<img \/>'",432],",",["T_WHITESPACE"," ",432],["T_STRING","Language",432],["T_DOUBLE_COLON","::",432],["T_STRING","LANGCODE_NOT_SPECIFIED",432],")",";",["T_WHITESPACE","\n    ",432],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","assertIdentical",433],"(",["T_VARIABLE","$f",433],",",["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","''",433],",",["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove img tags by default.'",433],")",";",["T_WHITESPACE","\n\n    ",433],["T_VARIABLE","$f",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_STRING_CAST","(string)",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$filter",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","process",435],"(",["T_CONSTANT_ENCAPSED_STRING","'<input \/>'",435],",",["T_WHITESPACE"," ",435],["T_STRING","Language",435],["T_DOUBLE_COLON","::",435],["T_STRING","LANGCODE_NOT_SPECIFIED",435],")",";",["T_WHITESPACE","\n    ",435],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","assertIdentical",436],"(",["T_VARIABLE","$f",436],",",["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","''",436],",",["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove input tags by default.'",436],")",";",["T_WHITESPACE","\n\n    ",436],["T_COMMENT","\/\/ Filtering content of some attributes is infeasible, these shouldn't be\n",438],["T_WHITESPACE","    ",439],["T_COMMENT","\/\/ allowed too.\n",439],["T_WHITESPACE","    ",440],["T_VARIABLE","$f",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING_CAST","(string)",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$filter",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","process",440],"(",["T_CONSTANT_ENCAPSED_STRING","'<p style=\"display: none;\" \/>'",440],",",["T_WHITESPACE"," ",440],["T_STRING","Language",440],["T_DOUBLE_COLON","::",440],["T_STRING","LANGCODE_NOT_SPECIFIED",440],")",";",["T_WHITESPACE","\n    ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","assertNoNormalized",441],"(",["T_VARIABLE","$f",441],",",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'style'",441],",",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove style attributes.'",441],")",";",["T_WHITESPACE","\n    ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","assertIdentical",442],"(",["T_VARIABLE","$f",442],",",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'<p><\/p>'",442],")",";",["T_WHITESPACE","\n\n    ",442],["T_VARIABLE","$f",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_STRING_CAST","(string)",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$filter",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","process",444],"(",["T_CONSTANT_ENCAPSED_STRING","'<p onerror=\"alert(0);\"><\/p>'",444],",",["T_WHITESPACE"," ",444],["T_STRING","Language",444],["T_DOUBLE_COLON","::",444],["T_STRING","LANGCODE_NOT_SPECIFIED",444],")",";",["T_WHITESPACE","\n    ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","assertNoNormalized",445],"(",["T_VARIABLE","$f",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'onerror'",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove on* attributes.'",445],")",";",["T_WHITESPACE","\n    ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","assertIdentical",446],"(",["T_VARIABLE","$f",446],",",["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","'<p><\/p>'",446],")",";",["T_WHITESPACE","\n\n    ",446],["T_VARIABLE","$f",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_STRING_CAST","(string)",448],["T_WHITESPACE"," ",448],["T_VARIABLE","$filter",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","process",448],"(",["T_CONSTANT_ENCAPSED_STRING","'<code onerror>&nbsp;<\/code>'",448],",",["T_WHITESPACE"," ",448],["T_STRING","Language",448],["T_DOUBLE_COLON","::",448],["T_STRING","LANGCODE_NOT_SPECIFIED",448],")",";",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","assertNoNormalized",449],"(",["T_VARIABLE","$f",449],",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'onerror'",449],",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove empty on* attributes.'",449],")",";",["T_WHITESPACE","\n    ",449],["T_COMMENT","\/\/ Note - this string has a decoded &nbsp; character.\n",450],["T_WHITESPACE","    ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","assertIdentical",451],"(",["T_VARIABLE","$f",451],",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'<code>\u00c2\u00a0<\/code>'",451],")",";",["T_WHITESPACE","\n\n    ",451],["T_VARIABLE","$f",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_STRING_CAST","(string)",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$filter",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","process",453],"(",["T_CONSTANT_ENCAPSED_STRING","'<br>'",453],",",["T_WHITESPACE"," ",453],["T_STRING","Language",453],["T_DOUBLE_COLON","::",453],["T_STRING","LANGCODE_NOT_SPECIFIED",453],")",";",["T_WHITESPACE","\n    ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","assertNormalized",454],"(",["T_VARIABLE","$f",454],",",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",454],",",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should allow line breaks.'",454],")",";",["T_WHITESPACE","\n\n    ",454],["T_VARIABLE","$f",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_STRING_CAST","(string)",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$filter",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","process",456],"(",["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",456],",",["T_WHITESPACE"," ",456],["T_STRING","Language",456],["T_DOUBLE_COLON","::",456],["T_STRING","LANGCODE_NOT_SPECIFIED",456],")",";",["T_WHITESPACE","\n    ",456],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","assertNormalized",457],"(",["T_VARIABLE","$f",457],",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",457],",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should allow self-closing line breaks.'",457],")",";",["T_WHITESPACE","\n\n    ",457],["T_COMMENT","\/\/ All attributes of whitelisted tags are stripped by default.\n",459],["T_WHITESPACE","    ",460],["T_VARIABLE","$f",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_STRING_CAST","(string)",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$filter",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","process",460],"(",["T_CONSTANT_ENCAPSED_STRING","'<a kitten=\"cute\" llama=\"awesome\">link<\/a>'",460],",",["T_WHITESPACE"," ",460],["T_STRING","Language",460],["T_DOUBLE_COLON","::",460],["T_STRING","LANGCODE_NOT_SPECIFIED",460],")",";",["T_WHITESPACE","\n    ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","assertNormalized",461],"(",["T_VARIABLE","$f",461],",",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'<a>link<\/a>'",461],",",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'HTML filter should remove attributes that are not explicitly allowed.'",461],")",";",["T_WHITESPACE","\n\n    ",461],["T_COMMENT","\/\/ Now whitelist the \"llama\" attribute on <a>.\n",463],["T_WHITESPACE","    ",464],["T_VARIABLE","$filter",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","setConfiguration",464],"(",["T_ARRAY","array",464],"(",["T_WHITESPACE","\n      ",464],["T_CONSTANT_ENCAPSED_STRING","'settings'",465],["T_WHITESPACE"," ",465],["T_DOUBLE_ARROW","=>",465],["T_WHITESPACE"," ",465],["T_ARRAY","array",465],"(",["T_WHITESPACE","\n        ",465],["T_CONSTANT_ENCAPSED_STRING","'allowed_html'",466],["T_WHITESPACE"," ",466],["T_DOUBLE_ARROW","=>",466],["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'<a href llama> <em> <strong> <cite> <blockquote> <code> <ul> <ol> <li> <dl> <dt> <dd> <br>'",466],",",["T_WHITESPACE","\n        ",466],["T_CONSTANT_ENCAPSED_STRING","'filter_html_help'",467],["T_WHITESPACE"," ",467],["T_DOUBLE_ARROW","=>",467],["T_WHITESPACE"," ",467],["T_LNUMBER","1",467],",",["T_WHITESPACE","\n        ",467],["T_CONSTANT_ENCAPSED_STRING","'filter_html_nofollow'",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_LNUMBER","0",468],",",["T_WHITESPACE","\n      ",468],")",["T_WHITESPACE","\n    ",469],")",")",";",["T_WHITESPACE","\n    ",470],["T_VARIABLE","$f",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_STRING_CAST","(string)",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$filter",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","process",471],"(",["T_CONSTANT_ENCAPSED_STRING","'<a kitten=\"cute\" llama=\"awesome\">link<\/a>'",471],",",["T_WHITESPACE"," ",471],["T_STRING","Language",471],["T_DOUBLE_COLON","::",471],["T_STRING","LANGCODE_NOT_SPECIFIED",471],")",";",["T_WHITESPACE","\n    ",471],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","assertNormalized",472],"(",["T_VARIABLE","$f",472],",",["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'<a llama=\"awesome\">link<\/a>'",472],",",["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'HTML filter keeps explicitly allowed attributes, and removes attributes that are not explicitly allowed.'",472],")",";",["T_WHITESPACE","\n\n    ",472],["T_COMMENT","\/\/ Restrict the whitelisted \"llama\" attribute on <a> to only allow the value\n",474],["T_WHITESPACE","    ",475],["T_COMMENT","\/\/ \"majestical\", or \"epic\".\n",475],["T_WHITESPACE","    ",476],["T_VARIABLE","$filter",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","setConfiguration",476],"(",["T_ARRAY","array",476],"(",["T_WHITESPACE","\n      ",476],["T_CONSTANT_ENCAPSED_STRING","'settings'",477],["T_WHITESPACE"," ",477],["T_DOUBLE_ARROW","=>",477],["T_WHITESPACE"," ",477],["T_ARRAY","array",477],"(",["T_WHITESPACE","\n        ",477],["T_CONSTANT_ENCAPSED_STRING","'allowed_html'",478],["T_WHITESPACE"," ",478],["T_DOUBLE_ARROW","=>",478],["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'<a href llama=\"majestical epic\"> <em> <strong> <cite> <blockquote> <code> <ul> <ol> <li> <dl> <dt> <dd> <br>'",478],",",["T_WHITESPACE","\n        ",478],["T_CONSTANT_ENCAPSED_STRING","'filter_html_help'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_LNUMBER","1",479],",",["T_WHITESPACE","\n        ",479],["T_CONSTANT_ENCAPSED_STRING","'filter_html_nofollow'",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_LNUMBER","0",480],",",["T_WHITESPACE","\n      ",480],")",["T_WHITESPACE","\n    ",481],")",")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$f",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_STRING_CAST","(string)",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$filter",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","process",483],"(",["T_CONSTANT_ENCAPSED_STRING","'<a kitten=\"cute\" llama=\"awesome\">link<\/a>'",483],",",["T_WHITESPACE"," ",483],["T_STRING","Language",483],["T_DOUBLE_COLON","::",483],["T_STRING","LANGCODE_NOT_SPECIFIED",483],")",";",["T_WHITESPACE","\n    ",483],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","assertIdentical",484],"(",["T_VARIABLE","$f",484],",",["T_WHITESPACE"," ",484],["T_CONSTANT_ENCAPSED_STRING","'<a>link<\/a>'",484],",",["T_WHITESPACE"," ",484],["T_CONSTANT_ENCAPSED_STRING","'HTML filter removes allowed attributes that do not have an explicitly allowed value.'",484],")",";",["T_WHITESPACE","\n    ",484],["T_VARIABLE","$f",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_STRING_CAST","(string)",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$filter",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","process",485],"(",["T_CONSTANT_ENCAPSED_STRING","'<a kitten=\"cute\" llama=\"majestical\">link<\/a>'",485],",",["T_WHITESPACE"," ",485],["T_STRING","Language",485],["T_DOUBLE_COLON","::",485],["T_STRING","LANGCODE_NOT_SPECIFIED",485],")",";",["T_WHITESPACE","\n    ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","assertIdentical",486],"(",["T_VARIABLE","$f",486],",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'<a llama=\"majestical\">link<\/a>'",486],",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'HTML filter keeps explicitly allowed attributes with an attribute value that is also explicitly allowed.'",486],")",";",["T_WHITESPACE","\n    ",486],["T_VARIABLE","$f",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_STRING_CAST","(string)",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$filter",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","process",487],"(",["T_CONSTANT_ENCAPSED_STRING","'<a kitten=\"cute\" llama=\"awesome\">link<\/a>'",487],",",["T_WHITESPACE"," ",487],["T_STRING","Language",487],["T_DOUBLE_COLON","::",487],["T_STRING","LANGCODE_NOT_SPECIFIED",487],")",";",["T_WHITESPACE","\n    ",487],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","assertNormalized",488],"(",["T_VARIABLE","$f",488],",",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'<a>link<\/a>'",488],",",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'HTML filter removes allowed attributes that have a not explicitly allowed value.'",488],")",";",["T_WHITESPACE","\n    ",488],["T_VARIABLE","$f",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_STRING_CAST","(string)",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$filter",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","process",489],"(",["T_CONSTANT_ENCAPSED_STRING","'<a href=\"\/beautiful-animals\" kitten=\"cute\" llama=\"epic majestical\">link<\/a>'",489],",",["T_WHITESPACE"," ",489],["T_STRING","Language",489],["T_DOUBLE_COLON","::",489],["T_STRING","LANGCODE_NOT_SPECIFIED",489],")",";",["T_WHITESPACE","\n    ",489],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","assertIdentical",490],"(",["T_VARIABLE","$f",490],",",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"\/beautiful-animals\" llama=\"epic majestical\">link<\/a>'",490],",",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'HTML filter keeps explicitly allowed attributes with an attribute value that is also explicitly allowed.'",490],")",";",["T_WHITESPACE","\n  ",490],"}",["T_WHITESPACE","\n\n  ",491],["T_DOC_COMMENT","\/**\n   * Tests the spam deterrent.\n   *\/",493],["T_WHITESPACE","\n  ",495],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","testNoFollowFilter",496],"(",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n    ",496],["T_COMMENT","\/\/ Get FilterHtml object.\n",497],["T_WHITESPACE","    ",498],["T_VARIABLE","$filter",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","filters",498],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_html'",498],"]",";",["T_WHITESPACE","\n    ",498],["T_VARIABLE","$filter",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","setConfiguration",499],"(",["T_ARRAY","array",499],"(",["T_WHITESPACE","\n      ",499],["T_CONSTANT_ENCAPSED_STRING","'settings'",500],["T_WHITESPACE"," ",500],["T_DOUBLE_ARROW","=>",500],["T_WHITESPACE"," ",500],["T_ARRAY","array",500],"(",["T_WHITESPACE","\n        ",500],["T_CONSTANT_ENCAPSED_STRING","'allowed_html'",501],["T_WHITESPACE"," ",501],["T_DOUBLE_ARROW","=>",501],["T_WHITESPACE"," ",501],["T_CONSTANT_ENCAPSED_STRING","'<a href>'",501],",",["T_WHITESPACE","\n        ",501],["T_CONSTANT_ENCAPSED_STRING","'filter_html_help'",502],["T_WHITESPACE"," ",502],["T_DOUBLE_ARROW","=>",502],["T_WHITESPACE"," ",502],["T_LNUMBER","1",502],",",["T_WHITESPACE","\n        ",502],["T_CONSTANT_ENCAPSED_STRING","'filter_html_nofollow'",503],["T_WHITESPACE"," ",503],["T_DOUBLE_ARROW","=>",503],["T_WHITESPACE"," ",503],["T_LNUMBER","1",503],",",["T_WHITESPACE","\n      ",503],")",["T_WHITESPACE","\n    ",504],")",")",";",["T_WHITESPACE","\n\n    ",505],["T_COMMENT","\/\/ Test if the rel=\"nofollow\" attribute is added, even if we try to prevent\n",507],["T_WHITESPACE","    ",508],["T_COMMENT","\/\/ it.\n",508],["T_WHITESPACE","    ",509],["T_VARIABLE","$f",509],["T_WHITESPACE"," ",509],"=",["T_WHITESPACE"," ",509],["T_STRING_CAST","(string)",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$filter",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","process",509],"(",["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/www.example.com\/\">text<\/a>'",509],",",["T_WHITESPACE"," ",509],["T_STRING","Language",509],["T_DOUBLE_COLON","::",509],["T_STRING","LANGCODE_NOT_SPECIFIED",509],")",";",["T_WHITESPACE","\n    ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","assertNormalized",510],"(",["T_VARIABLE","$f",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'rel=\"nofollow\"'",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'Spam deterrent -- no evasion.'",510],")",";",["T_WHITESPACE","\n\n    ",510],["T_VARIABLE","$f",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_STRING_CAST","(string)",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$filter",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","process",512],"(",["T_CONSTANT_ENCAPSED_STRING","'<A href=\"http:\/\/www.example.com\/\">text<\/a>'",512],",",["T_WHITESPACE"," ",512],["T_STRING","Language",512],["T_DOUBLE_COLON","::",512],["T_STRING","LANGCODE_NOT_SPECIFIED",512],")",";",["T_WHITESPACE","\n    ",512],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","assertNormalized",513],"(",["T_VARIABLE","$f",513],",",["T_WHITESPACE"," ",513],["T_CONSTANT_ENCAPSED_STRING","'rel=\"nofollow\"'",513],",",["T_WHITESPACE"," ",513],["T_CONSTANT_ENCAPSED_STRING","'Spam deterrent evasion -- capital A.'",513],")",";",["T_WHITESPACE","\n\n    ",513],["T_VARIABLE","$f",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_STRING_CAST","(string)",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$filter",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","process",515],"(",["T_CONSTANT_ENCAPSED_STRING","\"<a\/href=\\\"http:\/\/www.example.com\/\\\">text<\/a>\"",515],",",["T_WHITESPACE"," ",515],["T_STRING","Language",515],["T_DOUBLE_COLON","::",515],["T_STRING","LANGCODE_NOT_SPECIFIED",515],")",";",["T_WHITESPACE","\n    ",515],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","assertNormalized",516],"(",["T_VARIABLE","$f",516],",",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'rel=\"nofollow\"'",516],",",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'Spam deterrent evasion -- non whitespace character after tag name.'",516],")",";",["T_WHITESPACE","\n\n    ",516],["T_VARIABLE","$f",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_STRING_CAST","(string)",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$filter",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","process",518],"(",["T_CONSTANT_ENCAPSED_STRING","\"<\\0a\\0 href=\\\"http:\/\/www.example.com\/\\\">text<\/a>\"",518],",",["T_WHITESPACE"," ",518],["T_STRING","Language",518],["T_DOUBLE_COLON","::",518],["T_STRING","LANGCODE_NOT_SPECIFIED",518],")",";",["T_WHITESPACE","\n    ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","assertNormalized",519],"(",["T_VARIABLE","$f",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'rel=\"nofollow\"'",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'Spam deterrent evasion -- some nulls.'",519],")",";",["T_WHITESPACE","\n\n    ",519],["T_VARIABLE","$f",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_STRING_CAST","(string)",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$filter",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","process",521],"(",["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/www.example.com\/\" rel=\"follow\">text<\/a>'",521],",",["T_WHITESPACE"," ",521],["T_STRING","Language",521],["T_DOUBLE_COLON","::",521],["T_STRING","LANGCODE_NOT_SPECIFIED",521],")",";",["T_WHITESPACE","\n    ",521],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","assertNoNormalized",522],"(",["T_VARIABLE","$f",522],",",["T_WHITESPACE"," ",522],["T_CONSTANT_ENCAPSED_STRING","'rel=\"follow\"'",522],",",["T_WHITESPACE"," ",522],["T_CONSTANT_ENCAPSED_STRING","'Spam deterrent evasion -- with rel set - rel=\"follow\" removed.'",522],")",";",["T_WHITESPACE","\n    ",522],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","assertNormalized",523],"(",["T_VARIABLE","$f",523],",",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'rel=\"nofollow\"'",523],",",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'Spam deterrent evasion -- with rel set - rel=\"nofollow\" added.'",523],")",";",["T_WHITESPACE","\n  ",523],"}",["T_WHITESPACE","\n\n  ",524],["T_DOC_COMMENT","\/**\n   * Tests the HTML escaping filter.\n   *\/",526],["T_WHITESPACE","\n  ",528],["T_FUNCTION","function",529],["T_WHITESPACE"," ",529],["T_STRING","testHtmlEscapeFilter",529],"(",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n    ",529],["T_COMMENT","\/\/ Get FilterHtmlEscape object.\n",530],["T_WHITESPACE","    ",531],["T_VARIABLE","$filter",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","filters",531],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_html_escape'",531],"]",";",["T_WHITESPACE","\n\n    ",531],["T_VARIABLE","$tests",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_ARRAY","array",533],"(",["T_WHITESPACE","\n      ",533],["T_CONSTANT_ENCAPSED_STRING","\"   One. <!-- \\\"comment\\\" --> Two'.\\n<p>Three.<\/p>\\n    \"",534],["T_WHITESPACE"," ",534],["T_DOUBLE_ARROW","=>",534],["T_WHITESPACE"," ",534],["T_ARRAY","array",534],"(",["T_WHITESPACE","\n        ",534],["T_CONSTANT_ENCAPSED_STRING","\"One. &lt;!-- &quot;comment&quot; --&gt; Two&#039;.\\n&lt;p&gt;Three.&lt;\/p&gt;\"",535],["T_WHITESPACE"," ",535],["T_DOUBLE_ARROW","=>",535],["T_WHITESPACE"," ",535],["T_STRING","TRUE",535],",",["T_WHITESPACE","\n        ",535],["T_CONSTANT_ENCAPSED_STRING","'   One.'",536],["T_WHITESPACE"," ",536],["T_DOUBLE_ARROW","=>",536],["T_WHITESPACE"," ",536],["T_STRING","FALSE",536],",",["T_WHITESPACE","\n        ",536],["T_CONSTANT_ENCAPSED_STRING","\"<\/p>\\n    \"",537],["T_WHITESPACE"," ",537],["T_DOUBLE_ARROW","=>",537],["T_WHITESPACE"," ",537],["T_STRING","FALSE",537],",",["T_WHITESPACE","\n      ",537],")",",",["T_WHITESPACE","\n    ",538],")",";",["T_WHITESPACE","\n    ",539],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","assertFilteredString",540],"(",["T_VARIABLE","$filter",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$tests",540],")",";",["T_WHITESPACE","\n  ",540],"}",["T_WHITESPACE","\n\n  ",541],["T_DOC_COMMENT","\/**\n   * Tests the URL filter.\n   *\/",543],["T_WHITESPACE","\n  ",545],["T_FUNCTION","function",546],["T_WHITESPACE"," ",546],["T_STRING","testUrlFilter",546],"(",")",["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n    ",546],["T_COMMENT","\/\/ Get FilterUrl object.\n",547],["T_WHITESPACE","    ",548],["T_VARIABLE","$filter",548],["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","filters",548],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_url'",548],"]",";",["T_WHITESPACE","\n    ",548],["T_VARIABLE","$filter",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","setConfiguration",549],"(",["T_ARRAY","array",549],"(",["T_WHITESPACE","\n      ",549],["T_CONSTANT_ENCAPSED_STRING","'settings'",550],["T_WHITESPACE"," ",550],["T_DOUBLE_ARROW","=>",550],["T_WHITESPACE"," ",550],["T_ARRAY","array",550],"(",["T_WHITESPACE","\n        ",550],["T_CONSTANT_ENCAPSED_STRING","'filter_url_length'",551],["T_WHITESPACE"," ",551],["T_DOUBLE_ARROW","=>",551],["T_WHITESPACE"," ",551],["T_LNUMBER","496",551],",",["T_WHITESPACE","\n      ",551],")",["T_WHITESPACE","\n    ",552],")",")",";",["T_WHITESPACE","\n\n    ",553],["T_COMMENT","\/\/ @todo Possible categories:\n",555],["T_WHITESPACE","    ",556],["T_COMMENT","\/\/ - absolute, mail, partial\n",556],["T_WHITESPACE","    ",557],["T_COMMENT","\/\/ - characters\/encoding, surrounding markup, security\n",557],["T_WHITESPACE","\n    ",558],["T_COMMENT","\/\/ Create a email that is too long.\n",559],["T_WHITESPACE","    ",560],["T_VARIABLE","$long_email",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_STRING","str_repeat",560],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",560],",",["T_WHITESPACE"," ",560],["T_LNUMBER","254",560],")",["T_WHITESPACE"," ",560],".",["T_WHITESPACE"," ",560],["T_CONSTANT_ENCAPSED_STRING","'@example.com'",560],";",["T_WHITESPACE","\n    ",560],["T_VARIABLE","$too_long_email",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_STRING","str_repeat",561],"(",["T_CONSTANT_ENCAPSED_STRING","'b'",561],",",["T_WHITESPACE"," ",561],["T_LNUMBER","255",561],")",["T_WHITESPACE"," ",561],".",["T_WHITESPACE"," ",561],["T_CONSTANT_ENCAPSED_STRING","'@example.com'",561],";",["T_WHITESPACE","\n    ",561],["T_VARIABLE","$email_with_plus_sign",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'one+two@example.com'",562],";",["T_WHITESPACE","\n\n    ",562],["T_COMMENT","\/\/ Filter selection\/pattern matching.\n",564],["T_WHITESPACE","    ",565],["T_VARIABLE","$tests",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_ARRAY","array",565],"(",["T_WHITESPACE","\n      ",565],["T_COMMENT","\/\/ HTTP URLs.\n",566],["T_WHITESPACE","      ",567],["T_CONSTANT_ENCAPSED_STRING","'\nhttp:\/\/example.com or www.example.com\n'",567],["T_WHITESPACE"," ",569],["T_DOUBLE_ARROW","=>",569],["T_WHITESPACE"," ",569],["T_ARRAY","array",569],"(",["T_WHITESPACE","\n        ",569],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/example.com\">http:\/\/example.com<\/a>'",570],["T_WHITESPACE"," ",570],["T_DOUBLE_ARROW","=>",570],["T_WHITESPACE"," ",570],["T_STRING","TRUE",570],",",["T_WHITESPACE","\n        ",570],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/www.example.com\">www.example.com<\/a>'",571],["T_WHITESPACE"," ",571],["T_DOUBLE_ARROW","=>",571],["T_WHITESPACE"," ",571],["T_STRING","TRUE",571],",",["T_WHITESPACE","\n      ",571],")",",",["T_WHITESPACE","\n      ",572],["T_COMMENT","\/\/ MAILTO URLs.\n",573],["T_WHITESPACE","      ",574],["T_CONSTANT_ENCAPSED_STRING","'\nperson@example.com or mailto:person2@example.com or '",574],["T_WHITESPACE"," ",575],".",["T_WHITESPACE"," ",575],["T_VARIABLE","$email_with_plus_sign",575],["T_WHITESPACE"," ",575],".",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","' or '",575],["T_WHITESPACE"," ",575],".",["T_WHITESPACE"," ",575],["T_VARIABLE","$long_email",575],["T_WHITESPACE"," ",575],".",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","' but not '",575],["T_WHITESPACE"," ",575],".",["T_WHITESPACE"," ",575],["T_VARIABLE","$too_long_email",575],["T_WHITESPACE"," ",575],".",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","'\n'",575],["T_WHITESPACE"," ",576],["T_DOUBLE_ARROW","=>",576],["T_WHITESPACE"," ",576],["T_ARRAY","array",576],"(",["T_WHITESPACE","\n        ",576],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"mailto:person@example.com\">person@example.com<\/a>'",577],["T_WHITESPACE"," ",577],["T_DOUBLE_ARROW","=>",577],["T_WHITESPACE"," ",577],["T_STRING","TRUE",577],",",["T_WHITESPACE","\n        ",577],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"mailto:person2@example.com\">mailto:person2@example.com<\/a>'",578],["T_WHITESPACE"," ",578],["T_DOUBLE_ARROW","=>",578],["T_WHITESPACE"," ",578],["T_STRING","TRUE",578],",",["T_WHITESPACE","\n        ",578],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"mailto:'",579],["T_WHITESPACE"," ",579],".",["T_WHITESPACE"," ",579],["T_VARIABLE","$long_email",579],["T_WHITESPACE"," ",579],".",["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","'\">'",579],["T_WHITESPACE"," ",579],".",["T_WHITESPACE"," ",579],["T_VARIABLE","$long_email",579],["T_WHITESPACE"," ",579],".",["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","'<\/a>'",579],["T_WHITESPACE"," ",579],["T_DOUBLE_ARROW","=>",579],["T_WHITESPACE"," ",579],["T_STRING","TRUE",579],",",["T_WHITESPACE","\n        ",579],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"mailto:'",580],["T_WHITESPACE"," ",580],".",["T_WHITESPACE"," ",580],["T_VARIABLE","$too_long_email",580],["T_WHITESPACE"," ",580],".",["T_WHITESPACE"," ",580],["T_CONSTANT_ENCAPSED_STRING","'\">'",580],["T_WHITESPACE"," ",580],".",["T_WHITESPACE"," ",580],["T_VARIABLE","$too_long_email",580],["T_WHITESPACE"," ",580],".",["T_WHITESPACE"," ",580],["T_CONSTANT_ENCAPSED_STRING","'<\/a>'",580],["T_WHITESPACE"," ",580],["T_DOUBLE_ARROW","=>",580],["T_WHITESPACE"," ",580],["T_STRING","FALSE",580],",",["T_WHITESPACE","\n        ",580],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"mailto:'",581],["T_WHITESPACE"," ",581],".",["T_WHITESPACE"," ",581],["T_VARIABLE","$email_with_plus_sign",581],["T_WHITESPACE"," ",581],".",["T_WHITESPACE"," ",581],["T_CONSTANT_ENCAPSED_STRING","'\">'",581],["T_WHITESPACE"," ",581],".",["T_WHITESPACE"," ",581],["T_VARIABLE","$email_with_plus_sign",581],["T_WHITESPACE"," ",581],".",["T_WHITESPACE"," ",581],["T_CONSTANT_ENCAPSED_STRING","'<\/a>'",581],["T_WHITESPACE"," ",581],["T_DOUBLE_ARROW","=>",581],["T_WHITESPACE"," ",581],["T_STRING","TRUE",581],",",["T_WHITESPACE","\n      ",581],")",",",["T_WHITESPACE","\n      ",582],["T_COMMENT","\/\/ URI parts and special characters.\n",583],["T_WHITESPACE","      ",584],["T_CONSTANT_ENCAPSED_STRING","'\nhttp:\/\/trailingslash.com\/ or www.trailingslash.com\/\nhttp:\/\/host.com\/some\/path?query=foo&bar[baz]=beer#fragment or www.host.com\/some\/path?query=foo&bar[baz]=beer#fragment\nhttp:\/\/twitter.com\/#!\/example\/status\/22376963142324226\nhttp:\/\/example.com\/@user\/\nftp:\/\/user:pass@ftp.example.com\/~home\/dir1\nsftp:\/\/user@nonstandardport:222\/dir\nssh:\/\/192.168.0.100\/srv\/git\/drupal.git\n'",584],["T_WHITESPACE"," ",592],["T_DOUBLE_ARROW","=>",592],["T_WHITESPACE"," ",592],["T_ARRAY","array",592],"(",["T_WHITESPACE","\n        ",592],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/trailingslash.com\/\">http:\/\/trailingslash.com\/<\/a>'",593],["T_WHITESPACE"," ",593],["T_DOUBLE_ARROW","=>",593],["T_WHITESPACE"," ",593],["T_STRING","TRUE",593],",",["T_WHITESPACE","\n        ",593],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/www.trailingslash.com\/\">www.trailingslash.com\/<\/a>'",594],["T_WHITESPACE"," ",594],["T_DOUBLE_ARROW","=>",594],["T_WHITESPACE"," ",594],["T_STRING","TRUE",594],",",["T_WHITESPACE","\n        ",594],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/host.com\/some\/path?query=foo&amp;bar[baz]=beer#fragment\">http:\/\/host.com\/some\/path?query=foo&amp;bar[baz]=beer#fragment<\/a>'",595],["T_WHITESPACE"," ",595],["T_DOUBLE_ARROW","=>",595],["T_WHITESPACE"," ",595],["T_STRING","TRUE",595],",",["T_WHITESPACE","\n        ",595],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/www.host.com\/some\/path?query=foo&amp;bar[baz]=beer#fragment\">www.host.com\/some\/path?query=foo&amp;bar[baz]=beer#fragment<\/a>'",596],["T_WHITESPACE"," ",596],["T_DOUBLE_ARROW","=>",596],["T_WHITESPACE"," ",596],["T_STRING","TRUE",596],",",["T_WHITESPACE","\n        ",596],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/twitter.com\/#!\/example\/status\/22376963142324226\">http:\/\/twitter.com\/#!\/example\/status\/22376963142324226<\/a>'",597],["T_WHITESPACE"," ",597],["T_DOUBLE_ARROW","=>",597],["T_WHITESPACE"," ",597],["T_STRING","TRUE",597],",",["T_WHITESPACE","\n        ",597],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/example.com\/@user\/\">http:\/\/example.com\/@user\/<\/a>'",598],["T_WHITESPACE"," ",598],["T_DOUBLE_ARROW","=>",598],["T_WHITESPACE"," ",598],["T_STRING","TRUE",598],",",["T_WHITESPACE","\n        ",598],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"ftp:\/\/user:pass@ftp.example.com\/~home\/dir1\">ftp:\/\/user:pass@ftp.example.com\/~home\/dir1<\/a>'",599],["T_WHITESPACE"," ",599],["T_DOUBLE_ARROW","=>",599],["T_WHITESPACE"," ",599],["T_STRING","TRUE",599],",",["T_WHITESPACE","\n        ",599],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"sftp:\/\/user@nonstandardport:222\/dir\">sftp:\/\/user@nonstandardport:222\/dir<\/a>'",600],["T_WHITESPACE"," ",600],["T_DOUBLE_ARROW","=>",600],["T_WHITESPACE"," ",600],["T_STRING","TRUE",600],",",["T_WHITESPACE","\n        ",600],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"ssh:\/\/192.168.0.100\/srv\/git\/drupal.git\">ssh:\/\/192.168.0.100\/srv\/git\/drupal.git<\/a>'",601],["T_WHITESPACE"," ",601],["T_DOUBLE_ARROW","=>",601],["T_WHITESPACE"," ",601],["T_STRING","TRUE",601],",",["T_WHITESPACE","\n      ",601],")",",",["T_WHITESPACE","\n      ",602],["T_COMMENT","\/\/ International Unicode characters.\n",603],["T_WHITESPACE","      ",604],["T_CONSTANT_ENCAPSED_STRING","'\nhttp:\/\/\u00d0\u00bf\u00d1\u0080\u00d0\u00b8\u00d0\u00bc\u00d0\u00b5\u00d1\u0080.\u00d0\u00b8\u00d1\u0081\u00d0\u00bf\u00d1\u008b\u00d1\u0082\u00d0\u00b0\u00d0\u00bd\u00d0\u00b8\u00d0\u00b5\/\nhttp:\/\/\u00d9\u0085\u00d8\u00ab\u00d8\u00a7\u00d9\u0084.\u00d8\u00a5\u00d8\u00ae\u00d8\u00aa\u00d8\u00a8\u00d8\u00a7\u00d8\u00b1\/\nhttp:\/\/\u00e4\u00be\u008b\u00e5\u00ad\u0090.\u00e6\u00b8\u00ac\u00e8\u00a9\u00a6\/\nhttp:\/\/12345.\u00e4\u00b8\u00ad\u00e5\u009b\u00bd\/\nhttp:\/\/\u00e4\u00be\u008b\u00e3\u0081\u0088.\u00e3\u0083\u0086\u00e3\u0082\u00b9\u00e3\u0083\u0088\/\nhttp:\/\/dr\u00c3\u00a9i\u00c3\u009fig-b\u00c3\u00bccher.de\/\nhttp:\/\/m\u00c3\u00a9xico-ma\u00c3\u00b1ana.es\/\n'",604],["T_WHITESPACE"," ",612],["T_DOUBLE_ARROW","=>",612],["T_WHITESPACE"," ",612],["T_ARRAY","array",612],"(",["T_WHITESPACE","\n        ",612],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/\u00d0\u00bf\u00d1\u0080\u00d0\u00b8\u00d0\u00bc\u00d0\u00b5\u00d1\u0080.\u00d0\u00b8\u00d1\u0081\u00d0\u00bf\u00d1\u008b\u00d1\u0082\u00d0\u00b0\u00d0\u00bd\u00d0\u00b8\u00d0\u00b5\/\">http:\/\/\u00d0\u00bf\u00d1\u0080\u00d0\u00b8\u00d0\u00bc\u00d0\u00b5\u00d1\u0080.\u00d0\u00b8\u00d1\u0081\u00d0\u00bf\u00d1\u008b\u00d1\u0082\u00d0\u00b0\u00d0\u00bd\u00d0\u00b8\u00d0\u00b5\/<\/a>'",613],["T_WHITESPACE"," ",613],["T_DOUBLE_ARROW","=>",613],["T_WHITESPACE"," ",613],["T_STRING","TRUE",613],",",["T_WHITESPACE","\n        ",613],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/\u00d9\u0085\u00d8\u00ab\u00d8\u00a7\u00d9\u0084.\u00d8\u00a5\u00d8\u00ae\u00d8\u00aa\u00d8\u00a8\u00d8\u00a7\u00d8\u00b1\/\">http:\/\/\u00d9\u0085\u00d8\u00ab\u00d8\u00a7\u00d9\u0084.\u00d8\u00a5\u00d8\u00ae\u00d8\u00aa\u00d8\u00a8\u00d8\u00a7\u00d8\u00b1\/<\/a>'",614],["T_WHITESPACE"," ",614],["T_DOUBLE_ARROW","=>",614],["T_WHITESPACE"," ",614],["T_STRING","TRUE",614],",",["T_WHITESPACE","\n        ",614],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/\u00e4\u00be\u008b\u00e5\u00ad\u0090.\u00e6\u00b8\u00ac\u00e8\u00a9\u00a6\/\">http:\/\/\u00e4\u00be\u008b\u00e5\u00ad\u0090.\u00e6\u00b8\u00ac\u00e8\u00a9\u00a6\/<\/a>'",615],["T_WHITESPACE"," ",615],["T_DOUBLE_ARROW","=>",615],["T_WHITESPACE"," ",615],["T_STRING","TRUE",615],",",["T_WHITESPACE","\n        ",615],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/12345.\u00e4\u00b8\u00ad\u00e5\u009b\u00bd\/\">http:\/\/12345.\u00e4\u00b8\u00ad\u00e5\u009b\u00bd\/<\/a>'",616],["T_WHITESPACE"," ",616],["T_DOUBLE_ARROW","=>",616],["T_WHITESPACE"," ",616],["T_STRING","TRUE",616],",",["T_WHITESPACE","\n        ",616],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/\u00e4\u00be\u008b\u00e3\u0081\u0088.\u00e3\u0083\u0086\u00e3\u0082\u00b9\u00e3\u0083\u0088\/\">http:\/\/\u00e4\u00be\u008b\u00e3\u0081\u0088.\u00e3\u0083\u0086\u00e3\u0082\u00b9\u00e3\u0083\u0088\/<\/a>'",617],["T_WHITESPACE"," ",617],["T_DOUBLE_ARROW","=>",617],["T_WHITESPACE"," ",617],["T_STRING","TRUE",617],",",["T_WHITESPACE","\n        ",617],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/dr\u00c3\u00a9i\u00c3\u009fig-b\u00c3\u00bccher.de\/\">http:\/\/dr\u00c3\u00a9i\u00c3\u009fig-b\u00c3\u00bccher.de\/<\/a>'",618],["T_WHITESPACE"," ",618],["T_DOUBLE_ARROW","=>",618],["T_WHITESPACE"," ",618],["T_STRING","TRUE",618],",",["T_WHITESPACE","\n        ",618],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/m\u00c3\u00a9xico-ma\u00c3\u00b1ana.es\/\">http:\/\/m\u00c3\u00a9xico-ma\u00c3\u00b1ana.es\/<\/a>'",619],["T_WHITESPACE"," ",619],["T_DOUBLE_ARROW","=>",619],["T_WHITESPACE"," ",619],["T_STRING","TRUE",619],",",["T_WHITESPACE","\n      ",619],")",",",["T_WHITESPACE","\n      ",620],["T_COMMENT","\/\/ Encoding.\n",621],["T_WHITESPACE","      ",622],["T_CONSTANT_ENCAPSED_STRING","'\nhttp:\/\/ampersand.com\/?a=1&b=2\nhttp:\/\/encoded.com\/?a=1&amp;b=2\n'",622],["T_WHITESPACE"," ",625],["T_DOUBLE_ARROW","=>",625],["T_WHITESPACE"," ",625],["T_ARRAY","array",625],"(",["T_WHITESPACE","\n        ",625],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/ampersand.com\/?a=1&amp;b=2\">http:\/\/ampersand.com\/?a=1&amp;b=2<\/a>'",626],["T_WHITESPACE"," ",626],["T_DOUBLE_ARROW","=>",626],["T_WHITESPACE"," ",626],["T_STRING","TRUE",626],",",["T_WHITESPACE","\n        ",626],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/encoded.com\/?a=1&amp;b=2\">http:\/\/encoded.com\/?a=1&amp;b=2<\/a>'",627],["T_WHITESPACE"," ",627],["T_DOUBLE_ARROW","=>",627],["T_WHITESPACE"," ",627],["T_STRING","TRUE",627],",",["T_WHITESPACE","\n      ",627],")",",",["T_WHITESPACE","\n      ",628],["T_COMMENT","\/\/ Domain name length.\n",629],["T_WHITESPACE","      ",630],["T_CONSTANT_ENCAPSED_STRING","'\nwww.ex.ex or www.example.example or www.toolongdomainexampledomainexampledomainexampledomainexampledomain or\nme@me.tv\n'",630],["T_WHITESPACE"," ",633],["T_DOUBLE_ARROW","=>",633],["T_WHITESPACE"," ",633],["T_ARRAY","array",633],"(",["T_WHITESPACE","\n        ",633],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/www.ex.ex\">www.ex.ex<\/a>'",634],["T_WHITESPACE"," ",634],["T_DOUBLE_ARROW","=>",634],["T_WHITESPACE"," ",634],["T_STRING","TRUE",634],",",["T_WHITESPACE","\n        ",634],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/www.example.example\">www.example.example<\/a>'",635],["T_WHITESPACE"," ",635],["T_DOUBLE_ARROW","=>",635],["T_WHITESPACE"," ",635],["T_STRING","TRUE",635],",",["T_WHITESPACE","\n        ",635],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/www.toolong'",636],["T_WHITESPACE"," ",636],["T_DOUBLE_ARROW","=>",636],["T_WHITESPACE"," ",636],["T_STRING","FALSE",636],",",["T_WHITESPACE","\n        ",636],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"mailto:me@me.tv\">me@me.tv<\/a>'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_STRING","TRUE",637],",",["T_WHITESPACE","\n      ",637],")",",",["T_WHITESPACE","\n      ",638],["T_COMMENT","\/\/ Absolute URL protocols.\n",639],["T_WHITESPACE","      ",640],["T_COMMENT","\/\/ The list to test is found in the beginning of _filter_url() at\n",640],["T_WHITESPACE","      ",641],["T_COMMENT","\/\/ $protocols = \\Drupal::getContainer()->getParameter('filter_protocols').\n",641],["T_WHITESPACE","      ",642],["T_CONSTANT_ENCAPSED_STRING","'\nhttps:\/\/example.com,\nftp:\/\/ftp.example.com,\nnews:\/\/example.net,\ntelnet:\/\/example,\nirc:\/\/example.host,\nssh:\/\/odd.geek,\nsftp:\/\/secure.host?,\nwebcal:\/\/calendar,\nrtsp:\/\/127.0.0.1,\nnot foo:\/\/disallowed.com.\n'",642],["T_WHITESPACE"," ",653],["T_DOUBLE_ARROW","=>",653],["T_WHITESPACE"," ",653],["T_ARRAY","array",653],"(",["T_WHITESPACE","\n        ",653],["T_CONSTANT_ENCAPSED_STRING","'href=\"https:\/\/example.com\"'",654],["T_WHITESPACE"," ",654],["T_DOUBLE_ARROW","=>",654],["T_WHITESPACE"," ",654],["T_STRING","TRUE",654],",",["T_WHITESPACE","\n        ",654],["T_CONSTANT_ENCAPSED_STRING","'href=\"ftp:\/\/ftp.example.com\"'",655],["T_WHITESPACE"," ",655],["T_DOUBLE_ARROW","=>",655],["T_WHITESPACE"," ",655],["T_STRING","TRUE",655],",",["T_WHITESPACE","\n        ",655],["T_CONSTANT_ENCAPSED_STRING","'href=\"news:\/\/example.net\"'",656],["T_WHITESPACE"," ",656],["T_DOUBLE_ARROW","=>",656],["T_WHITESPACE"," ",656],["T_STRING","TRUE",656],",",["T_WHITESPACE","\n        ",656],["T_CONSTANT_ENCAPSED_STRING","'href=\"telnet:\/\/example\"'",657],["T_WHITESPACE"," ",657],["T_DOUBLE_ARROW","=>",657],["T_WHITESPACE"," ",657],["T_STRING","TRUE",657],",",["T_WHITESPACE","\n        ",657],["T_CONSTANT_ENCAPSED_STRING","'href=\"irc:\/\/example.host\"'",658],["T_WHITESPACE"," ",658],["T_DOUBLE_ARROW","=>",658],["T_WHITESPACE"," ",658],["T_STRING","TRUE",658],",",["T_WHITESPACE","\n        ",658],["T_CONSTANT_ENCAPSED_STRING","'href=\"ssh:\/\/odd.geek\"'",659],["T_WHITESPACE"," ",659],["T_DOUBLE_ARROW","=>",659],["T_WHITESPACE"," ",659],["T_STRING","TRUE",659],",",["T_WHITESPACE","\n        ",659],["T_CONSTANT_ENCAPSED_STRING","'href=\"sftp:\/\/secure.host\"'",660],["T_WHITESPACE"," ",660],["T_DOUBLE_ARROW","=>",660],["T_WHITESPACE"," ",660],["T_STRING","TRUE",660],",",["T_WHITESPACE","\n        ",660],["T_CONSTANT_ENCAPSED_STRING","'href=\"webcal:\/\/calendar\"'",661],["T_WHITESPACE"," ",661],["T_DOUBLE_ARROW","=>",661],["T_WHITESPACE"," ",661],["T_STRING","TRUE",661],",",["T_WHITESPACE","\n        ",661],["T_CONSTANT_ENCAPSED_STRING","'href=\"rtsp:\/\/127.0.0.1\"'",662],["T_WHITESPACE"," ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_STRING","TRUE",662],",",["T_WHITESPACE","\n        ",662],["T_CONSTANT_ENCAPSED_STRING","'href=\"foo:\/\/disallowed.com\"'",663],["T_WHITESPACE"," ",663],["T_DOUBLE_ARROW","=>",663],["T_WHITESPACE"," ",663],["T_STRING","FALSE",663],",",["T_WHITESPACE","\n        ",663],["T_CONSTANT_ENCAPSED_STRING","'not foo:\/\/disallowed.com.'",664],["T_WHITESPACE"," ",664],["T_DOUBLE_ARROW","=>",664],["T_WHITESPACE"," ",664],["T_STRING","TRUE",664],",",["T_WHITESPACE","\n      ",664],")",",",["T_WHITESPACE","\n    ",665],")",";",["T_WHITESPACE","\n    ",666],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","assertFilteredString",667],"(",["T_VARIABLE","$filter",667],",",["T_WHITESPACE"," ",667],["T_VARIABLE","$tests",667],")",";",["T_WHITESPACE","\n\n    ",667],["T_COMMENT","\/\/ Surrounding text\/punctuation.\n",669],["T_WHITESPACE","    ",670],["T_VARIABLE","$tests",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_ARRAY","array",670],"(",["T_WHITESPACE","\n      ",670],["T_CONSTANT_ENCAPSED_STRING","'\nPartial URL with trailing period www.partial.com.\nEmail with trailing comma person@example.com,\nAbsolute URL with trailing question http:\/\/www.absolute.com?\nQuery string with trailing exclamation www.query.com\/index.php?a=!\nPartial URL with 3 trailing www.partial.periods...\nEmail with 3 trailing exclamations@example.com!!!\nAbsolute URL and query string with 2 different punctuation characters (http:\/\/www.example.com\/q=abc).\nPartial URL with brackets in the URL as well as surrounded brackets (www.foo.com\/more_(than)_one_(parens)).\nAbsolute URL with square brackets in the URL as well as surrounded brackets [https:\/\/www.drupal.org\/?class[]=1]\nAbsolute URL with quotes \"https:\/\/www.drupal.org\/sample\"\n\n'",671],["T_WHITESPACE"," ",683],["T_DOUBLE_ARROW","=>",683],["T_WHITESPACE"," ",683],["T_ARRAY","array",683],"(",["T_WHITESPACE","\n        ",683],["T_CONSTANT_ENCAPSED_STRING","'period <a href=\"http:\/\/www.partial.com\">www.partial.com<\/a>.'",684],["T_WHITESPACE"," ",684],["T_DOUBLE_ARROW","=>",684],["T_WHITESPACE"," ",684],["T_STRING","TRUE",684],",",["T_WHITESPACE","\n        ",684],["T_CONSTANT_ENCAPSED_STRING","'comma <a href=\"mailto:person@example.com\">person@example.com<\/a>,'",685],["T_WHITESPACE"," ",685],["T_DOUBLE_ARROW","=>",685],["T_WHITESPACE"," ",685],["T_STRING","TRUE",685],",",["T_WHITESPACE","\n        ",685],["T_CONSTANT_ENCAPSED_STRING","'question <a href=\"http:\/\/www.absolute.com\">http:\/\/www.absolute.com<\/a>?'",686],["T_WHITESPACE"," ",686],["T_DOUBLE_ARROW","=>",686],["T_WHITESPACE"," ",686],["T_STRING","TRUE",686],",",["T_WHITESPACE","\n        ",686],["T_CONSTANT_ENCAPSED_STRING","'exclamation <a href=\"http:\/\/www.query.com\/index.php?a=\">www.query.com\/index.php?a=<\/a>!'",687],["T_WHITESPACE"," ",687],["T_DOUBLE_ARROW","=>",687],["T_WHITESPACE"," ",687],["T_STRING","TRUE",687],",",["T_WHITESPACE","\n        ",687],["T_CONSTANT_ENCAPSED_STRING","'trailing <a href=\"http:\/\/www.partial.periods\">www.partial.periods<\/a>...'",688],["T_WHITESPACE"," ",688],["T_DOUBLE_ARROW","=>",688],["T_WHITESPACE"," ",688],["T_STRING","TRUE",688],",",["T_WHITESPACE","\n        ",688],["T_CONSTANT_ENCAPSED_STRING","'trailing <a href=\"mailto:exclamations@example.com\">exclamations@example.com<\/a>!!!'",689],["T_WHITESPACE"," ",689],["T_DOUBLE_ARROW","=>",689],["T_WHITESPACE"," ",689],["T_STRING","TRUE",689],",",["T_WHITESPACE","\n        ",689],["T_CONSTANT_ENCAPSED_STRING","'characters (<a href=\"http:\/\/www.example.com\/q=abc\">http:\/\/www.example.com\/q=abc<\/a>).'",690],["T_WHITESPACE"," ",690],["T_DOUBLE_ARROW","=>",690],["T_WHITESPACE"," ",690],["T_STRING","TRUE",690],",",["T_WHITESPACE","\n        ",690],["T_CONSTANT_ENCAPSED_STRING","'brackets (<a href=\"http:\/\/www.foo.com\/more_(than)_one_(parens)\">www.foo.com\/more_(than)_one_(parens)<\/a>).'",691],["T_WHITESPACE"," ",691],["T_DOUBLE_ARROW","=>",691],["T_WHITESPACE"," ",691],["T_STRING","TRUE",691],",",["T_WHITESPACE","\n        ",691],["T_CONSTANT_ENCAPSED_STRING","'brackets [<a href=\"https:\/\/www.drupal.org\/?class[]=1\">https:\/\/www.drupal.org\/?class[]=1<\/a>]'",692],["T_WHITESPACE"," ",692],["T_DOUBLE_ARROW","=>",692],["T_WHITESPACE"," ",692],["T_STRING","TRUE",692],",",["T_WHITESPACE","\n        ",692],["T_CONSTANT_ENCAPSED_STRING","'quotes \"<a href=\"https:\/\/www.drupal.org\/sample\">https:\/\/www.drupal.org\/sample<\/a>\"'",693],["T_WHITESPACE"," ",693],["T_DOUBLE_ARROW","=>",693],["T_WHITESPACE"," ",693],["T_STRING","TRUE",693],",",["T_WHITESPACE","\n      ",693],")",",",["T_WHITESPACE","\n      ",694],["T_CONSTANT_ENCAPSED_STRING","'\n(www.parenthesis.com\/dir?a=1&b=2#a)\n'",695],["T_WHITESPACE"," ",697],["T_DOUBLE_ARROW","=>",697],["T_WHITESPACE"," ",697],["T_ARRAY","array",697],"(",["T_WHITESPACE","\n        ",697],["T_CONSTANT_ENCAPSED_STRING","'(<a href=\"http:\/\/www.parenthesis.com\/dir?a=1&amp;b=2#a\">www.parenthesis.com\/dir?a=1&amp;b=2#a<\/a>)'",698],["T_WHITESPACE"," ",698],["T_DOUBLE_ARROW","=>",698],["T_WHITESPACE"," ",698],["T_STRING","TRUE",698],",",["T_WHITESPACE","\n      ",698],")",",",["T_WHITESPACE","\n    ",699],")",";",["T_WHITESPACE","\n    ",700],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","assertFilteredString",701],"(",["T_VARIABLE","$filter",701],",",["T_WHITESPACE"," ",701],["T_VARIABLE","$tests",701],")",";",["T_WHITESPACE","\n\n    ",701],["T_COMMENT","\/\/ Surrounding markup.\n",703],["T_WHITESPACE","    ",704],["T_VARIABLE","$tests",704],["T_WHITESPACE"," ",704],"=",["T_WHITESPACE"," ",704],["T_ARRAY","array",704],"(",["T_WHITESPACE","\n      ",704],["T_CONSTANT_ENCAPSED_STRING","'\n<p xmlns=\"www.namespace.com\" \/>\n<p xmlns=\"http:\/\/namespace.com\">\nAn <a href=\"http:\/\/example.com\" title=\"Read more at www.example.info...\">anchor<\/a>.\n<\/p>\n'",705],["T_WHITESPACE"," ",710],["T_DOUBLE_ARROW","=>",710],["T_WHITESPACE"," ",710],["T_ARRAY","array",710],"(",["T_WHITESPACE","\n        ",710],["T_CONSTANT_ENCAPSED_STRING","'<p xmlns=\"www.namespace.com\" \/>'",711],["T_WHITESPACE"," ",711],["T_DOUBLE_ARROW","=>",711],["T_WHITESPACE"," ",711],["T_STRING","TRUE",711],",",["T_WHITESPACE","\n        ",711],["T_CONSTANT_ENCAPSED_STRING","'<p xmlns=\"http:\/\/namespace.com\">'",712],["T_WHITESPACE"," ",712],["T_DOUBLE_ARROW","=>",712],["T_WHITESPACE"," ",712],["T_STRING","TRUE",712],",",["T_WHITESPACE","\n        ",712],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.namespace.com\"'",713],["T_WHITESPACE"," ",713],["T_DOUBLE_ARROW","=>",713],["T_WHITESPACE"," ",713],["T_STRING","FALSE",713],",",["T_WHITESPACE","\n        ",713],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/namespace.com\"'",714],["T_WHITESPACE"," ",714],["T_DOUBLE_ARROW","=>",714],["T_WHITESPACE"," ",714],["T_STRING","FALSE",714],",",["T_WHITESPACE","\n        ",714],["T_CONSTANT_ENCAPSED_STRING","'An <a href=\"http:\/\/example.com\" title=\"Read more at www.example.info...\">anchor<\/a>.'",715],["T_WHITESPACE"," ",715],["T_DOUBLE_ARROW","=>",715],["T_WHITESPACE"," ",715],["T_STRING","TRUE",715],",",["T_WHITESPACE","\n      ",715],")",",",["T_WHITESPACE","\n      ",716],["T_CONSTANT_ENCAPSED_STRING","'\nNot <a href=\"foo\">www.relative.com<\/a> or <a href=\"http:\/\/absolute.com\">www.absolute.com<\/a>\nbut <strong>http:\/\/www.strong.net<\/strong> or <em>www.emphasis.info<\/em>\n'",717],["T_WHITESPACE"," ",720],["T_DOUBLE_ARROW","=>",720],["T_WHITESPACE"," ",720],["T_ARRAY","array",720],"(",["T_WHITESPACE","\n        ",720],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"foo\">www.relative.com<\/a>'",721],["T_WHITESPACE"," ",721],["T_DOUBLE_ARROW","=>",721],["T_WHITESPACE"," ",721],["T_STRING","TRUE",721],",",["T_WHITESPACE","\n        ",721],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.relative.com\"'",722],["T_WHITESPACE"," ",722],["T_DOUBLE_ARROW","=>",722],["T_WHITESPACE"," ",722],["T_STRING","FALSE",722],",",["T_WHITESPACE","\n        ",722],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/absolute.com\">www.absolute.com<\/a>'",723],["T_WHITESPACE"," ",723],["T_DOUBLE_ARROW","=>",723],["T_WHITESPACE"," ",723],["T_STRING","TRUE",723],",",["T_WHITESPACE","\n        ",723],["T_CONSTANT_ENCAPSED_STRING","'<strong><a href=\"http:\/\/www.strong.net\">http:\/\/www.strong.net<\/a><\/strong>'",724],["T_WHITESPACE"," ",724],["T_DOUBLE_ARROW","=>",724],["T_WHITESPACE"," ",724],["T_STRING","TRUE",724],",",["T_WHITESPACE","\n        ",724],["T_CONSTANT_ENCAPSED_STRING","'<em><a href=\"http:\/\/www.emphasis.info\">www.emphasis.info<\/a><\/em>'",725],["T_WHITESPACE"," ",725],["T_DOUBLE_ARROW","=>",725],["T_WHITESPACE"," ",725],["T_STRING","TRUE",725],",",["T_WHITESPACE","\n      ",725],")",",",["T_WHITESPACE","\n      ",726],["T_CONSTANT_ENCAPSED_STRING","'\nTest <code>using www.example.com the code tag<\/code>.\n'",727],["T_WHITESPACE"," ",729],["T_DOUBLE_ARROW","=>",729],["T_WHITESPACE"," ",729],["T_ARRAY","array",729],"(",["T_WHITESPACE","\n        ",729],["T_CONSTANT_ENCAPSED_STRING","'href'",730],["T_WHITESPACE"," ",730],["T_DOUBLE_ARROW","=>",730],["T_WHITESPACE"," ",730],["T_STRING","FALSE",730],",",["T_WHITESPACE","\n        ",730],["T_CONSTANT_ENCAPSED_STRING","'http'",731],["T_WHITESPACE"," ",731],["T_DOUBLE_ARROW","=>",731],["T_WHITESPACE"," ",731],["T_STRING","FALSE",731],",",["T_WHITESPACE","\n      ",731],")",",",["T_WHITESPACE","\n      ",732],["T_CONSTANT_ENCAPSED_STRING","'\nIntro.\n<blockquote>\nQuoted text linking to www.example.com, written by person@example.com, originating from http:\/\/origin.example.com. <code>@see www.usage.example.com or <em>www.example.info<\/em> bla bla<\/code>.\n<\/blockquote>\n\nOutro.\n'",733],["T_WHITESPACE"," ",740],["T_DOUBLE_ARROW","=>",740],["T_WHITESPACE"," ",740],["T_ARRAY","array",740],"(",["T_WHITESPACE","\n        ",740],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example.com\"'",741],["T_WHITESPACE"," ",741],["T_DOUBLE_ARROW","=>",741],["T_WHITESPACE"," ",741],["T_STRING","TRUE",741],",",["T_WHITESPACE","\n        ",741],["T_CONSTANT_ENCAPSED_STRING","'href=\"mailto:person@example.com\"'",742],["T_WHITESPACE"," ",742],["T_DOUBLE_ARROW","=>",742],["T_WHITESPACE"," ",742],["T_STRING","TRUE",742],",",["T_WHITESPACE","\n        ",742],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/origin.example.com\"'",743],["T_WHITESPACE"," ",743],["T_DOUBLE_ARROW","=>",743],["T_WHITESPACE"," ",743],["T_STRING","TRUE",743],",",["T_WHITESPACE","\n        ",743],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/www.usage.example.com'",744],["T_WHITESPACE"," ",744],["T_DOUBLE_ARROW","=>",744],["T_WHITESPACE"," ",744],["T_STRING","FALSE",744],",",["T_WHITESPACE","\n        ",744],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/www.example.info'",745],["T_WHITESPACE"," ",745],["T_DOUBLE_ARROW","=>",745],["T_WHITESPACE"," ",745],["T_STRING","FALSE",745],",",["T_WHITESPACE","\n        ",745],["T_CONSTANT_ENCAPSED_STRING","'Intro.'",746],["T_WHITESPACE"," ",746],["T_DOUBLE_ARROW","=>",746],["T_WHITESPACE"," ",746],["T_STRING","TRUE",746],",",["T_WHITESPACE","\n        ",746],["T_CONSTANT_ENCAPSED_STRING","'Outro.'",747],["T_WHITESPACE"," ",747],["T_DOUBLE_ARROW","=>",747],["T_WHITESPACE"," ",747],["T_STRING","TRUE",747],",",["T_WHITESPACE","\n      ",747],")",",",["T_WHITESPACE","\n      ",748],["T_CONSTANT_ENCAPSED_STRING","'\nUnknown tag <x>containing x and www.example.com<\/x>? And a tag <pooh>beginning with p and containing www.example.pooh with p?<\/pooh>\n'",749],["T_WHITESPACE"," ",751],["T_DOUBLE_ARROW","=>",751],["T_WHITESPACE"," ",751],["T_ARRAY","array",751],"(",["T_WHITESPACE","\n        ",751],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example.com\"'",752],["T_WHITESPACE"," ",752],["T_DOUBLE_ARROW","=>",752],["T_WHITESPACE"," ",752],["T_STRING","TRUE",752],",",["T_WHITESPACE","\n        ",752],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example.pooh\"'",753],["T_WHITESPACE"," ",753],["T_DOUBLE_ARROW","=>",753],["T_WHITESPACE"," ",753],["T_STRING","TRUE",753],",",["T_WHITESPACE","\n      ",753],")",",",["T_WHITESPACE","\n      ",754],["T_CONSTANT_ENCAPSED_STRING","'\n<p>Test &lt;br\/&gt;: This is a www.example17.com example <strong>with<\/strong> various http:\/\/www.example18.com tags. *<br\/>\n It is important www.example19.com to *<br\/>test different URLs and http:\/\/www.example20.com in the same paragraph. *<br>\nHTML www.example21.com soup by person@example22.com can litererally http:\/\/www.example23.com contain *img*<img> anything. Just a www.example24.com with http:\/\/www.example25.com thrown in. www.example26.com from person@example27.com with extra http:\/\/www.example28.com.\n'",755],["T_WHITESPACE"," ",759],["T_DOUBLE_ARROW","=>",759],["T_WHITESPACE"," ",759],["T_ARRAY","array",759],"(",["T_WHITESPACE","\n        ",759],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example17.com\"'",760],["T_WHITESPACE"," ",760],["T_DOUBLE_ARROW","=>",760],["T_WHITESPACE"," ",760],["T_STRING","TRUE",760],",",["T_WHITESPACE","\n        ",760],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example18.com\"'",761],["T_WHITESPACE"," ",761],["T_DOUBLE_ARROW","=>",761],["T_WHITESPACE"," ",761],["T_STRING","TRUE",761],",",["T_WHITESPACE","\n        ",761],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example19.com\"'",762],["T_WHITESPACE"," ",762],["T_DOUBLE_ARROW","=>",762],["T_WHITESPACE"," ",762],["T_STRING","TRUE",762],",",["T_WHITESPACE","\n        ",762],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example20.com\"'",763],["T_WHITESPACE"," ",763],["T_DOUBLE_ARROW","=>",763],["T_WHITESPACE"," ",763],["T_STRING","TRUE",763],",",["T_WHITESPACE","\n        ",763],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example21.com\"'",764],["T_WHITESPACE"," ",764],["T_DOUBLE_ARROW","=>",764],["T_WHITESPACE"," ",764],["T_STRING","TRUE",764],",",["T_WHITESPACE","\n        ",764],["T_CONSTANT_ENCAPSED_STRING","'href=\"mailto:person@example22.com\"'",765],["T_WHITESPACE"," ",765],["T_DOUBLE_ARROW","=>",765],["T_WHITESPACE"," ",765],["T_STRING","TRUE",765],",",["T_WHITESPACE","\n        ",765],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example23.com\"'",766],["T_WHITESPACE"," ",766],["T_DOUBLE_ARROW","=>",766],["T_WHITESPACE"," ",766],["T_STRING","TRUE",766],",",["T_WHITESPACE","\n        ",766],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example24.com\"'",767],["T_WHITESPACE"," ",767],["T_DOUBLE_ARROW","=>",767],["T_WHITESPACE"," ",767],["T_STRING","TRUE",767],",",["T_WHITESPACE","\n        ",767],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example25.com\"'",768],["T_WHITESPACE"," ",768],["T_DOUBLE_ARROW","=>",768],["T_WHITESPACE"," ",768],["T_STRING","TRUE",768],",",["T_WHITESPACE","\n        ",768],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example26.com\"'",769],["T_WHITESPACE"," ",769],["T_DOUBLE_ARROW","=>",769],["T_WHITESPACE"," ",769],["T_STRING","TRUE",769],",",["T_WHITESPACE","\n        ",769],["T_CONSTANT_ENCAPSED_STRING","'href=\"mailto:person@example27.com\"'",770],["T_WHITESPACE"," ",770],["T_DOUBLE_ARROW","=>",770],["T_WHITESPACE"," ",770],["T_STRING","TRUE",770],",",["T_WHITESPACE","\n        ",770],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example28.com\"'",771],["T_WHITESPACE"," ",771],["T_DOUBLE_ARROW","=>",771],["T_WHITESPACE"," ",771],["T_STRING","TRUE",771],",",["T_WHITESPACE","\n      ",771],")",",",["T_WHITESPACE","\n      ",772],["T_CONSTANT_ENCAPSED_STRING","'\n<script>\n<!--\n  \/\/ @see www.example.com\n  var exampleurl = \"http:\/\/example.net\";\n-->\n<!--\/\/--><![CDATA[\/\/><!--\n  \/\/ @see www.example.com\n  var exampleurl = \"http:\/\/example.net\";\n\/\/--><!]]>\n<\/script>\n'",773],["T_WHITESPACE"," ",784],["T_DOUBLE_ARROW","=>",784],["T_WHITESPACE"," ",784],["T_ARRAY","array",784],"(",["T_WHITESPACE","\n        ",784],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example.com\"'",785],["T_WHITESPACE"," ",785],["T_DOUBLE_ARROW","=>",785],["T_WHITESPACE"," ",785],["T_STRING","FALSE",785],",",["T_WHITESPACE","\n        ",785],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/example.net\"'",786],["T_WHITESPACE"," ",786],["T_DOUBLE_ARROW","=>",786],["T_WHITESPACE"," ",786],["T_STRING","FALSE",786],",",["T_WHITESPACE","\n      ",786],")",",",["T_WHITESPACE","\n      ",787],["T_CONSTANT_ENCAPSED_STRING","'\n<style>body {\n  background: url(http:\/\/example.com\/pixel.gif);\n}<\/style>\n'",788],["T_WHITESPACE"," ",792],["T_DOUBLE_ARROW","=>",792],["T_WHITESPACE"," ",792],["T_ARRAY","array",792],"(",["T_WHITESPACE","\n        ",792],["T_CONSTANT_ENCAPSED_STRING","'href'",793],["T_WHITESPACE"," ",793],["T_DOUBLE_ARROW","=>",793],["T_WHITESPACE"," ",793],["T_STRING","FALSE",793],",",["T_WHITESPACE","\n      ",793],")",",",["T_WHITESPACE","\n      ",794],["T_CONSTANT_ENCAPSED_STRING","'\n<!-- Skip any URLs like www.example.com in comments -->\n'",795],["T_WHITESPACE"," ",797],["T_DOUBLE_ARROW","=>",797],["T_WHITESPACE"," ",797],["T_ARRAY","array",797],"(",["T_WHITESPACE","\n        ",797],["T_CONSTANT_ENCAPSED_STRING","'href'",798],["T_WHITESPACE"," ",798],["T_DOUBLE_ARROW","=>",798],["T_WHITESPACE"," ",798],["T_STRING","FALSE",798],",",["T_WHITESPACE","\n      ",798],")",",",["T_WHITESPACE","\n      ",799],["T_CONSTANT_ENCAPSED_STRING","'\n<!-- Skip any URLs like\nwww.example.com with a newline in comments -->\n'",800],["T_WHITESPACE"," ",803],["T_DOUBLE_ARROW","=>",803],["T_WHITESPACE"," ",803],["T_ARRAY","array",803],"(",["T_WHITESPACE","\n        ",803],["T_CONSTANT_ENCAPSED_STRING","'href'",804],["T_WHITESPACE"," ",804],["T_DOUBLE_ARROW","=>",804],["T_WHITESPACE"," ",804],["T_STRING","FALSE",804],",",["T_WHITESPACE","\n      ",804],")",",",["T_WHITESPACE","\n      ",805],["T_CONSTANT_ENCAPSED_STRING","'\n<!-- Skip any URLs like www.comment.com in comments. <p>Also ignore http:\/\/commented.out\/markup.<\/p> -->\n'",806],["T_WHITESPACE"," ",808],["T_DOUBLE_ARROW","=>",808],["T_WHITESPACE"," ",808],["T_ARRAY","array",808],"(",["T_WHITESPACE","\n        ",808],["T_CONSTANT_ENCAPSED_STRING","'href'",809],["T_WHITESPACE"," ",809],["T_DOUBLE_ARROW","=>",809],["T_WHITESPACE"," ",809],["T_STRING","FALSE",809],",",["T_WHITESPACE","\n      ",809],")",",",["T_WHITESPACE","\n      ",810],["T_CONSTANT_ENCAPSED_STRING","'\n<dl>\n<dt>www.example.com<\/dt>\n<dd>http:\/\/example.com<\/dd>\n<dd>person@example.com<\/dd>\n<dt>Check www.example.net<\/dt>\n<dd>Some text around http:\/\/www.example.info by person@example.info?<\/dd>\n<\/dl>\n'",811],["T_WHITESPACE"," ",819],["T_DOUBLE_ARROW","=>",819],["T_WHITESPACE"," ",819],["T_ARRAY","array",819],"(",["T_WHITESPACE","\n        ",819],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example.com\"'",820],["T_WHITESPACE"," ",820],["T_DOUBLE_ARROW","=>",820],["T_WHITESPACE"," ",820],["T_STRING","TRUE",820],",",["T_WHITESPACE","\n        ",820],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/example.com\"'",821],["T_WHITESPACE"," ",821],["T_DOUBLE_ARROW","=>",821],["T_WHITESPACE"," ",821],["T_STRING","TRUE",821],",",["T_WHITESPACE","\n        ",821],["T_CONSTANT_ENCAPSED_STRING","'href=\"mailto:person@example.com\"'",822],["T_WHITESPACE"," ",822],["T_DOUBLE_ARROW","=>",822],["T_WHITESPACE"," ",822],["T_STRING","TRUE",822],",",["T_WHITESPACE","\n        ",822],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example.net\"'",823],["T_WHITESPACE"," ",823],["T_DOUBLE_ARROW","=>",823],["T_WHITESPACE"," ",823],["T_STRING","TRUE",823],",",["T_WHITESPACE","\n        ",823],["T_CONSTANT_ENCAPSED_STRING","'href=\"http:\/\/www.example.info\"'",824],["T_WHITESPACE"," ",824],["T_DOUBLE_ARROW","=>",824],["T_WHITESPACE"," ",824],["T_STRING","TRUE",824],",",["T_WHITESPACE","\n        ",824],["T_CONSTANT_ENCAPSED_STRING","'href=\"mailto:person@example.info\"'",825],["T_WHITESPACE"," ",825],["T_DOUBLE_ARROW","=>",825],["T_WHITESPACE"," ",825],["T_STRING","TRUE",825],",",["T_WHITESPACE","\n      ",825],")",",",["T_WHITESPACE","\n      ",826],["T_CONSTANT_ENCAPSED_STRING","'\n<div>www.div.com<\/div>\n<ul>\n<li>http:\/\/listitem.com<\/li>\n<li class=\"odd\">www.class.listitem.com<\/li>\n<\/ul>\n'",827],["T_WHITESPACE"," ",833],["T_DOUBLE_ARROW","=>",833],["T_WHITESPACE"," ",833],["T_ARRAY","array",833],"(",["T_WHITESPACE","\n        ",833],["T_CONSTANT_ENCAPSED_STRING","'<div><a href=\"http:\/\/www.div.com\">www.div.com<\/a><\/div>'",834],["T_WHITESPACE"," ",834],["T_DOUBLE_ARROW","=>",834],["T_WHITESPACE"," ",834],["T_STRING","TRUE",834],",",["T_WHITESPACE","\n        ",834],["T_CONSTANT_ENCAPSED_STRING","'<li><a href=\"http:\/\/listitem.com\">http:\/\/listitem.com<\/a><\/li>'",835],["T_WHITESPACE"," ",835],["T_DOUBLE_ARROW","=>",835],["T_WHITESPACE"," ",835],["T_STRING","TRUE",835],",",["T_WHITESPACE","\n        ",835],["T_CONSTANT_ENCAPSED_STRING","'<li class=\"odd\"><a href=\"http:\/\/www.class.listitem.com\">www.class.listitem.com<\/a><\/li>'",836],["T_WHITESPACE"," ",836],["T_DOUBLE_ARROW","=>",836],["T_WHITESPACE"," ",836],["T_STRING","TRUE",836],",",["T_WHITESPACE","\n      ",836],")",",",["T_WHITESPACE","\n    ",837],")",";",["T_WHITESPACE","\n    ",838],["T_VARIABLE","$this",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","assertFilteredString",839],"(",["T_VARIABLE","$filter",839],",",["T_WHITESPACE"," ",839],["T_VARIABLE","$tests",839],")",";",["T_WHITESPACE","\n\n    ",839],["T_COMMENT","\/\/ URL trimming.\n",841],["T_WHITESPACE","    ",842],["T_VARIABLE","$filter",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","setConfiguration",842],"(",["T_ARRAY","array",842],"(",["T_WHITESPACE","\n      ",842],["T_CONSTANT_ENCAPSED_STRING","'settings'",843],["T_WHITESPACE"," ",843],["T_DOUBLE_ARROW","=>",843],["T_WHITESPACE"," ",843],["T_ARRAY","array",843],"(",["T_WHITESPACE","\n        ",843],["T_CONSTANT_ENCAPSED_STRING","'filter_url_length'",844],["T_WHITESPACE"," ",844],["T_DOUBLE_ARROW","=>",844],["T_WHITESPACE"," ",844],["T_LNUMBER","20",844],",",["T_WHITESPACE","\n      ",844],")",["T_WHITESPACE","\n    ",845],")",")",";",["T_WHITESPACE","\n    ",846],["T_VARIABLE","$tests",847],["T_WHITESPACE"," ",847],"=",["T_WHITESPACE"," ",847],["T_ARRAY","array",847],"(",["T_WHITESPACE","\n      ",847],["T_CONSTANT_ENCAPSED_STRING","'www.trimmed.com\/d\/ff.ext?a=1&b=2#a1'",848],["T_WHITESPACE"," ",848],["T_DOUBLE_ARROW","=>",848],["T_WHITESPACE"," ",848],["T_ARRAY","array",848],"(",["T_WHITESPACE","\n        ",848],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"http:\/\/www.trimmed.com\/d\/ff.ext?a=1&amp;b=2#a1\">www.trimmed.com\/d\/f\u00e2\u0080\u00a6<\/a>'",849],["T_WHITESPACE"," ",849],["T_DOUBLE_ARROW","=>",849],["T_WHITESPACE"," ",849],["T_STRING","TRUE",849],",",["T_WHITESPACE","\n      ",849],")",",",["T_WHITESPACE","\n    ",850],")",";",["T_WHITESPACE","\n    ",851],["T_VARIABLE","$this",852],["T_OBJECT_OPERATOR","->",852],["T_STRING","assertFilteredString",852],"(",["T_VARIABLE","$filter",852],",",["T_WHITESPACE"," ",852],["T_VARIABLE","$tests",852],")",";",["T_WHITESPACE","\n  ",852],"}",["T_WHITESPACE","\n\n  ",853],["T_DOC_COMMENT","\/**\n   * Asserts multiple filter output expectations for multiple input strings.\n   *\n   * @param FilterInterface $filter\n   *   A input filter object.\n   * @param array $tests\n   *   An associative array, whereas each key is an arbitrary input string and\n   *   each value is again an associative array whose keys are filter output\n   *   strings and whose values are Booleans indicating whether the output is\n   *   expected or not. For example:\n   *   @code\n   *   $tests = array(\n   *     'Input string' => array(\n   *       '<p>Input string<\/p>' => TRUE,\n   *       'Input string<br' => FALSE,\n   *     ),\n   *   );\n   *   @endcode\n   *\/",855],["T_WHITESPACE","\n  ",873],["T_FUNCTION","function",874],["T_WHITESPACE"," ",874],["T_STRING","assertFilteredString",874],"(",["T_VARIABLE","$filter",874],",",["T_WHITESPACE"," ",874],["T_VARIABLE","$tests",874],")",["T_WHITESPACE"," ",874],"{",["T_WHITESPACE","\n    ",874],["T_FOREACH","foreach",875],["T_WHITESPACE"," ",875],"(",["T_VARIABLE","$tests",875],["T_WHITESPACE"," ",875],["T_AS","as",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$source",875],["T_WHITESPACE"," ",875],["T_DOUBLE_ARROW","=>",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$tasks",875],")",["T_WHITESPACE"," ",875],"{",["T_WHITESPACE","\n      ",875],["T_VARIABLE","$result",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_VARIABLE","$filter",876],["T_OBJECT_OPERATOR","->",876],["T_STRING","process",876],"(",["T_VARIABLE","$source",876],",",["T_WHITESPACE"," ",876],["T_VARIABLE","$filter",876],")",["T_OBJECT_OPERATOR","->",876],["T_STRING","getProcessedText",876],"(",")",";",["T_WHITESPACE","\n      ",876],["T_FOREACH","foreach",877],["T_WHITESPACE"," ",877],"(",["T_VARIABLE","$tasks",877],["T_WHITESPACE"," ",877],["T_AS","as",877],["T_WHITESPACE"," ",877],["T_VARIABLE","$value",877],["T_WHITESPACE"," ",877],["T_DOUBLE_ARROW","=>",877],["T_WHITESPACE"," ",877],["T_VARIABLE","$is_expected",877],")",["T_WHITESPACE"," ",877],"{",["T_WHITESPACE","\n        ",877],["T_COMMENT","\/\/ Not using assertIdentical, since combination with strpos() is hard to grok.\n",878],["T_WHITESPACE","        ",879],["T_IF","if",879],["T_WHITESPACE"," ",879],"(",["T_VARIABLE","$is_expected",879],")",["T_WHITESPACE"," ",879],"{",["T_WHITESPACE","\n          ",879],["T_VARIABLE","$success",880],["T_WHITESPACE"," ",880],"=",["T_WHITESPACE"," ",880],["T_VARIABLE","$this",880],["T_OBJECT_OPERATOR","->",880],["T_STRING","assertTrue",880],"(",["T_STRING","strpos",880],"(",["T_VARIABLE","$result",880],",",["T_WHITESPACE"," ",880],["T_VARIABLE","$value",880],")",["T_WHITESPACE"," ",880],["T_IS_NOT_IDENTICAL","!==",880],["T_WHITESPACE"," ",880],["T_STRING","FALSE",880],",",["T_WHITESPACE"," ",880],["T_STRING","format_string",880],"(",["T_CONSTANT_ENCAPSED_STRING","'@source: @value found. Filtered result: @result.'",880],",",["T_WHITESPACE"," ",880],["T_ARRAY","array",880],"(",["T_WHITESPACE","\n            ",880],["T_CONSTANT_ENCAPSED_STRING","'@source'",881],["T_WHITESPACE"," ",881],["T_DOUBLE_ARROW","=>",881],["T_WHITESPACE"," ",881],["T_STRING","var_export",881],"(",["T_VARIABLE","$source",881],",",["T_WHITESPACE"," ",881],["T_STRING","TRUE",881],")",",",["T_WHITESPACE","\n            ",881],["T_CONSTANT_ENCAPSED_STRING","'@value'",882],["T_WHITESPACE"," ",882],["T_DOUBLE_ARROW","=>",882],["T_WHITESPACE"," ",882],["T_STRING","var_export",882],"(",["T_VARIABLE","$value",882],",",["T_WHITESPACE"," ",882],["T_STRING","TRUE",882],")",",",["T_WHITESPACE","\n            ",882],["T_CONSTANT_ENCAPSED_STRING","'@result'",883],["T_WHITESPACE"," ",883],["T_DOUBLE_ARROW","=>",883],["T_WHITESPACE"," ",883],["T_STRING","var_export",883],"(",["T_VARIABLE","$result",883],",",["T_WHITESPACE"," ",883],["T_STRING","TRUE",883],")",",",["T_WHITESPACE","\n          ",883],")",")",")",";",["T_WHITESPACE","\n        ",884],"}",["T_WHITESPACE","\n        ",885],["T_ELSE","else",886],["T_WHITESPACE"," ",886],"{",["T_WHITESPACE","\n          ",886],["T_VARIABLE","$success",887],["T_WHITESPACE"," ",887],"=",["T_WHITESPACE"," ",887],["T_VARIABLE","$this",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","assertTrue",887],"(",["T_STRING","strpos",887],"(",["T_VARIABLE","$result",887],",",["T_WHITESPACE"," ",887],["T_VARIABLE","$value",887],")",["T_WHITESPACE"," ",887],["T_IS_IDENTICAL","===",887],["T_WHITESPACE"," ",887],["T_STRING","FALSE",887],",",["T_WHITESPACE"," ",887],["T_STRING","format_string",887],"(",["T_CONSTANT_ENCAPSED_STRING","'@source: @value not found. Filtered result: @result.'",887],",",["T_WHITESPACE"," ",887],["T_ARRAY","array",887],"(",["T_WHITESPACE","\n            ",887],["T_CONSTANT_ENCAPSED_STRING","'@source'",888],["T_WHITESPACE"," ",888],["T_DOUBLE_ARROW","=>",888],["T_WHITESPACE"," ",888],["T_STRING","var_export",888],"(",["T_VARIABLE","$source",888],",",["T_WHITESPACE"," ",888],["T_STRING","TRUE",888],")",",",["T_WHITESPACE","\n            ",888],["T_CONSTANT_ENCAPSED_STRING","'@value'",889],["T_WHITESPACE"," ",889],["T_DOUBLE_ARROW","=>",889],["T_WHITESPACE"," ",889],["T_STRING","var_export",889],"(",["T_VARIABLE","$value",889],",",["T_WHITESPACE"," ",889],["T_STRING","TRUE",889],")",",",["T_WHITESPACE","\n            ",889],["T_CONSTANT_ENCAPSED_STRING","'@result'",890],["T_WHITESPACE"," ",890],["T_DOUBLE_ARROW","=>",890],["T_WHITESPACE"," ",890],["T_STRING","var_export",890],"(",["T_VARIABLE","$result",890],",",["T_WHITESPACE"," ",890],["T_STRING","TRUE",890],")",",",["T_WHITESPACE","\n          ",890],")",")",")",";",["T_WHITESPACE","\n        ",891],"}",["T_WHITESPACE","\n        ",892],["T_IF","if",893],["T_WHITESPACE"," ",893],"(","!",["T_VARIABLE","$success",893],")",["T_WHITESPACE"," ",893],"{",["T_WHITESPACE","\n          ",893],["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","verbose",894],"(",["T_CONSTANT_ENCAPSED_STRING","'Source:<pre>'",894],["T_WHITESPACE"," ",894],".",["T_WHITESPACE"," ",894],["T_STRING","Html",894],["T_DOUBLE_COLON","::",894],["T_STRING","escape",894],"(",["T_STRING","var_export",894],"(",["T_VARIABLE","$source",894],",",["T_WHITESPACE"," ",894],["T_STRING","TRUE",894],")",")",["T_WHITESPACE"," ",894],".",["T_WHITESPACE"," ",894],["T_CONSTANT_ENCAPSED_STRING","'<\/pre>'",894],["T_WHITESPACE","\n            ",894],".",["T_WHITESPACE"," ",895],["T_CONSTANT_ENCAPSED_STRING","'<hr \/>'",895],["T_WHITESPACE"," ",895],".",["T_WHITESPACE"," ",895],["T_CONSTANT_ENCAPSED_STRING","'Result:<pre>'",895],["T_WHITESPACE"," ",895],".",["T_WHITESPACE"," ",895],["T_STRING","Html",895],["T_DOUBLE_COLON","::",895],["T_STRING","escape",895],"(",["T_STRING","var_export",895],"(",["T_VARIABLE","$result",895],",",["T_WHITESPACE"," ",895],["T_STRING","TRUE",895],")",")",["T_WHITESPACE"," ",895],".",["T_WHITESPACE"," ",895],["T_CONSTANT_ENCAPSED_STRING","'<\/pre>'",895],["T_WHITESPACE","\n            ",895],".",["T_WHITESPACE"," ",896],["T_CONSTANT_ENCAPSED_STRING","'<hr \/>'",896],["T_WHITESPACE"," ",896],".",["T_WHITESPACE"," ",896],"(",["T_VARIABLE","$is_expected",896],["T_WHITESPACE"," ",896],"?",["T_WHITESPACE"," ",896],["T_CONSTANT_ENCAPSED_STRING","'Expected:'",896],["T_WHITESPACE"," ",896],":",["T_WHITESPACE"," ",896],["T_CONSTANT_ENCAPSED_STRING","'Not expected:'",896],")",["T_WHITESPACE","\n            ",896],".",["T_WHITESPACE"," ",897],["T_CONSTANT_ENCAPSED_STRING","'<pre>'",897],["T_WHITESPACE"," ",897],".",["T_WHITESPACE"," ",897],["T_STRING","Html",897],["T_DOUBLE_COLON","::",897],["T_STRING","escape",897],"(",["T_STRING","var_export",897],"(",["T_VARIABLE","$value",897],",",["T_WHITESPACE"," ",897],["T_STRING","TRUE",897],")",")",["T_WHITESPACE"," ",897],".",["T_WHITESPACE"," ",897],["T_CONSTANT_ENCAPSED_STRING","'<\/pre>'",897],["T_WHITESPACE","\n          ",897],")",";",["T_WHITESPACE","\n        ",898],"}",["T_WHITESPACE","\n      ",899],"}",["T_WHITESPACE","\n    ",900],"}",["T_WHITESPACE","\n  ",901],"}",["T_WHITESPACE","\n\n  ",902],["T_DOC_COMMENT","\/**\n   * Tests URL filter on longer content.\n   *\n   * Filters based on regular expressions should also be tested with a more\n   * complex content than just isolated test lines.\n   * The most common errors are:\n   * - accidental '*' (greedy) match instead of '*?' (minimal) match.\n   * - only matching first occurrence instead of all.\n   * - newlines not matching '.*'.\n   *\n   * This test covers:\n   * - Document with multiple newlines and paragraphs (two newlines).\n   * - Mix of several HTML tags, invalid non-HTML tags, tags to ignore and HTML\n   *   comments.\n   * - Empty HTML tags (BR, IMG).\n   * - Mix of absolute and partial URLs, and email addresses in one content.\n   *\/",904],["T_WHITESPACE","\n  ",920],["T_FUNCTION","function",921],["T_WHITESPACE"," ",921],["T_STRING","testUrlFilterContent",921],"(",")",["T_WHITESPACE"," ",921],"{",["T_WHITESPACE","\n    ",921],["T_COMMENT","\/\/ Get FilterUrl object.\n",922],["T_WHITESPACE","    ",923],["T_VARIABLE","$filter",923],["T_WHITESPACE"," ",923],"=",["T_WHITESPACE"," ",923],["T_VARIABLE","$this",923],["T_OBJECT_OPERATOR","->",923],["T_STRING","filters",923],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_url'",923],"]",";",["T_WHITESPACE","\n    ",923],["T_VARIABLE","$filter",924],["T_OBJECT_OPERATOR","->",924],["T_STRING","setConfiguration",924],"(",["T_ARRAY","array",924],"(",["T_WHITESPACE","\n      ",924],["T_CONSTANT_ENCAPSED_STRING","'settings'",925],["T_WHITESPACE"," ",925],["T_DOUBLE_ARROW","=>",925],["T_WHITESPACE"," ",925],["T_ARRAY","array",925],"(",["T_WHITESPACE","\n        ",925],["T_CONSTANT_ENCAPSED_STRING","'filter_url_length'",926],["T_WHITESPACE"," ",926],["T_DOUBLE_ARROW","=>",926],["T_WHITESPACE"," ",926],["T_LNUMBER","496",926],",",["T_WHITESPACE","\n      ",926],")",["T_WHITESPACE","\n    ",927],")",")",";",["T_WHITESPACE","\n    ",928],["T_VARIABLE","$path",929],["T_WHITESPACE"," ",929],"=",["T_WHITESPACE"," ",929],["T_DIR","__DIR__",929],["T_WHITESPACE"," ",929],".",["T_WHITESPACE"," ",929],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..'",929],";",["T_WHITESPACE","\n\n    ",929],["T_VARIABLE","$input",931],["T_WHITESPACE"," ",931],"=",["T_WHITESPACE"," ",931],["T_STRING","file_get_contents",931],"(",["T_VARIABLE","$path",931],["T_WHITESPACE"," ",931],".",["T_WHITESPACE"," ",931],["T_CONSTANT_ENCAPSED_STRING","'\/filter.url-input.txt'",931],")",";",["T_WHITESPACE","\n    ",931],["T_VARIABLE","$expected",932],["T_WHITESPACE"," ",932],"=",["T_WHITESPACE"," ",932],["T_STRING","file_get_contents",932],"(",["T_VARIABLE","$path",932],["T_WHITESPACE"," ",932],".",["T_WHITESPACE"," ",932],["T_CONSTANT_ENCAPSED_STRING","'\/filter.url-output.txt'",932],")",";",["T_WHITESPACE","\n    ",932],["T_VARIABLE","$result",933],["T_WHITESPACE"," ",933],"=",["T_WHITESPACE"," ",933],["T_STRING","_filter_url",933],"(",["T_VARIABLE","$input",933],",",["T_WHITESPACE"," ",933],["T_VARIABLE","$filter",933],")",";",["T_WHITESPACE","\n    ",933],["T_VARIABLE","$this",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","assertIdentical",934],"(",["T_VARIABLE","$result",934],",",["T_WHITESPACE"," ",934],["T_VARIABLE","$expected",934],",",["T_WHITESPACE"," ",934],["T_CONSTANT_ENCAPSED_STRING","'Complex HTML document was correctly processed.'",934],")",";",["T_WHITESPACE","\n  ",934],"}",["T_WHITESPACE","\n\n  ",935],["T_DOC_COMMENT","\/**\n   * Tests the HTML corrector filter.\n   *\n   * @todo This test could really use some validity checking function.\n   *\/",937],["T_WHITESPACE","\n  ",941],["T_FUNCTION","function",942],["T_WHITESPACE"," ",942],["T_STRING","testHtmlCorrectorFilter",942],"(",")",["T_WHITESPACE"," ",942],"{",["T_WHITESPACE","\n    ",942],["T_COMMENT","\/\/ Tag closing.\n",943],["T_WHITESPACE","    ",944],["T_VARIABLE","$f",944],["T_WHITESPACE"," ",944],"=",["T_WHITESPACE"," ",944],["T_STRING","Html",944],["T_DOUBLE_COLON","::",944],["T_STRING","normalize",944],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>text'",944],")",";",["T_WHITESPACE","\n    ",944],["T_VARIABLE","$this",945],["T_OBJECT_OPERATOR","->",945],["T_STRING","assertEqual",945],"(",["T_VARIABLE","$f",945],",",["T_WHITESPACE"," ",945],["T_CONSTANT_ENCAPSED_STRING","'<p>text<\/p>'",945],",",["T_WHITESPACE"," ",945],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- tag closing at the end of input.'",945],")",";",["T_WHITESPACE","\n\n    ",945],["T_VARIABLE","$f",947],["T_WHITESPACE"," ",947],"=",["T_WHITESPACE"," ",947],["T_STRING","Html",947],["T_DOUBLE_COLON","::",947],["T_STRING","normalize",947],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>text<p><p>text'",947],")",";",["T_WHITESPACE","\n    ",947],["T_VARIABLE","$this",948],["T_OBJECT_OPERATOR","->",948],["T_STRING","assertEqual",948],"(",["T_VARIABLE","$f",948],",",["T_WHITESPACE"," ",948],["T_CONSTANT_ENCAPSED_STRING","'<p>text<\/p><p><\/p><p>text<\/p>'",948],",",["T_WHITESPACE"," ",948],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- tag closing.'",948],")",";",["T_WHITESPACE","\n\n    ",948],["T_VARIABLE","$f",950],["T_WHITESPACE"," ",950],"=",["T_WHITESPACE"," ",950],["T_STRING","Html",950],["T_DOUBLE_COLON","::",950],["T_STRING","normalize",950],"(",["T_CONSTANT_ENCAPSED_STRING","\"<ul><li>e1<li>e2\"",950],")",";",["T_WHITESPACE","\n    ",950],["T_VARIABLE","$this",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","assertEqual",951],"(",["T_VARIABLE","$f",951],",",["T_WHITESPACE"," ",951],["T_CONSTANT_ENCAPSED_STRING","\"<ul><li>e1<\/li><li>e2<\/li><\/ul>\"",951],",",["T_WHITESPACE"," ",951],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- unclosed list tags.'",951],")",";",["T_WHITESPACE","\n\n    ",951],["T_VARIABLE","$f",953],["T_WHITESPACE"," ",953],"=",["T_WHITESPACE"," ",953],["T_STRING","Html",953],["T_DOUBLE_COLON","::",953],["T_STRING","normalize",953],"(",["T_CONSTANT_ENCAPSED_STRING","'<div id=\"d\">content'",953],")",";",["T_WHITESPACE","\n    ",953],["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","assertEqual",954],"(",["T_VARIABLE","$f",954],",",["T_WHITESPACE"," ",954],["T_CONSTANT_ENCAPSED_STRING","'<div id=\"d\">content<\/div>'",954],",",["T_WHITESPACE"," ",954],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- unclosed tag with attribute.'",954],")",";",["T_WHITESPACE","\n\n    ",954],["T_COMMENT","\/\/ XHTML slash for empty elements.\n",956],["T_WHITESPACE","    ",957],["T_VARIABLE","$f",957],["T_WHITESPACE"," ",957],"=",["T_WHITESPACE"," ",957],["T_STRING","Html",957],["T_DOUBLE_COLON","::",957],["T_STRING","normalize",957],"(",["T_CONSTANT_ENCAPSED_STRING","'<hr><br>'",957],")",";",["T_WHITESPACE","\n    ",957],["T_VARIABLE","$this",958],["T_OBJECT_OPERATOR","->",958],["T_STRING","assertEqual",958],"(",["T_VARIABLE","$f",958],",",["T_WHITESPACE"," ",958],["T_CONSTANT_ENCAPSED_STRING","'<hr \/><br \/>'",958],",",["T_WHITESPACE"," ",958],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- XHTML closing slash.'",958],")",";",["T_WHITESPACE","\n\n    ",958],["T_VARIABLE","$f",960],["T_WHITESPACE"," ",960],"=",["T_WHITESPACE"," ",960],["T_STRING","Html",960],["T_DOUBLE_COLON","::",960],["T_STRING","normalize",960],"(",["T_CONSTANT_ENCAPSED_STRING","'<P>test<\/P>'",960],")",";",["T_WHITESPACE","\n    ",960],["T_VARIABLE","$this",961],["T_OBJECT_OPERATOR","->",961],["T_STRING","assertEqual",961],"(",["T_VARIABLE","$f",961],",",["T_WHITESPACE"," ",961],["T_CONSTANT_ENCAPSED_STRING","'<p>test<\/p>'",961],",",["T_WHITESPACE"," ",961],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Convert uppercased tags to proper lowercased ones.'",961],")",";",["T_WHITESPACE","\n\n    ",961],["T_VARIABLE","$f",963],["T_WHITESPACE"," ",963],"=",["T_WHITESPACE"," ",963],["T_STRING","Html",963],["T_DOUBLE_COLON","::",963],["T_STRING","normalize",963],"(",["T_CONSTANT_ENCAPSED_STRING","'<P>test<\/p>'",963],")",";",["T_WHITESPACE","\n    ",963],["T_VARIABLE","$this",964],["T_OBJECT_OPERATOR","->",964],["T_STRING","assertEqual",964],"(",["T_VARIABLE","$f",964],",",["T_WHITESPACE"," ",964],["T_CONSTANT_ENCAPSED_STRING","'<p>test<\/p>'",964],",",["T_WHITESPACE"," ",964],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Convert uppercased tags to proper lowercased ones.'",964],")",";",["T_WHITESPACE","\n\n    ",964],["T_VARIABLE","$f",966],["T_WHITESPACE"," ",966],"=",["T_WHITESPACE"," ",966],["T_STRING","Html",966],["T_DOUBLE_COLON","::",966],["T_STRING","normalize",966],"(",["T_CONSTANT_ENCAPSED_STRING","'test<hr \/>'",966],")",";",["T_WHITESPACE","\n    ",966],["T_VARIABLE","$this",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","assertEqual",967],"(",["T_VARIABLE","$f",967],",",["T_WHITESPACE"," ",967],["T_CONSTANT_ENCAPSED_STRING","'test<hr \/>'",967],",",["T_WHITESPACE"," ",967],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Let proper XHTML pass through.'",967],")",";",["T_WHITESPACE","\n\n    ",967],["T_VARIABLE","$f",969],["T_WHITESPACE"," ",969],"=",["T_WHITESPACE"," ",969],["T_STRING","Html",969],["T_DOUBLE_COLON","::",969],["T_STRING","normalize",969],"(",["T_CONSTANT_ENCAPSED_STRING","'test<hr\/>'",969],")",";",["T_WHITESPACE","\n    ",969],["T_VARIABLE","$this",970],["T_OBJECT_OPERATOR","->",970],["T_STRING","assertEqual",970],"(",["T_VARIABLE","$f",970],",",["T_WHITESPACE"," ",970],["T_CONSTANT_ENCAPSED_STRING","'test<hr \/>'",970],",",["T_WHITESPACE"," ",970],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Let proper XHTML pass through, but ensure there is a single space before the closing slash.'",970],")",";",["T_WHITESPACE","\n\n    ",970],["T_VARIABLE","$f",972],["T_WHITESPACE"," ",972],"=",["T_WHITESPACE"," ",972],["T_STRING","Html",972],["T_DOUBLE_COLON","::",972],["T_STRING","normalize",972],"(",["T_CONSTANT_ENCAPSED_STRING","'test<hr    \/>'",972],")",";",["T_WHITESPACE","\n    ",972],["T_VARIABLE","$this",973],["T_OBJECT_OPERATOR","->",973],["T_STRING","assertEqual",973],"(",["T_VARIABLE","$f",973],",",["T_WHITESPACE"," ",973],["T_CONSTANT_ENCAPSED_STRING","'test<hr \/>'",973],",",["T_WHITESPACE"," ",973],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Let proper XHTML pass through, but ensure there are not too many spaces before the closing slash.'",973],")",";",["T_WHITESPACE","\n\n    ",973],["T_VARIABLE","$f",975],["T_WHITESPACE"," ",975],"=",["T_WHITESPACE"," ",975],["T_STRING","Html",975],["T_DOUBLE_COLON","::",975],["T_STRING","normalize",975],"(",["T_CONSTANT_ENCAPSED_STRING","'<span class=\"test\" \/>'",975],")",";",["T_WHITESPACE","\n    ",975],["T_VARIABLE","$this",976],["T_OBJECT_OPERATOR","->",976],["T_STRING","assertEqual",976],"(",["T_VARIABLE","$f",976],",",["T_WHITESPACE"," ",976],["T_CONSTANT_ENCAPSED_STRING","'<span class=\"test\"><\/span>'",976],",",["T_WHITESPACE"," ",976],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Convert XHTML that is properly formed but that would not be compatible with typical HTML user agents.'",976],")",";",["T_WHITESPACE","\n\n    ",976],["T_VARIABLE","$f",978],["T_WHITESPACE"," ",978],"=",["T_WHITESPACE"," ",978],["T_STRING","Html",978],["T_DOUBLE_COLON","::",978],["T_STRING","normalize",978],"(",["T_CONSTANT_ENCAPSED_STRING","'test1<br class=\"test\">test2'",978],")",";",["T_WHITESPACE","\n    ",978],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","assertEqual",979],"(",["T_VARIABLE","$f",979],",",["T_WHITESPACE"," ",979],["T_CONSTANT_ENCAPSED_STRING","'test1<br class=\"test\" \/>test2'",979],",",["T_WHITESPACE"," ",979],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Automatically close single tags.'",979],")",";",["T_WHITESPACE","\n\n    ",979],["T_VARIABLE","$f",981],["T_WHITESPACE"," ",981],"=",["T_WHITESPACE"," ",981],["T_STRING","Html",981],["T_DOUBLE_COLON","::",981],["T_STRING","normalize",981],"(",["T_CONSTANT_ENCAPSED_STRING","'line1<hr>line2'",981],")",";",["T_WHITESPACE","\n    ",981],["T_VARIABLE","$this",982],["T_OBJECT_OPERATOR","->",982],["T_STRING","assertEqual",982],"(",["T_VARIABLE","$f",982],",",["T_WHITESPACE"," ",982],["T_CONSTANT_ENCAPSED_STRING","'line1<hr \/>line2'",982],",",["T_WHITESPACE"," ",982],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Automatically close single tags.'",982],")",";",["T_WHITESPACE","\n\n    ",982],["T_VARIABLE","$f",984],["T_WHITESPACE"," ",984],"=",["T_WHITESPACE"," ",984],["T_STRING","Html",984],["T_DOUBLE_COLON","::",984],["T_STRING","normalize",984],"(",["T_CONSTANT_ENCAPSED_STRING","'line1<HR>line2'",984],")",";",["T_WHITESPACE","\n    ",984],["T_VARIABLE","$this",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","assertEqual",985],"(",["T_VARIABLE","$f",985],",",["T_WHITESPACE"," ",985],["T_CONSTANT_ENCAPSED_STRING","'line1<hr \/>line2'",985],",",["T_WHITESPACE"," ",985],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Automatically close single tags.'",985],")",";",["T_WHITESPACE","\n\n    ",985],["T_VARIABLE","$f",987],["T_WHITESPACE"," ",987],"=",["T_WHITESPACE"," ",987],["T_STRING","Html",987],["T_DOUBLE_COLON","::",987],["T_STRING","normalize",987],"(",["T_CONSTANT_ENCAPSED_STRING","'<img src=\"http:\/\/example.com\/test.jpg\">test<\/img>'",987],")",";",["T_WHITESPACE","\n    ",987],["T_VARIABLE","$this",988],["T_OBJECT_OPERATOR","->",988],["T_STRING","assertEqual",988],"(",["T_VARIABLE","$f",988],",",["T_WHITESPACE"," ",988],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"http:\/\/example.com\/test.jpg\" \/>test'",988],",",["T_WHITESPACE"," ",988],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Automatically close single tags.'",988],")",";",["T_WHITESPACE","\n\n    ",988],["T_VARIABLE","$f",990],["T_WHITESPACE"," ",990],"=",["T_WHITESPACE"," ",990],["T_STRING","Html",990],["T_DOUBLE_COLON","::",990],["T_STRING","normalize",990],"(",["T_CONSTANT_ENCAPSED_STRING","'<br><\/br>'",990],")",";",["T_WHITESPACE","\n    ",990],["T_VARIABLE","$this",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","assertEqual",991],"(",["T_VARIABLE","$f",991],",",["T_WHITESPACE"," ",991],["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",991],",",["T_WHITESPACE"," ",991],["T_CONSTANT_ENCAPSED_STRING","\"HTML corrector -- Transform empty tags to a single closed tag if the tag's content model is EMPTY.\"",991],")",";",["T_WHITESPACE","\n\n    ",991],["T_VARIABLE","$f",993],["T_WHITESPACE"," ",993],"=",["T_WHITESPACE"," ",993],["T_STRING","Html",993],["T_DOUBLE_COLON","::",993],["T_STRING","normalize",993],"(",["T_CONSTANT_ENCAPSED_STRING","'<div><\/div>'",993],")",";",["T_WHITESPACE","\n    ",993],["T_VARIABLE","$this",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","assertEqual",994],"(",["T_VARIABLE","$f",994],",",["T_WHITESPACE"," ",994],["T_CONSTANT_ENCAPSED_STRING","'<div><\/div>'",994],",",["T_WHITESPACE"," ",994],["T_CONSTANT_ENCAPSED_STRING","\"HTML corrector -- Do not transform empty tags to a single closed tag if the tag's content model is not EMPTY.\"",994],")",";",["T_WHITESPACE","\n\n    ",994],["T_VARIABLE","$f",996],["T_WHITESPACE"," ",996],"=",["T_WHITESPACE"," ",996],["T_STRING","Html",996],["T_DOUBLE_COLON","::",996],["T_STRING","normalize",996],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>line1<br\/><hr\/>line2<\/p>'",996],")",";",["T_WHITESPACE","\n    ",996],["T_VARIABLE","$this",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","assertEqual",997],"(",["T_VARIABLE","$f",997],",",["T_WHITESPACE"," ",997],["T_CONSTANT_ENCAPSED_STRING","'<p>line1<br \/><\/p><hr \/>line2'",997],",",["T_WHITESPACE"," ",997],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Move non-inline elements outside of inline containers.'",997],")",";",["T_WHITESPACE","\n\n    ",997],["T_VARIABLE","$f",999],["T_WHITESPACE"," ",999],"=",["T_WHITESPACE"," ",999],["T_STRING","Html",999],["T_DOUBLE_COLON","::",999],["T_STRING","normalize",999],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>line1<div>line2<\/div><\/p>'",999],")",";",["T_WHITESPACE","\n    ",999],["T_VARIABLE","$this",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","assertEqual",1000],"(",["T_VARIABLE","$f",1000],",",["T_WHITESPACE"," ",1000],["T_CONSTANT_ENCAPSED_STRING","'<p>line1<\/p><div>line2<\/div>'",1000],",",["T_WHITESPACE"," ",1000],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Move non-inline elements outside of inline containers.'",1000],")",";",["T_WHITESPACE","\n\n    ",1000],["T_VARIABLE","$f",1002],["T_WHITESPACE"," ",1002],"=",["T_WHITESPACE"," ",1002],["T_STRING","Html",1002],["T_DOUBLE_COLON","::",1002],["T_STRING","normalize",1002],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>test<p>test<\/p>\\n'",1002],")",";",["T_WHITESPACE","\n    ",1002],["T_VARIABLE","$this",1003],["T_OBJECT_OPERATOR","->",1003],["T_STRING","assertEqual",1003],"(",["T_VARIABLE","$f",1003],",",["T_WHITESPACE"," ",1003],["T_CONSTANT_ENCAPSED_STRING","'<p>test<\/p><p>test<\/p>\\n'",1003],",",["T_WHITESPACE"," ",1003],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Auto-close improperly nested tags.'",1003],")",";",["T_WHITESPACE","\n\n    ",1003],["T_VARIABLE","$f",1005],["T_WHITESPACE"," ",1005],"=",["T_WHITESPACE"," ",1005],["T_STRING","Html",1005],["T_DOUBLE_COLON","::",1005],["T_STRING","normalize",1005],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>Line1<br><STRONG>bold stuff<\/b>'",1005],")",";",["T_WHITESPACE","\n    ",1005],["T_VARIABLE","$this",1006],["T_OBJECT_OPERATOR","->",1006],["T_STRING","assertEqual",1006],"(",["T_VARIABLE","$f",1006],",",["T_WHITESPACE"," ",1006],["T_CONSTANT_ENCAPSED_STRING","'<p>Line1<br \/><strong>bold stuff<\/strong><\/p>'",1006],",",["T_WHITESPACE"," ",1006],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Properly close unclosed tags, and remove useless closing tags.'",1006],")",";",["T_WHITESPACE","\n\n    ",1006],["T_VARIABLE","$f",1008],["T_WHITESPACE"," ",1008],"=",["T_WHITESPACE"," ",1008],["T_STRING","Html",1008],["T_DOUBLE_COLON","::",1008],["T_STRING","normalize",1008],"(",["T_CONSTANT_ENCAPSED_STRING","'test <!-- this is a comment -->'",1008],")",";",["T_WHITESPACE","\n    ",1008],["T_VARIABLE","$this",1009],["T_OBJECT_OPERATOR","->",1009],["T_STRING","assertEqual",1009],"(",["T_VARIABLE","$f",1009],",",["T_WHITESPACE"," ",1009],["T_CONSTANT_ENCAPSED_STRING","'test <!-- this is a comment -->'",1009],",",["T_WHITESPACE"," ",1009],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Do not touch HTML comments.'",1009],")",";",["T_WHITESPACE","\n\n    ",1009],["T_VARIABLE","$f",1011],["T_WHITESPACE"," ",1011],"=",["T_WHITESPACE"," ",1011],["T_STRING","Html",1011],["T_DOUBLE_COLON","::",1011],["T_STRING","normalize",1011],"(",["T_CONSTANT_ENCAPSED_STRING","'test <!--this is a comment-->'",1011],")",";",["T_WHITESPACE","\n    ",1011],["T_VARIABLE","$this",1012],["T_OBJECT_OPERATOR","->",1012],["T_STRING","assertEqual",1012],"(",["T_VARIABLE","$f",1012],",",["T_WHITESPACE"," ",1012],["T_CONSTANT_ENCAPSED_STRING","'test <!--this is a comment-->'",1012],",",["T_WHITESPACE"," ",1012],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Do not touch HTML comments.'",1012],")",";",["T_WHITESPACE","\n\n    ",1012],["T_VARIABLE","$f",1014],["T_WHITESPACE"," ",1014],"=",["T_WHITESPACE"," ",1014],["T_STRING","Html",1014],["T_DOUBLE_COLON","::",1014],["T_STRING","normalize",1014],"(",["T_CONSTANT_ENCAPSED_STRING","'test <!-- comment <p>another\n    <strong>multiple<\/strong> line\n    comment<\/p> -->'",1014],")",";",["T_WHITESPACE","\n    ",1016],["T_VARIABLE","$this",1017],["T_OBJECT_OPERATOR","->",1017],["T_STRING","assertEqual",1017],"(",["T_VARIABLE","$f",1017],",",["T_WHITESPACE"," ",1017],["T_CONSTANT_ENCAPSED_STRING","'test <!-- comment <p>another\n    <strong>multiple<\/strong> line\n    comment<\/p> -->'",1017],",",["T_WHITESPACE"," ",1019],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Do not touch HTML comments.'",1019],")",";",["T_WHITESPACE","\n\n    ",1019],["T_VARIABLE","$f",1021],["T_WHITESPACE"," ",1021],"=",["T_WHITESPACE"," ",1021],["T_STRING","Html",1021],["T_DOUBLE_COLON","::",1021],["T_STRING","normalize",1021],"(",["T_CONSTANT_ENCAPSED_STRING","'test <!-- comment <p>another comment<\/p> -->'",1021],")",";",["T_WHITESPACE","\n    ",1021],["T_VARIABLE","$this",1022],["T_OBJECT_OPERATOR","->",1022],["T_STRING","assertEqual",1022],"(",["T_VARIABLE","$f",1022],",",["T_WHITESPACE"," ",1022],["T_CONSTANT_ENCAPSED_STRING","'test <!-- comment <p>another comment<\/p> -->'",1022],",",["T_WHITESPACE"," ",1022],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Do not touch HTML comments.'",1022],")",";",["T_WHITESPACE","\n\n    ",1022],["T_VARIABLE","$f",1024],["T_WHITESPACE"," ",1024],"=",["T_WHITESPACE"," ",1024],["T_STRING","Html",1024],["T_DOUBLE_COLON","::",1024],["T_STRING","normalize",1024],"(",["T_CONSTANT_ENCAPSED_STRING","'test <!--break-->'",1024],")",";",["T_WHITESPACE","\n    ",1024],["T_VARIABLE","$this",1025],["T_OBJECT_OPERATOR","->",1025],["T_STRING","assertEqual",1025],"(",["T_VARIABLE","$f",1025],",",["T_WHITESPACE"," ",1025],["T_CONSTANT_ENCAPSED_STRING","'test <!--break-->'",1025],",",["T_WHITESPACE"," ",1025],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Do not touch HTML comments.'",1025],")",";",["T_WHITESPACE","\n\n    ",1025],["T_VARIABLE","$f",1027],["T_WHITESPACE"," ",1027],"=",["T_WHITESPACE"," ",1027],["T_STRING","Html",1027],["T_DOUBLE_COLON","::",1027],["T_STRING","normalize",1027],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>test\\n<\/p>\\n'",1027],")",";",["T_WHITESPACE","\n    ",1027],["T_VARIABLE","$this",1028],["T_OBJECT_OPERATOR","->",1028],["T_STRING","assertEqual",1028],"(",["T_VARIABLE","$f",1028],",",["T_WHITESPACE"," ",1028],["T_CONSTANT_ENCAPSED_STRING","'<p>test\\n<\/p>\\n'",1028],",",["T_WHITESPACE"," ",1028],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- New-lines are accepted and kept as-is.'",1028],")",";",["T_WHITESPACE","\n\n    ",1028],["T_VARIABLE","$f",1030],["T_WHITESPACE"," ",1030],"=",["T_WHITESPACE"," ",1030],["T_STRING","Html",1030],["T_DOUBLE_COLON","::",1030],["T_STRING","normalize",1030],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>\u00d8\u00af\u00d8\u00b1\u00d9\u0088\u00d8\u00a8\u00d8\u00a7\u00d9\u0084'",1030],")",";",["T_WHITESPACE","\n    ",1030],["T_VARIABLE","$this",1031],["T_OBJECT_OPERATOR","->",1031],["T_STRING","assertEqual",1031],"(",["T_VARIABLE","$f",1031],",",["T_WHITESPACE"," ",1031],["T_CONSTANT_ENCAPSED_STRING","'<p>\u00d8\u00af\u00d8\u00b1\u00d9\u0088\u00d8\u00a8\u00d8\u00a7\u00d9\u0084<\/p>'",1031],",",["T_WHITESPACE"," ",1031],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Encoding is correctly kept.'",1031],")",";",["T_WHITESPACE","\n\n    ",1031],["T_VARIABLE","$f",1033],["T_WHITESPACE"," ",1033],"=",["T_WHITESPACE"," ",1033],["T_STRING","Html",1033],["T_DOUBLE_COLON","::",1033],["T_STRING","normalize",1033],"(",["T_CONSTANT_ENCAPSED_STRING","'<script>alert(\"test\")<\/script>'",1033],")",";",["T_WHITESPACE","\n    ",1033],["T_VARIABLE","$this",1034],["T_OBJECT_OPERATOR","->",1034],["T_STRING","assertEqual",1034],"(",["T_VARIABLE","$f",1034],",",["T_WHITESPACE"," ",1034],["T_CONSTANT_ENCAPSED_STRING","'<script>\n<!--\/\/--><![CDATA[\/\/ ><!--\nalert(\"test\")\n\/\/--><!]]>\n<\/script>'",1034],",",["T_WHITESPACE"," ",1038],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- CDATA added to script element'",1038],")",";",["T_WHITESPACE","\n\n    ",1038],["T_VARIABLE","$f",1040],["T_WHITESPACE"," ",1040],"=",["T_WHITESPACE"," ",1040],["T_STRING","Html",1040],["T_DOUBLE_COLON","::",1040],["T_STRING","normalize",1040],"(",["T_CONSTANT_ENCAPSED_STRING","'<p><script>alert(\"test\")<\/script><\/p>'",1040],")",";",["T_WHITESPACE","\n    ",1040],["T_VARIABLE","$this",1041],["T_OBJECT_OPERATOR","->",1041],["T_STRING","assertEqual",1041],"(",["T_VARIABLE","$f",1041],",",["T_WHITESPACE"," ",1041],["T_CONSTANT_ENCAPSED_STRING","'<p><script>\n<!--\/\/--><![CDATA[\/\/ ><!--\nalert(\"test\")\n\/\/--><!]]>\n<\/script><\/p>'",1041],",",["T_WHITESPACE"," ",1045],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- CDATA added to a nested script element'",1045],")",";",["T_WHITESPACE","\n\n    ",1045],["T_VARIABLE","$f",1047],["T_WHITESPACE"," ",1047],"=",["T_WHITESPACE"," ",1047],["T_STRING","Html",1047],["T_DOUBLE_COLON","::",1047],["T_STRING","normalize",1047],"(",["T_CONSTANT_ENCAPSED_STRING","'<p><style> \/* Styling *\/ body {color:red}<\/style><\/p>'",1047],")",";",["T_WHITESPACE","\n    ",1047],["T_VARIABLE","$this",1048],["T_OBJECT_OPERATOR","->",1048],["T_STRING","assertEqual",1048],"(",["T_VARIABLE","$f",1048],",",["T_WHITESPACE"," ",1048],["T_CONSTANT_ENCAPSED_STRING","'<p><style>\n<!--\/*--><![CDATA[\/* ><!--*\/\n \/* Styling *\/ body {color:red}\n\/*--><!]]>*\/\n<\/style><\/p>'",1048],",",["T_WHITESPACE"," ",1052],["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- CDATA added to a style element.'",1052],")",";",["T_WHITESPACE","\n\n    ",1052],["T_VARIABLE","$filtered_data",1054],["T_WHITESPACE"," ",1054],"=",["T_WHITESPACE"," ",1054],["T_STRING","Html",1054],["T_DOUBLE_COLON","::",1054],["T_STRING","normalize",1054],"(",["T_CONSTANT_ENCAPSED_STRING","'<p><style>\n\/*<![CDATA[*\/\n\/* Styling *\/\nbody {color:red}\n\/*]]>*\/\n<\/style><\/p>'",1054],")",";",["T_WHITESPACE","\n    ",1059],["T_VARIABLE","$this",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","assertEqual",1060],"(",["T_VARIABLE","$filtered_data",1060],",",["T_WHITESPACE"," ",1060],["T_CONSTANT_ENCAPSED_STRING","'<p><style>\n<!--\/*--><![CDATA[\/* ><!--*\/\n\n\/*<![CDATA[*\/\n\/* Styling *\/\nbody {color:red}\n\/*]]]]><![CDATA[>*\/\n\n\/*--><!]]>*\/\n<\/style><\/p>'",1060],",",["T_WHITESPACE","\n      ",1069],["T_STRING","format_string",1070],"(",["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Existing cdata section @pattern_name properly escaped'",1070],",",["T_WHITESPACE"," ",1070],["T_ARRAY","array",1070],"(",["T_CONSTANT_ENCAPSED_STRING","'@pattern_name'",1070],["T_WHITESPACE"," ",1070],["T_DOUBLE_ARROW","=>",1070],["T_WHITESPACE"," ",1070],["T_CONSTANT_ENCAPSED_STRING","'\/*<![CDATA[*\/'",1070],")",")",["T_WHITESPACE","\n    ",1070],")",";",["T_WHITESPACE","\n\n    ",1071],["T_VARIABLE","$filtered_data",1073],["T_WHITESPACE"," ",1073],"=",["T_WHITESPACE"," ",1073],["T_STRING","Html",1073],["T_DOUBLE_COLON","::",1073],["T_STRING","normalize",1073],"(",["T_CONSTANT_ENCAPSED_STRING","'<p><style>\n  <!--\/*--><![CDATA[\/* ><!--*\/\n  \/* Styling *\/\n  body {color:red}\n  \/*--><!]]>*\/\n<\/style><\/p>'",1073],")",";",["T_WHITESPACE","\n    ",1078],["T_VARIABLE","$this",1079],["T_OBJECT_OPERATOR","->",1079],["T_STRING","assertEqual",1079],"(",["T_VARIABLE","$filtered_data",1079],",",["T_WHITESPACE"," ",1079],["T_CONSTANT_ENCAPSED_STRING","'<p><style>\n<!--\/*--><![CDATA[\/* ><!--*\/\n\n  <!--\/*--><![CDATA[\/* ><!--*\/\n  \/* Styling *\/\n  body {color:red}\n  \/*--><!]]]]><![CDATA[>*\/\n\n\/*--><!]]>*\/\n<\/style><\/p>'",1079],",",["T_WHITESPACE","\n      ",1088],["T_STRING","format_string",1089],"(",["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Existing cdata section @pattern_name properly escaped'",1089],",",["T_WHITESPACE"," ",1089],["T_ARRAY","array",1089],"(",["T_CONSTANT_ENCAPSED_STRING","'@pattern_name'",1089],["T_WHITESPACE"," ",1089],["T_DOUBLE_ARROW","=>",1089],["T_WHITESPACE"," ",1089],["T_CONSTANT_ENCAPSED_STRING","'<!--\/*--><![CDATA[\/* ><!--*\/'",1089],")",")",["T_WHITESPACE","\n    ",1089],")",";",["T_WHITESPACE","\n\n    ",1090],["T_VARIABLE","$filtered_data",1092],["T_WHITESPACE"," ",1092],"=",["T_WHITESPACE"," ",1092],["T_STRING","Html",1092],["T_DOUBLE_COLON","::",1092],["T_STRING","normalize",1092],"(",["T_CONSTANT_ENCAPSED_STRING","'<p><script>\n<!--\/\/--><![CDATA[\/\/ ><!--\n  alert(\"test\");\n\/\/--><!]]>\n<\/script><\/p>'",1092],")",";",["T_WHITESPACE","\n    ",1096],["T_VARIABLE","$this",1097],["T_OBJECT_OPERATOR","->",1097],["T_STRING","assertEqual",1097],"(",["T_VARIABLE","$filtered_data",1097],",",["T_WHITESPACE"," ",1097],["T_CONSTANT_ENCAPSED_STRING","'<p><script>\n<!--\/\/--><![CDATA[\/\/ ><!--\n\n<!--\/\/--><![CDATA[\/\/ ><!--\n  alert(\"test\");\n\/\/--><!]]]]><![CDATA[>\n\n\/\/--><!]]>\n<\/script><\/p>'",1097],",",["T_WHITESPACE","\n      ",1105],["T_STRING","format_string",1106],"(",["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Existing cdata section @pattern_name properly escaped'",1106],",",["T_WHITESPACE"," ",1106],["T_ARRAY","array",1106],"(",["T_CONSTANT_ENCAPSED_STRING","'@pattern_name'",1106],["T_WHITESPACE"," ",1106],["T_DOUBLE_ARROW","=>",1106],["T_WHITESPACE"," ",1106],["T_CONSTANT_ENCAPSED_STRING","'<!--\/\/--><![CDATA[\/\/ ><!--'",1106],")",")",["T_WHITESPACE","\n    ",1106],")",";",["T_WHITESPACE","\n\n    ",1107],["T_VARIABLE","$filtered_data",1109],["T_WHITESPACE"," ",1109],"=",["T_WHITESPACE"," ",1109],["T_STRING","Html",1109],["T_DOUBLE_COLON","::",1109],["T_STRING","normalize",1109],"(",["T_CONSTANT_ENCAPSED_STRING","'<p><script>\n\/\/ <![CDATA[\n  alert(\"test\");\n\/\/ ]]>\n<\/script><\/p>'",1109],")",";",["T_WHITESPACE","\n    ",1113],["T_VARIABLE","$this",1114],["T_OBJECT_OPERATOR","->",1114],["T_STRING","assertEqual",1114],"(",["T_VARIABLE","$filtered_data",1114],",",["T_WHITESPACE"," ",1114],["T_CONSTANT_ENCAPSED_STRING","'<p><script>\n<!--\/\/--><![CDATA[\/\/ ><!--\n\n\/\/ <![CDATA[\n  alert(\"test\");\n\/\/ ]]]]><![CDATA[>\n\n\/\/--><!]]>\n<\/script><\/p>'",1114],",",["T_WHITESPACE","\n      ",1122],["T_STRING","format_string",1123],"(",["T_CONSTANT_ENCAPSED_STRING","'HTML corrector -- Existing cdata section @pattern_name properly escaped'",1123],",",["T_WHITESPACE"," ",1123],["T_ARRAY","array",1123],"(",["T_CONSTANT_ENCAPSED_STRING","'@pattern_name'",1123],["T_WHITESPACE"," ",1123],["T_DOUBLE_ARROW","=>",1123],["T_WHITESPACE"," ",1123],["T_CONSTANT_ENCAPSED_STRING","'\/\/ <![CDATA['",1123],")",")",["T_WHITESPACE","\n    ",1123],")",";",["T_WHITESPACE","\n\n  ",1124],"}",["T_WHITESPACE","\n\n  ",1126],["T_DOC_COMMENT","\/**\n   * Asserts that a text transformed to lowercase with HTML entities decoded does contains a given string.\n   *\n   * Otherwise fails the test with a given message, similar to all the\n   * SimpleTest assert* functions.\n   *\n   * Note that this does not remove nulls, new lines and other characters that\n   * could be used to obscure a tag or an attribute name.\n   *\n   * @param string $haystack\n   *   Text to look in.\n   * @param string $needle\n   *   Lowercase, plain text to look for.\n   * @param string $message\n   *   (optional) Message to display if failed. Defaults to an empty string.\n   * @param string $group\n   *   (optional) The group this message belongs to. Defaults to 'Other'.\n   *\n   * @return bool\n   *   TRUE on pass, FALSE on fail.\n   *\/",1128],["T_WHITESPACE","\n  ",1148],["T_FUNCTION","function",1149],["T_WHITESPACE"," ",1149],["T_STRING","assertNormalized",1149],"(",["T_VARIABLE","$haystack",1149],",",["T_WHITESPACE"," ",1149],["T_VARIABLE","$needle",1149],",",["T_WHITESPACE"," ",1149],["T_VARIABLE","$message",1149],["T_WHITESPACE"," ",1149],"=",["T_WHITESPACE"," ",1149],["T_CONSTANT_ENCAPSED_STRING","''",1149],",",["T_WHITESPACE"," ",1149],["T_VARIABLE","$group",1149],["T_WHITESPACE"," ",1149],"=",["T_WHITESPACE"," ",1149],["T_CONSTANT_ENCAPSED_STRING","'Other'",1149],")",["T_WHITESPACE"," ",1149],"{",["T_WHITESPACE","\n    ",1149],["T_RETURN","return",1150],["T_WHITESPACE"," ",1150],["T_VARIABLE","$this",1150],["T_OBJECT_OPERATOR","->",1150],["T_STRING","assertTrue",1150],"(",["T_STRING","strpos",1150],"(",["T_STRING","strtolower",1150],"(",["T_STRING","Html",1150],["T_DOUBLE_COLON","::",1150],["T_STRING","decodeEntities",1150],"(",["T_VARIABLE","$haystack",1150],")",")",",",["T_WHITESPACE"," ",1150],["T_VARIABLE","$needle",1150],")",["T_WHITESPACE"," ",1150],["T_IS_NOT_IDENTICAL","!==",1150],["T_WHITESPACE"," ",1150],["T_STRING","FALSE",1150],",",["T_WHITESPACE"," ",1150],["T_VARIABLE","$message",1150],",",["T_WHITESPACE"," ",1150],["T_VARIABLE","$group",1150],")",";",["T_WHITESPACE","\n  ",1150],"}",["T_WHITESPACE","\n\n  ",1151],["T_DOC_COMMENT","\/**\n   * Asserts that text transformed to lowercase with HTML entities decoded does not contain a given string.\n   *\n   * Otherwise fails the test with a given message, similar to all the\n   * SimpleTest assert* functions.\n   *\n   * Note that this does not remove nulls, new lines, and other character that\n   * could be used to obscure a tag or an attribute name.\n   *\n   * @param string $haystack\n   *   Text to look in.\n   * @param string $needle\n   *   Lowercase, plain text to look for.\n   * @param string $message\n   *   (optional) Message to display if failed. Defaults to an empty string.\n   * @param string $group\n   *   (optional) The group this message belongs to. Defaults to 'Other'.\n   *\n   * @return bool\n   *   TRUE on pass, FALSE on fail.\n   *\/",1153],["T_WHITESPACE","\n  ",1173],["T_FUNCTION","function",1174],["T_WHITESPACE"," ",1174],["T_STRING","assertNoNormalized",1174],"(",["T_VARIABLE","$haystack",1174],",",["T_WHITESPACE"," ",1174],["T_VARIABLE","$needle",1174],",",["T_WHITESPACE"," ",1174],["T_VARIABLE","$message",1174],["T_WHITESPACE"," ",1174],"=",["T_WHITESPACE"," ",1174],["T_CONSTANT_ENCAPSED_STRING","''",1174],",",["T_WHITESPACE"," ",1174],["T_VARIABLE","$group",1174],["T_WHITESPACE"," ",1174],"=",["T_WHITESPACE"," ",1174],["T_CONSTANT_ENCAPSED_STRING","'Other'",1174],")",["T_WHITESPACE"," ",1174],"{",["T_WHITESPACE","\n    ",1174],["T_RETURN","return",1175],["T_WHITESPACE"," ",1175],["T_VARIABLE","$this",1175],["T_OBJECT_OPERATOR","->",1175],["T_STRING","assertTrue",1175],"(",["T_STRING","strpos",1175],"(",["T_STRING","strtolower",1175],"(",["T_STRING","Html",1175],["T_DOUBLE_COLON","::",1175],["T_STRING","decodeEntities",1175],"(",["T_VARIABLE","$haystack",1175],")",")",",",["T_WHITESPACE"," ",1175],["T_VARIABLE","$needle",1175],")",["T_WHITESPACE"," ",1175],["T_IS_IDENTICAL","===",1175],["T_WHITESPACE"," ",1175],["T_STRING","FALSE",1175],",",["T_WHITESPACE"," ",1175],["T_VARIABLE","$message",1175],",",["T_WHITESPACE"," ",1175],["T_VARIABLE","$group",1175],")",";",["T_WHITESPACE","\n  ",1175],"}",["T_WHITESPACE","\n\n",1176],"}",["T_WHITESPACE","\n",1178]]
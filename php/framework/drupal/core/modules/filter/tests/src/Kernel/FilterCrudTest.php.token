[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","filter",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","filter",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FilterFormat",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests creation, loading, updating, deleting of text formats and filters.\n *\n * @group filter\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","FilterCrudTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","KernelTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],"[",["T_CONSTANT_ENCAPSED_STRING","'filter'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'filter_test'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'system'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'user'",20],"]",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Tests CRUD operations for text formats and filters.\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","testTextFormatCrud",25],"(",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_COMMENT","\/\/ Add a text format with minimum data only.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$format",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","FilterFormat",27],["T_DOUBLE_COLON","::",27],["T_STRING","create",27],"(",["T_ARRAY","array",27],"(",["T_WHITESPACE","\n      ",27],["T_CONSTANT_ENCAPSED_STRING","'format'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'empty_format'",28],",",["T_WHITESPACE","\n      ",28],["T_CONSTANT_ENCAPSED_STRING","'name'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'Empty format'",29],",",["T_WHITESPACE","\n    ",29],")",")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$format",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","save",31],"(",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","verifyTextFormat",32],"(",["T_VARIABLE","$format",32],")",";",["T_WHITESPACE","\n\n    ",32],["T_COMMENT","\/\/ Add another text format specifying all possible properties.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$format",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","FilterFormat",35],["T_DOUBLE_COLON","::",35],["T_STRING","create",35],"(",["T_ARRAY","array",35],"(",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'format'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'custom_format'",36],",",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'name'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'Custom format'",37],",",["T_WHITESPACE","\n    ",37],")",")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$format",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","setFilterConfig",39],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_url'",39],",",["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'status'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_LNUMBER","1",40],",",["T_WHITESPACE","\n      ",40],["T_CONSTANT_ENCAPSED_STRING","'settings'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_WHITESPACE","\n        ",41],["T_CONSTANT_ENCAPSED_STRING","'filter_url_length'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_LNUMBER","30",42],",",["T_WHITESPACE","\n      ",42],")",",",["T_WHITESPACE","\n    ",43],")",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$format",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","save",45],"(",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","verifyTextFormat",46],"(",["T_VARIABLE","$format",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Alter some text format properties and save again.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$format",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","set",49],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Altered format'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$format",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setFilterConfig",50],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_url'",50],",",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'status'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_LNUMBER","0",51],",",["T_WHITESPACE","\n    ",51],")",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$format",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","setFilterConfig",53],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_autop'",53],",",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'status'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_LNUMBER","1",54],",",["T_WHITESPACE","\n    ",54],")",")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$format",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","save",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","verifyTextFormat",57],"(",["T_VARIABLE","$format",57],")",";",["T_WHITESPACE","\n\n    ",57],["T_COMMENT","\/\/ Add a filter_test_replace  filter and save again.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$format",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","setFilterConfig",60],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_test_replace'",60],",",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'status'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_LNUMBER","1",61],",",["T_WHITESPACE","\n    ",61],")",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$format",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","save",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","verifyTextFormat",64],"(",["T_VARIABLE","$format",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Disable the text format.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$format",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","disable",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","save",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_VARIABLE","$formats",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","filter_formats",69],"(",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertTrue",70],"(","!",["T_ISSET","isset",70],"(",["T_VARIABLE","$formats",70],"[",["T_VARIABLE","$format",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","id",70],"(",")","]",")",",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'filter_formats: Disabled text format no longer exists.'",70],")",";",["T_WHITESPACE","\n  ",70],"}",["T_WHITESPACE","\n\n  ",71],["T_DOC_COMMENT","\/**\n   * Tests disabling the fallback text format.\n   *\/",73],["T_WHITESPACE","\n  ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","testDisableFallbackFormat",76],"(",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","installConfig",77],"(","[",["T_CONSTANT_ENCAPSED_STRING","'filter'",77],"]",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$message",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'\\LogicException with message \"The fallback text format \\'plain_text\\' cannot be disabled.\" was thrown.'",78],";",["T_WHITESPACE","\n    ",78],["T_TRY","try",79],["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n      ",79],["T_STRING","FilterFormat",80],["T_DOUBLE_COLON","::",80],["T_STRING","load",80],"(",["T_CONSTANT_ENCAPSED_STRING","'plain_text'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","disable",80],"(",")",";",["T_WHITESPACE","\n      ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","fail",81],"(",["T_VARIABLE","$message",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n    ",82],["T_CATCH","catch",83],["T_WHITESPACE"," ",83],"(",["T_NS_SEPARATOR","\\",83],["T_STRING","LogicException",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$e",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n      ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertIdentical",84],"(",["T_VARIABLE","$e",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getMessage",84],"(",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","\"The fallback text format 'plain_text' cannot be disabled.\"",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$message",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n  ",86],["T_DOC_COMMENT","\/**\n   * Verifies that a text format is properly stored.\n   *\/",88],["T_WHITESPACE","\n  ",90],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","verifyTextFormat",91],"(",["T_VARIABLE","$format",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$t_args",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",["T_CONSTANT_ENCAPSED_STRING","'%format'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$format",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","label",92],"(",")",")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$default_langcode",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Drupal",93],["T_DOUBLE_COLON","::",93],["T_STRING","languageManager",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getDefaultLanguage",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getId",93],"(",")",";",["T_WHITESPACE","\n\n    ",93],["T_COMMENT","\/\/ Verify the loaded filter has all properties.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$filter_format",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","FilterFormat",96],["T_DOUBLE_COLON","::",96],["T_STRING","load",96],"(",["T_VARIABLE","$format",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","id",96],"(",")",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertEqual",97],"(",["T_VARIABLE","$filter_format",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","id",97],"(",")",",",["T_WHITESPACE"," ",97],["T_VARIABLE","$format",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","id",97],"(",")",",",["T_WHITESPACE"," ",97],["T_STRING","format_string",97],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_format_load: Proper format id for text format %format.'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$t_args",97],")",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertEqual",98],"(",["T_VARIABLE","$filter_format",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","label",98],"(",")",",",["T_WHITESPACE"," ",98],["T_VARIABLE","$format",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","label",98],"(",")",",",["T_WHITESPACE"," ",98],["T_STRING","format_string",98],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_format_load: Proper title for text format %format.'",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$t_args",98],")",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEqual",99],"(",["T_VARIABLE","$filter_format",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","get",99],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",99],")",",",["T_WHITESPACE"," ",99],["T_VARIABLE","$format",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","get",99],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",99],")",",",["T_WHITESPACE"," ",99],["T_STRING","format_string",99],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_format_load: Proper weight for text format %format.'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$t_args",99],")",")",";",["T_WHITESPACE","\n    ",99],["T_COMMENT","\/\/ Check that the filter was created in site default language.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEqual",101],"(",["T_VARIABLE","$format",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","language",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","getId",101],"(",")",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$default_langcode",101],",",["T_WHITESPACE"," ",101],["T_STRING","format_string",101],"(",["T_CONSTANT_ENCAPSED_STRING","'filter_format_load: Proper language code for text format %format.'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$t_args",101],")",")",";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n",102],"}",["T_WHITESPACE","\n",104]]
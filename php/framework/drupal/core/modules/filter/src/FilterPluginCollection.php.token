[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","filter",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","NestedArray",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DefaultLazyPluginCollection",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * A collection of filters.\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","FilterPluginCollection",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_STRING","DefaultLazyPluginCollection",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * All possible filter plugin IDs.\n   *\n   * @var array\n   *\/",13],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$definitions",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * @return \\Drupal\\filter\\Plugin\\FilterInterface\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],"&",["T_STRING","get",25],"(",["T_VARIABLE","$instance_id",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_RETURN","return",26],["T_WHITESPACE"," ",26],["T_STRING","parent",26],["T_DOUBLE_COLON","::",26],["T_STRING","get",26],"(",["T_VARIABLE","$instance_id",26],")",";",["T_WHITESPACE","\n  ",26],"}",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Retrieves filter definitions and creates an instance for each filter.\n   *\n   * This is exclusively used for the text format administration page, on which\n   * all available filter plugins are exposed, regardless of whether the current\n   * text format has an active instance.\n   *\n   * @todo Refactor text format administration to actually construct\/create and\n   *   destruct\/remove actual filter plugin instances, using a library approach\n   *   \u00c3\u00a0 la blocks.\n   *\/",29],["T_WHITESPACE","\n  ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","getAll",40],"(",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n    ",40],["T_COMMENT","\/\/ Retrieve all available filter plugin definitions.\n",41],["T_WHITESPACE","    ",42],["T_IF","if",42],["T_WHITESPACE"," ",42],"(","!",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","definitions",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n      ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","definitions",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","manager",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getDefinitions",43],"(",")",";",["T_WHITESPACE","\n      ",43],["T_COMMENT","\/\/ Do not allow the null filter to be used directly, only as a fallback.\n",44],["T_WHITESPACE","      ",45],["T_UNSET","unset",45],"(",["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","definitions",45],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_null'",45],"]",")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Ensure that there is an instance of all available filters.\n",48],["T_WHITESPACE","    ",49],["T_COMMENT","\/\/ Note that getDefinitions() are keyed by $plugin_id. $instance_id is the\n",49],["T_WHITESPACE","    ",50],["T_COMMENT","\/\/ $plugin_id for filters, since a single filter plugin can only exist once\n",50],["T_WHITESPACE","    ",51],["T_COMMENT","\/\/ in a format.\n",51],["T_WHITESPACE","    ",52],["T_FOREACH","foreach",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","definitions",52],["T_WHITESPACE"," ",52],["T_AS","as",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$plugin_id",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$definition",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n      ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(","!",["T_ISSET","isset",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","pluginInstances",53],"[",["T_VARIABLE","$plugin_id",53],"]",")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","initializePlugin",54],"(",["T_VARIABLE","$plugin_id",54],")",";",["T_WHITESPACE","\n      ",54],"}",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n    ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","pluginInstances",57],";",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","initializePlugin",63],"(",["T_VARIABLE","$instance_id",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_COMMENT","\/\/ Filters have a 1:1 relationship to text formats and can be added and\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ instantiated at any time.\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ @todo $configuration is the whole filter plugin instance configuration,\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/   as contained in the text format configuration. The default\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/   configuration is the filter plugin definition. Configuration should not\n",68],["T_WHITESPACE","    ",69],["T_COMMENT","\/\/   be contained in definitions. Move into a FilterBase::init() method.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$configuration",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","manager",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getDefinition",70],"(",["T_VARIABLE","$instance_id",70],")",";",["T_WHITESPACE","\n    ",70],["T_COMMENT","\/\/ Merge the actual configuration into the default configuration.\n",71],["T_WHITESPACE","    ",72],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_ISSET","isset",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","configurations",72],"[",["T_VARIABLE","$instance_id",72],"]",")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n      ",72],["T_VARIABLE","$configuration",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","NestedArray",73],["T_DOUBLE_COLON","::",73],["T_STRING","mergeDeep",73],"(",["T_VARIABLE","$configuration",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","configurations",73],"[",["T_VARIABLE","$instance_id",73],"]",")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","configurations",75],"[",["T_VARIABLE","$instance_id",75],"]",["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$configuration",75],";",["T_WHITESPACE","\n    ",75],["T_STRING","parent",76],["T_DOUBLE_COLON","::",76],["T_STRING","initializePlugin",76],"(",["T_VARIABLE","$instance_id",76],")",";",["T_WHITESPACE","\n  ",76],"}",["T_WHITESPACE","\n\n  ",77],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",79],["T_WHITESPACE","\n  ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","sort",82],"(",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAll",83],"(",")",";",["T_WHITESPACE","\n    ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_STRING","parent",84],["T_DOUBLE_COLON","::",84],["T_STRING","sort",84],"(",")",";",["T_WHITESPACE","\n  ",84],"}",["T_WHITESPACE","\n\n  ",85],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",87],["T_WHITESPACE","\n  ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","sortHelper",90],"(",["T_VARIABLE","$aID",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$bID",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$a",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","get",91],"(",["T_VARIABLE","$aID",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$b",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","get",92],"(",["T_VARIABLE","$bID",92],")",";",["T_WHITESPACE","\n    ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$a",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","status",93],["T_WHITESPACE"," ",93],["T_IS_NOT_EQUAL","!=",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$b",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","status",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n      ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],"!",["T_EMPTY","empty",94],"(",["T_VARIABLE","$a",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","status",94],")",["T_WHITESPACE"," ",94],"?",["T_WHITESPACE"," ",94],"-",["T_LNUMBER","1",94],["T_WHITESPACE"," ",94],":",["T_WHITESPACE"," ",94],["T_LNUMBER","1",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n    ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$a",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","weight",96],["T_WHITESPACE"," ",96],["T_IS_NOT_EQUAL","!=",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$b",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","weight",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$a",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","weight",97],["T_WHITESPACE"," ",97],"<",["T_WHITESPACE"," ",97],["T_VARIABLE","$b",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","weight",97],["T_WHITESPACE"," ",97],"?",["T_WHITESPACE"," ",97],"-",["T_LNUMBER","1",97],["T_WHITESPACE"," ",97],":",["T_WHITESPACE"," ",97],["T_LNUMBER","1",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n    ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$a",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","provider",99],["T_WHITESPACE"," ",99],["T_IS_NOT_EQUAL","!=",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$b",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","provider",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n      ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_STRING","strnatcasecmp",100],"(",["T_VARIABLE","$a",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","provider",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$b",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","provider",100],")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n    ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_STRING","parent",102],["T_DOUBLE_COLON","::",102],["T_STRING","sortHelper",102],"(",["T_VARIABLE","$aID",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$bID",102],")",";",["T_WHITESPACE","\n  ",102],"}",["T_WHITESPACE","\n\n  ",103],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",105],["T_WHITESPACE","\n  ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","getConfiguration",108],"(",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$configuration",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","parent",109],["T_DOUBLE_COLON","::",109],["T_STRING","getConfiguration",109],"(",")",";",["T_WHITESPACE","\n    ",109],["T_COMMENT","\/\/ Remove configuration if it matches the defaults. In self::getAll(), we\n",110],["T_WHITESPACE","    ",111],["T_COMMENT","\/\/ load all available filters, in addition to the enabled filters stored in\n",111],["T_WHITESPACE","    ",112],["T_COMMENT","\/\/ configuration. In order to prevent those from bleeding through to the\n",112],["T_WHITESPACE","    ",113],["T_COMMENT","\/\/ stored configuration, remove all filters that match the default values.\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ Because filters are disabled by default, this will never remove the\n",114],["T_WHITESPACE","    ",115],["T_COMMENT","\/\/ configuration of an enabled filter.\n",115],["T_WHITESPACE","    ",116],["T_FOREACH","foreach",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$configuration",116],["T_WHITESPACE"," ",116],["T_AS","as",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$instance_id",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$instance_config",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n      ",116],["T_VARIABLE","$default_config",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",")",";",["T_WHITESPACE","\n      ",117],["T_VARIABLE","$default_config",118],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",118],"]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$instance_id",118],";",["T_WHITESPACE","\n      ",118],["T_VARIABLE","$default_config",119],["T_WHITESPACE"," ",119],["T_PLUS_EQUAL","+=",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","get",119],"(",["T_VARIABLE","$instance_id",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","defaultConfiguration",119],"(",")",";",["T_WHITESPACE","\n      ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$default_config",120],["T_WHITESPACE"," ",120],["T_IS_IDENTICAL","===",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$instance_config",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n        ",120],["T_UNSET","unset",121],"(",["T_VARIABLE","$configuration",121],"[",["T_VARIABLE","$instance_id",121],"]",")",";",["T_WHITESPACE","\n      ",121],"}",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n    ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$configuration",124],";",["T_WHITESPACE","\n  ",124],"}",["T_WHITESPACE","\n\n",125],"}",["T_WHITESPACE","\n",127]]
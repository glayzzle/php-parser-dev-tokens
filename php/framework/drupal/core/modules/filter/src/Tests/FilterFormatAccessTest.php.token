[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","filter",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Access",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AccessResult",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","filter",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FilterFormat",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","simpletest",8],["T_NS_SEPARATOR","\\",8],["T_STRING","WebTestBase",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests access to text formats.\n *\n * @group Access\n * @group filter\n *\/",10],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","FilterFormatAccessTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","WebTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$modules",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],"[",["T_CONSTANT_ENCAPSED_STRING","'block'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'filter'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'node'",23],"]",";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * A user with administrative permissions.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$adminUser",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * A user with 'administer filters' permission.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$filterAdminUser",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * A user with permission to create and edit own content.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",39],["T_WHITESPACE","\n  ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$webUser",44],";",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * An object representing an allowed text format.\n   *\n   * @var object\n   *\/",46],["T_WHITESPACE","\n  ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$allowedFormat",51],";",["T_WHITESPACE","\n\n  ",51],["T_DOC_COMMENT","\/**\n   * An object representing a secondary allowed text format.\n   *\n   * @var object\n   *\/",53],["T_WHITESPACE","\n  ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$secondAllowedFormat",58],";",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * An object representing a disallowed text format.\n   *\n   * @var object\n   *\/",60],["T_WHITESPACE","\n  ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$disallowedFormat",65],";",["T_WHITESPACE","\n\n  ",65],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","setUp",67],"(",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n    ",67],["T_STRING","parent",68],["T_DOUBLE_COLON","::",68],["T_STRING","setUp",68],"(",")",";",["T_WHITESPACE","\n\n    ",68],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","drupalPlaceBlock",70],"(",["T_CONSTANT_ENCAPSED_STRING","'page_title_block'",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","drupalCreateContentType",72],"(",["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'page'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'name'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",72],")",")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Create a user who can administer text formats, but does not have\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ specific permission to use any of them.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","filterAdminUser",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","drupalCreateUser",76],"(",["T_ARRAY","array",76],"(",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'administer filters'",77],",",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'create page content'",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'edit any page content'",79],",",["T_WHITESPACE","\n    ",79],")",")",";",["T_WHITESPACE","\n\n    ",80],["T_COMMENT","\/\/ Create three text formats. Two text formats are created for all users so\n",82],["T_WHITESPACE","    ",83],["T_COMMENT","\/\/ that the drop-down list appears for all tests.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","drupalLogin",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","filterAdminUser",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$formats",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",")",";",["T_WHITESPACE","\n    ",85],["T_FOR","for",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$i",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_LNUMBER","0",86],";",["T_WHITESPACE"," ",86],["T_VARIABLE","$i",86],["T_WHITESPACE"," ",86],"<",["T_WHITESPACE"," ",86],["T_LNUMBER","3",86],";",["T_WHITESPACE"," ",86],["T_VARIABLE","$i",86],["T_INC","++",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_VARIABLE","$edit",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_WHITESPACE","\n        ",87],["T_CONSTANT_ENCAPSED_STRING","'format'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_STRING","Unicode",88],["T_DOUBLE_COLON","::",88],["T_STRING","strtolower",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","randomMachineName",88],"(",")",")",",",["T_WHITESPACE","\n        ",88],["T_CONSTANT_ENCAPSED_STRING","'name'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","randomMachineName",89],"(",")",",",["T_WHITESPACE","\n      ",89],")",";",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","drupalPostForm",91],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/content\/formats\/add'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$edit",91],",",["T_WHITESPACE"," ",91],["T_STRING","t",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Save configuration'",91],")",")",";",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","resetFilterCaches",92],"(",")",";",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$formats",93],"[","]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","FilterFormat",93],["T_DOUBLE_COLON","::",93],["T_STRING","load",93],"(",["T_VARIABLE","$edit",93],"[",["T_CONSTANT_ENCAPSED_STRING","'format'",93],"]",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n    ",94],["T_LIST","list",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","allowedFormat",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","secondAllowedFormat",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","disallowedFormat",95],")",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$formats",95],";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","drupalLogout",96],"(",")",";",["T_WHITESPACE","\n\n    ",96],["T_COMMENT","\/\/ Create a regular user with access to two of the formats.\n",98],["T_WHITESPACE","    ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","webUser",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","drupalCreateUser",99],"(",["T_ARRAY","array",99],"(",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'create page content'",100],",",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'edit any page content'",101],",",["T_WHITESPACE","\n      ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","allowedFormat",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getPermissionName",102],"(",")",",",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","secondAllowedFormat",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getPermissionName",103],"(",")",",",["T_WHITESPACE","\n    ",103],")",")",";",["T_WHITESPACE","\n\n    ",104],["T_COMMENT","\/\/ Create an administrative user who has access to use all three formats.\n",106],["T_WHITESPACE","    ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","adminUser",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","drupalCreateUser",107],"(",["T_ARRAY","array",107],"(",["T_WHITESPACE","\n      ",107],["T_CONSTANT_ENCAPSED_STRING","'administer filters'",108],",",["T_WHITESPACE","\n      ",108],["T_CONSTANT_ENCAPSED_STRING","'create page content'",109],",",["T_WHITESPACE","\n      ",109],["T_CONSTANT_ENCAPSED_STRING","'edit any page content'",110],",",["T_WHITESPACE","\n      ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","allowedFormat",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getPermissionName",111],"(",")",",",["T_WHITESPACE","\n      ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","secondAllowedFormat",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getPermissionName",112],"(",")",",",["T_WHITESPACE","\n      ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","disallowedFormat",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getPermissionName",113],"(",")",",",["T_WHITESPACE","\n    ",113],")",")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","drupalPlaceBlock",115],"(",["T_CONSTANT_ENCAPSED_STRING","'local_tasks_block'",115],")",";",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n  ",116],["T_DOC_COMMENT","\/**\n   * Tests the Filter format access permissions functionality.\n   *\/",118],["T_WHITESPACE","\n  ",120],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","testFormatPermissions",121],"(",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n    ",121],["T_COMMENT","\/\/ Make sure that a regular user only has access to the text formats for\n",122],["T_WHITESPACE","    ",123],["T_COMMENT","\/\/ which they were granted access.\n",123],["T_WHITESPACE","    ",124],["T_VARIABLE","$fallback_format",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","FilterFormat",124],["T_DOUBLE_COLON","::",124],["T_STRING","load",124],"(",["T_STRING","filter_fallback_format",124],"(",")",")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertTrue",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","allowedFormat",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","access",125],"(",["T_CONSTANT_ENCAPSED_STRING","'use'",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","webUser",125],")",",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'A regular user has access to use a text format they were granted access to.'",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEqual",126],"(",["T_STRING","AccessResult",126],["T_DOUBLE_COLON","::",126],["T_STRING","allowed",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","addCacheContexts",126],"(","[",["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",126],"]",")",",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","allowedFormat",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","access",126],"(",["T_CONSTANT_ENCAPSED_STRING","'use'",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","webUser",126],",",["T_WHITESPACE"," ",126],["T_STRING","TRUE",126],")",",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'A regular user has access to use a text format they were granted access to.'",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertFalse",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","disallowedFormat",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","access",127],"(",["T_CONSTANT_ENCAPSED_STRING","'use'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","webUser",127],")",",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'A regular user does not have access to use a text format they were not granted access to.'",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertEqual",128],"(",["T_STRING","AccessResult",128],["T_DOUBLE_COLON","::",128],["T_STRING","neutral",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","cachePerPermissions",128],"(",")",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","disallowedFormat",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","access",128],"(",["T_CONSTANT_ENCAPSED_STRING","'use'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","webUser",128],",",["T_WHITESPACE"," ",128],["T_STRING","TRUE",128],")",",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'A regular user does not have access to use a text format they were not granted access to.'",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertTrue",129],"(",["T_VARIABLE","$fallback_format",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","access",129],"(",["T_CONSTANT_ENCAPSED_STRING","'use'",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","webUser",129],")",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'A regular user has access to use the fallback format.'",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertEqual",130],"(",["T_STRING","AccessResult",130],["T_DOUBLE_COLON","::",130],["T_STRING","allowed",130],"(",")",",",["T_WHITESPACE"," ",130],["T_VARIABLE","$fallback_format",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","access",130],"(",["T_CONSTANT_ENCAPSED_STRING","'use'",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","webUser",130],",",["T_WHITESPACE"," ",130],["T_STRING","TRUE",130],")",",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'A regular user has access to use the fallback format.'",130],")",";",["T_WHITESPACE","\n\n    ",130],["T_COMMENT","\/\/ Perform similar checks as above, but now against the entire list of\n",132],["T_WHITESPACE","    ",133],["T_COMMENT","\/\/ available formats for this user.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertTrue",134],"(",["T_STRING","in_array",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","allowedFormat",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","id",134],"(",")",",",["T_WHITESPACE"," ",134],["T_STRING","array_keys",134],"(",["T_STRING","filter_formats",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","webUser",134],")",")",")",",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'The allowed format appears in the list of available formats for a regular user.'",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertFalse",135],"(",["T_STRING","in_array",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","disallowedFormat",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","id",135],"(",")",",",["T_WHITESPACE"," ",135],["T_STRING","array_keys",135],"(",["T_STRING","filter_formats",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","webUser",135],")",")",")",",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'The disallowed format does not appear in the list of available formats for a regular user.'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertTrue",136],"(",["T_STRING","in_array",136],"(",["T_STRING","filter_fallback_format",136],"(",")",",",["T_WHITESPACE"," ",136],["T_STRING","array_keys",136],"(",["T_STRING","filter_formats",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","webUser",136],")",")",")",",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'The fallback format appears in the list of available formats for a regular user.'",136],")",";",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ Make sure that a regular user only has permission to use the format\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ they were granted access to.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertTrue",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","webUser",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","hasPermission",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","allowedFormat",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getPermissionName",140],"(",")",")",",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'A regular user has permission to use the allowed text format.'",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertFalse",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","webUser",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","hasPermission",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","disallowedFormat",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getPermissionName",141],"(",")",")",",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'A regular user does not have permission to use the disallowed text format.'",141],")",";",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Make sure that the allowed format appears on the node form and that\n",143],["T_WHITESPACE","    ",144],["T_COMMENT","\/\/ the disallowed format does not.\n",144],["T_WHITESPACE","    ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","drupalLogin",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","webUser",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","drupalGet",146],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/page'",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$elements",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","xpath",147],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[@name=:name]\/option'",147],",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_WHITESPACE","\n      ",147],["T_CONSTANT_ENCAPSED_STRING","':name'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'body[0][format]'",148],",",["T_WHITESPACE","\n      ",148],["T_CONSTANT_ENCAPSED_STRING","':option'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","allowedFormat",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","id",149],"(",")",",",["T_WHITESPACE","\n    ",149],")",")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$options",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",")",";",["T_WHITESPACE","\n    ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$elements",152],["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$element",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n      ",152],["T_VARIABLE","$options",153],"[",["T_STRING_CAST","(string)",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$element",153],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",153],"]","]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$element",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","assertTrue",155],"(",["T_ISSET","isset",155],"(",["T_VARIABLE","$options",155],"[",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","allowedFormat",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","id",155],"(",")","]",")",",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'The allowed text format appears as an option when adding a new node.'",155],")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","assertFalse",156],"(",["T_ISSET","isset",156],"(",["T_VARIABLE","$options",156],"[",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","disallowedFormat",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","id",156],"(",")","]",")",",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'The disallowed text format does not appear as an option when adding a new node.'",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertFalse",157],"(",["T_ISSET","isset",157],"(",["T_VARIABLE","$options",157],"[",["T_STRING","filter_fallback_format",157],"(",")","]",")",",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'The fallback format does not appear as an option when adding a new node.'",157],")",";",["T_WHITESPACE","\n\n    ",157],["T_COMMENT","\/\/ Check regular user access to the filter tips pages.\n",159],["T_WHITESPACE","    ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","drupalGet",160],"(",["T_CONSTANT_ENCAPSED_STRING","'filter\/tips\/'",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","allowedFormat",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","id",160],"(",")",")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertResponse",161],"(",["T_LNUMBER","200",161],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","drupalGet",162],"(",["T_CONSTANT_ENCAPSED_STRING","'filter\/tips\/'",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","disallowedFormat",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","id",162],"(",")",")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertResponse",163],"(",["T_LNUMBER","403",163],")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","drupalGet",164],"(",["T_CONSTANT_ENCAPSED_STRING","'filter\/tips\/'",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_STRING","filter_fallback_format",164],"(",")",")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertResponse",165],"(",["T_LNUMBER","200",165],")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","drupalGet",166],"(",["T_CONSTANT_ENCAPSED_STRING","'filter\/tips\/invalid-format'",166],")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assertResponse",167],"(",["T_LNUMBER","404",167],")",";",["T_WHITESPACE","\n\n    ",167],["T_COMMENT","\/\/ Check admin user access to the filter tips pages.\n",169],["T_WHITESPACE","    ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","drupalLogin",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","adminUser",170],")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","drupalGet",171],"(",["T_CONSTANT_ENCAPSED_STRING","'filter\/tips\/'",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","allowedFormat",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","id",171],"(",")",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertResponse",172],"(",["T_LNUMBER","200",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","drupalGet",173],"(",["T_CONSTANT_ENCAPSED_STRING","'filter\/tips\/'",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","disallowedFormat",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","id",173],"(",")",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","assertResponse",174],"(",["T_LNUMBER","200",174],")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","drupalGet",175],"(",["T_CONSTANT_ENCAPSED_STRING","'filter\/tips\/'",175],["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_STRING","filter_fallback_format",175],"(",")",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertResponse",176],"(",["T_LNUMBER","200",176],")",";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","drupalGet",177],"(",["T_CONSTANT_ENCAPSED_STRING","'filter\/tips\/invalid-format'",177],")",";",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","assertResponse",178],"(",["T_LNUMBER","404",178],")",";",["T_WHITESPACE","\n  ",178],"}",["T_WHITESPACE","\n\n  ",179],["T_DOC_COMMENT","\/**\n   * Tests if text format is available to a role.\n   *\/",181],["T_WHITESPACE","\n  ",183],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","testFormatRoles",184],"(",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n    ",184],["T_COMMENT","\/\/ Get the role ID assigned to the regular user.\n",185],["T_WHITESPACE","    ",186],["T_VARIABLE","$roles",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","webUser",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getRoles",186],"(",["T_STRING","TRUE",186],")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$rid",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$roles",187],"[",["T_LNUMBER","0",187],"]",";",["T_WHITESPACE","\n\n    ",187],["T_COMMENT","\/\/ Check that this role appears in the list of roles that have access to an\n",189],["T_WHITESPACE","    ",190],["T_COMMENT","\/\/ allowed text format, but does not appear in the list of roles that have\n",190],["T_WHITESPACE","    ",191],["T_COMMENT","\/\/ access to a disallowed text format.\n",191],["T_WHITESPACE","    ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertTrue",192],"(",["T_STRING","in_array",192],"(",["T_VARIABLE","$rid",192],",",["T_WHITESPACE"," ",192],["T_STRING","array_keys",192],"(",["T_STRING","filter_get_roles_by_format",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","allowedFormat",192],")",")",")",",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'A role which has access to a text format appears in the list of roles that have access to that format.'",192],")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertFalse",193],"(",["T_STRING","in_array",193],"(",["T_VARIABLE","$rid",193],",",["T_WHITESPACE"," ",193],["T_STRING","array_keys",193],"(",["T_STRING","filter_get_roles_by_format",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","disallowedFormat",193],")",")",")",",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'A role which does not have access to a text format does not appear in the list of roles that have access to that format.'",193],")",";",["T_WHITESPACE","\n\n    ",193],["T_COMMENT","\/\/ Check that the correct text format appears in the list of formats\n",195],["T_WHITESPACE","    ",196],["T_COMMENT","\/\/ available to that role.\n",196],["T_WHITESPACE","    ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertTrue",197],"(",["T_STRING","in_array",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","allowedFormat",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","id",197],"(",")",",",["T_WHITESPACE"," ",197],["T_STRING","array_keys",197],"(",["T_STRING","filter_get_formats_by_role",197],"(",["T_VARIABLE","$rid",197],")",")",")",",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'A text format which a role has access to appears in the list of formats available to that role.'",197],")",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","assertFalse",198],"(",["T_STRING","in_array",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","disallowedFormat",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","id",198],"(",")",",",["T_WHITESPACE"," ",198],["T_STRING","array_keys",198],"(",["T_STRING","filter_get_formats_by_role",198],"(",["T_VARIABLE","$rid",198],")",")",")",",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'A text format which a role does not have access to does not appear in the list of formats available to that role.'",198],")",";",["T_WHITESPACE","\n\n    ",198],["T_COMMENT","\/\/ Check that the fallback format is always allowed.\n",200],["T_WHITESPACE","    ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","assertEqual",201],"(",["T_STRING","filter_get_roles_by_format",201],"(",["T_STRING","FilterFormat",201],["T_DOUBLE_COLON","::",201],["T_STRING","load",201],"(",["T_STRING","filter_fallback_format",201],"(",")",")",")",",",["T_WHITESPACE"," ",201],["T_STRING","user_role_names",201],"(",")",",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'All roles have access to the fallback format.'",201],")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","assertTrue",202],"(",["T_STRING","in_array",202],"(",["T_STRING","filter_fallback_format",202],"(",")",",",["T_WHITESPACE"," ",202],["T_STRING","array_keys",202],"(",["T_STRING","filter_get_formats_by_role",202],"(",["T_VARIABLE","$rid",202],")",")",")",",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'The fallback format appears in the list of allowed formats for any role.'",202],")",";",["T_WHITESPACE","\n  ",202],"}",["T_WHITESPACE","\n\n  ",203],["T_DOC_COMMENT","\/**\n   * Tests editing a page using a disallowed text format.\n   *\n   * Verifies that regular users and administrators are able to edit a page, but\n   * not allowed to change the fields which use an inaccessible text format.\n   * Also verifies that fields which use a text format that does not exist can\n   * be edited by administrators only, but that the administrator is forced to\n   * choose a new format before saving the page.\n   *\/",205],["T_WHITESPACE","\n  ",213],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","testFormatWidgetPermissions",214],"(",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n    ",214],["T_VARIABLE","$body_value_key",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",215],";",["T_WHITESPACE","\n    ",215],["T_VARIABLE","$body_format_key",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'body[0][format]'",216],";",["T_WHITESPACE","\n\n    ",216],["T_COMMENT","\/\/ Create node to edit.\n",218],["T_WHITESPACE","    ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","drupalLogin",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","adminUser",219],")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$edit",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",")",";",["T_WHITESPACE","\n    ",220],["T_VARIABLE","$edit",221],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",221],"]",["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","randomMachineName",221],"(",["T_LNUMBER","8",221],")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$edit",222],"[",["T_VARIABLE","$body_value_key",222],"]",["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","randomMachineName",222],"(",["T_LNUMBER","16",222],")",";",["T_WHITESPACE","\n    ",222],["T_VARIABLE","$edit",223],"[",["T_VARIABLE","$body_format_key",223],"]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","disallowedFormat",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","id",223],"(",")",";",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","drupalPostForm",224],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/page'",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$edit",224],",",["T_WHITESPACE"," ",224],["T_STRING","t",224],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",224],")",")",";",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$node",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","drupalGetNodeByTitle",225],"(",["T_VARIABLE","$edit",225],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",225],"]",")",";",["T_WHITESPACE","\n\n    ",225],["T_COMMENT","\/\/ Try to edit with a less privileged user.\n",227],["T_WHITESPACE","    ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","drupalLogin",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","webUser",228],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","drupalGet",229],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$node",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","id",229],"(",")",")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","clickLink",230],"(",["T_STRING","t",230],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit'",230],")",")",";",["T_WHITESPACE","\n\n    ",230],["T_COMMENT","\/\/ Verify that body field is read-only and contains replacement value.\n",232],["T_WHITESPACE","    ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","assertFieldByXPath",233],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\/\/textarea[@name='",233],["T_VARIABLE","$body_value_key",233],["T_ENCAPSED_AND_WHITESPACE","' and @disabled='disabled']",233],"\"",",",["T_WHITESPACE"," ",233],["T_STRING","t",233],"(",["T_CONSTANT_ENCAPSED_STRING","'This field has been disabled because you do not have sufficient permissions to edit it.'",233],")",",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'Text format access denied message found.'",233],")",";",["T_WHITESPACE","\n\n    ",233],["T_COMMENT","\/\/ Verify that title can be changed, but preview displays original body.\n",235],["T_WHITESPACE","    ",236],["T_VARIABLE","$new_edit",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_ARRAY","array",236],"(",")",";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$new_edit",237],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",237],"]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","randomMachineName",237],"(",["T_LNUMBER","8",237],")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","drupalPostForm",238],"(",["T_STRING","NULL",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$new_edit",238],",",["T_WHITESPACE"," ",238],["T_STRING","t",238],"(",["T_CONSTANT_ENCAPSED_STRING","'Preview'",238],")",")",";",["T_WHITESPACE","\n    ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","assertText",239],"(",["T_VARIABLE","$edit",239],"[",["T_VARIABLE","$body_value_key",239],"]",",",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'Old body found in preview.'",239],")",";",["T_WHITESPACE","\n\n    ",239],["T_COMMENT","\/\/ Save and verify that only the title was changed.\n",241],["T_WHITESPACE","    ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","drupalPostForm",242],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_VARIABLE","$node",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","id",242],"(",")",["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$new_edit",242],",",["T_WHITESPACE"," ",242],["T_STRING","t",242],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",242],")",")",";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","assertNoText",243],"(",["T_VARIABLE","$edit",243],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",243],"]",",",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'Old title not found.'",243],")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","assertText",244],"(",["T_VARIABLE","$new_edit",244],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",244],"]",",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'New title found.'",244],")",";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","assertText",245],"(",["T_VARIABLE","$edit",245],"[",["T_VARIABLE","$body_value_key",245],"]",",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'Old body found.'",245],")",";",["T_WHITESPACE","\n\n    ",245],["T_COMMENT","\/\/ Check that even an administrator with \"administer filters\" permission\n",247],["T_WHITESPACE","    ",248],["T_COMMENT","\/\/ cannot edit the body field if they do not have specific permission to\n",248],["T_WHITESPACE","    ",249],["T_COMMENT","\/\/ use its stored format. (This must be disallowed so that the\n",249],["T_WHITESPACE","    ",250],["T_COMMENT","\/\/ administrator is never forced to switch the text format to something\n",250],["T_WHITESPACE","    ",251],["T_COMMENT","\/\/ else.)\n",251],["T_WHITESPACE","    ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","drupalLogin",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","filterAdminUser",252],")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","drupalGet",253],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",253],["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_VARIABLE","$node",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","id",253],"(",")",["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",253],")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","assertFieldByXPath",254],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\/\/textarea[@name='",254],["T_VARIABLE","$body_value_key",254],["T_ENCAPSED_AND_WHITESPACE","' and @disabled='disabled']",254],"\"",",",["T_WHITESPACE"," ",254],["T_STRING","t",254],"(",["T_CONSTANT_ENCAPSED_STRING","'This field has been disabled because you do not have sufficient permissions to edit it.'",254],")",",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'Text format access denied message found.'",254],")",";",["T_WHITESPACE","\n\n    ",254],["T_COMMENT","\/\/ Disable the text format used above.\n",256],["T_WHITESPACE","    ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","disallowedFormat",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","disable",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","save",257],"(",")",";",["T_WHITESPACE","\n    ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","resetFilterCaches",258],"(",")",";",["T_WHITESPACE","\n\n    ",258],["T_COMMENT","\/\/ Log back in as the less privileged user and verify that the body field\n",260],["T_WHITESPACE","    ",261],["T_COMMENT","\/\/ is still disabled, since the less privileged user should not be able to\n",261],["T_WHITESPACE","    ",262],["T_COMMENT","\/\/ edit content that does not have an assigned format.\n",262],["T_WHITESPACE","    ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","drupalLogin",263],"(",["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","webUser",263],")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","drupalGet",264],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",264],["T_WHITESPACE"," ",264],".",["T_WHITESPACE"," ",264],["T_VARIABLE","$node",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","id",264],"(",")",["T_WHITESPACE"," ",264],".",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",264],")",";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","assertFieldByXPath",265],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\/\/textarea[@name='",265],["T_VARIABLE","$body_value_key",265],["T_ENCAPSED_AND_WHITESPACE","' and @disabled='disabled']",265],"\"",",",["T_WHITESPACE"," ",265],["T_STRING","t",265],"(",["T_CONSTANT_ENCAPSED_STRING","'This field has been disabled because you do not have sufficient permissions to edit it.'",265],")",",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'Text format access denied message found.'",265],")",";",["T_WHITESPACE","\n\n    ",265],["T_COMMENT","\/\/ Log back in as the filter administrator and verify that the body field\n",267],["T_WHITESPACE","    ",268],["T_COMMENT","\/\/ can be edited.\n",268],["T_WHITESPACE","    ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","drupalLogin",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","filterAdminUser",269],")",";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","drupalGet",270],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_VARIABLE","$node",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","id",270],"(",")",["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",270],")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","assertNoFieldByXPath",271],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\/\/textarea[@name='",271],["T_VARIABLE","$body_value_key",271],["T_ENCAPSED_AND_WHITESPACE","' and @disabled='disabled']",271],"\"",",",["T_WHITESPACE"," ",271],["T_STRING","NULL",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'Text format access denied message not found.'",271],")",";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","assertFieldByXPath",272],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\/\/select[@name='",272],["T_VARIABLE","$body_format_key",272],["T_ENCAPSED_AND_WHITESPACE","']",272],"\"",",",["T_WHITESPACE"," ",272],["T_STRING","NULL",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'Text format selector found.'",272],")",";",["T_WHITESPACE","\n\n    ",272],["T_COMMENT","\/\/ Verify that trying to save the node without selecting a new text format\n",274],["T_WHITESPACE","    ",275],["T_COMMENT","\/\/ produces an error message, and does not result in the node being saved.\n",275],["T_WHITESPACE","    ",276],["T_VARIABLE","$old_title",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$new_edit",276],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",276],"]",";",["T_WHITESPACE","\n    ",276],["T_VARIABLE","$new_title",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","randomMachineName",277],"(",["T_LNUMBER","8",277],")",";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$edit",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_ARRAY","array",278],"(",")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$edit",279],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",279],"]",["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$new_title",279],";",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","drupalPostForm",280],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_VARIABLE","$node",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","id",280],"(",")",["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$edit",280],",",["T_WHITESPACE"," ",280],["T_STRING","t",280],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",280],")",")",";",["T_WHITESPACE","\n    ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","assertText",281],"(",["T_STRING","t",281],"(",["T_CONSTANT_ENCAPSED_STRING","'@name field is required.'",281],",",["T_WHITESPACE"," ",281],["T_ARRAY","array",281],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_STRING","t",281],"(",["T_CONSTANT_ENCAPSED_STRING","'Text format'",281],")",")",")",",",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'Error message is displayed.'",281],")",";",["T_WHITESPACE","\n    ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","drupalGet",282],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$node",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","id",282],"(",")",")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","assertText",283],"(",["T_VARIABLE","$old_title",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'Old title found.'",283],")",";",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","assertNoText",284],"(",["T_VARIABLE","$new_title",284],",",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'New title not found.'",284],")",";",["T_WHITESPACE","\n\n    ",284],["T_COMMENT","\/\/ Now select a new text format and make sure the node can be saved.\n",286],["T_WHITESPACE","    ",287],["T_VARIABLE","$edit",287],"[",["T_VARIABLE","$body_format_key",287],"]",["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","filter_fallback_format",287],"(",")",";",["T_WHITESPACE","\n    ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","drupalPostForm",288],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",288],["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_VARIABLE","$node",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","id",288],"(",")",["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$edit",288],",",["T_WHITESPACE"," ",288],["T_STRING","t",288],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",288],")",")",";",["T_WHITESPACE","\n    ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","assertUrl",289],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_VARIABLE","$node",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","id",289],"(",")",")",";",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","assertText",290],"(",["T_VARIABLE","$new_title",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'New title found.'",290],")",";",["T_WHITESPACE","\n    ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","assertNoText",291],"(",["T_VARIABLE","$old_title",291],",",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'Old title not found.'",291],")",";",["T_WHITESPACE","\n\n    ",291],["T_COMMENT","\/\/ Switch the text format to a new one, then disable that format and all\n",293],["T_WHITESPACE","    ",294],["T_COMMENT","\/\/ other formats on the site (leaving only the fallback format).\n",294],["T_WHITESPACE","    ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","drupalLogin",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","adminUser",295],")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$edit",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_ARRAY","array",296],"(",["T_VARIABLE","$body_format_key",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","allowedFormat",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","id",296],"(",")",")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","drupalPostForm",297],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",297],["T_WHITESPACE"," ",297],".",["T_WHITESPACE"," ",297],["T_VARIABLE","$node",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","id",297],"(",")",["T_WHITESPACE"," ",297],".",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$edit",297],",",["T_WHITESPACE"," ",297],["T_STRING","t",297],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",297],")",")",";",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","assertUrl",298],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",298],["T_WHITESPACE"," ",298],".",["T_WHITESPACE"," ",298],["T_VARIABLE","$node",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","id",298],"(",")",")",";",["T_WHITESPACE","\n    ",298],["T_FOREACH","foreach",299],["T_WHITESPACE"," ",299],"(",["T_STRING","filter_formats",299],"(",")",["T_WHITESPACE"," ",299],["T_AS","as",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$format",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n      ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(","!",["T_VARIABLE","$format",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","isFallbackFormat",300],"(",")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$format",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","disable",301],"(",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","save",301],"(",")",";",["T_WHITESPACE","\n      ",301],"}",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_COMMENT","\/\/ Since there is now only one available text format, the widget for\n",305],["T_WHITESPACE","    ",306],["T_COMMENT","\/\/ selecting a text format would normally not display when the content is\n",306],["T_WHITESPACE","    ",307],["T_COMMENT","\/\/ edited. However, we need to verify that the filter administrator still\n",307],["T_WHITESPACE","    ",308],["T_COMMENT","\/\/ is forced to make a conscious choice to reassign the text to a different\n",308],["T_WHITESPACE","    ",309],["T_COMMENT","\/\/ format.\n",309],["T_WHITESPACE","    ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","drupalLogin",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","filterAdminUser",310],")",";",["T_WHITESPACE","\n    ",310],["T_VARIABLE","$old_title",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$new_title",311],";",["T_WHITESPACE","\n    ",311],["T_VARIABLE","$new_title",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","randomMachineName",312],"(",["T_LNUMBER","8",312],")",";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$edit",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_ARRAY","array",313],"(",")",";",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$edit",314],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",314],"]",["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$new_title",314],";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","drupalPostForm",315],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_VARIABLE","$node",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","id",315],"(",")",["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$edit",315],",",["T_WHITESPACE"," ",315],["T_STRING","t",315],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",315],")",")",";",["T_WHITESPACE","\n    ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","assertText",316],"(",["T_STRING","t",316],"(",["T_CONSTANT_ENCAPSED_STRING","'@name field is required.'",316],",",["T_WHITESPACE"," ",316],["T_ARRAY","array",316],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_STRING","t",316],"(",["T_CONSTANT_ENCAPSED_STRING","'Text format'",316],")",")",")",",",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'Error message is displayed.'",316],")",";",["T_WHITESPACE","\n    ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","drupalGet",317],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_VARIABLE","$node",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","id",317],"(",")",")",";",["T_WHITESPACE","\n    ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","assertText",318],"(",["T_VARIABLE","$old_title",318],",",["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'Old title found.'",318],")",";",["T_WHITESPACE","\n    ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","assertNoText",319],"(",["T_VARIABLE","$new_title",319],",",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'New title not found.'",319],")",";",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$edit",320],"[",["T_VARIABLE","$body_format_key",320],"]",["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","filter_fallback_format",320],"(",")",";",["T_WHITESPACE","\n    ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","drupalPostForm",321],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",321],["T_WHITESPACE"," ",321],".",["T_WHITESPACE"," ",321],["T_VARIABLE","$node",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","id",321],"(",")",["T_WHITESPACE"," ",321],".",["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$edit",321],",",["T_WHITESPACE"," ",321],["T_STRING","t",321],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",321],")",")",";",["T_WHITESPACE","\n    ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","assertUrl",322],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",322],["T_WHITESPACE"," ",322],".",["T_WHITESPACE"," ",322],["T_VARIABLE","$node",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","id",322],"(",")",")",";",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","assertText",323],"(",["T_VARIABLE","$new_title",323],",",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'New title found.'",323],")",";",["T_WHITESPACE","\n    ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","assertNoText",324],"(",["T_VARIABLE","$old_title",324],",",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'Old title not found.'",324],")",";",["T_WHITESPACE","\n  ",324],"}",["T_WHITESPACE","\n\n  ",325],["T_DOC_COMMENT","\/**\n   * Rebuilds text format and permission caches in the thread running the tests.\n   *\/",327],["T_WHITESPACE","\n  ",329],["T_PROTECTED","protected",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","resetFilterCaches",330],"(",")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n    ",330],["T_STRING","filter_formats_reset",331],"(",")",";",["T_WHITESPACE","\n  ",331],"}",["T_WHITESPACE","\n\n",332],"}",["T_WHITESPACE","\n",334]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","filter",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Tests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CommentTestTrait",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","StreamWrapper",6],["T_NS_SEPARATOR","\\",6],["T_STRING","PublicStream",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","simpletest",7],["T_NS_SEPARATOR","\\",7],["T_STRING","WebTestBase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","filter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FilterFormat",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests restriction of IMG tags in HTML input.\n *\n * @group filter\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","FilterHtmlImageSecureTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","WebTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","CommentTestTrait",17],";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'filter'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'node'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'comment'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * An authenticated user.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$webUser",31],";",["T_WHITESPACE","\n\n  ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_STRING","parent",34],["T_DOUBLE_COLON","::",34],["T_STRING","setUp",34],"(",")",";",["T_WHITESPACE","\n\n    ",34],["T_COMMENT","\/\/ Setup Filtered HTML text format.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$filtered_html_format",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","FilterFormat",37],["T_DOUBLE_COLON","::",37],["T_STRING","create",37],"(",["T_ARRAY","array",37],"(",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'format'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",38],",",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","'name'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'Filtered HTML'",39],",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'filters'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",["T_WHITESPACE","\n        ",40],["T_CONSTANT_ENCAPSED_STRING","'filter_html'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_WHITESPACE","\n          ",41],["T_CONSTANT_ENCAPSED_STRING","'status'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_LNUMBER","1",42],",",["T_WHITESPACE","\n          ",42],["T_CONSTANT_ENCAPSED_STRING","'settings'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_WHITESPACE","\n            ",43],["T_CONSTANT_ENCAPSED_STRING","'allowed_html'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'<img src testattribute> <a>'",44],",",["T_WHITESPACE","\n          ",44],")",",",["T_WHITESPACE","\n        ",45],")",",",["T_WHITESPACE","\n        ",46],["T_CONSTANT_ENCAPSED_STRING","'filter_autop'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_WHITESPACE","\n          ",47],["T_CONSTANT_ENCAPSED_STRING","'status'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_LNUMBER","1",48],",",["T_WHITESPACE","\n        ",48],")",",",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'filter_html_image_secure'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n          ",50],["T_CONSTANT_ENCAPSED_STRING","'status'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_LNUMBER","1",51],",",["T_WHITESPACE","\n        ",51],")",",",["T_WHITESPACE","\n      ",52],")",",",["T_WHITESPACE","\n    ",53],")",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$filtered_html_format",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","save",55],"(",")",";",["T_WHITESPACE","\n\n    ",55],["T_COMMENT","\/\/ Setup users.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","webUser",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","drupalCreateUser",58],"(",["T_ARRAY","array",58],"(",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'access content'",59],",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'access comments'",60],",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'post comments'",61],",",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'skip comment approval'",62],",",["T_WHITESPACE","\n      ",62],["T_VARIABLE","$filtered_html_format",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getPermissionName",63],"(",")",",",["T_WHITESPACE","\n    ",63],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","drupalLogin",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","webUser",65],")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ Setup a node to comment and test on.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","drupalCreateContentType",68],"(",["T_ARRAY","array",68],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'page'",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'name'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",68],")",")",";",["T_WHITESPACE","\n    ",68],["T_COMMENT","\/\/ Add a comment field.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","addDefaultCommentField",70],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'page'",70],")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","node",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","drupalCreateNode",71],"(",")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * Tests removal of images having a non-local source.\n   *\/",74],["T_WHITESPACE","\n  ",76],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","testImageSource",77],"(",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_GLOBAL","global",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$base_url",78],";",["T_WHITESPACE","\n\n    ",78],["T_VARIABLE","$public_files_path",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","PublicStream",80],["T_DOUBLE_COLON","::",80],["T_STRING","basePath",80],"(",")",";",["T_WHITESPACE","\n\n    ",80],["T_VARIABLE","$http_base_url",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","preg_replace",82],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^https?\/'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'http'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$base_url",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$https_base_url",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","preg_replace",83],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^https?\/'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'https'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$base_url",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$files_path",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","base_path",84],"(",")",["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$public_files_path",84],";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$csrf_path",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$public_files_path",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'\/'",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_STRING","implode",85],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",85],",",["T_WHITESPACE"," ",85],["T_STRING","array_fill",85],"(",["T_LNUMBER","0",85],",",["T_WHITESPACE"," ",85],["T_STRING","substr_count",85],"(",["T_VARIABLE","$public_files_path",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'\/'",85],")",["T_WHITESPACE"," ",85],"+",["T_WHITESPACE"," ",85],["T_LNUMBER","1",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'..'",85],")",")",";",["T_WHITESPACE","\n\n    ",85],["T_VARIABLE","$druplicon",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/druplicon.png'",87],";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$red_x_image",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","base_path",88],"(",")",["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'core\/misc\/icons\/e32700\/error.svg'",88],";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$alt_text",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","t",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Image removed.'",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$title_text",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","t",90],"(",["T_CONSTANT_ENCAPSED_STRING","'This image has been removed. For security reasons, only images from the local domain are allowed.'",90],")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ Put a test image in the files directory.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$test_images",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","drupalGetTestFiles",93],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$test_image",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$test_images",94],"[",["T_LNUMBER","0",94],"]",["T_OBJECT_OPERATOR","->",94],["T_STRING","filename",94],";",["T_WHITESPACE","\n\n    ",94],["T_COMMENT","\/\/ Put a test image in the files directory with special filename.\n",96],["T_WHITESPACE","    ",97],["T_VARIABLE","$special_filename",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'t\u00c3\u00a9st f\u00c3\u00afle n\u00c3\u00a0me.png'",97],";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$special_image",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","rawurlencode",98],"(",["T_VARIABLE","$special_filename",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$special_uri",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","str_replace",99],"(",["T_VARIABLE","$test_images",99],"[",["T_LNUMBER","0",99],"]",["T_OBJECT_OPERATOR","->",99],["T_STRING","filename",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$special_filename",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$test_images",99],"[",["T_LNUMBER","0",99],"]",["T_OBJECT_OPERATOR","->",99],["T_STRING","uri",99],")",";",["T_WHITESPACE","\n    ",99],["T_STRING","file_unmanaged_copy",100],"(",["T_VARIABLE","$test_images",100],"[",["T_LNUMBER","0",100],"]",["T_OBJECT_OPERATOR","->",100],["T_STRING","uri",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$special_uri",100],")",";",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ Create a list of test image sources.\n",102],["T_WHITESPACE","    ",103],["T_COMMENT","\/\/ The keys become the value of the IMG 'src' attribute, the values are the\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ expected filter conversions.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$host",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Drupal",105],["T_DOUBLE_COLON","::",105],["T_STRING","request",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getHost",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$host_pattern",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'|^http\\:\/\/'",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_VARIABLE","$host",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'(\\:[0-9]{0,5})|'",106],";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$images",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$http_base_url",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'\/'",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$druplicon",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_STRING","base_path",108],"(",")",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$druplicon",108],",",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$https_base_url",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'\/'",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$druplicon",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_STRING","base_path",109],"(",")",["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$druplicon",109],",",["T_WHITESPACE","\n      ",109],["T_COMMENT","\/\/ Test a url that includes a port.\n",110],["T_WHITESPACE","      ",111],["T_STRING","preg_replace",111],"(",["T_VARIABLE","$host_pattern",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$host",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","':'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$http_base_url",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'\/'",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$druplicon",111],")",["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_STRING","base_path",111],"(",")",["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$druplicon",111],",",["T_WHITESPACE","\n      ",111],["T_STRING","preg_replace",112],"(",["T_VARIABLE","$host_pattern",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_VARIABLE","$host",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","':80'",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$http_base_url",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'\/'",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_VARIABLE","$druplicon",112],")",["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_STRING","base_path",112],"(",")",["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_VARIABLE","$druplicon",112],",",["T_WHITESPACE","\n      ",112],["T_STRING","preg_replace",113],"(",["T_VARIABLE","$host_pattern",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$host",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","':443'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$http_base_url",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'\/'",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$druplicon",113],")",["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_STRING","base_path",113],"(",")",["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$druplicon",113],",",["T_WHITESPACE","\n      ",113],["T_STRING","preg_replace",114],"(",["T_VARIABLE","$host_pattern",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$host",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","':8080'",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$http_base_url",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'\/'",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$druplicon",114],")",["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_STRING","base_path",114],"(",")",["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$druplicon",114],",",["T_WHITESPACE","\n      ",114],["T_STRING","base_path",115],"(",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$druplicon",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_STRING","base_path",115],"(",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$druplicon",115],",",["T_WHITESPACE","\n      ",115],["T_VARIABLE","$files_path",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'\/'",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_VARIABLE","$test_image",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$files_path",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'\/'",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_VARIABLE","$test_image",116],",",["T_WHITESPACE","\n      ",116],["T_VARIABLE","$http_base_url",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'\/'",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_VARIABLE","$public_files_path",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'\/'",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_VARIABLE","$test_image",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$files_path",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'\/'",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_VARIABLE","$test_image",117],",",["T_WHITESPACE","\n      ",117],["T_VARIABLE","$https_base_url",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'\/'",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$public_files_path",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'\/'",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$test_image",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$files_path",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'\/'",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$test_image",118],",",["T_WHITESPACE","\n      ",118],["T_VARIABLE","$http_base_url",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'\/'",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$public_files_path",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'\/'",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$special_image",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$files_path",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'\/'",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$special_image",119],",",["T_WHITESPACE","\n      ",119],["T_VARIABLE","$https_base_url",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'\/'",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_VARIABLE","$public_files_path",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'\/'",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_VARIABLE","$special_image",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$files_path",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'\/'",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_VARIABLE","$special_image",120],",",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$files_path",121],["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'\/example.png'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$red_x_image",121],",",["T_WHITESPACE","\n      ",121],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/'",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$druplicon",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$red_x_image",122],",",["T_WHITESPACE","\n      ",122],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/example.com\/'",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_VARIABLE","$druplicon",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$red_x_image",123],",",["T_WHITESPACE","\n      ",123],["T_CONSTANT_ENCAPSED_STRING","'javascript:druplicon.png'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$red_x_image",124],",",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$csrf_path",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'\/logout'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$red_x_image",125],",",["T_WHITESPACE","\n    ",125],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$comment",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",")",";",["T_WHITESPACE","\n    ",127],["T_FOREACH","foreach",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$images",128],["T_WHITESPACE"," ",128],["T_AS","as",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$image",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$converted",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n      ",128],["T_COMMENT","\/\/ Output the image source as plain text for debugging.\n",129],["T_WHITESPACE","      ",130],["T_VARIABLE","$comment",130],"[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$image",130],["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","':'",130],";",["T_WHITESPACE","\n      ",130],["T_COMMENT","\/\/ Hash the image source in a custom test attribute, because it might\n",131],["T_WHITESPACE","      ",132],["T_COMMENT","\/\/ contain characters that confuse XPath.\n",132],["T_WHITESPACE","      ",133],["T_VARIABLE","$comment",133],"[","]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"'",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_VARIABLE","$image",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'\" testattribute=\"'",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_STRING","hash",133],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$image",133],")",["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'\" \/>'",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$edit",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",["T_WHITESPACE","\n      ",135],["T_CONSTANT_ENCAPSED_STRING","'comment_body[0][value]'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_STRING","implode",136],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$comment",136],")",",",["T_WHITESPACE","\n    ",136],")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","drupalPostForm",138],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","node",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","id",138],"(",")",",",["T_WHITESPACE"," ",138],["T_VARIABLE","$edit",138],",",["T_WHITESPACE"," ",138],["T_STRING","t",138],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",138],")",")",";",["T_WHITESPACE","\n    ",138],["T_FOREACH","foreach",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$images",139],["T_WHITESPACE"," ",139],["T_AS","as",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$image",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$converted",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n      ",139],["T_VARIABLE","$found",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","FALSE",140],";",["T_WHITESPACE","\n      ",140],["T_FOREACH","foreach",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","xpath",141],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/img[@testattribute=\"'",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_STRING","hash",141],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$image",141],")",["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'\"]'",141],")",["T_WHITESPACE"," ",141],["T_AS","as",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$element",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$found",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","TRUE",142],";",["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$converted",143],["T_WHITESPACE"," ",143],["T_IS_EQUAL","==",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$red_x_image",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n          ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertEqual",144],"(",["T_STRING_CAST","(string)",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$element",144],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",144],"]",",",["T_WHITESPACE"," ",144],["T_VARIABLE","$red_x_image",144],")",";",["T_WHITESPACE","\n          ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertEqual",145],"(",["T_STRING_CAST","(string)",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$element",145],"[",["T_CONSTANT_ENCAPSED_STRING","'alt'",145],"]",",",["T_WHITESPACE"," ",145],["T_VARIABLE","$alt_text",145],")",";",["T_WHITESPACE","\n          ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertEqual",146],"(",["T_STRING_CAST","(string)",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$element",146],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",146],"]",",",["T_WHITESPACE"," ",146],["T_VARIABLE","$title_text",146],")",";",["T_WHITESPACE","\n          ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertEqual",147],"(",["T_STRING_CAST","(string)",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$element",147],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",147],"]",",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'16'",147],")",";",["T_WHITESPACE","\n          ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertEqual",148],"(",["T_STRING_CAST","(string)",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$element",148],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",148],"]",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'16'",148],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_ELSE","else",150],["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n          ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertEqual",151],"(",["T_STRING_CAST","(string)",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$element",151],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",151],"]",",",["T_WHITESPACE"," ",151],["T_VARIABLE","$converted",151],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n      ",152],"}",["T_WHITESPACE","\n      ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertTrue",154],"(",["T_VARIABLE","$found",154],",",["T_WHITESPACE"," ",154],["T_STRING","format_string",154],"(",["T_CONSTANT_ENCAPSED_STRING","'@image was found.'",154],",",["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",["T_CONSTANT_ENCAPSED_STRING","'@image'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$image",154],")",")",")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n  ",155],"}",["T_WHITESPACE","\n\n",156],"}",["T_WHITESPACE","\n",158]]
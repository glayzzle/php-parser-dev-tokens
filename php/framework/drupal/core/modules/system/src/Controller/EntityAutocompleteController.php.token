[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Controller",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Crypt",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tags",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unicode",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Controller",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ControllerBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityAutocompleteMatcher",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","KeyValueStore",10],["T_NS_SEPARATOR","\\",10],["T_STRING","KeyValueStoreInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Site",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Settings",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DependencyInjection",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ContainerInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Symfony",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Component",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HttpFoundation",13],["T_NS_SEPARATOR","\\",13],["T_STRING","JsonResponse",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Request",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpKernel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Exception",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AccessDeniedHttpException",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Defines a route controller for entity autocomplete form elements.\n *\/",17],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","EntityAutocompleteController",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","ControllerBase",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The autocomplete matcher for entity references.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityAutocompleteMatcher\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$matcher",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The key value store.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueStoreInterface\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$keyValue",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Constructs a EntityAutocompleteController object.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityAutocompleteMatcher $matcher\n   *   The autocomplete matcher for entity references.\n   * @param \\Drupal\\Core\\KeyValueStore\\KeyValueStoreInterface $key_value\n   *   The key value factory.\n   *\/",36],["T_WHITESPACE","\n  ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","__construct",44],"(",["T_STRING","EntityAutocompleteMatcher",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$matcher",44],",",["T_WHITESPACE"," ",44],["T_STRING","KeyValueStoreInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$key_value",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","matcher",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$matcher",45],";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","keyValue",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$key_value",46],";",["T_WHITESPACE","\n  ",46],"}",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",49],["T_WHITESPACE","\n  ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_STATIC","static",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","create",52],"(",["T_STRING","ContainerInterface",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$container",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_STATIC","static",53],"(",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$container",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.autocomplete_matcher'",54],")",",",["T_WHITESPACE","\n      ",54],["T_VARIABLE","$container",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","get",55],"(",["T_CONSTANT_ENCAPSED_STRING","'keyvalue'",55],")",["T_OBJECT_OPERATOR","->",55],["T_STRING","get",55],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_autocomplete'",55],")",["T_WHITESPACE","\n    ",55],")",";",["T_WHITESPACE","\n  ",56],"}",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Autocomplete the label of an entity.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The request object that contains the typed tags.\n   * @param string $target_type\n   *   The ID of the target entity type.\n   * @param string $selection_handler\n   *   The plugin ID of the entity reference selection handler.\n   * @param string $selection_settings_key\n   *   The hashed key of the key\/value entry that holds the selection handler\n   *   settings.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\JsonResponse\n   *   The matched entity labels as a JSON response.\n   *\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\AccessDeniedHttpException\n   *   Thrown if the selection settings key is not found in the key\/value store\n   *   or if it does not match the stored data.\n   *\/",59],["T_WHITESPACE","\n  ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","handleAutocomplete",79],"(",["T_STRING","Request",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$request",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$target_type",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$selection_handler",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$selection_settings_key",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$matches",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",";",["T_WHITESPACE","\n    ",80],["T_COMMENT","\/\/ Get the typed string from the URL, if it exists.\n",81],["T_WHITESPACE","    ",82],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$input",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$request",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","query",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","get",82],"(",["T_CONSTANT_ENCAPSED_STRING","'q'",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$typed_string",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","Tags",83],["T_DOUBLE_COLON","::",83],["T_STRING","explode",83],"(",["T_VARIABLE","$input",83],")",";",["T_WHITESPACE","\n      ",83],["T_VARIABLE","$typed_string",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","Unicode",84],["T_DOUBLE_COLON","::",84],["T_STRING","strtolower",84],"(",["T_STRING","array_pop",84],"(",["T_VARIABLE","$typed_string",84],")",")",";",["T_WHITESPACE","\n\n      ",84],["T_COMMENT","\/\/ Selection settings are passed in as a hashed key of a serialized array\n",86],["T_WHITESPACE","      ",87],["T_COMMENT","\/\/ stored in the key\/value store.\n",87],["T_WHITESPACE","      ",88],["T_VARIABLE","$selection_settings",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","keyValue",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","get",88],"(",["T_VARIABLE","$selection_settings_key",88],",",["T_WHITESPACE"," ",88],["T_STRING","FALSE",88],")",";",["T_WHITESPACE","\n      ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$selection_settings",89],["T_WHITESPACE"," ",89],["T_IS_NOT_IDENTICAL","!==",89],["T_WHITESPACE"," ",89],["T_STRING","FALSE",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$selection_settings_hash",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","Crypt",90],["T_DOUBLE_COLON","::",90],["T_STRING","hmacBase64",90],"(",["T_STRING","serialize",90],"(",["T_VARIABLE","$selection_settings",90],")",["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$target_type",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$selection_handler",90],",",["T_WHITESPACE"," ",90],["T_STRING","Settings",90],["T_DOUBLE_COLON","::",90],["T_STRING","getHashSalt",90],"(",")",")",";",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$selection_settings_hash",91],["T_WHITESPACE"," ",91],["T_IS_NOT_IDENTICAL","!==",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$selection_settings_key",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n          ",91],["T_COMMENT","\/\/ Disallow access when the selection settings hash does not match the\n",92],["T_WHITESPACE","          ",93],["T_COMMENT","\/\/ passed-in key.\n",93],["T_WHITESPACE","          ",94],["T_THROW","throw",94],["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_STRING","AccessDeniedHttpException",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid selection settings key.'",94],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n      ",95],"}",["T_WHITESPACE","\n      ",96],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_COMMENT","\/\/ Disallow access when the selection settings key is not found in the\n",98],["T_WHITESPACE","        ",99],["T_COMMENT","\/\/ key\/value store.\n",99],["T_WHITESPACE","        ",100],["T_THROW","throw",100],["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_STRING","AccessDeniedHttpException",100],"(",")",";",["T_WHITESPACE","\n      ",100],"}",["T_WHITESPACE","\n\n      ",101],["T_VARIABLE","$matches",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","matcher",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getMatches",103],"(",["T_VARIABLE","$target_type",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$selection_handler",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$selection_settings",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$typed_string",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_NEW","new",106],["T_WHITESPACE"," ",106],["T_STRING","JsonResponse",106],"(",["T_VARIABLE","$matches",106],")",";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n",107],"}",["T_WHITESPACE","\n",109]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","ImageToolkit",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Operation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","gd",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Defines GD2 Crop operation.\n *\n * @ImageToolkitOperation(\n *   id = \"gd_crop\",\n *   toolkit = \"gd\",\n *   operation = \"crop\",\n *   label = @Translation(\"Crop\"),\n *   description = @Translation(\"Crops an image to a rectangle specified by the given dimensions.\")\n * )\n *\/",5],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Crop",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","GDImageToolkitOperationBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",18],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","arguments",21],"(",")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_RETURN","return",22],["T_WHITESPACE"," ",22],["T_ARRAY","array",22],"(",["T_WHITESPACE","\n      ",22],["T_CONSTANT_ENCAPSED_STRING","'x'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",["T_WHITESPACE","\n        ",23],["T_CONSTANT_ENCAPSED_STRING","'description'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'The starting x offset at which to start the crop, in pixels'",24],",",["T_WHITESPACE","\n      ",24],")",",",["T_WHITESPACE","\n      ",25],["T_CONSTANT_ENCAPSED_STRING","'y'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_ARRAY","array",26],"(",["T_WHITESPACE","\n        ",26],["T_CONSTANT_ENCAPSED_STRING","'description'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'The starting y offset at which to start the crop, in pixels'",27],",",["T_WHITESPACE","\n      ",27],")",",",["T_WHITESPACE","\n      ",28],["T_CONSTANT_ENCAPSED_STRING","'width'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_WHITESPACE","\n        ",29],["T_CONSTANT_ENCAPSED_STRING","'description'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'The width of the cropped area, in pixels'",30],",",["T_WHITESPACE","\n        ",30],["T_CONSTANT_ENCAPSED_STRING","'required'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_STRING","FALSE",31],",",["T_WHITESPACE","\n        ",31],["T_CONSTANT_ENCAPSED_STRING","'default'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_STRING","NULL",32],",",["T_WHITESPACE","\n      ",32],")",",",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'height'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",["T_WHITESPACE","\n        ",34],["T_CONSTANT_ENCAPSED_STRING","'description'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'The height of the cropped area, in pixels'",35],",",["T_WHITESPACE","\n        ",35],["T_CONSTANT_ENCAPSED_STRING","'required'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_STRING","FALSE",36],",",["T_WHITESPACE","\n        ",36],["T_CONSTANT_ENCAPSED_STRING","'default'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_STRING","NULL",37],",",["T_WHITESPACE","\n      ",37],")",",",["T_WHITESPACE","\n    ",38],")",";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","validateArguments",45],"(",["T_ARRAY","array",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$arguments",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/\/ Assure at least one dimension.\n",46],["T_WHITESPACE","    ",47],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_EMPTY","empty",47],"(",["T_VARIABLE","$arguments",47],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",47],"]",")",["T_WHITESPACE"," ",47],["T_BOOLEAN_AND","&&",47],["T_WHITESPACE"," ",47],["T_EMPTY","empty",47],"(",["T_VARIABLE","$arguments",47],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",47],"]",")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n      ",47],["T_THROW","throw",48],["T_WHITESPACE"," ",48],["T_NEW","new",48],["T_WHITESPACE"," ",48],["T_NS_SEPARATOR","\\",48],["T_STRING","InvalidArgumentException",48],"(",["T_CONSTANT_ENCAPSED_STRING","\"At least one dimension ('width' or 'height') must be provided to the image 'crop' operation\"",48],")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Preserve aspect.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$aspect",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getToolkit",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getHeight",52],"(",")",["T_WHITESPACE"," ",52],"\/",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getToolkit",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getWidth",52],"(",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$arguments",53],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",53],"]",["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_EMPTY","empty",53],"(",["T_VARIABLE","$arguments",53],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",53],"]",")",["T_WHITESPACE"," ",53],"?",["T_WHITESPACE"," ",53],["T_VARIABLE","$arguments",53],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",53],"]",["T_WHITESPACE"," ",53],"*",["T_WHITESPACE"," ",53],["T_VARIABLE","$aspect",53],["T_WHITESPACE"," ",53],":",["T_WHITESPACE"," ",53],["T_VARIABLE","$arguments",53],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",53],"]",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$arguments",54],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",54],"]",["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_EMPTY","empty",54],"(",["T_VARIABLE","$arguments",54],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",54],"]",")",["T_WHITESPACE"," ",54],"?",["T_WHITESPACE"," ",54],["T_VARIABLE","$arguments",54],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",54],"]",["T_WHITESPACE"," ",54],"\/",["T_WHITESPACE"," ",54],["T_VARIABLE","$aspect",54],["T_WHITESPACE"," ",54],":",["T_WHITESPACE"," ",54],["T_VARIABLE","$arguments",54],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",54],"]",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Assure integers for all arguments.\n",56],["T_WHITESPACE","    ",57],["T_FOREACH","foreach",57],["T_WHITESPACE"," ",57],"(",["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'x'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'y'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'width'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'height'",57],")",["T_WHITESPACE"," ",57],["T_AS","as",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$key",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n      ",57],["T_VARIABLE","$arguments",58],"[",["T_VARIABLE","$key",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_INT_CAST","(int)",58],["T_WHITESPACE"," ",58],["T_STRING","round",58],"(",["T_VARIABLE","$arguments",58],"[",["T_VARIABLE","$key",58],"]",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_COMMENT","\/\/ Fail when width or height are 0 or negative.\n",61],["T_WHITESPACE","    ",62],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$arguments",62],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",62],"]",["T_WHITESPACE"," ",62],["T_IS_SMALLER_OR_EQUAL","<=",62],["T_WHITESPACE"," ",62],["T_LNUMBER","0",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_THROW","throw",63],["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_NS_SEPARATOR","\\",63],["T_STRING","InvalidArgumentException",63],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Invalid width ('",63],["T_CURLY_OPEN","{",63],["T_VARIABLE","$arguments",63],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",63],"]","}",["T_ENCAPSED_AND_WHITESPACE","') specified for the image 'crop' operation",63],"\"",")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n    ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$arguments",65],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",65],"]",["T_WHITESPACE"," ",65],["T_IS_SMALLER_OR_EQUAL","<=",65],["T_WHITESPACE"," ",65],["T_LNUMBER","0",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n      ",65],["T_THROW","throw",66],["T_WHITESPACE"," ",66],["T_NEW","new",66],["T_WHITESPACE"," ",66],["T_NS_SEPARATOR","\\",66],["T_STRING","InvalidArgumentException",66],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Invalid height ('",66],["T_CURLY_OPEN","{",66],["T_VARIABLE","$arguments",66],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",66],"]","}",["T_ENCAPSED_AND_WHITESPACE","') specified for the image 'crop' operation",66],"\"",")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$arguments",69],";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",72],["T_WHITESPACE","\n  ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","execute",75],"(",["T_ARRAY","array",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$arguments",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_COMMENT","\/\/ Create a new resource of the required dimensions, and copy and resize\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ the original resource on it with resampling. Destroy the original\n",77],["T_WHITESPACE","    ",78],["T_COMMENT","\/\/ resource upon success.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$original_resource",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getToolkit",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getResource",79],"(",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$data",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'width'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$arguments",81],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",81],"]",",",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'height'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$arguments",82],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",82],"]",",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'extension'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_STRING","image_type_to_extension",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getToolkit",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getType",83],"(",")",",",["T_WHITESPACE"," ",83],["T_STRING","FALSE",83],")",",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'transparent_color'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getToolkit",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","getTransparentColor",84],"(",")",",",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'is_temp'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_STRING","TRUE",85],",",["T_WHITESPACE","\n    ",85],")",";",["T_WHITESPACE","\n    ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getToolkit",87],"(",")",["T_OBJECT_OPERATOR","->",87],["T_STRING","apply",87],"(",["T_CONSTANT_ENCAPSED_STRING","'create_new'",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$data",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n      ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_STRING","imagecopyresampled",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getToolkit",88],"(",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","getResource",88],"(",")",",",["T_WHITESPACE"," ",88],["T_VARIABLE","$original_resource",88],",",["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],",",["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$arguments",88],"[",["T_CONSTANT_ENCAPSED_STRING","'x'",88],"]",",",["T_WHITESPACE"," ",88],["T_VARIABLE","$arguments",88],"[",["T_CONSTANT_ENCAPSED_STRING","'y'",88],"]",",",["T_WHITESPACE"," ",88],["T_VARIABLE","$arguments",88],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",88],"]",",",["T_WHITESPACE"," ",88],["T_VARIABLE","$arguments",88],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",88],"]",",",["T_WHITESPACE"," ",88],["T_VARIABLE","$arguments",88],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",88],"]",",",["T_WHITESPACE"," ",88],["T_VARIABLE","$arguments",88],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",88],"]",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n        ",88],["T_STRING","imagedestroy",89],"(",["T_VARIABLE","$original_resource",89],")",";",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_STRING","TRUE",90],";",["T_WHITESPACE","\n      ",90],"}",["T_WHITESPACE","\n      ",91],["T_ELSE","else",92],["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n        ",92],["T_COMMENT","\/\/ In case of failure, destroy the temporary resource and restore\n",93],["T_WHITESPACE","        ",94],["T_COMMENT","\/\/ the original one.\n",94],["T_WHITESPACE","        ",95],["T_STRING","imagedestroy",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getToolkit",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","getResource",95],"(",")",")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getToolkit",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","setResource",96],"(",["T_VARIABLE","$original_resource",96],")",";",["T_WHITESPACE","\n      ",96],"}",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n    ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_STRING","FALSE",99],";",["T_WHITESPACE","\n  ",99],"}",["T_WHITESPACE","\n\n",100],"}",["T_WHITESPACE","\n",102]]
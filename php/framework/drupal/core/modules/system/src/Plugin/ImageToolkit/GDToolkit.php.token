[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","ImageToolkit",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Color",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unicode",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Config",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigFactoryInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Form",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FormStateInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ImageToolkit",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ImageToolkitBase",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ImageToolkit",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ImageToolkitOperationManagerInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","StreamWrapper",11],["T_NS_SEPARATOR","\\",11],["T_STRING","StreamWrapperInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StreamWrapper",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StreamWrapperManagerInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Psr",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Log",13],["T_NS_SEPARATOR","\\",13],["T_STRING","LoggerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DependencyInjection",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ContainerInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Defines the GD2 toolkit for image manipulation within Drupal.\n *\n * @ImageToolkit(\n *   id = \"gd\",\n *   title = @Translation(\"GD2 image manipulation toolkit\")\n * )\n *\/",16],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","GDToolkit",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","ImageToolkitBase",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * A GD image resource.\n   *\n   * @var resource|null\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$resource",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","NULL",31],";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Image type represented by a PHP IMAGETYPE_* constant (e.g. IMAGETYPE_JPEG).\n   *\n   * @var int\n   *\/",33],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$type",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Image information from a file, available prior to loading the GD resource.\n   *\n   * This contains a copy of the array returned by executing getimagesize()\n   * on the image file when the image object is instantiated. It gets reset\n   * to NULL as soon as the GD resource is loaded.\n   *\n   * @var array|null\n   *\n   * @see \\Drupal\\system\\Plugin\\ImageToolkit\\GDToolkit::parseFile()\n   * @see \\Drupal\\system\\Plugin\\ImageToolkit\\GDToolkit::setResource()\n   * @see http:\/\/php.net\/manual\/function.getimagesize.php\n   *\/",40],["T_WHITESPACE","\n  ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$preLoadInfo",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","NULL",53],";",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * The StreamWrapper manager.\n   *\n   * @var \\Drupal\\Core\\StreamWrapper\\StreamWrapperManagerInterface\n   *\/",55],["T_WHITESPACE","\n  ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$streamWrapperManager",60],";",["T_WHITESPACE","\n\n  ",60],["T_DOC_COMMENT","\/**\n   * Constructs a GDToolkit object.\n   *\n   * @param array $configuration\n   *   A configuration array containing information about the plugin instance.\n   * @param string $plugin_id\n   *   The plugin_id for the plugin instance.\n   * @param array $plugin_definition\n   *   The plugin implementation definition.\n   * @param \\Drupal\\Core\\ImageToolkit\\ImageToolkitOperationManagerInterface $operation_manager\n   *   The toolkit operation manager.\n   * @param \\Psr\\Log\\LoggerInterface $logger\n   *   A logger instance.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The config factory.\n   * @param \\Drupal\\Core\\StreamWrapper\\StreamWrapperManagerInterface $stream_wrapper_manager\n   *   The StreamWrapper manager.\n   *\/",62],["T_WHITESPACE","\n  ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","__construct",80],"(",["T_ARRAY","array",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$configuration",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$plugin_id",80],",",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$plugin_definition",80],",",["T_WHITESPACE"," ",80],["T_STRING","ImageToolkitOperationManagerInterface",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$operation_manager",80],",",["T_WHITESPACE"," ",80],["T_STRING","LoggerInterface",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$logger",80],",",["T_WHITESPACE"," ",80],["T_STRING","ConfigFactoryInterface",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$config_factory",80],",",["T_WHITESPACE"," ",80],["T_STRING","StreamWrapperManagerInterface",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$stream_wrapper_manager",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_STRING","parent",81],["T_DOUBLE_COLON","::",81],["T_STRING","__construct",81],"(",["T_VARIABLE","$configuration",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$plugin_id",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$plugin_definition",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$operation_manager",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$logger",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$config_factory",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","streamWrapperManager",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$stream_wrapper_manager",82],";",["T_WHITESPACE","\n  ",82],"}",["T_WHITESPACE","\n\n  ",83],["T_DOC_COMMENT","\/**\n   * Destructs a GDToolkit object.\n   *\n   * Frees memory associated with a GD image resource.\n   *\/",85],["T_WHITESPACE","\n  ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","__destruct",90],"(",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_STRING","is_resource",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","resource",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_STRING","imagedestroy",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","resource",92],")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n  ",93],"}",["T_WHITESPACE","\n\n  ",94],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",96],["T_WHITESPACE","\n  ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_STATIC","static",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","create",99],"(",["T_STRING","ContainerInterface",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$container",99],",",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$configuration",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$plugin_id",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$plugin_definition",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n    ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_STATIC","static",100],"(",["T_WHITESPACE","\n      ",100],["T_VARIABLE","$configuration",101],",",["T_WHITESPACE","\n      ",101],["T_VARIABLE","$plugin_id",102],",",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$plugin_definition",103],",",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$container",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","get",104],"(",["T_CONSTANT_ENCAPSED_STRING","'image.toolkit.operation.manager'",104],")",",",["T_WHITESPACE","\n      ",104],["T_VARIABLE","$container",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","get",105],"(",["T_CONSTANT_ENCAPSED_STRING","'logger.channel.image'",105],")",",",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$container",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","get",106],"(",["T_CONSTANT_ENCAPSED_STRING","'config.factory'",106],")",",",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$container",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","get",107],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",107],")",["T_WHITESPACE","\n    ",107],")",";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n  ",109],["T_DOC_COMMENT","\/**\n   * Sets the GD image resource.\n   *\n   * @param resource $resource\n   *   The GD image resource.\n   *\n   * @return \\Drupal\\system\\Plugin\\ImageToolkit\\GDToolkit\n   *   An instance of the current toolkit object.\n   *\/",111],["T_WHITESPACE","\n  ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","setResource",120],"(",["T_VARIABLE","$resource",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n    ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(","!",["T_STRING","is_resource",121],"(",["T_VARIABLE","$resource",121],")",["T_WHITESPACE"," ",121],["T_BOOLEAN_OR","||",121],["T_WHITESPACE"," ",121],["T_STRING","get_resource_type",121],"(",["T_VARIABLE","$resource",121],")",["T_WHITESPACE"," ",121],["T_IS_NOT_EQUAL","!=",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'gd'",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n      ",121],["T_THROW","throw",122],["T_WHITESPACE"," ",122],["T_NEW","new",122],["T_WHITESPACE"," ",122],["T_NS_SEPARATOR","\\",122],["T_STRING","InvalidArgumentException",122],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid resource argument'",122],")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","preLoadInfo",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","NULL",124],";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","resource",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$resource",125],";",["T_WHITESPACE","\n    ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],";",["T_WHITESPACE","\n  ",126],"}",["T_WHITESPACE","\n\n  ",127],["T_DOC_COMMENT","\/**\n   * Retrieves the GD image resource.\n   *\n   * @return resource|null\n   *   The GD image resource, or NULL if not available.\n   *\/",129],["T_WHITESPACE","\n  ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getResource",135],"(",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n    ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_STRING","is_resource",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","resource",136],")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n      ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","load",137],"(",")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n    ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","resource",139],";",["T_WHITESPACE","\n  ",139],"}",["T_WHITESPACE","\n\n  ",140],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",142],["T_WHITESPACE","\n  ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","buildConfigurationForm",145],"(",["T_ARRAY","array",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$form",145],",",["T_WHITESPACE"," ",145],["T_STRING","FormStateInterface",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$form_state",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$form",146],"[",["T_CONSTANT_ENCAPSED_STRING","'image_jpeg_quality'",146],"]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_WHITESPACE","\n      ",146],["T_CONSTANT_ENCAPSED_STRING","'#type'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'number'",147],",",["T_WHITESPACE","\n      ",147],["T_CONSTANT_ENCAPSED_STRING","'#title'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_STRING","t",148],"(",["T_CONSTANT_ENCAPSED_STRING","'JPEG quality'",148],")",",",["T_WHITESPACE","\n      ",148],["T_CONSTANT_ENCAPSED_STRING","'#description'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_STRING","t",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Define the image quality for JPEG manipulations. Ranges from 0 to 100. Higher values mean better image quality but bigger files.'",149],")",",",["T_WHITESPACE","\n      ",149],["T_CONSTANT_ENCAPSED_STRING","'#min'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_LNUMBER","0",150],",",["T_WHITESPACE","\n      ",150],["T_CONSTANT_ENCAPSED_STRING","'#max'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","100",151],",",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","configFactory",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getEditable",152],"(",["T_CONSTANT_ENCAPSED_STRING","'system.image.gd'",152],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","get",152],"(",["T_CONSTANT_ENCAPSED_STRING","'jpeg_quality'",152],",",["T_WHITESPACE"," ",152],["T_STRING","FALSE",152],")",",",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'#field_suffix'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_STRING","t",153],"(",["T_CONSTANT_ENCAPSED_STRING","'%'",153],")",",",["T_WHITESPACE","\n    ",153],")",";",["T_WHITESPACE","\n    ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$form",155],";",["T_WHITESPACE","\n  ",155],"}",["T_WHITESPACE","\n\n  ",156],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",158],["T_WHITESPACE","\n  ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","submitConfigurationForm",161],"(",["T_ARRAY","array",161],["T_WHITESPACE"," ",161],"&",["T_VARIABLE","$form",161],",",["T_WHITESPACE"," ",161],["T_STRING","FormStateInterface",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$form_state",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","configFactory",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getEditable",162],"(",["T_CONSTANT_ENCAPSED_STRING","'system.image.gd'",162],")",["T_WHITESPACE","\n      ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","set",163],"(",["T_CONSTANT_ENCAPSED_STRING","'jpeg_quality'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$form_state",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getValue",163],"(",["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'gd'",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'image_jpeg_quality'",163],")",")",")",["T_WHITESPACE","\n      ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","save",164],"(",")",";",["T_WHITESPACE","\n  ",164],"}",["T_WHITESPACE","\n\n  ",165],["T_DOC_COMMENT","\/**\n   * Loads a GD resource from a file.\n   *\n   * @return bool\n   *   TRUE or FALSE, based on success.\n   *\/",167],["T_WHITESPACE","\n  ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","load",173],"(",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n    ",173],["T_COMMENT","\/\/ Return immediately if the image file is not valid.\n",174],["T_WHITESPACE","    ",175],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","!",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","isValid",175],"(",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n      ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_STRING","FALSE",176],";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_VARIABLE","$function",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefrom'",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_STRING","image_type_to_extension",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getType",179],"(",")",",",["T_WHITESPACE"," ",179],["T_STRING","FALSE",179],")",";",["T_WHITESPACE","\n    ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","function_exists",180],"(",["T_VARIABLE","$function",180],")",["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$resource",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$function",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getSource",180],"(",")",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n      ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setResource",181],"(",["T_VARIABLE","$resource",181],")",";",["T_WHITESPACE","\n      ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_STRING","imageistruecolor",182],"(",["T_VARIABLE","$resource",182],")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n        ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_STRING","TRUE",183],";",["T_WHITESPACE","\n      ",183],"}",["T_WHITESPACE","\n      ",184],["T_ELSE","else",185],["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n        ",185],["T_COMMENT","\/\/ Convert indexed images to truecolor, copying the image to a new\n",186],["T_WHITESPACE","        ",187],["T_COMMENT","\/\/ truecolor resource, so that filters work correctly and don't result\n",187],["T_WHITESPACE","        ",188],["T_COMMENT","\/\/ in unnecessary dither.\n",188],["T_WHITESPACE","        ",189],["T_VARIABLE","$data",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_ARRAY","array",189],"(",["T_WHITESPACE","\n          ",189],["T_CONSTANT_ENCAPSED_STRING","'width'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_STRING","imagesx",190],"(",["T_VARIABLE","$resource",190],")",",",["T_WHITESPACE","\n          ",190],["T_CONSTANT_ENCAPSED_STRING","'height'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_STRING","imagesy",191],"(",["T_VARIABLE","$resource",191],")",",",["T_WHITESPACE","\n          ",191],["T_CONSTANT_ENCAPSED_STRING","'extension'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_STRING","image_type_to_extension",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getType",192],"(",")",",",["T_WHITESPACE"," ",192],["T_STRING","FALSE",192],")",",",["T_WHITESPACE","\n          ",192],["T_CONSTANT_ENCAPSED_STRING","'transparent_color'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getTransparentColor",193],"(",")",",",["T_WHITESPACE","\n          ",193],["T_CONSTANT_ENCAPSED_STRING","'is_temp'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_STRING","TRUE",194],",",["T_WHITESPACE","\n        ",194],")",";",["T_WHITESPACE","\n        ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","apply",196],"(",["T_CONSTANT_ENCAPSED_STRING","'create_new'",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$data",196],")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n          ",196],["T_STRING","imagecopy",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getResource",197],"(",")",",",["T_WHITESPACE"," ",197],["T_VARIABLE","$resource",197],",",["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],",",["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],",",["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],",",["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],",",["T_WHITESPACE"," ",197],["T_STRING","imagesx",197],"(",["T_VARIABLE","$resource",197],")",",",["T_WHITESPACE"," ",197],["T_STRING","imagesy",197],"(",["T_VARIABLE","$resource",197],")",")",";",["T_WHITESPACE","\n          ",197],["T_STRING","imagedestroy",198],"(",["T_VARIABLE","$resource",198],")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n      ",199],"}",["T_WHITESPACE","\n      ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_BOOL_CAST","(bool)",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getResource",201],"(",")",";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n    ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_STRING","FALSE",203],";",["T_WHITESPACE","\n  ",203],"}",["T_WHITESPACE","\n\n  ",204],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",206],["T_WHITESPACE","\n  ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","isValid",209],"(",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n    ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],"(",["T_BOOL_CAST","(bool)",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","preLoadInfo",210],["T_WHITESPACE"," ",210],["T_BOOLEAN_OR","||",210],["T_WHITESPACE"," ",210],["T_BOOL_CAST","(bool)",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","resource",210],")",";",["T_WHITESPACE","\n  ",210],"}",["T_WHITESPACE","\n\n  ",211],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",213],["T_WHITESPACE","\n  ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","save",216],"(",["T_VARIABLE","$destination",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$scheme",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","file_uri_scheme",217],"(",["T_VARIABLE","$destination",217],")",";",["T_WHITESPACE","\n    ",217],["T_COMMENT","\/\/ Work around lack of stream wrapper support in imagejpeg() and imagepng().\n",218],["T_WHITESPACE","    ",219],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$scheme",219],["T_WHITESPACE"," ",219],["T_BOOLEAN_AND","&&",219],["T_WHITESPACE"," ",219],["T_STRING","file_stream_wrapper_valid_scheme",219],"(",["T_VARIABLE","$scheme",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n      ",219],["T_COMMENT","\/\/ If destination is not local, save image to temporary local file.\n",220],["T_WHITESPACE","      ",221],["T_VARIABLE","$local_wrappers",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","streamWrapperManager",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getWrappers",221],"(",["T_STRING","StreamWrapperInterface",221],["T_DOUBLE_COLON","::",221],["T_STRING","LOCAL",221],")",";",["T_WHITESPACE","\n      ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_ISSET","isset",222],"(",["T_VARIABLE","$local_wrappers",222],"[",["T_VARIABLE","$scheme",222],"]",")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$permanent_destination",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$destination",223],";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$destination",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","drupal_tempnam",224],"(",["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/'",224],",",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'gd_'",224],")",";",["T_WHITESPACE","\n      ",224],"}",["T_WHITESPACE","\n      ",225],["T_COMMENT","\/\/ Convert stream wrapper URI to normal path.\n",226],["T_WHITESPACE","      ",227],["T_VARIABLE","$destination",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","drupal_realpath",227],"(",["T_VARIABLE","$destination",227],")",";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_VARIABLE","$function",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'image'",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_STRING","image_type_to_extension",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getType",230],"(",")",",",["T_WHITESPACE"," ",230],["T_STRING","FALSE",230],")",";",["T_WHITESPACE","\n    ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(","!",["T_STRING","function_exists",231],"(",["T_VARIABLE","$function",231],")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n      ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_STRING","FALSE",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n    ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getType",234],"(",")",["T_WHITESPACE"," ",234],["T_IS_EQUAL","==",234],["T_WHITESPACE"," ",234],["T_STRING","IMAGETYPE_JPEG",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n      ",234],["T_VARIABLE","$success",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$function",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getResource",235],"(",")",",",["T_WHITESPACE"," ",235],["T_VARIABLE","$destination",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","configFactory",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","get",235],"(",["T_CONSTANT_ENCAPSED_STRING","'system.image.gd'",235],")",["T_OBJECT_OPERATOR","->",235],["T_STRING","get",235],"(",["T_CONSTANT_ENCAPSED_STRING","'jpeg_quality'",235],")",")",";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n    ",236],["T_ELSE","else",237],["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n      ",237],["T_COMMENT","\/\/ Always save PNG images with full transparency.\n",238],["T_WHITESPACE","      ",239],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getType",239],"(",")",["T_WHITESPACE"," ",239],["T_IS_EQUAL","==",239],["T_WHITESPACE"," ",239],["T_STRING","IMAGETYPE_PNG",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n        ",239],["T_STRING","imagealphablending",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getResource",240],"(",")",",",["T_WHITESPACE"," ",240],["T_STRING","FALSE",240],")",";",["T_WHITESPACE","\n        ",240],["T_STRING","imagesavealpha",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getResource",241],"(",")",",",["T_WHITESPACE"," ",241],["T_STRING","TRUE",241],")",";",["T_WHITESPACE","\n      ",241],"}",["T_WHITESPACE","\n      ",242],["T_VARIABLE","$success",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$function",243],"(",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getResource",243],"(",")",",",["T_WHITESPACE"," ",243],["T_VARIABLE","$destination",243],")",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n    ",244],["T_COMMENT","\/\/ Move temporary local file to remote destination.\n",245],["T_WHITESPACE","    ",246],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_ISSET","isset",246],"(",["T_VARIABLE","$permanent_destination",246],")",["T_WHITESPACE"," ",246],["T_BOOLEAN_AND","&&",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$success",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n      ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_BOOL_CAST","(bool)",247],["T_WHITESPACE"," ",247],["T_STRING","file_unmanaged_move",247],"(",["T_VARIABLE","$destination",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$permanent_destination",247],",",["T_WHITESPACE"," ",247],["T_STRING","FILE_EXISTS_REPLACE",247],")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n    ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$success",249],";",["T_WHITESPACE","\n  ",249],"}",["T_WHITESPACE","\n\n  ",250],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",252],["T_WHITESPACE","\n  ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","parseFile",255],"(",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$data",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],"@",["T_STRING","getimagesize",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getSource",256],"(",")",")",";",["T_WHITESPACE","\n    ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$data",257],["T_WHITESPACE"," ",257],["T_BOOLEAN_AND","&&",257],["T_WHITESPACE"," ",257],["T_STRING","in_array",257],"(",["T_VARIABLE","$data",257],"[",["T_LNUMBER","2",257],"]",",",["T_WHITESPACE"," ",257],["T_STATIC","static",257],["T_DOUBLE_COLON","::",257],["T_STRING","supportedTypes",257],"(",")",")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n      ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","setType",258],"(",["T_VARIABLE","$data",258],"[",["T_LNUMBER","2",258],"]",")",";",["T_WHITESPACE","\n      ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","preLoadInfo",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$data",259],";",["T_WHITESPACE","\n      ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_STRING","TRUE",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n    ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_STRING","FALSE",262],";",["T_WHITESPACE","\n  ",262],"}",["T_WHITESPACE","\n\n  ",263],["T_DOC_COMMENT","\/**\n   * Gets the color set for transparency in GIF images.\n   *\n   * @return string|null\n   *   A color string like '#rrggbb', or NULL if not set or not relevant.\n   *\/",265],["T_WHITESPACE","\n  ",270],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","getTransparentColor",271],"(",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n    ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getResource",272],"(",")",["T_WHITESPACE"," ",272],["T_BOOLEAN_OR","||",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getType",272],"(",")",["T_WHITESPACE"," ",272],["T_IS_NOT_EQUAL","!=",272],["T_WHITESPACE"," ",272],["T_STRING","IMAGETYPE_GIF",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n      ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_STRING","NULL",273],";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n    ",274],["T_COMMENT","\/\/ Find out if a transparent color is set, will return -1 if no\n",275],["T_WHITESPACE","    ",276],["T_COMMENT","\/\/ transparent color has been defined in the image.\n",276],["T_WHITESPACE","    ",277],["T_VARIABLE","$transparent",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","imagecolortransparent",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getResource",277],"(",")",")",";",["T_WHITESPACE","\n    ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$transparent",278],["T_WHITESPACE"," ",278],["T_IS_GREATER_OR_EQUAL",">=",278],["T_WHITESPACE"," ",278],["T_LNUMBER","0",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n      ",278],["T_COMMENT","\/\/ Find out the number of colors in the image palette. It will be 0 for\n",279],["T_WHITESPACE","      ",280],["T_COMMENT","\/\/ truecolor images.\n",280],["T_WHITESPACE","      ",281],["T_VARIABLE","$palette_size",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","imagecolorstotal",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getResource",281],"(",")",")",";",["T_WHITESPACE","\n      ",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$palette_size",282],["T_WHITESPACE"," ",282],["T_IS_EQUAL","==",282],["T_WHITESPACE"," ",282],["T_LNUMBER","0",282],["T_WHITESPACE"," ",282],["T_BOOLEAN_OR","||",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$transparent",282],["T_WHITESPACE"," ",282],"<",["T_WHITESPACE"," ",282],["T_VARIABLE","$palette_size",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n        ",282],["T_COMMENT","\/\/ Return the transparent color, either if it is a truecolor image\n",283],["T_WHITESPACE","        ",284],["T_COMMENT","\/\/ or if the transparent color is part of the palette.\n",284],["T_WHITESPACE","        ",285],["T_COMMENT","\/\/ Since the index of the transparent color is a property of the\n",285],["T_WHITESPACE","        ",286],["T_COMMENT","\/\/ image rather than of the palette, it is possible that an image\n",286],["T_WHITESPACE","        ",287],["T_COMMENT","\/\/ could be created with this index set outside the palette size.\n",287],["T_WHITESPACE","        ",288],["T_COMMENT","\/\/ (see http:\/\/stackoverflow.com\/a\/3898007).\n",288],["T_WHITESPACE","        ",289],["T_VARIABLE","$rgb",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","imagecolorsforindex",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getResource",289],"(",")",",",["T_WHITESPACE"," ",289],["T_VARIABLE","$transparent",289],")",";",["T_WHITESPACE","\n        ",289],["T_UNSET","unset",290],"(",["T_VARIABLE","$rgb",290],"[",["T_CONSTANT_ENCAPSED_STRING","'alpha'",290],"]",")",";",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_STRING","Color",291],["T_DOUBLE_COLON","::",291],["T_STRING","rgbToHex",291],"(",["T_VARIABLE","$rgb",291],")",";",["T_WHITESPACE","\n      ",291],"}",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n    ",293],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_STRING","NULL",294],";",["T_WHITESPACE","\n  ",294],"}",["T_WHITESPACE","\n\n  ",295],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",297],["T_WHITESPACE","\n  ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","getWidth",300],"(",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n    ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","preLoadInfo",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n      ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","preLoadInfo",302],"[",["T_LNUMBER","0",302],"]",";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n    ",303],["T_ELSEIF","elseif",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$res",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getResource",304],"(",")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n      ",304],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_STRING","imagesx",305],"(",["T_VARIABLE","$res",305],")",";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n    ",306],["T_ELSE","else",307],["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n      ",307],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_STRING","NULL",308],";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n  ",309],"}",["T_WHITESPACE","\n\n  ",310],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",312],["T_WHITESPACE","\n  ",314],["T_PUBLIC","public",315],["T_WHITESPACE"," ",315],["T_FUNCTION","function",315],["T_WHITESPACE"," ",315],["T_STRING","getHeight",315],"(",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n    ",315],["T_IF","if",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","preLoadInfo",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n      ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","preLoadInfo",317],"[",["T_LNUMBER","1",317],"]",";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n    ",318],["T_ELSEIF","elseif",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$res",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getResource",319],"(",")",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n      ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_STRING","imagesy",320],"(",["T_VARIABLE","$res",320],")",";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n    ",321],["T_ELSE","else",322],["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n      ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_STRING","NULL",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n  ",324],"}",["T_WHITESPACE","\n\n  ",325],["T_DOC_COMMENT","\/**\n   * Gets the PHP type of the image.\n   *\n   * @return int\n   *   The image type represented by a PHP IMAGETYPE_* constant (e.g.\n   *   IMAGETYPE_JPEG).\n   *\/",327],["T_WHITESPACE","\n  ",333],["T_PUBLIC","public",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","getType",334],"(",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n    ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","type",335],";",["T_WHITESPACE","\n  ",335],"}",["T_WHITESPACE","\n\n  ",336],["T_DOC_COMMENT","\/**\n   * Sets the PHP type of the image.\n   *\n   * @param int $type\n   *   The image type represented by a PHP IMAGETYPE_* constant (e.g.\n   *   IMAGETYPE_JPEG).\n   *\n   * @return $this\n   *\/",338],["T_WHITESPACE","\n  ",346],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","setType",347],"(",["T_VARIABLE","$type",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n    ",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_STRING","in_array",348],"(",["T_VARIABLE","$type",348],",",["T_WHITESPACE"," ",348],["T_STATIC","static",348],["T_DOUBLE_COLON","::",348],["T_STRING","supportedTypes",348],"(",")",")",")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n      ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","type",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$type",349],";",["T_WHITESPACE","\n    ",349],"}",["T_WHITESPACE","\n    ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],";",["T_WHITESPACE","\n  ",351],"}",["T_WHITESPACE","\n\n  ",352],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",354],["T_WHITESPACE","\n  ",356],["T_PUBLIC","public",357],["T_WHITESPACE"," ",357],["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],["T_STRING","getMimeType",357],"(",")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n    ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getType",358],"(",")",["T_WHITESPACE"," ",358],"?",["T_WHITESPACE"," ",358],["T_STRING","image_type_to_mime_type",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getType",358],"(",")",")",["T_WHITESPACE"," ",358],":",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","''",358],";",["T_WHITESPACE","\n  ",358],"}",["T_WHITESPACE","\n\n  ",359],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",361],["T_WHITESPACE","\n  ",363],["T_PUBLIC","public",364],["T_WHITESPACE"," ",364],["T_FUNCTION","function",364],["T_WHITESPACE"," ",364],["T_STRING","getRequirements",364],"(",")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n    ",364],["T_VARIABLE","$requirements",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_ARRAY","array",365],"(",")",";",["T_WHITESPACE","\n\n    ",365],["T_VARIABLE","$info",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","gd_info",367],"(",")",";",["T_WHITESPACE","\n    ",367],["T_VARIABLE","$requirements",368],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",368],"]",["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_ARRAY","array",368],"(",["T_WHITESPACE","\n      ",368],["T_CONSTANT_ENCAPSED_STRING","'title'",369],["T_WHITESPACE"," ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],["T_STRING","t",369],"(",["T_CONSTANT_ENCAPSED_STRING","'GD library'",369],")",",",["T_WHITESPACE","\n      ",369],["T_CONSTANT_ENCAPSED_STRING","'value'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$info",370],"[",["T_CONSTANT_ENCAPSED_STRING","'GD Version'",370],"]",",",["T_WHITESPACE","\n    ",370],")",";",["T_WHITESPACE","\n\n    ",371],["T_COMMENT","\/\/ Check for filter and rotate support.\n",373],["T_WHITESPACE","    ",374],["T_IF","if",374],["T_WHITESPACE"," ",374],"(","!",["T_STRING","function_exists",374],"(",["T_CONSTANT_ENCAPSED_STRING","'imagefilter'",374],")",["T_WHITESPACE"," ",374],["T_BOOLEAN_OR","||",374],["T_WHITESPACE"," ",374],"!",["T_STRING","function_exists",374],"(",["T_CONSTANT_ENCAPSED_STRING","'imagerotate'",374],")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n      ",374],["T_VARIABLE","$requirements",375],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",375],"]","[",["T_CONSTANT_ENCAPSED_STRING","'severity'",375],"]",["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","REQUIREMENT_WARNING",375],";",["T_WHITESPACE","\n      ",375],["T_VARIABLE","$requirements",376],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",376],"]","[",["T_CONSTANT_ENCAPSED_STRING","'description'",376],"]",["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_STRING","t",376],"(",["T_CONSTANT_ENCAPSED_STRING","'The GD Library for PHP is enabled, but was compiled without support for functions used by the rotate and desaturate effects. It was probably compiled using the official GD libraries from http:\/\/www.libgd.org instead of the GD library bundled with PHP. You should recompile PHP --with-gd using the bundled GD library. See <a href=\"http:\/\/php.net\/manual\/book.image.php\">the PHP manual<\/a>.'",376],")",";",["T_WHITESPACE","\n    ",376],"}",["T_WHITESPACE","\n\n    ",377],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$requirements",379],";",["T_WHITESPACE","\n  ",379],"}",["T_WHITESPACE","\n\n  ",380],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",382],["T_WHITESPACE","\n  ",384],["T_PUBLIC","public",385],["T_WHITESPACE"," ",385],["T_STATIC","static",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","isAvailable",385],"(",")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n    ",385],["T_COMMENT","\/\/ GD2 support is available.\n",386],["T_WHITESPACE","    ",387],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_STRING","function_exists",387],"(",["T_CONSTANT_ENCAPSED_STRING","'imagegd2'",387],")",";",["T_WHITESPACE","\n  ",387],"}",["T_WHITESPACE","\n\n  ",388],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",390],["T_WHITESPACE","\n  ",392],["T_PUBLIC","public",393],["T_WHITESPACE"," ",393],["T_STATIC","static",393],["T_WHITESPACE"," ",393],["T_FUNCTION","function",393],["T_WHITESPACE"," ",393],["T_STRING","getSupportedExtensions",393],"(",")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$extensions",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_ARRAY","array",394],"(",")",";",["T_WHITESPACE","\n    ",394],["T_FOREACH","foreach",395],["T_WHITESPACE"," ",395],"(",["T_STATIC","static",395],["T_DOUBLE_COLON","::",395],["T_STRING","supportedTypes",395],"(",")",["T_WHITESPACE"," ",395],["T_AS","as",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$image_type",395],")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n      ",395],["T_COMMENT","\/\/ @todo Automatically fetch possible extensions for each mime type.\n",396],["T_WHITESPACE","      ",397],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2311679\n",397],["T_WHITESPACE","      ",398],["T_VARIABLE","$extension",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","Unicode",398],["T_DOUBLE_COLON","::",398],["T_STRING","strtolower",398],"(",["T_STRING","image_type_to_extension",398],"(",["T_VARIABLE","$image_type",398],",",["T_WHITESPACE"," ",398],["T_STRING","FALSE",398],")",")",";",["T_WHITESPACE","\n      ",398],["T_VARIABLE","$extensions",399],"[","]",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$extension",399],";",["T_WHITESPACE","\n      ",399],["T_COMMENT","\/\/ Add some known similar extensions.\n",400],["T_WHITESPACE","      ",401],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$extension",401],["T_WHITESPACE"," ",401],["T_IS_IDENTICAL","===",401],["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$extensions",402],"[","]",["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'jpg'",402],";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$extensions",403],"[","]",["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'jpe'",403],";",["T_WHITESPACE","\n      ",403],"}",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n    ",405],["T_RETURN","return",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$extensions",406],";",["T_WHITESPACE","\n  ",406],"}",["T_WHITESPACE","\n\n  ",407],["T_DOC_COMMENT","\/**\n   * Returns the IMAGETYPE_xxx constant for the given extension.\n   *\n   * This is the reverse of the image_type_to_extension() function.\n   *\n   * @param string $extension\n   *   The extension to get the IMAGETYPE_xxx constant for.\n   *\n   * @return int\n   *   The IMAGETYPE_xxx constant for the given extension, or IMAGETYPE_UNKNOWN\n   *   for unsupported extensions.\n   *\n   * @see image_type_to_extension()\n   *\/",409],["T_WHITESPACE","\n  ",422],["T_PUBLIC","public",423],["T_WHITESPACE"," ",423],["T_FUNCTION","function",423],["T_WHITESPACE"," ",423],["T_STRING","extensionToImageType",423],"(",["T_VARIABLE","$extension",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n    ",423],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_STRING","in_array",424],"(",["T_VARIABLE","$extension",424],",",["T_WHITESPACE"," ",424],"[",["T_CONSTANT_ENCAPSED_STRING","'jpe'",424],",",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'jpg'",424],"]",")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n      ",424],["T_VARIABLE","$extension",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",425],";",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n    ",426],["T_FOREACH","foreach",427],["T_WHITESPACE"," ",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","supportedTypes",427],"(",")",["T_WHITESPACE"," ",427],["T_AS","as",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$type",427],")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n      ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_STRING","image_type_to_extension",428],"(",["T_VARIABLE","$type",428],",",["T_WHITESPACE"," ",428],["T_STRING","FALSE",428],")",["T_WHITESPACE"," ",428],["T_IS_IDENTICAL","===",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$extension",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n        ",428],["T_RETURN","return",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$type",429],";",["T_WHITESPACE","\n      ",429],"}",["T_WHITESPACE","\n    ",430],"}",["T_WHITESPACE","\n    ",431],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_STRING","IMAGETYPE_UNKNOWN",432],";",["T_WHITESPACE","\n  ",432],"}",["T_WHITESPACE","\n\n  ",433],["T_DOC_COMMENT","\/**\n   * Returns a list of image types supported by the toolkit.\n   *\n   * @return array\n   *   An array of available image types. An image type is represented by a PHP\n   *   IMAGETYPE_* constant (e.g. IMAGETYPE_JPEG, IMAGETYPE_PNG, etc.).\n   *\/",435],["T_WHITESPACE","\n  ",441],["T_PROTECTED","protected",442],["T_WHITESPACE"," ",442],["T_STATIC","static",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","supportedTypes",442],"(",")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n    ",442],["T_RETURN","return",443],["T_WHITESPACE"," ",443],["T_ARRAY","array",443],"(",["T_STRING","IMAGETYPE_PNG",443],",",["T_WHITESPACE"," ",443],["T_STRING","IMAGETYPE_JPEG",443],",",["T_WHITESPACE"," ",443],["T_STRING","IMAGETYPE_GIF",443],")",";",["T_WHITESPACE","\n  ",443],"}",["T_WHITESPACE","\n\n",444],"}",["T_WHITESPACE","\n",446]]
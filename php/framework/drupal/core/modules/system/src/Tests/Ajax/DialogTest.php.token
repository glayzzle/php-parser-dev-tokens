[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Ajax",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ajax_test",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Controller",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AjaxTestController",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EventSubscriber",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MainContentViewSubscriber",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Form",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FormBuilderInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Url",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Performs tests on opening and manipulating dialogs via AJAX commands.\n *\n * @group Ajax\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","DialogTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","AjaxTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_STATIC","static",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$modules",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_ARRAY","array",22],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_test'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'ajax_forms_test'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'contact'",22],")",";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Test sending non-JS and AJAX requests to open and manipulate modals.\n   *\/",24],["T_WHITESPACE","\n  ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","testDialog",27],"(",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalLogin",28],"(",["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalCreateUser",28],"(",["T_ARRAY","array",28],"(",["T_CONSTANT_ENCAPSED_STRING","'administer contact forms'",28],")",")",")",";",["T_WHITESPACE","\n    ",28],["T_COMMENT","\/\/ Ensure the elements render without notices or exceptions.\n",29],["T_WHITESPACE","    ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","drupalGet",30],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog'",30],")",";",["T_WHITESPACE","\n\n    ",30],["T_COMMENT","\/\/ Set up variables for this test.\n",32],["T_WHITESPACE","    ",33],["T_VARIABLE","$dialog_renderable",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","AjaxTestController",33],["T_DOUBLE_COLON","::",33],["T_STRING","dialogContents",33],"(",")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$dialog_contents",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Drupal",34],["T_DOUBLE_COLON","::",34],["T_STRING","service",34],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",34],")",["T_OBJECT_OPERATOR","->",34],["T_STRING","renderRoot",34],"(",["T_VARIABLE","$dialog_renderable",34],")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$modal_expected_response",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'command'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'openDialog'",36],",",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'selector'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'#drupal-modal'",37],",",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'settings'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_STRING","NULL",38],",",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","'data'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$dialog_contents",39],",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'dialogOptions'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",["T_WHITESPACE","\n        ",40],["T_CONSTANT_ENCAPSED_STRING","'modal'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_STRING","TRUE",41],",",["T_WHITESPACE","\n        ",41],["T_CONSTANT_ENCAPSED_STRING","'title'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'AJAX Dialog & contents'",42],",",["T_WHITESPACE","\n      ",42],")",",",["T_WHITESPACE","\n    ",43],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$form_expected_response",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'command'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'openDialog'",46],",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'selector'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'#drupal-modal'",47],",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'settings'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_STRING","NULL",48],",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'dialogOptions'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'modal'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_STRING","TRUE",50],",",["T_WHITESPACE","\n        ",50],["T_CONSTANT_ENCAPSED_STRING","'title'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Ajax Form contents'",51],",",["T_WHITESPACE","\n      ",51],")",",",["T_WHITESPACE","\n    ",52],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$entity_form_expected_response",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'command'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'openDialog'",55],",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'selector'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'#drupal-modal'",56],",",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'settings'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_STRING","NULL",57],",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'dialogOptions'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'modal'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_STRING","TRUE",59],",",["T_WHITESPACE","\n        ",59],["T_CONSTANT_ENCAPSED_STRING","'title'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Add contact form'",60],",",["T_WHITESPACE","\n      ",60],")",",",["T_WHITESPACE","\n    ",61],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$normal_expected_response",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_WHITESPACE","\n      ",63],["T_CONSTANT_ENCAPSED_STRING","'command'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'openDialog'",64],",",["T_WHITESPACE","\n      ",64],["T_CONSTANT_ENCAPSED_STRING","'selector'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'#ajax-test-dialog-wrapper-1'",65],",",["T_WHITESPACE","\n      ",65],["T_CONSTANT_ENCAPSED_STRING","'settings'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_STRING","NULL",66],",",["T_WHITESPACE","\n      ",66],["T_CONSTANT_ENCAPSED_STRING","'data'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$dialog_contents",67],",",["T_WHITESPACE","\n      ",67],["T_CONSTANT_ENCAPSED_STRING","'dialogOptions'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",["T_WHITESPACE","\n        ",68],["T_CONSTANT_ENCAPSED_STRING","'modal'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_STRING","FALSE",69],",",["T_WHITESPACE","\n        ",69],["T_CONSTANT_ENCAPSED_STRING","'title'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'AJAX Dialog & contents'",70],",",["T_WHITESPACE","\n      ",70],")",",",["T_WHITESPACE","\n    ",71],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$no_target_expected_response",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_WHITESPACE","\n      ",73],["T_CONSTANT_ENCAPSED_STRING","'command'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'openDialog'",74],",",["T_WHITESPACE","\n      ",74],["T_CONSTANT_ENCAPSED_STRING","'selector'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'#drupal-dialog-ajax-testdialog-contents'",75],",",["T_WHITESPACE","\n      ",75],["T_CONSTANT_ENCAPSED_STRING","'settings'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_STRING","NULL",76],",",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'data'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$dialog_contents",77],",",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'dialogOptions'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",["T_WHITESPACE","\n        ",78],["T_CONSTANT_ENCAPSED_STRING","'modal'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_STRING","FALSE",79],",",["T_WHITESPACE","\n        ",79],["T_CONSTANT_ENCAPSED_STRING","'title'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'AJAX Dialog & contents'",80],",",["T_WHITESPACE","\n      ",80],")",",",["T_WHITESPACE","\n    ",81],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$close_expected_response",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'command'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'closeDialog'",84],",",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'selector'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'#ajax-test-dialog-wrapper-1'",85],",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'persist'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_STRING","FALSE",86],",",["T_WHITESPACE","\n    ",86],")",";",["T_WHITESPACE","\n\n    ",87],["T_COMMENT","\/\/ Check that requesting a modal dialog without JS goes to a page.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","drupalGet",90],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-contents'",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertRaw",91],"(",["T_VARIABLE","$dialog_contents",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'Non-JS modal dialog page present.'",91],")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Check that requesting a modal dialog with XMLHttpRequest goes to a page.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","drupalGetXHR",94],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-contents'",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertRaw",95],"(",["T_VARIABLE","$dialog_contents",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'Modal dialog page on XMLHttpRequest present.'",95],")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Emulate going to the JS version of the page and check the JSON response.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$ajax_result",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","drupalGetAjax",98],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-contents'",98],",",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_STRING","MainContentViewSubscriber",98],["T_DOUBLE_COLON","::",98],["T_STRING","WRAPPER_FORMAT",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'drupal_modal'",98],")",")",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEqual",99],"(",["T_VARIABLE","$modal_expected_response",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$ajax_result",99],"[",["T_LNUMBER","3",99],"]",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Modal dialog JSON response matches.'",99],")",";",["T_WHITESPACE","\n    ",99],["T_COMMENT","\/\/ Test the HTML escaping of & character.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEqual",101],"(",["T_VARIABLE","$ajax_result",101],"[",["T_LNUMBER","3",101],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dialogOptions'",101],"]","[",["T_CONSTANT_ENCAPSED_STRING","'title'",101],"]",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'AJAX Dialog & contents'",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertNotEqual",102],"(",["T_VARIABLE","$ajax_result",102],"[",["T_LNUMBER","3",102],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dialogOptions'",102],"]","[",["T_CONSTANT_ENCAPSED_STRING","'title'",102],"]",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'AJAX Dialog &amp; contents'",102],")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Check that requesting a \"normal\" dialog without JS goes to a page.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","drupalGet",105],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-contents'",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertRaw",106],"(",["T_VARIABLE","$dialog_contents",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Non-JS normal dialog page present.'",106],")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Emulate going to the JS version of the page and check the JSON response.\n",108],["T_WHITESPACE","    ",109],["T_COMMENT","\/\/ This needs to use WebTestBase::drupalPostAjaxForm() so that the correct\n",109],["T_WHITESPACE","    ",110],["T_COMMENT","\/\/ dialog options are sent.\n",110],["T_WHITESPACE","    ",111],["T_VARIABLE","$ajax_result",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","drupalPostAjaxForm",111],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog'",111],",",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_WHITESPACE","\n        ",111],["T_COMMENT","\/\/ We have to mock a form element to make drupalPost submit from a link.\n",112],["T_WHITESPACE","        ",113],["T_CONSTANT_ENCAPSED_STRING","'textfield'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'test'",113],",",["T_WHITESPACE","\n      ",113],")",",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",")",",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-contents'",114],",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_STRING","MainContentViewSubscriber",114],["T_DOUBLE_COLON","::",114],["T_STRING","WRAPPER_FORMAT",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'drupal_dialog'",114],")",")",",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",")",",",["T_WHITESPACE"," ",114],["T_STRING","NULL",114],",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_WHITESPACE","\n      ",114],["T_CONSTANT_ENCAPSED_STRING","'submit'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_WHITESPACE","\n        ",115],["T_CONSTANT_ENCAPSED_STRING","'dialogOptions[target]'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'ajax-test-dialog-wrapper-1'",116],",",["T_WHITESPACE","\n      ",116],")",["T_WHITESPACE","\n    ",117],")",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertEqual",119],"(",["T_VARIABLE","$normal_expected_response",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$ajax_result",119],"[",["T_LNUMBER","3",119],"]",",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'Normal dialog JSON response matches.'",119],")",";",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ Emulate going to the JS version of the page and check the JSON response.\n",121],["T_WHITESPACE","    ",122],["T_COMMENT","\/\/ This needs to use WebTestBase::drupalPostAjaxForm() so that the correct\n",122],["T_WHITESPACE","    ",123],["T_COMMENT","\/\/ dialog options are sent.\n",123],["T_WHITESPACE","    ",124],["T_VARIABLE","$ajax_result",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","drupalPostAjaxForm",124],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog'",124],",",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_WHITESPACE","\n        ",124],["T_COMMENT","\/\/ We have to mock a form element to make drupalPost submit from a link.\n",125],["T_WHITESPACE","        ",126],["T_CONSTANT_ENCAPSED_STRING","'textfield'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'test'",126],",",["T_WHITESPACE","\n      ",126],")",",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",")",",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-contents'",127],",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_STRING","MainContentViewSubscriber",127],["T_DOUBLE_COLON","::",127],["T_STRING","WRAPPER_FORMAT",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'drupal_dialog'",127],")",")",",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",")",",",["T_WHITESPACE"," ",127],["T_STRING","NULL",127],",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_WHITESPACE","\n      ",127],["T_COMMENT","\/\/ Don't send a target.\n",128],["T_WHITESPACE","      ",129],["T_CONSTANT_ENCAPSED_STRING","'submit'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",")",["T_WHITESPACE","\n    ",129],")",")",";",["T_WHITESPACE","\n    ",130],["T_COMMENT","\/\/ Make sure the selector ID starts with the right string.\n",131],["T_WHITESPACE","    ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assert",132],"(",["T_STRING","strpos",132],"(",["T_VARIABLE","$ajax_result",132],"[",["T_LNUMBER","3",132],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selector'",132],"]",",",["T_WHITESPACE"," ",132],["T_VARIABLE","$no_target_expected_response",132],"[",["T_CONSTANT_ENCAPSED_STRING","'selector'",132],"]",")",["T_WHITESPACE"," ",132],["T_IS_IDENTICAL","===",132],["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'Selector starts with right string.'",132],")",";",["T_WHITESPACE","\n    ",132],["T_UNSET","unset",133],"(",["T_VARIABLE","$ajax_result",133],"[",["T_LNUMBER","3",133],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selector'",133],"]",")",";",["T_WHITESPACE","\n    ",133],["T_UNSET","unset",134],"(",["T_VARIABLE","$no_target_expected_response",134],"[",["T_CONSTANT_ENCAPSED_STRING","'selector'",134],"]",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEqual",135],"(",["T_VARIABLE","$no_target_expected_response",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$ajax_result",135],"[",["T_LNUMBER","3",135],"]",",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'Normal dialog with no target JSON response matches.'",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ Emulate closing the dialog via an AJAX request. There is no non-JS\n",137],["T_WHITESPACE","    ",138],["T_COMMENT","\/\/ version of this test.\n",138],["T_WHITESPACE","    ",139],["T_VARIABLE","$ajax_result",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","drupalGetAjax",139],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-close'",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertEqual",140],"(",["T_VARIABLE","$close_expected_response",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$ajax_result",140],"[",["T_LNUMBER","0",140],"]",",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'Close dialog JSON response matches.'",140],")",";",["T_WHITESPACE","\n\n    ",140],["T_COMMENT","\/\/ Test submitting via a POST request through the button for modals. This\n",142],["T_WHITESPACE","    ",143],["T_COMMENT","\/\/ approach more accurately reflects the real responses by Drupal because\n",143],["T_WHITESPACE","    ",144],["T_COMMENT","\/\/ all of the necessary page variables are emulated.\n",144],["T_WHITESPACE","    ",145],["T_VARIABLE","$ajax_result",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","drupalPostAjaxForm",145],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog'",145],",",["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",")",",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'button1'",145],")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ Check that CSS and JavaScript are \"added\" to the page dynamically.\n",147],["T_WHITESPACE","    ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertTrue",148],"(",["T_STRING","in_array",148],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/drupal.dialog.ajax'",148],",",["T_WHITESPACE"," ",148],["T_STRING","explode",148],"(",["T_CONSTANT_ENCAPSED_STRING","','",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$ajax_result",148],"[",["T_LNUMBER","0",148],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",148],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxPageState'",148],"]","[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",148],"]",")",")",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'core\/drupal.dialog.ajax library is added to the page.'",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$dialog_css_exists",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","strpos",149],"(",["T_VARIABLE","$ajax_result",149],"[",["T_LNUMBER","1",149],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",149],"]",",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'dialog.css'",149],")",["T_WHITESPACE"," ",149],["T_IS_NOT_IDENTICAL","!==",149],["T_WHITESPACE"," ",149],["T_STRING","FALSE",149],";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertTrue",150],"(",["T_VARIABLE","$dialog_css_exists",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'jQuery UI dialog CSS added to the page.'",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$dialog_js_exists",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","strpos",151],"(",["T_VARIABLE","$ajax_result",151],"[",["T_LNUMBER","2",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",151],"]",",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'dialog-min.js'",151],")",["T_WHITESPACE"," ",151],["T_IS_NOT_IDENTICAL","!==",151],["T_WHITESPACE"," ",151],["T_STRING","FALSE",151],";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertTrue",152],"(",["T_VARIABLE","$dialog_js_exists",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'jQuery UI dialog JS added to the page.'",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$dialog_js_exists",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","strpos",153],"(",["T_VARIABLE","$ajax_result",153],"[",["T_LNUMBER","2",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",153],"]",",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'dialog.ajax.js'",153],")",["T_WHITESPACE"," ",153],["T_IS_NOT_IDENTICAL","!==",153],["T_WHITESPACE"," ",153],["T_STRING","FALSE",153],";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertTrue",154],"(",["T_VARIABLE","$dialog_js_exists",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'Drupal dialog JS added to the page.'",154],")",";",["T_WHITESPACE","\n\n    ",154],["T_COMMENT","\/\/ Check that the response matches the expected value.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertEqual",157],"(",["T_VARIABLE","$modal_expected_response",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$ajax_result",157],"[",["T_LNUMBER","4",157],"]",",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'POST request modal dialog JSON response matches.'",157],")",";",["T_WHITESPACE","\n    ",157],["T_COMMENT","\/\/ Test the HTML escaping of & character.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","assertNotEqual",159],"(",["T_VARIABLE","$ajax_result",159],"[",["T_LNUMBER","4",159],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dialogOptions'",159],"]","[",["T_CONSTANT_ENCAPSED_STRING","'title'",159],"]",",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'AJAX Dialog &amp; contents'",159],")",";",["T_WHITESPACE","\n\n    ",159],["T_COMMENT","\/\/ Abbreviated test for \"normal\" dialogs, testing only the difference.\n",161],["T_WHITESPACE","    ",162],["T_VARIABLE","$ajax_result",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","drupalPostAjaxForm",162],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog'",162],",",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",")",",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'button2'",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertEqual",163],"(",["T_VARIABLE","$normal_expected_response",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$ajax_result",163],"[",["T_LNUMBER","4",163],"]",",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'POST request normal dialog JSON response matches.'",163],")",";",["T_WHITESPACE","\n\n    ",163],["T_COMMENT","\/\/ Check that requesting a form dialog without JS goes to a page.\n",165],["T_WHITESPACE","    ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","drupalGet",166],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-form'",166],")",";",["T_WHITESPACE","\n    ",166],["T_COMMENT","\/\/ Check we get a chunk of the code, we can't test the whole form as form\n",167],["T_WHITESPACE","    ",168],["T_COMMENT","\/\/ build id and token with be different.\n",168],["T_WHITESPACE","    ",169],["T_VARIABLE","$form",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","xpath",169],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\/form[@id='ajax-test-form']\"",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","assertTrue",170],"(","!",["T_EMPTY","empty",170],"(",["T_VARIABLE","$form",170],")",",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'Non-JS form page present.'",170],")",";",["T_WHITESPACE","\n\n    ",170],["T_COMMENT","\/\/ Emulate going to the JS version of the form and check the JSON response.\n",172],["T_WHITESPACE","    ",173],["T_VARIABLE","$ajax_result",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","drupalGetAjax",173],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax-test\/dialog-form'",173],",",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_STRING","MainContentViewSubscriber",173],["T_DOUBLE_COLON","::",173],["T_STRING","WRAPPER_FORMAT",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'drupal_modal'",173],")",")",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$expected_ajax_settings",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],"[",["T_WHITESPACE","\n      ",174],["T_CONSTANT_ENCAPSED_STRING","'edit-preview'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],"[",["T_WHITESPACE","\n        ",175],["T_CONSTANT_ENCAPSED_STRING","'callback'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'::preview'",176],",",["T_WHITESPACE","\n        ",176],["T_CONSTANT_ENCAPSED_STRING","'event'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'click'",177],",",["T_WHITESPACE","\n        ",177],["T_CONSTANT_ENCAPSED_STRING","'url'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_STRING","Url",178],["T_DOUBLE_COLON","::",178],["T_STRING","fromRoute",178],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_test.dialog_form'",178],",",["T_WHITESPACE"," ",178],"[","]",",",["T_WHITESPACE"," ",178],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],"[",["T_WHITESPACE","\n            ",178],["T_STRING","MainContentViewSubscriber",179],["T_DOUBLE_COLON","::",179],["T_STRING","WRAPPER_FORMAT",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'drupal_modal'",179],",",["T_WHITESPACE","\n            ",179],["T_STRING","FormBuilderInterface",180],["T_DOUBLE_COLON","::",180],["T_STRING","AJAX_FORM_REQUEST",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_STRING","TRUE",180],",",["T_WHITESPACE","\n          ",180],"]","]",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","toString",181],"(",")",",",["T_WHITESPACE","\n        ",181],["T_CONSTANT_ENCAPSED_STRING","'dialogType'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'ajax'",182],",",["T_WHITESPACE","\n        ",182],["T_CONSTANT_ENCAPSED_STRING","'submit'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],"[",["T_WHITESPACE","\n          ",183],["T_CONSTANT_ENCAPSED_STRING","'_triggering_element_name'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'op'",184],",",["T_WHITESPACE","\n          ",184],["T_CONSTANT_ENCAPSED_STRING","'_triggering_element_value'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'Preview'",185],",",["T_WHITESPACE","\n        ",185],"]",",",["T_WHITESPACE","\n      ",186],"]",",",["T_WHITESPACE","\n    ",187],"]",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","assertEqual",189],"(",["T_VARIABLE","$expected_ajax_settings",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$ajax_result",189],"[",["T_LNUMBER","0",189],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",189],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajax'",189],"]",")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","setRawContent",190],"(",["T_VARIABLE","$ajax_result",190],"[",["T_LNUMBER","3",190],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",190],"]",")",";",["T_WHITESPACE","\n    ",190],["T_COMMENT","\/\/ Remove the data, the form build id and token will never match.\n",191],["T_WHITESPACE","    ",192],["T_UNSET","unset",192],"(",["T_VARIABLE","$ajax_result",192],"[",["T_LNUMBER","3",192],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",192],"]",")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$form",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","xpath",193],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\/form[@id='ajax-test-form']\"",193],")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertTrue",194],"(","!",["T_EMPTY","empty",194],"(",["T_VARIABLE","$form",194],")",",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'Modal dialog JSON contains form.'",194],")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertEqual",195],"(",["T_VARIABLE","$form_expected_response",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$ajax_result",195],"[",["T_LNUMBER","3",195],"]",")",";",["T_WHITESPACE","\n\n    ",195],["T_COMMENT","\/\/ Check that requesting an entity form dialog without JS goes to a page.\n",197],["T_WHITESPACE","    ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","drupalGet",198],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/contact\/add'",198],")",";",["T_WHITESPACE","\n    ",198],["T_COMMENT","\/\/ Check we get a chunk of the code, we can't test the whole form as form\n",199],["T_WHITESPACE","    ",200],["T_COMMENT","\/\/ build id and token with be different.\n",200],["T_WHITESPACE","    ",201],["T_VARIABLE","$form",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","xpath",201],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\/form[@id='contact-form-add-form']\"",201],")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","assertTrue",202],"(","!",["T_EMPTY","empty",202],"(",["T_VARIABLE","$form",202],")",",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'Non-JS entity form page present.'",202],")",";",["T_WHITESPACE","\n\n    ",202],["T_COMMENT","\/\/ Emulate going to the JS version of the form and check the JSON response.\n",204],["T_WHITESPACE","    ",205],["T_VARIABLE","$ajax_result",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","drupalGetAjax",205],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/contact\/add'",205],",",["T_WHITESPACE"," ",205],["T_ARRAY","array",205],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_ARRAY","array",205],"(",["T_STRING","MainContentViewSubscriber",205],["T_DOUBLE_COLON","::",205],["T_STRING","WRAPPER_FORMAT",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'drupal_modal'",205],")",")",")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","setRawContent",206],"(",["T_VARIABLE","$ajax_result",206],"[",["T_LNUMBER","3",206],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",206],"]",")",";",["T_WHITESPACE","\n    ",206],["T_COMMENT","\/\/ Remove the data, the form build id and token will never match.\n",207],["T_WHITESPACE","    ",208],["T_UNSET","unset",208],"(",["T_VARIABLE","$ajax_result",208],"[",["T_LNUMBER","3",208],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",208],"]",")",";",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$form",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","xpath",209],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\/form[@id='contact-form-add-form']\"",209],")",";",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","assertTrue",210],"(","!",["T_EMPTY","empty",210],"(",["T_VARIABLE","$form",210],")",",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'Modal dialog JSON contains entity form.'",210],")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","assertEqual",211],"(",["T_VARIABLE","$entity_form_expected_response",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$ajax_result",211],"[",["T_LNUMBER","3",211],"]",")",";",["T_WHITESPACE","\n  ",211],"}",["T_WHITESPACE","\n\n",212],"}",["T_WHITESPACE","\n",214]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Module",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","simpletest",5],["T_NS_SEPARATOR","\\",5],["T_STRING","WebTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests the installation of modules.\n *\n * @group Module\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","ExperimentalModuleTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","WebTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n\n  ",12],["T_DOC_COMMENT","\/**\n   * The admin user.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$adminUser",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","setUp",25],"(",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_STRING","parent",26],["T_DOUBLE_COLON","::",26],["T_STRING","setUp",26],"(",")",";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","adminUser",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","drupalCreateUser",27],"(","[",["T_CONSTANT_ENCAPSED_STRING","'access administration pages'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'administer modules'",27],"]",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalLogin",28],"(",["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","adminUser",28],")",";",["T_WHITESPACE","\n  ",28],"}",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Tests installing experimental modules and dependencies in the UI.\n   *\/",31],["T_WHITESPACE","\n  ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","testExperimentalConfirmForm",34],"(",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\n    ",34],["T_COMMENT","\/\/ First, test installing a non-experimental module with no dependencies.\n",36],["T_WHITESPACE","    ",37],["T_COMMENT","\/\/ There should be no confirmation form and no experimental module warning.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$edit",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],"[","]",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$edit",39],"[",["T_CONSTANT_ENCAPSED_STRING","\"modules[Testing][test_page_test][enable]\"",39],"]",["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","TRUE",39],";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","drupalPostForm",40],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules'",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$edit",40],",",["T_WHITESPACE"," ",40],["T_STRING","t",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Install'",40],")",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertText",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Module Test page has been enabled.'",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertNoText",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Experimental modules are provided for testing purposes only.'",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Uninstall the module.\n",44],["T_WHITESPACE","    ",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Drupal",45],["T_DOUBLE_COLON","::",45],["T_STRING","service",45],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","uninstall",45],"(","[",["T_CONSTANT_ENCAPSED_STRING","'test_page_test'",45],"]",")",";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ Next, test installing an experimental module with no dependencies.\n",47],["T_WHITESPACE","    ",48],["T_COMMENT","\/\/ There should be a confirmation form with an experimental warning, but no\n",48],["T_WHITESPACE","    ",49],["T_COMMENT","\/\/ list of dependencies.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$edit",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],"[","]",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$edit",51],"[",["T_CONSTANT_ENCAPSED_STRING","\"modules[Core (Experimental)][experimental_module_test][enable]\"",51],"]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","TRUE",51],";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","drupalPostForm",52],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules'",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$edit",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Install'",52],")",";",["T_WHITESPACE","\n\n    ",52],["T_COMMENT","\/\/ The module should not be enabled and there should be a warning and a\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/ list of the experimental modules with only this one.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertNoText",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Experimental Test has been enabled.'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertText",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Experimental modules are provided for testing purposes only.'",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertText",58],"(",["T_CONSTANT_ENCAPSED_STRING","'The following modules are experimental: Experimental Test'",58],")",";",["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/\/ There should be no message about enabling dependencies.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertNoText",61],"(",["T_CONSTANT_ENCAPSED_STRING","'You must enable'",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Enable the module and confirm that it worked.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","drupalPostForm",64],"(",["T_STRING","NULL",64],",",["T_WHITESPACE"," ",64],"[","]",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Continue'",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertText",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Experimental Test has been enabled.'",65],")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ Uninstall the module.\n",67],["T_WHITESPACE","    ",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Drupal",68],["T_DOUBLE_COLON","::",68],["T_STRING","service",68],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","uninstall",68],"(","[",["T_CONSTANT_ENCAPSED_STRING","'experimental_module_test'",68],"]",")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Test enabling a module that is not itself experimental, but that depends\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ on an experimental module.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$edit",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[","]",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$edit",73],"[",["T_CONSTANT_ENCAPSED_STRING","\"modules[Testing][experimental_module_dependency_test][enable]\"",73],"]",["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","TRUE",73],";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","drupalPostForm",74],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules'",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$edit",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'Install'",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ The module should not be enabled and there should be a warning and a\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ list of the experimental modules with only this one.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertNoText",78],"(",["T_CONSTANT_ENCAPSED_STRING","'2 modules have been enabled: Experimental Dependency Test, Experimental Test'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertText",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Experimental modules are provided for testing purposes only.'",79],")",";",["T_WHITESPACE","\n\n    ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertText",81],"(",["T_CONSTANT_ENCAPSED_STRING","'The following modules are experimental: Experimental Test'",81],")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Ensure the non-experimental module is not listed as experimental.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertNoText",84],"(",["T_CONSTANT_ENCAPSED_STRING","'The following modules are experimental: Experimental Test, Experimental Dependency Test'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertNoText",85],"(",["T_CONSTANT_ENCAPSED_STRING","'The following modules are experimental: Experimental Dependency Test'",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ There should be a message about enabling dependencies.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertText",88],"(",["T_CONSTANT_ENCAPSED_STRING","'You must enable the Experimental Test module to install Experimental Dependency Test'",88],")",";",["T_WHITESPACE","\n\n    ",88],["T_COMMENT","\/\/ Enable the module and confirm that it worked.\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","drupalPostForm",91],"(",["T_STRING","NULL",91],",",["T_WHITESPACE"," ",91],"[","]",",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'Continue'",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertText",92],"(",["T_CONSTANT_ENCAPSED_STRING","'2 modules have been enabled: Experimental Dependency Test, Experimental Test'",92],")",";",["T_WHITESPACE","\n\n    ",92],["T_COMMENT","\/\/ Uninstall the modules.\n",94],["T_WHITESPACE","    ",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Drupal",95],["T_DOUBLE_COLON","::",95],["T_STRING","service",95],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",95],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","uninstall",95],"(","[",["T_CONSTANT_ENCAPSED_STRING","'experimental_module_test'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'experimental_module_dependency_test'",95],"]",")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Finally, check both the module and its experimental dependency. There is\n",97],["T_WHITESPACE","    ",98],["T_COMMENT","\/\/ still a warning about experimental modules, but no message about\n",98],["T_WHITESPACE","    ",99],["T_COMMENT","\/\/ dependencies, since the user specifically enabled the dependency.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$edit",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"[","]",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$edit",101],"[",["T_CONSTANT_ENCAPSED_STRING","\"modules[Core (Experimental)][experimental_module_test][enable]\"",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","TRUE",101],";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$edit",102],"[",["T_CONSTANT_ENCAPSED_STRING","\"modules[Testing][experimental_module_dependency_test][enable]\"",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","TRUE",102],";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","drupalPostForm",103],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$edit",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'Install'",103],")",";",["T_WHITESPACE","\n\n    ",103],["T_COMMENT","\/\/ The module should not be enabled and there should be a warning and a\n",105],["T_WHITESPACE","    ",106],["T_COMMENT","\/\/ list of the experimental modules with only this one.\n",106],["T_WHITESPACE","    ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertNoText",107],"(",["T_CONSTANT_ENCAPSED_STRING","'2 modules have been enabled: Experimental Dependency Test, Experimental Test'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertText",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Experimental modules are provided for testing purposes only.'",108],")",";",["T_WHITESPACE","\n\n    ",108],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertText",110],"(",["T_CONSTANT_ENCAPSED_STRING","'The following modules are experimental: Experimental Test'",110],")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Ensure the non-experimental module is not listed as experimental.\n",112],["T_WHITESPACE","    ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertNoText",113],"(",["T_CONSTANT_ENCAPSED_STRING","'The following modules are experimental: Experimental Test, Experimental Dependency Test'",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertNoText",114],"(",["T_CONSTANT_ENCAPSED_STRING","'The following modules are experimental: Experimental Dependency Test'",114],")",";",["T_WHITESPACE","\n\n    ",114],["T_COMMENT","\/\/ There should be no message about enabling dependencies.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertNoText",117],"(",["T_CONSTANT_ENCAPSED_STRING","'You must enable'",117],")",";",["T_WHITESPACE","\n\n    ",117],["T_COMMENT","\/\/ Enable the module and confirm that it worked.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","drupalPostForm",120],"(",["T_STRING","NULL",120],",",["T_WHITESPACE"," ",120],"[","]",",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'Continue'",120],")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertText",121],"(",["T_CONSTANT_ENCAPSED_STRING","'2 modules have been enabled: Experimental Test, Experimental Dependency Test'",121],")",";",["T_WHITESPACE","\n\n    ",121],["T_COMMENT","\/\/ Try to enable an experimental module that can not be due to\n",123],["T_WHITESPACE","    ",124],["T_COMMENT","\/\/ hook_requirements().\n",124],["T_WHITESPACE","    ",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Drupal",125],["T_DOUBLE_COLON","::",125],["T_STRING","state",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","set",125],"(",["T_CONSTANT_ENCAPSED_STRING","'experimental_module_requirements_test_requirements'",125],",",["T_WHITESPACE"," ",125],["T_STRING","TRUE",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$edit",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],"[","]",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$edit",127],"[",["T_CONSTANT_ENCAPSED_STRING","\"modules[Core (Experimental)][experimental_module_requirements_test][enable]\"",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","TRUE",127],";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","drupalPostForm",128],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$edit",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'Install'",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertUrl",129],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules'",129],",",["T_WHITESPACE"," ",129],"[","]",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'If the module can not be installed we are not taken to the confirm form.'",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertText",130],"(",["T_CONSTANT_ENCAPSED_STRING","'The Experimental Test Requirements module can not be installed.'",130],")",";",["T_WHITESPACE","\n  ",130],"}",["T_WHITESPACE","\n\n",131],"}",["T_WHITESPACE","\n",133]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Update",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Render",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FormattableMarkup",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests hook_post_update().\n *\n * @group Update\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","UpdatePostUpdateTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","UpdatePathTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","setDatabaseDumpFiles",17],"(",")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n    ",17],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","databaseDumpFiles",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],"[",["T_WHITESPACE","\n      ",18],["T_DIR","__DIR__",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/tests\/fixtures\/update\/drupal-8.bare.standard.php.gz'",19],",",["T_WHITESPACE","\n      ",19],["T_DIR","__DIR__",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/tests\/fixtures\/update\/drupal-8.update-test-postupdate-enabled.php'",20],",",["T_WHITESPACE","\n    ",20],"]",";",["T_WHITESPACE","\n  ",21],"}",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",24],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","doSelectionTest",27],"(",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_STRING","parent",28],["T_DOUBLE_COLON","::",28],["T_STRING","doSelectionTest",28],"(",")",";",["T_WHITESPACE","\n\n    ",28],["T_COMMENT","\/\/ Ensure that normal and post_update updates are merged together on the\n",30],["T_WHITESPACE","    ",31],["T_COMMENT","\/\/ selection page.\n",31],["T_WHITESPACE","    ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","assertRaw",32],"(",["T_CONSTANT_ENCAPSED_STRING","'<ul><li>8001 -   Normal update_N() function. <\/li><li>First update.<\/li><li>Second update.<\/li><li>Test0 update.<\/li><li>Test1 update.<\/li><li>Testing batch processing in post updates update.<\/li><\/ul>'",32],")",";",["T_WHITESPACE","\n  ",32],"}",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * Tests hook_post_update_NAME().\n   *\/",35],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testPostUpdate",38],"(",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","runUpdates",39],"(",")",";",["T_WHITESPACE","\n\n    ",39],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertRaw",41],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>Update first<\/h3>'",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertRaw",42],"(",["T_CONSTANT_ENCAPSED_STRING","'First update'",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertRaw",43],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>Update second<\/h3>'",43],")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","assertRaw",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Second update'",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertRaw",45],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>Update test1<\/h3>'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertRaw",46],"(",["T_CONSTANT_ENCAPSED_STRING","'Test1 update'",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertRaw",47],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>Update test0<\/h3>'",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertRaw",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Test0 update'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertRaw",49],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>Update test_batch<\/h3>'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertRaw",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Test post update batches'",50],")",";",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/\/ Test state value set by each post update.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$updates",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],"[",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_first'",54],",",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_second'",55],",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_test0'",56],",",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_test1'",57],",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_test_batch-1'",58],",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_test_batch-2'",59],",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_test_batch-3'",60],",",["T_WHITESPACE","\n    ",60],"]",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertIdentical",62],"(",["T_VARIABLE","$updates",62],",",["T_WHITESPACE"," ",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Drupal",62],["T_DOUBLE_COLON","::",62],["T_STRING","state",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'post_update_test_execution'",62],",",["T_WHITESPACE"," ",62],"[","]",")",")",";",["T_WHITESPACE","\n\n    ",62],["T_COMMENT","\/\/ Test post_update key value stores contains a list of the update functions\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ that have run.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$existing_updates",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","array_count_values",66],"(",["T_NS_SEPARATOR","\\",66],["T_STRING","Drupal",66],["T_DOUBLE_COLON","::",66],["T_STRING","keyValue",66],"(",["T_CONSTANT_ENCAPSED_STRING","'post_update'",66],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","get",66],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_updates'",66],")",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$expected_updates",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],"[",["T_WHITESPACE","\n      ",67],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_first'",68],",",["T_WHITESPACE","\n      ",68],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_second'",69],",",["T_WHITESPACE","\n      ",69],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_test1'",70],",",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_test0'",71],",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'update_test_postupdate_post_update_test_batch'",72],",",["T_WHITESPACE","\n    ",72],"]",";",["T_WHITESPACE","\n    ",73],["T_FOREACH","foreach",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$expected_updates",74],["T_WHITESPACE"," ",74],["T_AS","as",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$expected_update",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertEqual",75],"(",["T_VARIABLE","$existing_updates",75],"[",["T_VARIABLE","$expected_update",75],"]",",",["T_WHITESPACE"," ",75],["T_LNUMBER","1",75],",",["T_WHITESPACE"," ",75],["T_NEW","new",75],["T_WHITESPACE"," ",75],["T_STRING","FormattableMarkup",75],"(",["T_CONSTANT_ENCAPSED_STRING","\"@expected_update exists in 'existing_updates' key and only appears once.\"",75],",",["T_WHITESPACE"," ",75],"[",["T_CONSTANT_ENCAPSED_STRING","'@expected_update'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$expected_update",75],"]",")",")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","drupalGet",78],"(",["T_CONSTANT_ENCAPSED_STRING","'update.php\/selection'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertText",79],"(",["T_CONSTANT_ENCAPSED_STRING","'No pending updates.'",79],")",";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n",80],"}",["T_WHITESPACE","\n",82]]
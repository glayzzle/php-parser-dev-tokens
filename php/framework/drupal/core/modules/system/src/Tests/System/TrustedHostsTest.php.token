[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","System",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","simpletest",5],["T_NS_SEPARATOR","\\",5],["T_STRING","WebTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests output on the status overview page.\n *\n * @group system\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","TrustedHostsTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","WebTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","setUp",17],"(",")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n    ",17],["T_STRING","parent",18],["T_DOUBLE_COLON","::",18],["T_STRING","setUp",18],"(",")",";",["T_WHITESPACE","\n\n    ",18],["T_VARIABLE","$admin_user",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","drupalCreateUser",20],"(",["T_ARRAY","array",20],"(",["T_WHITESPACE","\n      ",20],["T_CONSTANT_ENCAPSED_STRING","'administer site configuration'",21],",",["T_WHITESPACE","\n    ",21],")",")",";",["T_WHITESPACE","\n    ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","drupalLogin",23],"(",["T_VARIABLE","$admin_user",23],")",";",["T_WHITESPACE","\n  ",23],"}",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Tests that the status page shows an error when the trusted host setting\n   * is missing from settings.php\n   *\/",26],["T_WHITESPACE","\n  ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","testStatusPageWithoutConfiguration",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","drupalGet",31],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/status'",31],")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","assertResponse",32],"(",["T_LNUMBER","200",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'The status page is reachable.'",32],")",";",["T_WHITESPACE","\n\n    ",32],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","assertRaw",34],"(",["T_STRING","t",34],"(",["T_CONSTANT_ENCAPSED_STRING","'Trusted Host Settings'",34],")",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertRaw",35],"(",["T_STRING","t",35],"(",["T_CONSTANT_ENCAPSED_STRING","'The trusted_host_patterns setting is not configured in settings.php.'",35],")",")",";",["T_WHITESPACE","\n  ",35],"}",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * Tests that the status page shows the trusted patterns from settings.php.\n   *\/",38],["T_WHITESPACE","\n  ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","testStatusPageWithConfiguration",41],"(",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$settings",42],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",42],"]","[",["T_CONSTANT_ENCAPSED_STRING","'trusted_host_patterns'",42],"]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_OBJECT_CAST","(object)",42],["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_WHITESPACE","\n      ",42],["T_CONSTANT_ENCAPSED_STRING","'value'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'^'",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_STRING","preg_quote",43],"(",["T_NS_SEPARATOR","\\",43],["T_STRING","Drupal",43],["T_DOUBLE_COLON","::",43],["T_STRING","request",43],"(",")",["T_OBJECT_OPERATOR","->",43],["T_STRING","getHost",43],"(",")",")",["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'$'",43],")",",",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'required'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_STRING","TRUE",44],",",["T_WHITESPACE","\n    ",44],")",";",["T_WHITESPACE","\n\n    ",45],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","writeSettings",47],"(",["T_VARIABLE","$settings",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","drupalGet",49],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/status'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertResponse",50],"(",["T_LNUMBER","200",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'The status page is reachable.'",50],")",";",["T_WHITESPACE","\n\n    ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertRaw",52],"(",["T_STRING","t",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Trusted Host Settings'",52],")",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertRaw",53],"(",["T_STRING","t",53],"(",["T_CONSTANT_ENCAPSED_STRING","'The trusted_host_patterns setting is set to allow'",53],")",")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * Tests that fake requests have the proper host configured.\n   *\n   * @see \\Drupal\\Core\\Http\\TrustedHostsRequestFactory\n   *\/",56],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testFakeRequests",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","container",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","install",62],"(","[",["T_CONSTANT_ENCAPSED_STRING","'trusted_hosts_test'",62],"]",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","container",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","get",63],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","rebuild",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_VARIABLE","$host",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","container",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'request_stack'",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getCurrentRequest",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getHost",65],"(",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$settings",66],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",66],"]","[",["T_CONSTANT_ENCAPSED_STRING","'trusted_host_patterns'",66],"]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_OBJECT_CAST","(object)",66],["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_WHITESPACE","\n      ",66],["T_CONSTANT_ENCAPSED_STRING","'value'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'^'",67],["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_STRING","preg_quote",67],"(",["T_VARIABLE","$host",67],")",["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'$'",67],")",",",["T_WHITESPACE","\n      ",67],["T_CONSTANT_ENCAPSED_STRING","'required'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_STRING","TRUE",68],",",["T_WHITESPACE","\n    ",68],")",";",["T_WHITESPACE","\n\n    ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","writeSettings",71],"(",["T_VARIABLE","$settings",71],")",";",["T_WHITESPACE","\n\n    ",71],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","drupalGet",73],"(",["T_CONSTANT_ENCAPSED_STRING","'trusted-hosts-test\/fake-request'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertText",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Host: '",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_VARIABLE","$host",74],")",";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * Tests that shortcut module works together with host verification.\n   *\/",77],["T_WHITESPACE","\n  ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","testShortcut",80],"(",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","container",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","get",81],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",81],")",["T_OBJECT_OPERATOR","->",81],["T_STRING","install",81],"(","[",["T_CONSTANT_ENCAPSED_STRING","'block'",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'shortcut'",81],"]",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","rebuildContainer",82],"(",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","container",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","get",83],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",83],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","rebuild",83],"(",")",";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager *\/",85],["T_WHITESPACE","\n    ",85],["T_VARIABLE","$entity_manager",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","container",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","get",86],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$shortcut_storage",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$entity_manager",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getStorage",87],"(",["T_CONSTANT_ENCAPSED_STRING","'shortcut'",87],")",";",["T_WHITESPACE","\n\n    ",87],["T_VARIABLE","$shortcut",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$shortcut_storage",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","create",89],"(","[",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'title'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","randomString",90],"(",")",",",["T_WHITESPACE","\n      ",90],["T_CONSTANT_ENCAPSED_STRING","'link'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'internal:\/admin\/reports\/status'",91],",",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'shortcut_set'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'default'",92],",",["T_WHITESPACE","\n    ",92],"]",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$shortcut_storage",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","save",94],"(",["T_VARIABLE","$shortcut",94],")",";",["T_WHITESPACE","\n\n    ",94],["T_COMMENT","\/\/ Grant the current user access to see the shortcuts.\n",96],["T_WHITESPACE","    ",97],["T_VARIABLE","$role_storage",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$entity_manager",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getStorage",97],"(",["T_CONSTANT_ENCAPSED_STRING","'user_role'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$roles",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","loggedInUser",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getRoles",98],"(",["T_STRING","TRUE",98],")",";",["T_WHITESPACE","\n    ",98],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\RoleInterface $role *\/",99],["T_WHITESPACE","\n    ",99],["T_VARIABLE","$role",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$role_storage",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","load",100],"(",["T_STRING","reset",100],"(",["T_VARIABLE","$roles",100],")",")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$role",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","grantPermission",101],"(",["T_CONSTANT_ENCAPSED_STRING","'access shortcuts'",101],")",["T_OBJECT_OPERATOR","->",101],["T_STRING","save",101],"(",")",";",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","drupalPlaceBlock",103],"(",["T_CONSTANT_ENCAPSED_STRING","'shortcuts'",103],")",";",["T_WHITESPACE","\n\n    ",103],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","drupalGet",105],"(",["T_CONSTANT_ENCAPSED_STRING","''",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertLink",106],"(",["T_VARIABLE","$shortcut",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","label",106],"(",")",")",";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n",107],"}",["T_WHITESPACE","\n",109]]
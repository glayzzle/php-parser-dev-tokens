[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Cache",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Url",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Provides test assertions for testing page-level cache contexts & tags.\n *\n * Can be used by test classes that extend \\Drupal\\simpletest\\WebTestBase.\n *\/",8],["T_WHITESPACE","\n",12],["T_TRAIT","trait",13],["T_WHITESPACE"," ",13],["T_STRING","AssertPageCacheContextsAndTagsTrait",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Enables page caching.\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","enablePageCaching",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$config",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","config",19],"(",["T_CONSTANT_ENCAPSED_STRING","'system.performance'",19],")",";",["T_WHITESPACE","\n    ",19],["T_VARIABLE","$config",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","set",20],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.page.max_age'",20],",",["T_WHITESPACE"," ",20],["T_LNUMBER","300",20],")",";",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$config",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","save",21],"(",")",";",["T_WHITESPACE","\n  ",21],"}",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Gets a specific header value as array.\n   *\n   * @param string $header_name\n   *   The header name.\n   *\n   * @return string[]\n   *   The header value, potentially exploded by spaces.\n   *\/",24],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","getCacheHeaderValues",33],"(",["T_VARIABLE","$header_name",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$header_value",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","drupalGetHeader",34],"(",["T_VARIABLE","$header_name",34],")",";",["T_WHITESPACE","\n    ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_EMPTY","empty",35],"(",["T_VARIABLE","$header_value",35],")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n      ",35],["T_RETURN","return",36],["T_WHITESPACE"," ",36],"[","]",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n    ",37],["T_ELSE","else",38],["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n      ",38],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_STRING","explode",39],"(",["T_CONSTANT_ENCAPSED_STRING","' '",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$header_value",39],")",";",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Asserts whether an expected cache context was present in the last response.\n   *\n   * @param string $expected_cache_context\n   *   The expected cache context.\n   *\/",43],["T_WHITESPACE","\n  ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","assertCacheContext",49],"(",["T_VARIABLE","$expected_cache_context",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$cache_contexts",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","explode",50],"(",["T_CONSTANT_ENCAPSED_STRING","' '",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","drupalGetHeader",50],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Contexts'",50],")",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertTrue",51],"(",["T_STRING","in_array",51],"(",["T_VARIABLE","$expected_cache_context",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$cache_contexts",51],")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","\"'\"",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$expected_cache_context",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","\"' is present in the X-Drupal-Cache-Contexts header.\"",51],")",";",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * Asserts that a cache context was not present in the last response.\n   *\n   * @param string $not_expected_cache_context\n   *   The expected cache context.\n   *\/",54],["T_WHITESPACE","\n  ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","assertNoCacheContext",60],"(",["T_VARIABLE","$not_expected_cache_context",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$cache_contexts",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","explode",61],"(",["T_CONSTANT_ENCAPSED_STRING","' '",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","drupalGetHeader",61],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Contexts'",61],")",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertFalse",62],"(",["T_STRING","in_array",62],"(",["T_VARIABLE","$not_expected_cache_context",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$cache_contexts",62],")",",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","\"'\"",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_VARIABLE","$not_expected_cache_context",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","\"' is not present in the X-Drupal-Cache-Contexts header.\"",62],")",";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Asserts page cache miss, then hit for the given URL; checks cache headers.\n   *\n   * @param \\Drupal\\Core\\Url $url\n   *   The URL to test.\n   * @param string[] $expected_contexts\n   *   The expected cache contexts for the given URL.\n   * @param string[] $expected_tags\n   *   The expected cache tags for the given URL.\n   *\/",65],["T_WHITESPACE","\n  ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","assertPageCacheContextsAndTags",75],"(",["T_STRING","Url",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$url",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$expected_contexts",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$expected_tags",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$absolute_url",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$url",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setAbsolute",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","toString",76],"(",")",";",["T_WHITESPACE","\n    ",76],["T_STRING","sort",77],"(",["T_VARIABLE","$expected_contexts",77],")",";",["T_WHITESPACE","\n    ",77],["T_STRING","sort",78],"(",["T_VARIABLE","$expected_tags",78],")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Assert cache miss + expected cache contexts + tags.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","drupalGet",81],"(",["T_VARIABLE","$absolute_url",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertEqual",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","drupalGetHeader",82],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache'",82],")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'MISS'",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertCacheTags",83],"(",["T_VARIABLE","$expected_tags",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertCacheContexts",84],"(",["T_VARIABLE","$expected_contexts",84],")",";",["T_WHITESPACE","\n\n    ",84],["T_COMMENT","\/\/ Assert cache hit + expected cache contexts + tags.\n",86],["T_WHITESPACE","    ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","drupalGet",87],"(",["T_VARIABLE","$absolute_url",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertCacheTags",88],"(",["T_VARIABLE","$expected_tags",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertCacheContexts",89],"(",["T_VARIABLE","$expected_contexts",89],")",";",["T_WHITESPACE","\n\n    ",89],["T_COMMENT","\/\/ Assert page cache item + expected cache tags.\n",91],["T_WHITESPACE","    ",92],["T_VARIABLE","$cid_parts",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",["T_VARIABLE","$url",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","setAbsolute",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","toString",92],"(",")",",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'html'",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$cid",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","implode",93],"(",["T_CONSTANT_ENCAPSED_STRING","':'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$cid_parts",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$cache_entry",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Drupal",94],["T_DOUBLE_COLON","::",94],["T_STRING","cache",94],"(",["T_CONSTANT_ENCAPSED_STRING","'render'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","get",94],"(",["T_VARIABLE","$cid",94],")",";",["T_WHITESPACE","\n    ",94],["T_STRING","sort",95],"(",["T_VARIABLE","$cache_entry",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","tags",95],")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertEqual",96],"(",["T_VARIABLE","$cache_entry",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","tags",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$expected_tags",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","debugCacheTags",97],"(",["T_VARIABLE","$cache_entry",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","tags",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$expected_tags",97],")",";",["T_WHITESPACE","\n  ",97],"}",["T_WHITESPACE","\n\n  ",98],["T_DOC_COMMENT","\/**\n   * Provides debug information for cache tags.\n   *\n   * @param string[] $actual_tags\n   *   The actual cache tags.\n   * @param string[] $expected_tags\n   *   The expected cache tags.\n   *\/",100],["T_WHITESPACE","\n  ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","debugCacheTags",108],"(",["T_ARRAY","array",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$actual_tags",108],",",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$expected_tags",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n    ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$actual_tags",109],["T_WHITESPACE"," ",109],["T_IS_NOT_IDENTICAL","!==",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$expected_tags",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n      ",109],["T_STRING","debug",110],"(",["T_CONSTANT_ENCAPSED_STRING","'Unwanted cache tags in response: '",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_STRING","implode",110],"(",["T_CONSTANT_ENCAPSED_STRING","','",110],",",["T_WHITESPACE"," ",110],["T_STRING","array_diff",110],"(",["T_VARIABLE","$actual_tags",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$expected_tags",110],")",")",")",";",["T_WHITESPACE","\n      ",110],["T_STRING","debug",111],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing cache tags in response: '",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_STRING","implode",111],"(",["T_CONSTANT_ENCAPSED_STRING","','",111],",",["T_WHITESPACE"," ",111],["T_STRING","array_diff",111],"(",["T_VARIABLE","$expected_tags",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$actual_tags",111],")",")",")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n  ",112],"}",["T_WHITESPACE","\n\n  ",113],["T_DOC_COMMENT","\/**\n   * Ensures that some cache tags are present in the current response.\n   *\n   * @param string[] $expected_tags\n   *   The expected tags.\n   * @param bool $include_default_tags\n   *   (optional) Whether the default cache tags should be included.\n   *\/",115],["T_WHITESPACE","\n  ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","assertCacheTags",123],"(",["T_ARRAY","array",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$expected_tags",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$include_default_tags",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","TRUE",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n    ",123],["T_COMMENT","\/\/ The anonymous role cache tag is only added if the user is anonymous.\n",124],["T_WHITESPACE","    ",125],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$include_default_tags",125],["T_WHITESPACE"," ",125],["T_BOOLEAN_AND","&&",125],["T_WHITESPACE"," ",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Drupal",125],["T_DOUBLE_COLON","::",125],["T_STRING","currentUser",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","isAnonymous",125],"(",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$expected_tags",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","Cache",126],["T_DOUBLE_COLON","::",126],["T_STRING","mergeTags",126],"(",["T_VARIABLE","$expected_tags",126],",",["T_WHITESPACE"," ",126],"[",["T_CONSTANT_ENCAPSED_STRING","'config:user.role.anonymous'",126],"]",")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$actual_tags",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getCacheHeaderValues",128],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",128],")",";",["T_WHITESPACE","\n    ",128],["T_STRING","sort",129],"(",["T_VARIABLE","$expected_tags",129],")",";",["T_WHITESPACE","\n    ",129],["T_STRING","sort",130],"(",["T_VARIABLE","$actual_tags",130],")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertIdentical",131],"(",["T_VARIABLE","$actual_tags",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$expected_tags",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","debugCacheTags",132],"(",["T_VARIABLE","$actual_tags",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$expected_tags",132],")",";",["T_WHITESPACE","\n  ",132],"}",["T_WHITESPACE","\n\n  ",133],["T_DOC_COMMENT","\/**\n   * Ensures that some cache contexts are present in the current response.\n   *\n   * @param string[] $expected_contexts\n   *   The expected cache contexts.\n   * @param string $message\n   *   (optional) A verbose message to output.\n   * @param bool $include_default_contexts\n   *   (optional) Whether the default contexts should automatically be included.\n   *\n   * @return bool\n   *   TRUE if the assertion succeeded, FALSE otherwise.\n   *\/",135],["T_WHITESPACE","\n  ",147],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","assertCacheContexts",148],"(",["T_ARRAY","array",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$expected_contexts",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$message",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","NULL",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$include_default_contexts",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","TRUE",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n    ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$include_default_contexts",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n      ",149],["T_VARIABLE","$default_contexts",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],"[",["T_CONSTANT_ENCAPSED_STRING","'languages:language_interface'",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'theme'",150],"]",";",["T_WHITESPACE","\n      ",150],["T_COMMENT","\/\/ Add the user.permission context to the list of default contexts except\n",151],["T_WHITESPACE","      ",152],["T_COMMENT","\/\/ when user is already there.\n",152],["T_WHITESPACE","      ",153],["T_IF","if",153],["T_WHITESPACE"," ",153],"(","!",["T_STRING","in_array",153],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$expected_contexts",153],")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$default_contexts",154],"[","]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",154],";",["T_WHITESPACE","\n      ",154],"}",["T_WHITESPACE","\n      ",155],["T_VARIABLE","$expected_contexts",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","Cache",156],["T_DOUBLE_COLON","::",156],["T_STRING","mergeContexts",156],"(",["T_VARIABLE","$expected_contexts",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$default_contexts",156],")",";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_VARIABLE","$actual_contexts",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getCacheHeaderValues",159],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Contexts'",159],")",";",["T_WHITESPACE","\n    ",159],["T_STRING","sort",160],"(",["T_VARIABLE","$expected_contexts",160],")",";",["T_WHITESPACE","\n    ",160],["T_STRING","sort",161],"(",["T_VARIABLE","$actual_contexts",161],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$match",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$actual_contexts",162],["T_WHITESPACE"," ",162],["T_IS_IDENTICAL","===",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$expected_contexts",162],";",["T_WHITESPACE","\n    ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(","!",["T_VARIABLE","$match",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n      ",163],["T_STRING","debug",164],"(",["T_CONSTANT_ENCAPSED_STRING","'Unwanted cache contexts in response: '",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_STRING","implode",164],"(",["T_CONSTANT_ENCAPSED_STRING","','",164],",",["T_WHITESPACE"," ",164],["T_STRING","array_diff",164],"(",["T_VARIABLE","$actual_contexts",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$expected_contexts",164],")",")",")",";",["T_WHITESPACE","\n      ",164],["T_STRING","debug",165],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing cache contexts in response: '",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_STRING","implode",165],"(",["T_CONSTANT_ENCAPSED_STRING","','",165],",",["T_WHITESPACE"," ",165],["T_STRING","array_diff",165],"(",["T_VARIABLE","$expected_contexts",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$actual_contexts",165],")",")",")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertIdentical",168],"(",["T_VARIABLE","$actual_contexts",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$expected_contexts",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$message",168],")",";",["T_WHITESPACE","\n\n    ",168],["T_COMMENT","\/\/ For compatibility with both BrowserTestBase and WebTestBase always return\n",170],["T_WHITESPACE","    ",171],["T_COMMENT","\/\/ a boolean.\n",171],["T_WHITESPACE","    ",172],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$match",172],";",["T_WHITESPACE","\n  ",172],"}",["T_WHITESPACE","\n\n  ",173],["T_DOC_COMMENT","\/**\n   * Asserts the max age header.\n   *\n   * @param int $max_age\n   *\/",175],["T_WHITESPACE","\n  ",179],["T_PROTECTED","protected",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","assertCacheMaxAge",180],"(",["T_VARIABLE","$max_age",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$cache_control_header",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","drupalGetHeader",181],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",181],")",";",["T_WHITESPACE","\n    ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_STRING","strpos",182],"(",["T_VARIABLE","$cache_control_header",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'max-age:'",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_VARIABLE","$max_age",182],")",["T_WHITESPACE"," ",182],["T_IS_IDENTICAL","===",182],["T_WHITESPACE"," ",182],["T_STRING","FALSE",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n      ",182],["T_STRING","debug",183],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected max-age:'",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_VARIABLE","$max_age",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'; Response max-age:'",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_VARIABLE","$cache_control_header",183],")",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","assertTrue",185],"(",["T_STRING","strpos",185],"(",["T_VARIABLE","$cache_control_header",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'max-age:'",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$max_age",185],")",")",";",["T_WHITESPACE","\n  ",185],"}",["T_WHITESPACE","\n\n",186],"}",["T_WHITESPACE","\n",188]]
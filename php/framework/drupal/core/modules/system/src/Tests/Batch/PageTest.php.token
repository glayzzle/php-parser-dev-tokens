[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Batch",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","simpletest",5],["T_NS_SEPARATOR","\\",5],["T_STRING","WebTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests the content of the progress page.\n *\n * @group Batch\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","PageTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","WebTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",["T_CONSTANT_ENCAPSED_STRING","'batch_test'",19],")",";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Tests that the batch API progress page uses the correct theme.\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","testBatchProgressPageTheme",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_COMMENT","\/\/ Make sure that the page which starts the batch (an administrative page)\n",25],["T_WHITESPACE","    ",26],["T_COMMENT","\/\/ is using a different theme than would normally be used by the batch API.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","container",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",27],")",["T_OBJECT_OPERATOR","->",27],["T_STRING","install",27],"(",["T_ARRAY","array",27],"(",["T_CONSTANT_ENCAPSED_STRING","'seven'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'bartik'",27],")",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","config",28],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme'",28],")",["T_WHITESPACE","\n      ",28],["T_OBJECT_OPERATOR","->",29],["T_STRING","set",29],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'bartik'",29],")",["T_WHITESPACE","\n      ",29],["T_OBJECT_OPERATOR","->",30],["T_STRING","set",30],"(",["T_CONSTANT_ENCAPSED_STRING","'admin'",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'seven'",30],")",["T_WHITESPACE","\n      ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","save",31],"(",")",";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ Log in as an administrator who can see the administrative theme.\n",33],["T_WHITESPACE","    ",34],["T_VARIABLE","$admin_user",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","drupalCreateUser",34],"(",["T_ARRAY","array",34],"(",["T_CONSTANT_ENCAPSED_STRING","'view the administration theme'",34],")",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","drupalLogin",35],"(",["T_VARIABLE","$admin_user",35],")",";",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/\/ Visit an administrative page that runs a test batch, and check that the\n",36],["T_WHITESPACE","    ",37],["T_COMMENT","\/\/ theme that was used during batch execution (which the batch callback\n",37],["T_WHITESPACE","    ",38],["T_COMMENT","\/\/ function saved as a variable) matches the theme used on the\n",38],["T_WHITESPACE","    ",39],["T_COMMENT","\/\/ administrative page.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","drupalGet",40],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/batch-test\/test-theme'",40],")",";",["T_WHITESPACE","\n    ",40],["T_COMMENT","\/\/ The stack should contain the name of the theme used on the progress\n",41],["T_WHITESPACE","    ",42],["T_COMMENT","\/\/ page.\n",42],["T_WHITESPACE","    ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertEqual",43],"(",["T_STRING","batch_test_stack",43],"(",")",",",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'seven'",43],")",",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'A progressive batch correctly uses the theme of the page that started the batch.'",43],")",";",["T_WHITESPACE","\n  ",43],"}",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * Tests that the batch API progress page shows the title correctly.\n   *\/",46],["T_WHITESPACE","\n  ",48],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","testBatchProgressPageTitle",49],"(",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_COMMENT","\/\/ Visit an administrative page that runs a test batch, and check that the\n",50],["T_WHITESPACE","    ",51],["T_COMMENT","\/\/ title shown during batch execution (which the batch callback function\n",51],["T_WHITESPACE","    ",52],["T_COMMENT","\/\/ saved as a variable) matches the theme used on the administrative page.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","drupalGet",53],"(",["T_CONSTANT_ENCAPSED_STRING","'batch-test\/test-title'",53],")",";",["T_WHITESPACE","\n    ",53],["T_COMMENT","\/\/ The stack should contain the title shown on the progress page.\n",54],["T_WHITESPACE","    ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEqual",55],"(",["T_STRING","batch_test_stack",55],"(",")",",",["T_WHITESPACE"," ",55],"[",["T_CONSTANT_ENCAPSED_STRING","'Batch Test'",55],"]",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'The batch title is shown on the batch page.'",55],")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertText",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Redirection successful.'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Redirection after batch execution is correct.'",56],")",";",["T_WHITESPACE","\n  ",56],"}",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Tests that the progress messages are correct.\n   *\/",59],["T_WHITESPACE","\n  ",61],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","testBatchProgressMessages",62],"(",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n    ",62],["T_COMMENT","\/\/ Go to the initial step only.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","maximumMetaRefreshCount",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_LNUMBER","0",64],";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","drupalGet",65],"(",["T_CONSTANT_ENCAPSED_STRING","'batch-test\/test-title'",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertRaw",66],"(",["T_CONSTANT_ENCAPSED_STRING","'<div class=\"progress__description\">Initializing.<br \/>&nbsp;<\/div>'",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'Initial progress message appears correctly.'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertNoRaw",67],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;nbsp;'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Initial progress message is not double escaped.'",67],")",";",["T_WHITESPACE","\n    ",67],["T_COMMENT","\/\/ Now also go to the next step.\n",68],["T_WHITESPACE","    ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","maximumMetaRefreshCount",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_LNUMBER","1",69],";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","drupalGet",70],"(",["T_CONSTANT_ENCAPSED_STRING","'batch-test\/test-title'",70],")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertRaw",71],"(",["T_CONSTANT_ENCAPSED_STRING","'<div class=\"progress__description\">Completed 1 of 1.<\/div>'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'Progress message for second step appears correctly.'",71],")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n",72],"}",["T_WHITESPACE","\n",74]]
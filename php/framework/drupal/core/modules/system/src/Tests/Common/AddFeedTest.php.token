[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Common",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Url",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Make sure that attaching feeds works correctly with various constructs.\n *\n * @group Common\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","AddFeedTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","WebTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Tests attaching feeds with paths, URLs, and titles.\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","testBasicFeedAddNoTitle",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$path",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","randomMachineName",19],"(",["T_LNUMBER","12",19],")",";",["T_WHITESPACE","\n    ",19],["T_VARIABLE","$external_url",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","randomMachineName",20],"(",["T_LNUMBER","12",20],")",["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'\/'",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","randomMachineName",20],"(",["T_LNUMBER","12",20],")",";",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$fully_qualified_local_url",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","Url",21],["T_DOUBLE_COLON","::",21],["T_STRING","fromUri",21],"(",["T_CONSTANT_ENCAPSED_STRING","'base:'",21],["T_WHITESPACE"," ",21],".",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","randomMachineName",21],"(",["T_LNUMBER","12",21],")",",",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'absolute'",21],["T_WHITESPACE"," ",21],["T_DOUBLE_ARROW","=>",21],["T_WHITESPACE"," ",21],["T_STRING","TRUE",21],")",")",["T_OBJECT_OPERATOR","->",21],["T_STRING","toString",21],"(",")",";",["T_WHITESPACE","\n\n    ",21],["T_VARIABLE","$path_for_title",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","randomMachineName",23],"(",["T_LNUMBER","12",23],")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$external_for_title",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","randomMachineName",24],"(",["T_LNUMBER","12",24],")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'\/'",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","randomMachineName",24],"(",["T_LNUMBER","12",24],")",";",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$fully_qualified_for_title",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","Url",25],["T_DOUBLE_COLON","::",25],["T_STRING","fromUri",25],"(",["T_CONSTANT_ENCAPSED_STRING","'base:'",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","randomMachineName",25],"(",["T_LNUMBER","12",25],")",",",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'absolute'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_STRING","TRUE",25],")",")",["T_OBJECT_OPERATOR","->",25],["T_STRING","toString",25],"(",")",";",["T_WHITESPACE","\n\n    ",25],["T_VARIABLE","$urls",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_ARRAY","array",27],"(",["T_WHITESPACE","\n      ",27],["T_CONSTANT_ENCAPSED_STRING","'path without title'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",["T_WHITESPACE","\n        ",28],["T_CONSTANT_ENCAPSED_STRING","'url'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_STRING","Url",29],["T_DOUBLE_COLON","::",29],["T_STRING","fromUri",29],"(",["T_CONSTANT_ENCAPSED_STRING","'base:'",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_VARIABLE","$path",29],",",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'absolute'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_STRING","TRUE",29],")",")",["T_OBJECT_OPERATOR","->",29],["T_STRING","toString",29],"(",")",",",["T_WHITESPACE","\n        ",29],["T_CONSTANT_ENCAPSED_STRING","'title'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","''",30],",",["T_WHITESPACE","\n      ",30],")",",",["T_WHITESPACE","\n      ",31],["T_CONSTANT_ENCAPSED_STRING","'external URL without title'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_WHITESPACE","\n        ",32],["T_CONSTANT_ENCAPSED_STRING","'url'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$external_url",33],",",["T_WHITESPACE","\n        ",33],["T_CONSTANT_ENCAPSED_STRING","'title'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","''",34],",",["T_WHITESPACE","\n      ",34],")",",",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'local URL without title'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_WHITESPACE","\n        ",36],["T_CONSTANT_ENCAPSED_STRING","'url'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$fully_qualified_local_url",37],",",["T_WHITESPACE","\n        ",37],["T_CONSTANT_ENCAPSED_STRING","'title'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","''",38],",",["T_WHITESPACE","\n      ",38],")",",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'path with title'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",["T_WHITESPACE","\n        ",40],["T_CONSTANT_ENCAPSED_STRING","'url'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_STRING","Url",41],["T_DOUBLE_COLON","::",41],["T_STRING","fromUri",41],"(",["T_CONSTANT_ENCAPSED_STRING","'base:'",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$path_for_title",41],",",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_CONSTANT_ENCAPSED_STRING","'absolute'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_STRING","TRUE",41],")",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","toString",41],"(",")",",",["T_WHITESPACE","\n        ",41],["T_CONSTANT_ENCAPSED_STRING","'title'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","randomMachineName",42],"(",["T_LNUMBER","12",42],")",",",["T_WHITESPACE","\n      ",42],")",",",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'external URL with title'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",["T_WHITESPACE","\n        ",44],["T_CONSTANT_ENCAPSED_STRING","'url'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$external_for_title",45],",",["T_WHITESPACE","\n        ",45],["T_CONSTANT_ENCAPSED_STRING","'title'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","randomMachineName",46],"(",["T_LNUMBER","12",46],")",",",["T_WHITESPACE","\n      ",46],")",",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'local URL with title'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_WHITESPACE","\n        ",48],["T_CONSTANT_ENCAPSED_STRING","'url'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$fully_qualified_for_title",49],",",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'title'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","randomMachineName",50],"(",["T_LNUMBER","12",50],")",",",["T_WHITESPACE","\n      ",50],")",",",["T_WHITESPACE","\n    ",51],")",";",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$build",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",";",["T_WHITESPACE","\n    ",54],["T_FOREACH","foreach",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$urls",55],["T_WHITESPACE"," ",55],["T_AS","as",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$feed_info",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n      ",55],["T_VARIABLE","$build",56],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",56],"]","[",["T_CONSTANT_ENCAPSED_STRING","'feed'",56],"]","[","]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[",["T_VARIABLE","$feed_info",56],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",56],"]",",",["T_WHITESPACE"," ",56],["T_VARIABLE","$feed_info",56],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",56],"]","]",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_COMMENT","\/\/ Use the bare HTML page renderer to render our links.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$renderer",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","container",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'bare_html_page_renderer'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$response",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$renderer",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","renderBarePage",61],"(",["T_VARIABLE","$build",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","''",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'maintenance_page'",61],")",";",["T_WHITESPACE","\n    ",61],["T_COMMENT","\/\/ Glean the content from the response object.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setRawContent",63],"(",["T_VARIABLE","$response",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getContent",63],"(",")",")",";",["T_WHITESPACE","\n    ",63],["T_COMMENT","\/\/ Assert that the content contains the RSS links we specified.\n",64],["T_WHITESPACE","    ",65],["T_FOREACH","foreach",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$urls",65],["T_WHITESPACE"," ",65],["T_AS","as",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$description",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$feed_info",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n      ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertPattern",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","urlToRSSLinkPattern",66],"(",["T_VARIABLE","$feed_info",66],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",66],"]",",",["T_WHITESPACE"," ",66],["T_VARIABLE","$feed_info",66],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",66],"]",")",",",["T_WHITESPACE"," ",66],["T_STRING","format_string",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Found correct feed header for %description'",66],",",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_CONSTANT_ENCAPSED_STRING","'%description'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$description",66],")",")",")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * Creates a pattern representing the RSS feed in the page.\n   *\/",70],["T_WHITESPACE","\n  ",72],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","urlToRSSLinkPattern",73],"(",["T_VARIABLE","$url",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$title",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","''",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_COMMENT","\/\/ Escape any regular expression characters in the URL ('?' is the worst).\n",74],["T_WHITESPACE","    ",75],["T_VARIABLE","$url",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","preg_replace",75],"(",["T_CONSTANT_ENCAPSED_STRING","'\/([+?.*])\/'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'[$0]'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$url",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$generated_pattern",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'%<link +href=\"'",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_VARIABLE","$url",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'\" +rel=\"alternate\" +title=\"'",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_VARIABLE","$title",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'\" +type=\"application\/rss.xml\" *\/>%'",76],";",["T_WHITESPACE","\n    ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$generated_pattern",77],";",["T_WHITESPACE","\n  ",77],"}",["T_WHITESPACE","\n\n  ",78],["T_DOC_COMMENT","\/**\n   * Checks that special characters are correctly escaped.\n   *\n   * @see https:\/\/www.drupal.org\/node\/1211668\n   *\/",80],["T_WHITESPACE","\n  ",84],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","testFeedIconEscaping",85],"(",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$variables",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'#theme'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'feed_icon'",87],",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'#url'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'node'",88],",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'#title'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'<>&\"\\''",89],",",["T_WHITESPACE","\n    ",89],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$text",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Drupal",91],["T_DOUBLE_COLON","::",91],["T_STRING","service",91],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","renderRoot",91],"(",["T_VARIABLE","$variables",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertEqual",92],"(",["T_STRING","trim",92],"(",["T_STRING","strip_tags",92],"(",["T_VARIABLE","$text",92],")",")",",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'Subscribe to &lt;&gt;&amp;&quot;&#039;'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'feed_icon template escapes reserved HTML characters.'",92],")",";",["T_WHITESPACE","\n  ",92],"}",["T_WHITESPACE","\n\n",93],"}",["T_WHITESPACE","\n",95]]
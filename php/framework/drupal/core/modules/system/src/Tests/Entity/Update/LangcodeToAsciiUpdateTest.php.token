[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Update",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","system",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Update",6],["T_NS_SEPARATOR","\\",6],["T_STRING","UpdatePathTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests that the entity langcode fields have been updated to varchar_ascii.\n *\n * @group Entity\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","LangcodeToAsciiUpdateTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","UpdatePathTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","setDatabaseDumpFiles",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","databaseDumpFiles",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],"[",["T_WHITESPACE","\n      ",19],["T_DIR","__DIR__",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/..\/tests\/fixtures\/update\/drupal-8.bare.standard.php.gz'",20],",",["T_WHITESPACE","\n    ",20],"]",";",["T_WHITESPACE","\n  ",21],"}",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Tests that the column collation has been updated on MySQL.\n   *\/",24],["T_WHITESPACE","\n  ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","testLangcodeColumnCollation",27],"(",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_COMMENT","\/\/ Only testable on MySQL.\n",28],["T_WHITESPACE","    ",29],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/301038\n",29],["T_WHITESPACE","    ",30],["T_IF","if",30],["T_WHITESPACE"," ",30],"(",["T_STRING","Database",30],["T_DOUBLE_COLON","::",30],["T_STRING","getConnection",30],"(",")",["T_OBJECT_OPERATOR","->",30],["T_STRING","databaseType",30],"(",")",["T_WHITESPACE"," ",30],["T_IS_NOT_IDENTICAL","!==",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'mysql'",30],")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n      ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","pass",31],"(",["T_CONSTANT_ENCAPSED_STRING","'This test can only run on MySQL'",31],")",";",["T_WHITESPACE","\n      ",31],["T_RETURN","return",32],";",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Check a few different tables.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$tables",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],"[",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'node_field_data'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",37],"]",",",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'users_field_data'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'preferred_langcode'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'preferred_admin_langcode'",38],"]",",",["T_WHITESPACE","\n    ",38],"]",";",["T_WHITESPACE","\n    ",39],["T_FOREACH","foreach",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$tables",40],["T_WHITESPACE"," ",40],["T_AS","as",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$table",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$columns",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n      ",40],["T_FOREACH","foreach",41],["T_WHITESPACE"," ",41],"(",["T_VARIABLE","$columns",41],["T_WHITESPACE"," ",41],["T_AS","as",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$column",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertEqual",42],"(",["T_CONSTANT_ENCAPSED_STRING","'utf8mb4_general_ci'",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getColumnCollation",42],"(",["T_VARIABLE","$table",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$column",42],")",",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Found correct starting collation for '",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_VARIABLE","$table",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'.'",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_VARIABLE","$column",42],")",";",["T_WHITESPACE","\n      ",42],"}",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ Apply updates.\n",46],["T_WHITESPACE","    ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","runUpdates",47],"(",")",";",["T_WHITESPACE","\n\n    ",47],["T_FOREACH","foreach",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$tables",49],["T_WHITESPACE"," ",49],["T_AS","as",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$table",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$columns",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n      ",49],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$columns",50],["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$column",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertEqual",51],"(",["T_CONSTANT_ENCAPSED_STRING","'ascii_general_ci'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getColumnCollation",51],"(",["T_VARIABLE","$table",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$column",51],")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Found correct updated collation for '",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$table",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'.'",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$column",51],")",";",["T_WHITESPACE","\n      ",51],"}",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * Determine the column collation.\n   *\n   * @param string $table\n   *   The table name.\n   * @param string $column\n   *   The column name.\n   *\/",56],["T_WHITESPACE","\n  ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","getColumnCollation",64],"(",["T_VARIABLE","$table",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$column",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$query",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","Database",65],["T_DOUBLE_COLON","::",65],["T_STRING","getConnection",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","query",65],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW FULL COLUMNS FROM {\"",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_VARIABLE","$table",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","\"}\"",65],")",";",["T_WHITESPACE","\n    ",65],["T_WHILE","while",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$row",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$query",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","fetchAssoc",66],"(",")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n      ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$row",67],"[",["T_CONSTANT_ENCAPSED_STRING","'Field'",67],"]",["T_WHITESPACE"," ",67],["T_IS_IDENTICAL","===",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$column",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n        ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$row",68],"[",["T_CONSTANT_ENCAPSED_STRING","'Collation'",68],"]",";",["T_WHITESPACE","\n      ",68],"}",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","fail",71],"(",["T_CONSTANT_ENCAPSED_STRING","'No collation found for '",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_VARIABLE","$table",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'.'",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_VARIABLE","$column",71],")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n",72],"}",["T_WHITESPACE","\n",74]]
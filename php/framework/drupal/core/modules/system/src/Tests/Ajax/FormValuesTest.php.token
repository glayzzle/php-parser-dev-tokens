[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Ajax",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Ajax",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DataCommand",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests that form values are properly delivered to AJAX callbacks.\n *\n * @group Ajax\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","FormValuesTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","AjaxTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n  ",12],["T_PROTECTED","protected",13],["T_WHITESPACE"," ",13],["T_FUNCTION","function",13],["T_WHITESPACE"," ",13],["T_STRING","setUp",13],"(",")",["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n    ",13],["T_STRING","parent",14],["T_DOUBLE_COLON","::",14],["T_STRING","setUp",14],"(",")",";",["T_WHITESPACE","\n\n    ",14],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","drupalLogin",16],"(",["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","drupalCreateUser",16],"(",["T_ARRAY","array",16],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",16],")",")",")",";",["T_WHITESPACE","\n  ",16],"}",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Submits forms with select and checkbox elements via Ajax.\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","testSimpleAjaxFormValue",22],"(",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_COMMENT","\/\/ Verify form values of a select element.\n",23],["T_WHITESPACE","    ",24],["T_FOREACH","foreach",24],["T_WHITESPACE"," ",24],"(",["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'red'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'green'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'blue'",24],")",["T_WHITESPACE"," ",24],["T_AS","as",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$item",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n      ",24],["T_VARIABLE","$edit",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_WHITESPACE","\n        ",25],["T_CONSTANT_ENCAPSED_STRING","'select'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$item",26],",",["T_WHITESPACE","\n      ",26],")",";",["T_WHITESPACE","\n      ",27],["T_VARIABLE","$commands",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalPostAjaxForm",28],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_forms_test_get_form'",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$edit",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'select'",28],")",";",["T_WHITESPACE","\n      ",28],["T_VARIABLE","$expected",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_NEW","new",29],["T_WHITESPACE"," ",29],["T_STRING","DataCommand",29],"(",["T_CONSTANT_ENCAPSED_STRING","'#ajax_selected_color'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'form_state_value_select'",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$item",29],")",";",["T_WHITESPACE","\n      ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","assertCommand",30],"(",["T_VARIABLE","$commands",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$expected",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","render",30],"(",")",",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'Verification of AJAX form values from a selectbox issued with a correct value.'",30],")",";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ Verify form values of a checkbox element.\n",33],["T_WHITESPACE","    ",34],["T_FOREACH","foreach",34],["T_WHITESPACE"," ",34],"(",["T_ARRAY","array",34],"(",["T_STRING","FALSE",34],",",["T_WHITESPACE"," ",34],["T_STRING","TRUE",34],")",["T_WHITESPACE"," ",34],["T_AS","as",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$item",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n      ",34],["T_VARIABLE","$edit",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_WHITESPACE","\n        ",35],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$item",36],",",["T_WHITESPACE","\n      ",36],")",";",["T_WHITESPACE","\n      ",37],["T_VARIABLE","$commands",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","drupalPostAjaxForm",38],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_forms_test_get_form'",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$edit",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",38],")",";",["T_WHITESPACE","\n      ",38],["T_VARIABLE","$expected",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NEW","new",39],["T_WHITESPACE"," ",39],["T_STRING","DataCommand",39],"(",["T_CONSTANT_ENCAPSED_STRING","'#ajax_checkbox_value'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'form_state_value_select'",39],",",["T_WHITESPACE"," ",39],["T_INT_CAST","(int)",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$item",39],")",";",["T_WHITESPACE","\n      ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertCommand",40],"(",["T_VARIABLE","$commands",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$expected",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","render",40],"(",")",",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Verification of AJAX form values from a checkbox issued with a correct value.'",40],")",";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Verify that AJAX elements with invalid callbacks return error code 500.\n",43],["T_WHITESPACE","    ",44],["T_COMMENT","\/\/ Ensure the test error log is empty before these tests.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertNoErrorsLogged",45],"(",")",";",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/\/ We don't need to check for the X-Drupal-Ajax-Token header with these\n",46],["T_WHITESPACE","    ",47],["T_COMMENT","\/\/ invalid requests.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertAjaxHeader",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","FALSE",48],";",["T_WHITESPACE","\n    ",48],["T_FOREACH","foreach",49],["T_WHITESPACE"," ",49],"(",["T_ARRAY","array",49],"(",["T_CONSTANT_ENCAPSED_STRING","'null'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'empty'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'nonexistent'",49],")",["T_WHITESPACE"," ",49],["T_AS","as",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$key",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n      ",49],["T_VARIABLE","$element_name",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'select_'",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_VARIABLE","$key",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'_callback'",50],";",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$edit",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$element_name",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'red'",52],",",["T_WHITESPACE","\n      ",52],")",";",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$commands",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalPostAjaxForm",54],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_forms_test_get_form'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$edit",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$element_name",54],")",";",["T_WHITESPACE","\n      ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertResponse",55],"(",["T_LNUMBER","500",55],")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n    ",56],["T_COMMENT","\/\/ Switch this back to the default.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertAjaxHeader",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","TRUE",58],";",["T_WHITESPACE","\n    ",58],["T_COMMENT","\/\/ The exceptions are expected. Do not interpret them as a test failure.\n",59],["T_WHITESPACE","    ",60],["T_COMMENT","\/\/ Not using File API; a potential error must trigger a PHP warning.\n",60],["T_WHITESPACE","    ",61],["T_STRING","unlink",61],"(",["T_NS_SEPARATOR","\\",61],["T_STRING","Drupal",61],["T_DOUBLE_COLON","::",61],["T_STRING","root",61],"(",")",["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'\/'",61],["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","siteDirectory",61],["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'\/error.log'",61],")",";",["T_WHITESPACE","\n  ",61],"}",["T_WHITESPACE","\n\n",62],"}",["T_WHITESPACE","\n",64]]
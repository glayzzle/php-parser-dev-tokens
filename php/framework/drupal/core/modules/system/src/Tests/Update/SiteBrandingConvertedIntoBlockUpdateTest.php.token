[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Update",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the upgrade path for page site variables being converted into a block.\n *\n * @group system\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","SiteBrandingConvertedIntoBlockUpdateTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","UpdatePathTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",12],["T_WHITESPACE","\n  ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","setDatabaseDumpFiles",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","databaseDumpFiles",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],"[",["T_WHITESPACE","\n      ",16],["T_DIR","__DIR__",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/..\/system\/tests\/fixtures\/update\/drupal-8.bare.standard.php.gz'",17],",",["T_WHITESPACE","\n      ",17],["T_DIR","__DIR__",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/..\/system\/tests\/fixtures\/update\/drupal-8.site-branding-into-block-2005546.php'",18],",",["T_WHITESPACE","\n    ",18],"]",";",["T_WHITESPACE","\n  ",19],"}",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","setUp",25],"(",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_STRING","parent",26],["T_DOUBLE_COLON","::",26],["T_STRING","setUp",26],"(",")",";",["T_WHITESPACE","\n    ",26],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Extension\\ThemeHandlerInterface $theme_handler *\/",27],["T_WHITESPACE","\n    ",27],["T_VARIABLE","$theme_handler",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Drupal",28],["T_DOUBLE_COLON","::",28],["T_STRING","service",28],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",28],")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$theme_handler",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","refreshInfo",29],"(",")",";",["T_WHITESPACE","\n  ",29],"}",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Tests that site branding elements are being converted into blocks.\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","testUpdateHookN",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","runUpdates",36],"(",")",";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/** @var \\Drupal\\block\\BlockInterface $block_storage *\/",38],["T_WHITESPACE","\n    ",38],["T_VARIABLE","$block_storage",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Drupal",39],["T_DOUBLE_COLON","::",39],["T_STRING","entityManager",39],"(",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","getStorage",39],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertRaw",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Because your site has custom theme(s) installed, we had to set the branding block into the content region. Please manually review the block configuration and remove the site name, slogan, and logo variables from your templates.'",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Disable maintenance mode.\n",43],["T_WHITESPACE","    ",44],["T_COMMENT","\/\/ @todo Can be removed once maintenance mode is automatically turned off\n",44],["T_WHITESPACE","    ",45],["T_COMMENT","\/\/ after updates in https:\/\/www.drupal.org\/node\/2435135.\n",45],["T_WHITESPACE","    ",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Drupal",46],["T_DOUBLE_COLON","::",46],["T_STRING","state",46],"(",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","set",46],"(",["T_CONSTANT_ENCAPSED_STRING","'system.maintenance_mode'",46],",",["T_WHITESPACE"," ",46],["T_STRING","FALSE",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ We finished updating so we can log in the user now.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","drupalLogin",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","rootUser",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Site branding is visible on the home page.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","drupalGet",52],"(",["T_CONSTANT_ENCAPSED_STRING","'\/node'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertRaw",53],"(",["T_CONSTANT_ENCAPSED_STRING","'site-branding__logo'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertRaw",54],"(",["T_CONSTANT_ENCAPSED_STRING","'site-branding__name'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertNoRaw",55],"(",["T_CONSTANT_ENCAPSED_STRING","'site-branding__slogan'",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalGet",57],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/list\/bartik'",57],")",";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\StorageInterface $config_storage *\/",59],["T_WHITESPACE","\n    ",59],["T_VARIABLE","$config_storage",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Drupal",60],["T_DOUBLE_COLON","::",60],["T_STRING","service",60],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertTrue",61],"(",["T_VARIABLE","$config_storage",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","exists",61],"(",["T_CONSTANT_ENCAPSED_STRING","'block.block.test_theme_branding'",61],")",",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'Site branding block has been created for the custom theme.'",61],")",";",["T_WHITESPACE","\n  ",61],"}",["T_WHITESPACE","\n\n",62],"}",["T_WHITESPACE","\n",64]]
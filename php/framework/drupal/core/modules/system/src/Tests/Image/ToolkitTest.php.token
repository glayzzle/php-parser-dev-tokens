[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Image",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests image toolkit functions.\n *\n * @group Image\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","ToolkitTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","ToolkitTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n  ",10],["T_DOC_COMMENT","\/**\n   * Check that ImageToolkitManager::getAvailableToolkits() only returns\n   * available toolkits.\n   *\/",11],["T_WHITESPACE","\n  ",14],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","testGetAvailableToolkits",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_VARIABLE","$manager",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","container",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'image.toolkit.manager'",16],")",";",["T_WHITESPACE","\n    ",16],["T_VARIABLE","$toolkits",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$manager",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","getAvailableToolkits",17],"(",")",";",["T_WHITESPACE","\n    ",17],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","assertTrue",18],"(",["T_ISSET","isset",18],"(",["T_VARIABLE","$toolkits",18],"[",["T_CONSTANT_ENCAPSED_STRING","'test'",18],"]",")",",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'The working toolkit was returned.'",18],")",";",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","assertTrue",19],"(",["T_ISSET","isset",19],"(",["T_VARIABLE","$toolkits",19],"[",["T_CONSTANT_ENCAPSED_STRING","'test:derived_toolkit'",19],"]",")",",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'The derived toolkit was returned.'",19],")",";",["T_WHITESPACE","\n    ",19],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","assertFalse",20],"(",["T_ISSET","isset",20],"(",["T_VARIABLE","$toolkits",20],"[",["T_CONSTANT_ENCAPSED_STRING","'broken'",20],"]",")",",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'The toolkit marked unavailable was not returned'",20],")",";",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","assertToolkitOperationsCalled",21],"(",["T_ARRAY","array",21],"(",")",")",";",["T_WHITESPACE","\n  ",21],"}",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Tests Image's methods.\n   *\/",24],["T_WHITESPACE","\n  ",26],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","testLoad",27],"(",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$image",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getImage",28],"(",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","assertTrue",29],"(",["T_STRING","is_object",29],"(",["T_VARIABLE","$image",29],")",",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'Returned an object.'",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","assertEqual",30],"(",["T_VARIABLE","$image",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getToolkitId",30],"(",")",",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'test'",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'Image had toolkit set.'",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","assertToolkitOperationsCalled",31],"(",["T_ARRAY","array",31],"(",["T_CONSTANT_ENCAPSED_STRING","'parseFile'",31],")",")",";",["T_WHITESPACE","\n  ",31],"}",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * Test the image_save() function.\n   *\/",34],["T_WHITESPACE","\n  ",36],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","testSave",37],"(",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertFalse",38],"(",["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","image",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","save",38],"(",")",",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Function returned the expected value.'",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertToolkitOperationsCalled",39],"(",["T_ARRAY","array",39],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",39],")",")",";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Test the image_apply() function.\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","testApply",45],"(",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$data",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",["T_CONSTANT_ENCAPSED_STRING","'p1'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'p2'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_STRING","TRUE",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'p3'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'text'",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertTrue",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","image",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","apply",47],"(",["T_CONSTANT_ENCAPSED_STRING","'my_operation'",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],")",",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'Function returned the expected value.'",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Check that apply was called and with the correct parameters.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertToolkitOperationsCalled",50],"(",["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'apply'",50],")",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$calls",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","imageTestGetAllCalls",51],"(",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertEqual",52],"(",["T_VARIABLE","$calls",52],"[",["T_CONSTANT_ENCAPSED_STRING","'apply'",52],"]","[",["T_LNUMBER","0",52],"]","[",["T_LNUMBER","0",52],"]",",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'my_operation'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","\"'my_operation' was passed correctly as operation\"",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertEqual",53],"(",["T_VARIABLE","$calls",53],"[",["T_CONSTANT_ENCAPSED_STRING","'apply'",53],"]","[",["T_LNUMBER","0",53],"]","[",["T_LNUMBER","1",53],"]","[",["T_CONSTANT_ENCAPSED_STRING","'p1'",53],"]",",",["T_WHITESPACE"," ",53],["T_LNUMBER","1",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'integer parameter p1 was passed correctly'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertEqual",54],"(",["T_VARIABLE","$calls",54],"[",["T_CONSTANT_ENCAPSED_STRING","'apply'",54],"]","[",["T_LNUMBER","0",54],"]","[",["T_LNUMBER","1",54],"]","[",["T_CONSTANT_ENCAPSED_STRING","'p2'",54],"]",",",["T_WHITESPACE"," ",54],["T_STRING","TRUE",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'boolean parameter p2 was passed correctly'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEqual",55],"(",["T_VARIABLE","$calls",55],"[",["T_CONSTANT_ENCAPSED_STRING","'apply'",55],"]","[",["T_LNUMBER","0",55],"]","[",["T_LNUMBER","1",55],"]","[",["T_CONSTANT_ENCAPSED_STRING","'p3'",55],"]",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'text'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'string parameter p3 was passed correctly'",55],")",";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Test the image_apply() function.\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testApplyNoParameters",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertTrue",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","image",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","apply",62],"(",["T_CONSTANT_ENCAPSED_STRING","'my_operation'",62],")",",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Function returned the expected value.'",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_COMMENT","\/\/ Check that apply was called and with the correct parameters.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertToolkitOperationsCalled",65],"(",["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'apply'",65],")",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$calls",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","imageTestGetAllCalls",66],"(",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertEqual",67],"(",["T_VARIABLE","$calls",67],"[",["T_CONSTANT_ENCAPSED_STRING","'apply'",67],"]","[",["T_LNUMBER","0",67],"]","[",["T_LNUMBER","0",67],"]",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'my_operation'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","\"'my_operation' was passed correctly as operation\"",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertEqual",68],"(",["T_VARIABLE","$calls",68],"[",["T_CONSTANT_ENCAPSED_STRING","'apply'",68],"]","[",["T_LNUMBER","0",68],"]","[",["T_LNUMBER","1",68],"]",",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'passing no parameters was handled correctly'",68],")",";",["T_WHITESPACE","\n  ",68],"}",["T_WHITESPACE","\n\n  ",69],["T_DOC_COMMENT","\/**\n   * Tests image toolkit operations inheritance by derivative toolkits.\n   *\/",71],["T_WHITESPACE","\n  ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","testDerivative",74],"(",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$toolkit_manager",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","container",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'image.toolkit.manager'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$operation_manager",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","container",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'image.toolkit.operation.manager'",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_VARIABLE","$toolkit",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$toolkit_manager",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","createInstance",78],"(",["T_CONSTANT_ENCAPSED_STRING","'test:derived_toolkit'",78],")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Load an overwritten and an inherited operation.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$blur",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$operation_manager",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getToolkitOperation",81],"(",["T_VARIABLE","$toolkit",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'blur'",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$invert",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$operation_manager",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getToolkitOperation",82],"(",["T_VARIABLE","$toolkit",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'invert'",82],")",";",["T_WHITESPACE","\n\n    ",82],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertIdentical",84],"(",["T_CONSTANT_ENCAPSED_STRING","'foo_derived'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$blur",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getPluginId",84],"(",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","\"'Blur' operation overwritten by derivative.\"",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertIdentical",85],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$invert",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getPluginId",85],"(",")",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'\"Invert\" operation inherited from base plugin.'",85],")",";",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n",86],"}",["T_WHITESPACE","\n",88]]
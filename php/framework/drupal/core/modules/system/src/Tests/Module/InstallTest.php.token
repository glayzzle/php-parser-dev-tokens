[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Module",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Extension",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ExtensionNameLengthException",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the installation of modules.\n *\n * @group Module\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","InstallTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","WebTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test'",20],")",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Verify that drupal_get_schema() can be used during module installation.\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","testGetSchemaAtInstallTime",25],"(",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_COMMENT","\/\/ @see module_test_install()\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$value",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","db_query",27],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT data FROM {module_test}\"",27],")",["T_OBJECT_OPERATOR","->",27],["T_STRING","fetchField",27],"(",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","assertIdentical",28],"(",["T_VARIABLE","$value",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'varchar'",28],")",";",["T_WHITESPACE","\n  ",28],"}",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Tests enabling User module once more.\n   *\n   * Regression: The installer might enable a module twice due to automatic\n   * dependency resolution. A bug caused the stored weight for User module to\n   * be an array.\n   *\/",31],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testEnableUserTwice",38],"(",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Drupal",39],["T_DOUBLE_COLON","::",39],["T_STRING","service",39],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","install",39],"(",["T_ARRAY","array",39],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",39],")",",",["T_WHITESPACE"," ",39],["T_STRING","FALSE",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertIdentical",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","config",40],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","get",40],"(",["T_CONSTANT_ENCAPSED_STRING","'module.user'",40],")",",",["T_WHITESPACE"," ",40],["T_LNUMBER","0",40],")",";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Tests recorded schema versions of early installed modules in the installer.\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testRequiredModuleSchemaVersions",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$version",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","drupal_get_installed_schema_version",47],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",47],",",["T_WHITESPACE"," ",47],["T_STRING","TRUE",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertTrue",48],"(",["T_VARIABLE","$version",48],["T_WHITESPACE"," ",48],">",["T_WHITESPACE"," ",48],["T_LNUMBER","0",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'System module version is > 0.'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$version",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","drupal_get_installed_schema_version",49],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",49],",",["T_WHITESPACE"," ",49],["T_STRING","TRUE",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertTrue",50],"(",["T_VARIABLE","$version",50],["T_WHITESPACE"," ",50],">",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'User module version is > 0.'",50],")",";",["T_WHITESPACE","\n\n    ",50],["T_VARIABLE","$post_update_key_value",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Drupal",52],["T_DOUBLE_COLON","::",52],["T_STRING","keyValue",52],"(",["T_CONSTANT_ENCAPSED_STRING","'post_update'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$existing_updates",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$post_update_key_value",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","get",53],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_updates'",53],",",["T_WHITESPACE"," ",53],"[","]",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertTrue",54],"(",["T_STRING","in_array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test_post_update_test'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$existing_updates",54],")",")",";",["T_WHITESPACE","\n  ",54],"}",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * Ensures that post update functions are removed on uninstall.\n   *\/",57],["T_WHITESPACE","\n  ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","testUninstallPostUpdateFunctions",60],"(",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Drupal",61],["T_DOUBLE_COLON","::",61],["T_STRING","service",61],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","uninstall",61],"(","[",["T_CONSTANT_ENCAPSED_STRING","'module_test'",61],"]",")",";",["T_WHITESPACE","\n\n    ",61],["T_VARIABLE","$post_update_key_value",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Drupal",63],["T_DOUBLE_COLON","::",63],["T_STRING","keyValue",63],"(",["T_CONSTANT_ENCAPSED_STRING","'post_update'",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$existing_updates",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$post_update_key_value",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_updates'",64],",",["T_WHITESPACE"," ",64],"[","]",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertFalse",65],"(",["T_STRING","in_array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test_post_update_test'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$existing_updates",65],")",")",";",["T_WHITESPACE","\n  ",65],"}",["T_WHITESPACE","\n\n  ",66],["T_DOC_COMMENT","\/**\n   * Tests that an exception is thrown when a module name is too long.\n   *\/",68],["T_WHITESPACE","\n  ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","testModuleNameLength",71],"(",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$module_name",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'invalid_module_name_over_the_maximum_allowed_character_length'",72],";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$message",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","format_string",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception thrown when enabling module %name with a name length over the allowed maximum'",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$module_name",73],")",")",";",["T_WHITESPACE","\n    ",73],["T_TRY","try",74],["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","container",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","install",75],"(",["T_ARRAY","array",75],"(",["T_VARIABLE","$module_name",75],")",")",";",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","fail",76],"(",["T_VARIABLE","$message",76],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n    ",77],["T_CATCH","catch",78],["T_WHITESPACE"," ",78],"(",["T_STRING","ExtensionNameLengthException",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$e",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","pass",79],"(",["T_VARIABLE","$message",79],")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_COMMENT","\/\/ Since for the UI, the submit callback uses FALSE, test that too.\n",82],["T_WHITESPACE","    ",83],["T_VARIABLE","$message",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","format_string",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception thrown when enabling as if via the UI the module %name with a name length over the allowed maximum'",83],",",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$module_name",83],")",")",";",["T_WHITESPACE","\n    ",83],["T_TRY","try",84],["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n      ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","container",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","get",85],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","install",85],"(",["T_ARRAY","array",85],"(",["T_VARIABLE","$module_name",85],")",",",["T_WHITESPACE"," ",85],["T_STRING","FALSE",85],")",";",["T_WHITESPACE","\n      ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","fail",86],"(",["T_VARIABLE","$message",86],")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n    ",87],["T_CATCH","catch",88],["T_WHITESPACE"," ",88],"(",["T_STRING","ExtensionNameLengthException",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$e",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n      ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","pass",89],"(",["T_VARIABLE","$message",89],")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n  ",90],"}",["T_WHITESPACE","\n\n",91],"}",["T_WHITESPACE","\n",93]]
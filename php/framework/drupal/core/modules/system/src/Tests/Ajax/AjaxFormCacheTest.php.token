[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Ajax",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EventSubscriber",5],["T_NS_SEPARATOR","\\",5],["T_STRING","MainContentViewSubscriber",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Form",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FormBuilderInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Url",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests the usage of form caching for AJAX forms.\n *\n * @group Ajax\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","AjaxFormCacheTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","AjaxTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Tests the usage of form cache for AJAX forms.\n   *\/",16],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","testFormCacheUsage",19],"(",")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\KeyValueStore\\KeyValueStoreExpirableInterface $key_value_expirable *\/",20],["T_WHITESPACE","\n    ",20],["T_VARIABLE","$key_value_expirable",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Drupal",21],["T_DOUBLE_COLON","::",21],["T_STRING","service",21],"(",["T_CONSTANT_ENCAPSED_STRING","'keyvalue.expirable'",21],")",["T_OBJECT_OPERATOR","->",21],["T_STRING","get",21],"(",["T_CONSTANT_ENCAPSED_STRING","'form'",21],")",";",["T_WHITESPACE","\n    ",21],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","drupalLogin",22],"(",["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","rootUser",22],")",";",["T_WHITESPACE","\n\n    ",22],["T_COMMENT","\/\/ Ensure that the cache is empty.\n",24],["T_WHITESPACE","    ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","assertEqual",25],"(",["T_LNUMBER","0",25],",",["T_WHITESPACE"," ",25],["T_STRING","count",25],"(",["T_VARIABLE","$key_value_expirable",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","getAll",25],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",25],["T_COMMENT","\/\/ Visit an AJAX form that is not cached, 3 times.\n",27],["T_WHITESPACE","    ",28],["T_VARIABLE","$uncached_form_url",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","Url",28],["T_DOUBLE_COLON","::",28],["T_STRING","fromRoute",28],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_forms_test.commands_form'",28],")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","drupalGet",29],"(",["T_VARIABLE","$uncached_form_url",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","drupalGet",30],"(",["T_VARIABLE","$uncached_form_url",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","drupalGet",31],"(",["T_VARIABLE","$uncached_form_url",31],")",";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ The number of cache entries should not have changed.\n",33],["T_WHITESPACE","    ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","assertEqual",34],"(",["T_LNUMBER","0",34],",",["T_WHITESPACE"," ",34],["T_STRING","count",34],"(",["T_VARIABLE","$key_value_expirable",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getAll",34],"(",")",")",")",";",["T_WHITESPACE","\n  ",34],"}",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Tests AJAX forms in blocks.\n   *\/",37],["T_WHITESPACE","\n  ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","testBlockForms",40],"(",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","container",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","install",41],"(","[",["T_CONSTANT_ENCAPSED_STRING","'block'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'search'",41],"]",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","rebuildContainer",42],"(",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","container",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","get",43],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","rebuild",43],"(",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","drupalLogin",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","rootUser",44],")",";",["T_WHITESPACE","\n\n    ",44],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","drupalPlaceBlock",46],"(",["T_CONSTANT_ENCAPSED_STRING","'search_form_block'",46],",",["T_WHITESPACE"," ",46],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],"-",["T_LNUMBER","5",46],"]",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","drupalPlaceBlock",47],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_forms_test_block'",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","drupalGet",49],"(",["T_CONSTANT_ENCAPSED_STRING","''",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","drupalPostAjaxForm",50],"(",["T_STRING","NULL",50],",",["T_WHITESPACE"," ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'option1'",50],"]",",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'test1'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertOptionSelectedWithDrupalSelector",51],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-test1'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'option1'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertOptionWithDrupalSelector",52],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-test1'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'option3'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","drupalPostForm",53],"(",["T_STRING","NULL",53],",",["T_WHITESPACE"," ",53],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'option1'",53],"]",",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'Submit'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertText",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Submission successful.'",54],")",";",["T_WHITESPACE","\n  ",54],"}",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * Tests AJAX forms on pages with a query string.\n   *\/",57],["T_WHITESPACE","\n  ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","testQueryString",60],"(",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","container",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","get",61],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","install",61],"(","[",["T_CONSTANT_ENCAPSED_STRING","'block'",61],"]",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","drupalLogin",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","rootUser",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","drupalPlaceBlock",64],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_forms_test_block'",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$url",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","Url",66],["T_DOUBLE_COLON","::",66],["T_STRING","fromRoute",66],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.user.canonical'",66],",",["T_WHITESPACE"," ",66],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","rootUser",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","id",66],"(",")","]",",",["T_WHITESPACE"," ",66],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'bar'",66],"]","]",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","drupalGet",67],"(",["T_VARIABLE","$url",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","drupalPostAjaxForm",68],"(",["T_STRING","NULL",68],",",["T_WHITESPACE"," ",68],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'option1'",68],"]",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'test1'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$url",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setOption",69],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",69],",",["T_WHITESPACE"," ",69],"[",["T_WHITESPACE","\n      ",69],["T_CONSTANT_ENCAPSED_STRING","'foo'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'bar'",70],",",["T_WHITESPACE","\n      ",70],["T_STRING","FormBuilderInterface",71],["T_DOUBLE_COLON","::",71],["T_STRING","AJAX_FORM_REQUEST",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_LNUMBER","1",71],",",["T_WHITESPACE","\n      ",71],["T_STRING","MainContentViewSubscriber",72],["T_DOUBLE_COLON","::",72],["T_STRING","WRAPPER_FORMAT",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",72],",",["T_WHITESPACE","\n    ",72],"]",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertUrl",74],"(",["T_VARIABLE","$url",74],")",";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n",75],"}",["T_WHITESPACE","\n",77]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Menu",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Html",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Url",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","simpletest",7],["T_NS_SEPARATOR","\\",7],["T_STRING","WebTestBase",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests local actions derived from router and added\/altered via hooks.\n *\n * @group Menu\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","LocalActionTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","WebTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var string[]\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],"[",["T_CONSTANT_ENCAPSED_STRING","'block'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'menu_test'",21],"]",";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",23],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setUp",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_STRING","parent",27],["T_DOUBLE_COLON","::",27],["T_STRING","setUp",27],"(",")",";",["T_WHITESPACE","\n\n    ",27],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","drupalPlaceBlock",29],"(",["T_CONSTANT_ENCAPSED_STRING","'local_actions_block'",29],")",";",["T_WHITESPACE","\n  ",29],"}",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Tests appearance of local actions.\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","testLocalAction",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalGet",36],"(",["T_CONSTANT_ENCAPSED_STRING","'menu-test-local-action'",36],")",";",["T_WHITESPACE","\n    ",36],["T_COMMENT","\/\/ Ensure that both menu and route based actions are shown.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertLocalAction",38],"(","[",["T_WHITESPACE","\n      ",38],"[",["T_STRING","Url",39],["T_DOUBLE_COLON","::",39],["T_STRING","fromRoute",39],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action4'",39],")",",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'My dynamic-title action'",39],"]",",",["T_WHITESPACE","\n      ",39],"[",["T_STRING","Url",40],["T_DOUBLE_COLON","::",40],["T_STRING","fromRoute",40],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action4'",40],")",",",["T_WHITESPACE"," ",40],["T_STRING","Html",40],["T_DOUBLE_COLON","::",40],["T_STRING","escape",40],"(",["T_CONSTANT_ENCAPSED_STRING","\"<script>alert('Welcome to the jungle!')<\/script>\"",40],")","]",",",["T_WHITESPACE","\n      ",40],"[",["T_STRING","Url",41],["T_DOUBLE_COLON","::",41],["T_STRING","fromRoute",41],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action4'",41],")",",",["T_WHITESPACE"," ",41],["T_STRING","Html",41],["T_DOUBLE_COLON","::",41],["T_STRING","escape",41],"(",["T_CONSTANT_ENCAPSED_STRING","\"<script>alert('Welcome to the derived jungle!')<\/script>\"",41],")","]",",",["T_WHITESPACE","\n      ",41],"[",["T_STRING","Url",42],["T_DOUBLE_COLON","::",42],["T_STRING","fromRoute",42],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action2'",42],")",",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'My hook_menu action'",42],"]",",",["T_WHITESPACE","\n      ",42],"[",["T_STRING","Url",43],["T_DOUBLE_COLON","::",43],["T_STRING","fromRoute",43],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action3'",43],")",",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'My YAML discovery action'",43],"]",",",["T_WHITESPACE","\n      ",43],"[",["T_STRING","Url",44],["T_DOUBLE_COLON","::",44],["T_STRING","fromRoute",44],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action5'",44],")",",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'Title override'",44],"]",",",["T_WHITESPACE","\n    ",44],"]",")",";",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/\/ Test a local action title that changes based on a config value.\n",46],["T_WHITESPACE","    ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","drupalGet",47],"(",["T_STRING","Url",47],["T_DOUBLE_COLON","::",47],["T_STRING","fromRoute",47],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action6'",47],")",")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertLocalAction",48],"(","[",["T_WHITESPACE","\n      ",48],"[",["T_STRING","Url",49],["T_DOUBLE_COLON","::",49],["T_STRING","fromRoute",49],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action5'",49],")",",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Original title'",49],"]",",",["T_WHITESPACE","\n    ",49],"]",")",";",["T_WHITESPACE","\n    ",50],["T_COMMENT","\/\/ Verify the expected cache tag in the response headers.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$header_values",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","explode",52],"(",["T_CONSTANT_ENCAPSED_STRING","' '",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","drupalGetHeader",52],"(",["T_CONSTANT_ENCAPSED_STRING","'x-drupal-cache-tags'",52],")",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertTrue",53],"(",["T_STRING","in_array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'config:menu_test.links.action'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$header_values",53],")",",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","\"Found 'config:menu_test.links.action' cache tag in header\"",53],")",";",["T_WHITESPACE","\n    ",53],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\Config $config *\/",54],["T_WHITESPACE","\n    ",54],["T_VARIABLE","$config",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","container",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","get",55],"(",["T_CONSTANT_ENCAPSED_STRING","'config.factory'",55],")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getEditable",55],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.links.action'",55],")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$config",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","set",56],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'New title'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$config",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","save",57],"(",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","drupalGet",58],"(",["T_STRING","Url",58],["T_DOUBLE_COLON","::",58],["T_STRING","fromRoute",58],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action6'",58],")",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertLocalAction",59],"(","[",["T_WHITESPACE","\n      ",59],"[",["T_STRING","Url",60],["T_DOUBLE_COLON","::",60],["T_STRING","fromRoute",60],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_test.local_action5'",60],")",",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'New title'",60],"]",",",["T_WHITESPACE","\n    ",60],"]",")",";",["T_WHITESPACE","\n  ",61],"}",["T_WHITESPACE","\n\n  ",62],["T_DOC_COMMENT","\/**\n   * Asserts local actions in the page output.\n   *\n   * @param array $actions\n   *   A list of expected action link titles, keyed by the hrefs.\n   *\/",64],["T_WHITESPACE","\n  ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","assertLocalAction",70],"(",["T_ARRAY","array",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$actions",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$elements",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","xpath",71],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/a[contains(@class, :class)]'",71],",",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","':class'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'button-action'",72],",",["T_WHITESPACE","\n    ",72],")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$index",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_LNUMBER","0",74],";",["T_WHITESPACE","\n    ",74],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$actions",75],["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$action",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n      ",75],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Url $url *\/",76],["T_WHITESPACE","\n      ",76],["T_LIST","list",77],"(",["T_VARIABLE","$url",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$title",77],")",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$action",77],";",["T_WHITESPACE","\n      ",77],["T_COMMENT","\/\/ SimpleXML gives us the unescaped text, not the actual escaped markup,\n",78],["T_WHITESPACE","      ",79],["T_COMMENT","\/\/ so use a pattern instead to check the raw content.\n",79],["T_WHITESPACE","      ",80],["T_COMMENT","\/\/ This behaviour is a bug in libxml, see\n",80],["T_WHITESPACE","      ",81],["T_COMMENT","\/\/ https:\/\/bugs.php.net\/bug.php?id=49437.\n",81],["T_WHITESPACE","      ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertPattern",82],"(",["T_CONSTANT_ENCAPSED_STRING","'@<a [^>]*class=\"[^\"]*button-action[^\"]*\"[^>]*>'",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_STRING","preg_quote",82],"(",["T_VARIABLE","$title",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'@'",82],")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'<\/@'",82],")",";",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertEqual",83],"(",["T_VARIABLE","$elements",83],"[",["T_VARIABLE","$index",83],"]","[",["T_CONSTANT_ENCAPSED_STRING","'href'",83],"]",",",["T_WHITESPACE"," ",83],["T_VARIABLE","$url",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","toString",83],"(",")",")",";",["T_WHITESPACE","\n      ",83],["T_VARIABLE","$index",84],["T_INC","++",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n",86],"}",["T_WHITESPACE","\n",88]]
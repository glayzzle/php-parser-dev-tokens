[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Update",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the presence of JavaScript at update.php.\n *\n * @group Update\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","UpdatePathTestJavaScriptTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","UpdatePathTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",12],["T_WHITESPACE","\n  ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","setDatabaseDumpFiles",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","databaseDumpFiles",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],"[",["T_WHITESPACE","\n      ",16],["T_DIR","__DIR__",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/tests\/fixtures\/update\/drupal-8.bare.standard.php.gz'",17],",",["T_WHITESPACE","\n    ",17],"]",";",["T_WHITESPACE","\n  ",18],"}",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Test JavaScript loading at update.php.\n   *\n   * @see ::doPreUpdateTests\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","testJavaScriptLoading",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","runUpdates",27],"(",")",";",["T_WHITESPACE","\n  ",27],"}",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","doSelectionTest",33],"(",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_COMMENT","\/\/ Ensure that at least one JS script has drupalSettings in there.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$scripts",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","xpath",35],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/script'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$found",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","FALSE",36],";",["T_WHITESPACE","\n    ",36],["T_FOREACH","foreach",37],["T_WHITESPACE"," ",37],"(",["T_VARIABLE","$scripts",37],["T_WHITESPACE"," ",37],["T_AS","as",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$script",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n      ",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(","!",["T_ISSET","isset",38],"(",["T_VARIABLE","$script",38],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",38],"]",")",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n        ",38],["T_CONTINUE","continue",39],";",["T_WHITESPACE","\n      ",39],"}",["T_WHITESPACE","\n      ",40],["T_COMMENT","\/\/ Source is a root-relative URL. Transform it to an absolute URL to allow\n",41],["T_WHITESPACE","      ",42],["T_COMMENT","\/\/ file_get_contents() to access the file.\n",42],["T_WHITESPACE","      ",43],["T_VARIABLE","$src",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","preg_replace",43],"(",["T_CONSTANT_ENCAPSED_STRING","'#^'",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_VARIABLE","$GLOBALS",43],"[",["T_CONSTANT_ENCAPSED_STRING","'base_path'",43],"]",["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'(.*)#i'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$GLOBALS",43],"[",["T_CONSTANT_ENCAPSED_STRING","'base_url'",43],"]",["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'\/'",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'${1}'",43],",",["T_WHITESPACE"," ",43],["T_STRING_CAST","(string)",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$script",43],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",43],"]",")",";",["T_WHITESPACE","\n      ",43],["T_VARIABLE","$file_content",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","file_get_contents",44],"(",["T_VARIABLE","$src",44],")",";",["T_WHITESPACE","\n\n      ",44],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_STRING","strpos",46],"(",["T_VARIABLE","$file_content",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'window.drupalSettings ='",46],")",["T_WHITESPACE"," ",46],["T_IS_NOT_IDENTICAL","!==",46],["T_WHITESPACE"," ",46],["T_STRING","FALSE",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$found",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","TRUE",47],";",["T_WHITESPACE","\n        ",47],["T_BREAK","break",48],";",["T_WHITESPACE","\n      ",48],"}",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertTrue",52],"(",["T_VARIABLE","$found",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Ensure that the drupalSettingsLoader.js was included in the JS files'",52],")",";",["T_WHITESPACE","\n  ",52],"}",["T_WHITESPACE","\n\n",53],"}",["T_WHITESPACE","\n",55]]
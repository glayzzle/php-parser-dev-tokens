[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EventSubscriber",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MainContentViewSubscriber",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldStorageDefinitionInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Language",9],["T_NS_SEPARATOR","\\",9],["T_STRING","LanguageInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Url",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldStorageConfig",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","field",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FieldConfig",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","system",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Tests",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Cache",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PageCacheTagsTestBase",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","user",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Entity",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Role",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","user",15],["T_NS_SEPARATOR","\\",15],["T_STRING","RoleInterface",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Provides helper methods for Entity cache tags tests.\n *\/",17],["T_WHITESPACE","\n",19],["T_ABSTRACT","abstract",20],["T_WHITESPACE"," ",20],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","EntityCacheTagsTestBase",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","PageCacheTagsTestBase",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_STATIC","static",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$modules",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'field_test'",27],"]",";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The main entity used for testing.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityInterface\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$entity",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * The entity instance referencing the main entity.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityInterface\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$referencingEntity",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * The entity instance not referencing the main entity.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityInterface\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$nonReferencingEntity",48],";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",50],["T_WHITESPACE","\n  ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","setUp",53],"(",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_STRING","parent",54],["T_DOUBLE_COLON","::",54],["T_STRING","setUp",54],"(",")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Give anonymous users permission to view test entities, so that we can\n",56],["T_WHITESPACE","    ",57],["T_COMMENT","\/\/ verify the cache tags of cached versions of test entity pages.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$user_role",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","Role",58],["T_DOUBLE_COLON","::",58],["T_STRING","load",58],"(",["T_STRING","RoleInterface",58],["T_DOUBLE_COLON","::",58],["T_STRING","ANONYMOUS_ID",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$user_role",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","grantPermission",59],"(",["T_CONSTANT_ENCAPSED_STRING","'view test entity'",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$user_role",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","save",60],"(",")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Create an entity.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","entity",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","createEntity",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ If this is an entity with field UI enabled, then add a configurable\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ field. We will use this configurable field in later tests to ensure that\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ field configuration invalidate render cache entries.\n",67],["T_WHITESPACE","    ",68],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","entity",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getEntityType",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","get",68],"(",["T_CONSTANT_ENCAPSED_STRING","'field_ui_base_route'",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n      ",68],["T_COMMENT","\/\/ Add field, so we can modify the field storage and field entities to\n",69],["T_WHITESPACE","      ",70],["T_COMMENT","\/\/ verify that changes to those indeed clear cache tags.\n",70],["T_WHITESPACE","      ",71],["T_STRING","FieldStorageConfig",71],["T_DOUBLE_COLON","::",71],["T_STRING","create",71],"(",["T_ARRAY","array",71],"(",["T_WHITESPACE","\n        ",71],["T_CONSTANT_ENCAPSED_STRING","'field_name'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'configurable_field'",72],",",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","entity",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getEntityTypeId",73],"(",")",",",["T_WHITESPACE","\n        ",73],["T_CONSTANT_ENCAPSED_STRING","'type'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'test_field'",74],",",["T_WHITESPACE","\n        ",74],["T_CONSTANT_ENCAPSED_STRING","'settings'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",",",["T_WHITESPACE","\n      ",75],")",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","save",76],"(",")",";",["T_WHITESPACE","\n      ",76],["T_STRING","FieldConfig",77],["T_DOUBLE_COLON","::",77],["T_STRING","create",77],"(","[",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","entity",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getEntityTypeId",78],"(",")",",",["T_WHITESPACE","\n        ",78],["T_CONSTANT_ENCAPSED_STRING","'bundle'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","entity",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","bundle",79],"(",")",",",["T_WHITESPACE","\n        ",79],["T_CONSTANT_ENCAPSED_STRING","'field_name'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'configurable_field'",80],",",["T_WHITESPACE","\n        ",80],["T_CONSTANT_ENCAPSED_STRING","'label'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'Configurable field'",81],",",["T_WHITESPACE","\n        ",81],["T_CONSTANT_ENCAPSED_STRING","'settings'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",")",",",["T_WHITESPACE","\n      ",82],"]",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","save",83],"(",")",";",["T_WHITESPACE","\n\n      ",83],["T_COMMENT","\/\/ Reload the entity now that a new field has been added to it.\n",85],["T_WHITESPACE","      ",86],["T_VARIABLE","$storage",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","container",86],["T_WHITESPACE","\n        ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","get",87],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",87],")",["T_WHITESPACE","\n        ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","getStorage",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","entity",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getEntityTypeId",88],"(",")",")",";",["T_WHITESPACE","\n      ",88],["T_VARIABLE","$storage",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","resetCache",89],"(",")",";",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","entity",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$storage",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","load",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","entity",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","id",90],"(",")",")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Create a referencing and a non-referencing entity.\n",93],["T_WHITESPACE","    ",94],["T_LIST","list",94],"(",["T_WHITESPACE","\n      ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","referencingEntity",95],",",["T_WHITESPACE","\n      ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","nonReferencingEntity",96],",",["T_WHITESPACE","\n    ",96],")",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","createReferenceTestEntities",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","entity",97],")",";",["T_WHITESPACE","\n  ",97],"}",["T_WHITESPACE","\n\n  ",98],["T_DOC_COMMENT","\/**\n   * Generates standardized entity cache tags test info.\n   *\n   * @param string $entity_type_label\n   *   The label of the entity type whose cache tags to test.\n   * @param string $group\n   *   The test group.\n   *\n   * @return array\n   *\n   * @see \\Drupal\\simpletest\\TestBase::getInfo()\n   *\/",100],["T_WHITESPACE","\n  ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_STATIC","static",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","generateStandardizedInfo",112],"(",["T_VARIABLE","$entity_type_label",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$group",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n    ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",["T_WHITESPACE","\n      ",113],["T_CONSTANT_ENCAPSED_STRING","'name'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],"\"",["T_VARIABLE","$entity_type_label",114],["T_ENCAPSED_AND_WHITESPACE"," entity cache tags",114],"\"",",",["T_WHITESPACE","\n      ",114],["T_CONSTANT_ENCAPSED_STRING","'description'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],"\"",["T_ENCAPSED_AND_WHITESPACE","Test the ",115],["T_VARIABLE","$entity_type_label",115],["T_ENCAPSED_AND_WHITESPACE"," entity's cache tags.",115],"\"",",",["T_WHITESPACE","\n      ",115],["T_CONSTANT_ENCAPSED_STRING","'group'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$group",116],",",["T_WHITESPACE","\n    ",116],")",";",["T_WHITESPACE","\n  ",117],"}",["T_WHITESPACE","\n\n  ",118],["T_DOC_COMMENT","\/**\n   * Creates the entity to be tested.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface\n   *   The entity to be tested.\n   *\/",120],["T_WHITESPACE","\n  ",125],["T_ABSTRACT","abstract",126],["T_WHITESPACE"," ",126],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","createEntity",126],"(",")",";",["T_WHITESPACE","\n\n  ",126],["T_DOC_COMMENT","\/**\n   * Returns the access cache contexts for the tested entity.\n   *\n   * Only list cache contexts that aren't part of the required cache contexts.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity to be tested, as created by createEntity().\n   *\n   * @return string[]\n   *   An array of the additional cache contexts.\n   *\n   * @see \\Drupal\\Core\\Entity\\EntityAccessControlHandlerInterface\n   *\/",128],["T_WHITESPACE","\n  ",140],["T_PROTECTED","protected",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","getAccessCacheContextsForEntity",141],"(",["T_STRING","EntityInterface",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$entity",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n    ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],"[","]",";",["T_WHITESPACE","\n  ",142],"}",["T_WHITESPACE","\n\n  ",143],["T_DOC_COMMENT","\/**\n   * Returns the additional (non-standard) cache contexts for the tested entity.\n   *\n   * Only list cache contexts that aren't part of the required cache contexts.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity to be tested, as created by createEntity().\n   *\n   * @return string[]\n   *   An array of the additional cache contexts.\n   *\n   * @see \\Drupal\\system\\Tests\\Entity\\EntityCacheTagsTestBase::createEntity()\n   *\/",145],["T_WHITESPACE","\n  ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getAdditionalCacheContextsForEntity",158],"(",["T_STRING","EntityInterface",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$entity",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n    ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],"[","]",";",["T_WHITESPACE","\n  ",159],"}",["T_WHITESPACE","\n\n  ",160],["T_DOC_COMMENT","\/**\n   * Returns the additional (non-standard) cache tags for the tested entity.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity to be tested, as created by createEntity().\n   * @return array\n   *   An array of the additional cache tags.\n   *\n   * @see \\Drupal\\system\\Tests\\Entity\\EntityCacheTagsTestBase::createEntity()\n   *\/",162],["T_WHITESPACE","\n  ",171],["T_PROTECTED","protected",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","getAdditionalCacheTagsForEntity",172],"(",["T_STRING","EntityInterface",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$entity",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n    ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",")",";",["T_WHITESPACE","\n  ",173],"}",["T_WHITESPACE","\n\n  ",174],["T_DOC_COMMENT","\/**\n   * Returns the additional cache tags for the tested entity's listing by type.\n   *\n   * @return string[]\n   *   An array of the additional cache contexts.\n   *\/",176],["T_WHITESPACE","\n  ",181],["T_PROTECTED","protected",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","getAdditionalCacheContextsForEntityListing",182],"(",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n    ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],"[","]",";",["T_WHITESPACE","\n  ",183],"}",["T_WHITESPACE","\n\n  ",184],["T_DOC_COMMENT","\/**\n   * Returns the additional cache tags for the tested entity's listing by type.\n   *\n   * Necessary when there are unavoidable default entities of this type, e.g.\n   * the anonymous and administrator User entities always exist.\n   *\n   * @return array\n   *   An array of the additional cache tags.\n   *\/",186],["T_WHITESPACE","\n  ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","getAdditionalCacheTagsForEntityListing",195],"(",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n    ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],"[","]",";",["T_WHITESPACE","\n  ",196],"}",["T_WHITESPACE","\n\n  ",197],["T_DOC_COMMENT","\/**\n   * Selects the preferred view mode for the given entity type.\n   *\n   * Prefers 'full', picks the first one otherwise, and if none are available,\n   * chooses 'default'.\n   *\/",199],["T_WHITESPACE","\n  ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","selectViewMode",205],"(",["T_VARIABLE","$entity_type",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$view_modes",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Drupal",206],["T_DOUBLE_COLON","::",206],["T_STRING","entityManager",206],"(",")",["T_WHITESPACE","\n      ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","getStorage",207],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_view_mode'",207],")",["T_WHITESPACE","\n      ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","loadByProperties",208],"(",["T_ARRAY","array",208],"(",["T_CONSTANT_ENCAPSED_STRING","'targetEntityType'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$entity_type",208],")",")",";",["T_WHITESPACE","\n\n    ",208],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_EMPTY","empty",210],"(",["T_VARIABLE","$view_modes",210],")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n      ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'default'",211],";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n    ",212],["T_ELSE","else",213],["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n      ",213],["T_COMMENT","\/\/ Prefer the \"full\" display mode.\n",214],["T_WHITESPACE","      ",215],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_ISSET","isset",215],"(",["T_VARIABLE","$view_modes",215],"[",["T_VARIABLE","$entity_type",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'.full'",215],"]",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n        ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'full'",216],";",["T_WHITESPACE","\n      ",216],"}",["T_WHITESPACE","\n      ",217],["T_ELSE","else",218],["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$view_modes",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","array_keys",219],"(",["T_VARIABLE","$view_modes",219],")",";",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_STRING","substr",220],"(",["T_VARIABLE","$view_modes",220],"[",["T_LNUMBER","0",220],"]",",",["T_WHITESPACE"," ",220],["T_STRING","strlen",220],"(",["T_VARIABLE","$entity_type",220],")",["T_WHITESPACE"," ",220],"+",["T_WHITESPACE"," ",220],["T_LNUMBER","1",220],")",";",["T_WHITESPACE","\n      ",220],"}",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n  ",222],"}",["T_WHITESPACE","\n\n  ",223],["T_DOC_COMMENT","\/**\n   * Creates a referencing and a non-referencing entity for testing purposes.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $referenced_entity\n   *   The entity that the referencing entity should reference.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface[]\n   *   An array containing a referencing entity and a non-referencing entity.\n   *\/",225],["T_WHITESPACE","\n  ",233],["T_PROTECTED","protected",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","createReferenceTestEntities",234],"(",["T_VARIABLE","$referenced_entity",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n    ",234],["T_COMMENT","\/\/ All referencing entities should be of the type 'entity_test'.\n",235],["T_WHITESPACE","    ",236],["T_VARIABLE","$entity_type",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",236],";",["T_WHITESPACE","\n\n    ",236],["T_COMMENT","\/\/ Create a \"foo\" bundle for the given entity type.\n",238],["T_WHITESPACE","    ",239],["T_VARIABLE","$bundle",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'foo'",239],";",["T_WHITESPACE","\n    ",239],["T_STRING","entity_test_create_bundle",240],"(",["T_VARIABLE","$bundle",240],",",["T_WHITESPACE"," ",240],["T_STRING","NULL",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$entity_type",240],")",";",["T_WHITESPACE","\n\n    ",240],["T_COMMENT","\/\/ Add a field of the given type to the given entity type's \"foo\" bundle.\n",242],["T_WHITESPACE","    ",243],["T_VARIABLE","$field_name",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$referenced_entity",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getEntityTypeId",243],"(",")",["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'_reference'",243],";",["T_WHITESPACE","\n    ",243],["T_STRING","FieldStorageConfig",244],["T_DOUBLE_COLON","::",244],["T_STRING","create",244],"(",["T_ARRAY","array",244],"(",["T_WHITESPACE","\n      ",244],["T_CONSTANT_ENCAPSED_STRING","'field_name'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$field_name",245],",",["T_WHITESPACE","\n      ",245],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$entity_type",246],",",["T_WHITESPACE","\n      ",246],["T_CONSTANT_ENCAPSED_STRING","'type'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'entity_reference'",247],",",["T_WHITESPACE","\n      ",247],["T_CONSTANT_ENCAPSED_STRING","'cardinality'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_STRING","FieldStorageDefinitionInterface",248],["T_DOUBLE_COLON","::",248],["T_STRING","CARDINALITY_UNLIMITED",248],",",["T_WHITESPACE","\n      ",248],["T_CONSTANT_ENCAPSED_STRING","'settings'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_ARRAY","array",249],"(",["T_WHITESPACE","\n        ",249],["T_CONSTANT_ENCAPSED_STRING","'target_type'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$referenced_entity",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getEntityTypeId",250],"(",")",",",["T_WHITESPACE","\n      ",250],")",",",["T_WHITESPACE","\n    ",251],")",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","save",252],"(",")",";",["T_WHITESPACE","\n    ",252],["T_STRING","FieldConfig",253],["T_DOUBLE_COLON","::",253],["T_STRING","create",253],"(","[",["T_WHITESPACE","\n      ",253],["T_CONSTANT_ENCAPSED_STRING","'field_name'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$field_name",254],",",["T_WHITESPACE","\n      ",254],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$entity_type",255],",",["T_WHITESPACE","\n      ",255],["T_CONSTANT_ENCAPSED_STRING","'bundle'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$bundle",256],",",["T_WHITESPACE","\n      ",256],["T_CONSTANT_ENCAPSED_STRING","'settings'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",["T_WHITESPACE","\n        ",257],["T_CONSTANT_ENCAPSED_STRING","'handler'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'default'",258],",",["T_WHITESPACE","\n        ",258],["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_ARRAY","array",259],"(",["T_WHITESPACE","\n          ",259],["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_ARRAY","array",260],"(",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$referenced_entity",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","bundle",261],"(",")",["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$referenced_entity",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","bundle",261],"(",")",",",["T_WHITESPACE","\n          ",261],")",",",["T_WHITESPACE","\n          ",262],["T_CONSTANT_ENCAPSED_STRING","'sort'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_ARRAY","array",263],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'_none'",263],")",",",["T_WHITESPACE","\n          ",263],["T_CONSTANT_ENCAPSED_STRING","'auto_create'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_STRING","FALSE",264],",",["T_WHITESPACE","\n        ",264],")",",",["T_WHITESPACE","\n      ",265],")",",",["T_WHITESPACE","\n    ",266],"]",")",["T_OBJECT_OPERATOR","->",267],["T_STRING","save",267],"(",")",";",["T_WHITESPACE","\n    ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(","!",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","entity",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getEntityType",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","hasHandlerClass",268],"(",["T_CONSTANT_ENCAPSED_STRING","'view_builder'",268],")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n      ",268],["T_STRING","entity_get_display",269],"(",["T_VARIABLE","$entity_type",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$bundle",269],",",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'full'",269],")",["T_WHITESPACE","\n        ",269],["T_OBJECT_OPERATOR","->",270],["T_STRING","setComponent",270],"(",["T_VARIABLE","$field_name",270],",",["T_WHITESPACE"," ",270],["T_ARRAY","array",270],"(",["T_WHITESPACE","\n          ",270],["T_CONSTANT_ENCAPSED_STRING","'type'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'entity_reference_label'",271],",",["T_WHITESPACE","\n        ",271],")",")",["T_WHITESPACE","\n        ",272],["T_OBJECT_OPERATOR","->",273],["T_STRING","save",273],"(",")",";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n    ",274],["T_ELSE","else",275],["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n      ",275],["T_VARIABLE","$referenced_entity_view_mode",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","selectViewMode",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","entity",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getEntityTypeId",276],"(",")",")",";",["T_WHITESPACE","\n      ",276],["T_STRING","entity_get_display",277],"(",["T_VARIABLE","$entity_type",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$bundle",277],",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'full'",277],")",["T_WHITESPACE","\n        ",277],["T_OBJECT_OPERATOR","->",278],["T_STRING","setComponent",278],"(",["T_VARIABLE","$field_name",278],",",["T_WHITESPACE"," ",278],["T_ARRAY","array",278],"(",["T_WHITESPACE","\n          ",278],["T_CONSTANT_ENCAPSED_STRING","'type'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'entity_reference_entity_view'",279],",",["T_WHITESPACE","\n          ",279],["T_CONSTANT_ENCAPSED_STRING","'settings'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_ARRAY","array",280],"(",["T_WHITESPACE","\n            ",280],["T_CONSTANT_ENCAPSED_STRING","'view_mode'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$referenced_entity_view_mode",281],",",["T_WHITESPACE","\n          ",281],")",",",["T_WHITESPACE","\n        ",282],")",")",["T_WHITESPACE","\n        ",283],["T_OBJECT_OPERATOR","->",284],["T_STRING","save",284],"(",")",";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_COMMENT","\/\/ Create an entity that does reference the entity being tested.\n",287],["T_WHITESPACE","    ",288],["T_VARIABLE","$label_key",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_NS_SEPARATOR","\\",288],["T_STRING","Drupal",288],["T_DOUBLE_COLON","::",288],["T_STRING","entityManager",288],"(",")",["T_OBJECT_OPERATOR","->",288],["T_STRING","getDefinition",288],"(",["T_VARIABLE","$entity_type",288],")",["T_OBJECT_OPERATOR","->",288],["T_STRING","getKey",288],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",288],")",";",["T_WHITESPACE","\n    ",288],["T_VARIABLE","$referencing_entity",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","container",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","get",289],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",289],")",["T_WHITESPACE","\n      ",289],["T_OBJECT_OPERATOR","->",290],["T_STRING","getStorage",290],"(",["T_VARIABLE","$entity_type",290],")",["T_WHITESPACE","\n      ",290],["T_OBJECT_OPERATOR","->",291],["T_STRING","create",291],"(",["T_ARRAY","array",291],"(",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$label_key",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'Referencing '",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_VARIABLE","$entity_type",292],",",["T_WHITESPACE","\n        ",292],["T_CONSTANT_ENCAPSED_STRING","'status'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_LNUMBER","1",293],",",["T_WHITESPACE","\n        ",293],["T_CONSTANT_ENCAPSED_STRING","'type'",294],["T_WHITESPACE"," ",294],["T_DOUBLE_ARROW","=>",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$bundle",294],",",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$field_name",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_ARRAY","array",295],"(",["T_CONSTANT_ENCAPSED_STRING","'target_id'",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$referenced_entity",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","id",295],"(",")",")",",",["T_WHITESPACE","\n      ",295],")",")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$referencing_entity",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","save",297],"(",")",";",["T_WHITESPACE","\n\n    ",297],["T_COMMENT","\/\/ Create an entity that does not reference the entity being tested.\n",299],["T_WHITESPACE","    ",300],["T_VARIABLE","$non_referencing_entity",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","container",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","get",300],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",300],")",["T_WHITESPACE","\n      ",300],["T_OBJECT_OPERATOR","->",301],["T_STRING","getStorage",301],"(",["T_VARIABLE","$entity_type",301],")",["T_WHITESPACE","\n      ",301],["T_OBJECT_OPERATOR","->",302],["T_STRING","create",302],"(",["T_ARRAY","array",302],"(",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$label_key",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'Non-referencing '",303],["T_WHITESPACE"," ",303],".",["T_WHITESPACE"," ",303],["T_VARIABLE","$entity_type",303],",",["T_WHITESPACE","\n        ",303],["T_CONSTANT_ENCAPSED_STRING","'status'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_LNUMBER","1",304],",",["T_WHITESPACE","\n        ",304],["T_CONSTANT_ENCAPSED_STRING","'type'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$bundle",305],",",["T_WHITESPACE","\n      ",305],")",")",";",["T_WHITESPACE","\n    ",306],["T_VARIABLE","$non_referencing_entity",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","save",307],"(",")",";",["T_WHITESPACE","\n\n    ",307],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_ARRAY","array",309],"(",["T_WHITESPACE","\n      ",309],["T_VARIABLE","$referencing_entity",310],",",["T_WHITESPACE","\n      ",310],["T_VARIABLE","$non_referencing_entity",311],",",["T_WHITESPACE","\n    ",311],")",";",["T_WHITESPACE","\n  ",312],"}",["T_WHITESPACE","\n\n  ",313],["T_DOC_COMMENT","\/**\n   * Tests cache tags presence and invalidation of the entity when referenced.\n   *\n   * Tests the following cache tags:\n   * - entity type view cache tag: \"<entity type>_view\"\n   * - entity cache tag: \"<entity type>:<entity ID>\"\n   * - entity type list cache tag: \"<entity type>_list\"\n   * - referencing entity type view cache tag: \"<referencing entity type>_view\"\n   * - referencing entity type cache tag: \"<referencing entity type>:<referencing entity ID>\"\n   *\/",315],["T_WHITESPACE","\n  ",324],["T_PUBLIC","public",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","testReferencedEntity",325],"(",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n    ",325],["T_VARIABLE","$entity_type",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","entity",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getEntityTypeId",326],"(",")",";",["T_WHITESPACE","\n    ",326],["T_VARIABLE","$referencing_entity_url",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","referencingEntity",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","urlInfo",327],"(",["T_CONSTANT_ENCAPSED_STRING","'canonical'",327],")",";",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$non_referencing_entity_url",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","nonReferencingEntity",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","urlInfo",328],"(",["T_CONSTANT_ENCAPSED_STRING","'canonical'",328],")",";",["T_WHITESPACE","\n    ",328],["T_VARIABLE","$listing_url",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_STRING","Url",329],["T_DOUBLE_COLON","::",329],["T_STRING","fromRoute",329],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.entity_test.collection_referencing_entities'",329],",",["T_WHITESPACE"," ",329],"[",["T_WHITESPACE","\n      ",329],["T_CONSTANT_ENCAPSED_STRING","'entity_reference_field_name'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$entity_type",330],["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'_reference'",330],",",["T_WHITESPACE","\n      ",330],["T_CONSTANT_ENCAPSED_STRING","'referenced_entity_type'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$entity_type",331],",",["T_WHITESPACE","\n      ",331],["T_CONSTANT_ENCAPSED_STRING","'referenced_entity_id'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","entity",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","id",332],"(",")",",",["T_WHITESPACE","\n    ",332],"]",")",";",["T_WHITESPACE","\n    ",333],["T_VARIABLE","$empty_entity_listing_url",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","Url",334],["T_DOUBLE_COLON","::",334],["T_STRING","fromRoute",334],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.entity_test.collection_empty'",334],",",["T_WHITESPACE"," ",334],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$entity_type",334],"]",")",";",["T_WHITESPACE","\n    ",334],["T_VARIABLE","$nonempty_entity_listing_url",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","Url",335],["T_DOUBLE_COLON","::",335],["T_STRING","fromRoute",335],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.entity_test.collection_labels_alphabetically'",335],",",["T_WHITESPACE"," ",335],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$entity_type",335],"]",")",";",["T_WHITESPACE","\n\n    ",335],["T_COMMENT","\/\/ The default cache contexts for rendered entities.\n",337],["T_WHITESPACE","    ",338],["T_VARIABLE","$default_cache_contexts",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],"[",["T_CONSTANT_ENCAPSED_STRING","'languages:'",338],["T_WHITESPACE"," ",338],".",["T_WHITESPACE"," ",338],["T_STRING","LanguageInterface",338],["T_DOUBLE_COLON","::",338],["T_STRING","TYPE_INTERFACE",338],",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'theme'",338],",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",338],"]",";",["T_WHITESPACE","\n    ",338],["T_VARIABLE","$entity_cache_contexts",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$default_cache_contexts",339],";",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$page_cache_contexts",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_STRING","Cache",340],["T_DOUBLE_COLON","::",340],["T_STRING","mergeContexts",340],"(",["T_VARIABLE","$default_cache_contexts",340],",",["T_WHITESPACE"," ",340],"[",["T_CONSTANT_ENCAPSED_STRING","'url.query_args:'",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_STRING","MainContentViewSubscriber",340],["T_DOUBLE_COLON","::",340],["T_STRING","WRAPPER_FORMAT",340],"]",")",";",["T_WHITESPACE","\n\n    ",340],["T_COMMENT","\/\/ Cache tags present on every rendered page.\n",342],["T_WHITESPACE","    ",343],["T_COMMENT","\/\/ 'user.permissions' is a required cache context, and responses that vary\n",343],["T_WHITESPACE","    ",344],["T_COMMENT","\/\/ by this cache context when requested by anonymous users automatically\n",344],["T_WHITESPACE","    ",345],["T_COMMENT","\/\/ also get this cache tag, to ensure correct invalidation.\n",345],["T_WHITESPACE","    ",346],["T_VARIABLE","$page_cache_tags",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_STRING","Cache",346],["T_DOUBLE_COLON","::",346],["T_STRING","mergeTags",346],"(","[",["T_CONSTANT_ENCAPSED_STRING","'rendered'",346],"]",",",["T_WHITESPACE"," ",346],"[",["T_CONSTANT_ENCAPSED_STRING","'config:user.role.anonymous'",346],"]",")",";",["T_WHITESPACE","\n    ",346],["T_COMMENT","\/\/ If the block module is used, the Block page display variant is used,\n",347],["T_WHITESPACE","    ",348],["T_COMMENT","\/\/ which adds the block config entity type's list cache tags.\n",348],["T_WHITESPACE","    ",349],["T_VARIABLE","$page_cache_tags",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","Cache",349],["T_DOUBLE_COLON","::",349],["T_STRING","mergeTags",349],"(",["T_VARIABLE","$page_cache_tags",349],",",["T_WHITESPACE"," ",349],["T_NS_SEPARATOR","\\",349],["T_STRING","Drupal",349],["T_DOUBLE_COLON","::",349],["T_STRING","moduleHandler",349],"(",")",["T_OBJECT_OPERATOR","->",349],["T_STRING","moduleExists",349],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",349],")",["T_WHITESPACE"," ",349],"?",["T_WHITESPACE"," ",349],"[",["T_CONSTANT_ENCAPSED_STRING","'config:block_list'",349],"]",["T_WHITESPACE"," ",349],":",["T_WHITESPACE"," ",349],"[","]",")",";",["T_WHITESPACE","\n\n    ",349],["T_VARIABLE","$page_cache_tags_referencing_entity",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","in_array",351],"(",["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getAccessCacheContextsForEntity",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","referencingEntity",351],")",")",["T_WHITESPACE"," ",351],"?",["T_WHITESPACE"," ",351],"[",["T_CONSTANT_ENCAPSED_STRING","'config:user.role.anonymous'",351],"]",["T_WHITESPACE"," ",351],":",["T_WHITESPACE"," ",351],"[","]",";",["T_WHITESPACE","\n\n    ",351],["T_VARIABLE","$view_cache_tag",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_ARRAY","array",353],"(",")",";",["T_WHITESPACE","\n    ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","entity",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getEntityType",354],"(",")",["T_OBJECT_OPERATOR","->",354],["T_STRING","hasHandlerClass",354],"(",["T_CONSTANT_ENCAPSED_STRING","'view_builder'",354],")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n      ",354],["T_VARIABLE","$view_cache_tag",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_NS_SEPARATOR","\\",355],["T_STRING","Drupal",355],["T_DOUBLE_COLON","::",355],["T_STRING","entityManager",355],"(",")",["T_OBJECT_OPERATOR","->",355],["T_STRING","getViewBuilder",355],"(",["T_VARIABLE","$entity_type",355],")",["T_WHITESPACE","\n        ",355],["T_OBJECT_OPERATOR","->",356],["T_STRING","getCacheTags",356],"(",")",";",["T_WHITESPACE","\n    ",356],"}",["T_WHITESPACE","\n\n    ",357],["T_VARIABLE","$context_metadata",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_NS_SEPARATOR","\\",359],["T_STRING","Drupal",359],["T_DOUBLE_COLON","::",359],["T_STRING","service",359],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_contexts_manager'",359],")",["T_OBJECT_OPERATOR","->",359],["T_STRING","convertTokensToKeys",359],"(",["T_VARIABLE","$entity_cache_contexts",359],")",";",["T_WHITESPACE","\n    ",359],["T_VARIABLE","$cache_context_tags",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$context_metadata",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getCacheTags",360],"(",")",";",["T_WHITESPACE","\n\n    ",360],["T_COMMENT","\/\/ Generate the cache tags for the (non) referencing entities.\n",362],["T_WHITESPACE","    ",363],["T_VARIABLE","$referencing_entity_cache_tags",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_STRING","Cache",363],["T_DOUBLE_COLON","::",363],["T_STRING","mergeTags",363],"(",["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","referencingEntity",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getCacheTags",363],"(",")",",",["T_WHITESPACE"," ",363],["T_NS_SEPARATOR","\\",363],["T_STRING","Drupal",363],["T_DOUBLE_COLON","::",363],["T_STRING","entityManager",363],"(",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","getViewBuilder",363],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",363],")",["T_OBJECT_OPERATOR","->",363],["T_STRING","getCacheTags",363],"(",")",")",";",["T_WHITESPACE","\n    ",363],["T_COMMENT","\/\/ Includes the main entity's cache tags, since this entity references it.\n",364],["T_WHITESPACE","    ",365],["T_VARIABLE","$referencing_entity_cache_tags",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","Cache",365],["T_DOUBLE_COLON","::",365],["T_STRING","mergeTags",365],"(",["T_VARIABLE","$referencing_entity_cache_tags",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","entity",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getCacheTags",365],"(",")",")",";",["T_WHITESPACE","\n    ",365],["T_VARIABLE","$referencing_entity_cache_tags",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_STRING","Cache",366],["T_DOUBLE_COLON","::",366],["T_STRING","mergeTags",366],"(",["T_VARIABLE","$referencing_entity_cache_tags",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getAdditionalCacheTagsForEntity",366],"(",["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","entity",366],")",")",";",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$referencing_entity_cache_tags",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","Cache",367],["T_DOUBLE_COLON","::",367],["T_STRING","mergeTags",367],"(",["T_VARIABLE","$referencing_entity_cache_tags",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$view_cache_tag",367],")",";",["T_WHITESPACE","\n    ",367],["T_VARIABLE","$referencing_entity_cache_tags",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_STRING","Cache",368],["T_DOUBLE_COLON","::",368],["T_STRING","mergeTags",368],"(",["T_VARIABLE","$referencing_entity_cache_tags",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$cache_context_tags",368],")",";",["T_WHITESPACE","\n    ",368],["T_VARIABLE","$referencing_entity_cache_tags",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_STRING","Cache",369],["T_DOUBLE_COLON","::",369],["T_STRING","mergeTags",369],"(",["T_VARIABLE","$referencing_entity_cache_tags",369],",",["T_WHITESPACE"," ",369],"[",["T_CONSTANT_ENCAPSED_STRING","'rendered'",369],"]",")",";",["T_WHITESPACE","\n\n    ",369],["T_VARIABLE","$non_referencing_entity_cache_tags",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","Cache",371],["T_DOUBLE_COLON","::",371],["T_STRING","mergeTags",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","nonReferencingEntity",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getCacheTags",371],"(",")",",",["T_WHITESPACE"," ",371],["T_NS_SEPARATOR","\\",371],["T_STRING","Drupal",371],["T_DOUBLE_COLON","::",371],["T_STRING","entityManager",371],"(",")",["T_OBJECT_OPERATOR","->",371],["T_STRING","getViewBuilder",371],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",371],")",["T_OBJECT_OPERATOR","->",371],["T_STRING","getCacheTags",371],"(",")",")",";",["T_WHITESPACE","\n    ",371],["T_VARIABLE","$non_referencing_entity_cache_tags",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_STRING","Cache",372],["T_DOUBLE_COLON","::",372],["T_STRING","mergeTags",372],"(",["T_VARIABLE","$non_referencing_entity_cache_tags",372],",",["T_WHITESPACE"," ",372],"[",["T_CONSTANT_ENCAPSED_STRING","'rendered'",372],"]",")",";",["T_WHITESPACE","\n\n    ",372],["T_COMMENT","\/\/ Generate the cache tags for all two possible entity listing paths.\n",374],["T_WHITESPACE","    ",375],["T_COMMENT","\/\/ 1. list cache tag only (listing query has no match)\n",375],["T_WHITESPACE","    ",376],["T_COMMENT","\/\/ 2. list cache tag plus entity cache tag (listing query has a match)\n",376],["T_WHITESPACE","    ",377],["T_VARIABLE","$empty_entity_listing_cache_tags",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","Cache",377],["T_DOUBLE_COLON","::",377],["T_STRING","mergeTags",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","entity",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getEntityType",377],"(",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","getListCacheTags",377],"(",")",",",["T_WHITESPACE"," ",377],["T_VARIABLE","$page_cache_tags",377],")",";",["T_WHITESPACE","\n\n    ",377],["T_VARIABLE","$nonempty_entity_listing_cache_tags",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_STRING","Cache",379],["T_DOUBLE_COLON","::",379],["T_STRING","mergeTags",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","entity",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getEntityType",379],"(",")",["T_OBJECT_OPERATOR","->",379],["T_STRING","getListCacheTags",379],"(",")",",",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","entity",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getCacheTags",379],"(",")",")",";",["T_WHITESPACE","\n    ",379],["T_VARIABLE","$nonempty_entity_listing_cache_tags",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_STRING","Cache",380],["T_DOUBLE_COLON","::",380],["T_STRING","mergeTags",380],"(",["T_VARIABLE","$nonempty_entity_listing_cache_tags",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getAdditionalCacheTagsForEntityListing",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","entity",380],")",")",";",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$nonempty_entity_listing_cache_tags",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_STRING","Cache",381],["T_DOUBLE_COLON","::",381],["T_STRING","mergeTags",381],"(",["T_VARIABLE","$nonempty_entity_listing_cache_tags",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$page_cache_tags",381],")",";",["T_WHITESPACE","\n\n    ",381],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","pass",383],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test referencing entity.\"",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'Debug'",383],")",";",["T_WHITESPACE","\n    ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","verifyPageCache",384],"(",["T_VARIABLE","$referencing_entity_url",384],",",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'MISS'",384],")",";",["T_WHITESPACE","\n\n    ",384],["T_COMMENT","\/\/ Verify a cache hit, but also the presence of the correct cache tags.\n",386],["T_WHITESPACE","    ",387],["T_VARIABLE","$expected_tags",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","Cache",387],["T_DOUBLE_COLON","::",387],["T_STRING","mergeTags",387],"(",["T_VARIABLE","$referencing_entity_cache_tags",387],",",["T_WHITESPACE"," ",387],["T_VARIABLE","$page_cache_tags",387],")",";",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$expected_tags",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","Cache",388],["T_DOUBLE_COLON","::",388],["T_STRING","mergeTags",388],"(",["T_VARIABLE","$expected_tags",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$page_cache_tags_referencing_entity",388],")",";",["T_WHITESPACE","\n    ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","verifyPageCache",389],"(",["T_VARIABLE","$referencing_entity_url",389],",",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'HIT'",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$expected_tags",389],")",";",["T_WHITESPACE","\n\n    ",389],["T_COMMENT","\/\/ Also verify the existence of an entity render cache entry.\n",391],["T_WHITESPACE","    ",392],["T_VARIABLE","$cache_keys",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_view'",392],",",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","referencingEntity",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","id",392],"(",")",",",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'full'",392],"]",";",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$cid",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","createCacheId",393],"(",["T_VARIABLE","$cache_keys",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$entity_cache_contexts",393],")",";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$access_cache_contexts",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getAccessCacheContextsForEntity",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","entity",394],")",";",["T_WHITESPACE","\n    ",394],["T_VARIABLE","$additional_cache_contexts",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getAdditionalCacheContextsForEntity",395],"(",["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","referencingEntity",395],")",";",["T_WHITESPACE","\n    ",395],["T_VARIABLE","$redirected_cid",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_STRING","NULL",396],";",["T_WHITESPACE","\n    ",396],["T_IF","if",397],["T_WHITESPACE"," ",397],"(",["T_STRING","count",397],"(",["T_VARIABLE","$access_cache_contexts",397],")",["T_WHITESPACE"," ",397],["T_BOOLEAN_OR","||",397],["T_WHITESPACE"," ",397],["T_STRING","count",397],"(",["T_VARIABLE","$additional_cache_contexts",397],")",")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n      ",397],["T_VARIABLE","$cache_contexts",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","Cache",398],["T_DOUBLE_COLON","::",398],["T_STRING","mergeContexts",398],"(",["T_VARIABLE","$entity_cache_contexts",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$additional_cache_contexts",398],")",";",["T_WHITESPACE","\n      ",398],["T_VARIABLE","$cache_contexts",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_STRING","Cache",399],["T_DOUBLE_COLON","::",399],["T_STRING","mergeContexts",399],"(",["T_VARIABLE","$cache_contexts",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$access_cache_contexts",399],")",";",["T_WHITESPACE","\n      ",399],["T_VARIABLE","$redirected_cid",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","createCacheId",400],"(",["T_VARIABLE","$cache_keys",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$cache_contexts",400],")",";",["T_WHITESPACE","\n      ",400],["T_VARIABLE","$context_metadata",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Drupal",401],["T_DOUBLE_COLON","::",401],["T_STRING","service",401],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_contexts_manager'",401],")",["T_OBJECT_OPERATOR","->",401],["T_STRING","convertTokensToKeys",401],"(",["T_VARIABLE","$cache_contexts",401],")",";",["T_WHITESPACE","\n      ",401],["T_VARIABLE","$referencing_entity_cache_tags",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_STRING","Cache",402],["T_DOUBLE_COLON","::",402],["T_STRING","mergeTags",402],"(",["T_VARIABLE","$referencing_entity_cache_tags",402],",",["T_WHITESPACE"," ",402],["T_VARIABLE","$context_metadata",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getCacheTags",402],"(",")",")",";",["T_WHITESPACE","\n    ",402],"}",["T_WHITESPACE","\n    ",403],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","verifyRenderCache",404],"(",["T_VARIABLE","$cid",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$referencing_entity_cache_tags",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$redirected_cid",404],")",";",["T_WHITESPACE","\n\n    ",404],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","pass",406],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test non-referencing entity.\"",406],",",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'Debug'",406],")",";",["T_WHITESPACE","\n    ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","verifyPageCache",407],"(",["T_VARIABLE","$non_referencing_entity_url",407],",",["T_WHITESPACE"," ",407],["T_CONSTANT_ENCAPSED_STRING","'MISS'",407],")",";",["T_WHITESPACE","\n    ",407],["T_COMMENT","\/\/ Verify a cache hit, but also the presence of the correct cache tags.\n",408],["T_WHITESPACE","    ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","verifyPageCache",409],"(",["T_VARIABLE","$non_referencing_entity_url",409],",",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'HIT'",409],",",["T_WHITESPACE"," ",409],["T_STRING","Cache",409],["T_DOUBLE_COLON","::",409],["T_STRING","mergeTags",409],"(",["T_VARIABLE","$non_referencing_entity_cache_tags",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$page_cache_tags",409],")",")",";",["T_WHITESPACE","\n    ",409],["T_COMMENT","\/\/ Also verify the existence of an entity render cache entry.\n",410],["T_WHITESPACE","    ",411],["T_VARIABLE","$cache_keys",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_view'",411],",",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","nonReferencingEntity",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","id",411],"(",")",",",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'full'",411],"]",";",["T_WHITESPACE","\n    ",411],["T_VARIABLE","$cid",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","createCacheId",412],"(",["T_VARIABLE","$cache_keys",412],",",["T_WHITESPACE"," ",412],["T_VARIABLE","$entity_cache_contexts",412],")",";",["T_WHITESPACE","\n    ",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","verifyRenderCache",413],"(",["T_VARIABLE","$cid",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$non_referencing_entity_cache_tags",413],")",";",["T_WHITESPACE","\n\n\n    ",413],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","pass",416],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test listing of referencing entities.\"",416],",",["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'Debug'",416],")",";",["T_WHITESPACE","\n    ",416],["T_COMMENT","\/\/ Prime the page cache for the listing of referencing entities.\n",417],["T_WHITESPACE","    ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","verifyPageCache",418],"(",["T_VARIABLE","$listing_url",418],",",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'MISS'",418],")",";",["T_WHITESPACE","\n\n    ",418],["T_COMMENT","\/\/ Verify a cache hit, but also the presence of the correct cache tags.\n",420],["T_WHITESPACE","    ",421],["T_VARIABLE","$expected_tags",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","Cache",421],["T_DOUBLE_COLON","::",421],["T_STRING","mergeTags",421],"(",["T_VARIABLE","$referencing_entity_cache_tags",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$page_cache_tags",421],")",";",["T_WHITESPACE","\n    ",421],["T_VARIABLE","$expected_tags",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING","Cache",422],["T_DOUBLE_COLON","::",422],["T_STRING","mergeTags",422],"(",["T_VARIABLE","$expected_tags",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$page_cache_tags_referencing_entity",422],")",";",["T_WHITESPACE","\n    ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","verifyPageCache",423],"(",["T_VARIABLE","$listing_url",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'HIT'",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$expected_tags",423],")",";",["T_WHITESPACE","\n\n    ",423],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","pass",425],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test empty listing.\"",425],",",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","'Debug'",425],")",";",["T_WHITESPACE","\n    ",425],["T_COMMENT","\/\/ Prime the page cache for the empty listing.\n",426],["T_WHITESPACE","    ",427],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","verifyPageCache",427],"(",["T_VARIABLE","$empty_entity_listing_url",427],",",["T_WHITESPACE"," ",427],["T_CONSTANT_ENCAPSED_STRING","'MISS'",427],")",";",["T_WHITESPACE","\n    ",427],["T_COMMENT","\/\/ Verify a cache hit, but also the presence of the correct cache tags.\n",428],["T_WHITESPACE","    ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","verifyPageCache",429],"(",["T_VARIABLE","$empty_entity_listing_url",429],",",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'HIT'",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$empty_entity_listing_cache_tags",429],")",";",["T_WHITESPACE","\n    ",429],["T_COMMENT","\/\/ Verify the entity type's list cache contexts are present.\n",430],["T_WHITESPACE","    ",431],["T_VARIABLE","$contexts_in_header",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","drupalGetHeader",431],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Contexts'",431],")",";",["T_WHITESPACE","\n    ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","assertEqual",432],"(",["T_STRING","Cache",432],["T_DOUBLE_COLON","::",432],["T_STRING","mergeContexts",432],"(",["T_VARIABLE","$page_cache_contexts",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getAdditionalCacheContextsForEntityListing",432],"(",")",")",",",["T_WHITESPACE"," ",432],["T_EMPTY","empty",432],"(",["T_VARIABLE","$contexts_in_header",432],")",["T_WHITESPACE"," ",432],"?",["T_WHITESPACE"," ",432],"[","]",["T_WHITESPACE"," ",432],":",["T_WHITESPACE"," ",432],["T_STRING","explode",432],"(",["T_CONSTANT_ENCAPSED_STRING","' '",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$contexts_in_header",432],")",")",";",["T_WHITESPACE","\n\n\n    ",432],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","pass",435],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test listing containing referenced entity.\"",435],",",["T_WHITESPACE"," ",435],["T_CONSTANT_ENCAPSED_STRING","'Debug'",435],")",";",["T_WHITESPACE","\n    ",435],["T_COMMENT","\/\/ Prime the page cache for the listing containing the referenced entity.\n",436],["T_WHITESPACE","    ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","verifyPageCache",437],"(",["T_VARIABLE","$nonempty_entity_listing_url",437],",",["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'MISS'",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$nonempty_entity_listing_cache_tags",437],")",";",["T_WHITESPACE","\n    ",437],["T_COMMENT","\/\/ Verify a cache hit, but also the presence of the correct cache tags.\n",438],["T_WHITESPACE","    ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","verifyPageCache",439],"(",["T_VARIABLE","$nonempty_entity_listing_url",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'HIT'",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$nonempty_entity_listing_cache_tags",439],")",";",["T_WHITESPACE","\n    ",439],["T_COMMENT","\/\/ Verify the entity type's list cache contexts are present.\n",440],["T_WHITESPACE","    ",441],["T_VARIABLE","$contexts_in_header",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","drupalGetHeader",441],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Contexts'",441],")",";",["T_WHITESPACE","\n    ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","assertEqual",442],"(",["T_STRING","Cache",442],["T_DOUBLE_COLON","::",442],["T_STRING","mergeContexts",442],"(",["T_VARIABLE","$page_cache_contexts",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getAdditionalCacheContextsForEntityListing",442],"(",")",")",",",["T_WHITESPACE"," ",442],["T_EMPTY","empty",442],"(",["T_VARIABLE","$contexts_in_header",442],")",["T_WHITESPACE"," ",442],"?",["T_WHITESPACE"," ",442],"[","]",["T_WHITESPACE"," ",442],":",["T_WHITESPACE"," ",442],["T_STRING","explode",442],"(",["T_CONSTANT_ENCAPSED_STRING","' '",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$contexts_in_header",442],")",")",";",["T_WHITESPACE","\n\n\n    ",442],["T_COMMENT","\/\/ Verify that after modifying the referenced entity, there is a cache miss\n",445],["T_WHITESPACE","    ",446],["T_COMMENT","\/\/ for every route except the one for the non-referencing entity.\n",446],["T_WHITESPACE","    ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","pass",447],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test modification of referenced entity.\"",447],",",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'Debug'",447],")",";",["T_WHITESPACE","\n    ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","entity",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","save",448],"(",")",";",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","verifyPageCache",449],"(",["T_VARIABLE","$referencing_entity_url",449],",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'MISS'",449],")",";",["T_WHITESPACE","\n    ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","verifyPageCache",450],"(",["T_VARIABLE","$listing_url",450],",",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'MISS'",450],")",";",["T_WHITESPACE","\n    ",450],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","verifyPageCache",451],"(",["T_VARIABLE","$empty_entity_listing_url",451],",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'MISS'",451],")",";",["T_WHITESPACE","\n    ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","verifyPageCache",452],"(",["T_VARIABLE","$nonempty_entity_listing_url",452],",",["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'MISS'",452],")",";",["T_WHITESPACE","\n    ",452],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","verifyPageCache",453],"(",["T_VARIABLE","$non_referencing_entity_url",453],",",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'HIT'",453],")",";",["T_WHITESPACE","\n\n    ",453],["T_COMMENT","\/\/ Verify cache hits.\n",455],["T_WHITESPACE","    ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","verifyPageCache",456],"(",["T_VARIABLE","$referencing_entity_url",456],",",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'HIT'",456],")",";",["T_WHITESPACE","\n    ",456],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","verifyPageCache",457],"(",["T_VARIABLE","$listing_url",457],",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'HIT'",457],")",";",["T_WHITESPACE","\n    ",457],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","verifyPageCache",458],"(",["T_VARIABLE","$empty_entity_listing_url",458],",",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'HIT'",458],")",";",["T_WHITESPACE","\n    ",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","verifyPageCache",459],"(",["T_VARIABLE","$nonempty_entity_listing_url",459],",",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'HIT'",459],")",";",["T_WHITESPACE","\n\n\n    ",459],["T_COMMENT","\/\/ Verify that after modifying the referencing entity, there is a cache miss\n",462],["T_WHITESPACE","    ",463],["T_COMMENT","\/\/ for every route except the ones for the non-referencing entity and the\n",463],["T_WHITESPACE","    ",464],["T_COMMENT","\/\/ empty entity listing.\n",464],["T_WHITESPACE","    ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","pass",465],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test modification of referencing entity.\"",465],",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'Debug'",465],")",";",["T_WHITESPACE","\n    ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","referencingEntity",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","save",466],"(",")",";",["T_WHITESPACE","\n    ",466],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","verifyPageCache",467],"(",["T_VARIABLE","$referencing_entity_url",467],",",["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","'MISS'",467],")",";",["T_WHITESPACE","\n    ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","verifyPageCache",468],"(",["T_VARIABLE","$listing_url",468],",",["T_WHITESPACE"," ",468],["T_CONSTANT_ENCAPSED_STRING","'MISS'",468],")",";",["T_WHITESPACE","\n    ",468],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","verifyPageCache",469],"(",["T_VARIABLE","$nonempty_entity_listing_url",469],",",["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'HIT'",469],")",";",["T_WHITESPACE","\n    ",469],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","verifyPageCache",470],"(",["T_VARIABLE","$non_referencing_entity_url",470],",",["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","'HIT'",470],")",";",["T_WHITESPACE","\n    ",470],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","verifyPageCache",471],"(",["T_VARIABLE","$empty_entity_listing_url",471],",",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'HIT'",471],")",";",["T_WHITESPACE","\n\n    ",471],["T_COMMENT","\/\/ Verify cache hits.\n",473],["T_WHITESPACE","    ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","verifyPageCache",474],"(",["T_VARIABLE","$referencing_entity_url",474],",",["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'HIT'",474],")",";",["T_WHITESPACE","\n    ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","verifyPageCache",475],"(",["T_VARIABLE","$listing_url",475],",",["T_WHITESPACE"," ",475],["T_CONSTANT_ENCAPSED_STRING","'HIT'",475],")",";",["T_WHITESPACE","\n    ",475],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","verifyPageCache",476],"(",["T_VARIABLE","$nonempty_entity_listing_url",476],",",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","'HIT'",476],")",";",["T_WHITESPACE","\n\n\n    ",476],["T_COMMENT","\/\/ Verify that after modifying the non-referencing entity, there is a cache\n",479],["T_WHITESPACE","    ",480],["T_COMMENT","\/\/ miss only for the non-referencing entity route.\n",480],["T_WHITESPACE","    ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","pass",481],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test modification of non-referencing entity.\"",481],",",["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","'Debug'",481],")",";",["T_WHITESPACE","\n    ",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","nonReferencingEntity",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","save",482],"(",")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","verifyPageCache",483],"(",["T_VARIABLE","$referencing_entity_url",483],",",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'HIT'",483],")",";",["T_WHITESPACE","\n    ",483],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","verifyPageCache",484],"(",["T_VARIABLE","$listing_url",484],",",["T_WHITESPACE"," ",484],["T_CONSTANT_ENCAPSED_STRING","'HIT'",484],")",";",["T_WHITESPACE","\n    ",484],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","verifyPageCache",485],"(",["T_VARIABLE","$empty_entity_listing_url",485],",",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'HIT'",485],")",";",["T_WHITESPACE","\n    ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","verifyPageCache",486],"(",["T_VARIABLE","$nonempty_entity_listing_url",486],",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'HIT'",486],")",";",["T_WHITESPACE","\n    ",486],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","verifyPageCache",487],"(",["T_VARIABLE","$non_referencing_entity_url",487],",",["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","'MISS'",487],")",";",["T_WHITESPACE","\n\n    ",487],["T_COMMENT","\/\/ Verify cache hits.\n",489],["T_WHITESPACE","    ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","verifyPageCache",490],"(",["T_VARIABLE","$non_referencing_entity_url",490],",",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'HIT'",490],")",";",["T_WHITESPACE","\n\n\n    ",490],["T_IF","if",493],["T_WHITESPACE"," ",493],"(",["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","entity",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getEntityType",493],"(",")",["T_OBJECT_OPERATOR","->",493],["T_STRING","hasHandlerClass",493],"(",["T_CONSTANT_ENCAPSED_STRING","'view_builder'",493],")",")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n      ",493],["T_COMMENT","\/\/ Verify that after modifying the entity's display, there is a cache miss\n",494],["T_WHITESPACE","      ",495],["T_COMMENT","\/\/ for both the referencing entity, and the listing of referencing\n",495],["T_WHITESPACE","      ",496],["T_COMMENT","\/\/ entities, but not for any other routes.\n",496],["T_WHITESPACE","      ",497],["T_VARIABLE","$referenced_entity_view_mode",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","selectViewMode",497],"(",["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","entity",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getEntityTypeId",497],"(",")",")",";",["T_WHITESPACE","\n      ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","pass",498],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Test modification of referenced entity's '",498],["T_VARIABLE","$referenced_entity_view_mode",498],["T_ENCAPSED_AND_WHITESPACE","' display.",498],"\"",",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'Debug'",498],")",";",["T_WHITESPACE","\n      ",498],["T_VARIABLE","$entity_display",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_STRING","entity_get_display",499],"(",["T_VARIABLE","$entity_type",499],",",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","entity",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","bundle",499],"(",")",",",["T_WHITESPACE"," ",499],["T_VARIABLE","$referenced_entity_view_mode",499],")",";",["T_WHITESPACE","\n      ",499],["T_VARIABLE","$entity_display",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","save",500],"(",")",";",["T_WHITESPACE","\n      ",500],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","verifyPageCache",501],"(",["T_VARIABLE","$referencing_entity_url",501],",",["T_WHITESPACE"," ",501],["T_CONSTANT_ENCAPSED_STRING","'MISS'",501],")",";",["T_WHITESPACE","\n      ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","verifyPageCache",502],"(",["T_VARIABLE","$listing_url",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'MISS'",502],")",";",["T_WHITESPACE","\n      ",502],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","verifyPageCache",503],"(",["T_VARIABLE","$non_referencing_entity_url",503],",",["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","'HIT'",503],")",";",["T_WHITESPACE","\n      ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","verifyPageCache",504],"(",["T_VARIABLE","$empty_entity_listing_url",504],",",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'HIT'",504],")",";",["T_WHITESPACE","\n      ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","verifyPageCache",505],"(",["T_VARIABLE","$nonempty_entity_listing_url",505],",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'HIT'",505],")",";",["T_WHITESPACE","\n\n      ",505],["T_COMMENT","\/\/ Verify cache hits.\n",507],["T_WHITESPACE","      ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","verifyPageCache",508],"(",["T_VARIABLE","$referencing_entity_url",508],",",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'HIT'",508],")",";",["T_WHITESPACE","\n      ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","verifyPageCache",509],"(",["T_VARIABLE","$listing_url",509],",",["T_WHITESPACE"," ",509],["T_CONSTANT_ENCAPSED_STRING","'HIT'",509],")",";",["T_WHITESPACE","\n    ",509],"}",["T_WHITESPACE","\n\n\n    ",510],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_VARIABLE","$bundle_entity_type_id",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","entity",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getEntityType",513],"(",")",["T_OBJECT_OPERATOR","->",513],["T_STRING","getBundleEntityType",513],"(",")",")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n      ",513],["T_COMMENT","\/\/ Verify that after modifying the corresponding bundle entity, there is a\n",514],["T_WHITESPACE","      ",515],["T_COMMENT","\/\/ cache miss for both the referencing entity, and the listing of\n",515],["T_WHITESPACE","      ",516],["T_COMMENT","\/\/ referencing entities, but not for any other routes.\n",516],["T_WHITESPACE","      ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","pass",517],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test modification of referenced entity's bundle entity.\"",517],",",["T_WHITESPACE"," ",517],["T_CONSTANT_ENCAPSED_STRING","'Debug'",517],")",";",["T_WHITESPACE","\n      ",517],["T_VARIABLE","$bundle_entity",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","container",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","get",518],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",518],")",["T_WHITESPACE","\n        ",518],["T_OBJECT_OPERATOR","->",519],["T_STRING","getStorage",519],"(",["T_VARIABLE","$bundle_entity_type_id",519],")",["T_WHITESPACE","\n        ",519],["T_OBJECT_OPERATOR","->",520],["T_STRING","load",520],"(",["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","entity",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","bundle",520],"(",")",")",";",["T_WHITESPACE","\n      ",520],["T_VARIABLE","$bundle_entity",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","save",521],"(",")",";",["T_WHITESPACE","\n      ",521],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","verifyPageCache",522],"(",["T_VARIABLE","$referencing_entity_url",522],",",["T_WHITESPACE"," ",522],["T_CONSTANT_ENCAPSED_STRING","'MISS'",522],")",";",["T_WHITESPACE","\n      ",522],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","verifyPageCache",523],"(",["T_VARIABLE","$listing_url",523],",",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'MISS'",523],")",";",["T_WHITESPACE","\n      ",523],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","verifyPageCache",524],"(",["T_VARIABLE","$non_referencing_entity_url",524],",",["T_WHITESPACE"," ",524],["T_CONSTANT_ENCAPSED_STRING","'HIT'",524],")",";",["T_WHITESPACE","\n      ",524],["T_COMMENT","\/\/ Special case: entity types may choose to use their bundle entity type\n",525],["T_WHITESPACE","      ",526],["T_COMMENT","\/\/ cache tags, to avoid having excessively granular invalidation.\n",526],["T_WHITESPACE","      ",527],["T_VARIABLE","$is_special_case",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$bundle_entity",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getCacheTags",527],"(",")",["T_WHITESPACE"," ",527],["T_IS_EQUAL","==",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","entity",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getCacheTags",527],"(",")",["T_WHITESPACE"," ",527],["T_BOOLEAN_AND","&&",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$bundle_entity",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getEntityType",527],"(",")",["T_OBJECT_OPERATOR","->",527],["T_STRING","getListCacheTags",527],"(",")",["T_WHITESPACE"," ",527],["T_IS_EQUAL","==",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","entity",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getEntityType",527],"(",")",["T_OBJECT_OPERATOR","->",527],["T_STRING","getListCacheTags",527],"(",")",";",["T_WHITESPACE","\n      ",527],["T_IF","if",528],["T_WHITESPACE"," ",528],"(",["T_VARIABLE","$is_special_case",528],")",["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n        ",528],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","verifyPageCache",529],"(",["T_VARIABLE","$empty_entity_listing_url",529],",",["T_WHITESPACE"," ",529],["T_CONSTANT_ENCAPSED_STRING","'MISS'",529],")",";",["T_WHITESPACE","\n        ",529],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","verifyPageCache",530],"(",["T_VARIABLE","$nonempty_entity_listing_url",530],",",["T_WHITESPACE"," ",530],["T_CONSTANT_ENCAPSED_STRING","'MISS'",530],")",";",["T_WHITESPACE","\n      ",530],"}",["T_WHITESPACE","\n      ",531],["T_ELSE","else",532],["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n        ",532],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","verifyPageCache",533],"(",["T_VARIABLE","$empty_entity_listing_url",533],",",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'HIT'",533],")",";",["T_WHITESPACE","\n        ",533],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","verifyPageCache",534],"(",["T_VARIABLE","$nonempty_entity_listing_url",534],",",["T_WHITESPACE"," ",534],["T_CONSTANT_ENCAPSED_STRING","'HIT'",534],")",";",["T_WHITESPACE","\n      ",534],"}",["T_WHITESPACE","\n\n      ",535],["T_COMMENT","\/\/ Verify cache hits.\n",537],["T_WHITESPACE","      ",538],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","verifyPageCache",538],"(",["T_VARIABLE","$referencing_entity_url",538],",",["T_WHITESPACE"," ",538],["T_CONSTANT_ENCAPSED_STRING","'HIT'",538],")",";",["T_WHITESPACE","\n      ",538],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","verifyPageCache",539],"(",["T_VARIABLE","$listing_url",539],",",["T_WHITESPACE"," ",539],["T_CONSTANT_ENCAPSED_STRING","'HIT'",539],")",";",["T_WHITESPACE","\n      ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$is_special_case",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n        ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","verifyPageCache",541],"(",["T_VARIABLE","$empty_entity_listing_url",541],",",["T_WHITESPACE"," ",541],["T_CONSTANT_ENCAPSED_STRING","'HIT'",541],")",";",["T_WHITESPACE","\n        ",541],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","verifyPageCache",542],"(",["T_VARIABLE","$nonempty_entity_listing_url",542],",",["T_WHITESPACE"," ",542],["T_CONSTANT_ENCAPSED_STRING","'HIT'",542],")",";",["T_WHITESPACE","\n      ",542],"}",["T_WHITESPACE","\n    ",543],"}",["T_WHITESPACE","\n\n\n    ",544],["T_IF","if",547],["T_WHITESPACE"," ",547],"(",["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","entity",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","getEntityType",547],"(",")",["T_OBJECT_OPERATOR","->",547],["T_STRING","get",547],"(",["T_CONSTANT_ENCAPSED_STRING","'field_ui_base_route'",547],")",")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n      ",547],["T_COMMENT","\/\/ Verify that after modifying a configurable field on the entity, there\n",548],["T_WHITESPACE","      ",549],["T_COMMENT","\/\/ is a cache miss.\n",549],["T_WHITESPACE","      ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","pass",550],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test modification of referenced entity's configurable field.\"",550],",",["T_WHITESPACE"," ",550],["T_CONSTANT_ENCAPSED_STRING","'Debug'",550],")",";",["T_WHITESPACE","\n      ",550],["T_VARIABLE","$field_storage_name",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","entity",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getEntityTypeId",551],"(",")",["T_WHITESPACE"," ",551],".",["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","'.configurable_field'",551],";",["T_WHITESPACE","\n      ",551],["T_VARIABLE","$field_storage",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_STRING","FieldStorageConfig",552],["T_DOUBLE_COLON","::",552],["T_STRING","load",552],"(",["T_VARIABLE","$field_storage_name",552],")",";",["T_WHITESPACE","\n      ",552],["T_VARIABLE","$field_storage",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","save",553],"(",")",";",["T_WHITESPACE","\n      ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","verifyPageCache",554],"(",["T_VARIABLE","$referencing_entity_url",554],",",["T_WHITESPACE"," ",554],["T_CONSTANT_ENCAPSED_STRING","'MISS'",554],")",";",["T_WHITESPACE","\n      ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","verifyPageCache",555],"(",["T_VARIABLE","$listing_url",555],",",["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","'MISS'",555],")",";",["T_WHITESPACE","\n      ",555],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","verifyPageCache",556],"(",["T_VARIABLE","$empty_entity_listing_url",556],",",["T_WHITESPACE"," ",556],["T_CONSTANT_ENCAPSED_STRING","'HIT'",556],")",";",["T_WHITESPACE","\n      ",556],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","verifyPageCache",557],"(",["T_VARIABLE","$nonempty_entity_listing_url",557],",",["T_WHITESPACE"," ",557],["T_CONSTANT_ENCAPSED_STRING","'HIT'",557],")",";",["T_WHITESPACE","\n      ",557],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","verifyPageCache",558],"(",["T_VARIABLE","$non_referencing_entity_url",558],",",["T_WHITESPACE"," ",558],["T_CONSTANT_ENCAPSED_STRING","'HIT'",558],")",";",["T_WHITESPACE","\n\n      ",558],["T_COMMENT","\/\/ Verify cache hits.\n",560],["T_WHITESPACE","      ",561],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","verifyPageCache",561],"(",["T_VARIABLE","$referencing_entity_url",561],",",["T_WHITESPACE"," ",561],["T_CONSTANT_ENCAPSED_STRING","'HIT'",561],")",";",["T_WHITESPACE","\n      ",561],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","verifyPageCache",562],"(",["T_VARIABLE","$listing_url",562],",",["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'HIT'",562],")",";",["T_WHITESPACE","\n\n\n      ",562],["T_COMMENT","\/\/ Verify that after modifying a configurable field on the entity, there\n",565],["T_WHITESPACE","      ",566],["T_COMMENT","\/\/ is a cache miss.\n",566],["T_WHITESPACE","      ",567],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","pass",567],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test modification of referenced entity's configurable field.\"",567],",",["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'Debug'",567],")",";",["T_WHITESPACE","\n      ",567],["T_VARIABLE","$field_name",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","entity",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","getEntityTypeId",568],"(",")",["T_WHITESPACE"," ",568],".",["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","'.'",568],["T_WHITESPACE"," ",568],".",["T_WHITESPACE"," ",568],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","entity",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","bundle",568],"(",")",["T_WHITESPACE"," ",568],".",["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","'.configurable_field'",568],";",["T_WHITESPACE","\n      ",568],["T_VARIABLE","$field",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_STRING","FieldConfig",569],["T_DOUBLE_COLON","::",569],["T_STRING","load",569],"(",["T_VARIABLE","$field_name",569],")",";",["T_WHITESPACE","\n      ",569],["T_VARIABLE","$field",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","save",570],"(",")",";",["T_WHITESPACE","\n      ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","verifyPageCache",571],"(",["T_VARIABLE","$referencing_entity_url",571],",",["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","'MISS'",571],")",";",["T_WHITESPACE","\n      ",571],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","verifyPageCache",572],"(",["T_VARIABLE","$listing_url",572],",",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'MISS'",572],")",";",["T_WHITESPACE","\n      ",572],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","verifyPageCache",573],"(",["T_VARIABLE","$empty_entity_listing_url",573],",",["T_WHITESPACE"," ",573],["T_CONSTANT_ENCAPSED_STRING","'HIT'",573],")",";",["T_WHITESPACE","\n      ",573],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","verifyPageCache",574],"(",["T_VARIABLE","$nonempty_entity_listing_url",574],",",["T_WHITESPACE"," ",574],["T_CONSTANT_ENCAPSED_STRING","'HIT'",574],")",";",["T_WHITESPACE","\n      ",574],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","verifyPageCache",575],"(",["T_VARIABLE","$non_referencing_entity_url",575],",",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","'HIT'",575],")",";",["T_WHITESPACE","\n\n      ",575],["T_COMMENT","\/\/ Verify cache hits.\n",577],["T_WHITESPACE","      ",578],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","verifyPageCache",578],"(",["T_VARIABLE","$referencing_entity_url",578],",",["T_WHITESPACE"," ",578],["T_CONSTANT_ENCAPSED_STRING","'HIT'",578],")",";",["T_WHITESPACE","\n      ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","verifyPageCache",579],"(",["T_VARIABLE","$listing_url",579],",",["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","'HIT'",579],")",";",["T_WHITESPACE","\n    ",579],"}",["T_WHITESPACE","\n\n\n    ",580],["T_COMMENT","\/\/ Verify that after invalidating the entity's cache tag directly, there is\n",583],["T_WHITESPACE","    ",584],["T_COMMENT","\/\/ a cache miss for every route except the ones for the non-referencing\n",584],["T_WHITESPACE","    ",585],["T_COMMENT","\/\/ entity and the empty entity listing.\n",585],["T_WHITESPACE","    ",586],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","pass",586],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test invalidation of referenced entity's cache tag.\"",586],",",["T_WHITESPACE"," ",586],["T_CONSTANT_ENCAPSED_STRING","'Debug'",586],")",";",["T_WHITESPACE","\n    ",586],["T_STRING","Cache",587],["T_DOUBLE_COLON","::",587],["T_STRING","invalidateTags",587],"(",["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","entity",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","getCacheTagsToInvalidate",587],"(",")",")",";",["T_WHITESPACE","\n    ",587],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","verifyPageCache",588],"(",["T_VARIABLE","$referencing_entity_url",588],",",["T_WHITESPACE"," ",588],["T_CONSTANT_ENCAPSED_STRING","'MISS'",588],")",";",["T_WHITESPACE","\n    ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","verifyPageCache",589],"(",["T_VARIABLE","$listing_url",589],",",["T_WHITESPACE"," ",589],["T_CONSTANT_ENCAPSED_STRING","'MISS'",589],")",";",["T_WHITESPACE","\n    ",589],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","verifyPageCache",590],"(",["T_VARIABLE","$nonempty_entity_listing_url",590],",",["T_WHITESPACE"," ",590],["T_CONSTANT_ENCAPSED_STRING","'MISS'",590],")",";",["T_WHITESPACE","\n    ",590],["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","verifyPageCache",591],"(",["T_VARIABLE","$non_referencing_entity_url",591],",",["T_WHITESPACE"," ",591],["T_CONSTANT_ENCAPSED_STRING","'HIT'",591],")",";",["T_WHITESPACE","\n    ",591],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","verifyPageCache",592],"(",["T_VARIABLE","$empty_entity_listing_url",592],",",["T_WHITESPACE"," ",592],["T_CONSTANT_ENCAPSED_STRING","'HIT'",592],")",";",["T_WHITESPACE","\n\n    ",592],["T_COMMENT","\/\/ Verify cache hits.\n",594],["T_WHITESPACE","    ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","verifyPageCache",595],"(",["T_VARIABLE","$referencing_entity_url",595],",",["T_WHITESPACE"," ",595],["T_CONSTANT_ENCAPSED_STRING","'HIT'",595],")",";",["T_WHITESPACE","\n    ",595],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","verifyPageCache",596],"(",["T_VARIABLE","$listing_url",596],",",["T_WHITESPACE"," ",596],["T_CONSTANT_ENCAPSED_STRING","'HIT'",596],")",";",["T_WHITESPACE","\n    ",596],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","verifyPageCache",597],"(",["T_VARIABLE","$nonempty_entity_listing_url",597],",",["T_WHITESPACE"," ",597],["T_CONSTANT_ENCAPSED_STRING","'HIT'",597],")",";",["T_WHITESPACE","\n\n    ",597],["T_COMMENT","\/\/ Verify that after invalidating the entity's list cache tag directly,\n",599],["T_WHITESPACE","    ",600],["T_COMMENT","\/\/ there is a cache miss for both the empty entity listing and the non-empty\n",600],["T_WHITESPACE","    ",601],["T_COMMENT","\/\/ entity listing routes, but not for other routes.\n",601],["T_WHITESPACE","    ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","pass",602],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test invalidation of referenced entity's list cache tag.\"",602],",",["T_WHITESPACE"," ",602],["T_CONSTANT_ENCAPSED_STRING","'Debug'",602],")",";",["T_WHITESPACE","\n    ",602],["T_STRING","Cache",603],["T_DOUBLE_COLON","::",603],["T_STRING","invalidateTags",603],"(",["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","entity",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","getEntityType",603],"(",")",["T_OBJECT_OPERATOR","->",603],["T_STRING","getListCacheTags",603],"(",")",")",";",["T_WHITESPACE","\n    ",603],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","verifyPageCache",604],"(",["T_VARIABLE","$empty_entity_listing_url",604],",",["T_WHITESPACE"," ",604],["T_CONSTANT_ENCAPSED_STRING","'MISS'",604],")",";",["T_WHITESPACE","\n    ",604],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","verifyPageCache",605],"(",["T_VARIABLE","$nonempty_entity_listing_url",605],",",["T_WHITESPACE"," ",605],["T_CONSTANT_ENCAPSED_STRING","'MISS'",605],")",";",["T_WHITESPACE","\n    ",605],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","verifyPageCache",606],"(",["T_VARIABLE","$referencing_entity_url",606],",",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","'HIT'",606],")",";",["T_WHITESPACE","\n    ",606],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","verifyPageCache",607],"(",["T_VARIABLE","$non_referencing_entity_url",607],",",["T_WHITESPACE"," ",607],["T_CONSTANT_ENCAPSED_STRING","'HIT'",607],")",";",["T_WHITESPACE","\n    ",607],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","verifyPageCache",608],"(",["T_VARIABLE","$listing_url",608],",",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","'HIT'",608],")",";",["T_WHITESPACE","\n\n    ",608],["T_COMMENT","\/\/ Verify cache hits.\n",610],["T_WHITESPACE","    ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","verifyPageCache",611],"(",["T_VARIABLE","$empty_entity_listing_url",611],",",["T_WHITESPACE"," ",611],["T_CONSTANT_ENCAPSED_STRING","'HIT'",611],")",";",["T_WHITESPACE","\n    ",611],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","verifyPageCache",612],"(",["T_VARIABLE","$nonempty_entity_listing_url",612],",",["T_WHITESPACE"," ",612],["T_CONSTANT_ENCAPSED_STRING","'HIT'",612],")",";",["T_WHITESPACE","\n\n\n    ",612],["T_IF","if",615],["T_WHITESPACE"," ",615],"(","!",["T_EMPTY","empty",615],"(",["T_VARIABLE","$view_cache_tag",615],")",")",["T_WHITESPACE"," ",615],"{",["T_WHITESPACE","\n      ",615],["T_COMMENT","\/\/ Verify that after invalidating the generic entity type's view cache tag\n",616],["T_WHITESPACE","      ",617],["T_COMMENT","\/\/ directly, there is a cache miss for both the referencing entity, and the\n",617],["T_WHITESPACE","      ",618],["T_COMMENT","\/\/ listing of referencing entities, but not for other routes.\n",618],["T_WHITESPACE","      ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","pass",619],"(",["T_CONSTANT_ENCAPSED_STRING","\"Test invalidation of referenced entity's 'view' cache tag.\"",619],",",["T_WHITESPACE"," ",619],["T_CONSTANT_ENCAPSED_STRING","'Debug'",619],")",";",["T_WHITESPACE","\n      ",619],["T_STRING","Cache",620],["T_DOUBLE_COLON","::",620],["T_STRING","invalidateTags",620],"(",["T_VARIABLE","$view_cache_tag",620],")",";",["T_WHITESPACE","\n      ",620],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","verifyPageCache",621],"(",["T_VARIABLE","$referencing_entity_url",621],",",["T_WHITESPACE"," ",621],["T_CONSTANT_ENCAPSED_STRING","'MISS'",621],")",";",["T_WHITESPACE","\n      ",621],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","verifyPageCache",622],"(",["T_VARIABLE","$listing_url",622],",",["T_WHITESPACE"," ",622],["T_CONSTANT_ENCAPSED_STRING","'MISS'",622],")",";",["T_WHITESPACE","\n      ",622],["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","verifyPageCache",623],"(",["T_VARIABLE","$non_referencing_entity_url",623],",",["T_WHITESPACE"," ",623],["T_CONSTANT_ENCAPSED_STRING","'HIT'",623],")",";",["T_WHITESPACE","\n      ",623],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","verifyPageCache",624],"(",["T_VARIABLE","$empty_entity_listing_url",624],",",["T_WHITESPACE"," ",624],["T_CONSTANT_ENCAPSED_STRING","'HIT'",624],")",";",["T_WHITESPACE","\n      ",624],["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","verifyPageCache",625],"(",["T_VARIABLE","$nonempty_entity_listing_url",625],",",["T_WHITESPACE"," ",625],["T_CONSTANT_ENCAPSED_STRING","'HIT'",625],")",";",["T_WHITESPACE","\n\n      ",625],["T_COMMENT","\/\/ Verify cache hits.\n",627],["T_WHITESPACE","      ",628],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","verifyPageCache",628],"(",["T_VARIABLE","$referencing_entity_url",628],",",["T_WHITESPACE"," ",628],["T_CONSTANT_ENCAPSED_STRING","'HIT'",628],")",";",["T_WHITESPACE","\n      ",628],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","verifyPageCache",629],"(",["T_VARIABLE","$listing_url",629],",",["T_WHITESPACE"," ",629],["T_CONSTANT_ENCAPSED_STRING","'HIT'",629],")",";",["T_WHITESPACE","\n    ",629],"}",["T_WHITESPACE","\n\n    ",630],["T_COMMENT","\/\/ Verify that after deleting the entity, there is a cache miss for every\n",632],["T_WHITESPACE","    ",633],["T_COMMENT","\/\/ route except for the non-referencing entity one.\n",633],["T_WHITESPACE","    ",634],["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","pass",634],"(",["T_CONSTANT_ENCAPSED_STRING","'Test deletion of referenced entity.'",634],",",["T_WHITESPACE"," ",634],["T_CONSTANT_ENCAPSED_STRING","'Debug'",634],")",";",["T_WHITESPACE","\n    ",634],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","entity",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","delete",635],"(",")",";",["T_WHITESPACE","\n    ",635],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","verifyPageCache",636],"(",["T_VARIABLE","$referencing_entity_url",636],",",["T_WHITESPACE"," ",636],["T_CONSTANT_ENCAPSED_STRING","'MISS'",636],")",";",["T_WHITESPACE","\n    ",636],["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","verifyPageCache",637],"(",["T_VARIABLE","$listing_url",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'MISS'",637],")",";",["T_WHITESPACE","\n    ",637],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","verifyPageCache",638],"(",["T_VARIABLE","$empty_entity_listing_url",638],",",["T_WHITESPACE"," ",638],["T_CONSTANT_ENCAPSED_STRING","'MISS'",638],")",";",["T_WHITESPACE","\n    ",638],["T_VARIABLE","$this",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","verifyPageCache",639],"(",["T_VARIABLE","$nonempty_entity_listing_url",639],",",["T_WHITESPACE"," ",639],["T_CONSTANT_ENCAPSED_STRING","'MISS'",639],")",";",["T_WHITESPACE","\n    ",639],["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","verifyPageCache",640],"(",["T_VARIABLE","$non_referencing_entity_url",640],",",["T_WHITESPACE"," ",640],["T_CONSTANT_ENCAPSED_STRING","'HIT'",640],")",";",["T_WHITESPACE","\n\n    ",640],["T_COMMENT","\/\/ Verify cache hits.\n",642],["T_WHITESPACE","    ",643],["T_VARIABLE","$referencing_entity_cache_tags",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_STRING","Cache",643],["T_DOUBLE_COLON","::",643],["T_STRING","mergeTags",643],"(",["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","referencingEntity",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","getCacheTags",643],"(",")",",",["T_WHITESPACE"," ",643],["T_NS_SEPARATOR","\\",643],["T_STRING","Drupal",643],["T_DOUBLE_COLON","::",643],["T_STRING","entityManager",643],"(",")",["T_OBJECT_OPERATOR","->",643],["T_STRING","getViewBuilder",643],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",643],")",["T_OBJECT_OPERATOR","->",643],["T_STRING","getCacheTags",643],"(",")",")",";",["T_WHITESPACE","\n    ",643],["T_VARIABLE","$referencing_entity_cache_tags",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_STRING","Cache",644],["T_DOUBLE_COLON","::",644],["T_STRING","mergeTags",644],"(",["T_VARIABLE","$referencing_entity_cache_tags",644],",",["T_WHITESPACE"," ",644],"[",["T_CONSTANT_ENCAPSED_STRING","'rendered'",644],"]",")",";",["T_WHITESPACE","\n\n    ",644],["T_VARIABLE","$nonempty_entity_listing_cache_tags",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],["T_STRING","Cache",646],["T_DOUBLE_COLON","::",646],["T_STRING","mergeTags",646],"(",["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","entity",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","getEntityType",646],"(",")",["T_OBJECT_OPERATOR","->",646],["T_STRING","getListCacheTags",646],"(",")",",",["T_WHITESPACE"," ",646],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","getAdditionalCacheTagsForEntityListing",646],"(",")",")",";",["T_WHITESPACE","\n    ",646],["T_VARIABLE","$nonempty_entity_listing_cache_tags",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_STRING","Cache",647],["T_DOUBLE_COLON","::",647],["T_STRING","mergeTags",647],"(",["T_VARIABLE","$nonempty_entity_listing_cache_tags",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$page_cache_tags",647],")",";",["T_WHITESPACE","\n\n    ",647],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","verifyPageCache",649],"(",["T_VARIABLE","$referencing_entity_url",649],",",["T_WHITESPACE"," ",649],["T_CONSTANT_ENCAPSED_STRING","'HIT'",649],",",["T_WHITESPACE"," ",649],["T_STRING","Cache",649],["T_DOUBLE_COLON","::",649],["T_STRING","mergeTags",649],"(",["T_VARIABLE","$referencing_entity_cache_tags",649],",",["T_WHITESPACE"," ",649],["T_VARIABLE","$page_cache_tags",649],")",")",";",["T_WHITESPACE","\n    ",649],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","verifyPageCache",650],"(",["T_VARIABLE","$listing_url",650],",",["T_WHITESPACE"," ",650],["T_CONSTANT_ENCAPSED_STRING","'HIT'",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$page_cache_tags",650],")",";",["T_WHITESPACE","\n    ",650],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","verifyPageCache",651],"(",["T_VARIABLE","$empty_entity_listing_url",651],",",["T_WHITESPACE"," ",651],["T_CONSTANT_ENCAPSED_STRING","'HIT'",651],",",["T_WHITESPACE"," ",651],["T_VARIABLE","$empty_entity_listing_cache_tags",651],")",";",["T_WHITESPACE","\n    ",651],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","verifyPageCache",652],"(",["T_VARIABLE","$nonempty_entity_listing_url",652],",",["T_WHITESPACE"," ",652],["T_CONSTANT_ENCAPSED_STRING","'HIT'",652],",",["T_WHITESPACE"," ",652],["T_VARIABLE","$nonempty_entity_listing_cache_tags",652],")",";",["T_WHITESPACE","\n  ",652],"}",["T_WHITESPACE","\n\n  ",653],["T_DOC_COMMENT","\/**\n   * Creates a cache ID from a list of cache keys and a set of cache contexts.\n   *\n   * @param string[] $keys\n   *   A list of cache keys.\n   * @param string[] $contexts\n   *   A set of cache contexts.\n   *\n   * @return string\n   *   The cache ID string.\n   *\/",655],["T_WHITESPACE","\n  ",665],["T_PROTECTED","protected",666],["T_WHITESPACE"," ",666],["T_FUNCTION","function",666],["T_WHITESPACE"," ",666],["T_STRING","createCacheId",666],"(",["T_ARRAY","array",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$keys",666],",",["T_WHITESPACE"," ",666],["T_ARRAY","array",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$contexts",666],")",["T_WHITESPACE"," ",666],"{",["T_WHITESPACE","\n    ",666],["T_VARIABLE","$cid_parts",667],["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_VARIABLE","$keys",667],";",["T_WHITESPACE","\n\n    ",667],["T_VARIABLE","$contexts",669],["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],["T_NS_SEPARATOR","\\",669],["T_STRING","Drupal",669],["T_DOUBLE_COLON","::",669],["T_STRING","service",669],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_contexts_manager'",669],")",["T_OBJECT_OPERATOR","->",669],["T_STRING","convertTokensToKeys",669],"(",["T_VARIABLE","$contexts",669],")",";",["T_WHITESPACE","\n    ",669],["T_VARIABLE","$cid_parts",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_STRING","array_merge",670],"(",["T_VARIABLE","$cid_parts",670],",",["T_WHITESPACE"," ",670],["T_VARIABLE","$contexts",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","getKeys",670],"(",")",")",";",["T_WHITESPACE","\n\n    ",670],["T_RETURN","return",672],["T_WHITESPACE"," ",672],["T_STRING","implode",672],"(",["T_CONSTANT_ENCAPSED_STRING","':'",672],",",["T_WHITESPACE"," ",672],["T_VARIABLE","$cid_parts",672],")",";",["T_WHITESPACE","\n  ",672],"}",["T_WHITESPACE","\n\n  ",673],["T_DOC_COMMENT","\/**\n   * Verify that a given render cache entry exists, with the correct cache tags.\n   *\n   * @param string $cid\n   *   The render cache item ID.\n   * @param array $tags\n   *   An array of expected cache tags.\n   * @param string|null $redirected_cid\n   *   (optional) The redirected render cache item ID.\n   *\/",675],["T_WHITESPACE","\n  ",684],["T_PROTECTED","protected",685],["T_WHITESPACE"," ",685],["T_FUNCTION","function",685],["T_WHITESPACE"," ",685],["T_STRING","verifyRenderCache",685],"(",["T_VARIABLE","$cid",685],",",["T_WHITESPACE"," ",685],["T_ARRAY","array",685],["T_WHITESPACE"," ",685],["T_VARIABLE","$tags",685],",",["T_WHITESPACE"," ",685],["T_VARIABLE","$redirected_cid",685],["T_WHITESPACE"," ",685],"=",["T_WHITESPACE"," ",685],["T_STRING","NULL",685],")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n    ",685],["T_COMMENT","\/\/ Also verify the existence of an entity render cache entry.\n",686],["T_WHITESPACE","    ",687],["T_VARIABLE","$cache_entry",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_NS_SEPARATOR","\\",687],["T_STRING","Drupal",687],["T_DOUBLE_COLON","::",687],["T_STRING","cache",687],"(",["T_CONSTANT_ENCAPSED_STRING","'render'",687],")",["T_OBJECT_OPERATOR","->",687],["T_STRING","get",687],"(",["T_VARIABLE","$cid",687],")",";",["T_WHITESPACE","\n    ",687],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","assertTrue",688],"(",["T_VARIABLE","$cache_entry",688],",",["T_WHITESPACE"," ",688],["T_CONSTANT_ENCAPSED_STRING","'A render cache entry exists.'",688],")",";",["T_WHITESPACE","\n    ",688],["T_STRING","sort",689],"(",["T_VARIABLE","$cache_entry",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","tags",689],")",";",["T_WHITESPACE","\n    ",689],["T_STRING","sort",690],"(",["T_VARIABLE","$tags",690],")",";",["T_WHITESPACE","\n    ",690],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","assertIdentical",691],"(",["T_VARIABLE","$cache_entry",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","tags",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$tags",691],")",";",["T_WHITESPACE","\n    ",691],["T_VARIABLE","$is_redirecting_cache_item",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_ISSET","isset",692],"(",["T_VARIABLE","$cache_entry",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","data",692],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache_redirect'",692],"]",")",";",["T_WHITESPACE","\n    ",692],["T_IF","if",693],["T_WHITESPACE"," ",693],"(",["T_VARIABLE","$redirected_cid",693],["T_WHITESPACE"," ",693],["T_IS_IDENTICAL","===",693],["T_WHITESPACE"," ",693],["T_STRING","NULL",693],")",["T_WHITESPACE"," ",693],"{",["T_WHITESPACE","\n      ",693],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","assertFalse",694],"(",["T_VARIABLE","$is_redirecting_cache_item",694],",",["T_WHITESPACE"," ",694],["T_CONSTANT_ENCAPSED_STRING","'Render cache entry is not a redirect.'",694],")",";",["T_WHITESPACE","\n      ",694],["T_COMMENT","\/\/ If this is a redirecting cache item unlike we expected, log it.\n",695],["T_WHITESPACE","      ",696],["T_IF","if",696],["T_WHITESPACE"," ",696],"(",["T_VARIABLE","$is_redirecting_cache_item",696],")",["T_WHITESPACE"," ",696],"{",["T_WHITESPACE","\n        ",696],["T_STRING","debug",697],"(",["T_VARIABLE","$cache_entry",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","data",697],")",";",["T_WHITESPACE","\n      ",697],"}",["T_WHITESPACE","\n    ",698],"}",["T_WHITESPACE","\n    ",699],["T_ELSE","else",700],["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n      ",700],["T_COMMENT","\/\/ Verify that $cid contains a cache redirect.\n",701],["T_WHITESPACE","      ",702],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","assertTrue",702],"(",["T_VARIABLE","$is_redirecting_cache_item",702],",",["T_WHITESPACE"," ",702],["T_CONSTANT_ENCAPSED_STRING","'Render cache entry is a redirect.'",702],")",";",["T_WHITESPACE","\n      ",702],["T_COMMENT","\/\/ If this is not a redirecting cache item unlike we expected, log it.\n",703],["T_WHITESPACE","      ",704],["T_IF","if",704],["T_WHITESPACE"," ",704],"(","!",["T_VARIABLE","$is_redirecting_cache_item",704],")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n        ",704],["T_STRING","debug",705],"(",["T_VARIABLE","$cache_entry",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","data",705],")",";",["T_WHITESPACE","\n      ",705],"}",["T_WHITESPACE","\n      ",706],["T_COMMENT","\/\/ Verify that the cache redirect points to the expected CID.\n",707],["T_WHITESPACE","      ",708],["T_VARIABLE","$redirect_cache_metadata",708],["T_WHITESPACE"," ",708],"=",["T_WHITESPACE"," ",708],["T_VARIABLE","$cache_entry",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","data",708],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",708],"]",";",["T_WHITESPACE","\n      ",708],["T_VARIABLE","$actual_redirection_cid",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","createCacheId",709],"(",["T_WHITESPACE","\n        ",709],["T_VARIABLE","$redirect_cache_metadata",710],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",710],"]",",",["T_WHITESPACE","\n        ",710],["T_VARIABLE","$redirect_cache_metadata",711],"[",["T_CONSTANT_ENCAPSED_STRING","'contexts'",711],"]",["T_WHITESPACE","\n      ",711],")",";",["T_WHITESPACE","\n      ",712],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","assertIdentical",713],"(",["T_VARIABLE","$redirected_cid",713],",",["T_WHITESPACE"," ",713],["T_VARIABLE","$actual_redirection_cid",713],")",";",["T_WHITESPACE","\n      ",713],["T_COMMENT","\/\/ Finally, verify that the redirected CID exists and has the same cache\n",714],["T_WHITESPACE","      ",715],["T_COMMENT","\/\/ tags.\n",715],["T_WHITESPACE","      ",716],["T_VARIABLE","$this",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","verifyRenderCache",716],"(",["T_VARIABLE","$redirected_cid",716],",",["T_WHITESPACE"," ",716],["T_VARIABLE","$tags",716],")",";",["T_WHITESPACE","\n    ",716],"}",["T_WHITESPACE","\n  ",717],"}",["T_WHITESPACE","\n\n",718],"}",["T_WHITESPACE","\n",720]]
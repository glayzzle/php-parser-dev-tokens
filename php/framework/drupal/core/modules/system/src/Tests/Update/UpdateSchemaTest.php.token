[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Update",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Url",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests that update hooks are properly run.\n *\n * @group Update\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","UpdateSchemaTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","WebTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_STATIC","static",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$modules",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],"[",["T_CONSTANT_ENCAPSED_STRING","'update_test_schema'",18],"]",";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\user\\UserInterface\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$user",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * The update URL.\n   *\n   * @var string\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$updateUrl",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","setUp",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_STRING","parent",36],["T_DOUBLE_COLON","::",36],["T_STRING","setUp",36],"(",")",";",["T_WHITESPACE","\n\n    ",36],["T_REQUIRE_ONCE","require_once",38],["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","root",38],"(",")",["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'\/core\/includes\/update.inc'",38],";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","user",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","drupalCreateUser",39],"(","[",["T_CONSTANT_ENCAPSED_STRING","'administer software updates'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'access site in maintenance mode'",39],"]",")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","updateUrl",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","Url",40],["T_DOUBLE_COLON","::",40],["T_STRING","fromRoute",40],"(",["T_CONSTANT_ENCAPSED_STRING","'system.db_update'",40],")",";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Tests that update hooks are properly run.\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testUpdateHooks",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_COMMENT","\/\/ Verify that the 8000 schema is in place.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertEqual",48],"(",["T_STRING","drupal_get_installed_schema_version",48],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test_schema'",48],")",",",["T_WHITESPACE"," ",48],["T_LNUMBER","8000",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertFalse",49],"(",["T_STRING","db_index_exists",49],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test_schema_table'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'test'",49],")",",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Version 8000 of the update_test_schema module is installed.'",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Increment the schema version.\n",51],["T_WHITESPACE","    ",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Drupal",52],["T_DOUBLE_COLON","::",52],["T_STRING","state",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","set",52],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test_schema_version'",52],",",["T_WHITESPACE"," ",52],["T_LNUMBER","8001",52],")",";",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalLogin",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","user",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","drupalGet",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","updateUrl",55],",",["T_WHITESPACE"," ",55],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_STRING","TRUE",55],"]",")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","clickLink",56],"(",["T_STRING","t",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Continue'",56],")",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertRaw",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Schema version 8001.'",57],")",";",["T_WHITESPACE","\n    ",57],["T_COMMENT","\/\/ Run the update hooks.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","clickLink",59],"(",["T_STRING","t",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Apply pending updates'",59],")",")",";",["T_WHITESPACE","\n\n    ",59],["T_COMMENT","\/\/ Ensure schema has changed.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertEqual",62],"(",["T_STRING","drupal_get_installed_schema_version",62],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test_schema'",62],",",["T_WHITESPACE"," ",62],["T_STRING","TRUE",62],")",",",["T_WHITESPACE"," ",62],["T_LNUMBER","8001",62],")",";",["T_WHITESPACE","\n    ",62],["T_COMMENT","\/\/ Ensure the index was added for column a.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertTrue",64],"(",["T_STRING","db_index_exists",64],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test_schema_table'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'test'",64],")",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Version 8001 of the update_test_schema module is installed.'",64],")",";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n",65],"}",["T_WHITESPACE","\n",67]]
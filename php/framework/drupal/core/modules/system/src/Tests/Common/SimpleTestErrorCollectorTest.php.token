[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Common",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","simpletest",5],["T_NS_SEPARATOR","\\",5],["T_STRING","WebTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests SimpleTest error and exception collector.\n *\n * @group Common\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","SimpleTestErrorCollectorTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","WebTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",["T_CONSTANT_ENCAPSED_STRING","'system_test'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'error_test'",19],")",";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Errors triggered during the test.\n   *\n   * Errors are intercepted by the overridden implementation\n   * of Drupal\\simpletest\\WebTestBase::error() below.\n   *\n   * @var Array\n   *\/",21],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$collectedErrors",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",")",";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Tests that simpletest collects errors from the tested site.\n   *\/",31],["T_WHITESPACE","\n  ",33],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","testErrorCollect",34],"(",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","collectedErrors",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalGet",36],"(",["T_CONSTANT_ENCAPSED_STRING","'error-test\/generate-warnings-with-report'",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","assertEqual",37],"(",["T_STRING","count",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","collectedErrors",37],")",",",["T_WHITESPACE"," ",37],["T_LNUMBER","3",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'Three errors were collected'",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_IF","if",39],["T_WHITESPACE"," ",39],"(",["T_STRING","count",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","collectedErrors",39],")",["T_WHITESPACE"," ",39],["T_IS_EQUAL","==",39],["T_WHITESPACE"," ",39],["T_LNUMBER","3",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n      ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertError",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","collectedErrors",40],"[",["T_LNUMBER","0",40],"]",",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Notice'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\error_test\\Controller\\ErrorTestController->generateWarnings()'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'ErrorTestController.php'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Undefined variable: bananas'",40],")",";",["T_WHITESPACE","\n      ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertError",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","collectedErrors",41],"[",["T_LNUMBER","1",41],"]",",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Warning'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\error_test\\Controller\\ErrorTestController->generateWarnings()'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'ErrorTestController.php'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Division by zero'",41],")",";",["T_WHITESPACE","\n      ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertError",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","collectedErrors",42],"[",["T_LNUMBER","2",42],"]",",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'User warning'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\error_test\\Controller\\ErrorTestController->generateWarnings()'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'ErrorTestController.php'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Drupal &amp; awesome'",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n    ",43],["T_ELSE","else",44],["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n      ",44],["T_COMMENT","\/\/ Give back the errors to the log report.\n",45],["T_WHITESPACE","      ",46],["T_FOREACH","foreach",46],["T_WHITESPACE"," ",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","collectedErrors",46],["T_WHITESPACE"," ",46],["T_AS","as",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$error",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n        ",46],["T_STRING","parent",47],["T_DOUBLE_COLON","::",47],["T_STRING","error",47],"(",["T_VARIABLE","$error",47],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",47],"]",",",["T_WHITESPACE"," ",47],["T_VARIABLE","$error",47],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",47],"]",",",["T_WHITESPACE"," ",47],["T_VARIABLE","$error",47],"[",["T_CONSTANT_ENCAPSED_STRING","'caller'",47],"]",")",";",["T_WHITESPACE","\n      ",47],"}",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n  ",49],"}",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * Stores errors into an array.\n   *\n   * This test class is trying to verify that simpletest correctly sees errors\n   * and warnings. However, it can't generate errors and warnings that\n   * propagate up to the testing framework itself, or these tests would always\n   * fail. So, this special copy of error() doesn't propagate the errors up\n   * the class hierarchy. It just stuffs them into a protected collectedErrors\n   * array for various assertions to inspect.\n   *\/",52],["T_WHITESPACE","\n  ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","error",62],"(",["T_VARIABLE","$message",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","''",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$group",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Other'",62],",",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$caller",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","NULL",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n    ",62],["T_COMMENT","\/\/ Due to a WTF elsewhere, simpletest treats debug() and verbose()\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ messages as if they were an 'error'. But, we don't want to collect\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ those here. This function just wants to collect the real errors (PHP\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ notices, PHP fatal errors, etc.), and let all the 'errors' from the\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ 'User notice' group bubble up to the parent classes to be handled (and\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/ eventually displayed) as normal.\n",68],["T_WHITESPACE","    ",69],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$group",69],["T_WHITESPACE"," ",69],["T_IS_EQUAL","==",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'User notice'",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_STRING","parent",70],["T_DOUBLE_COLON","::",70],["T_STRING","error",70],"(",["T_VARIABLE","$message",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$group",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$caller",70],")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n    ",71],["T_COMMENT","\/\/ Everything else should be collected but not propagated.\n",72],["T_WHITESPACE","    ",73],["T_ELSE","else",73],["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","collectedErrors",74],"[","]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_WHITESPACE","\n        ",74],["T_CONSTANT_ENCAPSED_STRING","'message'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$message",75],",",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'group'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$group",76],",",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'caller'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$caller",77],["T_WHITESPACE","\n      ",77],")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * Asserts that a collected error matches what we are expecting.\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","assertError",85],"(",["T_VARIABLE","$error",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$group",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$function",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$file",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$message",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","NULL",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertEqual",86],"(",["T_VARIABLE","$error",86],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",86],"]",",",["T_WHITESPACE"," ",86],["T_VARIABLE","$group",86],",",["T_WHITESPACE"," ",86],["T_STRING","format_string",86],"(",["T_CONSTANT_ENCAPSED_STRING","\"Group was %group\"",86],",",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_CONSTANT_ENCAPSED_STRING","'%group'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$group",86],")",")",")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertEqual",87],"(",["T_VARIABLE","$error",87],"[",["T_CONSTANT_ENCAPSED_STRING","'caller'",87],"]","[",["T_CONSTANT_ENCAPSED_STRING","'function'",87],"]",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$function",87],",",["T_WHITESPACE"," ",87],["T_STRING","format_string",87],"(",["T_CONSTANT_ENCAPSED_STRING","\"Function was %function\"",87],",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'%function'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$function",87],")",")",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertEqual",88],"(",["T_STRING","drupal_basename",88],"(",["T_VARIABLE","$error",88],"[",["T_CONSTANT_ENCAPSED_STRING","'caller'",88],"]","[",["T_CONSTANT_ENCAPSED_STRING","'file'",88],"]",")",",",["T_WHITESPACE"," ",88],["T_VARIABLE","$file",88],",",["T_WHITESPACE"," ",88],["T_STRING","format_string",88],"(",["T_CONSTANT_ENCAPSED_STRING","\"File was %file\"",88],",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'%file'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$file",88],")",")",")",";",["T_WHITESPACE","\n    ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_ISSET","isset",89],"(",["T_VARIABLE","$message",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertEqual",90],"(",["T_VARIABLE","$error",90],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",90],"]",",",["T_WHITESPACE"," ",90],["T_VARIABLE","$message",90],",",["T_WHITESPACE"," ",90],["T_STRING","format_string",90],"(",["T_CONSTANT_ENCAPSED_STRING","\"Message was %message\"",90],",",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_CONSTANT_ENCAPSED_STRING","'%message'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$message",90],")",")",")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n",92],"}",["T_WHITESPACE","\n",94]]
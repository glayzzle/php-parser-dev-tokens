[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Extension",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Extension",5],["T_NS_SEPARATOR","\\",5],["T_STRING","MissingDependencyException",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Extension",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ModuleUninstallValidatorException",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","entity_test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityTest",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTestBase",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests ModuleHandler functionality.\n *\n * @group Extension\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ModuleHandlerTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","KernelTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",17],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],"[",["T_CONSTANT_ENCAPSED_STRING","'system'",20],"]",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","setUp",25],"(",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_STRING","parent",26],["T_DOUBLE_COLON","::",26],["T_STRING","setUp",26],"(",")",";",["T_WHITESPACE","\n\n    ",26],["T_COMMENT","\/\/ @todo ModuleInstaller calls system_rebuild_module_data which is part of\n",28],["T_WHITESPACE","    ",29],["T_COMMENT","\/\/   system.module, see https:\/\/www.drupal.org\/node\/2208429.\n",29],["T_WHITESPACE","    ",30],["T_INCLUDE_ONCE","include_once",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","root",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'\/core\/modules\/system\/system.module'",30],";",["T_WHITESPACE","\n\n    ",30],["T_COMMENT","\/\/ Set up the state values so we know where to find the files when running\n",32],["T_WHITESPACE","    ",33],["T_COMMENT","\/\/ drupal_get_filename().\n",33],["T_WHITESPACE","    ",34],["T_COMMENT","\/\/ @todo Remove as part of https:\/\/www.drupal.org\/node\/2186491\n",34],["T_WHITESPACE","    ",35],["T_STRING","system_rebuild_module_data",35],"(",")",";",["T_WHITESPACE","\n  ",35],"}",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * The basic functionality of retrieving enabled modules.\n   *\/",38],["T_WHITESPACE","\n  ",40],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","testModuleList",41],"(",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$module_list",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],"[",["T_CONSTANT_ENCAPSED_STRING","'system'",42],"]",";",["T_WHITESPACE","\n\n    ",42],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","assertModuleList",44],"(",["T_VARIABLE","$module_list",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'Initial'",44],")",";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ Try to install a new module.\n",46],["T_WHITESPACE","    ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","moduleInstaller",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","install",47],"(",["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'ban'",47],")",")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$module_list",48],"[","]",["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'ban'",48],";",["T_WHITESPACE","\n    ",48],["T_STRING","sort",49],"(",["T_VARIABLE","$module_list",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertModuleList",50],"(",["T_VARIABLE","$module_list",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'After adding a module'",50],")",";",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/\/ Try to mess with the module weights.\n",52],["T_WHITESPACE","    ",53],["T_STRING","module_set_weight",53],"(",["T_CONSTANT_ENCAPSED_STRING","'ban'",53],",",["T_WHITESPACE"," ",53],["T_LNUMBER","20",53],")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Move ban to the end of the array.\n",55],["T_WHITESPACE","    ",56],["T_UNSET","unset",56],"(",["T_VARIABLE","$module_list",56],"[",["T_STRING","array_search",56],"(",["T_CONSTANT_ENCAPSED_STRING","'ban'",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$module_list",56],")","]",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$module_list",57],"[","]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'ban'",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertModuleList",58],"(",["T_VARIABLE","$module_list",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'After changing weights'",58],")",";",["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/\/ Test the fixed list feature.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$fixed_list",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'system'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/system\/system.module'",62],",",["T_WHITESPACE","\n      ",62],["T_CONSTANT_ENCAPSED_STRING","'menu'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/menu\/menu.module'",63],",",["T_WHITESPACE","\n    ",63],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","moduleHandler",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","setModuleList",65],"(",["T_VARIABLE","$fixed_list",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$new_module_list",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","array_combine",66],"(",["T_STRING","array_keys",66],"(",["T_VARIABLE","$fixed_list",66],")",",",["T_WHITESPACE"," ",66],["T_STRING","array_keys",66],"(",["T_VARIABLE","$fixed_list",66],")",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertModuleList",67],"(",["T_VARIABLE","$new_module_list",67],",",["T_WHITESPACE"," ",67],["T_STRING","t",67],"(",["T_CONSTANT_ENCAPSED_STRING","'When using a fixed list'",67],")",")",";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * Assert that the extension handler returns the expected values.\n   *\n   * @param array $expected_values\n   *   The expected values, sorted by weight and module name.\n   * @param $condition\n   *\/",70],["T_WHITESPACE","\n  ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","assertModuleList",77],"(",["T_ARRAY","array",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$expected_values",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$condition",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$expected_values",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","array_values",78],"(",["T_STRING","array_unique",78],"(",["T_VARIABLE","$expected_values",78],")",")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$enabled_modules",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","array_keys",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","container",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","get",79],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getModuleList",79],"(",")",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertEqual",80],"(",["T_VARIABLE","$expected_values",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$enabled_modules",80],",",["T_WHITESPACE"," ",80],["T_STRING","format_string",80],"(",["T_CONSTANT_ENCAPSED_STRING","'@condition: extension handler returns correct results'",80],",",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_CONSTANT_ENCAPSED_STRING","'@condition'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$condition",80],")",")",")",";",["T_WHITESPACE","\n  ",80],"}",["T_WHITESPACE","\n\n  ",81],["T_DOC_COMMENT","\/**\n   * Tests dependency resolution.\n   *\n   * Intentionally using fake dependencies added via hook_system_info_alter()\n   * for modules that normally do not have any dependencies.\n   *\n   * To simplify things further, all of the manipulated modules are either\n   * purely UI-facing or live at the \"bottom\" of all dependency chains.\n   *\n   * @see module_test_system_info_alter()\n   * @see https:\/\/www.drupal.org\/files\/issues\/dep.gv__0.png\n   *\/",83],["T_WHITESPACE","\n  ",94],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","testDependencyResolution",95],"(",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","enableModules",96],"(",["T_ARRAY","array",96],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test'",96],")",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertTrue",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","moduleHandler",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","moduleExists",97],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test'",97],")",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'Test module is enabled.'",97],")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ Ensure that modules are not enabled.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertFalse",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","moduleHandler",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","moduleExists",100],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",100],")",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'Color module is disabled.'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertFalse",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","moduleHandler",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","moduleExists",101],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",101],")",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Config module is disabled.'",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertFalse",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","moduleHandler",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","moduleExists",102],"(",["T_CONSTANT_ENCAPSED_STRING","'help'",102],")",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'Help module is disabled.'",102],")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Create a missing fake dependency.\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ Color will depend on Config, which depends on a non-existing module Foo.\n",105],["T_WHITESPACE","    ",106],["T_COMMENT","\/\/ Nothing should be installed.\n",106],["T_WHITESPACE","    ",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Drupal",107],["T_DOUBLE_COLON","::",107],["T_STRING","state",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","set",107],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test.dependency'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'missing dependency'",107],")",";",["T_WHITESPACE","\n    ",107],["T_STRING","drupal_static_reset",108],"(",["T_CONSTANT_ENCAPSED_STRING","'system_rebuild_module_data'",108],")",";",["T_WHITESPACE","\n\n    ",108],["T_TRY","try",110],["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n      ",110],["T_VARIABLE","$result",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","moduleInstaller",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","install",111],"(",["T_ARRAY","array",111],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",111],")",")",";",["T_WHITESPACE","\n      ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","fail",112],"(",["T_STRING","t",112],"(",["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::install() throws an exception if dependencies are missing.'",112],")",")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n    ",113],["T_CATCH","catch",114],["T_WHITESPACE"," ",114],"(",["T_STRING","MissingDependencyException",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$e",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n      ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","pass",115],"(",["T_STRING","t",115],"(",["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::install() throws an exception if dependencies are missing.'",115],")",")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","assertFalse",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","moduleHandler",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","moduleExists",118],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",118],")",",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::install() aborts if dependencies are missing.'",118],")",";",["T_WHITESPACE","\n\n    ",118],["T_COMMENT","\/\/ Fix the missing dependency.\n",120],["T_WHITESPACE","    ",121],["T_COMMENT","\/\/ Color module depends on Config. Config depends on Help module.\n",121],["T_WHITESPACE","    ",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Drupal",122],["T_DOUBLE_COLON","::",122],["T_STRING","state",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","set",122],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test.dependency'",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'dependency'",122],")",";",["T_WHITESPACE","\n    ",122],["T_STRING","drupal_static_reset",123],"(",["T_CONSTANT_ENCAPSED_STRING","'system_rebuild_module_data'",123],")",";",["T_WHITESPACE","\n\n    ",123],["T_VARIABLE","$result",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","moduleInstaller",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","install",125],"(",["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",125],")",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertTrue",126],"(",["T_VARIABLE","$result",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::install() returns the correct value.'",126],")",";",["T_WHITESPACE","\n\n    ",126],["T_COMMENT","\/\/ Verify that the fake dependency chain was installed.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertTrue",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","moduleHandler",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","moduleExists",129],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",129],")",["T_WHITESPACE"," ",129],["T_BOOLEAN_AND","&&",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","moduleHandler",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","moduleExists",129],"(",["T_CONSTANT_ENCAPSED_STRING","'help'",129],")",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'Dependency chain was installed.'",129],")",";",["T_WHITESPACE","\n\n    ",129],["T_COMMENT","\/\/ Verify that the original module was installed.\n",131],["T_WHITESPACE","    ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertTrue",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","moduleHandler",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","moduleExists",132],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",132],")",",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'Module installation with dependencies succeeded.'",132],")",";",["T_WHITESPACE","\n\n    ",132],["T_COMMENT","\/\/ Verify that the modules were enabled in the correct order.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$module_order",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Drupal",135],["T_DOUBLE_COLON","::",135],["T_STRING","state",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test.install_order'",135],")",["T_WHITESPACE"," ",135],"?",":",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertEqual",136],"(",["T_VARIABLE","$module_order",136],",",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_CONSTANT_ENCAPSED_STRING","'help'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'config'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'color'",136],")",")",";",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ Uninstall all three modules explicitly, but in the incorrect order,\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ and make sure that ModuleInstaller::uninstall() uninstalled them in the\n",139],["T_WHITESPACE","    ",140],["T_COMMENT","\/\/ correct sequence.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$result",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","moduleInstaller",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","uninstall",141],"(",["T_ARRAY","array",141],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'help'",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'color'",141],")",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertTrue",142],"(",["T_VARIABLE","$result",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::uninstall() returned TRUE.'",142],")",";",["T_WHITESPACE","\n\n    ",142],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_ARRAY","array",144],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'config'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'help'",144],")",["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$module",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n      ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertEqual",145],"(",["T_STRING","drupal_get_installed_schema_version",145],"(",["T_VARIABLE","$module",145],")",",",["T_WHITESPACE"," ",145],["T_STRING","SCHEMA_UNINSTALLED",145],",",["T_WHITESPACE"," ",145],"\"",["T_VARIABLE","$module",145],["T_ENCAPSED_AND_WHITESPACE"," module was uninstalled.",145],"\"",")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$uninstalled_modules",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Drupal",147],["T_DOUBLE_COLON","::",147],["T_STRING","state",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","get",147],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test.uninstall_order'",147],")",["T_WHITESPACE"," ",147],"?",":",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertEqual",148],"(",["T_VARIABLE","$uninstalled_modules",148],",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'config'",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'help'",148],")",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'Modules were uninstalled in the correct order.'",148],")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ Enable Color module again, which should enable both the Config module and\n",150],["T_WHITESPACE","    ",151],["T_COMMENT","\/\/ Help module. But, this time do it with Config module declaring a\n",151],["T_WHITESPACE","    ",152],["T_COMMENT","\/\/ dependency on a specific version of Help module in its info file. Make\n",152],["T_WHITESPACE","    ",153],["T_COMMENT","\/\/ sure that Drupal\\Core\\Extension\\ModuleInstaller::install() still works.\n",153],["T_WHITESPACE","    ",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Drupal",154],["T_DOUBLE_COLON","::",154],["T_STRING","state",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","set",154],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test.dependency'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'version dependency'",154],")",";",["T_WHITESPACE","\n    ",154],["T_STRING","drupal_static_reset",155],"(",["T_CONSTANT_ENCAPSED_STRING","'system_rebuild_module_data'",155],")",";",["T_WHITESPACE","\n\n    ",155],["T_VARIABLE","$result",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","moduleInstaller",157],"(",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","install",157],"(",["T_ARRAY","array",157],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",157],")",")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertTrue",158],"(",["T_VARIABLE","$result",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::install() returns the correct value.'",158],")",";",["T_WHITESPACE","\n\n    ",158],["T_COMMENT","\/\/ Verify that the fake dependency chain was installed.\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertTrue",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","moduleHandler",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","moduleExists",161],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",161],")",["T_WHITESPACE"," ",161],["T_BOOLEAN_AND","&&",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","moduleHandler",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","moduleExists",161],"(",["T_CONSTANT_ENCAPSED_STRING","'help'",161],")",",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'Dependency chain was installed.'",161],")",";",["T_WHITESPACE","\n\n    ",161],["T_COMMENT","\/\/ Verify that the original module was installed.\n",163],["T_WHITESPACE","    ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","assertTrue",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","moduleHandler",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","moduleExists",164],"(",["T_CONSTANT_ENCAPSED_STRING","'color'",164],")",",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'Module installation with version dependencies succeeded.'",164],")",";",["T_WHITESPACE","\n\n    ",164],["T_COMMENT","\/\/ Finally, verify that the modules were enabled in the correct order.\n",166],["T_WHITESPACE","    ",167],["T_VARIABLE","$enable_order",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Drupal",167],["T_DOUBLE_COLON","::",167],["T_STRING","state",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","get",167],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test.install_order'",167],")",["T_WHITESPACE"," ",167],"?",":",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertIdentical",168],"(",["T_VARIABLE","$enable_order",168],",",["T_WHITESPACE"," ",168],["T_ARRAY","array",168],"(",["T_CONSTANT_ENCAPSED_STRING","'help'",168],",",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'config'",168],",",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'color'",168],")",")",";",["T_WHITESPACE","\n  ",168],"}",["T_WHITESPACE","\n\n  ",169],["T_DOC_COMMENT","\/**\n   * Tests uninstalling a module that is a \"dependency\" of a profile.\n   *\/",171],["T_WHITESPACE","\n  ",173],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","testUninstallProfileDependency",174],"(",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$profile",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'minimal'",175],";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$dependency",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'dblog'",176],";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","setSetting",177],"(",["T_CONSTANT_ENCAPSED_STRING","'install_profile'",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$profile",177],")",";",["T_WHITESPACE","\n    ",177],["T_COMMENT","\/\/ Prime the drupal_get_filename() static cache with the location of the\n",178],["T_WHITESPACE","    ",179],["T_COMMENT","\/\/ minimal profile as it is not the currently active profile and we don't\n",179],["T_WHITESPACE","    ",180],["T_COMMENT","\/\/ yet have any cached way to retrieve its location.\n",180],["T_WHITESPACE","    ",181],["T_COMMENT","\/\/ @todo Remove as part of https:\/\/www.drupal.org\/node\/2186491\n",181],["T_WHITESPACE","    ",182],["T_STRING","drupal_get_filename",182],"(",["T_CONSTANT_ENCAPSED_STRING","'profile'",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$profile",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'core\/profiles\/'",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_VARIABLE","$profile",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'\/'",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_VARIABLE","$profile",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'.info.yml'",182],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","enableModules",183],"(",["T_ARRAY","array",183],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test'",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$profile",183],")",")",";",["T_WHITESPACE","\n\n    ",183],["T_STRING","drupal_static_reset",185],"(",["T_CONSTANT_ENCAPSED_STRING","'system_rebuild_module_data'",185],")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$data",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","system_rebuild_module_data",186],"(",")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","assertTrue",187],"(",["T_ISSET","isset",187],"(",["T_VARIABLE","$data",187],"[",["T_VARIABLE","$profile",187],"]",["T_OBJECT_OPERATOR","->",187],["T_STRING","requires",187],"[",["T_VARIABLE","$dependency",187],"]",")",")",";",["T_WHITESPACE","\n\n    ",187],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","moduleInstaller",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","install",189],"(",["T_ARRAY","array",189],"(",["T_VARIABLE","$dependency",189],")",")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertTrue",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","moduleHandler",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","moduleExists",190],"(",["T_VARIABLE","$dependency",190],")",")",";",["T_WHITESPACE","\n\n    ",190],["T_COMMENT","\/\/ Uninstall the profile module \"dependency\".\n",192],["T_WHITESPACE","    ",193],["T_VARIABLE","$result",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","moduleInstaller",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","uninstall",193],"(",["T_ARRAY","array",193],"(",["T_VARIABLE","$dependency",193],")",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertTrue",194],"(",["T_VARIABLE","$result",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::uninstall() returns TRUE.'",194],")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertFalse",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","moduleHandler",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","moduleExists",195],"(",["T_VARIABLE","$dependency",195],")",")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","assertEqual",196],"(",["T_STRING","drupal_get_installed_schema_version",196],"(",["T_VARIABLE","$dependency",196],")",",",["T_WHITESPACE"," ",196],["T_STRING","SCHEMA_UNINSTALLED",196],",",["T_WHITESPACE"," ",196],"\"",["T_VARIABLE","$dependency",196],["T_ENCAPSED_AND_WHITESPACE"," module was uninstalled.",196],"\"",")",";",["T_WHITESPACE","\n\n    ",196],["T_COMMENT","\/\/ Verify that the installation profile itself was not uninstalled.\n",198],["T_WHITESPACE","    ",199],["T_VARIABLE","$uninstalled_modules",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Drupal",199],["T_DOUBLE_COLON","::",199],["T_STRING","state",199],"(",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","get",199],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test.uninstall_order'",199],")",["T_WHITESPACE"," ",199],"?",":",["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",")",";",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","assertTrue",200],"(",["T_STRING","in_array",200],"(",["T_VARIABLE","$dependency",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$uninstalled_modules",200],")",",",["T_WHITESPACE"," ",200],"\"",["T_VARIABLE","$dependency",200],["T_ENCAPSED_AND_WHITESPACE"," module is in the list of uninstalled modules.",200],"\"",")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","assertFalse",201],"(",["T_STRING","in_array",201],"(",["T_VARIABLE","$profile",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$uninstalled_modules",201],")",",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'The installation profile is not in the list of uninstalled modules.'",201],")",";",["T_WHITESPACE","\n  ",201],"}",["T_WHITESPACE","\n\n  ",202],["T_DOC_COMMENT","\/**\n   * Tests uninstalling a module that has content.\n   *\/",204],["T_WHITESPACE","\n  ",206],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","testUninstallContentDependency",207],"(",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","enableModules",208],"(",["T_ARRAY","array",208],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test'",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'text'",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'user'",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'help'",208],")",")",";",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","assertTrue",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","moduleHandler",209],"(",")",["T_OBJECT_OPERATOR","->",209],["T_STRING","moduleExists",209],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",209],")",",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'Test module is enabled.'",209],")",";",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","assertTrue",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","moduleHandler",210],"(",")",["T_OBJECT_OPERATOR","->",210],["T_STRING","moduleExists",210],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test'",210],")",",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'Test module is enabled.'",210],")",";",["T_WHITESPACE","\n\n    ",210],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","installSchema",212],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",212],",",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'users_data'",212],")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$entity_types",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Drupal",213],["T_DOUBLE_COLON","::",213],["T_STRING","entityManager",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","getDefinitions",213],"(",")",";",["T_WHITESPACE","\n    ",213],["T_FOREACH","foreach",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$entity_types",214],["T_WHITESPACE"," ",214],["T_AS","as",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$entity_type",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n      ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",215],["T_WHITESPACE"," ",215],["T_IS_EQUAL","==",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$entity_type",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getProvider",215],"(",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","installEntitySchema",216],"(",["T_VARIABLE","$entity_type",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","id",216],"(",")",")",";",["T_WHITESPACE","\n      ",216],"}",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_COMMENT","\/\/ Create a fake dependency.\n",220],["T_WHITESPACE","    ",221],["T_COMMENT","\/\/ entity_test will depend on help. This way help can not be uninstalled\n",221],["T_WHITESPACE","    ",222],["T_COMMENT","\/\/ when there is test content preventing entity_test from being uninstalled.\n",222],["T_WHITESPACE","    ",223],["T_NS_SEPARATOR","\\",223],["T_STRING","Drupal",223],["T_DOUBLE_COLON","::",223],["T_STRING","state",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","set",223],"(",["T_CONSTANT_ENCAPSED_STRING","'module_test.dependency'",223],",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'dependency'",223],")",";",["T_WHITESPACE","\n    ",223],["T_STRING","drupal_static_reset",224],"(",["T_CONSTANT_ENCAPSED_STRING","'system_rebuild_module_data'",224],")",";",["T_WHITESPACE","\n\n    ",224],["T_COMMENT","\/\/ Create an entity so that the modules can not be disabled.\n",226],["T_WHITESPACE","    ",227],["T_VARIABLE","$entity",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","EntityTest",227],["T_DOUBLE_COLON","::",227],["T_STRING","create",227],"(",["T_ARRAY","array",227],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","randomString",227],"(",")",")",")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$entity",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","save",228],"(",")",";",["T_WHITESPACE","\n\n    ",228],["T_COMMENT","\/\/ Uninstalling entity_test is not possible when there is content.\n",230],["T_WHITESPACE","    ",231],["T_TRY","try",231],["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n      ",231],["T_VARIABLE","$message",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::uninstall() throws ModuleUninstallValidatorException upon uninstalling a module which does not pass validation.'",232],";",["T_WHITESPACE","\n      ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","moduleInstaller",233],"(",")",["T_OBJECT_OPERATOR","->",233],["T_STRING","uninstall",233],"(",["T_ARRAY","array",233],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",233],")",")",";",["T_WHITESPACE","\n      ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","fail",234],"(",["T_VARIABLE","$message",234],")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n    ",235],["T_CATCH","catch",236],["T_WHITESPACE"," ",236],"(",["T_STRING","ModuleUninstallValidatorException",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$e",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n      ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","pass",237],"(",["T_STRING","get_class",237],"(",["T_VARIABLE","$e",237],")",["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","': '",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_VARIABLE","$e",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getMessage",237],"(",")",")",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_COMMENT","\/\/ Uninstalling help needs entity_test to be un-installable.\n",240],["T_WHITESPACE","    ",241],["T_TRY","try",241],["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n      ",241],["T_VARIABLE","$message",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::uninstall() throws ModuleUninstallValidatorException upon uninstalling a module which does not pass validation.'",242],";",["T_WHITESPACE","\n      ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","moduleInstaller",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","uninstall",243],"(",["T_ARRAY","array",243],"(",["T_CONSTANT_ENCAPSED_STRING","'help'",243],")",")",";",["T_WHITESPACE","\n      ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","fail",244],"(",["T_VARIABLE","$message",244],")",";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n    ",245],["T_CATCH","catch",246],["T_WHITESPACE"," ",246],"(",["T_STRING","ModuleUninstallValidatorException",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$e",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n      ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","pass",247],"(",["T_STRING","get_class",247],"(",["T_VARIABLE","$e",247],")",["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","': '",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$e",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getMessage",247],"(",")",")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_COMMENT","\/\/ Deleting the entity.\n",250],["T_WHITESPACE","    ",251],["T_VARIABLE","$entity",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","delete",251],"(",")",";",["T_WHITESPACE","\n\n    ",251],["T_VARIABLE","$result",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","moduleInstaller",253],"(",")",["T_OBJECT_OPERATOR","->",253],["T_STRING","uninstall",253],"(",["T_ARRAY","array",253],"(",["T_CONSTANT_ENCAPSED_STRING","'help'",253],")",")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","assertTrue",254],"(",["T_VARIABLE","$result",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'ModuleInstaller::uninstall() returns TRUE.'",254],")",";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertEqual",255],"(",["T_STRING","drupal_get_installed_schema_version",255],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",255],")",",",["T_WHITESPACE"," ",255],["T_STRING","SCHEMA_UNINSTALLED",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","\"entity_test module was uninstalled.\"",255],")",";",["T_WHITESPACE","\n  ",255],"}",["T_WHITESPACE","\n\n  ",256],["T_DOC_COMMENT","\/**\n   * Tests whether the correct module metadata is returned.\n   *\/",258],["T_WHITESPACE","\n  ",260],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","testModuleMetaData",261],"(",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n    ",261],["T_COMMENT","\/\/ Generate the list of available modules.\n",262],["T_WHITESPACE","    ",263],["T_VARIABLE","$modules",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","system_rebuild_module_data",263],"(",")",";",["T_WHITESPACE","\n    ",263],["T_COMMENT","\/\/ Check that the mtime field exists for the system module.\n",264],["T_WHITESPACE","    ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","assertTrue",265],"(","!",["T_EMPTY","empty",265],"(",["T_VARIABLE","$modules",265],"[",["T_CONSTANT_ENCAPSED_STRING","'system'",265],"]",["T_OBJECT_OPERATOR","->",265],["T_STRING","info",265],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",265],"]",")",",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'The system.info.yml file modification time field is present.'",265],")",";",["T_WHITESPACE","\n    ",265],["T_COMMENT","\/\/ Use 0 if mtime isn't present, to avoid an array index notice.\n",266],["T_WHITESPACE","    ",267],["T_VARIABLE","$test_mtime",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],"!",["T_EMPTY","empty",267],"(",["T_VARIABLE","$modules",267],"[",["T_CONSTANT_ENCAPSED_STRING","'system'",267],"]",["T_OBJECT_OPERATOR","->",267],["T_STRING","info",267],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",267],"]",")",["T_WHITESPACE"," ",267],"?",["T_WHITESPACE"," ",267],["T_VARIABLE","$modules",267],"[",["T_CONSTANT_ENCAPSED_STRING","'system'",267],"]",["T_OBJECT_OPERATOR","->",267],["T_STRING","info",267],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",267],"]",["T_WHITESPACE"," ",267],":",["T_WHITESPACE"," ",267],["T_LNUMBER","0",267],";",["T_WHITESPACE","\n    ",267],["T_COMMENT","\/\/ Ensure the mtime field contains a number that is greater than zero.\n",268],["T_WHITESPACE","    ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","assertTrue",269],"(",["T_STRING","is_numeric",269],"(",["T_VARIABLE","$test_mtime",269],")",["T_WHITESPACE"," ",269],["T_BOOLEAN_AND","&&",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$test_mtime",269],["T_WHITESPACE"," ",269],">",["T_WHITESPACE"," ",269],["T_LNUMBER","0",269],")",",",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'The system.info.yml file modification time field contains a timestamp.'",269],")",";",["T_WHITESPACE","\n  ",269],"}",["T_WHITESPACE","\n\n  ",270],["T_DOC_COMMENT","\/**\n   * Tests whether module-provided stream wrappers are registered properly.\n   *\/",272],["T_WHITESPACE","\n  ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","testModuleStreamWrappers",275],"(",")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n    ",275],["T_COMMENT","\/\/ file_test.module provides (among others) a 'dummy' stream wrapper.\n",276],["T_WHITESPACE","    ",277],["T_COMMENT","\/\/ Verify that it is not registered yet to prevent false positives.\n",277],["T_WHITESPACE","    ",278],["T_VARIABLE","$stream_wrappers",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Drupal",278],["T_DOUBLE_COLON","::",278],["T_STRING","service",278],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",278],")",["T_OBJECT_OPERATOR","->",278],["T_STRING","getWrappers",278],"(",")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","assertFalse",279],"(",["T_ISSET","isset",279],"(",["T_VARIABLE","$stream_wrappers",279],"[",["T_CONSTANT_ENCAPSED_STRING","'dummy'",279],"]",")",")",";",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","moduleInstaller",280],"(",")",["T_OBJECT_OPERATOR","->",280],["T_STRING","install",280],"(","[",["T_CONSTANT_ENCAPSED_STRING","'file_test'",280],"]",")",";",["T_WHITESPACE","\n    ",280],["T_COMMENT","\/\/ Verify that the stream wrapper is available even without calling\n",281],["T_WHITESPACE","    ",282],["T_COMMENT","\/\/ \\Drupal::service('stream_wrapper_manager')->getWrappers() again.\n",282],["T_WHITESPACE","    ",283],["T_COMMENT","\/\/ If the stream wrapper is not available file_exists() will raise a notice.\n",283],["T_WHITESPACE","    ",284],["T_STRING","file_exists",284],"(",["T_CONSTANT_ENCAPSED_STRING","'dummy:\/\/'",284],")",";",["T_WHITESPACE","\n    ",284],["T_VARIABLE","$stream_wrappers",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Drupal",285],["T_DOUBLE_COLON","::",285],["T_STRING","service",285],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",285],")",["T_OBJECT_OPERATOR","->",285],["T_STRING","getWrappers",285],"(",")",";",["T_WHITESPACE","\n    ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","assertTrue",286],"(",["T_ISSET","isset",286],"(",["T_VARIABLE","$stream_wrappers",286],"[",["T_CONSTANT_ENCAPSED_STRING","'dummy'",286],"]",")",")",";",["T_WHITESPACE","\n  ",286],"}",["T_WHITESPACE","\n\n  ",287],["T_DOC_COMMENT","\/**\n   * Tests whether the correct theme metadata is returned.\n   *\/",289],["T_WHITESPACE","\n  ",291],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","testThemeMetaData",292],"(",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n    ",292],["T_COMMENT","\/\/ Generate the list of available themes.\n",293],["T_WHITESPACE","    ",294],["T_VARIABLE","$themes",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_NS_SEPARATOR","\\",294],["T_STRING","Drupal",294],["T_DOUBLE_COLON","::",294],["T_STRING","service",294],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",294],")",["T_OBJECT_OPERATOR","->",294],["T_STRING","rebuildThemeData",294],"(",")",";",["T_WHITESPACE","\n    ",294],["T_COMMENT","\/\/ Check that the mtime field exists for the bartik theme.\n",295],["T_WHITESPACE","    ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assertTrue",296],"(","!",["T_EMPTY","empty",296],"(",["T_VARIABLE","$themes",296],"[",["T_CONSTANT_ENCAPSED_STRING","'bartik'",296],"]",["T_OBJECT_OPERATOR","->",296],["T_STRING","info",296],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",296],"]",")",",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'The bartik.info.yml file modification time field is present.'",296],")",";",["T_WHITESPACE","\n    ",296],["T_COMMENT","\/\/ Use 0 if mtime isn't present, to avoid an array index notice.\n",297],["T_WHITESPACE","    ",298],["T_VARIABLE","$test_mtime",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],"!",["T_EMPTY","empty",298],"(",["T_VARIABLE","$themes",298],"[",["T_CONSTANT_ENCAPSED_STRING","'bartik'",298],"]",["T_OBJECT_OPERATOR","->",298],["T_STRING","info",298],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",298],"]",")",["T_WHITESPACE"," ",298],"?",["T_WHITESPACE"," ",298],["T_VARIABLE","$themes",298],"[",["T_CONSTANT_ENCAPSED_STRING","'bartik'",298],"]",["T_OBJECT_OPERATOR","->",298],["T_STRING","info",298],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",298],"]",["T_WHITESPACE"," ",298],":",["T_WHITESPACE"," ",298],["T_LNUMBER","0",298],";",["T_WHITESPACE","\n    ",298],["T_COMMENT","\/\/ Ensure the mtime field contains a number that is greater than zero.\n",299],["T_WHITESPACE","    ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","assertTrue",300],"(",["T_STRING","is_numeric",300],"(",["T_VARIABLE","$test_mtime",300],")",["T_WHITESPACE"," ",300],["T_BOOLEAN_AND","&&",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$test_mtime",300],["T_WHITESPACE"," ",300],">",["T_WHITESPACE"," ",300],["T_LNUMBER","0",300],")",",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'The bartik.info.yml file modification time field contains a timestamp.'",300],")",";",["T_WHITESPACE","\n  ",300],"}",["T_WHITESPACE","\n\n  ",301],["T_DOC_COMMENT","\/**\n   * Returns the ModuleHandler.\n   *\n   * @return \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",303],["T_WHITESPACE","\n  ",307],["T_PROTECTED","protected",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","moduleHandler",308],"(",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n    ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","container",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","get",309],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",309],")",";",["T_WHITESPACE","\n  ",309],"}",["T_WHITESPACE","\n\n  ",310],["T_DOC_COMMENT","\/**\n   * Returns the ModuleInstaller.\n   *\n   * @return \\Drupal\\Core\\Extension\\ModuleInstallerInterface\n   *\/",312],["T_WHITESPACE","\n  ",316],["T_PROTECTED","protected",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","moduleInstaller",317],"(",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n    ",317],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","container",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","get",318],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",318],")",";",["T_WHITESPACE","\n  ",318],"}",["T_WHITESPACE","\n\n",319],"}",["T_WHITESPACE","\n",321]]
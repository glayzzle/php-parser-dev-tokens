[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Action",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Action",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ActionInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","system",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Action",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","user",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RoleInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests action plugins.\n *\n * @group Action\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ActionTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","KernelTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",17],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'field'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'user'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'action_test'",20],")",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The action manager.\n   *\n   * @var \\Drupal\\Core\\Action\\ActionManager\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$actionManager",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",29],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","setUp",32],"(",")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n    ",32],["T_STRING","parent",33],["T_DOUBLE_COLON","::",33],["T_STRING","setUp",33],"(",")",";",["T_WHITESPACE","\n\n    ",33],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","actionManager",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","container",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","get",35],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.action'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","installEntitySchema",36],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","installSchema",37],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",37],",",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",["T_CONSTANT_ENCAPSED_STRING","'sequences'",37],")",")",";",["T_WHITESPACE","\n  ",37],"}",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Tests the functionality of test actions.\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","testOperations",43],"(",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_COMMENT","\/\/ Test that actions can be discovered.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$definitions",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","actionManager",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getDefinitions",45],"(",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertTrue",46],"(",["T_STRING","count",46],"(",["T_VARIABLE","$definitions",46],")",["T_WHITESPACE"," ",46],">",["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'Action definitions are found.'",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertTrue",47],"(","!",["T_EMPTY","empty",47],"(",["T_VARIABLE","$definitions",47],"[",["T_CONSTANT_ENCAPSED_STRING","'action_test_no_type'",47],"]",")",",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'The test action is among the definitions found.'",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_VARIABLE","$definition",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","actionManager",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getDefinition",49],"(",["T_CONSTANT_ENCAPSED_STRING","'action_test_no_type'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertTrue",50],"(","!",["T_EMPTY","empty",50],"(",["T_VARIABLE","$definition",50],")",",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'The test action definition is found.'",50],")",";",["T_WHITESPACE","\n\n    ",50],["T_VARIABLE","$definitions",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","actionManager",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getDefinitionsByType",52],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertTrue",53],"(",["T_EMPTY","empty",53],"(",["T_VARIABLE","$definitions",53],"[",["T_CONSTANT_ENCAPSED_STRING","'action_test_no_type'",53],"]",")",",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'An action with no type is not found.'",53],")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Create an instance of the 'save entity' action.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$action",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","actionManager",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","createInstance",56],"(",["T_CONSTANT_ENCAPSED_STRING","'action_test_save_entity'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertTrue",57],"(",["T_VARIABLE","$action",57],["T_WHITESPACE"," ",57],["T_INSTANCEOF","instanceof",57],["T_WHITESPACE"," ",57],["T_STRING","ActionInterface",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'The action implements the correct interface.'",57],")",";",["T_WHITESPACE","\n\n    ",57],["T_COMMENT","\/\/ Create a new unsaved user.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$name",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","randomMachineName",60],"(",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$user_storage",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","container",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","get",61],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","getStorage",61],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$account",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$user_storage",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","create",62],"(",["T_ARRAY","array",62],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$name",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'bundle'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'user'",62],")",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$loaded_accounts",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$user_storage",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","loadMultiple",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertEqual",64],"(",["T_STRING","count",64],"(",["T_VARIABLE","$loaded_accounts",64],")",",",["T_WHITESPACE"," ",64],["T_LNUMBER","0",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Execute the 'save entity' action.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$action",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","execute",67],"(",["T_VARIABLE","$account",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$loaded_accounts",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$user_storage",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","loadMultiple",68],"(",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertEqual",69],"(",["T_STRING","count",69],"(",["T_VARIABLE","$loaded_accounts",69],")",",",["T_WHITESPACE"," ",69],["T_LNUMBER","1",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$account",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","reset",70],"(",["T_VARIABLE","$loaded_accounts",70],")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertEqual",71],"(",["T_VARIABLE","$name",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$account",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","label",71],"(",")",")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * Tests the dependency calculation of actions.\n   *\/",74],["T_WHITESPACE","\n  ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","testDependencies",77],"(",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_COMMENT","\/\/ Create a new action that depends on a user role.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$action",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","Action",79],["T_DOUBLE_COLON","::",79],["T_STRING","create",79],"(",["T_ARRAY","array",79],"(",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'id'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'user_add_role_action.'",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_STRING","RoleInterface",80],["T_DOUBLE_COLON","::",80],["T_STRING","ANONYMOUS_ID",80],",",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'type'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'user'",81],",",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'label'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_STRING","t",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Add the anonymous role to the selected users'",82],")",",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'configuration'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'rid'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_STRING","RoleInterface",84],["T_DOUBLE_COLON","::",84],["T_STRING","ANONYMOUS_ID",84],",",["T_WHITESPACE","\n      ",84],")",",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'plugin'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'user_add_role_action'",86],",",["T_WHITESPACE","\n    ",86],")",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$action",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","save",88],"(",")",";",["T_WHITESPACE","\n\n    ",88],["T_VARIABLE","$expected",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_WHITESPACE","\n      ",90],["T_CONSTANT_ENCAPSED_STRING","'config'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_WHITESPACE","\n        ",91],["T_CONSTANT_ENCAPSED_STRING","'user.role.'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","RoleInterface",92],["T_DOUBLE_COLON","::",92],["T_STRING","ANONYMOUS_ID",92],",",["T_WHITESPACE","\n      ",92],")",",",["T_WHITESPACE","\n      ",93],["T_CONSTANT_ENCAPSED_STRING","'module'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_ARRAY","array",94],"(",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'user'",95],",",["T_WHITESPACE","\n      ",95],")",",",["T_WHITESPACE","\n    ",96],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertIdentical",98],"(",["T_VARIABLE","$expected",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$action",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","calculateDependencies",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getDependencies",98],"(",")",")",";",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n\n",99],"}",["T_WHITESPACE","\n",101]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","system",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Common",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Extension",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ExtensionDiscovery",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests scanning system directories in drupal_system_listing().\n *\n * @group Common\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","SystemListingTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","KernelTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n  ",13],["T_DOC_COMMENT","\/**\n   * Tests that files in different directories take precedence as expected.\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","testDirectoryPrecedence",17],"(",")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n    ",17],["T_COMMENT","\/\/ Define the module files we will search for, and the directory precedence\n",18],["T_WHITESPACE","    ",19],["T_COMMENT","\/\/ we expect.\n",19],["T_WHITESPACE","    ",20],["T_VARIABLE","$expected_directories",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_WHITESPACE","\n      ",20],["T_COMMENT","\/\/ When both copies of the module are compatible with Drupal core, the\n",21],["T_WHITESPACE","      ",22],["T_COMMENT","\/\/ copy in the profile directory takes precedence.\n",22],["T_WHITESPACE","      ",23],["T_CONSTANT_ENCAPSED_STRING","'drupal_system_listing_compatible_test'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",["T_WHITESPACE","\n        ",23],["T_CONSTANT_ENCAPSED_STRING","'core\/profiles\/testing\/modules'",24],",",["T_WHITESPACE","\n        ",24],["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/system\/tests\/modules'",25],",",["T_WHITESPACE","\n      ",25],")",",",["T_WHITESPACE","\n    ",26],")",";",["T_WHITESPACE","\n\n    ",27],["T_COMMENT","\/\/ This test relies on two versions of the same module existing in\n",29],["T_WHITESPACE","    ",30],["T_COMMENT","\/\/ different places in the filesystem. Without that, the test has no\n",30],["T_WHITESPACE","    ",31],["T_COMMENT","\/\/ meaning, so assert their presence first.\n",31],["T_WHITESPACE","    ",32],["T_FOREACH","foreach",32],["T_WHITESPACE"," ",32],"(",["T_VARIABLE","$expected_directories",32],["T_WHITESPACE"," ",32],["T_AS","as",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$module",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$directories",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n      ",32],["T_FOREACH","foreach",33],["T_WHITESPACE"," ",33],"(",["T_VARIABLE","$directories",33],["T_WHITESPACE"," ",33],["T_AS","as",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$directory",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$filename",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"\"",["T_VARIABLE","$directory",34],["T_ENCAPSED_AND_WHITESPACE","\/",34],["T_VARIABLE","$module",34],["T_ENCAPSED_AND_WHITESPACE","\/",34],["T_VARIABLE","$module",34],["T_ENCAPSED_AND_WHITESPACE",".info.yml",34],"\"",";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertTrue",35],"(",["T_STRING","file_exists",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Drupal",35],["T_DOUBLE_COLON","::",35],["T_STRING","root",35],"(",")",["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'\/'",35],["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_VARIABLE","$filename",35],")",",",["T_WHITESPACE"," ",35],["T_STRING","format_string",35],"(",["T_CONSTANT_ENCAPSED_STRING","'@filename exists.'",35],",",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_CONSTANT_ENCAPSED_STRING","'@filename'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$filename",35],")",")",")",";",["T_WHITESPACE","\n      ",35],"}",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Now scan the directories and check that the files take precedence as\n",39],["T_WHITESPACE","    ",40],["T_COMMENT","\/\/ expected.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$listing",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NEW","new",41],["T_WHITESPACE"," ",41],["T_STRING","ExtensionDiscovery",41],"(",["T_NS_SEPARATOR","\\",41],["T_STRING","Drupal",41],["T_DOUBLE_COLON","::",41],["T_STRING","root",41],"(",")",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$listing",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","setProfileDirectories",42],"(",["T_ARRAY","array",42],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/profiles\/testing'",42],")",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$files",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$listing",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","scan",43],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",43],")",";",["T_WHITESPACE","\n    ",43],["T_FOREACH","foreach",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$expected_directories",44],["T_WHITESPACE"," ",44],["T_AS","as",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$module",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$directories",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n      ",44],["T_VARIABLE","$expected_directory",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","array_shift",45],"(",["T_VARIABLE","$directories",45],")",";",["T_WHITESPACE","\n      ",45],["T_VARIABLE","$expected_uri",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],"\"",["T_VARIABLE","$expected_directory",46],["T_ENCAPSED_AND_WHITESPACE","\/",46],["T_VARIABLE","$module",46],["T_ENCAPSED_AND_WHITESPACE","\/",46],["T_VARIABLE","$module",46],["T_ENCAPSED_AND_WHITESPACE",".info.yml",46],"\"",";",["T_WHITESPACE","\n      ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEqual",47],"(",["T_VARIABLE","$files",47],"[",["T_VARIABLE","$module",47],"]",["T_OBJECT_OPERATOR","->",47],["T_STRING","getPathname",47],"(",")",",",["T_WHITESPACE"," ",47],["T_VARIABLE","$expected_uri",47],",",["T_WHITESPACE"," ",47],["T_STRING","format_string",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Module @actual was found at @expected.'",47],",",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'@actual'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$files",48],"[",["T_VARIABLE","$module",48],"]",["T_OBJECT_OPERATOR","->",48],["T_STRING","getPathname",48],"(",")",",",["T_WHITESPACE","\n        ",48],["T_CONSTANT_ENCAPSED_STRING","'@expected'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$expected_uri",49],",",["T_WHITESPACE","\n      ",49],")",")",")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * Tests that directories matching file_scan_ignore_directories are ignored\n   *\/",54],["T_WHITESPACE","\n  ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","testFileScanIgnoreDirectory",57],"(",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$listing",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_STRING","ExtensionDiscovery",58],"(",["T_NS_SEPARATOR","\\",58],["T_STRING","Drupal",58],["T_DOUBLE_COLON","::",58],["T_STRING","root",58],"(",")",",",["T_WHITESPACE"," ",58],["T_STRING","FALSE",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$listing",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","setProfileDirectories",59],"(",["T_ARRAY","array",59],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/profiles\/testing'",59],")",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$files",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$listing",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","scan",60],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertArrayHasKey",61],"(",["T_CONSTANT_ENCAPSED_STRING","'drupal_system_listing_compatible_test'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$files",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Reset the static to force a rescan of the directories.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$reflected_class",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_NEW","new",64],["T_WHITESPACE"," ",64],["T_NS_SEPARATOR","\\",64],["T_STRING","ReflectionClass",64],"(",["T_STRING","ExtensionDiscovery",64],["T_DOUBLE_COLON","::",64],["T_CLASS","class",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$reflected_property",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$reflected_class",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getProperty",65],"(",["T_CONSTANT_ENCAPSED_STRING","'files'",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$reflected_property",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","setAccessible",66],"(",["T_STRING","TRUE",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$reflected_property",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","setValue",67],"(",["T_VARIABLE","$reflected_class",67],",",["T_WHITESPACE"," ",67],"[","]",")",";",["T_WHITESPACE","\n\n    ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setSetting",69],"(",["T_CONSTANT_ENCAPSED_STRING","'file_scan_ignore_directories'",69],",",["T_WHITESPACE"," ",69],"[",["T_CONSTANT_ENCAPSED_STRING","'drupal_system_listing_compatible_test'",69],"]",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$listing",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_NEW","new",70],["T_WHITESPACE"," ",70],["T_STRING","ExtensionDiscovery",70],"(",["T_NS_SEPARATOR","\\",70],["T_STRING","Drupal",70],["T_DOUBLE_COLON","::",70],["T_STRING","root",70],"(",")",",",["T_WHITESPACE"," ",70],["T_STRING","FALSE",70],")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$listing",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setProfileDirectories",71],"(",["T_ARRAY","array",71],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/profiles\/testing'",71],")",")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$files",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$listing",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","scan",72],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertArrayNotHasKey",73],"(",["T_CONSTANT_ENCAPSED_STRING","'drupal_system_listing_compatible_test'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$files",73],")",";",["T_WHITESPACE","\n  ",73],"}",["T_WHITESPACE","\n\n",74],"}",["T_WHITESPACE","\n",76]]
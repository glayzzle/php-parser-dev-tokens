[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","entity_test",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Random",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ContentEntityForm",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Form",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FormStateInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Form controller for the test entity edit forms.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","EntityTestForm",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","ContentEntityForm",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","prepareEntity",17],"(",")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n    ",17],["T_IF","if",18],["T_WHITESPACE"," ",18],"(",["T_EMPTY","empty",18],"(",["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","entity",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","name",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","value",18],")",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n      ",18],["T_COMMENT","\/\/ Assign a random name to new EntityTest entities, to avoid repetition in\n",19],["T_WHITESPACE","      ",20],["T_COMMENT","\/\/ tests.\n",20],["T_WHITESPACE","      ",21],["T_VARIABLE","$random",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_NEW","new",21],["T_WHITESPACE"," ",21],["T_STRING","Random",21],"(",")",";",["T_WHITESPACE","\n      ",21],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","entity",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","name",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","value",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$random",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","name",22],"(",")",";",["T_WHITESPACE","\n    ",22],"}",["T_WHITESPACE","\n  ",23],"}",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","form",29],"(",["T_ARRAY","array",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$form",29],",",["T_WHITESPACE"," ",29],["T_STRING","FormStateInterface",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$form_state",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$form",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","parent",30],["T_DOUBLE_COLON","::",30],["T_STRING","form",30],"(",["T_VARIABLE","$form",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$form_state",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$entity",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","entity",31],";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ @todo: Is there a better way to check if an entity type is revisionable?\n",33],["T_WHITESPACE","    ",34],["T_IF","if",34],["T_WHITESPACE"," ",34],"(",["T_VARIABLE","$entity",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getEntityType",34],"(",")",["T_OBJECT_OPERATOR","->",34],["T_STRING","hasKey",34],"(",["T_CONSTANT_ENCAPSED_STRING","'revision'",34],")",["T_WHITESPACE"," ",34],["T_BOOLEAN_AND","&&",34],["T_WHITESPACE"," ",34],"!",["T_VARIABLE","$entity",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","isNew",34],"(",")",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n      ",34],["T_VARIABLE","$form",35],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",35],"]",["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_WHITESPACE","\n        ",35],["T_CONSTANT_ENCAPSED_STRING","'#type'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",36],",",["T_WHITESPACE","\n        ",36],["T_CONSTANT_ENCAPSED_STRING","'#title'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_STRING","t",37],"(",["T_CONSTANT_ENCAPSED_STRING","'Create new revision'",37],")",",",["T_WHITESPACE","\n        ",37],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entity",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","isNewRevision",38],"(",")",",",["T_WHITESPACE","\n      ",38],")",";",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n\n    ",40],["T_RETURN","return",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$form",42],";",["T_WHITESPACE","\n  ",42],"}",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",45],["T_WHITESPACE","\n  ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","save",48],"(",["T_ARRAY","array",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$form",48],",",["T_WHITESPACE"," ",48],["T_STRING","FormStateInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$form_state",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n    ",48],["T_TRY","try",49],["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n      ",49],["T_VARIABLE","$entity",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","entity",50],";",["T_WHITESPACE","\n\n      ",50],["T_COMMENT","\/\/ Save as a new revision if requested to do so.\n",52],["T_WHITESPACE","      ",53],["T_IF","if",53],["T_WHITESPACE"," ",53],"(","!",["T_VARIABLE","$form_state",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","isValueEmpty",53],"(",["T_CONSTANT_ENCAPSED_STRING","'revision'",53],")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$entity",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","setNewRevision",54],"(",")",";",["T_WHITESPACE","\n      ",54],"}",["T_WHITESPACE","\n\n      ",55],["T_VARIABLE","$is_new",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$entity",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","isNew",57],"(",")",";",["T_WHITESPACE","\n      ",57],["T_VARIABLE","$entity",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","save",58],"(",")",";",["T_WHITESPACE","\n\n      ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$is_new",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$message",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","t",61],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type @id has been created.'",61],",",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$entity",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","id",61],"(",")",",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$entity",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getEntityTypeId",61],"(",")",")",")",";",["T_WHITESPACE","\n      ",61],"}",["T_WHITESPACE","\n      ",62],["T_ELSE","else",63],["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$message",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","t",64],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type @id has been updated.'",64],",",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'@id'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$entity",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","id",64],"(",")",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$entity",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getEntityTypeId",64],"(",")",")",")",";",["T_WHITESPACE","\n      ",64],"}",["T_WHITESPACE","\n      ",65],["T_STRING","drupal_set_message",66],"(",["T_VARIABLE","$message",66],")",";",["T_WHITESPACE","\n\n      ",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$entity",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","id",68],"(",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$entity_type",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$entity",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getEntityTypeId",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$form_state",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","setRedirect",70],"(",["T_WHITESPACE","\n          ",70],"\"",["T_ENCAPSED_AND_WHITESPACE","entity.",71],["T_VARIABLE","$entity_type",71],["T_ENCAPSED_AND_WHITESPACE",".edit_form",71],"\"",",",["T_WHITESPACE","\n          ",71],["T_ARRAY","array",72],"(",["T_VARIABLE","$entity_type",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$entity",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","id",72],"(",")",")",["T_WHITESPACE","\n        ",72],")",";",["T_WHITESPACE","\n      ",73],"}",["T_WHITESPACE","\n      ",74],["T_ELSE","else",75],["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n        ",75],["T_COMMENT","\/\/ Error on save.\n",76],["T_WHITESPACE","        ",77],["T_STRING","drupal_set_message",77],"(",["T_STRING","t",77],"(",["T_CONSTANT_ENCAPSED_STRING","'The entity could not be saved.'",77],")",",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'error'",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$form_state",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setRebuild",78],"(",")",";",["T_WHITESPACE","\n      ",78],"}",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n    ",80],["T_CATCH","catch",81],["T_WHITESPACE"," ",81],"(",["T_NS_SEPARATOR","\\",81],["T_STRING","Exception",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$e",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n      ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Drupal",82],["T_DOUBLE_COLON","::",82],["T_STRING","state",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","set",82],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.form.save.exception'",82],",",["T_WHITESPACE"," ",82],["T_STRING","get_class",82],"(",["T_VARIABLE","$e",82],")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","': '",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$e",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getMessage",82],"(",")",")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n  ",83],"}",["T_WHITESPACE","\n\n",84],"}",["T_WHITESPACE","\n",86]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Evernote",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Auth",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Evernote",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Exception",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AuthorizationDeniedException",5],";",["T_WHITESPACE","\n\n",5],["T_CLASS","class",7],["T_WHITESPACE"," ",7],["T_STRING","OauthHandler",7],["T_WHITESPACE","\n",7],"{",["T_WHITESPACE","\n    ",8],["T_PROTECTED","protected",9],["T_WHITESPACE"," ",9],["T_VARIABLE","$sandbox",9],";",["T_WHITESPACE","\n\n    ",9],["T_PROTECTED","protected",11],["T_WHITESPACE"," ",11],["T_VARIABLE","$china",11],";",["T_WHITESPACE","\n\n    ",11],["T_PROTECTED","protected",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$consumer_secret",13],";",["T_WHITESPACE","\n\n    ",13],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$token_secret",15],";",["T_WHITESPACE","\n\n    ",15],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$supportLinkedSandbox",17],";",["T_WHITESPACE","\n\n    ",17],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$params",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",")",";",["T_WHITESPACE","\n\n    ",19],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","__construct",21],"(",["T_VARIABLE","$sandbox",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","true",21],",",["T_WHITESPACE"," ",21],["T_VARIABLE","$supportLinkedSandbox",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","false",21],",",["T_WHITESPACE"," ",21],["T_VARIABLE","$china",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","false",21],")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","sandbox",23],["T_WHITESPACE","              ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$sandbox",23],";",["T_WHITESPACE","\n        ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","supportLinkedSandbox",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$supportLinkedSandbox",24],";",["T_WHITESPACE","\n        ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","china",25],["T_WHITESPACE","                ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$china",25],";",["T_WHITESPACE","\n\n        ",25],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","params",27],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_callback'",27],"]",["T_WHITESPACE","         ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","null",27],";",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","params",28],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_consumer_key'",28],"]",["T_WHITESPACE","     ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","null",28],";",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","params",29],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_nonce'",29],"]",["T_WHITESPACE","            ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getOauthNonce",29],"(",")",";",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","params",30],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_signature'",30],"]",["T_WHITESPACE","        ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","null",30],";",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","params",31],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_signature_method'",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'HMAC-SHA1'",31],";",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","params",32],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_timestamp'",32],"]",["T_WHITESPACE","        ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getOauthTimestamp",32],"(",")",";",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","params",33],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",33],"]",["T_WHITESPACE","            ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","null",33],";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","params",34],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_verifier'",34],"]",["T_WHITESPACE","         ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'1.0'",34],";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","params",35],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_version'",35],"]",["T_WHITESPACE","          ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'1.0'",35],";",["T_WHITESPACE","\n\n        ",35],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","token_secret",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","''",37],";",["T_WHITESPACE","\n    ",37],"}",["T_WHITESPACE","\n\n    ",38],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","authorize",40],"(",["T_VARIABLE","$consumer_key",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$consumer_secret",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$callback",40],")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","params",42],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_callback'",42],"]",["T_WHITESPACE","         ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$callback",42],";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","params",43],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_consumer_key'",43],"]",["T_WHITESPACE","     ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$consumer_key",43],";",["T_WHITESPACE","\n\n        ",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","consumer_secret",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$consumer_secret",45],";",["T_WHITESPACE","\n\n        ",45],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_STRING","session_status",47],"(",")",["T_WHITESPACE"," ",47],["T_IS_EQUAL","==",47],["T_WHITESPACE"," ",47],["T_STRING","PHP_SESSION_NONE",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_STRING","session_start",48],"(",")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n\n        ",49],["T_COMMENT","\/\/ first call\n",51],["T_WHITESPACE","        ",52],["T_IF","if",52],["T_WHITESPACE"," ",52],"(","!",["T_STRING","array_key_exists",52],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth_verifier'",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$_GET",52],")",["T_WHITESPACE"," ",52],["T_BOOLEAN_AND","&&",52],["T_WHITESPACE"," ",52],"!",["T_STRING","array_key_exists",52],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$_GET",52],")",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_UNSET","unset",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","params",53],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",53],"]",")",";",["T_WHITESPACE","\n            ",53],["T_UNSET","unset",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","params",54],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_verifier'",54],"]",")",";",["T_WHITESPACE","\n\n            ",54],["T_VARIABLE","$temporaryCredentials",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getTemporaryCredentials",56],"(",")",";",["T_WHITESPACE","\n\n            ",56],["T_VARIABLE","$_SESSION",58],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token_secret'",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$temporaryCredentials",58],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token_secret'",58],"]",";",";",["T_WHITESPACE","\n\n            ",58],["T_VARIABLE","$authorizationUrl",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Location: '",60],["T_WHITESPACE","\n                ",60],".",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getBaseUrl",61],"(",["T_CONSTANT_ENCAPSED_STRING","'OAuth.action?oauth_token='",61],")",["T_WHITESPACE","\n                ",61],".",["T_WHITESPACE"," ",62],["T_VARIABLE","$temporaryCredentials",62],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",62],"]",";",["T_WHITESPACE","\n\n            ",62],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","supportLinkedSandbox",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n                ",64],["T_VARIABLE","$authorizationUrl",65],["T_WHITESPACE"," ",65],["T_CONCAT_EQUAL",".=",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'&supportLinkedSandbox=true'",65],";",["T_WHITESPACE","\n            ",65],"}",["T_WHITESPACE","\n\n            ",66],["T_STRING","header",68],"(",["T_VARIABLE","$authorizationUrl",68],")",";",["T_WHITESPACE","\n\n        ",68],["T_COMMENT","\/\/ the user declined the authorization\n",70],["T_WHITESPACE","        ",71],"}",["T_WHITESPACE"," ",71],["T_ELSEIF","elseif",71],["T_WHITESPACE"," ",71],"(","!",["T_STRING","array_key_exists",71],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth_verifier'",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$_GET",71],")",["T_WHITESPACE"," ",71],["T_BOOLEAN_AND","&&",71],["T_WHITESPACE"," ",71],["T_STRING","array_key_exists",71],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$_GET",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_THROW","throw",72],["T_WHITESPACE"," ",72],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_STRING","AuthorizationDeniedException",72],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorization declined.'",72],")",";",["T_WHITESPACE","\n        ",72],["T_COMMENT","\/\/the user authorized the app\n",73],["T_WHITESPACE","        ",74],"}",["T_WHITESPACE"," ",74],["T_ELSE","else",74],["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","token_secret",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$_SESSION",75],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token_secret'",75],"]",";",["T_WHITESPACE","\n\n            ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","params",77],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",77],"]",["T_WHITESPACE","    ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$_GET",77],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",77],"]",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","params",78],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_verifier'",78],"]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$_GET",78],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_verifier'",78],"]",";",["T_WHITESPACE","\n            ",78],["T_UNSET","unset",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","params",79],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_callback'",79],"]",")",";",["T_WHITESPACE","\n\n            ",79],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getTemporaryCredentials",81],"(",")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n\n    ",82],"}",["T_WHITESPACE","\n\n    ",84],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","getBaseUrl",86],"(",["T_VARIABLE","$prefix",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","''",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$baseUrl",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","''",88],";",["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_STRING","true",89],["T_WHITESPACE"," ",89],["T_IS_IDENTICAL","===",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","sandbox",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$baseUrl",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","\"https:\/\/sandbox.evernote.com\"",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE"," ",91],["T_ELSEIF","elseif",91],["T_WHITESPACE"," ",91],"(",["T_STRING","true",91],["T_WHITESPACE"," ",91],["T_IS_IDENTICAL","===",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","china",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$baseUrl",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"https:\/\/app.yinxiang.com\"",92],";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE"," ",93],["T_ELSE","else",93],["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$baseUrl",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","\"https:\/\/www.evernote.com\"",94],";",["T_WHITESPACE","     \n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$baseUrl",96],["T_WHITESPACE"," ",96],["T_CONCAT_EQUAL",".=",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$prefix",96],["T_WHITESPACE"," ",96],["T_IS_EQUAL","==",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],["T_WHITESPACE"," ",96],"?",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],["T_WHITESPACE"," ",96],":",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$prefix",96],";",["T_WHITESPACE","   \n\n        ",96],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$baseUrl",98],";",["T_WHITESPACE","     \n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getTemporaryCredentials",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$headers",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$headers",104],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",104],"]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'application\/x-www-form-urlencoded'",104],";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$headers",105],"[",["T_CONSTANT_ENCAPSED_STRING","'Authorization'",105],"]",["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getAuthorizationHeaderString",105],"(",")",";",["T_WHITESPACE","\n\n        ",105],["T_VARIABLE","$arguments",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",";",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$handle",109],["T_WHITESPACE","  ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","curl_init",109],"(",")",";",["T_WHITESPACE","\n\n        ",109],["T_STRING","curl_setopt_array",111],"(",["T_VARIABLE","$handle",111],",",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_WHITESPACE","\n            ",111],["T_STRING","CURLOPT_POST",112],["T_WHITESPACE","           ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_STRING","true",112],",",["T_WHITESPACE","\n            ",112],["T_STRING","CURLOPT_URL",113],["T_WHITESPACE","            ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getBaseUrl",113],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth'",113],")",",",["T_WHITESPACE","\n            ",113],["T_STRING","CURLOPT_HTTPHEADER",114],["T_WHITESPACE","     ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","formatHeaders",114],"(",["T_VARIABLE","$headers",114],")",",",["T_WHITESPACE","\n            ",114],["T_STRING","CURLOPT_POSTFIELDS",115],["T_WHITESPACE","     ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_STRING","http_build_query",115],"(",["T_VARIABLE","$arguments",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","''",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'&'",115],")",",",["T_WHITESPACE","\n            ",115],["T_STRING","CURLOPT_HEADER",116],["T_WHITESPACE","         ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_STRING","true",116],",",["T_WHITESPACE","\n            ",116],["T_STRING","CURLOPT_RETURNTRANSFER",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_STRING","true",117],["T_WHITESPACE","\n        ",117],")",")",";",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$raw",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","curl_exec",120],"(",["T_VARIABLE","$handle",120],")",";",["T_WHITESPACE","\n\n        ",120],["T_COMMENT","# close curl handle\n",122],["T_WHITESPACE","        ",123],["T_STRING","curl_close",123],"(",["T_VARIABLE","$handle",123],")",";",["T_WHITESPACE","\n\n        ",123],["T_VARIABLE","$responseBody",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getResponseBody",125],"(",["T_VARIABLE","$raw",125],")",";",["T_WHITESPACE","\n\n        ",125],["T_STRING","parse_str",127],"(",["T_VARIABLE","$responseBody",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$parts",127],")",";",["T_WHITESPACE","\n\n        ",127],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$parts",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","getResponseBody",132],"(",["T_VARIABLE","$raw",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_LIST","list",134],"(",["T_VARIABLE","$headers",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$text",134],")",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","explode",134],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\\r\\n\"",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$raw",134],",",["T_WHITESPACE"," ",134],["T_LNUMBER","2",134],")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_STRING","strpos",135],"(",["T_VARIABLE","$headers",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","' 100 Continue'",135],")",["T_WHITESPACE"," ",135],["T_IS_NOT_IDENTICAL","!==",135],["T_WHITESPACE"," ",135],["T_STRING","false",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_LIST","list",136],"(",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$text",136],")",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","explode",136],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\\r\\n\"",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$text",136],",",["T_WHITESPACE"," ",136],["T_LNUMBER","2",136],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$text",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getOauthNonce",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_STRING","md5",144],"(",["T_STRING","mt_rand",144],"(",")",")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getOauthTimestamp",147],"(",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_STRING","time",149],"(",")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_PROTECTED","protected",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","getOauthSignature",152],"(",")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$baseString",154],["T_WHITESPACE","   ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getSignatureBaseString",154],"(",")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$signatureKey",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getSignatureKey",155],"(",")",";",["T_WHITESPACE","\n\n        ",155],["T_VARIABLE","$oauth_signature",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","base64_encode",157],"(",["T_WHITESPACE","\n            ",157],["T_STRING","hash_hmac",158],"(",["T_WHITESPACE","\n                ",158],["T_CONSTANT_ENCAPSED_STRING","'sha1'",159],",",["T_WHITESPACE","\n                ",159],["T_VARIABLE","$baseString",160],",",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$signatureKey",161],",",["T_WHITESPACE","\n                ",161],["T_STRING","true",162],["T_WHITESPACE","\n            ",162],")",["T_WHITESPACE","\n        ",163],")",";",["T_WHITESPACE","\n\n        ",164],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_STRING","rawurlencode",166],"(",["T_VARIABLE","$oauth_signature",166],")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_PROTECTED","protected",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","getSignatureBaseString",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$params",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","params",171],";",["T_WHITESPACE","\n        ",171],["T_UNSET","unset",172],"(",["T_VARIABLE","$params",172],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_signature'",172],"]",")",";",["T_WHITESPACE","\n\n        ",172],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_STRING","array_key_exists",174],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth_callback'",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$params",174],")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$params",175],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_callback'",175],"]",["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","rawurlencode",175],"(",["T_VARIABLE","$params",175],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_callback'",175],"]",")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n\n        ",176],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'POST&'",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_STRING","rawurlencode",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getBaseUrl",178],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth'",178],")",")",["T_WHITESPACE"," ",178],".",["T_CONSTANT_ENCAPSED_STRING","'&'",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_STRING","rawurlencode",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","formatParametersString",178],"(",["T_VARIABLE","$params",178],",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'&'",178],")",")",";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_PROTECTED","protected",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","formatParametersString",181],"(",["T_VARIABLE","$params",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$glue",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$enclosure",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","''",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$result",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",")",";",["T_WHITESPACE","\n        ",183],["T_FOREACH","foreach",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$params",184],["T_WHITESPACE"," ",184],["T_AS","as",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$key",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$value",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$result",185],"[","]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$key",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'='",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$enclosure",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$value",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$enclosure",185],";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_STRING","implode",188],"(",["T_VARIABLE","$glue",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$result",188],")",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","getAuthorizationHeaderString",191],"(",")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$params",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","params",193],";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$params",194],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_signature'",194],"]",["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getOauthSignature",194],"(",")",";",["T_WHITESPACE","\n\n        ",194],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'OAuth '",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","formatParametersString",196],"(",["T_VARIABLE","$params",196],",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","', '",196],",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'\"'",196],")",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_PROTECTED","protected",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","getSignatureKey",199],"(",")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","consumer_secret",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'&'",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","token_secret",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_PROTECTED","protected",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","formatHeaders",204],"(",["T_VARIABLE","$headers",204],")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$result",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_ARRAY","array",206],"(",")",";",["T_WHITESPACE","\n        ",206],["T_FOREACH","foreach",207],"(",["T_VARIABLE","$headers",207],["T_WHITESPACE"," ",207],["T_AS","as",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$key",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$value",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$result",208],"[","]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],"\"",["T_VARIABLE","$key",208],["T_ENCAPSED_AND_WHITESPACE",": ",208],["T_VARIABLE","$value",208],"\"",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n\n        ",209],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$result",211],";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n",212],"}",["T_WHITESPACE","\n",213]]
[["T_OPEN_TAG","<?php\n",1],["T_COMMENT","\/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership. The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License. You may obtain a copy of the License at\n *\n *   http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n *\n * @package thrift.transport\n *\/",2],["T_WHITESPACE","\n\n",21],["T_NAMESPACE","namespace",23],["T_WHITESPACE"," ",23],["T_STRING","Thrift",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Transport",23],";",["T_WHITESPACE","\n\n",23],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","Thrift",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Transport",25],["T_NS_SEPARATOR","\\",25],["T_STRING","TTransport",25],";",["T_WHITESPACE","\n",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","Thrift",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Exception",26],["T_NS_SEPARATOR","\\",26],["T_STRING","TException",26],";",["T_WHITESPACE","\n",26],["T_USE","use",27],["T_WHITESPACE"," ",27],["T_STRING","Thrift",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Factory",27],["T_NS_SEPARATOR","\\",27],["T_STRING","TStringFuncFactory",27],";",["T_WHITESPACE","\n\n",27],["T_DOC_COMMENT","\/**\n * Php stream transport. Reads to and writes from the php standard streams\n * php:\/\/input and php:\/\/output\n *\n * @package thrift.transport\n *\/",29],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","TPhpStream",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","TTransport",35],["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\n  ",35],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","MODE_R",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","1",37],";",["T_WHITESPACE","\n  ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","MODE_W",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_LNUMBER","2",38],";",["T_WHITESPACE","\n\n  ",38],["T_PRIVATE","private",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$inStream_",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","null",40],";",["T_WHITESPACE","\n\n  ",40],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$outStream_",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","null",42],";",["T_WHITESPACE","\n\n  ",42],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$read_",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","false",44],";",["T_WHITESPACE","\n\n  ",44],["T_PRIVATE","private",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$write_",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","false",46],";",["T_WHITESPACE","\n\n  ",46],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","__construct",48],"(",["T_VARIABLE","$mode",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","read_",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$mode",49],["T_WHITESPACE"," ",49],"&",["T_WHITESPACE"," ",49],["T_STRING","self",49],["T_DOUBLE_COLON","::",49],["T_STRING","MODE_R",49],";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","write_",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$mode",50],["T_WHITESPACE"," ",50],"&",["T_WHITESPACE"," ",50],["T_STRING","self",50],["T_DOUBLE_COLON","::",50],["T_STRING","MODE_W",50],";",["T_WHITESPACE","\n  ",50],"}",["T_WHITESPACE","\n\n  ",51],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","open",53],"(",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","read_",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n      ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","inStream_",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],"@",["T_STRING","fopen",55],"(",["T_STRING","self",55],["T_DOUBLE_COLON","::",55],["T_STRING","inStreamName",55],"(",")",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'r'",55],")",";",["T_WHITESPACE","\n      ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(","!",["T_STRING","is_resource",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","inStream_",56],")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n        ",56],["T_THROW","throw",57],["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","TException",57],"(",["T_CONSTANT_ENCAPSED_STRING","'TPhpStream: Could not open php:\/\/input'",57],")",";",["T_WHITESPACE","\n      ",57],"}",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n    ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","write_",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","outStream_",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],"@",["T_STRING","fopen",61],"(",["T_CONSTANT_ENCAPSED_STRING","'php:\/\/output'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'w'",61],")",";",["T_WHITESPACE","\n      ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_STRING","is_resource",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","outStream_",62],")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n        ",62],["T_THROW","throw",63],["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_STRING","TException",63],"(",["T_CONSTANT_ENCAPSED_STRING","'TPhpStream: Could not open php:\/\/output'",63],")",";",["T_WHITESPACE","\n      ",63],"}",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n  ",65],"}",["T_WHITESPACE","\n\n  ",66],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","close",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","read_",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],"@",["T_STRING","fclose",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","inStream_",70],")",";",["T_WHITESPACE","\n      ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","inStream_",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","null",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n    ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","write_",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n      ",73],"@",["T_STRING","fclose",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","outStream_",74],")",";",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","outStream_",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","null",75],";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n  ",76],"}",["T_WHITESPACE","\n\n  ",77],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","isOpen",79],"(",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n    ",79],["T_RETURN","return",80],["T_WHITESPACE","\n      ",80],"(","!",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","read_",81],["T_WHITESPACE"," ",81],["T_BOOLEAN_OR","||",81],["T_WHITESPACE"," ",81],["T_STRING","is_resource",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","inStream_",81],")",")",["T_WHITESPACE"," ",81],["T_BOOLEAN_AND","&&",81],["T_WHITESPACE","\n      ",81],"(","!",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","write_",82],["T_WHITESPACE"," ",82],["T_BOOLEAN_OR","||",82],["T_WHITESPACE"," ",82],["T_STRING","is_resource",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","outStream_",82],")",")",";",["T_WHITESPACE","\n  ",82],"}",["T_WHITESPACE","\n\n  ",83],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","read",85],"(",["T_VARIABLE","$len",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$data",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"@",["T_STRING","fread",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","inStream_",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$len",86],")",";",["T_WHITESPACE","\n    ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$data",87],["T_WHITESPACE"," ",87],["T_IS_IDENTICAL","===",87],["T_WHITESPACE"," ",87],["T_STRING","FALSE",87],["T_WHITESPACE"," ",87],["T_BOOLEAN_OR","||",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$data",87],["T_WHITESPACE"," ",87],["T_IS_IDENTICAL","===",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","''",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n      ",87],["T_THROW","throw",88],["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_STRING","TException",88],"(",["T_CONSTANT_ENCAPSED_STRING","'TPhpStream: Could not read '",88],".",["T_VARIABLE","$len",88],".",["T_CONSTANT_ENCAPSED_STRING","' bytes'",88],")",";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n    ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$data",90],";",["T_WHITESPACE","\n  ",90],"}",["T_WHITESPACE","\n\n  ",91],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","write",93],"(",["T_VARIABLE","$buf",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n    ",93],["T_WHILE","while",94],["T_WHITESPACE"," ",94],"(",["T_STRING","TStringFuncFactory",94],["T_DOUBLE_COLON","::",94],["T_STRING","create",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","strlen",94],"(",["T_VARIABLE","$buf",94],")",["T_WHITESPACE"," ",94],">",["T_WHITESPACE"," ",94],["T_LNUMBER","0",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n      ",94],["T_VARIABLE","$got",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"@",["T_STRING","fwrite",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","outStream_",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$buf",95],")",";",["T_WHITESPACE","\n      ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$got",96],["T_WHITESPACE"," ",96],["T_IS_IDENTICAL","===",96],["T_WHITESPACE"," ",96],["T_LNUMBER","0",96],["T_WHITESPACE"," ",96],["T_BOOLEAN_OR","||",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$got",96],["T_WHITESPACE"," ",96],["T_IS_IDENTICAL","===",96],["T_WHITESPACE"," ",96],["T_STRING","FALSE",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n        ",96],["T_THROW","throw",97],["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","TException",97],"(",["T_CONSTANT_ENCAPSED_STRING","'TPhpStream: Could not write '",97],".",["T_STRING","TStringFuncFactory",97],["T_DOUBLE_COLON","::",97],["T_STRING","create",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","strlen",97],"(",["T_VARIABLE","$buf",97],")",".",["T_CONSTANT_ENCAPSED_STRING","' bytes'",97],")",";",["T_WHITESPACE","\n      ",97],"}",["T_WHITESPACE","\n      ",98],["T_VARIABLE","$buf",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","TStringFuncFactory",99],["T_DOUBLE_COLON","::",99],["T_STRING","create",99],"(",")",["T_OBJECT_OPERATOR","->",99],["T_STRING","substr",99],"(",["T_VARIABLE","$buf",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$got",99],")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n  ",100],"}",["T_WHITESPACE","\n\n  ",101],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","flush",103],"(",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n    ",103],"@",["T_STRING","fflush",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","outStream_",104],")",";",["T_WHITESPACE","\n  ",104],"}",["T_WHITESPACE","\n\n  ",105],["T_PRIVATE","private",107],["T_WHITESPACE"," ",107],["T_STATIC","static",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","inStreamName",107],"(",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_STRING","php_sapi_name",108],"(",")",["T_WHITESPACE"," ",108],["T_IS_EQUAL","==",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'cli'",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n      ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'php:\/\/stdin'",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n    ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'php:\/\/input'",111],";",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n",112],"}",["T_WHITESPACE","\n",114]]
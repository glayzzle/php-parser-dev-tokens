[["T_OPEN_TAG","<?php\n",1],["T_COMMENT","\/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership. The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License. You may obtain a copy of the License at\n *\n *   http:\/\/www.apache.org\/licenses\/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n *\n * @package thrift.transport\n *\/",2],["T_WHITESPACE","\n\n",21],["T_NAMESPACE","namespace",23],["T_WHITESPACE"," ",23],["T_STRING","Thrift",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Transport",23],";",["T_WHITESPACE","\n\n",23],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","Thrift",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Transport",25],["T_NS_SEPARATOR","\\",25],["T_STRING","TTransport",25],";",["T_WHITESPACE","\n",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","Thrift",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Factory",26],["T_NS_SEPARATOR","\\",26],["T_STRING","TStringFuncFactory",26],";",["T_WHITESPACE","\n\n",26],["T_DOC_COMMENT","\/**\n * Framed transport. Writes and reads data in chunks that are stamped with\n * their length.\n *\n * @package thrift.transport\n *\/",28],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","TFramedTransport",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","TTransport",34],["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Underlying transport object.\n   *\n   * @var TTransport\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$transport_",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Buffer for read data.\n   *\n   * @var string\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PRIVATE","private",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$rBuf_",48],";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Buffer for queued output data\n   *\n   * @var string\n   *\/",50],["T_WHITESPACE","\n  ",54],["T_PRIVATE","private",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$wBuf_",55],";",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * Whether to frame reads\n   *\n   * @var bool\n   *\/",57],["T_WHITESPACE","\n  ",61],["T_PRIVATE","private",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$read_",62],";",["T_WHITESPACE","\n\n  ",62],["T_DOC_COMMENT","\/**\n   * Whether to frame writes\n   *\n   * @var bool\n   *\/",64],["T_WHITESPACE","\n  ",68],["T_PRIVATE","private",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$write_",69],";",["T_WHITESPACE","\n\n  ",69],["T_DOC_COMMENT","\/**\n   * Constructor.\n   *\n   * @param TTransport $transport Underlying transport\n   *\/",71],["T_WHITESPACE","\n  ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","__construct",76],"(",["T_VARIABLE","$transport",76],"=",["T_STRING","null",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$read",76],"=",["T_STRING","true",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$write",76],"=",["T_STRING","true",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","transport_",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$transport",77],";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","read_",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$read",78],";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","write_",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$write",79],";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","isOpen",82],"(",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n    ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","transport_",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","isOpen",83],"(",")",";",["T_WHITESPACE","\n  ",83],"}",["T_WHITESPACE","\n\n  ",84],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","open",86],"(",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","transport_",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","open",87],"(",")",";",["T_WHITESPACE","\n  ",87],"}",["T_WHITESPACE","\n\n  ",88],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","close",90],"(",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","transport_",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","close",91],"(",")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * Reads from the buffer. When more data is required reads another entire\n   * chunk and serves future reads out of that.\n   *\n   * @param int $len How much data\n   *\/",94],["T_WHITESPACE","\n  ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","read",100],"(",["T_VARIABLE","$len",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n    ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","read_",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n      ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","transport_",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","read",102],"(",["T_VARIABLE","$len",102],")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_STRING","TStringFuncFactory",105],["T_DOUBLE_COLON","::",105],["T_STRING","create",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","strlen",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","rBuf_",105],")",["T_WHITESPACE"," ",105],["T_IS_IDENTICAL","===",105],["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","readFrame",106],"(",")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ Just return full buff\n",109],["T_WHITESPACE","    ",110],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$len",110],["T_WHITESPACE"," ",110],["T_IS_GREATER_OR_EQUAL",">=",110],["T_WHITESPACE"," ",110],["T_STRING","TStringFuncFactory",110],["T_DOUBLE_COLON","::",110],["T_STRING","create",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","strlen",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","rBuf_",110],")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n      ",110],["T_VARIABLE","$out",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","rBuf_",111],";",["T_WHITESPACE","\n      ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","rBuf_",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","null",112],";",["T_WHITESPACE","\n      ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$out",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_COMMENT","\/\/ Return TStringFuncFactory::create()->substr\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$out",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","TStringFuncFactory",117],["T_DOUBLE_COLON","::",117],["T_STRING","create",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","substr",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","rBuf_",117],",",["T_WHITESPACE"," ",117],["T_LNUMBER","0",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$len",117],")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","rBuf_",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","TStringFuncFactory",118],["T_DOUBLE_COLON","::",118],["T_STRING","create",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","substr",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","rBuf_",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$len",118],")",";",["T_WHITESPACE","\n    ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$out",119],";",["T_WHITESPACE","\n  ",119],"}",["T_WHITESPACE","\n\n  ",120],["T_DOC_COMMENT","\/**\n   * Put previously read data back into the buffer\n   *\n   * @param string $data data to return\n   *\/",122],["T_WHITESPACE","\n  ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","putBack",127],"(",["T_VARIABLE","$data",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n    ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_STRING","TStringFuncFactory",128],["T_DOUBLE_COLON","::",128],["T_STRING","create",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","strlen",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","rBuf_",128],")",["T_WHITESPACE"," ",128],["T_IS_IDENTICAL","===",128],["T_WHITESPACE"," ",128],["T_LNUMBER","0",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n      ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","rBuf_",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$data",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE"," ",130],["T_ELSE","else",130],["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n      ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","rBuf_",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$data",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","rBuf_",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n  ",132],"}",["T_WHITESPACE","\n\n  ",133],["T_DOC_COMMENT","\/**\n   * Reads a chunk of data into the internal read buffer.\n   *\/",135],["T_WHITESPACE","\n  ",137],["T_PRIVATE","private",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","readFrame",138],"(",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$buf",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","transport_",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","readAll",139],"(",["T_LNUMBER","4",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$val",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","unpack",140],"(",["T_CONSTANT_ENCAPSED_STRING","'N'",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$buf",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$sz",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$val",141],"[",["T_LNUMBER","1",141],"]",";",["T_WHITESPACE","\n\n    ",141],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","rBuf_",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","transport_",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","readAll",143],"(",["T_VARIABLE","$sz",143],")",";",["T_WHITESPACE","\n  ",143],"}",["T_WHITESPACE","\n\n  ",144],["T_DOC_COMMENT","\/**\n   * Writes some data to the pending output buffer.\n   *\n   * @param string $buf The data\n   * @param int    $len Limit of bytes to write\n   *\/",146],["T_WHITESPACE","\n  ",151],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","write",152],"(",["T_VARIABLE","$buf",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$len",152],"=",["T_STRING","null",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n    ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(","!",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","write_",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","transport_",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","write",154],"(",["T_VARIABLE","$buf",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$len",154],")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$len",157],["T_WHITESPACE"," ",157],["T_IS_NOT_IDENTICAL","!==",157],["T_WHITESPACE"," ",157],["T_STRING","null",157],["T_WHITESPACE"," ",157],["T_BOOLEAN_AND","&&",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$len",157],["T_WHITESPACE"," ",157],"<",["T_WHITESPACE"," ",157],["T_STRING","TStringFuncFactory",157],["T_DOUBLE_COLON","::",157],["T_STRING","create",157],"(",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","strlen",157],"(",["T_VARIABLE","$buf",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n      ",157],["T_VARIABLE","$buf",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","TStringFuncFactory",158],["T_DOUBLE_COLON","::",158],["T_STRING","create",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","substr",158],"(",["T_VARIABLE","$buf",158],",",["T_WHITESPACE"," ",158],["T_LNUMBER","0",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$len",158],")",";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","wBuf_",160],["T_WHITESPACE"," ",160],["T_CONCAT_EQUAL",".=",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$buf",160],";",["T_WHITESPACE","\n  ",160],"}",["T_WHITESPACE","\n\n  ",161],["T_DOC_COMMENT","\/**\n   * Writes the output buffer to the stream in the format of a 4-byte length\n   * followed by the actual data.\n   *\/",163],["T_WHITESPACE","\n  ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","flush",167],"(",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n    ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(","!",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","write_",168],["T_WHITESPACE"," ",168],["T_BOOLEAN_OR","||",168],["T_WHITESPACE"," ",168],["T_STRING","TStringFuncFactory",168],["T_DOUBLE_COLON","::",168],["T_STRING","create",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","strlen",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","wBuf_",168],")",["T_WHITESPACE"," ",168],["T_IS_EQUAL","==",168],["T_WHITESPACE"," ",168],["T_LNUMBER","0",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n      ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","transport_",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","flush",169],"(",")",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_VARIABLE","$out",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","pack",172],"(",["T_CONSTANT_ENCAPSED_STRING","'N'",172],",",["T_WHITESPACE"," ",172],["T_STRING","TStringFuncFactory",172],["T_DOUBLE_COLON","::",172],["T_STRING","create",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","strlen",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","wBuf_",172],")",")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$out",173],["T_WHITESPACE"," ",173],["T_CONCAT_EQUAL",".=",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","wBuf_",173],";",["T_WHITESPACE","\n\n    ",173],["T_COMMENT","\/\/ Note that we clear the internal wBuf_ prior to the underlying write\n",175],["T_WHITESPACE","    ",176],["T_COMMENT","\/\/ to ensure we're in a sane state (i.e. internal buffer cleaned)\n",176],["T_WHITESPACE","    ",177],["T_COMMENT","\/\/ if the underlying write throws up an exception\n",177],["T_WHITESPACE","    ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","wBuf_",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","''",178],";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","transport_",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","write",179],"(",["T_VARIABLE","$out",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","transport_",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","flush",180],"(",")",";",["T_WHITESPACE","\n  ",180],"}",["T_WHITESPACE","\n\n",181],"}",["T_WHITESPACE","\n",183]]
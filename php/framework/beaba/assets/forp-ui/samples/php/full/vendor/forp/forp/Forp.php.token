[["T_OPEN_TAG","<?php\n",1],["T_NAMESPACE","namespace",2],["T_WHITESPACE"," ",2],["T_STRING","forp",2],";",["T_WHITESPACE","\n\n",2],"!",["T_STRING","defined",4],"(",["T_CONSTANT_ENCAPSED_STRING","'FORP_UI_SRC'",4],")",["T_WHITESPACE"," ",4],["T_BOOLEAN_AND","&&",4],["T_WHITESPACE"," ",4],["T_STRING","define",4],"(",["T_CONSTANT_ENCAPSED_STRING","'FORP_UI_SRC'",4],",",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","'js\/forp.min.js'",4],")",";",["T_WHITESPACE","\n\n",4],["T_DOC_COMMENT","\/**\n * Exception\n *\/",6],["T_WHITESPACE","\n",8],["T_CLASS","class",9],["T_WHITESPACE"," ",9],["T_STRING","Exception",9],["T_WHITESPACE"," ",9],["T_EXTENDS","extends",9],["T_WHITESPACE"," ",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_WHITESPACE"," ",9],"{","}",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Response\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Response",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var array $conf\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$conf",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",["T_CONSTANT_ENCAPSED_STRING","'async'",19],["T_DOUBLE_ARROW","=>",19],["T_STRING","false",19],")",";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @param type $opts\n     * @return \\forp\\Response\n     *\/",21],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","setConf",25],"(",["T_VARIABLE","$opts",25],")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","conf",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","array_merge",27],"(",["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","conf",27],",",["T_WHITESPACE"," ",27],["T_VARIABLE","$opts",27],")",";",["T_WHITESPACE","\n        ",27],["T_RETURN","return",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],";",["T_WHITESPACE","\n    ",28],"}",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @return \\forp\\ResponseCli|\\forp\\ResponseHttpHeaders|\\forp\\ResponseInlineXForpStack|\\forp\\ResponseInlineAsync|\\forp\\ResponseInline\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","getResponse",34],"(",")",["T_WHITESPACE","\n    ",34],"{",["T_WHITESPACE","\n        ",35],["T_IF","if",36],"(",["T_STRING","php_sapi_name",36],"(",")",["T_WHITESPACE"," ",36],["T_IS_IDENTICAL","===",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","\"cli\"",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n            ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","ResponseCli",37],"(",")",";",["T_WHITESPACE","\n        ",37],"}",["T_WHITESPACE","\n\n        ",38],["T_COMMENT","\/\/ priority to send forp datas in HTTP headers\n",40],["T_WHITESPACE","        ",41],["T_COMMENT","\/\/ forp client is a browser extension\n",41],["T_WHITESPACE","        ",42],["T_IF","if",42],"(",["T_ISSET","isset",42],"(",["T_VARIABLE","$_SERVER",42],")",["T_WHITESPACE","\n           ",42],["T_BOOLEAN_AND","&&",43],["T_WHITESPACE"," ",43],["T_ISSET","isset",43],"(",["T_VARIABLE","$_SERVER",43],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_FORP_VERSION'",43],"]",")",["T_WHITESPACE","\n        ",43],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_IF","if",45],"(","!",["T_EMPTY","empty",45],"(",["T_VARIABLE","$_SERVER",45],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT'",45],"]",")",["T_WHITESPACE","\n               ",45],["T_BOOLEAN_AND","&&",46],["T_WHITESPACE"," ",46],["T_STRING","strpos",46],"(",["T_STRING","strtolower",46],"(",["T_VARIABLE","$_SERVER",46],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT'",46],"]",")",",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'json'",46],")",["T_WHITESPACE","\n            ",46],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n                ",47],["T_COMMENT","\/\/ send forp datas in HTTP headers\n",48],["T_WHITESPACE","                ",49],["T_COMMENT","\/\/ XHR communication case\n",49],["T_WHITESPACE","                ",50],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_STRING","ResponseHttpHeaders",50],"(",")",";",["T_WHITESPACE","\n            ",50],"}",["T_WHITESPACE"," ",51],["T_ELSE","else",51],["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n                ",51],["T_COMMENT","\/\/ headers size limitation on Chrome\n",52],["T_WHITESPACE","                ",53],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_STRING","ResponseInlineXForpStack",53],"(",")",";",["T_WHITESPACE","\n            ",53],"}",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n\n        ",55],["T_COMMENT","\/\/ asynchrone JavaScript loading + inline JavaScript\n",57],["T_WHITESPACE","        ",58],["T_IF","if",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","conf",58],"[",["T_CONSTANT_ENCAPSED_STRING","'async'",58],"]",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_STRING","ResponseInlineAsync",59],"(",")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n\n        ",60],["T_COMMENT","\/\/ JavaScript loading + inline JavaScript\n",62],["T_WHITESPACE","        ",63],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_STRING","ResponseInline",63],"(",")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @return \\forp\\Response\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","send",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getResponse",71],"(",")",["T_WHITESPACE","\n             ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","send",72],"(",["T_STRING","forp_dump",72],"(",")",")",";",["T_WHITESPACE","\n\n        ",72],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n",75],"}",["T_WHITESPACE","\n\n",76],["T_DOC_COMMENT","\/**\n * IResponse\n *\/",78],["T_WHITESPACE","\n",80],["T_INTERFACE","interface",81],["T_WHITESPACE"," ",81],["T_STRING","IResponse",81],["T_WHITESPACE","\n",81],"{",["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","send",83],"(",["T_ARRAY","array",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$datas",83],")",";",["T_WHITESPACE","\n",83],"}",["T_WHITESPACE","\n\n",84],["T_DOC_COMMENT","\/**\n * ResponseCli\n *\/",86],["T_WHITESPACE","\n",88],["T_CLASS","class",89],["T_WHITESPACE"," ",89],["T_STRING","ResponseCli",89],["T_WHITESPACE","\n",89],["T_IMPLEMENTS","implements",90],["T_WHITESPACE"," ",90],["T_STRING","IResponse",90],["T_WHITESPACE","\n",90],"{",["T_WHITESPACE","\n    ",91],["T_DOC_COMMENT","\/**\n     * @param array $datas\n     *\/",92],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","send",95],"(",["T_ARRAY","array",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$datas",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_STRING","forp_print",97],"(",")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n",98],"}",["T_WHITESPACE","\n\n",99],["T_DOC_COMMENT","\/**\n * ResponseInline\n *\/",101],["T_WHITESPACE","\n",103],["T_CLASS","class",104],["T_WHITESPACE"," ",104],["T_STRING","ResponseInline",104],["T_WHITESPACE","\n",104],["T_IMPLEMENTS","implements",105],["T_WHITESPACE"," ",105],["T_STRING","IResponse",105],["T_WHITESPACE","\n",105],"{",["T_WHITESPACE","\n    ",106],["T_DOC_COMMENT","\/**\n     * @param array $datas\n     *\/",107],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","send",110],"(",["T_ARRAY","array",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$datas",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_CLOSE_TAG","?>\n",112],["T_INLINE_HTML","        <div class=\"forp\"><\/div>\n        <script src=\"",113],["T_OPEN_TAG","<?php ",114],["T_ECHO","echo",114],["T_WHITESPACE"," ",114],["T_STRING","FORP_UI_SRC",114],";",["T_WHITESPACE"," ",114],["T_CLOSE_TAG","?>",114],["T_INLINE_HTML","\"><\/script>\n        <script>\n            (function(f) {\n               f.find(\".forp\")\n                .forp({\n                    stack : ",114],["T_OPEN_TAG","<?php ",119],["T_ECHO","echo",119],["T_WHITESPACE"," ",119],["T_STRING","json_encode",119],"(",["T_VARIABLE","$datas",119],")",";",["T_WHITESPACE"," ",119],["T_CLOSE_TAG","?>",119],["T_INLINE_HTML",",\n                    mode : \"fixed\"\n                })\n            })(forp);\n        <\/script>\n        ",119],["T_OPEN_TAG","<?php\n",124],["T_WHITESPACE","    ",125],"}",["T_WHITESPACE","\n",125],"}",["T_WHITESPACE","\n\n",126],["T_DOC_COMMENT","\/**\n * ResponseInlineAsync\n *\/",128],["T_WHITESPACE","\n",130],["T_CLASS","class",131],["T_WHITESPACE"," ",131],["T_STRING","ResponseInlineAsync",131],["T_WHITESPACE","\n",131],["T_IMPLEMENTS","implements",132],["T_WHITESPACE"," ",132],["T_STRING","IResponse",132],["T_WHITESPACE","\n",132],"{",["T_WHITESPACE","\n    ",133],["T_DOC_COMMENT","\/**\n     * @param array $datas\n     *\/",134],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","send",137],"(",["T_ARRAY","array",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$datas",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_CLOSE_TAG","?>\n",139],["T_INLINE_HTML","<i\/>\n<div class=\"forp\"><\/div>\n<script type=\"text\/javascript\">\n    var _forpguiStack = ",140],["T_OPEN_TAG","<?php ",143],["T_ECHO","echo",143],["T_WHITESPACE"," ",143],["T_STRING","json_encode",143],"(",["T_VARIABLE","$datas",143],")",";",["T_WHITESPACE"," ",143],["T_CLOSE_TAG","?>",143],["T_INLINE_HTML",",\n        _forpguiSrc = \"",143],["T_OPEN_TAG","<?php ",144],["T_ECHO","echo",144],["T_WHITESPACE"," ",144],["T_STRING","FORP_UI_SRC",144],";",["T_CLOSE_TAG","?>",144],["T_INLINE_HTML","\";\n<\/script>\n<script type=\"text\/javascript\">\n(function() {\n    var fg = document.createElement('script');\n    fg.type = 'text\/javascript';\n    fg.async = true;\n    fg.src = _forpguiSrc;\n    fg.onload = (function(f) {\n       f.find(\".forp\")\n        .forp({\n            stack : _forpguiStack,\n            mode : \"fixed\"\n        })\n    })(forp);\n    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(fg);\n})();\n<\/script>\n        ",144],["T_OPEN_TAG","<?php\n",162],["T_WHITESPACE","    ",163],"}",["T_WHITESPACE","\n",163],"}",["T_WHITESPACE","\n\n",164],["T_DOC_COMMENT","\/**\n * ResponseInlineXForpStack\n *\/",166],["T_WHITESPACE","\n",168],["T_CLASS","class",169],["T_WHITESPACE"," ",169],["T_STRING","ResponseInlineXForpStack",169],["T_WHITESPACE","\n",169],["T_IMPLEMENTS","implements",170],["T_WHITESPACE"," ",170],["T_STRING","IResponse",170],["T_WHITESPACE","\n",170],"{",["T_WHITESPACE","\n    ",171],["T_DOC_COMMENT","\/**\n     * @param array $datas\n     *\/",172],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","send",175],"(",["T_ARRAY","array",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$datas",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_ECHO","echo",177],["T_WHITESPACE","    ",177],["T_CONSTANT_ENCAPSED_STRING","\"<i\/>\n<script type='application\/x-forp-stack' id=forpStack>\"",177],["T_WHITESPACE"," ",178],".",["T_WHITESPACE","\n",178],["T_STRING","json_encode",179],"(",["T_VARIABLE","$datas",179],")",["T_WHITESPACE"," ",179],".",["T_WHITESPACE","\n",179],["T_CONSTANT_ENCAPSED_STRING","\"<\/script>\"",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n",181],"}",["T_WHITESPACE","\n\n",182],["T_DOC_COMMENT","\/**\n * ResponseHttpHeaders\n *\/",184],["T_WHITESPACE","\n",186],["T_CLASS","class",187],["T_WHITESPACE"," ",187],["T_STRING","ResponseHttpHeaders",187],["T_WHITESPACE","\n",187],["T_IMPLEMENTS","implements",188],["T_WHITESPACE"," ",188],["T_STRING","IResponse",188],["T_WHITESPACE","\n",188],"{",["T_WHITESPACE","\n    ",189],["T_DOC_COMMENT","\/**\n     * @param array $datas\n     * @throws \\Exception\n     *\/",190],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","send",194],"(",["T_ARRAY","array",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$datas",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$parts",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","explode",196],"(",["T_WHITESPACE","\n            ",196],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",197],",",["T_WHITESPACE","\n            ",197],["T_STRING","chunk_split",198],"(",["T_STRING","json_encode",198],"(",["T_VARIABLE","$datas",198],")",",",["T_WHITESPACE"," ",198],["T_LNUMBER","5000",198],",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",198],")",["T_WHITESPACE","\n        ",198],")",";",["T_WHITESPACE","\n        ",199],["T_FOREACH","foreach",200],"(",["T_VARIABLE","$parts",200],["T_WHITESPACE"," ",200],["T_AS","as",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$i",200],["T_DOUBLE_ARROW","=>",200],["T_VARIABLE","$part",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_STRING","header",201],"(",["T_CONSTANT_ENCAPSED_STRING","\"X-Forp-Stack_\"",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_VARIABLE","$i",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","\":\"",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_VARIABLE","$part",201],")",";",["T_WHITESPACE","\n            ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$i",202],["T_WHITESPACE"," ",202],">",["T_WHITESPACE"," ",202],["T_LNUMBER","99999",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_THROW","throw",203],["T_WHITESPACE"," ",203],["T_NEW","new",203],["T_WHITESPACE"," ",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Exception",203],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\t exceed 99999 chunks.'",203],")",";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n",206],"}"]
[["T_OPEN_TAG","<?php\n",1],["T_NAMESPACE","namespace",2],["T_WHITESPACE"," ",2],["T_STRING","beaba",2],["T_NS_SEPARATOR","\\",2],["T_STRING","core",2],";",["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * This file is distributed under the MIT Open Source\n * License. See README.MD for details.\n * @author Ioan CHIRIAC\n *\/",3],["T_WHITESPACE","\n",7],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","Controller",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n\n    ",9],["T_CONST","const",11],["T_WHITESPACE"," ",11],["T_STRING","GET",11],["T_WHITESPACE","       ",11],"=",["T_WHITESPACE"," ",11],["T_CONSTANT_ENCAPSED_STRING","'GET'",11],";",["T_WHITESPACE","\n    ",11],["T_CONST","const",12],["T_WHITESPACE"," ",12],["T_STRING","POST",12],["T_WHITESPACE","      ",12],"=",["T_WHITESPACE"," ",12],["T_CONSTANT_ENCAPSED_STRING","'POST'",12],";",["T_WHITESPACE","\n    ",12],["T_CONST","const",13],["T_WHITESPACE"," ",13],["T_STRING","DELETE",13],["T_WHITESPACE","    ",13],"=",["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","'DELETE'",13],";",["T_WHITESPACE","\n    ",13],["T_CONST","const",14],["T_WHITESPACE"," ",14],["T_STRING","PUT",14],["T_WHITESPACE","       ",14],"=",["T_WHITESPACE"," ",14],["T_CONSTANT_ENCAPSED_STRING","'PUT'",14],";",["T_WHITESPACE","\n    ",14],["T_CONST","const",15],["T_WHITESPACE"," ",15],["T_STRING","ALL",15],["T_WHITESPACE","       ",15],"=",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'*'",15],";",["T_WHITESPACE","\n    ",15],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","HTML",16],["T_WHITESPACE","      ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'html'",16],";",["T_WHITESPACE","\n    ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","JSON",17],["T_WHITESPACE","      ",17],"=",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'json'",17],";",["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","XML",18],["T_WHITESPACE","       ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'xml'",18],";",["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","RSS",19],["T_WHITESPACE","       ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'rss'",19],";",["T_WHITESPACE","\n\n    ",19],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$app",21],";",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * Initialize a new controller with the specified app\n     * @param Application $app\n     *\/",22],["T_WHITESPACE","\n    ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","__construct",26],"(",["T_WHITESPACE"," ",26],["T_STRING","Application",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$app",26],["T_WHITESPACE"," ",26],")",["T_WHITESPACE","\n    ",26],"{",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","app",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$app",28],";",["T_WHITESPACE","\n    ",28],"}",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * Gets the view response\n     * @return IView\n     *\/",31],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","getView",35],"(",")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","app",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getView",37],"(",")",";",["T_WHITESPACE","\n    ",37],"}",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Retrieves a specific model mapper\n     * @param string $name The model to be retrieved\n     * @return IModel\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","getModel",45],"(",["T_WHITESPACE"," ",45],["T_VARIABLE","$name",45],["T_WHITESPACE"," ",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","app",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getModel",47],"(",["T_VARIABLE","$name",47],")",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Helper for getting a service\n     * @param string $name The service name to retrieve\n     * @return IService\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","getService",55],"(",["T_WHITESPACE"," ",55],["T_VARIABLE","$name",55],["T_WHITESPACE"," ",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","app",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getService",57],"(",["T_VARIABLE","$name",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Hook : before executing any action\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","preAction",63],"(",["T_WHITESPACE"," ",63],"&",["T_VARIABLE","$action",63],",",["T_WHITESPACE"," ",63],"&",["T_VARIABLE","$args",63],["T_WHITESPACE"," ",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE"," ",63],"}",["T_WHITESPACE","\n    ",63],["T_DOC_COMMENT","\/**\n     * Hook : after executing the action\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","postAction",67],"(",["T_WHITESPACE"," ",67],["T_VARIABLE","$action",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$args",67],",",["T_WHITESPACE"," ",67],"&",["T_VARIABLE","$result",67],["T_WHITESPACE"," ",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE"," ",67],"}",["T_WHITESPACE","\n    ",67],["T_DOC_COMMENT","\/**\n     * Gets a configuration entry\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","getConfig",71],"(",["T_WHITESPACE"," ",71],["T_VARIABLE","$key",71],["T_WHITESPACE"," ",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","app",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","config",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getConfig",73],"(",["T_VARIABLE","$key",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n    ",74],["T_DOC_COMMENT","\/**\n     * Executes the specified action\n     * @param string $action\n     * @param array $params\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","execute",80],"(",["T_WHITESPACE"," ",80],["T_VARIABLE","$action",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$params",80],["T_WHITESPACE"," ",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$action",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","strtr",82],"(",["T_STRING","sanitize",82],"(",["T_VARIABLE","$action",82],",",["T_WHITESPACE"," ",82],["T_STRING","true",82],",",["T_WHITESPACE"," ",82],["T_STRING","true",82],")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'-'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'_'",82],")",".",["T_CONSTANT_ENCAPSED_STRING","'_action'",82],";",["T_WHITESPACE","\n        ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_WHITESPACE"," ",83],"!",["T_STRING","is_callable",83],"(",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$action",83],["T_WHITESPACE"," ",83],")",["T_WHITESPACE"," ",83],")",["T_WHITESPACE"," ",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_THROW","throw",84],["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","Exception",84],"(",["T_WHITESPACE","\n                ",84],["T_CONSTANT_ENCAPSED_STRING","'Undefined action : '",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_VARIABLE","$action",85],",",["T_WHITESPACE"," ",85],["T_LNUMBER","501",85],["T_WHITESPACE","\n            ",85],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","preAction",88],"(",["T_VARIABLE","$action",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$params",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$result",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_VARIABLE","$action",89],"(",["T_WHITESPACE"," ",89],["T_VARIABLE","$params",89],["T_WHITESPACE"," ",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","postAction",90],"(",["T_VARIABLE","$action",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$params",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$result",90],")",";",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$result",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n",92],"}",["T_WHITESPACE","\n",93]]
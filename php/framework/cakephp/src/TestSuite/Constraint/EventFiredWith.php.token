[["T_OPEN_TAG","<?php\n",1],["T_NAMESPACE","namespace",2],["T_WHITESPACE"," ",2],["T_STRING","Cake",2],["T_NS_SEPARATOR","\\",2],["T_STRING","TestSuite",2],["T_NS_SEPARATOR","\\",2],["T_STRING","Constraint",2],";",["T_WHITESPACE","\n\n",2],["T_USE","use",4],["T_WHITESPACE"," ",4],["T_STRING","Cake",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Event",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Event",4],";",["T_WHITESPACE","\n",4],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Cake",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Event",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EventManager",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","PHPUnit_Framework_AssertionFailedError",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","PHPUnit_Framework_Constraint",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * EventFiredWith constraint\n *\n * Another glorified in_array check\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","EventFiredWith",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","PHPUnit_Framework_Constraint",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Array of fired events\n     *\n     * @var EventManager\n     *\/",16],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$_eventManager",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Event data key\n     *\n     * @var string\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$_dataKey",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Event data value\n     *\n     * @var string\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$_dataValue",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param EventManager $eventManager Event manager to check\n     * @param string $dataKey Data key\n     * @param string $dataValue Data value\n     *\/",37],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","__construct",44],"(",["T_VARIABLE","$eventManager",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$dataKey",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$dataValue",44],")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_STRING","parent",46],["T_DOUBLE_COLON","::",46],["T_STRING","__construct",46],"(",")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_eventManager",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$eventManager",47],";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_dataKey",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$dataKey",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_dataValue",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$dataValue",49],";",["T_WHITESPACE","\n\n        ",49],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_eventManager",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getEventList",51],"(",")",["T_WHITESPACE"," ",51],["T_IS_IDENTICAL","===",51],["T_WHITESPACE"," ",51],["T_STRING","null",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_THROW","throw",52],["T_WHITESPACE"," ",52],["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_STRING","PHPUnit_Framework_AssertionFailedError",52],"(",["T_CONSTANT_ENCAPSED_STRING","'The event manager you are asserting against is not configured to track events.'",52],")",";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Checks if event is in fired array\n     *\n     * @param mixed $other Constraint check\n     * @return bool\n     *\/",56],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","matches",62],"(",["T_VARIABLE","$other",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$firedEvents",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],"[","]",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$list",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_eventManager",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getEventList",65],"(",")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$totalEvents",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","count",66],"(",["T_VARIABLE","$list",66],")",";",["T_WHITESPACE","\n        ",66],["T_FOR","for",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$e",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_LNUMBER","0",67],";",["T_WHITESPACE"," ",67],["T_VARIABLE","$e",67],["T_WHITESPACE"," ",67],"<",["T_WHITESPACE"," ",67],["T_VARIABLE","$totalEvents",67],";",["T_WHITESPACE"," ",67],["T_VARIABLE","$e",67],["T_INC","++",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$firedEvents",68],"[","]",["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$list",68],"[",["T_VARIABLE","$e",68],"]",";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$eventGroup",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","collection",71],"(",["T_VARIABLE","$firedEvents",71],")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","groupBy",72],"(",["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],"(",["T_STRING","Event",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$event",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$event",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","name",73],"(",")",";",["T_WHITESPACE","\n            ",73],"}",")",["T_WHITESPACE","\n            ",74],["T_OBJECT_OPERATOR","->",75],["T_STRING","toArray",75],"(",")",";",["T_WHITESPACE","\n\n        ",75],["T_IF","if",77],["T_WHITESPACE"," ",77],"(","!",["T_STRING","array_key_exists",77],"(",["T_VARIABLE","$other",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$eventGroup",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_STRING","false",78],";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$events",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$eventGroup",81],"[",["T_VARIABLE","$other",81],"]",";",["T_WHITESPACE","\n\n        ",81],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_STRING","count",83],"(",["T_VARIABLE","$events",83],")",["T_WHITESPACE"," ",83],">",["T_WHITESPACE"," ",83],["T_LNUMBER","1",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_THROW","throw",84],["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","PHPUnit_Framework_AssertionFailedError",84],"(",["T_STRING","sprintf",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Event \"%s\" was fired %d times, cannot make data assertion'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$other",84],",",["T_WHITESPACE"," ",84],["T_STRING","count",84],"(",["T_VARIABLE","$events",84],")",")",")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$event",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$events",87],"[",["T_LNUMBER","0",87],"]",";",["T_WHITESPACE","\n\n        ",87],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_STRING","array_key_exists",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_dataKey",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$event",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","data",89],")",["T_WHITESPACE"," ",89],["T_IS_IDENTICAL","===",89],["T_WHITESPACE"," ",89],["T_STRING","false",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_STRING","false",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$event",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","data",93],"[",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_dataKey",93],"]",["T_WHITESPACE"," ",93],["T_IS_IDENTICAL","===",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_dataValue",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Assertion message string\n     *\n     * @return string\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","toString",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'was fired with '",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_dataKey",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","' matching '",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_STRING_CAST","(string)",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_dataValue",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n",104],"}",["T_WHITESPACE","\n",105]]
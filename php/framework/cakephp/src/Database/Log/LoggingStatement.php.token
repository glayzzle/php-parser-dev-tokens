[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Database",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Log",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Database",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Statement",17],["T_NS_SEPARATOR","\\",17],["T_STRING","StatementDecorator",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Exception",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * Statement decorator used to\n *\n * @internal\n *\/",20],["T_WHITESPACE","\n",24],["T_CLASS","class",25],["T_WHITESPACE"," ",25],["T_STRING","LoggingStatement",25],["T_WHITESPACE"," ",25],["T_EXTENDS","extends",25],["T_WHITESPACE"," ",25],["T_STRING","StatementDecorator",25],["T_WHITESPACE","\n",25],"{",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Logger instance responsible for actually doing the logging task\n     *\n     * @var \\Cake\\Database\\Log\\QueryLogger\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_logger",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Holds bound params\n     *\n     * @var array\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_compiledParams",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],"[","]",";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Wrapper for the execute function to calculate time spent\n     * and log the query afterwards.\n     *\n     * @param array|null $params List of values to be bound to query\n     * @return bool True on success, false otherwise\n     * @throws \\Exception Re-throws any exception raised during query execution.\n     *\/",42],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","execute",50],"(",["T_VARIABLE","$params",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","null",50],")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$t",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","microtime",52],"(",["T_STRING","true",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$query",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_STRING","LoggedQuery",53],"(",")",";",["T_WHITESPACE","\n\n        ",53],["T_TRY","try",55],["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$result",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","parent",56],["T_DOUBLE_COLON","::",56],["T_STRING","execute",56],"(",["T_VARIABLE","$params",56],")",";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE"," ",57],["T_CATCH","catch",57],["T_WHITESPACE"," ",57],"(",["T_STRING","Exception",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$e",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$e",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","queryString",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","queryString",58],";",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$query",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","error",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$e",59],";",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_log",60],"(",["T_VARIABLE","$query",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$params",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$t",60],")",";",["T_WHITESPACE","\n            ",60],["T_THROW","throw",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$e",61],";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$query",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","numRows",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","rowCount",64],"(",")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_log",65],"(",["T_VARIABLE","$query",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$params",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$t",65],")",";",["T_WHITESPACE","\n\n        ",65],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$result",67],";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Copies the logging data to the passed LoggedQuery and sends it\n     * to the logging system.\n     *\n     * @param \\Cake\\Database\\Log\\LoggedQuery $query The query to log.\n     * @param array $params List of values to be bound to query.\n     * @param float $startTime The microtime when the query was executed.\n     * @return void\n     *\/",70],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","_log",79],"(",["T_VARIABLE","$query",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$params",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$startTime",79],")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$query",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","took",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","round",81],"(","(",["T_STRING","microtime",81],"(",["T_STRING","true",81],")",["T_WHITESPACE"," ",81],"-",["T_WHITESPACE"," ",81],["T_VARIABLE","$startTime",81],")",["T_WHITESPACE"," ",81],"*",["T_WHITESPACE"," ",81],["T_LNUMBER","1000",81],",",["T_WHITESPACE"," ",81],["T_LNUMBER","0",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$query",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","params",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$params",82],["T_WHITESPACE"," ",82],"?",":",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_compiledParams",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$query",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","query",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","queryString",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","logger",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","log",84],"(",["T_VARIABLE","$query",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Wrapper for bindValue function to gather each parameter to be later used\n     * in the logger function.\n     *\n     * @param string|int $column Name or param position to be bound\n     * @param mixed $value The value to bind to variable in query\n     * @param string|int|null $type PDO type or name of configured Type class\n     * @return void\n     *\/",87],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","bindValue",96],"(",["T_VARIABLE","$column",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$value",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$type",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'string'",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_STRING","parent",98],["T_DOUBLE_COLON","::",98],["T_STRING","bindValue",98],"(",["T_VARIABLE","$column",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$value",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$type",98],")",";",["T_WHITESPACE","\n        ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$type",99],["T_WHITESPACE"," ",99],["T_IS_IDENTICAL","===",99],["T_WHITESPACE"," ",99],["T_STRING","null",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$type",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'string'",100],";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_STRING","ctype_digit",102],"(",["T_VARIABLE","$type",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$value",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","cast",103],"(",["T_VARIABLE","$value",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$type",103],")","[",["T_LNUMBER","0",103],"]",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_compiledParams",105],"[",["T_VARIABLE","$column",105],"]",["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$value",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Sets the logger object instance. When called with no arguments\n     * it returns the currently setup logger instance\n     *\n     * @param object|null $instance Logger object instance.\n     * @return object Logger instance\n     *\/",108],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","logger",115],"(",["T_VARIABLE","$instance",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","null",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$instance",117],["T_WHITESPACE"," ",117],["T_IS_IDENTICAL","===",117],["T_WHITESPACE"," ",117],["T_STRING","null",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_logger",118],";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n\n        ",119],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_logger",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$instance",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n",122],"}",["T_WHITESPACE","\n",123]]
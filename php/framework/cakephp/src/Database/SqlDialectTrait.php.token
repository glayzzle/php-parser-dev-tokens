[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Database",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Database",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Expression",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Comparison",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Sql dialect trait\n *\/",19],["T_WHITESPACE","\n",21],["T_TRAIT","trait",22],["T_WHITESPACE"," ",22],["T_STRING","SqlDialectTrait",22],["T_WHITESPACE","\n",22],"{",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Quotes a database identifier (a column name, table name, etc..) to\n     * be used safely in queries without the risk of using reserved words\n     *\n     * @param string $identifier The identifier to quote.\n     * @return string\n     *\/",25],["T_WHITESPACE","\n    ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","quoteIdentifier",32],"(",["T_VARIABLE","$identifier",32],")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$identifier",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","trim",34],"(",["T_VARIABLE","$identifier",34],")",";",["T_WHITESPACE","\n\n        ",34],["T_IF","if",36],["T_WHITESPACE"," ",36],"(",["T_VARIABLE","$identifier",36],["T_WHITESPACE"," ",36],["T_IS_IDENTICAL","===",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'*'",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n            ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'*'",37],";",["T_WHITESPACE","\n        ",37],"}",["T_WHITESPACE","\n\n        ",38],["T_IF","if",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$identifier",40],["T_WHITESPACE"," ",40],["T_IS_IDENTICAL","===",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","''",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n            ",40],["T_RETURN","return",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","''",41],";",["T_WHITESPACE","\n        ",41],"}",["T_WHITESPACE","\n\n        ",42],["T_COMMENT","\/\/ string\n",44],["T_WHITESPACE","        ",45],["T_IF","if",45],["T_WHITESPACE"," ",45],"(",["T_STRING","preg_match",45],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[\\w-]+$\/'",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$identifier",45],")",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n            ",45],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_startQuote",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_VARIABLE","$identifier",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_endQuote",46],";",["T_WHITESPACE","\n        ",46],"}",["T_WHITESPACE","\n\n        ",47],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_STRING","preg_match",49],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[\\w-]+\\.[^ \\*]*$\/'",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$identifier",49],")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n",49],["T_COMMENT","\/\/ string.string\n",50],["T_WHITESPACE","            ",51],["T_VARIABLE","$items",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","explode",51],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$identifier",51],")",";",["T_WHITESPACE","\n\n            ",51],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_startQuote",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_STRING","implode",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_endQuote",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'.'",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_startQuote",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$items",53],")",["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_endQuote",53],";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_STRING","preg_match",56],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[\\w-]+\\.\\*$\/'",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$identifier",56],")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n",56],["T_COMMENT","\/\/ string.*\n",57],["T_WHITESPACE","            ",58],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_startQuote",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_STRING","str_replace",58],"(",["T_CONSTANT_ENCAPSED_STRING","'.*'",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_endQuote",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'.*'",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$identifier",58],")",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n\n        ",59],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_STRING","preg_match",61],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^([\\w-]+)\\((.*)\\)$\/'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$identifier",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$matches",61],")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n",61],["T_COMMENT","\/\/ Functions\n",62],["T_WHITESPACE","            ",63],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$matches",63],"[",["T_LNUMBER","1",63],"]",["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'('",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","quoteIdentifier",63],"(",["T_VARIABLE","$matches",63],"[",["T_LNUMBER","2",63],"]",")",["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","')'",63],";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_COMMENT","\/\/ Alias.field AS thing\n",66],["T_WHITESPACE","        ",67],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_STRING","preg_match",67],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^([\\w-]+(\\.[\\w-]+|\\(.*\\))*)\\s+AS\\s*([\\w-]+)$\/i'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$identifier",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$matches",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","quoteIdentifier",68],"(",["T_VARIABLE","$matches",68],"[",["T_LNUMBER","1",68],"]",")",["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","' AS '",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","quoteIdentifier",68],"(",["T_VARIABLE","$matches",68],"[",["T_LNUMBER","3",68],"]",")",";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n\n        ",69],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_STRING","preg_match",71],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[\\w-_\\s]*[\\w-_]+\/'",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$identifier",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_startQuote",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$identifier",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_endQuote",72],";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n\n        ",73],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$identifier",75],";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Returns a callable function that will be used to transform a passed Query object.\n     * This function, in turn, will return an instance of a Query object that has been\n     * transformed to accommodate any specificities of the SQL dialect in use.\n     *\n     * @param string $type the type of query to be transformed\n     * (select, insert, update, delete)\n     * @return callable\n     *\/",78],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","queryTranslator",87],"(",["T_VARIABLE","$type",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$query",89],")",["T_WHITESPACE"," ",89],["T_USE","use",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$type",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","autoQuoting",90],"(",")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                ",90],["T_VARIABLE","$query",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],"(",["T_NEW","new",91],["T_WHITESPACE"," ",91],["T_STRING","IdentifierQuoter",91],"(",["T_VARIABLE","$this",91],")",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","quote",91],"(",["T_VARIABLE","$query",91],")",";",["T_WHITESPACE","\n            ",91],"}",["T_WHITESPACE","\n\n            ",92],["T_VARIABLE","$query",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],"{",["T_CONSTANT_ENCAPSED_STRING","'_'",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$type",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'QueryTranslator'",94],"}","(",["T_VARIABLE","$query",94],")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$translators",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_expressionTranslators",95],"(",")",";",["T_WHITESPACE","\n            ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_VARIABLE","$translators",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$query",97],";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n\n            ",98],["T_VARIABLE","$query",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","traverseExpressions",100],"(",["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$expression",100],")",["T_WHITESPACE"," ",100],["T_USE","use",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$translators",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$query",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_FOREACH","foreach",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$translators",101],["T_WHITESPACE"," ",101],["T_AS","as",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$class",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$method",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                    ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$expression",102],["T_WHITESPACE"," ",102],["T_INSTANCEOF","instanceof",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$class",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],"{",["T_VARIABLE","$method",103],"}","(",["T_VARIABLE","$expression",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$query",103],")",";",["T_WHITESPACE","\n                    ",103],"}",["T_WHITESPACE","\n                ",104],"}",["T_WHITESPACE","\n            ",105],"}",")",";",["T_WHITESPACE","\n\n            ",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$query",108],";",["T_WHITESPACE","\n        ",108],"}",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Returns an associative array of methods that will transform Expression\n     * objects to conform with the specific SQL dialect. Keys are class names\n     * and values a method in this class.\n     *\n     * @return array\n     *\/",112],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","_expressionTranslators",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],"[","]",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Apply translation steps to select queries.\n     *\n     * @param \\Cake\\Database\\Query $query The query to translate\n     * @return \\Cake\\Database\\Query The modified query\n     *\/",124],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","_selectQueryTranslator",130],"(",["T_VARIABLE","$query",130],")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_transformDistinct",132],"(",["T_VARIABLE","$query",132],")",";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Returns the passed query after rewriting the DISTINCT clause, so that drivers\n     * that do not support the \"ON\" part can provide the actual way it should be done\n     *\n     * @param \\Cake\\Database\\Query $query The query to be transformed\n     * @return \\Cake\\Database\\Query\n     *\/",135],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","_transformDistinct",142],"(",["T_VARIABLE","$query",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_STRING","is_array",144],"(",["T_VARIABLE","$query",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","clause",144],"(",["T_CONSTANT_ENCAPSED_STRING","'distinct'",144],")",")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$query",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","group",145],"(",["T_VARIABLE","$query",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","clause",145],"(",["T_CONSTANT_ENCAPSED_STRING","'distinct'",145],")",",",["T_WHITESPACE"," ",145],["T_STRING","true",145],")",";",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$query",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","distinct",146],"(",["T_STRING","false",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$query",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Apply translation steps to delete queries.\n     *\n     * Chops out aliases on delete query conditions as most database dialects do not\n     * support aliases in delete queries. This also removes aliases\n     * in table names as they frequently don't work either.\n     *\n     * We are intentionally not supporting deletes with joins as they have even poorer support.\n     *\n     * @param \\Cake\\Database\\Query $query The query to translate\n     * @return \\Cake\\Database\\Query The modified query\n     *\/",152],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","_deleteQueryTranslator",164],"(",["T_VARIABLE","$query",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$hadAlias",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","false",166],";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$tables",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],"[","]",";",["T_WHITESPACE","\n        ",167],["T_FOREACH","foreach",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$query",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","clause",168],"(",["T_CONSTANT_ENCAPSED_STRING","'from'",168],")",["T_WHITESPACE"," ",168],["T_AS","as",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$alias",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$table",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_STRING","is_string",169],"(",["T_VARIABLE","$alias",169],")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$hadAlias",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","true",170],";",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$tables",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$table",172],";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$hadAlias",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$query",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","from",175],"(",["T_VARIABLE","$tables",175],",",["T_WHITESPACE"," ",175],["T_STRING","true",175],")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n\n        ",176],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","!",["T_VARIABLE","$hadAlias",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$query",179],";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_removeAliasesFromConditions",182],"(",["T_VARIABLE","$query",182],")",";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Apply translation steps to update queries.\n     *\n     * Chops out aliases on update query conditions as not all database dialects do support\n     * aliases in update queries.\n     *\n     * Just like for delete queries, joins are currently not supported for update queries.\n     *\n     * @param \\Cake\\Database\\Query $query The query to translate\n     * @return \\Cake\\Database\\Query The modified query\n     *\/",185],["T_WHITESPACE","\n    ",195],["T_PROTECTED","protected",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","_updateQueryTranslator",196],"(",["T_VARIABLE","$query",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_removeAliasesFromConditions",198],"(",["T_VARIABLE","$query",198],")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Removes aliases from the `WHERE` clause of a query.\n     *\n     * @param \\Cake\\Database\\Query $query The query to process.\n     * @return \\Cake\\Database\\Query The modified query.\n     * @throws \\RuntimeException In case the processed query contains any joins, as removing\n     *  aliases from the conditions can break references to the joined tables.\n     *\/",201],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","_removeAliasesFromConditions",209],"(",["T_VARIABLE","$query",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$query",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","clause",211],"(",["T_CONSTANT_ENCAPSED_STRING","'join'",211],")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_THROW","throw",212],["T_WHITESPACE"," ",212],["T_NEW","new",212],["T_WHITESPACE"," ",212],["T_NS_SEPARATOR","\\",212],["T_STRING","RuntimeException",212],"(",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'Aliases are being removed from conditions for UPDATE\/DELETE queries, '",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE","\n                ",213],["T_CONSTANT_ENCAPSED_STRING","'this can break references to joined tables.'",214],["T_WHITESPACE","\n            ",214],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$conditions",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$query",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","clause",218],"(",["T_CONSTANT_ENCAPSED_STRING","'where'",218],")",";",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$conditions",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$conditions",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","traverse",220],"(",["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$condition",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(","!","(",["T_VARIABLE","$condition",221],["T_WHITESPACE"," ",221],["T_INSTANCEOF","instanceof",221],["T_WHITESPACE"," ",221],["T_STRING","Comparison",221],")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n                    ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$condition",222],";",["T_WHITESPACE","\n                ",222],"}",["T_WHITESPACE","\n\n                ",223],["T_VARIABLE","$field",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$condition",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getField",225],"(",")",";",["T_WHITESPACE","\n                ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$field",226],["T_WHITESPACE"," ",226],["T_INSTANCEOF","instanceof",226],["T_WHITESPACE"," ",226],["T_STRING","ExpressionInterface",226],["T_WHITESPACE"," ",226],["T_BOOLEAN_OR","||",226],["T_WHITESPACE"," ",226],["T_STRING","strpos",226],"(",["T_VARIABLE","$field",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'.'",226],")",["T_WHITESPACE"," ",226],["T_IS_IDENTICAL","===",226],["T_WHITESPACE"," ",226],["T_STRING","false",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                    ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$condition",227],";",["T_WHITESPACE","\n                ",227],"}",["T_WHITESPACE","\n\n                ",228],["T_LIST","list",230],"(",",",["T_WHITESPACE"," ",230],["T_VARIABLE","$field",230],")",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","explode",230],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$field",230],")",";",["T_WHITESPACE","\n                ",230],["T_VARIABLE","$condition",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setField",231],"(",["T_VARIABLE","$field",231],")",";",["T_WHITESPACE","\n\n                ",231],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$condition",233],";",["T_WHITESPACE","\n            ",233],"}",")",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n\n        ",235],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$query",237],";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Apply translation steps to insert queries.\n     *\n     * @param \\Cake\\Database\\Query $query The query to translate\n     * @return \\Cake\\Database\\Query The modified query\n     *\/",240],["T_WHITESPACE","\n    ",245],["T_PROTECTED","protected",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","_insertQueryTranslator",246],"(",["T_VARIABLE","$query",246],")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$query",248],";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_DOC_COMMENT","\/**\n     * Returns a SQL snippet for creating a new transaction savepoint\n     *\n     * @param string $name save point name\n     * @return string\n     *\/",251],["T_WHITESPACE","\n    ",256],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","savePointSQL",257],"(",["T_VARIABLE","$name",257],")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'SAVEPOINT LEVEL'",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_VARIABLE","$name",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Returns a SQL snippet for releasing a previously created save point\n     *\n     * @param string $name save point name\n     * @return string\n     *\/",262],["T_WHITESPACE","\n    ",267],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","releaseSavePointSQL",268],"(",["T_VARIABLE","$name",268],")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'RELEASE SAVEPOINT LEVEL'",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_VARIABLE","$name",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Returns a SQL snippet for rollbacking a previously created save point\n     *\n     * @param string $name save point name\n     * @return string\n     *\/",273],["T_WHITESPACE","\n    ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","rollbackSavePointSQL",279],"(",["T_VARIABLE","$name",279],")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'ROLLBACK TO SAVEPOINT LEVEL'",281],["T_WHITESPACE"," ",281],".",["T_WHITESPACE"," ",281],["T_VARIABLE","$name",281],";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n",282],"}",["T_WHITESPACE","\n",283]]
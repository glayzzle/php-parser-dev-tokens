[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Database",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Expression",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Database",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ExpressionInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Database",18],["T_NS_SEPARATOR","\\",18],["T_STRING","TypedResultInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Database",19],["T_NS_SEPARATOR","\\",19],["T_STRING","TypedResultTrait",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Cake",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Database",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Type",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ExpressionTypeCasterTrait",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Cake",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Database",21],["T_NS_SEPARATOR","\\",21],["T_STRING","ValueBinder",21],";",["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * This class represents a function call string in a SQL statement. Calls can be\n * constructed by passing the name of the function and a list of params.\n * For security reasons, all params passed are quoted by default unless\n * explicitly told otherwise.\n *\n * @internal\n *\/",23],["T_WHITESPACE","\n",30],["T_CLASS","class",31],["T_WHITESPACE"," ",31],["T_STRING","FunctionExpression",31],["T_WHITESPACE"," ",31],["T_EXTENDS","extends",31],["T_WHITESPACE"," ",31],["T_STRING","QueryExpression",31],["T_WHITESPACE"," ",31],["T_IMPLEMENTS","implements",31],["T_WHITESPACE"," ",31],["T_STRING","TypedResultInterface",31],["T_WHITESPACE","\n",31],"{",["T_WHITESPACE","\n\n    ",32],["T_USE","use",34],["T_WHITESPACE"," ",34],["T_STRING","ExpressionTypeCasterTrait",34],";",["T_WHITESPACE","\n    ",34],["T_USE","use",35],["T_WHITESPACE"," ",35],["T_STRING","TypedResultTrait",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * The name of the function to be constructed when generating the SQL string\n     *\n     * @var string\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_name",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Constructor. Takes a name for the function to be invoked and a list of params\n     * to be passed into the function. Optionally you can pass a list of types to\n     * be used for each bound param.\n     *\n     * By default, all params that are passed will be quoted. If you wish to use\n     * literal arguments, you need to explicitly hint this function.\n     *\n     * ### Examples:\n     *\n     *  `$f = new FunctionExpression('CONCAT', ['CakePHP', ' rules']);`\n     *\n     * Previous line will generate `CONCAT('CakePHP', ' rules')`\n     *\n     * `$f = new FunctionExpression('CONCAT', ['name' => 'literal', ' rules']);`\n     *\n     * Will produce `CONCAT(name, ' rules')`\n     *\n     * @param string $name the name of the function to be constructed\n     * @param array $params list of arguments to be passed to the function\n     * If associative the key would be used as argument when value is 'literal'\n     * @param array $types associative array of types to be associated with the\n     * passed arguments\n     * @param string $returnType The return type of this expression\n     *\/",44],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","__construct",69],"(",["T_VARIABLE","$name",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$params",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],"[","]",",",["T_WHITESPACE"," ",69],["T_VARIABLE","$types",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],"[","]",",",["T_WHITESPACE"," ",69],["T_VARIABLE","$returnType",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'string'",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_name",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$name",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_returnType",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$returnType",72],";",["T_WHITESPACE","\n        ",72],["T_STRING","parent",73],["T_DOUBLE_COLON","::",73],["T_STRING","__construct",73],"(",["T_VARIABLE","$params",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$types",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","','",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Sets the name of the SQL function to be invoke in this expression,\n     * if no value is passed it will return current name\n     *\n     * @param string|null $name The name of the function\n     * @return string|$this\n     *\/",76],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","name",83],"(",["T_VARIABLE","$name",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","null",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$name",85],["T_WHITESPACE"," ",85],["T_IS_IDENTICAL","===",85],["T_WHITESPACE"," ",85],["T_STRING","null",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_name",86],";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_name",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$name",88],";",["T_WHITESPACE","\n\n        ",88],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Adds one or more arguments for the function call.\n     *\n     * @param array $params list of arguments to be passed to the function\n     * If associative the key would be used as argument when value is 'literal'\n     * @param array $types associative array of types to be associated with the\n     * passed arguments\n     * @param bool $prepend Whether to prepend or append to the list of arguments\n     * @see \\Cake\\Database\\Expression\\FunctionExpression::__construct() for more details.\n     * @return $this\n     *\/",93],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","add",104],"(",["T_VARIABLE","$params",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$types",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[","]",",",["T_WHITESPACE"," ",104],["T_VARIABLE","$prepend",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","false",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$put",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$prepend",106],["T_WHITESPACE"," ",106],"?",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'array_unshift'",106],["T_WHITESPACE"," ",106],":",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'array_push'",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$typeMap",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","typeMap",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","types",107],"(",["T_VARIABLE","$types",107],")",";",["T_WHITESPACE","\n        ",107],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$params",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$k",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$p",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$p",109],["T_WHITESPACE"," ",109],["T_IS_IDENTICAL","===",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'literal'",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$put",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_conditions",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$k",110],")",";",["T_WHITESPACE","\n                ",110],["T_CONTINUE","continue",111],";",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n\n            ",112],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$p",114],["T_WHITESPACE"," ",114],["T_IS_IDENTICAL","===",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'identifier'",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$put",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_conditions",115],",",["T_WHITESPACE"," ",115],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_STRING","IdentifierExpression",115],"(",["T_VARIABLE","$k",115],")",")",";",["T_WHITESPACE","\n                ",115],["T_CONTINUE","continue",116],";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n\n            ",117],["T_VARIABLE","$type",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$typeMap",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","type",119],"(",["T_VARIABLE","$k",119],")",";",["T_WHITESPACE","\n\n            ",119],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$type",121],["T_WHITESPACE"," ",121],["T_IS_NOT_IDENTICAL","!==",121],["T_WHITESPACE"," ",121],["T_STRING","null",121],["T_WHITESPACE"," ",121],["T_BOOLEAN_AND","&&",121],["T_WHITESPACE"," ",121],"!",["T_VARIABLE","$p",121],["T_WHITESPACE"," ",121],["T_INSTANCEOF","instanceof",121],["T_WHITESPACE"," ",121],["T_STRING","ExpressionInterface",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$p",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_castToExpression",122],"(",["T_VARIABLE","$p",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$type",122],")",";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n\n            ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$p",125],["T_WHITESPACE"," ",125],["T_INSTANCEOF","instanceof",125],["T_WHITESPACE"," ",125],["T_STRING","ExpressionInterface",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$put",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_conditions",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$p",126],")",";",["T_WHITESPACE","\n                ",126],["T_CONTINUE","continue",127],";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n\n            ",128],["T_VARIABLE","$put",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_conditions",130],",",["T_WHITESPACE"," ",130],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$p",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'type'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$type",130],"]",")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Returns the string representation of this object so that it can be used in a\n     * SQL query. Note that values condition values are not included in the string,\n     * in their place placeholders are put and can be replaced by the quoted values\n     * accordingly.\n     *\n     * @param \\Cake\\Database\\ValueBinder $generator Placeholder generator object\n     * @return string\n     *\/",136],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","sql",145],"(",["T_STRING","ValueBinder",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$generator",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$parts",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],"[","]",";",["T_WHITESPACE","\n        ",147],["T_FOREACH","foreach",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_conditions",148],["T_WHITESPACE"," ",148],["T_AS","as",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$condition",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$condition",149],["T_WHITESPACE"," ",149],["T_INSTANCEOF","instanceof",149],["T_WHITESPACE"," ",149],["T_STRING","ExpressionInterface",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$condition",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","sprintf",150],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$condition",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","sql",150],"(",["T_VARIABLE","$generator",150],")",")",";",["T_WHITESPACE","\n            ",150],"}",["T_WHITESPACE"," ",151],["T_ELSEIF","elseif",151],["T_WHITESPACE"," ",151],"(",["T_STRING","is_array",151],"(",["T_VARIABLE","$condition",151],")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$p",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$generator",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","placeholder",152],"(",["T_CONSTANT_ENCAPSED_STRING","'param'",152],")",";",["T_WHITESPACE","\n                ",152],["T_VARIABLE","$generator",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","bind",153],"(",["T_VARIABLE","$p",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$condition",153],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",153],"]",",",["T_WHITESPACE"," ",153],["T_VARIABLE","$condition",153],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",153],"]",")",";",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$condition",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$p",154],";",["T_WHITESPACE","\n            ",154],"}",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$parts",156],"[","]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$condition",156],";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n\n        ",157],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_name",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_STRING","sprintf",159],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",159],",",["T_WHITESPACE"," ",159],["T_STRING","implode",159],"(",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_conjunction",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","' '",160],",",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$parts",161],["T_WHITESPACE","\n        ",161],")",")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * The name of the function is in itself an expression to generate, thus\n     * always adding 1 to the amount of expressions stored in this object.\n     *\n     * @return int\n     *\/",165],["T_WHITESPACE","\n    ",170],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","count",171],"(",")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_LNUMBER","1",173],["T_WHITESPACE"," ",173],"+",["T_WHITESPACE"," ",173],["T_STRING","count",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_conditions",173],")",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n",174],"}",["T_WHITESPACE","\n",175]]
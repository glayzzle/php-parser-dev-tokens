[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Database",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Schema",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Database",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Exception",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Datasource",18],["T_NS_SEPARATOR","\\",18],["T_STRING","ConnectionInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","PDOException",19],";",["T_WHITESPACE","\n\n",19],["T_DOC_COMMENT","\/**\n * Represents a database schema collection\n *\n * Used to access information about the tables,\n * and other data in a database.\n *\/",21],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","Collection",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Connection object\n     *\n     * @var \\Cake\\Datasource\\ConnectionInterface\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$_connection",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Schema dialect instance.\n     *\n     * @var \\Cake\\Database\\Schema\\BaseSchema\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_dialect",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param \\Cake\\Datasource\\ConnectionInterface $connection The connection instance.\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","__construct",49],"(",["T_STRING","ConnectionInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$connection",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_connection",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$connection",51],";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_dialect",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$connection",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","driver",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","schemaDialect",52],"(",")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Get the list of tables available in the current connection.\n     *\n     * @return array The list of tables in the connected database\/schema.\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","listTables",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_LIST","list",62],"(",["T_VARIABLE","$sql",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$params",62],")",["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_dialect",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","listTablesSql",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_connection",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","config",62],"(",")",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$result",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],"[","]",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$statement",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_connection",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","execute",64],"(",["T_VARIABLE","$sql",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$params",64],")",";",["T_WHITESPACE","\n        ",64],["T_WHILE","while",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$row",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$statement",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","fetch",65],"(",")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$result",66],"[","]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$row",66],"[",["T_LNUMBER","0",66],"]",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$statement",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","closeCursor",68],"(",")",";",["T_WHITESPACE","\n\n        ",68],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$result",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Get the column metadata for a table.\n     *\n     * Caching will be applied if `cacheMetadata` key is present in the Connection\n     * configuration options. Defaults to _cake_model_ when true.\n     *\n     * ### Options\n     *\n     * - `forceRefresh` - Set to true to force rebuilding the cached metadata.\n     *   Defaults to false.\n     *\n     * @param string $name The name of the table to describe.\n     * @param array $options The options to use, see above.\n     * @return \\Cake\\Database\\Schema\\Table Object with column metadata.\n     * @throws \\Cake\\Database\\Exception when table cannot be described.\n     *\/",73],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","describe",89],"(",["T_VARIABLE","$name",89],",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$options",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[","]",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$config",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_connection",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","config",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_STRING","strpos",92],"(",["T_VARIABLE","$name",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'.'",92],")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_LIST","list",93],"(",["T_VARIABLE","$config",93],"[",["T_CONSTANT_ENCAPSED_STRING","'schema'",93],"]",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$name",93],")",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","explode",93],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$name",93],")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$table",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","Table",95],"(",["T_VARIABLE","$name",95],")",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_reflect",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Column'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$name",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$config",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$table",97],")",";",["T_WHITESPACE","\n        ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_STRING","count",98],"(",["T_VARIABLE","$table",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","columns",98],"(",")",")",["T_WHITESPACE"," ",98],["T_IS_IDENTICAL","===",98],["T_WHITESPACE"," ",98],["T_LNUMBER","0",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_THROW","throw",99],["T_WHITESPACE"," ",99],["T_NEW","new",99],["T_WHITESPACE"," ",99],["T_STRING","Exception",99],"(",["T_STRING","sprintf",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot describe %s. It has 0 columns.'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$name",99],")",")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_reflect",102],"(",["T_CONSTANT_ENCAPSED_STRING","'Index'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$name",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$config",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$table",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_reflect",103],"(",["T_CONSTANT_ENCAPSED_STRING","'ForeignKey'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$name",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$config",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$table",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_reflect",104],"(",["T_CONSTANT_ENCAPSED_STRING","'Options'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$name",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$config",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$table",104],")",";",["T_WHITESPACE","\n\n        ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$table",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Helper method for running each step of the reflection process.\n     *\n     * @param string $stage The stage name.\n     * @param string $name The table name.\n     * @param array $config The config data.\n     * @param \\Cake\\Database\\Schema\\Table $table The table instance\n     * @return void\n     * @throws \\Cake\\Database\\Exception on query failure.\n     *\/",109],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","_reflect",119],"(",["T_VARIABLE","$stage",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$name",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$config",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$table",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$describeMethod",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],"\"",["T_ENCAPSED_AND_WHITESPACE","describe",121],["T_CURLY_OPEN","{",121],["T_VARIABLE","$stage",121],"}",["T_ENCAPSED_AND_WHITESPACE","Sql",121],"\"",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$convertMethod",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],"\"",["T_ENCAPSED_AND_WHITESPACE","convert",122],["T_CURLY_OPEN","{",122],["T_VARIABLE","$stage",122],"}",["T_ENCAPSED_AND_WHITESPACE","Description",122],"\"",";",["T_WHITESPACE","\n\n        ",122],["T_LIST","list",124],"(",["T_VARIABLE","$sql",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$params",124],")",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_dialect",124],["T_OBJECT_OPERATOR","->",124],"{",["T_VARIABLE","$describeMethod",124],"}","(",["T_VARIABLE","$name",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$config",124],")",";",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_EMPTY","empty",125],"(",["T_VARIABLE","$sql",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_RETURN","return",126],";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_TRY","try",128],["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$statement",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_connection",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","execute",129],"(",["T_VARIABLE","$sql",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$params",129],")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE"," ",130],["T_CATCH","catch",130],["T_WHITESPACE"," ",130],"(",["T_STRING","PDOException",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$e",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_THROW","throw",131],["T_WHITESPACE"," ",131],["T_NEW","new",131],["T_WHITESPACE"," ",131],["T_STRING","Exception",131],"(",["T_VARIABLE","$e",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getMessage",131],"(",")",",",["T_WHITESPACE"," ",131],["T_LNUMBER","500",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$e",131],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_FOREACH","foreach",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$statement",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","fetchAll",133],"(",["T_CONSTANT_ENCAPSED_STRING","'assoc'",133],")",["T_WHITESPACE"," ",133],["T_AS","as",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$row",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_dialect",134],["T_OBJECT_OPERATOR","->",134],"{",["T_VARIABLE","$convertMethod",134],"}","(",["T_VARIABLE","$table",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$row",134],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$statement",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","closeCursor",136],"(",")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n",137],"}",["T_WHITESPACE","\n",138]]
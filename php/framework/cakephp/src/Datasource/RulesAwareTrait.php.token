[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.7\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Datasource",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","ArrayObject",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Event",18],["T_NS_SEPARATOR","\\",18],["T_STRING","EventDispatcherInterface",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * A trait that allows a class to build and apply application.\n * rules.\n *\n * If the implementing class also implements EventAwareTrait, then\n * events will be emitted when rules are checked.\n *\n * The implementing class is expected to define the `RULES_CLASS` constant\n * if they need to customize which class is used for rules objects.\n *\/",20],["T_WHITESPACE","\n",29],["T_TRAIT","trait",30],["T_WHITESPACE"," ",30],["T_STRING","RulesAwareTrait",30],["T_WHITESPACE","\n",30],"{",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * The domain rules to be applied to entities saved by this table\n     *\n     * @var \\Cake\\Datasource\\RulesChecker\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_rulesChecker",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Returns whether or not the passed entity complies with all the rules stored in\n     * the rules checker.\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $entity The entity to check for validity.\n     * @param string $operation The operation being run. Either 'create', 'update' or 'delete'.\n     * @param \\ArrayObject|array|null $options The options To be passed to the rules.\n     * @return bool\n     *\/",40],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","checkRules",49],"(",["T_STRING","EntityInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$entity",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$operation",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","RulesChecker",49],["T_DOUBLE_COLON","::",49],["T_STRING","CREATE",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$options",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","null",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$rules",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","rulesChecker",51],"(",")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$options",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$options",52],["T_WHITESPACE"," ",52],"?",":",["T_WHITESPACE"," ",52],["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_STRING","ArrayObject",52],"(",")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$options",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","is_array",53],"(",["T_VARIABLE","$options",53],")",["T_WHITESPACE"," ",53],"?",["T_WHITESPACE"," ",53],["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_STRING","ArrayObject",53],"(",["T_VARIABLE","$options",53],")",["T_WHITESPACE"," ",53],":",["T_WHITESPACE"," ",53],["T_VARIABLE","$options",53],";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$hasEvents",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$this",54],["T_WHITESPACE"," ",54],["T_INSTANCEOF","instanceof",54],["T_WHITESPACE"," ",54],["T_STRING","EventDispatcherInterface",54],")",";",["T_WHITESPACE","\n\n        ",54],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$hasEvents",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$event",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","dispatchEvent",57],"(",["T_WHITESPACE","\n                ",57],["T_CONSTANT_ENCAPSED_STRING","'Model.beforeRules'",58],",",["T_WHITESPACE","\n                ",58],["T_STRING","compact",59],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'options'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'operation'",59],")",["T_WHITESPACE","\n            ",59],")",";",["T_WHITESPACE","\n            ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$event",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","isStopped",61],"(",")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n                ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$event",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","result",62],";",["T_WHITESPACE","\n            ",62],"}",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$result",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$rules",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","check",66],"(",["T_VARIABLE","$entity",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$operation",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$options",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getArrayCopy",66],"(",")",")",";",["T_WHITESPACE","\n\n        ",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$hasEvents",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$event",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","dispatchEvent",69],"(",["T_WHITESPACE","\n                ",69],["T_CONSTANT_ENCAPSED_STRING","'Model.afterRules'",70],",",["T_WHITESPACE","\n                ",70],["T_STRING","compact",71],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'options'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'result'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'operation'",71],")",["T_WHITESPACE","\n            ",71],")",";",["T_WHITESPACE","\n\n            ",72],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$event",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","isStopped",74],"(",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n                ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$event",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","result",75],";",["T_WHITESPACE","\n            ",75],"}",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n\n        ",77],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$result",79],";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Returns the RulesChecker for this instance.\n     *\n     * A RulesChecker object is used to test an entity for validity\n     * on rules that may involve complex logic or data that\n     * needs to be fetched from relevant datasources.\n     *\n     * @see \\Cake\\Datasource\\RulesChecker\n     * @return \\Cake\\Datasource\\RulesChecker\n     *\/",82],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","rulesChecker",92],"(",")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_rulesChecker",94],["T_WHITESPACE"," ",94],["T_IS_NOT_IDENTICAL","!==",94],["T_WHITESPACE"," ",94],["T_STRING","null",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_rulesChecker",95],";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$class",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","defined",97],"(",["T_CONSTANT_ENCAPSED_STRING","'static::RULES_CLASS'",97],")",["T_WHITESPACE"," ",97],"?",["T_WHITESPACE"," ",97],["T_STATIC","static",97],["T_DOUBLE_COLON","::",97],["T_STRING","RULES_CLASS",97],["T_WHITESPACE"," ",97],":",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'Cake\\Datasource\\RulesChecker'",97],";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_rulesChecker",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","buildRules",98],"(",["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$class",98],"(","[",["T_CONSTANT_ENCAPSED_STRING","'repository'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],"]",")",")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","dispatchEvent",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Model.buildRules'",99],",",["T_WHITESPACE"," ",99],"[",["T_CONSTANT_ENCAPSED_STRING","'rules'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_rulesChecker",99],"]",")",";",["T_WHITESPACE","\n\n        ",99],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_rulesChecker",101],";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Returns a RulesChecker object after modifying the one that was supplied.\n     *\n     * Subclasses should override this method in order to initialize the rules to be applied to\n     * entities saved by this instance.\n     *\n     * @param \\Cake\\Datasource\\RulesChecker $rules The rules object to be modified.\n     * @return \\Cake\\Datasource\\RulesChecker\n     *\/",104],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","buildRules",113],"(",["T_STRING","RulesChecker",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$rules",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$rules",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n",116],"}",["T_WHITESPACE","\n",117]]
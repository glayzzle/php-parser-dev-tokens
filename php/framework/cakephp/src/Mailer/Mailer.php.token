[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @since         3.1.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",12],["T_NAMESPACE","namespace",13],["T_WHITESPACE"," ",13],["T_STRING","Cake",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mailer",13],";",["T_WHITESPACE","\n\n",13],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Datasource",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ModelAwareTrait",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Cake",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Event",16],["T_NS_SEPARATOR","\\",16],["T_STRING","EventListenerInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Mailer",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Exception",17],["T_NS_SEPARATOR","\\",17],["T_STRING","MissingActionException",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Mailer base class.\n *\n * Mailer classes let you encapsulate related Email logic into a reusable\n * and testable class.\n *\n * ## Defining Messages\n *\n * Mailers make it easy for you to define methods that handle email formatting\n * logic. For example:\n *\n * ```\n * class UserMailer extends Mailer\n * {\n *     public function resetPassword($user)\n *     {\n *         $this\n *             ->subject('Reset Password')\n *             ->to($user->email)\n *             ->set(['token' => $user->token]);\n *     }\n * }\n * ```\n *\n * Is a trivial example but shows how a mailer could be declared.\n *\n * ## Sending Messages\n *\n * After you have defined some messages you will want to send them:\n *\n * ```\n * $mailer = new UserMailer();\n * $mailer->send('resetPassword', $user);\n * ```\n *\n * ## Event Listener\n *\n * Mailers can also subscribe to application event allowing you to\n * decouple email delivery from your application code. By re-declaring the\n * `implementedEvents()` method you can define event handlers that can\n * convert events into email. For example, if your application had a user\n * registration event:\n *\n * ```\n * public function implementedEvents()\n * {\n *     return [\n *         'Model.afterSave' => 'onRegistration',\n *     ];\n * }\n *\n * public function onRegistration(Event $event, Entity $entity, ArrayObject $options)\n * {\n *     if ($entity->isNew()) {\n *          $this->send('welcome', [$entity]);\n *     }\n * }\n * ```\n *\n * The onRegistration method converts the application event into a mailer method.\n * Our mailer could either be registered in the application bootstrap, or\n * in the Table class' initialize() hook.\n *\n * @method \\Cake\\Mailer\\Email to($email = null, $name = null)\n * @method \\Cake\\Mailer\\Email from($email = null, $name = null)\n * @method \\Cake\\Mailer\\Email sender($email = null, $name = null)\n * @method \\Cake\\Mailer\\Email replyTo($email = null, $name = null)\n * @method \\Cake\\Mailer\\Email readReceipt($email = null, $name = null)\n * @method \\Cake\\Mailer\\Email returnPath($email = null, $name = null)\n * @method \\Cake\\Mailer\\Email addTo($email, $name = null)\n * @method \\Cake\\Mailer\\Email cc($email = null, $name = null)\n * @method \\Cake\\Mailer\\Email addCc($email, $name = null)\n * @method \\Cake\\Mailer\\Email bcc($email = null, $name = null)\n * @method \\Cake\\Mailer\\Email addBcc($email, $name = null)\n * @method \\Cake\\Mailer\\Email charset($charset = null)\n * @method \\Cake\\Mailer\\Email headerCharset($charset = null)\n * @method \\Cake\\Mailer\\Email subject($subject = null)\n * @method \\Cake\\Mailer\\Email setHeaders(array $headers)\n * @method \\Cake\\Mailer\\Email addHeaders(array $headers)\n * @method \\Cake\\Mailer\\Email getHeaders(array $include = [])\n * @method \\Cake\\Mailer\\Email template($template = false, $layout = false)\n * @method \\Cake\\Mailer\\Email viewRender($viewClass = null)\n * @method \\Cake\\Mailer\\Email viewVars($viewVars = null)\n * @method \\Cake\\Mailer\\Email theme($theme = null)\n * @method \\Cake\\Mailer\\Email helpers($helpers = null)\n * @method \\Cake\\Mailer\\Email emailFormat($format = null)\n * @method \\Cake\\Mailer\\Email transport($name = null)\n * @method \\Cake\\Mailer\\Email messageId($message = null)\n * @method \\Cake\\Mailer\\Email domain($domain = null)\n * @method \\Cake\\Mailer\\Email attachments($attachments = null)\n * @method \\Cake\\Mailer\\Email addAttachments($attachments)\n * @method \\Cake\\Mailer\\Email message($type = null)\n * @method \\Cake\\Mailer\\Email profile($config = null)\n *\/",19],["T_WHITESPACE","\n",112],["T_ABSTRACT","abstract",113],["T_WHITESPACE"," ",113],["T_CLASS","class",113],["T_WHITESPACE"," ",113],["T_STRING","Mailer",113],["T_WHITESPACE"," ",113],["T_IMPLEMENTS","implements",113],["T_WHITESPACE"," ",113],["T_STRING","EventListenerInterface",113],["T_WHITESPACE","\n",113],"{",["T_WHITESPACE","\n\n    ",114],["T_USE","use",116],["T_WHITESPACE"," ",116],["T_STRING","ModelAwareTrait",116],";",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Mailer's name.\n     *\n     * @var string\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_STATIC","static",123],["T_WHITESPACE"," ",123],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$name",123],";",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Email instance.\n     *\n     * @var \\Cake\\Mailer\\Email\n     *\/",125],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$_email",130],";",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Cloned Email instance for restoring instance after email is sent by\n     * mailer action.\n     *\n     * @var string\n     *\/",132],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$_clonedEmail",138],";",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param \\Cake\\Mailer\\Email|null $email Email instance.\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","__construct",145],"(",["T_STRING","Email",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$email",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","null",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$email",147],["T_WHITESPACE"," ",147],["T_IS_IDENTICAL","===",147],["T_WHITESPACE"," ",147],["T_STRING","null",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$email",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_NEW","new",148],["T_WHITESPACE"," ",148],["T_STRING","Email",148],"(",")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_email",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$email",151],";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_clonedEmail",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_CLONE","clone",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$email",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Returns the mailer's name.\n     *\n     * @return string\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getName",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(","!",["T_STATIC","static",162],["T_DOUBLE_COLON","::",162],["T_VARIABLE","$name",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_STATIC","static",163],["T_DOUBLE_COLON","::",163],["T_VARIABLE","$name",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","str_replace",163],"(",["T_WHITESPACE","\n                ",163],["T_CONSTANT_ENCAPSED_STRING","'Mailer'",164],",",["T_WHITESPACE","\n                ",164],["T_CONSTANT_ENCAPSED_STRING","''",165],",",["T_WHITESPACE","\n                ",165],["T_STRING","implode",166],"(",["T_CONSTANT_ENCAPSED_STRING","''",166],",",["T_WHITESPACE"," ",166],["T_STRING","array_slice",166],"(",["T_STRING","explode",166],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",166],",",["T_WHITESPACE"," ",166],["T_STRING","get_class",166],"(",["T_VARIABLE","$this",166],")",")",",",["T_WHITESPACE"," ",166],"-",["T_LNUMBER","1",166],")",")",["T_WHITESPACE","\n            ",166],")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_STATIC","static",170],["T_DOUBLE_COLON","::",170],["T_VARIABLE","$name",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Sets layout to use.\n     *\n     * @param string $layout Name of the layout to use.\n     * @return $this object.\n     *\/",173],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","layout",179],"(",["T_VARIABLE","$layout",179],")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_email",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","viewBuilder",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","layout",181],"(",["T_VARIABLE","$layout",181],")",";",["T_WHITESPACE","\n\n        ",181],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Get Email instance's view builder.\n     *\n     * @return \\Cake\\View\\ViewBuilder\n     *\/",186],["T_WHITESPACE","\n    ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","viewBuilder",191],"(",")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_email",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","viewBuilder",193],"(",")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Magic method to forward method class to Email instance.\n     *\n     * @param string $method Method name.\n     * @param array $args Method arguments\n     * @return $this\n     *\/",196],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","__call",203],"(",["T_VARIABLE","$method",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$args",203],")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_STRING","call_user_func_array",205],"(","[",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_email",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$method",205],"]",",",["T_WHITESPACE"," ",205],["T_VARIABLE","$args",205],")",";",["T_WHITESPACE","\n\n        ",205],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],";",["T_WHITESPACE","\n    ",207],"}",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Sets email view vars.\n     *\n     * @param string|array $key Variable name or hash of view variables.\n     * @param mixed $value View variable value.\n     * @return $this object.\n     *\/",210],["T_WHITESPACE","\n    ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","set",217],"(",["T_VARIABLE","$key",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$value",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","null",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_email",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","viewVars",219],"(",["T_STRING","is_string",219],"(",["T_VARIABLE","$key",219],")",["T_WHITESPACE"," ",219],"?",["T_WHITESPACE"," ",219],"[",["T_VARIABLE","$key",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$value",219],"]",["T_WHITESPACE"," ",219],":",["T_WHITESPACE"," ",219],["T_VARIABLE","$key",219],")",";",["T_WHITESPACE","\n\n        ",219],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Sends email.\n     *\n     * @param string $action The name of the mailer action to trigger.\n     * @param array $args Arguments to pass to the triggered mailer action.\n     * @param array $headers Headers to set.\n     * @return array\n     * @throws \\Cake\\Mailer\\Exception\\MissingActionException\n     * @throws \\BadMethodCallException\n     *\/",224],["T_WHITESPACE","\n    ",233],["T_PUBLIC","public",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","send",234],"(",["T_VARIABLE","$action",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$args",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],"[","]",",",["T_WHITESPACE"," ",234],["T_VARIABLE","$headers",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],"[","]",")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_TRY","try",236],["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(","!",["T_STRING","method_exists",237],"(",["T_VARIABLE","$this",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$action",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_THROW","throw",238],["T_WHITESPACE"," ",238],["T_NEW","new",238],["T_WHITESPACE"," ",238],["T_STRING","MissingActionException",238],"(","[",["T_WHITESPACE","\n                    ",238],["T_CONSTANT_ENCAPSED_STRING","'mailer'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getName",239],"(",")",["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'Mailer'",239],",",["T_WHITESPACE","\n                    ",239],["T_CONSTANT_ENCAPSED_STRING","'action'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$action",240],",",["T_WHITESPACE","\n                ",240],"]",")",";",["T_WHITESPACE","\n            ",241],"}",["T_WHITESPACE","\n\n            ",242],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_email",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setHeaders",244],"(",["T_VARIABLE","$headers",244],")",";",["T_WHITESPACE","\n            ",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(","!",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_email",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","viewBuilder",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","template",245],"(",")",")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_email",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","viewBuilder",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","template",246],"(",["T_VARIABLE","$action",246],")",";",["T_WHITESPACE","\n            ",246],"}",["T_WHITESPACE","\n\n            ",247],["T_STRING","call_user_func_array",249],"(","[",["T_VARIABLE","$this",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$action",249],"]",",",["T_WHITESPACE"," ",249],["T_VARIABLE","$args",249],")",";",["T_WHITESPACE","\n\n            ",249],["T_VARIABLE","$result",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_email",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","send",251],"(",")",";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE"," ",252],["T_FINALLY","finally",252],["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","reset",253],"(",")",";",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE","\n\n        ",254],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$result",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Reset email instance.\n     *\n     * @return $this\n     *\/",259],["T_WHITESPACE","\n    ",263],["T_PROTECTED","protected",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","reset",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_email",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_CLONE","clone",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_clonedEmail",266],";",["T_WHITESPACE","\n\n        ",266],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_DOC_COMMENT","\/**\n     * Implemented events.\n     *\n     * @return array\n     *\/",271],["T_WHITESPACE","\n    ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","implementedEvents",276],"(",")",["T_WHITESPACE","\n    ",276],"{",["T_WHITESPACE","\n        ",277],["T_RETURN","return",278],["T_WHITESPACE"," ",278],"[","]",";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n",279],"}",["T_WHITESPACE","\n",280]]
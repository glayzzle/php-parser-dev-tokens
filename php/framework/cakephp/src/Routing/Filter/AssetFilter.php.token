[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         2.2.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Routing",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Filter",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Core",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Plugin",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Event",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Event",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Network",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Request",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Cake",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Network",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Response",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Cake",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Routing",21],["T_NS_SEPARATOR","\\",21],["T_STRING","DispatcherFilter",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Cake",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Utility",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Inflector",22],";",["T_WHITESPACE","\n\n",22],["T_DOC_COMMENT","\/**\n * Filters a request and tests whether it is a file in the webroot folder or not and\n * serves the file to the client if appropriate.\n *\/",24],["T_WHITESPACE","\n",27],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","AssetFilter",28],["T_WHITESPACE"," ",28],["T_EXTENDS","extends",28],["T_WHITESPACE"," ",28],["T_STRING","DispatcherFilter",28],["T_WHITESPACE","\n",28],"{",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * Default priority for all methods in this filter\n     * This filter should run before the request gets parsed by router\n     *\n     * @var int\n     *\/",31],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_priority",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","9",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * The amount of time to cache the asset.\n     *\n     * @var string\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_cacheTime",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'+1 day'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     *\n     * Constructor.\n     *\n     * @param array $config Array of config.\n     *\/",46],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","__construct",52],"(",["T_VARIABLE","$config",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],"[","]",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(","!",["T_EMPTY","empty",54],"(",["T_VARIABLE","$config",54],"[",["T_CONSTANT_ENCAPSED_STRING","'cacheTime'",54],"]",")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_cacheTime",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$config",55],"[",["T_CONSTANT_ENCAPSED_STRING","'cacheTime'",55],"]",";",["T_WHITESPACE","\n        ",55],"}",["T_WHITESPACE","\n        ",56],["T_STRING","parent",57],["T_DOUBLE_COLON","::",57],["T_STRING","__construct",57],"(",["T_VARIABLE","$config",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Checks if a requested asset exists and sends it to the browser\n     *\n     * @param \\Cake\\Event\\Event $event Event containing the request and response object\n     * @return \\Cake\\Network\\Response|null If the client is requesting a recognized asset, null otherwise\n     * @throws \\Cake\\Network\\Exception\\NotFoundException When asset not found\n     *\/",60],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","beforeDispatch",67],"(",["T_STRING","Event",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$event",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$request",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$event",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","data",69],"[",["T_CONSTANT_ENCAPSED_STRING","'request'",69],"]",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$url",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","urldecode",71],"(",["T_VARIABLE","$request",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","url",71],")",";",["T_WHITESPACE","\n        ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_STRING","strpos",72],"(",["T_VARIABLE","$url",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'..'",72],")",["T_WHITESPACE"," ",72],["T_IS_NOT_IDENTICAL","!==",72],["T_WHITESPACE"," ",72],["T_STRING","false",72],["T_WHITESPACE"," ",72],["T_BOOLEAN_OR","||",72],["T_WHITESPACE"," ",72],["T_STRING","strpos",72],"(",["T_VARIABLE","$url",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'.'",72],")",["T_WHITESPACE"," ",72],["T_IS_IDENTICAL","===",72],["T_WHITESPACE"," ",72],["T_STRING","false",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_STRING","null",73],";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$assetFile",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_getAssetFile",76],"(",["T_VARIABLE","$url",76],")",";",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$assetFile",77],["T_WHITESPACE"," ",77],["T_IS_IDENTICAL","===",77],["T_WHITESPACE"," ",77],["T_STRING","null",77],["T_WHITESPACE"," ",77],["T_BOOLEAN_OR","||",77],["T_WHITESPACE"," ",77],"!",["T_STRING","file_exists",77],"(",["T_VARIABLE","$assetFile",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_STRING","null",78],";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$response",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$event",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","data",80],"[",["T_CONSTANT_ENCAPSED_STRING","'response'",80],"]",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$event",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","stopPropagation",81],"(",")",";",["T_WHITESPACE","\n\n        ",81],["T_VARIABLE","$response",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","modified",83],"(",["T_STRING","filemtime",83],"(",["T_VARIABLE","$assetFile",83],")",")",";",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$response",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","checkNotModified",84],"(",["T_VARIABLE","$request",84],")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$response",85],";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$pathSegments",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","explode",88],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$url",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$ext",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","array_pop",89],"(",["T_VARIABLE","$pathSegments",89],")",";",["T_WHITESPACE","\n\n        ",89],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_deliverAsset",91],"(",["T_VARIABLE","$request",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$response",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$assetFile",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$ext",91],")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Builds asset file path based off url\n     *\n     * @param string $url Asset URL\n     * @return string Absolute path for asset file\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","_getAssetFile",100],"(",["T_VARIABLE","$url",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$parts",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","explode",102],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$url",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$pluginPart",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],"[","]",";",["T_WHITESPACE","\n        ",103],["T_FOR","for",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$i",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_LNUMBER","0",104],";",["T_WHITESPACE"," ",104],["T_VARIABLE","$i",104],["T_WHITESPACE"," ",104],"<",["T_WHITESPACE"," ",104],["T_LNUMBER","2",104],";",["T_WHITESPACE"," ",104],["T_VARIABLE","$i",104],["T_INC","++",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(","!",["T_ISSET","isset",105],"(",["T_VARIABLE","$parts",105],"[",["T_VARIABLE","$i",105],"]",")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                ",105],["T_BREAK","break",106],";",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$pluginPart",108],"[","]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","Inflector",108],["T_DOUBLE_COLON","::",108],["T_STRING","camelize",108],"(",["T_VARIABLE","$parts",108],"[",["T_VARIABLE","$i",108],"]",")",";",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$plugin",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","implode",109],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$pluginPart",109],")",";",["T_WHITESPACE","\n            ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$plugin",110],["T_WHITESPACE"," ",110],["T_BOOLEAN_AND","&&",110],["T_WHITESPACE"," ",110],["T_STRING","Plugin",110],["T_DOUBLE_COLON","::",110],["T_STRING","loaded",110],"(",["T_VARIABLE","$plugin",110],")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                ",110],["T_VARIABLE","$parts",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","array_slice",111],"(",["T_VARIABLE","$parts",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$i",111],["T_WHITESPACE"," ",111],"+",["T_WHITESPACE"," ",111],["T_LNUMBER","1",111],")",";",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$fileFragment",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","implode",112],"(",["T_STRING","DIRECTORY_SEPARATOR",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$parts",112],")",";",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$pluginWebroot",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","Plugin",113],["T_DOUBLE_COLON","::",113],["T_STRING","path",113],"(",["T_VARIABLE","$plugin",113],")",["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'webroot'",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_STRING","DIRECTORY_SEPARATOR",113],";",["T_WHITESPACE","\n\n                ",113],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$pluginWebroot",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$fileFragment",115],";",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Sends an asset file to the client\n     *\n     * @param \\Cake\\Network\\Request $request The request object to use.\n     * @param \\Cake\\Network\\Response $response The response object to use.\n     * @param string $assetFile Path to the asset file in the file system\n     * @param string $ext The extension of the file to determine its mime type\n     * @return \\Cake\\Network\\Response The updated response.\n     *\/",120],["T_WHITESPACE","\n    ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","_deliverAsset",129],"(",["T_STRING","Request",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$request",129],",",["T_WHITESPACE"," ",129],["T_STRING","Response",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$response",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$assetFile",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$ext",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$compressionEnabled",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$response",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","compress",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$response",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","type",132],"(",["T_VARIABLE","$ext",132],")",["T_WHITESPACE"," ",132],["T_IS_IDENTICAL","===",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$ext",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$contentType",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'application\/octet-stream'",133],";",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$agent",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$request",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","env",134],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP_USER_AGENT'",134],")",";",["T_WHITESPACE","\n            ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_STRING","preg_match",135],"(",["T_CONSTANT_ENCAPSED_STRING","'%Opera(\/| )([0-9].[0-9]{1,2})%'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$agent",135],")",["T_WHITESPACE"," ",135],["T_BOOLEAN_OR","||",135],["T_WHITESPACE"," ",135],["T_STRING","preg_match",135],"(",["T_CONSTANT_ENCAPSED_STRING","'\/MSIE ([0-9].[0-9]{1,2})\/'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$agent",135],")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$contentType",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'application\/octetstream'",136],";",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$response",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","type",138],"(",["T_VARIABLE","$contentType",138],")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_VARIABLE","$compressionEnabled",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$response",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","header",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Length'",141],",",["T_WHITESPACE"," ",141],["T_STRING","filesize",141],"(",["T_VARIABLE","$assetFile",141],")",")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$response",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","cache",143],"(",["T_STRING","filemtime",143],"(",["T_VARIABLE","$assetFile",143],")",",",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_cacheTime",143],")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$response",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","file",144],"(",["T_VARIABLE","$assetFile",144],")",";",["T_WHITESPACE","\n\n        ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$response",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n",147],"}",["T_WHITESPACE","\n",148]]
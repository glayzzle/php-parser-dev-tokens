[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ORM",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","ArrayObject",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Collection",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Collection",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Database",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Expression",19],["T_NS_SEPARATOR","\\",19],["T_STRING","TupleComparison",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Cake",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Database",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Type",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Cake",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Datasource",21],["T_NS_SEPARATOR","\\",21],["T_STRING","EntityInterface",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Cake",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Datasource",22],["T_NS_SEPARATOR","\\",22],["T_STRING","InvalidPropertyInterface",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","RuntimeException",23],";",["T_WHITESPACE","\n\n",23],["T_DOC_COMMENT","\/**\n * Contains logic to convert array data into entities.\n *\n * Useful when converting request data into entities.\n *\n * @see \\Cake\\ORM\\Table::newEntity()\n * @see \\Cake\\ORM\\Table::newEntities()\n * @see \\Cake\\ORM\\Table::patchEntity()\n * @see \\Cake\\ORM\\Table::patchEntities()\n *\/",25],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Marshaller",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_USE","use",38],["T_WHITESPACE"," ",38],["T_STRING","AssociationsNormalizerTrait",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * The table instance this marshaller is for.\n     *\n     * @var \\Cake\\ORM\\Table\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_table",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param \\Cake\\ORM\\Table $table The table this marshaller is for.\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","__construct",52],"(",["T_STRING","Table",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$table",52],")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_table",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$table",54],";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Build the map of property => marshalling callable.\n     *\n     * @param array $data The data being marshalled.\n     * @param array $options List of options containing the 'associated' key.\n     * @throws \\InvalidArgumentException When associations do not exist.\n     * @return array\n     *\/",57],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","_buildPropertyMap",65],"(",["T_VARIABLE","$data",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$options",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$map",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],"[","]",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$schema",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_table",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","schema",68],"(",")",";",["T_WHITESPACE","\n\n        ",68],["T_COMMENT","\/\/ Is a concrete column?\n",70],["T_WHITESPACE","        ",71],["T_FOREACH","foreach",71],["T_WHITESPACE"," ",71],"(",["T_STRING","array_keys",71],"(",["T_VARIABLE","$data",71],")",["T_WHITESPACE"," ",71],["T_AS","as",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$prop",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$columnType",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$schema",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","columnType",72],"(",["T_VARIABLE","$prop",72],")",";",["T_WHITESPACE","\n            ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$columnType",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                ",73],["T_VARIABLE","$map",74],"[",["T_VARIABLE","$prop",74],"]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$value",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$entity",74],")",["T_WHITESPACE"," ",74],["T_USE","use",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$columnType",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n                    ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_STRING","Type",75],["T_DOUBLE_COLON","::",75],["T_STRING","build",75],"(",["T_VARIABLE","$columnType",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","marshal",75],"(",["T_VARIABLE","$value",75],")",";",["T_WHITESPACE","\n                ",75],"}",";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n\n        ",78],["T_COMMENT","\/\/ Map associations\n",80],["T_WHITESPACE","        ",81],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_ISSET","isset",81],"(",["T_VARIABLE","$options",81],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",81],"]",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$options",82],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",82],"]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],"[","]",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$include",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_normalizeAssociations",84],"(",["T_VARIABLE","$options",84],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",84],"]",")",";",["T_WHITESPACE","\n        ",84],["T_FOREACH","foreach",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$include",85],["T_WHITESPACE"," ",85],["T_AS","as",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$key",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$nested",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_STRING","is_int",86],"(",["T_VARIABLE","$key",86],")",["T_WHITESPACE"," ",86],["T_BOOLEAN_AND","&&",86],["T_WHITESPACE"," ",86],["T_STRING","is_scalar",86],"(",["T_VARIABLE","$nested",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$key",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$nested",87],";",["T_WHITESPACE","\n                ",87],["T_VARIABLE","$nested",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],"[","]",";",["T_WHITESPACE","\n            ",88],"}",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$assoc",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_table",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","association",90],"(",["T_VARIABLE","$key",90],")",";",["T_WHITESPACE","\n            ",90],["T_COMMENT","\/\/ If the key is not a special field like _ids or _joinData\n",91],["T_WHITESPACE","            ",92],["T_COMMENT","\/\/ it is a missing association that we should error on.\n",92],["T_WHITESPACE","            ",93],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_VARIABLE","$assoc",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","substr",94],"(",["T_VARIABLE","$key",94],",",["T_WHITESPACE"," ",94],["T_LNUMBER","0",94],",",["T_WHITESPACE"," ",94],["T_LNUMBER","1",94],")",["T_WHITESPACE"," ",94],["T_IS_NOT_IDENTICAL","!==",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'_'",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                    ",94],["T_THROW","throw",95],["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_NS_SEPARATOR","\\",95],["T_STRING","InvalidArgumentException",95],"(",["T_STRING","sprintf",95],"(",["T_WHITESPACE","\n                        ",95],["T_CONSTANT_ENCAPSED_STRING","'Cannot marshal data for \"%s\" association. It is not associated with \"%s\".'",96],",",["T_WHITESPACE","\n                        ",96],["T_VARIABLE","$key",97],",",["T_WHITESPACE","\n                        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_table",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","alias",98],"(",")",["T_WHITESPACE","\n                    ",98],")",")",";",["T_WHITESPACE","\n                ",99],"}",["T_WHITESPACE","\n                ",100],["T_CONTINUE","continue",101],";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE","\n            ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_ISSET","isset",103],"(",["T_VARIABLE","$options",103],"[",["T_CONSTANT_ENCAPSED_STRING","'forceNew'",103],"]",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$nested",104],"[",["T_CONSTANT_ENCAPSED_STRING","'forceNew'",104],"]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$options",104],"[",["T_CONSTANT_ENCAPSED_STRING","'forceNew'",104],"]",";",["T_WHITESPACE","\n            ",104],"}",["T_WHITESPACE","\n            ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_ISSET","isset",106],"(",["T_VARIABLE","$options",106],"[",["T_CONSTANT_ENCAPSED_STRING","'isMerge'",106],"]",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$callback",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$value",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$entity",107],")",["T_WHITESPACE"," ",107],["T_USE","use",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$assoc",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$nested",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                    ",107],["T_VARIABLE","$options",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$nested",108],["T_WHITESPACE"," ",108],"+",["T_WHITESPACE"," ",108],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],"[","]","]",";",["T_WHITESPACE","\n\n                    ",108],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_mergeAssociation",110],"(",["T_VARIABLE","$entity",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","get",110],"(",["T_VARIABLE","$assoc",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","property",110],"(",")",")",",",["T_WHITESPACE"," ",110],["T_VARIABLE","$assoc",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$value",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$options",110],")",";",["T_WHITESPACE","\n                ",110],"}",";",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE"," ",112],["T_ELSE","else",112],["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$callback",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$value",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$entity",113],")",["T_WHITESPACE"," ",113],["T_USE","use",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$assoc",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$nested",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$options",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$nested",114],["T_WHITESPACE"," ",114],"+",["T_WHITESPACE"," ",114],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],"[","]","]",";",["T_WHITESPACE","\n\n                    ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_marshalAssociation",116],"(",["T_VARIABLE","$assoc",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$value",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$options",116],")",";",["T_WHITESPACE","\n                ",116],"}",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$map",119],"[",["T_VARIABLE","$assoc",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","property",119],"(",")","]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$callback",119],";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_VARIABLE","$behaviors",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_table",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","behaviors",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$behaviors",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","loaded",123],"(",")",["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$name",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$behavior",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$behaviors",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",["T_VARIABLE","$name",124],")",";",["T_WHITESPACE","\n            ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$behavior",125],["T_WHITESPACE"," ",125],["T_INSTANCEOF","instanceof",125],["T_WHITESPACE"," ",125],["T_STRING","PropertyMarshalInterface",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$map",126],["T_WHITESPACE"," ",126],["T_PLUS_EQUAL","+=",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$behavior",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","buildMarshalMap",126],"(",["T_VARIABLE","$this",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$map",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$options",126],")",";",["T_WHITESPACE","\n            ",126],"}",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$map",130],";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Hydrate one entity and its associated data.\n     *\n     * ### Options:\n     *\n     * - validate: Set to false to disable validation. Can also be a string of the validator ruleset to be applied.\n     *   Defaults to true\/default.\n     * - associated: Associations listed here will be marshalled as well. Defaults to null.\n     * - fieldList: A whitelist of fields to be assigned to the entity. If not present,\n     *   the accessible fields list in the entity will be used. Defaults to null.\n     * - accessibleFields: A list of fields to allow or deny in entity accessible fields. Defaults to null\n     * - forceNew: When enabled, belongsToMany associations will have 'new' entities created\n     *   when primary key values are set, and a record does not already exist. Normally primary key\n     *   on missing entities would be ignored. Defaults to false.\n     *\n     * The above options can be used in each nested `associated` array. In addition to the above\n     * options you can also use the `onlyIds` option for HasMany and BelongsToMany associations.\n     * When true this option restricts the request data to only be read from `_ids`.\n     *\n     * ```\n     * $result = $marshaller->one($data, [\n     *   'associated' => ['Tags' => ['onlyIds' => true]]\n     * ]);\n     * ```\n     *\n     * @param array $data The data to hydrate.\n     * @param array $options List of options\n     * @return \\Cake\\ORM\\Entity\n     * @see \\Cake\\ORM\\Table::newEntity()\n     *\/",133],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","one",163],"(",["T_ARRAY","array",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$data",163],",",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$options",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],"[","]",")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_LIST","list",165],"(",["T_VARIABLE","$data",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$options",165],")",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_prepareDataAndOptions",165],"(",["T_VARIABLE","$data",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$options",165],")",";",["T_WHITESPACE","\n\n        ",165],["T_VARIABLE","$primaryKey",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_ARRAY_CAST","(array)",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_table",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","primaryKey",167],"(",")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$entityClass",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_table",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","entityClass",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$entity",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_NEW","new",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$entityClass",169],"(",")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$entity",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","source",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_table",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","registryAlias",170],"(",")",")",";",["T_WHITESPACE","\n\n        ",170],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_ISSET","isset",172],"(",["T_VARIABLE","$options",172],"[",["T_CONSTANT_ENCAPSED_STRING","'accessibleFields'",172],"]",")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_ARRAY_CAST","(array)",173],["T_VARIABLE","$options",173],"[",["T_CONSTANT_ENCAPSED_STRING","'accessibleFields'",173],"]",["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$key",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$value",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                ",173],["T_VARIABLE","$entity",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","accessible",174],"(",["T_VARIABLE","$key",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$value",174],")",";",["T_WHITESPACE","\n            ",174],"}",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$errors",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_validate",177],"(",["T_VARIABLE","$data",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$options",177],",",["T_WHITESPACE"," ",177],["T_STRING","true",177],")",";",["T_WHITESPACE","\n\n        ",177],["T_VARIABLE","$options",179],"[",["T_CONSTANT_ENCAPSED_STRING","'isMerge'",179],"]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","false",179],";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$propertyMap",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_buildPropertyMap",180],"(",["T_VARIABLE","$data",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$options",180],")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$properties",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],"[","]",";",["T_WHITESPACE","\n        ",181],["T_FOREACH","foreach",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$data",182],["T_WHITESPACE"," ",182],["T_AS","as",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$key",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$value",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_EMPTY","empty",183],"(",["T_VARIABLE","$errors",183],"[",["T_VARIABLE","$key",183],"]",")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$entity",184],["T_WHITESPACE"," ",184],["T_INSTANCEOF","instanceof",184],["T_WHITESPACE"," ",184],["T_STRING","InvalidPropertyInterface",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                    ",184],["T_VARIABLE","$entity",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","invalid",185],"(",["T_VARIABLE","$key",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$value",185],")",";",["T_WHITESPACE","\n                ",185],"}",["T_WHITESPACE","\n                ",186],["T_CONTINUE","continue",187],";",["T_WHITESPACE","\n            ",187],"}",["T_WHITESPACE","\n\n            ",188],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$value",190],["T_WHITESPACE"," ",190],["T_IS_IDENTICAL","===",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","''",190],["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],["T_STRING","in_array",190],"(",["T_VARIABLE","$key",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$primaryKey",190],",",["T_WHITESPACE"," ",190],["T_STRING","true",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                ",190],["T_COMMENT","\/\/ Skip marshalling '' for pk fields.\n",191],["T_WHITESPACE","                ",192],["T_CONTINUE","continue",192],";",["T_WHITESPACE","\n            ",192],"}",["T_WHITESPACE"," ",193],["T_ELSEIF","elseif",193],["T_WHITESPACE"," ",193],"(",["T_ISSET","isset",193],"(",["T_VARIABLE","$propertyMap",193],"[",["T_VARIABLE","$key",193],"]",")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$properties",194],"[",["T_VARIABLE","$key",194],"]",["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$propertyMap",194],"[",["T_VARIABLE","$key",194],"]","(",["T_VARIABLE","$value",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$entity",194],")",";",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE"," ",195],["T_ELSE","else",195],["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$properties",196],"[",["T_VARIABLE","$key",196],"]",["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$value",196],";",["T_WHITESPACE","\n            ",196],"}",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_IF","if",200],["T_WHITESPACE"," ",200],"(","!",["T_ISSET","isset",200],"(",["T_VARIABLE","$options",200],"[",["T_CONSTANT_ENCAPSED_STRING","'fieldList'",200],"]",")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$entity",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","set",201],"(",["T_VARIABLE","$properties",201],")",";",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$entity",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","errors",202],"(",["T_VARIABLE","$errors",202],")",";",["T_WHITESPACE","\n\n            ",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$entity",204],";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n\n        ",205],["T_FOREACH","foreach",207],["T_WHITESPACE"," ",207],"(",["T_ARRAY_CAST","(array)",207],["T_VARIABLE","$options",207],"[",["T_CONSTANT_ENCAPSED_STRING","'fieldList'",207],"]",["T_WHITESPACE"," ",207],["T_AS","as",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$field",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_STRING","array_key_exists",208],"(",["T_VARIABLE","$field",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$properties",208],")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$entity",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","set",209],"(",["T_VARIABLE","$field",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$properties",209],"[",["T_VARIABLE","$field",209],"]",")",";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_VARIABLE","$entity",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","errors",213],"(",["T_VARIABLE","$errors",213],")",";",["T_WHITESPACE","\n\n        ",213],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$entity",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Returns the validation errors for a data set based on the passed options\n     *\n     * @param array $data The data to validate.\n     * @param array $options The options passed to this marshaller.\n     * @param bool $isNew Whether it is a new entity or one to be updated.\n     * @return array The list of validation errors.\n     * @throws \\RuntimeException If no validator can be created.\n     *\/",218],["T_WHITESPACE","\n    ",226],["T_PROTECTED","protected",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","_validate",227],"(",["T_VARIABLE","$data",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$options",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$isNew",227],")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(","!",["T_VARIABLE","$options",229],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",229],"]",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],"[","]",";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n        ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$options",232],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",232],"]",["T_WHITESPACE"," ",232],["T_IS_IDENTICAL","===",232],["T_WHITESPACE"," ",232],["T_STRING","true",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$options",233],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",233],"]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_table",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","validator",233],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",233],")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n        ",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_STRING","is_string",235],"(",["T_VARIABLE","$options",235],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",235],"]",")",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$options",236],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",236],"]",["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_table",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","validator",236],"(",["T_VARIABLE","$options",236],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",236],"]",")",";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(","!",["T_STRING","is_object",238],"(",["T_VARIABLE","$options",238],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",238],"]",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_THROW","throw",239],["T_WHITESPACE"," ",239],["T_NEW","new",239],["T_WHITESPACE"," ",239],["T_STRING","RuntimeException",239],"(",["T_WHITESPACE","\n                ",239],["T_STRING","sprintf",240],"(",["T_CONSTANT_ENCAPSED_STRING","'validate must be a boolean, a string or an object. Got %s.'",240],",",["T_WHITESPACE"," ",240],["T_STRING","gettype",240],"(",["T_VARIABLE","$options",240],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",240],"]",")",")",["T_WHITESPACE","\n            ",240],")",";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n\n        ",242],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$options",244],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",244],"]",["T_OBJECT_OPERATOR","->",244],["T_STRING","errors",244],"(",["T_VARIABLE","$data",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$isNew",244],")",";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Returns data and options prepared to validate and marshall.\n     *\n     * @param array $data The data to prepare.\n     * @param array $options The options passed to this marshaller.\n     * @return array An array containing prepared data and options.\n     *\/",247],["T_WHITESPACE","\n    ",253],["T_PROTECTED","protected",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","_prepareDataAndOptions",254],"(",["T_VARIABLE","$data",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$options",254],")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$options",256],["T_WHITESPACE"," ",256],["T_PLUS_EQUAL","+=",256],["T_WHITESPACE"," ",256],"[",["T_CONSTANT_ENCAPSED_STRING","'validate'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_STRING","true",256],"]",";",["T_WHITESPACE","\n\n        ",256],["T_VARIABLE","$tableName",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_table",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","alias",258],"(",")",";",["T_WHITESPACE","\n        ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_ISSET","isset",259],"(",["T_VARIABLE","$data",259],"[",["T_VARIABLE","$tableName",259],"]",")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$data",260],["T_WHITESPACE"," ",260],["T_PLUS_EQUAL","+=",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$data",260],"[",["T_VARIABLE","$tableName",260],"]",";",["T_WHITESPACE","\n            ",260],["T_UNSET","unset",261],"(",["T_VARIABLE","$data",261],"[",["T_VARIABLE","$tableName",261],"]",")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n\n        ",262],["T_VARIABLE","$data",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_NEW","new",264],["T_WHITESPACE"," ",264],["T_STRING","ArrayObject",264],"(",["T_VARIABLE","$data",264],")",";",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$options",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_NEW","new",265],["T_WHITESPACE"," ",265],["T_STRING","ArrayObject",265],"(",["T_VARIABLE","$options",265],")",";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_table",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","dispatchEvent",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Model.beforeMarshal'",266],",",["T_WHITESPACE"," ",266],["T_STRING","compact",266],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'options'",266],")",")",";",["T_WHITESPACE","\n\n        ",266],["T_RETURN","return",268],["T_WHITESPACE"," ",268],"[",["T_ARRAY_CAST","(array)",268],["T_VARIABLE","$data",268],",",["T_WHITESPACE"," ",268],["T_ARRAY_CAST","(array)",268],["T_VARIABLE","$options",268],"]",";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_DOC_COMMENT","\/**\n     * Create a new sub-marshaller and marshal the associated data.\n     *\n     * @param \\Cake\\ORM\\Association $assoc The association to marshall\n     * @param array $value The data to hydrate\n     * @param array $options List of options.\n     * @return mixed\n     *\/",271],["T_WHITESPACE","\n    ",278],["T_PROTECTED","protected",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","_marshalAssociation",279],"(",["T_VARIABLE","$assoc",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$value",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$options",279],")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(","!",["T_STRING","is_array",281],"(",["T_VARIABLE","$value",281],")",")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_STRING","null",282],";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$targetTable",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$assoc",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","target",284],"(",")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$marshaller",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$targetTable",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","marshaller",285],"(",")",";",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$types",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],"[",["T_STRING","Association",286],["T_DOUBLE_COLON","::",286],["T_STRING","ONE_TO_ONE",286],",",["T_WHITESPACE"," ",286],["T_STRING","Association",286],["T_DOUBLE_COLON","::",286],["T_STRING","MANY_TO_ONE",286],"]",";",["T_WHITESPACE","\n        ",286],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_STRING","in_array",287],"(",["T_VARIABLE","$assoc",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","type",287],"(",")",",",["T_WHITESPACE"," ",287],["T_VARIABLE","$types",287],")",")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n            ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$marshaller",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","one",288],"(",["T_VARIABLE","$value",288],",",["T_WHITESPACE"," ",288],["T_ARRAY_CAST","(array)",288],["T_VARIABLE","$options",288],")",";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$assoc",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","type",290],"(",")",["T_WHITESPACE"," ",290],["T_IS_IDENTICAL","===",290],["T_WHITESPACE"," ",290],["T_STRING","Association",290],["T_DOUBLE_COLON","::",290],["T_STRING","ONE_TO_MANY",290],["T_WHITESPACE"," ",290],["T_BOOLEAN_OR","||",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$assoc",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","type",290],"(",")",["T_WHITESPACE"," ",290],["T_IS_IDENTICAL","===",290],["T_WHITESPACE"," ",290],["T_STRING","Association",290],["T_DOUBLE_COLON","::",290],["T_STRING","MANY_TO_MANY",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_VARIABLE","$hasIds",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_STRING","array_key_exists",291],"(",["T_CONSTANT_ENCAPSED_STRING","'_ids'",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$value",291],")",";",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$onlyIds",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","array_key_exists",292],"(",["T_CONSTANT_ENCAPSED_STRING","'onlyIds'",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$options",292],")",["T_WHITESPACE"," ",292],["T_BOOLEAN_AND","&&",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$options",292],"[",["T_CONSTANT_ENCAPSED_STRING","'onlyIds'",292],"]",";",["T_WHITESPACE","\n\n            ",292],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$hasIds",294],["T_WHITESPACE"," ",294],["T_BOOLEAN_AND","&&",294],["T_WHITESPACE"," ",294],["T_STRING","is_array",294],"(",["T_VARIABLE","$value",294],"[",["T_CONSTANT_ENCAPSED_STRING","'_ids'",294],"]",")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n                ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_loadAssociatedByIds",295],"(",["T_VARIABLE","$assoc",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$value",295],"[",["T_CONSTANT_ENCAPSED_STRING","'_ids'",295],"]",")",";",["T_WHITESPACE","\n            ",295],"}",["T_WHITESPACE","\n            ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$hasIds",297],["T_WHITESPACE"," ",297],["T_BOOLEAN_OR","||",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$onlyIds",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n                ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],"[","]",";",["T_WHITESPACE","\n            ",298],"}",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n        ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$assoc",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","type",301],"(",")",["T_WHITESPACE"," ",301],["T_IS_IDENTICAL","===",301],["T_WHITESPACE"," ",301],["T_STRING","Association",301],["T_DOUBLE_COLON","::",301],["T_STRING","MANY_TO_MANY",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$marshaller",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_belongsToMany",302],"(",["T_VARIABLE","$assoc",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$value",302],",",["T_WHITESPACE"," ",302],["T_ARRAY_CAST","(array)",302],["T_VARIABLE","$options",302],")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$marshaller",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","many",305],"(",["T_VARIABLE","$value",305],",",["T_WHITESPACE"," ",305],["T_ARRAY_CAST","(array)",305],["T_VARIABLE","$options",305],")",";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n\n    ",306],["T_DOC_COMMENT","\/**\n     * Hydrate many entities and their associated data.\n     *\n     * ### Options:\n     *\n     * - validate: Set to false to disable validation. Can also be a string of the validator ruleset to be applied.\n     *   Defaults to true\/default.\n     * - associated: Associations listed here will be marshalled as well. Defaults to null.\n     * - fieldList: A whitelist of fields to be assigned to the entity. If not present,\n     *   the accessible fields list in the entity will be used. Defaults to null.\n     * - accessibleFields: A list of fields to allow or deny in entity accessible fields. Defaults to null\n     * - forceNew: When enabled, belongsToMany associations will have 'new' entities created\n     *   when primary key values are set, and a record does not already exist. Normally primary key\n     *   on missing entities would be ignored. Defaults to false.\n     *\n     * @param array $data The data to hydrate.\n     * @param array $options List of options\n     * @return array An array of hydrated records.\n     * @see \\Cake\\ORM\\Table::newEntities()\n     *\/",308],["T_WHITESPACE","\n    ",327],["T_PUBLIC","public",328],["T_WHITESPACE"," ",328],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],["T_STRING","many",328],"(",["T_ARRAY","array",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$data",328],",",["T_WHITESPACE"," ",328],["T_ARRAY","array",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$options",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],"[","]",")",["T_WHITESPACE","\n    ",328],"{",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$output",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],"[","]",";",["T_WHITESPACE","\n        ",330],["T_FOREACH","foreach",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$data",331],["T_WHITESPACE"," ",331],["T_AS","as",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$record",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(","!",["T_STRING","is_array",332],"(",["T_VARIABLE","$record",332],")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                ",332],["T_CONTINUE","continue",333],";",["T_WHITESPACE","\n            ",333],"}",["T_WHITESPACE","\n            ",334],["T_VARIABLE","$output",335],"[","]",["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","one",335],"(",["T_VARIABLE","$record",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$options",335],")",";",["T_WHITESPACE","\n        ",335],"}",["T_WHITESPACE","\n\n        ",336],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$output",338],";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Marshals data for belongsToMany associations.\n     *\n     * Builds the related entities and handles the special casing\n     * for junction table entities.\n     *\n     * @param \\Cake\\ORM\\Association $assoc The association to marshal.\n     * @param array $data The data to convert into entities.\n     * @param array $options List of options.\n     * @return array An array of built entities.\n     *\/",341],["T_WHITESPACE","\n    ",351],["T_PROTECTED","protected",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","_belongsToMany",352],"(",["T_STRING","Association",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$assoc",352],",",["T_WHITESPACE"," ",352],["T_ARRAY","array",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$data",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$options",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],"[","]",")",["T_WHITESPACE","\n    ",352],"{",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$associated",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_ISSET","isset",354],"(",["T_VARIABLE","$options",354],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",354],"]",")",["T_WHITESPACE"," ",354],"?",["T_WHITESPACE"," ",354],["T_VARIABLE","$options",354],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",354],"]",["T_WHITESPACE"," ",354],":",["T_WHITESPACE"," ",354],"[","]",";",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$forceNew",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_ISSET","isset",355],"(",["T_VARIABLE","$options",355],"[",["T_CONSTANT_ENCAPSED_STRING","'forceNew'",355],"]",")",["T_WHITESPACE"," ",355],"?",["T_WHITESPACE"," ",355],["T_VARIABLE","$options",355],"[",["T_CONSTANT_ENCAPSED_STRING","'forceNew'",355],"]",["T_WHITESPACE"," ",355],":",["T_WHITESPACE"," ",355],["T_STRING","false",355],";",["T_WHITESPACE","\n\n        ",355],["T_VARIABLE","$data",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_STRING","array_values",357],"(",["T_VARIABLE","$data",357],")",";",["T_WHITESPACE","\n\n        ",357],["T_VARIABLE","$target",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$assoc",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","target",359],"(",")",";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$primaryKey",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_STRING","array_flip",360],"(",["T_ARRAY_CAST","(array)",360],["T_VARIABLE","$target",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","primaryKey",360],"(",")",")",";",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$records",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$conditions",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],"[","]",";",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$primaryCount",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_STRING","count",362],"(",["T_VARIABLE","$primaryKey",362],")",";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$conditions",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],"[","]",";",["T_WHITESPACE","\n\n        ",363],["T_FOREACH","foreach",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$data",365],["T_WHITESPACE"," ",365],["T_AS","as",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$i",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$row",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_IF","if",366],["T_WHITESPACE"," ",366],"(","!",["T_STRING","is_array",366],"(",["T_VARIABLE","$row",366],")",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n                ",366],["T_CONTINUE","continue",367],";",["T_WHITESPACE","\n            ",367],"}",["T_WHITESPACE","\n            ",368],["T_IF","if",369],["T_WHITESPACE"," ",369],"(",["T_STRING","array_intersect_key",369],"(",["T_VARIABLE","$primaryKey",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$row",369],")",["T_WHITESPACE"," ",369],["T_IS_IDENTICAL","===",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$primaryKey",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n                ",369],["T_VARIABLE","$keys",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING","array_intersect_key",370],"(",["T_VARIABLE","$row",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$primaryKey",370],")",";",["T_WHITESPACE","\n                ",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(",["T_STRING","count",371],"(",["T_VARIABLE","$keys",371],")",["T_WHITESPACE"," ",371],["T_IS_IDENTICAL","===",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$primaryCount",371],")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n                    ",371],["T_VARIABLE","$rowConditions",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],"[","]",";",["T_WHITESPACE","\n                    ",372],["T_FOREACH","foreach",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$keys",373],["T_WHITESPACE"," ",373],["T_AS","as",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$key",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$value",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n                        ",373],["T_VARIABLE","$rowConditions",374],"[","]","[",["T_VARIABLE","$target",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","aliasfield",374],"(",["T_VARIABLE","$key",374],")","]",["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$value",374],";",["T_WHITESPACE","\n                    ",374],"}",["T_WHITESPACE","\n\n                    ",375],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_VARIABLE","$forceNew",377],["T_WHITESPACE"," ",377],["T_BOOLEAN_AND","&&",377],["T_WHITESPACE"," ",377],"!",["T_VARIABLE","$target",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","exists",377],"(",["T_VARIABLE","$rowConditions",377],")",")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n                        ",377],["T_VARIABLE","$records",378],"[",["T_VARIABLE","$i",378],"]",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","one",378],"(",["T_VARIABLE","$row",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$options",378],")",";",["T_WHITESPACE","\n                    ",378],"}",["T_WHITESPACE","\n\n                    ",379],["T_VARIABLE","$conditions",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_STRING","array_merge",381],"(",["T_VARIABLE","$conditions",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$rowConditions",381],")",";",["T_WHITESPACE","\n                ",381],"}",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE"," ",383],["T_ELSE","else",383],["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n                ",383],["T_VARIABLE","$records",384],"[",["T_VARIABLE","$i",384],"]",["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","one",384],"(",["T_VARIABLE","$row",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$options",384],")",";",["T_WHITESPACE","\n            ",384],"}",["T_WHITESPACE","\n        ",385],"}",["T_WHITESPACE","\n\n        ",386],["T_IF","if",388],["T_WHITESPACE"," ",388],"(","!",["T_EMPTY","empty",388],"(",["T_VARIABLE","$conditions",388],")",")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$query",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$target",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","find",389],"(",")",";",["T_WHITESPACE","\n            ",389],["T_VARIABLE","$query",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","andWhere",390],"(",["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$exp",390],")",["T_WHITESPACE"," ",390],["T_USE","use",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$conditions",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                ",390],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$exp",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","or_",391],"(",["T_VARIABLE","$conditions",391],")",";",["T_WHITESPACE","\n            ",391],"}",")",";",["T_WHITESPACE","\n\n            ",392],["T_VARIABLE","$keyFields",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_STRING","array_keys",394],"(",["T_VARIABLE","$primaryKey",394],")",";",["T_WHITESPACE","\n\n            ",394],["T_VARIABLE","$existing",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],"[","]",";",["T_WHITESPACE","\n            ",396],["T_FOREACH","foreach",397],["T_WHITESPACE"," ",397],"(",["T_VARIABLE","$query",397],["T_WHITESPACE"," ",397],["T_AS","as",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$row",397],")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n                ",397],["T_VARIABLE","$k",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","implode",398],"(",["T_CONSTANT_ENCAPSED_STRING","';'",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$row",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","extract",398],"(",["T_VARIABLE","$keyFields",398],")",")",";",["T_WHITESPACE","\n                ",398],["T_VARIABLE","$existing",399],"[",["T_VARIABLE","$k",399],"]",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$row",399],";",["T_WHITESPACE","\n            ",399],"}",["T_WHITESPACE","\n\n            ",400],["T_FOREACH","foreach",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$data",402],["T_WHITESPACE"," ",402],["T_AS","as",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$i",402],["T_WHITESPACE"," ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$row",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n                ",402],["T_VARIABLE","$key",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],"[","]",";",["T_WHITESPACE","\n                ",403],["T_FOREACH","foreach",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$keyFields",404],["T_WHITESPACE"," ",404],["T_AS","as",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$k",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n                    ",404],["T_IF","if",405],["T_WHITESPACE"," ",405],"(",["T_ISSET","isset",405],"(",["T_VARIABLE","$row",405],"[",["T_VARIABLE","$k",405],"]",")",")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n                        ",405],["T_VARIABLE","$key",406],"[","]",["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$row",406],"[",["T_VARIABLE","$k",406],"]",";",["T_WHITESPACE","\n                    ",406],"}",["T_WHITESPACE","\n                ",407],"}",["T_WHITESPACE","\n                ",408],["T_VARIABLE","$key",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_STRING","implode",409],"(",["T_CONSTANT_ENCAPSED_STRING","';'",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$key",409],")",";",["T_WHITESPACE","\n\n                ",409],["T_COMMENT","\/\/ Update existing record and child associations\n",411],["T_WHITESPACE","                ",412],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_ISSET","isset",412],"(",["T_VARIABLE","$existing",412],"[",["T_VARIABLE","$key",412],"]",")",")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                    ",412],["T_VARIABLE","$records",413],"[",["T_VARIABLE","$i",413],"]",["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","merge",413],"(",["T_VARIABLE","$existing",413],"[",["T_VARIABLE","$key",413],"]",",",["T_WHITESPACE"," ",413],["T_VARIABLE","$data",413],"[",["T_VARIABLE","$i",413],"]",",",["T_WHITESPACE"," ",413],["T_VARIABLE","$options",413],")",";",["T_WHITESPACE","\n                ",413],"}",["T_WHITESPACE","\n            ",414],"}",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE","\n\n        ",416],["T_VARIABLE","$jointMarshaller",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$assoc",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","junction",418],"(",")",["T_OBJECT_OPERATOR","->",418],["T_STRING","marshaller",418],"(",")",";",["T_WHITESPACE","\n\n        ",418],["T_VARIABLE","$nested",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],"[","]",";",["T_WHITESPACE","\n        ",420],["T_IF","if",421],["T_WHITESPACE"," ",421],"(",["T_ISSET","isset",421],"(",["T_VARIABLE","$associated",421],"[",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",421],"]",")",")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n            ",421],["T_VARIABLE","$nested",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_ARRAY_CAST","(array)",422],["T_VARIABLE","$associated",422],"[",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",422],"]",";",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE","\n\n        ",423],["T_FOREACH","foreach",425],["T_WHITESPACE"," ",425],"(",["T_VARIABLE","$records",425],["T_WHITESPACE"," ",425],["T_AS","as",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$i",425],["T_WHITESPACE"," ",425],["T_DOUBLE_ARROW","=>",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$record",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n            ",425],["T_COMMENT","\/\/ Update junction table data in _joinData.\n",426],["T_WHITESPACE","            ",427],["T_IF","if",427],["T_WHITESPACE"," ",427],"(",["T_ISSET","isset",427],"(",["T_VARIABLE","$data",427],"[",["T_VARIABLE","$i",427],"]","[",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",427],"]",")",")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n                ",427],["T_VARIABLE","$joinData",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$jointMarshaller",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","one",428],"(",["T_VARIABLE","$data",428],"[",["T_VARIABLE","$i",428],"]","[",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",428],"]",",",["T_WHITESPACE"," ",428],["T_VARIABLE","$nested",428],")",";",["T_WHITESPACE","\n                ",428],["T_VARIABLE","$record",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","set",429],"(",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$joinData",429],")",";",["T_WHITESPACE","\n            ",429],"}",["T_WHITESPACE","\n        ",430],"}",["T_WHITESPACE","\n\n        ",431],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$records",433],";",["T_WHITESPACE","\n    ",433],"}",["T_WHITESPACE","\n\n    ",434],["T_DOC_COMMENT","\/**\n     * Loads a list of belongs to many from ids.\n     *\n     * @param \\Cake\\ORM\\Association $assoc The association class for the belongsToMany association.\n     * @param array $ids The list of ids to load.\n     * @return array An array of entities.\n     *\/",436],["T_WHITESPACE","\n    ",442],["T_PROTECTED","protected",443],["T_WHITESPACE"," ",443],["T_FUNCTION","function",443],["T_WHITESPACE"," ",443],["T_STRING","_loadAssociatedByIds",443],"(",["T_VARIABLE","$assoc",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$ids",443],")",["T_WHITESPACE","\n    ",443],"{",["T_WHITESPACE","\n        ",444],["T_IF","if",445],["T_WHITESPACE"," ",445],"(",["T_EMPTY","empty",445],"(",["T_VARIABLE","$ids",445],")",")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n            ",445],["T_RETURN","return",446],["T_WHITESPACE"," ",446],"[","]",";",["T_WHITESPACE","\n        ",446],"}",["T_WHITESPACE","\n\n        ",447],["T_VARIABLE","$target",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$assoc",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","target",449],"(",")",";",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$primaryKey",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_ARRAY_CAST","(array)",450],["T_VARIABLE","$target",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","primaryKey",450],"(",")",";",["T_WHITESPACE","\n        ",450],["T_VARIABLE","$multi",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_STRING","count",451],"(",["T_VARIABLE","$primaryKey",451],")",["T_WHITESPACE"," ",451],">",["T_WHITESPACE"," ",451],["T_LNUMBER","1",451],";",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$primaryKey",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_STRING","array_map",452],"(","[",["T_VARIABLE","$target",452],",",["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'aliasField'",452],"]",",",["T_WHITESPACE"," ",452],["T_VARIABLE","$primaryKey",452],")",";",["T_WHITESPACE","\n\n        ",452],["T_IF","if",454],["T_WHITESPACE"," ",454],"(",["T_VARIABLE","$multi",454],")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n            ",454],["T_IF","if",455],["T_WHITESPACE"," ",455],"(",["T_STRING","count",455],"(",["T_STRING","current",455],"(",["T_VARIABLE","$ids",455],")",")",["T_WHITESPACE"," ",455],["T_IS_NOT_IDENTICAL","!==",455],["T_WHITESPACE"," ",455],["T_STRING","count",455],"(",["T_VARIABLE","$primaryKey",455],")",")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n                ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],"[","]",";",["T_WHITESPACE","\n            ",456],"}",["T_WHITESPACE","\n            ",457],["T_VARIABLE","$filter",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_NEW","new",458],["T_WHITESPACE"," ",458],["T_STRING","TupleComparison",458],"(",["T_VARIABLE","$primaryKey",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$ids",458],",",["T_WHITESPACE"," ",458],"[","]",",",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'IN'",458],")",";",["T_WHITESPACE","\n        ",458],"}",["T_WHITESPACE"," ",459],["T_ELSE","else",459],["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n            ",459],["T_VARIABLE","$filter",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],"[",["T_VARIABLE","$primaryKey",460],"[",["T_LNUMBER","0",460],"]",["T_WHITESPACE"," ",460],".",["T_WHITESPACE"," ",460],["T_CONSTANT_ENCAPSED_STRING","' IN'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$ids",460],"]",";",["T_WHITESPACE","\n        ",460],"}",["T_WHITESPACE","\n\n        ",461],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$target",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","find",463],"(",")",["T_OBJECT_OPERATOR","->",463],["T_STRING","where",463],"(",["T_VARIABLE","$filter",463],")",["T_OBJECT_OPERATOR","->",463],["T_STRING","toArray",463],"(",")",";",["T_WHITESPACE","\n    ",463],"}",["T_WHITESPACE","\n\n    ",464],["T_DOC_COMMENT","\/**\n     * Loads a list of belongs to many from ids.\n     *\n     * @param \\Cake\\ORM\\Association $assoc The association class for the belongsToMany association.\n     * @param array $ids The list of ids to load.\n     * @return array An array of entities.\n     * @deprecated Use _loadAssociatedByIds()\n     *\/",466],["T_WHITESPACE","\n    ",473],["T_PROTECTED","protected",474],["T_WHITESPACE"," ",474],["T_FUNCTION","function",474],["T_WHITESPACE"," ",474],["T_STRING","_loadBelongsToMany",474],"(",["T_VARIABLE","$assoc",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$ids",474],")",["T_WHITESPACE","\n    ",474],"{",["T_WHITESPACE","\n        ",475],["T_RETURN","return",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_loadAssociatedByIds",476],"(",["T_VARIABLE","$assoc",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$ids",476],")",";",["T_WHITESPACE","\n    ",476],"}",["T_WHITESPACE","\n\n    ",477],["T_DOC_COMMENT","\/**\n     * Merges `$data` into `$entity` and recursively does the same for each one of\n     * the association names passed in `$options`. When merging associations, if an\n     * entity is not present in the parent entity for a given association, a new one\n     * will be created.\n     *\n     * When merging HasMany or BelongsToMany associations, all the entities in the\n     * `$data` array will appear, those that can be matched by primary key will get\n     * the data merged, but those that cannot, will be discarded. `ids` option can be used\n     * to determine whether the association must use the `_ids` format.\n     *\n     * ### Options:\n     *\n     * - associated: Associations listed here will be marshalled as well.\n     * - validate: Whether or not to validate data before hydrating the entities. Can\n     *   also be set to a string to use a specific validator. Defaults to true\/default.\n     * - fieldList: A whitelist of fields to be assigned to the entity. If not present\n     *   the accessible fields list in the entity will be used.\n     * - accessibleFields: A list of fields to allow or deny in entity accessible fields.\n     *\n     * The above options can be used in each nested `associated` array. In addition to the above\n     * options you can also use the `onlyIds` option for HasMany and BelongsToMany associations.\n     * When true this option restricts the request data to only be read from `_ids`.\n     *\n     * ```\n     * $result = $marshaller->merge($entity, $data, [\n     *   'associated' => ['Tags' => ['onlyIds' => true]]\n     * ]);\n     * ```\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $entity the entity that will get the\n     * data merged in\n     * @param array $data key value list of fields to be merged into the entity\n     * @param array $options List of options.\n     * @return \\Cake\\Datasource\\EntityInterface\n     *\/",479],["T_WHITESPACE","\n    ",514],["T_PUBLIC","public",515],["T_WHITESPACE"," ",515],["T_FUNCTION","function",515],["T_WHITESPACE"," ",515],["T_STRING","merge",515],"(",["T_STRING","EntityInterface",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$entity",515],",",["T_WHITESPACE"," ",515],["T_ARRAY","array",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$data",515],",",["T_WHITESPACE"," ",515],["T_ARRAY","array",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$options",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],"[","]",")",["T_WHITESPACE","\n    ",515],"{",["T_WHITESPACE","\n        ",516],["T_LIST","list",517],"(",["T_VARIABLE","$data",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$options",517],")",["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","_prepareDataAndOptions",517],"(",["T_VARIABLE","$data",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$options",517],")",";",["T_WHITESPACE","\n\n        ",517],["T_VARIABLE","$isNew",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$entity",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","isNew",519],"(",")",";",["T_WHITESPACE","\n        ",519],["T_VARIABLE","$keys",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],"[","]",";",["T_WHITESPACE","\n\n        ",520],["T_IF","if",522],["T_WHITESPACE"," ",522],"(","!",["T_VARIABLE","$isNew",522],")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n            ",522],["T_VARIABLE","$keys",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_VARIABLE","$entity",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","extract",523],"(",["T_ARRAY_CAST","(array)",523],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","_table",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","primaryKey",523],"(",")",")",";",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE","\n\n        ",524],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_ISSET","isset",526],"(",["T_VARIABLE","$options",526],"[",["T_CONSTANT_ENCAPSED_STRING","'accessibleFields'",526],"]",")",")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_FOREACH","foreach",527],["T_WHITESPACE"," ",527],"(",["T_ARRAY_CAST","(array)",527],["T_VARIABLE","$options",527],"[",["T_CONSTANT_ENCAPSED_STRING","'accessibleFields'",527],"]",["T_WHITESPACE"," ",527],["T_AS","as",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$key",527],["T_WHITESPACE"," ",527],["T_DOUBLE_ARROW","=>",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$value",527],")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n                ",527],["T_VARIABLE","$entity",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","accessible",528],"(",["T_VARIABLE","$key",528],",",["T_WHITESPACE"," ",528],["T_VARIABLE","$value",528],")",";",["T_WHITESPACE","\n            ",528],"}",["T_WHITESPACE","\n        ",529],"}",["T_WHITESPACE","\n\n        ",530],["T_VARIABLE","$errors",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_validate",532],"(",["T_VARIABLE","$data",532],["T_WHITESPACE"," ",532],"+",["T_WHITESPACE"," ",532],["T_VARIABLE","$keys",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$options",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$isNew",532],")",";",["T_WHITESPACE","\n        ",532],["T_VARIABLE","$schema",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_table",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","schema",533],"(",")",";",["T_WHITESPACE","\n        ",533],["T_VARIABLE","$options",534],"[",["T_CONSTANT_ENCAPSED_STRING","'isMerge'",534],"]",["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_STRING","true",534],";",["T_WHITESPACE","\n        ",534],["T_VARIABLE","$propertyMap",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","_buildPropertyMap",535],"(",["T_VARIABLE","$data",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$options",535],")",";",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$properties",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$marshalledAssocs",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],"[","]",";",["T_WHITESPACE","\n        ",536],["T_FOREACH","foreach",537],["T_WHITESPACE"," ",537],"(",["T_VARIABLE","$data",537],["T_WHITESPACE"," ",537],["T_AS","as",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$key",537],["T_WHITESPACE"," ",537],["T_DOUBLE_ARROW","=>",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$value",537],")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n            ",537],["T_IF","if",538],["T_WHITESPACE"," ",538],"(","!",["T_EMPTY","empty",538],"(",["T_VARIABLE","$errors",538],"[",["T_VARIABLE","$key",538],"]",")",")",["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n                ",538],["T_IF","if",539],["T_WHITESPACE"," ",539],"(",["T_VARIABLE","$entity",539],["T_WHITESPACE"," ",539],["T_INSTANCEOF","instanceof",539],["T_WHITESPACE"," ",539],["T_STRING","InvalidPropertyInterface",539],")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n                    ",539],["T_VARIABLE","$entity",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","invalid",540],"(",["T_VARIABLE","$key",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$value",540],")",";",["T_WHITESPACE","\n                ",540],"}",["T_WHITESPACE","\n                ",541],["T_CONTINUE","continue",542],";",["T_WHITESPACE","\n            ",542],"}",["T_WHITESPACE","\n            ",543],["T_VARIABLE","$original",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_VARIABLE","$entity",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","get",544],"(",["T_VARIABLE","$key",544],")",";",["T_WHITESPACE","\n\n            ",544],["T_IF","if",546],["T_WHITESPACE"," ",546],"(",["T_ISSET","isset",546],"(",["T_VARIABLE","$propertyMap",546],"[",["T_VARIABLE","$key",546],"]",")",")",["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n                ",546],["T_VARIABLE","$value",547],["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_VARIABLE","$propertyMap",547],"[",["T_VARIABLE","$key",547],"]","(",["T_VARIABLE","$value",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$entity",547],")",";",["T_WHITESPACE","\n\n                ",547],["T_COMMENT","\/\/ Don't dirty scalar values and objects that didn't\n",549],["T_WHITESPACE","                ",550],["T_COMMENT","\/\/ change. Arrays will always be marked as dirty because\n",550],["T_WHITESPACE","                ",551],["T_COMMENT","\/\/ the original\/updated list could contain references to the\n",551],["T_WHITESPACE","                ",552],["T_COMMENT","\/\/ same objects, even though those objects may have changed internally.\n",552],["T_WHITESPACE","                ",553],["T_IF","if",553],["T_WHITESPACE"," ",553],"(","(",["T_STRING","is_scalar",553],"(",["T_VARIABLE","$value",553],")",["T_WHITESPACE"," ",553],["T_BOOLEAN_AND","&&",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$original",553],["T_WHITESPACE"," ",553],["T_IS_IDENTICAL","===",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$value",553],")",["T_WHITESPACE"," ",553],["T_BOOLEAN_OR","||",553],["T_WHITESPACE","\n                    ",553],"(",["T_VARIABLE","$value",554],["T_WHITESPACE"," ",554],["T_IS_IDENTICAL","===",554],["T_WHITESPACE"," ",554],["T_STRING","null",554],["T_WHITESPACE"," ",554],["T_BOOLEAN_AND","&&",554],["T_WHITESPACE"," ",554],["T_VARIABLE","$original",554],["T_WHITESPACE"," ",554],["T_IS_IDENTICAL","===",554],["T_WHITESPACE"," ",554],["T_VARIABLE","$value",554],")",["T_WHITESPACE"," ",554],["T_BOOLEAN_OR","||",554],["T_WHITESPACE","\n                    ",554],"(",["T_STRING","is_object",555],"(",["T_VARIABLE","$value",555],")",["T_WHITESPACE"," ",555],["T_BOOLEAN_AND","&&",555],["T_WHITESPACE"," ",555],"!","(",["T_VARIABLE","$value",555],["T_WHITESPACE"," ",555],["T_INSTANCEOF","instanceof",555],["T_WHITESPACE"," ",555],["T_STRING","EntityInterface",555],")",["T_WHITESPACE"," ",555],["T_BOOLEAN_AND","&&",555],["T_WHITESPACE"," ",555],["T_VARIABLE","$original",555],["T_WHITESPACE"," ",555],["T_IS_EQUAL","==",555],["T_WHITESPACE"," ",555],["T_VARIABLE","$value",555],")",["T_WHITESPACE","\n                ",555],")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n                    ",556],["T_CONTINUE","continue",557],";",["T_WHITESPACE","\n                ",557],"}",["T_WHITESPACE","\n            ",558],"}",["T_WHITESPACE","\n            ",559],["T_VARIABLE","$properties",560],"[",["T_VARIABLE","$key",560],"]",["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_VARIABLE","$value",560],";",["T_WHITESPACE","\n        ",560],"}",["T_WHITESPACE","\n\n        ",561],["T_VARIABLE","$entity",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","errors",563],"(",["T_VARIABLE","$errors",563],")",";",["T_WHITESPACE","\n        ",563],["T_IF","if",564],["T_WHITESPACE"," ",564],"(","!",["T_ISSET","isset",564],"(",["T_VARIABLE","$options",564],"[",["T_CONSTANT_ENCAPSED_STRING","'fieldList'",564],"]",")",")",["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n            ",564],["T_VARIABLE","$entity",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","set",565],"(",["T_VARIABLE","$properties",565],")",";",["T_WHITESPACE","\n\n            ",565],["T_FOREACH","foreach",567],["T_WHITESPACE"," ",567],"(",["T_VARIABLE","$properties",567],["T_WHITESPACE"," ",567],["T_AS","as",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$field",567],["T_WHITESPACE"," ",567],["T_DOUBLE_ARROW","=>",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$value",567],")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n                ",567],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_VARIABLE","$value",568],["T_WHITESPACE"," ",568],["T_INSTANCEOF","instanceof",568],["T_WHITESPACE"," ",568],["T_STRING","EntityInterface",568],")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                    ",568],["T_VARIABLE","$entity",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","dirty",569],"(",["T_VARIABLE","$field",569],",",["T_WHITESPACE"," ",569],["T_VARIABLE","$value",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","dirty",569],"(",")",")",";",["T_WHITESPACE","\n                ",569],"}",["T_WHITESPACE","\n            ",570],"}",["T_WHITESPACE","\n\n            ",571],["T_RETURN","return",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$entity",573],";",["T_WHITESPACE","\n        ",573],"}",["T_WHITESPACE","\n\n        ",574],["T_FOREACH","foreach",576],["T_WHITESPACE"," ",576],"(",["T_ARRAY_CAST","(array)",576],["T_VARIABLE","$options",576],"[",["T_CONSTANT_ENCAPSED_STRING","'fieldList'",576],"]",["T_WHITESPACE"," ",576],["T_AS","as",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$field",576],")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n            ",576],["T_IF","if",577],["T_WHITESPACE"," ",577],"(",["T_STRING","array_key_exists",577],"(",["T_VARIABLE","$field",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$properties",577],")",")",["T_WHITESPACE"," ",577],"{",["T_WHITESPACE","\n                ",577],["T_VARIABLE","$entity",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","set",578],"(",["T_VARIABLE","$field",578],",",["T_WHITESPACE"," ",578],["T_VARIABLE","$properties",578],"[",["T_VARIABLE","$field",578],"]",")",";",["T_WHITESPACE","\n                ",578],["T_IF","if",579],["T_WHITESPACE"," ",579],"(",["T_VARIABLE","$properties",579],"[",["T_VARIABLE","$field",579],"]",["T_WHITESPACE"," ",579],["T_INSTANCEOF","instanceof",579],["T_WHITESPACE"," ",579],["T_STRING","EntityInterface",579],")",["T_WHITESPACE"," ",579],"{",["T_WHITESPACE","\n                    ",579],["T_VARIABLE","$entity",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","dirty",580],"(",["T_VARIABLE","$field",580],",",["T_WHITESPACE"," ",580],["T_VARIABLE","$properties",580],"[",["T_VARIABLE","$field",580],"]",["T_OBJECT_OPERATOR","->",580],["T_STRING","dirty",580],"(",")",")",";",["T_WHITESPACE","\n                ",580],"}",["T_WHITESPACE","\n            ",581],"}",["T_WHITESPACE","\n        ",582],"}",["T_WHITESPACE","\n\n        ",583],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$entity",585],";",["T_WHITESPACE","\n    ",585],"}",["T_WHITESPACE","\n\n    ",586],["T_DOC_COMMENT","\/**\n     * Merges each of the elements from `$data` into each of the entities in `$entities`\n     * and recursively does the same for each of the association names passed in\n     * `$options`. When merging associations, if an entity is not present in the parent\n     * entity for a given association, a new one will be created.\n     *\n     * Records in `$data` are matched against the entities using the primary key\n     * column. Entries in `$entities` that cannot be matched to any record in\n     * `$data` will be discarded. Records in `$data` that could not be matched will\n     * be marshalled as a new entity.\n     *\n     * When merging HasMany or BelongsToMany associations, all the entities in the\n     * `$data` array will appear, those that can be matched by primary key will get\n     * the data merged, but those that cannot, will be discarded.\n     *\n     * ### Options:\n     *\n     * - validate: Whether or not to validate data before hydrating the entities. Can\n     *   also be set to a string to use a specific validator. Defaults to true\/default.\n     * - associated: Associations listed here will be marshalled as well.\n     * - fieldList: A whitelist of fields to be assigned to the entity. If not present,\n     *   the accessible fields list in the entity will be used.\n     * - accessibleFields: A list of fields to allow or deny in entity accessible fields.\n     *\n     * @param array|\\Traversable $entities the entities that will get the\n     *   data merged in\n     * @param array $data list of arrays to be merged into the entities\n     * @param array $options List of options.\n     * @return array\n     *\/",588],["T_WHITESPACE","\n    ",617],["T_PUBLIC","public",618],["T_WHITESPACE"," ",618],["T_FUNCTION","function",618],["T_WHITESPACE"," ",618],["T_STRING","mergeMany",618],"(",["T_VARIABLE","$entities",618],",",["T_WHITESPACE"," ",618],["T_ARRAY","array",618],["T_WHITESPACE"," ",618],["T_VARIABLE","$data",618],",",["T_WHITESPACE"," ",618],["T_ARRAY","array",618],["T_WHITESPACE"," ",618],["T_VARIABLE","$options",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],"[","]",")",["T_WHITESPACE","\n    ",618],"{",["T_WHITESPACE","\n        ",619],["T_VARIABLE","$primary",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_ARRAY_CAST","(array)",620],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","_table",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","primaryKey",620],"(",")",";",["T_WHITESPACE","\n\n        ",620],["T_VARIABLE","$indexed",622],["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],"(",["T_NEW","new",622],["T_WHITESPACE"," ",622],["T_STRING","Collection",622],"(",["T_VARIABLE","$data",622],")",")",["T_WHITESPACE","\n            ",622],["T_OBJECT_OPERATOR","->",623],["T_STRING","groupBy",623],"(",["T_FUNCTION","function",623],["T_WHITESPACE"," ",623],"(",["T_VARIABLE","$el",623],")",["T_WHITESPACE"," ",623],["T_USE","use",623],["T_WHITESPACE"," ",623],"(",["T_VARIABLE","$primary",623],")",["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n                ",623],["T_VARIABLE","$keys",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],"[","]",";",["T_WHITESPACE","\n                ",624],["T_FOREACH","foreach",625],["T_WHITESPACE"," ",625],"(",["T_VARIABLE","$primary",625],["T_WHITESPACE"," ",625],["T_AS","as",625],["T_WHITESPACE"," ",625],["T_VARIABLE","$key",625],")",["T_WHITESPACE"," ",625],"{",["T_WHITESPACE","\n                    ",625],["T_VARIABLE","$keys",626],"[","]",["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_ISSET","isset",626],"(",["T_VARIABLE","$el",626],"[",["T_VARIABLE","$key",626],"]",")",["T_WHITESPACE"," ",626],"?",["T_WHITESPACE"," ",626],["T_VARIABLE","$el",626],"[",["T_VARIABLE","$key",626],"]",["T_WHITESPACE"," ",626],":",["T_WHITESPACE"," ",626],["T_CONSTANT_ENCAPSED_STRING","''",626],";",["T_WHITESPACE","\n                ",626],"}",["T_WHITESPACE","\n\n                ",627],["T_RETURN","return",629],["T_WHITESPACE"," ",629],["T_STRING","implode",629],"(",["T_CONSTANT_ENCAPSED_STRING","';'",629],",",["T_WHITESPACE"," ",629],["T_VARIABLE","$keys",629],")",";",["T_WHITESPACE","\n            ",629],"}",")",["T_WHITESPACE","\n            ",630],["T_OBJECT_OPERATOR","->",631],["T_STRING","map",631],"(",["T_FUNCTION","function",631],["T_WHITESPACE"," ",631],"(",["T_VARIABLE","$element",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$key",631],")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n                ",631],["T_RETURN","return",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$key",632],["T_WHITESPACE"," ",632],["T_IS_IDENTICAL","===",632],["T_WHITESPACE"," ",632],["T_CONSTANT_ENCAPSED_STRING","''",632],["T_WHITESPACE"," ",632],"?",["T_WHITESPACE"," ",632],["T_VARIABLE","$element",632],["T_WHITESPACE"," ",632],":",["T_WHITESPACE"," ",632],["T_VARIABLE","$element",632],"[",["T_LNUMBER","0",632],"]",";",["T_WHITESPACE","\n            ",632],"}",")",["T_WHITESPACE","\n            ",633],["T_OBJECT_OPERATOR","->",634],["T_STRING","toArray",634],"(",")",";",["T_WHITESPACE","\n\n        ",634],["T_VARIABLE","$new",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_ISSET","isset",636],"(",["T_VARIABLE","$indexed",636],"[",["T_STRING","null",636],"]",")",["T_WHITESPACE"," ",636],"?",["T_WHITESPACE"," ",636],["T_VARIABLE","$indexed",636],"[",["T_STRING","null",636],"]",["T_WHITESPACE"," ",636],":",["T_WHITESPACE"," ",636],"[","]",";",["T_WHITESPACE","\n        ",636],["T_UNSET","unset",637],"(",["T_VARIABLE","$indexed",637],"[",["T_STRING","null",637],"]",")",";",["T_WHITESPACE","\n        ",637],["T_VARIABLE","$output",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],"[","]",";",["T_WHITESPACE","\n\n        ",638],["T_FOREACH","foreach",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$entities",640],["T_WHITESPACE"," ",640],["T_AS","as",640],["T_WHITESPACE"," ",640],["T_VARIABLE","$entity",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_IF","if",641],["T_WHITESPACE"," ",641],"(","!","(",["T_VARIABLE","$entity",641],["T_WHITESPACE"," ",641],["T_INSTANCEOF","instanceof",641],["T_WHITESPACE"," ",641],["T_STRING","EntityInterface",641],")",")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n                ",641],["T_CONTINUE","continue",642],";",["T_WHITESPACE","\n            ",642],"}",["T_WHITESPACE","\n\n            ",643],["T_VARIABLE","$key",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_STRING","implode",645],"(",["T_CONSTANT_ENCAPSED_STRING","';'",645],",",["T_WHITESPACE"," ",645],["T_VARIABLE","$entity",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","extract",645],"(",["T_VARIABLE","$primary",645],")",")",";",["T_WHITESPACE","\n            ",645],["T_IF","if",646],["T_WHITESPACE"," ",646],"(",["T_VARIABLE","$key",646],["T_WHITESPACE"," ",646],["T_IS_IDENTICAL","===",646],["T_WHITESPACE"," ",646],["T_STRING","null",646],["T_WHITESPACE"," ",646],["T_BOOLEAN_OR","||",646],["T_WHITESPACE"," ",646],"!",["T_ISSET","isset",646],"(",["T_VARIABLE","$indexed",646],"[",["T_VARIABLE","$key",646],"]",")",")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n                ",646],["T_CONTINUE","continue",647],";",["T_WHITESPACE","\n            ",647],"}",["T_WHITESPACE","\n\n            ",648],["T_VARIABLE","$output",650],"[","]",["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","merge",650],"(",["T_VARIABLE","$entity",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$indexed",650],"[",["T_VARIABLE","$key",650],"]",",",["T_WHITESPACE"," ",650],["T_VARIABLE","$options",650],")",";",["T_WHITESPACE","\n            ",650],["T_UNSET","unset",651],"(",["T_VARIABLE","$indexed",651],"[",["T_VARIABLE","$key",651],"]",")",";",["T_WHITESPACE","\n        ",651],"}",["T_WHITESPACE","\n\n        ",652],["T_VARIABLE","$maybeExistentQuery",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],"(",["T_NEW","new",654],["T_WHITESPACE"," ",654],["T_STRING","Collection",654],"(",["T_VARIABLE","$indexed",654],")",")",["T_WHITESPACE","\n            ",654],["T_OBJECT_OPERATOR","->",655],["T_STRING","map",655],"(",["T_FUNCTION","function",655],["T_WHITESPACE"," ",655],"(",["T_VARIABLE","$data",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$key",655],")",["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n                ",655],["T_RETURN","return",656],["T_WHITESPACE"," ",656],["T_STRING","explode",656],"(",["T_CONSTANT_ENCAPSED_STRING","';'",656],",",["T_WHITESPACE"," ",656],["T_VARIABLE","$key",656],")",";",["T_WHITESPACE","\n            ",656],"}",")",["T_WHITESPACE","\n            ",657],["T_OBJECT_OPERATOR","->",658],["T_STRING","filter",658],"(",["T_FUNCTION","function",658],["T_WHITESPACE"," ",658],"(",["T_VARIABLE","$keys",658],")",["T_WHITESPACE"," ",658],["T_USE","use",658],["T_WHITESPACE"," ",658],"(",["T_VARIABLE","$primary",658],")",["T_WHITESPACE"," ",658],"{",["T_WHITESPACE","\n                ",658],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_STRING","count",659],"(",["T_STRING","array_filter",659],"(",["T_VARIABLE","$keys",659],",",["T_WHITESPACE"," ",659],["T_CONSTANT_ENCAPSED_STRING","'strlen'",659],")",")",["T_WHITESPACE"," ",659],["T_IS_IDENTICAL","===",659],["T_WHITESPACE"," ",659],["T_STRING","count",659],"(",["T_VARIABLE","$primary",659],")",";",["T_WHITESPACE","\n            ",659],"}",")",["T_WHITESPACE","\n            ",660],["T_OBJECT_OPERATOR","->",661],["T_STRING","reduce",661],"(",["T_FUNCTION","function",661],["T_WHITESPACE"," ",661],"(",["T_VARIABLE","$query",661],",",["T_WHITESPACE"," ",661],["T_VARIABLE","$keys",661],")",["T_WHITESPACE"," ",661],["T_USE","use",661],["T_WHITESPACE"," ",661],"(",["T_VARIABLE","$primary",661],")",["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n                ",661],["T_VARIABLE","$fields",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_STRING","array_map",662],"(","[",["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","_table",662],",",["T_WHITESPACE"," ",662],["T_CONSTANT_ENCAPSED_STRING","'aliasField'",662],"]",",",["T_WHITESPACE"," ",662],["T_VARIABLE","$primary",662],")",";",["T_WHITESPACE","\n\n                ",662],["T_RETURN","return",664],["T_WHITESPACE"," ",664],["T_VARIABLE","$query",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","orWhere",664],"(",["T_VARIABLE","$query",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","newExpr",664],"(",")",["T_OBJECT_OPERATOR","->",664],["T_STRING","and_",664],"(",["T_STRING","array_combine",664],"(",["T_VARIABLE","$fields",664],",",["T_WHITESPACE"," ",664],["T_VARIABLE","$keys",664],")",")",")",";",["T_WHITESPACE","\n            ",664],"}",",",["T_WHITESPACE"," ",665],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","_table",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","find",665],"(",")",")",";",["T_WHITESPACE","\n\n        ",665],["T_IF","if",667],["T_WHITESPACE"," ",667],"(","!",["T_EMPTY","empty",667],"(",["T_VARIABLE","$indexed",667],")",["T_WHITESPACE"," ",667],["T_BOOLEAN_AND","&&",667],["T_WHITESPACE"," ",667],["T_STRING","count",667],"(",["T_VARIABLE","$maybeExistentQuery",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","clause",667],"(",["T_CONSTANT_ENCAPSED_STRING","'where'",667],")",")",")",["T_WHITESPACE"," ",667],"{",["T_WHITESPACE","\n            ",667],["T_FOREACH","foreach",668],["T_WHITESPACE"," ",668],"(",["T_VARIABLE","$maybeExistentQuery",668],["T_WHITESPACE"," ",668],["T_AS","as",668],["T_WHITESPACE"," ",668],["T_VARIABLE","$entity",668],")",["T_WHITESPACE"," ",668],"{",["T_WHITESPACE","\n                ",668],["T_VARIABLE","$key",669],["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],["T_STRING","implode",669],"(",["T_CONSTANT_ENCAPSED_STRING","';'",669],",",["T_WHITESPACE"," ",669],["T_VARIABLE","$entity",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","extract",669],"(",["T_VARIABLE","$primary",669],")",")",";",["T_WHITESPACE","\n                ",669],["T_IF","if",670],["T_WHITESPACE"," ",670],"(",["T_ISSET","isset",670],"(",["T_VARIABLE","$indexed",670],"[",["T_VARIABLE","$key",670],"]",")",")",["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n                    ",670],["T_VARIABLE","$output",671],"[","]",["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","merge",671],"(",["T_VARIABLE","$entity",671],",",["T_WHITESPACE"," ",671],["T_VARIABLE","$indexed",671],"[",["T_VARIABLE","$key",671],"]",",",["T_WHITESPACE"," ",671],["T_VARIABLE","$options",671],")",";",["T_WHITESPACE","\n                    ",671],["T_UNSET","unset",672],"(",["T_VARIABLE","$indexed",672],"[",["T_VARIABLE","$key",672],"]",")",";",["T_WHITESPACE","\n                ",672],"}",["T_WHITESPACE","\n            ",673],"}",["T_WHITESPACE","\n        ",674],"}",["T_WHITESPACE","\n\n        ",675],["T_FOREACH","foreach",677],["T_WHITESPACE"," ",677],"(","(",["T_NEW","new",677],["T_WHITESPACE"," ",677],["T_STRING","Collection",677],"(",["T_VARIABLE","$indexed",677],")",")",["T_OBJECT_OPERATOR","->",677],["T_STRING","append",677],"(",["T_VARIABLE","$new",677],")",["T_WHITESPACE"," ",677],["T_AS","as",677],["T_WHITESPACE"," ",677],["T_VARIABLE","$value",677],")",["T_WHITESPACE"," ",677],"{",["T_WHITESPACE","\n            ",677],["T_IF","if",678],["T_WHITESPACE"," ",678],"(","!",["T_STRING","is_array",678],"(",["T_VARIABLE","$value",678],")",")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n                ",678],["T_CONTINUE","continue",679],";",["T_WHITESPACE","\n            ",679],"}",["T_WHITESPACE","\n            ",680],["T_VARIABLE","$output",681],"[","]",["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_VARIABLE","$this",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","one",681],"(",["T_VARIABLE","$value",681],",",["T_WHITESPACE"," ",681],["T_VARIABLE","$options",681],")",";",["T_WHITESPACE","\n        ",681],"}",["T_WHITESPACE","\n\n        ",682],["T_RETURN","return",684],["T_WHITESPACE"," ",684],["T_VARIABLE","$output",684],";",["T_WHITESPACE","\n    ",684],"}",["T_WHITESPACE","\n\n    ",685],["T_DOC_COMMENT","\/**\n     * Creates a new sub-marshaller and merges the associated data.\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $original The original entity\n     * @param \\Cake\\ORM\\Association $assoc The association to merge\n     * @param array $value The data to hydrate\n     * @param array $options List of options.\n     * @return mixed\n     *\/",687],["T_WHITESPACE","\n    ",695],["T_PROTECTED","protected",696],["T_WHITESPACE"," ",696],["T_FUNCTION","function",696],["T_WHITESPACE"," ",696],["T_STRING","_mergeAssociation",696],"(",["T_VARIABLE","$original",696],",",["T_WHITESPACE"," ",696],["T_VARIABLE","$assoc",696],",",["T_WHITESPACE"," ",696],["T_VARIABLE","$value",696],",",["T_WHITESPACE"," ",696],["T_VARIABLE","$options",696],")",["T_WHITESPACE","\n    ",696],"{",["T_WHITESPACE","\n        ",697],["T_IF","if",698],["T_WHITESPACE"," ",698],"(","!",["T_VARIABLE","$original",698],")",["T_WHITESPACE"," ",698],"{",["T_WHITESPACE","\n            ",698],["T_RETURN","return",699],["T_WHITESPACE"," ",699],["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","_marshalAssociation",699],"(",["T_VARIABLE","$assoc",699],",",["T_WHITESPACE"," ",699],["T_VARIABLE","$value",699],",",["T_WHITESPACE"," ",699],["T_VARIABLE","$options",699],")",";",["T_WHITESPACE","\n        ",699],"}",["T_WHITESPACE","\n\n        ",700],["T_VARIABLE","$targetTable",702],["T_WHITESPACE"," ",702],"=",["T_WHITESPACE"," ",702],["T_VARIABLE","$assoc",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","target",702],"(",")",";",["T_WHITESPACE","\n        ",702],["T_VARIABLE","$marshaller",703],["T_WHITESPACE"," ",703],"=",["T_WHITESPACE"," ",703],["T_VARIABLE","$targetTable",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","marshaller",703],"(",")",";",["T_WHITESPACE","\n        ",703],["T_VARIABLE","$types",704],["T_WHITESPACE"," ",704],"=",["T_WHITESPACE"," ",704],"[",["T_STRING","Association",704],["T_DOUBLE_COLON","::",704],["T_STRING","ONE_TO_ONE",704],",",["T_WHITESPACE"," ",704],["T_STRING","Association",704],["T_DOUBLE_COLON","::",704],["T_STRING","MANY_TO_ONE",704],"]",";",["T_WHITESPACE","\n        ",704],["T_IF","if",705],["T_WHITESPACE"," ",705],"(",["T_STRING","in_array",705],"(",["T_VARIABLE","$assoc",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","type",705],"(",")",",",["T_WHITESPACE"," ",705],["T_VARIABLE","$types",705],")",")",["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n            ",705],["T_RETURN","return",706],["T_WHITESPACE"," ",706],["T_VARIABLE","$marshaller",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","merge",706],"(",["T_VARIABLE","$original",706],",",["T_WHITESPACE"," ",706],["T_VARIABLE","$value",706],",",["T_WHITESPACE"," ",706],["T_ARRAY_CAST","(array)",706],["T_VARIABLE","$options",706],")",";",["T_WHITESPACE","\n        ",706],"}",["T_WHITESPACE","\n        ",707],["T_IF","if",708],["T_WHITESPACE"," ",708],"(",["T_VARIABLE","$assoc",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","type",708],"(",")",["T_WHITESPACE"," ",708],["T_IS_IDENTICAL","===",708],["T_WHITESPACE"," ",708],["T_STRING","Association",708],["T_DOUBLE_COLON","::",708],["T_STRING","MANY_TO_MANY",708],")",["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n            ",708],["T_RETURN","return",709],["T_WHITESPACE"," ",709],["T_VARIABLE","$marshaller",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","_mergeBelongsToMany",709],"(",["T_VARIABLE","$original",709],",",["T_WHITESPACE"," ",709],["T_VARIABLE","$assoc",709],",",["T_WHITESPACE"," ",709],["T_VARIABLE","$value",709],",",["T_WHITESPACE"," ",709],["T_ARRAY_CAST","(array)",709],["T_VARIABLE","$options",709],")",";",["T_WHITESPACE","\n        ",709],"}",["T_WHITESPACE","\n\n        ",710],["T_RETURN","return",712],["T_WHITESPACE"," ",712],["T_VARIABLE","$marshaller",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","mergeMany",712],"(",["T_VARIABLE","$original",712],",",["T_WHITESPACE"," ",712],["T_VARIABLE","$value",712],",",["T_WHITESPACE"," ",712],["T_ARRAY_CAST","(array)",712],["T_VARIABLE","$options",712],")",";",["T_WHITESPACE","\n    ",712],"}",["T_WHITESPACE","\n\n    ",713],["T_DOC_COMMENT","\/**\n     * Creates a new sub-marshaller and merges the associated data for a BelongstoMany\n     * association.\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $original The original entity\n     * @param \\Cake\\ORM\\Association $assoc The association to marshall\n     * @param array $value The data to hydrate\n     * @param array $options List of options.\n     * @return array\n     *\/",715],["T_WHITESPACE","\n    ",724],["T_PROTECTED","protected",725],["T_WHITESPACE"," ",725],["T_FUNCTION","function",725],["T_WHITESPACE"," ",725],["T_STRING","_mergeBelongsToMany",725],"(",["T_VARIABLE","$original",725],",",["T_WHITESPACE"," ",725],["T_VARIABLE","$assoc",725],",",["T_WHITESPACE"," ",725],["T_VARIABLE","$value",725],",",["T_WHITESPACE"," ",725],["T_VARIABLE","$options",725],")",["T_WHITESPACE","\n    ",725],"{",["T_WHITESPACE","\n        ",726],["T_VARIABLE","$associated",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_ISSET","isset",727],"(",["T_VARIABLE","$options",727],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",727],"]",")",["T_WHITESPACE"," ",727],"?",["T_WHITESPACE"," ",727],["T_VARIABLE","$options",727],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",727],"]",["T_WHITESPACE"," ",727],":",["T_WHITESPACE"," ",727],"[","]",";",["T_WHITESPACE","\n\n        ",727],["T_VARIABLE","$hasIds",729],["T_WHITESPACE"," ",729],"=",["T_WHITESPACE"," ",729],["T_STRING","array_key_exists",729],"(",["T_CONSTANT_ENCAPSED_STRING","'_ids'",729],",",["T_WHITESPACE"," ",729],["T_VARIABLE","$value",729],")",";",["T_WHITESPACE","\n        ",729],["T_VARIABLE","$onlyIds",730],["T_WHITESPACE"," ",730],"=",["T_WHITESPACE"," ",730],["T_STRING","array_key_exists",730],"(",["T_CONSTANT_ENCAPSED_STRING","'onlyIds'",730],",",["T_WHITESPACE"," ",730],["T_VARIABLE","$options",730],")",["T_WHITESPACE"," ",730],["T_BOOLEAN_AND","&&",730],["T_WHITESPACE"," ",730],["T_VARIABLE","$options",730],"[",["T_CONSTANT_ENCAPSED_STRING","'onlyIds'",730],"]",";",["T_WHITESPACE","\n\n        ",730],["T_IF","if",732],["T_WHITESPACE"," ",732],"(",["T_VARIABLE","$hasIds",732],["T_WHITESPACE"," ",732],["T_BOOLEAN_AND","&&",732],["T_WHITESPACE"," ",732],["T_STRING","is_array",732],"(",["T_VARIABLE","$value",732],"[",["T_CONSTANT_ENCAPSED_STRING","'_ids'",732],"]",")",")",["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n            ",732],["T_RETURN","return",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","_loadAssociatedByIds",733],"(",["T_VARIABLE","$assoc",733],",",["T_WHITESPACE"," ",733],["T_VARIABLE","$value",733],"[",["T_CONSTANT_ENCAPSED_STRING","'_ids'",733],"]",")",";",["T_WHITESPACE","\n        ",733],"}",["T_WHITESPACE","\n        ",734],["T_IF","if",735],["T_WHITESPACE"," ",735],"(",["T_VARIABLE","$hasIds",735],["T_WHITESPACE"," ",735],["T_BOOLEAN_OR","||",735],["T_WHITESPACE"," ",735],["T_VARIABLE","$onlyIds",735],")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n            ",735],["T_RETURN","return",736],["T_WHITESPACE"," ",736],"[","]",";",["T_WHITESPACE","\n        ",736],"}",["T_WHITESPACE","\n\n        ",737],["T_IF","if",739],["T_WHITESPACE"," ",739],"(","!",["T_EMPTY","empty",739],"(",["T_VARIABLE","$associated",739],")",["T_WHITESPACE"," ",739],["T_BOOLEAN_AND","&&",739],["T_WHITESPACE"," ",739],"!",["T_STRING","in_array",739],"(",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",739],",",["T_WHITESPACE"," ",739],["T_VARIABLE","$associated",739],")",["T_WHITESPACE"," ",739],["T_BOOLEAN_AND","&&",739],["T_WHITESPACE"," ",739],"!",["T_ISSET","isset",739],"(",["T_VARIABLE","$associated",739],"[",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",739],"]",")",")",["T_WHITESPACE"," ",739],"{",["T_WHITESPACE","\n            ",739],["T_RETURN","return",740],["T_WHITESPACE"," ",740],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","mergeMany",740],"(",["T_VARIABLE","$original",740],",",["T_WHITESPACE"," ",740],["T_VARIABLE","$value",740],",",["T_WHITESPACE"," ",740],["T_VARIABLE","$options",740],")",";",["T_WHITESPACE","\n        ",740],"}",["T_WHITESPACE","\n\n        ",741],["T_RETURN","return",743],["T_WHITESPACE"," ",743],["T_VARIABLE","$this",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","_mergeJoinData",743],"(",["T_VARIABLE","$original",743],",",["T_WHITESPACE"," ",743],["T_VARIABLE","$assoc",743],",",["T_WHITESPACE"," ",743],["T_VARIABLE","$value",743],",",["T_WHITESPACE"," ",743],["T_VARIABLE","$options",743],")",";",["T_WHITESPACE","\n    ",743],"}",["T_WHITESPACE","\n\n    ",744],["T_DOC_COMMENT","\/**\n     * Merge the special _joinData property into the entity set.\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $original The original entity\n     * @param \\Cake\\ORM\\Association $assoc The association to marshall\n     * @param array $value The data to hydrate\n     * @param array $options List of options.\n     * @return array An array of entities\n     *\/",746],["T_WHITESPACE","\n    ",754],["T_PROTECTED","protected",755],["T_WHITESPACE"," ",755],["T_FUNCTION","function",755],["T_WHITESPACE"," ",755],["T_STRING","_mergeJoinData",755],"(",["T_VARIABLE","$original",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$assoc",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$value",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$options",755],")",["T_WHITESPACE","\n    ",755],"{",["T_WHITESPACE","\n        ",756],["T_VARIABLE","$associated",757],["T_WHITESPACE"," ",757],"=",["T_WHITESPACE"," ",757],["T_ISSET","isset",757],"(",["T_VARIABLE","$options",757],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",757],"]",")",["T_WHITESPACE"," ",757],"?",["T_WHITESPACE"," ",757],["T_VARIABLE","$options",757],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",757],"]",["T_WHITESPACE"," ",757],":",["T_WHITESPACE"," ",757],"[","]",";",["T_WHITESPACE","\n        ",757],["T_VARIABLE","$extra",758],["T_WHITESPACE"," ",758],"=",["T_WHITESPACE"," ",758],"[","]",";",["T_WHITESPACE","\n        ",758],["T_FOREACH","foreach",759],["T_WHITESPACE"," ",759],"(",["T_VARIABLE","$original",759],["T_WHITESPACE"," ",759],["T_AS","as",759],["T_WHITESPACE"," ",759],["T_VARIABLE","$entity",759],")",["T_WHITESPACE"," ",759],"{",["T_WHITESPACE","\n            ",759],["T_COMMENT","\/\/ Mark joinData as accessible so we can marshal it properly.\n",760],["T_WHITESPACE","            ",761],["T_VARIABLE","$entity",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","accessible",761],"(",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",761],",",["T_WHITESPACE"," ",761],["T_STRING","true",761],")",";",["T_WHITESPACE","\n\n            ",761],["T_VARIABLE","$joinData",763],["T_WHITESPACE"," ",763],"=",["T_WHITESPACE"," ",763],["T_VARIABLE","$entity",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","get",763],"(",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",763],")",";",["T_WHITESPACE","\n            ",763],["T_IF","if",764],["T_WHITESPACE"," ",764],"(",["T_VARIABLE","$joinData",764],["T_WHITESPACE"," ",764],["T_BOOLEAN_AND","&&",764],["T_WHITESPACE"," ",764],["T_VARIABLE","$joinData",764],["T_WHITESPACE"," ",764],["T_INSTANCEOF","instanceof",764],["T_WHITESPACE"," ",764],["T_STRING","EntityInterface",764],")",["T_WHITESPACE"," ",764],"{",["T_WHITESPACE","\n                ",764],["T_VARIABLE","$extra",765],"[",["T_STRING","spl_object_hash",765],"(",["T_VARIABLE","$entity",765],")","]",["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_VARIABLE","$joinData",765],";",["T_WHITESPACE","\n            ",765],"}",["T_WHITESPACE","\n        ",766],"}",["T_WHITESPACE","\n\n        ",767],["T_VARIABLE","$joint",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_VARIABLE","$assoc",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","junction",769],"(",")",";",["T_WHITESPACE","\n        ",769],["T_VARIABLE","$marshaller",770],["T_WHITESPACE"," ",770],"=",["T_WHITESPACE"," ",770],["T_VARIABLE","$joint",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","marshaller",770],"(",")",";",["T_WHITESPACE","\n\n        ",770],["T_VARIABLE","$nested",772],["T_WHITESPACE"," ",772],"=",["T_WHITESPACE"," ",772],"[","]",";",["T_WHITESPACE","\n        ",772],["T_IF","if",773],["T_WHITESPACE"," ",773],"(",["T_ISSET","isset",773],"(",["T_VARIABLE","$associated",773],"[",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",773],"]",")",")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n            ",773],["T_VARIABLE","$nested",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_ARRAY_CAST","(array)",774],["T_VARIABLE","$associated",774],"[",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",774],"]",";",["T_WHITESPACE","\n        ",774],"}",["T_WHITESPACE","\n\n        ",775],["T_VARIABLE","$options",777],"[",["T_CONSTANT_ENCAPSED_STRING","'accessibleFields'",777],"]",["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],"[",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",777],["T_WHITESPACE"," ",777],["T_DOUBLE_ARROW","=>",777],["T_WHITESPACE"," ",777],["T_STRING","true",777],"]",";",["T_WHITESPACE","\n\n        ",777],["T_VARIABLE","$records",779],["T_WHITESPACE"," ",779],"=",["T_WHITESPACE"," ",779],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","mergeMany",779],"(",["T_VARIABLE","$original",779],",",["T_WHITESPACE"," ",779],["T_VARIABLE","$value",779],",",["T_WHITESPACE"," ",779],["T_VARIABLE","$options",779],")",";",["T_WHITESPACE","\n        ",779],["T_FOREACH","foreach",780],["T_WHITESPACE"," ",780],"(",["T_VARIABLE","$records",780],["T_WHITESPACE"," ",780],["T_AS","as",780],["T_WHITESPACE"," ",780],["T_VARIABLE","$record",780],")",["T_WHITESPACE"," ",780],"{",["T_WHITESPACE","\n            ",780],["T_VARIABLE","$hash",781],["T_WHITESPACE"," ",781],"=",["T_WHITESPACE"," ",781],["T_STRING","spl_object_hash",781],"(",["T_VARIABLE","$record",781],")",";",["T_WHITESPACE","\n            ",781],["T_VARIABLE","$value",782],["T_WHITESPACE"," ",782],"=",["T_WHITESPACE"," ",782],["T_VARIABLE","$record",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","get",782],"(",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",782],")",";",["T_WHITESPACE","\n\n            ",782],["T_COMMENT","\/\/ Already an entity, no further marshalling required.\n",784],["T_WHITESPACE","            ",785],["T_IF","if",785],["T_WHITESPACE"," ",785],"(",["T_VARIABLE","$value",785],["T_WHITESPACE"," ",785],["T_INSTANCEOF","instanceof",785],["T_WHITESPACE"," ",785],["T_STRING","EntityInterface",785],")",["T_WHITESPACE"," ",785],"{",["T_WHITESPACE","\n                ",785],["T_CONTINUE","continue",786],";",["T_WHITESPACE","\n            ",786],"}",["T_WHITESPACE","\n\n            ",787],["T_COMMENT","\/\/ Scalar data can't be handled\n",789],["T_WHITESPACE","            ",790],["T_IF","if",790],["T_WHITESPACE"," ",790],"(","!",["T_STRING","is_array",790],"(",["T_VARIABLE","$value",790],")",")",["T_WHITESPACE"," ",790],"{",["T_WHITESPACE","\n                ",790],["T_VARIABLE","$record",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","unsetProperty",791],"(",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",791],")",";",["T_WHITESPACE","\n                ",791],["T_CONTINUE","continue",792],";",["T_WHITESPACE","\n            ",792],"}",["T_WHITESPACE","\n\n            ",793],["T_COMMENT","\/\/ Marshal data into the old object, or make a new joinData object.\n",795],["T_WHITESPACE","            ",796],["T_IF","if",796],["T_WHITESPACE"," ",796],"(",["T_ISSET","isset",796],"(",["T_VARIABLE","$extra",796],"[",["T_VARIABLE","$hash",796],"]",")",")",["T_WHITESPACE"," ",796],"{",["T_WHITESPACE","\n                ",796],["T_VARIABLE","$record",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","set",797],"(",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",797],",",["T_WHITESPACE"," ",797],["T_VARIABLE","$marshaller",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","merge",797],"(",["T_VARIABLE","$extra",797],"[",["T_VARIABLE","$hash",797],"]",",",["T_WHITESPACE"," ",797],["T_VARIABLE","$value",797],",",["T_WHITESPACE"," ",797],["T_VARIABLE","$nested",797],")",")",";",["T_WHITESPACE","\n            ",797],"}",["T_WHITESPACE"," ",798],["T_ELSEIF","elseif",798],["T_WHITESPACE"," ",798],"(",["T_STRING","is_array",798],"(",["T_VARIABLE","$value",798],")",")",["T_WHITESPACE"," ",798],"{",["T_WHITESPACE","\n                ",798],["T_VARIABLE","$joinData",799],["T_WHITESPACE"," ",799],"=",["T_WHITESPACE"," ",799],["T_VARIABLE","$marshaller",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","one",799],"(",["T_VARIABLE","$value",799],",",["T_WHITESPACE"," ",799],["T_VARIABLE","$nested",799],")",";",["T_WHITESPACE","\n                ",799],["T_VARIABLE","$record",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","set",800],"(",["T_CONSTANT_ENCAPSED_STRING","'_joinData'",800],",",["T_WHITESPACE"," ",800],["T_VARIABLE","$joinData",800],")",";",["T_WHITESPACE","\n            ",800],"}",["T_WHITESPACE","\n        ",801],"}",["T_WHITESPACE","\n\n        ",802],["T_RETURN","return",804],["T_WHITESPACE"," ",804],["T_VARIABLE","$records",804],";",["T_WHITESPACE","\n    ",804],"}",["T_WHITESPACE","\n",805],"}",["T_WHITESPACE","\n",806]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ORM",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Association",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Core",17],["T_NS_SEPARATOR","\\",17],["T_STRING","App",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Database",18],["T_NS_SEPARATOR","\\",18],["T_STRING","ExpressionInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Database",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Expression",19],["T_NS_SEPARATOR","\\",19],["T_STRING","IdentifierExpression",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Cake",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Datasource",20],["T_NS_SEPARATOR","\\",20],["T_STRING","EntityInterface",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Cake",21],["T_NS_SEPARATOR","\\",21],["T_STRING","ORM",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Association",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Cake",22],["T_NS_SEPARATOR","\\",22],["T_STRING","ORM",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Query",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Cake",23],["T_NS_SEPARATOR","\\",23],["T_STRING","ORM",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Table",23],";",["T_WHITESPACE","\n",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","Cake",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Utility",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Inflector",24],";",["T_WHITESPACE","\n",24],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","InvalidArgumentException",25],";",["T_WHITESPACE","\n",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","RuntimeException",26],";",["T_WHITESPACE","\n",26],["T_USE","use",27],["T_WHITESPACE"," ",27],["T_STRING","SplObjectStorage",27],";",["T_WHITESPACE","\n",27],["T_USE","use",28],["T_WHITESPACE"," ",28],["T_STRING","Traversable",28],";",["T_WHITESPACE","\n\n",28],["T_DOC_COMMENT","\/**\n * Represents an M - N relationship where there exists a junction - or join - table\n * that contains the association fields between the source and the target table.\n *\n * An example of a BelongsToMany association would be Article belongs to many Tags.\n *\/",30],["T_WHITESPACE","\n",35],["T_CLASS","class",36],["T_WHITESPACE"," ",36],["T_STRING","BelongsToMany",36],["T_WHITESPACE"," ",36],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Association",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n\n    ",37],["T_USE","use",39],["T_WHITESPACE"," ",39],["T_STRING","ExternalAssociationTrait",39],["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n        ",39],["T_STRING","_options",40],["T_WHITESPACE"," ",40],["T_AS","as",40],["T_WHITESPACE"," ",40],["T_STRING","_externalOptions",40],";",["T_WHITESPACE","\n        ",40],["T_STRING","_buildQuery",41],["T_WHITESPACE"," ",41],["T_AS","as",41],["T_WHITESPACE"," ",41],["T_STRING","_buildBaseQuery",41],";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Saving strategy that will only append to the links set\n     *\n     * @var string\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","SAVE_APPEND",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'append'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Saving strategy that will replace the links with the provided set\n     *\n     * @var string\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","SAVE_REPLACE",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'replace'",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * The type of join to be used when adding the association to a query\n     *\n     * @var string\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_joinType",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'INNER'",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * The strategy name to be used to fetch associated records.\n     *\n     * @var string\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_strategy",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","STRATEGY_SELECT",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Junction table instance\n     *\n     * @var \\Cake\\ORM\\Table\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_junctionTable",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Junction table name\n     *\n     * @var string\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_junctionTableName",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * The name of the hasMany association from the target table\n     * to the junction table\n     *\n     * @var string\n     *\/",86],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$_junctionAssociationName",92],";",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * The name of the property to be set containing data from the junction table\n     * once a record from the target table is hydrated\n     *\n     * @var string\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$_junctionProperty",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'_joinData'",100],";",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Saving strategy to be used by this association\n     *\n     * @var string\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$_saveStrategy",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","self",107],["T_DOUBLE_COLON","::",107],["T_STRING","SAVE_REPLACE",107],";",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * The name of the field representing the foreign key to the target table\n     *\n     * @var string|array\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$_targetForeignKey",114],";",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * The table instance for the junction relation.\n     *\n     * @var string|\\Cake\\ORM\\Table\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$_through",121],";",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Valid strategies for this type of association\n     *\n     * @var array\n     *\/",123],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$_validStrategies",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],"[",["T_STRING","self",128],["T_DOUBLE_COLON","::",128],["T_STRING","STRATEGY_SELECT",128],",",["T_WHITESPACE"," ",128],["T_STRING","self",128],["T_DOUBLE_COLON","::",128],["T_STRING","STRATEGY_SUBQUERY",128],"]",";",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Whether the records on the joint table should be removed when a record\n     * on the source table is deleted.\n     *\n     * Defaults to true for backwards compatibility.\n     *\n     * @var bool\n     *\/",130],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$_dependent",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","true",138],";",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Filtered conditions that reference the target table.\n     *\n     * @var null|array\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_PROTECTED","protected",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$_targetConditions",145],";",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Filtered conditions that reference the junction table.\n     *\n     * @var null|array\n     *\/",147],["T_WHITESPACE","\n    ",151],["T_PROTECTED","protected",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$_junctionConditions",152],";",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Sets the name of the field representing the foreign key to the target table.\n     * If no parameters are passed current field is returned\n     *\n     * @param string|null $key the key to be used to link both tables together\n     * @return string\n     *\/",154],["T_WHITESPACE","\n    ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","targetForeignKey",161],"(",["T_VARIABLE","$key",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","null",161],")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$key",163],["T_WHITESPACE"," ",163],["T_IS_IDENTICAL","===",163],["T_WHITESPACE"," ",163],["T_STRING","null",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_targetForeignKey",164],["T_WHITESPACE"," ",164],["T_IS_IDENTICAL","===",164],["T_WHITESPACE"," ",164],["T_STRING","null",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_targetForeignKey",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_modelKey",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","target",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","alias",165],"(",")",")",";",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE","\n\n            ",166],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_targetForeignKey",168],";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n\n        ",169],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_targetForeignKey",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$key",171],";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Sets the table instance for the junction relation. If no arguments\n     * are passed, the current configured table instance is returned\n     *\n     * @param string|\\Cake\\ORM\\Table|null $table Name or instance for the join table\n     * @return \\Cake\\ORM\\Table\n     *\/",174],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","junction",181],"(",["T_VARIABLE","$table",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","null",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$table",183],["T_WHITESPACE"," ",183],["T_IS_IDENTICAL","===",183],["T_WHITESPACE"," ",183],["T_STRING","null",183],["T_WHITESPACE"," ",183],["T_BOOLEAN_AND","&&",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_junctionTable",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_junctionTable",184],";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n\n        ",185],["T_VARIABLE","$tableLocator",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","tableLocator",187],"(",")",";",["T_WHITESPACE","\n        ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$table",188],["T_WHITESPACE"," ",188],["T_IS_IDENTICAL","===",188],["T_WHITESPACE"," ",188],["T_STRING","null",188],["T_WHITESPACE"," ",188],["T_BOOLEAN_AND","&&",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_through",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$table",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_through",189],";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE"," ",190],["T_ELSEIF","elseif",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$table",190],["T_WHITESPACE"," ",190],["T_IS_IDENTICAL","===",190],["T_WHITESPACE"," ",190],["T_STRING","null",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$tableName",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_junctionTableName",191],"(",")",";",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$tableAlias",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","Inflector",192],["T_DOUBLE_COLON","::",192],["T_STRING","camelize",192],"(",["T_VARIABLE","$tableName",192],")",";",["T_WHITESPACE","\n\n            ",192],["T_VARIABLE","$config",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],"[","]",";",["T_WHITESPACE","\n            ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(","!",["T_VARIABLE","$tableLocator",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","exists",195],"(",["T_VARIABLE","$tableAlias",195],")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$config",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$tableName",196],"]",";",["T_WHITESPACE","\n\n                ",196],["T_COMMENT","\/\/ Propagate the connection if we'll get an auto-model\n",198],["T_WHITESPACE","                ",199],["T_IF","if",199],["T_WHITESPACE"," ",199],"(","!",["T_STRING","App",199],["T_DOUBLE_COLON","::",199],["T_STRING","className",199],"(",["T_VARIABLE","$tableAlias",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'Model\/Table'",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'Table'",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                    ",199],["T_VARIABLE","$config",200],"[",["T_CONSTANT_ENCAPSED_STRING","'connection'",200],"]",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","source",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","connection",200],"(",")",";",["T_WHITESPACE","\n                ",200],"}",["T_WHITESPACE","\n            ",201],"}",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$table",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$tableLocator",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","get",203],"(",["T_VARIABLE","$tableAlias",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$config",203],")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n\n        ",204],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_STRING","is_string",206],"(",["T_VARIABLE","$table",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$table",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$tableLocator",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","get",207],"(",["T_VARIABLE","$table",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$source",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","source",209],"(",")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$target",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","target",210],"(",")",";",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_generateSourceAssociations",212],"(",["T_VARIABLE","$table",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$source",212],")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_generateTargetAssociations",213],"(",["T_VARIABLE","$table",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$source",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$target",213],")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_generateJunctionAssociations",214],"(",["T_VARIABLE","$table",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$source",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$target",214],")",";",["T_WHITESPACE","\n\n        ",214],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_junctionTable",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$table",216],";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Generate reciprocal associations as necessary.\n     *\n     * Generates the following associations:\n     *\n     * - target hasMany junction e.g. Articles hasMany ArticlesTags\n     * - target belongsToMany source e.g Articles belongsToMany Tags.\n     *\n     * You can override these generated associations by defining associations\n     * with the correct aliases.\n     *\n     * @param \\Cake\\ORM\\Table $junction The junction table.\n     * @param \\Cake\\ORM\\Table $source The source table.\n     * @param \\Cake\\ORM\\Table $target The target table.\n     * @return void\n     *\/",219],["T_WHITESPACE","\n    ",234],["T_PROTECTED","protected",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","_generateTargetAssociations",235],"(",["T_VARIABLE","$junction",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$source",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$target",235],")",["T_WHITESPACE","\n    ",235],"{",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$junctionAlias",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$junction",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","alias",237],"(",")",";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$sAlias",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$source",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","alias",238],"(",")",";",["T_WHITESPACE","\n\n        ",238],["T_IF","if",240],["T_WHITESPACE"," ",240],"(","!",["T_VARIABLE","$target",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","association",240],"(",["T_VARIABLE","$junctionAlias",240],")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$target",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","hasMany",241],"(",["T_VARIABLE","$junctionAlias",241],",",["T_WHITESPACE"," ",241],"[",["T_WHITESPACE","\n                ",241],["T_CONSTANT_ENCAPSED_STRING","'targetTable'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$junction",242],",",["T_WHITESPACE","\n                ",242],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","targetForeignKey",243],"(",")",",",["T_WHITESPACE","\n                ",243],["T_CONSTANT_ENCAPSED_STRING","'strategy'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_strategy",244],",",["T_WHITESPACE","\n            ",244],"]",")",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n        ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(","!",["T_VARIABLE","$target",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","association",247],"(",["T_VARIABLE","$sAlias",247],")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$target",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","belongsToMany",248],"(",["T_VARIABLE","$sAlias",248],",",["T_WHITESPACE"," ",248],"[",["T_WHITESPACE","\n                ",248],["T_CONSTANT_ENCAPSED_STRING","'sourceTable'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$target",249],",",["T_WHITESPACE","\n                ",249],["T_CONSTANT_ENCAPSED_STRING","'targetTable'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$source",250],",",["T_WHITESPACE","\n                ",250],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","targetForeignKey",251],"(",")",",",["T_WHITESPACE","\n                ",251],["T_CONSTANT_ENCAPSED_STRING","'targetForeignKey'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","foreignKey",252],"(",")",",",["T_WHITESPACE","\n                ",252],["T_CONSTANT_ENCAPSED_STRING","'through'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$junction",253],",",["T_WHITESPACE","\n                ",253],["T_CONSTANT_ENCAPSED_STRING","'conditions'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","conditions",254],"(",")",",",["T_WHITESPACE","\n                ",254],["T_CONSTANT_ENCAPSED_STRING","'strategy'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_strategy",255],",",["T_WHITESPACE","\n            ",255],"]",")",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Generate additional source table associations as necessary.\n     *\n     * Generates the following associations:\n     *\n     * - source hasMany junction e.g. Tags hasMany ArticlesTags\n     *\n     * You can override these generated associations by defining associations\n     * with the correct aliases.\n     *\n     * @param \\Cake\\ORM\\Table $junction The junction table.\n     * @param \\Cake\\ORM\\Table $source The source table.\n     * @return void\n     *\/",260],["T_WHITESPACE","\n    ",273],["T_PROTECTED","protected",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","_generateSourceAssociations",274],"(",["T_VARIABLE","$junction",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$source",274],")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$junctionAlias",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$junction",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","alias",276],"(",")",";",["T_WHITESPACE","\n        ",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(","!",["T_VARIABLE","$source",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","association",277],"(",["T_VARIABLE","$junctionAlias",277],")",")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$source",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","hasMany",278],"(",["T_VARIABLE","$junctionAlias",278],",",["T_WHITESPACE"," ",278],"[",["T_WHITESPACE","\n                ",278],["T_CONSTANT_ENCAPSED_STRING","'targetTable'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$junction",279],",",["T_WHITESPACE","\n                ",279],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","foreignKey",280],"(",")",",",["T_WHITESPACE","\n                ",280],["T_CONSTANT_ENCAPSED_STRING","'strategy'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_strategy",281],",",["T_WHITESPACE","\n            ",281],"]",")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Generate associations on the junction table as necessary\n     *\n     * Generates the following associations:\n     *\n     * - junction belongsTo source e.g. ArticlesTags belongsTo Tags\n     * - junction belongsTo target e.g. ArticlesTags belongsTo Articles\n     *\n     * You can override these generated associations by defining associations\n     * with the correct aliases.\n     *\n     * @param \\Cake\\ORM\\Table $junction The junction table.\n     * @param \\Cake\\ORM\\Table $source The source table.\n     * @param \\Cake\\ORM\\Table $target The target table.\n     * @return void\n     *\/",286],["T_WHITESPACE","\n    ",301],["T_PROTECTED","protected",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","_generateJunctionAssociations",302],"(",["T_VARIABLE","$junction",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$source",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$target",302],")",["T_WHITESPACE","\n    ",302],"{",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$tAlias",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$target",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","alias",304],"(",")",";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$sAlias",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$source",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","alias",305],"(",")",";",["T_WHITESPACE","\n\n        ",305],["T_IF","if",307],["T_WHITESPACE"," ",307],"(","!",["T_VARIABLE","$junction",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","association",307],"(",["T_VARIABLE","$tAlias",307],")",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$junction",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","belongsTo",308],"(",["T_VARIABLE","$tAlias",308],",",["T_WHITESPACE"," ",308],"[",["T_WHITESPACE","\n                ",308],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","targetForeignKey",309],"(",")",",",["T_WHITESPACE","\n                ",309],["T_CONSTANT_ENCAPSED_STRING","'targetTable'",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$target",310],["T_WHITESPACE","\n            ",310],"]",")",";",["T_WHITESPACE","\n        ",311],"}",["T_WHITESPACE","\n        ",312],["T_IF","if",313],["T_WHITESPACE"," ",313],"(","!",["T_VARIABLE","$junction",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","association",313],"(",["T_VARIABLE","$sAlias",313],")",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$junction",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","belongsTo",314],"(",["T_VARIABLE","$sAlias",314],",",["T_WHITESPACE"," ",314],"[",["T_WHITESPACE","\n                ",314],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","foreignKey",315],"(",")",",",["T_WHITESPACE","\n                ",315],["T_CONSTANT_ENCAPSED_STRING","'targetTable'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$source",316],["T_WHITESPACE","\n            ",316],"]",")",";",["T_WHITESPACE","\n        ",317],"}",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_DOC_COMMENT","\/**\n     * Alters a Query object to include the associated target table data in the final\n     * result\n     *\n     * The options array accept the following keys:\n     *\n     * - includeFields: Whether to include target model fields in the result or not\n     * - foreignKey: The name of the field to use as foreign key, if false none\n     *   will be used\n     * - conditions: array with a list of conditions to filter the join with\n     * - fields: a list of fields in the target table to include in the result\n     * - type: The type of join to be used (e.g. INNER)\n     *\n     * @param \\Cake\\ORM\\Query $query the query to be altered to include the target table data\n     * @param array $options Any extra options or overrides to be taken in account\n     * @return void\n     *\/",321],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","attachTo",338],"(",["T_STRING","Query",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$query",338],",",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$options",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],"[","]",")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_IF","if",340],["T_WHITESPACE"," ",340],"(","!",["T_EMPTY","empty",340],"(",["T_VARIABLE","$options",340],"[",["T_CONSTANT_ENCAPSED_STRING","'negateMatch'",340],"]",")",")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_appendNotMatching",341],"(",["T_VARIABLE","$query",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$options",341],")",";",["T_WHITESPACE","\n\n            ",341],["T_RETURN","return",343],";",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n\n        ",344],["T_VARIABLE","$junction",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","junction",346],"(",")",";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$belongsTo",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$junction",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","association",347],"(",["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","source",347],"(",")",["T_OBJECT_OPERATOR","->",347],["T_STRING","alias",347],"(",")",")",";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$cond",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$belongsTo",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_joinCondition",348],"(","[",["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",348],["T_WHITESPACE"," ",348],["T_DOUBLE_ARROW","=>",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$belongsTo",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","foreignKey",348],"(",")","]",")",";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$cond",349],["T_WHITESPACE"," ",349],["T_PLUS_EQUAL","+=",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","junctionConditions",349],"(",")",";",["T_WHITESPACE","\n\n        ",349],["T_IF","if",351],["T_WHITESPACE"," ",351],"(",["T_ISSET","isset",351],"(",["T_VARIABLE","$options",351],"[",["T_CONSTANT_ENCAPSED_STRING","'includeFields'",351],"]",")",")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$includeFields",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$options",352],"[",["T_CONSTANT_ENCAPSED_STRING","'includeFields'",352],"]",";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n\n        ",353],["T_COMMENT","\/\/ Attach the junction table as well we need it to populate _joinData.\n",355],["T_WHITESPACE","        ",356],["T_VARIABLE","$assoc",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_targetTable",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","association",356],"(",["T_VARIABLE","$junction",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","alias",356],"(",")",")",";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$newOptions",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_STRING","array_intersect_key",357],"(",["T_VARIABLE","$options",357],",",["T_WHITESPACE"," ",357],"[",["T_CONSTANT_ENCAPSED_STRING","'joinType'",357],["T_WHITESPACE"," ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_LNUMBER","1",357],",",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'fields'",357],["T_WHITESPACE"," ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_LNUMBER","1",357],"]",")",";",["T_WHITESPACE","\n        ",357],["T_VARIABLE","$newOptions",358],["T_WHITESPACE"," ",358],["T_PLUS_EQUAL","+=",358],["T_WHITESPACE"," ",358],"[",["T_WHITESPACE","\n            ",358],["T_CONSTANT_ENCAPSED_STRING","'conditions'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$cond",359],",",["T_WHITESPACE","\n            ",359],["T_CONSTANT_ENCAPSED_STRING","'includeFields'",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$includeFields",360],",",["T_WHITESPACE","\n            ",360],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_STRING","false",361],",",["T_WHITESPACE","\n        ",361],"]",";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$assoc",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","attachTo",363],"(",["T_VARIABLE","$query",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$newOptions",363],")",";",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$query",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","eagerLoader",364],"(",")",["T_OBJECT_OPERATOR","->",364],["T_STRING","addToJoinsMap",364],"(",["T_VARIABLE","$junction",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","alias",364],"(",")",",",["T_WHITESPACE"," ",364],["T_VARIABLE","$assoc",364],",",["T_WHITESPACE"," ",364],["T_STRING","true",364],")",";",["T_WHITESPACE","\n\n        ",364],["T_STRING","parent",366],["T_DOUBLE_COLON","::",366],["T_STRING","attachTo",366],"(",["T_VARIABLE","$query",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$options",366],")",";",["T_WHITESPACE","\n\n        ",366],["T_VARIABLE","$foreignKey",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","targetForeignKey",368],"(",")",";",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$thisJoin",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$query",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","clause",369],"(",["T_CONSTANT_ENCAPSED_STRING","'join'",369],")","[",["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","name",369],"(",")","]",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$thisJoin",370],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",370],"]",["T_OBJECT_OPERATOR","->",370],["T_STRING","add",370],"(",["T_VARIABLE","$assoc",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_joinCondition",370],"(","[",["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$foreignKey",370],"]",")",")",";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * {@inheritDoc}\n     *\/",373],["T_WHITESPACE","\n    ",375],["T_PROTECTED","protected",376],["T_WHITESPACE"," ",376],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","_appendNotMatching",376],"(",["T_VARIABLE","$query",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$options",376],")",["T_WHITESPACE","\n    ",376],"{",["T_WHITESPACE","\n        ",377],["T_IF","if",378],["T_WHITESPACE"," ",378],"(",["T_EMPTY","empty",378],"(",["T_VARIABLE","$options",378],"[",["T_CONSTANT_ENCAPSED_STRING","'negateMatch'",378],"]",")",")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n            ",378],["T_RETURN","return",379],";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n        ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(","!",["T_ISSET","isset",381],"(",["T_VARIABLE","$options",381],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",381],"]",")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_VARIABLE","$options",382],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",382],"]",["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],"[","]",";",["T_WHITESPACE","\n        ",382],"}",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$junction",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","junction",384],"(",")",";",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$belongsTo",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$junction",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","association",385],"(",["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","source",385],"(",")",["T_OBJECT_OPERATOR","->",385],["T_STRING","alias",385],"(",")",")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$conds",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$belongsTo",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_joinCondition",386],"(","[",["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$belongsTo",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","foreignKey",386],"(",")","]",")",";",["T_WHITESPACE","\n\n        ",386],["T_VARIABLE","$subquery",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","find",388],"(",")",["T_WHITESPACE","\n            ",388],["T_OBJECT_OPERATOR","->",389],["T_STRING","select",389],"(",["T_STRING","array_values",389],"(",["T_VARIABLE","$conds",389],")",")",["T_WHITESPACE","\n            ",389],["T_OBJECT_OPERATOR","->",390],["T_STRING","where",390],"(",["T_VARIABLE","$options",390],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",390],"]",")",["T_WHITESPACE","\n            ",390],["T_OBJECT_OPERATOR","->",391],["T_STRING","andWhere",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","junctionConditions",391],"(",")",")",";",["T_WHITESPACE","\n\n        ",391],["T_IF","if",393],["T_WHITESPACE"," ",393],"(","!",["T_EMPTY","empty",393],"(",["T_VARIABLE","$options",393],"[",["T_CONSTANT_ENCAPSED_STRING","'queryBuilder'",393],"]",")",")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$subquery",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$options",394],"[",["T_CONSTANT_ENCAPSED_STRING","'queryBuilder'",394],"]","(",["T_VARIABLE","$subquery",394],")",";",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE","\n\n        ",395],["T_VARIABLE","$assoc",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$junction",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","association",397],"(",["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","target",397],"(",")",["T_OBJECT_OPERATOR","->",397],["T_STRING","alias",397],"(",")",")",";",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$conditions",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$assoc",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","_joinCondition",398],"(","[",["T_WHITESPACE","\n            ",398],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","targetForeignKey",399],"(",")",["T_WHITESPACE","\n        ",399],"]",")",";",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$subquery",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_appendJunctionJoin",401],"(",["T_VARIABLE","$subquery",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$conditions",401],")",";",["T_WHITESPACE","\n\n        ",401],["T_VARIABLE","$query",403],["T_WHITESPACE","\n            ",403],["T_OBJECT_OPERATOR","->",404],["T_STRING","andWhere",404],"(",["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$exp",404],")",["T_WHITESPACE"," ",404],["T_USE","use",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$subquery",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$conds",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n                ",404],["T_VARIABLE","$identifiers",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],"[","]",";",["T_WHITESPACE","\n                ",405],["T_FOREACH","foreach",406],["T_WHITESPACE"," ",406],"(",["T_STRING","array_keys",406],"(",["T_VARIABLE","$conds",406],")",["T_WHITESPACE"," ",406],["T_AS","as",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$field",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n                    ",406],["T_VARIABLE","$identifiers",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_NEW","new",407],["T_WHITESPACE"," ",407],["T_STRING","IdentifierExpression",407],"(",["T_VARIABLE","$field",407],")",";",["T_WHITESPACE","\n                ",407],"}",["T_WHITESPACE","\n                ",408],["T_VARIABLE","$identifiers",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$subquery",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","newExpr",409],"(",")",["T_OBJECT_OPERATOR","->",409],["T_STRING","add",409],"(",["T_VARIABLE","$identifiers",409],")",["T_OBJECT_OPERATOR","->",409],["T_STRING","tieWith",409],"(",["T_CONSTANT_ENCAPSED_STRING","','",409],")",";",["T_WHITESPACE","\n                ",409],["T_VARIABLE","$nullExp",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_CLONE","clone",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$exp",410],";",["T_WHITESPACE","\n\n                ",410],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$exp",412],["T_WHITESPACE","\n                    ",412],["T_OBJECT_OPERATOR","->",413],["T_STRING","or_",413],"(","[",["T_WHITESPACE","\n                        ",413],["T_VARIABLE","$exp",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","notIn",414],"(",["T_VARIABLE","$identifiers",414],",",["T_WHITESPACE"," ",414],["T_VARIABLE","$subquery",414],")",",",["T_WHITESPACE","\n                        ",414],["T_VARIABLE","$nullExp",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","and",415],"(",["T_STRING","array_map",415],"(","[",["T_VARIABLE","$nullExp",415],",",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'isNull'",415],"]",",",["T_WHITESPACE"," ",415],["T_STRING","array_keys",415],"(",["T_VARIABLE","$conds",415],")",")",")",",",["T_WHITESPACE","\n                    ",415],"]",")",";",["T_WHITESPACE","\n            ",416],"}",")",";",["T_WHITESPACE","\n    ",417],"}",["T_WHITESPACE","\n\n    ",418],["T_DOC_COMMENT","\/**\n     * Get the relationship type.\n     *\n     * @return string\n     *\/",420],["T_WHITESPACE","\n    ",424],["T_PUBLIC","public",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","type",425],"(",")",["T_WHITESPACE","\n    ",425],"{",["T_WHITESPACE","\n        ",426],["T_RETURN","return",427],["T_WHITESPACE"," ",427],["T_STRING","self",427],["T_DOUBLE_COLON","::",427],["T_STRING","MANY_TO_MANY",427],";",["T_WHITESPACE","\n    ",427],"}",["T_WHITESPACE","\n\n    ",428],["T_DOC_COMMENT","\/**\n     * Return false as join conditions are defined in the junction table\n     *\n     * @param array $options list of options passed to attachTo method\n     * @return bool false\n     *\/",430],["T_WHITESPACE","\n    ",435],["T_PROTECTED","protected",436],["T_WHITESPACE"," ",436],["T_FUNCTION","function",436],["T_WHITESPACE"," ",436],["T_STRING","_joinCondition",436],"(",["T_VARIABLE","$options",436],")",["T_WHITESPACE","\n    ",436],"{",["T_WHITESPACE","\n        ",437],["T_RETURN","return",438],["T_WHITESPACE"," ",438],["T_STRING","false",438],";",["T_WHITESPACE","\n    ",438],"}",["T_WHITESPACE","\n\n    ",439],["T_DOC_COMMENT","\/**\n     * Builds an array containing the results from fetchQuery indexed by\n     * the foreignKey value corresponding to this association.\n     *\n     * @param \\Cake\\ORM\\Query $fetchQuery The query to get results from\n     * @param array $options The options passed to the eager loader\n     * @return array\n     * @throws \\RuntimeException when the association property is not part of the results set.\n     *\/",441],["T_WHITESPACE","\n    ",449],["T_PROTECTED","protected",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","_buildResultMap",450],"(",["T_VARIABLE","$fetchQuery",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$options",450],")",["T_WHITESPACE","\n    ",450],"{",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$resultMap",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],"[","]",";",["T_WHITESPACE","\n        ",452],["T_VARIABLE","$key",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_ARRAY_CAST","(array)",453],["T_VARIABLE","$options",453],"[",["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",453],"]",";",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$hydrated",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$fetchQuery",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","hydrate",454],"(",")",";",["T_WHITESPACE","\n\n        ",454],["T_FOREACH","foreach",456],["T_WHITESPACE"," ",456],"(",["T_VARIABLE","$fetchQuery",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","all",456],"(",")",["T_WHITESPACE"," ",456],["T_AS","as",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$result",456],")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n            ",456],["T_IF","if",457],["T_WHITESPACE"," ",457],"(","!",["T_ISSET","isset",457],"(",["T_VARIABLE","$result",457],"[",["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","_junctionProperty",457],"]",")",")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n                ",457],["T_THROW","throw",458],["T_WHITESPACE"," ",458],["T_NEW","new",458],["T_WHITESPACE"," ",458],["T_STRING","RuntimeException",458],"(",["T_STRING","sprintf",458],"(",["T_WHITESPACE","\n                    ",458],["T_CONSTANT_ENCAPSED_STRING","'\"%s\" is missing from the belongsToMany results. Results cannot be created.'",459],",",["T_WHITESPACE","\n                    ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","_junctionProperty",460],["T_WHITESPACE","\n                ",460],")",")",";",["T_WHITESPACE","\n            ",461],"}",["T_WHITESPACE","\n\n            ",462],["T_VARIABLE","$values",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],"[","]",";",["T_WHITESPACE","\n            ",464],["T_FOREACH","foreach",465],["T_WHITESPACE"," ",465],"(",["T_VARIABLE","$key",465],["T_WHITESPACE"," ",465],["T_AS","as",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$k",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n                ",465],["T_VARIABLE","$values",466],"[","]",["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$result",466],"[",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_junctionProperty",466],"]","[",["T_VARIABLE","$k",466],"]",";",["T_WHITESPACE","\n            ",466],"}",["T_WHITESPACE","\n            ",467],["T_VARIABLE","$resultMap",468],"[",["T_STRING","implode",468],"(",["T_CONSTANT_ENCAPSED_STRING","';'",468],",",["T_WHITESPACE"," ",468],["T_VARIABLE","$values",468],")","]","[","]",["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_VARIABLE","$result",468],";",["T_WHITESPACE","\n        ",468],"}",["T_WHITESPACE","\n\n        ",469],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$resultMap",471],";",["T_WHITESPACE","\n    ",471],"}",["T_WHITESPACE","\n\n    ",472],["T_DOC_COMMENT","\/**\n     * Clear out the data in the junction table for a given entity.\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $entity The entity that started the cascading delete.\n     * @param array $options The options for the original delete.\n     * @return bool Success.\n     *\/",474],["T_WHITESPACE","\n    ",480],["T_PUBLIC","public",481],["T_WHITESPACE"," ",481],["T_FUNCTION","function",481],["T_WHITESPACE"," ",481],["T_STRING","cascadeDelete",481],"(",["T_STRING","EntityInterface",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$entity",481],",",["T_WHITESPACE"," ",481],["T_ARRAY","array",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$options",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],"[","]",")",["T_WHITESPACE","\n    ",481],"{",["T_WHITESPACE","\n        ",482],["T_IF","if",483],["T_WHITESPACE"," ",483],"(","!",["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","dependent",483],"(",")",")",["T_WHITESPACE"," ",483],"{",["T_WHITESPACE","\n            ",483],["T_RETURN","return",484],["T_WHITESPACE"," ",484],["T_STRING","true",484],";",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$foreignKey",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_ARRAY_CAST","(array)",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","foreignKey",486],"(",")",";",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$bindingKey",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_ARRAY_CAST","(array)",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","bindingKey",487],"(",")",";",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$conditions",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],"[","]",";",["T_WHITESPACE","\n\n        ",488],["T_IF","if",490],["T_WHITESPACE"," ",490],"(","!",["T_EMPTY","empty",490],"(",["T_VARIABLE","$bindingKey",490],")",")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n            ",490],["T_VARIABLE","$conditions",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_STRING","array_combine",491],"(",["T_VARIABLE","$foreignKey",491],",",["T_WHITESPACE"," ",491],["T_VARIABLE","$entity",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","extract",491],"(",["T_VARIABLE","$bindingKey",491],")",")",";",["T_WHITESPACE","\n        ",491],"}",["T_WHITESPACE","\n\n        ",492],["T_VARIABLE","$table",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","junction",494],"(",")",";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$hasMany",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","source",495],"(",")",["T_OBJECT_OPERATOR","->",495],["T_STRING","association",495],"(",["T_VARIABLE","$table",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","alias",495],"(",")",")",";",["T_WHITESPACE","\n        ",495],["T_IF","if",496],["T_WHITESPACE"," ",496],"(",["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","_cascadeCallbacks",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n            ",496],["T_FOREACH","foreach",497],["T_WHITESPACE"," ",497],"(",["T_VARIABLE","$hasMany",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","find",497],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",497],")",["T_OBJECT_OPERATOR","->",497],["T_STRING","where",497],"(",["T_VARIABLE","$conditions",497],")",["T_OBJECT_OPERATOR","->",497],["T_STRING","toList",497],"(",")",["T_WHITESPACE"," ",497],["T_AS","as",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$related",497],")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n                ",497],["T_VARIABLE","$table",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","delete",498],"(",["T_VARIABLE","$related",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$options",498],")",";",["T_WHITESPACE","\n            ",498],"}",["T_WHITESPACE","\n\n            ",499],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_STRING","true",501],";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n\n        ",502],["T_VARIABLE","$conditions",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_STRING","array_merge",504],"(",["T_VARIABLE","$conditions",504],",",["T_WHITESPACE"," ",504],["T_VARIABLE","$hasMany",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","conditions",504],"(",")",")",";",["T_WHITESPACE","\n\n        ",504],["T_RETURN","return",506],["T_WHITESPACE"," ",506],["T_VARIABLE","$table",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","deleteAll",506],"(",["T_VARIABLE","$conditions",506],")",";",["T_WHITESPACE","\n    ",506],"}",["T_WHITESPACE","\n\n    ",507],["T_DOC_COMMENT","\/**\n     * Returns boolean true, as both of the tables 'own' rows in the other side\n     * of the association via the joint table.\n     *\n     * @param \\Cake\\ORM\\Table $side The potential Table with ownership\n     * @return bool\n     *\/",509],["T_WHITESPACE","\n    ",515],["T_PUBLIC","public",516],["T_WHITESPACE"," ",516],["T_FUNCTION","function",516],["T_WHITESPACE"," ",516],["T_STRING","isOwningSide",516],"(",["T_STRING","Table",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$side",516],")",["T_WHITESPACE","\n    ",516],"{",["T_WHITESPACE","\n        ",517],["T_RETURN","return",518],["T_WHITESPACE"," ",518],["T_STRING","true",518],";",["T_WHITESPACE","\n    ",518],"}",["T_WHITESPACE","\n\n    ",519],["T_DOC_COMMENT","\/**\n     * Sets the strategy that should be used for saving. If called with no\n     * arguments, it will return the currently configured strategy\n     *\n     * @param string|null $strategy the strategy name to be used\n     * @throws \\InvalidArgumentException if an invalid strategy name is passed\n     * @return string the strategy to be used for saving\n     *\/",521],["T_WHITESPACE","\n    ",528],["T_PUBLIC","public",529],["T_WHITESPACE"," ",529],["T_FUNCTION","function",529],["T_WHITESPACE"," ",529],["T_STRING","saveStrategy",529],"(",["T_VARIABLE","$strategy",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_STRING","null",529],")",["T_WHITESPACE","\n    ",529],"{",["T_WHITESPACE","\n        ",530],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_VARIABLE","$strategy",531],["T_WHITESPACE"," ",531],["T_IS_IDENTICAL","===",531],["T_WHITESPACE"," ",531],["T_STRING","null",531],")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_RETURN","return",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_saveStrategy",532],";",["T_WHITESPACE","\n        ",532],"}",["T_WHITESPACE","\n        ",533],["T_IF","if",534],["T_WHITESPACE"," ",534],"(","!",["T_STRING","in_array",534],"(",["T_VARIABLE","$strategy",534],",",["T_WHITESPACE"," ",534],"[",["T_STRING","self",534],["T_DOUBLE_COLON","::",534],["T_STRING","SAVE_APPEND",534],",",["T_WHITESPACE"," ",534],["T_STRING","self",534],["T_DOUBLE_COLON","::",534],["T_STRING","SAVE_REPLACE",534],"]",")",")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n            ",534],["T_VARIABLE","$msg",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_STRING","sprintf",535],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid save strategy \"%s\"'",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$strategy",535],")",";",["T_WHITESPACE","\n            ",535],["T_THROW","throw",536],["T_WHITESPACE"," ",536],["T_NEW","new",536],["T_WHITESPACE"," ",536],["T_STRING","InvalidArgumentException",536],"(",["T_VARIABLE","$msg",536],")",";",["T_WHITESPACE","\n        ",536],"}",["T_WHITESPACE","\n\n        ",537],["T_RETURN","return",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","_saveStrategy",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_VARIABLE","$strategy",539],";",["T_WHITESPACE","\n    ",539],"}",["T_WHITESPACE","\n\n    ",540],["T_DOC_COMMENT","\/**\n     * Takes an entity from the source table and looks if there is a field\n     * matching the property name for this association. The found entity will be\n     * saved on the target table for this association by passing supplied\n     * `$options`\n     *\n     * When using the 'append' strategy, this function will only create new links\n     * between each side of this association. It will not destroy existing ones even\n     * though they may not be present in the array of entities to be saved.\n     *\n     * When using the 'replace' strategy, existing links will be removed and new links\n     * will be created in the joint table. If there exists links in the database to some\n     * of the entities intended to be saved by this method, they will be updated,\n     * not deleted.\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $entity an entity from the source table\n     * @param array|\\ArrayObject $options options to be passed to the save method in\n     * the target table\n     * @throws \\InvalidArgumentException if the property representing the association\n     * in the parent entity cannot be traversed\n     * @return bool|\\Cake\\Datasource\\EntityInterface false if $entity could not be saved, otherwise it returns\n     * the saved entity\n     * @see \\Cake\\ORM\\Table::save()\n     * @see \\Cake\\ORM\\Association\\BelongsToMany::replaceLinks()\n     *\/",542],["T_WHITESPACE","\n    ",566],["T_PUBLIC","public",567],["T_WHITESPACE"," ",567],["T_FUNCTION","function",567],["T_WHITESPACE"," ",567],["T_STRING","saveAssociated",567],"(",["T_STRING","EntityInterface",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$entity",567],",",["T_WHITESPACE"," ",567],["T_ARRAY","array",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$options",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],"[","]",")",["T_WHITESPACE","\n    ",567],"{",["T_WHITESPACE","\n        ",568],["T_VARIABLE","$targetEntity",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$entity",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","get",569],"(",["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","property",569],"(",")",")",";",["T_WHITESPACE","\n        ",569],["T_VARIABLE","$strategy",570],["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","saveStrategy",570],"(",")",";",["T_WHITESPACE","\n\n        ",570],["T_VARIABLE","$isEmpty",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_STRING","in_array",572],"(",["T_VARIABLE","$targetEntity",572],",",["T_WHITESPACE"," ",572],"[",["T_STRING","null",572],",",["T_WHITESPACE"," ",572],"[","]",",",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","''",572],",",["T_WHITESPACE"," ",572],["T_STRING","false",572],"]",",",["T_WHITESPACE"," ",572],["T_STRING","true",572],")",";",["T_WHITESPACE","\n        ",572],["T_IF","if",573],["T_WHITESPACE"," ",573],"(",["T_VARIABLE","$isEmpty",573],["T_WHITESPACE"," ",573],["T_BOOLEAN_AND","&&",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$entity",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","isNew",573],"(",")",")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n            ",573],["T_RETURN","return",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$entity",574],";",["T_WHITESPACE","\n        ",574],"}",["T_WHITESPACE","\n        ",575],["T_IF","if",576],["T_WHITESPACE"," ",576],"(",["T_VARIABLE","$isEmpty",576],")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n            ",576],["T_VARIABLE","$targetEntity",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],"[","]",";",["T_WHITESPACE","\n        ",577],"}",["T_WHITESPACE","\n\n        ",578],["T_IF","if",580],["T_WHITESPACE"," ",580],"(",["T_VARIABLE","$strategy",580],["T_WHITESPACE"," ",580],["T_IS_IDENTICAL","===",580],["T_WHITESPACE"," ",580],["T_STRING","self",580],["T_DOUBLE_COLON","::",580],["T_STRING","SAVE_APPEND",580],")",["T_WHITESPACE"," ",580],"{",["T_WHITESPACE","\n            ",580],["T_RETURN","return",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","_saveTarget",581],"(",["T_VARIABLE","$entity",581],",",["T_WHITESPACE"," ",581],["T_VARIABLE","$targetEntity",581],",",["T_WHITESPACE"," ",581],["T_VARIABLE","$options",581],")",";",["T_WHITESPACE","\n        ",581],"}",["T_WHITESPACE","\n\n        ",582],["T_IF","if",584],["T_WHITESPACE"," ",584],"(",["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","replaceLinks",584],"(",["T_VARIABLE","$entity",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$targetEntity",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$options",584],")",")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n            ",584],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$entity",585],";",["T_WHITESPACE","\n        ",585],"}",["T_WHITESPACE","\n\n        ",586],["T_RETURN","return",588],["T_WHITESPACE"," ",588],["T_STRING","false",588],";",["T_WHITESPACE","\n    ",588],"}",["T_WHITESPACE","\n\n    ",589],["T_DOC_COMMENT","\/**\n     * Persists each of the entities into the target table and creates links between\n     * the parent entity and each one of the saved target entities.\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $parentEntity the source entity containing the target\n     * entities to be saved.\n     * @param array|\\Traversable $entities list of entities to persist in target table and to\n     * link to the parent entity\n     * @param array $options list of options accepted by `Table::save()`\n     * @throws \\InvalidArgumentException if the property representing the association\n     * in the parent entity cannot be traversed\n     * @return \\Cake\\Datasource\\EntityInterface|bool The parent entity after all links have been\n     * created if no errors happened, false otherwise\n     *\/",591],["T_WHITESPACE","\n    ",604],["T_PROTECTED","protected",605],["T_WHITESPACE"," ",605],["T_FUNCTION","function",605],["T_WHITESPACE"," ",605],["T_STRING","_saveTarget",605],"(",["T_STRING","EntityInterface",605],["T_WHITESPACE"," ",605],["T_VARIABLE","$parentEntity",605],",",["T_WHITESPACE"," ",605],["T_VARIABLE","$entities",605],",",["T_WHITESPACE"," ",605],["T_VARIABLE","$options",605],")",["T_WHITESPACE","\n    ",605],"{",["T_WHITESPACE","\n        ",606],["T_VARIABLE","$joinAssociations",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_STRING","false",607],";",["T_WHITESPACE","\n        ",607],["T_IF","if",608],["T_WHITESPACE"," ",608],"(","!",["T_EMPTY","empty",608],"(",["T_VARIABLE","$options",608],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",608],"]","[",["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","_junctionProperty",608],"]","[",["T_CONSTANT_ENCAPSED_STRING","'associated'",608],"]",")",")",["T_WHITESPACE"," ",608],"{",["T_WHITESPACE","\n            ",608],["T_VARIABLE","$joinAssociations",609],["T_WHITESPACE"," ",609],"=",["T_WHITESPACE"," ",609],["T_VARIABLE","$options",609],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",609],"]","[",["T_VARIABLE","$this",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","_junctionProperty",609],"]","[",["T_CONSTANT_ENCAPSED_STRING","'associated'",609],"]",";",["T_WHITESPACE","\n        ",609],"}",["T_WHITESPACE","\n        ",610],["T_UNSET","unset",611],"(",["T_VARIABLE","$options",611],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",611],"]","[",["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","_junctionProperty",611],"]",")",";",["T_WHITESPACE","\n\n        ",611],["T_IF","if",613],["T_WHITESPACE"," ",613],"(","!","(",["T_STRING","is_array",613],"(",["T_VARIABLE","$entities",613],")",["T_WHITESPACE"," ",613],["T_BOOLEAN_OR","||",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$entities",613],["T_WHITESPACE"," ",613],["T_INSTANCEOF","instanceof",613],["T_WHITESPACE"," ",613],["T_STRING","Traversable",613],")",")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n            ",613],["T_VARIABLE","$name",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","property",614],"(",")",";",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$message",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","sprintf",615],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not save %s, it cannot be traversed'",615],",",["T_WHITESPACE"," ",615],["T_VARIABLE","$name",615],")",";",["T_WHITESPACE","\n            ",615],["T_THROW","throw",616],["T_WHITESPACE"," ",616],["T_NEW","new",616],["T_WHITESPACE"," ",616],["T_STRING","InvalidArgumentException",616],"(",["T_VARIABLE","$message",616],")",";",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE","\n\n        ",617],["T_VARIABLE","$table",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","target",619],"(",")",";",["T_WHITESPACE","\n        ",619],["T_VARIABLE","$original",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_VARIABLE","$entities",620],";",["T_WHITESPACE","\n        ",620],["T_VARIABLE","$persisted",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],"[","]",";",["T_WHITESPACE","\n\n        ",621],["T_FOREACH","foreach",623],["T_WHITESPACE"," ",623],"(",["T_VARIABLE","$entities",623],["T_WHITESPACE"," ",623],["T_AS","as",623],["T_WHITESPACE"," ",623],["T_VARIABLE","$k",623],["T_WHITESPACE"," ",623],["T_DOUBLE_ARROW","=>",623],["T_WHITESPACE"," ",623],["T_VARIABLE","$entity",623],")",["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n            ",623],["T_IF","if",624],["T_WHITESPACE"," ",624],"(","!","(",["T_VARIABLE","$entity",624],["T_WHITESPACE"," ",624],["T_INSTANCEOF","instanceof",624],["T_WHITESPACE"," ",624],["T_STRING","EntityInterface",624],")",")",["T_WHITESPACE"," ",624],"{",["T_WHITESPACE","\n                ",624],["T_BREAK","break",625],";",["T_WHITESPACE","\n            ",625],"}",["T_WHITESPACE","\n\n            ",626],["T_IF","if",628],["T_WHITESPACE"," ",628],"(","!",["T_EMPTY","empty",628],"(",["T_VARIABLE","$options",628],"[",["T_CONSTANT_ENCAPSED_STRING","'atomic'",628],"]",")",")",["T_WHITESPACE"," ",628],"{",["T_WHITESPACE","\n                ",628],["T_VARIABLE","$entity",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_CLONE","clone",629],["T_WHITESPACE"," ",629],["T_VARIABLE","$entity",629],";",["T_WHITESPACE","\n            ",629],"}",["T_WHITESPACE","\n\n            ",630],["T_VARIABLE","$saved",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_VARIABLE","$table",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","save",632],"(",["T_VARIABLE","$entity",632],",",["T_WHITESPACE"," ",632],["T_VARIABLE","$options",632],")",";",["T_WHITESPACE","\n            ",632],["T_IF","if",633],["T_WHITESPACE"," ",633],"(",["T_VARIABLE","$saved",633],")",["T_WHITESPACE"," ",633],"{",["T_WHITESPACE","\n                ",633],["T_VARIABLE","$entities",634],"[",["T_VARIABLE","$k",634],"]",["T_WHITESPACE"," ",634],"=",["T_WHITESPACE"," ",634],["T_VARIABLE","$entity",634],";",["T_WHITESPACE","\n                ",634],["T_VARIABLE","$persisted",635],"[","]",["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_VARIABLE","$entity",635],";",["T_WHITESPACE","\n                ",635],["T_CONTINUE","continue",636],";",["T_WHITESPACE","\n            ",636],"}",["T_WHITESPACE","\n\n            ",637],["T_COMMENT","\/\/ Saving the new linked entity failed, copy errors back into the\n",639],["T_WHITESPACE","            ",640],["T_COMMENT","\/\/ original entity if applicable and abort.\n",640],["T_WHITESPACE","            ",641],["T_IF","if",641],["T_WHITESPACE"," ",641],"(","!",["T_EMPTY","empty",641],"(",["T_VARIABLE","$options",641],"[",["T_CONSTANT_ENCAPSED_STRING","'atomic'",641],"]",")",")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n                ",641],["T_VARIABLE","$original",642],"[",["T_VARIABLE","$k",642],"]",["T_OBJECT_OPERATOR","->",642],["T_STRING","errors",642],"(",["T_VARIABLE","$entity",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","errors",642],"(",")",")",";",["T_WHITESPACE","\n            ",642],"}",["T_WHITESPACE","\n            ",643],["T_IF","if",644],["T_WHITESPACE"," ",644],"(","!",["T_VARIABLE","$saved",644],")",["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n                ",644],["T_RETURN","return",645],["T_WHITESPACE"," ",645],["T_STRING","false",645],";",["T_WHITESPACE","\n            ",645],"}",["T_WHITESPACE","\n        ",646],"}",["T_WHITESPACE","\n\n        ",647],["T_VARIABLE","$options",649],"[",["T_CONSTANT_ENCAPSED_STRING","'associated'",649],"]",["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_VARIABLE","$joinAssociations",649],";",["T_WHITESPACE","\n        ",649],["T_VARIABLE","$success",650],["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","_saveLinks",650],"(",["T_VARIABLE","$parentEntity",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$persisted",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$options",650],")",";",["T_WHITESPACE","\n        ",650],["T_IF","if",651],["T_WHITESPACE"," ",651],"(","!",["T_VARIABLE","$success",651],["T_WHITESPACE"," ",651],["T_BOOLEAN_AND","&&",651],["T_WHITESPACE"," ",651],"!",["T_EMPTY","empty",651],"(",["T_VARIABLE","$options",651],"[",["T_CONSTANT_ENCAPSED_STRING","'atomic'",651],"]",")",")",["T_WHITESPACE"," ",651],"{",["T_WHITESPACE","\n            ",651],["T_VARIABLE","$parentEntity",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","set",652],"(",["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","property",652],"(",")",",",["T_WHITESPACE"," ",652],["T_VARIABLE","$original",652],")",";",["T_WHITESPACE","\n\n            ",652],["T_RETURN","return",654],["T_WHITESPACE"," ",654],["T_STRING","false",654],";",["T_WHITESPACE","\n        ",654],"}",["T_WHITESPACE","\n\n        ",655],["T_VARIABLE","$parentEntity",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","set",657],"(",["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","property",657],"(",")",",",["T_WHITESPACE"," ",657],["T_VARIABLE","$entities",657],")",";",["T_WHITESPACE","\n\n        ",657],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$parentEntity",659],";",["T_WHITESPACE","\n    ",659],"}",["T_WHITESPACE","\n\n    ",660],["T_DOC_COMMENT","\/**\n     * Creates links between the source entity and each of the passed target entities\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity the entity from source table in this\n     * association\n     * @param array $targetEntities list of entities to link to link to the source entity using the\n     * junction table\n     * @param array $options list of options accepted by `Table::save()`\n     * @return bool success\n     *\/",662],["T_WHITESPACE","\n    ",671],["T_PROTECTED","protected",672],["T_WHITESPACE"," ",672],["T_FUNCTION","function",672],["T_WHITESPACE"," ",672],["T_STRING","_saveLinks",672],"(",["T_STRING","EntityInterface",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$sourceEntity",672],",",["T_WHITESPACE"," ",672],["T_VARIABLE","$targetEntities",672],",",["T_WHITESPACE"," ",672],["T_VARIABLE","$options",672],")",["T_WHITESPACE","\n    ",672],"{",["T_WHITESPACE","\n        ",673],["T_VARIABLE","$target",674],["T_WHITESPACE"," ",674],"=",["T_WHITESPACE"," ",674],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","target",674],"(",")",";",["T_WHITESPACE","\n        ",674],["T_VARIABLE","$junction",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","junction",675],"(",")",";",["T_WHITESPACE","\n        ",675],["T_VARIABLE","$entityClass",676],["T_WHITESPACE"," ",676],"=",["T_WHITESPACE"," ",676],["T_VARIABLE","$junction",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","entityClass",676],"(",")",";",["T_WHITESPACE","\n        ",676],["T_VARIABLE","$belongsTo",677],["T_WHITESPACE"," ",677],"=",["T_WHITESPACE"," ",677],["T_VARIABLE","$junction",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","association",677],"(",["T_VARIABLE","$target",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","alias",677],"(",")",")",";",["T_WHITESPACE","\n        ",677],["T_VARIABLE","$foreignKey",678],["T_WHITESPACE"," ",678],"=",["T_WHITESPACE"," ",678],["T_ARRAY_CAST","(array)",678],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","foreignKey",678],"(",")",";",["T_WHITESPACE","\n        ",678],["T_VARIABLE","$assocForeignKey",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_ARRAY_CAST","(array)",679],["T_VARIABLE","$belongsTo",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","foreignKey",679],"(",")",";",["T_WHITESPACE","\n        ",679],["T_VARIABLE","$targetPrimaryKey",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_ARRAY_CAST","(array)",680],["T_VARIABLE","$target",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","primaryKey",680],"(",")",";",["T_WHITESPACE","\n        ",680],["T_VARIABLE","$bindingKey",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_ARRAY_CAST","(array)",681],["T_VARIABLE","$this",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","bindingKey",681],"(",")",";",["T_WHITESPACE","\n        ",681],["T_VARIABLE","$jointProperty",682],["T_WHITESPACE"," ",682],"=",["T_WHITESPACE"," ",682],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","_junctionProperty",682],";",["T_WHITESPACE","\n        ",682],["T_VARIABLE","$junctionAlias",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_VARIABLE","$junction",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","alias",683],"(",")",";",["T_WHITESPACE","\n\n        ",683],["T_FOREACH","foreach",685],["T_WHITESPACE"," ",685],"(",["T_VARIABLE","$targetEntities",685],["T_WHITESPACE"," ",685],["T_AS","as",685],["T_WHITESPACE"," ",685],["T_VARIABLE","$e",685],")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n            ",685],["T_VARIABLE","$joint",686],["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_VARIABLE","$e",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","get",686],"(",["T_VARIABLE","$jointProperty",686],")",";",["T_WHITESPACE","\n            ",686],["T_IF","if",687],["T_WHITESPACE"," ",687],"(","!",["T_VARIABLE","$joint",687],["T_WHITESPACE"," ",687],["T_BOOLEAN_OR","||",687],["T_WHITESPACE"," ",687],"!","(",["T_VARIABLE","$joint",687],["T_WHITESPACE"," ",687],["T_INSTANCEOF","instanceof",687],["T_WHITESPACE"," ",687],["T_STRING","EntityInterface",687],")",")",["T_WHITESPACE"," ",687],"{",["T_WHITESPACE","\n                ",687],["T_VARIABLE","$joint",688],["T_WHITESPACE"," ",688],"=",["T_WHITESPACE"," ",688],["T_NEW","new",688],["T_WHITESPACE"," ",688],["T_VARIABLE","$entityClass",688],"(","[","]",",",["T_WHITESPACE"," ",688],"[",["T_CONSTANT_ENCAPSED_STRING","'markNew'",688],["T_WHITESPACE"," ",688],["T_DOUBLE_ARROW","=>",688],["T_WHITESPACE"," ",688],["T_STRING","true",688],",",["T_WHITESPACE"," ",688],["T_CONSTANT_ENCAPSED_STRING","'source'",688],["T_WHITESPACE"," ",688],["T_DOUBLE_ARROW","=>",688],["T_WHITESPACE"," ",688],["T_VARIABLE","$junctionAlias",688],"]",")",";",["T_WHITESPACE","\n            ",688],"}",["T_WHITESPACE","\n            ",689],["T_VARIABLE","$sourceKeys",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_STRING","array_combine",690],"(",["T_VARIABLE","$foreignKey",690],",",["T_WHITESPACE"," ",690],["T_VARIABLE","$sourceEntity",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","extract",690],"(",["T_VARIABLE","$bindingKey",690],")",")",";",["T_WHITESPACE","\n            ",690],["T_VARIABLE","$targetKeys",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_STRING","array_combine",691],"(",["T_VARIABLE","$assocForeignKey",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$e",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","extract",691],"(",["T_VARIABLE","$targetPrimaryKey",691],")",")",";",["T_WHITESPACE","\n\n            ",691],["T_IF","if",693],["T_WHITESPACE"," ",693],"(",["T_VARIABLE","$sourceKeys",693],["T_WHITESPACE"," ",693],["T_IS_NOT_IDENTICAL","!==",693],["T_WHITESPACE"," ",693],["T_VARIABLE","$joint",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","extract",693],"(",["T_VARIABLE","$foreignKey",693],")",")",["T_WHITESPACE"," ",693],"{",["T_WHITESPACE","\n                ",693],["T_VARIABLE","$joint",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","set",694],"(",["T_VARIABLE","$sourceKeys",694],",",["T_WHITESPACE"," ",694],"[",["T_CONSTANT_ENCAPSED_STRING","'guard'",694],["T_WHITESPACE"," ",694],["T_DOUBLE_ARROW","=>",694],["T_WHITESPACE"," ",694],["T_STRING","false",694],"]",")",";",["T_WHITESPACE","\n            ",694],"}",["T_WHITESPACE","\n\n            ",695],["T_IF","if",697],["T_WHITESPACE"," ",697],"(",["T_VARIABLE","$targetKeys",697],["T_WHITESPACE"," ",697],["T_IS_NOT_IDENTICAL","!==",697],["T_WHITESPACE"," ",697],["T_VARIABLE","$joint",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","extract",697],"(",["T_VARIABLE","$assocForeignKey",697],")",")",["T_WHITESPACE"," ",697],"{",["T_WHITESPACE","\n                ",697],["T_VARIABLE","$joint",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","set",698],"(",["T_VARIABLE","$targetKeys",698],",",["T_WHITESPACE"," ",698],"[",["T_CONSTANT_ENCAPSED_STRING","'guard'",698],["T_WHITESPACE"," ",698],["T_DOUBLE_ARROW","=>",698],["T_WHITESPACE"," ",698],["T_STRING","false",698],"]",")",";",["T_WHITESPACE","\n            ",698],"}",["T_WHITESPACE","\n\n            ",699],["T_VARIABLE","$saved",701],["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_VARIABLE","$junction",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","save",701],"(",["T_VARIABLE","$joint",701],",",["T_WHITESPACE"," ",701],["T_VARIABLE","$options",701],")",";",["T_WHITESPACE","\n\n            ",701],["T_IF","if",703],["T_WHITESPACE"," ",703],"(","!",["T_VARIABLE","$saved",703],["T_WHITESPACE"," ",703],["T_BOOLEAN_AND","&&",703],["T_WHITESPACE"," ",703],"!",["T_EMPTY","empty",703],"(",["T_VARIABLE","$options",703],"[",["T_CONSTANT_ENCAPSED_STRING","'atomic'",703],"]",")",")",["T_WHITESPACE"," ",703],"{",["T_WHITESPACE","\n                ",703],["T_RETURN","return",704],["T_WHITESPACE"," ",704],["T_STRING","false",704],";",["T_WHITESPACE","\n            ",704],"}",["T_WHITESPACE","\n\n            ",705],["T_VARIABLE","$e",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","set",707],"(",["T_VARIABLE","$jointProperty",707],",",["T_WHITESPACE"," ",707],["T_VARIABLE","$joint",707],")",";",["T_WHITESPACE","\n            ",707],["T_VARIABLE","$e",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","dirty",708],"(",["T_VARIABLE","$jointProperty",708],",",["T_WHITESPACE"," ",708],["T_STRING","false",708],")",";",["T_WHITESPACE","\n        ",708],"}",["T_WHITESPACE","\n\n        ",709],["T_RETURN","return",711],["T_WHITESPACE"," ",711],["T_STRING","true",711],";",["T_WHITESPACE","\n    ",711],"}",["T_WHITESPACE","\n\n    ",712],["T_DOC_COMMENT","\/**\n     * Associates the source entity to each of the target entities provided by\n     * creating links in the junction table. Both the source entity and each of\n     * the target entities are assumed to be already persisted, if they are marked\n     * as new or their status is unknown then an exception will be thrown.\n     *\n     * When using this method, all entities in `$targetEntities` will be appended to\n     * the source entity's property corresponding to this association object.\n     *\n     * This method does not check link uniqueness.\n     *\n     * ### Example:\n     *\n     * ```\n     * $newTags = $tags->find('relevant')->toArray();\n     * $articles->association('tags')->link($article, $newTags);\n     * ```\n     *\n     * `$article->get('tags')` will contain all tags in `$newTags` after liking\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity the row belonging to the `source` side\n     *   of this association\n     * @param array $targetEntities list of entities belonging to the `target` side\n     *   of this association\n     * @param array $options list of options to be passed to the internal `save` call\n     * @throws \\InvalidArgumentException when any of the values in $targetEntities is\n     *   detected to not be already persisted\n     * @return bool true on success, false otherwise\n     *\/",714],["T_WHITESPACE","\n    ",742],["T_PUBLIC","public",743],["T_WHITESPACE"," ",743],["T_FUNCTION","function",743],["T_WHITESPACE"," ",743],["T_STRING","link",743],"(",["T_STRING","EntityInterface",743],["T_WHITESPACE"," ",743],["T_VARIABLE","$sourceEntity",743],",",["T_WHITESPACE"," ",743],["T_ARRAY","array",743],["T_WHITESPACE"," ",743],["T_VARIABLE","$targetEntities",743],",",["T_WHITESPACE"," ",743],["T_ARRAY","array",743],["T_WHITESPACE"," ",743],["T_VARIABLE","$options",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],"[","]",")",["T_WHITESPACE","\n    ",743],"{",["T_WHITESPACE","\n        ",744],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","_checkPersistenceStatus",745],"(",["T_VARIABLE","$sourceEntity",745],",",["T_WHITESPACE"," ",745],["T_VARIABLE","$targetEntities",745],")",";",["T_WHITESPACE","\n        ",745],["T_VARIABLE","$property",746],["T_WHITESPACE"," ",746],"=",["T_WHITESPACE"," ",746],["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","property",746],"(",")",";",["T_WHITESPACE","\n        ",746],["T_VARIABLE","$links",747],["T_WHITESPACE"," ",747],"=",["T_WHITESPACE"," ",747],["T_VARIABLE","$sourceEntity",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","get",747],"(",["T_VARIABLE","$property",747],")",["T_WHITESPACE"," ",747],"?",":",["T_WHITESPACE"," ",747],"[","]",";",["T_WHITESPACE","\n        ",747],["T_VARIABLE","$links",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_STRING","array_merge",748],"(",["T_VARIABLE","$links",748],",",["T_WHITESPACE"," ",748],["T_VARIABLE","$targetEntities",748],")",";",["T_WHITESPACE","\n        ",748],["T_VARIABLE","$sourceEntity",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","set",749],"(",["T_VARIABLE","$property",749],",",["T_WHITESPACE"," ",749],["T_VARIABLE","$links",749],")",";",["T_WHITESPACE","\n\n        ",749],["T_RETURN","return",751],["T_WHITESPACE"," ",751],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","junction",751],"(",")",["T_OBJECT_OPERATOR","->",751],["T_STRING","connection",751],"(",")",["T_OBJECT_OPERATOR","->",751],["T_STRING","transactional",751],"(",["T_WHITESPACE","\n            ",751],["T_FUNCTION","function",752],["T_WHITESPACE"," ",752],"(",")",["T_WHITESPACE"," ",752],["T_USE","use",752],["T_WHITESPACE"," ",752],"(",["T_VARIABLE","$sourceEntity",752],",",["T_WHITESPACE"," ",752],["T_VARIABLE","$targetEntities",752],",",["T_WHITESPACE"," ",752],["T_VARIABLE","$options",752],")",["T_WHITESPACE"," ",752],"{",["T_WHITESPACE","\n                ",752],["T_RETURN","return",753],["T_WHITESPACE"," ",753],["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","_saveLinks",753],"(",["T_VARIABLE","$sourceEntity",753],",",["T_WHITESPACE"," ",753],["T_VARIABLE","$targetEntities",753],",",["T_WHITESPACE"," ",753],["T_VARIABLE","$options",753],")",";",["T_WHITESPACE","\n            ",753],"}",["T_WHITESPACE","\n        ",754],")",";",["T_WHITESPACE","\n    ",755],"}",["T_WHITESPACE","\n\n    ",756],["T_DOC_COMMENT","\/**\n     * Removes all links between the passed source entity and each of the provided\n     * target entities. This method assumes that all passed objects are already persisted\n     * in the database and that each of them contain a primary key value.\n     *\n     * ### Options\n     *\n     * Additionally to the default options accepted by `Table::delete()`, the following\n     * keys are supported:\n     *\n     * - cleanProperty: Whether or not to remove all the objects in `$targetEntities` that\n     * are stored in `$sourceEntity` (default: true)\n     *\n     * By default this method will unset each of the entity objects stored inside the\n     * source entity.\n     *\n     * ### Example:\n     *\n     * ```\n     * $article->tags = [$tag1, $tag2, $tag3, $tag4];\n     * $tags = [$tag1, $tag2, $tag3];\n     * $articles->association('tags')->unlink($article, $tags);\n     * ```\n     *\n     * `$article->get('tags')` will contain only `[$tag4]` after deleting in the database\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity an entity persisted in the source table for\n     *   this association\n     * @param array $targetEntities list of entities persisted in the target table for\n     *   this association\n     * @param array|bool $options list of options to be passed to the internal `delete` call,\n     *   or a `boolean`\n     * @throws \\InvalidArgumentException if non persisted entities are passed or if\n     *   any of them is lacking a primary key value\n     * @return bool Success\n     *\/",758],["T_WHITESPACE","\n    ",793],["T_PUBLIC","public",794],["T_WHITESPACE"," ",794],["T_FUNCTION","function",794],["T_WHITESPACE"," ",794],["T_STRING","unlink",794],"(",["T_STRING","EntityInterface",794],["T_WHITESPACE"," ",794],["T_VARIABLE","$sourceEntity",794],",",["T_WHITESPACE"," ",794],["T_ARRAY","array",794],["T_WHITESPACE"," ",794],["T_VARIABLE","$targetEntities",794],",",["T_WHITESPACE"," ",794],["T_VARIABLE","$options",794],["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],"[","]",")",["T_WHITESPACE","\n    ",794],"{",["T_WHITESPACE","\n        ",795],["T_IF","if",796],["T_WHITESPACE"," ",796],"(",["T_STRING","is_bool",796],"(",["T_VARIABLE","$options",796],")",")",["T_WHITESPACE"," ",796],"{",["T_WHITESPACE","\n            ",796],["T_VARIABLE","$options",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],"[",["T_WHITESPACE","\n                ",797],["T_CONSTANT_ENCAPSED_STRING","'cleanProperty'",798],["T_WHITESPACE"," ",798],["T_DOUBLE_ARROW","=>",798],["T_WHITESPACE"," ",798],["T_VARIABLE","$options",798],["T_WHITESPACE","\n            ",798],"]",";",["T_WHITESPACE","\n        ",799],"}",["T_WHITESPACE"," ",800],["T_ELSE","else",800],["T_WHITESPACE"," ",800],"{",["T_WHITESPACE","\n            ",800],["T_VARIABLE","$options",801],["T_WHITESPACE"," ",801],["T_PLUS_EQUAL","+=",801],["T_WHITESPACE"," ",801],"[",["T_CONSTANT_ENCAPSED_STRING","'cleanProperty'",801],["T_WHITESPACE"," ",801],["T_DOUBLE_ARROW","=>",801],["T_WHITESPACE"," ",801],["T_STRING","true",801],"]",";",["T_WHITESPACE","\n        ",801],"}",["T_WHITESPACE","\n\n        ",802],["T_VARIABLE","$this",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","_checkPersistenceStatus",804],"(",["T_VARIABLE","$sourceEntity",804],",",["T_WHITESPACE"," ",804],["T_VARIABLE","$targetEntities",804],")",";",["T_WHITESPACE","\n        ",804],["T_VARIABLE","$property",805],["T_WHITESPACE"," ",805],"=",["T_WHITESPACE"," ",805],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","property",805],"(",")",";",["T_WHITESPACE","\n\n        ",805],["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","junction",807],"(",")",["T_OBJECT_OPERATOR","->",807],["T_STRING","connection",807],"(",")",["T_OBJECT_OPERATOR","->",807],["T_STRING","transactional",807],"(",["T_WHITESPACE","\n            ",807],["T_FUNCTION","function",808],["T_WHITESPACE"," ",808],"(",")",["T_WHITESPACE"," ",808],["T_USE","use",808],["T_WHITESPACE"," ",808],"(",["T_VARIABLE","$sourceEntity",808],",",["T_WHITESPACE"," ",808],["T_VARIABLE","$targetEntities",808],",",["T_WHITESPACE"," ",808],["T_VARIABLE","$options",808],")",["T_WHITESPACE"," ",808],"{",["T_WHITESPACE","\n                ",808],["T_VARIABLE","$links",809],["T_WHITESPACE"," ",809],"=",["T_WHITESPACE"," ",809],["T_VARIABLE","$this",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","_collectJointEntities",809],"(",["T_VARIABLE","$sourceEntity",809],",",["T_WHITESPACE"," ",809],["T_VARIABLE","$targetEntities",809],")",";",["T_WHITESPACE","\n                ",809],["T_FOREACH","foreach",810],["T_WHITESPACE"," ",810],"(",["T_VARIABLE","$links",810],["T_WHITESPACE"," ",810],["T_AS","as",810],["T_WHITESPACE"," ",810],["T_VARIABLE","$entity",810],")",["T_WHITESPACE"," ",810],"{",["T_WHITESPACE","\n                    ",810],["T_VARIABLE","$this",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","_junctionTable",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","delete",811],"(",["T_VARIABLE","$entity",811],",",["T_WHITESPACE"," ",811],["T_VARIABLE","$options",811],")",";",["T_WHITESPACE","\n                ",811],"}",["T_WHITESPACE","\n            ",812],"}",["T_WHITESPACE","\n        ",813],")",";",["T_WHITESPACE","\n\n        ",814],["T_VARIABLE","$existing",816],["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_VARIABLE","$sourceEntity",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","get",816],"(",["T_VARIABLE","$property",816],")",["T_WHITESPACE"," ",816],"?",":",["T_WHITESPACE"," ",816],"[","]",";",["T_WHITESPACE","\n        ",816],["T_IF","if",817],["T_WHITESPACE"," ",817],"(","!",["T_VARIABLE","$options",817],"[",["T_CONSTANT_ENCAPSED_STRING","'cleanProperty'",817],"]",["T_WHITESPACE"," ",817],["T_BOOLEAN_OR","||",817],["T_WHITESPACE"," ",817],["T_EMPTY","empty",817],"(",["T_VARIABLE","$existing",817],")",")",["T_WHITESPACE"," ",817],"{",["T_WHITESPACE","\n            ",817],["T_RETURN","return",818],["T_WHITESPACE"," ",818],["T_STRING","true",818],";",["T_WHITESPACE","\n        ",818],"}",["T_WHITESPACE","\n\n        ",819],["T_VARIABLE","$storage",821],["T_WHITESPACE"," ",821],"=",["T_WHITESPACE"," ",821],["T_NEW","new",821],["T_WHITESPACE"," ",821],["T_STRING","SplObjectStorage",821],"(",")",";",["T_WHITESPACE","\n        ",821],["T_FOREACH","foreach",822],["T_WHITESPACE"," ",822],"(",["T_VARIABLE","$targetEntities",822],["T_WHITESPACE"," ",822],["T_AS","as",822],["T_WHITESPACE"," ",822],["T_VARIABLE","$e",822],")",["T_WHITESPACE"," ",822],"{",["T_WHITESPACE","\n            ",822],["T_VARIABLE","$storage",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","attach",823],"(",["T_VARIABLE","$e",823],")",";",["T_WHITESPACE","\n        ",823],"}",["T_WHITESPACE","\n\n        ",824],["T_FOREACH","foreach",826],["T_WHITESPACE"," ",826],"(",["T_VARIABLE","$existing",826],["T_WHITESPACE"," ",826],["T_AS","as",826],["T_WHITESPACE"," ",826],["T_VARIABLE","$k",826],["T_WHITESPACE"," ",826],["T_DOUBLE_ARROW","=>",826],["T_WHITESPACE"," ",826],["T_VARIABLE","$e",826],")",["T_WHITESPACE"," ",826],"{",["T_WHITESPACE","\n            ",826],["T_IF","if",827],["T_WHITESPACE"," ",827],"(",["T_VARIABLE","$storage",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","contains",827],"(",["T_VARIABLE","$e",827],")",")",["T_WHITESPACE"," ",827],"{",["T_WHITESPACE","\n                ",827],["T_UNSET","unset",828],"(",["T_VARIABLE","$existing",828],"[",["T_VARIABLE","$k",828],"]",")",";",["T_WHITESPACE","\n            ",828],"}",["T_WHITESPACE","\n        ",829],"}",["T_WHITESPACE","\n\n        ",830],["T_VARIABLE","$sourceEntity",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","set",832],"(",["T_VARIABLE","$property",832],",",["T_WHITESPACE"," ",832],["T_STRING","array_values",832],"(",["T_VARIABLE","$existing",832],")",")",";",["T_WHITESPACE","\n        ",832],["T_VARIABLE","$sourceEntity",833],["T_OBJECT_OPERATOR","->",833],["T_STRING","dirty",833],"(",["T_VARIABLE","$property",833],",",["T_WHITESPACE"," ",833],["T_STRING","false",833],")",";",["T_WHITESPACE","\n\n        ",833],["T_RETURN","return",835],["T_WHITESPACE"," ",835],["T_STRING","true",835],";",["T_WHITESPACE","\n    ",835],"}",["T_WHITESPACE","\n\n    ",836],["T_DOC_COMMENT","\/**\n     * {@inheritDoc}\n     *\/",838],["T_WHITESPACE","\n    ",840],["T_PUBLIC","public",841],["T_WHITESPACE"," ",841],["T_FUNCTION","function",841],["T_WHITESPACE"," ",841],["T_STRING","conditions",841],"(",["T_VARIABLE","$conditions",841],["T_WHITESPACE"," ",841],"=",["T_WHITESPACE"," ",841],["T_STRING","null",841],")",["T_WHITESPACE","\n    ",841],"{",["T_WHITESPACE","\n        ",842],["T_IF","if",843],["T_WHITESPACE"," ",843],"(",["T_VARIABLE","$conditions",843],["T_WHITESPACE"," ",843],["T_IS_NOT_IDENTICAL","!==",843],["T_WHITESPACE"," ",843],["T_STRING","null",843],")",["T_WHITESPACE"," ",843],"{",["T_WHITESPACE","\n            ",843],["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","_conditions",844],["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],["T_VARIABLE","$conditions",844],";",["T_WHITESPACE","\n            ",844],["T_VARIABLE","$this",845],["T_OBJECT_OPERATOR","->",845],["T_STRING","_targetConditions",845],["T_WHITESPACE"," ",845],"=",["T_WHITESPACE"," ",845],["T_VARIABLE","$this",845],["T_OBJECT_OPERATOR","->",845],["T_STRING","_junctionConditions",845],["T_WHITESPACE"," ",845],"=",["T_WHITESPACE"," ",845],["T_STRING","null",845],";",["T_WHITESPACE","\n        ",845],"}",["T_WHITESPACE","\n\n        ",846],["T_RETURN","return",848],["T_WHITESPACE"," ",848],["T_VARIABLE","$this",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","_conditions",848],";",["T_WHITESPACE","\n    ",848],"}",["T_WHITESPACE","\n\n    ",849],["T_DOC_COMMENT","\/**\n     * Returns filtered conditions that reference the target table.\n     *\n     * Any string expressions, or expression objects will\n     * also be returned in this list.\n     *\n     * @return mixed Generally an array. If the conditions\n     *   are not an array, the association conditions will be\n     *   returned unmodified.\n     *\/",851],["T_WHITESPACE","\n    ",860],["T_PROTECTED","protected",861],["T_WHITESPACE"," ",861],["T_FUNCTION","function",861],["T_WHITESPACE"," ",861],["T_STRING","targetConditions",861],"(",")",["T_WHITESPACE","\n    ",861],"{",["T_WHITESPACE","\n        ",862],["T_IF","if",863],["T_WHITESPACE"," ",863],"(",["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","_targetConditions",863],["T_WHITESPACE"," ",863],["T_IS_NOT_IDENTICAL","!==",863],["T_WHITESPACE"," ",863],["T_STRING","null",863],")",["T_WHITESPACE"," ",863],"{",["T_WHITESPACE","\n            ",863],["T_RETURN","return",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$this",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","_targetConditions",864],";",["T_WHITESPACE","\n        ",864],"}",["T_WHITESPACE","\n        ",865],["T_VARIABLE","$conditions",866],["T_WHITESPACE"," ",866],"=",["T_WHITESPACE"," ",866],["T_VARIABLE","$this",866],["T_OBJECT_OPERATOR","->",866],["T_STRING","conditions",866],"(",")",";",["T_WHITESPACE","\n        ",866],["T_IF","if",867],["T_WHITESPACE"," ",867],"(","!",["T_STRING","is_array",867],"(",["T_VARIABLE","$conditions",867],")",")",["T_WHITESPACE"," ",867],"{",["T_WHITESPACE","\n            ",867],["T_RETURN","return",868],["T_WHITESPACE"," ",868],["T_VARIABLE","$conditions",868],";",["T_WHITESPACE","\n        ",868],"}",["T_WHITESPACE","\n        ",869],["T_VARIABLE","$matching",870],["T_WHITESPACE"," ",870],"=",["T_WHITESPACE"," ",870],"[","]",";",["T_WHITESPACE","\n        ",870],["T_VARIABLE","$alias",871],["T_WHITESPACE"," ",871],"=",["T_WHITESPACE"," ",871],["T_VARIABLE","$this",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","alias",871],"(",")",["T_WHITESPACE"," ",871],".",["T_WHITESPACE"," ",871],["T_CONSTANT_ENCAPSED_STRING","'.'",871],";",["T_WHITESPACE","\n        ",871],["T_FOREACH","foreach",872],["T_WHITESPACE"," ",872],"(",["T_VARIABLE","$conditions",872],["T_WHITESPACE"," ",872],["T_AS","as",872],["T_WHITESPACE"," ",872],["T_VARIABLE","$field",872],["T_WHITESPACE"," ",872],["T_DOUBLE_ARROW","=>",872],["T_WHITESPACE"," ",872],["T_VARIABLE","$value",872],")",["T_WHITESPACE"," ",872],"{",["T_WHITESPACE","\n            ",872],["T_IF","if",873],["T_WHITESPACE"," ",873],"(",["T_STRING","is_string",873],"(",["T_VARIABLE","$field",873],")",["T_WHITESPACE"," ",873],["T_BOOLEAN_AND","&&",873],["T_WHITESPACE"," ",873],["T_STRING","strpos",873],"(",["T_VARIABLE","$field",873],",",["T_WHITESPACE"," ",873],["T_VARIABLE","$alias",873],")",["T_WHITESPACE"," ",873],["T_IS_IDENTICAL","===",873],["T_WHITESPACE"," ",873],["T_LNUMBER","0",873],")",["T_WHITESPACE"," ",873],"{",["T_WHITESPACE","\n                ",873],["T_VARIABLE","$matching",874],"[",["T_VARIABLE","$field",874],"]",["T_WHITESPACE"," ",874],"=",["T_WHITESPACE"," ",874],["T_VARIABLE","$value",874],";",["T_WHITESPACE","\n            ",874],"}",["T_WHITESPACE"," ",875],["T_ELSEIF","elseif",875],["T_WHITESPACE"," ",875],"(",["T_STRING","is_int",875],"(",["T_VARIABLE","$field",875],")",["T_WHITESPACE"," ",875],["T_BOOLEAN_OR","||",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$value",875],["T_WHITESPACE"," ",875],["T_INSTANCEOF","instanceof",875],["T_WHITESPACE"," ",875],["T_STRING","ExpressionInterface",875],")",["T_WHITESPACE"," ",875],"{",["T_WHITESPACE","\n                ",875],["T_VARIABLE","$matching",876],"[",["T_VARIABLE","$field",876],"]",["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_VARIABLE","$value",876],";",["T_WHITESPACE","\n            ",876],"}",["T_WHITESPACE","\n        ",877],"}",["T_WHITESPACE","\n\n        ",878],["T_RETURN","return",880],["T_WHITESPACE"," ",880],["T_VARIABLE","$this",880],["T_OBJECT_OPERATOR","->",880],["T_STRING","_targetConditions",880],["T_WHITESPACE"," ",880],"=",["T_WHITESPACE"," ",880],["T_VARIABLE","$matching",880],";",["T_WHITESPACE","\n    ",880],"}",["T_WHITESPACE","\n\n    ",881],["T_DOC_COMMENT","\/**\n     * Returns filtered conditions that specifically reference\n     * the junction table.\n     *\n     * @return array\n     *\/",883],["T_WHITESPACE","\n    ",888],["T_PROTECTED","protected",889],["T_WHITESPACE"," ",889],["T_FUNCTION","function",889],["T_WHITESPACE"," ",889],["T_STRING","junctionConditions",889],"(",")",["T_WHITESPACE","\n    ",889],"{",["T_WHITESPACE","\n        ",890],["T_IF","if",891],["T_WHITESPACE"," ",891],"(",["T_VARIABLE","$this",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","_junctionConditions",891],["T_WHITESPACE"," ",891],["T_IS_NOT_IDENTICAL","!==",891],["T_WHITESPACE"," ",891],["T_STRING","null",891],")",["T_WHITESPACE"," ",891],"{",["T_WHITESPACE","\n            ",891],["T_RETURN","return",892],["T_WHITESPACE"," ",892],["T_VARIABLE","$this",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","_junctionConditions",892],";",["T_WHITESPACE","\n        ",892],"}",["T_WHITESPACE","\n        ",893],["T_VARIABLE","$matching",894],["T_WHITESPACE"," ",894],"=",["T_WHITESPACE"," ",894],"[","]",";",["T_WHITESPACE","\n        ",894],["T_VARIABLE","$conditions",895],["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],["T_VARIABLE","$this",895],["T_OBJECT_OPERATOR","->",895],["T_STRING","conditions",895],"(",")",";",["T_WHITESPACE","\n        ",895],["T_IF","if",896],["T_WHITESPACE"," ",896],"(","!",["T_STRING","is_array",896],"(",["T_VARIABLE","$conditions",896],")",")",["T_WHITESPACE"," ",896],"{",["T_WHITESPACE","\n            ",896],["T_RETURN","return",897],["T_WHITESPACE"," ",897],["T_VARIABLE","$matching",897],";",["T_WHITESPACE","\n        ",897],"}",["T_WHITESPACE","\n        ",898],["T_VARIABLE","$alias",899],["T_WHITESPACE"," ",899],"=",["T_WHITESPACE"," ",899],["T_VARIABLE","$this",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","_junctionAssociationName",899],"(",")",["T_WHITESPACE"," ",899],".",["T_WHITESPACE"," ",899],["T_CONSTANT_ENCAPSED_STRING","'.'",899],";",["T_WHITESPACE","\n        ",899],["T_FOREACH","foreach",900],["T_WHITESPACE"," ",900],"(",["T_VARIABLE","$conditions",900],["T_WHITESPACE"," ",900],["T_AS","as",900],["T_WHITESPACE"," ",900],["T_VARIABLE","$field",900],["T_WHITESPACE"," ",900],["T_DOUBLE_ARROW","=>",900],["T_WHITESPACE"," ",900],["T_VARIABLE","$value",900],")",["T_WHITESPACE"," ",900],"{",["T_WHITESPACE","\n            ",900],["T_VARIABLE","$isString",901],["T_WHITESPACE"," ",901],"=",["T_WHITESPACE"," ",901],["T_STRING","is_string",901],"(",["T_VARIABLE","$field",901],")",";",["T_WHITESPACE","\n            ",901],["T_IF","if",902],["T_WHITESPACE"," ",902],"(",["T_VARIABLE","$isString",902],["T_WHITESPACE"," ",902],["T_BOOLEAN_AND","&&",902],["T_WHITESPACE"," ",902],["T_STRING","strpos",902],"(",["T_VARIABLE","$field",902],",",["T_WHITESPACE"," ",902],["T_VARIABLE","$alias",902],")",["T_WHITESPACE"," ",902],["T_IS_IDENTICAL","===",902],["T_WHITESPACE"," ",902],["T_LNUMBER","0",902],")",["T_WHITESPACE"," ",902],"{",["T_WHITESPACE","\n                ",902],["T_VARIABLE","$matching",903],"[",["T_VARIABLE","$field",903],"]",["T_WHITESPACE"," ",903],"=",["T_WHITESPACE"," ",903],["T_VARIABLE","$value",903],";",["T_WHITESPACE","\n            ",903],"}",["T_WHITESPACE","\n            ",904],["T_COMMENT","\/\/ Assume that operators contain junction conditions.\n",905],["T_WHITESPACE","            ",906],["T_COMMENT","\/\/ Trying to manage complex conditions could result in incorrect queries.\n",906],["T_WHITESPACE","            ",907],["T_IF","if",907],["T_WHITESPACE"," ",907],"(",["T_VARIABLE","$isString",907],["T_WHITESPACE"," ",907],["T_BOOLEAN_AND","&&",907],["T_WHITESPACE"," ",907],["T_STRING","in_array",907],"(",["T_STRING","strtoupper",907],"(",["T_VARIABLE","$field",907],")",",",["T_WHITESPACE"," ",907],"[",["T_CONSTANT_ENCAPSED_STRING","'OR'",907],",",["T_WHITESPACE"," ",907],["T_CONSTANT_ENCAPSED_STRING","'NOT'",907],",",["T_WHITESPACE"," ",907],["T_CONSTANT_ENCAPSED_STRING","'AND'",907],",",["T_WHITESPACE"," ",907],["T_CONSTANT_ENCAPSED_STRING","'XOR'",907],"]",")",")",["T_WHITESPACE"," ",907],"{",["T_WHITESPACE","\n                ",907],["T_VARIABLE","$matching",908],"[",["T_VARIABLE","$field",908],"]",["T_WHITESPACE"," ",908],"=",["T_WHITESPACE"," ",908],["T_VARIABLE","$value",908],";",["T_WHITESPACE","\n            ",908],"}",["T_WHITESPACE","\n        ",909],"}",["T_WHITESPACE","\n\n        ",910],["T_RETURN","return",912],["T_WHITESPACE"," ",912],["T_VARIABLE","$this",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","_junctionConditions",912],["T_WHITESPACE"," ",912],"=",["T_WHITESPACE"," ",912],["T_VARIABLE","$matching",912],";",["T_WHITESPACE","\n    ",912],"}",["T_WHITESPACE","\n\n    ",913],["T_DOC_COMMENT","\/**\n     * Proxies the finding operation to the target table's find method\n     * and modifies the query accordingly based of this association\n     * configuration.\n     *\n     * If your association includes conditions, the junction table will be\n     * included in the query's contained associations.\n     *\n     * @param string|array|null $type the type of query to perform, if an array is passed,\n     *   it will be interpreted as the `$options` parameter\n     * @param array $options The options to for the find\n     * @see \\Cake\\ORM\\Table::find()\n     * @return \\Cake\\ORM\\Query\n     *\/",915],["T_WHITESPACE","\n    ",928],["T_PUBLIC","public",929],["T_WHITESPACE"," ",929],["T_FUNCTION","function",929],["T_WHITESPACE"," ",929],["T_STRING","find",929],"(",["T_VARIABLE","$type",929],["T_WHITESPACE"," ",929],"=",["T_WHITESPACE"," ",929],["T_STRING","null",929],",",["T_WHITESPACE"," ",929],["T_ARRAY","array",929],["T_WHITESPACE"," ",929],["T_VARIABLE","$options",929],["T_WHITESPACE"," ",929],"=",["T_WHITESPACE"," ",929],"[","]",")",["T_WHITESPACE","\n    ",929],"{",["T_WHITESPACE","\n        ",930],["T_VARIABLE","$type",931],["T_WHITESPACE"," ",931],"=",["T_WHITESPACE"," ",931],["T_VARIABLE","$type",931],["T_WHITESPACE"," ",931],"?",":",["T_WHITESPACE"," ",931],["T_VARIABLE","$this",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","finder",931],"(",")",";",["T_WHITESPACE","\n        ",931],["T_LIST","list",932],"(",["T_VARIABLE","$type",932],",",["T_WHITESPACE"," ",932],["T_VARIABLE","$opts",932],")",["T_WHITESPACE"," ",932],"=",["T_WHITESPACE"," ",932],["T_VARIABLE","$this",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","_extractFinder",932],"(",["T_VARIABLE","$type",932],")",";",["T_WHITESPACE","\n        ",932],["T_VARIABLE","$query",933],["T_WHITESPACE"," ",933],"=",["T_WHITESPACE"," ",933],["T_VARIABLE","$this",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","target",933],"(",")",["T_WHITESPACE","\n            ",933],["T_OBJECT_OPERATOR","->",934],["T_STRING","find",934],"(",["T_VARIABLE","$type",934],",",["T_WHITESPACE"," ",934],["T_VARIABLE","$options",934],["T_WHITESPACE"," ",934],"+",["T_WHITESPACE"," ",934],["T_VARIABLE","$opts",934],")",["T_WHITESPACE","\n            ",934],["T_OBJECT_OPERATOR","->",935],["T_STRING","where",935],"(",["T_VARIABLE","$this",935],["T_OBJECT_OPERATOR","->",935],["T_STRING","targetConditions",935],"(",")",")",";",["T_WHITESPACE","\n\n        ",935],["T_IF","if",937],["T_WHITESPACE"," ",937],"(","!",["T_VARIABLE","$this",937],["T_OBJECT_OPERATOR","->",937],["T_STRING","junctionConditions",937],"(",")",")",["T_WHITESPACE"," ",937],"{",["T_WHITESPACE","\n            ",937],["T_RETURN","return",938],["T_WHITESPACE"," ",938],["T_VARIABLE","$query",938],";",["T_WHITESPACE","\n        ",938],"}",["T_WHITESPACE","\n\n        ",939],["T_VARIABLE","$belongsTo",941],["T_WHITESPACE"," ",941],"=",["T_WHITESPACE"," ",941],["T_VARIABLE","$this",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","junction",941],"(",")",["T_OBJECT_OPERATOR","->",941],["T_STRING","association",941],"(",["T_VARIABLE","$this",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","target",941],"(",")",["T_OBJECT_OPERATOR","->",941],["T_STRING","alias",941],"(",")",")",";",["T_WHITESPACE","\n        ",941],["T_VARIABLE","$conditions",942],["T_WHITESPACE"," ",942],"=",["T_WHITESPACE"," ",942],["T_VARIABLE","$belongsTo",942],["T_OBJECT_OPERATOR","->",942],["T_STRING","_joinCondition",942],"(","[",["T_WHITESPACE","\n            ",942],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",943],["T_WHITESPACE"," ",943],["T_DOUBLE_ARROW","=>",943],["T_WHITESPACE"," ",943],["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","targetForeignKey",943],"(",")",["T_WHITESPACE","\n        ",943],"]",")",";",["T_WHITESPACE","\n        ",944],["T_VARIABLE","$conditions",945],["T_WHITESPACE"," ",945],["T_PLUS_EQUAL","+=",945],["T_WHITESPACE"," ",945],["T_VARIABLE","$this",945],["T_OBJECT_OPERATOR","->",945],["T_STRING","junctionConditions",945],"(",")",";",["T_WHITESPACE","\n\n        ",945],["T_RETURN","return",947],["T_WHITESPACE"," ",947],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","_appendJunctionJoin",947],"(",["T_VARIABLE","$query",947],",",["T_WHITESPACE"," ",947],["T_VARIABLE","$conditions",947],")",";",["T_WHITESPACE","\n    ",947],"}",["T_WHITESPACE","\n\n    ",948],["T_DOC_COMMENT","\/**\n     * Append a join to the junction table.\n     *\n     * @param \\Cake\\ORM\\Query $query The query to append.\n     * @param string|array $conditions The query conditions to use.\n     * @return \\Cake\\ORM\\Query The modified query.\n     *\/",950],["T_WHITESPACE","\n    ",956],["T_PROTECTED","protected",957],["T_WHITESPACE"," ",957],["T_FUNCTION","function",957],["T_WHITESPACE"," ",957],["T_STRING","_appendJunctionJoin",957],"(",["T_VARIABLE","$query",957],",",["T_WHITESPACE"," ",957],["T_VARIABLE","$conditions",957],")",["T_WHITESPACE","\n    ",957],"{",["T_WHITESPACE","\n        ",958],["T_VARIABLE","$name",959],["T_WHITESPACE"," ",959],"=",["T_WHITESPACE"," ",959],["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","_junctionAssociationName",959],"(",")",";",["T_WHITESPACE","\n        ",959],["T_VARIABLE","$joins",960],["T_WHITESPACE"," ",960],"=",["T_WHITESPACE"," ",960],["T_VARIABLE","$query",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","join",960],"(",")",";",["T_WHITESPACE","\n        ",960],["T_VARIABLE","$matching",961],["T_WHITESPACE"," ",961],"=",["T_WHITESPACE"," ",961],"[",["T_WHITESPACE","\n            ",961],["T_VARIABLE","$name",962],["T_WHITESPACE"," ",962],["T_DOUBLE_ARROW","=>",962],["T_WHITESPACE"," ",962],"[",["T_WHITESPACE","\n                ",962],["T_CONSTANT_ENCAPSED_STRING","'table'",963],["T_WHITESPACE"," ",963],["T_DOUBLE_ARROW","=>",963],["T_WHITESPACE"," ",963],["T_VARIABLE","$this",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","junction",963],"(",")",["T_OBJECT_OPERATOR","->",963],["T_STRING","table",963],"(",")",",",["T_WHITESPACE","\n                ",963],["T_CONSTANT_ENCAPSED_STRING","'conditions'",964],["T_WHITESPACE"," ",964],["T_DOUBLE_ARROW","=>",964],["T_WHITESPACE"," ",964],["T_VARIABLE","$conditions",964],",",["T_WHITESPACE","\n                ",964],["T_CONSTANT_ENCAPSED_STRING","'type'",965],["T_WHITESPACE"," ",965],["T_DOUBLE_ARROW","=>",965],["T_WHITESPACE"," ",965],["T_CONSTANT_ENCAPSED_STRING","'INNER'",965],["T_WHITESPACE","\n            ",965],"]",["T_WHITESPACE","\n        ",966],"]",";",["T_WHITESPACE","\n\n        ",967],["T_VARIABLE","$assoc",969],["T_WHITESPACE"," ",969],"=",["T_WHITESPACE"," ",969],["T_VARIABLE","$this",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","target",969],"(",")",["T_OBJECT_OPERATOR","->",969],["T_STRING","association",969],"(",["T_VARIABLE","$name",969],")",";",["T_WHITESPACE","\n        ",969],["T_VARIABLE","$query",970],["T_WHITESPACE","\n            ",970],["T_OBJECT_OPERATOR","->",971],["T_STRING","addDefaultTypes",971],"(",["T_VARIABLE","$assoc",971],["T_OBJECT_OPERATOR","->",971],["T_STRING","target",971],"(",")",")",["T_WHITESPACE","\n            ",971],["T_OBJECT_OPERATOR","->",972],["T_STRING","join",972],"(",["T_VARIABLE","$matching",972],["T_WHITESPACE"," ",972],"+",["T_WHITESPACE"," ",972],["T_VARIABLE","$joins",972],",",["T_WHITESPACE"," ",972],"[","]",",",["T_WHITESPACE"," ",972],["T_STRING","true",972],")",";",["T_WHITESPACE","\n\n        ",972],["T_RETURN","return",974],["T_WHITESPACE"," ",974],["T_VARIABLE","$query",974],";",["T_WHITESPACE","\n    ",974],"}",["T_WHITESPACE","\n\n    ",975],["T_DOC_COMMENT","\/**\n     * Replaces existing association links between the source entity and the target\n     * with the ones passed. This method does a smart cleanup, links that are already\n     * persisted and present in `$targetEntities` will not be deleted, new links will\n     * be created for the passed target entities that are not already in the database\n     * and the rest will be removed.\n     *\n     * For example, if an article is linked to tags 'cake' and 'framework' and you pass\n     * to this method an array containing the entities for tags 'cake', 'php' and 'awesome',\n     * only the link for cake will be kept in database, the link for 'framework' will be\n     * deleted and the links for 'php' and 'awesome' will be created.\n     *\n     * Existing links are not deleted and created again, they are either left untouched\n     * or updated so that potential extra information stored in the joint row is not\n     * lost. Updating the link row can be done by making sure the corresponding passed\n     * target entity contains the joint property with its primary key and any extra\n     * information to be stored.\n     *\n     * On success, the passed `$sourceEntity` will contain `$targetEntities` as  value\n     * in the corresponding property for this association.\n     *\n     * This method assumes that links between both the source entity and each of the\n     * target entities are unique. That is, for any given row in the source table there\n     * can only be one link in the junction table pointing to any other given row in\n     * the target table.\n     *\n     * Additional options for new links to be saved can be passed in the third argument,\n     * check `Table::save()` for information on the accepted options.\n     *\n     * ### Example:\n     *\n     * ```\n     * $article->tags = [$tag1, $tag2, $tag3, $tag4];\n     * $articles->save($article);\n     * $tags = [$tag1, $tag3];\n     * $articles->association('tags')->replaceLinks($article, $tags);\n     * ```\n     *\n     * `$article->get('tags')` will contain only `[$tag1, $tag3]` at the end\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity an entity persisted in the source table for\n     *   this association\n     * @param array $targetEntities list of entities from the target table to be linked\n     * @param array $options list of options to be passed to the internal `save`\/`delete` calls\n     *   when persisting\/updating new links, or deleting existing ones\n     * @throws \\InvalidArgumentException if non persisted entities are passed or if\n     *   any of them is lacking a primary key value\n     * @return bool success\n     *\/",977],["T_WHITESPACE","\n    ",1025],["T_PUBLIC","public",1026],["T_WHITESPACE"," ",1026],["T_FUNCTION","function",1026],["T_WHITESPACE"," ",1026],["T_STRING","replaceLinks",1026],"(",["T_STRING","EntityInterface",1026],["T_WHITESPACE"," ",1026],["T_VARIABLE","$sourceEntity",1026],",",["T_WHITESPACE"," ",1026],["T_ARRAY","array",1026],["T_WHITESPACE"," ",1026],["T_VARIABLE","$targetEntities",1026],",",["T_WHITESPACE"," ",1026],["T_ARRAY","array",1026],["T_WHITESPACE"," ",1026],["T_VARIABLE","$options",1026],["T_WHITESPACE"," ",1026],"=",["T_WHITESPACE"," ",1026],"[","]",")",["T_WHITESPACE","\n    ",1026],"{",["T_WHITESPACE","\n        ",1027],["T_VARIABLE","$bindingKey",1028],["T_WHITESPACE"," ",1028],"=",["T_WHITESPACE"," ",1028],["T_ARRAY_CAST","(array)",1028],["T_VARIABLE","$this",1028],["T_OBJECT_OPERATOR","->",1028],["T_STRING","bindingKey",1028],"(",")",";",["T_WHITESPACE","\n        ",1028],["T_VARIABLE","$primaryValue",1029],["T_WHITESPACE"," ",1029],"=",["T_WHITESPACE"," ",1029],["T_VARIABLE","$sourceEntity",1029],["T_OBJECT_OPERATOR","->",1029],["T_STRING","extract",1029],"(",["T_VARIABLE","$bindingKey",1029],")",";",["T_WHITESPACE","\n\n        ",1029],["T_IF","if",1031],["T_WHITESPACE"," ",1031],"(",["T_STRING","count",1031],"(",["T_STRING","array_filter",1031],"(",["T_VARIABLE","$primaryValue",1031],",",["T_WHITESPACE"," ",1031],["T_CONSTANT_ENCAPSED_STRING","'strlen'",1031],")",")",["T_WHITESPACE"," ",1031],["T_IS_NOT_IDENTICAL","!==",1031],["T_WHITESPACE"," ",1031],["T_STRING","count",1031],"(",["T_VARIABLE","$bindingKey",1031],")",")",["T_WHITESPACE"," ",1031],"{",["T_WHITESPACE","\n            ",1031],["T_VARIABLE","$message",1032],["T_WHITESPACE"," ",1032],"=",["T_WHITESPACE"," ",1032],["T_CONSTANT_ENCAPSED_STRING","'Could not find primary key value for source entity'",1032],";",["T_WHITESPACE","\n            ",1032],["T_THROW","throw",1033],["T_WHITESPACE"," ",1033],["T_NEW","new",1033],["T_WHITESPACE"," ",1033],["T_STRING","InvalidArgumentException",1033],"(",["T_VARIABLE","$message",1033],")",";",["T_WHITESPACE","\n        ",1033],"}",["T_WHITESPACE","\n\n        ",1034],["T_RETURN","return",1036],["T_WHITESPACE"," ",1036],["T_VARIABLE","$this",1036],["T_OBJECT_OPERATOR","->",1036],["T_STRING","junction",1036],"(",")",["T_OBJECT_OPERATOR","->",1036],["T_STRING","connection",1036],"(",")",["T_OBJECT_OPERATOR","->",1036],["T_STRING","transactional",1036],"(",["T_WHITESPACE","\n            ",1036],["T_FUNCTION","function",1037],["T_WHITESPACE"," ",1037],"(",")",["T_WHITESPACE"," ",1037],["T_USE","use",1037],["T_WHITESPACE"," ",1037],"(",["T_VARIABLE","$sourceEntity",1037],",",["T_WHITESPACE"," ",1037],["T_VARIABLE","$targetEntities",1037],",",["T_WHITESPACE"," ",1037],["T_VARIABLE","$primaryValue",1037],",",["T_WHITESPACE"," ",1037],["T_VARIABLE","$options",1037],")",["T_WHITESPACE"," ",1037],"{",["T_WHITESPACE","\n                ",1037],["T_VARIABLE","$foreignKey",1038],["T_WHITESPACE"," ",1038],"=",["T_WHITESPACE"," ",1038],["T_STRING","array_map",1038],"(","[",["T_VARIABLE","$this",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","_junctionTable",1038],",",["T_WHITESPACE"," ",1038],["T_CONSTANT_ENCAPSED_STRING","'aliasField'",1038],"]",",",["T_WHITESPACE"," ",1038],["T_ARRAY_CAST","(array)",1038],["T_VARIABLE","$this",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","foreignKey",1038],"(",")",")",";",["T_WHITESPACE","\n                ",1038],["T_VARIABLE","$hasMany",1039],["T_WHITESPACE"," ",1039],"=",["T_WHITESPACE"," ",1039],["T_VARIABLE","$this",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","source",1039],"(",")",["T_OBJECT_OPERATOR","->",1039],["T_STRING","association",1039],"(",["T_VARIABLE","$this",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","_junctionTable",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","alias",1039],"(",")",")",";",["T_WHITESPACE","\n                ",1039],["T_VARIABLE","$existing",1040],["T_WHITESPACE"," ",1040],"=",["T_WHITESPACE"," ",1040],["T_VARIABLE","$hasMany",1040],["T_OBJECT_OPERATOR","->",1040],["T_STRING","find",1040],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",1040],")",["T_WHITESPACE","\n                    ",1040],["T_OBJECT_OPERATOR","->",1041],["T_STRING","where",1041],"(",["T_STRING","array_combine",1041],"(",["T_VARIABLE","$foreignKey",1041],",",["T_WHITESPACE"," ",1041],["T_VARIABLE","$primaryValue",1041],")",")",";",["T_WHITESPACE","\n\n                ",1041],["T_VARIABLE","$associationConditions",1043],["T_WHITESPACE"," ",1043],"=",["T_WHITESPACE"," ",1043],["T_VARIABLE","$this",1043],["T_OBJECT_OPERATOR","->",1043],["T_STRING","conditions",1043],"(",")",";",["T_WHITESPACE","\n                ",1043],["T_IF","if",1044],["T_WHITESPACE"," ",1044],"(",["T_VARIABLE","$associationConditions",1044],")",["T_WHITESPACE"," ",1044],"{",["T_WHITESPACE","\n                    ",1044],["T_VARIABLE","$existing",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","contain",1045],"(",["T_VARIABLE","$this",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","target",1045],"(",")",["T_OBJECT_OPERATOR","->",1045],["T_STRING","alias",1045],"(",")",")",";",["T_WHITESPACE","\n                    ",1045],["T_VARIABLE","$existing",1046],["T_OBJECT_OPERATOR","->",1046],["T_STRING","andWhere",1046],"(",["T_VARIABLE","$associationConditions",1046],")",";",["T_WHITESPACE","\n                ",1046],"}",["T_WHITESPACE","\n\n                ",1047],["T_VARIABLE","$jointEntities",1049],["T_WHITESPACE"," ",1049],"=",["T_WHITESPACE"," ",1049],["T_VARIABLE","$this",1049],["T_OBJECT_OPERATOR","->",1049],["T_STRING","_collectJointEntities",1049],"(",["T_VARIABLE","$sourceEntity",1049],",",["T_WHITESPACE"," ",1049],["T_VARIABLE","$targetEntities",1049],")",";",["T_WHITESPACE","\n                ",1049],["T_VARIABLE","$inserts",1050],["T_WHITESPACE"," ",1050],"=",["T_WHITESPACE"," ",1050],["T_VARIABLE","$this",1050],["T_OBJECT_OPERATOR","->",1050],["T_STRING","_diffLinks",1050],"(",["T_VARIABLE","$existing",1050],",",["T_WHITESPACE"," ",1050],["T_VARIABLE","$jointEntities",1050],",",["T_WHITESPACE"," ",1050],["T_VARIABLE","$targetEntities",1050],",",["T_WHITESPACE"," ",1050],["T_VARIABLE","$options",1050],")",";",["T_WHITESPACE","\n\n                ",1050],["T_IF","if",1052],["T_WHITESPACE"," ",1052],"(",["T_VARIABLE","$inserts",1052],["T_WHITESPACE"," ",1052],["T_BOOLEAN_AND","&&",1052],["T_WHITESPACE"," ",1052],"!",["T_VARIABLE","$this",1052],["T_OBJECT_OPERATOR","->",1052],["T_STRING","_saveTarget",1052],"(",["T_VARIABLE","$sourceEntity",1052],",",["T_WHITESPACE"," ",1052],["T_VARIABLE","$inserts",1052],",",["T_WHITESPACE"," ",1052],["T_VARIABLE","$options",1052],")",")",["T_WHITESPACE"," ",1052],"{",["T_WHITESPACE","\n                    ",1052],["T_RETURN","return",1053],["T_WHITESPACE"," ",1053],["T_STRING","false",1053],";",["T_WHITESPACE","\n                ",1053],"}",["T_WHITESPACE","\n\n                ",1054],["T_VARIABLE","$property",1056],["T_WHITESPACE"," ",1056],"=",["T_WHITESPACE"," ",1056],["T_VARIABLE","$this",1056],["T_OBJECT_OPERATOR","->",1056],["T_STRING","property",1056],"(",")",";",["T_WHITESPACE","\n\n                ",1056],["T_IF","if",1058],["T_WHITESPACE"," ",1058],"(",["T_STRING","count",1058],"(",["T_VARIABLE","$inserts",1058],")",")",["T_WHITESPACE"," ",1058],"{",["T_WHITESPACE","\n                    ",1058],["T_VARIABLE","$inserted",1059],["T_WHITESPACE"," ",1059],"=",["T_WHITESPACE"," ",1059],["T_STRING","array_combine",1059],"(",["T_WHITESPACE","\n                        ",1059],["T_STRING","array_keys",1060],"(",["T_VARIABLE","$inserts",1060],")",",",["T_WHITESPACE","\n                        ",1060],["T_ARRAY_CAST","(array)",1061],["T_VARIABLE","$sourceEntity",1061],["T_OBJECT_OPERATOR","->",1061],["T_STRING","get",1061],"(",["T_VARIABLE","$property",1061],")",["T_WHITESPACE","\n                    ",1061],")",";",["T_WHITESPACE","\n                    ",1062],["T_VARIABLE","$targetEntities",1063],["T_WHITESPACE"," ",1063],"=",["T_WHITESPACE"," ",1063],["T_VARIABLE","$inserted",1063],["T_WHITESPACE"," ",1063],"+",["T_WHITESPACE"," ",1063],["T_VARIABLE","$targetEntities",1063],";",["T_WHITESPACE","\n                ",1063],"}",["T_WHITESPACE","\n\n                ",1064],["T_STRING","ksort",1066],"(",["T_VARIABLE","$targetEntities",1066],")",";",["T_WHITESPACE","\n                ",1066],["T_VARIABLE","$sourceEntity",1067],["T_OBJECT_OPERATOR","->",1067],["T_STRING","set",1067],"(",["T_VARIABLE","$property",1067],",",["T_WHITESPACE"," ",1067],["T_STRING","array_values",1067],"(",["T_VARIABLE","$targetEntities",1067],")",")",";",["T_WHITESPACE","\n                ",1067],["T_VARIABLE","$sourceEntity",1068],["T_OBJECT_OPERATOR","->",1068],["T_STRING","dirty",1068],"(",["T_VARIABLE","$property",1068],",",["T_WHITESPACE"," ",1068],["T_STRING","false",1068],")",";",["T_WHITESPACE","\n\n                ",1068],["T_RETURN","return",1070],["T_WHITESPACE"," ",1070],["T_STRING","true",1070],";",["T_WHITESPACE","\n            ",1070],"}",["T_WHITESPACE","\n        ",1071],")",";",["T_WHITESPACE","\n    ",1072],"}",["T_WHITESPACE","\n\n    ",1073],["T_DOC_COMMENT","\/**\n     * Helper method used to delete the difference between the links passed in\n     * `$existing` and `$jointEntities`. This method will return the values from\n     * `$targetEntities` that were not deleted from calculating the difference.\n     *\n     * @param \\Cake\\ORM\\Query $existing a query for getting existing links\n     * @param array $jointEntities link entities that should be persisted\n     * @param array $targetEntities entities in target table that are related to\n     * the `$jointEntities`\n     * @param array $options list of options accepted by `Table::delete()`\n     * @return array\n     *\/",1075],["T_WHITESPACE","\n    ",1086],["T_PROTECTED","protected",1087],["T_WHITESPACE"," ",1087],["T_FUNCTION","function",1087],["T_WHITESPACE"," ",1087],["T_STRING","_diffLinks",1087],"(",["T_VARIABLE","$existing",1087],",",["T_WHITESPACE"," ",1087],["T_VARIABLE","$jointEntities",1087],",",["T_WHITESPACE"," ",1087],["T_VARIABLE","$targetEntities",1087],",",["T_WHITESPACE"," ",1087],["T_VARIABLE","$options",1087],["T_WHITESPACE"," ",1087],"=",["T_WHITESPACE"," ",1087],"[","]",")",["T_WHITESPACE","\n    ",1087],"{",["T_WHITESPACE","\n        ",1088],["T_VARIABLE","$junction",1089],["T_WHITESPACE"," ",1089],"=",["T_WHITESPACE"," ",1089],["T_VARIABLE","$this",1089],["T_OBJECT_OPERATOR","->",1089],["T_STRING","junction",1089],"(",")",";",["T_WHITESPACE","\n        ",1089],["T_VARIABLE","$target",1090],["T_WHITESPACE"," ",1090],"=",["T_WHITESPACE"," ",1090],["T_VARIABLE","$this",1090],["T_OBJECT_OPERATOR","->",1090],["T_STRING","target",1090],"(",")",";",["T_WHITESPACE","\n        ",1090],["T_VARIABLE","$belongsTo",1091],["T_WHITESPACE"," ",1091],"=",["T_WHITESPACE"," ",1091],["T_VARIABLE","$junction",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","association",1091],"(",["T_VARIABLE","$target",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","alias",1091],"(",")",")",";",["T_WHITESPACE","\n        ",1091],["T_VARIABLE","$foreignKey",1092],["T_WHITESPACE"," ",1092],"=",["T_WHITESPACE"," ",1092],["T_ARRAY_CAST","(array)",1092],["T_VARIABLE","$this",1092],["T_OBJECT_OPERATOR","->",1092],["T_STRING","foreignKey",1092],"(",")",";",["T_WHITESPACE","\n        ",1092],["T_VARIABLE","$assocForeignKey",1093],["T_WHITESPACE"," ",1093],"=",["T_WHITESPACE"," ",1093],["T_ARRAY_CAST","(array)",1093],["T_VARIABLE","$belongsTo",1093],["T_OBJECT_OPERATOR","->",1093],["T_STRING","foreignKey",1093],"(",")",";",["T_WHITESPACE","\n\n        ",1093],["T_VARIABLE","$keys",1095],["T_WHITESPACE"," ",1095],"=",["T_WHITESPACE"," ",1095],["T_STRING","array_merge",1095],"(",["T_VARIABLE","$foreignKey",1095],",",["T_WHITESPACE"," ",1095],["T_VARIABLE","$assocForeignKey",1095],")",";",["T_WHITESPACE","\n        ",1095],["T_VARIABLE","$deletes",1096],["T_WHITESPACE"," ",1096],"=",["T_WHITESPACE"," ",1096],["T_VARIABLE","$indexed",1096],["T_WHITESPACE"," ",1096],"=",["T_WHITESPACE"," ",1096],["T_VARIABLE","$present",1096],["T_WHITESPACE"," ",1096],"=",["T_WHITESPACE"," ",1096],"[","]",";",["T_WHITESPACE","\n\n        ",1096],["T_FOREACH","foreach",1098],["T_WHITESPACE"," ",1098],"(",["T_VARIABLE","$jointEntities",1098],["T_WHITESPACE"," ",1098],["T_AS","as",1098],["T_WHITESPACE"," ",1098],["T_VARIABLE","$i",1098],["T_WHITESPACE"," ",1098],["T_DOUBLE_ARROW","=>",1098],["T_WHITESPACE"," ",1098],["T_VARIABLE","$entity",1098],")",["T_WHITESPACE"," ",1098],"{",["T_WHITESPACE","\n            ",1098],["T_VARIABLE","$indexed",1099],"[",["T_VARIABLE","$i",1099],"]",["T_WHITESPACE"," ",1099],"=",["T_WHITESPACE"," ",1099],["T_VARIABLE","$entity",1099],["T_OBJECT_OPERATOR","->",1099],["T_STRING","extract",1099],"(",["T_VARIABLE","$keys",1099],")",";",["T_WHITESPACE","\n            ",1099],["T_VARIABLE","$present",1100],"[",["T_VARIABLE","$i",1100],"]",["T_WHITESPACE"," ",1100],"=",["T_WHITESPACE"," ",1100],["T_STRING","array_values",1100],"(",["T_VARIABLE","$entity",1100],["T_OBJECT_OPERATOR","->",1100],["T_STRING","extract",1100],"(",["T_VARIABLE","$assocForeignKey",1100],")",")",";",["T_WHITESPACE","\n        ",1100],"}",["T_WHITESPACE","\n\n        ",1101],["T_FOREACH","foreach",1103],["T_WHITESPACE"," ",1103],"(",["T_VARIABLE","$existing",1103],["T_WHITESPACE"," ",1103],["T_AS","as",1103],["T_WHITESPACE"," ",1103],["T_VARIABLE","$result",1103],")",["T_WHITESPACE"," ",1103],"{",["T_WHITESPACE","\n            ",1103],["T_VARIABLE","$fields",1104],["T_WHITESPACE"," ",1104],"=",["T_WHITESPACE"," ",1104],["T_VARIABLE","$result",1104],["T_OBJECT_OPERATOR","->",1104],["T_STRING","extract",1104],"(",["T_VARIABLE","$keys",1104],")",";",["T_WHITESPACE","\n            ",1104],["T_VARIABLE","$found",1105],["T_WHITESPACE"," ",1105],"=",["T_WHITESPACE"," ",1105],["T_STRING","false",1105],";",["T_WHITESPACE","\n            ",1105],["T_FOREACH","foreach",1106],["T_WHITESPACE"," ",1106],"(",["T_VARIABLE","$indexed",1106],["T_WHITESPACE"," ",1106],["T_AS","as",1106],["T_WHITESPACE"," ",1106],["T_VARIABLE","$i",1106],["T_WHITESPACE"," ",1106],["T_DOUBLE_ARROW","=>",1106],["T_WHITESPACE"," ",1106],["T_VARIABLE","$data",1106],")",["T_WHITESPACE"," ",1106],"{",["T_WHITESPACE","\n                ",1106],["T_IF","if",1107],["T_WHITESPACE"," ",1107],"(",["T_VARIABLE","$fields",1107],["T_WHITESPACE"," ",1107],["T_IS_IDENTICAL","===",1107],["T_WHITESPACE"," ",1107],["T_VARIABLE","$data",1107],")",["T_WHITESPACE"," ",1107],"{",["T_WHITESPACE","\n                    ",1107],["T_UNSET","unset",1108],"(",["T_VARIABLE","$indexed",1108],"[",["T_VARIABLE","$i",1108],"]",")",";",["T_WHITESPACE","\n                    ",1108],["T_VARIABLE","$found",1109],["T_WHITESPACE"," ",1109],"=",["T_WHITESPACE"," ",1109],["T_STRING","true",1109],";",["T_WHITESPACE","\n                    ",1109],["T_BREAK","break",1110],";",["T_WHITESPACE","\n                ",1110],"}",["T_WHITESPACE","\n            ",1111],"}",["T_WHITESPACE","\n\n            ",1112],["T_IF","if",1114],["T_WHITESPACE"," ",1114],"(","!",["T_VARIABLE","$found",1114],")",["T_WHITESPACE"," ",1114],"{",["T_WHITESPACE","\n                ",1114],["T_VARIABLE","$deletes",1115],"[","]",["T_WHITESPACE"," ",1115],"=",["T_WHITESPACE"," ",1115],["T_VARIABLE","$result",1115],";",["T_WHITESPACE","\n            ",1115],"}",["T_WHITESPACE","\n        ",1116],"}",["T_WHITESPACE","\n\n        ",1117],["T_VARIABLE","$primary",1119],["T_WHITESPACE"," ",1119],"=",["T_WHITESPACE"," ",1119],["T_ARRAY_CAST","(array)",1119],["T_VARIABLE","$target",1119],["T_OBJECT_OPERATOR","->",1119],["T_STRING","primaryKey",1119],"(",")",";",["T_WHITESPACE","\n        ",1119],["T_VARIABLE","$jointProperty",1120],["T_WHITESPACE"," ",1120],"=",["T_WHITESPACE"," ",1120],["T_VARIABLE","$this",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","_junctionProperty",1120],";",["T_WHITESPACE","\n        ",1120],["T_FOREACH","foreach",1121],["T_WHITESPACE"," ",1121],"(",["T_VARIABLE","$targetEntities",1121],["T_WHITESPACE"," ",1121],["T_AS","as",1121],["T_WHITESPACE"," ",1121],["T_VARIABLE","$k",1121],["T_WHITESPACE"," ",1121],["T_DOUBLE_ARROW","=>",1121],["T_WHITESPACE"," ",1121],["T_VARIABLE","$entity",1121],")",["T_WHITESPACE"," ",1121],"{",["T_WHITESPACE","\n            ",1121],["T_IF","if",1122],["T_WHITESPACE"," ",1122],"(","!","(",["T_VARIABLE","$entity",1122],["T_WHITESPACE"," ",1122],["T_INSTANCEOF","instanceof",1122],["T_WHITESPACE"," ",1122],["T_STRING","EntityInterface",1122],")",")",["T_WHITESPACE"," ",1122],"{",["T_WHITESPACE","\n                ",1122],["T_CONTINUE","continue",1123],";",["T_WHITESPACE","\n            ",1123],"}",["T_WHITESPACE","\n            ",1124],["T_VARIABLE","$key",1125],["T_WHITESPACE"," ",1125],"=",["T_WHITESPACE"," ",1125],["T_STRING","array_values",1125],"(",["T_VARIABLE","$entity",1125],["T_OBJECT_OPERATOR","->",1125],["T_STRING","extract",1125],"(",["T_VARIABLE","$primary",1125],")",")",";",["T_WHITESPACE","\n            ",1125],["T_FOREACH","foreach",1126],["T_WHITESPACE"," ",1126],"(",["T_VARIABLE","$present",1126],["T_WHITESPACE"," ",1126],["T_AS","as",1126],["T_WHITESPACE"," ",1126],["T_VARIABLE","$i",1126],["T_WHITESPACE"," ",1126],["T_DOUBLE_ARROW","=>",1126],["T_WHITESPACE"," ",1126],["T_VARIABLE","$data",1126],")",["T_WHITESPACE"," ",1126],"{",["T_WHITESPACE","\n                ",1126],["T_IF","if",1127],["T_WHITESPACE"," ",1127],"(",["T_VARIABLE","$key",1127],["T_WHITESPACE"," ",1127],["T_IS_IDENTICAL","===",1127],["T_WHITESPACE"," ",1127],["T_VARIABLE","$data",1127],["T_WHITESPACE"," ",1127],["T_BOOLEAN_AND","&&",1127],["T_WHITESPACE"," ",1127],"!",["T_VARIABLE","$entity",1127],["T_OBJECT_OPERATOR","->",1127],["T_STRING","get",1127],"(",["T_VARIABLE","$jointProperty",1127],")",")",["T_WHITESPACE"," ",1127],"{",["T_WHITESPACE","\n                    ",1127],["T_UNSET","unset",1128],"(",["T_VARIABLE","$targetEntities",1128],"[",["T_VARIABLE","$k",1128],"]",",",["T_WHITESPACE"," ",1128],["T_VARIABLE","$present",1128],"[",["T_VARIABLE","$i",1128],"]",")",";",["T_WHITESPACE","\n                    ",1128],["T_BREAK","break",1129],";",["T_WHITESPACE","\n                ",1129],"}",["T_WHITESPACE","\n            ",1130],"}",["T_WHITESPACE","\n        ",1131],"}",["T_WHITESPACE","\n\n        ",1132],["T_IF","if",1134],["T_WHITESPACE"," ",1134],"(",["T_VARIABLE","$deletes",1134],")",["T_WHITESPACE"," ",1134],"{",["T_WHITESPACE","\n            ",1134],["T_FOREACH","foreach",1135],["T_WHITESPACE"," ",1135],"(",["T_VARIABLE","$deletes",1135],["T_WHITESPACE"," ",1135],["T_AS","as",1135],["T_WHITESPACE"," ",1135],["T_VARIABLE","$entity",1135],")",["T_WHITESPACE"," ",1135],"{",["T_WHITESPACE","\n                ",1135],["T_VARIABLE","$junction",1136],["T_OBJECT_OPERATOR","->",1136],["T_STRING","delete",1136],"(",["T_VARIABLE","$entity",1136],",",["T_WHITESPACE"," ",1136],["T_VARIABLE","$options",1136],")",";",["T_WHITESPACE","\n            ",1136],"}",["T_WHITESPACE","\n        ",1137],"}",["T_WHITESPACE","\n\n        ",1138],["T_RETURN","return",1140],["T_WHITESPACE"," ",1140],["T_VARIABLE","$targetEntities",1140],";",["T_WHITESPACE","\n    ",1140],"}",["T_WHITESPACE","\n\n    ",1141],["T_DOC_COMMENT","\/**\n     * Throws an exception should any of the passed entities is not persisted.\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity the row belonging to the `source` side\n     *   of this association\n     * @param array $targetEntities list of entities belonging to the `target` side\n     *   of this association\n     * @return bool\n     * @throws \\InvalidArgumentException\n     *\/",1143],["T_WHITESPACE","\n    ",1152],["T_PROTECTED","protected",1153],["T_WHITESPACE"," ",1153],["T_FUNCTION","function",1153],["T_WHITESPACE"," ",1153],["T_STRING","_checkPersistenceStatus",1153],"(",["T_VARIABLE","$sourceEntity",1153],",",["T_WHITESPACE"," ",1153],["T_ARRAY","array",1153],["T_WHITESPACE"," ",1153],["T_VARIABLE","$targetEntities",1153],")",["T_WHITESPACE","\n    ",1153],"{",["T_WHITESPACE","\n        ",1154],["T_IF","if",1155],["T_WHITESPACE"," ",1155],"(",["T_VARIABLE","$sourceEntity",1155],["T_OBJECT_OPERATOR","->",1155],["T_STRING","isNew",1155],"(",")",")",["T_WHITESPACE"," ",1155],"{",["T_WHITESPACE","\n            ",1155],["T_VARIABLE","$error",1156],["T_WHITESPACE"," ",1156],"=",["T_WHITESPACE"," ",1156],["T_CONSTANT_ENCAPSED_STRING","'Source entity needs to be persisted before proceeding'",1156],";",["T_WHITESPACE","\n            ",1156],["T_THROW","throw",1157],["T_WHITESPACE"," ",1157],["T_NEW","new",1157],["T_WHITESPACE"," ",1157],["T_STRING","InvalidArgumentException",1157],"(",["T_VARIABLE","$error",1157],")",";",["T_WHITESPACE","\n        ",1157],"}",["T_WHITESPACE","\n\n        ",1158],["T_FOREACH","foreach",1160],["T_WHITESPACE"," ",1160],"(",["T_VARIABLE","$targetEntities",1160],["T_WHITESPACE"," ",1160],["T_AS","as",1160],["T_WHITESPACE"," ",1160],["T_VARIABLE","$entity",1160],")",["T_WHITESPACE"," ",1160],"{",["T_WHITESPACE","\n            ",1160],["T_IF","if",1161],["T_WHITESPACE"," ",1161],"(",["T_VARIABLE","$entity",1161],["T_OBJECT_OPERATOR","->",1161],["T_STRING","isNew",1161],"(",")",")",["T_WHITESPACE"," ",1161],"{",["T_WHITESPACE","\n                ",1161],["T_VARIABLE","$error",1162],["T_WHITESPACE"," ",1162],"=",["T_WHITESPACE"," ",1162],["T_CONSTANT_ENCAPSED_STRING","'Cannot link not persisted entities'",1162],";",["T_WHITESPACE","\n                ",1162],["T_THROW","throw",1163],["T_WHITESPACE"," ",1163],["T_NEW","new",1163],["T_WHITESPACE"," ",1163],["T_STRING","InvalidArgumentException",1163],"(",["T_VARIABLE","$error",1163],")",";",["T_WHITESPACE","\n            ",1163],"}",["T_WHITESPACE","\n        ",1164],"}",["T_WHITESPACE","\n\n        ",1165],["T_RETURN","return",1167],["T_WHITESPACE"," ",1167],["T_STRING","true",1167],";",["T_WHITESPACE","\n    ",1167],"}",["T_WHITESPACE","\n\n    ",1168],["T_DOC_COMMENT","\/**\n     * Returns the list of joint entities that exist between the source entity\n     * and each of the passed target entities\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity The row belonging to the source side\n     *   of this association.\n     * @param array $targetEntities The rows belonging to the target side of this\n     *   association.\n     * @throws \\InvalidArgumentException if any of the entities is lacking a primary\n     *   key value\n     * @return array\n     *\/",1170],["T_WHITESPACE","\n    ",1181],["T_PROTECTED","protected",1182],["T_WHITESPACE"," ",1182],["T_FUNCTION","function",1182],["T_WHITESPACE"," ",1182],["T_STRING","_collectJointEntities",1182],"(",["T_VARIABLE","$sourceEntity",1182],",",["T_WHITESPACE"," ",1182],["T_VARIABLE","$targetEntities",1182],")",["T_WHITESPACE","\n    ",1182],"{",["T_WHITESPACE","\n        ",1183],["T_VARIABLE","$target",1184],["T_WHITESPACE"," ",1184],"=",["T_WHITESPACE"," ",1184],["T_VARIABLE","$this",1184],["T_OBJECT_OPERATOR","->",1184],["T_STRING","target",1184],"(",")",";",["T_WHITESPACE","\n        ",1184],["T_VARIABLE","$source",1185],["T_WHITESPACE"," ",1185],"=",["T_WHITESPACE"," ",1185],["T_VARIABLE","$this",1185],["T_OBJECT_OPERATOR","->",1185],["T_STRING","source",1185],"(",")",";",["T_WHITESPACE","\n        ",1185],["T_VARIABLE","$junction",1186],["T_WHITESPACE"," ",1186],"=",["T_WHITESPACE"," ",1186],["T_VARIABLE","$this",1186],["T_OBJECT_OPERATOR","->",1186],["T_STRING","junction",1186],"(",")",";",["T_WHITESPACE","\n        ",1186],["T_VARIABLE","$jointProperty",1187],["T_WHITESPACE"," ",1187],"=",["T_WHITESPACE"," ",1187],["T_VARIABLE","$this",1187],["T_OBJECT_OPERATOR","->",1187],["T_STRING","_junctionProperty",1187],";",["T_WHITESPACE","\n        ",1187],["T_VARIABLE","$primary",1188],["T_WHITESPACE"," ",1188],"=",["T_WHITESPACE"," ",1188],["T_ARRAY_CAST","(array)",1188],["T_VARIABLE","$target",1188],["T_OBJECT_OPERATOR","->",1188],["T_STRING","primaryKey",1188],"(",")",";",["T_WHITESPACE","\n\n        ",1188],["T_VARIABLE","$result",1190],["T_WHITESPACE"," ",1190],"=",["T_WHITESPACE"," ",1190],"[","]",";",["T_WHITESPACE","\n        ",1190],["T_VARIABLE","$missing",1191],["T_WHITESPACE"," ",1191],"=",["T_WHITESPACE"," ",1191],"[","]",";",["T_WHITESPACE","\n\n        ",1191],["T_FOREACH","foreach",1193],["T_WHITESPACE"," ",1193],"(",["T_VARIABLE","$targetEntities",1193],["T_WHITESPACE"," ",1193],["T_AS","as",1193],["T_WHITESPACE"," ",1193],["T_VARIABLE","$entity",1193],")",["T_WHITESPACE"," ",1193],"{",["T_WHITESPACE","\n            ",1193],["T_IF","if",1194],["T_WHITESPACE"," ",1194],"(","!","(",["T_VARIABLE","$entity",1194],["T_WHITESPACE"," ",1194],["T_INSTANCEOF","instanceof",1194],["T_WHITESPACE"," ",1194],["T_STRING","EntityInterface",1194],")",")",["T_WHITESPACE"," ",1194],"{",["T_WHITESPACE","\n                ",1194],["T_CONTINUE","continue",1195],";",["T_WHITESPACE","\n            ",1195],"}",["T_WHITESPACE","\n            ",1196],["T_VARIABLE","$joint",1197],["T_WHITESPACE"," ",1197],"=",["T_WHITESPACE"," ",1197],["T_VARIABLE","$entity",1197],["T_OBJECT_OPERATOR","->",1197],["T_STRING","get",1197],"(",["T_VARIABLE","$jointProperty",1197],")",";",["T_WHITESPACE","\n\n            ",1197],["T_IF","if",1199],["T_WHITESPACE"," ",1199],"(","!",["T_VARIABLE","$joint",1199],["T_WHITESPACE"," ",1199],["T_BOOLEAN_OR","||",1199],["T_WHITESPACE"," ",1199],"!","(",["T_VARIABLE","$joint",1199],["T_WHITESPACE"," ",1199],["T_INSTANCEOF","instanceof",1199],["T_WHITESPACE"," ",1199],["T_STRING","EntityInterface",1199],")",")",["T_WHITESPACE"," ",1199],"{",["T_WHITESPACE","\n                ",1199],["T_VARIABLE","$missing",1200],"[","]",["T_WHITESPACE"," ",1200],"=",["T_WHITESPACE"," ",1200],["T_VARIABLE","$entity",1200],["T_OBJECT_OPERATOR","->",1200],["T_STRING","extract",1200],"(",["T_VARIABLE","$primary",1200],")",";",["T_WHITESPACE","\n                ",1200],["T_CONTINUE","continue",1201],";",["T_WHITESPACE","\n            ",1201],"}",["T_WHITESPACE","\n\n            ",1202],["T_VARIABLE","$result",1204],"[","]",["T_WHITESPACE"," ",1204],"=",["T_WHITESPACE"," ",1204],["T_VARIABLE","$joint",1204],";",["T_WHITESPACE","\n        ",1204],"}",["T_WHITESPACE","\n\n        ",1205],["T_IF","if",1207],["T_WHITESPACE"," ",1207],"(",["T_EMPTY","empty",1207],"(",["T_VARIABLE","$missing",1207],")",")",["T_WHITESPACE"," ",1207],"{",["T_WHITESPACE","\n            ",1207],["T_RETURN","return",1208],["T_WHITESPACE"," ",1208],["T_VARIABLE","$result",1208],";",["T_WHITESPACE","\n        ",1208],"}",["T_WHITESPACE","\n\n        ",1209],["T_VARIABLE","$belongsTo",1211],["T_WHITESPACE"," ",1211],"=",["T_WHITESPACE"," ",1211],["T_VARIABLE","$junction",1211],["T_OBJECT_OPERATOR","->",1211],["T_STRING","association",1211],"(",["T_VARIABLE","$target",1211],["T_OBJECT_OPERATOR","->",1211],["T_STRING","alias",1211],"(",")",")",";",["T_WHITESPACE","\n        ",1211],["T_VARIABLE","$hasMany",1212],["T_WHITESPACE"," ",1212],"=",["T_WHITESPACE"," ",1212],["T_VARIABLE","$source",1212],["T_OBJECT_OPERATOR","->",1212],["T_STRING","association",1212],"(",["T_VARIABLE","$junction",1212],["T_OBJECT_OPERATOR","->",1212],["T_STRING","alias",1212],"(",")",")",";",["T_WHITESPACE","\n        ",1212],["T_VARIABLE","$foreignKey",1213],["T_WHITESPACE"," ",1213],"=",["T_WHITESPACE"," ",1213],["T_ARRAY_CAST","(array)",1213],["T_VARIABLE","$this",1213],["T_OBJECT_OPERATOR","->",1213],["T_STRING","foreignKey",1213],"(",")",";",["T_WHITESPACE","\n        ",1213],["T_VARIABLE","$assocForeignKey",1214],["T_WHITESPACE"," ",1214],"=",["T_WHITESPACE"," ",1214],["T_ARRAY_CAST","(array)",1214],["T_VARIABLE","$belongsTo",1214],["T_OBJECT_OPERATOR","->",1214],["T_STRING","foreignKey",1214],"(",")",";",["T_WHITESPACE","\n        ",1214],["T_VARIABLE","$sourceKey",1215],["T_WHITESPACE"," ",1215],"=",["T_WHITESPACE"," ",1215],["T_VARIABLE","$sourceEntity",1215],["T_OBJECT_OPERATOR","->",1215],["T_STRING","extract",1215],"(",["T_ARRAY_CAST","(array)",1215],["T_VARIABLE","$source",1215],["T_OBJECT_OPERATOR","->",1215],["T_STRING","primaryKey",1215],"(",")",")",";",["T_WHITESPACE","\n\n        ",1215],["T_FOREACH","foreach",1217],["T_WHITESPACE"," ",1217],"(",["T_VARIABLE","$missing",1217],["T_WHITESPACE"," ",1217],["T_AS","as",1217],["T_WHITESPACE"," ",1217],["T_VARIABLE","$key",1217],")",["T_WHITESPACE"," ",1217],"{",["T_WHITESPACE","\n            ",1217],["T_VARIABLE","$unions",1218],"[","]",["T_WHITESPACE"," ",1218],"=",["T_WHITESPACE"," ",1218],["T_VARIABLE","$hasMany",1218],["T_OBJECT_OPERATOR","->",1218],["T_STRING","find",1218],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",1218],")",["T_WHITESPACE","\n                ",1218],["T_OBJECT_OPERATOR","->",1219],["T_STRING","where",1219],"(",["T_STRING","array_combine",1219],"(",["T_VARIABLE","$foreignKey",1219],",",["T_WHITESPACE"," ",1219],["T_VARIABLE","$sourceKey",1219],")",")",["T_WHITESPACE","\n                ",1219],["T_OBJECT_OPERATOR","->",1220],["T_STRING","andWhere",1220],"(",["T_STRING","array_combine",1220],"(",["T_VARIABLE","$assocForeignKey",1220],",",["T_WHITESPACE"," ",1220],["T_VARIABLE","$key",1220],")",")",";",["T_WHITESPACE","\n        ",1220],"}",["T_WHITESPACE","\n\n        ",1221],["T_VARIABLE","$query",1223],["T_WHITESPACE"," ",1223],"=",["T_WHITESPACE"," ",1223],["T_STRING","array_shift",1223],"(",["T_VARIABLE","$unions",1223],")",";",["T_WHITESPACE","\n        ",1223],["T_FOREACH","foreach",1224],["T_WHITESPACE"," ",1224],"(",["T_VARIABLE","$unions",1224],["T_WHITESPACE"," ",1224],["T_AS","as",1224],["T_WHITESPACE"," ",1224],["T_VARIABLE","$q",1224],")",["T_WHITESPACE"," ",1224],"{",["T_WHITESPACE","\n            ",1224],["T_VARIABLE","$query",1225],["T_OBJECT_OPERATOR","->",1225],["T_STRING","union",1225],"(",["T_VARIABLE","$q",1225],")",";",["T_WHITESPACE","\n        ",1225],"}",["T_WHITESPACE","\n\n        ",1226],["T_RETURN","return",1228],["T_WHITESPACE"," ",1228],["T_STRING","array_merge",1228],"(",["T_VARIABLE","$result",1228],",",["T_WHITESPACE"," ",1228],["T_VARIABLE","$query",1228],["T_OBJECT_OPERATOR","->",1228],["T_STRING","toArray",1228],"(",")",")",";",["T_WHITESPACE","\n    ",1228],"}",["T_WHITESPACE","\n\n    ",1229],["T_DOC_COMMENT","\/**\n     * Auxiliary function to construct a new Query object to return all the records\n     * in the target table that are associated to those specified in $options from\n     * the source table.\n     *\n     * This is used for eager loading records on the target table based on conditions.\n     *\n     * @param array $options options accepted by eagerLoader()\n     * @return \\Cake\\ORM\\Query\n     * @throws \\InvalidArgumentException When a key is required for associations but not selected.\n     *\/",1231],["T_WHITESPACE","\n    ",1241],["T_PROTECTED","protected",1242],["T_WHITESPACE"," ",1242],["T_FUNCTION","function",1242],["T_WHITESPACE"," ",1242],["T_STRING","_buildQuery",1242],"(",["T_VARIABLE","$options",1242],")",["T_WHITESPACE","\n    ",1242],"{",["T_WHITESPACE","\n        ",1243],["T_VARIABLE","$name",1244],["T_WHITESPACE"," ",1244],"=",["T_WHITESPACE"," ",1244],["T_VARIABLE","$this",1244],["T_OBJECT_OPERATOR","->",1244],["T_STRING","_junctionAssociationName",1244],"(",")",";",["T_WHITESPACE","\n        ",1244],["T_VARIABLE","$assoc",1245],["T_WHITESPACE"," ",1245],"=",["T_WHITESPACE"," ",1245],["T_VARIABLE","$this",1245],["T_OBJECT_OPERATOR","->",1245],["T_STRING","target",1245],"(",")",["T_OBJECT_OPERATOR","->",1245],["T_STRING","association",1245],"(",["T_VARIABLE","$name",1245],")",";",["T_WHITESPACE","\n        ",1245],["T_VARIABLE","$queryBuilder",1246],["T_WHITESPACE"," ",1246],"=",["T_WHITESPACE"," ",1246],["T_STRING","false",1246],";",["T_WHITESPACE","\n\n        ",1246],["T_IF","if",1248],["T_WHITESPACE"," ",1248],"(","!",["T_EMPTY","empty",1248],"(",["T_VARIABLE","$options",1248],"[",["T_CONSTANT_ENCAPSED_STRING","'queryBuilder'",1248],"]",")",")",["T_WHITESPACE"," ",1248],"{",["T_WHITESPACE","\n            ",1248],["T_VARIABLE","$queryBuilder",1249],["T_WHITESPACE"," ",1249],"=",["T_WHITESPACE"," ",1249],["T_VARIABLE","$options",1249],"[",["T_CONSTANT_ENCAPSED_STRING","'queryBuilder'",1249],"]",";",["T_WHITESPACE","\n            ",1249],["T_UNSET","unset",1250],"(",["T_VARIABLE","$options",1250],"[",["T_CONSTANT_ENCAPSED_STRING","'queryBuilder'",1250],"]",")",";",["T_WHITESPACE","\n        ",1250],"}",["T_WHITESPACE","\n\n        ",1251],["T_VARIABLE","$query",1253],["T_WHITESPACE"," ",1253],"=",["T_WHITESPACE"," ",1253],["T_VARIABLE","$this",1253],["T_OBJECT_OPERATOR","->",1253],["T_STRING","_buildBaseQuery",1253],"(",["T_VARIABLE","$options",1253],")",";",["T_WHITESPACE","\n        ",1253],["T_VARIABLE","$query",1254],["T_OBJECT_OPERATOR","->",1254],["T_STRING","addDefaultTypes",1254],"(",["T_VARIABLE","$assoc",1254],["T_OBJECT_OPERATOR","->",1254],["T_STRING","target",1254],"(",")",")",";",["T_WHITESPACE","\n\n        ",1254],["T_IF","if",1256],["T_WHITESPACE"," ",1256],"(",["T_VARIABLE","$queryBuilder",1256],")",["T_WHITESPACE"," ",1256],"{",["T_WHITESPACE","\n            ",1256],["T_VARIABLE","$query",1257],["T_WHITESPACE"," ",1257],"=",["T_WHITESPACE"," ",1257],["T_VARIABLE","$queryBuilder",1257],"(",["T_VARIABLE","$query",1257],")",";",["T_WHITESPACE","\n        ",1257],"}",["T_WHITESPACE","\n\n        ",1258],["T_VARIABLE","$query",1260],["T_WHITESPACE"," ",1260],"=",["T_WHITESPACE"," ",1260],["T_VARIABLE","$this",1260],["T_OBJECT_OPERATOR","->",1260],["T_STRING","_appendJunctionJoin",1260],"(",["T_VARIABLE","$query",1260],",",["T_WHITESPACE"," ",1260],"[","]",")",";",["T_WHITESPACE","\n\n        ",1260],["T_IF","if",1262],["T_WHITESPACE"," ",1262],"(",["T_VARIABLE","$query",1262],["T_OBJECT_OPERATOR","->",1262],["T_STRING","autoFields",1262],"(",")",["T_WHITESPACE"," ",1262],["T_IS_IDENTICAL","===",1262],["T_WHITESPACE"," ",1262],["T_STRING","null",1262],")",["T_WHITESPACE"," ",1262],"{",["T_WHITESPACE","\n            ",1262],["T_VARIABLE","$query",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","autoFields",1263],"(",["T_VARIABLE","$query",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","clause",1263],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",1263],")",["T_WHITESPACE"," ",1263],["T_IS_IDENTICAL","===",1263],["T_WHITESPACE"," ",1263],"[","]",")",";",["T_WHITESPACE","\n        ",1263],"}",["T_WHITESPACE","\n\n        ",1264],["T_COMMENT","\/\/ Ensure that association conditions are applied\n",1266],["T_WHITESPACE","        ",1267],["T_COMMENT","\/\/ and that the required keys are in the selected columns.\n",1267],["T_WHITESPACE","\n        ",1268],["T_VARIABLE","$tempName",1269],["T_WHITESPACE"," ",1269],"=",["T_WHITESPACE"," ",1269],["T_VARIABLE","$this",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","_name",1269],["T_WHITESPACE"," ",1269],".",["T_WHITESPACE"," ",1269],["T_CONSTANT_ENCAPSED_STRING","'_CJoin'",1269],";",["T_WHITESPACE","\n        ",1269],["T_VARIABLE","$schema",1270],["T_WHITESPACE"," ",1270],"=",["T_WHITESPACE"," ",1270],["T_VARIABLE","$assoc",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","schema",1270],"(",")",";",["T_WHITESPACE","\n        ",1270],["T_VARIABLE","$joinFields",1271],["T_WHITESPACE"," ",1271],"=",["T_WHITESPACE"," ",1271],["T_VARIABLE","$types",1271],["T_WHITESPACE"," ",1271],"=",["T_WHITESPACE"," ",1271],"[","]",";",["T_WHITESPACE","\n\n        ",1271],["T_FOREACH","foreach",1273],["T_WHITESPACE"," ",1273],"(",["T_VARIABLE","$schema",1273],["T_OBJECT_OPERATOR","->",1273],["T_STRING","typeMap",1273],"(",")",["T_WHITESPACE"," ",1273],["T_AS","as",1273],["T_WHITESPACE"," ",1273],["T_VARIABLE","$f",1273],["T_WHITESPACE"," ",1273],["T_DOUBLE_ARROW","=>",1273],["T_WHITESPACE"," ",1273],["T_VARIABLE","$type",1273],")",["T_WHITESPACE"," ",1273],"{",["T_WHITESPACE","\n            ",1273],["T_VARIABLE","$key",1274],["T_WHITESPACE"," ",1274],"=",["T_WHITESPACE"," ",1274],["T_VARIABLE","$tempName",1274],["T_WHITESPACE"," ",1274],".",["T_WHITESPACE"," ",1274],["T_CONSTANT_ENCAPSED_STRING","'__'",1274],["T_WHITESPACE"," ",1274],".",["T_WHITESPACE"," ",1274],["T_VARIABLE","$f",1274],";",["T_WHITESPACE","\n            ",1274],["T_VARIABLE","$joinFields",1275],"[",["T_VARIABLE","$key",1275],"]",["T_WHITESPACE"," ",1275],"=",["T_WHITESPACE"," ",1275],"\"",["T_VARIABLE","$name",1275],["T_ENCAPSED_AND_WHITESPACE",".",1275],["T_VARIABLE","$f",1275],"\"",";",["T_WHITESPACE","\n            ",1275],["T_VARIABLE","$types",1276],"[",["T_VARIABLE","$key",1276],"]",["T_WHITESPACE"," ",1276],"=",["T_WHITESPACE"," ",1276],["T_VARIABLE","$type",1276],";",["T_WHITESPACE","\n        ",1276],"}",["T_WHITESPACE","\n\n        ",1277],["T_VARIABLE","$query",1279],["T_WHITESPACE","\n            ",1279],["T_OBJECT_OPERATOR","->",1280],["T_STRING","where",1280],"(",["T_VARIABLE","$this",1280],["T_OBJECT_OPERATOR","->",1280],["T_STRING","junctionConditions",1280],"(",")",")",["T_WHITESPACE","\n            ",1280],["T_OBJECT_OPERATOR","->",1281],["T_STRING","select",1281],"(",["T_VARIABLE","$joinFields",1281],")",["T_WHITESPACE","\n            ",1281],["T_OBJECT_OPERATOR","->",1282],["T_STRING","defaultTypes",1282],"(",["T_VARIABLE","$types",1282],")",["T_WHITESPACE","\n            ",1282],["T_OBJECT_OPERATOR","->",1283],["T_STRING","addDefaultTypes",1283],"(",["T_VARIABLE","$this",1283],["T_OBJECT_OPERATOR","->",1283],["T_STRING","target",1283],"(",")",")",";",["T_WHITESPACE","\n\n        ",1283],["T_VARIABLE","$query",1285],["T_WHITESPACE","\n            ",1285],["T_OBJECT_OPERATOR","->",1286],["T_STRING","eagerLoader",1286],"(",")",["T_WHITESPACE","\n            ",1286],["T_OBJECT_OPERATOR","->",1287],["T_STRING","addToJoinsMap",1287],"(",["T_VARIABLE","$tempName",1287],",",["T_WHITESPACE"," ",1287],["T_VARIABLE","$assoc",1287],",",["T_WHITESPACE"," ",1287],["T_STRING","false",1287],",",["T_WHITESPACE"," ",1287],["T_VARIABLE","$this",1287],["T_OBJECT_OPERATOR","->",1287],["T_STRING","_junctionProperty",1287],")",";",["T_WHITESPACE","\n        ",1287],["T_VARIABLE","$assoc",1288],["T_OBJECT_OPERATOR","->",1288],["T_STRING","attachTo",1288],"(",["T_VARIABLE","$query",1288],",",["T_WHITESPACE"," ",1288],"[",["T_WHITESPACE","\n            ",1288],["T_CONSTANT_ENCAPSED_STRING","'aliasPath'",1289],["T_WHITESPACE"," ",1289],["T_DOUBLE_ARROW","=>",1289],["T_WHITESPACE"," ",1289],["T_VARIABLE","$assoc",1289],["T_OBJECT_OPERATOR","->",1289],["T_STRING","alias",1289],"(",")",",",["T_WHITESPACE","\n            ",1289],["T_CONSTANT_ENCAPSED_STRING","'includeFields'",1290],["T_WHITESPACE"," ",1290],["T_DOUBLE_ARROW","=>",1290],["T_WHITESPACE"," ",1290],["T_STRING","false",1290],",",["T_WHITESPACE","\n            ",1290],["T_CONSTANT_ENCAPSED_STRING","'propertyPath'",1291],["T_WHITESPACE"," ",1291],["T_DOUBLE_ARROW","=>",1291],["T_WHITESPACE"," ",1291],["T_VARIABLE","$this",1291],["T_OBJECT_OPERATOR","->",1291],["T_STRING","_junctionProperty",1291],["T_WHITESPACE","\n        ",1291],"]",")",";",["T_WHITESPACE","\n\n        ",1292],["T_RETURN","return",1294],["T_WHITESPACE"," ",1294],["T_VARIABLE","$query",1294],";",["T_WHITESPACE","\n    ",1294],"}",["T_WHITESPACE","\n\n    ",1295],["T_DOC_COMMENT","\/**\n     * Generates a string used as a table field that contains the values upon\n     * which the filter should be applied\n     *\n     * @param array $options the options to use for getting the link field.\n     * @return string\n     *\/",1297],["T_WHITESPACE","\n    ",1303],["T_PROTECTED","protected",1304],["T_WHITESPACE"," ",1304],["T_FUNCTION","function",1304],["T_WHITESPACE"," ",1304],["T_STRING","_linkField",1304],"(",["T_VARIABLE","$options",1304],")",["T_WHITESPACE","\n    ",1304],"{",["T_WHITESPACE","\n        ",1305],["T_VARIABLE","$links",1306],["T_WHITESPACE"," ",1306],"=",["T_WHITESPACE"," ",1306],"[","]",";",["T_WHITESPACE","\n        ",1306],["T_VARIABLE","$name",1307],["T_WHITESPACE"," ",1307],"=",["T_WHITESPACE"," ",1307],["T_VARIABLE","$this",1307],["T_OBJECT_OPERATOR","->",1307],["T_STRING","_junctionAssociationName",1307],"(",")",";",["T_WHITESPACE","\n\n        ",1307],["T_FOREACH","foreach",1309],["T_WHITESPACE"," ",1309],"(",["T_ARRAY_CAST","(array)",1309],["T_VARIABLE","$options",1309],"[",["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",1309],"]",["T_WHITESPACE"," ",1309],["T_AS","as",1309],["T_WHITESPACE"," ",1309],["T_VARIABLE","$key",1309],")",["T_WHITESPACE"," ",1309],"{",["T_WHITESPACE","\n            ",1309],["T_VARIABLE","$links",1310],"[","]",["T_WHITESPACE"," ",1310],"=",["T_WHITESPACE"," ",1310],["T_STRING","sprintf",1310],"(",["T_CONSTANT_ENCAPSED_STRING","'%s.%s'",1310],",",["T_WHITESPACE"," ",1310],["T_VARIABLE","$name",1310],",",["T_WHITESPACE"," ",1310],["T_VARIABLE","$key",1310],")",";",["T_WHITESPACE","\n        ",1310],"}",["T_WHITESPACE","\n\n        ",1311],["T_IF","if",1313],["T_WHITESPACE"," ",1313],"(",["T_STRING","count",1313],"(",["T_VARIABLE","$links",1313],")",["T_WHITESPACE"," ",1313],["T_IS_IDENTICAL","===",1313],["T_WHITESPACE"," ",1313],["T_LNUMBER","1",1313],")",["T_WHITESPACE"," ",1313],"{",["T_WHITESPACE","\n            ",1313],["T_RETURN","return",1314],["T_WHITESPACE"," ",1314],["T_VARIABLE","$links",1314],"[",["T_LNUMBER","0",1314],"]",";",["T_WHITESPACE","\n        ",1314],"}",["T_WHITESPACE","\n\n        ",1315],["T_RETURN","return",1317],["T_WHITESPACE"," ",1317],["T_VARIABLE","$links",1317],";",["T_WHITESPACE","\n    ",1317],"}",["T_WHITESPACE","\n\n    ",1318],["T_DOC_COMMENT","\/**\n     * Returns the name of the association from the target table to the junction table,\n     * this name is used to generate alias in the query and to later on retrieve the\n     * results.\n     *\n     * @return string\n     *\/",1320],["T_WHITESPACE","\n    ",1326],["T_PROTECTED","protected",1327],["T_WHITESPACE"," ",1327],["T_FUNCTION","function",1327],["T_WHITESPACE"," ",1327],["T_STRING","_junctionAssociationName",1327],"(",")",["T_WHITESPACE","\n    ",1327],"{",["T_WHITESPACE","\n        ",1328],["T_IF","if",1329],["T_WHITESPACE"," ",1329],"(","!",["T_VARIABLE","$this",1329],["T_OBJECT_OPERATOR","->",1329],["T_STRING","_junctionAssociationName",1329],")",["T_WHITESPACE"," ",1329],"{",["T_WHITESPACE","\n            ",1329],["T_VARIABLE","$this",1330],["T_OBJECT_OPERATOR","->",1330],["T_STRING","_junctionAssociationName",1330],["T_WHITESPACE"," ",1330],"=",["T_WHITESPACE"," ",1330],["T_VARIABLE","$this",1330],["T_OBJECT_OPERATOR","->",1330],["T_STRING","target",1330],"(",")",["T_WHITESPACE","\n                ",1330],["T_OBJECT_OPERATOR","->",1331],["T_STRING","association",1331],"(",["T_VARIABLE","$this",1331],["T_OBJECT_OPERATOR","->",1331],["T_STRING","junction",1331],"(",")",["T_OBJECT_OPERATOR","->",1331],["T_STRING","alias",1331],"(",")",")",["T_WHITESPACE","\n                ",1331],["T_OBJECT_OPERATOR","->",1332],["T_STRING","name",1332],"(",")",";",["T_WHITESPACE","\n        ",1332],"}",["T_WHITESPACE","\n\n        ",1333],["T_RETURN","return",1335],["T_WHITESPACE"," ",1335],["T_VARIABLE","$this",1335],["T_OBJECT_OPERATOR","->",1335],["T_STRING","_junctionAssociationName",1335],";",["T_WHITESPACE","\n    ",1335],"}",["T_WHITESPACE","\n\n    ",1336],["T_DOC_COMMENT","\/**\n     * Sets the name of the junction table.\n     * If no arguments are passed the current configured name is returned. A default\n     * name based of the associated tables will be generated if none found.\n     *\n     * @param string|null $name The name of the junction table.\n     * @return string\n     *\/",1338],["T_WHITESPACE","\n    ",1345],["T_PROTECTED","protected",1346],["T_WHITESPACE"," ",1346],["T_FUNCTION","function",1346],["T_WHITESPACE"," ",1346],["T_STRING","_junctionTableName",1346],"(",["T_VARIABLE","$name",1346],["T_WHITESPACE"," ",1346],"=",["T_WHITESPACE"," ",1346],["T_STRING","null",1346],")",["T_WHITESPACE","\n    ",1346],"{",["T_WHITESPACE","\n        ",1347],["T_IF","if",1348],["T_WHITESPACE"," ",1348],"(",["T_VARIABLE","$name",1348],["T_WHITESPACE"," ",1348],["T_IS_IDENTICAL","===",1348],["T_WHITESPACE"," ",1348],["T_STRING","null",1348],")",["T_WHITESPACE"," ",1348],"{",["T_WHITESPACE","\n            ",1348],["T_IF","if",1349],["T_WHITESPACE"," ",1349],"(",["T_EMPTY","empty",1349],"(",["T_VARIABLE","$this",1349],["T_OBJECT_OPERATOR","->",1349],["T_STRING","_junctionTableName",1349],")",")",["T_WHITESPACE"," ",1349],"{",["T_WHITESPACE","\n                ",1349],["T_VARIABLE","$tablesNames",1350],["T_WHITESPACE"," ",1350],"=",["T_WHITESPACE"," ",1350],["T_STRING","array_map",1350],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Cake\\Utility\\Inflector::underscore'",1350],",",["T_WHITESPACE"," ",1350],"[",["T_WHITESPACE","\n                    ",1350],["T_VARIABLE","$this",1351],["T_OBJECT_OPERATOR","->",1351],["T_STRING","source",1351],"(",")",["T_OBJECT_OPERATOR","->",1351],["T_STRING","table",1351],"(",")",",",["T_WHITESPACE","\n                    ",1351],["T_VARIABLE","$this",1352],["T_OBJECT_OPERATOR","->",1352],["T_STRING","target",1352],"(",")",["T_OBJECT_OPERATOR","->",1352],["T_STRING","table",1352],"(",")",["T_WHITESPACE","\n                ",1352],"]",")",";",["T_WHITESPACE","\n                ",1353],["T_STRING","sort",1354],"(",["T_VARIABLE","$tablesNames",1354],")",";",["T_WHITESPACE","\n                ",1354],["T_VARIABLE","$this",1355],["T_OBJECT_OPERATOR","->",1355],["T_STRING","_junctionTableName",1355],["T_WHITESPACE"," ",1355],"=",["T_WHITESPACE"," ",1355],["T_STRING","implode",1355],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",1355],",",["T_WHITESPACE"," ",1355],["T_VARIABLE","$tablesNames",1355],")",";",["T_WHITESPACE","\n            ",1355],"}",["T_WHITESPACE","\n\n            ",1356],["T_RETURN","return",1358],["T_WHITESPACE"," ",1358],["T_VARIABLE","$this",1358],["T_OBJECT_OPERATOR","->",1358],["T_STRING","_junctionTableName",1358],";",["T_WHITESPACE","\n        ",1358],"}",["T_WHITESPACE","\n\n        ",1359],["T_RETURN","return",1361],["T_WHITESPACE"," ",1361],["T_VARIABLE","$this",1361],["T_OBJECT_OPERATOR","->",1361],["T_STRING","_junctionTableName",1361],["T_WHITESPACE"," ",1361],"=",["T_WHITESPACE"," ",1361],["T_VARIABLE","$name",1361],";",["T_WHITESPACE","\n    ",1361],"}",["T_WHITESPACE","\n\n    ",1362],["T_DOC_COMMENT","\/**\n     * Parse extra options passed in the constructor.\n     *\n     * @param array $opts original list of options passed in constructor\n     * @return void\n     *\/",1364],["T_WHITESPACE","\n    ",1369],["T_PROTECTED","protected",1370],["T_WHITESPACE"," ",1370],["T_FUNCTION","function",1370],["T_WHITESPACE"," ",1370],["T_STRING","_options",1370],"(",["T_ARRAY","array",1370],["T_WHITESPACE"," ",1370],["T_VARIABLE","$opts",1370],")",["T_WHITESPACE","\n    ",1370],"{",["T_WHITESPACE","\n        ",1371],["T_VARIABLE","$this",1372],["T_OBJECT_OPERATOR","->",1372],["T_STRING","_externalOptions",1372],"(",["T_VARIABLE","$opts",1372],")",";",["T_WHITESPACE","\n        ",1372],["T_IF","if",1373],["T_WHITESPACE"," ",1373],"(","!",["T_EMPTY","empty",1373],"(",["T_VARIABLE","$opts",1373],"[",["T_CONSTANT_ENCAPSED_STRING","'targetForeignKey'",1373],"]",")",")",["T_WHITESPACE"," ",1373],"{",["T_WHITESPACE","\n            ",1373],["T_VARIABLE","$this",1374],["T_OBJECT_OPERATOR","->",1374],["T_STRING","targetForeignKey",1374],"(",["T_VARIABLE","$opts",1374],"[",["T_CONSTANT_ENCAPSED_STRING","'targetForeignKey'",1374],"]",")",";",["T_WHITESPACE","\n        ",1374],"}",["T_WHITESPACE","\n        ",1375],["T_IF","if",1376],["T_WHITESPACE"," ",1376],"(","!",["T_EMPTY","empty",1376],"(",["T_VARIABLE","$opts",1376],"[",["T_CONSTANT_ENCAPSED_STRING","'joinTable'",1376],"]",")",")",["T_WHITESPACE"," ",1376],"{",["T_WHITESPACE","\n            ",1376],["T_VARIABLE","$this",1377],["T_OBJECT_OPERATOR","->",1377],["T_STRING","_junctionTableName",1377],"(",["T_VARIABLE","$opts",1377],"[",["T_CONSTANT_ENCAPSED_STRING","'joinTable'",1377],"]",")",";",["T_WHITESPACE","\n        ",1377],"}",["T_WHITESPACE","\n        ",1378],["T_IF","if",1379],["T_WHITESPACE"," ",1379],"(","!",["T_EMPTY","empty",1379],"(",["T_VARIABLE","$opts",1379],"[",["T_CONSTANT_ENCAPSED_STRING","'through'",1379],"]",")",")",["T_WHITESPACE"," ",1379],"{",["T_WHITESPACE","\n            ",1379],["T_VARIABLE","$this",1380],["T_OBJECT_OPERATOR","->",1380],["T_STRING","_through",1380],["T_WHITESPACE"," ",1380],"=",["T_WHITESPACE"," ",1380],["T_VARIABLE","$opts",1380],"[",["T_CONSTANT_ENCAPSED_STRING","'through'",1380],"]",";",["T_WHITESPACE","\n        ",1380],"}",["T_WHITESPACE","\n        ",1381],["T_IF","if",1382],["T_WHITESPACE"," ",1382],"(","!",["T_EMPTY","empty",1382],"(",["T_VARIABLE","$opts",1382],"[",["T_CONSTANT_ENCAPSED_STRING","'saveStrategy'",1382],"]",")",")",["T_WHITESPACE"," ",1382],"{",["T_WHITESPACE","\n            ",1382],["T_VARIABLE","$this",1383],["T_OBJECT_OPERATOR","->",1383],["T_STRING","saveStrategy",1383],"(",["T_VARIABLE","$opts",1383],"[",["T_CONSTANT_ENCAPSED_STRING","'saveStrategy'",1383],"]",")",";",["T_WHITESPACE","\n        ",1383],"}",["T_WHITESPACE","\n    ",1384],"}",["T_WHITESPACE","\n",1385],"}",["T_WHITESPACE","\n",1386]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ORM",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Association",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Database",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Expression",17],["T_NS_SEPARATOR","\\",17],["T_STRING","IdentifierExpression",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Database",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Expression",18],["T_NS_SEPARATOR","\\",18],["T_STRING","TupleComparison",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Database",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ValueBinder",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","InvalidArgumentException",20],";",["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/**\n * Represents a type of association that that can be fetched using another query\n *\/",22],["T_WHITESPACE","\n",24],["T_TRAIT","trait",25],["T_WHITESPACE"," ",25],["T_STRING","SelectableAssociationTrait",25],["T_WHITESPACE","\n",25],"{",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Returns true if the eager loading process will require a set of the owning table's\n     * binding keys in order to use them as a filter in the finder query.\n     *\n     * @param array $options The options containing the strategy to be used.\n     * @return bool true if a list of keys will be required\n     *\/",28],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","requiresKeys",35],"(",["T_ARRAY","array",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$options",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],"[","]",")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$strategy",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_ISSET","isset",37],"(",["T_VARIABLE","$options",37],"[",["T_CONSTANT_ENCAPSED_STRING","'strategy'",37],"]",")",["T_WHITESPACE"," ",37],"?",["T_WHITESPACE"," ",37],["T_VARIABLE","$options",37],"[",["T_CONSTANT_ENCAPSED_STRING","'strategy'",37],"]",["T_WHITESPACE"," ",37],":",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","strategy",37],"(",")",";",["T_WHITESPACE","\n\n        ",37],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$strategy",39],["T_WHITESPACE"," ",39],["T_IS_IDENTICAL","===",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_DOUBLE_COLON","::",39],["T_STRING","STRATEGY_SELECT",39],";",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * {@inheritDoc}\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","eagerLoader",45],"(",["T_ARRAY","array",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$options",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$options",47],["T_WHITESPACE"," ",47],["T_PLUS_EQUAL","+=",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_defaultOptions",47],"(",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$fetchQuery",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_buildQuery",48],"(",["T_VARIABLE","$options",48],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$resultMap",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_buildResultMap",49],"(",["T_VARIABLE","$fetchQuery",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$options",49],")",";",["T_WHITESPACE","\n\n        ",49],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_resultInjector",51],"(",["T_VARIABLE","$fetchQuery",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$resultMap",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$options",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Returns the default options to use for the eagerLoader\n     *\n     * @return array\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","_defaultOptions",59],"(",")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],"[",["T_WHITESPACE","\n            ",61],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","foreignKey",62],"(",")",",",["T_WHITESPACE","\n            ",62],["T_CONSTANT_ENCAPSED_STRING","'conditions'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],"[","]",",",["T_WHITESPACE","\n            ",63],["T_CONSTANT_ENCAPSED_STRING","'strategy'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","strategy",64],"(",")",",",["T_WHITESPACE","\n            ",64],["T_CONSTANT_ENCAPSED_STRING","'nestKey'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_name",65],["T_WHITESPACE","\n        ",65],"]",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Auxiliary function to construct a new Query object to return all the records\n     * in the target table that are associated to those specified in $options from\n     * the source table\n     *\n     * @param array $options options accepted by eagerLoader()\n     * @return \\Cake\\ORM\\Query\n     * @throws \\InvalidArgumentException When a key is required for associations but not selected.\n     *\/",69],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","_buildQuery",78],"(",["T_VARIABLE","$options",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$target",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","target",80],"(",")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$alias",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$target",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","alias",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$key",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_linkField",82],"(",["T_VARIABLE","$options",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$filter",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$options",83],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",83],"]",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$useSubquery",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$options",84],"[",["T_CONSTANT_ENCAPSED_STRING","'strategy'",84],"]",["T_WHITESPACE"," ",84],["T_IS_IDENTICAL","===",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_DOUBLE_COLON","::",84],["T_STRING","STRATEGY_SUBQUERY",84],";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$finder",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_ISSET","isset",86],"(",["T_VARIABLE","$options",86],"[",["T_CONSTANT_ENCAPSED_STRING","'finder'",86],"]",")",["T_WHITESPACE"," ",86],"?",["T_WHITESPACE"," ",86],["T_VARIABLE","$options",86],"[",["T_CONSTANT_ENCAPSED_STRING","'finder'",86],"]",["T_WHITESPACE"," ",86],":",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","finder",86],"(",")",";",["T_WHITESPACE","\n        ",86],["T_LIST","list",87],"(",["T_VARIABLE","$finder",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$opts",87],")",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_extractFinder",87],"(",["T_VARIABLE","$finder",87],")",";",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(","!",["T_ISSET","isset",88],"(",["T_VARIABLE","$options",88],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",88],"]",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$options",89],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",89],"]",["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[","]",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n\n        ",90],["T_VARIABLE","$fetchQuery",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","find",93],"(",["T_VARIABLE","$finder",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$opts",93],")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","select",94],"(",["T_VARIABLE","$options",94],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",94],"]",")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","where",95],"(",["T_VARIABLE","$options",95],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",95],"]",")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","eagerLoaded",96],"(",["T_STRING","true",96],")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","hydrate",97],"(",["T_VARIABLE","$options",97],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",97],"]",["T_OBJECT_OPERATOR","->",97],["T_STRING","hydrate",97],"(",")",")",";",["T_WHITESPACE","\n\n        ",97],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$useSubquery",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$filter",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_buildSubquery",100],"(",["T_VARIABLE","$options",100],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",100],"]",")",";",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$fetchQuery",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_addFilteringJoin",101],"(",["T_VARIABLE","$fetchQuery",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$key",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$filter",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE"," ",102],["T_ELSE","else",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$fetchQuery",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_addFilteringCondition",103],"(",["T_VARIABLE","$fetchQuery",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$key",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$filter",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_EMPTY","empty",106],"(",["T_VARIABLE","$options",106],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",106],"]",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$fetchQuery",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","order",107],"(",["T_VARIABLE","$options",107],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",107],"]",")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n\n        ",108],["T_IF","if",110],["T_WHITESPACE"," ",110],"(","!",["T_EMPTY","empty",110],"(",["T_VARIABLE","$options",110],"[",["T_CONSTANT_ENCAPSED_STRING","'contain'",110],"]",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$fetchQuery",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","contain",111],"(",["T_VARIABLE","$options",111],"[",["T_CONSTANT_ENCAPSED_STRING","'contain'",111],"]",")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n\n        ",112],["T_IF","if",114],["T_WHITESPACE"," ",114],"(","!",["T_EMPTY","empty",114],"(",["T_VARIABLE","$options",114],"[",["T_CONSTANT_ENCAPSED_STRING","'queryBuilder'",114],"]",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$fetchQuery",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$options",115],"[",["T_CONSTANT_ENCAPSED_STRING","'queryBuilder'",115],"]","(",["T_VARIABLE","$fetchQuery",115],")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_assertFieldsPresent",118],"(",["T_VARIABLE","$fetchQuery",118],",",["T_WHITESPACE"," ",118],["T_ARRAY_CAST","(array)",118],["T_VARIABLE","$key",118],")",";",["T_WHITESPACE","\n\n        ",118],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$fetchQuery",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Checks that the fetching query either has auto fields on or\n     * has the foreignKey fields selected.\n     * If the required fields are missing, throws an exception.\n     *\n     * @param \\Cake\\ORM\\Query $fetchQuery The association fetching query\n     * @param array $key The foreign key fields to check\n     * @return void\n     * @throws InvalidArgumentException\n     *\/",123],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","_assertFieldsPresent",133],"(",["T_VARIABLE","$fetchQuery",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$key",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$select",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$fetchQuery",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","aliasFields",135],"(",["T_VARIABLE","$fetchQuery",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","clause",135],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",135],")",")",";",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_EMPTY","empty",136],"(",["T_VARIABLE","$select",136],")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_RETURN","return",137],";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$missingKey",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$fieldList",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$key",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_FOREACH","foreach",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$key",140],["T_WHITESPACE"," ",140],["T_AS","as",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$keyField",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(","!",["T_STRING","in_array",141],"(",["T_VARIABLE","$keyField",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$fieldList",141],",",["T_WHITESPACE"," ",141],["T_STRING","true",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                    ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_STRING","true",142],";",["T_WHITESPACE","\n                ",142],"}",["T_WHITESPACE","\n            ",143],"}",["T_WHITESPACE","\n\n            ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_STRING","false",146],";",["T_WHITESPACE","\n        ",146],"}",";",["T_WHITESPACE","\n\n        ",147],["T_VARIABLE","$missingFields",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$missingKey",149],"(",["T_VARIABLE","$select",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$key",149],")",";",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$missingFields",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$driver",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$fetchQuery",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","connection",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","driver",151],"(",")",";",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$quoted",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","array_map",152],"(","[",["T_VARIABLE","$driver",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",152],"]",",",["T_WHITESPACE"," ",152],["T_VARIABLE","$key",152],")",";",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$missingFields",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$missingKey",153],"(",["T_VARIABLE","$select",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$quoted",153],")",";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n\n        ",154],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$missingFields",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_THROW","throw",157],["T_WHITESPACE"," ",157],["T_NEW","new",157],["T_WHITESPACE"," ",157],["T_STRING","InvalidArgumentException",157],"(",["T_WHITESPACE","\n                ",157],["T_STRING","sprintf",158],"(",["T_WHITESPACE","\n                    ",158],["T_CONSTANT_ENCAPSED_STRING","'You are required to select the \"%s\" field(s)'",159],",",["T_WHITESPACE","\n                    ",159],["T_STRING","implode",160],"(",["T_CONSTANT_ENCAPSED_STRING","', '",160],",",["T_WHITESPACE"," ",160],["T_ARRAY_CAST","(array)",160],["T_VARIABLE","$key",160],")",["T_WHITESPACE","\n                ",160],")",["T_WHITESPACE","\n            ",161],")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Appends any conditions required to load the relevant set of records in the\n     * target table query given a filter key and some filtering values when the\n     * filtering needs to be done using a subquery.\n     *\n     * @param \\Cake\\ORM\\Query $query Target table's query\n     * @param string $key the fields that should be used for filtering\n     * @param \\Cake\\ORM\\Query $subquery The Subquery to use for filtering\n     * @return \\Cake\\ORM\\Query\n     *\/",166],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","_addFilteringJoin",176],"(",["T_VARIABLE","$query",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$key",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$subquery",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$filter",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],"[","]",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$aliasedTable",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","source",179],"(",")",["T_OBJECT_OPERATOR","->",179],["T_STRING","alias",179],"(",")",";",["T_WHITESPACE","\n\n        ",179],["T_FOREACH","foreach",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$subquery",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","clause",181],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",181],")",["T_WHITESPACE"," ",181],["T_AS","as",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$aliasedField",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$field",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_STRING","is_int",182],"(",["T_VARIABLE","$aliasedField",182],")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$filter",183],"[","]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_NEW","new",183],["T_WHITESPACE"," ",183],["T_STRING","IdentifierExpression",183],"(",["T_VARIABLE","$field",183],")",";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE"," ",184],["T_ELSE","else",184],["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$filter",185],"[",["T_VARIABLE","$aliasedField",185],"]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$field",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$subquery",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","select",188],"(",["T_VARIABLE","$filter",188],",",["T_WHITESPACE"," ",188],["T_STRING","true",188],")",";",["T_WHITESPACE","\n\n        ",188],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_STRING","is_array",190],"(",["T_VARIABLE","$key",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$conditions",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_createTupleCondition",191],"(",["T_VARIABLE","$query",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$key",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$filter",191],",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'='",191],")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE"," ",192],["T_ELSE","else",192],["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$filter",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","current",193],"(",["T_VARIABLE","$filter",193],")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n\n        ",194],["T_VARIABLE","$conditions",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_ISSET","isset",196],"(",["T_VARIABLE","$conditions",196],")",["T_WHITESPACE"," ",196],"?",["T_WHITESPACE"," ",196],["T_VARIABLE","$conditions",196],["T_WHITESPACE"," ",196],":",["T_WHITESPACE"," ",196],["T_VARIABLE","$query",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","newExpr",196],"(","[",["T_VARIABLE","$key",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$filter",196],"]",")",";",["T_WHITESPACE","\n\n        ",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$query",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","innerJoin",198],"(",["T_WHITESPACE","\n            ",198],"[",["T_VARIABLE","$aliasedTable",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$subquery",199],"]",",",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$conditions",200],["T_WHITESPACE","\n        ",200],")",";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Appends any conditions required to load the relevant set of records in the\n     * target table query given a filter key and some filtering values.\n     *\n     * @param \\Cake\\ORM\\Query $query Target table's query\n     * @param string|array $key the fields that should be used for filtering\n     * @param mixed $filter the value that should be used to match for $key\n     * @return \\Cake\\ORM\\Query\n     *\/",204],["T_WHITESPACE","\n    ",212],["T_PROTECTED","protected",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","_addFilteringCondition",213],"(",["T_VARIABLE","$query",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$key",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$filter",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_STRING","is_array",215],"(",["T_VARIABLE","$key",215],")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$conditions",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_createTupleCondition",216],"(",["T_VARIABLE","$query",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$key",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$filter",216],",",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'IN'",216],")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n\n        ",217],["T_VARIABLE","$conditions",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_ISSET","isset",219],"(",["T_VARIABLE","$conditions",219],")",["T_WHITESPACE"," ",219],"?",["T_WHITESPACE"," ",219],["T_VARIABLE","$conditions",219],["T_WHITESPACE"," ",219],":",["T_WHITESPACE"," ",219],"[",["T_VARIABLE","$key",219],["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","' IN'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$filter",219],"]",";",["T_WHITESPACE","\n\n        ",219],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$query",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","andWhere",221],"(",["T_VARIABLE","$conditions",221],")",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Returns a TupleComparison object that can be used for matching all the fields\n     * from $keys with the tuple values in $filter using the provided operator.\n     *\n     * @param \\Cake\\ORM\\Query $query Target table's query\n     * @param array $keys the fields that should be used for filtering\n     * @param mixed $filter the value that should be used to match for $key\n     * @param string $operator The operator for comparing the tuples\n     * @return \\Cake\\Database\\Expression\\TupleComparison\n     *\/",224],["T_WHITESPACE","\n    ",233],["T_PROTECTED","protected",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","_createTupleCondition",234],"(",["T_VARIABLE","$query",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$keys",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$filter",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$operator",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$types",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],"[","]",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$defaults",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$query",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","defaultTypes",237],"(",")",";",["T_WHITESPACE","\n        ",237],["T_FOREACH","foreach",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$keys",238],["T_WHITESPACE"," ",238],["T_AS","as",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$k",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_ISSET","isset",239],"(",["T_VARIABLE","$defaults",239],"[",["T_VARIABLE","$k",239],"]",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n                ",239],["T_VARIABLE","$types",240],"[","]",["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$defaults",240],"[",["T_VARIABLE","$k",240],"]",";",["T_WHITESPACE","\n            ",240],"}",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n\n        ",242],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_NEW","new",244],["T_WHITESPACE"," ",244],["T_STRING","TupleComparison",244],"(",["T_VARIABLE","$keys",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$filter",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$types",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$operator",244],")",";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Generates a string used as a table field that contains the values upon\n     * which the filter should be applied\n     *\n     * @param array $options The options for getting the link field.\n     * @return string|array\n     *\/",247],["T_WHITESPACE","\n    ",253],["T_PROTECTED","protected",254],["T_WHITESPACE"," ",254],["T_ABSTRACT","abstract",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","_linkField",254],"(",["T_VARIABLE","$options",254],")",";",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Builds a query to be used as a condition for filtering records in the\n     * target table, it is constructed by cloning the original query that was used\n     * to load records in the source table.\n     *\n     * @param \\Cake\\ORM\\Query $query the original query used to load source records\n     * @return \\Cake\\ORM\\Query\n     *\/",256],["T_WHITESPACE","\n    ",263],["T_PROTECTED","protected",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","_buildSubquery",264],"(",["T_VARIABLE","$query",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$filterQuery",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_CLONE","clone",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$query",266],";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$filterQuery",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","autoFields",267],"(",["T_STRING","false",267],")",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$filterQuery",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","mapReduce",268],"(",["T_STRING","null",268],",",["T_WHITESPACE"," ",268],["T_STRING","null",268],",",["T_WHITESPACE"," ",268],["T_STRING","true",268],")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$filterQuery",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","formatResults",269],"(",["T_STRING","null",269],",",["T_WHITESPACE"," ",269],["T_STRING","true",269],")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$filterQuery",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","contain",270],"(","[","]",",",["T_WHITESPACE"," ",270],["T_STRING","true",270],")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$filterQuery",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","valueBinder",271],"(",["T_NEW","new",271],["T_WHITESPACE"," ",271],["T_STRING","ValueBinder",271],"(",")",")",";",["T_WHITESPACE","\n\n        ",271],["T_IF","if",273],["T_WHITESPACE"," ",273],"(","!",["T_VARIABLE","$filterQuery",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","clause",273],"(",["T_CONSTANT_ENCAPSED_STRING","'limit'",273],")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_VARIABLE","$filterQuery",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","limit",274],"(",["T_STRING","null",274],")",";",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$filterQuery",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","order",275],"(","[","]",",",["T_WHITESPACE"," ",275],["T_STRING","true",275],")",";",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$filterQuery",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","offset",276],"(",["T_STRING","null",276],")",";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_VARIABLE","$fields",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_subqueryFields",279],"(",["T_VARIABLE","$query",279],")",";",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$filterQuery",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","select",280],"(",["T_VARIABLE","$fields",280],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",280],"]",",",["T_WHITESPACE"," ",280],["T_STRING","true",280],")",["T_OBJECT_OPERATOR","->",280],["T_STRING","group",280],"(",["T_VARIABLE","$fields",280],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",280],"]",")",";",["T_WHITESPACE","\n\n        ",280],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$filterQuery",282],";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_DOC_COMMENT","\/**\n     * Calculate the fields that need to participate in a subquery.\n     *\n     * Normally this includes the binding key columns. If there is a an ORDER BY,\n     * those columns are also included as the fields may be calculated or constant values,\n     * that need to be present to ensure the correct association data is loaded.\n     *\n     * @param \\Cake\\ORM\\Query $query The query to get fields from.\n     * @return array The list of fields for the subquery.\n     *\/",285],["T_WHITESPACE","\n    ",294],["T_PROTECTED","protected",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","_subqueryFields",295],"(",["T_VARIABLE","$query",295],")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$keys",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_ARRAY_CAST","(array)",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","bindingKey",297],"(",")",";",["T_WHITESPACE","\n        ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","type",298],"(",")",["T_WHITESPACE"," ",298],["T_IS_IDENTICAL","===",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_DOUBLE_COLON","::",298],["T_STRING","MANY_TO_ONE",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$keys",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_ARRAY_CAST","(array)",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","foreignKey",299],"(",")",";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$fields",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$query",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","aliasFields",301],"(",["T_VARIABLE","$keys",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","source",301],"(",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","alias",301],"(",")",")",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$group",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$fields",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","array_values",302],"(",["T_VARIABLE","$fields",302],")",";",["T_WHITESPACE","\n\n        ",302],["T_VARIABLE","$order",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$query",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","clause",304],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",304],")",";",["T_WHITESPACE","\n        ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$order",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$columns",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$query",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","clause",306],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",306],")",";",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$order",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","iterateParts",307],"(",["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$direction",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$field",307],")",["T_WHITESPACE"," ",307],["T_USE","use",307],["T_WHITESPACE"," ",307],"(","&",["T_VARIABLE","$fields",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$columns",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n                ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(",["T_ISSET","isset",308],"(",["T_VARIABLE","$columns",308],"[",["T_VARIABLE","$field",308],"]",")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n                    ",308],["T_VARIABLE","$fields",309],"[",["T_VARIABLE","$field",309],"]",["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$columns",309],"[",["T_VARIABLE","$field",309],"]",";",["T_WHITESPACE","\n                ",309],"}",["T_WHITESPACE","\n            ",310],"}",")",";",["T_WHITESPACE","\n        ",311],"}",["T_WHITESPACE","\n\n        ",312],["T_RETURN","return",314],["T_WHITESPACE"," ",314],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$fields",314],",",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'group'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$group",314],"]",";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n    ",315],["T_DOC_COMMENT","\/**\n     * Builds an array containing the results from fetchQuery indexed by\n     * the foreignKey value corresponding to this association.\n     *\n     * @param \\Cake\\ORM\\Query $fetchQuery The query to get results from\n     * @param array $options The options passed to the eager loader\n     * @return array\n     *\/",317],["T_WHITESPACE","\n    ",324],["T_PROTECTED","protected",325],["T_WHITESPACE"," ",325],["T_ABSTRACT","abstract",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","_buildResultMap",325],"(",["T_VARIABLE","$fetchQuery",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$options",325],")",";",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Returns a callable to be used for each row in a query result set\n     * for injecting the eager loaded rows\n     *\n     * @param \\Cake\\ORM\\Query $fetchQuery the Query used to fetch results\n     * @param array $resultMap an array with the foreignKey as keys and\n     * the corresponding target table results as value.\n     * @param array $options The options passed to the eagerLoader method\n     * @return \\Closure\n     *\/",327],["T_WHITESPACE","\n    ",336],["T_PROTECTED","protected",337],["T_WHITESPACE"," ",337],["T_FUNCTION","function",337],["T_WHITESPACE"," ",337],["T_STRING","_resultInjector",337],"(",["T_VARIABLE","$fetchQuery",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$resultMap",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$options",337],")",["T_WHITESPACE","\n    ",337],"{",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$source",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","source",339],"(",")",";",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$sAlias",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$source",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","alias",340],"(",")",";",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$keys",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","type",341],"(",")",["T_WHITESPACE"," ",341],["T_IS_IDENTICAL","===",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_DOUBLE_COLON","::",341],["T_STRING","MANY_TO_ONE",341],["T_WHITESPACE"," ",341],"?",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","foreignKey",342],"(",")",["T_WHITESPACE"," ",342],":",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","bindingKey",343],"(",")",";",["T_WHITESPACE","\n\n        ",343],["T_VARIABLE","$sourceKeys",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],"[","]",";",["T_WHITESPACE","\n        ",345],["T_FOREACH","foreach",346],["T_WHITESPACE"," ",346],"(",["T_ARRAY_CAST","(array)",346],["T_VARIABLE","$keys",346],["T_WHITESPACE"," ",346],["T_AS","as",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$key",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n            ",346],["T_VARIABLE","$f",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$fetchQuery",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","aliasField",347],"(",["T_VARIABLE","$key",347],",",["T_WHITESPACE"," ",347],["T_VARIABLE","$sAlias",347],")",";",["T_WHITESPACE","\n            ",347],["T_VARIABLE","$sourceKeys",348],"[","]",["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","key",348],"(",["T_VARIABLE","$f",348],")",";",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE","\n\n        ",349],["T_VARIABLE","$nestKey",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$options",351],"[",["T_CONSTANT_ENCAPSED_STRING","'nestKey'",351],"]",";",["T_WHITESPACE","\n        ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_STRING","count",352],"(",["T_VARIABLE","$sourceKeys",352],")",["T_WHITESPACE"," ",352],">",["T_WHITESPACE"," ",352],["T_LNUMBER","1",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","_multiKeysInjector",353],"(",["T_VARIABLE","$resultMap",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$sourceKeys",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$nestKey",353],")",";",["T_WHITESPACE","\n        ",353],"}",["T_WHITESPACE","\n\n        ",354],["T_VARIABLE","$sourceKey",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$sourceKeys",356],"[",["T_LNUMBER","0",356],"]",";",["T_WHITESPACE","\n\n        ",356],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_FUNCTION","function",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$row",358],")",["T_WHITESPACE"," ",358],["T_USE","use",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$resultMap",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$sourceKey",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$nestKey",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_IF","if",359],["T_WHITESPACE"," ",359],"(",["T_ISSET","isset",359],"(",["T_VARIABLE","$row",359],"[",["T_VARIABLE","$sourceKey",359],"]",",",["T_WHITESPACE"," ",359],["T_VARIABLE","$resultMap",359],"[",["T_VARIABLE","$row",359],"[",["T_VARIABLE","$sourceKey",359],"]","]",")",")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                ",359],["T_VARIABLE","$row",360],"[",["T_VARIABLE","$nestKey",360],"]",["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$resultMap",360],"[",["T_VARIABLE","$row",360],"[",["T_VARIABLE","$sourceKey",360],"]","]",";",["T_WHITESPACE","\n            ",360],"}",["T_WHITESPACE","\n\n            ",361],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$row",363],";",["T_WHITESPACE","\n        ",363],"}",";",["T_WHITESPACE","\n    ",364],"}",["T_WHITESPACE","\n\n    ",365],["T_DOC_COMMENT","\/**\n     * Returns a callable to be used for each row in a query result set\n     * for injecting the eager loaded rows when the matching needs to\n     * be done with multiple foreign keys\n     *\n     * @param array $resultMap A keyed arrays containing the target table\n     * @param array $sourceKeys An array with aliased keys to match\n     * @param string $nestKey The key under which results should be nested\n     * @return \\Closure\n     *\/",367],["T_WHITESPACE","\n    ",376],["T_PROTECTED","protected",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","_multiKeysInjector",377],"(",["T_VARIABLE","$resultMap",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$sourceKeys",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$nestKey",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$row",379],")",["T_WHITESPACE"," ",379],["T_USE","use",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$resultMap",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$sourceKeys",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$nestKey",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_VARIABLE","$values",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],"[","]",";",["T_WHITESPACE","\n            ",380],["T_FOREACH","foreach",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$sourceKeys",381],["T_WHITESPACE"," ",381],["T_AS","as",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$key",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$values",382],"[","]",["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$row",382],"[",["T_VARIABLE","$key",382],"]",";",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE","\n\n            ",383],["T_VARIABLE","$key",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_STRING","implode",385],"(",["T_CONSTANT_ENCAPSED_STRING","';'",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$values",385],")",";",["T_WHITESPACE","\n            ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(",["T_ISSET","isset",386],"(",["T_VARIABLE","$resultMap",386],"[",["T_VARIABLE","$key",386],"]",")",")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n                ",386],["T_VARIABLE","$row",387],"[",["T_VARIABLE","$nestKey",387],"]",["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$resultMap",387],"[",["T_VARIABLE","$key",387],"]",";",["T_WHITESPACE","\n            ",387],"}",["T_WHITESPACE","\n\n            ",388],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$row",390],";",["T_WHITESPACE","\n        ",390],"}",";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n",392],"}",["T_WHITESPACE","\n",393]]
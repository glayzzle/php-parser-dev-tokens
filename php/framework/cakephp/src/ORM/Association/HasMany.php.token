[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",15],["T_NAMESPACE","namespace",16],["T_WHITESPACE"," ",16],["T_STRING","Cake",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ORM",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Association",16],";",["T_WHITESPACE","\n\n",16],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Collection",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Collection",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Database",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Expression",19],["T_NS_SEPARATOR","\\",19],["T_STRING","FieldInterface",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Cake",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Database",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Expression",20],["T_NS_SEPARATOR","\\",20],["T_STRING","QueryExpression",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Cake",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Datasource",21],["T_NS_SEPARATOR","\\",21],["T_STRING","EntityInterface",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Cake",22],["T_NS_SEPARATOR","\\",22],["T_STRING","ORM",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Association",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Cake",23],["T_NS_SEPARATOR","\\",23],["T_STRING","ORM",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Table",23],";",["T_WHITESPACE","\n",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","InvalidArgumentException",24],";",["T_WHITESPACE","\n",24],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","RuntimeException",25],";",["T_WHITESPACE","\n",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","Traversable",26],";",["T_WHITESPACE","\n\n",26],["T_DOC_COMMENT","\/**\n * Represents an N - 1 relationship where the target side of the relationship\n * will have one or multiple records per each one in the source side.\n *\n * An example of a HasMany association would be Author has many Articles.\n *\/",28],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","HasMany",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Association",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n\n    ",35],["T_USE","use",37],["T_WHITESPACE"," ",37],["T_STRING","DependentDeleteTrait",37],";",["T_WHITESPACE","\n    ",37],["T_USE","use",38],["T_WHITESPACE"," ",38],["T_STRING","ExternalAssociationTrait",38],["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n        ",38],["T_STRING","_options",39],["T_WHITESPACE"," ",39],["T_AS","as",39],["T_WHITESPACE"," ",39],["T_STRING","_externalOptions",39],";",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * The type of join to be used when adding the association to a query\n     *\n     * @var string\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_joinType",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'INNER'",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * The strategy name to be used to fetch associated records.\n     *\n     * @var string\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_strategy",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","self",54],["T_DOUBLE_COLON","::",54],["T_STRING","STRATEGY_SELECT",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Valid strategies for this type of association\n     *\n     * @var array\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_validStrategies",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],"[",["T_STRING","self",61],["T_DOUBLE_COLON","::",61],["T_STRING","STRATEGY_SELECT",61],",",["T_WHITESPACE"," ",61],["T_STRING","self",61],["T_DOUBLE_COLON","::",61],["T_STRING","STRATEGY_SUBQUERY",61],"]",";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Saving strategy that will only append to the links set\n     *\n     * @var string\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_CONST","const",68],["T_WHITESPACE"," ",68],["T_STRING","SAVE_APPEND",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'append'",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Saving strategy that will replace the links with the provided set\n     *\n     * @var string\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_CONST","const",75],["T_WHITESPACE"," ",75],["T_STRING","SAVE_REPLACE",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'replace'",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Saving strategy to be used by this association\n     *\n     * @var string\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_saveStrategy",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","self",82],["T_DOUBLE_COLON","::",82],["T_STRING","SAVE_APPEND",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Returns whether or not the passed table is the owning side for this\n     * association. This means that rows in the 'target' table would miss important\n     * or required information if the row in 'source' did not exist.\n     *\n     * @param \\Cake\\ORM\\Table $side The potential Table with ownership\n     * @return bool\n     *\/",84],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","isOwningSide",92],"(",["T_STRING","Table",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$side",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$side",94],["T_WHITESPACE"," ",94],["T_IS_IDENTICAL","===",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","source",94],"(",")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Sets the strategy that should be used for saving. If called with no\n     * arguments, it will return the currently configured strategy\n     *\n     * @param string|null $strategy the strategy name to be used\n     * @throws \\InvalidArgumentException if an invalid strategy name is passed\n     * @return string the strategy to be used for saving\n     *\/",97],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","saveStrategy",105],"(",["T_VARIABLE","$strategy",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","null",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$strategy",107],["T_WHITESPACE"," ",107],["T_IS_IDENTICAL","===",107],["T_WHITESPACE"," ",107],["T_STRING","null",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_saveStrategy",108],";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(","!",["T_STRING","in_array",110],"(",["T_VARIABLE","$strategy",110],",",["T_WHITESPACE"," ",110],"[",["T_STRING","self",110],["T_DOUBLE_COLON","::",110],["T_STRING","SAVE_APPEND",110],",",["T_WHITESPACE"," ",110],["T_STRING","self",110],["T_DOUBLE_COLON","::",110],["T_STRING","SAVE_REPLACE",110],"]",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$msg",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","sprintf",111],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid save strategy \"%s\"'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$strategy",111],")",";",["T_WHITESPACE","\n            ",111],["T_THROW","throw",112],["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_STRING","InvalidArgumentException",112],"(",["T_VARIABLE","$msg",112],")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_saveStrategy",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$strategy",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Takes an entity from the source table and looks if there is a field\n     * matching the property name for this association. The found entity will be\n     * saved on the target table for this association by passing supplied\n     * `$options`\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $entity an entity from the source table\n     * @param array|\\ArrayObject $options options to be passed to the save method in\n     * the target table\n     * @return bool|\\Cake\\Datasource\\EntityInterface false if $entity could not be saved, otherwise it returns\n     * the saved entity\n     * @see \\Cake\\ORM\\Table::save()\n     * @throws \\InvalidArgumentException when the association data cannot be traversed.\n     *\/",118],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","saveAssociated",132],"(",["T_STRING","EntityInterface",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$entity",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$options",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],"[","]",")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$targetEntities",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$entity",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","get",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","property",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_EMPTY","empty",135],"(",["T_VARIABLE","$targetEntities",135],")",["T_WHITESPACE"," ",135],["T_BOOLEAN_AND","&&",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_saveStrategy",135],["T_WHITESPACE"," ",135],["T_IS_NOT_IDENTICAL","!==",135],["T_WHITESPACE"," ",135],["T_STRING","self",135],["T_DOUBLE_COLON","::",135],["T_STRING","SAVE_REPLACE",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$entity",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_STRING","is_array",139],"(",["T_VARIABLE","$targetEntities",139],")",["T_WHITESPACE"," ",139],["T_BOOLEAN_AND","&&",139],["T_WHITESPACE"," ",139],"!","(",["T_VARIABLE","$targetEntities",139],["T_WHITESPACE"," ",139],["T_INSTANCEOF","instanceof",139],["T_WHITESPACE"," ",139],["T_STRING","Traversable",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$name",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","property",140],"(",")",";",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$message",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","sprintf",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not save %s, it cannot be traversed'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$name",141],")",";",["T_WHITESPACE","\n            ",141],["T_THROW","throw",142],["T_WHITESPACE"," ",142],["T_NEW","new",142],["T_WHITESPACE"," ",142],["T_STRING","InvalidArgumentException",142],"(",["T_VARIABLE","$message",142],")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$foreignKey",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_ARRAY_CAST","(array)",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","foreignKey",145],"(",")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$properties",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","array_combine",146],"(",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$foreignKey",147],",",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$entity",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","extract",148],"(",["T_ARRAY_CAST","(array)",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","bindingKey",148],"(",")",")",["T_WHITESPACE","\n        ",148],")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$target",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","target",150],"(",")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$original",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$targetEntities",151],";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$options",152],"[",["T_CONSTANT_ENCAPSED_STRING","'_sourceTable'",152],"]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","source",152],"(",")",";",["T_WHITESPACE","\n\n        ",152],["T_VARIABLE","$unlinkSuccessful",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","null",154],";",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_saveStrategy",155],["T_WHITESPACE"," ",155],["T_IS_IDENTICAL","===",155],["T_WHITESPACE"," ",155],["T_STRING","self",155],["T_DOUBLE_COLON","::",155],["T_STRING","SAVE_REPLACE",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$unlinkSuccessful",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_unlinkAssociated",156],"(",["T_VARIABLE","$properties",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$entity",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$target",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$targetEntities",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$options",156],")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n\n        ",157],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$unlinkSuccessful",159],["T_WHITESPACE"," ",159],["T_IS_IDENTICAL","===",159],["T_WHITESPACE"," ",159],["T_STRING","false",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_STRING","false",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_FOREACH","foreach",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$targetEntities",163],["T_WHITESPACE"," ",163],["T_AS","as",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$k",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$targetEntity",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(","!","(",["T_VARIABLE","$targetEntity",164],["T_WHITESPACE"," ",164],["T_INSTANCEOF","instanceof",164],["T_WHITESPACE"," ",164],["T_STRING","EntityInterface",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                ",164],["T_BREAK","break",165],";",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE","\n\n            ",166],["T_IF","if",168],["T_WHITESPACE"," ",168],"(","!",["T_EMPTY","empty",168],"(",["T_VARIABLE","$options",168],"[",["T_CONSTANT_ENCAPSED_STRING","'atomic'",168],"]",")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$targetEntity",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_CLONE","clone",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$targetEntity",169],";",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE","\n\n            ",170],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$properties",172],["T_WHITESPACE"," ",172],["T_IS_NOT_IDENTICAL","!==",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$targetEntity",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","extract",172],"(",["T_VARIABLE","$foreignKey",172],")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$targetEntity",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","set",173],"(",["T_VARIABLE","$properties",173],",",["T_WHITESPACE"," ",173],"[",["T_CONSTANT_ENCAPSED_STRING","'guard'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_STRING","false",173],"]",")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n\n            ",174],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$target",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","save",176],"(",["T_VARIABLE","$targetEntity",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$options",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$targetEntities",177],"[",["T_VARIABLE","$k",177],"]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$targetEntity",177],";",["T_WHITESPACE","\n                ",177],["T_CONTINUE","continue",178],";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n\n            ",179],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_EMPTY","empty",181],"(",["T_VARIABLE","$options",181],"[",["T_CONSTANT_ENCAPSED_STRING","'atomic'",181],"]",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$original",182],"[",["T_VARIABLE","$k",182],"]",["T_OBJECT_OPERATOR","->",182],["T_STRING","errors",182],"(",["T_VARIABLE","$targetEntity",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","errors",182],"(",")",")",";",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$entity",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","set",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","property",183],"(",")",",",["T_WHITESPACE"," ",183],["T_VARIABLE","$original",183],")",";",["T_WHITESPACE","\n\n                ",183],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_STRING","false",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$entity",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","set",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","property",189],"(",")",",",["T_WHITESPACE"," ",189],["T_VARIABLE","$targetEntities",189],")",";",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$entity",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Associates the source entity to each of the target entities provided.\n     * When using this method, all entities in `$targetEntities` will be appended to\n     * the source entity's property corresponding to this association object.\n     *\n     * This method does not check link uniqueness.\n     * Changes are persisted in the database and also in the source entity.\n     *\n     * ### Example:\n     *\n     * ```\n     * $user = $users->get(1);\n     * $allArticles = $articles->find('all')->toArray();\n     * $users->Articles->link($user, $allArticles);\n     * ```\n     *\n     * `$user->get('articles')` will contain all articles in `$allArticles` after linking\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity the row belonging to the `source` side\n     * of this association\n     * @param array $targetEntities list of entities belonging to the `target` side\n     * of this association\n     * @param array $options list of options to be passed to the internal `save` call\n     * @return bool true on success, false otherwise\n     *\/",194],["T_WHITESPACE","\n    ",218],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","link",219],"(",["T_STRING","EntityInterface",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$sourceEntity",219],",",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$targetEntities",219],",",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$options",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],"[","]",")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$saveStrategy",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","saveStrategy",221],"(",")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","saveStrategy",222],"(",["T_STRING","self",222],["T_DOUBLE_COLON","::",222],["T_STRING","SAVE_APPEND",222],")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$property",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","property",223],"(",")",";",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$currentEntities",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_STRING","array_unique",225],"(",["T_WHITESPACE","\n            ",225],["T_STRING","array_merge",226],"(",["T_WHITESPACE","\n                ",226],["T_ARRAY_CAST","(array)",227],["T_VARIABLE","$sourceEntity",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","get",227],"(",["T_VARIABLE","$property",227],")",",",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$targetEntities",228],["T_WHITESPACE","\n            ",228],")",["T_WHITESPACE","\n        ",229],")",";",["T_WHITESPACE","\n\n        ",230],["T_VARIABLE","$sourceEntity",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","set",232],"(",["T_VARIABLE","$property",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$currentEntities",232],")",";",["T_WHITESPACE","\n\n        ",232],["T_VARIABLE","$savedEntity",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","connection",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","transactional",234],"(",["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],"(",")",["T_WHITESPACE"," ",234],["T_USE","use",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$sourceEntity",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$options",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","saveAssociated",235],"(",["T_VARIABLE","$sourceEntity",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$options",235],")",";",["T_WHITESPACE","\n        ",235],"}",")",";",["T_WHITESPACE","\n\n        ",236],["T_VARIABLE","$ok",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$savedEntity",238],["T_WHITESPACE"," ",238],["T_INSTANCEOF","instanceof",238],["T_WHITESPACE"," ",238],["T_STRING","EntityInterface",238],")",";",["T_WHITESPACE","\n\n        ",238],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","saveStrategy",240],"(",["T_VARIABLE","$saveStrategy",240],")",";",["T_WHITESPACE","\n\n        ",240],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$ok",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$sourceEntity",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","set",243],"(",["T_VARIABLE","$property",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$savedEntity",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","get",243],"(",["T_VARIABLE","$property",243],")",")",";",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$sourceEntity",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","dirty",244],"(",["T_VARIABLE","$property",244],",",["T_WHITESPACE"," ",244],["T_STRING","false",244],")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n\n        ",245],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$ok",247],";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Removes all links between the passed source entity and each of the provided\n     * target entities. This method assumes that all passed objects are already persisted\n     * in the database and that each of them contain a primary key value.\n     *\n     * ### Options\n     *\n     * Additionally to the default options accepted by `Table::delete()`, the following\n     * keys are supported:\n     *\n     * - cleanProperty: Whether or not to remove all the objects in `$targetEntities` that\n     * are stored in `$sourceEntity` (default: true)\n     *\n     * By default this method will unset each of the entity objects stored inside the\n     * source entity.\n     *\n     * Changes are persisted in the database and also in the source entity.\n     *\n     * ### Example:\n     *\n     * ```\n     * $user = $users->get(1);\n     * $user->articles = [$article1, $article2, $article3, $article4];\n     * $users->save($user, ['Associated' => ['Articles']]);\n     * $allArticles = [$article1, $article2, $article3];\n     * $users->Articles->unlink($user, $allArticles);\n     * ```\n     *\n     * `$article->get('articles')` will contain only `[$article4]` after deleting in the database\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity an entity persisted in the source table for\n     * this association\n     * @param array $targetEntities list of entities persisted in the target table for\n     * this association\n     * @param array $options list of options to be passed to the internal `delete` call\n     * @throws \\InvalidArgumentException if non persisted entities are passed or if\n     * any of them is lacking a primary key value\n     * @return void\n     *\/",250],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","unlink",289],"(",["T_STRING","EntityInterface",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$sourceEntity",289],",",["T_WHITESPACE"," ",289],["T_ARRAY","array",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$targetEntities",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$options",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],"[","]",")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_STRING","is_bool",291],"(",["T_VARIABLE","$options",291],")",")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$options",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],"[",["T_WHITESPACE","\n                ",292],["T_CONSTANT_ENCAPSED_STRING","'cleanProperty'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$options",293],["T_WHITESPACE","\n            ",293],"]",";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE"," ",295],["T_ELSE","else",295],["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$options",296],["T_WHITESPACE"," ",296],["T_PLUS_EQUAL","+=",296],["T_WHITESPACE"," ",296],"[",["T_CONSTANT_ENCAPSED_STRING","'cleanProperty'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_STRING","true",296],"]",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_STRING","count",298],"(",["T_VARIABLE","$targetEntities",298],")",["T_WHITESPACE"," ",298],["T_IS_IDENTICAL","===",298],["T_WHITESPACE"," ",298],["T_LNUMBER","0",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_RETURN","return",299],";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n\n        ",300],["T_VARIABLE","$foreignKey",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_ARRAY_CAST","(array)",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","foreignKey",302],"(",")",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$target",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","target",303],"(",")",";",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$targetPrimaryKey",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","array_merge",304],"(",["T_ARRAY_CAST","(array)",304],["T_VARIABLE","$target",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","primaryKey",304],"(",")",",",["T_WHITESPACE"," ",304],["T_VARIABLE","$foreignKey",304],")",";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$property",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","property",305],"(",")",";",["T_WHITESPACE","\n\n        ",305],["T_VARIABLE","$conditions",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],"[",["T_WHITESPACE","\n            ",307],["T_CONSTANT_ENCAPSED_STRING","'OR'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],"(",["T_NEW","new",308],["T_WHITESPACE"," ",308],["T_STRING","Collection",308],"(",["T_VARIABLE","$targetEntities",308],")",")",["T_WHITESPACE","\n                ",308],["T_OBJECT_OPERATOR","->",309],["T_STRING","map",309],"(",["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$entity",309],")",["T_WHITESPACE"," ",309],["T_USE","use",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$targetPrimaryKey",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                    ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$entity",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","extract",310],"(",["T_VARIABLE","$targetPrimaryKey",310],")",";",["T_WHITESPACE","\n                ",310],"}",")",["T_WHITESPACE","\n                ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","toList",312],"(",")",["T_WHITESPACE","\n        ",312],"]",";",["T_WHITESPACE","\n\n        ",313],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","_unlink",315],"(",["T_VARIABLE","$foreignKey",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$target",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$conditions",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$options",315],")",";",["T_WHITESPACE","\n\n        ",315],["T_VARIABLE","$result",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$sourceEntity",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","get",317],"(",["T_VARIABLE","$property",317],")",";",["T_WHITESPACE","\n        ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$options",318],"[",["T_CONSTANT_ENCAPSED_STRING","'cleanProperty'",318],"]",["T_WHITESPACE"," ",318],["T_BOOLEAN_AND","&&",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$result",318],["T_WHITESPACE"," ",318],["T_IS_NOT_IDENTICAL","!==",318],["T_WHITESPACE"," ",318],["T_STRING","null",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$sourceEntity",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","set",319],"(",["T_WHITESPACE","\n                ",319],["T_VARIABLE","$property",320],",",["T_WHITESPACE","\n                ",320],"(",["T_NEW","new",321],["T_WHITESPACE"," ",321],["T_STRING","Collection",321],"(",["T_VARIABLE","$sourceEntity",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","get",321],"(",["T_VARIABLE","$property",321],")",")",")",["T_WHITESPACE","\n                ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","reject",322],"(",["T_WHITESPACE","\n                    ",322],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$assoc",323],")",["T_WHITESPACE"," ",323],["T_USE","use",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$targetEntities",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                        ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_STRING","in_array",324],"(",["T_VARIABLE","$assoc",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$targetEntities",324],")",";",["T_WHITESPACE","\n                    ",324],"}",["T_WHITESPACE","\n                ",325],")",["T_WHITESPACE","\n                ",326],["T_OBJECT_OPERATOR","->",327],["T_STRING","toList",327],"(",")",["T_WHITESPACE","\n            ",327],")",";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n\n        ",329],["T_VARIABLE","$sourceEntity",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","dirty",331],"(",["T_VARIABLE","$property",331],",",["T_WHITESPACE"," ",331],["T_STRING","false",331],")",";",["T_WHITESPACE","\n    ",331],"}",["T_WHITESPACE","\n\n    ",332],["T_DOC_COMMENT","\/**\n     * Replaces existing association links between the source entity and the target\n     * with the ones passed. This method does a smart cleanup, links that are already\n     * persisted and present in `$targetEntities` will not be deleted, new links will\n     * be created for the passed target entities that are not already in the database\n     * and the rest will be removed.\n     *\n     * For example, if an author has many articles, such as 'article1','article 2' and 'article 3' and you pass\n     * to this method an array containing the entities for articles 'article 1' and 'article 4',\n     * only the link for 'article 1' will be kept in database, the links for 'article 2' and 'article 3' will be\n     * deleted and the link for 'article 4' will be created.\n     *\n     * Existing links are not deleted and created again, they are either left untouched\n     * or updated.\n     *\n     * This method does not check link uniqueness.\n     *\n     * On success, the passed `$sourceEntity` will contain `$targetEntities` as  value\n     * in the corresponding property for this association.\n     *\n     * Additional options for new links to be saved can be passed in the third argument,\n     * check `Table::save()` for information on the accepted options.\n     *\n     * ### Example:\n     *\n     * ```\n     * $author->articles = [$article1, $article2, $article3, $article4];\n     * $authors->save($author);\n     * $articles = [$article1, $article3];\n     * $authors->association('articles')->replace($author, $articles);\n     * ```\n     *\n     * `$author->get('articles')` will contain only `[$article1, $article3]` at the end\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $sourceEntity an entity persisted in the source table for\n     * this association\n     * @param array $targetEntities list of entities from the target table to be linked\n     * @param array $options list of options to be passed to the internal `save`\/`delete` calls\n     * when persisting\/updating new links, or deleting existing ones\n     * @throws \\InvalidArgumentException if non persisted entities are passed or if\n     * any of them is lacking a primary key value\n     * @return bool success\n     *\/",334],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","replace",377],"(",["T_STRING","EntityInterface",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$sourceEntity",377],",",["T_WHITESPACE"," ",377],["T_ARRAY","array",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$targetEntities",377],",",["T_WHITESPACE"," ",377],["T_ARRAY","array",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$options",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],"[","]",")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$property",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","property",379],"(",")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$sourceEntity",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","set",380],"(",["T_VARIABLE","$property",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$targetEntities",380],")",";",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$saveStrategy",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","saveStrategy",381],"(",")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","saveStrategy",382],"(",["T_STRING","self",382],["T_DOUBLE_COLON","::",382],["T_STRING","SAVE_REPLACE",382],")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$result",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","saveAssociated",383],"(",["T_VARIABLE","$sourceEntity",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$options",383],")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$ok",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],"(",["T_VARIABLE","$result",384],["T_WHITESPACE"," ",384],["T_INSTANCEOF","instanceof",384],["T_WHITESPACE"," ",384],["T_STRING","EntityInterface",384],")",";",["T_WHITESPACE","\n\n        ",384],["T_IF","if",386],["T_WHITESPACE"," ",386],"(",["T_VARIABLE","$ok",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n            ",386],["T_VARIABLE","$sourceEntity",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$result",387],";",["T_WHITESPACE","\n        ",387],"}",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","saveStrategy",389],"(",["T_VARIABLE","$saveStrategy",389],")",";",["T_WHITESPACE","\n\n        ",389],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$ok",391],";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n\n    ",392],["T_DOC_COMMENT","\/**\n     * Deletes\/sets null the related objects according to the dependency between source and targets and foreign key nullability\n     * Skips deleting records present in $remainingEntities\n     *\n     * @param array $properties array of foreignKey properties\n     * @param \\Cake\\Datasource\\EntityInterface $entity the entity which should have its associated entities unassigned\n     * @param \\Cake\\ORM\\Table $target The associated table\n     * @param array $remainingEntities Entities that should not be deleted\n     * @param array $options list of options accepted by `Table::delete()`\n     * @return bool success\n     *\/",394],["T_WHITESPACE","\n    ",404],["T_PROTECTED","protected",405],["T_WHITESPACE"," ",405],["T_FUNCTION","function",405],["T_WHITESPACE"," ",405],["T_STRING","_unlinkAssociated",405],"(",["T_ARRAY","array",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$properties",405],",",["T_WHITESPACE"," ",405],["T_STRING","EntityInterface",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$entity",405],",",["T_WHITESPACE"," ",405],["T_STRING","Table",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$target",405],",",["T_WHITESPACE"," ",405],["T_ARRAY","array",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$remainingEntities",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],"[","]",",",["T_WHITESPACE"," ",405],["T_ARRAY","array",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$options",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],"[","]",")",["T_WHITESPACE","\n    ",405],"{",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$primaryKey",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_ARRAY_CAST","(array)",407],["T_VARIABLE","$target",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","primaryKey",407],"(",")",";",["T_WHITESPACE","\n        ",407],["T_VARIABLE","$exclusions",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_NEW","new",408],["T_WHITESPACE"," ",408],["T_STRING","Collection",408],"(",["T_VARIABLE","$remainingEntities",408],")",";",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$exclusions",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$exclusions",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","map",409],"(",["T_WHITESPACE","\n            ",409],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$ent",410],")",["T_WHITESPACE"," ",410],["T_USE","use",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$primaryKey",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                ",410],["T_RETURN","return",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$ent",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","extract",411],"(",["T_VARIABLE","$primaryKey",411],")",";",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE","\n        ",412],")",["T_WHITESPACE","\n        ",413],["T_OBJECT_OPERATOR","->",414],["T_STRING","filter",414],"(",["T_WHITESPACE","\n            ",414],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],"(",["T_VARIABLE","$v",415],")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n                ",415],["T_RETURN","return",416],["T_WHITESPACE"," ",416],"!",["T_STRING","in_array",416],"(",["T_STRING","null",416],",",["T_WHITESPACE"," ",416],["T_STRING","array_values",416],"(",["T_VARIABLE","$v",416],")",",",["T_WHITESPACE"," ",416],["T_STRING","true",416],")",";",["T_WHITESPACE","\n            ",416],"}",["T_WHITESPACE","\n        ",417],")",["T_WHITESPACE","\n        ",418],["T_OBJECT_OPERATOR","->",419],["T_STRING","toArray",419],"(",")",";",["T_WHITESPACE","\n\n        ",419],["T_VARIABLE","$conditions",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$properties",421],";",["T_WHITESPACE","\n\n        ",421],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_STRING","count",423],"(",["T_VARIABLE","$exclusions",423],")",["T_WHITESPACE"," ",423],">",["T_WHITESPACE"," ",423],["T_LNUMBER","0",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_VARIABLE","$conditions",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],"[",["T_WHITESPACE","\n                ",424],["T_CONSTANT_ENCAPSED_STRING","'NOT'",425],["T_WHITESPACE"," ",425],["T_DOUBLE_ARROW","=>",425],["T_WHITESPACE"," ",425],"[",["T_WHITESPACE","\n                    ",425],["T_CONSTANT_ENCAPSED_STRING","'OR'",426],["T_WHITESPACE"," ",426],["T_DOUBLE_ARROW","=>",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$exclusions",426],["T_WHITESPACE","\n                ",426],"]",",",["T_WHITESPACE","\n                ",427],["T_VARIABLE","$properties",428],["T_WHITESPACE","\n            ",428],"]",";",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n\n        ",430],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_unlink",432],"(",["T_STRING","array_keys",432],"(",["T_VARIABLE","$properties",432],")",",",["T_WHITESPACE"," ",432],["T_VARIABLE","$target",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$conditions",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$options",432],")",";",["T_WHITESPACE","\n    ",432],"}",["T_WHITESPACE","\n\n    ",433],["T_DOC_COMMENT","\/**\n     * Deletes\/sets null the related objects matching $conditions.\n     * The action which is taken depends on the dependency between source and targets and also on foreign key nullability\n     *\n     * @param array $foreignKey array of foreign key properties\n     * @param \\Cake\\ORM\\Table $target The associated table\n     * @param array $conditions The conditions that specifies what are the objects to be unlinked\n     * @param array $options list of options accepted by `Table::delete()`\n     * @return bool success\n     *\/",435],["T_WHITESPACE","\n    ",444],["T_PROTECTED","protected",445],["T_WHITESPACE"," ",445],["T_FUNCTION","function",445],["T_WHITESPACE"," ",445],["T_STRING","_unlink",445],"(",["T_ARRAY","array",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$foreignKey",445],",",["T_WHITESPACE"," ",445],["T_STRING","Table",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$target",445],",",["T_WHITESPACE"," ",445],["T_ARRAY","array",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$conditions",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],"[","]",",",["T_WHITESPACE"," ",445],["T_ARRAY","array",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$options",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],"[","]",")",["T_WHITESPACE","\n    ",445],"{",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$mustBeDependent",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],"(","!",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_foreignKeyAcceptsNull",447],"(",["T_VARIABLE","$target",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$foreignKey",447],")",["T_WHITESPACE"," ",447],["T_BOOLEAN_OR","||",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","dependent",447],"(",")",")",";",["T_WHITESPACE","\n\n        ",447],["T_IF","if",449],["T_WHITESPACE"," ",449],"(",["T_VARIABLE","$mustBeDependent",449],")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_IF","if",450],["T_WHITESPACE"," ",450],"(",["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_cascadeCallbacks",450],")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$conditions",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_NEW","new",451],["T_WHITESPACE"," ",451],["T_STRING","QueryExpression",451],"(",["T_VARIABLE","$conditions",451],")",";",["T_WHITESPACE","\n                ",451],["T_VARIABLE","$conditions",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","traverse",452],"(",["T_FUNCTION","function",452],["T_WHITESPACE"," ",452],"(",["T_VARIABLE","$entry",452],")",["T_WHITESPACE"," ",452],["T_USE","use",452],["T_WHITESPACE"," ",452],"(",["T_VARIABLE","$target",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n                    ",452],["T_IF","if",453],["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$entry",453],["T_WHITESPACE"," ",453],["T_INSTANCEOF","instanceof",453],["T_WHITESPACE"," ",453],["T_STRING","FieldInterface",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n                        ",453],["T_VARIABLE","$entry",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","setField",454],"(",["T_VARIABLE","$target",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","aliasField",454],"(",["T_VARIABLE","$entry",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getField",454],"(",")",")",")",";",["T_WHITESPACE","\n                    ",454],"}",["T_WHITESPACE","\n                ",455],"}",")",";",["T_WHITESPACE","\n                ",456],["T_VARIABLE","$query",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","find",457],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",457],")",["T_OBJECT_OPERATOR","->",457],["T_STRING","where",457],"(",["T_VARIABLE","$conditions",457],")",";",["T_WHITESPACE","\n                ",457],["T_VARIABLE","$ok",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","true",458],";",["T_WHITESPACE","\n                ",458],["T_FOREACH","foreach",459],["T_WHITESPACE"," ",459],"(",["T_VARIABLE","$query",459],["T_WHITESPACE"," ",459],["T_AS","as",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$assoc",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n                    ",459],["T_VARIABLE","$ok",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$ok",460],["T_WHITESPACE"," ",460],["T_BOOLEAN_AND","&&",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$target",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","delete",460],"(",["T_VARIABLE","$assoc",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$options",460],")",";",["T_WHITESPACE","\n                ",460],"}",["T_WHITESPACE","\n\n                ",461],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$ok",463],";",["T_WHITESPACE","\n            ",463],"}",["T_WHITESPACE","\n\n            ",464],["T_VARIABLE","$conditions",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_STRING","array_merge",466],"(",["T_VARIABLE","$conditions",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","conditions",466],"(",")",")",";",["T_WHITESPACE","\n            ",466],["T_VARIABLE","$target",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","deleteAll",467],"(",["T_VARIABLE","$conditions",467],")",";",["T_WHITESPACE","\n\n            ",467],["T_RETURN","return",469],["T_WHITESPACE"," ",469],["T_STRING","true",469],";",["T_WHITESPACE","\n        ",469],"}",["T_WHITESPACE","\n\n        ",470],["T_VARIABLE","$updateFields",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_STRING","array_fill_keys",472],"(",["T_VARIABLE","$foreignKey",472],",",["T_WHITESPACE"," ",472],["T_STRING","null",472],")",";",["T_WHITESPACE","\n        ",472],["T_VARIABLE","$conditions",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_STRING","array_merge",473],"(",["T_VARIABLE","$conditions",473],",",["T_WHITESPACE"," ",473],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","conditions",473],"(",")",")",";",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$target",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","updateAll",474],"(",["T_VARIABLE","$updateFields",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$conditions",474],")",";",["T_WHITESPACE","\n\n        ",474],["T_RETURN","return",476],["T_WHITESPACE"," ",476],["T_STRING","true",476],";",["T_WHITESPACE","\n    ",476],"}",["T_WHITESPACE","\n\n    ",477],["T_DOC_COMMENT","\/**\n     * Checks the nullable flag of the foreign key\n     *\n     * @param \\Cake\\ORM\\Table $table the table containing the foreign key\n     * @param array $properties the list of fields that compose the foreign key\n     * @return bool\n     *\/",479],["T_WHITESPACE","\n    ",485],["T_PROTECTED","protected",486],["T_WHITESPACE"," ",486],["T_FUNCTION","function",486],["T_WHITESPACE"," ",486],["T_STRING","_foreignKeyAcceptsNull",486],"(",["T_STRING","Table",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$table",486],",",["T_WHITESPACE"," ",486],["T_ARRAY","array",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$properties",486],")",["T_WHITESPACE","\n    ",486],"{",["T_WHITESPACE","\n        ",487],["T_RETURN","return",488],["T_WHITESPACE"," ",488],"!",["T_STRING","in_array",488],"(",["T_WHITESPACE","\n            ",488],["T_STRING","false",489],",",["T_WHITESPACE","\n            ",489],["T_STRING","array_map",490],"(",["T_WHITESPACE","\n                ",490],["T_FUNCTION","function",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$prop",491],")",["T_WHITESPACE"," ",491],["T_USE","use",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$table",491],")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                    ",491],["T_RETURN","return",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$table",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","schema",492],"(",")",["T_OBJECT_OPERATOR","->",492],["T_STRING","isNullable",492],"(",["T_VARIABLE","$prop",492],")",";",["T_WHITESPACE","\n                ",492],"}",",",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$properties",494],["T_WHITESPACE","\n            ",494],")",["T_WHITESPACE","\n        ",495],")",";",["T_WHITESPACE","\n    ",496],"}",["T_WHITESPACE","\n\n    ",497],["T_DOC_COMMENT","\/**\n     * {@inheritDoc}\n     *\/",499],["T_WHITESPACE","\n    ",501],["T_PROTECTED","protected",502],["T_WHITESPACE"," ",502],["T_FUNCTION","function",502],["T_WHITESPACE"," ",502],["T_STRING","_linkField",502],"(",["T_VARIABLE","$options",502],")",["T_WHITESPACE","\n    ",502],"{",["T_WHITESPACE","\n        ",503],["T_VARIABLE","$links",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],"[","]",";",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$name",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","alias",505],"(",")",";",["T_WHITESPACE","\n        ",505],["T_IF","if",506],["T_WHITESPACE"," ",506],"(",["T_VARIABLE","$options",506],"[",["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",506],"]",["T_WHITESPACE"," ",506],["T_IS_IDENTICAL","===",506],["T_WHITESPACE"," ",506],["T_STRING","false",506],")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n            ",506],["T_VARIABLE","$msg",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'Cannot have foreignKey = false for hasMany associations. '",507],["T_WHITESPACE"," ",507],".",["T_WHITESPACE","\n                   ",507],["T_CONSTANT_ENCAPSED_STRING","'You must provide a foreignKey column.'",508],";",["T_WHITESPACE","\n            ",508],["T_THROW","throw",509],["T_WHITESPACE"," ",509],["T_NEW","new",509],["T_WHITESPACE"," ",509],["T_STRING","RuntimeException",509],"(",["T_VARIABLE","$msg",509],")",";",["T_WHITESPACE","\n        ",509],"}",["T_WHITESPACE","\n\n        ",510],["T_FOREACH","foreach",512],["T_WHITESPACE"," ",512],"(",["T_ARRAY_CAST","(array)",512],["T_VARIABLE","$options",512],"[",["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",512],"]",["T_WHITESPACE"," ",512],["T_AS","as",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$key",512],")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$links",513],"[","]",["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","sprintf",513],"(",["T_CONSTANT_ENCAPSED_STRING","'%s.%s'",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$name",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$key",513],")",";",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE","\n\n        ",514],["T_IF","if",516],["T_WHITESPACE"," ",516],"(",["T_STRING","count",516],"(",["T_VARIABLE","$links",516],")",["T_WHITESPACE"," ",516],["T_IS_IDENTICAL","===",516],["T_WHITESPACE"," ",516],["T_LNUMBER","1",516],")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n            ",516],["T_RETURN","return",517],["T_WHITESPACE"," ",517],["T_VARIABLE","$links",517],"[",["T_LNUMBER","0",517],"]",";",["T_WHITESPACE","\n        ",517],"}",["T_WHITESPACE","\n\n        ",518],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$links",520],";",["T_WHITESPACE","\n    ",520],"}",["T_WHITESPACE","\n\n    ",521],["T_DOC_COMMENT","\/**\n     * Get the relationship type.\n     *\n     * @return string\n     *\/",523],["T_WHITESPACE","\n    ",527],["T_PUBLIC","public",528],["T_WHITESPACE"," ",528],["T_FUNCTION","function",528],["T_WHITESPACE"," ",528],["T_STRING","type",528],"(",")",["T_WHITESPACE","\n    ",528],"{",["T_WHITESPACE","\n        ",529],["T_RETURN","return",530],["T_WHITESPACE"," ",530],["T_STRING","self",530],["T_DOUBLE_COLON","::",530],["T_STRING","ONE_TO_MANY",530],";",["T_WHITESPACE","\n    ",530],"}",["T_WHITESPACE","\n\n    ",531],["T_DOC_COMMENT","\/**\n     * Parse extra options passed in the constructor.\n     *\n     * @param array $opts original list of options passed in constructor\n     * @return void\n     *\/",533],["T_WHITESPACE","\n    ",538],["T_PROTECTED","protected",539],["T_WHITESPACE"," ",539],["T_FUNCTION","function",539],["T_WHITESPACE"," ",539],["T_STRING","_options",539],"(",["T_ARRAY","array",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$opts",539],")",["T_WHITESPACE","\n    ",539],"{",["T_WHITESPACE","\n        ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","_externalOptions",541],"(",["T_VARIABLE","$opts",541],")",";",["T_WHITESPACE","\n        ",541],["T_IF","if",542],["T_WHITESPACE"," ",542],"(","!",["T_EMPTY","empty",542],"(",["T_VARIABLE","$opts",542],"[",["T_CONSTANT_ENCAPSED_STRING","'saveStrategy'",542],"]",")",")",["T_WHITESPACE"," ",542],"{",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","saveStrategy",543],"(",["T_VARIABLE","$opts",543],"[",["T_CONSTANT_ENCAPSED_STRING","'saveStrategy'",543],"]",")",";",["T_WHITESPACE","\n        ",543],"}",["T_WHITESPACE","\n    ",544],"}",["T_WHITESPACE","\n",545],"}",["T_WHITESPACE","\n",546]]
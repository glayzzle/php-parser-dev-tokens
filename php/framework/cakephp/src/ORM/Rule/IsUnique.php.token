[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ORM",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Rule",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Datasource",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EntityInterface",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Checks that a list of fields from an entity are unique in the table\n *\/",19],["T_WHITESPACE","\n",21],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","IsUnique",22],["T_WHITESPACE","\n",22],"{",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * The list of fields to check\n     *\n     * @var array\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_fields",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * The options to use.\n     *\n     * @var array\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_options",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * ### Options\n     *\n     * - `allowMultipleNulls` Set to false to disallow multiple null values in\n     *   multi-column unique rules. By default this is `true` to emulate how SQL UNIQUE\n     *   keys work.\n     *\n     * @param array $fields The list of fields to check uniqueness for\n     * @param array $options The additional options for this rule.\n     *\/",39],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_ARRAY","array",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$fields",51],",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$options",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],"[","]",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_fields",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$fields",53],";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_options",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$options",54],["T_WHITESPACE"," ",54],"+",["T_WHITESPACE"," ",54],"[",["T_CONSTANT_ENCAPSED_STRING","'allowMultipleNulls'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_STRING","true",54],"]",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Performs the uniqueness check\n     *\n     * @param \\Cake\\Datasource\\EntityInterface $entity The entity from where to extract the fields\n     *   where the `repository` key is required.\n     * @param array $options Options passed to the check,\n     * @return bool\n     *\/",57],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","__invoke",65],"(",["T_STRING","EntityInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$entity",65],",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$options",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(","!",["T_VARIABLE","$entity",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","extract",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_fields",67],",",["T_WHITESPACE"," ",67],["T_STRING","true",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_STRING","true",68],";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$allowMultipleNulls",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_options",70],"[",["T_CONSTANT_ENCAPSED_STRING","'allowMultipleNulls'",70],"]",";",["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$alias",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$options",72],"[",["T_CONSTANT_ENCAPSED_STRING","'repository'",72],"]",["T_OBJECT_OPERATOR","->",72],["T_STRING","alias",72],"(",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$conditions",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_alias",73],"(",["T_VARIABLE","$alias",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$entity",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","extract",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_fields",73],")",",",["T_WHITESPACE"," ",73],["T_VARIABLE","$allowMultipleNulls",73],")",";",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$entity",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","isNew",74],"(",")",["T_WHITESPACE"," ",74],["T_IS_IDENTICAL","===",74],["T_WHITESPACE"," ",74],["T_STRING","false",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$keys",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY_CAST","(array)",75],["T_VARIABLE","$options",75],"[",["T_CONSTANT_ENCAPSED_STRING","'repository'",75],"]",["T_OBJECT_OPERATOR","->",75],["T_STRING","primaryKey",75],"(",")",";",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$keys",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_alias",76],"(",["T_VARIABLE","$alias",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$entity",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","extract",76],"(",["T_VARIABLE","$keys",76],")",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$allowMultipleNulls",76],")",";",["T_WHITESPACE","\n            ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_STRING","array_filter",77],"(",["T_VARIABLE","$keys",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'strlen'",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$conditions",78],"[",["T_CONSTANT_ENCAPSED_STRING","'NOT'",78],"]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$keys",78],";",["T_WHITESPACE","\n            ",78],"}",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n\n        ",80],["T_RETURN","return",82],["T_WHITESPACE"," ",82],"!",["T_VARIABLE","$options",82],"[",["T_CONSTANT_ENCAPSED_STRING","'repository'",82],"]",["T_OBJECT_OPERATOR","->",82],["T_STRING","exists",82],"(",["T_VARIABLE","$conditions",82],")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Add a model alias to all the keys in a set of conditions.\n     *\n     * Null values will be omitted from the generated conditions,\n     * as SQL UNIQUE indexes treat `NULL != NULL`\n     *\n     * @param string $alias The alias to add.\n     * @param array $conditions The conditions to alias.\n     * @param bool $multipleNulls Whether or not to allow multiple nulls.\n     * @return array\n     *\/",85],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","_alias",96],"(",["T_VARIABLE","$alias",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$conditions",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$multipleNulls",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$aliased",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[","]",";",["T_WHITESPACE","\n        ",98],["T_FOREACH","foreach",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$conditions",99],["T_WHITESPACE"," ",99],["T_AS","as",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$key",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$value",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$multipleNulls",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$aliased",101],"[","\"",["T_VARIABLE","$alias",101],["T_ENCAPSED_AND_WHITESPACE",".",101],["T_VARIABLE","$key",101],"\"","]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$value",101],";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE"," ",102],["T_ELSE","else",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$aliased",103],"[","\"",["T_VARIABLE","$alias",103],["T_ENCAPSED_AND_WHITESPACE",".",103],["T_VARIABLE","$key",103],["T_ENCAPSED_AND_WHITESPACE"," IS",103],"\"","]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$value",103],";",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n\n        ",105],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$aliased",107],";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n",108],"}",["T_WHITESPACE","\n",109]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ORM",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Behavior",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Datasource",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EntityInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Event",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Event",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ORM",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Association",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Cake",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ORM",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Behavior",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Cake",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Utility",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Hash",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Cake",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Utility",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Inflector",22],";",["T_WHITESPACE","\n\n",22],["T_DOC_COMMENT","\/**\n * CounterCache behavior\n *\n * Enables models to cache the amount of connections in a given relation.\n *\n * Examples with Post model belonging to User model\n *\n * Regular counter cache\n * ```\n * [\n *     'Users' => [\n *         'post_count'\n *     ]\n * ]\n * ```\n *\n * Counter cache with scope\n * ```\n * [\n *     'Users' => [\n *         'posts_published' => [\n *             'conditions' => [\n *                 'published' => true\n *             ]\n *         ]\n *     ]\n * ]\n * ```\n *\n * Counter cache using custom find\n * ```\n * [\n *     'Users' => [\n *         'posts_published' => [\n *             'finder' => 'published' \/\/ Will be using findPublished()\n *         ]\n *     ]\n * ]\n * ```\n *\n * Counter cache using lambda function returning the count\n * This is equivalent to example #2\n * ```\n * [\n *     'Users' => [\n *         'posts_published' => function (Event $event, EntityInterface $entity, Table $table) {\n *             $query = $table->find('all')->where([\n *                 'published' => true,\n *                 'user_id' => $entity->get('user_id')\n *             ]);\n *             return $query->count();\n *          }\n *     ]\n * ]\n * ```\n *\n * Ignore updating the field if it is dirty\n * ```\n * [\n *     'Users' => [\n *         'posts_published' => [\n *             'ignoreDirty' => true\n *         ]\n *     ]\n * ]\n * ```\n *\/",24],["T_WHITESPACE","\n",90],["T_CLASS","class",91],["T_WHITESPACE"," ",91],["T_STRING","CounterCacheBehavior",91],["T_WHITESPACE"," ",91],["T_EXTENDS","extends",91],["T_WHITESPACE"," ",91],["T_STRING","Behavior",91],["T_WHITESPACE","\n",91],"{",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Store the fields which should be ignored\n     *\n     * @var array\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$_ignoreDirty",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],"[","]",";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * beforeSave callback.\n     *\n     * Check if a field, which should be ignored, is dirty\n     *\n     * @param \\Cake\\Event\\Event $event The beforeSave event that was fired\n     * @param \\Cake\\Datasource\\EntityInterface $entity The entity that is going to be saved\n     * @return void\n     *\/",101],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","beforeSave",110],"(",["T_STRING","Event",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$event",110],",",["T_WHITESPACE"," ",110],["T_STRING","EntityInterface",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$entity",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_FOREACH","foreach",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_config",112],["T_WHITESPACE"," ",112],["T_AS","as",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$assoc",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$settings",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$assoc",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_table",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","association",113],"(",["T_VARIABLE","$assoc",113],")",";",["T_WHITESPACE","\n            ",113],["T_FOREACH","foreach",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$settings",114],["T_WHITESPACE"," ",114],["T_AS","as",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$field",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$config",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","is_int",115],"(",["T_VARIABLE","$field",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                    ",115],["T_CONTINUE","continue",116],";",["T_WHITESPACE","\n                ",116],"}",["T_WHITESPACE","\n\n                ",117],["T_VARIABLE","$registryAlias",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$assoc",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","target",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","registryAlias",119],"(",")",";",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$entityAlias",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$assoc",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","property",120],"(",")",";",["T_WHITESPACE","\n\n                ",120],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_STRING","is_callable",122],"(",["T_VARIABLE","$config",122],")",["T_WHITESPACE"," ",122],["T_BOOLEAN_AND","&&",122],["T_WHITESPACE","\n                    ",122],["T_ISSET","isset",123],"(",["T_VARIABLE","$config",123],"[",["T_CONSTANT_ENCAPSED_STRING","'ignoreDirty'",123],"]",")",["T_WHITESPACE"," ",123],["T_BOOLEAN_AND","&&",123],["T_WHITESPACE","\n                    ",123],["T_VARIABLE","$config",124],"[",["T_CONSTANT_ENCAPSED_STRING","'ignoreDirty'",124],"]",["T_WHITESPACE"," ",124],["T_IS_IDENTICAL","===",124],["T_WHITESPACE"," ",124],["T_STRING","true",124],["T_WHITESPACE"," ",124],["T_BOOLEAN_AND","&&",124],["T_WHITESPACE","\n                    ",124],["T_VARIABLE","$entity",125],["T_OBJECT_OPERATOR","->",125],["T_VARIABLE","$entityAlias",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","dirty",125],"(",["T_VARIABLE","$field",125],")",["T_WHITESPACE","\n                ",125],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_ignoreDirty",127],"[",["T_VARIABLE","$registryAlias",127],"]","[",["T_VARIABLE","$field",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","true",127],";",["T_WHITESPACE","\n                ",127],"}",["T_WHITESPACE","\n            ",128],"}",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * afterSave callback.\n     *\n     * Makes sure to update counter cache when a new record is created or updated.\n     *\n     * @param \\Cake\\Event\\Event $event The afterSave event that was fired.\n     * @param \\Cake\\Datasource\\EntityInterface $entity The entity that was saved.\n     * @return void\n     *\/",133],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","afterSave",142],"(",["T_STRING","Event",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$event",142],",",["T_WHITESPACE"," ",142],["T_STRING","EntityInterface",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$entity",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_processAssociations",144],"(",["T_VARIABLE","$event",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$entity",144],")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_ignoreDirty",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],"[","]",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * afterDelete callback.\n     *\n     * Makes sure to update counter cache when a record is deleted.\n     *\n     * @param \\Cake\\Event\\Event $event The afterDelete event that was fired.\n     * @param \\Cake\\Datasource\\EntityInterface $entity The entity that was deleted.\n     * @return void\n     *\/",148],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","afterDelete",157],"(",["T_STRING","Event",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$event",157],",",["T_WHITESPACE"," ",157],["T_STRING","EntityInterface",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$entity",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_processAssociations",159],"(",["T_VARIABLE","$event",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$entity",159],")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Iterate all associations and update counter caches.\n     *\n     * @param \\Cake\\Event\\Event $event Event instance.\n     * @param \\Cake\\Datasource\\EntityInterface $entity Entity.\n     * @return void\n     *\/",162],["T_WHITESPACE","\n    ",168],["T_PROTECTED","protected",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","_processAssociations",169],"(",["T_STRING","Event",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$event",169],",",["T_WHITESPACE"," ",169],["T_STRING","EntityInterface",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$entity",169],")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_config",171],["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$assoc",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$settings",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$assoc",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_table",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","association",172],"(",["T_VARIABLE","$assoc",172],")",";",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_processAssociation",173],"(",["T_VARIABLE","$event",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$entity",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$assoc",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$settings",173],")",";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Updates counter cache for a single association\n     *\n     * @param \\Cake\\Event\\Event $event Event instance.\n     * @param \\Cake\\Datasource\\EntityInterface $entity Entity\n     * @param \\Cake\\ORM\\Association $assoc The association object\n     * @param array $settings The settings for for counter cache for this association\n     * @return void\n     *\/",177],["T_WHITESPACE","\n    ",185],["T_PROTECTED","protected",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","_processAssociation",186],"(",["T_STRING","Event",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$event",186],",",["T_WHITESPACE"," ",186],["T_STRING","EntityInterface",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$entity",186],",",["T_WHITESPACE"," ",186],["T_STRING","Association",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$assoc",186],",",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$settings",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$foreignKeys",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_ARRAY_CAST","(array)",188],["T_VARIABLE","$assoc",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","foreignKey",188],"(",")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$primaryKeys",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_ARRAY_CAST","(array)",189],["T_VARIABLE","$assoc",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","bindingKey",189],"(",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$countConditions",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$entity",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","extract",190],"(",["T_VARIABLE","$foreignKeys",190],")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$updateConditions",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","array_combine",191],"(",["T_VARIABLE","$primaryKeys",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$countConditions",191],")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$countOriginalConditions",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$entity",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","extractOriginalChanged",192],"(",["T_VARIABLE","$foreignKeys",192],")",";",["T_WHITESPACE","\n\n        ",192],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$countOriginalConditions",194],["T_WHITESPACE"," ",194],["T_IS_NOT_IDENTICAL","!==",194],["T_WHITESPACE"," ",194],"[","]",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$updateOriginalConditions",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","array_combine",195],"(",["T_VARIABLE","$primaryKeys",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$countOriginalConditions",195],")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_FOREACH","foreach",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$settings",198],["T_WHITESPACE"," ",198],["T_AS","as",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$field",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$config",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_STRING","is_int",199],"(",["T_VARIABLE","$field",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$field",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$config",200],";",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$config",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],"[","]",";",["T_WHITESPACE","\n            ",201],"}",["T_WHITESPACE","\n\n            ",202],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_ISSET","isset",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_ignoreDirty",204],"[",["T_VARIABLE","$assoc",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","target",204],"(",")",["T_OBJECT_OPERATOR","->",204],["T_STRING","registryAlias",204],"(",")","]","[",["T_VARIABLE","$field",204],"]",")",["T_WHITESPACE"," ",204],["T_BOOLEAN_AND","&&",204],["T_WHITESPACE","\n                ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_ignoreDirty",205],"[",["T_VARIABLE","$assoc",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","target",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","registryAlias",205],"(",")","]","[",["T_VARIABLE","$field",205],"]",["T_WHITESPACE"," ",205],["T_IS_IDENTICAL","===",205],["T_WHITESPACE"," ",205],["T_STRING","true",205],["T_WHITESPACE","\n            ",205],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                ",206],["T_CONTINUE","continue",207],";",["T_WHITESPACE","\n            ",207],"}",["T_WHITESPACE","\n\n            ",208],["T_IF","if",210],["T_WHITESPACE"," ",210],"(","!",["T_STRING","is_string",210],"(",["T_VARIABLE","$config",210],")",["T_WHITESPACE"," ",210],["T_BOOLEAN_AND","&&",210],["T_WHITESPACE"," ",210],["T_STRING","is_callable",210],"(",["T_VARIABLE","$config",210],")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                ",210],["T_VARIABLE","$count",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$config",211],"(",["T_VARIABLE","$event",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$entity",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_table",211],",",["T_WHITESPACE"," ",211],["T_STRING","false",211],")",";",["T_WHITESPACE","\n            ",211],"}",["T_WHITESPACE"," ",212],["T_ELSE","else",212],["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$count",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_getCount",213],"(",["T_VARIABLE","$config",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$countConditions",213],")",";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n\n            ",214],["T_VARIABLE","$assoc",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","target",216],"(",")",["T_OBJECT_OPERATOR","->",216],["T_STRING","updateAll",216],"(","[",["T_VARIABLE","$field",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$count",216],"]",",",["T_WHITESPACE"," ",216],["T_VARIABLE","$updateConditions",216],")",";",["T_WHITESPACE","\n\n            ",216],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_ISSET","isset",218],"(",["T_VARIABLE","$updateOriginalConditions",218],")",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n                ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(","!",["T_STRING","is_string",219],"(",["T_VARIABLE","$config",219],")",["T_WHITESPACE"," ",219],["T_BOOLEAN_AND","&&",219],["T_WHITESPACE"," ",219],["T_STRING","is_callable",219],"(",["T_VARIABLE","$config",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                    ",219],["T_VARIABLE","$count",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$config",220],"(",["T_VARIABLE","$event",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$entity",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_table",220],",",["T_WHITESPACE"," ",220],["T_STRING","true",220],")",";",["T_WHITESPACE","\n                ",220],"}",["T_WHITESPACE"," ",221],["T_ELSE","else",221],["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n                    ",221],["T_VARIABLE","$count",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_getCount",222],"(",["T_VARIABLE","$config",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$countOriginalConditions",222],")",";",["T_WHITESPACE","\n                ",222],"}",["T_WHITESPACE","\n                ",223],["T_VARIABLE","$assoc",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","target",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","updateAll",224],"(","[",["T_VARIABLE","$field",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$count",224],"]",",",["T_WHITESPACE"," ",224],["T_VARIABLE","$updateOriginalConditions",224],")",";",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Fetches and returns the count for a single field in an association\n     *\n     * @param array $config The counter cache configuration for a single field\n     * @param array $conditions Additional conditions given to the query\n     * @return int The number of relations matching the given config and conditions\n     *\/",229],["T_WHITESPACE","\n    ",235],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","_getCount",236],"(",["T_ARRAY","array",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$config",236],",",["T_WHITESPACE"," ",236],["T_ARRAY","array",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$conditions",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$finder",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'all'",238],";",["T_WHITESPACE","\n        ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(","!",["T_EMPTY","empty",239],"(",["T_VARIABLE","$config",239],"[",["T_CONSTANT_ENCAPSED_STRING","'finder'",239],"]",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$finder",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$config",240],"[",["T_CONSTANT_ENCAPSED_STRING","'finder'",240],"]",";",["T_WHITESPACE","\n            ",240],["T_UNSET","unset",241],"(",["T_VARIABLE","$config",241],"[",["T_CONSTANT_ENCAPSED_STRING","'finder'",241],"]",")",";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n\n        ",242],["T_IF","if",244],["T_WHITESPACE"," ",244],"(","!",["T_ISSET","isset",244],"(",["T_VARIABLE","$config",244],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",244],"]",")",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$config",245],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",245],"]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],"[","]",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$config",247],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",247],"]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","array_merge",247],"(",["T_VARIABLE","$conditions",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$config",247],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",247],"]",")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$query",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_table",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","find",248],"(",["T_VARIABLE","$finder",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$config",248],")",";",["T_WHITESPACE","\n\n        ",248],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$query",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","count",250],"(",")",";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n",251],"}",["T_WHITESPACE","\n",252]]
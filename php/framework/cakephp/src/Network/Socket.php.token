[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         1.2.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Network",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Core",17],["T_NS_SEPARATOR","\\",17],["T_STRING","InstanceConfigTrait",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Network",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Exception",18],["T_NS_SEPARATOR","\\",18],["T_STRING","SocketException",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Validation",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Validation",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Exception",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","InvalidArgumentException",21],";",["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * CakePHP network socket connection class.\n *\n * Core base class for network communication.\n *\/",23],["T_WHITESPACE","\n",27],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","Socket",28],["T_WHITESPACE","\n",28],"{",["T_WHITESPACE","\n\n    ",29],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","InstanceConfigTrait",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Object description\n     *\n     * @var string\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$description",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Remote DataSource Network Socket Interface'",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Default configuration settings for the socket connection\n     *\n     * @var array\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_defaultConfig",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"[",["T_WHITESPACE","\n        ",45],["T_CONSTANT_ENCAPSED_STRING","'persistent'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_STRING","false",46],",",["T_WHITESPACE","\n        ",46],["T_CONSTANT_ENCAPSED_STRING","'host'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'localhost'",47],",",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'protocol'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'tcp'",48],",",["T_WHITESPACE","\n        ",48],["T_CONSTANT_ENCAPSED_STRING","'port'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_LNUMBER","80",49],",",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'timeout'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_LNUMBER","30",50],["T_WHITESPACE","\n    ",50],"]",";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Reference to socket connection resource\n     *\n     * @var resource\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$connection",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","null",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * This boolean contains the current state of the Socket class\n     *\n     * @var bool\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$connected",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","false",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * This variable contains an array with the last error number (num) and string (str)\n     *\n     * @var array\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$lastError",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[","]",";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * True if the socket stream is encrypted after a Cake\\Network\\Socket::enableCrypto() call\n     *\n     * @var bool\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$encrypted",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","false",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Contains all the encryption methods available\n     *\n     * @var array\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$_encryptMethods",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"[",["T_WHITESPACE","\n        ",86],["T_COMMENT","\/\/ @codingStandardsIgnoreStart\n",87],["T_WHITESPACE","        ",88],["T_CONSTANT_ENCAPSED_STRING","'sslv2_client'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_STRING","STREAM_CRYPTO_METHOD_SSLv2_CLIENT",88],",",["T_WHITESPACE","\n        ",88],["T_CONSTANT_ENCAPSED_STRING","'sslv3_client'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_STRING","STREAM_CRYPTO_METHOD_SSLv3_CLIENT",89],",",["T_WHITESPACE","\n        ",89],["T_CONSTANT_ENCAPSED_STRING","'sslv23_client'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_STRING","STREAM_CRYPTO_METHOD_SSLv23_CLIENT",90],",",["T_WHITESPACE","\n        ",90],["T_CONSTANT_ENCAPSED_STRING","'tls_client'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_STRING","STREAM_CRYPTO_METHOD_TLS_CLIENT",91],",",["T_WHITESPACE","\n        ",91],["T_CONSTANT_ENCAPSED_STRING","'sslv2_server'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_STRING","STREAM_CRYPTO_METHOD_SSLv2_SERVER",92],",",["T_WHITESPACE","\n        ",92],["T_CONSTANT_ENCAPSED_STRING","'sslv3_server'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_STRING","STREAM_CRYPTO_METHOD_SSLv3_SERVER",93],",",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'sslv23_server'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_STRING","STREAM_CRYPTO_METHOD_SSLv23_SERVER",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'tls_server'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_STRING","STREAM_CRYPTO_METHOD_TLS_SERVER",95],["T_WHITESPACE","\n        ",95],["T_COMMENT","\/\/ @codingStandardsIgnoreEnd\n",96],["T_WHITESPACE","    ",97],"]",";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Used to capture connection warnings which can happen when there are\n     * SSL errors for example.\n     *\n     * @var array\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_connectionErrors",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],"[","]",";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param array $config Socket configuration, which will be merged with the base configuration\n     * @see \\Cake\\Network\\Socket::$_baseConfig\n     *\/",107],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","__construct",113],"(",["T_ARRAY","array",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$config",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],"[","]",")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","config",115],"(",["T_VARIABLE","$config",115],")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Connect the socket to the given host and port.\n     *\n     * @return bool Success\n     * @throws \\Cake\\Network\\Exception\\SocketException\n     *\/",118],["T_WHITESPACE","\n    ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","connect",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","connection",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","disconnect",127],"(",")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$hasProtocol",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","strpos",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_config",130],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",130],"]",",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",130],")",["T_WHITESPACE"," ",130],["T_IS_NOT_IDENTICAL","!==",130],["T_WHITESPACE"," ",130],["T_STRING","false",130],";",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$hasProtocol",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_LIST","list",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_config",132],"[",["T_CONSTANT_ENCAPSED_STRING","'protocol'",132],"]",",",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_config",132],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",132],"]",")",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","explode",132],"(",["T_CONSTANT_ENCAPSED_STRING","':\/\/'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_config",132],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",132],"]",")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$scheme",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","null",134],";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(","!",["T_EMPTY","empty",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_config",135],"[",["T_CONSTANT_ENCAPSED_STRING","'protocol'",135],"]",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$scheme",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_config",136],"[",["T_CONSTANT_ENCAPSED_STRING","'protocol'",136],"]",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_setSslContext",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_config",139],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",139],"]",")",";",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_EMPTY","empty",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_config",140],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",140],"]",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$context",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","stream_context_create",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_config",141],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",141],"]",")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE"," ",142],["T_ELSE","else",142],["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$context",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","stream_context_create",143],"(",")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$connectAs",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","STREAM_CLIENT_CONNECT",146],";",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_config",147],"[",["T_CONSTANT_ENCAPSED_STRING","'persistent'",147],"]",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$connectAs",148],["T_WHITESPACE"," ",148],["T_OR_EQUAL","|=",148],["T_WHITESPACE"," ",148],["T_STRING","STREAM_CLIENT_PERSISTENT",148],";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_STRING","set_error_handler",151],"(","[",["T_VARIABLE","$this",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'_connectionErrorHandler'",151],"]",")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","connection",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","stream_socket_client",152],"(",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$scheme",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_config",153],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",153],"]",["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","':'",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_config",153],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",153],"]",",",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$errNum",154],",",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$errStr",155],",",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_config",156],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",156],"]",",",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$connectAs",157],",",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$context",158],["T_WHITESPACE","\n        ",158],")",";",["T_WHITESPACE","\n        ",159],["T_STRING","restore_error_handler",160],"(",")",";",["T_WHITESPACE","\n\n        ",160],["T_IF","if",162],["T_WHITESPACE"," ",162],"(","!",["T_EMPTY","empty",162],"(",["T_VARIABLE","$errNum",162],")",["T_WHITESPACE"," ",162],["T_BOOLEAN_OR","||",162],["T_WHITESPACE"," ",162],"!",["T_EMPTY","empty",162],"(",["T_VARIABLE","$errStr",162],")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","setLastError",163],"(",["T_VARIABLE","$errNum",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$errStr",163],")",";",["T_WHITESPACE","\n            ",163],["T_THROW","throw",164],["T_WHITESPACE"," ",164],["T_NEW","new",164],["T_WHITESPACE"," ",164],["T_STRING","SocketException",164],"(",["T_VARIABLE","$errStr",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$errNum",164],")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n\n        ",165],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","connection",167],["T_WHITESPACE"," ",167],["T_BOOLEAN_AND","&&",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_connectionErrors",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$message",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","implode",168],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_connectionErrors",168],")",";",["T_WHITESPACE","\n            ",168],["T_THROW","throw",169],["T_WHITESPACE"," ",169],["T_NEW","new",169],["T_WHITESPACE"," ",169],["T_STRING","SocketException",169],"(",["T_VARIABLE","$message",169],",",["T_WHITESPACE"," ",169],["T_STRING","E_WARNING",169],")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","connected",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","is_resource",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","connection",172],")",";",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","connected",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_STRING","stream_set_timeout",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","connection",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_config",174],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",174],"]",")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","connected",177],";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Configure the SSL context options.\n     *\n     * @param string $host The host name being connected to.\n     * @return void\n     *\/",180],["T_WHITESPACE","\n    ",185],["T_PROTECTED","protected",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","_setSslContext",186],"(",["T_VARIABLE","$host",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_FOREACH","foreach",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_config",188],["T_WHITESPACE"," ",188],["T_AS","as",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$key",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$value",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_STRING","substr",189],"(",["T_VARIABLE","$key",189],",",["T_WHITESPACE"," ",189],["T_LNUMBER","0",189],",",["T_WHITESPACE"," ",189],["T_LNUMBER","4",189],")",["T_WHITESPACE"," ",189],["T_IS_NOT_IDENTICAL","!==",189],["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'ssl_'",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_CONTINUE","continue",190],";",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$contextKey",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","substr",192],"(",["T_VARIABLE","$key",192],",",["T_WHITESPACE"," ",192],["T_LNUMBER","4",192],")",";",["T_WHITESPACE","\n            ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_EMPTY","empty",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_config",193],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",193],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",193],"]","[",["T_VARIABLE","$contextKey",193],"]",")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_config",194],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",194],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",194],"]","[",["T_VARIABLE","$contextKey",194],"]",["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$value",194],";",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE","\n            ",195],["T_UNSET","unset",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_config",196],"[",["T_VARIABLE","$key",196],"]",")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n        ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(","!",["T_ISSET","isset",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_config",198],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",198],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",198],"]","[",["T_CONSTANT_ENCAPSED_STRING","'SNI_enabled'",198],"]",")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_config",199],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",199],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",199],"]","[",["T_CONSTANT_ENCAPSED_STRING","'SNI_enabled'",199],"]",["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","true",199],";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n        ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_STRING","version_compare",201],"(",["T_STRING","PHP_VERSION",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'5.6.0'",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'>='",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_EMPTY","empty",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_config",202],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",202],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",202],"]","[",["T_CONSTANT_ENCAPSED_STRING","'peer_name'",202],"]",")",")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_config",203],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",203],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",203],"]","[",["T_CONSTANT_ENCAPSED_STRING","'peer_name'",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$host",203],";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE"," ",205],["T_ELSE","else",205],["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_EMPTY","empty",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_config",206],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",206],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",206],"]","[",["T_CONSTANT_ENCAPSED_STRING","'SNI_server_name'",206],"]",")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_config",207],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",207],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",207],"]","[",["T_CONSTANT_ENCAPSED_STRING","'SNI_server_name'",207],"]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$host",207],";",["T_WHITESPACE","\n            ",207],"}",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n        ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_EMPTY","empty",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_config",210],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",210],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",210],"]","[",["T_CONSTANT_ENCAPSED_STRING","'cafile'",210],"]",")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$dir",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","dirname",211],"(",["T_STRING","dirname",211],"(",["T_DIR","__DIR__",211],")",")",";",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_config",212],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",212],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",212],"]","[",["T_CONSTANT_ENCAPSED_STRING","'cafile'",212],"]",["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$dir",212],["T_WHITESPACE"," ",212],".",["T_WHITESPACE"," ",212],["T_STRING","DIRECTORY_SEPARATOR",212],["T_WHITESPACE"," ",212],".",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'config'",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_STRING","DIRECTORY_SEPARATOR",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'cacert.pem'",213],";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(","!",["T_EMPTY","empty",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_config",215],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",215],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",215],"]","[",["T_CONSTANT_ENCAPSED_STRING","'verify_host'",215],"]",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_config",216],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",216],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",216],"]","[",["T_CONSTANT_ENCAPSED_STRING","'CN_match'",216],"]",["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$host",216],";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n        ",217],["T_UNSET","unset",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_config",218],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",218],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ssl'",218],"]","[",["T_CONSTANT_ENCAPSED_STRING","'verify_host'",218],"]",")",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * socket_stream_client() does not populate errNum, or $errStr when there are\n     * connection errors, as in the case of SSL verification failure.\n     *\n     * Instead we need to handle those errors manually.\n     *\n     * @param int $code Code number.\n     * @param string $message Message.\n     * @return void\n     *\/",221],["T_WHITESPACE","\n    ",230],["T_PROTECTED","protected",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","_connectionErrorHandler",231],"(",["T_VARIABLE","$code",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$message",231],")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_connectionErrors",233],"[","]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$message",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Get the connection context.\n     *\n     * @return null|array Null when there is no connection, an array when there is.\n     *\/",236],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","context",241],"(",")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","connection",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_STRING","null",244],";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n\n        ",245],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_STRING","stream_context_get_options",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","connection",247],")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Get the host name of the current connection.\n     *\n     * @return string Host name\n     *\/",250],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","host",255],"(",")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_STRING","Validation",257],["T_DOUBLE_COLON","::",257],["T_STRING","ip",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_config",257],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",257],"]",")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_RETURN","return",258],["T_WHITESPACE"," ",258],["T_STRING","gethostbyaddr",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_config",258],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",258],"]",")",";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n\n        ",259],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_STRING","gethostbyaddr",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","address",261],"(",")",")",";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Get the IP address of the current connection.\n     *\n     * @return string IP address\n     *\/",264],["T_WHITESPACE","\n    ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","address",269],"(",")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_STRING","Validation",271],["T_DOUBLE_COLON","::",271],["T_STRING","ip",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_config",271],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",271],"]",")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_config",272],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",272],"]",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n\n        ",273],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_STRING","gethostbyname",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_config",275],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",275],"]",")",";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Get all IP addresses associated with the current connection.\n     *\n     * @return array IP addresses\n     *\/",278],["T_WHITESPACE","\n    ",282],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","addresses",283],"(",")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_STRING","Validation",285],["T_DOUBLE_COLON","::",285],["T_STRING","ip",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_config",285],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",285],"]",")",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],"[",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_config",286],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",286],"]","]",";",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n\n        ",287],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_STRING","gethostbynamel",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_config",289],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",289],"]",")",";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_DOC_COMMENT","\/**\n     * Get the last error as a string.\n     *\n     * @return string|null Last error\n     *\/",292],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","lastError",297],"(",")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(","!",["T_EMPTY","empty",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","lastError",299],")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","lastError",300],"[",["T_CONSTANT_ENCAPSED_STRING","'num'",300],"]",["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","': '",300],["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","lastError",300],"[",["T_CONSTANT_ENCAPSED_STRING","'str'",300],"]",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n\n        ",301],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_STRING","null",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Set the last error.\n     *\n     * @param int $errNum Error code\n     * @param string $errStr Error string\n     * @return void\n     *\/",306],["T_WHITESPACE","\n    ",312],["T_PUBLIC","public",313],["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],["T_WHITESPACE"," ",313],["T_STRING","setLastError",313],"(",["T_VARIABLE","$errNum",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$errStr",313],")",["T_WHITESPACE","\n    ",313],"{",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","lastError",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],"[",["T_CONSTANT_ENCAPSED_STRING","'num'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$errNum",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'str'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$errStr",315],"]",";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Write data to the socket.\n     *\n     * @param string $data The data to write to the socket\n     * @return bool Success\n     *\/",318],["T_WHITESPACE","\n    ",323],["T_PUBLIC","public",324],["T_WHITESPACE"," ",324],["T_FUNCTION","function",324],["T_WHITESPACE"," ",324],["T_STRING","write",324],"(",["T_VARIABLE","$data",324],")",["T_WHITESPACE","\n    ",324],"{",["T_WHITESPACE","\n        ",325],["T_IF","if",326],["T_WHITESPACE"," ",326],"(","!",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","connected",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(","!",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","connect",327],"(",")",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n                ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_STRING","false",328],";",["T_WHITESPACE","\n            ",328],"}",["T_WHITESPACE","\n        ",329],"}",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$totalBytes",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_STRING","strlen",331],"(",["T_VARIABLE","$data",331],")",";",["T_WHITESPACE","\n        ",331],["T_FOR","for",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$written",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_LNUMBER","0",332],";",["T_WHITESPACE"," ",332],["T_VARIABLE","$written",332],["T_WHITESPACE"," ",332],"<",["T_WHITESPACE"," ",332],["T_VARIABLE","$totalBytes",332],";",["T_WHITESPACE"," ",332],["T_VARIABLE","$written",332],["T_WHITESPACE"," ",332],["T_PLUS_EQUAL","+=",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$rv",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$rv",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","fwrite",333],"(",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","connection",333],",",["T_WHITESPACE"," ",333],["T_STRING","substr",333],"(",["T_VARIABLE","$data",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$written",333],")",")",";",["T_WHITESPACE","\n            ",333],["T_IF","if",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$rv",334],["T_WHITESPACE"," ",334],["T_IS_IDENTICAL","===",334],["T_WHITESPACE"," ",334],["T_STRING","false",334],["T_WHITESPACE"," ",334],["T_BOOLEAN_OR","||",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$rv",334],["T_WHITESPACE"," ",334],["T_IS_IDENTICAL","===",334],["T_WHITESPACE"," ",334],["T_LNUMBER","0",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$written",335],";",["T_WHITESPACE","\n            ",335],"}",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n\n        ",337],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$written",339],";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Read data from the socket. Returns false if no data is available or no connection could be\n     * established.\n     *\n     * @param int $length Optional buffer length to read; defaults to 1024\n     * @return mixed Socket data\n     *\/",342],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","read",349],"(",["T_VARIABLE","$length",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_LNUMBER","1024",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_IF","if",351],["T_WHITESPACE"," ",351],"(","!",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","connected",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(","!",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","connect",352],"(",")",")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n                ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_STRING","false",353],";",["T_WHITESPACE","\n            ",353],"}",["T_WHITESPACE","\n        ",354],"}",["T_WHITESPACE","\n\n        ",355],["T_IF","if",357],["T_WHITESPACE"," ",357],"(","!",["T_STRING","feof",357],"(",["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","connection",357],")",")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$buffer",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","fread",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","connection",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$length",358],")",";",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$info",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_STRING","stream_get_meta_data",359],"(",["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","connection",359],")",";",["T_WHITESPACE","\n            ",359],["T_IF","if",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$info",360],"[",["T_CONSTANT_ENCAPSED_STRING","'timed_out'",360],"]",")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n                ",360],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","setLastError",361],"(",["T_STRING","E_WARNING",361],",",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'Connection timed out'",361],")",";",["T_WHITESPACE","\n\n                ",361],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_STRING","false",363],";",["T_WHITESPACE","\n            ",363],"}",["T_WHITESPACE","\n\n            ",364],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$buffer",366],";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n\n        ",367],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_STRING","false",369],";",["T_WHITESPACE","\n    ",369],"}",["T_WHITESPACE","\n\n    ",370],["T_DOC_COMMENT","\/**\n     * Disconnect the socket from the current connection.\n     *\n     * @return bool Success\n     *\/",372],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","disconnect",377],"(",")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(","!",["T_STRING","is_resource",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","connection",379],")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","connected",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_STRING","false",380],";",["T_WHITESPACE","\n\n            ",380],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_STRING","true",382],";",["T_WHITESPACE","\n        ",382],"}",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","connected",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],"!",["T_STRING","fclose",384],"(",["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","connection",384],")",";",["T_WHITESPACE","\n\n        ",384],["T_IF","if",386],["T_WHITESPACE"," ",386],"(","!",["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","connected",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n            ",386],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","connection",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","null",387],";",["T_WHITESPACE","\n        ",387],"}",["T_WHITESPACE","\n\n        ",388],["T_RETURN","return",390],["T_WHITESPACE"," ",390],"!",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","connected",390],";",["T_WHITESPACE","\n    ",390],"}",["T_WHITESPACE","\n\n    ",391],["T_DOC_COMMENT","\/**\n     * Destructor, used to disconnect from current connection.\n     *\/",393],["T_WHITESPACE","\n    ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","__destruct",396],"(",")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","disconnect",398],"(",")",";",["T_WHITESPACE","\n    ",398],"}",["T_WHITESPACE","\n\n    ",399],["T_DOC_COMMENT","\/**\n     * Resets the state of this Socket instance to it's initial state (before Object::__construct got executed)\n     *\n     * @param array|null $state Array with key and values to reset\n     * @return bool True on success\n     *\/",401],["T_WHITESPACE","\n    ",406],["T_PUBLIC","public",407],["T_WHITESPACE"," ",407],["T_FUNCTION","function",407],["T_WHITESPACE"," ",407],["T_STRING","reset",407],"(",["T_VARIABLE","$state",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_STRING","null",407],")",["T_WHITESPACE","\n    ",407],"{",["T_WHITESPACE","\n        ",408],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_EMPTY","empty",409],"(",["T_VARIABLE","$state",409],")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n            ",409],["T_STATIC","static",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$initalState",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],"[","]",";",["T_WHITESPACE","\n            ",410],["T_IF","if",411],["T_WHITESPACE"," ",411],"(",["T_EMPTY","empty",411],"(",["T_VARIABLE","$initalState",411],")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n                ",411],["T_VARIABLE","$initalState",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_STRING","get_class_vars",412],"(",["T_CLASS_C","__CLASS__",412],")",";",["T_WHITESPACE","\n            ",412],"}",["T_WHITESPACE","\n            ",413],["T_VARIABLE","$state",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$initalState",414],";",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n\n        ",415],["T_FOREACH","foreach",417],["T_WHITESPACE"," ",417],"(",["T_VARIABLE","$state",417],["T_WHITESPACE"," ",417],["T_AS","as",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$property",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$value",417],")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n            ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],"{",["T_VARIABLE","$property",418],"}",["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$value",418],";",["T_WHITESPACE","\n        ",418],"}",["T_WHITESPACE","\n\n        ",419],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_STRING","true",421],";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n\n    ",422],["T_DOC_COMMENT","\/**\n     * Encrypts current stream socket, using one of the defined encryption methods\n     *\n     * @param string $type can be one of 'ssl2', 'ssl3', 'ssl23' or 'tls'\n     * @param string $clientOrServer can be one of 'client', 'server'. Default is 'client'\n     * @param bool $enable enable or disable encryption. Default is true (enable)\n     * @return bool True on success\n     * @throws \\InvalidArgumentException When an invalid encryption scheme is chosen.\n     * @throws \\Cake\\Network\\Exception\\SocketException When attempting to enable SSL\/TLS fails\n     * @see stream_socket_enable_crypto\n     *\/",424],["T_WHITESPACE","\n    ",434],["T_PUBLIC","public",435],["T_WHITESPACE"," ",435],["T_FUNCTION","function",435],["T_WHITESPACE"," ",435],["T_STRING","enableCrypto",435],"(",["T_VARIABLE","$type",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$clientOrServer",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_CONSTANT_ENCAPSED_STRING","'client'",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$enable",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_STRING","true",435],")",["T_WHITESPACE","\n    ",435],"{",["T_WHITESPACE","\n        ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(","!",["T_STRING","array_key_exists",437],"(",["T_VARIABLE","$type",437],["T_WHITESPACE"," ",437],".",["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'_'",437],["T_WHITESPACE"," ",437],".",["T_WHITESPACE"," ",437],["T_VARIABLE","$clientOrServer",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_encryptMethods",437],")",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_THROW","throw",438],["T_WHITESPACE"," ",438],["T_NEW","new",438],["T_WHITESPACE"," ",438],["T_STRING","InvalidArgumentException",438],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid encryption scheme chosen'",438],")",";",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE","\n        ",439],["T_TRY","try",440],["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_VARIABLE","$enableCryptoResult",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","stream_socket_enable_crypto",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","connection",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$enable",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","_encryptMethods",441],"[",["T_VARIABLE","$type",441],["T_WHITESPACE"," ",441],".",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'_'",441],["T_WHITESPACE"," ",441],".",["T_WHITESPACE"," ",441],["T_VARIABLE","$clientOrServer",441],"]",")",";",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE"," ",442],["T_CATCH","catch",442],["T_WHITESPACE"," ",442],"(",["T_STRING","Exception",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$e",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","setLastError",443],"(",["T_STRING","null",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$e",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getMessage",443],"(",")",")",";",["T_WHITESPACE","\n            ",443],["T_THROW","throw",444],["T_WHITESPACE"," ",444],["T_NEW","new",444],["T_WHITESPACE"," ",444],["T_STRING","SocketException",444],"(",["T_VARIABLE","$e",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getMessage",444],"(",")",")",";",["T_WHITESPACE","\n        ",444],"}",["T_WHITESPACE","\n        ",445],["T_IF","if",446],["T_WHITESPACE"," ",446],"(",["T_VARIABLE","$enableCryptoResult",446],["T_WHITESPACE"," ",446],["T_IS_IDENTICAL","===",446],["T_WHITESPACE"," ",446],["T_STRING","true",446],")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n            ",446],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","encrypted",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$enable",447],";",["T_WHITESPACE","\n\n            ",447],["T_RETURN","return",449],["T_WHITESPACE"," ",449],["T_STRING","true",449],";",["T_WHITESPACE","\n        ",449],"}",["T_WHITESPACE","\n        ",450],["T_VARIABLE","$errorMessage",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'Unable to perform enableCrypto operation on the current socket'",451],";",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","setLastError",452],"(",["T_STRING","null",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$errorMessage",452],")",";",["T_WHITESPACE","\n        ",452],["T_THROW","throw",453],["T_WHITESPACE"," ",453],["T_NEW","new",453],["T_WHITESPACE"," ",453],["T_STRING","SocketException",453],"(",["T_VARIABLE","$errorMessage",453],")",";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE","\n",454],"}",["T_WHITESPACE","\n",455]]
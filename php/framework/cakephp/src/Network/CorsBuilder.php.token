[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.2.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Network",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * A builder object that assists in defining Cross Origin Request related\n * headers.\n *\n * Each of the methods in this object provide a fluent interface. Once you've\n * set all the headers you want to use, the `build()` method can be used to return\n * a modified Response.\n *\n * It is most convenient to get this object via `Request::cors()`.\n *\n * @see \\Cake\\Network\\Response::cors()\n *\/",17],["T_WHITESPACE","\n",28],["T_CLASS","class",29],["T_WHITESPACE"," ",29],["T_STRING","CorsBuilder",29],["T_WHITESPACE","\n",29],"{",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * The response object this builder is attached to.\n     *\n     * @var \\Cake\\Network\\Response\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_response",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * The request's Origin header value\n     *\n     * @var string\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_origin",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Whether or not the request was over SSL.\n     *\n     * @var bool\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_isSsl",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * The headers that have been queued so far.\n     *\n     * @var array\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_headers",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[","]",";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param \\Cake\\Network\\Response $response The response object to add headers onto.\n     * @param string $origin The request's Origin header.\n     * @param bool $isSsl Whether or not the request was over SSL.\n     *\/",60],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","__construct",67],"(",["T_STRING","Response",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$response",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$origin",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$isSsl",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","false",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_origin",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$origin",69],";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_isSsl",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$isSsl",70],";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_response",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$response",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Apply the queued headers to the response.\n     *\n     * If the builder has no Origin, or if there are no allowed domains,\n     * or if the allowed domains do not match the Origin header no headers will be applied.\n     *\n     * @return \\Cake\\Network\\Response\n     *\/",74],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","build",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_EMPTY","empty",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_origin",84],")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_response",85],";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_ISSET","isset",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_headers",87],"[",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Origin'",87],"]",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_response",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","header",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_headers",88],")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_response",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Set the list of allowed domains.\n     *\n     * Accepts a string or an array of domains that have CORS enabled.\n     * You can use `*.example.com` wildcards to accept subdomains, or `*` to allow all domains\n     *\n     * @param string|array $domain The allowed domains\n     * @return $this\n     *\/",94],["T_WHITESPACE","\n    ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","allowOrigin",103],"(",["T_VARIABLE","$domain",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$allowed",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_normalizeDomains",105],"(",["T_ARRAY_CAST","(array)",105],["T_VARIABLE","$domain",105],")",";",["T_WHITESPACE","\n        ",105],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$allowed",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$domain",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(","!",["T_STRING","preg_match",107],"(",["T_VARIABLE","$domain",107],"[",["T_CONSTANT_ENCAPSED_STRING","'preg'",107],"]",",",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_origin",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_CONTINUE","continue",108],";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$value",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$domain",110],"[",["T_CONSTANT_ENCAPSED_STRING","'original'",110],"]",["T_WHITESPACE"," ",110],["T_IS_IDENTICAL","===",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'*'",110],["T_WHITESPACE"," ",110],"?",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'*'",110],["T_WHITESPACE"," ",110],":",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_origin",110],";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_headers",111],"[",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Origin'",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$value",111],";",["T_WHITESPACE","\n            ",111],["T_BREAK","break",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Normalize the origin to regular expressions and put in an array format\n     *\n     * @param array $domains Domain names to normalize.\n     * @return array\n     *\/",118],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","_normalizeDomains",124],"(",["T_VARIABLE","$domains",124],")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$result",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],"[","]",";",["T_WHITESPACE","\n        ",126],["T_FOREACH","foreach",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$domains",127],["T_WHITESPACE"," ",127],["T_AS","as",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$domain",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$domain",128],["T_WHITESPACE"," ",128],["T_IS_IDENTICAL","===",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'*'",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$result",129],"[","]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'preg'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'@.@'",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'original'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'*'",129],"]",";",["T_WHITESPACE","\n                ",129],["T_CONTINUE","continue",130],";",["T_WHITESPACE","\n            ",130],"}",["T_WHITESPACE","\n\n            ",131],["T_VARIABLE","$original",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$preg",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$domain",133],";",["T_WHITESPACE","\n            ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_STRING","strpos",134],"(",["T_VARIABLE","$domain",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",134],")",["T_WHITESPACE"," ",134],["T_IS_IDENTICAL","===",134],["T_WHITESPACE"," ",134],["T_STRING","false",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$preg",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_isSsl",135],["T_WHITESPACE"," ",135],"?",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/'",135],["T_WHITESPACE"," ",135],":",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",135],")",["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_VARIABLE","$domain",135],";",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$preg",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'@^'",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_STRING","str_replace",137],"(",["T_CONSTANT_ENCAPSED_STRING","'\\*'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'.*'",137],",",["T_WHITESPACE"," ",137],["T_STRING","preg_quote",137],"(",["T_VARIABLE","$preg",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'@'",137],")",")",["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'$@'",137],";",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$result",138],"[","]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","compact",138],"(",["T_CONSTANT_ENCAPSED_STRING","'original'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'preg'",138],")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n\n        ",139],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$result",141],";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Set the list of allowed HTTP Methods.\n     *\n     * @param array $methods The allowed HTTP methods\n     * @return $this\n     *\/",144],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","allowMethods",150],"(",["T_ARRAY","array",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$methods",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_headers",152],"[",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Methods'",152],"]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","implode",152],"(",["T_CONSTANT_ENCAPSED_STRING","', '",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$methods",152],")",";",["T_WHITESPACE","\n\n        ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Enable cookies to be sent in CORS requests.\n     *\n     * @return $this\n     *\/",157],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","allowCredentials",162],"(",")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_headers",164],"[",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Credentials'",164],"]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'true'",164],";",["T_WHITESPACE","\n\n        ",164],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Whitelist headers that can be sent in CORS requests.\n     *\n     * @param array $headers The list of headers to accept in CORS requests.\n     * @return $this\n     *\/",169],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","allowHeaders",175],"(",["T_ARRAY","array",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$headers",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_headers",177],"[",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Headers'",177],"]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","implode",177],"(",["T_CONSTANT_ENCAPSED_STRING","', '",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$headers",177],")",";",["T_WHITESPACE","\n\n        ",177],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Define the headers a client library\/browser can expose to scripting\n     *\n     * @param array $headers The list of headers to expose CORS responses\n     * @return $this\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","exposeHeaders",188],"(",["T_ARRAY","array",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$headers",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_headers",190],"[",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Expose-Headers'",190],"]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","implode",190],"(",["T_CONSTANT_ENCAPSED_STRING","', '",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$headers",190],")",";",["T_WHITESPACE","\n\n        ",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Define the max-age preflight OPTIONS requests are valid for.\n     *\n     * @param int $age The max-age for OPTIONS requests in seconds\n     * @return $this\n     *\/",195],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","maxAge",201],"(",["T_VARIABLE","$age",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_headers",203],"[",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Max-Age'",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$age",203],";",["T_WHITESPACE","\n\n        ",203],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n",206],"}",["T_WHITESPACE","\n",207]]
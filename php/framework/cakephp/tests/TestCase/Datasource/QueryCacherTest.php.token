[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Test",15],["T_NS_SEPARATOR","\\",15],["T_STRING","TestCase",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Datasource",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Cache",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Cache",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Datasource",18],["T_NS_SEPARATOR","\\",18],["T_STRING","QueryCacher",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Cake",19],["T_NS_SEPARATOR","\\",19],["T_STRING","TestSuite",19],["T_NS_SEPARATOR","\\",19],["T_STRING","TestCase",19],";",["T_WHITESPACE","\n\n",19],["T_DOC_COMMENT","\/**\n * Query cacher test\n *\/",21],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","QueryCacherTest",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","TestCase",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Setup method\n     *\n     * @return void\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","setUp",32],"(",")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_STRING","parent",34],["T_DOUBLE_COLON","::",34],["T_STRING","setUp",34],"(",")",";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","engine",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getMockBuilder",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Cake\\Cache\\CacheEngine'",35],")",["T_OBJECT_OPERATOR","->",35],["T_STRING","getMock",35],"(",")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","engine",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","expects",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","any",36],"(",")",")",["T_WHITESPACE","\n            ",36],["T_OBJECT_OPERATOR","->",37],["T_STRING","method",37],"(",["T_CONSTANT_ENCAPSED_STRING","'init'",37],")",["T_WHITESPACE","\n            ",37],["T_OBJECT_OPERATOR","->",38],["T_STRING","will",38],"(",["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","returnValue",38],"(",["T_STRING","true",38],")",")",";",["T_WHITESPACE","\n\n        ",38],["T_STRING","Cache",40],["T_DOUBLE_COLON","::",40],["T_STRING","config",40],"(",["T_CONSTANT_ENCAPSED_STRING","'queryCache'",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","engine",40],")",";",["T_WHITESPACE","\n        ",40],["T_STRING","Cache",41],["T_DOUBLE_COLON","::",41],["T_STRING","enable",41],"(",")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Teardown method\n     *\n     * @return void\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","tearDown",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_STRING","parent",51],["T_DOUBLE_COLON","::",51],["T_STRING","tearDown",51],"(",")",";",["T_WHITESPACE","\n        ",51],["T_STRING","Cache",52],["T_DOUBLE_COLON","::",52],["T_STRING","drop",52],"(",["T_CONSTANT_ENCAPSED_STRING","'queryCache'",52],")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Test fetching with a function to generate the key.\n     *\n     * @return void\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","testFetchFunctionKey",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_mockRead",62],"(",["T_CONSTANT_ENCAPSED_STRING","'my_key'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'A winner'",62],")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$query",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getMockBuilder",63],"(",["T_CONSTANT_ENCAPSED_STRING","'stdClass'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getMock",63],"(",")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$cacher",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_NEW","new",65],["T_WHITESPACE"," ",65],["T_STRING","QueryCacher",65],"(",["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$q",65],")",["T_WHITESPACE"," ",65],["T_USE","use",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$query",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertSame",66],"(",["T_VARIABLE","$query",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$q",66],")",";",["T_WHITESPACE","\n\n            ",66],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'my_key'",68],";",["T_WHITESPACE","\n        ",68],"}",",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'queryCache'",69],")",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$result",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$cacher",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","fetch",71],"(",["T_VARIABLE","$query",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertEquals",72],"(",["T_CONSTANT_ENCAPSED_STRING","'A winner'",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$result",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Test fetching with a function to generate the key but the function is poop.\n     *\n     * @expectedException \\RuntimeException\n     * @expectedExceptionMessage Cache key functions must return a string. Got false.\n     * @return void\n     *\/",75],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","testFetchFunctionKeyNoString",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_mockRead",84],"(",["T_CONSTANT_ENCAPSED_STRING","'my_key'",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'A winner'",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$query",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getMockBuilder",85],"(",["T_CONSTANT_ENCAPSED_STRING","'stdClass'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getMock",85],"(",")",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$cacher",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_STRING","QueryCacher",87],"(",["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$q",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_STRING","false",88],";",["T_WHITESPACE","\n        ",88],"}",",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'queryCache'",89],")",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$cacher",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","fetch",91],"(",["T_VARIABLE","$query",91],")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Test fetching with a cache instance.\n     *\n     * @return void\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","testFetchCacheHitStringEngine",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_mockRead",101],"(",["T_CONSTANT_ENCAPSED_STRING","'my_key'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'A winner'",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$cacher",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","QueryCacher",102],"(",["T_CONSTANT_ENCAPSED_STRING","'my_key'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'queryCache'",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$query",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getMockBuilder",103],"(",["T_CONSTANT_ENCAPSED_STRING","'stdClass'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","getMock",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$result",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$cacher",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","fetch",104],"(",["T_VARIABLE","$query",104],")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertEquals",105],"(",["T_CONSTANT_ENCAPSED_STRING","'A winner'",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$result",105],")",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Test fetching with a cache hit.\n     *\n     * @return void\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","testFetchCacheHit",113],"(",")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_mockRead",115],"(",["T_CONSTANT_ENCAPSED_STRING","'my_key'",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'A winner'",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$cacher",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_STRING","QueryCacher",116],"(",["T_CONSTANT_ENCAPSED_STRING","'my_key'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","engine",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$query",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getMockBuilder",117],"(",["T_CONSTANT_ENCAPSED_STRING","'stdClass'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getMock",117],"(",")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$result",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$cacher",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","fetch",118],"(",["T_VARIABLE","$query",118],")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertEquals",119],"(",["T_CONSTANT_ENCAPSED_STRING","'A winner'",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$result",119],")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Test fetching with a cache miss.\n     *\n     * @return void\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","testFetchCacheMiss",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_mockRead",129],"(",["T_CONSTANT_ENCAPSED_STRING","'my_key'",129],",",["T_WHITESPACE"," ",129],["T_STRING","false",129],")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$cacher",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_NEW","new",130],["T_WHITESPACE"," ",130],["T_STRING","QueryCacher",130],"(",["T_CONSTANT_ENCAPSED_STRING","'my_key'",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","engine",130],")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$query",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getMockBuilder",131],"(",["T_CONSTANT_ENCAPSED_STRING","'stdClass'",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getMock",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$result",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$cacher",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","fetch",132],"(",["T_VARIABLE","$query",132],")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertNull",133],"(",["T_VARIABLE","$result",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'Cache miss should not have an isset() return.'",133],")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Helper for building mocks.\n     *\/",136],["T_WHITESPACE","\n    ",138],["T_PROTECTED","protected",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","_mockRead",139],"(",["T_VARIABLE","$key",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$value",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","false",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","engine",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","expects",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","any",141],"(",")",")",["T_WHITESPACE","\n            ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","method",142],"(",["T_CONSTANT_ENCAPSED_STRING","'read'",142],")",["T_WHITESPACE","\n            ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","with",143],"(",["T_VARIABLE","$key",143],")",["T_WHITESPACE","\n            ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","will",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","returnValue",144],"(",["T_VARIABLE","$value",144],")",")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n",145],"}",["T_WHITESPACE","\n",146]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CakePHP(tm) : Rapid Development Framework (http:\/\/cakephp.org)\n * Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n *\n * Licensed under The MIT License\n * For full copyright and license information, please see the LICENSE.txt\n * Redistributions of files must retain the above copyright notice.\n *\n * @copyright     Copyright (c) Cake Software Foundation, Inc. (http:\/\/cakefoundation.org)\n * @link          http:\/\/cakephp.org CakePHP(tm) Project\n * @since         3.0.0\n * @license       http:\/\/www.opensource.org\/licenses\/mit-license.php MIT License\n *\/",2],["T_WHITESPACE","\n",14],["T_NAMESPACE","namespace",15],["T_WHITESPACE"," ",15],["T_STRING","Cake",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Test",15],["T_NS_SEPARATOR","\\",15],["T_STRING","TestCase",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ORM",15],";",["T_WHITESPACE","\n\n",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Cake",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ORM",17],["T_NS_SEPARATOR","\\",17],["T_STRING","TableRegistry",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Cake",18],["T_NS_SEPARATOR","\\",18],["T_STRING","TestSuite",18],["T_NS_SEPARATOR","\\",18],["T_STRING","TestCase",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * Integration tests for using the bindingKey in associations\n *\/",20],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","BindingKeyTest",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","TestCase",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Fixture to be used\n     *\n     * @var array\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$fixtures",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[",["T_WHITESPACE","\n        ",31],["T_CONSTANT_ENCAPSED_STRING","'core.auth_users'",32],",",["T_WHITESPACE","\n        ",32],["T_CONSTANT_ENCAPSED_STRING","'core.site_authors'",33],",",["T_WHITESPACE","\n        ",33],["T_CONSTANT_ENCAPSED_STRING","'core.users'",34],["T_WHITESPACE","\n    ",34],"]",";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Data provider for the two types of strategies BelongsTo and HasOne implements\n     *\n     * @return void\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","strategiesProviderJoinable",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],"[","[",["T_CONSTANT_ENCAPSED_STRING","'join'",44],"]",",",["T_WHITESPACE"," ",44],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",44],"]","]",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Data provider for the two types of strategies HasMany and BelongsToMany implements\n     *\n     * @return void\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","strategiesProviderExternal",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],"[","[",["T_CONSTANT_ENCAPSED_STRING","'subquery'",54],"]",",",["T_WHITESPACE"," ",54],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",54],"]","]",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Tests that bindingKey can be used in belongsTo associations\n     *\n     * @dataProvider strategiesProviderJoinable\n     * @return void\n     *\/",57],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","testBelongsto",63],"(",["T_VARIABLE","$strategy",63],")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$users",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","TableRegistry",65],["T_DOUBLE_COLON","::",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Users'",65],")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$users",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","belongsTo",66],"(",["T_CONSTANT_ENCAPSED_STRING","'AuthUsers'",66],",",["T_WHITESPACE"," ",66],"[",["T_WHITESPACE","\n            ",66],["T_CONSTANT_ENCAPSED_STRING","'bindingKey'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'username'",67],",",["T_WHITESPACE","\n            ",67],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'username'",68],",",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'strategy'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$strategy",69],["T_WHITESPACE","\n        ",69],"]",")",";",["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$result",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$users",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","find",72],"(",")",["T_WHITESPACE","\n            ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","contain",73],"(","[",["T_CONSTANT_ENCAPSED_STRING","'AuthUsers'",73],"]",")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$expected",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],"[",["T_CONSTANT_ENCAPSED_STRING","'mariano'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'nate'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'larry'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'garrett'",75],"]",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$expected",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","array_combine",76],"(",["T_VARIABLE","$expected",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$expected",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertEquals",77],"(",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$expected",78],",",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$result",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","combine",79],"(",["T_CONSTANT_ENCAPSED_STRING","'username'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'auth_user.username'",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","toArray",79],"(",")",["T_WHITESPACE","\n        ",79],")",";",["T_WHITESPACE","\n\n        ",80],["T_VARIABLE","$expected",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],"[",["T_LNUMBER","1",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_LNUMBER","1",82],",",["T_WHITESPACE"," ",82],["T_LNUMBER","2",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_LNUMBER","5",82],",",["T_WHITESPACE"," ",82],["T_LNUMBER","3",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_LNUMBER","2",82],",",["T_WHITESPACE"," ",82],["T_LNUMBER","4",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_LNUMBER","4",82],"]",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertEquals",83],"(",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$expected",84],",",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$result",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","combine",85],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'auth_user.id'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","toArray",85],"(",")",["T_WHITESPACE","\n        ",85],")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Tests that bindingKey can be used in hasOne associations\n     *\n     * @dataProvider strategiesProviderJoinable\n     * @return void\n     *\/",89],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","testHasOne",95],"(",["T_VARIABLE","$strategy",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$users",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","TableRegistry",97],["T_DOUBLE_COLON","::",97],["T_STRING","get",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Users'",97],")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$users",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","hasOne",98],"(",["T_CONSTANT_ENCAPSED_STRING","'SiteAuthors'",98],",",["T_WHITESPACE"," ",98],"[",["T_WHITESPACE","\n            ",98],["T_CONSTANT_ENCAPSED_STRING","'bindingKey'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'username'",99],",",["T_WHITESPACE","\n            ",99],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'name'",100],",",["T_WHITESPACE","\n            ",100],["T_CONSTANT_ENCAPSED_STRING","'strategy'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$strategy",101],["T_WHITESPACE","\n        ",101],"]",")",";",["T_WHITESPACE","\n\n        ",102],["T_VARIABLE","$users",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","updateAll",104],"(","[",["T_CONSTANT_ENCAPSED_STRING","'username'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'jose'",104],"]",",",["T_WHITESPACE"," ",104],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'garrett'",104],"]",")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$result",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$users",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","find",105],"(",")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","contain",106],"(","[",["T_CONSTANT_ENCAPSED_STRING","'SiteAuthors'",106],"]",")",["T_WHITESPACE","\n            ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","where",107],"(","[",["T_CONSTANT_ENCAPSED_STRING","'username'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'jose'",107],"]",")",["T_WHITESPACE","\n            ",107],["T_OBJECT_OPERATOR","->",108],["T_STRING","first",108],"(",")",";",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertEquals",110],"(",["T_LNUMBER","3",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$result",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","site_author",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","id",110],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Tests that bindingKey can be used in hasOne associations\n     *\n     * @dataProvider strategiesProviderExternal\n     * @return void\n     *\/",113],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","testHasMany",119],"(",["T_VARIABLE","$strategy",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$users",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","TableRegistry",121],["T_DOUBLE_COLON","::",121],["T_STRING","get",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Users'",121],")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$authors",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$users",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","hasMany",122],"(",["T_CONSTANT_ENCAPSED_STRING","'SiteAuthors'",122],",",["T_WHITESPACE"," ",122],"[",["T_WHITESPACE","\n            ",122],["T_CONSTANT_ENCAPSED_STRING","'bindingKey'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'username'",123],",",["T_WHITESPACE","\n            ",123],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'name'",124],",",["T_WHITESPACE","\n            ",124],["T_CONSTANT_ENCAPSED_STRING","'strategy'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$strategy",125],["T_WHITESPACE","\n        ",125],"]",")",";",["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$authors",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","updateAll",128],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'garrett'",128],"]",",",["T_WHITESPACE"," ",128],"[",["T_CONSTANT_ENCAPSED_STRING","'id >'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","2",128],"]",")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$result",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$users",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","find",129],"(",")",["T_WHITESPACE","\n            ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","contain",130],"(","[",["T_CONSTANT_ENCAPSED_STRING","'SiteAuthors'",130],"]",")",["T_WHITESPACE","\n            ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","where",131],"(","[",["T_CONSTANT_ENCAPSED_STRING","'username'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'garrett'",131],"]",")",";",["T_WHITESPACE","\n\n        ",131],["T_VARIABLE","$expected",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],"[",["T_LNUMBER","3",133],",",["T_WHITESPACE"," ",133],["T_LNUMBER","4",133],"]",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$result",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$result",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","extract",134],"(",["T_CONSTANT_ENCAPSED_STRING","'site_authors.{*}.id'",134],")",["T_OBJECT_OPERATOR","->",134],["T_STRING","toList",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEquals",135],"(",["T_VARIABLE","$expected",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$result",135],")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n",136],"}",["T_WHITESPACE","\n",137]]
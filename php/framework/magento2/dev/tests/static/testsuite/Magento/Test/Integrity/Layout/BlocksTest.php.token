[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Test layout declaration and usage of block elements\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Test",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Integrity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Layout",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Utility",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Files",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","BlocksTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","PHPUnit_Framework_TestCase",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_STATIC","static",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$_containerAliases",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],"[","]",";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_STATIC","static",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_blockAliases",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],"[","]",";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Collect declarations of containers per layout file that have aliases\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_STATIC","static",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","setUpBeforeClass",27],"(",")",["T_WHITESPACE","\n    ",27],"{",["T_WHITESPACE","\n        ",28],["T_FOREACH","foreach",29],["T_WHITESPACE"," ",29],"(",["T_STRING","Files",29],["T_DOUBLE_COLON","::",29],["T_STRING","init",29],"(",")",["T_OBJECT_OPERATOR","->",29],["T_STRING","getLayoutFiles",29],"(","[","]",",",["T_WHITESPACE"," ",29],["T_STRING","false",29],")",["T_WHITESPACE"," ",29],["T_AS","as",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$file",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n            ",29],["T_VARIABLE","$xml",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","simplexml_load_file",30],"(",["T_VARIABLE","$file",30],")",";",["T_WHITESPACE","\n            ",30],["T_VARIABLE","$elements",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$xml",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","xpath",31],"(",["T_CONSTANT_ENCAPSED_STRING","'\/layout\/\/*[self::container or self::block]'",31],")",["T_WHITESPACE"," ",31],"?",":",["T_WHITESPACE"," ",31],"[","]",";",["T_WHITESPACE","\n            ",31],["T_DOC_COMMENT","\/** @var $node \\SimpleXMLElement *\/",32],["T_WHITESPACE","\n            ",32],["T_FOREACH","foreach",33],["T_WHITESPACE"," ",33],"(",["T_VARIABLE","$elements",33],["T_WHITESPACE"," ",33],["T_AS","as",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$node",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n                ",33],["T_VARIABLE","$alias",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING_CAST","(string)",34],["T_VARIABLE","$node",34],"[",["T_CONSTANT_ENCAPSED_STRING","'as'",34],"]",";",["T_WHITESPACE","\n                ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_EMPTY","empty",35],"(",["T_VARIABLE","$alias",35],")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n                    ",35],["T_VARIABLE","$alias",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING_CAST","(string)",36],["T_VARIABLE","$node",36],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",36],"]",";",["T_WHITESPACE","\n                ",36],"}",["T_WHITESPACE","\n                ",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$node",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getName",38],"(",")",["T_WHITESPACE"," ",38],["T_IS_EQUAL","==",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'container'",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n                    ",38],["T_STRING","self",39],["T_DOUBLE_COLON","::",39],["T_VARIABLE","$_containerAliases",39],"[",["T_VARIABLE","$alias",39],"]","[",["T_CONSTANT_ENCAPSED_STRING","'files'",39],"]","[","]",["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$file",39],";",["T_WHITESPACE","\n                    ",39],["T_STRING","self",40],["T_DOUBLE_COLON","::",40],["T_VARIABLE","$_containerAliases",40],"[",["T_VARIABLE","$alias",40],"]","[",["T_CONSTANT_ENCAPSED_STRING","'names'",40],"]","[","]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING_CAST","(string)",40],["T_VARIABLE","$node",40],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",40],"]",";",["T_WHITESPACE","\n                ",40],"}",["T_WHITESPACE"," ",41],["T_ELSE","else",41],["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n                    ",41],["T_STRING","self",42],["T_DOUBLE_COLON","::",42],["T_VARIABLE","$_blockAliases",42],"[",["T_VARIABLE","$alias",42],"]","[",["T_CONSTANT_ENCAPSED_STRING","'files'",42],"]","[","]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$file",42],";",["T_WHITESPACE","\n                    ",42],["T_STRING","self",43],["T_DOUBLE_COLON","::",43],["T_VARIABLE","$_blockAliases",43],"[",["T_VARIABLE","$alias",43],"]","[",["T_CONSTANT_ENCAPSED_STRING","'names'",43],"]","[","]",["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING_CAST","(string)",43],["T_VARIABLE","$node",43],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",43],"]",";",["T_WHITESPACE","\n                ",43],"}",["T_WHITESPACE","\n            ",44],"}",["T_WHITESPACE","\n        ",45],"}",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","testBlocksNotContainers",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$invoker",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_NEW","new",51],["T_WHITESPACE"," ",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Framework",51],["T_NS_SEPARATOR","\\",51],["T_STRING","App",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Utility",51],["T_NS_SEPARATOR","\\",51],["T_STRING","AggregateInvoker",51],"(",["T_VARIABLE","$this",51],")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$invoker",52],"(",["T_WHITESPACE","\n            ",52],["T_DOC_COMMENT","\/**\n             * Check that containers are not used as blocks in templates\n             *\n             * @param string $alias\n             * @param string $file\n             * @throws \\Exception|PHPUnit_Framework_ExpectationFailedException\n             *\/",53],["T_WHITESPACE","\n            ",59],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$alias",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$file",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_ISSET","isset",61],"(",["T_STRING","self",61],["T_DOUBLE_COLON","::",61],["T_VARIABLE","$_containerAliases",61],"[",["T_VARIABLE","$alias",61],"]",")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n                    ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_ISSET","isset",62],"(",["T_STRING","self",62],["T_DOUBLE_COLON","::",62],["T_VARIABLE","$_blockAliases",62],"[",["T_VARIABLE","$alias",62],"]",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","fail",63],"(",["T_WHITESPACE","\n                            ",63],"\"",["T_ENCAPSED_AND_WHITESPACE","Element with alias '",64],["T_CURLY_OPEN","{",64],["T_VARIABLE","$alias",64],"}",["T_ENCAPSED_AND_WHITESPACE","' is used as a block in file '",64],["T_CURLY_OPEN","{",64],["T_VARIABLE","$file",64],"}",["T_ENCAPSED_AND_WHITESPACE","' ",64],"\"",["T_WHITESPACE"," ",64],".",["T_WHITESPACE","\n                            ",64],["T_CONSTANT_ENCAPSED_STRING","\"via getChildBlock() method,\"",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE","\n                            ",65],"\"",["T_ENCAPSED_AND_WHITESPACE"," while '",66],["T_CURLY_OPEN","{",66],["T_VARIABLE","$alias",66],"}",["T_ENCAPSED_AND_WHITESPACE","' alias is declared as a container in file(s): ",66],"\"",["T_WHITESPACE"," ",66],".",["T_WHITESPACE","\n                            ",66],["T_STRING","join",67],"(",["T_WHITESPACE","\n                                ",67],["T_CONSTANT_ENCAPSED_STRING","', '",68],",",["T_WHITESPACE","\n                                ",68],["T_STRING","self",69],["T_DOUBLE_COLON","::",69],["T_VARIABLE","$_containerAliases",69],"[",["T_VARIABLE","$alias",69],"]","[",["T_CONSTANT_ENCAPSED_STRING","'files'",69],"]",["T_WHITESPACE","\n                            ",69],")",["T_WHITESPACE","\n                        ",70],")",";",["T_WHITESPACE","\n                    ",71],"}",["T_WHITESPACE"," ",72],["T_ELSE","else",72],["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","markTestIncomplete",73],"(",["T_WHITESPACE","\n                            ",73],"\"",["T_ENCAPSED_AND_WHITESPACE","Element with alias '",74],["T_CURLY_OPEN","{",74],["T_VARIABLE","$alias",74],"}",["T_ENCAPSED_AND_WHITESPACE","' is used as a block in file '",74],["T_CURLY_OPEN","{",74],["T_VARIABLE","$file",74],"}",["T_ENCAPSED_AND_WHITESPACE","' ",74],"\"",["T_WHITESPACE"," ",74],".",["T_WHITESPACE","\n                            ",74],["T_CONSTANT_ENCAPSED_STRING","\"via getChildBlock() method.\"",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE","\n                            ",75],["T_CONSTANT_ENCAPSED_STRING","\" It's impossible to determine explicitly whether the element is a block or a container, \"",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE","\n                            ",76],["T_CONSTANT_ENCAPSED_STRING","\"as it is declared as a container in file(s): \"",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE","\n                            ",77],["T_STRING","join",78],"(",["T_WHITESPACE","\n                                ",78],["T_CONSTANT_ENCAPSED_STRING","', '",79],",",["T_WHITESPACE","\n                                ",79],["T_STRING","self",80],["T_DOUBLE_COLON","::",80],["T_VARIABLE","$_containerAliases",80],"[",["T_VARIABLE","$alias",80],"]","[",["T_CONSTANT_ENCAPSED_STRING","'files'",80],"]",["T_WHITESPACE","\n                            ",80],")",["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","\" and as a block in file(s): \"",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_STRING","join",81],"(",["T_WHITESPACE","\n                                ",81],["T_CONSTANT_ENCAPSED_STRING","', '",82],",",["T_WHITESPACE","\n                                ",82],["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_VARIABLE","$_blockAliases",83],"[",["T_VARIABLE","$alias",83],"]","[",["T_CONSTANT_ENCAPSED_STRING","'files'",83],"]",["T_WHITESPACE","\n                            ",83],")",["T_WHITESPACE","\n                        ",84],")",";",["T_WHITESPACE","\n                    ",85],"}",["T_WHITESPACE","\n                ",86],"}",["T_WHITESPACE","\n            ",87],"}",",",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getChildBlockDataProvider",89],"(",")",["T_WHITESPACE","\n        ",89],")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",93],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","getChildBlockDataProvider",96],"(",")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$result",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[","]",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$collectedFiles",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","Files",99],["T_DOUBLE_COLON","::",99],["T_STRING","init",99],"(",")",["T_OBJECT_OPERATOR","->",99],["T_STRING","getPhpFiles",99],"(",["T_WHITESPACE","\n            ",99],["T_STRING","Files",100],["T_DOUBLE_COLON","::",100],["T_STRING","INCLUDE_APP_CODE",100],["T_WHITESPACE","\n            ",100],"|",["T_WHITESPACE"," ",101],["T_STRING","Files",101],["T_DOUBLE_COLON","::",101],["T_STRING","INCLUDE_TEMPLATES",101],["T_WHITESPACE","\n            ",101],"|",["T_WHITESPACE"," ",102],["T_STRING","Files",102],["T_DOUBLE_COLON","::",102],["T_STRING","INCLUDE_NON_CLASSES",102],["T_WHITESPACE","\n        ",102],")",";",["T_WHITESPACE","\n        ",103],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$collectedFiles",104],["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$file",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$aliases",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Framework",105],["T_NS_SEPARATOR","\\",105],["T_STRING","App",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Utility",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Classes",105],["T_DOUBLE_COLON","::",105],["T_STRING","getAllMatches",105],"(",["T_WHITESPACE","\n                ",105],["T_STRING","file_get_contents",106],"(",["T_VARIABLE","$file",106],")",",",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'\/\\->getChildBlock\\(\\'([^\\']+)\\'\\)\/x'",107],["T_WHITESPACE","\n            ",107],")",";",["T_WHITESPACE","\n            ",108],["T_FOREACH","foreach",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$aliases",109],["T_WHITESPACE"," ",109],["T_AS","as",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$alias",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$result",110],"[",["T_VARIABLE","$file",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],"[",["T_VARIABLE","$alias",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$file",110],"]",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$result",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n",114],"}",["T_WHITESPACE","\n",115]]
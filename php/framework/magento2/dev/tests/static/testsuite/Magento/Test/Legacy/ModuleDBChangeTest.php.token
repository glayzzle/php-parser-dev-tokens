[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Scan source code for DB schema or data updates for patch releases in non-actual branches\n * Backwards compatibility test\n *\/",7],["T_WHITESPACE","\n",10],["T_NAMESPACE","namespace",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Legacy",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ModuleDBChangeTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PHPUnit_Framework_TestCase",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PRIVATE","private",18],["T_WHITESPACE"," ",18],["T_STATIC","static",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$branchesFilesPattern",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_DIR","__DIR__",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'\/..\/_files\/branches*'",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$changedFilesPattern",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_DIR","__DIR__",23],["T_WHITESPACE"," ",23],".",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'\/..\/_files\/changed_files*'",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_STATIC","static",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$changedFileList",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","''",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_STATIC","static",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$actualBranch",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","false",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     *  Set changed files paths and list for all projects\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_STATIC","static",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","setUpBeforeClass",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_FOREACH","foreach",40],["T_WHITESPACE"," ",40],"(",["T_STRING","glob",40],"(",["T_STRING","self",40],["T_DOUBLE_COLON","::",40],["T_VARIABLE","$branchesFilesPattern",40],")",["T_WHITESPACE"," ",40],["T_AS","as",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$branchesFile",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n            ",40],["T_COMMENT","\/\/get the current branchname from the first line\n",41],["T_WHITESPACE","            ",42],["T_VARIABLE","$branchName",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","trim",42],"(",["T_STRING","file",42],"(",["T_VARIABLE","$branchesFile",42],")","[",["T_LNUMBER","0",42],"]",")",";",["T_WHITESPACE","\n            ",42],["T_IF","if",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$branchName",43],["T_WHITESPACE"," ",43],["T_IS_IDENTICAL","===",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'develop'",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n                ",43],["T_STRING","self",44],["T_DOUBLE_COLON","::",44],["T_VARIABLE","$actualBranch",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","true",44],";",["T_WHITESPACE","\n            ",44],"}",["T_WHITESPACE"," ",45],["T_ELSE","else",45],["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n                ",45],["T_COMMENT","\/\/get current minor branch name\n",46],["T_WHITESPACE","                ",47],["T_STRING","preg_match",47],"(",["T_CONSTANT_ENCAPSED_STRING","'|^(\\d+\\.\\d+)|'",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$branchName",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$minorBranch",47],")",";",["T_WHITESPACE","\n                ",47],["T_VARIABLE","$branchName",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$minorBranch",48],"[",["T_LNUMBER","0",48],"]",";",["T_WHITESPACE","\n\n                ",48],["T_COMMENT","\/\/get all version branches\n",50],["T_WHITESPACE","                ",51],["T_STRING","preg_match_all",51],"(",["T_CONSTANT_ENCAPSED_STRING","'|^(\\d+\\.\\d+)|m'",51],",",["T_WHITESPACE"," ",51],["T_STRING","file_get_contents",51],"(",["T_VARIABLE","$branchesFile",51],")",",",["T_WHITESPACE"," ",51],["T_VARIABLE","$matches",51],")",";",["T_WHITESPACE","\n\n                ",51],["T_COMMENT","\/\/check is this a latest release branch\n",53],["T_WHITESPACE","                ",54],["T_STRING","self",54],["T_DOUBLE_COLON","::",54],["T_VARIABLE","$actualBranch",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$branchName",54],["T_WHITESPACE"," ",54],["T_IS_EQUAL","==",54],["T_WHITESPACE"," ",54],["T_STRING","max",54],"(",["T_VARIABLE","$matches",54],"[",["T_LNUMBER","0",54],"]",")",")",";",["T_WHITESPACE","\n            ",54],"}",["T_WHITESPACE","\n        ",55],"}",["T_WHITESPACE","\n\n        ",56],["T_FOREACH","foreach",58],["T_WHITESPACE"," ",58],"(",["T_STRING","glob",58],"(",["T_STRING","self",58],["T_DOUBLE_COLON","::",58],["T_VARIABLE","$changedFilesPattern",58],")",["T_WHITESPACE"," ",58],["T_AS","as",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$changedFile",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_STRING","self",59],["T_DOUBLE_COLON","::",59],["T_VARIABLE","$changedFileList",59],["T_WHITESPACE"," ",59],["T_CONCAT_EQUAL",".=",59],["T_WHITESPACE"," ",59],["T_STRING","file_get_contents",59],"(",["T_VARIABLE","$changedFile",59],")",["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_STRING","PHP_EOL",59],";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Test changes for module.xml files\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","testModuleXmlFiles",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_STRING","self",68],["T_DOUBLE_COLON","::",68],["T_VARIABLE","$actualBranch",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_STRING","preg_match_all",69],"(",["T_CONSTANT_ENCAPSED_STRING","'|etc\/module\\.xml$|mi'",69],",",["T_WHITESPACE"," ",69],["T_STRING","self",69],["T_DOUBLE_COLON","::",69],["T_VARIABLE","$changedFileList",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$matches",69],")",";",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertEmpty",70],"(",["T_WHITESPACE","\n                ",70],["T_STRING","reset",71],"(",["T_VARIABLE","$matches",71],")",",",["T_WHITESPACE","\n                ",71],["T_CONSTANT_ENCAPSED_STRING","'module.xml changes for patch releases in non-actual branches are not allowed:'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_STRING","PHP_EOL",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE","\n                ",72],["T_STRING","implode",73],"(",["T_STRING","PHP_EOL",73],",",["T_WHITESPACE"," ",73],["T_STRING","array_values",73],"(",["T_STRING","reset",73],"(",["T_VARIABLE","$matches",73],")",")",")",["T_WHITESPACE","\n            ",73],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Test changes for files in Module Setup dir\n     *\/",78],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","testModuleSetupFiles",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(","!",["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_VARIABLE","$actualBranch",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_STRING","preg_match_all",84],"(",["T_CONSTANT_ENCAPSED_STRING","'|app\/code\/Magento\/[^\/]+\/Setup\/[^\/]+$|mi'",84],",",["T_WHITESPACE"," ",84],["T_STRING","self",84],["T_DOUBLE_COLON","::",84],["T_VARIABLE","$changedFileList",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$matches",84],")",";",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEmpty",85],"(",["T_WHITESPACE","\n                ",85],["T_STRING","reset",86],"(",["T_VARIABLE","$matches",86],")",",",["T_WHITESPACE","\n                ",86],["T_CONSTANT_ENCAPSED_STRING","'Code with changes for DB schema or data in non-actual branches are not allowed:'",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_STRING","PHP_EOL",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE","\n                ",87],["T_STRING","implode",88],"(",["T_STRING","PHP_EOL",88],",",["T_WHITESPACE"," ",88],["T_STRING","array_values",88],"(",["T_STRING","reset",88],"(",["T_VARIABLE","$matches",88],")",")",")",["T_WHITESPACE","\n            ",88],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n",91],"}",["T_WHITESPACE","\n",92]]
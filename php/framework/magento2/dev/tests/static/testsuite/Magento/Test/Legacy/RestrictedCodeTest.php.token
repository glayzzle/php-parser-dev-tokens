[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Legacy",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ComponentRegistrar",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests to find usage of restricted code\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","RestrictedCodeTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PHPUnit_Framework_TestCase",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_COMMENT","\/**@#+\n     * Lists of restricted entities from fixtures\n     *\n     * @var array\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_classes",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],"[","]",";",["T_WHITESPACE","\n    ",20],["T_COMMENT","\/**#@-*\/",21],["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * List of fixtures that contain restricted classes and should not be tested\n     *\n     * @var array\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_STATIC","static",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$_fixtureFiles",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],"[","]",";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var ComponentRegistrar\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$componentRegistrar",33],";",["T_WHITESPACE","\n\n    ",33],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","setUp",35],"(",")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","componentRegistrar",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","ComponentRegistrar",37],"(",")",";",["T_WHITESPACE","\n    ",37],"}",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Read fixtures into memory as arrays\n     *\n     * @return void\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_STATIC","static",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","setUpBeforeClass",45],"(",")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_STRING","self",47],["T_DOUBLE_COLON","::",47],["T_STRING","_loadData",47],"(",["T_STRING","self",47],["T_DOUBLE_COLON","::",47],["T_VARIABLE","$_classes",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'restricted_classes*.php'",47],")",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Loads and merges data from fixtures\n     *\n     * @param array $data\n     * @param string $filePattern\n     * @return void\n     *\/",50],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_STATIC","static",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","_loadData",57],"(",["T_ARRAY","array",57],["T_WHITESPACE"," ",57],"&",["T_VARIABLE","$data",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$filePattern",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_STRING","glob",59],"(",["T_DIR","__DIR__",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/'",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_VARIABLE","$filePattern",59],")",["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$file",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$relativePath",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","str_replace",60],"(",["T_WHITESPACE","\n                ",60],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",61],",",["T_WHITESPACE","\n                ",61],["T_CONSTANT_ENCAPSED_STRING","'\/'",62],",",["T_WHITESPACE","\n                ",62],["T_STRING","str_replace",63],"(",["T_STRING","BP",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","''",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$file",63],")",["T_WHITESPACE","\n            ",63],")",";",["T_WHITESPACE","\n            ",64],["T_STRING","array_push",65],"(",["T_STRING","self",65],["T_DOUBLE_COLON","::",65],["T_VARIABLE","$_fixtureFiles",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$relativePath",65],")",";",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$data",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","array_merge_recursive",66],"(",["T_VARIABLE","$data",66],",",["T_WHITESPACE"," ",66],["T_STRING","self",66],["T_DOUBLE_COLON","::",66],["T_STRING","_readList",66],"(",["T_VARIABLE","$file",66],")",")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Isolate including a file into a method to reduce scope\n     *\n     * @param string $file\n     * @return array\n     *\/",70],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_STATIC","static",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","_readList",76],"(",["T_VARIABLE","$file",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_INCLUDE","include",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$file",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Test that restricted entities are not used in PHP files\n     *\n     * @return void\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","testPhpFiles",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$invoker",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","App",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Utility",88],["T_NS_SEPARATOR","\\",88],["T_STRING","AggregateInvoker",88],"(",["T_VARIABLE","$this",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$testFiles",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","TestFramework",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Utility",89],["T_NS_SEPARATOR","\\",89],["T_STRING","ChangedFiles",89],["T_DOUBLE_COLON","::",89],["T_STRING","getPhpFiles",89],"(",["T_DIR","__DIR__",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'\/..\/_files\/changed_files*'",89],")",";",["T_WHITESPACE","\n        ",89],["T_FOREACH","foreach",90],["T_WHITESPACE"," ",90],"(",["T_STRING","self",90],["T_DOUBLE_COLON","::",90],["T_VARIABLE","$_fixtureFiles",90],["T_WHITESPACE"," ",90],["T_AS","as",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$fixtureFile",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_STRING","array_key_exists",91],"(",["T_STRING","BP",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_VARIABLE","$fixtureFile",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$testFiles",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                ",91],["T_UNSET","unset",92],"(",["T_VARIABLE","$testFiles",92],"[",["T_STRING","BP",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$fixtureFile",92],"]",")",";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$invoker",95],"(",["T_WHITESPACE","\n            ",95],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$file",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_testRestrictedClasses",97],"(",["T_VARIABLE","$file",97],")",";",["T_WHITESPACE","\n            ",97],"}",",",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$testFiles",99],["T_WHITESPACE","\n        ",99],")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Assert that restricted classes are not used in the file\n     *\n     * @param string $file\n     * @return void\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","_testRestrictedClasses",109],"(",["T_VARIABLE","$file",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$content",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","file_get_contents",111],"(",["T_VARIABLE","$file",111],")",";",["T_WHITESPACE","\n        ",111],["T_FOREACH","foreach",112],["T_WHITESPACE"," ",112],"(",["T_STRING","self",112],["T_DOUBLE_COLON","::",112],["T_VARIABLE","$_classes",112],["T_WHITESPACE"," ",112],["T_AS","as",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$restrictedClass",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$classRules",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_FOREACH","foreach",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$classRules",113],"[",["T_CONSTANT_ENCAPSED_STRING","'exclude'",113],"]",["T_WHITESPACE"," ",113],["T_AS","as",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$skippedPathInfo",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_STRING","strpos",114],"(",["T_VARIABLE","$file",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getExcludedFilePath",114],"(",["T_VARIABLE","$skippedPathInfo",114],")",")",["T_WHITESPACE"," ",114],["T_IS_IDENTICAL","===",114],["T_WHITESPACE"," ",114],["T_LNUMBER","0",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                    ",114],["T_CONTINUE","continue",115],["T_WHITESPACE"," ",115],["T_LNUMBER","2",115],";",["T_WHITESPACE","\n                ",115],"}",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n\n            ",117],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertFalse",119],"(",["T_WHITESPACE","\n                ",119],["T_NS_SEPARATOR","\\",120],["T_STRING","Magento",120],["T_NS_SEPARATOR","\\",120],["T_STRING","TestFramework",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Utility",120],["T_NS_SEPARATOR","\\",120],["T_STRING","CodeCheck",120],["T_DOUBLE_COLON","::",120],["T_STRING","isClassUsed",120],"(",["T_VARIABLE","$restrictedClass",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$content",120],")",",",["T_WHITESPACE","\n                ",120],["T_STRING","sprintf",121],"(",["T_WHITESPACE","\n                    ",121],["T_CONSTANT_ENCAPSED_STRING","\"Class '%s' is restricted in %s. Suggested replacement: %s\"",122],",",["T_WHITESPACE","\n                    ",122],["T_VARIABLE","$restrictedClass",123],",",["T_WHITESPACE","\n                    ",123],["T_VARIABLE","$file",124],",",["T_WHITESPACE","\n                    ",124],["T_VARIABLE","$classRules",125],"[",["T_CONSTANT_ENCAPSED_STRING","'replacement'",125],"]",["T_WHITESPACE","\n                ",125],")",["T_WHITESPACE","\n            ",126],")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Get full path for excluded file\n     *\n     * @param array $pathInfo\n     * @return string\n     *\/",131],["T_WHITESPACE","\n    ",136],["T_PRIVATE","private",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getExcludedFilePath",137],"(",["T_VARIABLE","$pathInfo",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$pathInfo",139],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",139],"]",["T_WHITESPACE"," ",139],["T_IS_NOT_EQUAL","!=",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'setup'",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","componentRegistrar",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getPath",140],"(",["T_VARIABLE","$pathInfo",140],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",140],"]",",",["T_WHITESPACE"," ",140],["T_VARIABLE","$pathInfo",140],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",140],"]",")",["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'\/'",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$pathInfo",140],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",140],"]",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_STRING","BP",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'\/setup\/'",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_VARIABLE","$pathInfo",142],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",142],"]",";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n",143],"}",["T_WHITESPACE","\n",144]]
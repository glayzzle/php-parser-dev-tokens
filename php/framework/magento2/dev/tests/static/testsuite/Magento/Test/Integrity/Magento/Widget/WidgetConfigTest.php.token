[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Find \"widget.xml\" files and validate them\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Test",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Integrity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Widget",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","WidgetConfigTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_NS_SEPARATOR","\\",10],["T_STRING","PHPUnit_Framework_TestCase",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Config\\Dom\\UrnResolver *\/",12],["T_WHITESPACE","\n    ",12],["T_PROTECTED","protected",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$urnResolver",13],";",["T_WHITESPACE","\n\n    ",13],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","setUp",15],"(",")",["T_WHITESPACE","\n    ",15],"{",["T_WHITESPACE","\n        ",16],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","urnResolver",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_NEW","new",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Config",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Dom",17],["T_NS_SEPARATOR","\\",17],["T_STRING","UrnResolver",17],"(",")",";",["T_WHITESPACE","\n    ",17],"}",["T_WHITESPACE","\n\n    ",18],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","testXmlFiles",20],"(",")",["T_WHITESPACE","\n    ",20],"{",["T_WHITESPACE","\n        ",21],["T_VARIABLE","$invoker",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_NEW","new",22],["T_WHITESPACE"," ",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Magento",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Framework",22],["T_NS_SEPARATOR","\\",22],["T_STRING","App",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Utility",22],["T_NS_SEPARATOR","\\",22],["T_STRING","AggregateInvoker",22],"(",["T_VARIABLE","$this",22],")",";",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$invoker",23],"(",["T_WHITESPACE","\n            ",23],["T_DOC_COMMENT","\/**\n             * @param string $configFile\n             *\/",24],["T_WHITESPACE","\n            ",26],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],"(",["T_VARIABLE","$configFile",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n                ",27],["T_VARIABLE","$schema",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","urnResolver",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getRealPath",28],"(",["T_CONSTANT_ENCAPSED_STRING","'urn:magento:module:Magento_Widget:etc\/widget.xsd'",28],")",";",["T_WHITESPACE","\n                ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","_validateFileExpectSuccess",29],"(",["T_VARIABLE","$configFile",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$schema",29],")",";",["T_WHITESPACE","\n            ",29],"}",",",["T_WHITESPACE","\n            ",30],["T_STRING","array_merge",31],"(",["T_WHITESPACE","\n                ",31],["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Framework",32],["T_NS_SEPARATOR","\\",32],["T_STRING","App",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Utility",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Files",32],["T_DOUBLE_COLON","::",32],["T_STRING","init",32],"(",")",["T_OBJECT_OPERATOR","->",32],["T_STRING","getConfigFiles",32],"(",["T_CONSTANT_ENCAPSED_STRING","'widget.xml'",32],")",",",["T_WHITESPACE","\n                ",32],["T_NS_SEPARATOR","\\",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Framework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","App",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Utility",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Files",33],["T_DOUBLE_COLON","::",33],["T_STRING","init",33],"(",")",["T_OBJECT_OPERATOR","->",33],["T_STRING","getLayoutConfigFiles",33],"(",["T_CONSTANT_ENCAPSED_STRING","'widget.xml'",33],")",["T_WHITESPACE","\n            ",33],")",["T_WHITESPACE","\n        ",34],")",";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testSchemaUsingValidXml",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$xmlFile",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_DIR","__DIR__",40],["T_WHITESPACE"," ",40],".",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/widget.xml'",40],";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$schema",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","urnResolver",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getRealPath",41],"(",["T_CONSTANT_ENCAPSED_STRING","'urn:magento:module:Magento_Widget:etc\/widget.xsd'",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_validateFileExpectSuccess",42],"(",["T_VARIABLE","$xmlFile",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$schema",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","testSchemaUsingInvalidXml",45],"(",")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(","!",["T_STRING","function_exists",47],"(",["T_CONSTANT_ENCAPSED_STRING","'libxml_set_external_entity_loader'",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","markTestSkipped",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Skipped due to MAGETWO-45033'",48],")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$xmlFile",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_DIR","__DIR__",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/invalid_widget.xml'",50],";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$schema",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","urnResolver",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getRealPath",51],"(",["T_CONSTANT_ENCAPSED_STRING","'urn:magento:module:Magento_Widget:etc\/widget.xsd'",51],")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_validateFileExpectFailure",52],"(",["T_VARIABLE","$xmlFile",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$schema",52],")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","testFileSchemaUsingXml",55],"(",")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$xmlFile",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_DIR","__DIR__",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/widget_file.xml'",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$schema",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","urnResolver",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getRealPath",58],"(",["T_CONSTANT_ENCAPSED_STRING","'urn:magento:module:Magento_Widget:etc\/widget_file.xsd'",58],")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_validateFileExpectSuccess",59],"(",["T_VARIABLE","$xmlFile",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$schema",59],")",";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","testFileSchemaUsingInvalidXml",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(","!",["T_STRING","function_exists",64],"(",["T_CONSTANT_ENCAPSED_STRING","'libxml_set_external_entity_loader'",64],")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","markTestSkipped",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Skipped due to MAGETWO-45033'",65],")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$xmlFile",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_DIR","__DIR__",67],["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/invalid_widget.xml'",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$schema",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","urnResolver",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getRealPath",68],"(",["T_CONSTANT_ENCAPSED_STRING","'urn:magento:module:Magento_Widget:etc\/widget_file.xsd'",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_validateFileExpectFailure",69],"(",["T_VARIABLE","$xmlFile",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$schema",69],")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Run schema validation against an xml file with a provided schema.\n     *\n     * This helper expects the validation to pass and will fail a test if any errors are found.\n     *\n     * @param $xmlFile string a known good xml file.\n     * @param $schemaFile string schema that should find no errors in the known good xml file.\n     *\/",72],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","_validateFileExpectFailure",80],"(",["T_VARIABLE","$xmlFile",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$schemaFile",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$dom",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_NS_SEPARATOR","\\",82],["T_STRING","DOMDocument",82],"(",")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$dom",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","loadXML",83],"(",["T_STRING","file_get_contents",83],"(",["T_VARIABLE","$xmlFile",83],")",")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$errors",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Framework",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Config",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Dom",84],["T_DOUBLE_COLON","::",84],["T_STRING","validateDomDocument",84],"(",["T_VARIABLE","$dom",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$schemaFile",84],")",";",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_VARIABLE","$errors",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","fail",86],"(",["T_CONSTANT_ENCAPSED_STRING","'There is a problem with the schema.  A known bad XML file passed validation'",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Run schema validation against a known bad xml file with a provided schema.\n     *\n     * This helper expects the validation to fail and will fail a test if no errors are found.\n     *\n     * @param $xmlFile string a known bad xml file.\n     * @param $schemaFile string schema that should find errors in the known bad xml file.\n     *\/",90],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","_validateFileExpectSuccess",98],"(",["T_VARIABLE","$xmlFile",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$schemaFile",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$dom",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_NS_SEPARATOR","\\",100],["T_STRING","DOMDocument",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$dom",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","loadXML",101],"(",["T_STRING","file_get_contents",101],"(",["T_VARIABLE","$xmlFile",101],")",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$errors",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Framework",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Config",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Dom",102],["T_DOUBLE_COLON","::",102],["T_STRING","validateDomDocument",102],"(",["T_VARIABLE","$dom",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$schemaFile",102],")",";",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$errors",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","fail",104],"(",["T_WHITESPACE","\n                ",104],["T_CONSTANT_ENCAPSED_STRING","'There is a problem with the schema.  A known good XML file failed validation: '",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_STRING","PHP_EOL",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_STRING","implode",105],"(",["T_WHITESPACE","\n                    ",105],["T_STRING","PHP_EOL",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_STRING","PHP_EOL",106],",",["T_WHITESPACE","\n                    ",106],["T_VARIABLE","$errors",107],["T_WHITESPACE","\n                ",107],")",["T_WHITESPACE","\n            ",108],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n",111],"}",["T_WHITESPACE","\n",112]]
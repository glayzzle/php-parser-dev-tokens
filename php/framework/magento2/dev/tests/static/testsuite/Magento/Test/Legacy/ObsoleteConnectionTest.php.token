[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Legacy",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ComponentRegistrar",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Temporary test\n * Test verifies obsolete usages in modules that were refactored to work with getConnection.\n *\/",10],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","ObsoleteConnectionTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","PHPUnit_Framework_TestCase",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$obsoleteMethods",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],"[","]",";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$obsoleteRegexp",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],"[","]",";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$filesBlackList",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],"[","]",";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$appPath",34],";",["T_WHITESPACE","\n\n    ",34],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","setUp",36],"(",")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","obsoleteMethods",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],"[",["T_WHITESPACE","\n            ",38],["T_CONSTANT_ENCAPSED_STRING","'_getReadConnection'",39],",",["T_WHITESPACE","\n            ",39],["T_CONSTANT_ENCAPSED_STRING","'_getWriteConnection'",40],",",["T_WHITESPACE","\n            ",40],["T_CONSTANT_ENCAPSED_STRING","'_getReadAdapter'",41],",",["T_WHITESPACE","\n            ",41],["T_CONSTANT_ENCAPSED_STRING","'_getWriteAdapter'",42],",",["T_WHITESPACE","\n            ",42],["T_CONSTANT_ENCAPSED_STRING","'getReadConnection'",43],",",["T_WHITESPACE","\n            ",43],["T_CONSTANT_ENCAPSED_STRING","'getWriteConnection'",44],",",["T_WHITESPACE","\n            ",44],["T_CONSTANT_ENCAPSED_STRING","'getReadAdapter'",45],",",["T_WHITESPACE","\n            ",45],["T_CONSTANT_ENCAPSED_STRING","'getWriteAdapter'",46],",",["T_WHITESPACE","\n        ",46],"]",";",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","obsoleteRegexp",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[",["T_WHITESPACE","\n          ",49],["T_COMMENT","\/\/  'getConnection\\\\(\\'\\\\w*_*(read|write)',\n",50],["T_WHITESPACE","            ",51],["T_CONSTANT_ENCAPSED_STRING","'\\\\$_?(read|write)(Connection|Adapter)'",51],",",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'\\\\$write([A-Z]\\\\w*|\\\\s)'",52],",",["T_WHITESPACE","\n        ",52],"]",";",["T_WHITESPACE","\n\n        ",53],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","filesBlackList",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getBlackList",55],"(",")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Test verify that obsolete regexps do not appear in refactored folders\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testObsoleteRegexp",61],"(",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$invoker",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Framework",63],["T_NS_SEPARATOR","\\",63],["T_STRING","App",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Utility",63],["T_NS_SEPARATOR","\\",63],["T_STRING","AggregateInvoker",63],"(",["T_VARIABLE","$this",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$invoker",64],"(",["T_WHITESPACE","\n            ",64],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$file",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_VARIABLE","$content",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","file_get_contents",66],"(",["T_VARIABLE","$file",66],")",";",["T_WHITESPACE","\n                ",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","obsoleteRegexp",67],["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$regexp",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertSame",68],"(",["T_WHITESPACE","\n                        ",68],["T_LNUMBER","0",69],",",["T_WHITESPACE","\n                        ",69],["T_STRING","preg_match",70],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$regexp",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'\/iS'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$content",70],")",",",["T_WHITESPACE","\n                        ",70],"\"",["T_ENCAPSED_AND_WHITESPACE","File: ",71],["T_VARIABLE","$file",71],["T_ENCAPSED_AND_WHITESPACE","\\nContains obsolete regexp: ",71],["T_VARIABLE","$regexp",71],["T_ENCAPSED_AND_WHITESPACE",". ",71],"\"",["T_WHITESPACE","\n                    ",71],")",";",["T_WHITESPACE","\n                ",72],"}",["T_WHITESPACE","\n            ",73],"}",",",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","modulesFilesDataProvider",75],"(",")",["T_WHITESPACE","\n        ",75],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Test verify that obsolete methods do not appear in refactored folders\n     *\/",79],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","testObsoleteResponseMethods",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$invoker",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Framework",84],["T_NS_SEPARATOR","\\",84],["T_STRING","App",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Utility",84],["T_NS_SEPARATOR","\\",84],["T_STRING","AggregateInvoker",84],"(",["T_VARIABLE","$this",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$invoker",85],"(",["T_WHITESPACE","\n            ",85],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$file",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$content",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","file_get_contents",87],"(",["T_VARIABLE","$file",87],")",";",["T_WHITESPACE","\n                ",87],["T_FOREACH","foreach",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","obsoleteMethods",88],["T_WHITESPACE"," ",88],["T_AS","as",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$method",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                    ",88],["T_VARIABLE","$quotedMethod",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","preg_quote",89],"(",["T_VARIABLE","$method",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'\/'",89],")",";",["T_WHITESPACE","\n                    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertSame",90],"(",["T_WHITESPACE","\n                        ",90],["T_LNUMBER","0",91],",",["T_WHITESPACE","\n                        ",91],["T_STRING","preg_match",92],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(?<=[a-z\\\\d_:]|->|function\\\\s)'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$quotedMethod",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'\\\\s*\\\\(\/iS'",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$content",92],")",",",["T_WHITESPACE","\n                        ",92],"\"",["T_ENCAPSED_AND_WHITESPACE","File: ",93],["T_VARIABLE","$file",93],["T_ENCAPSED_AND_WHITESPACE","\\nContains obsolete method: ",93],["T_VARIABLE","$method",93],["T_ENCAPSED_AND_WHITESPACE"," . ",93],"\"",["T_WHITESPACE","\n                    ",93],")",";",["T_WHITESPACE","\n                ",94],"}",["T_WHITESPACE","\n            ",95],"}",",",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","modulesFilesDataProvider",97],"(",")",["T_WHITESPACE","\n        ",97],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Return refactored files\n     *\n     * @return array\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","modulesFilesDataProvider",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$filesList",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],"[","]",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$componentRegistrar",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_NEW","new",109],["T_WHITESPACE"," ",109],["T_STRING","ComponentRegistrar",109],"(",")",";",["T_WHITESPACE","\n        ",109],["T_FOREACH","foreach",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getFilesData",110],"(",["T_CONSTANT_ENCAPSED_STRING","'whitelist\/refactored_modules*'",110],")",["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$refactoredModule",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$componentRegistrar",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getPath",111],"(",["T_STRING","ComponentRegistrar",111],["T_DOUBLE_COLON","::",111],["T_STRING","MODULE",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$refactoredModule",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$files",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Framework",112],["T_NS_SEPARATOR","\\",112],["T_STRING","App",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Utility",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Files",112],["T_DOUBLE_COLON","::",112],["T_STRING","init",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getFiles",112],"(",["T_WHITESPACE","\n                    ",112],"[",["T_VARIABLE","$componentRegistrar",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getPath",113],"(",["T_STRING","ComponentRegistrar",113],["T_DOUBLE_COLON","::",113],["T_STRING","MODULE",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$refactoredModule",113],")","]",",",["T_WHITESPACE","\n                    ",113],["T_CONSTANT_ENCAPSED_STRING","'*.php'",114],["T_WHITESPACE","\n                ",114],")",";",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$filesList",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","array_merge",116],"(",["T_VARIABLE","$filesList",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$files",116],")",";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$result",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","array_map",120],"(",["T_CONSTANT_ENCAPSED_STRING","'realpath'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$filesList",120],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$result",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","array_diff",121],"(",["T_VARIABLE","$result",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","filesBlackList",121],")",";",["T_WHITESPACE","\n        ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Magento",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Framework",122],["T_NS_SEPARATOR","\\",122],["T_STRING","App",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Utility",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Files",122],["T_DOUBLE_COLON","::",122],["T_STRING","composeDataSets",122],"(",["T_VARIABLE","$result",122],")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",125],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","getBlackList",128],"(",")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$blackListFiles",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],"[","]",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$componentRegistrar",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_NEW","new",131],["T_WHITESPACE"," ",131],["T_STRING","ComponentRegistrar",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_FOREACH","foreach",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getFilesData",132],"(",["T_CONSTANT_ENCAPSED_STRING","'blacklist\/files_list*'",132],")",["T_WHITESPACE"," ",132],["T_AS","as",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$fileInfo",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$blackListFiles",133],"[","]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$componentRegistrar",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getPath",133],"(",["T_STRING","ComponentRegistrar",133],["T_DOUBLE_COLON","::",133],["T_STRING","MODULE",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$fileInfo",133],"[",["T_LNUMBER","0",133],"]",")",["T_WHITESPACE","\n                ",133],".",["T_WHITESPACE"," ",134],["T_STRING","DIRECTORY_SEPARATOR",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_VARIABLE","$fileInfo",134],"[",["T_LNUMBER","1",134],"]",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$blackListFiles",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * @param string $filePattern\n     * @return array\n     *\/",139],["T_WHITESPACE","\n    ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","getFilesData",143],"(",["T_VARIABLE","$filePattern",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$result",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],"[","]",";",["T_WHITESPACE","\n        ",145],["T_FOREACH","foreach",146],["T_WHITESPACE"," ",146],"(",["T_STRING","glob",146],"(",["T_DIR","__DIR__",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/connection\/'",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_VARIABLE","$filePattern",146],")",["T_WHITESPACE"," ",146],["T_AS","as",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$file",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$fileData",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_INCLUDE","include",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$file",147],";",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$result",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","array_merge",148],"(",["T_VARIABLE","$result",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$fileData",148],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$result",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n",151],"}",["T_WHITESPACE","\n",152]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TestFramework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * A helper find not escaped output in phtml templates\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","XssOutputValidator",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_CONST","const",14],["T_WHITESPACE"," ",14],["T_STRING","ESCAPE_NOT_VERIFIED_PATTERN",14],["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_CONSTANT_ENCAPSED_STRING","'\/\\* @escapeNotVerified \\*\/'",14],";",["T_WHITESPACE","\n\n    ",14],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","ESCAPED_PATTERN",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'\/\\* @noEscape \\*\/'",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * Store origin for replacements\n     *\n     * @var array\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$origins",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],"[","]",";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Store replacements\n     *\n     * @var array\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$replacements",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],"[","]",";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Array of escape functions\n     *\n     * @var string[]\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PRIVATE","private",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$escapeFunctions",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],"[",["T_CONSTANT_ENCAPSED_STRING","'escapeHtml'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'escapeHtmlAttr'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'escapeUrl'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'escapeJs'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'escapeCss'",37],"]",";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     *\n     * @param string $file\n     * @return string\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","getLinesWithXssSensitiveOutput",44],"(",["T_VARIABLE","$file",44],")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$fileContent",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","file_get_contents",46],"(",["T_VARIABLE","$file",46],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$xssUnsafeBlocks",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getXssUnsafeBlocks",47],"(",["T_VARIABLE","$fileContent",47],")",";",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$lines",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[","]",";",["T_WHITESPACE","\n        ",49],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$xssUnsafeBlocks",50],["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$block",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_VARIABLE","$lines",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","array_merge",51],"(",["T_VARIABLE","$lines",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","findBlockLineNumbers",51],"(",["T_VARIABLE","$block",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$fileContent",51],")",")",";",["T_WHITESPACE","\n        ",51],"}",["T_WHITESPACE","\n\n        ",52],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_STRING","count",54],"(",["T_VARIABLE","$lines",54],")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$lines",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","array_unique",55],"(",["T_VARIABLE","$lines",55],")",";",["T_WHITESPACE","\n            ",55],["T_STRING","sort",56],"(",["T_VARIABLE","$lines",56],")",";",["T_WHITESPACE","\n            ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_STRING","implode",57],"(",["T_CONSTANT_ENCAPSED_STRING","','",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$lines",57],")",";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n\n        ",58],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","''",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Find block line numbers\n     *\n     * @param string $block\n     * @param string $content\n     * @return array\n     *\/",63],["T_WHITESPACE","\n    ",69],["T_PRIVATE","private",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","findBlockLineNumbers",70],"(",["T_VARIABLE","$block",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$content",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$results",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[","]",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$pos",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","strpos",73],"(",["T_VARIABLE","$content",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$block",73],",",["T_WHITESPACE"," ",73],["T_LNUMBER","0",73],")",";",["T_WHITESPACE","\n        ",73],["T_WHILE","while",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$pos",74],["T_WHITESPACE"," ",74],["T_IS_NOT_IDENTICAL","!==",74],["T_WHITESPACE"," ",74],["T_STRING","false",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$contentBeforeString",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","substr",75],"(",["T_VARIABLE","$content",75],",",["T_WHITESPACE"," ",75],["T_LNUMBER","0",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$pos",75],")",";",["T_WHITESPACE","\n            ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","isNotEscapeMarkedBlock",76],"(",["T_VARIABLE","$contentBeforeString",76],")",["T_WHITESPACE","\n                ",76],["T_BOOLEAN_AND","&&",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","isNotInCommentBlock",77],"(",["T_VARIABLE","$contentBeforeString",77],")",["T_WHITESPACE","\n            ",77],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$results",79],"[","]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","count",79],"(",["T_STRING","explode",79],"(",["T_STRING","PHP_EOL",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$contentBeforeString",79],")",")",";",["T_WHITESPACE","\n            ",79],"}",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$pos",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","strpos",81],"(",["T_VARIABLE","$content",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$block",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$pos",81],["T_WHITESPACE"," ",81],"+",["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n\n        ",82],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$results",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Get XSS unsafe output blocks\n     *\n     * @param string $fileContent\n     * @return array\n     *\/",87],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","getXssUnsafeBlocks",93],"(",["T_VARIABLE","$fileContent",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$results",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[","]",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$fileContent",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","replacePhpQuoteWithPlaceholders",97],"(",["T_VARIABLE","$fileContent",97],")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$fileContent",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","replacePhpCommentsWithPlaceholders",98],"(",["T_VARIABLE","$fileContent",98],")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","addOriginReplacement",100],"(",["T_CONSTANT_ENCAPSED_STRING","'\\'\\''",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","\"'-*=single=*-'\"",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","addOriginReplacement",101],"(",["T_CONSTANT_ENCAPSED_STRING","'\"\"'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'\"-*=double=*-\"'",101],")",";",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_STRING","preg_match_all",103],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<[?](php|=)(.*?)[?]>\/sm'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$fileContent",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$phpBlockMatches",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$phpBlockMatches",104],"[",["T_LNUMBER","2",104],"]",["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$index",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$phpBlock",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$phpCommands",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","explode",105],"(",["T_CONSTANT_ENCAPSED_STRING","';'",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$phpBlock",105],")",";",["T_WHITESPACE","\n                ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$phpBlockMatches",106],"[",["T_LNUMBER","1",106],"]","[",["T_VARIABLE","$index",106],"]",["T_WHITESPACE"," ",106],["T_IS_EQUAL","==",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'php'",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                    ",106],["T_VARIABLE","$echoCommands",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","preg_grep",107],"(",["T_CONSTANT_ENCAPSED_STRING","'#( |^|\/\\*.*?\\*\/)echo[\\s(]+.*#sm'",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$phpCommands",107],")",";",["T_WHITESPACE","\n                ",107],"}",["T_WHITESPACE"," ",108],["T_ELSE","else",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                    ",108],["T_VARIABLE","$echoCommands",109],"[","]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$phpBlockMatches",109],"[",["T_LNUMBER","0",109],"]","[",["T_VARIABLE","$index",109],"]",";",["T_WHITESPACE","\n                ",109],"}",["T_WHITESPACE","\n                ",110],["T_VARIABLE","$results",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","array_merge",111],"(",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$results",112],",",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getEchoUnsafeCommands",113],"(",["T_VARIABLE","$echoCommands",113],")",["T_WHITESPACE","\n                ",113],")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","clearOriginReplacements",118],"(",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$results",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","array_unique",119],"(",["T_VARIABLE","$results",119],")",";",["T_WHITESPACE","\n\n        ",119],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$results",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * @param array $echoCommands\n     * @return array\n     *\/",124],["T_WHITESPACE","\n    ",127],["T_PRIVATE","private",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","getEchoUnsafeCommands",128],"(",["T_ARRAY","array",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$echoCommands",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$results",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],"[","]",";",["T_WHITESPACE","\n        ",130],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$echoCommands",131],["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$echoCommand",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","isNotEscapeMarkedCommand",132],"(",["T_VARIABLE","$echoCommand",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_VARIABLE","$echoCommand",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","preg_replace",133],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(.*?)echo\/sim'",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'echo'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$echoCommand",133],")",";",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$preparedEchoCommand",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","prepareEchoCommand",134],"(",["T_VARIABLE","$echoCommand",134],")",";",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$isEscapeFunctionArgument",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","preg_match",135],"(",["T_WHITESPACE","\n                    ",135],["T_CONSTANT_ENCAPSED_STRING","'\/->('",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_STRING","implode",136],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","escapeFunctions",136],")",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","')\\(.*?\\)$\/sim'",136],",",["T_WHITESPACE","\n                    ",136],["T_VARIABLE","$preparedEchoCommand",137],["T_WHITESPACE","\n                ",137],")",";",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$xssUnsafeCommands",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","array_filter",139],"(",["T_WHITESPACE","\n                    ",139],["T_VARIABLE","$isEscapeFunctionArgument",140],["T_WHITESPACE"," ",140],"?",["T_WHITESPACE"," ",140],"[",["T_VARIABLE","$preparedEchoCommand",140],"]",["T_WHITESPACE"," ",140],":",["T_WHITESPACE"," ",140],["T_STRING","explode",140],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$preparedEchoCommand",140],")",",",["T_WHITESPACE","\n                    ",140],"[",["T_VARIABLE","$this",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'isXssUnsafeCommand'",141],"]",["T_WHITESPACE","\n                ",141],")",";",["T_WHITESPACE","\n                ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_STRING","count",143],"(",["T_VARIABLE","$xssUnsafeCommands",143],")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                    ",143],["T_VARIABLE","$results",144],"[","]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","str_replace",144],"(",["T_WHITESPACE","\n                        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getReplacements",145],"(",")",",",["T_WHITESPACE","\n                        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getOrigins",146],"(",")",",",["T_WHITESPACE","\n                        ",146],["T_VARIABLE","$echoCommand",147],["T_WHITESPACE","\n                    ",147],")",";",["T_WHITESPACE","\n                ",148],"}",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$results",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * @param string $command\n     * @return string\n     *\/",156],["T_WHITESPACE","\n    ",159],["T_PRIVATE","private",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","prepareEchoCommand",160],"(",["T_VARIABLE","$command",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$command",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","preg_replace",162],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<[?]=(.*?)[?]>\/sim'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'\\1'",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$command",162],")",";",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_STRING","trim",163],"(",["T_STRING","ltrim",163],"(",["T_STRING","explode",163],"(",["T_CONSTANT_ENCAPSED_STRING","';'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$command",163],")","[",["T_LNUMBER","0",163],"]",",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'echo'",163],")",")",";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * @param string $contentBeforeString\n     * @return bool\n     *\/",166],["T_WHITESPACE","\n    ",169],["T_PRIVATE","private",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","isNotEscapeMarkedBlock",170],"(",["T_VARIABLE","$contentBeforeString",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],"!",["T_STRING","preg_match",172],"(",["T_WHITESPACE","\n            ",172],["T_CONSTANT_ENCAPSED_STRING","'%('",173],".",["T_WHITESPACE"," ",173],["T_STRING","self",173],["T_DOUBLE_COLON","::",173],["T_STRING","ESCAPE_NOT_VERIFIED_PATTERN",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'|'",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_STRING","self",173],["T_DOUBLE_COLON","::",173],["T_STRING","ESCAPED_PATTERN",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","')$%sim'",173],",",["T_WHITESPACE","\n            ",173],["T_STRING","trim",174],"(",["T_VARIABLE","$contentBeforeString",174],")",["T_WHITESPACE","\n        ",174],")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * @param string $contentBeforeString\n     * @return bool\n     *\/",178],["T_WHITESPACE","\n    ",181],["T_PRIVATE","private",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","isNotInCommentBlock",182],"(",["T_VARIABLE","$contentBeforeString",182],")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$contentBeforeString",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","explode",184],"(",["T_CONSTANT_ENCAPSED_STRING","'<?php'",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$contentBeforeString",184],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$contentBeforeString",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","preg_replace",185],"(",["T_WHITESPACE","\n            ",185],["T_CONSTANT_ENCAPSED_STRING","'%\/\\*.*?\\*\/%si'",186],",",["T_WHITESPACE","\n            ",186],["T_CONSTANT_ENCAPSED_STRING","''",187],",",["T_WHITESPACE","\n            ",187],["T_STRING","end",188],"(",["T_VARIABLE","$contentBeforeString",188],")",["T_WHITESPACE","\n        ",188],")",";",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],"(",["T_STRING","strpos",191],"(",["T_VARIABLE","$contentBeforeString",191],",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'\/*'",191],")",["T_WHITESPACE"," ",191],["T_IS_IDENTICAL","===",191],["T_WHITESPACE"," ",191],["T_STRING","false",191],")",";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * @param string $command\n     * @return bool\n     *\/",194],["T_WHITESPACE","\n    ",197],["T_PRIVATE","private",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","isNotEscapeMarkedCommand",198],"(",["T_VARIABLE","$command",198],")",["T_WHITESPACE","\n    ",198],"{",["T_WHITESPACE","\n        ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],"!",["T_STRING","preg_match",200],"(",["T_WHITESPACE","\n            ",200],["T_CONSTANT_ENCAPSED_STRING","'%'",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_STRING","self",201],["T_DOUBLE_COLON","::",201],["T_STRING","ESCAPE_NOT_VERIFIED_PATTERN",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'|'",201],".",["T_WHITESPACE"," ",201],["T_STRING","self",201],["T_DOUBLE_COLON","::",201],["T_STRING","ESCAPED_PATTERN",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'%sim'",201],",",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$command",202],["T_WHITESPACE","\n        ",202],")",";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Check if command is xss unsafe\n     *\n     * @param string $command\n     * @return bool\n     *\/",206],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","isXssUnsafeCommand",212],"(",["T_VARIABLE","$command",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$command",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","trim",214],"(",["T_VARIABLE","$command",214],")",";",["T_WHITESPACE","\n\n        ",214],["T_SWITCH","switch",216],["T_WHITESPACE"," ",216],"(",["T_STRING","true",216],")",["T_WHITESPACE","\n        ",216],"{",["T_WHITESPACE","\n            ",217],["T_CASE","case",218],["T_WHITESPACE"," ",218],["T_STRING","preg_match",218],"(",["T_WHITESPACE","\n                ",218],["T_CONSTANT_ENCAPSED_STRING","'\/->('",219],["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_STRING","implode",219],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","escapeFunctions",219],")",["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'|.*html.*)\\(\/simU'",219],",",["T_WHITESPACE","\n                ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getLastMethod",220],"(",["T_VARIABLE","$command",220],")",["T_WHITESPACE","\n            ",220],")",":",["T_WHITESPACE","\n                ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_STRING","false",222],";",["T_WHITESPACE","\n            ",222],["T_CASE","case",223],["T_WHITESPACE"," ",223],["T_STRING","preg_match",223],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\((int|bool|float)\\)\/sim'",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$command",223],")",":",["T_WHITESPACE","\n                ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_STRING","false",224],";",["T_WHITESPACE","\n            ",224],["T_CASE","case",225],["T_WHITESPACE"," ",225],["T_STRING","preg_match",225],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^count\\(\/sim'",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$command",225],")",":",["T_WHITESPACE","\n                ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_STRING","false",226],";",["T_WHITESPACE","\n            ",226],["T_CASE","case",227],["T_WHITESPACE"," ",227],["T_STRING","preg_match",227],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/^'.*'$\/sim\"",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$command",227],")",":",["T_WHITESPACE","\n                ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_STRING","false",228],";",["T_WHITESPACE","\n            ",228],["T_CASE","case",229],["T_WHITESPACE"," ",229],["T_STRING","preg_match",229],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\".*?\"$\/sim'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$command",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$matches",229],")",":",["T_WHITESPACE","\n                ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","isContainPhpVariables",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getOrigin",230],"(",["T_VARIABLE","$matches",230],"[",["T_LNUMBER","0",230],"]",")",")",";",["T_WHITESPACE","\n            ",230],["T_DEFAULT","default",231],":",["T_WHITESPACE","\n                ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_STRING","true",232],";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * @param string $command\n     * @return string\n     *\/",236],["T_WHITESPACE","\n    ",239],["T_PRIVATE","private",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","getLastMethod",240],"(",["T_VARIABLE","$command",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_STRING","preg_match_all",242],"(",["T_WHITESPACE","\n            ",242],["T_CONSTANT_ENCAPSED_STRING","'\/->.*?\\(.*?\\)\/sim'",243],",",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","clearMethodBracketContent",244],"(",["T_VARIABLE","$command",244],")",",",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$matches",245],["T_WHITESPACE","\n        ",245],")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$command",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","end",247],"(",["T_VARIABLE","$matches",247],"[",["T_LNUMBER","0",247],"]",")",";",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$command",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","substr",248],"(",["T_VARIABLE","$command",248],",",["T_WHITESPACE"," ",248],["T_LNUMBER","0",248],",",["T_WHITESPACE"," ",248],["T_STRING","strpos",248],"(",["T_VARIABLE","$command",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'('",248],")",["T_WHITESPACE"," ",248],"+",["T_WHITESPACE"," ",248],["T_LNUMBER","1",248],")",";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n\n        ",249],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$command",251],";",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * @param string $command\n     * @return string\n     *\/",254],["T_WHITESPACE","\n    ",257],["T_PRIVATE","private",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","clearMethodBracketContent",258],"(",["T_VARIABLE","$command",258],")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$bracketInterval",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],"[","]",";",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$bracketOpenPos",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],"[","]",";",["T_WHITESPACE","\n        ",261],["T_VARIABLE","$command",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_STRING","str_split",262],"(",["T_VARIABLE","$command",262],")",";",["T_WHITESPACE","\n        ",262],["T_FOREACH","foreach",263],["T_WHITESPACE"," ",263],"(",["T_VARIABLE","$command",263],["T_WHITESPACE"," ",263],["T_AS","as",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$index",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$character",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$character",264],["T_WHITESPACE"," ",264],["T_IS_EQUAL","==",264],["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'('",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_STRING","array_push",265],"(",["T_VARIABLE","$bracketOpenPos",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$index",265],")",";",["T_WHITESPACE","\n            ",265],"}",["T_WHITESPACE","\n            ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_STRING","count",267],"(",["T_VARIABLE","$bracketOpenPos",267],")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n                ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$character",268],["T_WHITESPACE"," ",268],["T_IS_EQUAL","==",268],["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","')'",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                    ",268],["T_VARIABLE","$lastOpenPos",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","array_pop",269],"(",["T_VARIABLE","$bracketOpenPos",269],")",";",["T_WHITESPACE","\n                    ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_STRING","count",270],"(",["T_VARIABLE","$bracketOpenPos",270],")",["T_WHITESPACE"," ",270],["T_IS_EQUAL","==",270],["T_WHITESPACE"," ",270],["T_LNUMBER","0",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                        ",270],["T_VARIABLE","$bracketInterval",271],"[","]",["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],"[",["T_VARIABLE","$lastOpenPos",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$index",271],"]",";",["T_WHITESPACE","\n                    ",271],"}",["T_WHITESPACE","\n                ",272],"}",["T_WHITESPACE","\n            ",273],"}",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE","\n        ",275],["T_FOREACH","foreach",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$bracketInterval",276],["T_WHITESPACE"," ",276],["T_AS","as",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$interval",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_FOR","for",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$i",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$interval",277],"[",["T_LNUMBER","0",277],"]",["T_WHITESPACE"," ",277],"+",["T_WHITESPACE"," ",277],["T_LNUMBER","1",277],";",["T_WHITESPACE"," ",277],["T_VARIABLE","$i",277],["T_WHITESPACE"," ",277],"<",["T_WHITESPACE"," ",277],["T_VARIABLE","$interval",277],"[",["T_LNUMBER","1",277],"]",";",["T_WHITESPACE"," ",277],["T_VARIABLE","$i",277],["T_INC","++",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n                ",277],["T_UNSET","unset",278],"(",["T_VARIABLE","$command",278],"[",["T_VARIABLE","$i",278],"]",")",";",["T_WHITESPACE","\n            ",278],"}",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$command",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","implode",281],"(",["T_CONSTANT_ENCAPSED_STRING","''",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$command",281],")",";",["T_WHITESPACE","\n\n        ",281],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$command",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * @param string $content\n     * @return int\n     *\/",286],["T_WHITESPACE","\n    ",289],["T_PRIVATE","private",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","isContainPhpVariables",290],"(",["T_VARIABLE","$content",290],")",["T_WHITESPACE","\n    ",290],"{",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_STRING","preg_match",292],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^\\\\\\\\]\\$[a-z_\\x7f-\\xff]\/sim'",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$content",292],")",";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_DOC_COMMENT","\/**\n     * @param string $fileContent\n     * @return string\n     *\/",295],["T_WHITESPACE","\n    ",298],["T_PRIVATE","private",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","replacePhpQuoteWithPlaceholders",299],"(",["T_VARIABLE","$fileContent",299],")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$origins",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],"[","]",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$replacements",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],"[","]",";",["T_WHITESPACE","\n        ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_STRING","preg_match_all",303],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<[?](php|=)(.*?)[?]>\/sm'",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$fileContent",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$phpBlockMatches",303],")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_FOREACH","foreach",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$phpBlockMatches",304],"[",["T_LNUMBER","2",304],"]",["T_WHITESPACE"," ",304],["T_AS","as",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$phpBlock",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n\n                ",304],["T_VARIABLE","$phpBlockQuoteReplaced",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","preg_replace",306],"(",["T_WHITESPACE","\n                    ",306],"[",["T_CONSTANT_ENCAPSED_STRING","'\/([^\\\\\\\\])\\'\\'\/si'",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'\/([^\\\\\\\\])\"\"\/si'",307],"]",",",["T_WHITESPACE","\n                    ",307],"[",["T_CONSTANT_ENCAPSED_STRING","\"\\1'-*=single=*-'\"",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'\\1\"-*=double=*-\"'",308],"]",",",["T_WHITESPACE","\n                    ",308],["T_VARIABLE","$phpBlock",309],["T_WHITESPACE","\n                ",309],")",";",["T_WHITESPACE","\n\n                ",310],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","addQuoteOriginsReplacements",312],"(",["T_WHITESPACE","\n                    ",312],["T_VARIABLE","$phpBlockQuoteReplaced",313],",",["T_WHITESPACE","\n                    ",313],"[",["T_WHITESPACE","\n                        ",314],["T_CONSTANT_ENCAPSED_STRING","'\/([^\\\\\\\\])([\\'])(.*?)([^\\\\\\\\])([\\'])\/sim'",315],["T_WHITESPACE","\n                    ",315],"]",["T_WHITESPACE","\n                ",316],")",";",["T_WHITESPACE","\n                ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","addQuoteOriginsReplacements",318],"(",["T_WHITESPACE","\n                    ",318],["T_VARIABLE","$phpBlockQuoteReplaced",319],",",["T_WHITESPACE","\n                    ",319],"[",["T_WHITESPACE","\n                        ",320],["T_CONSTANT_ENCAPSED_STRING","'\/([^\\\\\\\\])([\"])(.*?)([^\\\\\\\\])([\"])\/sim'",321],",",["T_WHITESPACE","\n                    ",321],"]",["T_WHITESPACE","\n                ",322],")",";",["T_WHITESPACE","\n\n                ",323],["T_VARIABLE","$origins",325],"[","]",["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$phpBlock",325],";",["T_WHITESPACE","\n                ",325],["T_VARIABLE","$replacements",326],"[","]",["T_WHITESPACE","  ",326],"=",["T_WHITESPACE"," ",326],["T_STRING","str_replace",326],"(",["T_WHITESPACE","\n                    ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getOrigins",327],"(",")",",",["T_WHITESPACE","\n                    ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getReplacements",328],"(",")",",",["T_WHITESPACE","\n                    ",328],["T_VARIABLE","$phpBlockQuoteReplaced",329],["T_WHITESPACE","\n                ",329],")",";",["T_WHITESPACE","\n            ",330],"}",["T_WHITESPACE","\n        ",331],"}",["T_WHITESPACE","\n\n        ",332],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_STRING","str_replace",334],"(",["T_VARIABLE","$origins",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$replacements",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$fileContent",334],")",";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n    ",335],["T_DOC_COMMENT","\/**\n     * @param string $fileContent\n     * @return string\n     *\/",337],["T_WHITESPACE","\n    ",340],["T_PRIVATE","private",341],["T_WHITESPACE"," ",341],["T_FUNCTION","function",341],["T_WHITESPACE"," ",341],["T_STRING","replacePhpCommentsWithPlaceholders",341],"(",["T_VARIABLE","$fileContent",341],")",["T_WHITESPACE","\n    ",341],"{",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$origins",343],"=",["T_WHITESPACE"," ",343],"[","]",";",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$replacements",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],"[","]",";",["T_WHITESPACE","\n        ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_STRING","preg_match_all",345],"(",["T_CONSTANT_ENCAPSED_STRING","'%\/\\*.*?\\*\/%simu'",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$fileContent",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$docCommentMatches",345],",",["T_WHITESPACE"," ",345],["T_STRING","PREG_SET_ORDER",345],")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_FOREACH","foreach",346],["T_WHITESPACE"," ",346],"(",["T_VARIABLE","$docCommentMatches",346],["T_WHITESPACE"," ",346],["T_AS","as",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$docCommentMatch",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n                ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","isNotEscapeMarkedCommand",347],"(",["T_VARIABLE","$docCommentMatch",347],"[",["T_LNUMBER","0",347],"]",")",["T_WHITESPACE","\n                    ",347],["T_BOOLEAN_AND","&&",348],["T_WHITESPACE"," ",348],"!",["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","issetOrigin",348],"(",["T_VARIABLE","$docCommentMatch",348],"[",["T_LNUMBER","0",348],"]",")",")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n                    ",348],["T_VARIABLE","$origin",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$docCommentMatch",349],"[",["T_LNUMBER","0",349],"]",";",["T_WHITESPACE","\n                    ",349],["T_VARIABLE","$replacement",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'-*!'",350],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_STRING","count",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getOrigins",350],"(",")",")",["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'!*-'",350],";",["T_WHITESPACE","\n                    ",350],["T_VARIABLE","$origins",351],"[","]",["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$origin",351],";",["T_WHITESPACE","\n                    ",351],["T_VARIABLE","$replacements",352],"[","]",["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$replacement",352],";",["T_WHITESPACE","\n                    ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","addOriginReplacement",353],"(",["T_WHITESPACE","\n                        ",353],["T_VARIABLE","$origin",354],",",["T_WHITESPACE","\n                        ",354],["T_VARIABLE","$replacement",355],["T_WHITESPACE","\n                    ",355],")",";",["T_WHITESPACE","\n                ",356],"}",["T_WHITESPACE","\n            ",357],"}",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE","\n\n        ",359],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_STRING","str_replace",361],"(",["T_VARIABLE","$origins",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$replacements",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$fileContent",361],")",";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n\n    ",362],["T_DOC_COMMENT","\/**\n     * Add replacements for expressions in single and double quotes\n     *\n     * @param string $phpBlock\n     * @param array $patterns\n     * @return void\n     *\/",364],["T_WHITESPACE","\n    ",370],["T_PRIVATE","private",371],["T_WHITESPACE"," ",371],["T_FUNCTION","function",371],["T_WHITESPACE"," ",371],["T_STRING","addQuoteOriginsReplacements",371],"(",["T_VARIABLE","$phpBlock",371],",",["T_WHITESPACE"," ",371],["T_ARRAY","array",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$patterns",371],")",["T_WHITESPACE","\n    ",371],"{",["T_WHITESPACE","\n        ",372],["T_FOREACH","foreach",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$patterns",373],["T_WHITESPACE"," ",373],["T_AS","as",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$pattern",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(",["T_STRING","preg_match_all",374],"(",["T_VARIABLE","$pattern",374],",",["T_WHITESPACE"," ",374],["T_VARIABLE","$phpBlock",374],",",["T_WHITESPACE"," ",374],["T_VARIABLE","$quoteMatches",374],",",["T_WHITESPACE"," ",374],["T_STRING","PREG_SET_ORDER",374],")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_FOREACH","foreach",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$quoteMatches",375],["T_WHITESPACE"," ",375],["T_AS","as",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$quoteMatch",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n                    ",375],["T_VARIABLE","$origin",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$quoteMatch",376],"[",["T_LNUMBER","2",376],"]",["T_WHITESPACE"," ",376],".",["T_WHITESPACE"," ",376],["T_VARIABLE","$quoteMatch",376],"[",["T_LNUMBER","3",376],"]",["T_WHITESPACE"," ",376],".",["T_WHITESPACE"," ",376],["T_VARIABLE","$quoteMatch",376],"[",["T_LNUMBER","4",376],"]",["T_WHITESPACE"," ",376],".",["T_WHITESPACE"," ",376],["T_VARIABLE","$quoteMatch",376],"[",["T_LNUMBER","5",376],"]",";",["T_WHITESPACE","\n                    ",376],["T_IF","if",377],["T_WHITESPACE"," ",377],"(","!",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","issetOrigin",377],"(",["T_VARIABLE","$origin",377],")",")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n                        ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","addOriginReplacement",378],"(",["T_WHITESPACE","\n                            ",378],["T_VARIABLE","$origin",379],",",["T_WHITESPACE","\n                            ",379],["T_VARIABLE","$quoteMatch",380],"[",["T_LNUMBER","2",380],"]",["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'-*='",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_STRING","count",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getOrigins",380],"(",")",")",["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'=*-'",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_VARIABLE","$quoteMatch",380],"[",["T_LNUMBER","5",380],"]",["T_WHITESPACE","\n                        ",380],")",";",["T_WHITESPACE","\n                    ",381],"}",["T_WHITESPACE","\n                ",382],"}",["T_WHITESPACE","\n            ",383],"}",["T_WHITESPACE","\n        ",384],"}",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n\n    ",386],["T_DOC_COMMENT","\/**\n     * @param string $origin\n     * @param string $replacement\n     * @return void\n     *\/",388],["T_WHITESPACE","\n    ",392],["T_PRIVATE","private",393],["T_WHITESPACE"," ",393],["T_FUNCTION","function",393],["T_WHITESPACE"," ",393],["T_STRING","addOriginReplacement",393],"(",["T_VARIABLE","$origin",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$replacement",393],")",["T_WHITESPACE","\n    ",393],"{",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","origins",395],"[",["T_VARIABLE","$replacement",395],"]",["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$origin",395],";",["T_WHITESPACE","\n        ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","replacements",396],"[",["T_VARIABLE","$replacement",396],"]",["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$replacement",396],";",["T_WHITESPACE","\n    ",396],"}",["T_WHITESPACE","\n\n    ",397],["T_DOC_COMMENT","\/**\n     * Clear origins and replacements\n     *\n     * @return void\n     *\/",399],["T_WHITESPACE","\n    ",403],["T_PRIVATE","private",404],["T_WHITESPACE"," ",404],["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],["T_STRING","clearOriginReplacements",404],"(",")",["T_WHITESPACE","\n    ",404],"{",["T_WHITESPACE","\n        ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","origins",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],"[","]",";",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","replacements",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],"[","]",";",["T_WHITESPACE","\n    ",407],"}",["T_WHITESPACE","\n\n    ",408],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",410],["T_WHITESPACE","\n    ",412],["T_PRIVATE","private",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","getOrigins",413],"(",")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_RETURN","return",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","origins",415],";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n\n    ",416],["T_DOC_COMMENT","\/**\n     * @param string $key\n     * @return string|null\n     *\/",418],["T_WHITESPACE","\n    ",421],["T_PRIVATE","private",422],["T_WHITESPACE"," ",422],["T_FUNCTION","function",422],["T_WHITESPACE"," ",422],["T_STRING","getOrigin",422],"(",["T_VARIABLE","$key",422],")",["T_WHITESPACE","\n    ",422],"{",["T_WHITESPACE","\n        ",423],["T_RETURN","return",424],["T_WHITESPACE"," ",424],["T_STRING","array_key_exists",424],"(",["T_VARIABLE","$key",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","origins",424],")",["T_WHITESPACE"," ",424],"?",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","origins",424],"[",["T_VARIABLE","$key",424],"]",["T_WHITESPACE"," ",424],":",["T_WHITESPACE"," ",424],["T_STRING","null",424],";",["T_WHITESPACE","\n    ",424],"}",["T_WHITESPACE","\n\n    ",425],["T_DOC_COMMENT","\/**\n     * @param string $origin\n     * @return bool\n     *\/",427],["T_WHITESPACE","\n    ",430],["T_PRIVATE","private",431],["T_WHITESPACE"," ",431],["T_FUNCTION","function",431],["T_WHITESPACE"," ",431],["T_STRING","issetOrigin",431],"(",["T_VARIABLE","$origin",431],")",["T_WHITESPACE","\n    ",431],"{",["T_WHITESPACE","\n        ",432],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_STRING","in_array",433],"(",["T_VARIABLE","$origin",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","origins",433],")",";",["T_WHITESPACE","\n    ",433],"}",["T_WHITESPACE","\n\n    ",434],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",436],["T_WHITESPACE","\n    ",438],["T_PRIVATE","private",439],["T_WHITESPACE"," ",439],["T_FUNCTION","function",439],["T_WHITESPACE"," ",439],["T_STRING","getReplacements",439],"(",")",["T_WHITESPACE","\n    ",439],"{",["T_WHITESPACE","\n        ",440],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","replacements",441],";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n",442],"}",["T_WHITESPACE","\n",443]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Abstract shell command for the static code inspection\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TestFramework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Inspection",10],";",["T_WHITESPACE","\n\n",10],["T_ABSTRACT","abstract",12],["T_WHITESPACE"," ",12],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","AbstractCommand",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$_reportFile",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var int\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_lastExitCode",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_lastOutput",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_lastRunMessage",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param string $reportFile Destination file to write inspection report to\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","__construct",39],"(",["T_VARIABLE","$reportFile",39],")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_reportFile",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$reportFile",41],";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Build and execute the shell command\n     *\n     * @param array $whiteList Files\/directories to be inspected\n     * @param array $blackList Files\/directories to be excluded from the inspection\n     * @return bool\n     *\/",44],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","run",51],"(",["T_ARRAY","array",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$whiteList",51],",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$blackList",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],"[","]",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_STRING","file_exists",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_reportFile",53],")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_STRING","unlink",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_reportFile",54],")",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$shellCmd",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_buildShellCmd",56],"(",["T_VARIABLE","$whiteList",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$blackList",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$result",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_execShellCmd",57],"(",["T_VARIABLE","$shellCmd",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_generateLastRunMessage",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$result",59],["T_WHITESPACE"," ",59],["T_IS_NOT_IDENTICAL","!==",59],["T_WHITESPACE"," ",59],["T_STRING","false",59],";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Whether the command can be ran on the current environment\n     *\n     * @return bool\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","canRun",67],"(",")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_execShellCmd",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_buildVersionShellCmd",69],"(",")",")",["T_WHITESPACE"," ",69],["T_IS_NOT_IDENTICAL","!==",69],["T_WHITESPACE"," ",69],["T_STRING","false",69],";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Retrieve the shell command version\n     *\n     * @return string|null\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","getVersion",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$versionOutput",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_execShellCmd",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_buildVersionShellCmd",79],"(",")",")",";",["T_WHITESPACE","\n        ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(","!",["T_VARIABLE","$versionOutput",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","null",81],";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_STRING","preg_match",83],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^\\d]*([^\\s]+)\/'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$versionOutput",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$matches",83],")",["T_WHITESPACE"," ",83],"?",["T_WHITESPACE"," ",83],["T_VARIABLE","$matches",83],"[",["T_LNUMBER","1",83],"]",["T_WHITESPACE"," ",83],":",["T_WHITESPACE"," ",83],["T_VARIABLE","$versionOutput",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Get path to the report file\n     *\n     * @return string\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getReportFile",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_reportFile",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Build the shell command that outputs the version\n     *\n     * @return string\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_ABSTRACT","abstract",101],["T_WHITESPACE"," ",101],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","_buildVersionShellCmd",101],"(",")",";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Build the valid shell command\n     *\n     * @param array $whiteList\n     * @param array $blackList\n     * @return string\n     *\/",103],["T_WHITESPACE","\n    ",109],["T_ABSTRACT","abstract",110],["T_WHITESPACE"," ",110],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","_buildShellCmd",110],"(",["T_VARIABLE","$whiteList",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$blackList",110],")",";",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Execute a shell command on the current environment and return its output or FALSE on failure\n     *\n     * @param string $shellCmd\n     * @return string|false\n     *\/",112],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","_execShellCmd",118],"(",["T_VARIABLE","$shellCmd",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$output",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],"[","]",";",["T_WHITESPACE","\n        ",120],["T_STRING","exec",121],"(",["T_VARIABLE","$shellCmd",121],["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","' 2>&1'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$output",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_lastExitCode",121],")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_lastOutput",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","implode",122],"(",["T_STRING","PHP_EOL",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$output",122],")",";",["T_WHITESPACE","\n        ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_lastExitCode",123],["T_WHITESPACE"," ",123],["T_IS_IDENTICAL","===",123],["T_WHITESPACE"," ",123],["T_LNUMBER","0",123],["T_WHITESPACE"," ",123],"?",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_lastOutput",123],["T_WHITESPACE"," ",123],":",["T_WHITESPACE"," ",123],["T_STRING","false",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Generate message about last execution result, prepared for output to a user\n     *\n     * @return \\Magento\\TestFramework\\Inspection\\AbstractCommand\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","_generateLastRunMessage",131],"(",")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_lastExitCode",133],["T_WHITESPACE"," ",133],["T_IS_IDENTICAL","===",133],["T_WHITESPACE"," ",133],["T_STRING","null",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_lastRunMessage",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","\"Nothing was executed.\"",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE"," ",135],["T_ELSEIF","elseif",135],["T_WHITESPACE"," ",135],"(","!",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_lastExitCode",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_lastRunMessage",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'Success reported.'",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE"," ",137],["T_ELSEIF","elseif",137],["T_WHITESPACE"," ",137],"(",["T_STRING","file_exists",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_reportFile",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_lastRunMessage",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],"\"",["T_ENCAPSED_AND_WHITESPACE","See detailed report in '",138],["T_CURLY_OPEN","{",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_reportFile",138],"}",["T_ENCAPSED_AND_WHITESPACE","'.",138],"\"",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE"," ",139],["T_ELSE","else",139],["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_lastRunMessage",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'Command-line tool reports: '",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_lastOutput",140],";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Return message from the last run of the command\n     *\n     * @return string\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","getLastRunMessage",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_lastRunMessage",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n",153],"}",["T_WHITESPACE","\n",154]]
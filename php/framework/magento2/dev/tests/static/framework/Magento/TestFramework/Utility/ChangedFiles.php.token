[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TestFramework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Utility",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Files",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TestFramework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Utility",10],["T_NS_SEPARATOR","\\",10],["T_STRING","File",10],["T_NS_SEPARATOR","\\",10],["T_STRING","RegexIteratorFactory",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * A helper to gather various changed files\n * if INCREMENTAL_BUILD env variable is set by CI build infrastructure, only files changed in the\n * branch are gathered, otherwise all files\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","ChangedFiles",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * File path with changed files content.\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","CHANGED_FILES_CONTENT_FILE",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'\/dev\/tests\/static\/testsuite\/Magento\/Test\/_files\/changed_%s_files_content.json'",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Returns array of PHP-files, that use or declare Magento application classes and Magento libs\n     *\n     * @param string $changedFilesList\n     * @return array\n     *\/",24],["T_WHITESPACE","\n    ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_STATIC","static",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","getPhpFiles",30],"(",["T_VARIABLE","$changedFilesList",30],")",["T_WHITESPACE","\n    ",30],"{",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$fileUtilities",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_NEW","new",32],["T_WHITESPACE"," ",32],["T_STRING","File",32],"(",["T_STRING","Files",32],["T_DOUBLE_COLON","::",32],["T_STRING","init",32],"(",")",",",["T_WHITESPACE"," ",32],["T_NEW","new",32],["T_WHITESPACE"," ",32],["T_STRING","RegexIteratorFactory",32],"(",")",")",";",["T_WHITESPACE","\n        ",32],["T_IF","if",33],["T_WHITESPACE"," ",33],"(",["T_ISSET","isset",33],"(",["T_VARIABLE","$_ENV",33],"[",["T_CONSTANT_ENCAPSED_STRING","'INCREMENTAL_BUILD'",33],"]",")",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n            ",33],["T_VARIABLE","$phpFiles",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"[","]",";",["T_WHITESPACE","\n            ",34],["T_FOREACH","foreach",35],["T_WHITESPACE"," ",35],"(",["T_STRING","glob",35],"(",["T_VARIABLE","$changedFilesList",35],")",["T_WHITESPACE"," ",35],["T_AS","as",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$listFile",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n                ",35],["T_VARIABLE","$phpFiles",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","array_merge",36],"(",["T_VARIABLE","$phpFiles",36],",",["T_WHITESPACE"," ",36],["T_STRING","file",36],"(",["T_VARIABLE","$listFile",36],",",["T_WHITESPACE"," ",36],["T_STRING","FILE_IGNORE_NEW_LINES",36],["T_WHITESPACE"," ",36],"|",["T_WHITESPACE"," ",36],["T_STRING","FILE_SKIP_EMPTY_LINES",36],")",")",";",["T_WHITESPACE","\n            ",36],"}",["T_WHITESPACE","\n            ",37],["T_STRING","array_walk",38],"(",["T_WHITESPACE","\n                ",38],["T_VARIABLE","$phpFiles",39],",",["T_WHITESPACE","\n                ",39],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],"(","&",["T_VARIABLE","$file",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n                    ",40],["T_VARIABLE","$file",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","BP",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'\/'",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$file",41],";",["T_WHITESPACE","\n                ",41],"}",["T_WHITESPACE","\n            ",42],")",";",["T_WHITESPACE","\n            ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(","!",["T_EMPTY","empty",44],"(",["T_VARIABLE","$phpFiles",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n                ",44],["T_VARIABLE","$phpFiles",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","Files",45],["T_DOUBLE_COLON","::",45],["T_STRING","composeDataSets",45],"(",["T_VARIABLE","$phpFiles",45],")",";",["T_WHITESPACE","\n                ",45],["T_VARIABLE","$phpFiles",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","array_intersect_key",46],"(",["T_VARIABLE","$phpFiles",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$fileUtilities",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getPhpFiles",46],"(",")",")",";",["T_WHITESPACE","\n            ",46],"}",["T_WHITESPACE","\n        ",47],"}",["T_WHITESPACE"," ",48],["T_ELSE","else",48],["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$phpFiles",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$fileUtilities",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getPhpFiles",49],"(",")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_RETURN","return",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$phpFiles",52],";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Get changed content.\n     *\n     * @param string $fileName\n     * @return string\n     *\/",55],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_STATIC","static",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","getChangedContent",61],"(",["T_VARIABLE","$fileName",61],")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$data",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],"[","]",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$extension",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","self",64],["T_DOUBLE_COLON","::",64],["T_STRING","getFileExtension",64],"(",["T_VARIABLE","$fileName",64],")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$fileName",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","ltrim",65],"(",["T_STRING","str_replace",65],"(",["T_STRING","BP",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","''",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$fileName",65],")",",",["T_WHITESPACE"," ",65],["T_STRING","DIRECTORY_SEPARATOR",65],")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$changedFilesContentFile",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","BP",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_STRING","sprintf",66],"(",["T_STRING","self",66],["T_DOUBLE_COLON","::",66],["T_STRING","CHANGED_FILES_CONTENT_FILE",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$extension",66],")",";",["T_WHITESPACE","\n        ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_STRING","file_exists",67],"(",["T_VARIABLE","$changedFilesContentFile",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$changedContent",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","file_get_contents",68],"(",["T_VARIABLE","$changedFilesContentFile",68],")",";",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$data",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","json_decode",69],"(",["T_VARIABLE","$changedContent",69],",",["T_WHITESPACE"," ",69],["T_STRING","true",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n\n        ",70],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_ISSET","isset",72],"(",["T_VARIABLE","$data",72],"[",["T_VARIABLE","$fileName",72],"]",")",["T_WHITESPACE"," ",72],"?",["T_WHITESPACE"," ",72],["T_VARIABLE","$data",72],"[",["T_VARIABLE","$fileName",72],"]",["T_WHITESPACE"," ",72],":",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","''",72],";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Get file extension.\n     *\n     * @param string $fileName\n     * @return string\n     *\/",75],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_STATIC","static",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","getFileExtension",81],"(",["T_VARIABLE","$fileName",81],")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$fileInfo",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","pathinfo",83],"(",["T_VARIABLE","$fileName",83],")",";",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_ISSET","isset",84],"(",["T_VARIABLE","$fileInfo",84],"[",["T_CONSTANT_ENCAPSED_STRING","'extension'",84],"]",")",["T_WHITESPACE"," ",84],"?",["T_WHITESPACE"," ",84],["T_VARIABLE","$fileInfo",84],"[",["T_CONSTANT_ENCAPSED_STRING","'extension'",84],"]",["T_WHITESPACE"," ",84],":",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'unknown'",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n",85],"}",["T_WHITESPACE","\n",86]]
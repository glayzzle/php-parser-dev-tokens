[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Rule for searching php file dependency\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Dependency",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Utility",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Files",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","PhpRule",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","RuleInterface",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * List of filepaths for DI files\n     *\n     * @var array\n     *\/",14],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$diFiles",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Map from plugin classes to the subjects they modify\n     *\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$pluginMap",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * List of routers\n     *\n     * Format: array(\n     *  '{Router}' => '{Module_Name}'\n     * )\n     *\n     * @var array\n     *\/",28],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_mapRouters",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],"[","]",";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * List of layout blocks\n     *\n     * Format: array(\n     *  '{Area}' => array(\n     *   '{Block_Name}' => array('{Module_Name}' => '{Module_Name}')\n     * ))\n     *\n     * @var array\n     *\/",39],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_mapLayoutBlocks",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[","]",";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Default modules list.\n     *\n     * @var array\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_defaultModules",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[",["T_WHITESPACE","\n        ",56],["T_CONSTANT_ENCAPSED_STRING","'frontend'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Magento\\Theme'",57],",",["T_WHITESPACE","\n        ",57],["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Magento\\Adminhtml'",58],",",["T_WHITESPACE","\n    ",58],"]",";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param array $mapRouters\n     * @param array $mapLayoutBlocks\n     * @param array $pluginMap\n     *\/",61],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","__construct",68],"(",["T_ARRAY","array",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$mapRouters",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$mapLayoutBlocks",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$pluginMap",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],"[","]",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_mapRouters",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$mapRouters",70],";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_mapLayoutBlocks",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$mapLayoutBlocks",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_namespaces",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","implode",72],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",72],",",["T_WHITESPACE"," ",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Magento",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Framework",72],["T_NS_SEPARATOR","\\",72],["T_STRING","App",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Utility",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Files",72],["T_DOUBLE_COLON","::",72],["T_STRING","init",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getNamespaces",72],"(",")",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","pluginMap",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$pluginMap",73],["T_WHITESPACE"," ",73],"?",":",["T_WHITESPACE"," ",73],["T_STRING","null",73],";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Gets alien dependencies information for current module by analyzing file's contents\n     *\n     * @param string $currentModule\n     * @param string $fileType\n     * @param string $file\n     * @param string $contents\n     * @return array\n     *\/",76],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","getDependencyInfo",85],"(",["T_VARIABLE","$currentModule",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$fileType",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$file",85],",",["T_WHITESPACE"," ",85],"&",["T_VARIABLE","$contents",85],")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_STRING","in_array",87],"(",["T_VARIABLE","$fileType",87],",",["T_WHITESPACE"," ",87],"[",["T_CONSTANT_ENCAPSED_STRING","'php'",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'template'",87],"]",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],"[","]",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$pattern",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'~\\b(?<class>(?<module>('",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_STRING","implode",91],"(",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'_|'",92],",",["T_WHITESPACE","\n            ",92],["T_STRING","Files",93],["T_DOUBLE_COLON","::",93],["T_STRING","init",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getNamespaces",93],"(",")",["T_WHITESPACE","\n        ",93],")",["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'[_\\\\\\\\])[a-zA-Z0-9]+)[a-zA-Z0-9_\\\\\\\\]*)\\b~'",94],";",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$dependenciesInfo",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],"[","]",";",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_STRING","preg_match_all",97],"(",["T_VARIABLE","$pattern",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$contents",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$matches",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$matches",98],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",98],"]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","array_unique",98],"(",["T_VARIABLE","$matches",98],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",98],"]",")",";",["T_WHITESPACE","\n            ",98],["T_FOREACH","foreach",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$matches",99],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",99],"]",["T_WHITESPACE"," ",99],["T_AS","as",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$i",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$referenceModule",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$referenceModule",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","str_replace",100],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$referenceModule",100],")",";",["T_WHITESPACE","\n                ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$currentModule",101],["T_WHITESPACE"," ",101],["T_IS_EQUAL","==",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$referenceModule",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                    ",101],["T_CONTINUE","continue",102],";",["T_WHITESPACE","\n                ",102],"}",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$dependencyClass",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","trim",104],"(",["T_VARIABLE","$matches",104],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",104],"]","[",["T_VARIABLE","$i",104],"]",")",";",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$currentClass",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getClassFromFilepath",105],"(",["T_VARIABLE","$file",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$currentModule",105],")",";",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$dependencyType",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","isPluginDependency",106],"(",["T_VARIABLE","$currentClass",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$dependencyClass",106],")",["T_WHITESPACE","\n                    ",106],"?",["T_WHITESPACE"," ",107],["T_STRING","RuleInterface",107],["T_DOUBLE_COLON","::",107],["T_STRING","TYPE_SOFT",107],["T_WHITESPACE","\n                    ",107],":",["T_WHITESPACE"," ",108],["T_STRING","RuleInterface",108],["T_DOUBLE_COLON","::",108],["T_STRING","TYPE_HARD",108],";",["T_WHITESPACE","\n\n                ",108],["T_VARIABLE","$dependenciesInfo",110],"[","]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],"[",["T_WHITESPACE","\n                    ",110],["T_CONSTANT_ENCAPSED_STRING","'module'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$referenceModule",111],",",["T_WHITESPACE","\n                    ",111],["T_CONSTANT_ENCAPSED_STRING","'type'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$dependencyType",112],",",["T_WHITESPACE","\n                    ",112],["T_CONSTANT_ENCAPSED_STRING","'source'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$dependencyClass",113],",",["T_WHITESPACE","\n                ",113],"]",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$result",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_caseGetUrl",117],"(",["T_VARIABLE","$currentModule",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$contents",117],")",";",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","count",118],"(",["T_VARIABLE","$result",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$dependenciesInfo",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","array_merge",119],"(",["T_VARIABLE","$dependenciesInfo",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$result",119],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$result",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_caseLayoutBlock",121],"(",["T_VARIABLE","$currentModule",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$fileType",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$file",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$contents",121],")",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_STRING","count",122],"(",["T_VARIABLE","$result",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$dependenciesInfo",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","array_merge",123],"(",["T_VARIABLE","$dependenciesInfo",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$result",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$dependenciesInfo",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Get class name from filename based on class\/file naming conventions\n     *\n     * @param string $filepath\n     * @param string $module\n     * @return string\n     *\/",129],["T_WHITESPACE","\n    ",135],["T_PRIVATE","private",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","getClassFromFilepath",136],"(",["T_VARIABLE","$filepath",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$module",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$class",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","strstr",138],"(",["T_VARIABLE","$filepath",138],",",["T_WHITESPACE"," ",138],["T_STRING","str_replace",138],"(","[",["T_CONSTANT_ENCAPSED_STRING","'_'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'\/'",138],"]",",",["T_WHITESPACE"," ",138],["T_STRING","DIRECTORY_SEPARATOR",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$module",138],")",")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$class",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","str_replace",139],"(",["T_STRING","DIRECTORY_SEPARATOR",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",139],",",["T_WHITESPACE"," ",139],["T_STRING","strstr",139],"(",["T_VARIABLE","$class",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'.php'",139],",",["T_WHITESPACE"," ",139],["T_STRING","true",139],")",")",";",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$class",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * @return array\n     * @throws \\Exception\n     *\/",143],["T_WHITESPACE","\n    ",146],["T_PRIVATE","private",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","loadDiFiles",147],"(",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(","!",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","diFiles",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","diFiles",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","Files",150],["T_DOUBLE_COLON","::",150],["T_STRING","init",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","getDiConfigs",150],"(",")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","diFiles",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Generate an array of plugin info\n     *\n     * @return array\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PRIVATE","private",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","loadPluginMap",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(","!",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","pluginMap",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_FOREACH","foreach",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","loadDiFiles",163],"(",")",["T_WHITESPACE"," ",163],["T_AS","as",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$filepath",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$dom",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_NEW","new",164],["T_WHITESPACE"," ",164],["T_NS_SEPARATOR","\\",164],["T_STRING","DOMDocument",164],"(",")",";",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$dom",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","loadXML",165],"(",["T_STRING","file_get_contents",165],"(",["T_VARIABLE","$filepath",165],")",")",";",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$typeNodes",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$dom",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getElementsByTagName",166],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",166],")",";",["T_WHITESPACE","\n                ",166],["T_DOC_COMMENT","\/** @var \\DOMElement $type *\/",167],["T_WHITESPACE","\n                ",167],["T_FOREACH","foreach",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$typeNodes",168],["T_WHITESPACE"," ",168],["T_AS","as",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$type",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                    ",168],["T_DOC_COMMENT","\/** @var \\DOMElement $plugin *\/",169],["T_WHITESPACE","\n                    ",169],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$type",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getElementsByTagName",170],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin'",170],")",["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$plugin",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                        ",170],["T_VARIABLE","$subject",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$type",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getAttribute",171],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",171],")",";",["T_WHITESPACE","\n                        ",171],["T_VARIABLE","$pluginType",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$plugin",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getAttribute",172],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",172],")",";",["T_WHITESPACE","\n                        ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","pluginMap",173],"[",["T_VARIABLE","$pluginType",173],"]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$subject",173],";",["T_WHITESPACE","\n                    ",173],"}",["T_WHITESPACE","\n                ",174],"}",["T_WHITESPACE","\n            ",175],"}",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n        ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","pluginMap",178],";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_DOC_COMMENT","\/**\n     * Determine whether a the dependency relation is because of a plugin\n     *\n     * True IFF the dependent is a plugin for some class in the same module as the dependency.\n     *\n     * @param string $dependent\n     * @param string $dependency\n     * @return bool\n     *\/",181],["T_WHITESPACE","\n    ",189],["T_PRIVATE","private",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","isPluginDependency",190],"(",["T_VARIABLE","$dependent",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$dependency",190],")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$pluginMap",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","loadPluginMap",192],"(",")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$subject",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_ISSET","isset",193],"(",["T_VARIABLE","$pluginMap",193],"[",["T_VARIABLE","$dependent",193],"]",")",["T_WHITESPACE","\n            ",193],"?",["T_WHITESPACE"," ",194],["T_VARIABLE","$pluginMap",194],"[",["T_VARIABLE","$dependent",194],"]",["T_WHITESPACE","\n            ",194],":",["T_WHITESPACE"," ",195],["T_STRING","null",195],";",["T_WHITESPACE","\n        ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$subject",196],["T_WHITESPACE"," ",196],["T_IS_IDENTICAL","===",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$dependency",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_STRING","true",197],";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE"," ",198],["T_ELSE","else",198],["T_WHITESPACE"," ",198],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$subject",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$subjectModule",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","substr",199],"(",["T_VARIABLE","$subject",199],",",["T_WHITESPACE"," ",199],["T_LNUMBER","0",199],",",["T_WHITESPACE"," ",199],["T_STRING","strpos",199],"(",["T_VARIABLE","$subject",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",199],",",["T_WHITESPACE"," ",199],["T_LNUMBER","9",199],")",")",";",["T_WHITESPACE"," ",199],["T_COMMENT","\/\/ (strlen('Magento\\\\') + 1) === 9\n",199],["T_WHITESPACE","            ",200],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","strpos",200],"(",["T_VARIABLE","$dependency",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$subjectModule",200],")",["T_WHITESPACE"," ",200],["T_IS_IDENTICAL","===",200],["T_WHITESPACE"," ",200],["T_LNUMBER","0",200],";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE"," ",201],["T_ELSE","else",201],["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_STRING","false",202],";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Check get URL method\n     *\n     * Ex.: getUrl('{path}')\n     *\n     * @param $currentModule\n     * @param $contents\n     * @return array\n     *\/",207],["T_WHITESPACE","\n    ",215],["T_PROTECTED","protected",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","_caseGetUrl",216],"(",["T_VARIABLE","$currentModule",216],",",["T_WHITESPACE"," ",216],"&",["T_VARIABLE","$contents",216],")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$pattern",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'\/[\\->:]+(?<source>getUrl\\([\\'\"](?<router>[\\w\\\/*]+)[\\'\"])\/'",218],";",["T_WHITESPACE","\n\n        ",218],["T_VARIABLE","$dependencies",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],"[","]",";",["T_WHITESPACE","\n        ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(","!",["T_STRING","preg_match_all",221],"(",["T_VARIABLE","$pattern",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$contents",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$matches",221],",",["T_WHITESPACE"," ",221],["T_STRING","PREG_SET_ORDER",221],")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$dependencies",222],";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n\n        ",223],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$matches",225],["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$item",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$router",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","str_replace",226],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$item",226],"[",["T_CONSTANT_ENCAPSED_STRING","'router'",226],"]",")",";",["T_WHITESPACE","\n            ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_ISSET","isset",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_mapRouters",227],"[",["T_VARIABLE","$router",227],"]",")",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$modules",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_mapRouters",228],"[",["T_VARIABLE","$router",228],"]",";",["T_WHITESPACE","\n                ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(","!",["T_STRING","in_array",229],"(",["T_VARIABLE","$currentModule",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$modules",229],")",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n                    ",229],["T_FOREACH","foreach",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$modules",230],["T_WHITESPACE"," ",230],["T_AS","as",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$module",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n                        ",230],["T_VARIABLE","$dependencies",231],"[","]",["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],"[",["T_WHITESPACE","\n                            ",231],["T_CONSTANT_ENCAPSED_STRING","'module'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$module",232],",",["T_WHITESPACE","\n                            ",232],["T_CONSTANT_ENCAPSED_STRING","'type'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_STRING","RuleInterface",233],["T_DOUBLE_COLON","::",233],["T_STRING","TYPE_HARD",233],",",["T_WHITESPACE","\n                            ",233],["T_CONSTANT_ENCAPSED_STRING","'source'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$item",234],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",234],"]",",",["T_WHITESPACE","\n                        ",234],"]",";",["T_WHITESPACE","\n                    ",235],"}",["T_WHITESPACE","\n                ",236],"}",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$dependencies",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Check layout blocks\n     *\n     * @param $currentModule\n     * @param $fileType\n     * @param $file\n     * @param $contents\n     * @return array\n     *\/",243],["T_WHITESPACE","\n    ",251],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","_caseLayoutBlock",252],"(",["T_VARIABLE","$currentModule",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$fileType",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$file",252],",",["T_WHITESPACE"," ",252],"&",["T_VARIABLE","$contents",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$pattern",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'\/[\\->:]+(?<source>(?:getBlock|getBlockHtml)\\([\\'\"](?<block>[\\w\\.\\-]+)[\\'\"]\\))\/'",254],";",["T_WHITESPACE","\n\n        ",254],["T_VARIABLE","$area",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_getAreaByFile",256],"(",["T_VARIABLE","$file",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$fileType",256],")",";",["T_WHITESPACE","\n\n        ",256],["T_VARIABLE","$result",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],"[","]",";",["T_WHITESPACE","\n        ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(","!",["T_STRING","preg_match_all",259],"(",["T_VARIABLE","$pattern",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$contents",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$matches",259],",",["T_WHITESPACE"," ",259],["T_STRING","PREG_SET_ORDER",259],")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$result",260],";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n\n        ",261],["T_FOREACH","foreach",263],["T_WHITESPACE"," ",263],"(",["T_VARIABLE","$matches",263],["T_WHITESPACE"," ",263],["T_AS","as",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$match",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_STRING","in_array",264],"(",["T_VARIABLE","$match",264],"[",["T_CONSTANT_ENCAPSED_STRING","'block'",264],"]",",",["T_WHITESPACE"," ",264],"[",["T_CONSTANT_ENCAPSED_STRING","'root'",264],",",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'content'",264],"]",")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_CONTINUE","continue",265],";",["T_WHITESPACE","\n            ",265],"}",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$check",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_checkDependencyLayoutBlock",267],"(",["T_VARIABLE","$currentModule",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$area",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$match",267],"[",["T_CONSTANT_ENCAPSED_STRING","'block'",267],"]",")",";",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$module",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_ISSET","isset",268],"(",["T_VARIABLE","$check",268],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",268],"]",")",["T_WHITESPACE"," ",268],"?",["T_WHITESPACE"," ",268],["T_VARIABLE","$check",268],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",268],"]",["T_WHITESPACE"," ",268],":",["T_WHITESPACE"," ",268],["T_STRING","null",268],";",["T_WHITESPACE","\n            ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$module",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$result",270],"[",["T_VARIABLE","$module",270],"]",["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],"[",["T_WHITESPACE","\n                    ",270],["T_CONSTANT_ENCAPSED_STRING","'type'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_STRING","RuleInterface",271],["T_DOUBLE_COLON","::",271],["T_STRING","TYPE_HARD",271],",",["T_WHITESPACE","\n                    ",271],["T_CONSTANT_ENCAPSED_STRING","'source'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$match",272],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",272],"]",",",["T_WHITESPACE","\n                ",272],"]",";",["T_WHITESPACE","\n            ",273],"}",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_getUniqueDependencies",276],"(",["T_VARIABLE","$result",276],")",";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Get area from file path\n     *\n     * @param $file\n     * @param $fileType\n     * @return string|null\n     *\/",279],["T_WHITESPACE","\n    ",285],["T_PROTECTED","protected",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","_getAreaByFile",286],"(",["T_VARIABLE","$file",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$fileType",286],")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$fileType",288],["T_WHITESPACE"," ",288],["T_IS_EQUAL","==",288],["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'php'",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_STRING","null",289],";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$area",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'default'",291],";",["T_WHITESPACE","\n        ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_STRING","preg_match",292],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\\/(?<area>adminhtml|frontend)\\\/\/'",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$file",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$matches",292],")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$area",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$matches",293],"[",["T_CONSTANT_ENCAPSED_STRING","'area'",293],"]",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n        ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$area",295],";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_DOC_COMMENT","\/**\n     * Check layout block dependency\n     *\n     * Return: array(\n     *  'module'  \/\/ dependent module\n     *  'source'  \/\/ source text\n     * )\n     *\n     * @param $currentModule\n     * @param $area\n     * @param $block\n     * @return array\n     *\/",298],["T_WHITESPACE","\n    ",310],["T_PROTECTED","protected",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","_checkDependencyLayoutBlock",311],"(",["T_VARIABLE","$currentModule",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$area",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$block",311],")",["T_WHITESPACE","\n    ",311],"{",["T_WHITESPACE","\n        ",312],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_ISSET","isset",313],"(",["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_mapLayoutBlocks",313],"[",["T_VARIABLE","$area",313],"]","[",["T_VARIABLE","$block",313],"]",")",["T_WHITESPACE"," ",313],["T_BOOLEAN_OR","||",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$area",313],["T_WHITESPACE"," ",313],["T_IS_IDENTICAL","===",313],["T_WHITESPACE"," ",313],["T_STRING","null",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_COMMENT","\/\/ CASE 1: No dependencies\n",314],["T_WHITESPACE","            ",315],["T_VARIABLE","$modules",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],"[","]",";",["T_WHITESPACE","\n            ",315],["T_IF","if",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$area",316],["T_WHITESPACE"," ",316],["T_IS_IDENTICAL","===",316],["T_WHITESPACE"," ",316],["T_STRING","null",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                ",316],["T_FOREACH","foreach",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_mapLayoutBlocks",317],["T_WHITESPACE"," ",317],["T_AS","as",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$blocks",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n                    ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_STRING","array_key_exists",318],"(",["T_VARIABLE","$block",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$blocks",318],")",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n                        ",318],["T_VARIABLE","$modules",319],["T_WHITESPACE"," ",319],["T_PLUS_EQUAL","+=",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$blocks",319],"[",["T_VARIABLE","$block",319],"]",";",["T_WHITESPACE","\n                    ",319],"}",["T_WHITESPACE","\n                ",320],"}",["T_WHITESPACE","\n            ",321],"}",["T_WHITESPACE"," ",322],["T_ELSE","else",322],["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n                ",322],["T_VARIABLE","$modules",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_mapLayoutBlocks",323],"[",["T_VARIABLE","$area",323],"]","[",["T_VARIABLE","$block",323],"]",";",["T_WHITESPACE","\n            ",323],"}",["T_WHITESPACE","\n            ",324],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_ISSET","isset",325],"(",["T_VARIABLE","$modules",325],"[",["T_VARIABLE","$currentModule",325],"]",")",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                ",325],["T_RETURN","return",326],["T_WHITESPACE"," ",326],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",326],["T_WHITESPACE"," ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_STRING","null",326],"]",";",["T_WHITESPACE","\n            ",326],"}",["T_WHITESPACE","\n            ",327],["T_COMMENT","\/\/ CASE 2: Single dependency\n",328],["T_WHITESPACE","            ",329],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_LNUMBER","1",329],["T_WHITESPACE"," ",329],["T_IS_EQUAL","==",329],["T_WHITESPACE"," ",329],["T_STRING","count",329],"(",["T_VARIABLE","$modules",329],")",")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_STRING","current",330],"(",["T_VARIABLE","$modules",330],")","]",";",["T_WHITESPACE","\n            ",330],"}",["T_WHITESPACE","\n            ",331],["T_COMMENT","\/\/ CASE 3: Default module dependency\n",332],["T_WHITESPACE","            ",333],["T_VARIABLE","$defaultModule",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_getDefaultModuleName",333],"(",["T_VARIABLE","$area",333],")",";",["T_WHITESPACE","\n            ",333],["T_IF","if",334],["T_WHITESPACE"," ",334],"(",["T_ISSET","isset",334],"(",["T_VARIABLE","$modules",334],"[",["T_VARIABLE","$defaultModule",334],"]",")",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$defaultModule",335],"]",";",["T_WHITESPACE","\n            ",335],"}",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n        ",337],["T_COMMENT","\/\/ CASE 4: \\Exception - Undefined block\n",338],["T_WHITESPACE","        ",339],["T_RETURN","return",339],["T_WHITESPACE"," ",339],"[","]",";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Retrieve default module name (by area)\n     *\n     * @param string $area\n     * @return null\n     *\/",342],["T_WHITESPACE","\n    ",347],["T_PROTECTED","protected",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","_getDefaultModuleName",348],"(",["T_VARIABLE","$area",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'default'",348],")",["T_WHITESPACE","\n    ",348],"{",["T_WHITESPACE","\n        ",349],["T_IF","if",350],["T_WHITESPACE"," ",350],"(",["T_ISSET","isset",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_defaultModules",350],"[",["T_VARIABLE","$area",350],"]",")",")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_defaultModules",351],"[",["T_VARIABLE","$area",351],"]",";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_STRING","null",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Retrieve unique dependencies\n     *\n     * @param array $dependencies\n     * @return array\n     *\/",356],["T_WHITESPACE","\n    ",361],["T_PROTECTED","protected",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","_getUniqueDependencies",362],"(",["T_VARIABLE","$dependencies",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],"[","]",")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$result",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],"[","]",";",["T_WHITESPACE","\n        ",364],["T_FOREACH","foreach",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$dependencies",365],["T_WHITESPACE"," ",365],["T_AS","as",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$module",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$value",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$result",366],"[","]",["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$module",366],",",["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'type'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$value",366],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",366],"]",",",["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'source'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$value",366],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",366],"]","]",";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n        ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$result",368],";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n",369],"}",["T_WHITESPACE","\n",370]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TestFramework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Searches for usage of classes, namespaces, functions, etc in PHP files\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","CodeCheck",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * Check if the class is used in the content\n     *\n     * @param string $className\n     * @param string $content\n     * @return bool\n     *\/",14],["T_WHITESPACE","\n    ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","isClassUsed",21],"(",["T_VARIABLE","$className",21],",",["T_WHITESPACE"," ",21],["T_VARIABLE","$content",21],")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_COMMENT","\/* avoid matching namespace instead of class *\/",23],["T_WHITESPACE","\n        ",23],["T_VARIABLE","$content",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","preg_replace",24],"(",["T_CONSTANT_ENCAPSED_STRING","'\/namespace[^;]+;\/'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","''",24],",",["T_WHITESPACE"," ",24],["T_VARIABLE","$content",24],")",";",["T_WHITESPACE","\n        ",24],["T_RETURN","return",25],["T_WHITESPACE"," ",25],["T_STRING","self",25],["T_DOUBLE_COLON","::",25],["T_STRING","_isRegexpMatched",25],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^a-z\\d_]'",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_STRING","preg_quote",25],"(",["T_VARIABLE","$className",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'\/'",25],")",["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'[^a-z\\d_\\\\\\\\]\/iS'",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$content",25],")",";",["T_WHITESPACE","\n    ",25],"}",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Check if the namespace is used in the content\n     *\n     * @param string $namespace\n     * @param string $content\n     * @return bool\n     *\/",28],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_STATIC","static",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","isNamespaceUsed",35],"(",["T_VARIABLE","$namespace",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$content",35],")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_STRING","self",37],["T_DOUBLE_COLON","::",37],["T_STRING","_isRegexpMatched",37],"(",["T_CONSTANT_ENCAPSED_STRING","'\/namespace\\s+'",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_STRING","preg_quote",37],"(",["T_VARIABLE","$namespace",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'\/'",37],")",["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","';\/S'",37],",",["T_WHITESPACE"," ",37],["T_VARIABLE","$content",37],")",["T_WHITESPACE","\n        ",37],["T_BOOLEAN_OR","||",38],["T_WHITESPACE"," ",38],["T_STRING","self",38],["T_DOUBLE_COLON","::",38],["T_STRING","_isRegexpMatched",38],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^a-zA-Z\\d_]'",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_STRING","preg_quote",38],"(",["T_VARIABLE","$namespace",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'\/'",38],")",["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'\/S'",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$content",38],")",";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Check if the specified function is called in the content.\n     * Note that declarations are not considered.\n     *\n     * If class context is not specified, invocation of all functions or methods (of any class)\n     * will be matched across the board\n     *\n     * If some class is specified, only its methods will be matched as follows:\n     * - usage of class::method\n     * - usage of $this, self and static within the class and its descendants\n     *\n     * @param string $method\n     * @param string $content\n     * @param string $class\n     * @return bool\n     *\/",41],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_STATIC","static",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","isFunctionCalled",57],"(",["T_VARIABLE","$method",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$content",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$class",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","null",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$quotedMethod",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","preg_quote",59],"(",["T_VARIABLE","$method",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'\/'",59],")",";",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(","!",["T_VARIABLE","$class",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_STRING","self",61],["T_DOUBLE_COLON","::",61],["T_STRING","_isRegexpMatched",61],"(",["T_WHITESPACE","\n                ",61],["T_CONSTANT_ENCAPSED_STRING","'\/(?<![a-z\\d_:]|->|function\\s)'",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_VARIABLE","$quotedMethod",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'\\s*\\(\/iS'",62],",",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$content",63],["T_WHITESPACE","\n            ",63],")",";",["T_WHITESPACE","\n        ",64],"}",["T_WHITESPACE","\n        ",65],["T_COMMENT","\/\/ without opening parentheses to match static callbacks notation\n",66],["T_WHITESPACE","        ",67],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_STRING","self",67],["T_DOUBLE_COLON","::",67],["T_STRING","_isRegexpMatched",67],"(",["T_WHITESPACE","\n            ",67],["T_CONSTANT_ENCAPSED_STRING","'\/'",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_STRING","preg_quote",68],"(",["T_VARIABLE","$class",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'\/'",68],")",["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'::\\s*'",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_VARIABLE","$quotedMethod",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'[^a-z\\d_]\/iS'",68],",",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$content",69],["T_WHITESPACE","\n        ",69],")",["T_WHITESPACE","\n        ",70],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_STRING","true",72],";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_STRING","self",74],["T_DOUBLE_COLON","::",74],["T_STRING","isClassOrInterface",74],"(",["T_VARIABLE","$content",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$class",74],")",["T_WHITESPACE"," ",74],["T_BOOLEAN_OR","||",74],["T_WHITESPACE"," ",74],["T_STRING","self",74],["T_DOUBLE_COLON","::",74],["T_STRING","isDirectDescendant",74],"(",["T_VARIABLE","$content",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$class",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_STRING","self",75],["T_DOUBLE_COLON","::",75],["T_STRING","_isRegexpMatched",75],"(",["T_CONSTANT_ENCAPSED_STRING","'\/this->'",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_VARIABLE","$quotedMethod",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'\\s*\\(\/iS'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$content",75],")",["T_WHITESPACE","\n            ",75],["T_BOOLEAN_OR","||",76],["T_WHITESPACE"," ",76],["T_STRING","self",76],["T_DOUBLE_COLON","::",76],["T_STRING","_isRegexpMatched",76],"(",["T_WHITESPACE","\n                ",76],["T_CONSTANT_ENCAPSED_STRING","'\/(self|static|parent)::\\s*'",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_VARIABLE","$quotedMethod",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'\\s*\\(\/iS'",77],",",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$content",78],["T_WHITESPACE","\n            ",78],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Check if methods or functions are used in the content\n     *\n     * If class context is specified, only the class and its descendants will be checked.\n     *\n     * @param string $property\n     * @param string $content\n     * @param string $class\n     * @return bool\n     *\/",83],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_STATIC","static",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","isPropertyUsed",93],"(",["T_VARIABLE","$property",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$content",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$class",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","null",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$class",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","isClassOrInterface",96],"(",["T_VARIABLE","$content",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$class",96],")",["T_WHITESPACE"," ",96],["T_BOOLEAN_AND","&&",96],["T_WHITESPACE"," ",96],"!",["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","isDirectDescendant",96],"(",["T_VARIABLE","$content",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$class",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_STRING","false",97],";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_STRING","self",100],["T_DOUBLE_COLON","::",100],["T_STRING","_isRegexpMatched",100],"(",["T_WHITESPACE","\n            ",100],["T_CONSTANT_ENCAPSED_STRING","'\/[^a-z\\d_]'",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_STRING","preg_quote",101],"(",["T_VARIABLE","$property",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'\/'",101],")",["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'[^a-z\\d_]\/iS'",101],",",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$content",102],["T_WHITESPACE","\n        ",102],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Analyze content to determine whether it is a declaration of the specified class\/interface\n     *\n     * @param string $content\n     * @param string $name\n     * @return bool\n     *\/",106],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_STATIC","static",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","isClassOrInterface",113],"(",["T_VARIABLE","$content",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$name",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_STRING","self",115],["T_DOUBLE_COLON","::",115],["T_STRING","_isRegexpMatched",115],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\b(?:class|interface)\\s+'",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_STRING","preg_quote",115],"(",["T_VARIABLE","$name",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'\/'",115],")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'\\b[^{]*\\{\/iS'",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$content",115],")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Analyze content to determine whether this is a direct descendant of the specified class\/interface\n     *\n     * @param string $content\n     * @param string $name\n     * @return bool\n     *\/",118],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_STATIC","static",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","isDirectDescendant",125],"(",["T_VARIABLE","$content",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$name",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$name",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","preg_quote",127],"(",["T_VARIABLE","$name",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'\/'",127],")",";",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_STRING","self",128],["T_DOUBLE_COLON","::",128],["T_STRING","_isRegexpMatched",128],"(",["T_WHITESPACE","\n            ",128],["T_CONSTANT_ENCAPSED_STRING","'\/\\s+extends\\s+'",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_VARIABLE","$name",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'\\b|\\s+implements\\s+[^{]*\\b'",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_VARIABLE","$name",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'\\b[^{^\\\\\\\\]*\\{\/iS'",129],",",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$content",130],["T_WHITESPACE","\n        ",130],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Check if content matches the regexp\n     *\n     * @param string $regexp\n     * @param string $content\n     * @throws \\Exception\n     * @return bool True if the content matches the regexp\n     *\/",134],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_STATIC","static",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","_isRegexpMatched",142],"(",["T_VARIABLE","$regexp",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$content",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$result",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","preg_match",144],"(",["T_VARIABLE","$regexp",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$content",144],")",";",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$result",145],["T_WHITESPACE"," ",145],["T_IS_IDENTICAL","===",145],["T_WHITESPACE"," ",145],["T_STRING","false",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_THROW","throw",146],["T_WHITESPACE"," ",146],["T_NEW","new",146],["T_WHITESPACE"," ",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Exception",146],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred when matching regexp \"'",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_VARIABLE","$regexp",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'\"\"'",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_LNUMBER","1",148],["T_WHITESPACE"," ",148],["T_IS_IDENTICAL","===",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$result",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n",149],"}",["T_WHITESPACE","\n",150]]
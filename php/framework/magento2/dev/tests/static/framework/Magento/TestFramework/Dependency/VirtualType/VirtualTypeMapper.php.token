[["T_OPEN_TAG","<?php\r\n",1],["T_DOC_COMMENT","\/**\r\n * Rule for searching php file dependency\r\n *\r\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n *\/",2],["T_WHITESPACE","\r\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Dependency",8],["T_NS_SEPARATOR","\\",8],["T_STRING","VirtualType",8],";",["T_WHITESPACE","\r\n\r\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","DOMDocument",10],";",["T_WHITESPACE","\r\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Utility",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Files",11],";",["T_WHITESPACE","\r\n\r\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","VirtualTypeMapper",13],["T_WHITESPACE","\r\n",13],"{",["T_WHITESPACE","\r\n    ",14],["T_DOC_COMMENT","\/**\r\n     * @var array\r\n     *\/",15],["T_WHITESPACE","\r\n    ",17],["T_PRIVATE","private",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$map",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],"[","]",";",["T_WHITESPACE","\r\n\r\n    ",18],["T_DOC_COMMENT","\/**\r\n     * @var string\r\n     *\/",20],["T_WHITESPACE","\r\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$mainScope",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'global'",23],";",["T_WHITESPACE","\r\n\r\n    ",23],["T_DOC_COMMENT","\/**\r\n     * VirtualTypeMapper constructor.\r\n     * @param array $map\r\n     *\/",25],["T_WHITESPACE","\r\n    ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","__construct",29],"(",["T_ARRAY","array",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$map",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],"[","]",")",["T_WHITESPACE","\r\n    ",29],"{",["T_WHITESPACE","\r\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","map",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$map",31],";",["T_WHITESPACE","\r\n    ",31],"}",["T_WHITESPACE","\r\n\r\n    ",32],["T_DOC_COMMENT","\/**\r\n     * @param string $name\r\n     * @param string $scope\r\n     * @return string|null\r\n     *\/",34],["T_WHITESPACE","\r\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","getType",39],"(",["T_VARIABLE","$name",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$scope",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","null",39],")",["T_WHITESPACE","\r\n    ",39],"{",["T_WHITESPACE","\r\n        ",40],["T_IF","if",41],["T_WHITESPACE"," ",41],"(",["T_EMPTY","empty",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","map",41],")",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\r\n            ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","loadMap",42],"(",")",";",["T_WHITESPACE","\r\n        ",42],"}",["T_WHITESPACE","\r\n\r\n        ",43],["T_VARIABLE","$scopes",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"[","]",";",["T_WHITESPACE","\r\n        ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_VARIABLE","$scope",46],["T_WHITESPACE"," ",46],["T_IS_NOT_IDENTICAL","!==",46],["T_WHITESPACE"," ",46],["T_STRING","null",46],["T_WHITESPACE"," ",46],["T_BOOLEAN_AND","&&",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$scope",46],["T_WHITESPACE"," ",46],["T_IS_NOT_IDENTICAL","!==",46],["T_WHITESPACE"," ",46],["T_STRING","self",46],["T_DOUBLE_COLON","::",46],["T_VARIABLE","$mainScope",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\r\n            ",46],["T_STRING","array_unshift",47],"(",["T_VARIABLE","$scopes",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$scope",47],")",";",["T_WHITESPACE","\r\n        ",47],"}",["T_WHITESPACE","\r\n        ",48],["T_VARIABLE","$scopes",49],"[","]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","self",49],["T_DOUBLE_COLON","::",49],["T_VARIABLE","$mainScope",49],";",["T_WHITESPACE","\r\n\r\n        ",49],["T_FOREACH","foreach",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$scopes",51],["T_WHITESPACE"," ",51],["T_AS","as",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$scp",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\r\n            ",51],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_ISSET","isset",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","map",52],"[",["T_VARIABLE","$scp",52],"]","[",["T_VARIABLE","$name",52],"]",")",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\r\n                ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","map",53],"[",["T_VARIABLE","$scp",53],"]","[",["T_VARIABLE","$name",53],"]",";",["T_WHITESPACE","\r\n            ",53],"}",["T_WHITESPACE","\r\n        ",54],"}",["T_WHITESPACE","\r\n\r\n        ",55],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$name",57],";",["T_WHITESPACE","\r\n    ",57],"}",["T_WHITESPACE","\r\n\r\n    ",58],["T_DOC_COMMENT","\/**\r\n     * @param string $file\r\n     * @return string\r\n     *\/",60],["T_WHITESPACE","\r\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","getScopeFromFile",64],"(",["T_VARIABLE","$file",64],")",["T_WHITESPACE","\r\n    ",64],"{",["T_WHITESPACE","\r\n        ",65],["T_VARIABLE","$basename",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","basename",66],"(",["T_STRING","pathinfo",66],"(",["T_VARIABLE","$file",66],",",["T_WHITESPACE"," ",66],["T_STRING","PATHINFO_DIRNAME",66],")",")",";",["T_WHITESPACE","\r\n        ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$basename",67],["T_WHITESPACE"," ",67],["T_IS_IDENTICAL","===",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'etc'",67],["T_WHITESPACE"," ",67],"?",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'global'",67],["T_WHITESPACE"," ",67],":",["T_WHITESPACE"," ",67],["T_VARIABLE","$basename",67],";",["T_WHITESPACE","\r\n    ",67],"}",["T_WHITESPACE","\r\n\r\n    ",68],["T_DOC_COMMENT","\/**\r\n     * @return array\r\n     * @throws \\Exception\r\n     *\/",70],["T_WHITESPACE","\r\n    ",73],["T_PRIVATE","private",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","loadDiConfigs",74],"(",")",["T_WHITESPACE","\r\n    ",74],"{",["T_WHITESPACE","\r\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_STRING","Files",76],["T_DOUBLE_COLON","::",76],["T_STRING","init",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getDiConfigs",76],"(",")",";",["T_WHITESPACE","\r\n    ",76],"}",["T_WHITESPACE","\r\n\r\n    ",77],["T_DOC_COMMENT","\/**\r\n     * @param array $diFiles\r\n     * @return array\r\n     * @throws \\Exception\r\n     *\/",79],["T_WHITESPACE","\r\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","loadMap",84],"(",["T_ARRAY","array",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$diFiles",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[","]",")",["T_WHITESPACE","\r\n    ",84],"{",["T_WHITESPACE","\r\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_EMPTY","empty",86],"(",["T_VARIABLE","$diFiles",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\r\n            ",86],["T_VARIABLE","$diFiles",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","loadDiConfigs",87],"(",")",";",["T_WHITESPACE","\r\n        ",87],"}",["T_WHITESPACE","\r\n\r\n        ",88],["T_FOREACH","foreach",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$diFiles",90],["T_WHITESPACE"," ",90],["T_AS","as",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$file",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\r\n            ",90],["T_VARIABLE","$scope",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getScopeFromFile",91],"(",["T_VARIABLE","$file",91],")",";",["T_WHITESPACE","\r\n            ",91],["T_VARIABLE","$doc",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_STRING","DOMDocument",92],"(",")",";",["T_WHITESPACE","\r\n            ",92],["T_VARIABLE","$doc",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","loadXML",93],"(",["T_STRING","file_get_contents",93],"(",["T_VARIABLE","$file",93],")",")",";",["T_WHITESPACE","\r\n\r\n            ",93],["T_VARIABLE","$nodes",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$doc",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getElementsByTagName",95],"(",["T_CONSTANT_ENCAPSED_STRING","'virtualType'",95],")",";",["T_WHITESPACE","\r\n            ",95],["T_DOC_COMMENT","\/** @var \\DOMElement $node *\/",96],["T_WHITESPACE","\r\n            ",96],["T_FOREACH","foreach",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$nodes",97],["T_WHITESPACE"," ",97],["T_AS","as",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$node",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\r\n                ",97],["T_VARIABLE","$name",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$node",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getAttribute",98],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",98],")",";",["T_WHITESPACE","\r\n                ",98],["T_VARIABLE","$type",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$node",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getAttribute",99],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",99],")",";",["T_WHITESPACE","\r\n                ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_EMPTY","empty",100],"(",["T_VARIABLE","$type",100],")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\r\n                    ",100],["T_CONTINUE","continue",101],";",["T_WHITESPACE","\r\n                ",101],"}",["T_WHITESPACE","\r\n                ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","map",103],"[",["T_VARIABLE","$scope",103],"]","[",["T_VARIABLE","$name",103],"]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$type",103],";",["T_WHITESPACE","\r\n            ",103],"}",["T_WHITESPACE","\r\n        ",104],"}",["T_WHITESPACE","\r\n\r\n        ",105],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","map",107],";",["T_WHITESPACE","\r\n    ",107],"}",["T_WHITESPACE","\r\n",108],"}",["T_WHITESPACE","\r\n",109]]
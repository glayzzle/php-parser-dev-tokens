[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Mtf",7],["T_NS_SEPARATOR","\\",7],["T_STRING","App",7],["T_NS_SEPARATOR","\\",7],["T_STRING","State",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DirectoryList",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Config",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigOptionsListConstants",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","DeploymentConfig",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Reader",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DeploymentConfig",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ObjectManager",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Abstract class AbstractState\n *\n *\/",15],["T_WHITESPACE","\n",18],["T_ABSTRACT","abstract",19],["T_WHITESPACE"," ",19],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","AbstractState",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","StateInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * Object Manager.\n     *\n     * @var ObjectManager\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$objectManager",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * List of handlers\n     *\n     * @var string[]\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$arguments",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Specifies whether to clean instance under test\n     *\n     * @var bool\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$isCleanInstance",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","false",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * AbstractState constructor.\n     *\n     * @param ObjectManager $objectManager\n     * @param array $arguments\n     *\/",42],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","__construct",48],"(",["T_WHITESPACE","\n        ",48],["T_STRING","ObjectManager",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$objectManager",49],",",["T_WHITESPACE","\n        ",49],["T_ARRAY","array",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$arguments",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],"[","]",["T_WHITESPACE","\n    ",50],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","objectManager",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$objectManager",52],";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","arguments",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$arguments",53],";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","apply",59],"(",")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_FOREACH","foreach",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","arguments",61],["T_WHITESPACE"," ",61],["T_AS","as",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$argument",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$handler",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","objectManager",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_VARIABLE","$argument",62],")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$handler",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","execute",63],"(",["T_VARIABLE","$this",63],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n        ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","isCleanInstance",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","clearInstance",66],"(",")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Clear Magento instance: remove all tables in DB and use dump to load new ones, clear Magento cache\n     *\n     * @throws \\Exception\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","clearInstance",75],"(",")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$dirList",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Mtf",77],["T_NS_SEPARATOR","\\",77],["T_STRING","ObjectManagerFactory",77],["T_DOUBLE_COLON","::",77],["T_STRING","getObjectManager",77],"(",")",["T_WHITESPACE","\n            ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","get",78],"(",["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Framework",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Filesystem",78],["T_NS_SEPARATOR","\\",78],["T_STRING","DirectoryList",78],["T_DOUBLE_COLON","::",78],["T_CLASS","class",78],")",";",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$configFilePool",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Mtf",80],["T_NS_SEPARATOR","\\",80],["T_STRING","ObjectManagerFactory",80],["T_DOUBLE_COLON","::",80],["T_STRING","getObjectManager",80],"(",")",["T_WHITESPACE","\n            ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","get",81],"(",["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Framework",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Config",81],["T_NS_SEPARATOR","\\",81],["T_STRING","File",81],["T_NS_SEPARATOR","\\",81],["T_STRING","ConfigFilePool",81],["T_DOUBLE_COLON","::",81],["T_CLASS","class",81],")",";",["T_WHITESPACE","\n\n        ",81],["T_VARIABLE","$driverPool",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Mtf",83],["T_NS_SEPARATOR","\\",83],["T_STRING","ObjectManagerFactory",83],["T_DOUBLE_COLON","::",83],["T_STRING","getObjectManager",83],"(",")",["T_WHITESPACE","\n            ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","get",84],"(",["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Framework",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Filesystem",84],["T_NS_SEPARATOR","\\",84],["T_STRING","DriverPool",84],["T_DOUBLE_COLON","::",84],["T_CLASS","class",84],")",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$reader",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_STRING","Reader",86],"(",["T_VARIABLE","$dirList",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$driverPool",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$configFilePool",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$deploymentConfig",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_STRING","DeploymentConfig",87],"(",["T_VARIABLE","$reader",87],")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$host",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$deploymentConfig",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","get",88],"(",["T_WHITESPACE","\n            ",88],["T_STRING","ConfigOptionsListConstants",89],["T_DOUBLE_COLON","::",89],["T_STRING","CONFIG_PATH_DB_CONNECTION_DEFAULT",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'\/'",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","ConfigOptionsListConstants",89],["T_DOUBLE_COLON","::",89],["T_STRING","KEY_HOST",89],["T_WHITESPACE","\n        ",89],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$user",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$deploymentConfig",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","get",91],"(",["T_WHITESPACE","\n            ",91],["T_STRING","ConfigOptionsListConstants",92],["T_DOUBLE_COLON","::",92],["T_STRING","CONFIG_PATH_DB_CONNECTION_DEFAULT",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'\/'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","ConfigOptionsListConstants",92],["T_DOUBLE_COLON","::",92],["T_STRING","KEY_USER",92],["T_WHITESPACE","\n        ",92],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$password",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$deploymentConfig",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","get",94],"(",["T_WHITESPACE","\n            ",94],["T_STRING","ConfigOptionsListConstants",95],["T_DOUBLE_COLON","::",95],["T_STRING","CONFIG_PATH_DB_CONNECTION_DEFAULT",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE","\n            ",95],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_STRING","ConfigOptionsListConstants",96],["T_DOUBLE_COLON","::",96],["T_STRING","KEY_PASSWORD",96],["T_WHITESPACE","\n        ",96],")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$database",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$deploymentConfig",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","get",98],"(",["T_WHITESPACE","\n            ",98],["T_STRING","ConfigOptionsListConstants",99],["T_DOUBLE_COLON","::",99],["T_STRING","CONFIG_PATH_DB_CONNECTION_DEFAULT",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'\/'",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_STRING","ConfigOptionsListConstants",99],["T_DOUBLE_COLON","::",99],["T_STRING","KEY_NAME",99],["T_WHITESPACE","\n        ",99],")",";",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$fileName",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","MTF_BP",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'\/'",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_VARIABLE","$database",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'.sql'",102],";",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_STRING","file_exists",103],"(",["T_VARIABLE","$fileName",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_ECHO","echo",104],"(",["T_CONSTANT_ENCAPSED_STRING","'Database dump was not found by path: '",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$fileName",104],")",";",["T_WHITESPACE","\n            ",104],["T_RETURN","return",105],";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_COMMENT","\/\/ Drop all tables in database\n",108],["T_WHITESPACE","        ",109],["T_VARIABLE","$mysqli",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_NEW","new",109],["T_WHITESPACE"," ",109],["T_NS_SEPARATOR","\\",109],["T_STRING","mysqli",109],"(",["T_VARIABLE","$host",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$user",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$password",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$database",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$mysqli",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","query",110],"(",["T_CONSTANT_ENCAPSED_STRING","'SET foreign_key_checks = 0'",110],")",";",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$result",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$mysqli",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","query",111],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW TABLES\"",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_WHILE","while",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$row",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$result",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","fetch_row",112],"(",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$mysqli",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","query",113],"(",["T_CONSTANT_ENCAPSED_STRING","'DROP TABLE '",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$row",113],"[",["T_LNUMBER","0",113],"]",")",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$mysqli",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","query",116],"(",["T_CONSTANT_ENCAPSED_STRING","'SET foreign_key_checks = 1'",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$mysqli",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","close",117],"(",")",";",["T_WHITESPACE","\n\n        ",117],["T_COMMENT","\/\/ Load database dump\n",119],["T_WHITESPACE","        ",120],["T_STRING","exec",120],"(","\"",["T_ENCAPSED_AND_WHITESPACE","mysql -u",120],["T_CURLY_OPEN","{",120],["T_VARIABLE","$user",120],"}",["T_ENCAPSED_AND_WHITESPACE"," -p",120],["T_CURLY_OPEN","{",120],["T_VARIABLE","$password",120],"}",["T_ENCAPSED_AND_WHITESPACE"," ",120],["T_CURLY_OPEN","{",120],["T_VARIABLE","$database",120],"}",["T_ENCAPSED_AND_WHITESPACE"," < ",120],["T_CURLY_OPEN","{",120],["T_VARIABLE","$fileName",120],"}","\"",",",["T_WHITESPACE"," ",120],["T_VARIABLE","$output",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$result",120],")",";",["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$result",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_THROW","throw",122],["T_WHITESPACE"," ",122],["T_NEW","new",122],["T_WHITESPACE"," ",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Exception",122],"(",["T_CONSTANT_ENCAPSED_STRING","'Database dump loading has been failed: '",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$output",122],")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n\n        ",123],["T_COMMENT","\/\/ Clear cache\n",125],["T_WHITESPACE","        ",126],["T_STRING","exec",126],"(","\"",["T_ENCAPSED_AND_WHITESPACE","rm -rf ",126],["T_CURLY_OPEN","{",126],["T_VARIABLE","$dirList",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getPath",126],"(",["T_STRING","DirectoryList",126],["T_DOUBLE_COLON","::",126],["T_STRING","VAR_DIR",126],")","}",["T_ENCAPSED_AND_WHITESPACE","\/*",126],"\"",",",["T_WHITESPACE"," ",126],["T_VARIABLE","$output",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$result",126],")",";",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$result",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_THROW","throw",128],["T_WHITESPACE"," ",128],["T_NEW","new",128],["T_WHITESPACE"," ",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Exception",128],"(",["T_CONSTANT_ENCAPSED_STRING","'Cleaning Magento cache has been failed: '",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$output",128],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
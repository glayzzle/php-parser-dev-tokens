[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CheckoutAgreements",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CheckoutAgreement",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Mtf",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FixtureInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Mtf",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Handler",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Curl",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","AbstractCurl",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Mtf",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Util",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Protocol",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CurlTransport",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Util",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Protocol",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CurlTransport",12],["T_NS_SEPARATOR","\\",12],["T_STRING","BackendDecorator",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Class Curl\n * Curl handler for creating Checkout Agreement\n *\/",14],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Curl",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","AbstractCurl",18],["T_WHITESPACE"," ",18],["T_IMPLEMENTS","implements",18],["T_WHITESPACE"," ",18],["T_STRING","CheckoutAgreementInterface",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$mappingData",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[",["T_WHITESPACE","\n        ",25],["T_CONSTANT_ENCAPSED_STRING","'is_active'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],"[",["T_WHITESPACE","\n            ",26],["T_CONSTANT_ENCAPSED_STRING","'Enabled'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_LNUMBER","1",27],",",["T_WHITESPACE","\n            ",27],["T_CONSTANT_ENCAPSED_STRING","'Disabled'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_LNUMBER","0",28],",",["T_WHITESPACE","\n        ",28],"]",",",["T_WHITESPACE","\n        ",29],["T_CONSTANT_ENCAPSED_STRING","'is_html'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],"[",["T_WHITESPACE","\n            ",30],["T_CONSTANT_ENCAPSED_STRING","'HTML'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_LNUMBER","1",31],",",["T_WHITESPACE","\n            ",31],["T_CONSTANT_ENCAPSED_STRING","'Text'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_LNUMBER","0",32],",",["T_WHITESPACE","\n        ",32],"]",",",["T_WHITESPACE","\n    ",33],"]",";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Url for save checkout agreement\n     *\n     * @var string\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$url",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'checkout\/agreement\/save\/'",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Post request for creating new checkout agreement\n     *\n     * @param FixtureInterface|null $fixture\n     * @return array\n     * @throws \\Exception\n     *\/",43],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","persist",50],"(",["T_STRING","FixtureInterface",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$fixture",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","null",50],")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$url",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$_ENV",52],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",52],"]",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","url",52],";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$data",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","prepareData",53],"(",["T_VARIABLE","$fixture",53],")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$curl",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_NEW","new",54],["T_WHITESPACE"," ",54],["T_STRING","BackendDecorator",54],"(",["T_NEW","new",54],["T_WHITESPACE"," ",54],["T_STRING","CurlTransport",54],"(",")",",",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_configuration",54],")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$curl",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","write",55],"(",["T_VARIABLE","$url",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$data",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$response",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$curl",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","read",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$curl",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","close",57],"(",")",";",["T_WHITESPACE","\n        ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(","!",["T_STRING","strpos",58],"(",["T_VARIABLE","$response",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'data-ui-id=\"messages-message-success\"'",58],")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_THROW","throw",59],["T_WHITESPACE"," ",59],["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Exception",59],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Checkout agreement creating by curl handler was not successful! Response: ",59],["T_VARIABLE","$response",59],"\"",")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n        ",60],["T_STRING","preg_match",61],"(",["T_CONSTANT_ENCAPSED_STRING","'~id\\\/(\\d*?)\\\/~'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$response",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$matches",61],")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$id",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ISSET","isset",62],"(",["T_VARIABLE","$matches",62],"[",["T_LNUMBER","1",62],"]",")",["T_WHITESPACE"," ",62],"?",["T_WHITESPACE"," ",62],["T_VARIABLE","$matches",62],"[",["T_LNUMBER","1",62],"]",["T_WHITESPACE"," ",62],":",["T_WHITESPACE"," ",62],["T_STRING","null",62],";",["T_WHITESPACE","\n\n        ",62],["T_RETURN","return",64],["T_WHITESPACE"," ",64],"[",["T_CONSTANT_ENCAPSED_STRING","'agreement_id'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$id",64],"]",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Prepare data\n     *\n     * @param FixtureInterface $fixture\n     * @return array\n     *\/",67],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","prepareData",73],"(",["T_VARIABLE","$fixture",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$data",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],"[","]",";",["T_WHITESPACE","\n        ",75],["T_DOC_COMMENT","\/** @var \\Magento\\CheckoutAgreements\\Test\\Fixture\\CheckoutAgreement $fixture *\/",76],["T_WHITESPACE","\n        ",76],["T_VARIABLE","$stores",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$fixture",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getDataFieldConfig",77],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",77],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",77],"]",["T_OBJECT_OPERATOR","->",77],["T_STRING","getStores",77],"(",")",";",["T_WHITESPACE","\n        ",77],["T_FOREACH","foreach",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$stores",78],["T_WHITESPACE"," ",78],["T_AS","as",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$store",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_DOC_COMMENT","\/** @var \\Magento\\Store\\Test\\Fixture\\Store $store *\/",79],["T_WHITESPACE","\n            ",79],["T_VARIABLE","$data",80],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",80],"]","[","]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$store",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getStoreId",80],"(",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$data",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","replaceMappingData",82],"(",["T_STRING","array_merge",82],"(",["T_VARIABLE","$fixture",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getData",82],"(",")",",",["T_WHITESPACE"," ",82],["T_VARIABLE","$data",82],")",")",";",["T_WHITESPACE","\n\n        ",82],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$data",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n",85],"}",["T_WHITESPACE","\n",86]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Sales",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","OrderInjectable",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Bundle",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","BundleProduct",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigurableProduct",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigurableProduct",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Customer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Fixture",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Customer",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Downloadable",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Test",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Fixture",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DownloadableProduct",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Test",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Fixture",13],["T_NS_SEPARATOR","\\",13],["T_STRING","OrderInjectable",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","SalesRule",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Test",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Fixture",14],["T_NS_SEPARATOR","\\",14],["T_STRING","SalesRule",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Mtf",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Fixture",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FixtureInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Mtf",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Handler",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Curl",16],["T_WHITESPACE"," ",16],["T_AS","as",16],["T_WHITESPACE"," ",16],["T_STRING","AbstractCurl",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Mtf",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Util",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Protocol",17],["T_NS_SEPARATOR","\\",17],["T_STRING","CurlTransport",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Mtf",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Util",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Protocol",18],["T_NS_SEPARATOR","\\",18],["T_STRING","CurlTransport",18],["T_NS_SEPARATOR","\\",18],["T_STRING","BackendDecorator",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * Create new order via curl.\n *\/",20],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","Curl",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","AbstractCurl",23],["T_WHITESPACE"," ",23],["T_IMPLEMENTS","implements",23],["T_WHITESPACE"," ",23],["T_STRING","OrderInjectableInterface",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * Customer fixture.\n     *\n     * @var Customer\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$customer",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Customer fixture.\n     *\n     * @var OrderInjectable\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$order",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$mappingData",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],"[",["T_WHITESPACE","\n        ",44],["T_CONSTANT_ENCAPSED_STRING","'region_id'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],"[",["T_WHITESPACE","\n            ",45],["T_CONSTANT_ENCAPSED_STRING","'California'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'12'",46],",",["T_WHITESPACE","\n        ",46],"]",",",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'country_id'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],"[",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'United States'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'US'",49],",",["T_WHITESPACE","\n        ",49],"]",",",["T_WHITESPACE","\n    ",50],"]",";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Steps for create order on backend.\n     *\n     * @var array\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$steps",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'customer_choice'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'header,data'",59],",",["T_WHITESPACE","\n        ",59],["T_CONSTANT_ENCAPSED_STRING","'products_choice'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'search,items,shipping_method,totals,giftmessage,billing_method'",60],",",["T_WHITESPACE","\n        ",60],["T_CONSTANT_ENCAPSED_STRING","'apply_coupon_code'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'items,shipping_method,totals,billing_method'",61],",",["T_WHITESPACE","\n        ",61],["T_CONSTANT_ENCAPSED_STRING","'shipping_data_address'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'shipping_method,billing_method,shipping_address,totals,giftmessage'",62],",",["T_WHITESPACE","\n        ",62],["T_CONSTANT_ENCAPSED_STRING","'shipping_data_method_get'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'shipping_method,totals'",63],",",["T_WHITESPACE","\n        ",63],["T_CONSTANT_ENCAPSED_STRING","'shipping_data_method_set'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'shipping_method,totals,billing_method'",64],",",["T_WHITESPACE","\n    ",64],"]",";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Post request for creating order.\n     *\n     * @param FixtureInterface|null $fixture [optional]\n     * @return array\n     *\/",67],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","persist",73],"(",["T_STRING","FixtureInterface",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$fixture",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","null",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","order",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$fixture",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","customer",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$fixture",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getDataFieldConfig",76],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",76],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",76],"]",["T_OBJECT_OPERATOR","->",76],["T_STRING","getCustomer",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$data",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","replaceMappingData",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","prepareData",77],"(",["T_VARIABLE","$fixture",77],")",")",";",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","createOrder",78],"(",["T_VARIABLE","$data",78],")","]",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Prepare POST data for creating product request.\n     *\n     * @param FixtureInterface $fixture\n     * @return array\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","prepareData",87],"(",["T_STRING","FixtureInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$fixture",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$result",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[","]",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$data",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$fixture",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getData",90],"(",")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$result",91],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_choice'",91],"]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","prepareCustomerData",91],"(",["T_VARIABLE","$data",91],")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$result",92],"[",["T_CONSTANT_ENCAPSED_STRING","'products_choice'",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","prepareProductsData",92],"(",["T_VARIABLE","$data",92],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",92],"]",")",";",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_ISSET","isset",93],"(",["T_VARIABLE","$data",93],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_code'",93],"]",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$result",94],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_coupon_code'",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","prepareCouponCode",94],"(",["T_VARIABLE","$data",94],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_code'",94],"]",")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$result",96],"[",["T_CONSTANT_ENCAPSED_STRING","'order_data'",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","prepareOrderData",96],"(",["T_VARIABLE","$data",96],")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$result",97],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_data_address'",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","prepareShippingData",97],"(",["T_VARIABLE","$result",97],"[",["T_CONSTANT_ENCAPSED_STRING","'order_data'",97],"]",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$result",98],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_data_method_get'",98],"]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[",["T_WHITESPACE","\n            ",98],["T_CONSTANT_ENCAPSED_STRING","'payment'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$data",99],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_auth_expiration'",99],"]",",",["T_WHITESPACE","\n            ",99],["T_CONSTANT_ENCAPSED_STRING","'collect_shipping_rates'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_LNUMBER","1",100],",",["T_WHITESPACE","\n        ",100],"]",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$result",102],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_data_method_set'",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],"[",["T_WHITESPACE","\n            ",102],["T_CONSTANT_ENCAPSED_STRING","'order'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$result",103],"[",["T_CONSTANT_ENCAPSED_STRING","'order_data'",103],"]","[",["T_CONSTANT_ENCAPSED_STRING","'order'",103],"]","[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",103],"]","]",",",["T_WHITESPACE","\n            ",103],["T_CONSTANT_ENCAPSED_STRING","'payment'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$data",104],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_auth_expiration'",104],"]",",",["T_WHITESPACE","\n        ",104],"]",";",["T_WHITESPACE","\n\n        ",105],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$result",107],";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Prepare coupon data.\n     *\n     * @param SalesRule $data\n     * @return array\n     *\/",110],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","prepareCouponCode",116],"(",["T_STRING","SalesRule",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$data",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$data",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getCouponCode",118],"(",")","]","]","]",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Prepare shipping data.\n     *\n     * @param array $data\n     * @return array\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","prepareShippingData",127],"(",["T_ARRAY","array",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$data",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$result",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],"[",["T_WHITESPACE","\n            ",129],["T_CONSTANT_ENCAPSED_STRING","'order'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],"[",["T_WHITESPACE","\n                ",130],["T_CONSTANT_ENCAPSED_STRING","'billing_address'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$data",131],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address'",131],"]",",",["T_WHITESPACE","\n            ",131],"]",",",["T_WHITESPACE","\n            ",132],["T_CONSTANT_ENCAPSED_STRING","'payment'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","order",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getPaymentAuthExpiration",133],"(",")",",",["T_WHITESPACE","\n            ",133],["T_CONSTANT_ENCAPSED_STRING","'reset_shipping'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_LNUMBER","1",134],",",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'shipping_as_billing'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_LNUMBER","1",135],",",["T_WHITESPACE","\n        ",135],"]",";",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$result",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Prepare products data.\n     *\n     * @param array $data\n     * @return array\n     *\/",140],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","prepareProductsData",146],"(",["T_ARRAY","array",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$data",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$result",148],"[",["T_CONSTANT_ENCAPSED_STRING","'item'",148],"]",["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],"[","]",";",["T_WHITESPACE","\n        ",148],["T_FOREACH","foreach",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$data",149],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",149],"]",["T_WHITESPACE"," ",149],["T_AS","as",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$value",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_VARIABLE","$value",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","hasData",150],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_data'",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_CONTINUE","continue",151],";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$methodName",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'prepare'",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_STRING","ucfirst",153],"(",["T_VARIABLE","$value",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getDataConfig",153],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",153],"]",")",["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'Data'",153],";",["T_WHITESPACE","\n            ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(","!",["T_STRING","method_exists",154],"(",["T_VARIABLE","$this",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$methodName",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$methodName",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'prepareSimpleData'",155],";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$result",157],"[",["T_CONSTANT_ENCAPSED_STRING","'item'",157],"]","[",["T_VARIABLE","$value",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getId",157],"(",")","]",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_VARIABLE","$methodName",157],"(",["T_VARIABLE","$value",157],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$result",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Prepare data for configurable product.\n     *\n     * @param ConfigurableProduct $product\n     * @return array\n     *\/",162],["T_WHITESPACE","\n    ",167],["T_PROTECTED","protected",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","prepareConfigurableData",168],"(",["T_STRING","ConfigurableProduct",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$product",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$result",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],"[","]",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$checkoutData",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$product",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getCheckoutData",171],"(",")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$result",172],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$checkoutData",172],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",172],"]",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$attributesData",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$product",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","hasData",173],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable_attributes_data'",173],")",["T_WHITESPACE","\n            ",173],"?",["T_WHITESPACE"," ",174],["T_VARIABLE","$product",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getDataFieldConfig",174],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable_attributes_data'",174],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",174],"]",["T_OBJECT_OPERATOR","->",174],["T_STRING","getAttributesData",174],"(",")",["T_WHITESPACE","\n            ",174],":",["T_WHITESPACE"," ",175],["T_STRING","null",175],";",["T_WHITESPACE","\n        ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$attributesData",176],["T_WHITESPACE"," ",176],["T_IS_EQUAL","==",176],["T_WHITESPACE"," ",176],["T_STRING","null",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$result",177],";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_FOREACH","foreach",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$checkoutData",179],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",179],"]","[",["T_CONSTANT_ENCAPSED_STRING","'configurable_options'",179],"]",["T_WHITESPACE"," ",179],["T_AS","as",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$option",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$attributeId",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$attributesData",180],"[",["T_VARIABLE","$option",180],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",180],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",180],"]",";",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$optionId",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$attributesData",181],"[",["T_VARIABLE","$option",181],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",181],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",181],"]","[",["T_VARIABLE","$option",181],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",181],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",181],"]",";",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$result",182],"[",["T_CONSTANT_ENCAPSED_STRING","'super_attribute'",182],"]","[",["T_VARIABLE","$attributeId",182],"]",["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$optionId",182],";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n\n        ",183],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$result",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Prepare data for bundle product.\n     *\n     * @param BundleProduct $product\n     * @return array\n     *\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",188],["T_WHITESPACE","\n    ",195],["T_PROTECTED","protected",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","prepareBundleData",196],"(",["T_STRING","BundleProduct",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$product",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$result",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],"[","]",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$checkoutData",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$product",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getCheckoutData",199],"(",")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$bundleOptions",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_ISSET","isset",200],"(",["T_VARIABLE","$checkoutData",200],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",200],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",200],"]",")",["T_WHITESPACE","\n            ",200],"?",["T_WHITESPACE"," ",201],["T_VARIABLE","$checkoutData",201],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",201],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",201],"]",["T_WHITESPACE","\n            ",201],":",["T_WHITESPACE"," ",202],"[","]",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$bundleSelections",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$product",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getBundleSelections",203],"(",")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$bundleSelectionsData",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],"[","]",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$result",205],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",205],"]",["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$checkoutData",205],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",205],"]",";",["T_WHITESPACE","\n\n        ",205],["T_FOREACH","foreach",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$bundleSelections",207],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",207],"]",["T_WHITESPACE"," ",207],["T_AS","as",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$option",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_FOREACH","foreach",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$option",208],"[",["T_CONSTANT_ENCAPSED_STRING","'assigned_products'",208],"]",["T_WHITESPACE"," ",208],["T_AS","as",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$productData",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$productName",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$productData",209],"[",["T_CONSTANT_ENCAPSED_STRING","'search_data'",209],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",209],"]",";",["T_WHITESPACE","\n                ",209],["T_VARIABLE","$bundleSelectionsData",210],"[",["T_VARIABLE","$productName",210],"]",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],"[",["T_WHITESPACE","\n                    ",210],["T_CONSTANT_ENCAPSED_STRING","'selection_id'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$productData",211],"[",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",211],"]",",",["T_WHITESPACE","\n                    ",211],["T_CONSTANT_ENCAPSED_STRING","'option_id'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$productData",212],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",212],"]",",",["T_WHITESPACE","\n                ",212],"]",";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_FOREACH","foreach",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$bundleOptions",217],["T_WHITESPACE"," ",217],["T_AS","as",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$option",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$productName",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$option",218],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",218],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",218],"]",";",["T_WHITESPACE","\n            ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$bundleSelectionsData",219],["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$fullProductName",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$value",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_STRING","null",220],["T_WHITESPACE"," ",220],["T_IS_NOT_IDENTICAL","!==",220],["T_WHITESPACE"," ",220],["T_STRING","strpos",220],"(",["T_VARIABLE","$fullProductName",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$productName",220],")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                    ",220],["T_VARIABLE","$productName",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$fullProductName",221],";",["T_WHITESPACE","\n                ",221],"}",["T_WHITESPACE","\n            ",222],"}",["T_WHITESPACE","\n\n            ",223],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_ISSET","isset",225],"(",["T_VARIABLE","$bundleSelectionsData",225],"[",["T_VARIABLE","$productName",225],"]",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$optionId",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$bundleSelectionsData",226],"[",["T_VARIABLE","$productName",226],"]","[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",226],"]",";",["T_WHITESPACE","\n                ",226],["T_VARIABLE","$selectionId",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$bundleSelectionsData",227],"[",["T_VARIABLE","$productName",227],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",227],"]",";",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$result",228],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_option'",228],"]","[",["T_VARIABLE","$optionId",228],"]",["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$selectionId",228],";",["T_WHITESPACE","\n            ",228],"}",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n\n        ",230],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$result",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Prepare data for downloadable product.\n     *\n     * @param DownloadableProduct $product\n     * @return array\n     *\/",235],["T_WHITESPACE","\n    ",240],["T_PROTECTED","protected",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","prepareDownloadableData",241],"(",["T_STRING","DownloadableProduct",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$product",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$result",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],"[","]",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$checkoutData",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$product",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getCheckoutData",244],"(",")",";",["T_WHITESPACE","\n        ",244],["T_FOREACH","foreach",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$checkoutData",245],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",245],"]","[",["T_CONSTANT_ENCAPSED_STRING","'links'",245],"]",["T_WHITESPACE"," ",245],["T_AS","as",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$link",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$result",246],"[",["T_CONSTANT_ENCAPSED_STRING","'links'",246],"]","[","]",["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$link",246],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",246],"]",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n\n        ",247],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$result",249],";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Prepare data for simple product.\n     *\n     * @param FixtureInterface $product\n     * @return array\n     *\/",252],["T_WHITESPACE","\n    ",257],["T_PROTECTED","protected",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","prepareSimpleData",258],"(",["T_STRING","FixtureInterface",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$product",258],")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$product",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getCheckoutData",260],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",260],"]","]",";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Prepare order data.\n     *\n     * @param array $data\n     * @return array\n     *\/",263],["T_WHITESPACE","\n    ",268],["T_PROTECTED","protected",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","prepareOrderData",269],"(",["T_ARRAY","array",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$data",269],")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$customerGroupId",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","customer",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","hasData",271],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",271],")",["T_WHITESPACE","\n            ",271],"?",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","customer",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getDataFieldConfig",272],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",272],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",272],"]",["T_OBJECT_OPERATOR","->",272],["T_STRING","getCustomerGroup",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","getCustomerGroupId",272],"(",")",["T_WHITESPACE","\n            ",272],":",["T_WHITESPACE"," ",273],["T_LNUMBER","1",273],";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$result",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],"[",["T_WHITESPACE","\n            ",274],["T_CONSTANT_ENCAPSED_STRING","'name'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","customer",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getFirstname",275],"(",")",",",["T_WHITESPACE","\n            ",275],["T_CONSTANT_ENCAPSED_STRING","'order'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],"[",["T_WHITESPACE","\n                ",276],["T_CONSTANT_ENCAPSED_STRING","'currency'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$data",277],"[",["T_CONSTANT_ENCAPSED_STRING","'order_currency_code'",277],"]",",",["T_WHITESPACE","\n                ",277],["T_CONSTANT_ENCAPSED_STRING","'account'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],"[",["T_WHITESPACE","\n                    ",278],["T_CONSTANT_ENCAPSED_STRING","'group_id'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$customerGroupId",279],",",["T_WHITESPACE","\n                    ",279],["T_CONSTANT_ENCAPSED_STRING","'email'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","customer",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getEmail",280],"(",")",",",["T_WHITESPACE","\n                ",280],"]",",",["T_WHITESPACE","\n                ",281],["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_ISSET","isset",282],"(",["T_VARIABLE","$data",282],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",282],"]",")",["T_WHITESPACE"," ",282],"?",["T_WHITESPACE"," ",282],["T_VARIABLE","$data",282],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",282],"]",["T_WHITESPACE"," ",282],":",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","''",282],",",["T_WHITESPACE","\n            ",282],"]",",",["T_WHITESPACE","\n            ",283],["T_CONSTANT_ENCAPSED_STRING","'item'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","prepareOrderProductsData",284],"(",["T_VARIABLE","$data",284],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",284],"]",")",",",["T_WHITESPACE","\n            ",284],["T_CONSTANT_ENCAPSED_STRING","'billing_address'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","prepareBillingAddress",285],"(",["T_VARIABLE","$data",285],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address_id'",285],"]",")",",",["T_WHITESPACE","\n            ",285],["T_CONSTANT_ENCAPSED_STRING","'shipping_same_as_billing'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'on'",286],",",["T_WHITESPACE","\n            ",286],["T_CONSTANT_ENCAPSED_STRING","'payment'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$data",287],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_auth_expiration'",287],"]",",",["T_WHITESPACE","\n\n        ",287],"]",";",["T_WHITESPACE","\n\n        ",289],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$result",291],";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Prepare customer data.\n     *\n     * @param array $data\n     * @return array\n     *\/",294],["T_WHITESPACE","\n    ",299],["T_PROTECTED","protected",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","prepareCustomerData",300],"(",["T_ARRAY","array",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$data",300],")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],"[",["T_WHITESPACE","\n            ",302],["T_CONSTANT_ENCAPSED_STRING","'currency_id'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$data",303],"[",["T_CONSTANT_ENCAPSED_STRING","'base_currency_code'",303],"]",",",["T_WHITESPACE","\n            ",303],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","customer",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getData",304],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",304],")",",",["T_WHITESPACE","\n            ",304],["T_CONSTANT_ENCAPSED_STRING","'payment'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$data",305],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_authorization_amount'",305],"]",",",["T_WHITESPACE","\n            ",305],["T_CONSTANT_ENCAPSED_STRING","'store_id'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","order",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getDataFieldConfig",306],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",306],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",306],"]",["T_OBJECT_OPERATOR","->",306],["T_STRING","store",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getStoreId",306],"(",")",["T_WHITESPACE","\n        ",306],"]",";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n\n    ",308],["T_DOC_COMMENT","\/**\n     * Prepare order products data.\n     *\n     * @param array $data\n     * @return array\n     *\/",310],["T_WHITESPACE","\n    ",315],["T_PROTECTED","protected",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","prepareOrderProductsData",316],"(",["T_ARRAY","array",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$data",316],")",["T_WHITESPACE","\n    ",316],"{",["T_WHITESPACE","\n        ",317],["T_VARIABLE","$result",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],"[","]",";",["T_WHITESPACE","\n        ",318],["T_FOREACH","foreach",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$data",319],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",319],"]",["T_WHITESPACE"," ",319],["T_AS","as",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$product",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_ISSET","isset",320],"(",["T_VARIABLE","$product",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getCheckoutData",320],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",320],"]",")",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n                ",320],["T_VARIABLE","$result",321],"[",["T_VARIABLE","$product",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getId",321],"(",")","]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$product",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getCheckoutData",321],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",321],"]","]","]",";",["T_WHITESPACE","\n            ",321],"}",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$result",325],";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_DOC_COMMENT","\/**\n     * Prepare billing address data.\n     *\n     * @param array $data\n     * @return array\n     *\/",328],["T_WHITESPACE","\n    ",333],["T_PROTECTED","protected",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","prepareBillingAddress",334],"(",["T_ARRAY","array",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$data",334],")",["T_WHITESPACE","\n    ",334],"{",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$result",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$data",336],";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$result",337],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",337],"]",["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","customer",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getFirstname",337],"(",")",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$result",338],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",338],"]",["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","customer",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getLastname",338],"(",")",";",["T_WHITESPACE","\n\n        ",338],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$result",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Create product via curl.\n     *\n     * @param array $data\n     * @return int|null\n     * @throws \\Exception\n     *\/",343],["T_WHITESPACE","\n    ",349],["T_PROTECTED","protected",350],["T_WHITESPACE"," ",350],["T_FUNCTION","function",350],["T_WHITESPACE"," ",350],["T_STRING","createOrder",350],"(",["T_ARRAY","array",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$data",350],")",["T_WHITESPACE","\n    ",350],"{",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$curl",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_NEW","new",352],["T_WHITESPACE"," ",352],["T_STRING","BackendDecorator",352],"(",["T_NEW","new",352],["T_WHITESPACE"," ",352],["T_STRING","CurlTransport",352],"(",")",",",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_configuration",352],")",";",["T_WHITESPACE","\n        ",352],["T_FOREACH","foreach",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","steps",353],["T_WHITESPACE"," ",353],["T_AS","as",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$key",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$step",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n            ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(","!",["T_ISSET","isset",354],"(",["T_VARIABLE","$data",354],"[",["T_VARIABLE","$key",354],"]",")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n                ",354],["T_CONTINUE","continue",355],";",["T_WHITESPACE","\n            ",355],"}",["T_WHITESPACE","\n            ",356],["T_VARIABLE","$url",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$_ENV",357],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",357],"]",["T_WHITESPACE"," ",357],".",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'sales\/order_create\/loadBlock\/block\/'",357],["T_WHITESPACE"," ",357],".",["T_WHITESPACE"," ",357],["T_VARIABLE","$step",357],["T_WHITESPACE"," ",357],".",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'?isAjax=true'",357],";",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$curl",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","write",358],"(",["T_VARIABLE","$url",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$data",358],"[",["T_VARIABLE","$key",358],"]",")",";",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$curl",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","read",359],"(",")",";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n        ",360],["T_VARIABLE","$url",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$_ENV",361],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",361],"]",["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'sales\/order_create\/save'",361],";",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$curl",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","addOption",362],"(",["T_STRING","CURLOPT_HEADER",362],",",["T_WHITESPACE"," ",362],["T_LNUMBER","1",362],")",";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$curl",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","write",363],"(",["T_VARIABLE","$url",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$data",363],"[",["T_CONSTANT_ENCAPSED_STRING","'order_data'",363],"]",")",";",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$response",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$curl",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","read",364],"(",")",";",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$curl",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","close",365],"(",")",";",["T_WHITESPACE","\n\n        ",365],["T_IF","if",367],["T_WHITESPACE"," ",367],"(","!",["T_STRING","strpos",367],"(",["T_VARIABLE","$response",367],",",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'data-ui-id=\"messages-message-success\"'",367],")",")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_THROW","throw",368],["T_WHITESPACE"," ",368],["T_NEW","new",368],["T_WHITESPACE"," ",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Exception",368],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Order creation by curl handler was not successful! Response: ",368],["T_VARIABLE","$response",368],"\"",")",";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n        ",369],["T_STRING","preg_match",370],"(",["T_CONSTANT_ENCAPSED_STRING","\"~<h1 class=\\\"page-title\\\">#(.*)<\/h1>~\"",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$response",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$matches",370],")",";",["T_WHITESPACE","\n\n        ",370],["T_RETURN","return",372],["T_WHITESPACE"," ",372],["T_ISSET","isset",372],"(",["T_VARIABLE","$matches",372],"[",["T_LNUMBER","1",372],"]",")",["T_WHITESPACE"," ",372],"?",["T_WHITESPACE"," ",372],["T_VARIABLE","$matches",372],"[",["T_LNUMBER","1",372],"]",["T_WHITESPACE"," ",372],":",["T_WHITESPACE"," ",372],["T_STRING","null",372],";",["T_WHITESPACE","\n    ",372],"}",["T_WHITESPACE","\n",373],"}",["T_WHITESPACE","\n",374]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigurableProduct",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigurableProduct",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogProductAttribute",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Handler",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogProductSimple",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Curl",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","ProductCurl",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ConfigurableProduct",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Fixture",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ConfigurableProduct",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ConfigurableAttributesData",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Fixture",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FixtureInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Config",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DataInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Mtf",14],["T_NS_SEPARATOR","\\",14],["T_STRING","System",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Event",14],["T_NS_SEPARATOR","\\",14],["T_STRING","EventManagerInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Create new configurable product via curl.\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","Curl",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","ProductCurl",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","ConfigurableProductInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @constructor\n     * @param DataInterface $configuration\n     * @param EventManagerInterface $eventManager\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","__construct",26],"(",["T_STRING","DataInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$configuration",26],",",["T_WHITESPACE"," ",26],["T_STRING","EventManagerInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$eventManager",26],")",["T_WHITESPACE","\n    ",26],"{",["T_WHITESPACE","\n        ",27],["T_STRING","parent",28],["T_DOUBLE_COLON","::",28],["T_STRING","__construct",28],"(",["T_VARIABLE","$configuration",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$eventManager",28],")",";",["T_WHITESPACE","\n\n        ",28],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","mappingData",30],["T_WHITESPACE"," ",30],["T_PLUS_EQUAL","+=",30],["T_WHITESPACE"," ",30],"[",["T_WHITESPACE","\n            ",30],["T_CONSTANT_ENCAPSED_STRING","'include'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],"[",["T_WHITESPACE","\n                ",31],["T_CONSTANT_ENCAPSED_STRING","'Yes'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_LNUMBER","1",32],",",["T_WHITESPACE","\n                ",32],["T_CONSTANT_ENCAPSED_STRING","'No'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_LNUMBER","0",33],",",["T_WHITESPACE","\n            ",33],"]",["T_WHITESPACE","\n        ",34],"]",";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Prepare POST data for creating product request.\n     *\n     * @param FixtureInterface $fixture\n     * @return array\n     *\/",38],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","prepareData",44],"(",["T_STRING","FixtureInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$fixture",44],")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$data",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","parent",46],["T_DOUBLE_COLON","::",46],["T_STRING","prepareData",46],"(",["T_VARIABLE","$fixture",46],")",";",["T_WHITESPACE","\n\n        ",46],["T_DOC_COMMENT","\/** @var ConfigurableAttributesData $configurableAttributesData *\/",48],["T_WHITESPACE","\n        ",48],["T_VARIABLE","$configurableAttributesData",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$fixture",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getDataFieldConfig",49],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable_attributes_data'",49],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",49],"]",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$attributeSetId",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$data",50],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",50],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",50],"]",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$data",52],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",52],"]","[",["T_CONSTANT_ENCAPSED_STRING","'configurable_attributes_data'",52],"]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","prepareAttributesData",52],"(",["T_VARIABLE","$configurableAttributesData",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$data",53],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable-matrix'",53],"]",["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","prepareConfigurableMatrix",53],"(",["T_VARIABLE","$fixture",53],")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$data",54],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",54],"]",["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","prepareAttributes",54],"(",["T_VARIABLE","$configurableAttributesData",54],")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'new-variations-attribute-set-id'",55],"]",["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$attributeSetId",55],";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$data",56],"[",["T_CONSTANT_ENCAPSED_STRING","'associated_product_ids'",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","prepareAssociatedProductIds",56],"(",["T_VARIABLE","$configurableAttributesData",56],")",";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","replaceMappingData",58],"(",["T_VARIABLE","$data",58],")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$data",59],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable-matrix-serialized'",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","json_encode",59],"(",["T_VARIABLE","$data",59],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable-matrix'",59],"]",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$data",60],"[",["T_CONSTANT_ENCAPSED_STRING","'associated_product_ids_serialized'",60],"]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","json_encode",60],"(",["T_VARIABLE","$data",60],"[",["T_CONSTANT_ENCAPSED_STRING","'associated_product_ids'",60],"]",")",";",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$data",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Preparation of websites data.\n     *\n     * @return void\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","prepareWebsites",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_EMPTY","empty",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","fields",71],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",71],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",71],"]",")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","fixture",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getDataFieldConfig",72],"(",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",72],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",72],"]",["T_OBJECT_OPERATOR","->",72],["T_STRING","getWebsites",72],"(",")",["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$key",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$website",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","fields",73],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",73],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",73],"]","[",["T_VARIABLE","$key",73],"]",["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$website",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getWebsiteId",73],"(",")",";",["T_WHITESPACE","\n            ",73],"}",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE"," ",75],["T_ELSE","else",75],["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$website",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Mtf",76],["T_NS_SEPARATOR","\\",76],["T_STRING","ObjectManagerFactory",76],["T_DOUBLE_COLON","::",76],["T_STRING","getObjectManager",76],"(",")",["T_WHITESPACE","\n                ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","create",77],"(",["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Store",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Test",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Fixture",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Website",77],["T_DOUBLE_COLON","::",77],["T_CLASS","class",77],",",["T_WHITESPACE"," ",77],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'default'",77],"]",")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","fields",78],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",78],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",78],"]","[","]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$website",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getWebsiteId",78],"(",")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Preparation of attribute set data.\n     *\n     * @return void\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","prepareAttributeSet",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_DOC_COMMENT","\/** @var ConfigurableAttributesData $configurableAttributesData *\/",89],["T_WHITESPACE","\n        ",89],["T_VARIABLE","$configurableAttributesData",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","fixture",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getDataFieldConfig",90],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable_attributes_data'",90],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",90],"]",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$attributeSet",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$configurableAttributesData",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getAttributeSet",91],"(",")",";",["T_WHITESPACE","\n\n        ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$attributeSet",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","fields",94],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",94],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$attributeSet",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getAttributeSetId",94],"(",")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE"," ",95],["T_ELSEIF","elseif",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","fixture",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","hasData",95],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",95],")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","fields",96],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",96],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","fixture",96],["T_WHITESPACE","\n                ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","getDataFieldConfig",97],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",97],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",97],"]",["T_WHITESPACE","\n                ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","getAttributeSet",98],"(",")",["T_WHITESPACE","\n                ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","getAttributeSetId",99],"(",")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE"," ",100],["T_ELSE","else",100],["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","fields",101],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",101],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Default'",101],";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Preparing attribute data.\n     *\n     * @param ConfigurableAttributesData $configurableAttributesData\n     * @return array\n     *\/",105],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","prepareAttributesData",111],"(",["T_STRING","ConfigurableAttributesData",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$configurableAttributesData",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$optionFields",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],"[",["T_WHITESPACE","\n            ",113],["T_CONSTANT_ENCAPSED_STRING","'pricing_value'",114],",",["T_WHITESPACE","\n            ",114],["T_CONSTANT_ENCAPSED_STRING","'include'",115],",",["T_WHITESPACE","\n        ",115],"]",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$result",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],"[","]",";",["T_WHITESPACE","\n\n        ",117],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$configurableAttributesData",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getAttributesData",119],"(",")",["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$attribute",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$attributeId",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ISSET","isset",120],"(",["T_VARIABLE","$attribute",120],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",120],"]",")",["T_WHITESPACE"," ",120],"?",["T_WHITESPACE"," ",120],["T_VARIABLE","$attribute",120],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",120],"]",["T_WHITESPACE"," ",120],":",["T_WHITESPACE"," ",120],["T_STRING","null",120],";",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$dataOptions",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],"[","]",";",["T_WHITESPACE","\n\n            ",121],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$attribute",123],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",123],"]",["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$option",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$optionId",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ISSET","isset",124],"(",["T_VARIABLE","$option",124],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",124],"]",")",["T_WHITESPACE"," ",124],"?",["T_WHITESPACE"," ",124],["T_VARIABLE","$option",124],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",124],"]",["T_WHITESPACE"," ",124],":",["T_WHITESPACE"," ",124],["T_STRING","null",124],";",["T_WHITESPACE","\n\n                ",124],["T_VARIABLE","$dataOption",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","array_intersect_key",126],"(",["T_VARIABLE","$option",126],",",["T_WHITESPACE"," ",126],["T_STRING","array_flip",126],"(",["T_VARIABLE","$optionFields",126],")",")",";",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$dataOption",127],"[",["T_CONSTANT_ENCAPSED_STRING","'value_index'",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$optionId",127],";",["T_WHITESPACE","\n\n                ",127],["T_VARIABLE","$dataOptions",129],"[",["T_VARIABLE","$optionId",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$dataOption",129],";",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n\n            ",130],["T_VARIABLE","$result",132],"[",["T_VARIABLE","$attributeId",132],"]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],"[",["T_WHITESPACE","\n                ",132],["T_CONSTANT_ENCAPSED_STRING","'code'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$attribute",133],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",133],"]",",",["T_WHITESPACE","\n                ",133],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$attributeId",134],",",["T_WHITESPACE","\n                ",134],["T_CONSTANT_ENCAPSED_STRING","'label'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$attribute",135],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",135],"]",",",["T_WHITESPACE","\n                ",135],["T_CONSTANT_ENCAPSED_STRING","'values'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$dataOptions",136],",",["T_WHITESPACE","\n            ",136],"]",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$result",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Preparing matrix data.\n     *\n     * @param FixtureInterface $product\n     * @return array\n     *\/",143],["T_WHITESPACE","\n    ",148],["T_PROTECTED","protected",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","prepareConfigurableMatrix",149],"(",["T_STRING","FixtureInterface",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$product",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_DOC_COMMENT","\/** @var ConfigurableAttributesData $configurableAttributesData *\/",151],["T_WHITESPACE","\n        ",151],["T_VARIABLE","$configurableAttributesData",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$product",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getDataFieldConfig",152],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable_attributes_data'",152],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",152],"]",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$attributesData",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$configurableAttributesData",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getAttributesData",153],"(",")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$assignedProducts",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$configurableAttributesData",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getProducts",154],"(",")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$matrixData",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$product",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getConfigurableAttributesData",155],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'matrix'",155],"]",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$result",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],"[","]",";",["T_WHITESPACE","\n\n        ",156],["T_FOREACH","foreach",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$matrixData",158],["T_WHITESPACE"," ",158],["T_AS","as",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$variationKey",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$variation",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_COMMENT","\/\/ For assigned products doesn't send data about them\n",159],["T_WHITESPACE","            ",160],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_ISSET","isset",160],"(",["T_VARIABLE","$assignedProducts",160],"[",["T_VARIABLE","$variationKey",160],"]",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                ",160],["T_CONTINUE","continue",161],";",["T_WHITESPACE","\n            ",161],"}",["T_WHITESPACE","\n\n            ",162],["T_VARIABLE","$compositeKeys",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","explode",164],"(",["T_CONSTANT_ENCAPSED_STRING","' '",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$variationKey",164],")",";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$keyIds",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],"[","]",";",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$configurableAttribute",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],"[","]",";",["T_WHITESPACE","\n\n            ",166],["T_FOREACH","foreach",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$compositeKeys",168],["T_WHITESPACE"," ",168],["T_AS","as",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$compositeKey",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                ",168],["T_LIST","list",169],"(",["T_VARIABLE","$attributeKey",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$optionKey",169],")",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","explode",169],"(",["T_CONSTANT_ENCAPSED_STRING","':'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$compositeKey",169],")",";",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$attribute",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$attributesData",170],"[",["T_VARIABLE","$attributeKey",170],"]",";",["T_WHITESPACE","\n\n                ",170],["T_VARIABLE","$keyIds",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$attribute",172],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",172],"]","[",["T_VARIABLE","$optionKey",172],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",172],"]",";",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$configurableAttribute",173],"[","]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","sprintf",173],"(",["T_WHITESPACE","\n                    ",173],["T_CONSTANT_ENCAPSED_STRING","'\"%s\":\"%s\"'",174],",",["T_WHITESPACE","\n                    ",174],["T_ISSET","isset",175],"(",["T_VARIABLE","$attribute",175],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",175],"]",")",["T_WHITESPACE"," ",175],"?",["T_WHITESPACE"," ",175],["T_VARIABLE","$attribute",175],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",175],"]",["T_WHITESPACE"," ",175],":",["T_WHITESPACE"," ",175],["T_VARIABLE","$attribute",175],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",175],"]",",",["T_WHITESPACE","\n                    ",175],["T_VARIABLE","$attribute",176],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",176],"]","[",["T_VARIABLE","$optionKey",176],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",176],"]",["T_WHITESPACE","\n                ",176],")",";",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE","\n\n            ",178],["T_VARIABLE","$keyIds",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","implode",180],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$keyIds",180],")",";",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$variation",181],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable_attribute'",181],"]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'{'",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_STRING","implode",181],"(",["T_CONSTANT_ENCAPSED_STRING","','",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$configurableAttribute",181],")",["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'}'",181],";",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$variation",182],"[",["T_CONSTANT_ENCAPSED_STRING","'variationKey'",182],"]",["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$keyIds",182],";",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$variation",183],"[",["T_CONSTANT_ENCAPSED_STRING","'newProduct'",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_LNUMBER","1",183],";",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$variation",184],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",184],"]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_LNUMBER","1",184],";",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$result",185],"[",["T_VARIABLE","$keyIds",185],"]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$variation",185],";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$result",188],";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Prepare attributes.\n     *\n     * @param ConfigurableAttributesData $configurableAttributesData\n     * @return array\n     *\/",191],["T_WHITESPACE","\n    ",196],["T_PROTECTED","protected",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","prepareAttributes",197],"(",["T_STRING","ConfigurableAttributesData",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$configurableAttributesData",197],")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$ids",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],"[","]",";",["T_WHITESPACE","\n\n        ",199],["T_FOREACH","foreach",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$configurableAttributesData",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getAttributes",201],"(",")",["T_WHITESPACE"," ",201],["T_AS","as",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$attribute",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_DOC_COMMENT","\/** @var CatalogProductAttribute $attribute *\/",202],["T_WHITESPACE","\n            ",202],["T_VARIABLE","$ids",203],"[","]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$attribute",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getAttributeId",203],"(",")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$ids",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Prepare associated product ids.\n     *\n     * @param ConfigurableAttributesData $configurableAttributesData\n     * @return array\n     *\/",208],["T_WHITESPACE","\n    ",213],["T_PROTECTED","protected",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","prepareAssociatedProductIds",214],"(",["T_STRING","ConfigurableAttributesData",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$configurableAttributesData",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$productIds",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],"[","]",";",["T_WHITESPACE","\n\n        ",216],["T_FOREACH","foreach",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$configurableAttributesData",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getProducts",218],"(",")",["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$product",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$productIds",219],"[","]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$product",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getId",219],"(",")",";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n\n        ",220],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$productIds",222],";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n",223],"}",["T_WHITESPACE","\n",224]]
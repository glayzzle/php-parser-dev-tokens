[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Bundle",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Fixture",7],["T_NS_SEPARATOR","\\",7],["T_STRING","BundleProduct",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Mtf",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DataSource",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Mtf",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FixtureFactory",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Mtf",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Fixture",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FixtureInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Repository",12],["T_NS_SEPARATOR","\\",12],["T_STRING","RepositoryFactory",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Prepare bundle selection items.\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","BundleSelections",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","DataSource",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * Repository factory instance.\n     *\n     * @var RepositoryFactory\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$repositoryFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Fixture factory instance.\n     *\n     * @var RepositoryFactory\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$fixtureFactory",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @constructor\n     * @param RepositoryFactory $repositoryFactory\n     * @param FixtureFactory $fixtureFactory\n     * @param array $data\n     * @param array $params [optional]\n     *\/",33],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",["T_WHITESPACE","\n        ",40],["T_STRING","RepositoryFactory",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$repositoryFactory",41],",",["T_WHITESPACE","\n        ",41],["T_STRING","FixtureFactory",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$fixtureFactory",42],",",["T_WHITESPACE","\n        ",42],["T_ARRAY","array",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$data",43],",",["T_WHITESPACE","\n        ",43],["T_ARRAY","array",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$params",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],"[","]",["T_WHITESPACE","\n    ",44],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","repositoryFactory",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$repositoryFactory",46],";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","fixtureFactory",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$fixtureFactory",47],";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","params",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$params",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","data",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"!",["T_ISSET","isset",49],"(",["T_VARIABLE","$data",49],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",49],"]",")",["T_WHITESPACE"," ",49],"?",["T_WHITESPACE"," ",49],["T_VARIABLE","$data",49],["T_WHITESPACE"," ",49],":",["T_WHITESPACE"," ",49],"[","]",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getDataset",50],"(",["T_VARIABLE","$data",50],")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","prepareProducts",51],"(",")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Get dataset for a field.\n     *\n     * @param array $data\n     * @return void\n     *\/",54],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","getDataset",60],"(",["T_ARRAY","array",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$data",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_ISSET","isset",62],"(",["T_VARIABLE","$data",62],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",62],"]",")",["T_WHITESPACE"," ",62],["T_BOOLEAN_AND","&&",62],["T_WHITESPACE"," ",62],["T_ISSET","isset",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","params",62],"[",["T_CONSTANT_ENCAPSED_STRING","'repository'",62],"]",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","data",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","repositoryFactory",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","get",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","params",63],"[",["T_CONSTANT_ENCAPSED_STRING","'repository'",63],"]",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","get",63],"(",["T_VARIABLE","$data",63],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",63],"]",")",";",["T_WHITESPACE","\n            ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(","!",["T_EMPTY","empty",64],"(",["T_VARIABLE","$data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",64],"]",")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n                ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","data",65],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",65],"]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"[","]",";",["T_WHITESPACE","\n                ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","data",66],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",66],"]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","explode",66],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$data",66],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",66],"]",")",";",["T_WHITESPACE","\n                ",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","data",67],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",67],"]",["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$key",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$products",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","data",68],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",68],"]","[",["T_VARIABLE","$key",68],"]",["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","explode",68],"(",["T_CONSTANT_ENCAPSED_STRING","','",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$products",68],")",";",["T_WHITESPACE","\n                ",68],"}",["T_WHITESPACE","\n            ",69],"}",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Prepare products for bundle items.\n     *\n     * @return void\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","prepareProducts",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_EMPTY","empty",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","data",81],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",81],"]",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$productsSelections",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","data",82],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",82],"]",";",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","data",83],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[","]",";",["T_WHITESPACE","\n            ",83],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$productsSelections",84],["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$index",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$products",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$productSelection",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],"[","]",";",["T_WHITESPACE","\n                ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$products",86],["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$key",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$product",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                    ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$product",87],["T_WHITESPACE"," ",87],["T_INSTANCEOF","instanceof",87],["T_WHITESPACE"," ",87],["T_STRING","FixtureInterface",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                        ",87],["T_VARIABLE","$productSelection",88],"[",["T_VARIABLE","$key",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$product",88],";",["T_WHITESPACE","\n                        ",88],["T_CONTINUE","continue",89],";",["T_WHITESPACE","\n                    ",89],"}",["T_WHITESPACE","\n                    ",90],["T_LIST","list",91],"(",["T_VARIABLE","$fixture",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$dataset",91],")",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","explode",91],"(",["T_CONSTANT_ENCAPSED_STRING","'::'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$product",91],")",";",["T_WHITESPACE","\n                    ",91],["T_VARIABLE","$productSelection",92],"[",["T_VARIABLE","$key",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","fixtureFactory",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","createByCode",92],"(",["T_VARIABLE","$fixture",92],",",["T_WHITESPACE"," ",92],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$dataset",92],"]",")",";",["T_WHITESPACE","\n                    ",92],["T_VARIABLE","$productSelection",93],"[",["T_VARIABLE","$key",93],"]",["T_OBJECT_OPERATOR","->",93],["T_STRING","persist",93],"(",")",";",["T_WHITESPACE","\n                    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","data",94],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",94],"]","[",["T_VARIABLE","$index",94],"]","[",["T_CONSTANT_ENCAPSED_STRING","'assigned_products'",94],"]","[",["T_VARIABLE","$key",94],"]","[",["T_CONSTANT_ENCAPSED_STRING","'search_data'",94],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE","\n                        ",94],["T_VARIABLE","$productSelection",95],"[",["T_VARIABLE","$key",95],"]",["T_OBJECT_OPERATOR","->",95],["T_STRING","getName",95],"(",")",";",["T_WHITESPACE","\n                ",95],"}",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","data",97],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",97],"]","[","]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$productSelection",97],";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Get products from bundle items.\n     *\n     * @return array\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getProducts",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","data",109],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",109],"]",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n",110],"}",["T_WHITESPACE","\n",111]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Fixture",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Mtf",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DataSource",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Mtf",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FixtureFactory",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Mtf",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Repository",11],["T_NS_SEPARATOR","\\",11],["T_STRING","RepositoryFactory",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Custom options fixture.\n *\n * Data keys:\n *  - dataset (Custom options dataset name)\n *  - import_products (comma separated data set name)\n *\/",13],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","CustomOptions",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","DataSource",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * Custom options data.\n     *\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$customOptions",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @constructor\n     * @param RepositoryFactory $repositoryFactory\n     * @param FixtureFactory|null $fixtureFactory\n     * @param array $params\n     * @param array $data\n     *\/",29],["T_WHITESPACE","\n    ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","__construct",36],"(",["T_WHITESPACE","\n        ",36],["T_STRING","RepositoryFactory",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$repositoryFactory",37],",",["T_WHITESPACE","\n        ",37],["T_STRING","FixtureFactory",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$fixtureFactory",38],",",["T_WHITESPACE","\n        ",38],["T_ARRAY","array",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$params",39],",",["T_WHITESPACE","\n        ",39],["T_ARRAY","array",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$data",40],["T_WHITESPACE","\n    ",40],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","params",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$params",42],";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","data",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],"(","!",["T_ISSET","isset",43],"(",["T_VARIABLE","$data",43],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",43],"]",")",["T_WHITESPACE"," ",43],["T_BOOLEAN_AND","&&",43],["T_WHITESPACE"," ",43],"!",["T_ISSET","isset",43],"(",["T_VARIABLE","$data",43],"[",["T_CONSTANT_ENCAPSED_STRING","'import_products'",43],"]",")",")",["T_WHITESPACE"," ",43],"?",["T_WHITESPACE"," ",43],["T_VARIABLE","$data",43],["T_WHITESPACE"," ",43],":",["T_WHITESPACE"," ",43],"[","]",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","customOptions",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","data",44],";",["T_WHITESPACE","\n\n        ",44],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_ISSET","isset",46],"(",["T_VARIABLE","$data",46],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",46],"]",")",["T_WHITESPACE"," ",46],["T_BOOLEAN_AND","&&",46],["T_WHITESPACE"," ",46],["T_ISSET","isset",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","params",46],"[",["T_CONSTANT_ENCAPSED_STRING","'repository'",46],"]",")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","data",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$repositoryFactory",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","get",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","params",47],"[",["T_CONSTANT_ENCAPSED_STRING","'repository'",47],"]",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","get",47],"(",["T_VARIABLE","$data",47],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",47],"]",")",";",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","data",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","replaceData",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","data",48],",",["T_WHITESPACE"," ",48],["T_STRING","mt_rand",48],"(",")",")",";",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","customOptions",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","data",49],";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_ISSET","isset",51],"(",["T_VARIABLE","$data",51],"[",["T_CONSTANT_ENCAPSED_STRING","'import_products'",51],"]",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$importData",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","explode",52],"(",["T_CONSTANT_ENCAPSED_STRING","','",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$data",52],"[",["T_CONSTANT_ENCAPSED_STRING","'import_products'",52],"]",")",";",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$importCustomOptions",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],"[","]",";",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$importProducts",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",";",["T_WHITESPACE","\n            ",54],["T_FOREACH","foreach",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$importData",55],["T_WHITESPACE"," ",55],["T_AS","as",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$item",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                ",55],["T_LIST","list",56],"(",["T_VARIABLE","$fixture",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$dataset",56],")",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","explode",56],"(",["T_CONSTANT_ENCAPSED_STRING","'::'",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$item",56],")",";",["T_WHITESPACE","\n                ",56],["T_VARIABLE","$product",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$fixtureFactory",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","createByCode",57],"(",["T_VARIABLE","$fixture",57],",",["T_WHITESPACE"," ",57],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$dataset",57],"]",")",";",["T_WHITESPACE","\n                ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$product",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","hasData",58],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",58],")",["T_WHITESPACE"," ",58],["T_IS_NOT_IDENTICAL","!==",58],["T_WHITESPACE"," ",58],["T_STRING","null",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n                    ",58],["T_VARIABLE","$product",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","persist",59],"(",")",";",["T_WHITESPACE","\n                ",59],"}",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$importCustomOptions",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","array_merge",61],"(",["T_VARIABLE","$importCustomOptions",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$product",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getCustomOptions",61],"(",")",")",";",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$importProducts",62],"[","]",["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$product",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getSku",62],"(",")",";",["T_WHITESPACE","\n            ",62],"}",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","customOptions",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","array_merge",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","data",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$importCustomOptions",64],")",";",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","data",65],"[",["T_CONSTANT_ENCAPSED_STRING","'import'",65],"]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$importCustomOptions",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'products'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$importProducts",65],"]",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Replace custom options data.\n     *\n     * @param array $data\n     * @param int $replace\n     * @return array\n     *\/",69],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","replaceData",76],"(",["T_ARRAY","array",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$data",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$replace",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$result",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[","]",";",["T_WHITESPACE","\n        ",78],["T_FOREACH","foreach",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$data",79],["T_WHITESPACE"," ",79],["T_AS","as",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$key",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$value",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_STRING","is_array",80],"(",["T_VARIABLE","$value",80],")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                ",80],["T_VARIABLE","$value",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","replaceData",81],"(",["T_VARIABLE","$value",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$replace",81],")",";",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$result",83],"[",["T_VARIABLE","$key",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","str_replace",83],"(",["T_CONSTANT_ENCAPSED_STRING","'%isolation%'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$replace",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$value",83],")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$result",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Return all custom options.\n     *\n     * @return array\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","getCustomOptions",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","customOptions",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n",97],"}",["T_WHITESPACE","\n",98]]
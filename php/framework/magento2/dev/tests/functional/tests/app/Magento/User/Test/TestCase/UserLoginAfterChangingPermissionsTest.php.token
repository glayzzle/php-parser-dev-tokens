[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","User",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TestCase",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Backend",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Page",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Adminhtml",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Dashboard",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","User",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Role",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","User",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Fixture",11],["T_NS_SEPARATOR","\\",11],["T_STRING","User",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","User",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Test",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Page",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Adminhtml",12],["T_NS_SEPARATOR","\\",12],["T_STRING","UserEdit",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","User",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Test",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Page",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Adminhtml",13],["T_NS_SEPARATOR","\\",13],["T_STRING","UserIndex",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","User",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Test",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Page",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Adminhtml",14],["T_NS_SEPARATOR","\\",14],["T_STRING","UserRoleEditRole",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","User",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Test",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Page",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Adminhtml",15],["T_NS_SEPARATOR","\\",15],["T_STRING","UserRoleIndex",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Mtf",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Fixture",16],["T_NS_SEPARATOR","\\",16],["T_STRING","FixtureFactory",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Mtf",17],["T_NS_SEPARATOR","\\",17],["T_STRING","TestCase",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Injectable",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Test that user can login from the first attempt just after his permissions were changed.\n *\n * Test Flow:\n * 1. Log in as default admin user\n * 2. Go to System>Permissions>User Roles\n * 3. Press \"+\" button to start create New Role\n * 4. Fill in all data according to data set\n * 5. Save role\n * 6. Go to System-Permissions-All Users\n * 7. Press \"+\" button to start create new admin user\n * 8. Fill in all data according to data set\n * 9. Save user\n * 10. Go to System>Permissions>User Roles\n * 11. Open created role, and change permissions to 'all'\n * 12. Log out\n * 13. Log in using new admin user (before the bug was fixed, it was impossible to log in from the first attempt)\n * 14. Perform assertions\n *\n * @group ACL\n * @ZephyrId MAGETWO-28828\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",19],["T_WHITESPACE","\n",41],["T_CLASS","class",42],["T_WHITESPACE"," ",42],["T_STRING","UserLoginAfterChangingPermissionsTest",42],["T_WHITESPACE"," ",42],["T_EXTENDS","extends",42],["T_WHITESPACE"," ",42],["T_STRING","Injectable",42],["T_WHITESPACE","\n",42],"{",["T_WHITESPACE","\n    ",43],["T_COMMENT","\/* tags *\/",44],["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","MVP",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'no'",45],";",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/* end tags *\/",46],["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * User edit page\n     *\n     * @var UserRoleIndex\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$userRoleIndex",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Role edit page\n     *\n     * @var UserRoleEditRole\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$userRoleEditRole",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * User grid page\n     *\n     * @var UserIndex\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$userIndexPage",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * User new\/edit page\n     *\n     * @var UserEdit\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$userEditPage",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Dashboard panel\n     *\n     * @var Dashboard\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$dashboard",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Factory for Fixtures\n     *\n     * @var FixtureFactory\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$fixtureFactory",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Preconditions for test\n     *\n     * @param FixtureFactory $fixtureFactory\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","__prepare",95],"(",["T_STRING","FixtureFactory",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$fixtureFactory",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","fixtureFactory",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$fixtureFactory",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Setup necessary data for test\n     *\n     * @param UserIndex $userIndex\n     * @param UserEdit $userEdit\n     * @param UserRoleIndex $userRoleIndex\n     * @param UserRoleEditRole $userRoleEditRole\n     * @param Dashboard $dashboard\n     * @return void\n     *\/",100],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","__inject",110],"(",["T_WHITESPACE","\n        ",110],["T_STRING","UserIndex",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$userIndex",111],",",["T_WHITESPACE","\n        ",111],["T_STRING","UserEdit",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$userEdit",112],",",["T_WHITESPACE","\n        ",112],["T_STRING","UserRoleIndex",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$userRoleIndex",113],",",["T_WHITESPACE","\n        ",113],["T_STRING","UserRoleEditRole",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$userRoleEditRole",114],",",["T_WHITESPACE","\n        ",114],["T_STRING","Dashboard",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$dashboard",115],["T_WHITESPACE","\n    ",115],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","userIndexPage",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$userIndex",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","userEditPage",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$userEdit",118],";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","userRoleIndex",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$userRoleIndex",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","userRoleEditRole",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$userRoleEditRole",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","dashboard",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$dashboard",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * @param Role $role\n     * @param Role $updatedRole\n     * @param User $user\n     * @return void\n     *\/",124],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","testLoginAfterChangingPermissions",130],"(",["T_WHITESPACE","\n        ",130],["T_STRING","Role",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$role",131],",",["T_WHITESPACE","\n        ",131],["T_STRING","Role",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$updatedRole",132],",",["T_WHITESPACE","\n        ",132],["T_STRING","User",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$user",133],["T_WHITESPACE","\n    ",133],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n        ",134],["T_DOC_COMMENT","\/** Create role and a new user with this role *\/",135],["T_WHITESPACE","\n        ",135],["T_VARIABLE","$role",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","persist",136],"(",")",";",["T_WHITESPACE","\n        ",136],["T_DOC_COMMENT","\/** @var User $user *\/",137],["T_WHITESPACE","\n        ",137],["T_VARIABLE","$user",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","fixtureFactory",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","create",138],"(",["T_WHITESPACE","\n            ",138],["T_NS_SEPARATOR","\\",139],["T_STRING","Magento",139],["T_NS_SEPARATOR","\\",139],["T_STRING","User",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Test",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Fixture",139],["T_NS_SEPARATOR","\\",139],["T_STRING","User",139],["T_DOUBLE_COLON","::",139],["T_CLASS","class",139],",",["T_WHITESPACE","\n            ",139],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_STRING","array_merge",140],"(",["T_VARIABLE","$user",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getData",140],"(",")",",",["T_WHITESPACE"," ",140],"[",["T_CONSTANT_ENCAPSED_STRING","'role_id'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],"[",["T_CONSTANT_ENCAPSED_STRING","'role'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$role",140],"]","]",")","]",["T_WHITESPACE","\n        ",140],")",";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$user",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","persist",142],"(",")",";",["T_WHITESPACE","\n\n        ",142],["T_DOC_COMMENT","\/** Change the scope of resources available for the role created earlier *\/",144],["T_WHITESPACE","\n        ",144],["T_VARIABLE","$filter",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],"[",["T_CONSTANT_ENCAPSED_STRING","'rolename'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$role",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getRoleName",145],"(",")","]",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","userRoleIndex",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","open",146],"(",")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","userRoleIndex",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getRoleGrid",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","searchAndOpen",147],"(",["T_VARIABLE","$filter",147],")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","userRoleEditRole",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getRoleFormTabs",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","fill",148],"(",["T_VARIABLE","$updatedRole",148],")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","userRoleEditRole",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getPageActions",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","save",149],"(",")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","dashboard",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getAdminPanelHeader",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","logOut",150],"(",")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n",151],"}",["T_WHITESPACE","\n",152]]
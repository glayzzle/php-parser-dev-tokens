[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Backend",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Mtf",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Handler",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Curl",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Class Conditions\n * Curl class for fixture with conditions\n *\n * Format value of conditions.\n * Add slash to symbols: \"{\", \"}\", \"[\", \"]\", \":\".\n * 1. Single condition:\n * [Type|Param|Param|...|Param]\n * 2. List conditions:\n * [Type|Param|Param|...|Param]\n * [Type|Param|Param|...|Param]\n * [Type|Param|Param|...|Param]\n * 3. Combination condition with single condition\n * {Type|Param|Param|...|Param:[Type|Param|Param|...|Param]}\n * 4. Combination condition with list conditions\n * {Type|Param|Param|...|Param:[[Type|Param|...|Param][Type|Param|...|Param]...[Type|Param|...|Param]]}\n *\n * Example value:\n * {Products subselection|total amount|greater than|135|ANY:[[Price in cart|is|100][Quantity in cart|is|100]]}\n * {Conditions combination:[\n *     [Subtotal|is|100]\n *     {Product attribute combination|NOT FOUND|ANY:[[Attribute Set|is|Default][Attribute Set|is|Default]]}\n * ]}\n *\/",11],["T_WHITESPACE","\n",34],["T_ABSTRACT","abstract",35],["T_WHITESPACE"," ",35],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Conditions",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Curl",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Map of type parameter\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$mapTypeParams",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],"[","]",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Map of rule parameters\n     *\n     * @var array\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$mapRuleParams",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'operator'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],"[",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'is'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'=='",51],",",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'is not'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'!='",52],",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'equal to'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'=='",53],",",["T_WHITESPACE","\n            ",53],["T_CONSTANT_ENCAPSED_STRING","'matches'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'=='",54],",",["T_WHITESPACE","\n            ",54],["T_CONSTANT_ENCAPSED_STRING","'greater than'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'>'",55],",",["T_WHITESPACE","\n            ",55],["T_CONSTANT_ENCAPSED_STRING","'equals or greater than'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'>='",56],",",["T_WHITESPACE","\n        ",56],"]",",",["T_WHITESPACE","\n        ",57],["T_CONSTANT_ENCAPSED_STRING","'value_type'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],"[",["T_WHITESPACE","\n            ",58],["T_CONSTANT_ENCAPSED_STRING","'same_as'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'the Same as Matched Product Categories'",59],",",["T_WHITESPACE","\n        ",59],"]",",",["T_WHITESPACE","\n        ",60],["T_CONSTANT_ENCAPSED_STRING","'value'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],"[",["T_WHITESPACE","\n            ",61],["T_CONSTANT_ENCAPSED_STRING","'California'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'12'",62],",",["T_WHITESPACE","\n            ",62],["T_CONSTANT_ENCAPSED_STRING","'United States'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'US'",63],",",["T_WHITESPACE","\n            ",63],["T_CONSTANT_ENCAPSED_STRING","'[flatrate] Fixed'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'flatrate_flatrate'",64],",",["T_WHITESPACE","\n            ",64],["T_CONSTANT_ENCAPSED_STRING","'FOUND'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'1'",65],",",["T_WHITESPACE","\n            ",65],["T_CONSTANT_ENCAPSED_STRING","'TRUE'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'1'",66],",",["T_WHITESPACE","\n        ",66],"]",",",["T_WHITESPACE","\n        ",67],["T_CONSTANT_ENCAPSED_STRING","'aggregator'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],"[",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'ALL'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'all'",69],",",["T_WHITESPACE","\n            ",69],["T_CONSTANT_ENCAPSED_STRING","'ANY'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'any'",70],",",["T_WHITESPACE","\n        ",70],"]",",",["T_WHITESPACE","\n        ",71],["T_CONSTANT_ENCAPSED_STRING","'attribute'",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],"[",["T_WHITESPACE","\n            ",72],["T_CONSTANT_ENCAPSED_STRING","'total quantity'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'qty'",73],",",["T_WHITESPACE","\n        ",73],"]",",",["T_WHITESPACE","\n    ",74],"]",";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Map encode special chars\n     *\n     * @var array\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$encodeChars",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],"[",["T_WHITESPACE","\n        ",82],["T_CONSTANT_ENCAPSED_STRING","'\\{'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'&lbrace;'",83],",",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'\\}'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'&rbrace;'",84],",",["T_WHITESPACE","\n        ",84],["T_CONSTANT_ENCAPSED_STRING","'\\['",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'&lbracket;'",85],",",["T_WHITESPACE","\n        ",85],["T_CONSTANT_ENCAPSED_STRING","'\\]'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'&rbracket;'",86],",",["T_WHITESPACE","\n        ",86],["T_CONSTANT_ENCAPSED_STRING","'\\:'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'&colon;'",87],",",["T_WHITESPACE","\n    ",87],"]",";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Map decode special chars\n     *\n     * @var array\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$decodeChars",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'&lbrace;'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'{'",96],",",["T_WHITESPACE","\n        ",96],["T_CONSTANT_ENCAPSED_STRING","'&rbrace;'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'}'",97],",",["T_WHITESPACE","\n        ",97],["T_CONSTANT_ENCAPSED_STRING","'&lbracket;'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'['",98],",",["T_WHITESPACE","\n        ",98],["T_CONSTANT_ENCAPSED_STRING","'&rbracket;'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","']'",99],",",["T_WHITESPACE","\n        ",99],["T_CONSTANT_ENCAPSED_STRING","'&colon;'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","':'",100],",",["T_WHITESPACE","\n    ",100],"]",";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Prepare conditions to array for send by post request\n     *\n     * @param string $conditions\n     * @return array\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","prepareCondition",109],"(",["T_VARIABLE","$conditions",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$decodeConditions",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_EMPTY","empty",111],"(",["T_VARIABLE","$conditions",111],")",["T_WHITESPACE","\n            ",111],"?",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","decodeValue",112],"(",["T_CONSTANT_ENCAPSED_STRING","\"[Conditions combination]\"",112],")",["T_WHITESPACE","\n            ",112],":",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","decodeValue",113],"(","\"",["T_ENCAPSED_AND_WHITESPACE","{Conditions combination:[",113],["T_CURLY_OPEN","{",113],["T_VARIABLE","$conditions",113],"}",["T_ENCAPSED_AND_WHITESPACE","]}",113],"\"",")",";",["T_WHITESPACE","\n        ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","convertMultipleCondition",114],"(",["T_VARIABLE","$decodeConditions",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Convert condition combination\n     *\n     * @param string $combination\n     * @param array|string $conditions\n     * @param int $nesting\n     * @return array\n     *\/",117],["T_WHITESPACE","\n    ",124],["T_PRIVATE","private",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","convertConditionsCombination",125],"(",["T_VARIABLE","$combination",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$conditions",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$nesting",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$combination",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],"[",["T_VARIABLE","$nesting",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","convertSingleCondition",127],"(",["T_VARIABLE","$combination",127],")","]",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$conditions",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","convertMultipleCondition",128],"(",["T_VARIABLE","$conditions",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$nesting",128],",",["T_WHITESPACE"," ",128],["T_LNUMBER","1",128],")",";",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$combination",129],["T_WHITESPACE"," ",129],"+",["T_WHITESPACE"," ",129],["T_VARIABLE","$conditions",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Convert multiple condition\n     *\n     * @param array $conditions\n     * @param int $nesting\n     * @param int $count\n     * @return array\n     *\/",132],["T_WHITESPACE","\n    ",139],["T_PRIVATE","private",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","convertMultipleCondition",140],"(",["T_ARRAY","array",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$conditions",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$nesting",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_LNUMBER","1",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$count",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_LNUMBER","0",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$result",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],"[","]",";",["T_WHITESPACE","\n        ",142],["T_FOREACH","foreach",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$conditions",143],["T_WHITESPACE"," ",143],["T_AS","as",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$key",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$condition",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$curNesting",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$nesting",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$count",144],["T_WHITESPACE"," ",144],"?",["T_WHITESPACE"," ",144],"(",["T_CONSTANT_ENCAPSED_STRING","'--'",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_VARIABLE","$count",144],")",["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","''",144],")",";",["T_WHITESPACE","\n\n            ",144],["T_IF","if",146],["T_WHITESPACE"," ",146],"(","!",["T_STRING","is_numeric",146],"(",["T_VARIABLE","$key",146],")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$result",147],["T_WHITESPACE"," ",147],["T_PLUS_EQUAL","+=",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","convertConditionsCombination",147],"(",["T_VARIABLE","$key",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$condition",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$curNesting",147],")",";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE"," ",148],["T_ELSEIF","elseif",148],["T_WHITESPACE"," ",148],"(",["T_STRING","is_string",148],"(",["T_VARIABLE","$condition",148],")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$result",149],"[",["T_VARIABLE","$curNesting",149],"]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","convertSingleCondition",149],"(",["T_VARIABLE","$condition",149],")",";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE"," ",150],["T_ELSE","else",150],["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$result",151],["T_WHITESPACE"," ",151],["T_PLUS_EQUAL","+=",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","convertMultipleCondition",151],"(",["T_VARIABLE","$condition",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$nesting",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$count",151],")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$count",153],["T_INC","++",153],";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n        ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$result",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Convert single condition\n     *\n     * @param string $condition\n     * @return array\n     * @throws \\Exception\n     *\/",158],["T_WHITESPACE","\n    ",164],["T_PRIVATE","private",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","convertSingleCondition",165],"(",["T_VARIABLE","$condition",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$condition",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","parseCondition",167],"(",["T_VARIABLE","$condition",167],")",";",["T_WHITESPACE","\n        ",167],["T_STRING","extract",168],"(",["T_VARIABLE","$condition",168],")",";",["T_WHITESPACE","\n\n        ",168],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_ISSET","isset",170],"(",["T_VARIABLE","$param",170],")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$typeParam",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getTypeParam",171],"(",["T_VARIABLE","$param",171],")",";",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$typeParam",172],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$type",172],";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$typeParam",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getTypeParam",174],"(",["T_VARIABLE","$type",174],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n        ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_EMPTY","empty",176],"(",["T_VARIABLE","$typeParam",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_THROW","throw",177],["T_WHITESPACE"," ",177],["T_NEW","new",177],["T_WHITESPACE"," ",177],["T_NS_SEPARATOR","\\",177],["T_STRING","Exception",177],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Can't find type param \\\"",177],["T_CURLY_OPEN","{",177],["T_VARIABLE","$type",177],"}",["T_ENCAPSED_AND_WHITESPACE","\\\".",177],"\"",")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n\n        ",178],["T_VARIABLE","$ruleParam",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],"[","]",";",["T_WHITESPACE","\n        ",180],["T_FOREACH","foreach",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$rules",181],["T_WHITESPACE"," ",181],["T_AS","as",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$value",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$param",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getRuleParam",182],"(",["T_VARIABLE","$value",182],")",";",["T_WHITESPACE","\n            ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_EMPTY","empty",183],"(",["T_VARIABLE","$param",183],")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_VARIABLE","$ruleParam",184],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",184],"]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$value",184],";",["T_WHITESPACE","\n                ",184],["T_BREAK","break",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$ruleParam",187],["T_WHITESPACE"," ",187],["T_PLUS_EQUAL","+=",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$param",187],";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n        ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_STRING","count",189],"(",["T_VARIABLE","$ruleParam",189],")",["T_WHITESPACE"," ",189],["T_IS_NOT_EQUAL","!=",189],["T_WHITESPACE"," ",189],["T_STRING","count",189],"(",["T_VARIABLE","$rules",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_THROW","throw",190],["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Exception",190],"(",["T_WHITESPACE","\n                ",190],["T_CONSTANT_ENCAPSED_STRING","\"Can't find all params. \"",191],["T_WHITESPACE","\n                ",191],".",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","\"\\nSearch: \"",192],["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_STRING","implode",192],"(",["T_CONSTANT_ENCAPSED_STRING","', '",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$rules",192],")",["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","\" \"",192],["T_WHITESPACE","\n                ",192],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"\\nFind: \"",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_STRING","implode",193],"(",["T_CONSTANT_ENCAPSED_STRING","', '",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$ruleParam",193],")",["T_WHITESPACE","\n            ",193],")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$ruleParam",197],["T_WHITESPACE"," ",197],"+",["T_WHITESPACE"," ",197],["T_VARIABLE","$typeParam",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Get type param by name\n     *\n     * @param string $name\n     * @return array\n     *\/",200],["T_WHITESPACE","\n    ",205],["T_PRIVATE","private",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","getTypeParam",206],"(",["T_VARIABLE","$name",206],")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_ISSET","isset",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","mapTypeParams",208],"[",["T_VARIABLE","$name",208],"]",")",["T_WHITESPACE"," ",208],"?",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","mapTypeParams",208],"[",["T_VARIABLE","$name",208],"]",["T_WHITESPACE"," ",208],":",["T_WHITESPACE"," ",208],"[","]",";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Get rule param by name\n     *\n     * @param string $name\n     * @return array\n     *\/",211],["T_WHITESPACE","\n    ",216],["T_PRIVATE","private",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","getRuleParam",217],"(",["T_VARIABLE","$name",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","mapRuleParams",219],["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$typeParam",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],"&",["T_VARIABLE","$params",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_ISSET","isset",220],"(",["T_VARIABLE","$params",220],"[",["T_VARIABLE","$name",220],"]",")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_RETURN","return",221],["T_WHITESPACE"," ",221],"[",["T_VARIABLE","$typeParam",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$params",221],"[",["T_VARIABLE","$name",221],"]","]",";",["T_WHITESPACE","\n            ",221],"}",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n        ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],"[","]",";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Decode value\n     *\n     * @param string $value\n     * @return array\n     * @throws \\Exception\n     *\/",227],["T_WHITESPACE","\n    ",233],["T_PRIVATE","private",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","decodeValue",234],"(",["T_VARIABLE","$value",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$value",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","str_replace",236],"(",["T_STRING","array_keys",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","encodeChars",236],")",",",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","encodeChars",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$value",236],")",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$value",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","preg_replace",237],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(\\]|})({|\\[)\/'",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'$1,$2'",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$value",237],")",";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$value",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","preg_replace",238],"(",["T_CONSTANT_ENCAPSED_STRING","'\/{([^:]+):\/'",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'{\"$1\":'",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$value",238],")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$value",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","preg_replace",239],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\[([^\\[{])\/'",239],",",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'\"$1'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$value",239],")",";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$value",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING","preg_replace",240],"(",["T_CONSTANT_ENCAPSED_STRING","'\/([^\\]}])\\]\/'",240],",",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'$1\"'",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$value",240],")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$value",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","str_replace",241],"(",["T_STRING","array_keys",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","decodeChars",241],")",",",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","decodeChars",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$value",241],")",";",["T_WHITESPACE","\n\n        ",241],["T_VARIABLE","$value",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],"\"",["T_ENCAPSED_AND_WHITESPACE","[",243],["T_CURLY_OPEN","{",243],["T_VARIABLE","$value",243],"}",["T_ENCAPSED_AND_WHITESPACE","]",243],"\"",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$value",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","json_decode",244],"(",["T_VARIABLE","$value",244],",",["T_WHITESPACE"," ",244],["T_STRING","true",244],")",";",["T_WHITESPACE","\n        ",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_STRING","null",245],["T_WHITESPACE"," ",245],["T_IS_IDENTICAL","===",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$value",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_THROW","throw",246],["T_WHITESPACE"," ",246],["T_NEW","new",246],["T_WHITESPACE"," ",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Exception",246],"(",["T_CONSTANT_ENCAPSED_STRING","'Bad format value.'",246],")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n        ",247],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$value",248],";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_DOC_COMMENT","\/**\n     * Parse condition\n     *\n     * @param string $condition\n     * @return array\n     * @throws \\Exception\n     *\/",251],["T_WHITESPACE","\n    ",257],["T_PRIVATE","private",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","parseCondition",258],"(",["T_VARIABLE","$condition",258],")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(","!",["T_STRING","preg_match_all",260],"(",["T_CONSTANT_ENCAPSED_STRING","'\/([^|]+\\|?)\/'",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$condition",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$match",260],")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_THROW","throw",261],["T_WHITESPACE"," ",261],["T_NEW","new",261],["T_WHITESPACE"," ",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Exception",261],"(",["T_CONSTANT_ENCAPSED_STRING","'Bad format condition'",261],")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n        ",262],["T_FOREACH","foreach",263],["T_WHITESPACE"," ",263],"(",["T_VARIABLE","$match",263],"[",["T_LNUMBER","1",263],"]",["T_WHITESPACE"," ",263],["T_AS","as",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$key",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$value",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_VARIABLE","$match",264],"[",["T_LNUMBER","1",264],"]","[",["T_VARIABLE","$key",264],"]",["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","rtrim",264],"(",["T_VARIABLE","$value",264],",",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'|'",264],")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$param",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$match",266],"[",["T_LNUMBER","1",266],"]","[",["T_LNUMBER","0",266],"]",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$type",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","array_shift",267],"(",["T_VARIABLE","$match",267],"[",["T_LNUMBER","1",267],"]",")",";",["T_WHITESPACE","\n        ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_STRING","count",268],"(",["T_VARIABLE","$match",268],"[",["T_LNUMBER","1",268],"]",")",["T_WHITESPACE"," ",268],["T_IS_EQUAL","==",268],["T_WHITESPACE"," ",268],["T_LNUMBER","3",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$type",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","array_shift",269],"(",["T_VARIABLE","$match",269],"[",["T_LNUMBER","1",269],"]",")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE"," ",270],["T_ELSE","else",270],["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$param",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","null",271],";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n\n        ",272],["T_RETURN","return",274],["T_WHITESPACE"," ",274],"[",["T_WHITESPACE","\n            ",274],["T_CONSTANT_ENCAPSED_STRING","'type'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$type",275],",",["T_WHITESPACE","\n            ",275],["T_CONSTANT_ENCAPSED_STRING","'rules'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_STRING","array_values",276],"(",["T_VARIABLE","$match",276],"[",["T_LNUMBER","1",276],"]",")",",",["T_WHITESPACE","\n            ",276],["T_CONSTANT_ENCAPSED_STRING","'param'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$param",277],["T_WHITESPACE","\n        ",277],"]",";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n",279],"}",["T_WHITESPACE","\n",280]]
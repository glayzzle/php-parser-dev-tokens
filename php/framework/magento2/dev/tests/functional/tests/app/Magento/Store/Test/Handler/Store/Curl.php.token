[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Store",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Store",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Mtf",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FixtureInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Mtf",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Handler",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Curl",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","AbstractCurl",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Mtf",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Util",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Protocol",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CurlInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Util",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Protocol",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CurlTransport",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Util",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Protocol",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CurlTransport",13],["T_NS_SEPARATOR","\\",13],["T_STRING","BackendDecorator",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Class Curl\n * Curl handler for creating Store view\n *\/",15],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","Curl",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","AbstractCurl",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","StoreInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * Url for saving data\n     *\n     * @var string\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$saveUrl",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'admin\/system_store\/save'",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Mapping values for data\n     *\n     * @var array\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$mappingData",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],"[",["T_WHITESPACE","\n        ",33],["T_CONSTANT_ENCAPSED_STRING","'group_id'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],"[",["T_WHITESPACE","\n            ",34],["T_CONSTANT_ENCAPSED_STRING","'Main Website Store'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_LNUMBER","1",35],",",["T_WHITESPACE","\n        ",35],"]",",",["T_WHITESPACE","\n        ",36],["T_CONSTANT_ENCAPSED_STRING","'is_active'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],"[",["T_WHITESPACE","\n            ",37],["T_CONSTANT_ENCAPSED_STRING","'Enabled'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_LNUMBER","1",38],",",["T_WHITESPACE","\n            ",38],["T_CONSTANT_ENCAPSED_STRING","'Disabled'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_LNUMBER","0",39],",",["T_WHITESPACE","\n        ",39],"]",",",["T_WHITESPACE","\n    ",40],"]",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * POST request for creating store\n     *\n     * @param FixtureInterface|null $fixture [optional]\n     * @return array\n     * @throws \\Exception\n     *\/",43],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","persist",50],"(",["T_STRING","FixtureInterface",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$fixture",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","null",50],")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$data",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","prepareData",52],"(",["T_VARIABLE","$fixture",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$url",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$_ENV",53],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",53],"]",["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","saveUrl",53],";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$curl",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_NEW","new",54],["T_WHITESPACE"," ",54],["T_STRING","BackendDecorator",54],"(",["T_NEW","new",54],["T_WHITESPACE"," ",54],["T_STRING","CurlTransport",54],"(",")",",",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_configuration",54],")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$curl",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","write",55],"(",["T_VARIABLE","$url",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$data",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$response",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$curl",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","read",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$curl",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","close",57],"(",")",";",["T_WHITESPACE","\n        ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(","!",["T_STRING","strpos",58],"(",["T_VARIABLE","$response",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'data-ui-id=\"messages-message-success\"'",58],")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_THROW","throw",59],["T_WHITESPACE"," ",59],["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Exception",59],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Store View entity creating  by curl handler was not successful! Response: ",59],["T_VARIABLE","$response",59],"\"",")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n\n        ",60],["T_RETURN","return",62],["T_WHITESPACE"," ",62],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getStoreId",62],"(",["T_VARIABLE","$fixture",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getName",62],"(",")",")","]",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Prepare data from text to values\n     *\n     * @param FixtureInterface $fixture\n     * @return array\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","prepareData",71],"(",["T_STRING","FixtureInterface",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$fixture",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$data",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],"[",["T_WHITESPACE","\n            ",73],["T_CONSTANT_ENCAPSED_STRING","'store'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","replaceMappingData",74],"(",["T_VARIABLE","$fixture",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getData",74],"(",")",")",",",["T_WHITESPACE","\n            ",74],["T_CONSTANT_ENCAPSED_STRING","'store_action'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'add'",75],",",["T_WHITESPACE","\n            ",75],["T_CONSTANT_ENCAPSED_STRING","'store_type'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'store'",76],",",["T_WHITESPACE","\n        ",76],"]",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$data",78],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",78],"]","[",["T_CONSTANT_ENCAPSED_STRING","'group_id'",78],"]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$fixture",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getDataFieldConfig",78],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",78],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",78],"]",["T_OBJECT_OPERATOR","->",78],["T_STRING","getStoreGroup",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getGroupId",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$data",79],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",79],"]","[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",79],"]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_ISSET","isset",79],"(",["T_VARIABLE","$data",79],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",79],"]","[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",79],"]",")",["T_WHITESPACE"," ",79],"?",["T_WHITESPACE"," ",79],["T_VARIABLE","$data",79],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",79],"]","[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",79],"]",["T_WHITESPACE"," ",79],":",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","''",79],";",["T_WHITESPACE","\n\n        ",79],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$data",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Get Store id by name after creating Store\n     *\n     * @param string $name\n     * @return int|null\n     * @throws \\Exception\n     *\/",84],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getStoreId",91],"(",["T_VARIABLE","$name",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_COMMENT","\/\/Set pager limit to 2000 in order to find created store view by name\n",93],["T_WHITESPACE","        ",94],["T_VARIABLE","$url",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$_ENV",94],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",94],"]",["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'admin\/system_store\/index\/sort\/store_title\/dir\/asc\/limit\/2000'",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$curl",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","BackendDecorator",95],"(",["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","CurlTransport",95],"(",")",",",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_configuration",95],")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$curl",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","addOption",96],"(",["T_STRING","CURLOPT_HEADER",96],",",["T_WHITESPACE"," ",96],["T_LNUMBER","1",96],")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$curl",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","write",97],"(",["T_VARIABLE","$url",97],",",["T_WHITESPACE"," ",97],"[","]",",",["T_WHITESPACE"," ",97],["T_STRING","CurlInterface",97],["T_DOUBLE_COLON","::",97],["T_STRING","GET",97],")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$response",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$curl",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","read",98],"(",")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$expectedUrl",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'\/admin\/system_store\/editStore\/store_id\/'",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$expectedUrl",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","preg_quote",101],"(",["T_VARIABLE","$expectedUrl",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$expectedUrl",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","str_replace",102],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'\\\/'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$expectedUrl",102],")",";",["T_WHITESPACE","\n        ",102],["T_STRING","preg_match",103],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_VARIABLE","$expectedUrl",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'([0-9]*)\\\/(.)*>'",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_VARIABLE","$name",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'<\\\/a>\/'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$response",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$matches",103],")",";",["T_WHITESPACE","\n\n        ",103],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_EMPTY","empty",105],"(",["T_VARIABLE","$matches",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_THROW","throw",106],["T_WHITESPACE"," ",106],["T_NEW","new",106],["T_WHITESPACE"," ",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Exception",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot find store id'",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_EMPTY","empty",109],"(",["T_VARIABLE","$matches",109],"[",["T_LNUMBER","1",109],"]",")",["T_WHITESPACE"," ",109],"?",["T_WHITESPACE"," ",109],["T_STRING","null",109],["T_WHITESPACE"," ",109],":",["T_WHITESPACE"," ",109],["T_VARIABLE","$matches",109],"[",["T_LNUMBER","1",109],"]",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n",110],"}",["T_WHITESPACE","\n",111]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tax",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TaxRate",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Tax",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","TaxRate",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Mtf",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FixtureInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Mtf",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Handler",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Curl",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","AbstractCurl",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Util",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Protocol",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CurlTransport",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Util",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Protocol",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CurlTransport",13],["T_NS_SEPARATOR","\\",13],["T_STRING","BackendDecorator",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Curl handler for creating Tax Rate.\n *\/",15],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Curl",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","AbstractCurl",18],["T_WHITESPACE"," ",18],["T_IMPLEMENTS","implements",18],["T_WHITESPACE"," ",18],["T_STRING","TaxRateInterface",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$mappingData",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[",["T_WHITESPACE","\n        ",25],["T_CONSTANT_ENCAPSED_STRING","'tax_country_id'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],"[",["T_WHITESPACE","\n            ",26],["T_CONSTANT_ENCAPSED_STRING","'Australia'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'AU'",27],",",["T_WHITESPACE","\n            ",27],["T_CONSTANT_ENCAPSED_STRING","'United States'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'US'",28],",",["T_WHITESPACE","\n            ",28],["T_CONSTANT_ENCAPSED_STRING","'United Kingdom'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'GB'",29],",",["T_WHITESPACE","\n        ",29],"]",",",["T_WHITESPACE","\n        ",30],["T_CONSTANT_ENCAPSED_STRING","'tax_region_id'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],"[",["T_WHITESPACE","\n            ",31],["T_CONSTANT_ENCAPSED_STRING","'*'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'0'",32],",",["T_WHITESPACE","\n            ",32],["T_CONSTANT_ENCAPSED_STRING","'California'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'12'",33],",",["T_WHITESPACE","\n            ",33],["T_CONSTANT_ENCAPSED_STRING","'New York'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'43'",34],",",["T_WHITESPACE","\n            ",34],["T_CONSTANT_ENCAPSED_STRING","'Texas'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'57'",35],",",["T_WHITESPACE","\n        ",35],"]",",",["T_WHITESPACE","\n        ",36],["T_CONSTANT_ENCAPSED_STRING","'zip_is_range'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],"[",["T_WHITESPACE","\n            ",37],["T_CONSTANT_ENCAPSED_STRING","'Yes'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'1'",38],",",["T_WHITESPACE","\n            ",38],["T_CONSTANT_ENCAPSED_STRING","'No'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'0'",39],["T_WHITESPACE","\n        ",39],"]",["T_WHITESPACE","\n    ",40],"]",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Post request for creating tax rate.\n     *\n     * @param FixtureInterface $fixture [optional]\n     * @return array\n     *\/",43],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","persist",49],"(",["T_STRING","FixtureInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$fixture",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","null",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_DOC_COMMENT","\/** @var TaxRate $fixture *\/",51],["T_WHITESPACE","\n        ",51],["T_VARIABLE","$data",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","prepareData",52],"(",["T_VARIABLE","$fixture",52],")",";",["T_WHITESPACE","\n\n        ",52],["T_VARIABLE","$url",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$_ENV",54],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",54],"]",["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'tax\/rate\/ajaxSave\/?isAjax=true'",54],";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$curl",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_NEW","new",55],["T_WHITESPACE"," ",55],["T_STRING","BackendDecorator",55],"(",["T_NEW","new",55],["T_WHITESPACE"," ",55],["T_STRING","CurlTransport",55],"(",")",",",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_configuration",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$curl",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","write",56],"(",["T_VARIABLE","$url",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$data",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$response",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$curl",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","read",57],"(",")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$curl",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","close",58],"(",")",";",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$id",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getTaxRateId",60],"(",["T_VARIABLE","$response",60],")",";",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$id",61],"]",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Prepare tax rate data.\n     *\n     * @param TaxRate $taxRate\n     * @return array\n     *\/",64],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","prepareData",70],"(",["T_STRING","TaxRate",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$taxRate",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","replaceMappingData",72],"(",["T_VARIABLE","$taxRate",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getData",72],"(",")",")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Return saved tax rate id.\n     *\n     * @param $response\n     * @return int|null\n     * @throws \\Exception\n     *\/",75],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","getTaxRateId",82],"(",["T_VARIABLE","$response",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$data",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","json_decode",84],"(",["T_VARIABLE","$response",84],",",["T_WHITESPACE"," ",84],["T_STRING","true",84],")",";",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$data",85],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",85],"]",["T_WHITESPACE"," ",85],["T_IS_NOT_IDENTICAL","!==",85],["T_WHITESPACE"," ",85],["T_STRING","true",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_THROW","throw",86],["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Exception",86],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Tax rate creation by curl handler was not successful! Response: ",86],["T_VARIABLE","$response",86],"\"",")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_ISSET","isset",88],"(",["T_VARIABLE","$data",88],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_id'",88],"]",")",["T_WHITESPACE"," ",88],"?",["T_WHITESPACE"," ",88],["T_INT_CAST","(int)",88],["T_VARIABLE","$data",88],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_id'",88],"]",["T_WHITESPACE"," ",88],":",["T_WHITESPACE"," ",88],["T_STRING","null",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n",89],"}",["T_WHITESPACE","\n",90]]
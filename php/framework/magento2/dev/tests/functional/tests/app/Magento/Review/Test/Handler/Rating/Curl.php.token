[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Review",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Rating",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Backend",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Handler",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Extractor",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Mtf",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FixtureInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Mtf",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Handler",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Curl",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","AbstractCurl",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Util",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Protocol",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CurlTransport",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Util",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Protocol",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CurlTransport",13],["T_NS_SEPARATOR","\\",13],["T_STRING","BackendDecorator",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Class Curl\n * Curl handler for creating product Rating through backend.\n *\/",15],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","Curl",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","AbstractCurl",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","RatingInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$mappingData",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],"[",["T_WHITESPACE","\n        ",26],["T_CONSTANT_ENCAPSED_STRING","'is_active'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],"[",["T_WHITESPACE","\n            ",27],["T_CONSTANT_ENCAPSED_STRING","'Yes'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_LNUMBER","1",28],",",["T_WHITESPACE","\n            ",28],["T_CONSTANT_ENCAPSED_STRING","'No'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_LNUMBER","0",29],",",["T_WHITESPACE","\n        ",29],"]",",",["T_WHITESPACE","\n    ",30],"]",";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Mapping stores value\n     *\n     * @var array\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$mappingStores",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],"[",["T_WHITESPACE","\n        ",38],["T_CONSTANT_ENCAPSED_STRING","'Main Website\/Main Website Store\/Default Store View'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_LNUMBER","1",39],",",["T_WHITESPACE","\n    ",39],"]",";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Post request for creating product Rating in backend\n     *\n     * @param FixtureInterface|null $rating [optional]\n     * @return array\n     * @throws \\Exception\n     *\/",42],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","persist",49],"(",["T_STRING","FixtureInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$rating",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","null",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$url",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$_ENV",51],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",51],"]",["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'review\/rating\/save\/'",51],";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$curl",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_STRING","BackendDecorator",52],"(",["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_STRING","CurlTransport",52],"(",")",",",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_configuration",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$data",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","replaceMappingData",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","prepareData",53],"(",["T_VARIABLE","$rating",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getData",53],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",53],["T_VARIABLE","$data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",55],"]",["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","is_array",55],"(",["T_VARIABLE","$data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",55],"]",")",["T_WHITESPACE"," ",55],"?",["T_WHITESPACE"," ",55],["T_VARIABLE","$data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",55],"]",["T_WHITESPACE"," ",55],":",["T_WHITESPACE"," ",55],"[",["T_VARIABLE","$data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",55],"]","]",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$data",56],["T_WHITESPACE"," ",56],["T_PLUS_EQUAL","+=",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getAdditionalData",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$curl",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","write",57],"(",["T_VARIABLE","$url",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$data",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$response",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$curl",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","read",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$curl",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","close",59],"(",")",";",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(","!",["T_STRING","strpos",60],"(",["T_VARIABLE","$response",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'data-ui-id=\"messages-message-success\"'",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_THROW","throw",61],["T_WHITESPACE"," ",61],["T_NEW","new",61],["T_WHITESPACE"," ",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Exception",61],"(",["T_WHITESPACE","\n                ",61],["T_CONSTANT_ENCAPSED_STRING","'Product Rating entity creating by curl handler was not successful! Response:'",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_VARIABLE","$response",62],["T_WHITESPACE","\n            ",62],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$ratingId",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getProductRatingId",66],"(",")",";",["T_WHITESPACE","\n        ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],"[",["T_WHITESPACE","\n            ",67],["T_CONSTANT_ENCAPSED_STRING","'rating_id'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$ratingId",68],",",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'options'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getRatingOptions",69],"(",["T_VARIABLE","$ratingId",69],")",["T_WHITESPACE","\n        ",69],"]",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Prepare POST data for creating rating request\n     *\n     * @param array $data\n     * @return array\n     *\/",73],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","prepareData",79],"(",["T_ARRAY","array",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$data",79],")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_ISSET","isset",81],"(",["T_VARIABLE","$data",81],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",81],"]",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$data",82],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",82],"]",["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$key",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$store",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_ISSET","isset",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","mappingStores",83],"[",["T_VARIABLE","$store",83],"]",")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                    ",83],["T_VARIABLE","$data",84],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",84],"]","[",["T_VARIABLE","$key",84],"]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","mappingStores",84],"[",["T_VARIABLE","$store",84],"]",";",["T_WHITESPACE","\n                ",84],"}",["T_WHITESPACE","\n            ",85],"}",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$data",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Get product Rating id\n     *\n     * @return mixed\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getProductRatingId",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$url",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'review\/rating\/index\/sort\/rating_id\/dir\/desc\/'",99],";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$regex",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'\/data-column=\"rating_id\"[^>]*>\\s*([0-9]+)\\s*<\/'",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$extractor",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","Extractor",101],"(",["T_VARIABLE","$url",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$regex",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$match",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$extractor",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getData",102],"(",")",";",["T_WHITESPACE","\n\n        ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_EMPTY","empty",104],"(",["T_VARIABLE","$match",104],"[",["T_LNUMBER","1",104],"]",")",["T_WHITESPACE"," ",104],"?",["T_WHITESPACE"," ",104],["T_STRING","null",104],["T_WHITESPACE"," ",104],":",["T_WHITESPACE"," ",104],["T_VARIABLE","$match",104],"[",["T_LNUMBER","1",104],"]",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Get rating options\n     *\n     * @param int $ratingId\n     * @return array\n     *\/",107],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","getRatingOptions",113],"(",["T_VARIABLE","$ratingId",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$url",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'review\/rating\/edit\/id\/'",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$ratingId",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$regex",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'\/<input[^>]+name=\"option_title\\[(\\d+)\\]\"[^>]+>\/'",116],";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$extractor",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_NEW","new",117],["T_WHITESPACE"," ",117],["T_STRING","Extractor",117],"(",["T_VARIABLE","$url",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$regex",117],",",["T_WHITESPACE"," ",117],["T_STRING","true",117],")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$matches",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$extractor",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getData",118],"(",")",";",["T_WHITESPACE","\n\n        ",118],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_EMPTY","empty",120],"(",["T_VARIABLE","$matches",120],"[",["T_LNUMBER","1",120],"]",")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],"[","]",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n        ",122],["T_STRING","array_unshift",123],"(",["T_VARIABLE","$matches",123],"[",["T_LNUMBER","1",123],"]",",",["T_WHITESPACE"," ",123],["T_STRING","null",123],")",";",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_STRING","array_filter",124],"(",["T_VARIABLE","$matches",124],"[",["T_LNUMBER","1",124],"]",")",";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Return additional data for curl request\n     *\n     * @return array\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","getAdditionalData",132],"(",")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],"[",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'rating_codes'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],"[",["T_LNUMBER","1",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","''",135],"]",",",["T_WHITESPACE","\n            ",135],["T_CONSTANT_ENCAPSED_STRING","'option_title'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],"[",["T_WHITESPACE","\n                ",136],["T_CONSTANT_ENCAPSED_STRING","'add_1'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_LNUMBER","1",137],",",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'add_2'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_LNUMBER","2",138],",",["T_WHITESPACE","\n                ",138],["T_CONSTANT_ENCAPSED_STRING","'add_3'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_LNUMBER","3",139],",",["T_WHITESPACE","\n                ",139],["T_CONSTANT_ENCAPSED_STRING","'add_4'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_LNUMBER","4",140],",",["T_WHITESPACE","\n                ",140],["T_CONSTANT_ENCAPSED_STRING","'add_5'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_LNUMBER","5",141],",",["T_WHITESPACE","\n            ",141],"]",",",["T_WHITESPACE","\n        ",142],"]",";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n",144],"}",["T_WHITESPACE","\n",145]]
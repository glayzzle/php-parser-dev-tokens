[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Sales",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","OrderInjectable",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Bundle",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","BundleProduct",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigurableProduct",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigurableProduct",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Downloadable",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Fixture",11],["T_NS_SEPARATOR","\\",11],["T_STRING","DownloadableProduct",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Test",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Fixture",12],["T_NS_SEPARATOR","\\",12],["T_STRING","OrderInjectable",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Fixture",13],["T_NS_SEPARATOR","\\",13],["T_STRING","FixtureInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Mtf",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Util",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Protocol",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CurlTransport",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Mtf",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Handler",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Webapi",15],["T_WHITESPACE"," ",15],["T_AS","as",15],["T_WHITESPACE"," ",15],["T_STRING","AbstractWebapi",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Mtf",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Util",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Protocol",16],["T_NS_SEPARATOR","\\",16],["T_STRING","CurlTransport",16],["T_NS_SEPARATOR","\\",16],["T_STRING","WebapiDecorator",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Create new order via web API.\n *\/",18],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","Webapi",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_STRING","AbstractWebapi",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_STRING","OrderInjectableInterface",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$mappingData",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],"[",["T_WHITESPACE","\n        ",28],["T_CONSTANT_ENCAPSED_STRING","'region_id'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],"[",["T_WHITESPACE","\n            ",29],["T_CONSTANT_ENCAPSED_STRING","'California'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'12'",30],",",["T_WHITESPACE","\n        ",30],"]",",",["T_WHITESPACE","\n        ",31],["T_CONSTANT_ENCAPSED_STRING","'country_id'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],"[",["T_WHITESPACE","\n            ",32],["T_CONSTANT_ENCAPSED_STRING","'United States'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'US'",33],",",["T_WHITESPACE","\n            ",33],["T_CONSTANT_ENCAPSED_STRING","'United Kingdom'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'GB'",34],",",["T_WHITESPACE","\n        ",34],"]",",",["T_WHITESPACE","\n    ",35],"]",";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Order quote value.\n     *\n     * @var string\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$quote",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * First part of Web API url for creating order.\n     *\n     * @var string\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$url",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Either customer is a guest or not.\n     *\n     * @var bool\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PRIVATE","private",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$isCustomerGuest",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Creating order using quote via web API.\n     *\n     * @param FixtureInterface|null $fixture [optional]\n     * @return array\n     *\/",59],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","persist",65],"(",["T_STRING","FixtureInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$fixture",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","null",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","isCustomerGuest",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$fixture",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getData",67],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",67],")",["T_WHITESPACE"," ",67],"?",["T_WHITESPACE"," ",67],["T_STRING","false",67],["T_WHITESPACE"," ",67],":",["T_WHITESPACE"," ",67],["T_STRING","true",67],";",["T_WHITESPACE","\n\n        ",67],["T_DOC_COMMENT","\/** @var OrderInjectable $fixture *\/",69],["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","createQuote",70],"(",["T_VARIABLE","$fixture",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$url",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","isCustomerGuest",71],["T_WHITESPACE"," ",71],"?",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'guest-carts\/'",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","quote",71],["T_WHITESPACE","  ",71],":",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'carts\/'",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_INT_CAST","(int)",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","quote",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","url",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$_ENV",72],"[",["T_CONSTANT_ENCAPSED_STRING","'app_frontend_url'",72],"]",["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","prepareWebsiteUrl",72],"(",["T_VARIABLE","$fixture",72],")",["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'\/V1\/'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$url",72],";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","setProducts",74],"(",["T_VARIABLE","$fixture",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","setCoupon",75],"(",["T_VARIABLE","$fixture",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setBillingAddress",76],"(",["T_VARIABLE","$fixture",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setShippingInformation",77],"(",["T_VARIABLE","$fixture",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setPaymentMethod",78],"(",["T_VARIABLE","$fixture",78],")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$orderId",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","placeOrder",79],"(",")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$orderIncrementId",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getOrderIncrementId",80],"(",["T_VARIABLE","$orderId",80],")",";",["T_WHITESPACE","\n\n        ",80],["T_RETURN","return",82],["T_WHITESPACE"," ",82],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$orderIncrementId",82],"]",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Create checkout quote.\n     *\n     * @param OrderInjectable $order\n     * @return void\n     * @throws \\Exception\n     *\/",85],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","createQuote",92],"(",["T_STRING","OrderInjectable",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$order",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","isCustomerGuest",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$url",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$_ENV",95],"[",["T_CONSTANT_ENCAPSED_STRING","'app_frontend_url'",95],"]",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","prepareWebsiteUrl",95],"(",["T_VARIABLE","$order",95],")",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'\/V1\/guest-carts'",95],";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","webapiTransport",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","write",96],"(",["T_VARIABLE","$url",96],")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$response",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","json_decode",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","webapiTransport",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","read",97],"(",")",",",["T_WHITESPACE"," ",97],["T_STRING","true",97],")",";",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","webapiTransport",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","close",98],"(",")",";",["T_WHITESPACE","\n            ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(","!",["T_STRING","is_string",99],"(",["T_VARIABLE","$response",99],")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","eventManager",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","dispatchEvent",100],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",100],"]",",",["T_WHITESPACE"," ",100],"[",["T_VARIABLE","$response",100],"]",")",";",["T_WHITESPACE","\n                ",100],["T_THROW","throw",101],["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Exception",101],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not create a checkout quote using web API.'",101],")",";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","quote",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$response",103],";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE"," ",104],["T_ELSE","else",104],["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$url",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$_ENV",105],"[",["T_CONSTANT_ENCAPSED_STRING","'app_frontend_url'",105],"]",["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","prepareWebsiteUrl",105],"(",["T_VARIABLE","$order",105],")",["T_WHITESPACE","\n                ",105],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'\/V1\/customers\/'",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_VARIABLE","$order",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getCustomerId",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","getId",106],"(",")",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'\/carts'",106],";",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$data",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'{\"customerId\": \"'",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$order",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getCustomerId",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","getId",107],"(",")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'\"}'",107],";",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","webapiTransport",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","write",108],"(",["T_VARIABLE","$url",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$data",108],")",";",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$response",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","json_decode",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","webapiTransport",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","read",109],"(",")",",",["T_WHITESPACE"," ",109],["T_STRING","true",109],")",";",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","webapiTransport",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","close",110],"(",")",";",["T_WHITESPACE","\n            ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(","!",["T_STRING","is_numeric",111],"(",["T_VARIABLE","$response",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","eventManager",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","dispatchEvent",112],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",112],"]",",",["T_WHITESPACE"," ",112],"[",["T_VARIABLE","$response",112],"]",")",";",["T_WHITESPACE","\n                ",112],["T_THROW","throw",113],["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Exception",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not create a checkout quote using web API.'",113],")",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","quote",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$response",115],";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Add products to quote.\n     *\n     * @param OrderInjectable $order\n     * @return void\n     * @throws \\Exception\n     *\/",119],["T_WHITESPACE","\n    ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","setProducts",126],"(",["T_STRING","OrderInjectable",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$order",126],")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$url",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","url",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'\/items'",128],";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$products",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$order",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getEntityId",129],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'products'",129],"]",";",["T_WHITESPACE","\n        ",129],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$products",130],["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$product",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$data",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],"[",["T_WHITESPACE","\n                ",131],["T_CONSTANT_ENCAPSED_STRING","'cartItem'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],"[",["T_WHITESPACE","\n                    ",132],["T_CONSTANT_ENCAPSED_STRING","'sku'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$product",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getSku",133],"(",")",",",["T_WHITESPACE","\n                    ",133],["T_CONSTANT_ENCAPSED_STRING","'qty'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_ISSET","isset",134],"(",["T_VARIABLE","$product",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getCheckoutData",134],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",134],"]",")",["T_WHITESPACE"," ",134],"?",["T_WHITESPACE"," ",134],["T_VARIABLE","$product",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getCheckoutData",134],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",134],"]",["T_WHITESPACE"," ",134],":",["T_WHITESPACE"," ",134],["T_LNUMBER","1",134],",",["T_WHITESPACE","\n                    ",134],["T_CONSTANT_ENCAPSED_STRING","'quote_id'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","quote",135],["T_WHITESPACE","\n                ",135],"]",["T_WHITESPACE","\n            ",136],"]",";",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$methodName",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'prepare'",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_STRING","ucfirst",138],"(",["T_VARIABLE","$product",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getDataConfig",138],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",138],"]",")",["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'Options'",138],";",["T_WHITESPACE","\n            ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_STRING","method_exists",139],"(",["T_VARIABLE","$this",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$methodName",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$data",140],"[",["T_CONSTANT_ENCAPSED_STRING","'cartItem'",140],"]","[",["T_CONSTANT_ENCAPSED_STRING","'product_option'",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_VARIABLE","$methodName",140],"(",["T_VARIABLE","$product",140],")",";",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","webapiTransport",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","write",142],"(",["T_VARIABLE","$url",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$data",142],")",";",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$response",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_ARRAY_CAST","(array)",143],["T_STRING","json_decode",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","webapiTransport",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","read",143],"(",")",",",["T_WHITESPACE"," ",143],["T_STRING","true",143],")",";",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","webapiTransport",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","close",144],"(",")",";",["T_WHITESPACE","\n            ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_ISSET","isset",145],"(",["T_VARIABLE","$response",145],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",145],"]",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","eventManager",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","dispatchEvent",146],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",146],"]",",",["T_WHITESPACE"," ",146],"[",["T_VARIABLE","$response",146],"]",")",";",["T_WHITESPACE","\n                ",146],["T_THROW","throw",147],["T_WHITESPACE"," ",147],["T_NEW","new",147],["T_WHITESPACE"," ",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Exception",147],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not add product item to quote!'",147],")",";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Set coupon to quote.\n     *\n     * @param OrderInjectable $order\n     * @return void\n     * @throws \\Exception\n     *\/",152],["T_WHITESPACE","\n    ",158],["T_PROTECTED","protected",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","setCoupon",159],"(",["T_STRING","OrderInjectable",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$order",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(","!",["T_VARIABLE","$order",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","hasData",161],"(",["T_CONSTANT_ENCAPSED_STRING","'coupon_code'",161],")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_RETURN","return",162],";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$url",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","url",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'\/coupons\/'",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_VARIABLE","$order",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getCouponCode",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","getCouponCode",164],"(",")",";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$data",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],"[",["T_WHITESPACE","\n            ",165],["T_CONSTANT_ENCAPSED_STRING","'cartId'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","quote",166],",",["T_WHITESPACE","\n            ",166],["T_CONSTANT_ENCAPSED_STRING","'couponCode'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$order",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getCouponCode",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getCouponCode",167],"(",")",["T_WHITESPACE","\n        ",167],"]",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","webapiTransport",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","write",169],"(",["T_VARIABLE","$url",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$data",169],",",["T_WHITESPACE"," ",169],["T_STRING","WebapiDecorator",169],["T_DOUBLE_COLON","::",169],["T_STRING","PUT",169],")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$response",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","json_decode",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","webapiTransport",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","read",170],"(",")",",",["T_WHITESPACE"," ",170],["T_STRING","true",170],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","webapiTransport",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","close",171],"(",")",";",["T_WHITESPACE","\n        ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$response",172],["T_WHITESPACE"," ",172],["T_IS_NOT_IDENTICAL","!==",172],["T_WHITESPACE"," ",172],["T_STRING","true",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","eventManager",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","dispatchEvent",173],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",173],"]",",",["T_WHITESPACE"," ",173],"[",["T_VARIABLE","$response",173],"]",")",";",["T_WHITESPACE","\n            ",173],["T_THROW","throw",174],["T_WHITESPACE"," ",174],["T_NEW","new",174],["T_WHITESPACE"," ",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Exception",174],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not apply coupon code!'",174],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Set billing address to quote.\n     *\n     * @param OrderInjectable $order\n     * @return void\n     * @throws \\Exception\n     *\/",178],["T_WHITESPACE","\n    ",184],["T_PROTECTED","protected",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","setBillingAddress",185],"(",["T_STRING","OrderInjectable",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$order",185],")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$url",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","url",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","\"\/billing-address\"",187],";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$address",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$order",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getBillingAddressId",188],"(",")",";",["T_WHITESPACE","\n\n        ",188],["T_UNSET","unset",190],"(",["T_VARIABLE","$address",190],"[",["T_CONSTANT_ENCAPSED_STRING","'default_billing'",190],"]",")",";",["T_WHITESPACE","\n        ",190],["T_UNSET","unset",191],"(",["T_VARIABLE","$address",191],"[",["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",191],"]",")",";",["T_WHITESPACE","\n        ",191],["T_FOREACH","foreach",192],["T_WHITESPACE"," ",192],"(",["T_STRING","array_keys",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","mappingData",192],")",["T_WHITESPACE"," ",192],["T_AS","as",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$key",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_ISSET","isset",193],"(",["T_VARIABLE","$address",193],"[",["T_VARIABLE","$key",193],"]",")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$address",194],"[",["T_VARIABLE","$key",194],"]",["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","mappingData",194],"[",["T_VARIABLE","$key",194],"]","[",["T_VARIABLE","$address",194],"[",["T_VARIABLE","$key",194],"]","]",";",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$data",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],"[",["T_CONSTANT_ENCAPSED_STRING","\"address\"",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$address",197],"]",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","webapiTransport",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","write",198],"(",["T_VARIABLE","$url",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$data",198],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$response",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","json_decode",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","webapiTransport",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","read",199],"(",")",",",["T_WHITESPACE"," ",199],["T_STRING","true",199],")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","webapiTransport",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","close",200],"(",")",";",["T_WHITESPACE","\n        ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(","!",["T_STRING","is_numeric",201],"(",["T_VARIABLE","$response",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","eventManager",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","dispatchEvent",202],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",202],"]",",",["T_WHITESPACE"," ",202],"[",["T_VARIABLE","$response",202],"]",")",";",["T_WHITESPACE","\n            ",202],["T_THROW","throw",203],["T_WHITESPACE"," ",203],["T_NEW","new",203],["T_WHITESPACE"," ",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Exception",203],"(",["T_CONSTANT_ENCAPSED_STRING","\"Could not set billing addresss to quote!\"",203],")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Set shipping information to quote\n     *\n     * @param OrderInjectable $order\n     * @throws \\Exception\n     *\/",207],["T_WHITESPACE","\n    ",212],["T_PROTECTED","protected",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","setShippingInformation",213],"(",["T_STRING","OrderInjectable",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$order",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(","!",["T_VARIABLE","$order",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","hasData",215],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",215],")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_RETURN","return",216],";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$url",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","url",218],["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'\/shipping-information'",218],";",["T_WHITESPACE","\n        ",218],["T_LIST","list",219],"(",["T_VARIABLE","$carrier",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$method",219],")",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","explode",219],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$order",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getShippingMethod",219],"(",")",")",";",["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$address",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$order",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","hasData",221],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_id'",221],")",["T_WHITESPACE","\n            ",221],"?",["T_WHITESPACE"," ",222],["T_VARIABLE","$order",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getShippingAddressId",222],"(",")",["T_WHITESPACE","\n            ",222],":",["T_WHITESPACE"," ",223],["T_VARIABLE","$order",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getBillingAddressId",223],"(",")",";",["T_WHITESPACE","\n\n        ",223],["T_UNSET","unset",225],"(",["T_VARIABLE","$address",225],"[",["T_CONSTANT_ENCAPSED_STRING","'default_billing'",225],"]",")",";",["T_WHITESPACE","\n        ",225],["T_UNSET","unset",226],"(",["T_VARIABLE","$address",226],"[",["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",226],"]",")",";",["T_WHITESPACE","\n        ",226],["T_FOREACH","foreach",227],["T_WHITESPACE"," ",227],"(",["T_STRING","array_keys",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","mappingData",227],")",["T_WHITESPACE"," ",227],["T_AS","as",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$key",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_ISSET","isset",228],"(",["T_VARIABLE","$address",228],"[",["T_VARIABLE","$key",228],"]",")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                ",228],["T_VARIABLE","$address",229],"[",["T_VARIABLE","$key",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","mappingData",229],"[",["T_VARIABLE","$key",229],"]","[",["T_VARIABLE","$address",229],"[",["T_VARIABLE","$key",229],"]","]",";",["T_WHITESPACE","\n            ",229],"}",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$data",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],"[",["T_WHITESPACE","\n            ",233],["T_CONSTANT_ENCAPSED_STRING","'addressInformation'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],"[",["T_WHITESPACE","\n                ",234],["T_CONSTANT_ENCAPSED_STRING","'shippingAddress'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$address",235],",",["T_WHITESPACE","\n                ",235],["T_CONSTANT_ENCAPSED_STRING","'shippingMethodCode'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$method",236],",",["T_WHITESPACE","\n                ",236],["T_CONSTANT_ENCAPSED_STRING","'shippingCarrierCode'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$carrier",237],",",["T_WHITESPACE","\n            ",237],"]",["T_WHITESPACE","\n        ",238],"]",";",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","webapiTransport",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","write",241],"(",["T_VARIABLE","$url",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$data",241],",",["T_WHITESPACE"," ",241],["T_STRING","WebapiDecorator",241],["T_DOUBLE_COLON","::",241],["T_STRING","POST",241],")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$response",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","json_decode",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","webapiTransport",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","read",242],"(",")",",",["T_WHITESPACE"," ",242],["T_STRING","true",242],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","webapiTransport",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","close",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(","!",["T_ISSET","isset",244],"(",["T_VARIABLE","$response",244],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",244],"]",",",["T_WHITESPACE"," ",244],["T_VARIABLE","$response",244],"[",["T_CONSTANT_ENCAPSED_STRING","'totals'",244],"]",")",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","eventManager",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","dispatchEvent",245],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",245],"]",",",["T_WHITESPACE"," ",245],"[",["T_VARIABLE","$response",245],"]",")",";",["T_WHITESPACE","\n            ",245],["T_THROW","throw",246],["T_WHITESPACE"," ",246],["T_NEW","new",246],["T_WHITESPACE"," ",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Exception",246],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not set shipping method to quote!'",246],")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Set payment method to quote.\n     *\n     * @param OrderInjectable $order\n     * @return void\n     * @throws \\Exception\n     *\/",250],["T_WHITESPACE","\n    ",256],["T_PROTECTED","protected",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","setPaymentMethod",257],"(",["T_STRING","OrderInjectable",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$order",257],")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$url",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","url",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'\/selected-payment-method'",259],";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$data",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],"[",["T_WHITESPACE","\n            ",260],["T_CONSTANT_ENCAPSED_STRING","\"cartId\"",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","quote",261],",",["T_WHITESPACE","\n            ",261],["T_CONSTANT_ENCAPSED_STRING","\"method\"",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$order",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getPaymentAuthExpiration",262],"(",")",["T_WHITESPACE","\n        ",262],"]",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","webapiTransport",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","write",264],"(",["T_VARIABLE","$url",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$data",264],",",["T_WHITESPACE"," ",264],["T_STRING","WebapiDecorator",264],["T_DOUBLE_COLON","::",264],["T_STRING","PUT",264],")",";",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$response",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","json_decode",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","webapiTransport",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","read",265],"(",")",",",["T_WHITESPACE"," ",265],["T_STRING","true",265],")",";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","webapiTransport",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","close",266],"(",")",";",["T_WHITESPACE","\n        ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(","!",["T_STRING","is_numeric",267],"(",["T_VARIABLE","$response",267],")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","eventManager",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","dispatchEvent",268],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",268],"]",",",["T_WHITESPACE"," ",268],"[",["T_VARIABLE","$response",268],"]",")",";",["T_WHITESPACE","\n            ",268],["T_THROW","throw",269],["T_WHITESPACE"," ",269],["T_NEW","new",269],["T_WHITESPACE"," ",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Exception",269],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not set payment method to quote!'",269],")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Place order.\n     *\n     * @return array\n     * @throws \\Exception\n     *\/",273],["T_WHITESPACE","\n    ",278],["T_PROTECTED","protected",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","placeOrder",279],"(",")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$url",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","url",281],["T_WHITESPACE"," ",281],".",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'\/order'",281],";",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$data",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],"[",["T_CONSTANT_ENCAPSED_STRING","\"cartId\"",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","quote",282],"]",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","webapiTransport",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","write",283],"(",["T_VARIABLE","$url",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$data",283],",",["T_WHITESPACE"," ",283],["T_STRING","WebapiDecorator",283],["T_DOUBLE_COLON","::",283],["T_STRING","PUT",283],")",";",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$response",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","json_decode",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","webapiTransport",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","read",284],"(",")",",",["T_WHITESPACE"," ",284],["T_STRING","true",284],")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","webapiTransport",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","close",285],"(",")",";",["T_WHITESPACE","\n        ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(","!",["T_STRING","is_numeric",286],"(",["T_VARIABLE","$response",286],")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","eventManager",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","dispatchEvent",287],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",287],"]",",",["T_WHITESPACE"," ",287],"[",["T_VARIABLE","$response",287],"]",")",";",["T_WHITESPACE","\n            ",287],["T_THROW","throw",288],["T_WHITESPACE"," ",288],["T_NEW","new",288],["T_WHITESPACE"," ",288],["T_NS_SEPARATOR","\\",288],["T_STRING","Exception",288],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not place order via web API!'",288],")",";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n\n        ",289],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$response",291],";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Prepare configurable product options.\n     *\n     * @param ConfigurableProduct $product\n     * @return array\n     *\/",294],["T_WHITESPACE","\n    ",299],["T_PROTECTED","protected",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","prepareConfigurableOptions",300],"(",["T_STRING","ConfigurableProduct",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$product",300],")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$options",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],"[","]",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$attributesData",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$product",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getDataFieldConfig",303],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable_attributes_data'",303],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",303],"]",["T_OBJECT_OPERATOR","->",303],["T_STRING","getAttributesData",303],"(",")",";",["T_WHITESPACE","\n        ",303],["T_FOREACH","foreach",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$product",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getCheckoutData",304],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'options'",304],"]","[",["T_CONSTANT_ENCAPSED_STRING","'configurable_options'",304],"]",["T_WHITESPACE"," ",304],["T_AS","as",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$checkoutOption",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$options",305],"[","]",["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],"[",["T_WHITESPACE","\n                ",305],["T_CONSTANT_ENCAPSED_STRING","'option_id'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$attributesData",306],"[",["T_VARIABLE","$checkoutOption",306],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",306],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",306],"]",",",["T_WHITESPACE","\n                ",306],["T_CONSTANT_ENCAPSED_STRING","'option_value'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$attributesData",307],"[",["T_VARIABLE","$checkoutOption",307],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",307],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",307],"]","[",["T_VARIABLE","$checkoutOption",307],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",307],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",307],"]",",",["T_WHITESPACE","\n            ",307],"]",";",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n\n        ",309],["T_RETURN","return",311],["T_WHITESPACE"," ",311],"[",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],"[",["T_CONSTANT_ENCAPSED_STRING","'configurable_item_options'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$options",311],"]","]",";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Prepare bundle product options.\n     *\n     * @param BundleProduct $product\n     * @return array\n     *\/",314],["T_WHITESPACE","\n    ",319],["T_PROTECTED","protected",320],["T_WHITESPACE"," ",320],["T_FUNCTION","function",320],["T_WHITESPACE"," ",320],["T_STRING","prepareBundleOptions",320],"(",["T_STRING","BundleProduct",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$product",320],")",["T_WHITESPACE","\n    ",320],"{",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$options",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],"[","]",";",["T_WHITESPACE","\n        ",322],["T_FOREACH","foreach",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$product",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getCheckoutData",323],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'options'",323],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",323],"]",["T_WHITESPACE"," ",323],["T_AS","as",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$checkoutOption",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_FOREACH","foreach",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$product",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getBundleSelections",324],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",324],"]",["T_WHITESPACE"," ",324],["T_AS","as",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$productOption",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                ",324],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_STRING","strpos",325],"(",["T_VARIABLE","$productOption",325],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",325],"]",",",["T_WHITESPACE"," ",325],["T_VARIABLE","$checkoutOption",325],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",325],"]",")",["T_WHITESPACE"," ",325],["T_IS_NOT_IDENTICAL","!==",325],["T_WHITESPACE"," ",325],["T_STRING","false",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                    ",325],["T_VARIABLE","$option",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],"[","]",";",["T_WHITESPACE","\n                    ",326],["T_FOREACH","foreach",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$productOption",327],"[",["T_CONSTANT_ENCAPSED_STRING","'assigned_products'",327],"]",["T_WHITESPACE"," ",327],["T_AS","as",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$productData",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n                        ",327],["T_IF","if",328],["T_WHITESPACE"," ",328],"(",["T_STRING","strpos",328],"(",["T_VARIABLE","$productData",328],"[",["T_CONSTANT_ENCAPSED_STRING","'search_data'",328],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",328],"]",",",["T_WHITESPACE"," ",328],["T_VARIABLE","$checkoutOption",328],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",328],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",328],"]",")",["T_WHITESPACE"," ",328],["T_IS_NOT_IDENTICAL","!==",328],["T_WHITESPACE"," ",328],["T_STRING","false",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n                            ",328],["T_VARIABLE","$qty",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_ISSET","isset",329],"(",["T_VARIABLE","$checkoutOption",329],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",329],"]",")",["T_WHITESPACE","\n                                ",329],"?",["T_WHITESPACE"," ",330],["T_VARIABLE","$checkoutOption",330],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",330],"]",["T_WHITESPACE","\n                                ",330],":",["T_WHITESPACE"," ",331],["T_VARIABLE","$productData",331],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",331],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selection_qty'",331],"]",";",["T_WHITESPACE","\n                            ",331],["T_VARIABLE","$option",332],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",332],"]",["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$productData",332],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",332],"]",";",["T_WHITESPACE","\n                            ",332],["T_VARIABLE","$option",333],"[",["T_CONSTANT_ENCAPSED_STRING","'option_selections'",333],"]","[","]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$productData",333],"[",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",333],"]",";",["T_WHITESPACE","\n                            ",333],["T_VARIABLE","$option",334],"[",["T_CONSTANT_ENCAPSED_STRING","'option_qty'",334],"]",["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$qty",334],";",["T_WHITESPACE","\n                        ",334],"}",["T_WHITESPACE","\n                    ",335],"}",["T_WHITESPACE","\n                    ",336],["T_VARIABLE","$options",337],"[","]",["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$option",337],";",["T_WHITESPACE","\n                ",337],"}",["T_WHITESPACE","\n            ",338],"}",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE","\n\n        ",340],["T_RETURN","return",342],["T_WHITESPACE"," ",342],"[",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$options",342],"]","]",";",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE","\n\n    ",343],["T_DOC_COMMENT","\/**\n     * Prepare downloadable product options.\n     *\n     * @param DownloadableProduct $product\n     * @return array\n     *\/",345],["T_WHITESPACE","\n    ",350],["T_PROTECTED","protected",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","prepareDownloadableOptions",351],"(",["T_STRING","DownloadableProduct",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$product",351],")",["T_WHITESPACE","\n    ",351],"{",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$checkoutData",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$product",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getCheckoutData",353],"(",")",";",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$links",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],"[","]",";",["T_WHITESPACE","\n        ",354],["T_FOREACH","foreach",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$checkoutData",355],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",355],"]","[",["T_CONSTANT_ENCAPSED_STRING","'links'",355],"]",["T_WHITESPACE"," ",355],["T_AS","as",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$link",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$links",356],"[","]",["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$link",356],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",356],"]",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n\n        ",357],["T_RETURN","return",359],["T_WHITESPACE"," ",359],"[",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],"[",["T_CONSTANT_ENCAPSED_STRING","'downloadable_option'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],"[",["T_CONSTANT_ENCAPSED_STRING","'downloadable_links'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$links",359],"]","]","]",";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n\n    ",360],["T_DOC_COMMENT","\/**\n     * Prepare url for placing order in custom website.\n     *\n     * @param OrderInjectable $order\n     * @return string\n     *\/",362],["T_WHITESPACE","\n    ",367],["T_PRIVATE","private",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","prepareWebsiteUrl",368],"(",["T_STRING","OrderInjectable",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$order",368],")",["T_WHITESPACE","\n    ",368],"{",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$url",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'rest'",370],";",["T_WHITESPACE","\n        ",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(",["T_VARIABLE","$website",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$order",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getDataFieldConfig",371],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",371],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",371],"]",["T_OBJECT_OPERATOR","->",371],["T_STRING","getWebsite",371],"(",")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_VARIABLE","$store",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$order",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getDataFieldConfig",372],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",372],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",372],"]",["T_OBJECT_OPERATOR","->",372],["T_STRING","getStore",372],"(",")",";",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$url",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'websites\/'",373],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_VARIABLE","$website",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getCode",373],"(",")",["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'\/rest\/'",373],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_VARIABLE","$store",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getCode",373],"(",")",";",["T_WHITESPACE","\n        ",373],"}",["T_WHITESPACE","\n        ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$url",375],";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Retrieve order increment id.\n     *\n     * @param int $orderId\n     * @return string\n     * @throws \\Exception\n     *\/",378],["T_WHITESPACE","\n    ",384],["T_PRIVATE","private",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","getOrderIncrementId",385],"(",["T_VARIABLE","$orderId",385],")",["T_WHITESPACE","\n    ",385],"{",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$url",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$_ENV",387],"[",["T_CONSTANT_ENCAPSED_STRING","'app_frontend_url'",387],"]",["T_WHITESPACE"," ",387],".",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'rest\/V1\/orders\/'",387],["T_WHITESPACE"," ",387],".",["T_WHITESPACE"," ",387],["T_VARIABLE","$orderId",387],";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","webapiTransport",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","write",388],"(",["T_VARIABLE","$url",388],",",["T_WHITESPACE"," ",388],"[","]",",",["T_WHITESPACE"," ",388],["T_STRING","WebapiDecorator",388],["T_DOUBLE_COLON","::",388],["T_STRING","GET",388],")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$response",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","json_decode",389],"(",["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","webapiTransport",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","read",389],"(",")",",",["T_WHITESPACE"," ",389],["T_STRING","true",389],")",";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","webapiTransport",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","close",390],"(",")",";",["T_WHITESPACE","\n\n        ",390],["T_IF","if",392],["T_WHITESPACE"," ",392],"(","!",["T_VARIABLE","$response",392],"[",["T_CONSTANT_ENCAPSED_STRING","'increment_id'",392],"]",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n            ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","eventManager",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","dispatchEvent",393],"(","[",["T_CONSTANT_ENCAPSED_STRING","'webapi_failed'",393],"]",",",["T_WHITESPACE"," ",393],"[",["T_VARIABLE","$response",393],"]",")",";",["T_WHITESPACE","\n            ",393],["T_THROW","throw",394],["T_WHITESPACE"," ",394],["T_NEW","new",394],["T_WHITESPACE"," ",394],["T_NS_SEPARATOR","\\",394],["T_STRING","Exception",394],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not get order details using web API.'",394],")",";",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE","\n        ",395],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$response",396],"[",["T_CONSTANT_ENCAPSED_STRING","'increment_id'",396],"]",";",["T_WHITESPACE","\n    ",396],"}",["T_WHITESPACE","\n",397],"}",["T_WHITESPACE","\n",398]]
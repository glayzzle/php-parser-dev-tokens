[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Bundle",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Constraint",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Bundle",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","BundleProduct",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Page",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Product",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogProductView",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Checkout",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Page",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CheckoutCart",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Client",12],["T_NS_SEPARATOR","\\",12],["T_STRING","BrowserInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Constraint",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractConstraint",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Class AssertBundlePriceType\n *\/",15],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","AssertBundlePriceType",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","AbstractConstraint",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Product price type\n     *\n     * @var string\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$productPriceType",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'Yes'",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Assert that displayed price for bundle items on shopping cart page equals to passed from fixture.\n     *   Price for bundle items has two options:\n     *   1. Fixed (price of bundle product)\n     *   2. Dynamic (price of bundle item)\n     *\n     * @param CatalogProductView $catalogProductView\n     * @param BundleProduct $product\n     * @param CheckoutCart $checkoutCartView\n     * @param BrowserInterface $browser\n     * @param BundleProduct $originalProduct [optional]\n     * @return void\n     *\/",27],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","processAssert",40],"(",["T_WHITESPACE","\n        ",40],["T_STRING","CatalogProductView",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$catalogProductView",41],",",["T_WHITESPACE","\n        ",41],["T_STRING","BundleProduct",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$product",42],",",["T_WHITESPACE","\n        ",42],["T_STRING","CheckoutCart",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$checkoutCartView",43],",",["T_WHITESPACE","\n        ",43],["T_STRING","BrowserInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$browser",44],",",["T_WHITESPACE","\n        ",44],["T_STRING","BundleProduct",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$originalProduct",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],["T_WHITESPACE","\n    ",45],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$checkoutCartView",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","open",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","getCartBlock",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","clearShoppingCart",47],"(",")",";",["T_WHITESPACE","\n        ",47],["T_COMMENT","\/\/Open product view page\n",48],["T_WHITESPACE","        ",49],["T_VARIABLE","$browser",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","open",49],"(",["T_VARIABLE","$_ENV",49],"[",["T_CONSTANT_ENCAPSED_STRING","'app_frontend_url'",49],"]",["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_VARIABLE","$product",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getUrlKey",49],"(",")",["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'.html'",49],")",";",["T_WHITESPACE","\n\n        ",49],["T_COMMENT","\/\/Process assertions\n",51],["T_WHITESPACE","        ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertPrice",52],"(",["T_VARIABLE","$product",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$catalogProductView",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$checkoutCartView",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$originalProduct",52],")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Assert prices on the product view page and shopping cart page.\n     *\n     * @param BundleProduct $product\n     * @param CatalogProductView $catalogProductView\n     * @param CheckoutCart $checkoutCartView\n     * @param BundleProduct $originalProduct [optional]\n     * @return void\n     *\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",55],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","assertPrice",66],"(",["T_WHITESPACE","\n        ",66],["T_STRING","BundleProduct",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$product",67],",",["T_WHITESPACE","\n        ",67],["T_STRING","CatalogProductView",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$catalogProductView",68],",",["T_WHITESPACE","\n        ",68],["T_STRING","CheckoutCart",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$checkoutCartView",69],",",["T_WHITESPACE","\n        ",69],["T_STRING","BundleProduct",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$originalProduct",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","null",70],["T_WHITESPACE","\n    ",70],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$bundleData",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$product",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getData",72],"(",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","productPriceType",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$originalProduct",73],["T_WHITESPACE"," ",73],["T_IS_NOT_IDENTICAL","!==",73],["T_WHITESPACE"," ",73],["T_STRING","null",73],["T_WHITESPACE","\n            ",73],"?",["T_WHITESPACE"," ",74],["T_VARIABLE","$originalProduct",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getPriceType",74],"(",")",["T_WHITESPACE","\n            ",74],":",["T_WHITESPACE"," ",75],["T_VARIABLE","$product",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getPriceType",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$catalogProductView",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getViewBlock",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","addToCart",76],"(",["T_VARIABLE","$product",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$catalogProductView",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getMessagesBlock",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","waitSuccessMessage",77],"(",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$checkoutCartView",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","open",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$cartItem",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$checkoutCartView",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getCartBlock",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getCartItem",79],"(",["T_VARIABLE","$product",79],")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$specialPrice",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_LNUMBER","0",80],";",["T_WHITESPACE","\n\n        ",80],["T_VARIABLE","$optionPrice",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],"[","]",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$fillData",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$product",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getCheckoutData",83],"(",")",";",["T_WHITESPACE","\n        ",83],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$fillData",84],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",84],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",84],"]",["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$key",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$data",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$subProductPrice",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],";",["T_WHITESPACE","\n            ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$bundleData",86],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_selections'",86],"]","[",["T_CONSTANT_ENCAPSED_STRING","'products'",86],"]","[",["T_VARIABLE","$key",86],"]",["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$productKey",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$itemProduct",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_STRING","strpos",87],"(",["T_VARIABLE","$itemProduct",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getName",87],"(",")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$data",87],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",87],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",87],"]",")",["T_WHITESPACE"," ",87],["T_IS_NOT_IDENTICAL","!==",87],["T_WHITESPACE"," ",87],["T_STRING","false",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                    ",87],["T_VARIABLE","$data",88],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",88],"]","[",["T_CONSTANT_ENCAPSED_STRING","'key'",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$productKey",88],";",["T_WHITESPACE","\n                    ",88],["T_VARIABLE","$subProductPrice",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$itemProduct",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getPrice",89],"(",")",";",["T_WHITESPACE","\n                ",89],"}",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n\n            ",91],["T_VARIABLE","$optionPrice",93],"[",["T_VARIABLE","$key",93],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",93],"]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","productPriceType",93],["T_WHITESPACE"," ",93],["T_IS_EQUAL","==",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'No'",93],["T_WHITESPACE","\n                ",93],"?",["T_WHITESPACE"," ",94],["T_STRING","number_format",94],"(",["T_WHITESPACE","\n                    ",94],["T_VARIABLE","$bundleData",95],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_selections'",95],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",95],"]","[",["T_VARIABLE","$key",95],"]","[",["T_CONSTANT_ENCAPSED_STRING","'assigned_products'",95],"]","[",["T_VARIABLE","$data",95],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",95],"]","[",["T_CONSTANT_ENCAPSED_STRING","'key'",95],"]","]",["T_WHITESPACE","\n                    ",95],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",96],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selection_price_value'",96],"]",",",["T_WHITESPACE","\n                    ",96],["T_LNUMBER","2",97],["T_WHITESPACE","\n                ",97],")",["T_WHITESPACE","\n                ",98],":",["T_WHITESPACE"," ",99],["T_STRING","number_format",99],"(",["T_VARIABLE","$subProductPrice",99],",",["T_WHITESPACE"," ",99],["T_LNUMBER","2",99],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_FOREACH","foreach",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$optionPrice",102],["T_WHITESPACE"," ",102],["T_AS","as",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$index",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$item",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$item",103],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",103],"]",["T_WHITESPACE"," ",103],["T_MINUS_EQUAL","-=",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$item",103],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",103],"]",["T_WHITESPACE"," ",103],"*",["T_WHITESPACE"," ",103],["T_VARIABLE","$specialPrice",103],";",["T_WHITESPACE","\n            ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","PHPUnit_Framework_Assert",104],["T_DOUBLE_COLON","::",104],["T_STRING","assertEquals",104],"(",["T_WHITESPACE","\n                ",104],["T_STRING","number_format",105],"(",["T_VARIABLE","$item",105],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",105],"]",",",["T_WHITESPACE"," ",105],["T_LNUMBER","2",105],")",",",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$cartItem",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getPriceBundleOptions",106],"(",["T_VARIABLE","$index",106],["T_WHITESPACE"," ",106],"+",["T_WHITESPACE"," ",106],["T_LNUMBER","1",106],")",",",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'Bundle item '",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$index",107],["T_WHITESPACE"," ",107],"+",["T_WHITESPACE"," ",107],["T_LNUMBER","1",107],")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","' options on frontend don\\'t equal to fixture.'",107],["T_WHITESPACE","\n            ",107],")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$sumOptionsPrice",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$product",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getDataFieldConfig",110],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",110],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",110],"]",["T_OBJECT_OPERATOR","->",110],["T_STRING","getPriceData",110],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'cart_price'",110],"]",";",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$subTotal",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","number_format",112],"(",["T_VARIABLE","$cartItem",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getPrice",112],"(",")",",",["T_WHITESPACE"," ",112],["T_LNUMBER","2",112],")",";",["T_WHITESPACE","\n        ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","PHPUnit_Framework_Assert",113],["T_DOUBLE_COLON","::",113],["T_STRING","assertEquals",113],"(",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$sumOptionsPrice",114],",",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$subTotal",115],",",["T_WHITESPACE","\n            ",115],["T_CONSTANT_ENCAPSED_STRING","'Bundle unit price on frontend doesn\\'t equal to fixture.'",116],["T_WHITESPACE","\n        ",116],")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Returns a string representation of the object\n     *\n     * @return string\n     *\/",120],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","toString",125],"(",")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'Bundle price on shopping cart page is not correct.'",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n",128],"}",["T_WHITESPACE","\n",129]]
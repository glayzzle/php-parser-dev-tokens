[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CatalogRule",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TestCase",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogRule",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogRule",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Fixture",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CatalogProductSimple",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Customer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Test",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Fixture",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CustomerGroup",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Steps:\n * 1. Log in as default admin user.\n * 2. Go to Marketing > Catalog Price Rules.\n * 3. Press \"+\" button to start create new catalog price rule.\n * 4. Fill in all data according to data set.\n * 5. Save rule.\n * 6. Perform appropriate assertions.\n *\n * @group Catalog_Price_Rules\n * @ZephyrId MAGETWO-24341\n *\/",14],["T_WHITESPACE","\n",25],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","CreateCatalogPriceRuleEntityTest",26],["T_WHITESPACE"," ",26],["T_EXTENDS","extends",26],["T_WHITESPACE"," ",26],["T_STRING","AbstractCatalogRuleEntityTest",26],["T_WHITESPACE","\n",26],"{",["T_WHITESPACE","\n    ",27],["T_COMMENT","\/* tags *\/",28],["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","TEST_TYPE",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'acceptance_test, extended_acceptance_test'",29],";",["T_WHITESPACE","\n    ",29],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","MVP",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'yes'",30],";",["T_WHITESPACE","\n    ",30],["T_COMMENT","\/* end tags *\/",31],["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Create Catalog Price Rule.\n     *\n     * @param CatalogRule $catalogPriceRule\n     * @param string $product\n     * @param string $conditionEntity\n     * @param Customer $customer\n     * @return array\n     *\/",33],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","test",42],"(",["T_WHITESPACE","\n        ",42],["T_STRING","CatalogRule",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$catalogPriceRule",43],",",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$product",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],",",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$conditionEntity",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],",",["T_WHITESPACE","\n        ",45],["T_STRING","Customer",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$customer",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],["T_WHITESPACE","\n    ",46],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n        ",47],["T_COMMENT","\/\/ Prepare data\n",48],["T_WHITESPACE","        ",49],["T_DOC_COMMENT","\/** @var CatalogProductSimple $productSimple *\/",49],["T_WHITESPACE","\n        ",49],["T_VARIABLE","$productSimple",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","fixtureFactory",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","createByCode",50],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogProductSimple'",50],",",["T_WHITESPACE"," ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'dataset'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$product",50],"]",")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$catalogPriceRule",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","applyCustomerGroup",51],"(",["T_VARIABLE","$catalogPriceRule",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$customer",51],")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$replace",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","prepareCondition",52],"(",["T_VARIABLE","$productSimple",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$conditionEntity",52],")",";",["T_WHITESPACE","\n\n        ",52],["T_COMMENT","\/\/ Steps\n",54],["T_WHITESPACE","        ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","catalogRuleIndex",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","open",55],"(",")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","catalogRuleIndex",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getGridPageActions",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","addNew",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","catalogRuleNew",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getEditForm",57],"(",")",["T_OBJECT_OPERATOR","->",57],["T_STRING","fill",57],"(",["T_VARIABLE","$catalogPriceRule",57],",",["T_WHITESPACE"," ",57],["T_STRING","null",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$replace",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","catalogRuleNew",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getFormPageActions",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","save",58],"(",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Create customer with customer group and apply customer group to catalog price rule.\n     *\n     * @param CatalogRule $catalogPriceRule\n     * @param Customer|null $customer\n     * @return array\n     *\/",61],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","applyCustomerGroup",68],"(",["T_STRING","CatalogRule",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$catalogPriceRule",68],",",["T_WHITESPACE"," ",68],["T_STRING","Customer",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$customer",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","null",68],")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$customer",70],["T_WHITESPACE"," ",70],["T_IS_NOT_IDENTICAL","!==",70],["T_WHITESPACE"," ",70],["T_STRING","null",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$customer",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","persist",71],"(",")",";",["T_WHITESPACE","\n            ",71],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Test\\Fixture\\CustomerGroup $customerGroup *\/",72],["T_WHITESPACE","\n            ",72],["T_VARIABLE","$customerGroup",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$customer",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getDataFieldConfig",73],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",73],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",73],"]",["T_OBJECT_OPERATOR","->",73],["T_STRING","getCustomerGroup",73],"(",")",";",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$catalogPriceRule",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","fixtureFactory",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","createByCode",74],"(",["T_WHITESPACE","\n                ",74],["T_CONSTANT_ENCAPSED_STRING","'catalogRule'",75],",",["T_WHITESPACE","\n                ",75],"[",["T_WHITESPACE","\n                    ",76],["T_CONSTANT_ENCAPSED_STRING","'data'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_STRING","array_merge",77],"(",["T_WHITESPACE","\n                        ",77],["T_VARIABLE","$catalogPriceRule",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getData",78],"(",")",",",["T_WHITESPACE","\n                        ",78],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$customerGroup",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getCustomerGroupCode",79],"(",")","]",["T_WHITESPACE","\n                    ",79],")",["T_WHITESPACE","\n                ",80],"]",["T_WHITESPACE","\n            ",81],")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$catalogPriceRule",85],";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Prepare condition for catalog price rule.\n     *\n     * @param CatalogProductSimple $productSimple\n     * @param string $conditionEntity\n     * @return array\n     *\/",88],["T_WHITESPACE","\n    ",94],["T_PRIVATE","private",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","prepareCondition",95],"(",["T_STRING","CatalogProductSimple",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$productSimple",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$conditionEntity",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$result",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],"[","]",";",["T_WHITESPACE","\n\n        ",97],["T_SWITCH","switch",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$conditionEntity",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_CASE","case",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'category'",100],":",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$result",101],"[",["T_CONSTANT_ENCAPSED_STRING","'%category_id%'",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$productSimple",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getDataFieldConfig",101],"(",["T_CONSTANT_ENCAPSED_STRING","'category_ids'",101],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",101],"]",["T_OBJECT_OPERATOR","->",101],["T_STRING","getIds",101],"(",")","[",["T_LNUMBER","0",101],"]",";",["T_WHITESPACE","\n                ",101],["T_BREAK","break",102],";",["T_WHITESPACE","\n            ",102],["T_CASE","case",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'attribute'",103],":",["T_WHITESPACE","\n                ",103],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Test\\Fixture\\CatalogProductAttribute[] $attrs *\/",104],["T_WHITESPACE","\n                ",104],["T_VARIABLE","$attributes",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$productSimple",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getDataFieldConfig",105],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",105],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",105],"]",["T_WHITESPACE","\n                    ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","getAttributeSet",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","getDataFieldConfig",106],"(",["T_CONSTANT_ENCAPSED_STRING","'assigned_attributes'",106],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",106],"]",["T_OBJECT_OPERATOR","->",106],["T_STRING","getAttributes",106],"(",")",";",["T_WHITESPACE","\n\n                ",106],["T_VARIABLE","$result",108],"[",["T_CONSTANT_ENCAPSED_STRING","'%attribute_name%'",108],"]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$attributes",108],"[",["T_LNUMBER","0",108],"]",["T_OBJECT_OPERATOR","->",108],["T_STRING","getFrontendLabel",108],"(",")",";",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$result",109],"[",["T_CONSTANT_ENCAPSED_STRING","'%attribute_value%'",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$attributes",109],"[",["T_LNUMBER","0",109],"]",["T_OBJECT_OPERATOR","->",109],["T_STRING","getOptions",109],"(",")","[",["T_LNUMBER","0",109],"]","[",["T_CONSTANT_ENCAPSED_STRING","'view'",109],"]",";",["T_WHITESPACE","\n                ",109],["T_BREAK","break",110],";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n\n        ",111],["T_RETURN","return",113],["T_WHITESPACE"," ",113],"[",["T_WHITESPACE","\n            ",113],["T_CONSTANT_ENCAPSED_STRING","'conditions'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],"[",["T_WHITESPACE","\n                ",114],["T_CONSTANT_ENCAPSED_STRING","'conditions'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$result",115],",",["T_WHITESPACE","\n            ",115],"]",",",["T_WHITESPACE","\n        ",116],"]",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n",118],"}",["T_WHITESPACE","\n",119]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tax",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Constraint",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Fixture",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogProductSimple",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Page",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Product",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogProductView",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Checkout",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Page",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CheckoutCart",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Customer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Test",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Fixture",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Address",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Customer",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Test",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Fixture",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Customer",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Tax",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Test",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Fixture",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TaxRule",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Mtf",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Client",15],["T_NS_SEPARATOR","\\",15],["T_STRING","BrowserInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Mtf",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Constraint",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractConstraint",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Mtf",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Fixture",17],["T_NS_SEPARATOR","\\",17],["T_STRING","FixtureFactory",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Abstract class for implementing assert applying.\n *\/",19],["T_WHITESPACE","\n",21],["T_ABSTRACT","abstract",22],["T_WHITESPACE"," ",22],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","AssertTaxRuleApplying",22],["T_WHITESPACE"," ",22],["T_EXTENDS","extends",22],["T_WHITESPACE"," ",22],["T_STRING","AbstractConstraint",22],["T_WHITESPACE","\n",22],"{",["T_WHITESPACE","\n    ",23],["T_DOC_COMMENT","\/**\n     * Initial tax rule.\n     *\n     * @var TaxRule\n     *\/",24],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$initialTaxRule",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * Tax rule.\n     *\n     * @var TaxRule\n     *\/",31],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$taxRule",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Product simple.\n     *\n     * @var CatalogProductSimple\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$productSimple",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Checkout cart page.\n     *\n     * @var CheckoutCart\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$checkoutCart",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Shipping carrier and method.\n     *\n     * @var array\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$shipping",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Tax Rule name.\n     *\n     * @var string\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$taxRuleCode",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Implementation assert.\n     *\n     * @return void\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_ABSTRACT","abstract",71],["T_WHITESPACE"," ",71],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","assert",71],"(",")",";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * 1. Creating product simple with custom tax product class.\n     * 2. Log In as customer.\n     * 3. Add product to shopping cart.\n     * 4. Estimate Shipping and Tax.\n     * 5. Implementation assert.\n     *\n     * @param FixtureFactory $fixtureFactory\n     * @param TaxRule $taxRule\n     * @param Customer $customer\n     * @param CatalogProductView $catalogProductView\n     * @param CheckoutCart $checkoutCart\n     * @param Address $address\n     * @param array $shipping\n     * @param BrowserInterface $browser\n     * @param TaxRule $initialTaxRule\n     * @return void\n     *\/",73],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","processAssert",91],"(",["T_WHITESPACE","\n        ",91],["T_STRING","FixtureFactory",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$fixtureFactory",92],",",["T_WHITESPACE","\n        ",92],["T_STRING","TaxRule",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$taxRule",93],",",["T_WHITESPACE","\n        ",93],["T_STRING","Customer",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$customer",94],",",["T_WHITESPACE","\n        ",94],["T_STRING","CatalogProductView",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$catalogProductView",95],",",["T_WHITESPACE","\n        ",95],["T_STRING","CheckoutCart",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$checkoutCart",96],",",["T_WHITESPACE","\n        ",96],["T_STRING","Address",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$address",97],",",["T_WHITESPACE","\n        ",97],["T_ARRAY","array",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$shipping",98],",",["T_WHITESPACE","\n        ",98],["T_STRING","BrowserInterface",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$browser",99],",",["T_WHITESPACE","\n        ",99],["T_STRING","TaxRule",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$initialTaxRule",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","null",100],["T_WHITESPACE","\n    ",100],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","initialTaxRule",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$initialTaxRule",102],";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","taxRule",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$taxRule",103],";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","checkoutCart",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$checkoutCart",104],";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","shipping",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$shipping",105],";",["T_WHITESPACE","\n\n        ",105],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","initialTaxRule",107],["T_WHITESPACE"," ",107],["T_IS_NOT_IDENTICAL","!==",107],["T_WHITESPACE"," ",107],["T_STRING","null",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","taxRuleCode",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","taxRule",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","hasData",108],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",108],")",")",["T_WHITESPACE","\n                ",108],"?",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","taxRule",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getCode",109],"(",")",["T_WHITESPACE","\n                ",109],":",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","initialTaxRule",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getCode",110],"(",")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE"," ",111],["T_ELSE","else",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","taxRuleCode",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","taxRule",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getCode",112],"(",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n        ",113],["T_COMMENT","\/\/ Creating simple product with custom tax class\n",114],["T_WHITESPACE","        ",115],["T_DOC_COMMENT","\/** @var \\Magento\\Tax\\Test\\Fixture\\TaxClass $taxProductClass *\/",115],["T_WHITESPACE","\n        ",115],["T_VARIABLE","$taxProductClass",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$taxRule",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getDataFieldConfig",116],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_product_class'",116],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",116],"]",["T_OBJECT_OPERATOR","->",116],["T_STRING","getFixture",116],"(",")","[",["T_LNUMBER","0",116],"]",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","productSimple",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$fixtureFactory",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","createByCode",117],"(",["T_WHITESPACE","\n            ",117],["T_CONSTANT_ENCAPSED_STRING","'catalogProductSimple'",118],",",["T_WHITESPACE","\n            ",118],"[",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'dataset'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'product_100_dollar_for_tax_rule'",120],",",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'data'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],"[",["T_WHITESPACE","\n                    ",121],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_product_class'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$taxProductClass",122],"]",",",["T_WHITESPACE","\n                ",122],"]",["T_WHITESPACE","\n            ",123],"]",["T_WHITESPACE","\n        ",124],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","productSimple",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","persist",126],"(",")",";",["T_WHITESPACE","\n        ",126],["T_COMMENT","\/\/ Customer login\n",127],["T_WHITESPACE","        ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","objectManager",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","create",128],"(",["T_WHITESPACE","\n            ",128],["T_NS_SEPARATOR","\\",129],["T_STRING","Magento",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Customer",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Test",129],["T_NS_SEPARATOR","\\",129],["T_STRING","TestStep",129],["T_NS_SEPARATOR","\\",129],["T_STRING","LoginCustomerOnFrontendStep",129],["T_DOUBLE_COLON","::",129],["T_CLASS","class",129],",",["T_WHITESPACE","\n            ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'customer'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$customer",130],"]",["T_WHITESPACE","\n        ",130],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","run",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_COMMENT","\/\/ Clearing shopping cart and adding product to shopping cart\n",132],["T_WHITESPACE","        ",133],["T_VARIABLE","$checkoutCart",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","open",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getCartBlock",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","clearShoppingCart",133],"(",")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$browser",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","open",134],"(",["T_VARIABLE","$_ENV",134],"[",["T_CONSTANT_ENCAPSED_STRING","'app_frontend_url'",134],"]",["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","productSimple",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getUrlKey",134],"(",")",["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'.html'",134],")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$catalogProductView",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getViewBlock",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","clickAddToCart",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$catalogProductView",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getMessagesBlock",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","waitSuccessMessage",136],"(",")",";",["T_WHITESPACE","\n        ",136],["T_COMMENT","\/\/ Estimate Shipping and Tax\n",137],["T_WHITESPACE","        ",138],["T_VARIABLE","$checkoutCart",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","open",138],"(",")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$checkoutCart",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getShippingBlock",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","fillEstimateShippingAndTax",139],"(",["T_VARIABLE","$address",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$checkoutCart",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getShippingBlock",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","selectShippingMethod",140],"(",["T_VARIABLE","$shipping",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assert",141],"(",")",";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n",142],"}",["T_WHITESPACE","\n",143]]
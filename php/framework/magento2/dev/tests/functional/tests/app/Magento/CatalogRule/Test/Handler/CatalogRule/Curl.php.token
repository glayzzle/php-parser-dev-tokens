[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CatalogRule",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Handler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CatalogRule",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Backend",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Test",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Handler",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Conditions",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogRule",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Handler",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogRule",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Mtf",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Fixture",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FixtureInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Util",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Protocol",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CurlInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Util",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Protocol",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CurlTransport",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Mtf",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Util",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Protocol",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CurlTransport",14],["T_NS_SEPARATOR","\\",14],["T_STRING","BackendDecorator",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Class Curl\n * Curl that creates catalog price rule\n *\/",16],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Curl",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","Conditions",20],["T_WHITESPACE"," ",20],["T_IMPLEMENTS","implements",20],["T_WHITESPACE"," ",20],["T_STRING","CatalogRuleInterface",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * Map of type parameter\n     *\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$mapTypeParams",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[",["T_WHITESPACE","\n        ",27],["T_CONSTANT_ENCAPSED_STRING","'Conditions combination'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],"[",["T_WHITESPACE","\n            ",28],["T_CONSTANT_ENCAPSED_STRING","'type'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","CatalogRule",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Model",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Rule",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Condition",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Combine",29],["T_DOUBLE_COLON","::",29],["T_CLASS","class",29],",",["T_WHITESPACE","\n            ",29],["T_CONSTANT_ENCAPSED_STRING","'aggregator'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'all'",30],",",["T_WHITESPACE","\n            ",30],["T_CONSTANT_ENCAPSED_STRING","'value'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_LNUMBER","1",31],",",["T_WHITESPACE","\n        ",31],"]",",",["T_WHITESPACE","\n        ",32],["T_CONSTANT_ENCAPSED_STRING","'Category'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],"[",["T_WHITESPACE","\n            ",33],["T_CONSTANT_ENCAPSED_STRING","'type'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","CatalogRule",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Model",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Rule",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Condition",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Product",34],["T_DOUBLE_COLON","::",34],["T_CLASS","class",34],",",["T_WHITESPACE","\n            ",34],["T_CONSTANT_ENCAPSED_STRING","'attribute'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",35],",",["T_WHITESPACE","\n        ",35],"]",",",["T_WHITESPACE","\n        ",36],["T_CONSTANT_ENCAPSED_STRING","'Attribute'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],"[",["T_WHITESPACE","\n            ",37],["T_CONSTANT_ENCAPSED_STRING","'type'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","CatalogRule",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Model",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Rule",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Condition",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Product",38],["T_DOUBLE_COLON","::",38],["T_CLASS","class",38],",",["T_WHITESPACE","\n            ",38],["T_CONSTANT_ENCAPSED_STRING","'attribute'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",39],",",["T_WHITESPACE","\n        ",39],"]",",",["T_WHITESPACE","\n    ",40],"]",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$mappingData",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],"[",["T_WHITESPACE","\n        ",48],["T_CONSTANT_ENCAPSED_STRING","'simple_action'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],"[",["T_WHITESPACE","\n            ",49],["T_CONSTANT_ENCAPSED_STRING","'Apply as percentage of original'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'by_percent'",50],",",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'Apply as fixed amount'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'by_fixed'",51],",",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'Adjust final price to this percentage'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'to_percent'",52],",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'Adjust final price to discount value'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'to_fixed'",53],",",["T_WHITESPACE","\n        ",53],"]",",",["T_WHITESPACE","\n        ",54],["T_CONSTANT_ENCAPSED_STRING","'is_active'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],"[",["T_WHITESPACE","\n            ",55],["T_CONSTANT_ENCAPSED_STRING","'Active'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_LNUMBER","1",56],",",["T_WHITESPACE","\n            ",56],["T_CONSTANT_ENCAPSED_STRING","'Inactive'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_LNUMBER","0",57],",",["T_WHITESPACE","\n        ",57],"]",",",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'stop_rules_processing'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],"[",["T_WHITESPACE","\n            ",59],["T_CONSTANT_ENCAPSED_STRING","'Yes'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_LNUMBER","1",60],",",["T_WHITESPACE","\n            ",60],["T_CONSTANT_ENCAPSED_STRING","'No'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_LNUMBER","0",61],",",["T_WHITESPACE","\n        ",61],"]",",",["T_WHITESPACE","\n    ",62],"]",";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Mapping values for Websites\n     *\n     * @var array\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$websiteIds",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"[",["T_WHITESPACE","\n        ",70],["T_CONSTANT_ENCAPSED_STRING","'Main Website'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_LNUMBER","1",71],",",["T_WHITESPACE","\n    ",71],"]",";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Mapping values for Customer Groups\n     *\n     * @var array\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$customerGroupIds",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[",["T_WHITESPACE","\n        ",79],["T_CONSTANT_ENCAPSED_STRING","'NOT LOGGED IN'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_LNUMBER","0",80],",",["T_WHITESPACE","\n        ",80],["T_CONSTANT_ENCAPSED_STRING","'General'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],",",["T_WHITESPACE","\n        ",81],["T_CONSTANT_ENCAPSED_STRING","'Wholesale'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_LNUMBER","2",82],",",["T_WHITESPACE","\n        ",82],["T_CONSTANT_ENCAPSED_STRING","'Retailer'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_LNUMBER","3",83],",",["T_WHITESPACE","\n    ",83],"]",";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * POST request for creating Catalog Price Rule\n     *\n     * @param FixtureInterface $fixture\n     * @return mixed|void\n     * @throws \\Exception\n     *\/",86],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","persist",93],"(",["T_STRING","FixtureInterface",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$fixture",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","null",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$data",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","prepareData",95],"(",["T_VARIABLE","$fixture",95],")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$url",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$_ENV",96],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",96],"]",["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'catalog_rule\/promo_catalog\/save\/'",96],";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$curl",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","BackendDecorator",97],"(",["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","CurlTransport",97],"(",")",",",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_configuration",97],")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$curl",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","addOption",98],"(",["T_STRING","CURLOPT_HEADER",98],",",["T_WHITESPACE"," ",98],["T_LNUMBER","1",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$curl",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","write",99],"(",["T_VARIABLE","$url",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$data",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$response",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$curl",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","read",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$curl",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","close",101],"(",")",";",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_STRING","strpos",103],"(",["T_VARIABLE","$response",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'data-ui-id=\"messages-message-success\"'",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_THROW","throw",104],["T_WHITESPACE"," ",104],["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Exception",104],"(",["T_WHITESPACE","\n                ",104],"\"",["T_ENCAPSED_AND_WHITESPACE","Catalog Price Rule entity creating by curl handler was not successful! Response: ",105],["T_VARIABLE","$response",105],"\"",["T_WHITESPACE","\n            ",105],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getCategoryPriceRuleId",109],"(",["T_VARIABLE","$data",109],")","]",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Prepare data from text to values\n     *\n     * @param FixtureInterface $fixture\n     * @return array\n     *\/",112],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","prepareData",118],"(",["T_VARIABLE","$fixture",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$data",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","replaceMappingData",120],"(",["T_VARIABLE","$fixture",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getData",120],"(",")",")",";",["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_ISSET","isset",121],"(",["T_VARIABLE","$data",121],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",121],"]",")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$websiteIds",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],"[","]",";",["T_WHITESPACE","\n            ",122],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$data",123],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",123],"]",["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$websiteId",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$websiteIds",124],"[","]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ISSET","isset",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","websiteIds",124],"[",["T_VARIABLE","$websiteId",124],"]",")",["T_WHITESPACE"," ",124],"?",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","websiteIds",124],"[",["T_VARIABLE","$websiteId",124],"]",["T_WHITESPACE"," ",124],":",["T_WHITESPACE"," ",124],["T_VARIABLE","$websiteId",124],";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$data",126],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$websiteIds",126],";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_ISSET","isset",128],"(",["T_VARIABLE","$data",128],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",128],"]",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$customerGroupIds",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],"[","]",";",["T_WHITESPACE","\n            ",129],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$data",130],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",130],"]",["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$customerGroupId",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$customerGroupIds",131],"[","]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_ISSET","isset",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","customerGroupIds",131],"[",["T_VARIABLE","$customerGroupId",131],"]",")",["T_WHITESPACE","\n                    ",131],"?",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","customerGroupIds",132],"[",["T_VARIABLE","$customerGroupId",132],"]",["T_WHITESPACE","\n                    ",132],":",["T_WHITESPACE"," ",133],["T_VARIABLE","$customerGroupId",133],";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$data",135],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$customerGroupIds",135],";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n        ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_ISSET","isset",137],"(",["T_VARIABLE","$data",137],"[",["T_CONSTANT_ENCAPSED_STRING","'stop_rules_processing'",137],"]",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$data",138],"[",["T_CONSTANT_ENCAPSED_STRING","'stop_rules_processing'",138],"]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n\n        ",139],["T_IF","if",141],["T_WHITESPACE"," ",141],"(","!",["T_ISSET","isset",141],"(",["T_VARIABLE","$data",141],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",141],"]",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$data",142],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","null",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$data",144],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","prepareCondition",144],"(",["T_VARIABLE","$data",144],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",144],"]",")","]",";",["T_WHITESPACE","\n\n        ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$data",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Get id after creating Category Price Rule\n     *\n     * @param array $data\n     * @return mixed\n     * @throws \\Exception\n     *\/",149],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","getCategoryPriceRuleId",156],"(",["T_ARRAY","array",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$data",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_COMMENT","\/\/ Sort data in grid to define category price rule id if more than 20 items in grid\n",158],["T_WHITESPACE","        ",159],["T_VARIABLE","$url",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$_ENV",159],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",159],"]",["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'catalog_rule\/promo_catalog\/index\/sort\/rule_id\/dir\/desc'",159],";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$curl",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_NEW","new",160],["T_WHITESPACE"," ",160],["T_STRING","BackendDecorator",160],"(",["T_NEW","new",160],["T_WHITESPACE"," ",160],["T_STRING","CurlTransport",160],"(",")",",",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_configuration",160],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$curl",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","write",161],"(",["T_VARIABLE","$url",161],",",["T_WHITESPACE"," ",161],"[","]",",",["T_WHITESPACE"," ",161],["T_STRING","CurlInterface",161],["T_DOUBLE_COLON","::",161],["T_STRING","GET",161],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$response",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$curl",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","read",162],"(",")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$curl",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","close",163],"(",")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$pattern",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'\/col\\-rule_id[\\s\\W]*(\\d+).*?'",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_VARIABLE","$data",165],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",165],"]",["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'\/siu'",165],";",["T_WHITESPACE","\n        ",165],["T_STRING","preg_match",166],"(",["T_VARIABLE","$pattern",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$response",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$matches",166],")",";",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_EMPTY","empty",167],"(",["T_VARIABLE","$matches",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_THROW","throw",168],["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Exception",168],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot find Catalog Price Rule id! Response: '",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_VARIABLE","$response",168],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n\n        ",169],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$matches",171],"[",["T_LNUMBER","1",171],"]",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n",172],"}",["T_WHITESPACE","\n",173]]
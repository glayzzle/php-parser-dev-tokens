[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Indexer",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TestCase",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Mtf",9],["T_NS_SEPARATOR","\\",9],["T_STRING","TestCase",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Injectable",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogRule",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Fixture",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogRule",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Customer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Fixture",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Customer",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Mtf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Util",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Command",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Cli",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Cron",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Mtf",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TestStep",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TestStepFactory",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Mtf",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Util",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Command",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Cli",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Indexer",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Indexer",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Test",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Constraint",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AssertIndexerStatus",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","CatalogRule",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Test",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Constraint",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AssertCatalogPriceRuleNotAppliedProductPage",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","CatalogRule",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Test",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Constraint",17],["T_NS_SEPARATOR","\\",17],["T_STRING","AssertCatalogPriceRuleAppliedProductPage",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Indexer",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Test",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Page",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Adminhtml",18],["T_NS_SEPARATOR","\\",18],["T_STRING","IndexManagement",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Cms",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Test",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Page",19],["T_NS_SEPARATOR","\\",19],["T_STRING","CmsIndex",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Catalog",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Test",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Page",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Category",20],["T_NS_SEPARATOR","\\",20],["T_STRING","CatalogCategoryView",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Catalog",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Test",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Page",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Product",21],["T_NS_SEPARATOR","\\",21],["T_STRING","CatalogProductView",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Magento",22],["T_NS_SEPARATOR","\\",22],["T_STRING","CatalogRule",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Test",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Page",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Adminhtml",22],["T_NS_SEPARATOR","\\",22],["T_STRING","CatalogRuleIndex",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","CatalogRule",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Test",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Page",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Adminhtml",23],["T_NS_SEPARATOR","\\",23],["T_STRING","CatalogRuleNew",23],";",["T_WHITESPACE","\n",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Catalog",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Test",24],["T_NS_SEPARATOR","\\",24],["T_STRING","TestStep",24],["T_NS_SEPARATOR","\\",24],["T_STRING","CreateProductsStep",24],";",["T_WHITESPACE","\n\n",24],["T_DOC_COMMENT","\/**\n * Catalog rules indexer test.\n *\n * Preconditions:\n * 1. Create several products and categories.\n * 2. All indexers are reindexed and in READY state.\n *\n * Steps:\n * 1. Create catalog rule.\n * 2. Call an assert AssertIndexerStatus.\n * 3. Call an assert AssertCatalogPriceRuleNotAppliedProductPage.\n * 4. Apply catalog rule.\n * 5. Run cron twice.\n * 6. Call an assert AssertIndexerStatus.\n * 7. Call an assert AssertCatalogPriceRuleAppliedProductPage.\n * 8. Update catalog rule for new discount.\n * 9. Call an assert AssertIndexerStatus.\n * 10. Call an assert AssertCatalogPriceRuleNotAppliedProductPage.\n * 11. Run cron twice.\n * 12. Call an assert AssertIndexerStatus.\n * 13. Call an assert AssertCatalogPriceRuleAppliedProductPageDelete.\n * 14. Delete catalog rule.\n * 15. Call an assert AssertIndexerStatus.\n * 16. Call an assert AssertCatalogPriceRuleAppliedProductPage.\n * 17. Run cron twice.\n * 18. Call an assert AssertIndexerStatus.\n * 19. Call an assert AssertCatalogPriceRuleNotAppliedProductPage.\n *\n * @ZephyrId MAGETWO-39072\n * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",26],["T_WHITESPACE","\n",57],["T_CLASS","class",58],["T_WHITESPACE"," ",58],["T_STRING","CreateCatalogRulesIndexerTest",58],["T_WHITESPACE"," ",58],["T_EXTENDS","extends",58],["T_WHITESPACE"," ",58],["T_STRING","Injectable",58],["T_WHITESPACE","\n",58],"{",["T_WHITESPACE","\n    ",59],["T_DOC_COMMENT","\/**\n     * Catalog rule index page.\n     *\n     * @var CatalogRuleIndex\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PRIVATE","private",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$catalogRuleIndex",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * New catalog rule page.\n     *\n     * @var CatalogRuleNew\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PRIVATE","private",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$catalogRuleNew",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Index management page.\n     *\n     * @var IndexManagement\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PRIVATE","private",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$indexManagement",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Cms index page.\n     *\n     * @var CmsIndex\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PRIVATE","private",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$cmsIndexPage",86],";",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Catalog product view page.\n     *\n     * @var CatalogProductView\n     *\/",88],["T_WHITESPACE","\n    ",92],["T_PRIVATE","private",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$catalogProductViewPage",93],";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Catalog category view page.\n     *\n     * @var CatalogCategoryView\n     *\/",95],["T_WHITESPACE","\n    ",99],["T_PRIVATE","private",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$catalogCategoryViewPage",100],";",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Assert indexer status.\n     *\n     * @var AssertIndexerStatus\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PRIVATE","private",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$assertIndexerStatus",107],";",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Assert catalog price rule is not applied on product page.\n     *\n     * @var AssertCatalogPriceRuleNotAppliedProductPage\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PRIVATE","private",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$assertCatalogPriceRuleNotAppliedProductPage",114],";",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Assert catalog price rule applied on product page.\n     *\n     * @var AssertCatalogPriceRuleAppliedProductPage\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PRIVATE","private",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$assertCatalogPriceRuleAppliedProductPage",121],";",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Factory for Test Steps.\n     *\n     * @var TestStepFactory\n     *\/",123],["T_WHITESPACE","\n    ",127],["T_PRIVATE","private",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$stepFactory",128],";",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Injection data.\n     *\n     * @param IndexManagement $indexManagement\n     * @param CatalogRuleIndex $catalogRuleIndex\n     * @param CatalogRuleNew $catalogRuleNew\n     * @param CmsIndex $cmsIndexPage\n     * @param CatalogProductView $catalogProductViewPage\n     * @param CatalogCategoryView $catalogCategoryViewPage\n     * @param AssertIndexerStatus $assertIndexerStatus\n     * @param AssertCatalogPriceRuleNotAppliedProductPage $assertCatalogPriceRuleNotAppliedProductPage\n     * @param AssertCatalogPriceRuleAppliedProductPage $assertCatalogPriceRuleAppliedProductPage\n     * @param TestStepFactory $stepFactory\n     * @return void\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",130],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","__inject",146],"(",["T_WHITESPACE","\n        ",146],["T_STRING","IndexManagement",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$indexManagement",147],",",["T_WHITESPACE","\n        ",147],["T_STRING","CatalogRuleIndex",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$catalogRuleIndex",148],",",["T_WHITESPACE","\n        ",148],["T_STRING","CatalogRuleNew",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$catalogRuleNew",149],",",["T_WHITESPACE","\n        ",149],["T_STRING","CmsIndex",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$cmsIndexPage",150],",",["T_WHITESPACE","\n        ",150],["T_STRING","CatalogProductView",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$catalogProductViewPage",151],",",["T_WHITESPACE","\n        ",151],["T_STRING","CatalogCategoryView",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$catalogCategoryViewPage",152],",",["T_WHITESPACE","\n        ",152],["T_STRING","AssertIndexerStatus",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$assertIndexerStatus",153],",",["T_WHITESPACE","\n        ",153],["T_STRING","AssertCatalogPriceRuleNotAppliedProductPage",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$assertCatalogPriceRuleNotAppliedProductPage",154],",",["T_WHITESPACE","\n        ",154],["T_STRING","AssertCatalogPriceRuleAppliedProductPage",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$assertCatalogPriceRuleAppliedProductPage",155],",",["T_WHITESPACE","\n        ",155],["T_STRING","TestStepFactory",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$stepFactory",156],["T_WHITESPACE","\n    ",156],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","indexManagement",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$indexManagement",158],";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","catalogRuleIndex",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$catalogRuleIndex",159],";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","catalogRuleNew",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$catalogRuleNew",160],";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","cmsIndexPage",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$cmsIndexPage",161],";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","catalogProductViewPage",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$catalogProductViewPage",162],";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","catalogCategoryViewPage",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$catalogCategoryViewPage",163],";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","assertIndexerStatus",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$assertIndexerStatus",164],";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertCatalogPriceRuleNotAppliedProductPage",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$assertCatalogPriceRuleNotAppliedProductPage",165],";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertCatalogPriceRuleAppliedProductPage",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$assertCatalogPriceRuleAppliedProductPage",166],";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","stepFactory",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$stepFactory",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Catalog rules indexer test.\n     *\n     * @param Indexer $cli\n     * @param CatalogRule $catalogPriceRule\n     * @param CatalogRule $catalogPriceRuleOriginal\n     * @param Cron $cron\n     * @param array|null $productPrice1\n     * @param array|null $productPrice2\n     * @param Customer|null $customer\n     * @param array|null $products\n     * @param string|null $indexers\n     * @return void\n     *\/",170],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","test",184],"(",["T_WHITESPACE","\n        ",184],["T_STRING","Indexer",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$cli",185],",",["T_WHITESPACE","\n        ",185],["T_STRING","CatalogRule",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$catalogPriceRule",186],",",["T_WHITESPACE","\n        ",186],["T_STRING","CatalogRule",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$catalogPriceRuleOriginal",187],",",["T_WHITESPACE","\n        ",187],["T_STRING","Cron",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$cron",188],",",["T_WHITESPACE","\n        ",188],["T_ARRAY","array",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$productPrice1",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","null",189],",",["T_WHITESPACE","\n        ",189],["T_ARRAY","array",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$productPrice2",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","null",190],",",["T_WHITESPACE","\n        ",190],["T_STRING","Customer",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$customer",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","null",191],",",["T_WHITESPACE","\n        ",191],["T_ARRAY","array",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$products",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","null",192],",",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$indexers",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","null",193],["T_WHITESPACE","\n    ",193],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$products",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","stepFactory",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","create",195],"(",["T_STRING","CreateProductsStep",195],["T_DOUBLE_COLON","::",195],["T_CLASS","class",195],",",["T_WHITESPACE"," ",195],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$products",195],"]",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","run",195],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'products'",195],"]",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$cli",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","reindex",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$customer",197],["T_WHITESPACE"," ",197],["T_IS_NOT_IDENTICAL","!==",197],["T_WHITESPACE"," ",197],["T_STRING","null",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$customer",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","persist",198],"(",")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$catalogPriceRuleOriginal",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","persist",200],"(",")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","assertIndexerStatus",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","processAssert",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","indexManagement",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$indexers",201],",",["T_WHITESPACE"," ",201],["T_STRING","true",201],")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","objectManager",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","create",202],"(",["T_NS_SEPARATOR","\\",202],["T_STRING","Magento",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Customer",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Test",202],["T_NS_SEPARATOR","\\",202],["T_STRING","TestStep",202],["T_NS_SEPARATOR","\\",202],["T_STRING","LogoutCustomerOnFrontendStep",202],["T_DOUBLE_COLON","::",202],["T_CLASS","class",202],")",["T_OBJECT_OPERATOR","->",202],["T_STRING","run",202],"(",")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","assertCatalogPriceRuleNotAppliedProductPage",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","processAssert",203],"(",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","catalogProductViewPage",204],",",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","cmsIndexPage",205],",",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","catalogCategoryViewPage",206],",",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$products",207],["T_WHITESPACE","\n        ",207],")",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$filter",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],"[",["T_WHITESPACE","\n            ",209],["T_CONSTANT_ENCAPSED_STRING","'name'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$catalogPriceRuleOriginal",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getName",210],"(",")",",",["T_WHITESPACE","\n            ",210],["T_CONSTANT_ENCAPSED_STRING","'rule_id'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$catalogPriceRuleOriginal",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getId",211],"(",")",",",["T_WHITESPACE","\n        ",211],"]",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","catalogRuleIndex",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","open",213],"(",")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","catalogRuleIndex",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getCatalogRuleGrid",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","searchAndOpen",214],"(",["T_VARIABLE","$filter",214],")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","catalogRuleNew",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getFormPageActions",215],"(",")",["T_OBJECT_OPERATOR","->",215],["T_STRING","saveAndApply",215],"(",")",";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$cron",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","run",216],"(",")",";",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$cron",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","run",217],"(",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertIndexerStatus",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","processAssert",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","indexManagement",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$indexers",218],",",["T_WHITESPACE"," ",218],["T_STRING","true",218],")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","assertCatalogPriceRuleAppliedProductPage",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","processAssert",219],"(",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","catalogProductViewPage",220],",",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","cmsIndexPage",221],",",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","catalogCategoryViewPage",222],",",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$products",223],",",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$productPrice1",224],",",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$customer",225],["T_WHITESPACE","\n        ",225],")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","catalogRuleIndex",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","open",227],"(",")",";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","catalogRuleIndex",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getCatalogRuleGrid",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","searchAndOpen",228],"(",["T_VARIABLE","$filter",228],")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","catalogRuleNew",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getEditForm",229],"(",")",["T_OBJECT_OPERATOR","->",229],["T_STRING","fill",229],"(",["T_VARIABLE","$catalogPriceRule",229],")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","catalogRuleNew",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getFormPageActions",230],"(",")",["T_OBJECT_OPERATOR","->",230],["T_STRING","saveAndApply",230],"(",")",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","assertIndexerStatus",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","processAssert",231],"(",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","indexManagement",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$indexers",231],",",["T_WHITESPACE"," ",231],["T_STRING","false",231],")",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","objectManager",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","create",232],"(",["T_NS_SEPARATOR","\\",232],["T_STRING","Magento",232],["T_NS_SEPARATOR","\\",232],["T_STRING","Customer",232],["T_NS_SEPARATOR","\\",232],["T_STRING","Test",232],["T_NS_SEPARATOR","\\",232],["T_STRING","TestStep",232],["T_NS_SEPARATOR","\\",232],["T_STRING","LogoutCustomerOnFrontendStep",232],["T_DOUBLE_COLON","::",232],["T_CLASS","class",232],")",["T_OBJECT_OPERATOR","->",232],["T_STRING","run",232],"(",")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","assertCatalogPriceRuleNotAppliedProductPage",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","processAssert",233],"(",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","catalogProductViewPage",234],",",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","cmsIndexPage",235],",",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","catalogCategoryViewPage",236],",",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$products",237],["T_WHITESPACE","\n        ",237],")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$cron",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","run",239],"(",")",";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$cron",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","run",240],"(",")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","assertIndexerStatus",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","processAssert",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","indexManagement",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$indexers",241],",",["T_WHITESPACE"," ",241],["T_STRING","true",241],")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","assertCatalogPriceRuleAppliedProductPage",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","processAssert",242],"(",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","catalogProductViewPage",243],",",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","cmsIndexPage",244],",",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","catalogCategoryViewPage",245],",",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$products",246],",",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$productPrice2",247],",",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$customer",248],["T_WHITESPACE","\n        ",248],")",";",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","catalogRuleIndex",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","open",250],"(",")",";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","catalogRuleIndex",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getCatalogRuleGrid",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","searchAndOpen",251],"(",["T_VARIABLE","$filter",251],")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","catalogRuleNew",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getFormPageActions",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","delete",252],"(",")",";",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","catalogRuleNew",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getModalBlock",253],"(",")",["T_OBJECT_OPERATOR","->",253],["T_STRING","acceptAlert",253],"(",")",";",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","assertIndexerStatus",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","processAssert",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","indexManagement",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$indexers",254],",",["T_WHITESPACE"," ",254],["T_STRING","false",254],")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertCatalogPriceRuleAppliedProductPage",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","processAssert",255],"(",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","catalogProductViewPage",256],",",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","cmsIndexPage",257],",",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","catalogCategoryViewPage",258],",",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$products",259],",",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$productPrice2",260],",",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$customer",261],["T_WHITESPACE","\n        ",261],")",";",["T_WHITESPACE","\n        ",262],["T_VARIABLE","$cron",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","run",263],"(",")",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$cron",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","run",264],"(",")",";",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","assertIndexerStatus",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","processAssert",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","indexManagement",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$indexers",265],",",["T_WHITESPACE"," ",265],["T_STRING","true",265],")",";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","objectManager",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","create",266],"(",["T_NS_SEPARATOR","\\",266],["T_STRING","Magento",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Customer",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Test",266],["T_NS_SEPARATOR","\\",266],["T_STRING","TestStep",266],["T_NS_SEPARATOR","\\",266],["T_STRING","LogoutCustomerOnFrontendStep",266],["T_DOUBLE_COLON","::",266],["T_CLASS","class",266],")",["T_OBJECT_OPERATOR","->",266],["T_STRING","run",266],"(",")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","assertCatalogPriceRuleNotAppliedProductPage",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","processAssert",267],"(",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","catalogProductViewPage",268],",",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","cmsIndexPage",269],",",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","catalogCategoryViewPage",270],",",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$products",271],["T_WHITESPACE","\n        ",271],")",";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Clear data after test.\n     *\n     * @return void\n     *\/",275],["T_WHITESPACE","\n    ",279],["T_PUBLIC","public",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","tearDown",280],"(",")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","objectManager",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","create",282],"(",["T_NS_SEPARATOR","\\",282],["T_STRING","Magento",282],["T_NS_SEPARATOR","\\",282],["T_STRING","CatalogRule",282],["T_NS_SEPARATOR","\\",282],["T_STRING","Test",282],["T_NS_SEPARATOR","\\",282],["T_STRING","TestStep",282],["T_NS_SEPARATOR","\\",282],["T_STRING","DeleteAllCatalogRulesStep",282],["T_DOUBLE_COLON","::",282],["T_CLASS","class",282],")",["T_OBJECT_OPERATOR","->",282],["T_STRING","run",282],"(",")",";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n",283],"}",["T_WHITESPACE","\n",284]]
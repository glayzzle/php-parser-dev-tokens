[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * oAuth client for Magento REST API.\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Authentication",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Rest",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TestFramework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Helper",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Bootstrap",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","OAuth",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Common",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Consumer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Credentials",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","OAuth",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Common",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Http",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Client",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ClientInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","OAuth",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Common",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Http",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Exception",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TokenResponseException",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","OAuth",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Common",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Http",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Uri",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Uri",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","OAuth",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Common",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Http",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Uri",15],["T_NS_SEPARATOR","\\",15],["T_STRING","UriInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","OAuth",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Common",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Storage",16],["T_NS_SEPARATOR","\\",16],["T_STRING","TokenStorageInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","OAuth",17],["T_NS_SEPARATOR","\\",17],["T_STRING","OAuth1",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Service",17],["T_NS_SEPARATOR","\\",17],["T_STRING","AbstractService",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","OAuth",18],["T_NS_SEPARATOR","\\",18],["T_STRING","OAuth1",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Signature",18],["T_NS_SEPARATOR","\\",18],["T_STRING","SignatureInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","OAuth",19],["T_NS_SEPARATOR","\\",19],["T_STRING","OAuth1",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Token",19],["T_NS_SEPARATOR","\\",19],["T_STRING","StdOAuth1Token",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","OAuth",20],["T_NS_SEPARATOR","\\",20],["T_STRING","OAuth1",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Token",20],["T_NS_SEPARATOR","\\",20],["T_STRING","TokenInterface",20],";",["T_WHITESPACE","\n\n",20],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",22],["T_WHITESPACE","\n",24],["T_CLASS","class",25],["T_WHITESPACE"," ",25],["T_STRING","OauthClient",25],["T_WHITESPACE"," ",25],["T_EXTENDS","extends",25],["T_WHITESPACE"," ",25],["T_STRING","AbstractService",25],["T_WHITESPACE","\n",25],"{",["T_WHITESPACE","\n    ",26],["T_DOC_COMMENT","\/**\n     * The maximum timeout for http request in seconds\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","DEFAULT_TIMEOUT",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_LNUMBER","120",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/** @var string|null *\/",32],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_oauthVerifier",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","null",33],";",["T_WHITESPACE","\n\n    ",33],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","__construct",35],"(",["T_WHITESPACE","\n        ",35],["T_STRING","Credentials",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$credentials",36],",",["T_WHITESPACE","\n        ",36],["T_STRING","ClientInterface",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$httpClient",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","null",37],",",["T_WHITESPACE","\n        ",37],["T_STRING","TokenStorageInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$storage",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","null",38],",",["T_WHITESPACE","\n        ",38],["T_STRING","SignatureInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$signature",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","null",39],",",["T_WHITESPACE","\n        ",39],["T_STRING","UriInterface",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$baseApiUri",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","null",40],["T_WHITESPACE","\n    ",40],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(","!",["T_ISSET","isset",42],"(",["T_VARIABLE","$httpClient",42],")",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$httpClient",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_NEW","new",43],["T_WHITESPACE"," ",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","TestFramework",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Authentication",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Rest",43],["T_NS_SEPARATOR","\\",43],["T_STRING","CurlClient",43],"(",")",";",["T_WHITESPACE","\n            ",43],["T_VARIABLE","$httpClient",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","setTimeout",44],"(",["T_STRING","self",44],["T_DOUBLE_COLON","::",44],["T_STRING","DEFAULT_TIMEOUT",44],")",";",["T_WHITESPACE","\n        ",44],"}",["T_WHITESPACE","\n        ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(","!",["T_ISSET","isset",46],"(",["T_VARIABLE","$storage",46],")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$storage",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_NS_SEPARATOR","\\",47],["T_STRING","OAuth",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Common",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Storage",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Session",47],"(",")",";",["T_WHITESPACE","\n        ",47],"}",["T_WHITESPACE","\n        ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(","!",["T_ISSET","isset",49],"(",["T_VARIABLE","$signature",49],")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$signature",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","TestFramework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Authentication",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Rest",50],["T_NS_SEPARATOR","\\",50],["T_STRING","OauthClient",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Signature",50],"(",["T_VARIABLE","$credentials",50],")",";",["T_WHITESPACE","\n        ",50],"}",["T_WHITESPACE","\n        ",51],["T_STRING","parent",52],["T_DOUBLE_COLON","::",52],["T_STRING","__construct",52],"(",["T_VARIABLE","$credentials",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$httpClient",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$storage",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$signature",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$baseApiUri",52],")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @return UriInterface\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","getRequestTokenEndpoint",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_NEW","new",60],["T_WHITESPACE"," ",60],["T_STRING","Uri",60],"(",["T_STRING","TESTS_BASE_URL",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'\/oauth\/token\/request'",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Returns the authorization API endpoint.\n     *\n     * @return UriInterface\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","getAuthorizationEndpoint",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_THROW","throw",70],["T_WHITESPACE"," ",70],["T_NEW","new",70],["T_WHITESPACE"," ",70],["T_NS_SEPARATOR","\\",70],["T_STRING","OAuth",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Common",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Exception",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Exception",70],"(",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'Magento REST API is 2-legged. Current operation is not available.'",71],["T_WHITESPACE","\n        ",71],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Returns the access token API endpoint.\n     *\n     * @return UriInterface\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","getAccessTokenEndpoint",80],"(",")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_STRING","Uri",82],"(",["T_STRING","TESTS_BASE_URL",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'\/oauth\/token\/access'",82],")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Returns the TestModule1 Rest API endpoint.\n     *\n     * @return UriInterface\n     *\/",85],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","getTestApiEndpoint",90],"(",")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$defaultStoreCode",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","Bootstrap",92],["T_DOUBLE_COLON","::",92],["T_STRING","getObjectManager",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","get",92],"(",["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Store",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Model",92],["T_NS_SEPARATOR","\\",92],["T_STRING","StoreManagerInterface",92],["T_DOUBLE_COLON","::",92],["T_CLASS","class",92],")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","getStore",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getCode",93],"(",")",";",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_STRING","Uri",94],"(",["T_STRING","TESTS_BASE_URL",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'\/rest\/'",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$defaultStoreCode",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'\/V1\/testmodule1'",94],")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Parses the access token response and returns a TokenInterface.\n     *\n     * @return TokenInterface\n     * @param string $responseBody\n     *\/",97],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","parseAccessTokenResponse",103],"(",["T_VARIABLE","$responseBody",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_parseToken",105],"(",["T_VARIABLE","$responseBody",105],")",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Parses the request token response and returns a TokenInterface.\n     *\n     * @return TokenInterface\n     * @param string $responseBody\n     * @throws TokenResponseException\n     *\/",108],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","parseRequestTokenResponse",115],"(",["T_VARIABLE","$responseBody",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$data",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_parseResponseBody",117],"(",["T_VARIABLE","$responseBody",117],")",";",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_ISSET","isset",118],"(",["T_VARIABLE","$data",118],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_verifier'",118],"]",")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_oauthVerifier",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$data",119],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_verifier'",119],"]",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_parseToken",121],"(",["T_VARIABLE","$responseBody",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Parse response body and create oAuth token object based on parameters provided.\n     *\n     * @param string $responseBody\n     * @return StdOAuth1Token\n     * @throws TokenResponseException\n     *\/",124],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","_parseToken",131],"(",["T_VARIABLE","$responseBody",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$data",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_parseResponseBody",133],"(",["T_VARIABLE","$responseBody",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$token",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","StdOAuth1Token",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$token",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","setRequestToken",135],"(",["T_VARIABLE","$data",135],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",135],"]",")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$token",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","setRequestTokenSecret",136],"(",["T_VARIABLE","$data",136],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token_secret'",136],"]",")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$token",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","setAccessToken",137],"(",["T_VARIABLE","$data",137],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",137],"]",")",";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$token",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","setAccessTokenSecret",138],"(",["T_VARIABLE","$data",138],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token_secret'",138],"]",")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$token",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","setEndOfLife",139],"(",["T_STRING","StdOAuth1Token",139],["T_DOUBLE_COLON","::",139],["T_STRING","EOL_NEVER_EXPIRES",139],")",";",["T_WHITESPACE","\n        ",139],["T_UNSET","unset",140],"(",["T_VARIABLE","$data",140],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",140],"]",",",["T_WHITESPACE"," ",140],["T_VARIABLE","$data",140],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token_secret'",140],"]",")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$token",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setExtraParams",141],"(",["T_VARIABLE","$data",141],")",";",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$token",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Parse response body and return data in array.\n     *\n     * @param string $responseBody\n     * @return array\n     * @throws \\OAuth\\Common\\Http\\Exception\\TokenResponseException\n     *\/",145],["T_WHITESPACE","\n    ",151],["T_PROTECTED","protected",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","_parseResponseBody",152],"(",["T_VARIABLE","$responseBody",152],")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(","!",["T_STRING","is_string",154],"(",["T_VARIABLE","$responseBody",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_THROW","throw",155],["T_WHITESPACE"," ",155],["T_NEW","new",155],["T_WHITESPACE"," ",155],["T_STRING","TokenResponseException",155],"(",["T_CONSTANT_ENCAPSED_STRING","\"Response body is expected to be a string.\"",155],")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n        ",156],["T_STRING","parse_str",157],"(",["T_VARIABLE","$responseBody",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$data",157],")",";",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_STRING","null",158],["T_WHITESPACE"," ",158],["T_IS_IDENTICAL","===",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$data",158],["T_WHITESPACE"," ",158],["T_BOOLEAN_OR","||",158],["T_WHITESPACE"," ",158],"!",["T_STRING","is_array",158],"(",["T_VARIABLE","$data",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_THROW","throw",159],["T_WHITESPACE"," ",159],["T_NEW","new",159],["T_WHITESPACE"," ",159],["T_STRING","TokenResponseException",159],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to parse response.'",159],")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE"," ",160],["T_ELSEIF","elseif",160],["T_WHITESPACE"," ",160],"(",["T_ISSET","isset",160],"(",["T_VARIABLE","$data",160],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",160],"]",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_THROW","throw",161],["T_WHITESPACE"," ",161],["T_NEW","new",161],["T_WHITESPACE"," ",161],["T_STRING","TokenResponseException",161],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Error occurred: '",161],["T_CURLY_OPEN","{",161],["T_VARIABLE","$data",161],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",161],"]","}",["T_ENCAPSED_AND_WHITESPACE","'",161],"\"",")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$data",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Retrieve oAuth verifier that was obtained during request token request.\n     *\n     * @return string\n     * @throws \\OAuth\\Common\\Http\\Exception\\TokenResponseException\n     *\/",166],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","getOauthVerifier",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_ISSET","isset",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_oauthVerifier",174],")",["T_WHITESPACE"," ",174],["T_BOOLEAN_OR","||",174],["T_WHITESPACE"," ",174],["T_STRING","isEmpty",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_oauthVerifier",174],")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_THROW","throw",175],["T_WHITESPACE"," ",175],["T_NEW","new",175],["T_WHITESPACE"," ",175],["T_STRING","TokenResponseException",175],"(",["T_CONSTANT_ENCAPSED_STRING","\"oAuth verifier must be obtained during request token request.\"",175],")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n        ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_oauthVerifier",177],";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * @override to fix since parent implementation from lib not sending the oauth_verifier when requesting access token\n     * Builds the authorization header for an authenticated API request\n     * @param string $method\n     * @param UriInterface $uri the uri the request is headed\n     * @param \\OAuth\\OAuth1\\Token\\TokenInterface $token\n     * @param $bodyParams array\n     * @return string\n     *\/",180],["T_WHITESPACE","\n    ",188],["T_PROTECTED","protected",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","buildAuthorizationHeaderForAPIRequest",189],"(",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$method",190],",",["T_WHITESPACE","\n        ",190],["T_STRING","UriInterface",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$uri",191],",",["T_WHITESPACE","\n        ",191],["T_STRING","TokenInterface",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$token",192],",",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$bodyParams",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","null",193],["T_WHITESPACE","\n    ",193],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","signature",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","setTokenSecret",195],"(",["T_VARIABLE","$token",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getAccessTokenSecret",195],"(",")",")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$parameters",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getBasicAuthorizationHeaderInfo",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_ISSET","isset",197],"(",["T_VARIABLE","$parameters",197],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_callback'",197],"]",")",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_UNSET","unset",198],"(",["T_VARIABLE","$parameters",198],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_callback'",198],"]",")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n\n        ",199],["T_VARIABLE","$parameters",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","array_merge",201],"(",["T_VARIABLE","$parameters",201],",",["T_WHITESPACE"," ",201],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$token",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getAccessToken",201],"(",")","]",")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$parameters",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","array_merge",202],"(",["T_VARIABLE","$parameters",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$bodyParams",202],")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$parameters",203],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_signature'",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","signature",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getSignature",203],"(",["T_VARIABLE","$uri",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$parameters",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$method",203],")",";",["T_WHITESPACE","\n\n        ",203],["T_VARIABLE","$authorizationHeader",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'OAuth '",205],";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$delimiter",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","''",206],";",["T_WHITESPACE","\n\n        ",206],["T_FOREACH","foreach",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$parameters",208],["T_WHITESPACE"," ",208],["T_AS","as",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$key",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$value",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$authorizationHeader",209],["T_WHITESPACE"," ",209],["T_CONCAT_EQUAL",".=",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$delimiter",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_STRING","rawurlencode",209],"(",["T_VARIABLE","$key",209],")",["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'=\"'",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_STRING","rawurlencode",209],"(",["T_VARIABLE","$value",209],")",["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'\"'",209],";",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$delimiter",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","', '",210],";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$authorizationHeader",213],";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Builds the oAuth authorization header for an authenticated API request\n     *\n     * @param UriInterface $uri the uri the request is headed\n     * @param \\OAuth\\OAuth1\\Token\\TokenInterface $token\n     * @param string $tokenSecret used to verify the passed token\n     * @param array $bodyParams\n     * @param string $method HTTP method to use\n     * @return array\n     *\/",216],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","buildOauthAuthorizationHeader",226],"(",["T_VARIABLE","$uri",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$token",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$tokenSecret",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$bodyParams",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$method",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'GET'",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$uri",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_NEW","new",228],["T_WHITESPACE"," ",228],["T_STRING","Uri",228],"(",["T_VARIABLE","$uri",228],")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$tokenObj",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_STRING","StdOAuth1Token",229],"(",")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$tokenObj",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","setAccessToken",230],"(",["T_VARIABLE","$token",230],")",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$tokenObj",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setAccessTokenSecret",231],"(",["T_VARIABLE","$tokenSecret",231],")",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$tokenObj",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","setEndOfLife",232],"(",["T_STRING","StdOAuth1Token",232],["T_DOUBLE_COLON","::",232],["T_STRING","EOL_NEVER_EXPIRES",232],")",";",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],"[",["T_WHITESPACE","\n            ",233],["T_CONSTANT_ENCAPSED_STRING","'Authorization: '",234],["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","buildAuthorizationHeaderForAPIRequest",234],"(",["T_VARIABLE","$method",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$uri",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$tokenObj",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$bodyParams",234],")",["T_WHITESPACE","\n        ",234],"]",";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * Builds the bearer token authorization header\n     *\n     * @param string $token\n     * @return array\n     *\/",238],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","buildBearerTokenAuthorizationHeader",244],"(",["T_VARIABLE","$token",244],")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],"[",["T_WHITESPACE","\n            ",246],["T_CONSTANT_ENCAPSED_STRING","'Authorization: Bearer '",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$token",247],["T_WHITESPACE","\n        ",247],"]",";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_DOC_COMMENT","\/**\n     * Validates a Test REST api call access using oauth access token\n     *\n     * @param TokenInterface $token The access token.\n     * @param string $method HTTP method.\n     * @return array\n     * @throws TokenResponseException\n     *\/",251],["T_WHITESPACE","\n    ",258],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","validateAccessToken",259],"(",["T_VARIABLE","$token",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$method",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'GET'",259],")",["T_WHITESPACE","\n    ",259],"{",["T_WHITESPACE","\n        ",260],["T_COMMENT","\/\/Need to add Accept header else Magento errors out with 503\n",261],["T_WHITESPACE","        ",262],["T_VARIABLE","$extraAuthenticationHeaders",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],"[",["T_CONSTANT_ENCAPSED_STRING","'Accept'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",262],"]",";",["T_WHITESPACE","\n\n        ",262],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","signature",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","setTokenSecret",264],"(",["T_VARIABLE","$token",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getAccessTokenSecret",264],"(",")",")",";",["T_WHITESPACE","\n\n        ",264],["T_VARIABLE","$authorizationHeader",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],"[",["T_WHITESPACE","\n            ",266],["T_CONSTANT_ENCAPSED_STRING","'Authorization'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","buildAuthorizationHeaderForAPIRequest",267],"(",["T_WHITESPACE","\n                ",267],["T_VARIABLE","$method",268],",",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getTestApiEndpoint",269],"(",")",",",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$token",270],",",["T_WHITESPACE","\n                ",270],"[","]",["T_WHITESPACE","\n            ",271],")",",",["T_WHITESPACE","\n        ",272],"]",";",["T_WHITESPACE","\n\n        ",273],["T_VARIABLE","$headers",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","array_merge",275],"(",["T_VARIABLE","$authorizationHeader",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$extraAuthenticationHeaders",275],")",";",["T_WHITESPACE","\n\n        ",275],["T_VARIABLE","$responseBody",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","httpClient",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","retrieveResponse",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getTestApiEndpoint",277],"(",")",",",["T_WHITESPACE"," ",277],"[","]",",",["T_WHITESPACE"," ",277],["T_VARIABLE","$headers",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$method",277],")",";",["T_WHITESPACE","\n\n        ",277],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_STRING","json_decode",279],"(",["T_VARIABLE","$responseBody",279],")",";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n",280],"}",["T_WHITESPACE","\n",281]]
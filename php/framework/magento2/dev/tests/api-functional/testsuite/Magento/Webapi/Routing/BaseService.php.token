[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Webapi",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Routing",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AuthorizationException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Webapi",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","WebapiException",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Base class for all Service based routing tests\n *\/",11],["T_WHITESPACE","\n",13],["T_ABSTRACT","abstract",14],["T_WHITESPACE"," ",14],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","BaseService",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TestFramework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TestCase",14],["T_NS_SEPARATOR","\\",14],["T_STRING","WebapiAbstract",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Check a particular adapter and assert unauthorized access\n     *\n     * @param array $serviceInfo\n     * @param array|null $requestData\n     *\/",16],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","assertUnauthorizedException",22],"(",["T_VARIABLE","$serviceInfo",22],",",["T_WHITESPACE"," ",22],["T_VARIABLE","$requestData",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_STRING","null",22],")",["T_WHITESPACE","\n    ",22],"{",["T_WHITESPACE","\n        ",23],["T_IF","if",24],["T_WHITESPACE"," ",24],"(",["T_STRING","TESTS_WEB_API_ADAPTER",24],["T_WHITESPACE"," ",24],["T_IS_EQUAL","==",24],["T_WHITESPACE"," ",24],["T_STRING","self",24],["T_DOUBLE_COLON","::",24],["T_STRING","ADAPTER_SOAP",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n            ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","_assertSoapException",25],"(",["T_WHITESPACE","\n                ",25],["T_VARIABLE","$serviceInfo",26],",",["T_WHITESPACE","\n                ",26],["T_VARIABLE","$requestData",27],",",["T_WHITESPACE","\n                ",27],["T_CONSTANT_ENCAPSED_STRING","'Consumer is not authorized to access %resources'",28],["T_WHITESPACE","\n            ",28],")",";",["T_WHITESPACE","\n        ",29],"}",["T_WHITESPACE"," ",30],["T_ELSEIF","elseif",30],["T_WHITESPACE"," ",30],"(",["T_STRING","TESTS_WEB_API_ADAPTER",30],["T_WHITESPACE"," ",30],["T_IS_EQUAL","==",30],["T_WHITESPACE"," ",30],["T_STRING","self",30],["T_DOUBLE_COLON","::",30],["T_STRING","ADAPTER_REST",30],")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n            ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","_assertRestUnauthorizedException",31],"(",["T_VARIABLE","$serviceInfo",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$requestData",31],")",";",["T_WHITESPACE","\n        ",31],"}",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Invoke the REST api and assert access is unauthorized\n     *\n     * @param array $serviceInfo\n     * @param array|null $requestData\n     *\/",35],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_assertRestUnauthorizedException",41],"(",["T_VARIABLE","$serviceInfo",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$requestData",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","null",41],")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_TRY","try",43],["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n            ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_webApiCall",44],"(",["T_VARIABLE","$serviceInfo",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$requestData",44],")",";",["T_WHITESPACE","\n        ",44],"}",["T_WHITESPACE"," ",45],["T_CATCH","catch",45],["T_WHITESPACE"," ",45],"(",["T_NS_SEPARATOR","\\",45],["T_STRING","Exception",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$e",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertContains",46],"(",["T_WHITESPACE","\n                ",46],["T_CONSTANT_ENCAPSED_STRING","'{\"message\":\"Consumer is not authorized to access %resources\"'",47],",",["T_WHITESPACE","\n                ",47],["T_VARIABLE","$e",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getMessage",48],"(",")",",",["T_WHITESPACE","\n                ",48],["T_STRING","sprintf",49],"(",["T_WHITESPACE","\n                    ",49],["T_CONSTANT_ENCAPSED_STRING","'REST routing did not fail as expected for the method \"%s\" of service \"%s\"'",50],",",["T_WHITESPACE","\n                    ",50],["T_VARIABLE","$serviceInfo",51],"[",["T_CONSTANT_ENCAPSED_STRING","'rest'",51],"]","[",["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",51],"]",",",["T_WHITESPACE","\n                    ",51],["T_VARIABLE","$serviceInfo",52],"[",["T_CONSTANT_ENCAPSED_STRING","'rest'",52],"]","[",["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",52],"]",["T_WHITESPACE","\n                ",52],")",["T_WHITESPACE","\n            ",53],")",";",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEquals",55],"(",["T_STRING","WebapiException",55],["T_DOUBLE_COLON","::",55],["T_STRING","HTTP_UNAUTHORIZED",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$e",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getCode",55],"(",")",")",";",["T_WHITESPACE","\n        ",55],"}",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Check a particular adapter and assert the exception\n     *\n     * @param array $serviceInfo\n     * @param array|null $requestData\n     *\/",59],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","_assertNoRouteOrOperationException",65],"(",["T_VARIABLE","$serviceInfo",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$requestData",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","null",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_STRING","TESTS_WEB_API_ADAPTER",67],["T_WHITESPACE"," ",67],["T_IS_EQUAL","==",67],["T_WHITESPACE"," ",67],["T_STRING","self",67],["T_DOUBLE_COLON","::",67],["T_STRING","ADAPTER_SOAP",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_assertSoapException",68],"(",["T_VARIABLE","$serviceInfo",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$requestData",68],")",";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE"," ",69],["T_ELSEIF","elseif",69],["T_WHITESPACE"," ",69],"(",["T_STRING","TESTS_WEB_API_ADAPTER",69],["T_WHITESPACE"," ",69],["T_IS_EQUAL","==",69],["T_WHITESPACE"," ",69],["T_STRING","self",69],["T_DOUBLE_COLON","::",69],["T_STRING","ADAPTER_REST",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_assertNoRestRouteException",70],"(",["T_VARIABLE","$serviceInfo",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$requestData",70],")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Invoke the REST api and assert for test cases that no such REST route exist\n     *\n     * @param array $serviceInfo\n     * @param array|null $requestData\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","_assertNoRestRouteException",80],"(",["T_VARIABLE","$serviceInfo",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$requestData",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","null",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_TRY","try",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_webApiCall",83],"(",["T_VARIABLE","$serviceInfo",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$requestData",83],")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE"," ",84],["T_CATCH","catch",84],["T_WHITESPACE"," ",84],"(",["T_NS_SEPARATOR","\\",84],["T_STRING","Exception",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$e",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$error",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","json_decode",85],"(",["T_VARIABLE","$e",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getMessage",85],"(",")",",",["T_WHITESPACE"," ",85],["T_STRING","true",85],")",";",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertEquals",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Request does not match any route.'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$error",86],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",86],"]",")",";",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertEquals",87],"(",["T_STRING","WebapiException",87],["T_DOUBLE_COLON","::",87],["T_STRING","HTTP_NOT_FOUND",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$e",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getCode",87],"(",")",")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Invoke the SOAP api and assert for the NoWebApiXmlTestTest test cases that no such SOAP route exists\n     *\n     * @param array $serviceInfo\n     * @param array|null $requestData\n     * @param string $expectedMessage\n     *\/",91],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","_assertSoapException",98],"(",["T_VARIABLE","$serviceInfo",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$requestData",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","null",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$expectedMessage",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","''",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_TRY","try",100],["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_webApiCall",101],"(",["T_VARIABLE","$serviceInfo",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$requestData",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE"," ",102],["T_CATCH","catch",102],["T_WHITESPACE"," ",102],"(",["T_NS_SEPARATOR","\\",102],["T_STRING","Exception",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$e",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_STRING","get_class",103],"(",["T_VARIABLE","$e",103],")",["T_WHITESPACE"," ",103],["T_IS_NOT_IDENTICAL","!==",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'SoapFault'",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","fail",104],"(",["T_WHITESPACE","\n                    ",104],["T_STRING","sprintf",105],"(",["T_WHITESPACE","\n                        ",105],["T_CONSTANT_ENCAPSED_STRING","'Expected SoapFault exception not generated for Service - \"%s\" and Operation - \"%s\"'",106],",",["T_WHITESPACE","\n                        ",106],["T_VARIABLE","$serviceInfo",107],"[",["T_CONSTANT_ENCAPSED_STRING","'soap'",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'service'",107],"]",",",["T_WHITESPACE","\n                        ",107],["T_VARIABLE","$serviceInfo",108],"[",["T_CONSTANT_ENCAPSED_STRING","'soap'",108],"]","[",["T_CONSTANT_ENCAPSED_STRING","'operation'",108],"]",["T_WHITESPACE","\n                    ",108],")",["T_WHITESPACE","\n                ",109],")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n\n            ",111],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$expectedMessage",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertContains",114],"(",["T_VARIABLE","$expectedMessage",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$e",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getMessage",114],"(",")",")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n",117],"}",["T_WHITESPACE","\n",118]]
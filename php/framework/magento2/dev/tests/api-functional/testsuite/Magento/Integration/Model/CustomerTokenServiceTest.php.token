[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Integration",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AccountManagementInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InputException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Integration",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Oauth",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Token",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","TokenModel",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TestFramework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Helper",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Bootstrap",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TestFramework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TestCase",13],["T_NS_SEPARATOR","\\",13],["T_STRING","WebapiAbstract",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","User",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","User",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","UserModel",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Webapi",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Exception",15],["T_WHITESPACE"," ",15],["T_AS","as",15],["T_WHITESPACE"," ",15],["T_STRING","HTTPExceptionCodes",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Integration",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ResourceModel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Oauth",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Token",16],["T_NS_SEPARATOR","\\",16],["T_STRING","CollectionFactory",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Integration",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Oauth",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Token",17],["T_NS_SEPARATOR","\\",17],["T_STRING","RequestLog",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Config",17],["T_WHITESPACE"," ",17],["T_AS","as",17],["T_WHITESPACE"," ",17],["T_STRING","TokenThrottlerConfig",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Integration",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Api",18],["T_NS_SEPARATOR","\\",18],["T_STRING","CustomerTokenServiceInterface",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * api-functional test for \\Magento\\Integration\\Model\\CustomerTokenService.\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",20],["T_WHITESPACE","\n",24],["T_CLASS","class",25],["T_WHITESPACE"," ",25],["T_STRING","CustomerTokenServiceTest",25],["T_WHITESPACE"," ",25],["T_EXTENDS","extends",25],["T_WHITESPACE"," ",25],["T_STRING","WebapiAbstract",25],["T_WHITESPACE","\n",25],"{",["T_WHITESPACE","\n    ",26],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","SERVICE_NAME",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","\"integrationCustomerTokenServiceV1\"",27],";",["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","SERVICE_VERSION",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","\"V1\"",28],";",["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","RESOURCE_PATH_CUSTOMER_TOKEN",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","\"\/V1\/integration\/customer\/token\"",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var CustomerTokenServiceInterface\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$tokenService",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var AccountManagementInterface\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$customerAccountManagement",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var CollectionFactory\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$tokenCollection",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var UserModel\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PRIVATE","private",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$userModel",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var int\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PRIVATE","private",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$attemptsCountToLockAccount",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Setup CustomerTokenService\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","setUp",59],"(",")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_markTestAsRestOnly",61],"(",")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","tokenService",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Bootstrap",62],["T_DOUBLE_COLON","::",62],["T_STRING","getObjectManager",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_WHITESPACE","\n            ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Integration",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","CustomerTokenService",63],["T_DOUBLE_COLON","::",63],["T_CLASS","class",63],["T_WHITESPACE","\n        ",63],")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","customerAccountManagement",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","Bootstrap",65],["T_DOUBLE_COLON","::",65],["T_STRING","getObjectManager",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_WHITESPACE","\n            ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Customer",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Api",66],["T_NS_SEPARATOR","\\",66],["T_STRING","AccountManagementInterface",66],["T_DOUBLE_COLON","::",66],["T_CLASS","class",66],["T_WHITESPACE","\n        ",66],")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$tokenCollectionFactory",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","Bootstrap",68],["T_DOUBLE_COLON","::",68],["T_STRING","getObjectManager",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","get",68],"(",["T_WHITESPACE","\n            ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Integration",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Model",69],["T_NS_SEPARATOR","\\",69],["T_STRING","ResourceModel",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Oauth",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Token",69],["T_NS_SEPARATOR","\\",69],["T_STRING","CollectionFactory",69],["T_DOUBLE_COLON","::",69],["T_CLASS","class",69],["T_WHITESPACE","\n        ",69],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","tokenCollection",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$tokenCollectionFactory",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","create",71],"(",")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","userModel",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","Bootstrap",72],["T_DOUBLE_COLON","::",72],["T_STRING","getObjectManager",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","get",72],"(",["T_NS_SEPARATOR","\\",72],["T_STRING","Magento",72],["T_NS_SEPARATOR","\\",72],["T_STRING","User",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Model",72],["T_NS_SEPARATOR","\\",72],["T_STRING","User",72],["T_DOUBLE_COLON","::",72],["T_CLASS","class",72],")",";",["T_WHITESPACE","\n        ",72],["T_DOC_COMMENT","\/** @var TokenThrottlerConfig $tokenThrottlerConfig *\/",73],["T_WHITESPACE","\n        ",73],["T_VARIABLE","$tokenThrottlerConfig",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","Bootstrap",74],["T_DOUBLE_COLON","::",74],["T_STRING","getObjectManager",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_STRING","TokenThrottlerConfig",74],["T_DOUBLE_COLON","::",74],["T_CLASS","class",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","attemptsCountToLockAccount",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$tokenThrottlerConfig",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getMaxFailuresCount",75],"(",")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * @magentoApiDataFixture Magento\/Customer\/_files\/customer.php\n     *\/",78],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","testCreateCustomerAccessToken",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$userName",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'customer@example.com'",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$password",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'password'",84],";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$serviceInfo",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"[",["T_WHITESPACE","\n            ",86],["T_CONSTANT_ENCAPSED_STRING","'rest'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],"[",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_STRING","self",88],["T_DOUBLE_COLON","::",88],["T_STRING","RESOURCE_PATH_CUSTOMER_TOKEN",88],",",["T_WHITESPACE","\n                ",88],["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Framework",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Webapi",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Rest",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Request",89],["T_DOUBLE_COLON","::",89],["T_STRING","HTTP_METHOD_POST",89],",",["T_WHITESPACE","\n            ",89],"]",",",["T_WHITESPACE","\n        ",90],"]",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$requestData",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$userName",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'password'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$password",92],"]",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$accessToken",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_webApiCall",93],"(",["T_VARIABLE","$serviceInfo",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$requestData",93],")",";",["T_WHITESPACE","\n\n        ",93],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertToken",95],"(",["T_VARIABLE","$accessToken",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$userName",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$password",95],")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * @dataProvider validationDataProvider\n     *\/",98],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","testCreateCustomerAccessTokenEmptyOrNullCredentials",101],"(",["T_VARIABLE","$username",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$password",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$noExceptionOccurred",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n        ",103],["T_TRY","try",104],["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$serviceInfo",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],"[",["T_WHITESPACE","\n                ",105],["T_CONSTANT_ENCAPSED_STRING","'rest'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],"[",["T_WHITESPACE","\n                    ",106],["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_STRING","self",107],["T_DOUBLE_COLON","::",107],["T_STRING","RESOURCE_PATH_CUSTOMER_TOKEN",107],",",["T_WHITESPACE","\n                    ",107],["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Framework",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Webapi",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Rest",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Request",108],["T_DOUBLE_COLON","::",108],["T_STRING","HTTP_METHOD_POST",108],",",["T_WHITESPACE","\n                ",108],"]",",",["T_WHITESPACE","\n            ",109],"]",";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$requestData",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$username",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'password'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$password",111],"]",";",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_webApiCall",112],"(",["T_VARIABLE","$serviceInfo",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$requestData",112],")",";",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$noExceptionOccurred",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","true",113],";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE"," ",114],["T_CATCH","catch",114],["T_WHITESPACE"," ",114],"(",["T_NS_SEPARATOR","\\",114],["T_STRING","Exception",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$e",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertInputExceptionMessages",115],"(",["T_VARIABLE","$e",115],")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$noExceptionOccurred",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","fail",118],"(",["T_CONSTANT_ENCAPSED_STRING","\"Exception was expected to be thrown when provided credentials are invalid.\"",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","testCreateCustomerAccessTokenInvalidCustomer",122],"(",")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$customerUserName",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'invalid'",124],";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$password",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'invalid'",125],";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$noExceptionOccurred",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","false",126],";",["T_WHITESPACE","\n        ",126],["T_TRY","try",127],["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$serviceInfo",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],"[",["T_WHITESPACE","\n                ",128],["T_CONSTANT_ENCAPSED_STRING","'rest'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],"[",["T_WHITESPACE","\n                    ",129],["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_STRING","self",130],["T_DOUBLE_COLON","::",130],["T_STRING","RESOURCE_PATH_CUSTOMER_TOKEN",130],",",["T_WHITESPACE","\n                    ",130],["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Magento",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Framework",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Webapi",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Rest",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Request",131],["T_DOUBLE_COLON","::",131],["T_STRING","HTTP_METHOD_POST",131],",",["T_WHITESPACE","\n                ",131],"]",",",["T_WHITESPACE","\n            ",132],"]",";",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$requestData",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$customerUserName",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'password'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$password",134],"]",";",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_webApiCall",135],"(",["T_VARIABLE","$serviceInfo",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$requestData",135],")",";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$noExceptionOccurred",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","true",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE"," ",137],["T_CATCH","catch",137],["T_WHITESPACE"," ",137],"(",["T_NS_SEPARATOR","\\",137],["T_STRING","Exception",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$e",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","assertInvalidCredentialsException",138],"(",["T_VARIABLE","$e",138],")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$noExceptionOccurred",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","fail",141],"(",["T_CONSTANT_ENCAPSED_STRING","\"Exception was expected to be thrown when provided credentials are invalid.\"",141],")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Provider to test input validation\n     *\n     * @return array\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","validationDataProvider",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],"[",["T_WHITESPACE","\n            ",152],["T_CONSTANT_ENCAPSED_STRING","'Check for empty credentials'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],"[",["T_CONSTANT_ENCAPSED_STRING","''",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","''",153],"]",",",["T_WHITESPACE","\n            ",153],["T_CONSTANT_ENCAPSED_STRING","'Check for null credentials'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],"[",["T_STRING","null",154],",",["T_WHITESPACE"," ",154],["T_STRING","null",154],"]",["T_WHITESPACE","\n        ",154],"]",";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Assert for presence of Input exception messages\n     *\n     * @param \\Exception $e\n     *\/",158],["T_WHITESPACE","\n    ",162],["T_PRIVATE","private",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","assertInputExceptionMessages",163],"(",["T_VARIABLE","$e",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertEquals",165],"(",["T_STRING","HTTPExceptionCodes",165],["T_DOUBLE_COLON","::",165],["T_STRING","HTTP_BAD_REQUEST",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$e",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getCode",165],"(",")",")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$exceptionData",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","processRestExceptionResult",166],"(",["T_VARIABLE","$e",166],")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$expectedExceptionData",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],"[",["T_WHITESPACE","\n            ",167],["T_CONSTANT_ENCAPSED_STRING","'message'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'One or more input exceptions have occurred.'",168],",",["T_WHITESPACE","\n            ",168],["T_CONSTANT_ENCAPSED_STRING","'errors'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],"[",["T_WHITESPACE","\n                ",169],"[",["T_WHITESPACE","\n                    ",170],["T_CONSTANT_ENCAPSED_STRING","'message'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'%fieldName is a required field.'",171],",",["T_WHITESPACE","\n                    ",171],["T_CONSTANT_ENCAPSED_STRING","'parameters'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],"[",["T_WHITESPACE","\n                        ",172],["T_CONSTANT_ENCAPSED_STRING","'fieldName'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'username'",173],",",["T_WHITESPACE","\n                    ",173],"]",",",["T_WHITESPACE","\n                ",174],"]",",",["T_WHITESPACE","\n                ",175],"[",["T_WHITESPACE","\n                    ",176],["T_CONSTANT_ENCAPSED_STRING","'message'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'%fieldName is a required field.'",177],",",["T_WHITESPACE","\n                    ",177],["T_CONSTANT_ENCAPSED_STRING","'parameters'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],"[",["T_WHITESPACE","\n                        ",178],["T_CONSTANT_ENCAPSED_STRING","'fieldName'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'password'",179],",",["T_WHITESPACE","\n                    ",179],"]",["T_WHITESPACE","\n                ",180],"]",",",["T_WHITESPACE","\n            ",181],"]",",",["T_WHITESPACE","\n        ",182],"]",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertEquals",184],"(",["T_VARIABLE","$expectedExceptionData",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$exceptionData",184],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * @magentoApiDataFixture Magento\/Customer\/_files\/customer.php\n     *\/",187],["T_WHITESPACE","\n    ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","testThrottlingMaxAttempts",190],"(",")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$userNameFromFixture",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'customer@example.com'",192],";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$passwordFromFixture",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'password'",193],";",["T_WHITESPACE","\n\n        ",193],["T_VARIABLE","$serviceInfo",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],"[",["T_WHITESPACE","\n            ",195],["T_CONSTANT_ENCAPSED_STRING","'rest'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],"[",["T_WHITESPACE","\n                ",196],["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_STRING","self",197],["T_DOUBLE_COLON","::",197],["T_STRING","RESOURCE_PATH_CUSTOMER_TOKEN",197],",",["T_WHITESPACE","\n                ",197],["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Magento",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Framework",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Webapi",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Rest",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Request",198],["T_DOUBLE_COLON","::",198],["T_STRING","HTTP_METHOD_POST",198],",",["T_WHITESPACE","\n            ",198],"]",",",["T_WHITESPACE","\n        ",199],"]",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$invalidCredentials",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],"[",["T_WHITESPACE","\n            ",201],["T_CONSTANT_ENCAPSED_STRING","'username'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$userNameFromFixture",202],",",["T_WHITESPACE","\n            ",202],["T_CONSTANT_ENCAPSED_STRING","'password'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'invalid'",203],",",["T_WHITESPACE","\n        ",203],"]",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$validCredentials",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],"[",["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","'username'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$userNameFromFixture",206],",",["T_WHITESPACE","\n            ",206],["T_CONSTANT_ENCAPSED_STRING","'password'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$passwordFromFixture",207],",",["T_WHITESPACE","\n        ",207],"]",";",["T_WHITESPACE","\n\n        ",208],["T_COMMENT","\/* Try to get token using invalid credentials for 5 times (account is locked after 6 attempts) *\/",210],["T_WHITESPACE","\n        ",210],["T_VARIABLE","$noExceptionOccurred",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","false",211],";",["T_WHITESPACE","\n        ",211],["T_FOR","for",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$i",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_LNUMBER","0",212],";",["T_WHITESPACE"," ",212],["T_VARIABLE","$i",212],["T_WHITESPACE"," ",212],"<",["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","attemptsCountToLockAccount",212],["T_WHITESPACE"," ",212],"-",["T_WHITESPACE"," ",212],["T_LNUMBER","1",212],")",";",["T_WHITESPACE"," ",212],["T_VARIABLE","$i",212],["T_INC","++",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_TRY","try",213],["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_webApiCall",214],"(",["T_VARIABLE","$serviceInfo",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$invalidCredentials",214],")",";",["T_WHITESPACE","\n                ",214],["T_VARIABLE","$noExceptionOccurred",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","true",215],";",["T_WHITESPACE","\n            ",215],"}",["T_WHITESPACE"," ",216],["T_CATCH","catch",216],["T_WHITESPACE"," ",216],"(",["T_NS_SEPARATOR","\\",216],["T_STRING","Exception",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$e",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$noExceptionOccurred",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","fail",220],"(",["T_WHITESPACE","\n                ",220],["T_CONSTANT_ENCAPSED_STRING","\"Precondition failed: exception should have occurred when token was requested with invalid credentials.\"",221],["T_WHITESPACE","\n            ",221],")",";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n\n        ",223],["T_DOC_COMMENT","\/** On 6th attempt it still should be possible to get token if valid credentials are specified *\/",225],["T_WHITESPACE","\n        ",225],["T_VARIABLE","$accessToken",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_webApiCall",226],"(",["T_VARIABLE","$serviceInfo",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$validCredentials",226],")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","assertToken",227],"(",["T_VARIABLE","$accessToken",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$userNameFromFixture",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$passwordFromFixture",227],")",";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * @magentoApiDataFixture Magento\/Customer\/_files\/customer.php\n     *\/",230],["T_WHITESPACE","\n    ",232],["T_PUBLIC","public",233],["T_WHITESPACE"," ",233],["T_FUNCTION","function",233],["T_WHITESPACE"," ",233],["T_STRING","testThrottlingAccountLockout",233],"(",")",["T_WHITESPACE","\n    ",233],"{",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$userNameFromFixture",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'customer@example.com'",235],";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$passwordFromFixture",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'password'",236],";",["T_WHITESPACE","\n\n        ",236],["T_VARIABLE","$serviceInfo",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],"[",["T_WHITESPACE","\n            ",238],["T_CONSTANT_ENCAPSED_STRING","'rest'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],"[",["T_WHITESPACE","\n                ",239],["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_STRING","self",240],["T_DOUBLE_COLON","::",240],["T_STRING","RESOURCE_PATH_CUSTOMER_TOKEN",240],",",["T_WHITESPACE","\n                ",240],["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Magento",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Framework",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Webapi",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Rest",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Request",241],["T_DOUBLE_COLON","::",241],["T_STRING","HTTP_METHOD_POST",241],",",["T_WHITESPACE","\n            ",241],"]",",",["T_WHITESPACE","\n        ",242],"]",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$invalidCredentials",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],"[",["T_WHITESPACE","\n            ",244],["T_CONSTANT_ENCAPSED_STRING","'username'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$userNameFromFixture",245],",",["T_WHITESPACE","\n            ",245],["T_CONSTANT_ENCAPSED_STRING","'password'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'invalid'",246],",",["T_WHITESPACE","\n        ",246],"]",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$validCredentials",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],"[",["T_WHITESPACE","\n            ",248],["T_CONSTANT_ENCAPSED_STRING","'username'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$userNameFromFixture",249],",",["T_WHITESPACE","\n            ",249],["T_CONSTANT_ENCAPSED_STRING","'password'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$passwordFromFixture",250],",",["T_WHITESPACE","\n        ",250],"]",";",["T_WHITESPACE","\n\n        ",251],["T_COMMENT","\/* Try to get token using invalid credentials for 5 times (account would be locked after 6 attempts) *\/",253],["T_WHITESPACE","\n        ",253],["T_VARIABLE","$noExceptionOccurred",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","false",254],";",["T_WHITESPACE","\n        ",254],["T_FOR","for",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$i",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_LNUMBER","0",255],";",["T_WHITESPACE"," ",255],["T_VARIABLE","$i",255],["T_WHITESPACE"," ",255],"<",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","attemptsCountToLockAccount",255],";",["T_WHITESPACE"," ",255],["T_VARIABLE","$i",255],["T_INC","++",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_TRY","try",256],["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n                ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_webApiCall",257],"(",["T_VARIABLE","$serviceInfo",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$invalidCredentials",257],")",";",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$noExceptionOccurred",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","true",258],";",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE"," ",259],["T_CATCH","catch",259],["T_WHITESPACE"," ",259],"(",["T_NS_SEPARATOR","\\",259],["T_STRING","Exception",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$e",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","assertInvalidCredentialsException",260],"(",["T_VARIABLE","$e",260],")",";",["T_WHITESPACE","\n            ",260],"}",["T_WHITESPACE","\n            ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$noExceptionOccurred",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","fail",263],"(",["T_CONSTANT_ENCAPSED_STRING","\"Exception was expected to be thrown when provided credentials are invalid.\"",263],")",";",["T_WHITESPACE","\n            ",263],"}",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n\n        ",265],["T_VARIABLE","$noExceptionOccurred",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","false",267],";",["T_WHITESPACE","\n        ",267],["T_TRY","try",268],["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_webApiCall",269],"(",["T_VARIABLE","$serviceInfo",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$validCredentials",269],")",";",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$noExceptionOccurred",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","true",270],";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE"," ",271],["T_CATCH","catch",271],["T_WHITESPACE"," ",271],"(",["T_NS_SEPARATOR","\\",271],["T_STRING","Exception",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$e",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","assertInvalidCredentialsException",272],"(",["T_VARIABLE","$e",272],")",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$noExceptionOccurred",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","fail",275],"(",["T_CONSTANT_ENCAPSED_STRING","\"Exception was expected to be thrown because account should have been locked at this point.\"",275],")",";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Make sure that status code and message are correct in case of authentication failure.\n     *\n     * @param \\Exception $e\n     *\/",279],["T_WHITESPACE","\n    ",283],["T_PRIVATE","private",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","assertInvalidCredentialsException",284],"(",["T_VARIABLE","$e",284],")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","assertEquals",286],"(",["T_STRING","HTTPExceptionCodes",286],["T_DOUBLE_COLON","::",286],["T_STRING","HTTP_UNAUTHORIZED",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$e",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getCode",286],"(",")",",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","\"Response HTTP code is invalid.\"",286],")",";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$exceptionData",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","processRestExceptionResult",287],"(",["T_VARIABLE","$e",287],")",";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$expectedExceptionData",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],"[",["T_WHITESPACE","\n            ",288],["T_CONSTANT_ENCAPSED_STRING","'message'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'You did not sign in correctly or your account is temporarily disabled.'",289],["T_WHITESPACE","\n        ",289],"]",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","assertEquals",291],"(",["T_VARIABLE","$expectedExceptionData",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$exceptionData",291],",",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","\"Exception message is invalid.\"",291],")",";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Make sure provided token is valid and belongs to the specified user.\n     *\n     * @param string $accessToken\n     * @param string $userName\n     * @param string $password\n     *\/",294],["T_WHITESPACE","\n    ",300],["T_PRIVATE","private",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","assertToken",301],"(",["T_VARIABLE","$accessToken",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$userName",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$password",301],")",["T_WHITESPACE","\n    ",301],"{",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$customerData",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","customerAccountManagement",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","authenticate",303],"(",["T_VARIABLE","$userName",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$password",303],")",";",["T_WHITESPACE","\n        ",303],["T_DOC_COMMENT","\/** @var $this ->tokenCollection \\Magento\\Integration\\Model\\ResourceModel\\Oauth\\Token\\Collection *\/",304],["T_WHITESPACE","\n        ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","tokenCollection",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","addFilterByCustomerId",305],"(",["T_VARIABLE","$customerData",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getId",305],"(",")",")",";",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$isTokenCorrect",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","false",306],";",["T_WHITESPACE","\n        ",306],["T_FOREACH","foreach",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","tokenCollection",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getItems",307],"(",")",["T_WHITESPACE"," ",307],["T_AS","as",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$item",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_DOC_COMMENT","\/** @var $item TokenModel *\/",308],["T_WHITESPACE","\n            ",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$item",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getToken",309],"(",")",["T_WHITESPACE"," ",309],["T_IS_EQUAL","==",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$accessToken",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                ",309],["T_VARIABLE","$isTokenCorrect",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","true",310],";",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE","\n        ",311],"}",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","assertTrue",313],"(",["T_VARIABLE","$isTokenCorrect",313],")",";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n",314],"}",["T_WHITESPACE","\n",315]]
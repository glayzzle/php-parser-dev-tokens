[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Quote",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Api",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Cart",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Totals",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Quote",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Cart",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Totals",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Item",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","ItemTotals",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FilterBuilder",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","SearchCriteriaBuilder",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TestFramework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ObjectManager",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TestFramework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TestCase",14],["T_NS_SEPARATOR","\\",14],["T_STRING","WebapiAbstract",14],";",["T_WHITESPACE","\n\n",14],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","CartTotalRepositoryTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","WebapiAbstract",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * @var ObjectManager\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$objectManager",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var SearchCriteriaBuilder\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$searchCriteriaBuilder",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var FilterBuilder\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$filterBuilder",31],";",["T_WHITESPACE","\n\n    ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","objectManager",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","TestFramework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Helper",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Bootstrap",35],["T_DOUBLE_COLON","::",35],["T_STRING","getObjectManager",35],"(",")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","searchCriteriaBuilder",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","objectManager",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","create",36],"(",["T_WHITESPACE","\n            ",36],["T_NS_SEPARATOR","\\",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Framework",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Api",37],["T_NS_SEPARATOR","\\",37],["T_STRING","SearchCriteriaBuilder",37],["T_DOUBLE_COLON","::",37],["T_CLASS","class",37],["T_WHITESPACE","\n        ",37],")",";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","filterBuilder",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","objectManager",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","create",39],"(",["T_WHITESPACE","\n            ",39],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Framework",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Api",40],["T_NS_SEPARATOR","\\",40],["T_STRING","FilterBuilder",40],["T_DOUBLE_COLON","::",40],["T_CLASS","class",40],["T_WHITESPACE","\n        ",40],")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @magentoApiDataFixture Magento\/Checkout\/_files\/quote_with_shipping_method.php\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","testGetTotals",47],"(",")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote $quote *\/",49],["T_WHITESPACE","\n        ",49],["T_VARIABLE","$quote",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","objectManager",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","create",50],"(",["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Quote",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Model",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Quote",50],["T_DOUBLE_COLON","::",50],["T_CLASS","class",50],")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$quote",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","load",51],"(",["T_CONSTANT_ENCAPSED_STRING","'test_order_1'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'reserved_order_id'",51],")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$cartId",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$quote",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getId",52],"(",")",";",["T_WHITESPACE","\n\n        ",52],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address $shippingAddress *\/",54],["T_WHITESPACE","\n        ",54],["T_VARIABLE","$shippingAddress",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$quote",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getShippingAddress",55],"(",")",";",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$data",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[",["T_WHITESPACE","\n            ",57],["T_STRING","Totals",58],["T_DOUBLE_COLON","::",58],["T_STRING","KEY_GRAND_TOTAL",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$quote",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getGrandTotal",58],"(",")",",",["T_WHITESPACE","\n            ",58],["T_STRING","Totals",59],["T_DOUBLE_COLON","::",59],["T_STRING","KEY_BASE_GRAND_TOTAL",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$quote",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getBaseGrandTotal",59],"(",")",",",["T_WHITESPACE","\n            ",59],["T_STRING","Totals",60],["T_DOUBLE_COLON","::",60],["T_STRING","KEY_SUBTOTAL",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$quote",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getSubtotal",60],"(",")",",",["T_WHITESPACE","\n            ",60],["T_STRING","Totals",61],["T_DOUBLE_COLON","::",61],["T_STRING","KEY_BASE_SUBTOTAL",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$quote",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getBaseSubtotal",61],"(",")",",",["T_WHITESPACE","\n            ",61],["T_STRING","Totals",62],["T_DOUBLE_COLON","::",62],["T_STRING","KEY_DISCOUNT_AMOUNT",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$shippingAddress",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getDiscountAmount",62],"(",")",",",["T_WHITESPACE","\n            ",62],["T_STRING","Totals",63],["T_DOUBLE_COLON","::",63],["T_STRING","KEY_BASE_DISCOUNT_AMOUNT",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$shippingAddress",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getBaseDiscountAmount",63],"(",")",",",["T_WHITESPACE","\n            ",63],["T_STRING","Totals",64],["T_DOUBLE_COLON","::",64],["T_STRING","KEY_SUBTOTAL_WITH_DISCOUNT",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$quote",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getSubtotalWithDiscount",64],"(",")",",",["T_WHITESPACE","\n            ",64],["T_STRING","Totals",65],["T_DOUBLE_COLON","::",65],["T_STRING","KEY_BASE_SUBTOTAL_WITH_DISCOUNT",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$quote",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getBaseSubtotalWithDiscount",65],"(",")",",",["T_WHITESPACE","\n            ",65],["T_STRING","Totals",66],["T_DOUBLE_COLON","::",66],["T_STRING","KEY_SHIPPING_AMOUNT",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$shippingAddress",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getShippingAmount",66],"(",")",",",["T_WHITESPACE","\n            ",66],["T_STRING","Totals",67],["T_DOUBLE_COLON","::",67],["T_STRING","KEY_BASE_SHIPPING_AMOUNT",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$shippingAddress",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getBaseShippingAmount",67],"(",")",",",["T_WHITESPACE","\n            ",67],["T_STRING","Totals",68],["T_DOUBLE_COLON","::",68],["T_STRING","KEY_SHIPPING_DISCOUNT_AMOUNT",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$shippingAddress",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getShippingDiscountAmount",68],"(",")",",",["T_WHITESPACE","\n            ",68],["T_STRING","Totals",69],["T_DOUBLE_COLON","::",69],["T_STRING","KEY_BASE_SHIPPING_DISCOUNT_AMOUNT",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$shippingAddress",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getBaseShippingDiscountAmount",69],"(",")",",",["T_WHITESPACE","\n            ",69],["T_STRING","Totals",70],["T_DOUBLE_COLON","::",70],["T_STRING","KEY_TAX_AMOUNT",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$shippingAddress",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getTaxAmount",70],"(",")",",",["T_WHITESPACE","\n            ",70],["T_STRING","Totals",71],["T_DOUBLE_COLON","::",71],["T_STRING","KEY_BASE_TAX_AMOUNT",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$shippingAddress",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getBaseTaxAmount",71],"(",")",",",["T_WHITESPACE","\n            ",71],["T_STRING","Totals",72],["T_DOUBLE_COLON","::",72],["T_STRING","KEY_SHIPPING_TAX_AMOUNT",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$shippingAddress",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getShippingTaxAmount",72],"(",")",",",["T_WHITESPACE","\n            ",72],["T_STRING","Totals",73],["T_DOUBLE_COLON","::",73],["T_STRING","KEY_BASE_SHIPPING_TAX_AMOUNT",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$shippingAddress",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getBaseShippingTaxAmount",73],"(",")",",",["T_WHITESPACE","\n            ",73],["T_STRING","Totals",74],["T_DOUBLE_COLON","::",74],["T_STRING","KEY_SUBTOTAL_INCL_TAX",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$shippingAddress",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getSubtotalInclTax",74],"(",")",",",["T_WHITESPACE","\n            ",74],["T_STRING","Totals",75],["T_DOUBLE_COLON","::",75],["T_STRING","KEY_BASE_SUBTOTAL_INCL_TAX",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$shippingAddress",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getBaseSubtotalTotalInclTax",75],"(",")",",",["T_WHITESPACE","\n            ",75],["T_STRING","Totals",76],["T_DOUBLE_COLON","::",76],["T_STRING","KEY_SHIPPING_INCL_TAX",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$shippingAddress",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getShippingInclTax",76],"(",")",",",["T_WHITESPACE","\n            ",76],["T_STRING","Totals",77],["T_DOUBLE_COLON","::",77],["T_STRING","KEY_BASE_SHIPPING_INCL_TAX",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$shippingAddress",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getBaseShippingInclTax",77],"(",")",",",["T_WHITESPACE","\n            ",77],["T_STRING","Totals",78],["T_DOUBLE_COLON","::",78],["T_STRING","KEY_BASE_CURRENCY_CODE",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$quote",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getBaseCurrencyCode",78],"(",")",",",["T_WHITESPACE","\n            ",78],["T_STRING","Totals",79],["T_DOUBLE_COLON","::",79],["T_STRING","KEY_QUOTE_CURRENCY_CODE",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$quote",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getQuoteCurrencyCode",79],"(",")",",",["T_WHITESPACE","\n            ",79],["T_STRING","Totals",80],["T_DOUBLE_COLON","::",80],["T_STRING","KEY_ITEMS_QTY",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$quote",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getItemsQty",80],"(",")",",",["T_WHITESPACE","\n            ",80],["T_STRING","Totals",81],["T_DOUBLE_COLON","::",81],["T_STRING","KEY_ITEMS",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],"[",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getQuoteItemTotalsData",81],"(",["T_VARIABLE","$quote",81],")","]",",",["T_WHITESPACE","\n        ",81],"]",";",["T_WHITESPACE","\n\n        ",82],["T_VARIABLE","$requestData",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'cartId'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$cartId",84],"]",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$data",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","formatTotalsData",86],"(",["T_VARIABLE","$data",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$actual",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_webApiCall",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getServiceInfoForTotalsService",87],"(",["T_VARIABLE","$cartId",87],")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$requestData",87],")",";",["T_WHITESPACE","\n        ",87],["T_UNSET","unset",88],"(",["T_VARIABLE","$actual",88],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",88],"]","[",["T_LNUMBER","0",88],"]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",88],"]",")",";",["T_WHITESPACE","\n        ",88],["T_UNSET","unset",89],"(",["T_VARIABLE","$actual",89],"[",["T_CONSTANT_ENCAPSED_STRING","'weee_tax_applied_amount'",89],"]",")",";",["T_WHITESPACE","\n\n        ",89],["T_DOC_COMMENT","\/** TODO: cover total segments with separate test *\/",91],["T_WHITESPACE","\n        ",91],["T_UNSET","unset",92],"(",["T_VARIABLE","$actual",92],"[",["T_CONSTANT_ENCAPSED_STRING","'total_segments'",92],"]",")",";",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_STRING","array_key_exists",93],"(",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$actual",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_UNSET","unset",94],"(",["T_VARIABLE","$actual",94],"[",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",94],"]",")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertEquals",96],"(",["T_VARIABLE","$data",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$actual",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * @expectedException \\Exception\n     * @expectedExceptionMessage No such entity\n     *\/",99],["T_WHITESPACE","\n    ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","testGetTotalsWithAbsentQuote",103],"(",")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$cartId",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_LNUMBER","9999999999",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$requestData",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],"[",["T_CONSTANT_ENCAPSED_STRING","'cartId'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$cartId",106],"]",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_webApiCall",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getServiceInfoForTotalsService",107],"(",["T_VARIABLE","$cartId",107],")",",",["T_WHITESPACE"," ",107],["T_VARIABLE","$requestData",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Get service info for totals service\n     *\n     * @param string $cartId\n     * @return array\n     *\/",110],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","getServiceInfoForTotalsService",116],"(",["T_VARIABLE","$cartId",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],"[",["T_WHITESPACE","\n            ",118],["T_CONSTANT_ENCAPSED_STRING","'soap'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],"[",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'service'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'quoteCartTotalRepositoryV1'",120],",",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'serviceVersion'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'V1'",121],",",["T_WHITESPACE","\n                ",121],["T_CONSTANT_ENCAPSED_STRING","'operation'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'quoteCartTotalRepositoryV1get'",122],",",["T_WHITESPACE","\n            ",122],"]",",",["T_WHITESPACE","\n            ",123],["T_CONSTANT_ENCAPSED_STRING","'rest'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],"[",["T_WHITESPACE","\n                ",124],["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'\/V1\/carts\/'",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$cartId",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'\/totals'",125],",",["T_WHITESPACE","\n                ",125],["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Magento",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Framework",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Webapi",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Rest",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Request",126],["T_DOUBLE_COLON","::",126],["T_STRING","HTTP_METHOD_GET",126],",",["T_WHITESPACE","\n            ",126],"]",",",["T_WHITESPACE","\n        ",127],"]",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Adjust response details for SOAP protocol\n     *\n     * @param array $data\n     * @return array\n     *\/",131],["T_WHITESPACE","\n    ",136],["T_PROTECTED","protected",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","formatTotalsData",137],"(",["T_VARIABLE","$data",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_FOREACH","foreach",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$data",139],["T_WHITESPACE"," ",139],["T_AS","as",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$key",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$field",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_STRING","is_numeric",140],"(",["T_VARIABLE","$field",140],")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$data",141],"[",["T_VARIABLE","$key",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","round",141],"(",["T_VARIABLE","$field",141],",",["T_WHITESPACE"," ",141],["T_LNUMBER","1",141],")",";",["T_WHITESPACE","\n                ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$data",142],"[",["T_VARIABLE","$key",142],"]",["T_WHITESPACE"," ",142],["T_IS_IDENTICAL","===",142],["T_WHITESPACE"," ",142],["T_STRING","null",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                    ",142],["T_VARIABLE","$data",143],"[",["T_VARIABLE","$key",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_DNUMBER","0.0",143],";",["T_WHITESPACE","\n                ",143],"}",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n\n        ",146],["T_UNSET","unset",148],"(",["T_VARIABLE","$data",148],"[",["T_STRING","Totals",148],["T_DOUBLE_COLON","::",148],["T_STRING","KEY_BASE_SUBTOTAL_INCL_TAX",148],"]",")",";",["T_WHITESPACE","\n\n        ",148],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$data",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Fetch quote item totals data from quote\n     *\n     * @param \\Magento\\Quote\\Model\\Quote $quote\n     * @return array\n     *\/",153],["T_WHITESPACE","\n    ",158],["T_PROTECTED","protected",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","getQuoteItemTotalsData",159],"(",["T_NS_SEPARATOR","\\",159],["T_STRING","Magento",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Quote",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Model",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Quote",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$quote",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$items",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$quote",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getAllItems",161],"(",")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$item",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","array_shift",162],"(",["T_VARIABLE","$items",162],")",";",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],"[",["T_WHITESPACE","\n            ",163],["T_STRING","ItemTotals",164],["T_DOUBLE_COLON","::",164],["T_STRING","KEY_ITEM_ID",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$item",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getItemId",164],"(",")",",",["T_WHITESPACE","\n            ",164],["T_STRING","ItemTotals",165],["T_DOUBLE_COLON","::",165],["T_STRING","KEY_PRICE",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_STRING","intval",165],"(",["T_VARIABLE","$item",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getPrice",165],"(",")",")",",",["T_WHITESPACE","\n            ",165],["T_STRING","ItemTotals",166],["T_DOUBLE_COLON","::",166],["T_STRING","KEY_BASE_PRICE",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_STRING","intval",166],"(",["T_VARIABLE","$item",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getBasePrice",166],"(",")",")",",",["T_WHITESPACE","\n            ",166],["T_STRING","ItemTotals",167],["T_DOUBLE_COLON","::",167],["T_STRING","KEY_QTY",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$item",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getQty",167],"(",")",",",["T_WHITESPACE","\n            ",167],["T_STRING","ItemTotals",168],["T_DOUBLE_COLON","::",168],["T_STRING","KEY_ROW_TOTAL",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_STRING","intval",168],"(",["T_VARIABLE","$item",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getRowTotal",168],"(",")",")",",",["T_WHITESPACE","\n            ",168],["T_STRING","ItemTotals",169],["T_DOUBLE_COLON","::",169],["T_STRING","KEY_BASE_ROW_TOTAL",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_STRING","intval",169],"(",["T_VARIABLE","$item",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getBaseRowTotal",169],"(",")",")",",",["T_WHITESPACE","\n            ",169],["T_STRING","ItemTotals",170],["T_DOUBLE_COLON","::",170],["T_STRING","KEY_ROW_TOTAL_WITH_DISCOUNT",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_STRING","intval",170],"(",["T_VARIABLE","$item",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getRowTotalWithDiscount",170],"(",")",")",",",["T_WHITESPACE","\n            ",170],["T_STRING","ItemTotals",171],["T_DOUBLE_COLON","::",171],["T_STRING","KEY_TAX_AMOUNT",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_STRING","intval",171],"(",["T_VARIABLE","$item",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getTaxAmount",171],"(",")",")",",",["T_WHITESPACE","\n            ",171],["T_STRING","ItemTotals",172],["T_DOUBLE_COLON","::",172],["T_STRING","KEY_BASE_TAX_AMOUNT",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_STRING","intval",172],"(",["T_VARIABLE","$item",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getBaseTaxAmount",172],"(",")",")",",",["T_WHITESPACE","\n            ",172],["T_STRING","ItemTotals",173],["T_DOUBLE_COLON","::",173],["T_STRING","KEY_TAX_PERCENT",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_STRING","intval",173],"(",["T_VARIABLE","$item",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getTaxPercent",173],"(",")",")",",",["T_WHITESPACE","\n            ",173],["T_STRING","ItemTotals",174],["T_DOUBLE_COLON","::",174],["T_STRING","KEY_DISCOUNT_AMOUNT",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_STRING","intval",174],"(",["T_VARIABLE","$item",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getDiscountAmount",174],"(",")",")",",",["T_WHITESPACE","\n            ",174],["T_STRING","ItemTotals",175],["T_DOUBLE_COLON","::",175],["T_STRING","KEY_BASE_DISCOUNT_AMOUNT",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_STRING","intval",175],"(",["T_VARIABLE","$item",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getBaseDiscountAmount",175],"(",")",")",",",["T_WHITESPACE","\n            ",175],["T_STRING","ItemTotals",176],["T_DOUBLE_COLON","::",176],["T_STRING","KEY_DISCOUNT_PERCENT",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_STRING","intval",176],"(",["T_VARIABLE","$item",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getDiscountPercent",176],"(",")",")",",",["T_WHITESPACE","\n            ",176],["T_STRING","ItemTotals",177],["T_DOUBLE_COLON","::",177],["T_STRING","KEY_PRICE_INCL_TAX",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_STRING","intval",177],"(",["T_VARIABLE","$item",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getPriceInclTax",177],"(",")",")",",",["T_WHITESPACE","\n            ",177],["T_STRING","ItemTotals",178],["T_DOUBLE_COLON","::",178],["T_STRING","KEY_BASE_PRICE_INCL_TAX",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_STRING","intval",178],"(",["T_VARIABLE","$item",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getBasePriceInclTax",178],"(",")",")",",",["T_WHITESPACE","\n            ",178],["T_STRING","ItemTotals",179],["T_DOUBLE_COLON","::",179],["T_STRING","KEY_ROW_TOTAL_INCL_TAX",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_STRING","intval",179],"(",["T_VARIABLE","$item",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getRowTotalInclTax",179],"(",")",")",",",["T_WHITESPACE","\n            ",179],["T_STRING","ItemTotals",180],["T_DOUBLE_COLON","::",180],["T_STRING","KEY_BASE_ROW_TOTAL_INCL_TAX",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_STRING","intval",180],"(",["T_VARIABLE","$item",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getBaseRowTotalInclTax",180],"(",")",")",",",["T_WHITESPACE","\n            ",180],["T_STRING","ItemTotals",181],["T_DOUBLE_COLON","::",181],["T_STRING","KEY_WEEE_TAX_APPLIED_AMOUNT",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$item",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getWeeeTaxAppliedAmount",181],"(",")",",",["T_WHITESPACE","\n            ",181],["T_STRING","ItemTotals",182],["T_DOUBLE_COLON","::",182],["T_STRING","KEY_WEEE_TAX_APPLIED",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$item",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getWeeeTaxApplied",182],"(",")",",",["T_WHITESPACE","\n            ",182],["T_STRING","ItemTotals",183],["T_DOUBLE_COLON","::",183],["T_STRING","KEY_NAME",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$item",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getName",183],"(",")",",",["T_WHITESPACE","\n        ",183],"]",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * @magentoApiDataFixture Magento\/Checkout\/_files\/quote_with_shipping_method.php\n     *\/",187],["T_WHITESPACE","\n    ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","testGetMyTotals",190],"(",")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_markTestAsRestOnly",192],"(",")",";",["T_WHITESPACE","\n\n        ",192],["T_COMMENT","\/\/ get customer ID token\n",194],["T_WHITESPACE","        ",195],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Api\\CustomerTokenServiceInterface $customerTokenService *\/",195],["T_WHITESPACE","\n        ",195],["T_VARIABLE","$customerTokenService",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","objectManager",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","create",196],"(",["T_WHITESPACE","\n            ",196],["T_NS_SEPARATOR","\\",197],["T_STRING","Magento",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Integration",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Api",197],["T_NS_SEPARATOR","\\",197],["T_STRING","CustomerTokenServiceInterface",197],["T_DOUBLE_COLON","::",197],["T_CLASS","class",197],["T_WHITESPACE","\n        ",197],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$token",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$customerTokenService",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","createCustomerAccessToken",199],"(",["T_CONSTANT_ENCAPSED_STRING","'customer@example.com'",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'password'",199],")",";",["T_WHITESPACE","\n\n        ",199],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote $quote *\/",201],["T_WHITESPACE","\n        ",201],["T_VARIABLE","$quote",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","objectManager",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","create",202],"(",["T_NS_SEPARATOR","\\",202],["T_STRING","Magento",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Quote",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Model",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Quote",202],["T_DOUBLE_COLON","::",202],["T_CLASS","class",202],")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$quote",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","load",203],"(",["T_CONSTANT_ENCAPSED_STRING","'test_order_1'",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'reserved_order_id'",203],")",";",["T_WHITESPACE","\n\n        ",203],["T_VARIABLE","$serviceInfo",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],"[",["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","'rest'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],"[",["T_WHITESPACE","\n                ",206],["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'\/V1\/carts\/mine\/totals'",207],",",["T_WHITESPACE","\n                ",207],["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Magento",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Framework",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Webapi",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Rest",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Request",208],["T_DOUBLE_COLON","::",208],["T_STRING","HTTP_METHOD_GET",208],",",["T_WHITESPACE","\n                ",208],["T_CONSTANT_ENCAPSED_STRING","'token'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$token",209],["T_WHITESPACE","\n            ",209],"]",",",["T_WHITESPACE","\n        ",210],"]",";",["T_WHITESPACE","\n\n        ",211],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address $shippingAddress *\/",213],["T_WHITESPACE","\n        ",213],["T_VARIABLE","$shippingAddress",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$quote",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getShippingAddress",214],"(",")",";",["T_WHITESPACE","\n\n        ",214],["T_VARIABLE","$data",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],"[",["T_WHITESPACE","\n            ",216],["T_STRING","Totals",217],["T_DOUBLE_COLON","::",217],["T_STRING","KEY_GRAND_TOTAL",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$quote",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getGrandTotal",217],"(",")",",",["T_WHITESPACE","\n            ",217],["T_STRING","Totals",218],["T_DOUBLE_COLON","::",218],["T_STRING","KEY_BASE_GRAND_TOTAL",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$quote",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getBaseGrandTotal",218],"(",")",",",["T_WHITESPACE","\n            ",218],["T_STRING","Totals",219],["T_DOUBLE_COLON","::",219],["T_STRING","KEY_SUBTOTAL",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$quote",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getSubtotal",219],"(",")",",",["T_WHITESPACE","\n            ",219],["T_STRING","Totals",220],["T_DOUBLE_COLON","::",220],["T_STRING","KEY_BASE_SUBTOTAL",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$quote",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getBaseSubtotal",220],"(",")",",",["T_WHITESPACE","\n            ",220],["T_STRING","Totals",221],["T_DOUBLE_COLON","::",221],["T_STRING","KEY_DISCOUNT_AMOUNT",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$shippingAddress",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getDiscountAmount",221],"(",")",",",["T_WHITESPACE","\n            ",221],["T_STRING","Totals",222],["T_DOUBLE_COLON","::",222],["T_STRING","KEY_BASE_DISCOUNT_AMOUNT",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$shippingAddress",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getBaseDiscountAmount",222],"(",")",",",["T_WHITESPACE","\n            ",222],["T_STRING","Totals",223],["T_DOUBLE_COLON","::",223],["T_STRING","KEY_SUBTOTAL_WITH_DISCOUNT",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$quote",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getSubtotalWithDiscount",223],"(",")",",",["T_WHITESPACE","\n            ",223],["T_STRING","Totals",224],["T_DOUBLE_COLON","::",224],["T_STRING","KEY_BASE_SUBTOTAL_WITH_DISCOUNT",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$quote",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getBaseSubtotalWithDiscount",224],"(",")",",",["T_WHITESPACE","\n            ",224],["T_STRING","Totals",225],["T_DOUBLE_COLON","::",225],["T_STRING","KEY_SHIPPING_AMOUNT",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$shippingAddress",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getShippingAmount",225],"(",")",",",["T_WHITESPACE","\n            ",225],["T_STRING","Totals",226],["T_DOUBLE_COLON","::",226],["T_STRING","KEY_BASE_SHIPPING_AMOUNT",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$shippingAddress",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getBaseShippingAmount",226],"(",")",",",["T_WHITESPACE","\n            ",226],["T_STRING","Totals",227],["T_DOUBLE_COLON","::",227],["T_STRING","KEY_SHIPPING_DISCOUNT_AMOUNT",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$shippingAddress",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getShippingDiscountAmount",227],"(",")",",",["T_WHITESPACE","\n            ",227],["T_STRING","Totals",228],["T_DOUBLE_COLON","::",228],["T_STRING","KEY_BASE_SHIPPING_DISCOUNT_AMOUNT",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$shippingAddress",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getBaseShippingDiscountAmount",228],"(",")",",",["T_WHITESPACE","\n            ",228],["T_STRING","Totals",229],["T_DOUBLE_COLON","::",229],["T_STRING","KEY_TAX_AMOUNT",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$shippingAddress",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getTaxAmount",229],"(",")",",",["T_WHITESPACE","\n            ",229],["T_STRING","Totals",230],["T_DOUBLE_COLON","::",230],["T_STRING","KEY_BASE_TAX_AMOUNT",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$shippingAddress",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getBaseTaxAmount",230],"(",")",",",["T_WHITESPACE","\n            ",230],["T_STRING","Totals",231],["T_DOUBLE_COLON","::",231],["T_STRING","KEY_SHIPPING_TAX_AMOUNT",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$shippingAddress",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getShippingTaxAmount",231],"(",")",",",["T_WHITESPACE","\n            ",231],["T_STRING","Totals",232],["T_DOUBLE_COLON","::",232],["T_STRING","KEY_BASE_SHIPPING_TAX_AMOUNT",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$shippingAddress",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getBaseShippingTaxAmount",232],"(",")",",",["T_WHITESPACE","\n            ",232],["T_STRING","Totals",233],["T_DOUBLE_COLON","::",233],["T_STRING","KEY_SUBTOTAL_INCL_TAX",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$shippingAddress",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getSubtotalInclTax",233],"(",")",",",["T_WHITESPACE","\n            ",233],["T_STRING","Totals",234],["T_DOUBLE_COLON","::",234],["T_STRING","KEY_BASE_SUBTOTAL_INCL_TAX",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$shippingAddress",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getBaseSubtotalTotalInclTax",234],"(",")",",",["T_WHITESPACE","\n            ",234],["T_STRING","Totals",235],["T_DOUBLE_COLON","::",235],["T_STRING","KEY_SHIPPING_INCL_TAX",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$shippingAddress",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getShippingInclTax",235],"(",")",",",["T_WHITESPACE","\n            ",235],["T_STRING","Totals",236],["T_DOUBLE_COLON","::",236],["T_STRING","KEY_BASE_SHIPPING_INCL_TAX",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$shippingAddress",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getBaseShippingInclTax",236],"(",")",",",["T_WHITESPACE","\n            ",236],["T_STRING","Totals",237],["T_DOUBLE_COLON","::",237],["T_STRING","KEY_BASE_CURRENCY_CODE",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$quote",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getBaseCurrencyCode",237],"(",")",",",["T_WHITESPACE","\n            ",237],["T_STRING","Totals",238],["T_DOUBLE_COLON","::",238],["T_STRING","KEY_QUOTE_CURRENCY_CODE",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$quote",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getQuoteCurrencyCode",238],"(",")",",",["T_WHITESPACE","\n            ",238],["T_STRING","Totals",239],["T_DOUBLE_COLON","::",239],["T_STRING","KEY_ITEMS_QTY",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$quote",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getItemsQty",239],"(",")",",",["T_WHITESPACE","\n            ",239],["T_STRING","Totals",240],["T_DOUBLE_COLON","::",240],["T_STRING","KEY_ITEMS",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],"[",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getQuoteItemTotalsData",240],"(",["T_VARIABLE","$quote",240],")","]",",",["T_WHITESPACE","\n        ",240],"]",";",["T_WHITESPACE","\n\n        ",241],["T_VARIABLE","$data",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","formatTotalsData",243],"(",["T_VARIABLE","$data",243],")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$actual",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_webApiCall",244],"(",["T_VARIABLE","$serviceInfo",244],")",";",["T_WHITESPACE","\n        ",244],["T_UNSET","unset",245],"(",["T_VARIABLE","$actual",245],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",245],"]","[",["T_LNUMBER","0",245],"]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",245],"]",")",";",["T_WHITESPACE","\n        ",245],["T_UNSET","unset",246],"(",["T_VARIABLE","$actual",246],"[",["T_CONSTANT_ENCAPSED_STRING","'weee_tax_applied_amount'",246],"]",")",";",["T_WHITESPACE","\n\n        ",246],["T_DOC_COMMENT","\/** TODO: cover total segments with separate test *\/",248],["T_WHITESPACE","\n        ",248],["T_UNSET","unset",249],"(",["T_VARIABLE","$actual",249],"[",["T_CONSTANT_ENCAPSED_STRING","'total_segments'",249],"]",")",";",["T_WHITESPACE","\n        ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_STRING","array_key_exists",250],"(",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$actual",250],")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_UNSET","unset",251],"(",["T_VARIABLE","$actual",251],"[",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",251],"]",")",";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","assertEquals",253],"(",["T_VARIABLE","$data",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$actual",253],")",";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n",254],"}",["T_WHITESPACE","\n",255]]
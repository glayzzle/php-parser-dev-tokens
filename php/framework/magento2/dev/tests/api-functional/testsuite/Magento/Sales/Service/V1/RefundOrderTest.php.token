[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Service",6],["T_NS_SEPARATOR","\\",6],["T_STRING","V1",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * API test for creation of Creditmemo for certain Order.\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","RefundOrderTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","TestFramework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","TestCase",11],["T_NS_SEPARATOR","\\",11],["T_STRING","WebapiAbstract",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_CONST","const",13],["T_WHITESPACE"," ",13],["T_STRING","SERVICE_READ_NAME",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","'salesRefundOrderV1'",13],";",["T_WHITESPACE","\n    ",13],["T_CONST","const",14],["T_WHITESPACE"," ",14],["T_STRING","SERVICE_VERSION",14],["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_CONSTANT_ENCAPSED_STRING","'V1'",14],";",["T_WHITESPACE","\n\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$objectManager",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\CreditmemoRepositoryInterface\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$creditmemoRepository",24],";",["T_WHITESPACE","\n\n    ",24],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setUp",26],"(",")",["T_WHITESPACE","\n    ",26],"{",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","objectManager",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","TestFramework",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Helper",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Bootstrap",28],["T_DOUBLE_COLON","::",28],["T_STRING","getObjectManager",28],"(",")",";",["T_WHITESPACE","\n\n        ",28],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","creditmemoRepository",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","objectManager",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","get",30],"(",["T_WHITESPACE","\n            ",30],["T_NS_SEPARATOR","\\",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Sales",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Api",31],["T_NS_SEPARATOR","\\",31],["T_STRING","CreditmemoRepositoryInterface",31],["T_DOUBLE_COLON","::",31],["T_CLASS","class",31],["T_WHITESPACE","\n        ",31],")",";",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @magentoApiDataFixture Magento\/Sales\/_files\/order_with_shipping_and_invoice.php\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testShortRequest",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $existingOrder *\/",40],["T_WHITESPACE","\n        ",40],["T_VARIABLE","$existingOrder",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","objectManager",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","create",41],"(",["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Sales",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Model",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Order",41],["T_DOUBLE_COLON","::",41],["T_CLASS","class",41],")",["T_WHITESPACE","\n            ",41],["T_OBJECT_OPERATOR","->",42],["T_STRING","loadByIncrementId",42],"(",["T_CONSTANT_ENCAPSED_STRING","'100000001'",42],")",";",["T_WHITESPACE","\n\n        ",42],["T_VARIABLE","$result",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_webApiCall",44],"(",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getServiceData",45],"(",["T_VARIABLE","$existingOrder",45],")",",",["T_WHITESPACE","\n            ",45],"[",["T_CONSTANT_ENCAPSED_STRING","'orderId'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$existingOrder",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getEntityId",46],"(",")","]",["T_WHITESPACE","\n        ",46],")",";",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertNotEmpty",49],"(",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$result",50],",",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the received response is correct'",51],["T_WHITESPACE","\n        ",51],")",";",["T_WHITESPACE","\n\n        ",52],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $updatedOrder *\/",54],["T_WHITESPACE","\n        ",54],["T_VARIABLE","$updatedOrder",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","objectManager",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","create",55],"(",["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Sales",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Order",55],["T_DOUBLE_COLON","::",55],["T_CLASS","class",55],")",["T_WHITESPACE","\n            ",55],["T_OBJECT_OPERATOR","->",56],["T_STRING","loadByIncrementId",56],"(",["T_VARIABLE","$existingOrder",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getIncrementId",56],"(",")",")",";",["T_WHITESPACE","\n\n        ",56],["T_TRY","try",58],["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$creditmemo",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","creditmemoRepository",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"(",["T_VARIABLE","$result",59],")",";",["T_WHITESPACE","\n\n            ",59],["T_VARIABLE","$expectedItems",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getOrderItems",61],"(",["T_VARIABLE","$existingOrder",61],")",";",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$actualCreditmemoItems",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getCreditmemoItems",62],"(",["T_VARIABLE","$creditmemo",62],")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$actualRefundedOrderItems",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getRefundedOrderItems",63],"(",["T_VARIABLE","$updatedOrder",63],")",";",["T_WHITESPACE","\n\n            ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertEquals",65],"(",["T_WHITESPACE","\n                ",65],["T_VARIABLE","$expectedItems",66],",",["T_WHITESPACE","\n                ",66],["T_VARIABLE","$actualCreditmemoItems",67],",",["T_WHITESPACE","\n                ",67],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the Creditmemo contains all requested items'",68],["T_WHITESPACE","\n            ",68],")",";",["T_WHITESPACE","\n\n            ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertEquals",71],"(",["T_WHITESPACE","\n                ",71],["T_VARIABLE","$expectedItems",72],",",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$actualRefundedOrderItems",73],",",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that all requested order items were refunded'",74],["T_WHITESPACE","\n            ",74],")",";",["T_WHITESPACE","\n\n            ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertEquals",77],"(",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$creditmemo",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getShippingAmount",78],"(",")",",",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$existingOrder",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getShippingAmount",79],"(",")",",",["T_WHITESPACE","\n                ",79],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the Creditmemo contains correct shipping amount'",80],["T_WHITESPACE","\n            ",80],")",";",["T_WHITESPACE","\n\n            ",81],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertEquals",83],"(",["T_WHITESPACE","\n                ",83],["T_VARIABLE","$creditmemo",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getShippingAmount",84],"(",")",",",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$updatedOrder",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getShippingRefunded",85],"(",")",",",["T_WHITESPACE","\n                ",85],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that proper shipping amount of the Order was refunded'",86],["T_WHITESPACE","\n            ",86],")",";",["T_WHITESPACE","\n\n            ",87],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertNotEquals",89],"(",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$existingOrder",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getStatus",90],"(",")",",",["T_WHITESPACE","\n                ",90],["T_VARIABLE","$updatedOrder",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getStatus",91],"(",")",",",["T_WHITESPACE","\n                ",91],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that order status was changed'",92],["T_WHITESPACE","\n            ",92],")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE"," ",94],["T_CATCH","catch",94],["T_WHITESPACE"," ",94],"(",["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Framework",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Exception",94],["T_NS_SEPARATOR","\\",94],["T_STRING","NoSuchEntityException",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$e",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","fail",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that Creditmemo was created'",95],")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * @magentoApiDataFixture Magento\/Sales\/_files\/order_with_shipping_and_invoice.php\n     *\/",99],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","testFullRequest",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $existingOrder *\/",104],["T_WHITESPACE","\n        ",104],["T_VARIABLE","$existingOrder",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","objectManager",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","create",105],"(",["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Sales",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Order",105],["T_DOUBLE_COLON","::",105],["T_CLASS","class",105],")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","loadByIncrementId",106],"(",["T_CONSTANT_ENCAPSED_STRING","'100000001'",106],")",";",["T_WHITESPACE","\n\n        ",106],["T_VARIABLE","$expectedItems",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getOrderItems",108],"(",["T_VARIABLE","$existingOrder",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$expectedItems",109],"[",["T_LNUMBER","0",109],"]","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$expectedItems",109],"[",["T_LNUMBER","0",109],"]","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",109],"]",["T_WHITESPACE"," ",109],"-",["T_WHITESPACE"," ",109],["T_LNUMBER","1",109],";",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$expectedComment",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],"[",["T_WHITESPACE","\n            ",111],["T_CONSTANT_ENCAPSED_STRING","'comment'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'Test Comment'",112],",",["T_WHITESPACE","\n            ",112],["T_CONSTANT_ENCAPSED_STRING","'is_visible_on_front'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_LNUMBER","1",113],["T_WHITESPACE","\n        ",113],"]",";",["T_WHITESPACE","\n\n        ",114],["T_VARIABLE","$expectedShippingAmount",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_LNUMBER","15",116],";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$expectedAdjustmentPositive",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_DNUMBER","5.53",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$expectedAdjustmentNegative",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_DNUMBER","5.53",118],";",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$result",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_webApiCall",120],"(",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getServiceData",121],"(",["T_VARIABLE","$existingOrder",121],")",",",["T_WHITESPACE","\n            ",121],"[",["T_WHITESPACE","\n                ",122],["T_CONSTANT_ENCAPSED_STRING","'orderId'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$existingOrder",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getEntityId",123],"(",")",",",["T_WHITESPACE","\n                ",123],["T_CONSTANT_ENCAPSED_STRING","'items'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$expectedItems",124],",",["T_WHITESPACE","\n                ",124],["T_CONSTANT_ENCAPSED_STRING","'comment'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$expectedComment",125],",",["T_WHITESPACE","\n                ",125],["T_CONSTANT_ENCAPSED_STRING","'arguments'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],"[",["T_WHITESPACE","\n                    ",126],["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$expectedShippingAmount",127],",",["T_WHITESPACE","\n                    ",127],["T_CONSTANT_ENCAPSED_STRING","'adjustment_positive'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$expectedAdjustmentPositive",128],",",["T_WHITESPACE","\n                    ",128],["T_CONSTANT_ENCAPSED_STRING","'adjustment_negative'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$expectedAdjustmentNegative",129],["T_WHITESPACE","\n                ",129],"]",["T_WHITESPACE","\n            ",130],"]",["T_WHITESPACE","\n        ",131],")",";",["T_WHITESPACE","\n\n        ",132],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertNotEmpty",134],"(",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$result",135],",",["T_WHITESPACE","\n            ",135],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the received response is correct'",136],["T_WHITESPACE","\n        ",136],")",";",["T_WHITESPACE","\n\n        ",137],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $updatedOrder *\/",139],["T_WHITESPACE","\n        ",139],["T_VARIABLE","$updatedOrder",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","objectManager",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","create",140],"(",["T_NS_SEPARATOR","\\",140],["T_STRING","Magento",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Sales",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Model",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Order",140],["T_DOUBLE_COLON","::",140],["T_CLASS","class",140],")",["T_WHITESPACE","\n            ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","loadByIncrementId",141],"(",["T_VARIABLE","$existingOrder",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getIncrementId",141],"(",")",")",";",["T_WHITESPACE","\n\n        ",141],["T_TRY","try",143],["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$creditmemo",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","creditmemoRepository",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","get",144],"(",["T_VARIABLE","$result",144],")",";",["T_WHITESPACE","\n\n            ",144],["T_VARIABLE","$actualCreditmemoItems",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getCreditmemoItems",146],"(",["T_VARIABLE","$creditmemo",146],")",";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$actualCreditmemoComment",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getRecentComment",147],"(",["T_VARIABLE","$creditmemo",147],")",";",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$actualRefundedOrderItems",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getRefundedOrderItems",148],"(",["T_VARIABLE","$updatedOrder",148],")",";",["T_WHITESPACE","\n\n            ",148],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertEquals",150],"(",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$expectedItems",151],",",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$actualCreditmemoItems",152],",",["T_WHITESPACE","\n                ",152],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the Creditmemo contains all requested items'",153],["T_WHITESPACE","\n            ",153],")",";",["T_WHITESPACE","\n\n            ",154],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","assertEquals",156],"(",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$expectedItems",157],",",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$actualRefundedOrderItems",158],",",["T_WHITESPACE","\n                ",158],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that all requested order items were refunded'",159],["T_WHITESPACE","\n            ",159],")",";",["T_WHITESPACE","\n\n            ",160],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertEquals",162],"(",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$expectedComment",163],",",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$actualCreditmemoComment",164],",",["T_WHITESPACE","\n                ",164],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the Creditmemo contains correct comment'",165],["T_WHITESPACE","\n            ",165],")",";",["T_WHITESPACE","\n\n            ",166],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertEquals",168],"(",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$expectedShippingAmount",169],",",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$creditmemo",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getShippingAmount",170],"(",")",",",["T_WHITESPACE","\n                ",170],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the Creditmemo contains correct shipping amount'",171],["T_WHITESPACE","\n            ",171],")",";",["T_WHITESPACE","\n\n            ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","assertEquals",174],"(",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$expectedShippingAmount",175],",",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$updatedOrder",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getShippingRefunded",176],"(",")",",",["T_WHITESPACE","\n                ",176],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that proper shipping amount of the Order was refunded'",177],["T_WHITESPACE","\n            ",177],")",";",["T_WHITESPACE","\n\n            ",178],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertEquals",180],"(",["T_WHITESPACE","\n                ",180],["T_VARIABLE","$expectedAdjustmentPositive",181],",",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$creditmemo",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getAdjustmentPositive",182],"(",")",",",["T_WHITESPACE","\n                ",182],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the Creditmemo contains correct positive adjustment'",183],["T_WHITESPACE","\n            ",183],")",";",["T_WHITESPACE","\n\n            ",184],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertEquals",186],"(",["T_WHITESPACE","\n                ",186],["T_VARIABLE","$expectedAdjustmentNegative",187],",",["T_WHITESPACE","\n                ",187],["T_VARIABLE","$creditmemo",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getAdjustmentNegative",188],"(",")",",",["T_WHITESPACE","\n                ",188],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that the Creditmemo contains correct negative adjustment'",189],["T_WHITESPACE","\n            ",189],")",";",["T_WHITESPACE","\n\n            ",190],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertEquals",192],"(",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$existingOrder",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getStatus",193],"(",")",",",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$updatedOrder",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getStatus",194],"(",")",",",["T_WHITESPACE","\n                ",194],["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that order status was NOT changed'",195],["T_WHITESPACE","\n            ",195],")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE"," ",197],["T_CATCH","catch",197],["T_WHITESPACE"," ",197],"(",["T_NS_SEPARATOR","\\",197],["T_STRING","Magento",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Framework",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Exception",197],["T_NS_SEPARATOR","\\",197],["T_STRING","NoSuchEntityException",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$e",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","fail",198],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed asserting that Creditmemo was created'",198],")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Prepares and returns info for API service.\n     *\n     * @param \\Magento\\Sales\\Api\\Data\\OrderInterface $order\n     *\n     * @return array\n     *\/",202],["T_WHITESPACE","\n    ",208],["T_PRIVATE","private",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","getServiceData",209],"(",["T_NS_SEPARATOR","\\",209],["T_STRING","Magento",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Sales",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Api",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Data",209],["T_NS_SEPARATOR","\\",209],["T_STRING","OrderInterface",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$order",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],"[",["T_WHITESPACE","\n            ",211],["T_CONSTANT_ENCAPSED_STRING","'rest'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],"[",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'resourcePath'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'\/V1\/order\/'",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_VARIABLE","$order",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getEntityId",213],"(",")",["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'\/refund'",213],",",["T_WHITESPACE","\n                ",213],["T_CONSTANT_ENCAPSED_STRING","'httpMethod'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Framework",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Webapi",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Rest",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Request",214],["T_DOUBLE_COLON","::",214],["T_STRING","HTTP_METHOD_POST",214],",",["T_WHITESPACE","\n            ",214],"]",",",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'soap'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],"[",["T_WHITESPACE","\n                ",216],["T_CONSTANT_ENCAPSED_STRING","'service'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_STRING","self",217],["T_DOUBLE_COLON","::",217],["T_STRING","SERVICE_READ_NAME",217],",",["T_WHITESPACE","\n                ",217],["T_CONSTANT_ENCAPSED_STRING","'serviceVersion'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_STRING","self",218],["T_DOUBLE_COLON","::",218],["T_STRING","SERVICE_VERSION",218],",",["T_WHITESPACE","\n                ",218],["T_CONSTANT_ENCAPSED_STRING","'operation'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_STRING","self",219],["T_DOUBLE_COLON","::",219],["T_STRING","SERVICE_READ_NAME",219],["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'execute'",219],",",["T_WHITESPACE","\n            ",219],"]",["T_WHITESPACE","\n        ",220],"]",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Gets all items of given Order in proper format.\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     *\n     * @return array\n     *\/",224],["T_WHITESPACE","\n    ",230],["T_PRIVATE","private",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","getOrderItems",231],"(",["T_NS_SEPARATOR","\\",231],["T_STRING","Magento",231],["T_NS_SEPARATOR","\\",231],["T_STRING","Sales",231],["T_NS_SEPARATOR","\\",231],["T_STRING","Model",231],["T_NS_SEPARATOR","\\",231],["T_STRING","Order",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$order",231],")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$items",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],"[","]",";",["T_WHITESPACE","\n\n        ",233],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Api\\Data\\OrderItemInterface $item *\/",235],["T_WHITESPACE","\n        ",235],["T_FOREACH","foreach",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$order",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getAllItems",236],"(",")",["T_WHITESPACE"," ",236],["T_AS","as",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$item",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$items",237],"[","]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],"[",["T_WHITESPACE","\n                ",237],["T_CONSTANT_ENCAPSED_STRING","'order_item_id'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$item",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getItemId",238],"(",")",",",["T_WHITESPACE","\n                ",238],["T_CONSTANT_ENCAPSED_STRING","'qty'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$item",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getQtyOrdered",239],"(",")",",",["T_WHITESPACE","\n            ",239],"]",";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n\n        ",241],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$items",243],";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Gets refunded items of given Order in proper format.\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     *\n     * @return array\n     *\/",246],["T_WHITESPACE","\n    ",252],["T_PRIVATE","private",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","getRefundedOrderItems",253],"(",["T_NS_SEPARATOR","\\",253],["T_STRING","Magento",253],["T_NS_SEPARATOR","\\",253],["T_STRING","Sales",253],["T_NS_SEPARATOR","\\",253],["T_STRING","Model",253],["T_NS_SEPARATOR","\\",253],["T_STRING","Order",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$order",253],")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$items",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],"[","]",";",["T_WHITESPACE","\n\n        ",255],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Api\\Data\\OrderItemInterface $item *\/",257],["T_WHITESPACE","\n        ",257],["T_FOREACH","foreach",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$order",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getAllItems",258],"(",")",["T_WHITESPACE"," ",258],["T_AS","as",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$item",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$item",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getQtyRefunded",259],"(",")",["T_WHITESPACE"," ",259],">",["T_WHITESPACE"," ",259],["T_LNUMBER","0",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$items",260],"[","]",["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],"[",["T_WHITESPACE","\n                    ",260],["T_CONSTANT_ENCAPSED_STRING","'order_item_id'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$item",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getItemId",261],"(",")",",",["T_WHITESPACE","\n                    ",261],["T_CONSTANT_ENCAPSED_STRING","'qty'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$item",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getQtyRefunded",262],"(",")",",",["T_WHITESPACE","\n                ",262],"]",";",["T_WHITESPACE","\n            ",263],"}",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n\n        ",265],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$items",267],";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Gets all items of given Creditmemo in proper format.\n     *\n     * @param \\Magento\\Sales\\Api\\Data\\CreditmemoInterface $creditmemo\n     *\n     * @return array\n     *\/",270],["T_WHITESPACE","\n    ",276],["T_PRIVATE","private",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","getCreditmemoItems",277],"(",["T_NS_SEPARATOR","\\",277],["T_STRING","Magento",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Sales",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Api",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Data",277],["T_NS_SEPARATOR","\\",277],["T_STRING","CreditmemoInterface",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$creditmemo",277],")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$items",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],"[","]",";",["T_WHITESPACE","\n\n        ",279],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Api\\Data\\CreditmemoItemInterface $item *\/",281],["T_WHITESPACE","\n        ",281],["T_FOREACH","foreach",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$creditmemo",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getItems",282],"(",")",["T_WHITESPACE"," ",282],["T_AS","as",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$item",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n            ",282],["T_VARIABLE","$items",283],"[","]",["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],"[",["T_WHITESPACE","\n                ",283],["T_CONSTANT_ENCAPSED_STRING","'order_item_id'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$item",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getOrderItemId",284],"(",")",",",["T_WHITESPACE","\n                ",284],["T_CONSTANT_ENCAPSED_STRING","'qty'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$item",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getQty",285],"(",")",",",["T_WHITESPACE","\n            ",285],"]",";",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n\n        ",287],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$items",289],";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_DOC_COMMENT","\/**\n     * Gets the most recent comment of given Creditmemo in proper format.\n     *\n     * @param \\Magento\\Sales\\Api\\Data\\CreditmemoInterface $creditmemo\n     *\n     * @return array|null\n     *\/",292],["T_WHITESPACE","\n    ",298],["T_PRIVATE","private",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","getRecentComment",299],"(",["T_NS_SEPARATOR","\\",299],["T_STRING","Magento",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Sales",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Api",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Data",299],["T_NS_SEPARATOR","\\",299],["T_STRING","CreditmemoInterface",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$creditmemo",299],")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$comments",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$creditmemo",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getComments",301],"(",")",";",["T_WHITESPACE","\n\n        ",301],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_VARIABLE","$comments",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$comment",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","reset",304],"(",["T_VARIABLE","$comments",304],")",";",["T_WHITESPACE","\n\n            ",304],["T_RETURN","return",306],["T_WHITESPACE"," ",306],"[",["T_WHITESPACE","\n                ",306],["T_CONSTANT_ENCAPSED_STRING","'comment'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$comment",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getComment",307],"(",")",",",["T_WHITESPACE","\n                ",307],["T_CONSTANT_ENCAPSED_STRING","'is_visible_on_front'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$comment",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getIsVisibleOnFront",308],"(",")",",",["T_WHITESPACE","\n            ",308],"]",";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n\n        ",310],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_STRING","null",312],";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n",313],"}",["T_WHITESPACE","\n",314]]
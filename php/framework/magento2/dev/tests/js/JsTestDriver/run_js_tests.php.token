[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * This script executes all Magento JavaScript unit tests.\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",7],["T_STRING","define",9],"(",["T_CONSTANT_ENCAPSED_STRING","'RELATIVE_APP_ROOT'",9],",",["T_WHITESPACE"," ",9],["T_CONSTANT_ENCAPSED_STRING","'..\/..\/..\/..'",9],")",";",["T_WHITESPACE","\n",9],["T_REQUIRE","require",10],["T_WHITESPACE"," ",10],["T_DIR","__DIR__",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/..\/app\/autoload.php'",10],";",["T_WHITESPACE","\n\n",10],["T_VARIABLE","$userConfig",12],["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_STRING","normalize",12],"(",["T_CONSTANT_ENCAPSED_STRING","'jsTestDriver.php'",12],")",";",["T_WHITESPACE","\n",12],["T_VARIABLE","$defaultConfig",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_STRING","normalize",13],"(",["T_CONSTANT_ENCAPSED_STRING","'jsTestDriver.php.dist'",13],")",";",["T_WHITESPACE","\n\n",13],["T_VARIABLE","$configFile",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_STRING","file_exists",15],"(",["T_VARIABLE","$userConfig",15],")",["T_WHITESPACE"," ",15],"?",["T_WHITESPACE"," ",15],["T_VARIABLE","$userConfig",15],["T_WHITESPACE"," ",15],":",["T_WHITESPACE"," ",15],["T_VARIABLE","$defaultConfig",15],";",["T_WHITESPACE","\n",15],["T_VARIABLE","$config",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_REQUIRE","require",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$configFile",16],";",["T_WHITESPACE","\n\n",16],["T_IF","if",18],["T_WHITESPACE"," ",18],"(",["T_ISSET","isset",18],"(",["T_VARIABLE","$config",18],"[",["T_CONSTANT_ENCAPSED_STRING","'JsTestDriver'",18],"]",")",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$jsTestDriver",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_VARIABLE","$config",19],"[",["T_CONSTANT_ENCAPSED_STRING","'JsTestDriver'",19],"]",";",["T_WHITESPACE","\n",19],"}",["T_WHITESPACE"," ",20],["T_ELSE","else",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n    ",20],["T_ECHO","echo",21],["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","\"Value for the 'JsTestDriver' configuration parameter is not specified.\"",21],["T_WHITESPACE"," ",21],".",["T_WHITESPACE"," ",21],["T_STRING","PHP_EOL",21],";",["T_WHITESPACE","\n    ",21],["T_STRING","showUsage",22],"(",")",";",["T_WHITESPACE","\n",22],"}",["T_WHITESPACE","\n",23],["T_IF","if",24],["T_WHITESPACE"," ",24],"(","!",["T_STRING","file_exists",24],"(",["T_VARIABLE","$jsTestDriver",24],")",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_STRING","reportError",25],"(",["T_CONSTANT_ENCAPSED_STRING","'JsTestDriver jar file does not exist: '",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_VARIABLE","$jsTestDriver",25],")",";",["T_WHITESPACE","\n",25],"}",["T_WHITESPACE","\n\n",26],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_ISSET","isset",28],"(",["T_VARIABLE","$config",28],"[",["T_CONSTANT_ENCAPSED_STRING","'Browser'",28],"]",")",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$browser",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$config",29],"[",["T_CONSTANT_ENCAPSED_STRING","'Browser'",29],"]",";",["T_WHITESPACE","\n",29],"}",["T_WHITESPACE"," ",30],["T_ELSE","else",30],["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_IF","if",31],["T_WHITESPACE"," ",31],"(",["T_STRING","strtoupper",31],"(",["T_STRING","substr",31],"(",["T_STRING","PHP_OS",31],",",["T_WHITESPACE"," ",31],["T_LNUMBER","0",31],",",["T_WHITESPACE"," ",31],["T_LNUMBER","3",31],")",")",["T_WHITESPACE"," ",31],["T_IS_IDENTICAL","===",31],["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'WIN'",31],")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$browser",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe'",32],";",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE"," ",33],["T_ELSEIF","elseif",33],["T_WHITESPACE"," ",33],"(",["T_STRING","PHP_OS",33],["T_WHITESPACE"," ",33],["T_IS_IDENTICAL","===",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'Darwin'",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$browser",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'\/Applications\/Firefox.app\/Contents\/MacOS\/firefox'",34],";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE"," ",35],["T_ELSE","else",35],["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$browser",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","exec",36],"(",["T_CONSTANT_ENCAPSED_STRING","'which firefox'",36],")",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n",37],"}",["T_WHITESPACE","\n",38],["T_IF","if",39],["T_WHITESPACE"," ",39],"(","!",["T_STRING","file_exists",39],"(",["T_VARIABLE","$browser",39],")",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_STRING","reportError",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Browser executable not found: '",40],["T_WHITESPACE"," ",40],".",["T_WHITESPACE"," ",40],["T_VARIABLE","$browser",40],")",";",["T_WHITESPACE","\n",40],"}",["T_WHITESPACE","\n\n",41],["T_VARIABLE","$server",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_ISSET","isset",43],"(",["T_VARIABLE","$config",43],"[",["T_CONSTANT_ENCAPSED_STRING","'server'",43],"]",")",["T_WHITESPACE"," ",43],"?",["T_WHITESPACE"," ",43],["T_VARIABLE","$config",43],"[",["T_CONSTANT_ENCAPSED_STRING","'server'",43],"]",["T_WHITESPACE"," ",43],":",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","\"http:\/\/localhost:9876\"",43],";",["T_WHITESPACE","\n",43],["T_VARIABLE","$port",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","substr",44],"(",["T_STRING","strrchr",44],"(",["T_VARIABLE","$server",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","':'",44],")",",",["T_WHITESPACE"," ",44],["T_LNUMBER","1",44],")",";",["T_WHITESPACE","\n\n",44],["T_VARIABLE","$proxies",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ISSET","isset",46],"(",["T_VARIABLE","$config",46],"[",["T_CONSTANT_ENCAPSED_STRING","'proxy'",46],"]",")",["T_WHITESPACE"," ",46],"?",["T_WHITESPACE"," ",46],["T_VARIABLE","$config",46],"[",["T_CONSTANT_ENCAPSED_STRING","'proxy'",46],"]",["T_WHITESPACE"," ",46],":",["T_WHITESPACE"," ",46],"[","]",";",["T_WHITESPACE","\n\n",46],["T_VARIABLE","$testFilesPath",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_ISSET","isset",48],"(",["T_VARIABLE","$config",48],"[",["T_CONSTANT_ENCAPSED_STRING","'test'",48],"]",")",["T_WHITESPACE"," ",48],"?",["T_WHITESPACE"," ",48],["T_VARIABLE","$config",48],"[",["T_CONSTANT_ENCAPSED_STRING","'test'",48],"]",["T_WHITESPACE"," ",48],":",["T_WHITESPACE"," ",48],"[","]",";",["T_WHITESPACE","\n",48],["T_VARIABLE","$testFiles",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","listFiles",49],"(",["T_VARIABLE","$testFilesPath",49],")",";",["T_WHITESPACE","\n\n",49],["T_VARIABLE","$loadFilesPath",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ISSET","isset",51],"(",["T_VARIABLE","$config",51],"[",["T_CONSTANT_ENCAPSED_STRING","'load'",51],"]",")",["T_WHITESPACE"," ",51],"?",["T_WHITESPACE"," ",51],["T_VARIABLE","$config",51],"[",["T_CONSTANT_ENCAPSED_STRING","'load'",51],"]",["T_WHITESPACE"," ",51],":",["T_WHITESPACE"," ",51],"[","]",";",["T_WHITESPACE","\n",51],["T_VARIABLE","$loadFiles",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","listFiles",52],"(",["T_VARIABLE","$loadFilesPath",52],")",";",["T_WHITESPACE","\n",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_EMPTY","empty",53],"(",["T_VARIABLE","$loadFiles",53],")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_STRING","reportError",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not find any files to load.'",54],")",";",["T_WHITESPACE","\n",54],"}",["T_WHITESPACE","\n\n",55],["T_VARIABLE","$serveFilesPath",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_ISSET","isset",57],"(",["T_VARIABLE","$config",57],"[",["T_CONSTANT_ENCAPSED_STRING","'serve'",57],"]",")",["T_WHITESPACE"," ",57],"?",["T_WHITESPACE"," ",57],["T_VARIABLE","$config",57],"[",["T_CONSTANT_ENCAPSED_STRING","'serve'",57],"]",["T_WHITESPACE"," ",57],":",["T_WHITESPACE"," ",57],"[","]",";",["T_WHITESPACE","\n",57],["T_VARIABLE","$serveFiles",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","listFiles",58],"(",["T_VARIABLE","$serveFilesPath",58],")",";",["T_WHITESPACE","\n\n",58],["T_VARIABLE","$sortedFiles",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],"[","]",";",["T_WHITESPACE","\n\n",60],["T_VARIABLE","$fileOrder",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","normalize",62],"(",["T_CONSTANT_ENCAPSED_STRING","'jsTestDriverOrder.php'",62],")",";",["T_WHITESPACE","\n",62],["T_IF","if",63],["T_WHITESPACE"," ",63],"(",["T_STRING","file_exists",63],"(",["T_VARIABLE","$fileOrder",63],")",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$loadOrder",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_REQUIRE","require",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$fileOrder",64],";",["T_WHITESPACE","\n    ",64],["T_FOREACH","foreach",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$loadOrder",65],["T_WHITESPACE"," ",65],["T_AS","as",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$file",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$sortedFiles",66],"[","]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","RELATIVE_APP_ROOT",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_VARIABLE","$file",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n    ",67],["T_FOREACH","foreach",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$loadFiles",68],["T_WHITESPACE"," ",68],["T_AS","as",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$loadFile",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$found",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","false",69],";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$normalizedLoadFile",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","normalize",70],"(",["T_VARIABLE","$loadFile",70],")",";",["T_WHITESPACE","\n        ",70],["T_FOREACH","foreach",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$loadOrder",71],["T_WHITESPACE"," ",71],["T_AS","as",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$orderFile",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_STRING","strcmp",72],"(",["T_STRING","normalize",72],"(",["T_STRING","RELATIVE_APP_ROOT",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$orderFile",72],")",",",["T_WHITESPACE"," ",72],["T_VARIABLE","$normalizedLoadFile",72],")",["T_WHITESPACE"," ",72],["T_IS_EQUAL","==",72],["T_WHITESPACE"," ",72],["T_LNUMBER","0",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$found",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","true",73],";",["T_WHITESPACE","\n                ",73],["T_BREAK","break",74],";",["T_WHITESPACE","\n            ",74],"}",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(","!",["T_VARIABLE","$found",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_STRING","array_push",78],"(",["T_VARIABLE","$sortedFiles",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$loadFile",78],")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n",80],"}",["T_WHITESPACE","\n\n",81],["T_VARIABLE","$jsTestDriverConf",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_DIR","__DIR__",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\/jsTestDriver.conf'",83],";",["T_WHITESPACE","\n",83],["T_VARIABLE","$fh",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","fopen",84],"(",["T_VARIABLE","$jsTestDriverConf",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'w'",84],")",";",["T_WHITESPACE","\n\n",84],["T_STRING","fwrite",86],"(",["T_VARIABLE","$fh",86],",",["T_WHITESPACE"," ",86],"\"",["T_ENCAPSED_AND_WHITESPACE","server: ",86],["T_VARIABLE","$server",86],"\"",["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_STRING","PHP_EOL",86],")",";",["T_WHITESPACE","\n\n",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_STRING","count",88],"(",["T_VARIABLE","$proxies",88],")",["T_WHITESPACE"," ",88],">",["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n    ",88],["T_STRING","fwrite",89],"(",["T_VARIABLE","$fh",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"proxy:\"",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","PHP_EOL",89],")",";",["T_WHITESPACE","\n    ",89],["T_FOREACH","foreach",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$proxies",90],["T_WHITESPACE"," ",90],["T_AS","as",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$proxy",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$proxyServer",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","sprintf",91],"(",["T_VARIABLE","$proxy",91],"[",["T_CONSTANT_ENCAPSED_STRING","'server'",91],"]",",",["T_WHITESPACE"," ",91],["T_VARIABLE","$server",91],",",["T_WHITESPACE"," ",91],["T_STRING","normalize",91],"(",["T_STRING","RELATIVE_APP_ROOT",91],")",")",";",["T_WHITESPACE","\n        ",91],["T_STRING","fwrite",92],"(",["T_VARIABLE","$fh",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'  - {matcher: \"'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$proxy",92],"[",["T_CONSTANT_ENCAPSED_STRING","'matcher'",92],"]",["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'\", server: \"'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$proxyServer",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'\"}'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","PHP_EOL",92],")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n",93],"}",["T_WHITESPACE","\n\n",94],["T_STRING","fwrite",96],"(",["T_VARIABLE","$fh",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","\"load:\"",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_STRING","PHP_EOL",96],")",";",["T_WHITESPACE","\n",96],["T_FOREACH","foreach",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$sortedFiles",97],["T_WHITESPACE"," ",97],["T_AS","as",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$file",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(","!",["T_STRING","in_array",98],"(",["T_VARIABLE","$file",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$serveFiles",98],")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n        ",98],["T_STRING","fwrite",99],"(",["T_VARIABLE","$fh",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","\"  - \"",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_VARIABLE","$file",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_STRING","PHP_EOL",99],")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n",100],"}",["T_WHITESPACE","\n\n",101],["T_STRING","fwrite",103],"(",["T_VARIABLE","$fh",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"test:\"",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_STRING","PHP_EOL",103],")",";",["T_WHITESPACE","\n",103],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$testFiles",104],["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$file",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_STRING","fwrite",105],"(",["T_VARIABLE","$fh",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","\"  - \"",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_VARIABLE","$file",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_STRING","PHP_EOL",105],")",";",["T_WHITESPACE","\n",105],"}",["T_WHITESPACE","\n\n",106],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_STRING","count",108],"(",["T_VARIABLE","$serveFiles",108],")",["T_WHITESPACE"," ",108],">",["T_WHITESPACE"," ",108],["T_LNUMBER","0",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n    ",108],["T_STRING","fwrite",109],"(",["T_VARIABLE","$fh",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","\"serve:\"",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_STRING","PHP_EOL",109],")",";",["T_WHITESPACE","\n    ",109],["T_FOREACH","foreach",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$serveFiles",110],["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$file",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n        ",110],["T_STRING","fwrite",111],"(",["T_VARIABLE","$fh",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","\"  - \"",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$file",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_STRING","PHP_EOL",111],")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n",112],"}",["T_WHITESPACE","\n\n",113],["T_STRING","fclose",115],"(",["T_VARIABLE","$fh",115],")",";",["T_WHITESPACE","\n\n",115],["T_VARIABLE","$testOutput",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_DIR","__DIR__",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'\/test-output'",117],";",["T_WHITESPACE","\n\n",117],["T_VARIABLE","$filesystemAdapter",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Magento",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Framework",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Filesystem",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Driver",119],["T_NS_SEPARATOR","\\",119],["T_STRING","File",119],"(",")",";",["T_WHITESPACE","\n",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$filesystemAdapter",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","isExists",120],"(",["T_VARIABLE","$testOutput",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$filesystemAdapter",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","deleteDirectory",121],"(",["T_VARIABLE","$testOutput",121],")",";",["T_WHITESPACE","\n",121],"}",["T_WHITESPACE","\n",122],["T_STRING","mkdir",123],"(",["T_VARIABLE","$testOutput",123],")",";",["T_WHITESPACE","\n\n",123],["T_VARIABLE","$command",125],["T_WHITESPACE","\n    ",125],"=",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'java -jar \"'",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_VARIABLE","$jsTestDriver",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'\" --config \"'",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_VARIABLE","$jsTestDriverConf",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'\" --reset --port '",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_VARIABLE","$port",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE","\n    ",126],["T_CONSTANT_ENCAPSED_STRING","' --browser \"'",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$browser",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'\" --raiseOnFailure true --tests all --testOutput \"'",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$testOutput",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'\"'",127],";",["T_WHITESPACE","\n\n",127],["T_ECHO","echo",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$command",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_STRING","PHP_EOL",129],";",["T_WHITESPACE","\n\n",129],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_STRING","strtoupper",131],"(",["T_STRING","substr",131],"(",["T_STRING","PHP_OS",131],",",["T_WHITESPACE"," ",131],["T_LNUMBER","0",131],",",["T_WHITESPACE"," ",131],["T_LNUMBER","3",131],")",")",["T_WHITESPACE"," ",131],["T_IS_IDENTICAL","===",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'WIN'",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n    ",131],["T_STRING","system",132],"(",["T_VARIABLE","$command",132],")",";",["T_WHITESPACE","\n",132],"}",["T_WHITESPACE"," ",133],["T_ELSE","else",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$commandFile",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_DIR","__DIR__",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'\/run_js_tests.sh'",134],";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$fh",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","fopen",135],"(",["T_VARIABLE","$commandFile",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'w'",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_VARIABLE","$shellCommand",137],["T_WHITESPACE","\n        ",137],"=",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'LSOF=`\/usr\/sbin\/lsof -i :'",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_VARIABLE","$port",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","' -t`\n        if [ \"$LSOF\" != \"\" ];\n        then\n            kill -9 $LSOF\n        fi\n\n        # Skip Xvfb setup for OS X since there browsers do not support headless display that way\n        if [ \"$(uname)\" != \"Darwin\" ]; then\n            DISPLAY_NUM=99\n            ps -ef | egrep \"[X]vfb.*:$DISPLAY_NUM\"\n            if [ $? -eq 0 ] ; then\n                pkill Xvfb\n            fi\n    \n            XVFB=`which Xvfb`\n            if [ \"$?\" -eq 1 ];\n            then\n                echo \"Xvfb not found.\"\n                exit 1\n            fi\n    \n            $XVFB :$DISPLAY_NUM -nolisten inet6 -ac &\n            PID_XVFB=\"$!\"        # take the process ID\n            export DISPLAY=:$DISPLAY_NUM   # set display to use that of the Xvfb\n        fi\n        \n        USER=`whoami`\n        SUDO=`which sudo`\n\n        # run the tests\n        $SUDO -u $USER '",138],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_VARIABLE","$command",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'\n\n        if [ \"$(uname)\" != \"Darwin\" ]; then\n            kill -9 $PID_XVFB    # shut down Xvfb (firefox will shut down cleanly by JsTestDriver)\n        fi\n        echo \"Done.\"'",168],";",["T_WHITESPACE","\n\n    ",173],["T_STRING","fwrite",175],"(",["T_VARIABLE","$fh",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$shellCommand",175],["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_STRING","PHP_EOL",175],")",";",["T_WHITESPACE","\n    ",175],["T_STRING","fclose",176],"(",["T_VARIABLE","$fh",176],")",";",["T_WHITESPACE","\n    ",176],["T_STRING","chmod",177],"(",["T_VARIABLE","$commandFile",177],",",["T_WHITESPACE"," ",177],["T_LNUMBER","0750",177],")",";",["T_WHITESPACE","\n\n    ",177],["T_STRING","exec",179],"(",["T_VARIABLE","$commandFile",179],")",";",["T_WHITESPACE","\n",179],"}",["T_WHITESPACE","\n\n",180],["T_DOC_COMMENT","\/**\n * Show a message that displays how to use (invoke) this PHP script and exit.\n *\/",182],["T_WHITESPACE","\n",184],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","showUsage",185],"(",")",["T_WHITESPACE","\n",185],"{",["T_WHITESPACE","\n    ",186],["T_STRING","reportError",187],"(",["T_CONSTANT_ENCAPSED_STRING","'Usage: php run_js_tests.php'",187],")",";",["T_WHITESPACE","\n",187],"}",["T_WHITESPACE","\n\n",188],["T_DOC_COMMENT","\/**\n * Reports an error given an error message and exits, effectively halting the PHP script's execution.\n *\n * @param string $message - Error message to be displayed to the user.\n *\n * @SuppressWarnings(PHPMD.ExitExpression)\n *\/",190],["T_WHITESPACE","\n",196],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","reportError",197],"(",["T_VARIABLE","$message",197],")",["T_WHITESPACE","\n",197],"{",["T_WHITESPACE","\n    ",198],["T_ECHO","echo",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$message",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_STRING","PHP_EOL",199],";",["T_WHITESPACE","\n    ",199],["T_EXIT","exit",200],"(",["T_LNUMBER","1",200],")",";",["T_WHITESPACE","\n",200],"}",["T_WHITESPACE","\n\n",201],["T_DOC_COMMENT","\/**\n * Takes a file or directory path in any form and normalizes it to fully absolute canonical form\n * relative to this PHP script's location.\n *\n * @param string $filePath - File or directory path to be fully normalized to canonical form.\n *\n * @return string - The fully resolved path converted to absolute form.\n *\/",203],["T_WHITESPACE","\n",210],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","normalize",211],"(",["T_VARIABLE","$filePath",211],")",["T_WHITESPACE","\n",211],"{",["T_WHITESPACE","\n    ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_STRING","str_replace",213],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'\/'",213],",",["T_WHITESPACE"," ",213],["T_STRING","realpath",213],"(",["T_DIR","__DIR__",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'\/'",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_VARIABLE","$filePath",213],")",")",";",["T_WHITESPACE","\n",213],"}",["T_WHITESPACE","\n\n",214],["T_DOC_COMMENT","\/**\n * Accepts an array of directories and generates a list of Javascript files (.js) in those directories and\n * all subdirectories recursively.\n *\n * @param array $dirs - An array of directories as specified in the configuration file (i.e. $configFile).\n *\n * @return array - An array of directory paths to all Javascript files found by recursively searching the\n * specified array of directories.\n *\/",216],["T_WHITESPACE","\n",224],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","listFiles",225],"(",["T_VARIABLE","$dirs",225],")",["T_WHITESPACE","\n",225],"{",["T_WHITESPACE","\n    ",226],["T_VARIABLE","$baseDir",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","normalize",227],"(",["T_STRING","RELATIVE_APP_ROOT",227],")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$result",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],"[","]",";",["T_WHITESPACE","\n    ",228],["T_FOREACH","foreach",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$dirs",229],["T_WHITESPACE"," ",229],["T_AS","as",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$dir",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$path",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$baseDir",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_VARIABLE","$dir",230],";",["T_WHITESPACE","\n        ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_STRING","is_file",231],"(",["T_VARIABLE","$path",231],")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$path",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","substr_replace",232],"(",["T_VARIABLE","$path",232],",",["T_WHITESPACE"," ",232],["T_STRING","RELATIVE_APP_ROOT",232],",",["T_WHITESPACE"," ",232],["T_LNUMBER","0",232],",",["T_WHITESPACE"," ",232],["T_STRING","strlen",232],"(",["T_VARIABLE","$baseDir",232],")",")",";",["T_WHITESPACE","\n            ",232],["T_STRING","array_push",233],"(",["T_VARIABLE","$result",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$path",233],")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE"," ",234],["T_ELSE","else",234],["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$paths",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","glob",235],"(",["T_VARIABLE","$path",235],["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'\/*'",235],",",["T_WHITESPACE"," ",235],["T_STRING","GLOB_ONLYDIR",235],["T_WHITESPACE"," ",235],"|",["T_WHITESPACE"," ",235],["T_STRING","GLOB_NOSORT",235],")",";",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$paths",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","substr_replace",236],"(",["T_VARIABLE","$paths",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","''",236],",",["T_WHITESPACE"," ",236],["T_LNUMBER","0",236],",",["T_WHITESPACE"," ",236],["T_STRING","strlen",236],"(",["T_VARIABLE","$baseDir",236],")",")",";",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$result",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","array_merge",237],"(",["T_VARIABLE","$result",237],",",["T_WHITESPACE"," ",237],["T_STRING","listFiles",237],"(",["T_VARIABLE","$paths",237],")",")",";",["T_WHITESPACE","\n\n            ",237],["T_VARIABLE","$files",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","glob",239],"(",["T_VARIABLE","$path",239],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'\/*.js'",239],",",["T_WHITESPACE"," ",239],["T_STRING","GLOB_NOSORT",239],")",";",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$files",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING","substr_replace",240],"(",["T_VARIABLE","$files",240],",",["T_WHITESPACE"," ",240],["T_STRING","RELATIVE_APP_ROOT",240],",",["T_WHITESPACE"," ",240],["T_LNUMBER","0",240],",",["T_WHITESPACE"," ",240],["T_STRING","strlen",240],"(",["T_VARIABLE","$baseDir",240],")",")",";",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$result",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","array_merge",241],"(",["T_VARIABLE","$result",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$files",241],")",";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n    ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$result",244],";",["T_WHITESPACE","\n",244],"}",["T_WHITESPACE","\n",245]]
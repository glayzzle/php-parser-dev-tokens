[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Bootstrap",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * @magentoDbIsolation enabled\n * @magentoAppIsolation enabled\n *\/",10],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","RuleProductTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","PHPUnit_Framework_TestCase",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogRule\\Model\\Indexer\\IndexBuilder\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$indexBuilder",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogRule\\Model\\ResourceModel\\Rule\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$resourceRule",24],";",["T_WHITESPACE","\n\n    ",24],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setUp",26],"(",")",["T_WHITESPACE","\n    ",26],"{",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","indexBuilder",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","Bootstrap",28],["T_DOUBLE_COLON","::",28],["T_STRING","getObjectManager",28],"(",")",["T_OBJECT_OPERATOR","->",28],["T_STRING","get",28],"(",["T_WHITESPACE","\n            ",28],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","CatalogRule",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Model",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Indexer",29],["T_NS_SEPARATOR","\\",29],["T_STRING","IndexBuilder",29],["T_DOUBLE_COLON","::",29],["T_CLASS","class",29],["T_WHITESPACE","\n        ",29],")",";",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","resourceRule",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","Bootstrap",31],["T_DOUBLE_COLON","::",31],["T_STRING","getObjectManager",31],"(",")",["T_OBJECT_OPERATOR","->",31],["T_STRING","get",31],"(",["T_NS_SEPARATOR","\\",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","CatalogRule",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Model",31],["T_NS_SEPARATOR","\\",31],["T_STRING","ResourceModel",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Rule",31],["T_DOUBLE_COLON","::",31],["T_CLASS","class",31],")",";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/CatalogRule\/_files\/attribute.php\n     * @magentoDataFixture Magento\/Catalog\/_files\/product_simple.php\n     *\/",34],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testReindexAfterRuleCreation",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ProductRepository $productRepository *\/",40],["T_WHITESPACE","\n        ",40],["T_VARIABLE","$productRepository",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","TestFramework",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Helper",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Bootstrap",41],["T_DOUBLE_COLON","::",41],["T_STRING","getObjectManager",41],"(",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","create",41],"(",["T_WHITESPACE","\n            ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Catalog",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Model",42],["T_NS_SEPARATOR","\\",42],["T_STRING","ProductRepository",42],["T_DOUBLE_COLON","::",42],["T_CLASS","class",42],["T_WHITESPACE","\n        ",42],")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$product",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$productRepository",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","get",44],"(",["T_CONSTANT_ENCAPSED_STRING","'simple'",44],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$product",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","setData",45],"(",["T_CONSTANT_ENCAPSED_STRING","'test_attribute'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'test_attribute_value'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","save",45],"(",")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertFalse",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","resourceRule",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getRulePrice",46],"(",["T_NEW","new",46],["T_WHITESPACE"," ",46],["T_NS_SEPARATOR","\\",46],["T_STRING","DateTime",46],"(",")",",",["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$product",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getId",46],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","saveRule",48],"(",")",";",["T_WHITESPACE","\n        ",48],["T_COMMENT","\/\/ apply all rules\n",49],["T_WHITESPACE","        ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","indexBuilder",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","reindexFull",50],"(",")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertEquals",52],"(",["T_DNUMBER","9.8",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","resourceRule",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getRulePrice",52],"(",["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_NS_SEPARATOR","\\",52],["T_STRING","DateTime",52],"(",")",",",["T_WHITESPACE"," ",52],["T_LNUMBER","1",52],",",["T_WHITESPACE"," ",52],["T_LNUMBER","1",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$product",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getId",52],"(",")",")",")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","saveRule",55],"(",")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_REQUIRE","require",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Magento\/CatalogRule\/_files\/rule_by_attribute.php'",57],";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n",58],"}",["T_WHITESPACE","\n",59]]
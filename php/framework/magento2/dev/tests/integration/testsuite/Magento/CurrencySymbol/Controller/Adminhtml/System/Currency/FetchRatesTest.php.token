[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CurrencySymbol",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adminhtml",6],["T_NS_SEPARATOR","\\",6],["T_STRING","System",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Currency",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","FetchRatesTest",8],["T_WHITESPACE"," ",8],["T_EXTENDS","extends",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestCase",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AbstractBackendController",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * Test fetch action without service\n     *\/",10],["T_WHITESPACE","\n    ",12],["T_PUBLIC","public",13],["T_WHITESPACE"," ",13],["T_FUNCTION","function",13],["T_WHITESPACE"," ",13],["T_STRING","testFetchRatesActionWithoutService",13],"(",")",["T_WHITESPACE","\n    ",13],"{",["T_WHITESPACE","\n        ",14],["T_VARIABLE","$request",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","getRequest",15],"(",")",";",["T_WHITESPACE","\n        ",15],["T_VARIABLE","$request",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","setParam",16],"(",["T_WHITESPACE","\n            ",16],["T_CONSTANT_ENCAPSED_STRING","'rate_services'",17],",",["T_WHITESPACE","\n            ",17],["T_STRING","null",18],["T_WHITESPACE","\n        ",18],")",";",["T_WHITESPACE","\n        ",19],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","dispatch",20],"(",["T_CONSTANT_ENCAPSED_STRING","'backend\/admin\/system_currency\/fetchRates'",20],")",";",["T_WHITESPACE","\n\n        ",20],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","assertSessionMessages",22],"(",["T_WHITESPACE","\n            ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","contains",23],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify a correct Import Service.'",23],")",",",["T_WHITESPACE","\n            ",23],["T_NS_SEPARATOR","\\",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Framework",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Message",24],["T_NS_SEPARATOR","\\",24],["T_STRING","MessageInterface",24],["T_DOUBLE_COLON","::",24],["T_STRING","TYPE_ERROR",24],["T_WHITESPACE","\n        ",24],")",";",["T_WHITESPACE","\n    ",25],"}",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Test save action with nonexistent service\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","testFetchRatesActionWithNonexistentService",31],"(",")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$request",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getRequest",33],"(",")",";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$request",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","setParam",34],"(",["T_WHITESPACE","\n            ",34],["T_CONSTANT_ENCAPSED_STRING","'rate_services'",35],",",["T_WHITESPACE","\n            ",35],["T_CONSTANT_ENCAPSED_STRING","'non-existent-service'",36],["T_WHITESPACE","\n        ",36],")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","dispatch",38],"(",["T_CONSTANT_ENCAPSED_STRING","'backend\/admin\/system_currency\/fetchRates'",38],")",";",["T_WHITESPACE","\n\n        ",38],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertSessionMessages",40],"(",["T_WHITESPACE","\n            ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","contains",41],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t initialize the import model.'",41],")",",",["T_WHITESPACE","\n            ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Message",42],["T_NS_SEPARATOR","\\",42],["T_STRING","MessageInterface",42],["T_DOUBLE_COLON","::",42],["T_STRING","TYPE_ERROR",42],["T_WHITESPACE","\n        ",42],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Test save action with nonexistent service\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","testFetchRatesActionWithServiceErrors",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","runActionWithMockedImportService",51],"(","[",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t retrieve a rate from url'",51],"]",")",";",["T_WHITESPACE","\n\n        ",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertSessionMessages",53],"(",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","contains",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Click \"Save\" to apply the rates we found.'",54],")",",",["T_WHITESPACE","\n            ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Message",55],["T_NS_SEPARATOR","\\",55],["T_STRING","MessageInterface",55],["T_DOUBLE_COLON","::",55],["T_STRING","TYPE_WARNING",55],["T_WHITESPACE","\n        ",55],")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Test save action with nonexistent service\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","testFetchRatesActionWithoutServiceErrors",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","runActionWithMockedImportService",64],"(",")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertSessionMessages",66],"(",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","contains",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Click \"Save\" to apply the rates we found.'",67],")",",",["T_WHITESPACE","\n            ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Message",68],["T_NS_SEPARATOR","\\",68],["T_STRING","MessageInterface",68],["T_DOUBLE_COLON","::",68],["T_STRING","TYPE_SUCCESS",68],["T_WHITESPACE","\n        ",68],")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Run fetchRates with mocked external import service\n     *\n     * @param array $messages messages from external import service\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","runActionWithMockedImportService",77],"(",["T_ARRAY","array",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$messages",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],"[","]",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$importServiceMock",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMockBuilder",79],"(",["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Directory",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Model",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Currency",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Import",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Webservicex",79],["T_DOUBLE_COLON","::",79],["T_CLASS","class",79],")",["T_WHITESPACE","\n            ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","disableOriginalConstructor",80],"(",")",["T_WHITESPACE","\n            ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","getMock",81],"(",")",";",["T_WHITESPACE","\n\n        ",81],["T_VARIABLE","$importServiceMock",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","method",83],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchRates'",83],")",["T_WHITESPACE","\n            ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","willReturn",84],"(","[",["T_CONSTANT_ENCAPSED_STRING","'USD'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'USD'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_LNUMBER","1",84],"]","]",")",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$importServiceMock",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","method",86],"(",["T_CONSTANT_ENCAPSED_STRING","'getMessages'",86],")",["T_WHITESPACE","\n            ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","willReturn",87],"(",["T_VARIABLE","$messages",87],")",";",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$backendSessionMock",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMockBuilder",89],"(",["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Backend",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Model",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Session",89],["T_DOUBLE_COLON","::",89],["T_CLASS","class",89],")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","disableOriginalConstructor",90],"(",")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","getMock",91],"(",")",";",["T_WHITESPACE","\n\n        ",91],["T_VARIABLE","$importServiceFactoryMock",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getMockBuilder",93],"(",["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Directory",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Model",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Currency",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Import",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Factory",93],["T_DOUBLE_COLON","::",93],["T_CLASS","class",93],")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","disableOriginalConstructor",94],"(",")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","getMock",95],"(",")",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$importServiceFactoryMock",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","method",97],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",97],")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","willReturn",98],"(",["T_VARIABLE","$importServiceMock",98],")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$objectManagerMock",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getMockBuilder",100],"(",["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Framework",100],["T_NS_SEPARATOR","\\",100],["T_STRING","ObjectManagerInterface",100],["T_DOUBLE_COLON","::",100],["T_CLASS","class",100],")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","disableOriginalConstructor",101],"(",")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","getMock",102],"(",")",";",["T_WHITESPACE","\n\n        ",102],["T_VARIABLE","$objectManagerMap",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[",["T_WHITESPACE","\n            ",104],"[",["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Directory",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Model",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Currency",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Import",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Factory",105],["T_DOUBLE_COLON","::",105],["T_CLASS","class",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$importServiceFactoryMock",105],"]",",",["T_WHITESPACE","\n            ",105],"[",["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Backend",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Model",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Session",106],["T_DOUBLE_COLON","::",106],["T_CLASS","class",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$backendSessionMock",106],"]",["T_WHITESPACE","\n        ",106],"]",";",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$objectManagerMock",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","method",109],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",109],")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","will",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","returnValueMap",110],"(",["T_VARIABLE","$objectManagerMap",110],")",")",";",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$context",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE","  ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_objectManager",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","create",112],"(",["T_WHITESPACE","\n            ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Backend",113],["T_NS_SEPARATOR","\\",113],["T_STRING","App",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Action",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Context",113],["T_DOUBLE_COLON","::",113],["T_CLASS","class",113],",",["T_WHITESPACE","\n            ",113],"[",["T_CONSTANT_ENCAPSED_STRING","\"objectManager\"",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$objectManagerMock",114],"]",["T_WHITESPACE","\n        ",114],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$registry",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE","  ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_objectManager",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","get",116],"(",["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Framework",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Registry",116],["T_DOUBLE_COLON","::",116],["T_CLASS","class",116],")",";",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getRequest",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","setParam",118],"(",["T_CONSTANT_ENCAPSED_STRING","'rate_services'",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'webservicex'",118],")",";",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$action",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_NEW","new",120],["T_WHITESPACE"," ",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Magento",120],["T_NS_SEPARATOR","\\",120],["T_STRING","CurrencySymbol",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Controller",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Adminhtml",120],["T_NS_SEPARATOR","\\",120],["T_STRING","System",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Currency",120],["T_NS_SEPARATOR","\\",120],["T_STRING","FetchRates",120],"(",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$context",121],",",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$registry",122],["T_WHITESPACE","\n        ",122],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$action",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","execute",124],"(",")",";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n",125],"}",["T_WHITESPACE","\n",126]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SalesRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Report",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Rule",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Createdat test for check report totals calculate\n *\n * @magentoDataFixture Magento\/SalesRule\/_files\/order_with_coupon.php\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","CreatedatTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PHPUnit_Framework_TestCase",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @dataProvider orderParamsDataProvider()\n     * @param $orderParams\n     *\/",15],["T_WHITESPACE","\n    ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","testTotals",19],"(",["T_VARIABLE","$orderParams",19],")",["T_WHITESPACE","\n    ",19],"{",["T_WHITESPACE","\n        ",20],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $order *\/",21],["T_WHITESPACE","\n        ",21],["T_VARIABLE","$order",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Magento",22],["T_NS_SEPARATOR","\\",22],["T_STRING","TestFramework",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Helper",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Bootstrap",22],["T_DOUBLE_COLON","::",22],["T_STRING","getObjectManager",22],"(",")",["T_OBJECT_OPERATOR","->",22],["T_STRING","create",22],"(",["T_NS_SEPARATOR","\\",22],["T_STRING","Magento",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Sales",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Model",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Order",22],["T_DOUBLE_COLON","::",22],["T_CLASS","class",22],")",";",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$order",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","loadByIncrementId",23],"(",["T_CONSTANT_ENCAPSED_STRING","'100000001'",23],")",["T_WHITESPACE","\n            ",23],["T_OBJECT_OPERATOR","->",24],["T_STRING","setBaseGrandTotal",24],"(",["T_VARIABLE","$orderParams",24],"[",["T_CONSTANT_ENCAPSED_STRING","'base_subtotal'",24],"]",")",["T_WHITESPACE","\n            ",24],["T_OBJECT_OPERATOR","->",25],["T_STRING","setSubtotal",25],"(",["T_VARIABLE","$orderParams",25],"[",["T_CONSTANT_ENCAPSED_STRING","'base_subtotal'",25],"]",")",["T_WHITESPACE","\n            ",25],["T_OBJECT_OPERATOR","->",26],["T_STRING","setBaseSubtotal",26],"(",["T_VARIABLE","$orderParams",26],"[",["T_CONSTANT_ENCAPSED_STRING","'base_subtotal'",26],"]",")",["T_WHITESPACE","\n            ",26],["T_OBJECT_OPERATOR","->",27],["T_STRING","setBaseDiscountAmount",27],"(",["T_VARIABLE","$orderParams",27],"[",["T_CONSTANT_ENCAPSED_STRING","'base_discount_amount'",27],"]",")",["T_WHITESPACE","\n            ",27],["T_OBJECT_OPERATOR","->",28],["T_STRING","setBaseTaxAmount",28],"(",["T_VARIABLE","$orderParams",28],"[",["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",28],"]",")",["T_WHITESPACE","\n            ",28],["T_OBJECT_OPERATOR","->",29],["T_STRING","setBaseSubtotalInvoiced",29],"(",["T_VARIABLE","$orderParams",29],"[",["T_CONSTANT_ENCAPSED_STRING","'base_subtotal_invoiced'",29],"]",")",["T_WHITESPACE","\n            ",29],["T_OBJECT_OPERATOR","->",30],["T_STRING","setBaseDiscountInvoiced",30],"(",["T_VARIABLE","$orderParams",30],"[",["T_CONSTANT_ENCAPSED_STRING","'base_discount_invoiced'",30],"]",")",["T_WHITESPACE","\n            ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","setBaseTaxInvoiced",31],"(",["T_VARIABLE","$orderParams",31],"[",["T_CONSTANT_ENCAPSED_STRING","'base_tax_invoiced'",31],"]",")",["T_WHITESPACE","\n            ",31],["T_OBJECT_OPERATOR","->",32],["T_STRING","setBaseShippingAmount",32],"(",["T_LNUMBER","0",32],")",["T_WHITESPACE","\n            ",32],["T_OBJECT_OPERATOR","->",33],["T_STRING","setBaseToGlobalRate",33],"(",["T_LNUMBER","1",33],")",["T_WHITESPACE","\n            ",33],["T_OBJECT_OPERATOR","->",34],["T_STRING","setCouponCode",34],"(",["T_CONSTANT_ENCAPSED_STRING","'1234567890'",34],")",["T_WHITESPACE","\n            ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","setCreatedAt",35],"(",["T_CONSTANT_ENCAPSED_STRING","'2014-10-25 10:10:10'",35],")",["T_WHITESPACE","\n            ",35],["T_OBJECT_OPERATOR","->",36],["T_STRING","save",36],"(",")",";",["T_WHITESPACE","\n        ",36],["T_COMMENT","\/\/ refresh report statistics\n",37],["T_WHITESPACE","        ",38],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\ResourceModel\\Report\\Rule $reportResource *\/",38],["T_WHITESPACE","\n        ",38],["T_VARIABLE","$reportResource",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","TestFramework",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Helper",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Bootstrap",39],["T_DOUBLE_COLON","::",39],["T_STRING","getObjectManager",39],"(",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","create",39],"(",["T_WHITESPACE","\n            ",39],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","SalesRule",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Model",40],["T_NS_SEPARATOR","\\",40],["T_STRING","ResourceModel",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Report",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Rule",40],["T_DOUBLE_COLON","::",40],["T_CLASS","class",40],["T_WHITESPACE","\n        ",40],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$reportResource",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","aggregate",42],"(",")",";",["T_WHITESPACE","\n        ",42],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\ResourceModel\\Report\\Collection $reportCollection *\/",43],["T_WHITESPACE","\n        ",43],["T_VARIABLE","$reportCollection",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","TestFramework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Helper",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Bootstrap",44],["T_DOUBLE_COLON","::",44],["T_STRING","getObjectManager",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","create",44],"(",["T_WHITESPACE","\n            ",44],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","SalesRule",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Model",45],["T_NS_SEPARATOR","\\",45],["T_STRING","ResourceModel",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Report",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Collection",45],["T_DOUBLE_COLON","::",45],["T_CLASS","class",45],["T_WHITESPACE","\n        ",45],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$salesRuleReportItem",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$reportCollection",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getFirstItem",47],"(",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertEquals",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getTotalAmount",48],"(",["T_VARIABLE","$order",48],")",",",["T_WHITESPACE"," ",48],["T_VARIABLE","$salesRuleReportItem",48],"[",["T_CONSTANT_ENCAPSED_STRING","'total_amount'",48],"]",")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertEquals",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getTotalAmountActual",49],"(",["T_VARIABLE","$order",49],")",",",["T_WHITESPACE"," ",49],["T_VARIABLE","$salesRuleReportItem",49],"[",["T_CONSTANT_ENCAPSED_STRING","'total_amount_actual'",49],"]",")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Repeat sql formula from \\Magento\\SalesRule\\Model\\ResourceModel\\Report\\Rule\\Createdat::_aggregateByOrder\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @return float\n     *\/",52],["T_WHITESPACE","\n    ",57],["T_PRIVATE","private",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","getTotalAmount",58],"(",["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Sales",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Model",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Order",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$order",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],"(",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$order",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getBaseSubtotal",61],"(",")",["T_WHITESPACE"," ",61],"-",["T_WHITESPACE"," ",61],["T_VARIABLE","$order",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getBaseSubtotalCanceled",61],"(",")",["T_WHITESPACE","\n            ",61],"-",["T_WHITESPACE"," ",62],"(",["T_STRING","abs",62],"(",["T_VARIABLE","$order",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getBaseDiscountAmount",62],"(",")",")",["T_WHITESPACE"," ",62],"-",["T_WHITESPACE"," ",62],["T_STRING","abs",62],"(",["T_VARIABLE","$order",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getBaseDiscountCanceled",62],"(",")",")",")",["T_WHITESPACE","\n            ",62],"+",["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$order",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getBaseTaxAmount",63],"(",")",["T_WHITESPACE"," ",63],"-",["T_WHITESPACE"," ",63],["T_VARIABLE","$order",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getBaseTaxCanceled",63],"(",")",")",["T_WHITESPACE","\n        ",63],")",["T_WHITESPACE"," ",64],"*",["T_WHITESPACE"," ",64],["T_VARIABLE","$order",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getBaseToGlobalRate",64],"(",")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Repeat sql formula from \\Magento\\SalesRule\\Model\\ResourceModel\\Report\\Rule\\Createdat::_aggregateByOrder\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @return float\n     *\/",67],["T_WHITESPACE","\n    ",72],["T_PRIVATE","private",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","getTotalAmountActual",73],"(",["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Sales",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Order",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$order",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],"(",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$order",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getBaseSubtotalInvoiced",76],"(",")",["T_WHITESPACE"," ",76],"-",["T_WHITESPACE"," ",76],["T_VARIABLE","$order",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getSubtotalRefunded",76],"(",")",["T_WHITESPACE","\n            ",76],"-",["T_WHITESPACE"," ",77],["T_STRING","abs",77],"(",["T_VARIABLE","$order",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getBaseDiscountInvoiced",77],"(",")",")",["T_WHITESPACE"," ",77],"-",["T_WHITESPACE"," ",77],["T_STRING","abs",77],"(",["T_VARIABLE","$order",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getBaseDiscountRefunded",77],"(",")",")",["T_WHITESPACE","\n            ",77],"+",["T_WHITESPACE"," ",78],["T_VARIABLE","$order",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getBaseTaxInvoiced",78],"(",")",["T_WHITESPACE"," ",78],"-",["T_WHITESPACE"," ",78],["T_VARIABLE","$order",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getBaseTaxRefunded",78],"(",")",["T_WHITESPACE","\n        ",78],")",["T_WHITESPACE"," ",79],"*",["T_WHITESPACE"," ",79],["T_VARIABLE","$order",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getBaseToGlobalRate",79],"(",")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",82],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","orderParamsDataProvider",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],"[",["T_WHITESPACE","\n            ",87],"[",["T_WHITESPACE","\n                ",88],"[",["T_WHITESPACE","\n                    ",89],["T_CONSTANT_ENCAPSED_STRING","'base_discount_amount'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_DNUMBER","98.80",90],",",["T_WHITESPACE","\n                    ",90],["T_CONSTANT_ENCAPSED_STRING","'base_subtotal'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_LNUMBER","494",91],",",["T_WHITESPACE","\n                    ",91],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_DNUMBER","8.8",92],",",["T_WHITESPACE","\n                    ",92],["T_CONSTANT_ENCAPSED_STRING","'base_subtotal_invoiced'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_LNUMBER","494",93],",",["T_WHITESPACE","\n                    ",93],["T_CONSTANT_ENCAPSED_STRING","'base_discount_invoiced'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_DNUMBER","98.80",94],",",["T_WHITESPACE","\n                    ",94],["T_CONSTANT_ENCAPSED_STRING","'base_tax_invoiced'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_DNUMBER","8.8",95],["T_WHITESPACE","\n                ",95],"]",["T_WHITESPACE","\n            ",96],"]",["T_WHITESPACE","\n        ",97],"]",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n",99],"}",["T_WHITESPACE","\n",100]]
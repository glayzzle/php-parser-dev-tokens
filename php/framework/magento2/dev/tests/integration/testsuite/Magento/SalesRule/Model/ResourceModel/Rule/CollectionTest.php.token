[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SalesRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Rule",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * @magentoDbIsolation enabled\n * @magentoAppIsolation enabled\n *\/",8],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","CollectionTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","PHPUnit_Framework_TestCase",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rules.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/coupons.php\n     * @dataProvider setValidationFilterDataProvider()\n     * @param string $couponCode\n     * @param array $expectedItems\n     *\/",14],["T_WHITESPACE","\n    ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","testSetValidationFilter",21],"(",["T_VARIABLE","$couponCode",21],",",["T_WHITESPACE"," ",21],["T_VARIABLE","$expectedItems",21],")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$collection",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","TestFramework",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Helper",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Bootstrap",23],["T_DOUBLE_COLON","::",23],["T_STRING","getObjectManager",23],"(",")",["T_OBJECT_OPERATOR","->",23],["T_STRING","create",23],"(",["T_WHITESPACE","\n            ",23],["T_NS_SEPARATOR","\\",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","SalesRule",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Model",24],["T_NS_SEPARATOR","\\",24],["T_STRING","ResourceModel",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Rule",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Collection",24],["T_DOUBLE_COLON","::",24],["T_CLASS","class",24],["T_WHITESPACE","\n        ",24],")",";",["T_WHITESPACE","\n        ",25],["T_VARIABLE","$items",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","array_values",26],"(",["T_VARIABLE","$collection",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","setValidationFilter",26],"(",["T_LNUMBER","1",26],",",["T_WHITESPACE"," ",26],["T_LNUMBER","0",26],",",["T_WHITESPACE"," ",26],["T_VARIABLE","$couponCode",26],")",["T_OBJECT_OPERATOR","->",26],["T_STRING","getItems",26],"(",")",")",";",["T_WHITESPACE","\n\n        ",26],["T_VARIABLE","$ids",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],"[","]",";",["T_WHITESPACE","\n        ",28],["T_FOREACH","foreach",29],["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$items",29],["T_WHITESPACE"," ",29],["T_AS","as",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$key",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$item",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n            ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","assertEquals",30],"(",["T_VARIABLE","$expectedItems",30],"[",["T_VARIABLE","$key",30],"]",",",["T_WHITESPACE"," ",30],["T_VARIABLE","$item",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getName",30],"(",")",")",";",["T_WHITESPACE","\n            ",30],["T_IF","if",31],["T_WHITESPACE"," ",31],"(",["T_STRING","in_array",31],"(",["T_VARIABLE","$item",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getId",31],"(",")",",",["T_WHITESPACE"," ",31],["T_VARIABLE","$ids",31],")",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n                ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","fail",32],"(",["T_CONSTANT_ENCAPSED_STRING","'Item should be unique in result collection'",32],")",";",["T_WHITESPACE","\n            ",32],"}",["T_WHITESPACE","\n            ",33],["T_VARIABLE","$ids",34],"[","]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$item",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getId",34],"(",")",";",["T_WHITESPACE","\n        ",34],"}",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * data provider for testSetValidationFilter\n     * @return array\n     *\/",38],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","setValidationFilterDataProvider",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],"[",["T_WHITESPACE","\n            ",44],["T_CONSTANT_ENCAPSED_STRING","'Check type COUPON'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_code'",45],",",["T_WHITESPACE"," ",45],"[",["T_CONSTANT_ENCAPSED_STRING","'#1'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'#2'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'#5'",45],"]","]",",",["T_WHITESPACE","\n            ",45],["T_CONSTANT_ENCAPSED_STRING","'Check type NO_COUPON'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],"[",["T_CONSTANT_ENCAPSED_STRING","''",46],",",["T_WHITESPACE"," ",46],"[",["T_CONSTANT_ENCAPSED_STRING","'#2'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'#5'",46],"]","]",",",["T_WHITESPACE","\n            ",46],["T_CONSTANT_ENCAPSED_STRING","'Check type COUPON_AUTO'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_code_auto'",47],",",["T_WHITESPACE"," ",47],"[",["T_CONSTANT_ENCAPSED_STRING","'#2'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'#4'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'#5'",47],"]","]",",",["T_WHITESPACE","\n            ",47],["T_CONSTANT_ENCAPSED_STRING","'Check result with auto generated coupon'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],"[",["T_CONSTANT_ENCAPSED_STRING","'autogenerated_3_1'",48],",",["T_WHITESPACE"," ",48],"[",["T_CONSTANT_ENCAPSED_STRING","'#2'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'#3'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'#5'",48],"]","]",",",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'Check result with non actual previously generated coupon'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],"[",["T_WHITESPACE","\n                ",49],["T_CONSTANT_ENCAPSED_STRING","'autogenerated_2_1'",50],",",["T_WHITESPACE","\n                ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'#2'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'#5'",51],"]",",",["T_WHITESPACE","\n            ",51],"]",",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'Check result with wrong code'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],"[",["T_CONSTANT_ENCAPSED_STRING","'wrong_code'",53],",",["T_WHITESPACE"," ",53],"[",["T_CONSTANT_ENCAPSED_STRING","'#2'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'#5'",53],"]","]",["T_WHITESPACE","\n        ",53],"]",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @magentoAppIsolation enabled\n     * @magentoDataFixture Magento\/Checkout\/_files\/quote_with_shipping_method_and_items_categories.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rules_group_any_categories.php\n     *\/",57],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","testSetValidationFilterWithGroup",63],"(",")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$objectManager",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","TestFramework",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Helper",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Bootstrap",65],["T_DOUBLE_COLON","::",65],["T_STRING","getObjectManager",65],"(",")",";",["T_WHITESPACE","\n\n        ",65],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\Rule $rule *\/",67],["T_WHITESPACE","\n        ",67],["T_VARIABLE","$rule",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$objectManager",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","get",68],"(",["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Registry",68],["T_DOUBLE_COLON","::",68],["T_CLASS","class",68],")",["T_WHITESPACE","\n            ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","registry",69],"(",["T_CONSTANT_ENCAPSED_STRING","'_fixture\/Magento_SalesRule_Group_Multiple_Categories'",69],")",";",["T_WHITESPACE","\n\n        ",69],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote  $quote *\/",71],["T_WHITESPACE","\n        ",71],["T_VARIABLE","$quote",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$objectManager",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","create",72],"(",["T_NS_SEPARATOR","\\",72],["T_STRING","Magento",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Quote",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Model",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Quote",72],["T_DOUBLE_COLON","::",72],["T_CLASS","class",72],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$quote",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","load",73],"(",["T_CONSTANT_ENCAPSED_STRING","'test_order_item_with_items'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'reserved_order_id'",73],")",";",["T_WHITESPACE","\n\n        ",73],["T_COMMENT","\/\/gather only the existing rules that obey the validation filter\n",75],["T_WHITESPACE","        ",76],["T_DOC_COMMENT","\/** @var  \\Magento\\SalesRule\\Model\\ResourceModel\\Rule\\Collection $ruleCollection *\/",76],["T_WHITESPACE","\n        ",76],["T_VARIABLE","$ruleCollection",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$objectManager",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","create",77],"(",["T_WHITESPACE","\n            ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","SalesRule",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Model",78],["T_NS_SEPARATOR","\\",78],["T_STRING","ResourceModel",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Rule",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Collection",78],["T_DOUBLE_COLON","::",78],["T_CLASS","class",78],["T_WHITESPACE","\n        ",78],")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$appliedRulesArray",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","array_keys",81],"(",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$ruleCollection",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","setValidationFilter",82],"(",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$quote",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getStore",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getWebsiteId",83],"(",")",",",["T_WHITESPACE","\n                ",83],["T_LNUMBER","0",84],",",["T_WHITESPACE","\n                ",84],["T_CONSTANT_ENCAPSED_STRING","''",85],",",["T_WHITESPACE","\n                ",85],["T_STRING","null",86],",",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$quote",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getShippingAddress",87],"(",")",["T_WHITESPACE","\n            ",87],")",["T_OBJECT_OPERATOR","->",88],["T_STRING","getItems",88],"(",")",["T_WHITESPACE","\n        ",88],")",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertEquals",91],"(","[",["T_VARIABLE","$rule",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getRuleId",91],"(",")","]",",",["T_WHITESPACE"," ",91],["T_VARIABLE","$appliedRulesArray",91],")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @magentoAppIsolation enabled\n     * @magentoDataFixture Magento\/Checkout\/_files\/quote_with_shipping_method_and_items_categories.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rules_group_any_categories.php\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","testSetValidationFilterAnyCategory",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$objectManager",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","TestFramework",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Helper",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Bootstrap",102],["T_DOUBLE_COLON","::",102],["T_STRING","getObjectManager",102],"(",")",";",["T_WHITESPACE","\n\n        ",102],["T_DOC_COMMENT","\/** @var \\Magento\\SalesRule\\Model\\Rule $rule *\/",104],["T_WHITESPACE","\n        ",104],["T_VARIABLE","$rule",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$objectManager",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","get",105],"(",["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Framework",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Registry",105],["T_DOUBLE_COLON","::",105],["T_CLASS","class",105],")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","registry",106],"(",["T_CONSTANT_ENCAPSED_STRING","'_fixture\/Magento_SalesRule_Group_Multiple_Categories'",106],")",";",["T_WHITESPACE","\n\n        ",106],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote  $quote *\/",108],["T_WHITESPACE","\n        ",108],["T_VARIABLE","$quote",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$objectManager",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","create",109],"(",["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Quote",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Model",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Quote",109],["T_DOUBLE_COLON","::",109],["T_CLASS","class",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$quote",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","load",110],"(",["T_CONSTANT_ENCAPSED_STRING","'test_order_item_with_items'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'reserved_order_id'",110],")",";",["T_WHITESPACE","\n\n        ",110],["T_COMMENT","\/\/gather only the existing rules that obey the validation filter\n",112],["T_WHITESPACE","        ",113],["T_DOC_COMMENT","\/** @var  \\Magento\\SalesRule\\Model\\ResourceModel\\Rule\\Collection $ruleCollection *\/",113],["T_WHITESPACE","\n        ",113],["T_VARIABLE","$ruleCollection",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$objectManager",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","create",114],"(",["T_WHITESPACE","\n            ",114],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","SalesRule",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Model",115],["T_NS_SEPARATOR","\\",115],["T_STRING","ResourceModel",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Rule",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Collection",115],["T_DOUBLE_COLON","::",115],["T_CLASS","class",115],["T_WHITESPACE","\n        ",115],")",";",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$appliedRulesArray",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","array_keys",118],"(",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$ruleCollection",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","setValidationFilter",119],"(",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$quote",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getStore",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","getWebsiteId",120],"(",")",",",["T_WHITESPACE","\n                ",120],["T_LNUMBER","0",121],",",["T_WHITESPACE","\n                ",121],["T_CONSTANT_ENCAPSED_STRING","''",122],",",["T_WHITESPACE","\n                ",122],["T_STRING","null",123],",",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$quote",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getShippingAddress",124],"(",")",["T_WHITESPACE","\n            ",124],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getItems",125],"(",")",["T_WHITESPACE","\n        ",125],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertEquals",127],"(","[",["T_VARIABLE","$rule",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getRuleId",127],"(",")","]",",",["T_WHITESPACE"," ",127],["T_VARIABLE","$appliedRulesArray",127],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @magentoAppIsolation enabled\n     * @magentoDataFixture Magento\/Checkout\/_files\/quote_with_shipping_method_and_items_categories.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rules_group_not_categories_sku_attr.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rules_group_any_categories.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rules_group_any_categories_price_attr_set_any.php\n     *\/",130],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","testSetValidationFilterOther",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$objectManager",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Magento",140],["T_NS_SEPARATOR","\\",140],["T_STRING","TestFramework",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Helper",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Bootstrap",140],["T_DOUBLE_COLON","::",140],["T_STRING","getObjectManager",140],"(",")",";",["T_WHITESPACE","\n\n        ",140],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote  $quote *\/",142],["T_WHITESPACE","\n        ",142],["T_VARIABLE","$quote",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$objectManager",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","create",143],"(",["T_NS_SEPARATOR","\\",143],["T_STRING","Magento",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Quote",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Model",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Quote",143],["T_DOUBLE_COLON","::",143],["T_CLASS","class",143],")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$quote",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","load",144],"(",["T_CONSTANT_ENCAPSED_STRING","'test_order_item_with_items'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'reserved_order_id'",144],")",";",["T_WHITESPACE","\n\n        ",144],["T_COMMENT","\/\/gather only the existing rules that obey the validation filter\n",146],["T_WHITESPACE","        ",147],["T_DOC_COMMENT","\/** @var  \\Magento\\SalesRule\\Model\\ResourceModel\\Rule\\Collection $ruleCollection *\/",147],["T_WHITESPACE","\n        ",147],["T_VARIABLE","$ruleCollection",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$objectManager",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","create",148],"(",["T_WHITESPACE","\n            ",148],["T_NS_SEPARATOR","\\",149],["T_STRING","Magento",149],["T_NS_SEPARATOR","\\",149],["T_STRING","SalesRule",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Model",149],["T_NS_SEPARATOR","\\",149],["T_STRING","ResourceModel",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Rule",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Collection",149],["T_DOUBLE_COLON","::",149],["T_CLASS","class",149],["T_WHITESPACE","\n        ",149],")",";",["T_WHITESPACE","\n\n        ",150],["T_VARIABLE","$appliedRulesArray",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","array_keys",152],"(",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$ruleCollection",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setValidationFilter",153],"(",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$quote",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getStore",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","getWebsiteId",154],"(",")",",",["T_WHITESPACE","\n                ",154],["T_LNUMBER","0",155],",",["T_WHITESPACE","\n                ",155],["T_CONSTANT_ENCAPSED_STRING","''",156],",",["T_WHITESPACE","\n                ",156],["T_STRING","null",157],",",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$quote",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getShippingAddress",158],"(",")",["T_WHITESPACE","\n            ",158],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","getItems",159],"(",")",["T_WHITESPACE","\n        ",159],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertEquals",161],"(",["T_LNUMBER","3",161],",",["T_WHITESPACE"," ",161],["T_STRING","count",161],"(",["T_VARIABLE","$appliedRulesArray",161],")",")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @magentoAppIsolation enabled\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rules.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/coupons.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rule_specific_date.php\n     * @magentoConfigFixture general\/locale\/timezone Europe\/Kiev\n     *\/",164],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","testMultiRulesWithTimezone",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","setSpecificTimezone",174],"(",["T_CONSTANT_ENCAPSED_STRING","'Europe\/Kiev'",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$collection",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_NS_SEPARATOR","\\",175],["T_STRING","Magento",175],["T_NS_SEPARATOR","\\",175],["T_STRING","TestFramework",175],["T_NS_SEPARATOR","\\",175],["T_STRING","Helper",175],["T_NS_SEPARATOR","\\",175],["T_STRING","Bootstrap",175],["T_DOUBLE_COLON","::",175],["T_STRING","getObjectManager",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","create",175],"(",["T_WHITESPACE","\n            ",175],["T_NS_SEPARATOR","\\",176],["T_STRING","Magento",176],["T_NS_SEPARATOR","\\",176],["T_STRING","SalesRule",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Model",176],["T_NS_SEPARATOR","\\",176],["T_STRING","ResourceModel",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Rule",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Collection",176],["T_DOUBLE_COLON","::",176],["T_CLASS","class",176],["T_WHITESPACE","\n        ",176],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$collection",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addWebsiteGroupDateFilter",178],"(",["T_LNUMBER","1",178],",",["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$items",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","array_values",179],"(",["T_VARIABLE","$collection",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getItems",179],"(",")",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertNotEmpty",180],"(",["T_VARIABLE","$items",180],")",";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @magentoAppIsolation enabled\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rules.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/coupons.php\n     * @magentoDataFixture Magento\/SalesRule\/_files\/rule_specific_date.php\n     * @magentoConfigFixture general\/locale\/timezone Australia\/Sydney\n     *\/",183],["T_WHITESPACE","\n    ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","testMultiRulesWithDifferentTimezone",191],"(",")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","setSpecificTimezone",193],"(",["T_CONSTANT_ENCAPSED_STRING","'Australia\/Sydney'",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$collection",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","TestFramework",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Helper",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Bootstrap",194],["T_DOUBLE_COLON","::",194],["T_STRING","getObjectManager",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","create",194],"(",["T_WHITESPACE","\n            ",194],["T_NS_SEPARATOR","\\",195],["T_STRING","Magento",195],["T_NS_SEPARATOR","\\",195],["T_STRING","SalesRule",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Model",195],["T_NS_SEPARATOR","\\",195],["T_STRING","ResourceModel",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Rule",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Collection",195],["T_DOUBLE_COLON","::",195],["T_CLASS","class",195],["T_WHITESPACE","\n        ",195],")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$collection",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","addWebsiteGroupDateFilter",197],"(",["T_LNUMBER","1",197],",",["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$items",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","array_values",198],"(",["T_VARIABLE","$collection",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getItems",198],"(",")",")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","assertNotEmpty",199],"(",["T_VARIABLE","$items",199],")",";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_PROTECTED","protected",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","setSpecificTimezone",202],"(",["T_VARIABLE","$timezone",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$localeData",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],"[",["T_WHITESPACE","\n            ",204],["T_CONSTANT_ENCAPSED_STRING","'section'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'general'",205],",",["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","'website'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_STRING","null",206],",",["T_WHITESPACE","\n            ",206],["T_CONSTANT_ENCAPSED_STRING","'store'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_STRING","null",207],",",["T_WHITESPACE","\n            ",207],["T_CONSTANT_ENCAPSED_STRING","'groups'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],"[",["T_WHITESPACE","\n                ",208],["T_CONSTANT_ENCAPSED_STRING","'locale'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],"[",["T_WHITESPACE","\n                    ",209],["T_CONSTANT_ENCAPSED_STRING","'fields'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],"[",["T_WHITESPACE","\n                        ",210],["T_CONSTANT_ENCAPSED_STRING","'timezone'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],"[",["T_WHITESPACE","\n                            ",211],["T_CONSTANT_ENCAPSED_STRING","'value'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$timezone",212],["T_WHITESPACE","\n                        ",212],"]",["T_WHITESPACE","\n                    ",213],"]",["T_WHITESPACE","\n                ",214],"]",["T_WHITESPACE","\n            ",215],"]",["T_WHITESPACE","\n        ",216],"]",";",["T_WHITESPACE","\n        ",217],["T_NS_SEPARATOR","\\",218],["T_STRING","Magento",218],["T_NS_SEPARATOR","\\",218],["T_STRING","TestFramework",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Helper",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Bootstrap",218],["T_DOUBLE_COLON","::",218],["T_STRING","getObjectManager",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","create",218],"(",["T_NS_SEPARATOR","\\",218],["T_STRING","Magento",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Config",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Model",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Config",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Factory",218],["T_DOUBLE_COLON","::",218],["T_CLASS","class",218],")",["T_WHITESPACE","\n            ",218],["T_OBJECT_OPERATOR","->",219],["T_STRING","create",219],"(",")",["T_WHITESPACE","\n            ",219],["T_OBJECT_OPERATOR","->",220],["T_STRING","addData",220],"(",["T_VARIABLE","$localeData",220],")",["T_WHITESPACE","\n            ",220],["T_OBJECT_OPERATOR","->",221],["T_STRING","save",221],"(",")",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","tearDown",224],"(",")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_COMMENT","\/\/ restore default timezone\n",226],["T_WHITESPACE","        ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","setSpecificTimezone",227],"(",["T_CONSTANT_ENCAPSED_STRING","'America\/Los_Angeles'",227],")",";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n",228],"}",["T_WHITESPACE","\n",229]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Test for \\Magento\\Paypal\\Block\\Billing\\Agreement\\View\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Paypal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Block",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Billing",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Agreement",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TestFramework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Helper",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Bootstrap",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","ViewTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TestFramework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TestCase",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AbstractBackendController",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/** @var \\Magento\\Paypal\\Block\\Billing\\Agreement\\View *\/",14],["T_WHITESPACE","\n    ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$_block",15],";",["T_WHITESPACE","\n\n    ",15],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","setUp",17],"(",")",["T_WHITESPACE","\n    ",17],"{",["T_WHITESPACE","\n        ",18],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","_block",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","Bootstrap",19],["T_DOUBLE_COLON","::",19],["T_STRING","getObjectManager",19],"(",")",["T_OBJECT_OPERATOR","->",19],["T_STRING","create",19],"(",["T_NS_SEPARATOR","\\",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Paypal",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Block",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Billing",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Agreement",19],["T_NS_SEPARATOR","\\",19],["T_STRING","View",19],["T_DOUBLE_COLON","::",19],["T_CLASS","class",19],")",";",["T_WHITESPACE","\n        ",19],["T_STRING","parent",20],["T_DOUBLE_COLON","::",20],["T_STRING","setUp",20],"(",")",";",["T_WHITESPACE","\n    ",20],"}",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Test getting orders associated with specified billing agreement.\n     *\n     * Create two identical orders, associate one of them with billing agreement and invoke testGetRelatedOrders()\n     *\n     * @magentoDataFixture Magento\/Customer\/_files\/customer.php\n     * @magentoDataFixture Magento\/Paypal\/_files\/billing_agreement.php\n     * @magentoDataFixture Magento\/Sales\/_files\/order.php\n     * @magentoDbIsolation enabled\n     * @magentoAppIsolation enabled\n     *\/",23],["T_WHITESPACE","\n    ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","testGetRelatedOrders",34],"(",")",["T_WHITESPACE","\n    ",34],"{",["T_WHITESPACE","\n        ",35],["T_DOC_COMMENT","\/** Customer ID declared in the fixture *\/",36],["T_WHITESPACE","\n        ",36],["T_VARIABLE","$customerId",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","1",37],";",["T_WHITESPACE","\n        ",37],["T_DOC_COMMENT","\/** Assign first order to the active customer *\/",38],["T_WHITESPACE","\n        ",38],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $orderA *\/",39],["T_WHITESPACE","\n        ",39],["T_VARIABLE","$orderA",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","Bootstrap",40],["T_DOUBLE_COLON","::",40],["T_STRING","getObjectManager",40],"(",")",["T_OBJECT_OPERATOR","->",40],["T_STRING","create",40],"(",["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Sales",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Model",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Order",40],["T_DOUBLE_COLON","::",40],["T_CLASS","class",40],")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$orderA",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","loadByIncrementId",41],"(",["T_CONSTANT_ENCAPSED_STRING","'100000001'",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$orderA",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","setCustomerIsGuest",42],"(",["T_STRING","false",42],")",["T_OBJECT_OPERATOR","->",42],["T_STRING","setCustomerId",42],"(",["T_VARIABLE","$customerId",42],")",["T_OBJECT_OPERATOR","->",42],["T_STRING","save",42],"(",")",";",["T_WHITESPACE","\n        ",42],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Session $customerSession *\/",43],["T_WHITESPACE","\n        ",43],["T_VARIABLE","$customerSession",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","Bootstrap",44],["T_DOUBLE_COLON","::",44],["T_STRING","getObjectManager",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","create",44],"(",["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Customer",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Model",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Session",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$customerSession",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","setCustomerId",45],"(",["T_VARIABLE","$customerId",45],")",";",["T_WHITESPACE","\n\n        ",45],["T_DOC_COMMENT","\/** Assign second order to the active customer *\/",47],["T_WHITESPACE","\n        ",47],["T_VARIABLE","$orderB",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CLONE","clone",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$orderA",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$orderB",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setId",49],"(",["T_WHITESPACE","\n            ",49],["T_STRING","null",50],["T_WHITESPACE","\n        ",50],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","setIncrementId",51],"(",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'100000002'",52],["T_WHITESPACE","\n        ",52],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","setCustomerIsGuest",53],"(",["T_WHITESPACE","\n            ",53],["T_STRING","false",54],["T_WHITESPACE","\n        ",54],")",["T_OBJECT_OPERATOR","->",55],["T_STRING","setCustomerId",55],"(",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$customerId",56],["T_WHITESPACE","\n        ",56],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","save",57],"(",")",";",["T_WHITESPACE","\n\n        ",57],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Session $customerSession *\/",59],["T_WHITESPACE","\n        ",59],["T_VARIABLE","$customerSession",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","Bootstrap",60],["T_DOUBLE_COLON","::",60],["T_STRING","getObjectManager",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","create",60],"(",["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Customer",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Session",60],["T_DOUBLE_COLON","::",60],["T_CLASS","class",60],")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$customerSession",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","setCustomerId",61],"(",["T_VARIABLE","$customerId",61],")",";",["T_WHITESPACE","\n\n        ",61],["T_DOC_COMMENT","\/** @var \\Magento\\Paypal\\Model\\ResourceModel\\Billing\\Agreement\\Collection $billingAgreementCollection *\/",63],["T_WHITESPACE","\n        ",63],["T_VARIABLE","$billingAgreementCollection",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","Bootstrap",64],["T_DOUBLE_COLON","::",64],["T_STRING","getObjectManager",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","create",64],"(",["T_WHITESPACE","\n            ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Paypal",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Model",65],["T_NS_SEPARATOR","\\",65],["T_STRING","ResourceModel",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Billing",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Agreement",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Collection",65],["T_DOUBLE_COLON","::",65],["T_CLASS","class",65],["T_WHITESPACE","\n        ",65],")",";",["T_WHITESPACE","\n        ",66],["T_DOC_COMMENT","\/** @var \\Magento\\Paypal\\Model\\Billing\\Agreement $billingAgreement *\/",67],["T_WHITESPACE","\n        ",67],["T_VARIABLE","$billingAgreement",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$billingAgreementCollection",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getFirstItem",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$billingAgreement",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","addOrderRelation",69],"(",["T_VARIABLE","$orderA",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getId",69],"(",")",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","save",69],"(",")",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$registry",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","Bootstrap",71],["T_DOUBLE_COLON","::",71],["T_STRING","getObjectManager",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","get",71],"(",["T_NS_SEPARATOR","\\",71],["T_STRING","Magento",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Framework",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Registry",71],["T_DOUBLE_COLON","::",71],["T_CLASS","class",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$registry",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","register",72],"(",["T_CONSTANT_ENCAPSED_STRING","'current_billing_agreement'",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$billingAgreement",72],")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$relatedOrders",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_block",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getRelatedOrders",74],"(",")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertEquals",75],"(",["T_LNUMBER","1",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$relatedOrders",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","count",75],"(",")",",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","\"Only one order must be returned.\"",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEquals",76],"(",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$orderA",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getId",77],"(",")",",",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$relatedOrders",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getFirstItem",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getId",78],"(",")",",",["T_WHITESPACE","\n            ",78],["T_CONSTANT_ENCAPSED_STRING","\"Invalid order returned as associated with billing agreement.\"",79],["T_WHITESPACE","\n        ",79],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n",81],"}",["T_WHITESPACE","\n",82]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AdvancedPricingImportExport",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Import",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DirectoryList",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ImportExport",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Import",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * @magentoAppArea adminhtml\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","AdvancedPricingTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","PHPUnit_Framework_TestCase",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogImportExport\\Model\\Import\\Product\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$model",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$objectManager",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$fileSystem",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Expected Product Tier Price mapping with data\n     *\n     * @var array\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$expectedTierPrice",37],";",["T_WHITESPACE","\n\n    ",37],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","setUp",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","objectManager",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","TestFramework",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Helper",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Bootstrap",41],["T_DOUBLE_COLON","::",41],["T_STRING","getObjectManager",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","fileSystem",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","objectManager",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Filesystem",42],["T_DOUBLE_COLON","::",42],["T_CLASS","class",42],")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","model",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","objectManager",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","create",43],"(",["T_WHITESPACE","\n            ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","AdvancedPricingImportExport",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Model",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Import",44],["T_NS_SEPARATOR","\\",44],["T_STRING","AdvancedPricing",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],["T_WHITESPACE","\n        ",44],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","expectedTierPrice",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],"[",["T_WHITESPACE","\n            ",46],["T_CONSTANT_ENCAPSED_STRING","'AdvancedPricingSimple 1'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],"[",["T_WHITESPACE","\n                ",47],"[",["T_WHITESPACE","\n                    ",48],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Customer",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Model",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Group",49],["T_DOUBLE_COLON","::",49],["T_STRING","CUST_GROUP_ALL",49],",",["T_WHITESPACE","\n                    ",49],["T_CONSTANT_ENCAPSED_STRING","'value'",50],["T_WHITESPACE","             ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'300.0000'",50],",",["T_WHITESPACE","\n                    ",50],["T_CONSTANT_ENCAPSED_STRING","'qty'",51],["T_WHITESPACE","               ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'10.0000'",51],",",["T_WHITESPACE","\n                    ",51],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",52],["T_WHITESPACE","  ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_STRING","null",52],["T_WHITESPACE","\n                ",52],"]",",",["T_WHITESPACE","\n                ",53],"[",["T_WHITESPACE","\n                    ",54],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'1'",55],",",["T_WHITESPACE","\n                    ",55],["T_CONSTANT_ENCAPSED_STRING","'value'",56],["T_WHITESPACE","             ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'11.0000'",56],",",["T_WHITESPACE","\n                    ",56],["T_CONSTANT_ENCAPSED_STRING","'qty'",57],["T_WHITESPACE","               ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'11.0000'",57],",",["T_WHITESPACE","\n                    ",57],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",58],["T_WHITESPACE","  ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_STRING","null",58],["T_WHITESPACE","\n                ",58],"]",",",["T_WHITESPACE","\n                ",59],"[",["T_WHITESPACE","\n                    ",60],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'3'",61],",",["T_WHITESPACE","\n                    ",61],["T_CONSTANT_ENCAPSED_STRING","'value'",62],["T_WHITESPACE","             ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'14.0000'",62],",",["T_WHITESPACE","\n                    ",62],["T_CONSTANT_ENCAPSED_STRING","'qty'",63],["T_WHITESPACE","               ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'14.0000'",63],",",["T_WHITESPACE","\n                    ",63],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",64],["T_WHITESPACE","  ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_STRING","null",64],["T_WHITESPACE","\n                ",64],"]",",",["T_WHITESPACE","\n                ",65],"[",["T_WHITESPACE","\n                    ",66],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Customer",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Group",67],["T_DOUBLE_COLON","::",67],["T_STRING","CUST_GROUP_ALL",67],",",["T_WHITESPACE","\n                    ",67],["T_CONSTANT_ENCAPSED_STRING","'value'",68],["T_WHITESPACE","             ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'160.5000'",68],",",["T_WHITESPACE","\n                    ",68],["T_CONSTANT_ENCAPSED_STRING","'qty'",69],["T_WHITESPACE","               ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'20.0000'",69],",",["T_WHITESPACE","\n                    ",69],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",70],["T_WHITESPACE","  ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'50.0000'",70],["T_WHITESPACE","\n                ",70],"]",["T_WHITESPACE","\n            ",71],"]",",",["T_WHITESPACE","\n            ",72],["T_CONSTANT_ENCAPSED_STRING","'AdvancedPricingSimple 2'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],"[",["T_WHITESPACE","\n                ",73],"[",["T_WHITESPACE","\n                    ",74],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Customer",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Model",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Group",75],["T_DOUBLE_COLON","::",75],["T_STRING","CUST_GROUP_ALL",75],",",["T_WHITESPACE","\n                    ",75],["T_CONSTANT_ENCAPSED_STRING","'value'",76],["T_WHITESPACE","             ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'1000000.0000'",76],",",["T_WHITESPACE","\n                    ",76],["T_CONSTANT_ENCAPSED_STRING","'qty'",77],["T_WHITESPACE","               ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'100.0000'",77],",",["T_WHITESPACE","\n                    ",77],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",78],["T_WHITESPACE","  ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_STRING","null",78],["T_WHITESPACE","\n                ",78],"]",",",["T_WHITESPACE","\n                ",79],"[",["T_WHITESPACE","\n                    ",80],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'0'",81],",",["T_WHITESPACE","\n                    ",81],["T_CONSTANT_ENCAPSED_STRING","'value'",82],["T_WHITESPACE","             ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'12.0000'",82],",",["T_WHITESPACE","\n                    ",82],["T_CONSTANT_ENCAPSED_STRING","'qty'",83],["T_WHITESPACE","               ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'12.0000'",83],",",["T_WHITESPACE","\n                    ",83],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",84],["T_WHITESPACE","  ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_STRING","null",84],["T_WHITESPACE","\n                ",84],"]",",",["T_WHITESPACE","\n                ",85],"[",["T_WHITESPACE","\n                    ",86],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'2'",87],",",["T_WHITESPACE","\n                    ",87],["T_CONSTANT_ENCAPSED_STRING","'value'",88],["T_WHITESPACE","             ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'13.0000'",88],",",["T_WHITESPACE","\n                    ",88],["T_CONSTANT_ENCAPSED_STRING","'qty'",89],["T_WHITESPACE","               ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'13.0000'",89],",",["T_WHITESPACE","\n                    ",89],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",90],["T_WHITESPACE","  ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_STRING","null",90],["T_WHITESPACE","\n                ",90],"]",",",["T_WHITESPACE","\n                ",91],"[",["T_WHITESPACE","\n                    ",92],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Customer",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Model",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Group",93],["T_DOUBLE_COLON","::",93],["T_STRING","CUST_GROUP_ALL",93],",",["T_WHITESPACE","\n                    ",93],["T_CONSTANT_ENCAPSED_STRING","'value'",94],["T_WHITESPACE","             ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'327.0000'",94],",",["T_WHITESPACE","\n                    ",94],["T_CONSTANT_ENCAPSED_STRING","'qty'",95],["T_WHITESPACE","               ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'200.0000'",95],",",["T_WHITESPACE","\n                    ",95],["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",96],["T_WHITESPACE","  ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'50.0000'",96],["T_WHITESPACE","\n                ",96],"]",["T_WHITESPACE","\n            ",97],"]",["T_WHITESPACE","\n        ",98],"]",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/AdvancedPricingImportExport\/_files\/create_products.php\n     * @magentoAppArea adminhtml\n     *\/",102],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","testImportAddUpdate",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_COMMENT","\/\/ import data from CSV file\n",108],["T_WHITESPACE","        ",109],["T_VARIABLE","$pathToFile",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_DIR","__DIR__",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/import_advanced_pricing.csv'",109],";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$filesystem",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","objectManager",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","create",110],"(",["T_WHITESPACE","\n            ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Filesystem",111],["T_DOUBLE_COLON","::",111],["T_CLASS","class",111],["T_WHITESPACE","\n        ",111],")",";",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$directory",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$filesystem",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getDirectoryWrite",114],"(",["T_STRING","DirectoryList",114],["T_DOUBLE_COLON","::",114],["T_STRING","ROOT",114],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$source",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","objectManager",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","create",115],"(",["T_WHITESPACE","\n            ",115],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","ImportExport",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Model",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Import",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Source",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Csv",116],["T_DOUBLE_COLON","::",116],["T_CLASS","class",116],",",["T_WHITESPACE","\n            ",116],"[",["T_WHITESPACE","\n                ",117],["T_CONSTANT_ENCAPSED_STRING","'file'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$pathToFile",118],",",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'directory'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$directory",119],["T_WHITESPACE","\n            ",119],"]",["T_WHITESPACE","\n        ",120],")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$errors",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","model",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setSource",122],"(",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$source",123],["T_WHITESPACE","\n        ",123],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","setParameters",124],"(",["T_WHITESPACE","\n            ",124],"[",["T_WHITESPACE","\n                ",125],["T_CONSTANT_ENCAPSED_STRING","'behavior'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Magento",126],["T_NS_SEPARATOR","\\",126],["T_STRING","ImportExport",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Model",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Import",126],["T_DOUBLE_COLON","::",126],["T_STRING","BEHAVIOR_APPEND",126],",",["T_WHITESPACE","\n                ",126],["T_CONSTANT_ENCAPSED_STRING","'entity'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'advanced_pricing'",127],["T_WHITESPACE","\n            ",127],"]",["T_WHITESPACE","\n        ",128],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","validateData",129],"(",")",";",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEquals",131],"(",["T_LNUMBER","0",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$errors",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getErrorsCount",131],"(",")",",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'Advanced pricing import validation error'",131],")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","model",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","importData",132],"(",")",";",["T_WHITESPACE","\n\n        ",132],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Product $resource *\/",134],["T_WHITESPACE","\n        ",134],["T_VARIABLE","$resource",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","objectManager",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_NS_SEPARATOR","\\",135],["T_STRING","Magento",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Catalog",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Model",135],["T_NS_SEPARATOR","\\",135],["T_STRING","ResourceModel",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Product",135],["T_DOUBLE_COLON","::",135],["T_CLASS","class",135],")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$productIdList",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$resource",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getProductsIdsBySkus",136],"(",["T_STRING","array_keys",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","expectedTierPrice",136],")",")",";",["T_WHITESPACE","\n        ",136],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $product *\/",137],["T_WHITESPACE","\n        ",137],["T_VARIABLE","$product",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","objectManager",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","create",138],"(",["T_NS_SEPARATOR","\\",138],["T_STRING","Magento",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Catalog",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Model",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Product",138],["T_DOUBLE_COLON","::",138],["T_CLASS","class",138],")",";",["T_WHITESPACE","\n        ",138],["T_FOREACH","foreach",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$productIdList",139],["T_WHITESPACE"," ",139],["T_AS","as",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$sku",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$productId",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$product",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","load",140],"(",["T_VARIABLE","$productId",140],")",";",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$tierPriceCollection",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$product",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getTierPrices",141],"(",")",";",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertEquals",142],"(",["T_LNUMBER","4",142],",",["T_WHITESPACE"," ",142],["T_STRING","count",142],"(",["T_VARIABLE","$tierPriceCollection",142],")",")",";",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$index",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_LNUMBER","0",143],";",["T_WHITESPACE","\n            ",143],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product\\TierPrice $tierPrice *\/",144],["T_WHITESPACE","\n            ",144],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$tierPriceCollection",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$tierPrice",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","checkPercentageDiscount",146],"(",["T_VARIABLE","$tierPrice",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$sku",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$index",146],")",";",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertEquals",147],"(",["T_LNUMBER","0",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$tierPrice",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getExtensionAttributes",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","getWebsiteId",147],"(",")",")",";",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$tierPriceData",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$tierPrice",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getData",148],"(",")",";",["T_WHITESPACE","\n                ",148],["T_UNSET","unset",149],"(",["T_VARIABLE","$tierPriceData",149],"[",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",149],"]",")",";",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertContains",150],"(",["T_VARIABLE","$tierPriceData",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","expectedTierPrice",150],"[",["T_VARIABLE","$sku",150],"]",")",";",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$index",151],["T_WHITESPACE"," ",151],["T_INC","++",151],";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Check percentage discount type.\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\TierPrice $tierPrice\n     * @param string $sku\n     * @param int $index\n     * @return void\n     *\/",156],["T_WHITESPACE","\n    ",163],["T_PRIVATE","private",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","checkPercentageDiscount",164],"(",["T_WHITESPACE","\n        ",164],["T_NS_SEPARATOR","\\",165],["T_STRING","Magento",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Catalog",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Model",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Product",165],["T_NS_SEPARATOR","\\",165],["T_STRING","TierPrice",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$tierPrice",165],",",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$sku",166],",",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$index",167],["T_WHITESPACE","\n    ",167],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertEquals",169],"(",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","expectedTierPrice",170],"[",["T_VARIABLE","$sku",170],"]","[",["T_VARIABLE","$index",170],"]","[",["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",170],"]",",",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$tierPrice",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getExtensionAttributes",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","getPercentageValue",171],"(",")",["T_WHITESPACE","\n            ",171],")",";",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$tierPrice",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","setData",173],"(",["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$tierPrice",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getExtensionAttributes",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","getPercentageValue",173],"(",")",")",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * @magentoAppArea adminhtml\n     * @magentoDbIsolation enabled\n     * @magentoAppIsolation enabled\n     * @magentoDataFixture Magento\/Catalog\/_files\/product_simple.php\n     *\/",176],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","testImportDelete",182],"(",")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$productRepository",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","objectManager",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","create",184],"(",["T_WHITESPACE","\n            ",184],["T_NS_SEPARATOR","\\",185],["T_STRING","Magento",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Catalog",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Api",185],["T_NS_SEPARATOR","\\",185],["T_STRING","ProductRepositoryInterface",185],["T_DOUBLE_COLON","::",185],["T_CLASS","class",185],["T_WHITESPACE","\n        ",185],")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$index",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_LNUMBER","0",187],";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$ids",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],"[","]",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$origPricingData",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],"[","]",";",["T_WHITESPACE","\n        ",189],["T_WHILE","while",190],["T_WHITESPACE"," ",190],"(",["T_ISSET","isset",190],"(",["T_VARIABLE","$skus",190],"[",["T_VARIABLE","$index",190],"]",")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$ids",191],"[",["T_VARIABLE","$index",191],"]",["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$productRepository",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","get",191],"(",["T_VARIABLE","$skus",191],"[",["T_VARIABLE","$index",191],"]",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","getId",191],"(",")",";",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$origPricingData",192],"[",["T_VARIABLE","$index",192],"]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","objectManager",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","create",192],"(",["T_NS_SEPARATOR","\\",192],["T_STRING","Magento",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Catalog",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Model",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Product",192],["T_DOUBLE_COLON","::",192],["T_CLASS","class",192],")",["T_WHITESPACE","\n                ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","load",193],"(",["T_VARIABLE","$ids",193],"[",["T_VARIABLE","$index",193],"]",")",["T_WHITESPACE","\n                ",193],["T_OBJECT_OPERATOR","->",194],["T_STRING","getTierPrices",194],"(",")",";",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$index",195],["T_INC","++",195],";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_VARIABLE","$csvfile",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","uniqid",198],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport_'",198],")",["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'.csv'",198],";",["T_WHITESPACE","\n\n        ",198],["T_DOC_COMMENT","\/** @var \\Magento\\AdvancedPricingImportExport\\Model\\Export\\AdvancedPricing $exportModel *\/",200],["T_WHITESPACE","\n        ",200],["T_VARIABLE","$exportModel",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","objectManager",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","create",201],"(",["T_WHITESPACE","\n            ",201],["T_NS_SEPARATOR","\\",202],["T_STRING","Magento",202],["T_NS_SEPARATOR","\\",202],["T_STRING","AdvancedPricingImportExport",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Model",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Export",202],["T_NS_SEPARATOR","\\",202],["T_STRING","AdvancedPricing",202],["T_DOUBLE_COLON","::",202],["T_CLASS","class",202],["T_WHITESPACE","\n        ",202],")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$exportModel",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","setWriter",204],"(",["T_WHITESPACE","\n            ",204],["T_NS_SEPARATOR","\\",205],["T_STRING","Magento",205],["T_NS_SEPARATOR","\\",205],["T_STRING","TestFramework",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Helper",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Bootstrap",205],["T_DOUBLE_COLON","::",205],["T_STRING","getObjectManager",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","create",205],"(",["T_WHITESPACE","\n                ",205],["T_NS_SEPARATOR","\\",206],["T_STRING","Magento",206],["T_NS_SEPARATOR","\\",206],["T_STRING","ImportExport",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Model",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Export",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Adapter",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Csv",206],["T_DOUBLE_COLON","::",206],["T_CLASS","class",206],",",["T_WHITESPACE","\n                ",206],"[",["T_CONSTANT_ENCAPSED_STRING","'fileSystem'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","fileSystem",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'destination'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$csvfile",207],"]",["T_WHITESPACE","\n            ",207],")",["T_WHITESPACE","\n        ",208],")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","assertNotEmpty",210],"(",["T_VARIABLE","$exportModel",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","export",210],"(",")",")",";",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$directory",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","fileSystem",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getDirectoryWrite",212],"(",["T_STRING","DirectoryList",212],["T_DOUBLE_COLON","::",212],["T_STRING","VAR_DIR",212],")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$source",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","objectManager",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","create",213],"(",["T_WHITESPACE","\n            ",213],["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","ImportExport",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Model",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Import",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Source",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Csv",214],["T_DOUBLE_COLON","::",214],["T_CLASS","class",214],",",["T_WHITESPACE","\n            ",214],"[",["T_WHITESPACE","\n                ",215],["T_CONSTANT_ENCAPSED_STRING","'file'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$csvfile",216],",",["T_WHITESPACE","\n                ",216],["T_CONSTANT_ENCAPSED_STRING","'directory'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$directory",217],["T_WHITESPACE","\n            ",217],"]",["T_WHITESPACE","\n        ",218],")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$errors",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","model",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","setParameters",220],"(",["T_WHITESPACE","\n            ",220],"[",["T_WHITESPACE","\n                ",221],["T_CONSTANT_ENCAPSED_STRING","'behavior'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_NS_SEPARATOR","\\",222],["T_STRING","Magento",222],["T_NS_SEPARATOR","\\",222],["T_STRING","ImportExport",222],["T_NS_SEPARATOR","\\",222],["T_STRING","Model",222],["T_NS_SEPARATOR","\\",222],["T_STRING","Import",222],["T_DOUBLE_COLON","::",222],["T_STRING","BEHAVIOR_DELETE",222],",",["T_WHITESPACE","\n                ",222],["T_CONSTANT_ENCAPSED_STRING","'entity'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'advanced_pricing'",223],["T_WHITESPACE","\n            ",223],"]",["T_WHITESPACE","\n        ",224],")",["T_OBJECT_OPERATOR","->",225],["T_STRING","setSource",225],"(",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$source",226],["T_WHITESPACE","\n        ",226],")",["T_OBJECT_OPERATOR","->",227],["T_STRING","validateData",227],"(",")",";",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","assertTrue",229],"(",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$errors",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getErrorsCount",230],"(",")",["T_WHITESPACE"," ",230],["T_IS_EQUAL","==",230],["T_WHITESPACE"," ",230],["T_LNUMBER","0",230],",",["T_WHITESPACE","\n            ",230],["T_CONSTANT_ENCAPSED_STRING","'Advanced Pricing import error, imported from file:'",231],["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_VARIABLE","$csvfile",231],["T_WHITESPACE","\n        ",231],")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","model",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","importData",233],"(",")",";",["T_WHITESPACE","\n\n        ",233],["T_WHILE","while",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$index",235],["T_WHITESPACE"," ",235],">",["T_WHITESPACE"," ",235],["T_LNUMBER","0",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$index",236],["T_DEC","--",236],";",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$newPricingData",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","objectManager",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","create",237],"(",["T_NS_SEPARATOR","\\",237],["T_STRING","Magento",237],["T_NS_SEPARATOR","\\",237],["T_STRING","Catalog",237],["T_NS_SEPARATOR","\\",237],["T_STRING","Model",237],["T_NS_SEPARATOR","\\",237],["T_STRING","Product",237],["T_DOUBLE_COLON","::",237],["T_CLASS","class",237],")",["T_WHITESPACE","\n                ",237],["T_OBJECT_OPERATOR","->",238],["T_STRING","load",238],"(",["T_VARIABLE","$ids",238],"[",["T_VARIABLE","$index",238],"]",")",["T_WHITESPACE","\n                ",238],["T_OBJECT_OPERATOR","->",239],["T_STRING","getTierPrices",239],"(",")",";",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","assertEquals",240],"(",["T_LNUMBER","0",240],",",["T_WHITESPACE"," ",240],["T_STRING","count",240],"(",["T_VARIABLE","$newPricingData",240],")",")",";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n\n    ",242],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/AdvancedPricingImportExport\/_files\/create_products.php\n     * @magentoAppArea adminhtml\n     *\/",244],["T_WHITESPACE","\n    ",247],["T_PUBLIC","public",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","testImportReplace",248],"(",")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_COMMENT","\/\/ import data from CSV file\n",250],["T_WHITESPACE","        ",251],["T_VARIABLE","$pathToFile",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_DIR","__DIR__",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'\/_files\/import_advanced_pricing.csv'",251],";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$filesystem",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","objectManager",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","create",252],"(",["T_WHITESPACE","\n            ",252],["T_NS_SEPARATOR","\\",253],["T_STRING","Magento",253],["T_NS_SEPARATOR","\\",253],["T_STRING","Framework",253],["T_NS_SEPARATOR","\\",253],["T_STRING","Filesystem",253],["T_DOUBLE_COLON","::",253],["T_CLASS","class",253],["T_WHITESPACE","\n        ",253],")",";",["T_WHITESPACE","\n\n        ",254],["T_VARIABLE","$directory",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$filesystem",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getDirectoryWrite",256],"(",["T_STRING","DirectoryList",256],["T_DOUBLE_COLON","::",256],["T_STRING","ROOT",256],")",";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$source",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","objectManager",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","create",257],"(",["T_WHITESPACE","\n            ",257],["T_NS_SEPARATOR","\\",258],["T_STRING","Magento",258],["T_NS_SEPARATOR","\\",258],["T_STRING","ImportExport",258],["T_NS_SEPARATOR","\\",258],["T_STRING","Model",258],["T_NS_SEPARATOR","\\",258],["T_STRING","Import",258],["T_NS_SEPARATOR","\\",258],["T_STRING","Source",258],["T_NS_SEPARATOR","\\",258],["T_STRING","Csv",258],["T_DOUBLE_COLON","::",258],["T_CLASS","class",258],",",["T_WHITESPACE","\n            ",258],"[",["T_WHITESPACE","\n                ",259],["T_CONSTANT_ENCAPSED_STRING","'file'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$pathToFile",260],",",["T_WHITESPACE","\n                ",260],["T_CONSTANT_ENCAPSED_STRING","'directory'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$directory",261],["T_WHITESPACE","\n            ",261],"]",["T_WHITESPACE","\n        ",262],")",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$errors",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","model",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","setSource",264],"(",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$source",265],["T_WHITESPACE","\n        ",265],")",["T_OBJECT_OPERATOR","->",266],["T_STRING","setParameters",266],"(",["T_WHITESPACE","\n            ",266],"[",["T_WHITESPACE","\n                ",267],["T_CONSTANT_ENCAPSED_STRING","'behavior'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Magento",268],["T_NS_SEPARATOR","\\",268],["T_STRING","ImportExport",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Model",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Import",268],["T_DOUBLE_COLON","::",268],["T_STRING","BEHAVIOR_REPLACE",268],",",["T_WHITESPACE","\n                ",268],["T_CONSTANT_ENCAPSED_STRING","'entity'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'advanced_pricing'",269],["T_WHITESPACE","\n            ",269],"]",["T_WHITESPACE","\n        ",270],")",["T_OBJECT_OPERATOR","->",271],["T_STRING","validateData",271],"(",")",";",["T_WHITESPACE","\n\n        ",271],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","assertEquals",273],"(",["T_LNUMBER","0",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$errors",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getErrorsCount",273],"(",")",",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'Advanced pricing import validation error'",273],")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","model",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","importData",274],"(",")",";",["T_WHITESPACE","\n\n        ",274],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Product $resource *\/",276],["T_WHITESPACE","\n        ",276],["T_VARIABLE","$resource",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","objectManager",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","get",277],"(",["T_NS_SEPARATOR","\\",277],["T_STRING","Magento",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Catalog",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Model",277],["T_NS_SEPARATOR","\\",277],["T_STRING","ResourceModel",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Product",277],["T_DOUBLE_COLON","::",277],["T_CLASS","class",277],")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$productIdList",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$resource",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getProductsIdsBySkus",278],"(",["T_STRING","array_keys",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","expectedTierPrice",278],")",")",";",["T_WHITESPACE","\n        ",278],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $product *\/",279],["T_WHITESPACE","\n        ",279],["T_VARIABLE","$product",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","objectManager",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","create",280],"(",["T_NS_SEPARATOR","\\",280],["T_STRING","Magento",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Catalog",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Model",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Product",280],["T_DOUBLE_COLON","::",280],["T_CLASS","class",280],")",";",["T_WHITESPACE","\n        ",280],["T_FOREACH","foreach",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$productIdList",281],["T_WHITESPACE"," ",281],["T_AS","as",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$sku",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$productId",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$product",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","load",282],"(",["T_VARIABLE","$productId",282],")",";",["T_WHITESPACE","\n            ",282],["T_VARIABLE","$tierPriceCollection",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$product",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getTierPrices",283],"(",")",";",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","assertEquals",284],"(",["T_LNUMBER","4",284],",",["T_WHITESPACE"," ",284],["T_STRING","count",284],"(",["T_VARIABLE","$tierPriceCollection",284],")",")",";",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$index",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_LNUMBER","0",285],";",["T_WHITESPACE","\n            ",285],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product\\TierPrice $tierPrice *\/",286],["T_WHITESPACE","\n            ",286],["T_FOREACH","foreach",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$tierPriceCollection",287],["T_WHITESPACE"," ",287],["T_AS","as",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$tierPrice",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","checkPercentageDiscount",288],"(",["T_VARIABLE","$tierPrice",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$sku",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$index",288],")",";",["T_WHITESPACE","\n                ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","assertEquals",289],"(",["T_LNUMBER","0",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$tierPrice",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getExtensionAttributes",289],"(",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getWebsiteId",289],"(",")",")",";",["T_WHITESPACE","\n                ",289],["T_VARIABLE","$tierPriceData",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$tierPrice",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getData",290],"(",")",";",["T_WHITESPACE","\n                ",290],["T_UNSET","unset",291],"(",["T_VARIABLE","$tierPriceData",291],"[",["T_CONSTANT_ENCAPSED_STRING","'extension_attributes'",291],"]",")",";",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","assertContains",292],"(",["T_VARIABLE","$tierPriceData",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","expectedTierPrice",292],"[",["T_VARIABLE","$sku",292],"]",")",";",["T_WHITESPACE","\n                ",292],["T_VARIABLE","$index",293],["T_WHITESPACE"," ",293],["T_INC","++",293],";",["T_WHITESPACE","\n            ",293],"}",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n",296],"}",["T_WHITESPACE","\n",297]]
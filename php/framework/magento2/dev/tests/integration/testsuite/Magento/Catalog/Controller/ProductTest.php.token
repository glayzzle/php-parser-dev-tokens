[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Test class for \\Magento\\Catalog\\Controller\\Product.\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Controller",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @magentoAppIsolation enabled\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ProductTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","TestFramework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","TestCase",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AbstractController",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","setUp",17],"(",")",["T_WHITESPACE","\n    ",17],"{",["T_WHITESPACE","\n        ",18],["T_IF","if",19],["T_WHITESPACE"," ",19],"(",["T_STRING","defined",19],"(",["T_CONSTANT_ENCAPSED_STRING","'HHVM_VERSION'",19],")",")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n            ",19],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","markTestSkipped",20],"(",["T_CONSTANT_ENCAPSED_STRING","'Randomly fails due to known HHVM bug (DOMText mixed with DOMElement)'",20],")",";",["T_WHITESPACE","\n        ",20],"}",["T_WHITESPACE","\n        ",21],["T_STRING","parent",22],["T_DOUBLE_COLON","::",22],["T_STRING","setUp",22],"(",")",";",["T_WHITESPACE","\n    ",22],"}",["T_WHITESPACE","\n\n    ",23],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","assert404NotFound",25],"(",")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_STRING","parent",27],["T_DOUBLE_COLON","::",27],["T_STRING","assert404NotFound",27],"(",")",";",["T_WHITESPACE","\n        ",27],["T_DOC_COMMENT","\/** @var $objectManager \\Magento\\TestFramework\\ObjectManager *\/",28],["T_WHITESPACE","\n        ",28],["T_VARIABLE","$objectManager",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","TestFramework",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Helper",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Bootstrap",29],["T_DOUBLE_COLON","::",29],["T_STRING","getObjectManager",29],"(",")",";",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","assertNull",30],"(",["T_VARIABLE","$objectManager",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","get",30],"(",["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Registry",30],["T_DOUBLE_COLON","::",30],["T_CLASS","class",30],")",["T_OBJECT_OPERATOR","->",30],["T_STRING","registry",30],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",30],")",")",";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","_getProductImageFile",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$objectManager",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","TestFramework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Helper",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Bootstrap",35],["T_DOUBLE_COLON","::",35],["T_STRING","getObjectManager",35],"(",")",";",["T_WHITESPACE","\n        ",35],["T_DOC_COMMENT","\/**\n         * @var $repository \\Magento\\Catalog\\Model\\ProductRepository\n         *\/",36],["T_WHITESPACE","\n        ",38],["T_VARIABLE","$repository",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$objectManager",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","create",39],"(",["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Catalog",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Model",39],["T_NS_SEPARATOR","\\",39],["T_STRING","ProductRepository",39],["T_DOUBLE_COLON","::",39],["T_CLASS","class",39],")",";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$product",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$repository",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","get",40],"(",["T_CONSTANT_ENCAPSED_STRING","'simple_product_1'",40],")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$images",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$product",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getMediaGalleryImages",41],"(",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","getItems",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$image",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","reset",42],"(",["T_VARIABLE","$images",42],")",";",["T_WHITESPACE","\n        ",42],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$image",43],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",43],"]",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Catalog\/controllers\/_files\/products.php\n     * @magentoAppArea frontend\n     *\/",46],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","testViewAction",50],"(",")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_DOC_COMMENT","\/** @var $objectManager \\Magento\\TestFramework\\ObjectManager *\/",52],["T_WHITESPACE","\n        ",52],["T_VARIABLE","$objectManager",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","TestFramework",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Helper",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Bootstrap",53],["T_DOUBLE_COLON","::",53],["T_STRING","getObjectManager",53],"(",")",";",["T_WHITESPACE","\n        ",53],["T_DOC_COMMENT","\/**\n         * @var $repository \\Magento\\Catalog\\Model\\ProductRepository\n         *\/",54],["T_WHITESPACE","\n        ",56],["T_VARIABLE","$repository",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$objectManager",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","create",57],"(",["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Catalog",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Model",57],["T_NS_SEPARATOR","\\",57],["T_STRING","ProductRepository",57],["T_DOUBLE_COLON","::",57],["T_CLASS","class",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$product",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$repository",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'simple_product_1'",58],")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","dispatch",59],"(",["T_STRING","sprintf",59],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/view\/id\/%s'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$product",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getEntityId",59],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",59],["T_DOC_COMMENT","\/** @var $currentProduct \\Magento\\Catalog\\Model\\Product *\/",61],["T_WHITESPACE","\n        ",61],["T_VARIABLE","$currentProduct",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$objectManager",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Registry",62],["T_DOUBLE_COLON","::",62],["T_CLASS","class",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","registry",62],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",62],")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertInstanceOf",63],"(",["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Catalog",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Product",63],["T_DOUBLE_COLON","::",63],["T_CLASS","class",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$currentProduct",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertEquals",64],"(",["T_VARIABLE","$product",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getEntityId",64],"(",")",",",["T_WHITESPACE"," ",64],["T_VARIABLE","$currentProduct",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getEntityId",64],"(",")",")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$lastViewedProductId",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","TestFramework",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Helper",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Bootstrap",66],["T_DOUBLE_COLON","::",66],["T_STRING","getObjectManager",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","get",66],"(",["T_WHITESPACE","\n            ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Catalog",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Session",67],["T_DOUBLE_COLON","::",67],["T_CLASS","class",67],["T_WHITESPACE","\n        ",67],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getLastViewedProductId",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertEquals",69],"(",["T_VARIABLE","$product",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getEntityId",69],"(",")",",",["T_WHITESPACE"," ",69],["T_VARIABLE","$lastViewedProductId",69],")",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$responseBody",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getResponse",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getBody",71],"(",")",";",["T_WHITESPACE","\n        ",71],["T_COMMENT","\/* Product info *\/",72],["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertContains",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Simple Product 1 Name'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$responseBody",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertContains",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Simple Product 1 Full Description'",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$responseBody",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertContains",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Simple Product 1 Short Description'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$responseBody",75],")",";",["T_WHITESPACE","\n        ",75],["T_COMMENT","\/* Stock info *\/",76],["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertContains",77],"(",["T_CONSTANT_ENCAPSED_STRING","'$1,234.56'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$responseBody",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertContains",78],"(",["T_CONSTANT_ENCAPSED_STRING","'In stock'",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$responseBody",78],")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertContains",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Add to Cart'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$responseBody",79],")",";",["T_WHITESPACE","\n        ",79],["T_COMMENT","\/* Meta info *\/",80],["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertContains",81],"(",["T_CONSTANT_ENCAPSED_STRING","'<title>Simple Product 1 Meta Title<\/title>'",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$responseBody",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertSelectCount",82],"(",["T_CONSTANT_ENCAPSED_STRING","'meta[name=\"keywords\"][content=\"Simple Product 1 Meta Keyword\"]'",82],",",["T_WHITESPACE"," ",82],["T_LNUMBER","1",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$responseBody",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertSelectCount",83],"(",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","'meta[name=\"description\"][content=\"Simple Product 1 Meta Description\"]'",84],",",["T_WHITESPACE","\n            ",84],["T_LNUMBER","1",85],",",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$responseBody",86],["T_WHITESPACE","\n        ",86],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Catalog\/_files\/product_simple.php\n     *\/",90],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","testViewActionConfigurable",93],"(",")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_DOC_COMMENT","\/** @var $objectManager \\Magento\\TestFramework\\ObjectManager *\/",95],["T_WHITESPACE","\n        ",95],["T_VARIABLE","$objectManager",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","TestFramework",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Helper",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Bootstrap",96],["T_DOUBLE_COLON","::",96],["T_STRING","getObjectManager",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_DOC_COMMENT","\/**\n         * @var $repository \\Magento\\Catalog\\Model\\ProductRepository\n         *\/",97],["T_WHITESPACE","\n        ",99],["T_VARIABLE","$repository",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$objectManager",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","create",100],"(",["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Catalog",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","ProductRepository",100],["T_DOUBLE_COLON","::",100],["T_CLASS","class",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$product",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$repository",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_CONSTANT_ENCAPSED_STRING","'simple'",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","dispatch",102],"(",["T_STRING","sprintf",102],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/view\/id\/%s'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$product",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getEntityId",102],"(",")",")",")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$html",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getResponse",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","getBody",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertSelectCount",104],"(",["T_CONSTANT_ENCAPSED_STRING","'#product-options-wrapper'",104],",",["T_WHITESPACE"," ",104],["T_LNUMBER","1",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$html",104],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","testViewActionNoProductId",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","dispatch",109],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/view\/id\/'",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assert404NotFound",110],"(",")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","testViewActionRedirect",113],"(",")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","dispatch",115],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/view\/?store=default'",115],")",";",["T_WHITESPACE","\n\n        ",115],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertRedirect",117],"(",")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Catalog\/controllers\/_files\/products.php\n     *\/",120],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","testGalleryAction",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_DOC_COMMENT","\/** @var $objectManager \\Magento\\TestFramework\\ObjectManager *\/",125],["T_WHITESPACE","\n        ",125],["T_VARIABLE","$objectManager",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Magento",126],["T_NS_SEPARATOR","\\",126],["T_STRING","TestFramework",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Helper",126],["T_NS_SEPARATOR","\\",126],["T_STRING","Bootstrap",126],["T_DOUBLE_COLON","::",126],["T_STRING","getObjectManager",126],"(",")",";",["T_WHITESPACE","\n        ",126],["T_DOC_COMMENT","\/**\n         * @var $repository \\Magento\\Catalog\\Model\\ProductRepository\n         *\/",127],["T_WHITESPACE","\n        ",129],["T_VARIABLE","$repository",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$objectManager",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","create",130],"(",["T_NS_SEPARATOR","\\",130],["T_STRING","Magento",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Catalog",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Model",130],["T_NS_SEPARATOR","\\",130],["T_STRING","ProductRepository",130],["T_DOUBLE_COLON","::",130],["T_CLASS","class",130],")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$product",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$repository",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","get",131],"(",["T_CONSTANT_ENCAPSED_STRING","'simple_product_1'",131],")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","dispatch",132],"(",["T_STRING","sprintf",132],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/gallery\/id\/%s'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$product",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getEntityId",132],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",132],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertContains",134],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/localhost\/pub\/media\/catalog\/product\/'",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getResponse",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","getBody",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertContains",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getProductImageFile",135],"(",")",",",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getResponse",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getBody",135],"(",")",")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","testGalleryActionRedirect",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","dispatch",140],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/gallery\/?store=default'",140],")",";",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertRedirect",142],"(",")",";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","testGalleryActionNoProduct",145],"(",")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","dispatch",147],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/gallery\/id\/'",147],")",";",["T_WHITESPACE","\n\n        ",147],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assert404NotFound",149],"(",")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Catalog\/controllers\/_files\/products.php\n     *\/",152],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","testImageAction",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","markTestSkipped",157],"(",["T_CONSTANT_ENCAPSED_STRING","\"All logic has been cut to avoid possible malicious usage of the method\"",157],")",";",["T_WHITESPACE","\n        ",157],["T_STRING","ob_start",158],"(",")",";",["T_WHITESPACE","\n        ",158],["T_COMMENT","\/* Preceding slash in URL is required in this case *\/",159],["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","dispatch",160],"(",["T_CONSTANT_ENCAPSED_STRING","'\/catalog\/product\/image'",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_getProductImageFile",160],"(",")",")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$imageContent",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","ob_get_clean",161],"(",")",";",["T_WHITESPACE","\n        ",161],["T_DOC_COMMENT","\/**\n         * Check against PNG file signature.\n         * @link http:\/\/www.libpng.org\/pub\/png\/spec\/1.2\/PNG-Rationale.html#R.PNG-file-signature\n         *\/",162],["T_WHITESPACE","\n        ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertStringStartsWith",166],"(",["T_STRING","sprintf",166],"(",["T_CONSTANT_ENCAPSED_STRING","\"%cPNG\\r\\n%c\\n\"",166],",",["T_WHITESPACE"," ",166],["T_LNUMBER","137",166],",",["T_WHITESPACE"," ",166],["T_LNUMBER","26",166],")",",",["T_WHITESPACE"," ",166],["T_VARIABLE","$imageContent",166],")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","testImageActionNoImage",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","dispatch",171],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/image\/'",171],")",";",["T_WHITESPACE","\n\n        ",171],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assert404NotFound",173],"(",")",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n",174],"}",["T_WHITESPACE","\n",175]]
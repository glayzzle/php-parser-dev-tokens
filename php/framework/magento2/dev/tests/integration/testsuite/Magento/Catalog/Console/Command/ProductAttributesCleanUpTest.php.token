[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Console",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Command",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Console",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tester",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CommandTester",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","ProductAttributesCleanUpTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_NS_SEPARATOR","\\",10],["T_STRING","PHPUnit_Framework_TestCase",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * @var CommandTester\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_PRIVATE","private",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$tester",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Console\\Command\\ProductAttributesCleanUp\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$command",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$objectManager",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Attribute\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$attributeResource",30],";",["T_WHITESPACE","\n\n    ",30],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","setUp",32],"(",")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","objectManager",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","TestFramework",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Helper",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Bootstrap",34],["T_DOUBLE_COLON","::",34],["T_STRING","getObjectManager",34],"(",")",";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","command",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","objectManager",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","create",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Catalog",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Console",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Command",35],["T_NS_SEPARATOR","\\",35],["T_STRING","ProductAttributesCleanUp",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","attributeResource",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","objectManager",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","create",36],"(",["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Catalog",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","ResourceModel",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Attribute",36],["T_DOUBLE_COLON","::",36],["T_CLASS","class",36],")",";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","tester",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","CommandTester",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","command",37],")",";",["T_WHITESPACE","\n\n        ",37],["T_COMMENT","\/\/ Prepare data fixtures for test\n",39],["T_WHITESPACE","        ",40],["T_VARIABLE","$store",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","prepareAdditionalStore",40],"(",")",";",["T_WHITESPACE","\n        ",40],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Api\\ProductRepositoryInterface $productRepository *\/",41],["T_WHITESPACE","\n        ",41],["T_VARIABLE","$productRepository",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","objectManager",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","create",42],"(",["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Catalog",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Api",42],["T_NS_SEPARATOR","\\",42],["T_STRING","ProductRepositoryInterface",42],["T_DOUBLE_COLON","::",42],["T_CLASS","class",42],")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$product",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$productRepository",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","get",43],"(",["T_CONSTANT_ENCAPSED_STRING","'simple'",43],")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$product",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","setName",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Simple fixture store'",44],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$product",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","setStoreId",45],"(",["T_VARIABLE","$store",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getId",45],"(",")",")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$product",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","save",46],"(",")",";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Store\/_files\/website.php\n     * @magentoDataFixture Magento\/Store\/_files\/fixture_store_with_catalogsearch_index.php\n     * @magentoDataFixture Magento\/Catalog\/_files\/product_simple.php\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","testExecute",54],"(",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_COMMENT","\/\/ Verify that unused attribute was created\n",56],["T_WHITESPACE","        ",57],["T_VARIABLE","$attribute",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getUnusedProductAttribute",57],"(",")",";",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertArrayHasKey",59],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$attribute",59],")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertArrayHasKey",60],"(",["T_CONSTANT_ENCAPSED_STRING","'value_id'",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$attribute",60],")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertEquals",61],"(",["T_VARIABLE","$attribute",61],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",61],"]",",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'Simple fixture store'",61],")",";",["T_WHITESPACE","\n\n        ",61],["T_COMMENT","\/\/ Execute command\n",63],["T_WHITESPACE","        ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","tester",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","execute",64],"(","[","]",")",";",["T_WHITESPACE","\n\n        ",64],["T_COMMENT","\/\/ Verify that unused attribute was removed\n",66],["T_WHITESPACE","        ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertContains",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Unused product attributes successfully cleaned up'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","tester",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getDisplay",67],"(",")",")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$attribute",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getUnusedProductAttribute",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertFalse",69],"(",["T_VARIABLE","$attribute",69],")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * @return array|false\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_PRIVATE","private",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","getUnusedProductAttribute",75],"(",")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$connection",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","attributeResource",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getConnection",77],"(",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$select",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$connection",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","select",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$select",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","from",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","attributeResource",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getTable",79],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity_varchar'",79],")",")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$select",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","where",80],"(",["T_CONSTANT_ENCAPSED_STRING","'value = ?'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'Simple fixture store'",80],")",";",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$connection",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","fetchRow",81],"(",["T_VARIABLE","$select",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Store\\Model\\Store\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PRIVATE","private",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","prepareAdditionalStore",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_DOC_COMMENT","\/** @var \\Magento\\Store\\Model\\Website $website *\/",89],["T_WHITESPACE","\n        ",89],["T_VARIABLE","$website",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","objectManager",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","create",90],"(",["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Store",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Model",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Website",90],["T_DOUBLE_COLON","::",90],["T_CLASS","class",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$website",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","load",91],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",91],")",";",["T_WHITESPACE","\n\n        ",91],["T_DOC_COMMENT","\/** @var \\Magento\\Store\\Model\\Store $store *\/",93],["T_WHITESPACE","\n        ",93],["T_VARIABLE","$store",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","objectManager",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","create",94],"(",["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Store",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Model",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Store",94],["T_DOUBLE_COLON","::",94],["T_CLASS","class",94],")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$store",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","load",95],"(",["T_CONSTANT_ENCAPSED_STRING","'fixturestore'",95],")",";",["T_WHITESPACE","\n\n        ",95],["T_DOC_COMMENT","\/** @var \\Magento\\Store\\Model\\Group $storeGroup *\/",97],["T_WHITESPACE","\n        ",97],["T_VARIABLE","$storeGroup",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","objectManager",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","create",98],"(",["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Store",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Model",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Group",98],["T_DOUBLE_COLON","::",98],["T_CLASS","class",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$storeGroup",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setWebsiteId",99],"(",["T_VARIABLE","$website",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getId",99],"(",")",")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$storeGroup",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","setName",100],"(",["T_CONSTANT_ENCAPSED_STRING","'Fixture Store Group'",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$storeGroup",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","setRootCategoryId",101],"(",["T_LNUMBER","2",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$storeGroup",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","setDefaultStoreId",102],"(",["T_VARIABLE","$store",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getId",102],"(",")",")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$storeGroup",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","save",103],"(",")",";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$store",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","setWebsiteId",105],"(",["T_VARIABLE","$website",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getId",105],"(",")",")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","setGroupId",106],"(",["T_VARIABLE","$storeGroup",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getId",106],"(",")",")",["T_WHITESPACE","\n            ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","save",107],"(",")",";",["T_WHITESPACE","\n\n        ",107],["T_COMMENT","\/* Refresh stores memory cache *\/",109],["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","objectManager",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","get",110],"(",["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Store",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Model",110],["T_NS_SEPARATOR","\\",110],["T_STRING","StoreManagerInterface",110],["T_DOUBLE_COLON","::",110],["T_CLASS","class",110],")",["T_OBJECT_OPERATOR","->",110],["T_STRING","reinitStores",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$store",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n",112],"}",["T_WHITESPACE","\n",113]]
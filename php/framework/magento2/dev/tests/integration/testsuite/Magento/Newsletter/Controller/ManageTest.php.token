[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Newsletter",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * @magentoDbIsolation enabled\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","ManageTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TestFramework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TestCase",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AbstractController",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$customerSession",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Session\\Generic\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$coreSession",22],";",["T_WHITESPACE","\n\n    ",22],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","setUp",24],"(",")",["T_WHITESPACE","\n    ",24],"{",["T_WHITESPACE","\n        ",25],["T_STRING","parent",26],["T_DOUBLE_COLON","::",26],["T_STRING","setUp",26],"(",")",";",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$objectManager",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","TestFramework",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Helper",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Bootstrap",27],["T_DOUBLE_COLON","::",27],["T_STRING","getObjectManager",27],"(",")",";",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","customerSession",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$objectManager",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","get",28],"(",["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Customer",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Model",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Session",28],["T_DOUBLE_COLON","::",28],["T_CLASS","class",28],")",";",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","customerSession",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","setCustomerId",29],"(",["T_LNUMBER","1",29],")",";",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","coreSession",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$objectManager",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","get",30],"(",["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Session",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Generic",30],["T_DOUBLE_COLON","::",30],["T_CLASS","class",30],")",";",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","coreSession",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","setData",31],"(",["T_CONSTANT_ENCAPSED_STRING","'_form_key'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'formKey'",31],")",";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","tearDown",34],"(",")",["T_WHITESPACE","\n    ",34],"{",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","customerSession",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","setCustomerId",36],"(",["T_STRING","null",36],")",";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","coreSession",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","unsData",37],"(",["T_CONSTANT_ENCAPSED_STRING","'_form_key'",37],")",";",["T_WHITESPACE","\n    ",37],"}",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Customer\/_files\/customer.php\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","testSaveAction",43],"(",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getRequest",45],"(",")",["T_WHITESPACE","\n            ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","setParam",46],"(",["T_CONSTANT_ENCAPSED_STRING","'form_key'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'formKey'",46],")",["T_WHITESPACE","\n            ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","setParam",47],"(",["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'1'",47],")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","dispatch",48],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/manage\/save'",48],")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertRedirect",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","stringContains",50],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/'",50],")",")",";",["T_WHITESPACE","\n\n        ",50],["T_DOC_COMMENT","\/**\n         * Check that errors\n         *\/",52],["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertSessionMessages",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","isEmpty",55],"(",")",",",["T_WHITESPACE"," ",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Message",55],["T_NS_SEPARATOR","\\",55],["T_STRING","MessageInterface",55],["T_DOUBLE_COLON","::",55],["T_STRING","TYPE_ERROR",55],")",";",["T_WHITESPACE","\n\n        ",55],["T_DOC_COMMENT","\/**\n         * Check that success message\n         *\/",57],["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertSessionMessages",60],"(",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","equalTo",61],"(","[",["T_CONSTANT_ENCAPSED_STRING","'We saved the subscription.'",61],"]",")",",",["T_WHITESPACE","\n            ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Message",62],["T_NS_SEPARATOR","\\",62],["T_STRING","MessageInterface",62],["T_DOUBLE_COLON","::",62],["T_STRING","TYPE_SUCCESS",62],["T_WHITESPACE","\n        ",62],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Customer\/_files\/customer.php\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","testSaveActionRemoveSubscription",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getRequest",71],"(",")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","setParam",72],"(",["T_CONSTANT_ENCAPSED_STRING","'form_key'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'formKey'",72],")",["T_WHITESPACE","\n            ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","setParam",73],"(",["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'0'",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","dispatch",74],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/manage\/save'",74],")",";",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertRedirect",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","stringContains",76],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/'",76],")",")",";",["T_WHITESPACE","\n\n        ",76],["T_DOC_COMMENT","\/**\n         * Check that errors\n         *\/",78],["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertSessionMessages",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","isEmpty",81],"(",")",",",["T_WHITESPACE"," ",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Framework",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Message",81],["T_NS_SEPARATOR","\\",81],["T_STRING","MessageInterface",81],["T_DOUBLE_COLON","::",81],["T_STRING","TYPE_ERROR",81],")",";",["T_WHITESPACE","\n\n        ",81],["T_DOC_COMMENT","\/**\n         * Check that success message\n         *\/",83],["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertSessionMessages",86],"(",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","equalTo",87],"(","[",["T_CONSTANT_ENCAPSED_STRING","'We removed the subscription.'",87],"]",")",",",["T_WHITESPACE","\n            ",87],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Message",88],["T_NS_SEPARATOR","\\",88],["T_STRING","MessageInterface",88],["T_DOUBLE_COLON","::",88],["T_STRING","TYPE_SUCCESS",88],["T_WHITESPACE","\n        ",88],")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n",90],"}",["T_WHITESPACE","\n",91]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","User",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Controller",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Adminhtml",9],["T_NS_SEPARATOR","\\",9],["T_STRING","User",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Message",11],["T_NS_SEPARATOR","\\",11],["T_STRING","MessageInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TestFramework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Helper",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Bootstrap",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Test class for Magento\\User\\Controller\\Adminhtml\\User\\InvalidateToken.\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","InvalidateTokenTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","TestFramework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","TestCase",17],["T_NS_SEPARATOR","\\",17],["T_STRING","AbstractBackendController",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/User\/_files\/user_with_role.php\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","testInvalidateSingleToken",22],"(",")",["T_WHITESPACE","\n    ",22],"{",["T_WHITESPACE","\n        ",23],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Api\\AdminTokenServiceInterface $tokenService *\/",24],["T_WHITESPACE","\n        ",24],["T_VARIABLE","$tokenService",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","Bootstrap",25],["T_DOUBLE_COLON","::",25],["T_STRING","getObjectManager",25],"(",")",["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_NS_SEPARATOR","\\",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Integration",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Api",25],["T_NS_SEPARATOR","\\",25],["T_STRING","AdminTokenServiceInterface",25],["T_DOUBLE_COLON","::",25],["T_CLASS","class",25],")",";",["T_WHITESPACE","\n        ",25],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Model\\Oauth\\Token $tokenModel *\/",26],["T_WHITESPACE","\n        ",26],["T_VARIABLE","$tokenModel",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","Bootstrap",27],["T_DOUBLE_COLON","::",27],["T_STRING","getObjectManager",27],"(",")",["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_NS_SEPARATOR","\\",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Integration",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Model",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Oauth",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Token",27],["T_DOUBLE_COLON","::",27],["T_CLASS","class",27],")",";",["T_WHITESPACE","\n        ",27],["T_DOC_COMMENT","\/** @var \\Magento\\User\\Model\\User $userModel *\/",28],["T_WHITESPACE","\n        ",28],["T_VARIABLE","$userModel",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","Bootstrap",29],["T_DOUBLE_COLON","::",29],["T_STRING","getObjectManager",29],"(",")",["T_OBJECT_OPERATOR","->",29],["T_STRING","get",29],"(",["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","User",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Model",29],["T_NS_SEPARATOR","\\",29],["T_STRING","User",29],["T_DOUBLE_COLON","::",29],["T_CLASS","class",29],")",";",["T_WHITESPACE","\n\n        ",29],["T_VARIABLE","$adminUserNameFromFixture",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'adminUser'",31],";",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$tokenService",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","createAdminAccessToken",32],"(",["T_WHITESPACE","\n            ",32],["T_VARIABLE","$adminUserNameFromFixture",33],",",["T_WHITESPACE","\n            ",33],["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","TestFramework",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Bootstrap",34],["T_DOUBLE_COLON","::",34],["T_STRING","ADMIN_PASSWORD",34],["T_WHITESPACE","\n        ",34],")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$adminUserId",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$userModel",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","loadByUsername",36],"(",["T_VARIABLE","$adminUserNameFromFixture",36],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","getId",36],"(",")",";",["T_WHITESPACE","\n\n        ",36],["T_COMMENT","\/\/ invalidate token\n",38],["T_WHITESPACE","        ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getRequest",39],"(",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","setParam",39],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$adminUserId",39],")",";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","dispatch",40],"(",["T_CONSTANT_ENCAPSED_STRING","'backend\/admin\/user\/invalidateToken'",40],")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$token",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$tokenModel",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","loadByAdminId",41],"(",["T_VARIABLE","$adminUserId",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertEquals",42],"(",["T_LNUMBER","1",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$token",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getRevoked",42],"(",")",")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/User\/_files\/user_with_role.php\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","testInvalidateMultipleTokens",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Api\\AdminTokenServiceInterface $tokenService *\/",50],["T_WHITESPACE","\n        ",50],["T_VARIABLE","$tokenService",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","Bootstrap",51],["T_DOUBLE_COLON","::",51],["T_STRING","getObjectManager",51],"(",")",["T_OBJECT_OPERATOR","->",51],["T_STRING","get",51],"(",["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Integration",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Api",51],["T_NS_SEPARATOR","\\",51],["T_STRING","AdminTokenServiceInterface",51],["T_DOUBLE_COLON","::",51],["T_CLASS","class",51],")",";",["T_WHITESPACE","\n\n        ",51],["T_DOC_COMMENT","\/** @var \\Magento\\Integration\\Model\\ResourceModel\\Oauth\\Token\\CollectionFactory $tokenModelCollectionFactory *\/",53],["T_WHITESPACE","\n        ",53],["T_VARIABLE","$tokenModelCollectionFactory",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","Bootstrap",54],["T_DOUBLE_COLON","::",54],["T_STRING","getObjectManager",54],"(",")",["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_WHITESPACE","\r\n            ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Integration",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","ResourceModel",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Oauth",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Token",55],["T_NS_SEPARATOR","\\",55],["T_STRING","CollectionFactory",55],["T_DOUBLE_COLON","::",55],["T_CLASS","class",55],["T_WHITESPACE","\n        ",55],")",";",["T_WHITESPACE","\n\n        ",56],["T_DOC_COMMENT","\/** @var \\Magento\\User\\Model\\User $userModel *\/",58],["T_WHITESPACE","\n        ",58],["T_VARIABLE","$userModel",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","Bootstrap",59],["T_DOUBLE_COLON","::",59],["T_STRING","getObjectManager",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"(",["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","User",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Model",59],["T_NS_SEPARATOR","\\",59],["T_STRING","User",59],["T_DOUBLE_COLON","::",59],["T_CLASS","class",59],")",";",["T_WHITESPACE","\n\n        ",59],["T_VARIABLE","$adminUserNameFromFixture",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'adminUser'",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$tokenService",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","createAdminAccessToken",62],"(",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$adminUserNameFromFixture",63],",",["T_WHITESPACE","\n            ",63],["T_NS_SEPARATOR","\\",64],["T_STRING","Magento",64],["T_NS_SEPARATOR","\\",64],["T_STRING","TestFramework",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Bootstrap",64],["T_DOUBLE_COLON","::",64],["T_STRING","ADMIN_PASSWORD",64],["T_WHITESPACE","\n        ",64],")",";",["T_WHITESPACE","\n\n        ",65],["T_VARIABLE","$tokenService",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","createAdminAccessToken",67],"(",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$adminUserNameFromFixture",68],",",["T_WHITESPACE","\n            ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","TestFramework",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Bootstrap",69],["T_DOUBLE_COLON","::",69],["T_STRING","ADMIN_PASSWORD",69],["T_WHITESPACE","\n        ",69],")",";",["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$adminUserId",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$userModel",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","loadByUsername",72],"(",["T_VARIABLE","$adminUserNameFromFixture",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getId",72],"(",")",";",["T_WHITESPACE","\n\n        ",72],["T_COMMENT","\/\/ invalidate tokens\n",74],["T_WHITESPACE","        ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getRequest",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","setParam",75],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$adminUserId",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","dispatch",76],"(",["T_CONSTANT_ENCAPSED_STRING","'backend\/admin\/user\/invalidateToken'",76],")",";",["T_WHITESPACE","\n        ",76],["T_FOREACH","foreach",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$tokenModelCollectionFactory",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","create",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","addFilterByAdminId",77],"(",["T_VARIABLE","$adminUserId",77],")",["T_WHITESPACE"," ",77],["T_AS","as",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$token",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertEquals",78],"(",["T_LNUMBER","1",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$token",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getRevoked",78],"(",")",")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/User\/_files\/user_with_role.php\n     *\/",82],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","testInvalidateToken_NoTokens",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_DOC_COMMENT","\/** @var \\Magento\\User\\Model\\User $userModel *\/",87],["T_WHITESPACE","\n        ",87],["T_VARIABLE","$userModel",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","Bootstrap",88],["T_DOUBLE_COLON","::",88],["T_STRING","getObjectManager",88],"(",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","get",88],"(",["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","User",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Model",88],["T_NS_SEPARATOR","\\",88],["T_STRING","User",88],["T_DOUBLE_COLON","::",88],["T_CLASS","class",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$adminUserNameFromFixture",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'adminUser'",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$adminUserId",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$userModel",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","loadByUsername",90],"(",["T_VARIABLE","$adminUserNameFromFixture",90],")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getId",90],"(",")",";",["T_WHITESPACE","\n        ",90],["T_COMMENT","\/\/ invalidate token\n",91],["T_WHITESPACE","        ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getRequest",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","setParam",92],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$adminUserId",92],")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","dispatch",93],"(",["T_CONSTANT_ENCAPSED_STRING","'backend\/admin\/user\/invalidateToken'",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertSessionMessages",94],"(",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","equalTo",95],"(","[",["T_CONSTANT_ENCAPSED_STRING","'This user has no tokens.'",95],"]",")",",",["T_WHITESPACE","\n            ",95],["T_STRING","MessageInterface",96],["T_DOUBLE_COLON","::",96],["T_STRING","TYPE_ERROR",96],["T_WHITESPACE","\n        ",96],")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","testInvalidateToken_NoUser",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","dispatch",102],"(",["T_CONSTANT_ENCAPSED_STRING","'backend\/admin\/user\/invalidateToken'",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertSessionMessages",103],"(",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","equalTo",104],"(","[",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find a user to revoke.'",104],"]",")",",",["T_WHITESPACE","\n            ",104],["T_STRING","MessageInterface",105],["T_DOUBLE_COLON","::",105],["T_STRING","TYPE_ERROR",105],["T_WHITESPACE","\n        ",105],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","testInvalidateToken_InvalidUser",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$adminUserId",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_LNUMBER","999",111],";",["T_WHITESPACE","\n        ",111],["T_COMMENT","\/\/ invalidate token\n",112],["T_WHITESPACE","        ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getRequest",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","setParam",113],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$adminUserId",113],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","dispatch",114],"(",["T_CONSTANT_ENCAPSED_STRING","'backend\/admin\/user\/invalidateToken'",114],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertSessionMessages",115],"(",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","equalTo",116],"(","[",["T_CONSTANT_ENCAPSED_STRING","'This user has no tokens.'",116],"]",")",",",["T_WHITESPACE","\n            ",116],["T_STRING","MessageInterface",117],["T_DOUBLE_COLON","::",117],["T_STRING","TYPE_ERROR",117],["T_WHITESPACE","\n        ",117],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n",119],"}",["T_WHITESPACE","\n",120]]
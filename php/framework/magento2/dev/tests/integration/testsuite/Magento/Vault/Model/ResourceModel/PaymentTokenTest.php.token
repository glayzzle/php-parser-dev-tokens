[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Vault",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Braintree",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Ui",8],["T_NS_SEPARATOR","\\",8],["T_STRING","PayPal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigProvider",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","PayPalConfigProvider",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceConnection",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DB",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Adapter",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AdapterInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ObjectManagerInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Order",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TestFramework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Helper",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Bootstrap",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Vault",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","PaymentTokenManagement",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Vault",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Setup",15],["T_NS_SEPARATOR","\\",15],["T_STRING","InstallSchema",15],";",["T_WHITESPACE","\n\n",15],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","PaymentTokenTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","PHPUnit_Framework_TestCase",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","CUSTOMER_ID",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_LNUMBER","1",19],";",["T_WHITESPACE","\n    ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","TOKEN",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'mx29vk'",20],";",["T_WHITESPACE","\n    ",20],["T_CONST","const",21],["T_WHITESPACE"," ",21],["T_STRING","ORDER_INCREMENT_ID",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'100000001'",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var ObjectManagerInterface\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$objectManager",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var PaymentToken\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$paymentToken",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var ResourceConnection\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PRIVATE","private",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$resource",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var AdapterInterface\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$connection",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var PaymentTokenManagement\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PRIVATE","private",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$paymentTokenManagement",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var Order\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PRIVATE","private",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$order",51],";",["T_WHITESPACE","\n\n    ",51],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","setUp",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","objectManager",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","Bootstrap",55],["T_DOUBLE_COLON","::",55],["T_STRING","getObjectManager",55],"(",")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","order",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","objectManager",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","create",56],"(",["T_STRING","Order",56],["T_DOUBLE_COLON","::",56],["T_CLASS","class",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","paymentToken",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","objectManager",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","create",57],"(",["T_STRING","PaymentToken",57],["T_DOUBLE_COLON","::",57],["T_CLASS","class",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","paymentTokenManagement",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","objectManager",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_STRING","PaymentTokenManagement",58],["T_DOUBLE_COLON","::",58],["T_CLASS","class",58],")",";",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","resource",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","objectManager",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_STRING","ResourceConnection",60],["T_DOUBLE_COLON","::",60],["T_CLASS","class",60],")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","connection",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","resource",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getConnection",61],"(",")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Sales\/_files\/order.php\n     * @magentoDataFixture Magento\/Braintree\/_files\/paypal_vault_token.php\n     *\/",64],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","testAddLinkToOrderPaymentExists",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","order",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","loadByIncrementId",70],"(",["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","ORDER_INCREMENT_ID",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$paymentToken",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","paymentTokenManagement",71],["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","getByGatewayToken",72],"(",["T_STRING","self",72],["T_DOUBLE_COLON","::",72],["T_STRING","TOKEN",72],",",["T_WHITESPACE"," ",72],["T_STRING","PayPalConfigProvider",72],["T_DOUBLE_COLON","::",72],["T_STRING","PAYPAL_CODE",72],",",["T_WHITESPACE"," ",72],["T_STRING","self",72],["T_DOUBLE_COLON","::",72],["T_STRING","CUSTOMER_ID",72],")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","connection",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","insert",74],"(",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","resource",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getTableName",75],"(",["T_STRING","InstallSchema",75],["T_DOUBLE_COLON","::",75],["T_STRING","ORDER_PAYMENT_TO_PAYMENT_TOKEN_TABLE",75],")",",",["T_WHITESPACE","\n            ",75],"[",["T_WHITESPACE","\n                ",76],["T_CONSTANT_ENCAPSED_STRING","'order_payment_id'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","order",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getPayment",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","getEntityId",77],"(",")",",",["T_WHITESPACE","\n                ",77],["T_CONSTANT_ENCAPSED_STRING","'payment_token_id'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$paymentToken",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getEntityId",78],"(",")",["T_WHITESPACE","\n            ",78],"]",["T_WHITESPACE","\n        ",79],")",";",["T_WHITESPACE","\n\n        ",80],["T_STATIC","static",82],["T_DOUBLE_COLON","::",82],["T_STRING","assertTrue",82],"(",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","paymentToken",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","addLinkToOrderPayment",83],"(",["T_WHITESPACE","\n                ",83],["T_VARIABLE","$paymentToken",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getEntityId",84],"(",")",",",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","order",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getPayment",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getEntityId",85],"(",")",["T_WHITESPACE","\n            ",85],")",["T_WHITESPACE","\n        ",86],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Sales\/_files\/order.php\n     * @magentoDataFixture Magento\/Braintree\/_files\/paypal_vault_token.php\n     *\/",90],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","testAddLinkToOrderPaymentCreate",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","order",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","loadByIncrementId",96],"(",["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","ORDER_INCREMENT_ID",96],")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$paymentToken",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","paymentTokenManagement",97],["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","getByGatewayToken",98],"(",["T_STRING","self",98],["T_DOUBLE_COLON","::",98],["T_STRING","TOKEN",98],",",["T_WHITESPACE"," ",98],["T_STRING","PayPalConfigProvider",98],["T_DOUBLE_COLON","::",98],["T_STRING","PAYPAL_CODE",98],",",["T_WHITESPACE"," ",98],["T_STRING","self",98],["T_DOUBLE_COLON","::",98],["T_STRING","CUSTOMER_ID",98],")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$select",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","connection",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","select",100],"(",")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","from",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","resource",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getTableName",101],"(",["T_STRING","InstallSchema",101],["T_DOUBLE_COLON","::",101],["T_STRING","ORDER_PAYMENT_TO_PAYMENT_TOKEN_TABLE",101],")",")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","where",102],"(",["T_CONSTANT_ENCAPSED_STRING","'order_payment_id = ?'",102],",",["T_WHITESPACE"," ",102],["T_INT_CAST","(int)",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","order",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getPayment",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","getEntityId",102],"(",")",")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","where",103],"(",["T_CONSTANT_ENCAPSED_STRING","'payment_token_id =?'",103],",",["T_WHITESPACE"," ",103],["T_INT_CAST","(int)",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$paymentToken",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getEntityId",103],"(",")",")",";",["T_WHITESPACE","\n\n        ",103],["T_STATIC","static",105],["T_DOUBLE_COLON","::",105],["T_STRING","assertEmpty",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","connection",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","fetchRow",105],"(",["T_VARIABLE","$select",105],")",")",";",["T_WHITESPACE","\n        ",105],["T_STATIC","static",106],["T_DOUBLE_COLON","::",106],["T_STRING","assertTrue",106],"(",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","paymentToken",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","addLinkToOrderPayment",107],"(",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$paymentToken",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getEntityId",108],"(",")",",",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","order",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getPayment",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getEntityId",109],"(",")",["T_WHITESPACE","\n            ",109],")",["T_WHITESPACE","\n        ",110],")",";",["T_WHITESPACE","\n        ",111],["T_STATIC","static",112],["T_DOUBLE_COLON","::",112],["T_STRING","assertNotEmpty",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","connection",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","fetchRow",112],"(",["T_VARIABLE","$select",112],")",")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n",113],"}",["T_WHITESPACE","\n",114]]
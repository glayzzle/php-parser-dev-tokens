[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Tax",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Total",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","TestFramework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Helper",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Bootstrap",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Test \\Magento\\Tax\\Model\\Sales\\Total\\Quote\\Subtotal\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",13],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","SubtotalTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","PHPUnit_Framework_TestCase",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Object Manager\n     *\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$objectManager",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductRepositoryInterface\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$productRepository",30],";",["T_WHITESPACE","\n\n    ",30],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","setUp",32],"(",")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","objectManager",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","Bootstrap",34],["T_DOUBLE_COLON","::",34],["T_STRING","getObjectManager",34],"(",")",";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","productRepository",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","objectManager",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","create",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Catalog",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Api",35],["T_NS_SEPARATOR","\\",35],["T_STRING","ProductRepositoryInterface",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],")",";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","getCustomerById",38],"(",["T_VARIABLE","$id",38],")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_DOC_COMMENT","\/**\n         * @var $customerRepository \\Magento\\Customer\\Api\\CustomerRepositoryInterface\n         *\/",40],["T_WHITESPACE","\n        ",42],["T_VARIABLE","$customerRepository",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","objectManager",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","create",43],"(",["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Customer",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Api",43],["T_NS_SEPARATOR","\\",43],["T_STRING","CustomerRepositoryInterface",43],["T_DOUBLE_COLON","::",43],["T_CLASS","class",43],")",";",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$customerRepository",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getById",44],"(",["T_VARIABLE","$id",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @magentoAppIsolation enabled\n     * @magentoDataFixture Magento\/Customer\/_files\/customer.php\n     * @magentoDataFixture Magento\/Customer\/_files\/customer_address.php\n     * @magentoDataFixture Magento\/Tax\/_files\/tax_classes.php\n     * @magentoDataFixture Magento\/Customer\/_files\/customer_group.php\n     * @magentoDataFixture Magento\/Catalog\/_files\/products.php\n     * @magentoConfigFixture current_store tax\/calculation\/algorithm UNIT_BASE_CALCULATION\n     * @dataProvider collectUnitBasedDataProvider\n     *\/",47],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","testCollectUnitBased",57],"(",["T_VARIABLE","$expected",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$customerTaxClassId",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getCustomerTaxClassId",59],"(",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$fixtureCustomerId",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_LNUMBER","1",60],";",["T_WHITESPACE","\n        ",60],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Customer $customer *\/",61],["T_WHITESPACE","\n        ",61],["T_VARIABLE","$customer",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","objectManager",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","create",62],"(",["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Customer",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Model",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Customer",62],["T_DOUBLE_COLON","::",62],["T_CLASS","class",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","load",62],"(",["T_VARIABLE","$fixtureCustomerId",62],")",";",["T_WHITESPACE","\n        ",62],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Group $customerGroup *\/",63],["T_WHITESPACE","\n        ",63],["T_VARIABLE","$customerGroup",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","objectManager",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","create",64],"(",["T_WHITESPACE","\n            ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Customer",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Model",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Group",65],["T_DOUBLE_COLON","::",65],["T_CLASS","class",65],["T_WHITESPACE","\n        ",65],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","load",66],"(",["T_WHITESPACE","\n                ",66],["T_CONSTANT_ENCAPSED_STRING","'custom_group'",67],",",["T_WHITESPACE","\n                ",67],["T_CONSTANT_ENCAPSED_STRING","'customer_group_code'",68],["T_WHITESPACE","\n            ",68],")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$customerGroup",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","setTaxClassId",70],"(",["T_VARIABLE","$customerTaxClassId",70],")",["T_OBJECT_OPERATOR","->",70],["T_STRING","save",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$customer",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setGroupId",71],"(",["T_VARIABLE","$customerGroup",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getId",71],"(",")",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","save",71],"(",")",";",["T_WHITESPACE","\n\n        ",71],["T_VARIABLE","$productTaxClassId",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getProductTaxClassId",73],"(",")",";",["T_WHITESPACE","\n        ",73],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $product *\/",74],["T_WHITESPACE","\n        ",74],["T_VARIABLE","$product",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","productRepository",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'simple'",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$product",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setTaxClassId",76],"(",["T_VARIABLE","$productTaxClassId",76],")",["T_OBJECT_OPERATOR","->",76],["T_STRING","save",76],"(",")",";",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$quoteShippingAddressDataObject",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getShippingAddressDataObject",78],"(",["T_VARIABLE","$fixtureCustomerId",78],")",";",["T_WHITESPACE","\n\n        ",78],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address $quoteShippingAddress *\/",80],["T_WHITESPACE","\n        ",80],["T_VARIABLE","$quoteShippingAddress",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","objectManager",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","create",81],"(",["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Quote",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Model",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Quote",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Address",81],["T_DOUBLE_COLON","::",81],["T_CLASS","class",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$quoteShippingAddress",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","importCustomerAddressData",82],"(",["T_VARIABLE","$quoteShippingAddressDataObject",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$quantity",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_LNUMBER","2",83],";",["T_WHITESPACE","\n\n        ",83],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote $quote *\/",85],["T_WHITESPACE","\n        ",85],["T_VARIABLE","$quote",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","objectManager",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","create",86],"(",["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Quote",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Model",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Quote",86],["T_DOUBLE_COLON","::",86],["T_CLASS","class",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$quote",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","setStoreId",87],"(",["T_WHITESPACE","\n                ",87],["T_LNUMBER","1",88],["T_WHITESPACE","\n            ",88],")",["T_OBJECT_OPERATOR","->",89],["T_STRING","setIsActive",89],"(",["T_WHITESPACE","\n                ",89],["T_STRING","true",90],["T_WHITESPACE","\n            ",90],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","setIsMultiShipping",91],"(",["T_WHITESPACE","\n                ",91],["T_STRING","false",92],["T_WHITESPACE","\n            ",92],")",["T_OBJECT_OPERATOR","->",93],["T_STRING","assignCustomerWithAddressChange",93],"(",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getCustomerById",94],"(",["T_VARIABLE","$customer",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getId",94],"(",")",")",["T_WHITESPACE","\n            ",94],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","setShippingAddress",95],"(",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$quoteShippingAddress",96],["T_WHITESPACE","\n            ",96],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","setBillingAddress",97],"(",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$quoteShippingAddress",98],["T_WHITESPACE","\n            ",98],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","setCheckoutMethod",99],"(",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$customer",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getMode",100],"(",")",["T_WHITESPACE","\n            ",100],")",["T_OBJECT_OPERATOR","->",101],["T_STRING","setPasswordHash",101],"(",["T_WHITESPACE","\n                ",101],["T_VARIABLE","$customer",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","encryptPassword",102],"(",["T_VARIABLE","$customer",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getPassword",102],"(",")",")",["T_WHITESPACE","\n            ",102],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","addProduct",103],"(",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$product",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","load",104],"(",["T_VARIABLE","$product",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getId",104],"(",")",")",",",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$quantity",105],["T_WHITESPACE","\n            ",105],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$address",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$quote",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getShippingAddress",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\ShippingAssignment $shippingAssignment *\/",108],["T_WHITESPACE","\n        ",108],["T_VARIABLE","$shippingAssignment",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","objectManager",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","create",109],"(",["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Quote",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Model",109],["T_NS_SEPARATOR","\\",109],["T_STRING","ShippingAssignment",109],["T_DOUBLE_COLON","::",109],["T_CLASS","class",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$shipping",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","objectManager",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","create",110],"(",["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Quote",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Model",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Shipping",110],["T_DOUBLE_COLON","::",110],["T_CLASS","class",110],")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$shipping",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","setAddress",111],"(",["T_VARIABLE","$address",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$shippingAssignment",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","setShipping",112],"(",["T_VARIABLE","$shipping",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$shippingAssignment",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setItems",113],"(",["T_VARIABLE","$address",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getAllItems",113],"(",")",")",";",["T_WHITESPACE","\n        ",113],["T_DOC_COMMENT","\/** @var  \\Magento\\Quote\\Model\\Quote\\Address\\Total $total *\/",114],["T_WHITESPACE","\n        ",114],["T_VARIABLE","$total",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","objectManager",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","create",115],"(",["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Quote",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Model",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Quote",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Address",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Total",115],["T_DOUBLE_COLON","::",115],["T_CLASS","class",115],")",";",["T_WHITESPACE","\n        ",115],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address\\Total\\Subtotal $addressSubtotalCollector *\/",116],["T_WHITESPACE","\n        ",116],["T_VARIABLE","$addressSubtotalCollector",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","objectManager",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","create",117],"(",["T_WHITESPACE","\n            ",117],["T_NS_SEPARATOR","\\",118],["T_STRING","Magento",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Quote",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Model",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Quote",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Address",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Total",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Subtotal",118],["T_DOUBLE_COLON","::",118],["T_CLASS","class",118],["T_WHITESPACE","\n        ",118],")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$addressSubtotalCollector",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","collect",120],"(",["T_VARIABLE","$quote",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$shippingAssignment",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$total",120],")",";",["T_WHITESPACE","\n\n        ",120],["T_DOC_COMMENT","\/** @var \\Magento\\Tax\\Model\\Sales\\Total\\Quote\\Subtotal $subtotalCollector *\/",122],["T_WHITESPACE","\n        ",122],["T_VARIABLE","$subtotalCollector",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","objectManager",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","create",123],"(",["T_NS_SEPARATOR","\\",123],["T_STRING","Magento",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Tax",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Model",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Sales",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Total",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Quote",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Subtotal",123],["T_DOUBLE_COLON","::",123],["T_CLASS","class",123],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$subtotalCollector",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","collect",124],"(",["T_VARIABLE","$quote",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$shippingAssignment",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$total",124],")",";",["T_WHITESPACE","\n\n        ",124],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEquals",126],"(",["T_VARIABLE","$expected",126],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",126],"]",",",["T_WHITESPACE"," ",126],["T_VARIABLE","$total",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getSubtotal",126],"(",")",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertEquals",127],"(",["T_VARIABLE","$expected",127],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",127],"]",["T_WHITESPACE"," ",127],"+",["T_WHITESPACE"," ",127],["T_VARIABLE","$expected",127],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",127],"]",",",["T_WHITESPACE"," ",127],["T_VARIABLE","$total",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getSubtotalInclTax",127],"(",")",")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertEquals",128],"(",["T_VARIABLE","$expected",128],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",128],"]",["T_WHITESPACE"," ",128],"+",["T_WHITESPACE"," ",128],["T_VARIABLE","$expected",128],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",128],"]",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$address",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getBaseSubtotalTotalInclTax",128],"(",")",")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertEquals",129],"(",["T_VARIABLE","$expected",129],"[",["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",129],"]",",",["T_WHITESPACE"," ",129],["T_VARIABLE","$total",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getDiscountAmount",129],"(",")",")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$items",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$address",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getAllItems",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address\\Item $item *\/",131],["T_WHITESPACE","\n        ",131],["T_VARIABLE","$item",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$items",132],"[",["T_LNUMBER","0",132],"]",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertEquals",133],"(",["T_VARIABLE","$expected",133],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",133],"]","[",["T_LNUMBER","0",133],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",133],"]",",",["T_WHITESPACE"," ",133],["T_VARIABLE","$item",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getPrice",133],"(",")",")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertEquals",134],"(",["T_VARIABLE","$expected",134],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",134],"]","[",["T_LNUMBER","0",134],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price_incl_tax'",134],"]",",",["T_WHITESPACE"," ",134],["T_VARIABLE","$item",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getPriceInclTax",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEquals",135],"(",["T_VARIABLE","$expected",135],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",135],"]","[",["T_LNUMBER","0",135],"]","[",["T_CONSTANT_ENCAPSED_STRING","'row_total'",135],"]",",",["T_WHITESPACE"," ",135],["T_VARIABLE","$item",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getRowTotal",135],"(",")",")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertEquals",136],"(",["T_VARIABLE","$expected",136],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",136],"]","[",["T_LNUMBER","0",136],"]","[",["T_CONSTANT_ENCAPSED_STRING","'row_total_incl_tax'",136],"]",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$item",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getRowTotalInclTax",136],"(",")",")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertEquals",137],"(",["T_VARIABLE","$expected",137],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",137],"]","[",["T_LNUMBER","0",137],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tax_percent'",137],"]",",",["T_WHITESPACE"," ",137],["T_VARIABLE","$item",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTaxPercent",137],"(",")",")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","collectUnitBasedDataProvider",140],"(",")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],"[",["T_WHITESPACE","\n            ",142],["T_CONSTANT_ENCAPSED_STRING","'one_item'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],"[",["T_WHITESPACE","\n                ",143],"[",["T_WHITESPACE","\n                    ",144],["T_CONSTANT_ENCAPSED_STRING","'subtotal'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_LNUMBER","20",145],",",["T_WHITESPACE","\n                    ",145],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_DNUMBER","1.5",146],",",["T_WHITESPACE","\n                    ",146],["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],",",["T_WHITESPACE","\n                    ",147],["T_CONSTANT_ENCAPSED_STRING","'items'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],"[",["T_WHITESPACE","\n                        ",148],"[",["T_WHITESPACE","\n                            ",149],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_DNUMBER","1.5",150],",",["T_WHITESPACE","\n                            ",150],["T_CONSTANT_ENCAPSED_STRING","'price'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","10",151],",",["T_WHITESPACE","\n                            ",151],["T_CONSTANT_ENCAPSED_STRING","'price_incl_tax'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_DNUMBER","10.75",152],",",["T_WHITESPACE","\n                            ",152],["T_CONSTANT_ENCAPSED_STRING","'row_total'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_LNUMBER","20",153],",",["T_WHITESPACE","\n                            ",153],["T_CONSTANT_ENCAPSED_STRING","'row_total_incl_tax'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_DNUMBER","21.5",154],",",["T_WHITESPACE","\n                            ",154],["T_CONSTANT_ENCAPSED_STRING","'taxable_amount'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_LNUMBER","10",155],",",["T_WHITESPACE","\n                            ",155],["T_CONSTANT_ENCAPSED_STRING","'code'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'simple'",156],",",["T_WHITESPACE","\n                            ",156],["T_CONSTANT_ENCAPSED_STRING","'type'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'product'",157],",",["T_WHITESPACE","\n                            ",157],["T_CONSTANT_ENCAPSED_STRING","'tax_percent'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_DNUMBER","7.5",158],",",["T_WHITESPACE","\n                        ",158],"]",",",["T_WHITESPACE","\n                    ",159],"]",",",["T_WHITESPACE","\n                ",160],"]",",",["T_WHITESPACE","\n            ",161],"]",",",["T_WHITESPACE","\n        ",162],"]",";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Customer\/_files\/customer.php\n     * @magentoDataFixture Magento\/Customer\/_files\/customer_address.php\n     * @magentoDataFixture Magento\/Tax\/_files\/tax_classes.php\n     * @magentoDataFixture Magento\/Customer\/_files\/customer_group.php\n     * @magentoDataFixture Magento\/Bundle\/_files\/product.php\n     * @magentoConfigFixture current_store tax\/calculation\/algorithm UNIT_BASE_CALCULATION\n     * @dataProvider collectUnitBasedDataProvider\n     *\/",166],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","testCollectUnitBasedBundleProduct",175],"(",["T_VARIABLE","$expected",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$customerTaxClassId",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getCustomerTaxClassId",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$fixtureCustomerId",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_LNUMBER","1",178],";",["T_WHITESPACE","\n        ",178],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Customer $customer *\/",179],["T_WHITESPACE","\n        ",179],["T_VARIABLE","$customer",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","objectManager",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","create",180],"(",["T_NS_SEPARATOR","\\",180],["T_STRING","Magento",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Customer",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Model",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Customer",180],["T_DOUBLE_COLON","::",180],["T_CLASS","class",180],")",["T_OBJECT_OPERATOR","->",180],["T_STRING","load",180],"(",["T_VARIABLE","$fixtureCustomerId",180],")",";",["T_WHITESPACE","\n        ",180],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Group $customerGroup *\/",181],["T_WHITESPACE","\n        ",181],["T_VARIABLE","$customerGroup",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","objectManager",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","create",182],"(",["T_WHITESPACE","\n            ",182],["T_NS_SEPARATOR","\\",183],["T_STRING","Magento",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Customer",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Model",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Group",183],["T_DOUBLE_COLON","::",183],["T_CLASS","class",183],["T_WHITESPACE","\n        ",183],")",["T_OBJECT_OPERATOR","->",184],["T_STRING","load",184],"(",["T_WHITESPACE","\n                ",184],["T_CONSTANT_ENCAPSED_STRING","'custom_group'",185],",",["T_WHITESPACE","\n                ",185],["T_CONSTANT_ENCAPSED_STRING","'customer_group_code'",186],["T_WHITESPACE","\n            ",186],")",";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$customerGroup",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","setTaxClassId",188],"(",["T_VARIABLE","$customerTaxClassId",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","save",188],"(",")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$customer",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","setGroupId",189],"(",["T_VARIABLE","$customerGroup",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getId",189],"(",")",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","save",189],"(",")",";",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$productTaxClassId",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getProductTaxClassId",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $product *\/",192],["T_WHITESPACE","\n        ",192],["T_VARIABLE","$childProduct",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","productRepository",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","get",193],"(",["T_CONSTANT_ENCAPSED_STRING","'simple'",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$childProduct",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","setTaxClassId",194],"(",["T_VARIABLE","$productTaxClassId",194],")",["T_OBJECT_OPERATOR","->",194],["T_STRING","save",194],"(",")",";",["T_WHITESPACE","\n        ",194],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $product *\/",195],["T_WHITESPACE","\n        ",195],["T_VARIABLE","$product",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","productRepository",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","get",196],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle-product'",196],")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$product",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","setTaxClassId",197],"(",["T_VARIABLE","$productTaxClassId",197],")",["T_WHITESPACE","\n            ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","setPriceType",198],"(",["T_NS_SEPARATOR","\\",198],["T_STRING","Magento",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Catalog",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Model",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Product",198],["T_NS_SEPARATOR","\\",198],["T_STRING","Type",198],["T_NS_SEPARATOR","\\",198],["T_STRING","AbstractType",198],["T_DOUBLE_COLON","::",198],["T_STRING","CALCULATE_CHILD",198],")",["T_WHITESPACE","\n            ",198],["T_OBJECT_OPERATOR","->",199],["T_STRING","save",199],"(",")",";",["T_WHITESPACE","\n\n        ",199],["T_VARIABLE","$quoteShippingAddressDataObject",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getShippingAddressDataObject",201],"(",["T_VARIABLE","$fixtureCustomerId",201],")",";",["T_WHITESPACE","\n\n        ",201],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address $quoteShippingAddress *\/",203],["T_WHITESPACE","\n        ",203],["T_VARIABLE","$quoteShippingAddress",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","objectManager",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","create",204],"(",["T_NS_SEPARATOR","\\",204],["T_STRING","Magento",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Quote",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Model",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Quote",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Address",204],["T_DOUBLE_COLON","::",204],["T_CLASS","class",204],")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$quoteShippingAddress",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","importCustomerAddressData",205],"(",["T_VARIABLE","$quoteShippingAddressDataObject",205],")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$quantity",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_LNUMBER","2",206],";",["T_WHITESPACE","\n\n        ",206],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote $quote *\/",208],["T_WHITESPACE","\n        ",208],["T_VARIABLE","$quote",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","objectManager",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","create",209],"(",["T_NS_SEPARATOR","\\",209],["T_STRING","Magento",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Quote",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Model",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Quote",209],["T_DOUBLE_COLON","::",209],["T_CLASS","class",209],")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$quote",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","setStoreId",210],"(",["T_WHITESPACE","\n                ",210],["T_LNUMBER","1",211],["T_WHITESPACE","\n            ",211],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","setIsActive",212],"(",["T_WHITESPACE","\n                ",212],["T_STRING","true",213],["T_WHITESPACE","\n            ",213],")",["T_OBJECT_OPERATOR","->",214],["T_STRING","setIsMultiShipping",214],"(",["T_WHITESPACE","\n                ",214],["T_STRING","false",215],["T_WHITESPACE","\n            ",215],")",["T_OBJECT_OPERATOR","->",216],["T_STRING","assignCustomerWithAddressChange",216],"(",["T_WHITESPACE","\n                ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getCustomerById",217],"(",["T_VARIABLE","$customer",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getId",217],"(",")",")",["T_WHITESPACE","\n            ",217],")",["T_OBJECT_OPERATOR","->",218],["T_STRING","setShippingAddress",218],"(",["T_WHITESPACE","\n                ",218],["T_VARIABLE","$quoteShippingAddress",219],["T_WHITESPACE","\n            ",219],")",["T_OBJECT_OPERATOR","->",220],["T_STRING","setBillingAddress",220],"(",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$quoteShippingAddress",221],["T_WHITESPACE","\n            ",221],")",["T_OBJECT_OPERATOR","->",222],["T_STRING","setCheckoutMethod",222],"(",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$customer",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getMode",223],"(",")",["T_WHITESPACE","\n            ",223],")",["T_OBJECT_OPERATOR","->",224],["T_STRING","setPasswordHash",224],"(",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$customer",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","encryptPassword",225],"(",["T_VARIABLE","$customer",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getPassword",225],"(",")",")",["T_WHITESPACE","\n            ",225],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","addProduct",226],"(",["T_WHITESPACE","\n                ",226],["T_VARIABLE","$product",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","load",227],"(",["T_VARIABLE","$product",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getId",227],"(",")",")",",",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$quantity",228],["T_WHITESPACE","\n            ",228],")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$address",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$quote",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getShippingAddress",230],"(",")",";",["T_WHITESPACE","\n        ",230],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\ShippingAssignment $shippingAssignment *\/",231],["T_WHITESPACE","\n        ",231],["T_VARIABLE","$shippingAssignment",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","objectManager",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","create",232],"(",["T_NS_SEPARATOR","\\",232],["T_STRING","Magento",232],["T_NS_SEPARATOR","\\",232],["T_STRING","Quote",232],["T_NS_SEPARATOR","\\",232],["T_STRING","Model",232],["T_NS_SEPARATOR","\\",232],["T_STRING","ShippingAssignment",232],["T_DOUBLE_COLON","::",232],["T_CLASS","class",232],")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$shipping",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","objectManager",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","create",233],"(",["T_NS_SEPARATOR","\\",233],["T_STRING","Magento",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Quote",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Model",233],["T_NS_SEPARATOR","\\",233],["T_STRING","Shipping",233],["T_DOUBLE_COLON","::",233],["T_CLASS","class",233],")",";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$shipping",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","setAddress",234],"(",["T_VARIABLE","$address",234],")",";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$shippingAssignment",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","setShipping",235],"(",["T_VARIABLE","$shipping",235],")",";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$shippingAssignment",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","setItems",236],"(",["T_VARIABLE","$quote",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getAllItems",236],"(",")",")",";",["T_WHITESPACE","\n        ",236],["T_DOC_COMMENT","\/** @var  \\Magento\\Quote\\Model\\Quote\\Address\\Total $total *\/",237],["T_WHITESPACE","\n        ",237],["T_VARIABLE","$total",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","objectManager",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","create",238],"(",["T_NS_SEPARATOR","\\",238],["T_STRING","Magento",238],["T_NS_SEPARATOR","\\",238],["T_STRING","Quote",238],["T_NS_SEPARATOR","\\",238],["T_STRING","Model",238],["T_NS_SEPARATOR","\\",238],["T_STRING","Quote",238],["T_NS_SEPARATOR","\\",238],["T_STRING","Address",238],["T_NS_SEPARATOR","\\",238],["T_STRING","Total",238],["T_DOUBLE_COLON","::",238],["T_CLASS","class",238],")",";",["T_WHITESPACE","\n        ",238],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address\\Total\\Subtotal $addressSubtotalCollector *\/",239],["T_WHITESPACE","\n        ",239],["T_VARIABLE","$addressSubtotalCollector",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","objectManager",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","create",240],"(",["T_WHITESPACE","\n            ",240],["T_NS_SEPARATOR","\\",241],["T_STRING","Magento",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Quote",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Model",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Quote",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Address",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Total",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Subtotal",241],["T_DOUBLE_COLON","::",241],["T_CLASS","class",241],["T_WHITESPACE","\n        ",241],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$addressSubtotalCollector",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","collect",243],"(",["T_VARIABLE","$quote",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$shippingAssignment",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$total",243],")",";",["T_WHITESPACE","\n\n        ",243],["T_DOC_COMMENT","\/** @var \\Magento\\Tax\\Model\\Sales\\Total\\Quote\\Subtotal $subtotalCollector *\/",245],["T_WHITESPACE","\n        ",245],["T_VARIABLE","$subtotalCollector",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","objectManager",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","create",246],"(",["T_NS_SEPARATOR","\\",246],["T_STRING","Magento",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Tax",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Model",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Sales",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Total",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Quote",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Subtotal",246],["T_DOUBLE_COLON","::",246],["T_CLASS","class",246],")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$subtotalCollector",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","collect",247],"(",["T_VARIABLE","$quote",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$shippingAssignment",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$total",247],")",";",["T_WHITESPACE","\n\n        ",247],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertEquals",249],"(",["T_VARIABLE","$expected",249],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",249],"]",",",["T_WHITESPACE"," ",249],["T_VARIABLE","$total",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getSubtotal",249],"(",")",")",";",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertEquals",250],"(",["T_VARIABLE","$expected",250],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",250],"]",["T_WHITESPACE"," ",250],"+",["T_WHITESPACE"," ",250],["T_VARIABLE","$expected",250],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",250],"]",",",["T_WHITESPACE"," ",250],["T_VARIABLE","$total",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getSubtotalInclTax",250],"(",")",")",";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","assertEquals",251],"(",["T_VARIABLE","$expected",251],"[",["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",251],"]",",",["T_WHITESPACE"," ",251],["T_VARIABLE","$total",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getDiscountAmount",251],"(",")",")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$items",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$address",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getAllItems",252],"(",")",";",["T_WHITESPACE","\n        ",252],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote\\Address\\Item $item *\/",253],["T_WHITESPACE","\n        ",253],["T_VARIABLE","$item",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$items",254],"[",["T_LNUMBER","0",254],"]",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertEquals",255],"(",["T_VARIABLE","$expected",255],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",255],"]","[",["T_LNUMBER","0",255],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",255],"]",",",["T_WHITESPACE"," ",255],["T_VARIABLE","$item",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getPrice",255],"(",")",")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","assertEquals",256],"(",["T_VARIABLE","$expected",256],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",256],"]","[",["T_LNUMBER","0",256],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price_incl_tax'",256],"]",",",["T_WHITESPACE"," ",256],["T_VARIABLE","$item",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getPriceInclTax",256],"(",")",")",";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","assertEquals",257],"(",["T_VARIABLE","$expected",257],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",257],"]","[",["T_LNUMBER","0",257],"]","[",["T_CONSTANT_ENCAPSED_STRING","'row_total'",257],"]",",",["T_WHITESPACE"," ",257],["T_VARIABLE","$item",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getRowTotal",257],"(",")",")",";",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","assertEquals",258],"(",["T_VARIABLE","$expected",258],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",258],"]","[",["T_LNUMBER","0",258],"]","[",["T_CONSTANT_ENCAPSED_STRING","'row_total_incl_tax'",258],"]",",",["T_WHITESPACE"," ",258],["T_VARIABLE","$item",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getRowTotalInclTax",258],"(",")",")",";",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n\n    ",259],["T_DOC_COMMENT","\/**\n     * Get customer tax class id\n     *\n     * @return int\n     *\/",261],["T_WHITESPACE","\n    ",265],["T_PROTECTED","protected",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","getCustomerTaxClassId",266],"(",")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$customerTaxClass",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","objectManager",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","create",268],"(",["T_NS_SEPARATOR","\\",268],["T_STRING","Magento",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Tax",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Model",268],["T_NS_SEPARATOR","\\",268],["T_STRING","ClassModel",268],["T_DOUBLE_COLON","::",268],["T_CLASS","class",268],")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$fixtureCustomerTaxClass",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'CustomerTaxClass2'",269],";",["T_WHITESPACE","\n        ",269],["T_DOC_COMMENT","\/** @var \\Magento\\Tax\\Model\\ClassModel $customerTaxClass *\/",270],["T_WHITESPACE","\n        ",270],["T_VARIABLE","$customerTaxClass",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","load",271],"(",["T_VARIABLE","$fixtureCustomerTaxClass",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'class_name'",271],")",";",["T_WHITESPACE","\n        ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$customerTaxClass",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getId",272],"(",")",";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Get product tax class id\n     *\n     * @return int\n     *\/",275],["T_WHITESPACE","\n    ",279],["T_PROTECTED","protected",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","getProductTaxClassId",280],"(",")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_DOC_COMMENT","\/** @var \\Magento\\Tax\\Model\\ClassModel $productTaxClass *\/",282],["T_WHITESPACE","\n        ",282],["T_VARIABLE","$productTaxClass",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","objectManager",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","create",283],"(",["T_NS_SEPARATOR","\\",283],["T_STRING","Magento",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Tax",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Model",283],["T_NS_SEPARATOR","\\",283],["T_STRING","ClassModel",283],["T_DOUBLE_COLON","::",283],["T_CLASS","class",283],")",";",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$fixtureProductTaxClass",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'ProductTaxClass1'",284],";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$productTaxClass",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","load",285],"(",["T_VARIABLE","$fixtureProductTaxClass",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'class_name'",285],")",";",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$productTaxClass",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getId",286],"(",")",";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * @param $fixtureCustomerId\n     * @return \\Magento\\Customer\\Api\\Data\\AddressInterface\n     *\/",289],["T_WHITESPACE","\n    ",292],["T_PROTECTED","protected",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","getShippingAddressDataObject",293],"(",["T_VARIABLE","$fixtureCustomerId",293],")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$fixtureCustomerAddressId",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_LNUMBER","1",295],";",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$customerAddress",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","objectManager",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","create",296],"(",["T_WHITESPACE","\n            ",296],["T_NS_SEPARATOR","\\",297],["T_STRING","Magento",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Customer",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Model",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Address",297],["T_DOUBLE_COLON","::",297],["T_CLASS","class",297],["T_WHITESPACE","\n        ",297],")",["T_OBJECT_OPERATOR","->",298],["T_STRING","load",298],"(",["T_VARIABLE","$fixtureCustomerId",298],")",";",["T_WHITESPACE","\n        ",298],["T_DOC_COMMENT","\/** Set data which corresponds tax class fixture *\/",299],["T_WHITESPACE","\n        ",299],["T_VARIABLE","$customerAddress",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","setCountryId",300],"(",["T_CONSTANT_ENCAPSED_STRING","'US'",300],")",["T_OBJECT_OPERATOR","->",300],["T_STRING","setRegionId",300],"(",["T_LNUMBER","12",300],")",["T_OBJECT_OPERATOR","->",300],["T_STRING","save",300],"(",")",";",["T_WHITESPACE","\n        ",300],["T_DOC_COMMENT","\/**\n         * @var $addressRepository \\Magento\\Customer\\Api\\AddressRepositoryInterface\n         *\/",301],["T_WHITESPACE","\n        ",303],["T_VARIABLE","$addressRepository",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","objectManager",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","get",304],"(",["T_NS_SEPARATOR","\\",304],["T_STRING","Magento",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Customer",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Api",304],["T_NS_SEPARATOR","\\",304],["T_STRING","AddressRepositoryInterface",304],["T_DOUBLE_COLON","::",304],["T_CLASS","class",304],")",";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$quoteShippingAddressDataObject",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$addressRepository",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getById",305],"(",["T_VARIABLE","$fixtureCustomerAddressId",305],")",";",["T_WHITESPACE","\n        ",305],["T_RETURN","return",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$quoteShippingAddressDataObject",306],";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n",307],"}",["T_WHITESPACE","\n",308]]
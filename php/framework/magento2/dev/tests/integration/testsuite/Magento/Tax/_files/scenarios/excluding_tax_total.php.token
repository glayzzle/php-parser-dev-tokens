[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tax",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Calculation",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tax",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Config",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Tax",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Total",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SetupUtil",9],";",["T_WHITESPACE","\n\n",9],["T_VARIABLE","$taxCalculationData",11],"[",["T_CONSTANT_ENCAPSED_STRING","'excluding_tax_total'",11],"]",["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],"[",["T_WHITESPACE","\n    ",11],["T_CONSTANT_ENCAPSED_STRING","'config_data'",12],["T_WHITESPACE"," ",12],["T_DOUBLE_ARROW","=>",12],["T_WHITESPACE"," ",12],"[",["T_WHITESPACE","\n        ",12],["T_STRING","SetupUtil",13],["T_DOUBLE_COLON","::",13],["T_STRING","CONFIG_OVERRIDES",13],["T_WHITESPACE"," ",13],["T_DOUBLE_ARROW","=>",13],["T_WHITESPACE"," ",13],"[",["T_WHITESPACE","\n            ",13],["T_STRING","Config",14],["T_DOUBLE_COLON","::",14],["T_STRING","CONFIG_XML_PATH_APPLY_AFTER_DISCOUNT",14],["T_WHITESPACE"," ",14],["T_DOUBLE_ARROW","=>",14],["T_WHITESPACE"," ",14],["T_LNUMBER","1",14],",",["T_WHITESPACE","\n            ",14],["T_STRING","Config",15],["T_DOUBLE_COLON","::",15],["T_STRING","XML_PATH_ALGORITHM",15],["T_WHITESPACE"," ",15],["T_DOUBLE_ARROW","=>",15],["T_WHITESPACE"," ",15],["T_STRING","Calculation",15],["T_DOUBLE_COLON","::",15],["T_STRING","CALC_TOTAL_BASE",15],",",["T_WHITESPACE","\n        ",15],"]",",",["T_WHITESPACE","\n        ",16],["T_STRING","SetupUtil",17],["T_DOUBLE_COLON","::",17],["T_STRING","TAX_RATE_OVERRIDES",17],["T_WHITESPACE"," ",17],["T_DOUBLE_ARROW","=>",17],["T_WHITESPACE"," ",17],"[",["T_WHITESPACE","\n            ",17],["T_STRING","SetupUtil",18],["T_DOUBLE_COLON","::",18],["T_STRING","TAX_RATE_TX",18],["T_WHITESPACE"," ",18],["T_DOUBLE_ARROW","=>",18],["T_WHITESPACE"," ",18],["T_DNUMBER","8.25",18],",",["T_WHITESPACE","\n        ",18],"]",",",["T_WHITESPACE","\n        ",19],["T_STRING","SetupUtil",20],["T_DOUBLE_COLON","::",20],["T_STRING","TAX_RULE_OVERRIDES",20],["T_WHITESPACE"," ",20],["T_DOUBLE_ARROW","=>",20],["T_WHITESPACE"," ",20],"[",["T_WHITESPACE","\n        ",20],"]",",",["T_WHITESPACE","\n    ",21],"]",",",["T_WHITESPACE","\n    ",22],["T_CONSTANT_ENCAPSED_STRING","'quote_data'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],"[",["T_WHITESPACE","\n        ",23],["T_CONSTANT_ENCAPSED_STRING","'billing_address'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],"[",["T_WHITESPACE","\n            ",24],["T_CONSTANT_ENCAPSED_STRING","'region_id'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_STRING","SetupUtil",25],["T_DOUBLE_COLON","::",25],["T_STRING","REGION_TX",25],",",["T_WHITESPACE","\n        ",25],"]",",",["T_WHITESPACE","\n        ",26],["T_CONSTANT_ENCAPSED_STRING","'shipping_address'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],"[",["T_WHITESPACE","\n            ",27],["T_CONSTANT_ENCAPSED_STRING","'region_id'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_STRING","SetupUtil",28],["T_DOUBLE_COLON","::",28],["T_STRING","REGION_TX",28],",",["T_WHITESPACE","\n        ",28],"]",",",["T_WHITESPACE","\n        ",29],["T_CONSTANT_ENCAPSED_STRING","'items'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],"[",["T_WHITESPACE","\n            ",30],"[",["T_WHITESPACE","\n                ",31],["T_CONSTANT_ENCAPSED_STRING","'sku'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'simple1'",32],",",["T_WHITESPACE","\n                ",32],["T_CONSTANT_ENCAPSED_STRING","'price'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_LNUMBER","10",33],",",["T_WHITESPACE","\n                ",33],["T_CONSTANT_ENCAPSED_STRING","'qty'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_LNUMBER","2",34],",",["T_WHITESPACE","\n            ",34],"]",",",["T_WHITESPACE","\n        ",35],"]",",",["T_WHITESPACE","\n    ",36],"]",",",["T_WHITESPACE","\n    ",37],["T_CONSTANT_ENCAPSED_STRING","'expected_results'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],"[",["T_WHITESPACE","\n        ",38],["T_CONSTANT_ENCAPSED_STRING","'address_data'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],"[",["T_WHITESPACE","\n            ",39],["T_CONSTANT_ENCAPSED_STRING","'subtotal'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_LNUMBER","20",40],",",["T_WHITESPACE","\n            ",40],["T_CONSTANT_ENCAPSED_STRING","'base_subtotal'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_LNUMBER","20",41],",",["T_WHITESPACE","\n            ",41],["T_CONSTANT_ENCAPSED_STRING","'subtotal_incl_tax'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_DNUMBER","21.65",42],",",["T_WHITESPACE","\n            ",42],["T_CONSTANT_ENCAPSED_STRING","'base_subtotal_incl_tax'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_DNUMBER","21.65",43],",",["T_WHITESPACE","\n            ",43],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_DNUMBER","1.65",44],",",["T_WHITESPACE","\n            ",44],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_DNUMBER","1.65",45],",",["T_WHITESPACE","\n            ",45],["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_LNUMBER","0",46],",",["T_WHITESPACE","\n            ",46],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_amount'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],",",["T_WHITESPACE","\n            ",47],["T_CONSTANT_ENCAPSED_STRING","'shipping_incl_tax'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_LNUMBER","0",48],",",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_incl_tax'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_LNUMBER","0",49],",",["T_WHITESPACE","\n            ",49],["T_CONSTANT_ENCAPSED_STRING","'shipping_taxable'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],",",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_taxable'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_LNUMBER","0",51],",",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'shipping_tax_amount'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_LNUMBER","0",52],",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_tax_amount'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_LNUMBER","0",53],",",["T_WHITESPACE","\n            ",53],["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_LNUMBER","0",54],",",["T_WHITESPACE","\n            ",54],["T_CONSTANT_ENCAPSED_STRING","'base_discount_amount'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_LNUMBER","0",55],",",["T_WHITESPACE","\n            ",55],["T_CONSTANT_ENCAPSED_STRING","'discount_tax_compensation_amount'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_LNUMBER","0",56],",",["T_WHITESPACE","\n            ",56],["T_CONSTANT_ENCAPSED_STRING","'base_discount_tax_compensation_amount'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_LNUMBER","0",57],",",["T_WHITESPACE","\n            ",57],["T_CONSTANT_ENCAPSED_STRING","'shipping_discount_tax_compensation_amount'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_LNUMBER","0",58],",",["T_WHITESPACE","\n            ",58],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_discount_tax_compensation_amount'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_LNUMBER","0",59],",",["T_WHITESPACE","\n            ",59],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_DNUMBER","21.65",60],",",["T_WHITESPACE","\n            ",60],["T_CONSTANT_ENCAPSED_STRING","'base_grand_total'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_DNUMBER","21.65",61],",",["T_WHITESPACE","\n        ",61],"]",",",["T_WHITESPACE","\n        ",62],["T_CONSTANT_ENCAPSED_STRING","'items_data'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],"[",["T_WHITESPACE","\n            ",63],["T_CONSTANT_ENCAPSED_STRING","'simple1'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],"[",["T_WHITESPACE","\n                ",64],["T_CONSTANT_ENCAPSED_STRING","'row_total'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_LNUMBER","20",65],",",["T_WHITESPACE","\n                ",65],["T_CONSTANT_ENCAPSED_STRING","'base_row_total'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_LNUMBER","20",66],",",["T_WHITESPACE","\n                ",66],["T_CONSTANT_ENCAPSED_STRING","'tax_percent'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_DNUMBER","8.25",67],",",["T_WHITESPACE","\n                ",67],["T_CONSTANT_ENCAPSED_STRING","'price'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_LNUMBER","10",68],",",["T_WHITESPACE","\n                ",68],["T_CONSTANT_ENCAPSED_STRING","'base_price'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_LNUMBER","10",69],",",["T_WHITESPACE","\n                ",69],["T_CONSTANT_ENCAPSED_STRING","'price_incl_tax'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_DNUMBER","10.83",70],",",["T_WHITESPACE","\n                ",70],["T_CONSTANT_ENCAPSED_STRING","'base_price_incl_tax'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_DNUMBER","10.83",71],",",["T_WHITESPACE","\n                ",71],["T_CONSTANT_ENCAPSED_STRING","'row_total_incl_tax'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_DNUMBER","21.65",72],",",["T_WHITESPACE","\n                ",72],["T_CONSTANT_ENCAPSED_STRING","'base_row_total_incl_tax'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_DNUMBER","21.65",73],",",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_DNUMBER","1.65",74],",",["T_WHITESPACE","\n                ",74],["T_CONSTANT_ENCAPSED_STRING","'base_tax_amount'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_DNUMBER","1.65",75],",",["T_WHITESPACE","\n                ",75],["T_CONSTANT_ENCAPSED_STRING","'discount_amount'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_LNUMBER","0",76],",",["T_WHITESPACE","\n                ",76],["T_CONSTANT_ENCAPSED_STRING","'base_discount_amount'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_LNUMBER","0",77],",",["T_WHITESPACE","\n                ",77],["T_CONSTANT_ENCAPSED_STRING","'discount_percent'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],",",["T_WHITESPACE","\n                ",78],["T_CONSTANT_ENCAPSED_STRING","'discount_tax_compensation_amount'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_LNUMBER","0",79],",",["T_WHITESPACE","\n                ",79],["T_CONSTANT_ENCAPSED_STRING","'base_discount_tax_compensation_amount'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_LNUMBER","0",80],",",["T_WHITESPACE","\n            ",80],"]",",",["T_WHITESPACE","\n        ",81],"]",",",["T_WHITESPACE","\n    ",82],"]",",",["T_WHITESPACE","\n",83],"]",";",["T_WHITESPACE","\n",84]]
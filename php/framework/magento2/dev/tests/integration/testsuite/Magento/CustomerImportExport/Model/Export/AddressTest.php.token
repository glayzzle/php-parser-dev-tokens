[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CustomerImportExport",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Export",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CustomerImportExport",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Import",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Address",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","ImportAddress",11],";",["T_WHITESPACE","\n",11],["T_DOC_COMMENT","\/**\n * Test for customer address export model\n *\n * @magentoDataFixture Magento\/Customer\/_files\/import_export\/customer_with_addresses.php\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","AddressTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","PHPUnit_Framework_TestCase",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var Address\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_model",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * List of existing websites\n     *\n     * @var array\n     *\/",24],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_websites",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],"[","]",";",["T_WHITESPACE","\n\n    ",29],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","setUp",31],"(",")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_STRING","parent",33],["T_DOUBLE_COLON","::",33],["T_STRING","setUp",33],"(",")",";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","_model",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","TestFramework",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Helper",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Bootstrap",34],["T_DOUBLE_COLON","::",34],["T_STRING","getObjectManager",34],"(",")",["T_OBJECT_OPERATOR","->",34],["T_STRING","create",34],"(",["T_WHITESPACE","\n            ",34],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","CustomerImportExport",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Model",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Export",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Address",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],["T_WHITESPACE","\n        ",35],")",";",["T_WHITESPACE","\n\n        ",36],["T_VARIABLE","$websites",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","TestFramework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Helper",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Bootstrap",38],["T_DOUBLE_COLON","::",38],["T_STRING","getObjectManager",38],"(",")",["T_OBJECT_OPERATOR","->",38],["T_STRING","get",38],"(",["T_WHITESPACE","\n            ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Store",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Model",39],["T_NS_SEPARATOR","\\",39],["T_STRING","StoreManagerInterface",39],["T_DOUBLE_COLON","::",39],["T_CLASS","class",39],["T_WHITESPACE","\n        ",39],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","getWebsites",40],"(",["T_WHITESPACE","\n            ",40],["T_STRING","true",41],["T_WHITESPACE","\n        ",41],")",";",["T_WHITESPACE","\n        ",42],["T_DOC_COMMENT","\/** @var $website \\Magento\\Store\\Model\\Website *\/",43],["T_WHITESPACE","\n        ",43],["T_FOREACH","foreach",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$websites",44],["T_WHITESPACE"," ",44],["T_AS","as",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$website",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_websites",45],"[",["T_VARIABLE","$website",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getId",45],"(",")","]",["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$website",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getCode",45],"(",")",";",["T_WHITESPACE","\n        ",45],"}",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Test export method\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","testExport",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$websiteCode",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","Address",54],["T_DOUBLE_COLON","::",54],["T_STRING","COLUMN_WEBSITE",54],";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$emailCode",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","Address",55],["T_DOUBLE_COLON","::",55],["T_STRING","COLUMN_EMAIL",55],";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$entityIdCode",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Address",56],["T_DOUBLE_COLON","::",56],["T_STRING","COLUMN_ADDRESS_ID",56],";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$expectedAttributes",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[","]",";",["T_WHITESPACE","\n        ",58],["T_DOC_COMMENT","\/** @var $collection \\Magento\\Customer\\Model\\ResourceModel\\Address\\Attribute\\Collection *\/",59],["T_WHITESPACE","\n        ",59],["T_VARIABLE","$collection",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","TestFramework",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Helper",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Bootstrap",60],["T_DOUBLE_COLON","::",60],["T_STRING","getObjectManager",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","create",60],"(",["T_WHITESPACE","\n            ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Customer",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Model",61],["T_NS_SEPARATOR","\\",61],["T_STRING","ResourceModel",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Address",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Attribute",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Collection",61],["T_DOUBLE_COLON","::",61],["T_CLASS","class",61],["T_WHITESPACE","\n        ",61],")",";",["T_WHITESPACE","\n        ",62],["T_DOC_COMMENT","\/** @var $attribute \\Magento\\Customer\\Model\\Attribute *\/",63],["T_WHITESPACE","\n        ",63],["T_FOREACH","foreach",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$collection",64],["T_WHITESPACE"," ",64],["T_AS","as",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$attribute",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$expectedAttributes",65],"[","]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$attribute",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getAttributeCode",65],"(",")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n\n        ",66],["T_COMMENT","\/\/ Get customer default addresses column name to customer attribute mapping array.\n",68],["T_WHITESPACE","        ",69],["T_VARIABLE","$defaultAddressMap",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","ImportAddress",69],["T_DOUBLE_COLON","::",69],["T_STRING","getDefaultAddressAttributeMapping",69],"(",")",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_model",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setWriter",71],"(",["T_WHITESPACE","\n            ",71],["T_NS_SEPARATOR","\\",72],["T_STRING","Magento",72],["T_NS_SEPARATOR","\\",72],["T_STRING","TestFramework",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Helper",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Bootstrap",72],["T_DOUBLE_COLON","::",72],["T_STRING","getObjectManager",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","create",72],"(",["T_WHITESPACE","\n                ",72],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","ImportExport",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Export",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Adapter",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Csv",73],["T_DOUBLE_COLON","::",73],["T_CLASS","class",73],["T_WHITESPACE","\n            ",73],")",["T_WHITESPACE","\n        ",74],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_model",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setParameters",76],"(","[","]",")",";",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$data",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_csvToArray",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_model",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","export",78],"(",")",",",["T_WHITESPACE"," ",78],["T_VARIABLE","$entityIdCode",78],")",";",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertEquals",80],"(",["T_WHITESPACE","\n            ",80],["T_STRING","count",81],"(",["T_VARIABLE","$expectedAttributes",81],")",",",["T_WHITESPACE","\n            ",81],["T_STRING","count",82],"(",["T_STRING","array_intersect",82],"(",["T_VARIABLE","$expectedAttributes",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$data",82],"[",["T_CONSTANT_ENCAPSED_STRING","'header'",82],"]",")",")",",",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'Expected attribute codes were not exported'",83],["T_WHITESPACE","\n        ",83],")",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertNotEmpty",86],"(",["T_VARIABLE","$data",86],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",86],"]",",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'No data was exported'",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_DOC_COMMENT","\/** @var $objectManager \\Magento\\TestFramework\\ObjectManager *\/",88],["T_WHITESPACE","\n        ",88],["T_VARIABLE","$objectManager",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","TestFramework",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Helper",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Bootstrap",89],["T_DOUBLE_COLON","::",89],["T_STRING","getObjectManager",89],"(",")",";",["T_WHITESPACE","\n\n        ",89],["T_COMMENT","\/\/ Get addresses\n",91],["T_WHITESPACE","        ",92],["T_DOC_COMMENT","\/** @var $customers \\Magento\\Customer\\Model\\Customer[] *\/",92],["T_WHITESPACE","\n        ",92],["T_VARIABLE","$customers",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$objectManager",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","get",93],"(",["T_WHITESPACE","\n            ",93],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Framework",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Registry",94],["T_DOUBLE_COLON","::",94],["T_CLASS","class",94],["T_WHITESPACE","\n        ",94],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","registry",95],"(",["T_WHITESPACE","\n            ",95],["T_CONSTANT_ENCAPSED_STRING","'_fixture\/Magento_ImportExport_Customers_Array'",96],["T_WHITESPACE","\n        ",96],")",";",["T_WHITESPACE","\n        ",97],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$customers",98],["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$customer",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_DOC_COMMENT","\/** @var $address \\Magento\\Customer\\Model\\Address *\/",99],["T_WHITESPACE","\n            ",99],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$customer",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getAddresses",100],"(",")",["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$address",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_COMMENT","\/\/ Check unique key\n",101],["T_WHITESPACE","                ",102],["T_VARIABLE","$data",102],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",102],"]","[",["T_VARIABLE","$address",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getId",102],"(",")","]","[",["T_VARIABLE","$websiteCode",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_websites",102],"[",["T_VARIABLE","$customer",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getWebsiteId",102],"(",")","]",";",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$data",103],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",103],"]","[",["T_VARIABLE","$address",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getId",103],"(",")","]","[",["T_VARIABLE","$emailCode",103],"]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$customer",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getEmail",103],"(",")",";",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$data",104],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",104],"]","[",["T_VARIABLE","$address",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getId",104],"(",")","]","[",["T_VARIABLE","$entityIdCode",104],"]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$address",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getId",104],"(",")",";",["T_WHITESPACE","\n\n                ",104],["T_COMMENT","\/\/ Check by expected attributes\n",106],["T_WHITESPACE","                ",107],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$expectedAttributes",107],["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$code",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                    ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_STRING","in_array",108],"(",["T_VARIABLE","$code",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_model",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getDisabledAttributes",108],"(",")",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertEquals",109],"(",["T_WHITESPACE","\n                            ",109],["T_VARIABLE","$address",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getData",110],"(",["T_VARIABLE","$code",110],")",",",["T_WHITESPACE","\n                            ",110],["T_VARIABLE","$data",111],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",111],"]","[",["T_VARIABLE","$address",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getId",111],"(",")","]","[",["T_VARIABLE","$code",111],"]",",",["T_WHITESPACE","\n                            ",111],["T_CONSTANT_ENCAPSED_STRING","'Attribute \"'",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_VARIABLE","$code",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'\" is not equal'",112],["T_WHITESPACE","\n                        ",112],")",";",["T_WHITESPACE","\n                    ",113],"}",["T_WHITESPACE","\n                ",114],"}",["T_WHITESPACE","\n\n                ",115],["T_COMMENT","\/\/ Check customer default addresses column name to customer attribute mapping array\n",117],["T_WHITESPACE","                ",118],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$defaultAddressMap",118],["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$exportCode",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$code",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertEquals",119],"(",["T_WHITESPACE","\n                        ",119],["T_VARIABLE","$address",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getData",120],"(",["T_VARIABLE","$code",120],")",",",["T_WHITESPACE","\n                        ",120],["T_INT_CAST","(int)",121],["T_VARIABLE","$data",121],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",121],"]","[",["T_VARIABLE","$address",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getId",121],"(",")","]","[",["T_VARIABLE","$exportCode",121],"]",",",["T_WHITESPACE","\n                        ",121],["T_CONSTANT_ENCAPSED_STRING","'Attribute \"'",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$code",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'\" is not equal'",122],["T_WHITESPACE","\n                    ",122],")",";",["T_WHITESPACE","\n                ",123],"}",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Get possible gender values for filter\n     *\n     * @return array\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","getGenderFilterValueDataProvider",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'male'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'$genderFilterValue'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_LNUMBER","1",136],"]",",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'female'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'$genderFilterValue'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_LNUMBER","2",136],"]","]",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Test export method if filter was set\n     *\n     * @dataProvider getGenderFilterValueDataProvider\n     *\n     * @param int $genderFilterValue\n     *\/",139],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","testExportWithFilter",146],"(",["T_VARIABLE","$genderFilterValue",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$entityIdCode",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","Address",148],["T_DOUBLE_COLON","::",148],["T_STRING","COLUMN_ADDRESS_ID",148],";",["T_WHITESPACE","\n\n        ",148],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_model",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","setWriter",150],"(",["T_WHITESPACE","\n            ",150],["T_NS_SEPARATOR","\\",151],["T_STRING","Magento",151],["T_NS_SEPARATOR","\\",151],["T_STRING","TestFramework",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Helper",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Bootstrap",151],["T_DOUBLE_COLON","::",151],["T_STRING","getObjectManager",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","create",151],"(",["T_WHITESPACE","\n                ",151],["T_NS_SEPARATOR","\\",152],["T_STRING","Magento",152],["T_NS_SEPARATOR","\\",152],["T_STRING","ImportExport",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Model",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Export",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Adapter",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Csv",152],["T_DOUBLE_COLON","::",152],["T_CLASS","class",152],["T_WHITESPACE","\n            ",152],")",["T_WHITESPACE","\n        ",153],")",";",["T_WHITESPACE","\n\n        ",154],["T_VARIABLE","$filterData",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],"[",["T_CONSTANT_ENCAPSED_STRING","'export_filter'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],"[",["T_CONSTANT_ENCAPSED_STRING","'gender'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$genderFilterValue",156],"]","]",";",["T_WHITESPACE","\n\n        ",156],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_model",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setParameters",158],"(",["T_VARIABLE","$filterData",158],")",";",["T_WHITESPACE","\n\n        ",158],["T_DOC_COMMENT","\/** @var $objectManager \\Magento\\TestFramework\\ObjectManager *\/",160],["T_WHITESPACE","\n        ",160],["T_VARIABLE","$objectManager",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Magento",161],["T_NS_SEPARATOR","\\",161],["T_STRING","TestFramework",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Helper",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Bootstrap",161],["T_DOUBLE_COLON","::",161],["T_STRING","getObjectManager",161],"(",")",";",["T_WHITESPACE","\n\n        ",161],["T_COMMENT","\/\/ Get expected address count\n",163],["T_WHITESPACE","        ",164],["T_DOC_COMMENT","\/** @var $customers \\Magento\\Customer\\Model\\Customer[] *\/",164],["T_WHITESPACE","\n        ",164],["T_VARIABLE","$customers",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$objectManager",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","get",165],"(",["T_WHITESPACE","\n            ",165],["T_NS_SEPARATOR","\\",166],["T_STRING","Magento",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Framework",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Registry",166],["T_DOUBLE_COLON","::",166],["T_CLASS","class",166],["T_WHITESPACE","\n        ",166],")",["T_OBJECT_OPERATOR","->",167],["T_STRING","registry",167],"(",["T_WHITESPACE","\n            ",167],["T_CONSTANT_ENCAPSED_STRING","'_fixture\/Magento_ImportExport_Customers_Array'",168],["T_WHITESPACE","\n        ",168],")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$expectedCount",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_LNUMBER","0",170],";",["T_WHITESPACE","\n        ",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$customers",171],["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$customer",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$customer",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getGender",172],"(",")",["T_WHITESPACE"," ",172],["T_IS_EQUAL","==",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$genderFilterValue",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$expectedCount",173],["T_WHITESPACE"," ",173],["T_PLUS_EQUAL","+=",173],["T_WHITESPACE"," ",173],["T_STRING","count",173],"(",["T_VARIABLE","$customer",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getAddresses",173],"(",")",")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$data",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_csvToArray",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_model",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","export",177],"(",")",",",["T_WHITESPACE"," ",177],["T_VARIABLE","$entityIdCode",177],")",";",["T_WHITESPACE","\n\n        ",177],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","assertCount",179],"(",["T_VARIABLE","$expectedCount",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$data",179],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",179],"]",")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Test entity type code value\n     *\/",182],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","testGetEntityTypeCode",185],"(",")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","assertEquals",187],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address'",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_model",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getEntityTypeCode",187],"(",")",")",";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Test type of attribute collection\n     *\/",190],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","testGetAttributeCollection",193],"(",")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertInstanceOf",195],"(",["T_WHITESPACE","\n            ",195],["T_NS_SEPARATOR","\\",196],["T_STRING","Magento",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Customer",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Model",196],["T_NS_SEPARATOR","\\",196],["T_STRING","ResourceModel",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Address",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Attribute",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Collection",196],["T_DOUBLE_COLON","::",196],["T_CLASS","class",196],",",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_model",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getAttributeCollection",197],"(",")",["T_WHITESPACE","\n        ",197],")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Export CSV string to array\n     *\n     * @param string $content\n     * @param mixed $entityId\n     * @return array\n     *\/",201],["T_WHITESPACE","\n    ",207],["T_PROTECTED","protected",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","_csvToArray",208],"(",["T_VARIABLE","$content",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$entityId",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","null",208],")",["T_WHITESPACE","\n    ",208],"{",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$data",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],"[",["T_CONSTANT_ENCAPSED_STRING","'header'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],"[","]",",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'data'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],"[","]","]",";",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$lines",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","str_getcsv",212],"(",["T_VARIABLE","$content",212],",",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",212],")",";",["T_WHITESPACE","\n        ",212],["T_FOREACH","foreach",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$lines",213],["T_WHITESPACE"," ",213],["T_AS","as",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$index",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$line",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$index",214],["T_WHITESPACE"," ",214],["T_IS_EQUAL","==",214],["T_WHITESPACE"," ",214],["T_LNUMBER","0",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n                ",214],["T_VARIABLE","$data",215],"[",["T_CONSTANT_ENCAPSED_STRING","'header'",215],"]",["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","str_getcsv",215],"(",["T_VARIABLE","$line",215],")",";",["T_WHITESPACE","\n            ",215],"}",["T_WHITESPACE"," ",216],["T_ELSE","else",216],["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                ",216],["T_VARIABLE","$row",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","array_combine",217],"(",["T_VARIABLE","$data",217],"[",["T_CONSTANT_ENCAPSED_STRING","'header'",217],"]",",",["T_WHITESPACE"," ",217],["T_STRING","str_getcsv",217],"(",["T_VARIABLE","$line",217],")",")",";",["T_WHITESPACE","\n                ",217],["T_IF","if",218],["T_WHITESPACE"," ",218],"(","!",["T_STRING","is_null",218],"(",["T_VARIABLE","$entityId",218],")",["T_WHITESPACE"," ",218],["T_BOOLEAN_AND","&&",218],["T_WHITESPACE"," ",218],"!",["T_EMPTY","empty",218],"(",["T_VARIABLE","$row",218],"[",["T_VARIABLE","$entityId",218],"]",")",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n                    ",218],["T_VARIABLE","$data",219],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",219],"]","[",["T_VARIABLE","$row",219],"[",["T_VARIABLE","$entityId",219],"]","]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$row",219],";",["T_WHITESPACE","\n                ",219],"}",["T_WHITESPACE"," ",220],["T_ELSE","else",220],["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                    ",220],["T_VARIABLE","$data",221],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",221],"]","[","]",["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$row",221],";",["T_WHITESPACE","\n                ",221],"}",["T_WHITESPACE","\n            ",222],"}",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n\n        ",224],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$data",226],";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Test filename getter. Filename must be set in constructor.\n     *\/",229],["T_WHITESPACE","\n    ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","testGetFileName",232],"(",")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","assertEquals",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_model",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getEntityTypeCode",234],"(",")",",",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_model",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getFileName",234],"(",")",")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n",235],"}",["T_WHITESPACE","\n",236]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Checkout",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Bootstrap",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","SessionTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_NS_SEPARATOR","\\",10],["T_STRING","PHPUnit_Framework_TestCase",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\Session\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$_checkoutSession",15],";",["T_WHITESPACE","\n\n    ",15],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","setUp",17],"(",")",["T_WHITESPACE","\n    ",17],"{",["T_WHITESPACE","\n        ",18],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","_checkoutSession",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","Bootstrap",19],["T_DOUBLE_COLON","::",19],["T_STRING","getObjectManager",19],"(",")",["T_OBJECT_OPERATOR","->",19],["T_STRING","create",19],"(",["T_NS_SEPARATOR","\\",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Checkout",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Session",19],["T_DOUBLE_COLON","::",19],["T_CLASS","class",19],")",";",["T_WHITESPACE","\n        ",19],["T_STRING","parent",20],["T_DOUBLE_COLON","::",20],["T_STRING","setUp",20],"(",")",";",["T_WHITESPACE","\n    ",20],"}",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Test covers case when quote is not yet initialized and customer data is set to checkout session model.\n     *\n     * Expected result - quote object should be loaded and customer data should be set to it.\n     *\n     * @magentoDataFixture Magento\/Sales\/_files\/quote_with_customer.php\n     *\/",23],["T_WHITESPACE","\n    ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","testGetQuoteNotInitializedCustomerSet",30],"(",")",["T_WHITESPACE","\n    ",30],"{",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$objectManager",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","TestFramework",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Helper",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Bootstrap",32],["T_DOUBLE_COLON","::",32],["T_STRING","getObjectManager",32],"(",")",";",["T_WHITESPACE","\n\n        ",32],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Api\\CustomerRepositoryInterface $customerRepository *\/",34],["T_WHITESPACE","\n        ",34],["T_VARIABLE","$customerRepository",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$objectManager",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","create",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Customer",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Api",35],["T_NS_SEPARATOR","\\",35],["T_STRING","CustomerRepositoryInterface",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$customer",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$customerRepository",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getById",36],"(",["T_LNUMBER","1",36],")",";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","_checkoutSession",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","setCustomerData",37],"(",["T_VARIABLE","$customer",37],")",";",["T_WHITESPACE","\n\n        ",37],["T_DOC_COMMENT","\/** Execute SUT *\/",39],["T_WHITESPACE","\n        ",39],["T_VARIABLE","$quote",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","_checkoutSession",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getQuote",40],"(",")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_validateCustomerDataInQuote",41],"(",["T_VARIABLE","$quote",41],")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Test covers case when quote is not yet initialized and customer data is set to customer session model.\n     *\n     * Expected result - quote object should be loaded and customer data should be set to it.\n     *\n     * @magentoDataFixture Magento\/Sales\/_files\/quote_with_customer.php\n     * @magentoAppIsolation enabled\n     *\/",44],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","testGetQuoteNotInitializedCustomerLoggedIn",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$objectManager",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","TestFramework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Helper",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Bootstrap",54],["T_DOUBLE_COLON","::",54],["T_STRING","getObjectManager",54],"(",")",";",["T_WHITESPACE","\n\n        ",54],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Api\\CustomerRepositoryInterface $customerRepository *\/",56],["T_WHITESPACE","\n        ",56],["T_VARIABLE","$customerRepository",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$objectManager",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","create",57],"(",["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Customer",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Api",57],["T_NS_SEPARATOR","\\",57],["T_STRING","CustomerRepositoryInterface",57],["T_DOUBLE_COLON","::",57],["T_CLASS","class",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$customer",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$customerRepository",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getById",58],"(",["T_LNUMBER","1",58],")",";",["T_WHITESPACE","\n        ",58],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Session $customerSession *\/",59],["T_WHITESPACE","\n        ",59],["T_VARIABLE","$customerSession",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","Bootstrap",60],["T_DOUBLE_COLON","::",60],["T_STRING","getObjectManager",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Customer",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Session",60],["T_DOUBLE_COLON","::",60],["T_CLASS","class",60],")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$customerSession",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","setCustomerDataObject",61],"(",["T_VARIABLE","$customer",61],")",";",["T_WHITESPACE","\n\n        ",61],["T_DOC_COMMENT","\/** Execute SUT *\/",63],["T_WHITESPACE","\n        ",63],["T_VARIABLE","$quote",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_checkoutSession",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getQuote",64],"(",")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_validateCustomerDataInQuote",65],"(",["T_VARIABLE","$quote",65],")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Tes merging of customer data into initialized quote object.\n     *\n     * Conditions:\n     * 1. Quote without customer data is set to checkout session\n     * 2. Customer without associated quote is set to checkout session\n     *\n     * Expected result:\n     * Quote which is set to checkout session should contain customer data\n     *\n     * @magentoDataFixture Magento\/Customer\/_files\/customer.php\n     * @magentoAppIsolation enabled\n     *\/",68],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","testLoadCustomerQuoteCustomerWithoutQuote",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$quote",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_checkoutSession",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getQuote",83],"(",")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertEmpty",84],"(",["T_VARIABLE","$quote",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getCustomerId",84],"(",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'Precondition failed: Customer data must not be set to quote'",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEmpty",85],"(",["T_VARIABLE","$quote",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getCustomerEmail",85],"(",")",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'Precondition failed: Customer data must not be set to quote'",85],")",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$objectManager",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","TestFramework",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Helper",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Bootstrap",87],["T_DOUBLE_COLON","::",87],["T_STRING","getObjectManager",87],"(",")",";",["T_WHITESPACE","\n\n        ",87],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Api\\CustomerRepositoryInterface $customerRepository *\/",89],["T_WHITESPACE","\n        ",89],["T_VARIABLE","$customerRepository",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$objectManager",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","create",90],"(",["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Customer",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Api",90],["T_NS_SEPARATOR","\\",90],["T_STRING","CustomerRepositoryInterface",90],["T_DOUBLE_COLON","::",90],["T_CLASS","class",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$customer",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$customerRepository",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getById",91],"(",["T_LNUMBER","1",91],")",";",["T_WHITESPACE","\n        ",91],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Model\\Session $customerSession *\/",92],["T_WHITESPACE","\n        ",92],["T_VARIABLE","$customerSession",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","Bootstrap",93],["T_DOUBLE_COLON","::",93],["T_STRING","getObjectManager",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","get",93],"(",["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Customer",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Model",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Session",93],["T_DOUBLE_COLON","::",93],["T_CLASS","class",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$customerSession",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","setCustomerDataObject",94],"(",["T_VARIABLE","$customer",94],")",";",["T_WHITESPACE","\n\n        ",94],["T_DOC_COMMENT","\/** Ensure that customer data is still unavailable before SUT invocation *\/",96],["T_WHITESPACE","\n        ",96],["T_VARIABLE","$quote",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_checkoutSession",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getQuote",97],"(",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertEmpty",98],"(",["T_VARIABLE","$quote",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getCustomerEmail",98],"(",")",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'Precondition failed: Customer data must not be set to quote'",98],")",";",["T_WHITESPACE","\n\n        ",98],["T_DOC_COMMENT","\/** Execute SUT *\/",100],["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_checkoutSession",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","loadCustomerQuote",101],"(",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$quote",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_checkoutSession",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getQuote",102],"(",")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_validateCustomerDataInQuote",103],"(",["T_VARIABLE","$quote",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Ensure that quote has customer data specified in customer fixture.\n     *\n     * @param \\Magento\\Quote\\Model\\Quote $quote\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","_validateCustomerDataInQuote",111],"(",["T_VARIABLE","$quote",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$customerIdFromFixture",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_LNUMBER","1",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$customerEmailFromFixture",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'customer@example.com'",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$customerFirstNameFromFixture",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'John'",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertEquals",116],"(",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$customerEmailFromFixture",117],",",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$quote",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getCustomerEmail",118],"(",")",",",["T_WHITESPACE","\n            ",118],["T_CONSTANT_ENCAPSED_STRING","'Customer email was not set to Quote correctly.'",119],["T_WHITESPACE","\n        ",119],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertEquals",121],"(",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$customerIdFromFixture",122],",",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$quote",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getCustomerId",123],"(",")",",",["T_WHITESPACE","\n            ",123],["T_CONSTANT_ENCAPSED_STRING","'Customer ID was not set to Quote correctly.'",124],["T_WHITESPACE","\n        ",124],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEquals",126],"(",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$customerFirstNameFromFixture",127],",",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$quote",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getCustomerFirstname",128],"(",")",",",["T_WHITESPACE","\n            ",128],["T_CONSTANT_ENCAPSED_STRING","'Customer first name was not set to Quote correctly.'",129],["T_WHITESPACE","\n        ",129],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n",131],"}",["T_WHITESPACE","\n",132]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Sales",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Order",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Test for CreditmemoFactory class.\n * @magentoDbIsolation enabled\n *\/",8],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","CreditmemoFactoryTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","PHPUnit_Framework_TestCase",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * Placeholder for order item id field.\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","ORDER_ITEM_ID_PLACEHOLDER",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'id_item_'",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PRIVATE","private",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$objectManager",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","setUp",27],"(",")",["T_WHITESPACE","\n    ",27],"{",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","objectManager",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","TestFramework",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Helper",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Bootstrap",29],["T_DOUBLE_COLON","::",29],["T_STRING","getObjectManager",29],"(",")",";",["T_WHITESPACE","\n    ",29],"}",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Sales\/_files\/order_with_dummy_item_and_invoiced.php\n     * @dataProvider createByOrderDataProvider\n     * @param array $creditmemoData\n     * @param int $expectedQty\n     *\/",32],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testCreateByOrder",38],"(",["T_ARRAY","array",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$creditmemoData",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$expectedQty",38],")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $order *\/",40],["T_WHITESPACE","\n        ",40],["T_VARIABLE","$order",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","objectManager",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","create",41],"(",["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Sales",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Model",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Order",41],["T_DOUBLE_COLON","::",41],["T_CLASS","class",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$order",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","loadByIncrementId",42],"(",["T_CONSTANT_ENCAPSED_STRING","'100000001'",42],")",";",["T_WHITESPACE","\n        ",42],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\CreditmemoFactory $creditmemoFactory *\/",43],["T_WHITESPACE","\n        ",43],["T_VARIABLE","$creditmemoFactory",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","objectManager",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","create",44],"(",["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Sales",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Model",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Order",44],["T_NS_SEPARATOR","\\",44],["T_STRING","CreditmemoFactory",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$creditmemoData",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","prepareCreditMemoData",45],"(",["T_VARIABLE","$order",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$creditmemoData",45],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$creditmemo",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$creditmemoFactory",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","createByOrder",46],"(",["T_VARIABLE","$order",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$creditmemoData",46],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEquals",47],"(",["T_VARIABLE","$expectedQty",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$creditmemo",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getTotalQty",47],"(",")",",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'Creditmemo has wrong total qty.'",47],")",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Prepare Creditmemo data.\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @param array $creditmemoData\n     * @return array\n     *\/",50],["T_WHITESPACE","\n    ",56],["T_PRIVATE","private",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","prepareCreditMemoData",57],"(",["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Sales",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Model",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Order",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$order",57],",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$creditmemoData",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$result",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[","]",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$orderItems",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$order",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getAllItems",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_FOREACH","foreach",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$creditmemoData",61],"[",["T_CONSTANT_ENCAPSED_STRING","'qtys'",61],"]",["T_WHITESPACE"," ",61],["T_AS","as",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$key",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$item",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$result",62],"[",["T_VARIABLE","$orderItems",62],"[",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","prepareOrderItemKey",62],"(",["T_VARIABLE","$key",62],")","]",["T_OBJECT_OPERATOR","->",62],["T_STRING","getId",62],"(",")","]",["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$item",62],";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$creditmemoData",64],"[",["T_CONSTANT_ENCAPSED_STRING","'qtys'",64],"]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$result",64],";",["T_WHITESPACE","\n\n        ",64],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$creditmemoData",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Prepare order item key.\n     *\n     * @param string $key\n     * @return int\n     *\/",69],["T_WHITESPACE","\n    ",74],["T_PRIVATE","private",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","prepareOrderItemKey",75],"(",["T_VARIABLE","$key",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_STRING","str_replace",77],"(",["T_STRING","self",77],["T_DOUBLE_COLON","::",77],["T_STRING","ORDER_ITEM_ID_PLACEHOLDER",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","''",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$key",77],")",["T_WHITESPACE"," ",77],"-",["T_WHITESPACE"," ",77],["T_LNUMBER","1",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","createByOrderDataProvider",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],"[",["T_WHITESPACE","\n            ",85],["T_COMMENT","\/\/ Variation #1\n",86],["T_WHITESPACE","            ",87],"[",["T_WHITESPACE","\n                ",87],["T_COMMENT","\/\/$creditmemoData\n",88],["T_WHITESPACE","                ",89],"[",["T_WHITESPACE","\n                    ",89],["T_CONSTANT_ENCAPSED_STRING","'qtys'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],"[",["T_WHITESPACE","\n                        ",90],["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","ORDER_ITEM_ID_PLACEHOLDER",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'1'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_LNUMBER","1",91],",",["T_WHITESPACE","\n                        ",91],["T_STRING","self",92],["T_DOUBLE_COLON","::",92],["T_STRING","ORDER_ITEM_ID_PLACEHOLDER",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'2'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_LNUMBER","1",92],",",["T_WHITESPACE","\n                    ",92],"]",["T_WHITESPACE","\n                ",93],"]",",",["T_WHITESPACE","\n                ",94],["T_COMMENT","\/\/$expectedQty\n",95],["T_WHITESPACE","                ",96],["T_LNUMBER","4",96],["T_WHITESPACE","\n            ",96],"]",["T_WHITESPACE","\n        ",97],"]",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n",99],"}",["T_WHITESPACE","\n",100]]
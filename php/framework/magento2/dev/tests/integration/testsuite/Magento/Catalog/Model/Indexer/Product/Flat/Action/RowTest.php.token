[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Flat",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Action",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Class RowTest\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","RowTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","TestFramework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Indexer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","TestCase",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Product\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$_product",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Category\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$_category",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Indexer\\Product\\Flat\\State\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_state",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Indexer\\Product\\Flat\\Processor\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_processor",31],";",["T_WHITESPACE","\n\n    ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","_product",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","TestFramework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Helper",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Bootstrap",35],["T_DOUBLE_COLON","::",35],["T_STRING","getObjectManager",35],"(",")",["T_OBJECT_OPERATOR","->",35],["T_STRING","create",35],"(",["T_WHITESPACE","\n            ",35],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Catalog",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Product",36],["T_DOUBLE_COLON","::",36],["T_CLASS","class",36],["T_WHITESPACE","\n        ",36],")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","_category",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","TestFramework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Helper",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Bootstrap",38],["T_DOUBLE_COLON","::",38],["T_STRING","getObjectManager",38],"(",")",["T_OBJECT_OPERATOR","->",38],["T_STRING","create",38],"(",["T_WHITESPACE","\n            ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Catalog",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Model",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Category",39],["T_DOUBLE_COLON","::",39],["T_CLASS","class",39],["T_WHITESPACE","\n        ",39],")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_processor",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","TestFramework",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Helper",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Bootstrap",41],["T_DOUBLE_COLON","::",41],["T_STRING","getObjectManager",41],"(",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","create",41],"(",["T_WHITESPACE","\n            ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Catalog",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Model",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Indexer",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Product",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Flat",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Processor",42],["T_DOUBLE_COLON","::",42],["T_CLASS","class",42],["T_WHITESPACE","\n        ",42],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @magentoDataFixture Magento\/Catalog\/_files\/row_fixture.php\n     * @magentoConfigFixture current_store catalog\/frontend\/flat_catalog_product 1\n     * @magentoAppArea frontend\n     *\/",46],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","testProductUpdate",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$categoryFactory",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","TestFramework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Helper",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Bootstrap",54],["T_DOUBLE_COLON","::",54],["T_STRING","getObjectManager",54],"(",")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","create",55],"(",["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Catalog",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","CategoryFactory",55],["T_DOUBLE_COLON","::",55],["T_CLASS","class",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$listProduct",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","TestFramework",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Helper",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Bootstrap",56],["T_DOUBLE_COLON","::",56],["T_STRING","getObjectManager",56],"(",")",["T_WHITESPACE","\n            ",56],["T_OBJECT_OPERATOR","->",57],["T_STRING","create",57],"(",["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Catalog",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Block",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Product",57],["T_NS_SEPARATOR","\\",57],["T_STRING","ListProduct",57],["T_DOUBLE_COLON","::",57],["T_CLASS","class",57],")",";",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_processor",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getIndexer",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","setScheduled",59],"(",["T_STRING","false",59],")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertFalse",60],"(",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_processor",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getIndexer",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","isScheduled",61],"(",")",",",["T_WHITESPACE","\n            ",61],["T_CONSTANT_ENCAPSED_STRING","'Indexer is in scheduled mode when turned to update on save mode'",62],["T_WHITESPACE","\n        ",62],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_processor",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","reindexAll",64],"(",")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_product",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","load",66],"(",["T_LNUMBER","1",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_product",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","setName",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Updated Product'",67],")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_product",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","save",68],"(",")",";",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$category",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$categoryFactory",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","create",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","load",70],"(",["T_LNUMBER","9",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$layer",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$listProduct",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getLayer",71],"(",")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$layer",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setCurrentCategory",72],"(",["T_VARIABLE","$category",72],")",";",["T_WHITESPACE","\n        ",72],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection $productCollection *\/",73],["T_WHITESPACE","\n        ",73],["T_VARIABLE","$productCollection",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$layer",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getProductCollection",74],"(",")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertTrue",75],"(",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$productCollection",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","isEnabledFlat",76],"(",")",",",["T_WHITESPACE","\n            ",76],["T_CONSTANT_ENCAPSED_STRING","'Product collection is not using flat resource when flat is on'",77],["T_WHITESPACE","\n        ",77],")",";",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertEquals",80],"(",["T_LNUMBER","2",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$productCollection",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","count",80],"(",")",",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'Product collection items count must be exactly 2'",80],")",";",["T_WHITESPACE","\n\n        ",80],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$productCollection",82],["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$product",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_DOC_COMMENT","\/** @var $product \\Magento\\Catalog\\Model\\Product *\/",83],["T_WHITESPACE","\n            ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$product",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getId",84],"(",")",["T_WHITESPACE"," ",84],["T_IS_EQUAL","==",84],["T_WHITESPACE"," ",84],["T_LNUMBER","1",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEquals",85],"(",["T_WHITESPACE","\n                    ",85],["T_CONSTANT_ENCAPSED_STRING","'Updated Product'",86],",",["T_WHITESPACE","\n                    ",86],["T_VARIABLE","$product",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getName",87],"(",")",",",["T_WHITESPACE","\n                    ",87],["T_CONSTANT_ENCAPSED_STRING","'Product name from flat does not match with updated name'",88],["T_WHITESPACE","\n                ",88],")",";",["T_WHITESPACE","\n            ",89],"}",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n",92],"}",["T_WHITESPACE","\n",93]]
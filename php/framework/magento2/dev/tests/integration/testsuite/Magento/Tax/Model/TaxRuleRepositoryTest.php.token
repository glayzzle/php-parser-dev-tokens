[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tax",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filter",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","TestFramework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Helper",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Bootstrap",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","TaxRuleRepositoryTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","PHPUnit_Framework_TestCase",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$objectManager",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Tax\\Api\\Data\\TaxRuleInterfaceFactory\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$taxRuleFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Tax\\Api\\TaxRuleRepositoryInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$taxRuleRepository",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var TaxRuleFixtureFactory\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$taxRuleFixtureFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Array of default tax classes ids\n     *\n     * Key is class name\n     *\n     * @var int[]\n     *\/",36],["T_WHITESPACE","\n    ",42],["T_PRIVATE","private",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$taxClasses",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Array of default tax rates ids.\n     *\n     * Key is rate percentage as string.\n     *\n     * @var int[]\n     *\/",45],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$taxRates",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Array of default tax rules ids.\n     *\n     * Key is rule code.\n     *\n     * @var int[]\n     *\/",54],["T_WHITESPACE","\n    ",60],["T_PRIVATE","private",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$taxRules",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Tax\\Api\\TaxRateRepositoryInterface\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PRIVATE","private",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$taxRateRepository",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\DataObjectHelper\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PRIVATE","private",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$dataObjectHelper",71],";",["T_WHITESPACE","\n\n    ",71],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","setUp",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","objectManager",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","Bootstrap",75],["T_DOUBLE_COLON","::",75],["T_STRING","getObjectManager",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","taxRuleRepository",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","objectManager",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Tax",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Api",76],["T_NS_SEPARATOR","\\",76],["T_STRING","TaxRuleRepositoryInterface",76],["T_DOUBLE_COLON","::",76],["T_CLASS","class",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","taxRateRepository",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","objectManager",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","get",77],"(",["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Tax",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Api",77],["T_NS_SEPARATOR","\\",77],["T_STRING","TaxRateRepositoryInterface",77],["T_DOUBLE_COLON","::",77],["T_CLASS","class",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","taxRuleFactory",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","objectManager",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","create",78],"(",["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Tax",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Api",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Data",78],["T_NS_SEPARATOR","\\",78],["T_STRING","TaxRuleInterfaceFactory",78],["T_DOUBLE_COLON","::",78],["T_CLASS","class",78],")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","dataObjectHelper",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","objectManager",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","create",79],"(",["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Framework",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Api",79],["T_NS_SEPARATOR","\\",79],["T_STRING","DataObjectHelper",79],["T_DOUBLE_COLON","::",79],["T_CLASS","class",79],")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","taxRuleFixtureFactory",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_STRING","TaxRuleFixtureFactory",80],"(",")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     *\/",83],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","testSave",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_COMMENT","\/\/ Tax rule data object created\n",88],["T_WHITESPACE","        ",89],["T_VARIABLE","$taxRuleDataObject",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","createTaxRuleDataObject",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_COMMENT","\/\/Tax rule service call\n",90],["T_WHITESPACE","        ",91],["T_VARIABLE","$taxRule",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","taxRuleRepository",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","save",91],"(",["T_VARIABLE","$taxRuleDataObject",91],")",";",["T_WHITESPACE","\n\n        ",91],["T_COMMENT","\/\/Assertions\n",93],["T_WHITESPACE","        ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertInstanceOf",94],"(",["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Tax",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Api",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Data",94],["T_NS_SEPARATOR","\\",94],["T_STRING","TaxRuleInterface",94],["T_DOUBLE_COLON","::",94],["T_CLASS","class",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$taxRule",94],")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertEquals",95],"(",["T_VARIABLE","$taxRuleDataObject",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getCode",95],"(",")",",",["T_WHITESPACE"," ",95],["T_VARIABLE","$taxRule",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getCode",95],"(",")",")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertEquals",96],"(",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$taxRuleDataObject",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getCustomerTaxClassIds",97],"(",")",",",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$taxRule",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getCustomerTaxClassIds",98],"(",")",["T_WHITESPACE","\n        ",98],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertEquals",100],"(",["T_VARIABLE","$taxRuleDataObject",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getProductTaxClassIds",100],"(",")",",",["T_WHITESPACE"," ",100],["T_VARIABLE","$taxRule",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getProductTaxClassIds",100],"(",")",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEquals",101],"(",["T_VARIABLE","$taxRuleDataObject",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getPriority",101],"(",")",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$taxRule",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getPriority",101],"(",")",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertEquals",102],"(",["T_VARIABLE","$taxRuleDataObject",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getPosition",102],"(",")",",",["T_WHITESPACE"," ",102],["T_VARIABLE","$taxRule",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getPosition",102],"(",")",")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertNotNull",103],"(",["T_VARIABLE","$taxRule",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getId",103],"(",")",")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * @expectedException \\Magento\\Framework\\Exception\\NoSuchEntityException\n     * @expectedExceptionMessage No such entity with taxRuleId = 9999\n     * @magentoDbIsolation enabled\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","testSaveThrowsExceptionIdTargetTaxRulDoesNotExist",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$taxRuleDataObject",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","taxRuleFactory",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","create",113],"(",")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$taxRuleDataObject",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","setId",114],"(",["T_LNUMBER","9999",114],")",["T_WHITESPACE","\n            ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","setCode",115],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",115],")",["T_WHITESPACE","\n            ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","setCustomerTaxClassIds",116],"(","[",["T_LNUMBER","3",116],"]",")",["T_WHITESPACE","\n            ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","setProductTaxClassIds",117],"(","[",["T_LNUMBER","2",117],"]",")",["T_WHITESPACE","\n            ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","setTaxRateIds",118],"(","[",["T_LNUMBER","2",118],"]",")",["T_WHITESPACE","\n            ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","setPriority",119],"(",["T_LNUMBER","0",119],")",["T_WHITESPACE","\n            ",119],["T_OBJECT_OPERATOR","->",120],["T_STRING","setPosition",120],"(",["T_LNUMBER","1",120],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","taxRuleRepository",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","save",121],"(",["T_VARIABLE","$taxRuleDataObject",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @expectedException \\Magento\\Framework\\Exception\\CouldNotSaveException\n     * @expectedExceptionMessage No such entity\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","testSaveThrowsExceptionIfProvidedTaxClassIdsAreInvalid",129],"(",")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$taxRuleData",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],"[",["T_WHITESPACE","\n            ",131],["T_CONSTANT_ENCAPSED_STRING","'code'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'code'",132],",",["T_WHITESPACE","\n            ",132],["T_COMMENT","\/\/ These TaxClassIds exist, but '2' is should be a productTaxClassId and\n",133],["T_WHITESPACE","            ",134],["T_COMMENT","\/\/ '3' should be a customerTaxClassId. See MAGETWO-25683.\n",134],["T_WHITESPACE","            ",135],["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_ids'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],"[",["T_LNUMBER","2",135],"]",",",["T_WHITESPACE","\n            ",135],["T_CONSTANT_ENCAPSED_STRING","'product_tax_class_ids'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],"[",["T_LNUMBER","3",136],"]",",",["T_WHITESPACE","\n            ",136],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_ids'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],"[",["T_LNUMBER","1",137],"]",",",["T_WHITESPACE","\n            ",137],["T_CONSTANT_ENCAPSED_STRING","'priority'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],",",["T_WHITESPACE","\n            ",138],["T_CONSTANT_ENCAPSED_STRING","'position'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_LNUMBER","0",139],",",["T_WHITESPACE","\n        ",139],"]",";",["T_WHITESPACE","\n        ",140],["T_COMMENT","\/\/ Tax rule data object created\n",141],["T_WHITESPACE","        ",142],["T_VARIABLE","$taxRule",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","taxRuleFactory",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","create",142],"(",")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","dataObjectHelper",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","populateWithArray",143],"(",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$taxRule",144],",",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$taxRuleData",145],",",["T_WHITESPACE","\n            ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Tax",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Api",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Data",146],["T_NS_SEPARATOR","\\",146],["T_STRING","TaxRuleInterface",146],["T_DOUBLE_COLON","::",146],["T_CLASS","class",146],["T_WHITESPACE","\n        ",146],")",";",["T_WHITESPACE","\n\n        ",147],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","taxRuleRepository",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","save",149],"(",["T_VARIABLE","$taxRule",149],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @expectedException \\Magento\\Framework\\Exception\\CouldNotSaveException\n     * @expectedExceptionMessage The position value of \"-1\" must be greater than or equal to 0.\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","testSaveThrowsExceptionIfProvidedPositionIsInvalid",157],"(",")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$taxRuleData",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[",["T_WHITESPACE","\n            ",159],["T_CONSTANT_ENCAPSED_STRING","'code'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'code'",160],",",["T_WHITESPACE","\n            ",160],["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_ids'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],"[",["T_LNUMBER","3",161],"]",",",["T_WHITESPACE","\n            ",161],["T_CONSTANT_ENCAPSED_STRING","'product_tax_class_ids'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],"[",["T_LNUMBER","2",162],"]",",",["T_WHITESPACE","\n            ",162],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_ids'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],"[",["T_LNUMBER","1",163],"]",",",["T_WHITESPACE","\n            ",163],["T_CONSTANT_ENCAPSED_STRING","'priority'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_LNUMBER","0",164],",",["T_WHITESPACE","\n            ",164],["T_CONSTANT_ENCAPSED_STRING","'position'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],"-",["T_LNUMBER","1",165],",",["T_WHITESPACE","\n        ",165],"]",";",["T_WHITESPACE","\n        ",166],["T_COMMENT","\/\/ Tax rule data object created\n",167],["T_WHITESPACE","        ",168],["T_VARIABLE","$taxRule",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","taxRuleFactory",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","create",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","dataObjectHelper",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","populateWithArray",169],"(",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$taxRule",170],",",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$taxRuleData",171],",",["T_WHITESPACE","\n            ",171],["T_NS_SEPARATOR","\\",172],["T_STRING","Magento",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Tax",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Api",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Data",172],["T_NS_SEPARATOR","\\",172],["T_STRING","TaxRuleInterface",172],["T_DOUBLE_COLON","::",172],["T_CLASS","class",172],["T_WHITESPACE","\n        ",172],")",";",["T_WHITESPACE","\n\n        ",173],["T_COMMENT","\/\/Tax rule service call\n",175],["T_WHITESPACE","        ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","taxRuleRepository",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","save",176],"(",["T_VARIABLE","$taxRule",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","fail",177],"(",["T_CONSTANT_ENCAPSED_STRING","'Did not throw expected InputException'",177],")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     *\/",180],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","testGetReturnsTaxRuleCreatedByRepository",183],"(",")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_COMMENT","\/\/ Tax rule data object created\n",185],["T_WHITESPACE","        ",186],["T_VARIABLE","$taxRuleDataObject",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","createTaxRuleDataObject",186],"(",")",";",["T_WHITESPACE","\n        ",186],["T_COMMENT","\/\/Tax rule service call to create rule\n",187],["T_WHITESPACE","        ",188],["T_VARIABLE","$ruleId",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","taxRuleRepository",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","save",188],"(",["T_VARIABLE","$taxRuleDataObject",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","getId",188],"(",")",";",["T_WHITESPACE","\n\n        ",188],["T_COMMENT","\/\/ Call getTaxRule and verify\n",190],["T_WHITESPACE","        ",191],["T_VARIABLE","$taxRule",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","taxRuleRepository",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","get",191],"(",["T_VARIABLE","$ruleId",191],")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertEquals",192],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$taxRule",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getCode",192],"(",")",")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertEquals",193],"(","[",["T_LNUMBER","3",193],"]",",",["T_WHITESPACE"," ",193],["T_VARIABLE","$taxRule",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getCustomerTaxClassIds",193],"(",")",")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertEquals",194],"(","[",["T_LNUMBER","2",194],"]",",",["T_WHITESPACE"," ",194],["T_VARIABLE","$taxRule",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getProductTaxClassIds",194],"(",")",")",";",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertEquals",195],"(","[",["T_LNUMBER","2",195],"]",",",["T_WHITESPACE"," ",195],["T_VARIABLE","$taxRule",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getTaxRateIds",195],"(",")",")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","assertEquals",196],"(",["T_LNUMBER","0",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$taxRule",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getPriority",196],"(",")",")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertEquals",197],"(",["T_LNUMBER","1",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$taxRule",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getPosition",197],"(",")",")",";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Tax\/_files\/tax_classes.php\n     *\/",200],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","testGetReturnsTaxRuleCreatedFromModel",203],"(",")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_DOC_COMMENT","\/** @var $registry \\Magento\\Framework\\Registry *\/",205],["T_WHITESPACE","\n        ",205],["T_VARIABLE","$registry",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","objectManager",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","get",206],"(",["T_NS_SEPARATOR","\\",206],["T_STRING","Magento",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Framework",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Registry",206],["T_DOUBLE_COLON","::",206],["T_CLASS","class",206],")",";",["T_WHITESPACE","\n        ",206],["T_DOC_COMMENT","\/** @var $taxRuleModel \\Magento\\Tax\\Model\\Calculation\\Rule *\/",207],["T_WHITESPACE","\n        ",207],["T_VARIABLE","$taxRuleModel",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$registry",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","registry",208],"(",["T_CONSTANT_ENCAPSED_STRING","'_fixture\/Magento_Tax_Model_Calculation_Rule'",208],")",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","assertNotNull",209],"(",["T_VARIABLE","$taxRuleModel",209],")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$ruleId",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$taxRuleModel",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getId",210],"(",")",";",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$taxRateId",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$registry",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","registry",212],"(",["T_CONSTANT_ENCAPSED_STRING","'_fixture\/Magento_Tax_Model_Calculation_Rate'",212],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","getId",212],"(",")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$customerTaxClassIds",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","array_values",213],"(",["T_STRING","array_unique",213],"(",["T_VARIABLE","$taxRuleModel",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getCustomerTaxClasses",213],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",213],["T_COMMENT","\/\/ Call getTaxRule and verify\n",215],["T_WHITESPACE","        ",216],["T_VARIABLE","$taxRule",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","taxRuleRepository",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","get",216],"(",["T_VARIABLE","$ruleId",216],")",";",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","assertEquals",217],"(",["T_VARIABLE","$customerTaxClassIds",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$taxRule",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getCustomerTaxClassIds",217],"(",")",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertEquals",218],"(","[",["T_VARIABLE","$taxRateId",218],"]",",",["T_WHITESPACE"," ",218],["T_VARIABLE","$taxRule",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getTaxRateIds",218],"(",")",")",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Tax\/_files\/tax_classes.php\n     * @expectedException \\Magento\\Framework\\Exception\\NoSuchEntityException\n     * @expectedExceptionMessage No such entity with taxRuleId\n     *\/",221],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","testDeleteById",226],"(",")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_DOC_COMMENT","\/** @var $registry \\Magento\\Framework\\Registry *\/",228],["T_WHITESPACE","\n        ",228],["T_VARIABLE","$registry",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","objectManager",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","get",229],"(",["T_NS_SEPARATOR","\\",229],["T_STRING","Magento",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Framework",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Registry",229],["T_DOUBLE_COLON","::",229],["T_CLASS","class",229],")",";",["T_WHITESPACE","\n        ",229],["T_DOC_COMMENT","\/** @var $taxRule \\Magento\\Tax\\Model\\Calculation\\Rule *\/",230],["T_WHITESPACE","\n        ",230],["T_VARIABLE","$taxRule",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$registry",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","registry",231],"(",["T_CONSTANT_ENCAPSED_STRING","'_fixture\/Magento_Tax_Model_Calculation_Rule'",231],")",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","assertNotNull",232],"(",["T_VARIABLE","$taxRule",232],")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$ruleId",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$taxRule",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getId",233],"(",")",";",["T_WHITESPACE","\n\n        ",233],["T_COMMENT","\/\/ Delete the new tax rate\n",235],["T_WHITESPACE","        ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","assertTrue",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","taxRuleRepository",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","deleteById",236],"(",["T_VARIABLE","$ruleId",236],")",")",";",["T_WHITESPACE","\n\n        ",236],["T_COMMENT","\/\/ Get the new tax rule, this should fail\n",238],["T_WHITESPACE","        ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","taxRuleRepository",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","get",239],"(",["T_VARIABLE","$ruleId",239],")",";",["T_WHITESPACE","\n    ",239],"}",["T_WHITESPACE","\n\n    ",240],["T_DOC_COMMENT","\/**\n     * @magentoDataFixture Magento\/Tax\/_files\/tax_classes.php\n     * @expectedException \\Magento\\Framework\\Exception\\NoSuchEntityException\n     * @expectedExceptionMessage No such entity with taxRuleId\n     *\/",242],["T_WHITESPACE","\n    ",246],["T_PUBLIC","public",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","testDeleteByIdThrowsExceptionIfTargetTaxRuleDoesNotExist",247],"(",")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_DOC_COMMENT","\/** @var $registry \\Magento\\Framework\\Registry *\/",249],["T_WHITESPACE","\n        ",249],["T_VARIABLE","$registry",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","objectManager",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","get",250],"(",["T_NS_SEPARATOR","\\",250],["T_STRING","Magento",250],["T_NS_SEPARATOR","\\",250],["T_STRING","Framework",250],["T_NS_SEPARATOR","\\",250],["T_STRING","Registry",250],["T_DOUBLE_COLON","::",250],["T_CLASS","class",250],")",";",["T_WHITESPACE","\n        ",250],["T_DOC_COMMENT","\/** @var $taxRule \\Magento\\Tax\\Model\\Calculation\\Rule *\/",251],["T_WHITESPACE","\n        ",251],["T_VARIABLE","$taxRule",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$registry",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","registry",252],"(",["T_CONSTANT_ENCAPSED_STRING","'_fixture\/Magento_Tax_Model_Calculation_Rule'",252],")",";",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","assertNotNull",253],"(",["T_VARIABLE","$taxRule",253],")",";",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$ruleId",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$taxRule",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getId",254],"(",")",";",["T_WHITESPACE","\n\n        ",254],["T_COMMENT","\/\/ Delete the new tax rule\n",256],["T_WHITESPACE","        ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","assertTrue",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","taxRuleRepository",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","deleteById",257],"(",["T_VARIABLE","$ruleId",257],")",")",";",["T_WHITESPACE","\n        ",257],["T_COMMENT","\/\/ Delete the new tax rule again, this should fail\n",258],["T_WHITESPACE","        ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","taxRuleRepository",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","deleteById",259],"(",["T_VARIABLE","$ruleId",259],")",";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     *\/",262],["T_WHITESPACE","\n    ",264],["T_PUBLIC","public",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","testSaveUpdatesExistingTaxRule",265],"(",")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$taxRule",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","createTaxRuleDataObject",267],"(",")",";",["T_WHITESPACE","\n        ",267],["T_COMMENT","\/\/Tax rule service call\n",268],["T_WHITESPACE","        ",269],["T_VARIABLE","$taxRule",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","taxRuleRepository",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","save",269],"(",["T_VARIABLE","$taxRule",269],")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$taxRule",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","setCode",270],"(",["T_CONSTANT_ENCAPSED_STRING","'updated code'",270],")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","taxRuleRepository",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","save",271],"(",["T_VARIABLE","$taxRule",271],")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$retrievedRule",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","taxRuleRepository",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","get",272],"(",["T_VARIABLE","$taxRule",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getId",272],"(",")",")",";",["T_WHITESPACE","\n\n        ",272],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","assertEquals",274],"(",["T_CONSTANT_ENCAPSED_STRING","'updated code'",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$retrievedRule",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getCode",274],"(",")",")",";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/**\n     * @magentoDbIsolation enabled\n     * @expectedException \\Magento\\Framework\\Exception\\CouldNotSaveException\n     * @expectedExceptionMessage code is a required field\n     *\/",277],["T_WHITESPACE","\n    ",281],["T_PUBLIC","public",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","testSaveThrowsExceptionIsRequiredFieldsAreMissing",282],"(",")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$taxRule",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","taxRuleRepository",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","save",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","createTaxRuleDataObject",284],"(",")",")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$taxRule",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","setCode",285],"(",["T_STRING","null",285],")",";",["T_WHITESPACE","\n\n        ",285],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","taxRuleRepository",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","save",287],"(",["T_VARIABLE","$taxRule",287],")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     *\n     * @param Filter[] $filters\n     * @param Filter[] $filterGroup\n     * @param string[] $expectedRuleCodes The codes of the tax rules that are expected to be found\n     *\n     * @magentoDbIsolation enabled\n     * @dataProvider searchTaxRulesDataProvider\n     *\/",290],["T_WHITESPACE","\n    ",298],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","testGetList",299],"(",["T_VARIABLE","$filters",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$filterGroup",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$expectedRuleCodes",299],")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","setUpDefaultRules",301],"(",")",";",["T_WHITESPACE","\n\n        ",301],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Api\\SearchCriteriaBuilder $searchBuilder *\/",303],["T_WHITESPACE","\n        ",303],["T_VARIABLE","$searchBuilder",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","Bootstrap",304],["T_DOUBLE_COLON","::",304],["T_STRING","getObjectManager",304],"(",")",["T_WHITESPACE","\n            ",304],["T_OBJECT_OPERATOR","->",305],["T_STRING","create",305],"(",["T_NS_SEPARATOR","\\",305],["T_STRING","Magento",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Framework",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Api",305],["T_NS_SEPARATOR","\\",305],["T_STRING","SearchCriteriaBuilder",305],["T_DOUBLE_COLON","::",305],["T_CLASS","class",305],")",";",["T_WHITESPACE","\n        ",305],["T_FOREACH","foreach",306],["T_WHITESPACE"," ",306],"(",["T_VARIABLE","$filters",306],["T_WHITESPACE"," ",306],["T_AS","as",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$filter",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$searchBuilder",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","addFilters",307],"(","[",["T_VARIABLE","$filter",307],"]",")",";",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n        ",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$filterGroup",309],["T_WHITESPACE"," ",309],["T_IS_NOT_IDENTICAL","!==",309],["T_WHITESPACE"," ",309],["T_STRING","null",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$searchBuilder",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","addFilters",310],"(",["T_VARIABLE","$filterGroup",310],")",";",["T_WHITESPACE","\n        ",310],"}",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$searchCriteria",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$searchBuilder",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","create",312],"(",")",";",["T_WHITESPACE","\n\n        ",312],["T_VARIABLE","$searchResults",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","taxRuleRepository",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getList",314],"(",["T_VARIABLE","$searchCriteria",314],")",";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$items",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],"[","]",";",["T_WHITESPACE","\n        ",315],["T_FOREACH","foreach",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$expectedRuleCodes",316],["T_WHITESPACE"," ",316],["T_AS","as",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$ruleCode",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n            ",316],["T_VARIABLE","$ruleId",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","taxRules",317],"[",["T_VARIABLE","$ruleCode",317],"]",";",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$items",318],"[","]",["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","taxRuleRepository",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","get",318],"(",["T_VARIABLE","$ruleId",318],")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n\n        ",319],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","assertEquals",321],"(",["T_VARIABLE","$searchCriteria",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$searchResults",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getSearchCriteria",321],"(",")",")",";",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","assertEquals",322],"(",["T_STRING","count",322],"(",["T_VARIABLE","$expectedRuleCodes",322],")",",",["T_WHITESPACE"," ",322],["T_VARIABLE","$searchResults",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getTotalCount",322],"(",")",")",";",["T_WHITESPACE","\n        ",322],["T_FOREACH","foreach",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$searchResults",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getItems",323],"(",")",["T_WHITESPACE"," ",323],["T_AS","as",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$rule",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","assertContains",324],"(",["T_VARIABLE","$rule",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getCode",324],"(",")",",",["T_WHITESPACE"," ",324],["T_VARIABLE","$expectedRuleCodes",324],")",";",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n\n        ",325],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","tearDownDefaultRules",327],"(",")",";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_PUBLIC","public",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","searchTaxRulesDataProvider",330],"(",")",["T_WHITESPACE","\n    ",330],"{",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$filterBuilder",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_STRING","Bootstrap",332],["T_DOUBLE_COLON","::",332],["T_STRING","getObjectManager",332],"(",")",["T_OBJECT_OPERATOR","->",332],["T_STRING","create",332],"(",["T_NS_SEPARATOR","\\",332],["T_STRING","Magento",332],["T_NS_SEPARATOR","\\",332],["T_STRING","Framework",332],["T_NS_SEPARATOR","\\",332],["T_STRING","Api",332],["T_NS_SEPARATOR","\\",332],["T_STRING","FilterBuilder",332],["T_DOUBLE_COLON","::",332],["T_CLASS","class",332],")",";",["T_WHITESPACE","\n\n        ",332],["T_RETURN","return",334],["T_WHITESPACE"," ",334],"[",["T_WHITESPACE","\n            ",334],["T_CONSTANT_ENCAPSED_STRING","'code eq \"Default Rule\"'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],"[",["T_WHITESPACE","\n                ",335],"[",["T_VARIABLE","$filterBuilder",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","setField",336],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",336],")",["T_OBJECT_OPERATOR","->",336],["T_STRING","setValue",336],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Rule'",336],")",["T_OBJECT_OPERATOR","->",336],["T_STRING","create",336],"(",")","]",",",["T_WHITESPACE","\n                ",336],["T_STRING","null",337],",",["T_WHITESPACE","\n                ",337],"[",["T_CONSTANT_ENCAPSED_STRING","'Default Rule'",338],"]",",",["T_WHITESPACE","\n            ",338],"]",",",["T_WHITESPACE","\n            ",339],["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_ids eq 3 AND priority eq 0'",340],["T_WHITESPACE"," ",340],["T_DOUBLE_ARROW","=>",340],["T_WHITESPACE"," ",340],"[",["T_WHITESPACE","\n                ",340],"[",["T_WHITESPACE","\n                    ",341],["T_VARIABLE","$filterBuilder",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","setField",342],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_ids'",342],")",["T_OBJECT_OPERATOR","->",342],["T_STRING","setValue",342],"(",["T_LNUMBER","3",342],")",["T_OBJECT_OPERATOR","->",342],["T_STRING","create",342],"(",")",",",["T_WHITESPACE","\n                    ",342],["T_VARIABLE","$filterBuilder",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","setField",343],"(",["T_CONSTANT_ENCAPSED_STRING","'priority'",343],")",["T_OBJECT_OPERATOR","->",343],["T_STRING","setValue",343],"(",["T_CONSTANT_ENCAPSED_STRING","'0'",343],")",["T_OBJECT_OPERATOR","->",343],["T_STRING","create",343],"(",")",",",["T_WHITESPACE","\n                ",343],"]",",",["T_WHITESPACE","\n                ",344],"[","]",",",["T_WHITESPACE","\n                ",345],"[",["T_CONSTANT_ENCAPSED_STRING","'Default Rule'",346],",",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'Higher Rate Rule'",346],"]",",",["T_WHITESPACE","\n            ",346],"]",",",["T_WHITESPACE","\n            ",347],["T_CONSTANT_ENCAPSED_STRING","'code eq \"Default Rule\" OR code eq \"Higher Rate Rule\"'",348],["T_WHITESPACE"," ",348],["T_DOUBLE_ARROW","=>",348],["T_WHITESPACE"," ",348],"[",["T_WHITESPACE","\n                ",348],"[","]",",",["T_WHITESPACE","\n                ",349],"[",["T_WHITESPACE","\n                    ",350],["T_VARIABLE","$filterBuilder",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","setField",351],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",351],")",["T_OBJECT_OPERATOR","->",351],["T_STRING","setValue",351],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Rule'",351],")",["T_OBJECT_OPERATOR","->",351],["T_STRING","create",351],"(",")",",",["T_WHITESPACE","\n                    ",351],["T_VARIABLE","$filterBuilder",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","setField",352],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",352],")",["T_OBJECT_OPERATOR","->",352],["T_STRING","setValue",352],"(",["T_CONSTANT_ENCAPSED_STRING","'Higher Rate Rule'",352],")",["T_OBJECT_OPERATOR","->",352],["T_STRING","create",352],"(",")",",",["T_WHITESPACE","\n                ",352],"]",",",["T_WHITESPACE","\n                ",353],"[",["T_CONSTANT_ENCAPSED_STRING","'Default Rule'",354],",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'Higher Rate Rule'",354],"]",",",["T_WHITESPACE","\n            ",354],"]",",",["T_WHITESPACE","\n            ",355],["T_CONSTANT_ENCAPSED_STRING","'code like \"%Rule\"'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],"[",["T_WHITESPACE","\n                ",356],"[",["T_WHITESPACE","\n                    ",357],["T_VARIABLE","$filterBuilder",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","setField",358],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",358],")",["T_OBJECT_OPERATOR","->",358],["T_STRING","setValue",358],"(",["T_CONSTANT_ENCAPSED_STRING","'%Rule'",358],")",["T_OBJECT_OPERATOR","->",358],["T_STRING","setConditionType",358],"(",["T_CONSTANT_ENCAPSED_STRING","'like'",358],")",["T_WHITESPACE","\n                        ",358],["T_OBJECT_OPERATOR","->",359],["T_STRING","create",359],"(",")",",",["T_WHITESPACE","\n                ",359],"]",",",["T_WHITESPACE","\n                ",360],"[","]",",",["T_WHITESPACE","\n                ",361],"[",["T_CONSTANT_ENCAPSED_STRING","'Default Rule'",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'Higher Rate Rule'",362],"]",",",["T_WHITESPACE","\n            ",362],"]",",",["T_WHITESPACE","\n        ",363],"]",";",["T_WHITESPACE","\n    ",364],"}",["T_WHITESPACE","\n\n    ",365],["T_DOC_COMMENT","\/**\n     * Helper function that sets up some default rules\n     *\/",367],["T_WHITESPACE","\n    ",369],["T_PRIVATE","private",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","setUpDefaultRules",370],"(",")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","taxClasses",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","taxRuleFixtureFactory",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","createTaxClasses",372],"(","[",["T_WHITESPACE","\n            ",372],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'DefaultCustomerClass'",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'type'",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_STRING","ClassModel",373],["T_DOUBLE_COLON","::",373],["T_STRING","TAX_CLASS_TYPE_CUSTOMER",373],"]",",",["T_WHITESPACE","\n            ",373],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'DefaultProductClass'",374],",",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'type'",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_STRING","ClassModel",374],["T_DOUBLE_COLON","::",374],["T_STRING","TAX_CLASS_TYPE_PRODUCT",374],"]",",",["T_WHITESPACE","\n            ",374],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'HigherProductClass'",375],",",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'type'",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_STRING","ClassModel",375],["T_DOUBLE_COLON","::",375],["T_STRING","TAX_CLASS_TYPE_PRODUCT",375],"]",",",["T_WHITESPACE","\n        ",375],"]",")",";",["T_WHITESPACE","\n\n        ",376],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","taxRates",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","taxRuleFixtureFactory",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","createTaxRates",378],"(","[",["T_WHITESPACE","\n            ",378],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_DNUMBER","7.5",379],",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'country'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'US'",379],",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'region'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_LNUMBER","42",379],"]",",",["T_WHITESPACE","\n            ",379],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage'",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_DNUMBER","7.5",380],",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'country'",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'US'",380],",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'region'",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_LNUMBER","12",380],"]",",",["T_WHITESPACE"," ",380],["T_COMMENT","\/\/ Default store rate\n",380],["T_WHITESPACE","        ",381],"]",")",";",["T_WHITESPACE","\n\n        ",381],["T_VARIABLE","$higherRates",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","taxRuleFixtureFactory",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","createTaxRates",383],"(","[",["T_WHITESPACE","\n            ",383],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],["T_LNUMBER","22",384],",",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'country'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'US'",384],",",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'region'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],["T_LNUMBER","42",384],"]",",",["T_WHITESPACE","\n            ",384],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_LNUMBER","10",385],",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'country'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'US'",385],",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'region'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_LNUMBER","12",385],"]",",",["T_WHITESPACE"," ",385],["T_COMMENT","\/\/ Default store rate\n",385],["T_WHITESPACE","        ",386],"]",")",";",["T_WHITESPACE","\n\n        ",386],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","taxRules",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","taxRuleFixtureFactory",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","createTaxRules",388],"(","[",["T_WHITESPACE","\n            ",388],"[",["T_WHITESPACE","\n                ",389],["T_CONSTANT_ENCAPSED_STRING","'code'",390],["T_WHITESPACE"," ",390],["T_DOUBLE_ARROW","=>",390],["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","'Default Rule'",390],",",["T_WHITESPACE","\n                ",390],["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_ids'",391],["T_WHITESPACE"," ",391],["T_DOUBLE_ARROW","=>",391],["T_WHITESPACE"," ",391],"[",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","taxClasses",391],"[",["T_CONSTANT_ENCAPSED_STRING","'DefaultCustomerClass'",391],"]",",",["T_WHITESPACE"," ",391],["T_LNUMBER","3",391],"]",",",["T_WHITESPACE","\n                ",391],["T_CONSTANT_ENCAPSED_STRING","'product_tax_class_ids'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],"[",["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","taxClasses",392],"[",["T_CONSTANT_ENCAPSED_STRING","'DefaultProductClass'",392],"]","]",",",["T_WHITESPACE","\n                ",392],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_ids'",393],["T_WHITESPACE"," ",393],["T_DOUBLE_ARROW","=>",393],["T_WHITESPACE"," ",393],["T_STRING","array_values",393],"(",["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","taxRates",393],")",",",["T_WHITESPACE","\n                ",393],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",394],["T_WHITESPACE"," ",394],["T_DOUBLE_ARROW","=>",394],["T_WHITESPACE"," ",394],["T_LNUMBER","0",394],",",["T_WHITESPACE","\n                ",394],["T_CONSTANT_ENCAPSED_STRING","'priority'",395],["T_WHITESPACE"," ",395],["T_DOUBLE_ARROW","=>",395],["T_WHITESPACE"," ",395],["T_LNUMBER","0",395],",",["T_WHITESPACE","\n                ",395],["T_CONSTANT_ENCAPSED_STRING","'calculate_subtotal'",396],["T_WHITESPACE"," ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_LNUMBER","1",396],",",["T_WHITESPACE","\n            ",396],"]",",",["T_WHITESPACE","\n            ",397],"[",["T_WHITESPACE","\n                ",398],["T_CONSTANT_ENCAPSED_STRING","'code'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'Higher Rate Rule'",399],",",["T_WHITESPACE","\n                ",399],["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_ids'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],"[",["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","taxClasses",400],"[",["T_CONSTANT_ENCAPSED_STRING","'DefaultCustomerClass'",400],"]",",",["T_WHITESPACE"," ",400],["T_LNUMBER","3",400],"]",",",["T_WHITESPACE","\n                ",400],["T_CONSTANT_ENCAPSED_STRING","'product_tax_class_ids'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],"[",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","taxClasses",401],"[",["T_CONSTANT_ENCAPSED_STRING","'HigherProductClass'",401],"]","]",",",["T_WHITESPACE","\n                ",401],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_ids'",402],["T_WHITESPACE"," ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],["T_STRING","array_values",402],"(",["T_VARIABLE","$higherRates",402],")",",",["T_WHITESPACE","\n                ",402],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",403],["T_WHITESPACE"," ",403],["T_DOUBLE_ARROW","=>",403],["T_WHITESPACE"," ",403],["T_LNUMBER","0",403],",",["T_WHITESPACE","\n                ",403],["T_CONSTANT_ENCAPSED_STRING","'priority'",404],["T_WHITESPACE"," ",404],["T_DOUBLE_ARROW","=>",404],["T_WHITESPACE"," ",404],["T_LNUMBER","0",404],",",["T_WHITESPACE","\n                ",404],["T_CONSTANT_ENCAPSED_STRING","'calculate_subtotal'",405],["T_WHITESPACE"," ",405],["T_DOUBLE_ARROW","=>",405],["T_WHITESPACE"," ",405],["T_LNUMBER","1",405],",",["T_WHITESPACE","\n            ",405],"]",",",["T_WHITESPACE","\n            ",406],"[",["T_WHITESPACE","\n                ",407],["T_CONSTANT_ENCAPSED_STRING","'code'",408],["T_WHITESPACE"," ",408],["T_DOUBLE_ARROW","=>",408],["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'Highest Rate'",408],",",["T_WHITESPACE","\n                ",408],["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_ids'",409],["T_WHITESPACE"," ",409],["T_DOUBLE_ARROW","=>",409],["T_WHITESPACE"," ",409],"[",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","taxClasses",409],"[",["T_CONSTANT_ENCAPSED_STRING","'DefaultCustomerClass'",409],"]",",",["T_WHITESPACE"," ",409],["T_LNUMBER","3",409],"]",",",["T_WHITESPACE","\n                ",409],["T_CONSTANT_ENCAPSED_STRING","'product_tax_class_ids'",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],"[",["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","taxClasses",410],"[",["T_CONSTANT_ENCAPSED_STRING","'HigherProductClass'",410],"]","]",",",["T_WHITESPACE","\n                ",410],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_ids'",411],["T_WHITESPACE"," ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],["T_STRING","array_values",411],"(",["T_VARIABLE","$higherRates",411],")",",",["T_WHITESPACE","\n                ",411],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_LNUMBER","1",412],",",["T_WHITESPACE","\n                ",412],["T_CONSTANT_ENCAPSED_STRING","'priority'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_LNUMBER","1",413],",",["T_WHITESPACE","\n                ",413],["T_CONSTANT_ENCAPSED_STRING","'calculate_subtotal'",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_LNUMBER","0",414],",",["T_WHITESPACE","\n            ",414],"]",",",["T_WHITESPACE","\n        ",415],"]",")",";",["T_WHITESPACE","\n\n        ",416],["T_COMMENT","\/\/ For cleanup\n",418],["T_WHITESPACE","        ",419],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","taxRates",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","array_merge",419],"(",["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","taxRates",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$higherRates",419],")",";",["T_WHITESPACE","\n    ",419],"}",["T_WHITESPACE","\n\n    ",420],["T_DOC_COMMENT","\/**\n     * Helper function that tears down some default rules\n     *\/",422],["T_WHITESPACE","\n    ",424],["T_PRIVATE","private",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","tearDownDefaultRules",425],"(",")",["T_WHITESPACE","\n    ",425],"{",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","taxRuleFixtureFactory",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","deleteTaxRules",427],"(",["T_STRING","array_values",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","taxRules",427],")",")",";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","taxRuleFixtureFactory",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","deleteTaxRates",428],"(",["T_STRING","array_values",428],"(",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","taxRates",428],")",")",";",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","taxRuleFixtureFactory",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","deleteTaxClasses",429],"(",["T_STRING","array_values",429],"(",["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","taxClasses",429],")",")",";",["T_WHITESPACE","\n    ",429],"}",["T_WHITESPACE","\n\n    ",430],["T_DOC_COMMENT","\/**\n     * Creates Tax Rule Data Object\n     *\n     * @return \\Magento\\Tax\\Api\\Data\\TaxRuleInterface\n     *\/",432],["T_WHITESPACE","\n    ",436],["T_PRIVATE","private",437],["T_WHITESPACE"," ",437],["T_FUNCTION","function",437],["T_WHITESPACE"," ",437],["T_STRING","createTaxRuleDataObject",437],"(",")",["T_WHITESPACE","\n    ",437],"{",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$taxRule",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","taxRuleFactory",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","create",439],"(",")",";",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$taxRule",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","setCode",440],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",440],")",["T_WHITESPACE","\n            ",440],["T_OBJECT_OPERATOR","->",441],["T_STRING","setCustomerTaxClassIds",441],"(","[",["T_LNUMBER","3",441],"]",")",["T_WHITESPACE","\n            ",441],["T_OBJECT_OPERATOR","->",442],["T_STRING","setProductTaxClassIds",442],"(","[",["T_LNUMBER","2",442],"]",")",["T_WHITESPACE","\n            ",442],["T_OBJECT_OPERATOR","->",443],["T_STRING","setTaxRateIds",443],"(","[",["T_LNUMBER","2",443],"]",")",["T_WHITESPACE","\n            ",443],["T_OBJECT_OPERATOR","->",444],["T_STRING","setPriority",444],"(",["T_LNUMBER","0",444],")",["T_WHITESPACE","\n            ",444],["T_OBJECT_OPERATOR","->",445],["T_STRING","setPosition",445],"(",["T_LNUMBER","1",445],")",";",["T_WHITESPACE","\n        ",445],["T_RETURN","return",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$taxRule",446],";",["T_WHITESPACE","\n    ",446],"}",["T_WHITESPACE","\n",447],"}",["T_WHITESPACE","\n",448]]
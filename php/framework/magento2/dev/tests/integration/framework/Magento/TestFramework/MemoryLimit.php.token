[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * A tool for limiting allowed memory usage and memory leaks\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","MemoryLimit",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\TestFramework\\Helper\\Memory\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_PRIVATE","private",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$_helper",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * @var int\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_memCap",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_LNUMBER","0",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var int\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_leakCap",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_LNUMBER","0",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Initialize with the values\n     *\n     * @param string $memCap\n     * @param string $leakCap\n     * @param \\Magento\\TestFramework\\Helper\\Memory $helper\n     * @throws \\InvalidArgumentException\n     *\/",27],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","__construct",35],"(",["T_VARIABLE","$memCap",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$leakCap",35],",",["T_WHITESPACE"," ",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","TestFramework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Helper",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Memory",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$helper",35],")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","_memCap",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$memCap",37],["T_WHITESPACE"," ",37],"?",["T_WHITESPACE"," ",37],["T_VARIABLE","$helper",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","convertToBytes",37],"(",["T_VARIABLE","$memCap",37],")",["T_WHITESPACE"," ",37],":",["T_WHITESPACE"," ",37],["T_LNUMBER","0",37],";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","_leakCap",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$leakCap",38],["T_WHITESPACE"," ",38],"?",["T_WHITESPACE"," ",38],["T_VARIABLE","$helper",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","convertToBytes",38],"(",["T_VARIABLE","$leakCap",38],")",["T_WHITESPACE"," ",38],":",["T_WHITESPACE"," ",38],["T_LNUMBER","0",38],";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","_helper",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$helper",39],";",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Get a header printout\n     *\n     * @return string\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_STATIC","static",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","printHeader",47],"(",")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_RETURN","return",49],["T_WHITESPACE"," ",49],["T_STRING","PHP_EOL",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'=== Memory Usage System Stats ==='",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_STRING","PHP_EOL",49],";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Get statistics printout\n     *\n     * @return string\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","printStats",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_LIST","list",59],"(",["T_VARIABLE","$usage",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$leak",59],")",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_getUsage",59],"(",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$result",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],"[","]",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$msg",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","sprintf",62],"(",["T_WHITESPACE","\n            ",62],["T_CONSTANT_ENCAPSED_STRING","\"Memory usage (OS):\\t%s (%.2F%% of %s reported by PHP\"",63],",",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_toMb",64],"(",["T_VARIABLE","$usage",64],")",",",["T_WHITESPACE","\n            ",64],["T_LNUMBER","100",65],["T_WHITESPACE"," ",65],"*",["T_WHITESPACE"," ",65],["T_VARIABLE","$usage",65],["T_WHITESPACE"," ",65],"\/",["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$usage",65],["T_WHITESPACE"," ",65],"-",["T_WHITESPACE"," ",65],["T_VARIABLE","$leak",65],")",",",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_toMb",66],"(",["T_VARIABLE","$usage",66],["T_WHITESPACE"," ",66],"-",["T_WHITESPACE"," ",66],["T_VARIABLE","$leak",66],")",["T_WHITESPACE","\n        ",66],")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$percentMsg",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'%.2F%% of configured %s limit'",68],";",["T_WHITESPACE","\n        ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_memCap",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$msg",70],["T_WHITESPACE"," ",70],["T_CONCAT_EQUAL",".=",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","', '",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_STRING","sprintf",70],"(",["T_VARIABLE","$percentMsg",70],",",["T_WHITESPACE"," ",70],["T_LNUMBER","100",70],["T_WHITESPACE"," ",70],"*",["T_WHITESPACE"," ",70],["T_VARIABLE","$usage",70],["T_WHITESPACE"," ",70],"\/",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_memCap",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_toMb",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_memCap",70],")",")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$result",72],"[","]",["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"\"",["T_CURLY_OPEN","{",72],["T_VARIABLE","$msg",72],"}",["T_ENCAPSED_AND_WHITESPACE",")",72],"\"",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$msg",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","sprintf",74],"(",["T_CONSTANT_ENCAPSED_STRING","\"Estimated memory leak:\\t%s (%.2F%% of used memory\"",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_toMb",74],"(",["T_VARIABLE","$leak",74],")",",",["T_WHITESPACE"," ",74],["T_LNUMBER","100",74],["T_WHITESPACE"," ",74],"*",["T_WHITESPACE"," ",74],["T_VARIABLE","$leak",74],["T_WHITESPACE"," ",74],"\/",["T_WHITESPACE"," ",74],["T_VARIABLE","$usage",74],")",";",["T_WHITESPACE","\n        ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_leakCap",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$msg",76],["T_WHITESPACE"," ",76],["T_CONCAT_EQUAL",".=",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","', '",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_STRING","sprintf",76],"(",["T_VARIABLE","$percentMsg",76],",",["T_WHITESPACE"," ",76],["T_LNUMBER","100",76],["T_WHITESPACE"," ",76],"*",["T_WHITESPACE"," ",76],["T_VARIABLE","$leak",76],["T_WHITESPACE"," ",76],"\/",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_leakCap",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_toMb",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_leakCap",76],")",")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$result",78],"[","]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"\"",["T_CURLY_OPEN","{",78],["T_VARIABLE","$msg",78],"}",["T_ENCAPSED_AND_WHITESPACE",")",78],"\"",";",["T_WHITESPACE","\n\n        ",78],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_STRING","implode",80],"(",["T_STRING","PHP_EOL",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$result",80],")",["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_STRING","PHP_EOL",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Convert bytes to mebibytes (2^20)\n     *\n     * @param int $bytes\n     * @return string\n     *\/",83],["T_WHITESPACE","\n    ",88],["T_PRIVATE","private",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","_toMb",89],"(",["T_VARIABLE","$bytes",89],")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_STRING","sprintf",91],"(",["T_CONSTANT_ENCAPSED_STRING","'%.2FM'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$bytes",91],["T_WHITESPACE"," ",91],"\/",["T_WHITESPACE"," ",91],"(",["T_LNUMBER","1024",91],["T_WHITESPACE"," ",91],"*",["T_WHITESPACE"," ",91],["T_LNUMBER","1024",91],")",")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Raise error if memory usage breaks configured thresholds\n     *\n     * @return null\n     * @throws \\LogicException\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","validateUsage",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_memCap",102],["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],"!",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_leakCap",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","null",103],";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_LIST","list",105],"(",["T_VARIABLE","$usage",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$leak",105],")",["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_getUsage",105],"(",")",";",["T_WHITESPACE","\n        ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_memCap",106],["T_WHITESPACE"," ",106],["T_BOOLEAN_AND","&&",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$usage",106],["T_WHITESPACE"," ",106],["T_IS_GREATER_OR_EQUAL",">=",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_memCap",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_THROW","throw",107],["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_NS_SEPARATOR","\\",107],["T_STRING","LogicException",107],"(",["T_WHITESPACE","\n                ",107],"\"",["T_ENCAPSED_AND_WHITESPACE","Memory limit of ",108],["T_CURLY_OPEN","{",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_toMb",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_memCap",108],")","}",["T_ENCAPSED_AND_WHITESPACE"," (",108],["T_CURLY_OPEN","{",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_memCap",108],"}",["T_ENCAPSED_AND_WHITESPACE"," bytes) has been reached.",108],"\"",["T_WHITESPACE","\n            ",108],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_leakCap",111],["T_WHITESPACE"," ",111],["T_BOOLEAN_AND","&&",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$leak",111],["T_WHITESPACE"," ",111],["T_IS_GREATER_OR_EQUAL",">=",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_leakCap",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_THROW","throw",112],["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_NS_SEPARATOR","\\",112],["T_STRING","LogicException",112],"(",["T_WHITESPACE","\n                ",112],"\"",["T_ENCAPSED_AND_WHITESPACE","Estimated memory leak limit of ",113],["T_CURLY_OPEN","{",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_toMb",113],"(",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_leakCap",114],["T_WHITESPACE","\n                ",114],")","}","\"",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],"\"",["T_ENCAPSED_AND_WHITESPACE"," (",115],["T_CURLY_OPEN","{",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_leakCap",115],"}",["T_ENCAPSED_AND_WHITESPACE"," bytes) has been reached.",115],"\"",["T_WHITESPACE","\n            ",115],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Usage\/leak getter sub-routine\n     *\n     * @return array\n     *\/",120],["T_WHITESPACE","\n    ",124],["T_PRIVATE","private",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","_getUsage",125],"(",")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$usage",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_helper",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getRealMemoryUsage",127],"(",")",";",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],"[",["T_VARIABLE","$usage",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$usage",128],["T_WHITESPACE"," ",128],"-",["T_WHITESPACE"," ",128],["T_STRING","memory_get_usage",128],"(",["T_STRING","true",128],")","]",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n",129],"}",["T_WHITESPACE","\n",130]]
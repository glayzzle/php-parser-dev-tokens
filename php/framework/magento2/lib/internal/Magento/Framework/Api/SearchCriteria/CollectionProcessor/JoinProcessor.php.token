[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Api",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SearchCriteria",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CollectionProcessor",6],";",["T_WHITESPACE","\n\n\n",6],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SearchCriteria",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CollectionProcessor",9],["T_NS_SEPARATOR","\\",9],["T_STRING","JoinProcessor",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CustomJoinInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","SearchCriteria",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CollectionProcessorInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","SearchCriteriaInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Data",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Collection",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AbstractDb",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","JoinProcessor",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_STRING","CollectionProcessorInterface",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var CustomJoinInterface[]\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$joins",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$fieldMapping",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/** @var array  *\/",26],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$appliedFields",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[","]",";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @param CustomJoinInterface[] $customFilters\n     * @param array $fieldMapping\n     *\/",29],["T_WHITESPACE","\n    ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","__construct",33],"(",["T_WHITESPACE","\n        ",33],["T_ARRAY","array",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$customJoins",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"[","]",",",["T_WHITESPACE","\n        ",34],["T_ARRAY","array",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$fieldMapping",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],"[","]",["T_WHITESPACE","\n    ",35],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","joins",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$customJoins",37],";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","fieldMapping",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$fieldMapping",38],";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Apply Search Criteria Filters to collection only if we need this\n     *\n     * @param SearchCriteriaInterface $searchCriteria\n     * @param AbstractDb $collection\n     * @return void\n     *\/",41],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","process",48],"(",["T_STRING","SearchCriteriaInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$searchCriteria",48],",",["T_WHITESPACE"," ",48],["T_STRING","AbstractDb",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$collection",48],")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_IF","if",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$searchCriteria",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getFilterGroups",50],"(",")",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_COMMENT","\/\/Process filters\n",51],["T_WHITESPACE","            ",52],["T_FOREACH","foreach",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$searchCriteria",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getFilterGroups",52],"(",")",["T_WHITESPACE"," ",52],["T_AS","as",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$group",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n                ",52],["T_FOREACH","foreach",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$group",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getFilters",53],"(",")",["T_WHITESPACE"," ",53],["T_AS","as",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$filter",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                    ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(","!",["T_ISSET","isset",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","appliedFields",54],"[",["T_VARIABLE","$filter",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getField",54],"(",")","]",")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","applyCustomJoin",55],"(",["T_VARIABLE","$filter",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getField",55],"(",")",",",["T_WHITESPACE"," ",55],["T_VARIABLE","$collection",55],")",";",["T_WHITESPACE","\n                        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","appliedFields",56],"[",["T_VARIABLE","$filter",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getField",56],"(",")","]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","true",56],";",["T_WHITESPACE","\n                    ",56],"}",["T_WHITESPACE","\n                ",57],"}",["T_WHITESPACE","\n            ",58],"}",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n\n        ",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$searchCriteria",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getSortOrders",62],"(",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_COMMENT","\/\/ Process Sortings\n",63],["T_WHITESPACE","            ",64],["T_FOREACH","foreach",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$searchCriteria",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getSortOrders",64],"(",")",["T_WHITESPACE"," ",64],["T_AS","as",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$order",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n                ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(","!",["T_ISSET","isset",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","appliedFields",65],"[",["T_VARIABLE","$order",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getField",65],"(",")","]",")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","applyCustomJoin",66],"(",["T_VARIABLE","$order",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getField",66],"(",")",",",["T_WHITESPACE"," ",66],["T_VARIABLE","$collection",66],")",";",["T_WHITESPACE","\n                    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","appliedFields",67],"[",["T_VARIABLE","$order",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getField",67],"(",")","]",["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","true",67],";",["T_WHITESPACE","\n                ",67],"}",["T_WHITESPACE","\n            ",68],"}",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Apply join to collection\n     *\n     * @param string $field\n     * @param AbstractDb $collection\n     * @return void\n     *\/",73],["T_WHITESPACE","\n    ",79],["T_PRIVATE","private",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","applyCustomJoin",80],"(",["T_VARIABLE","$field",80],",",["T_WHITESPACE"," ",80],["T_STRING","AbstractDb",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$collection",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$field",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getFieldMapping",82],"(",["T_VARIABLE","$field",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$customJoin",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getCustomJoin",83],"(",["T_VARIABLE","$field",83],")",";",["T_WHITESPACE","\n\n        ",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$customJoin",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$customJoin",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","apply",86],"(",["T_VARIABLE","$collection",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Return custom filters for field if exists\n     *\n     * @param string $field\n     * @return CustomJoinInterface|null\n     * @throws \\InvalidArgumentException\n     *\/",90],["T_WHITESPACE","\n    ",96],["T_PRIVATE","private",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getCustomJoin",97],"(",["T_VARIABLE","$field",97],")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$filter",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","null",99],";",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_ISSET","isset",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","joins",100],"[",["T_VARIABLE","$field",100],"]",")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$filter",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","joins",101],"[",["T_VARIABLE","$field",101],"]",";",["T_WHITESPACE","\n            ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!","(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","joins",102],"[",["T_VARIABLE","$field",102],"]",["T_WHITESPACE"," ",102],["T_INSTANCEOF","instanceof",102],["T_WHITESPACE"," ",102],["T_STRING","CustomJoinInterface",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_THROW","throw",103],["T_WHITESPACE"," ",103],["T_NEW","new",103],["T_WHITESPACE"," ",103],["T_NS_SEPARATOR","\\",103],["T_STRING","InvalidArgumentException",103],"(",["T_WHITESPACE","\n                    ",103],["T_STRING","sprintf",104],"(",["T_WHITESPACE","\n                        ",104],["T_CONSTANT_ENCAPSED_STRING","'Custom join for %s must implement %s interface.'",105],",",["T_WHITESPACE","\n                        ",105],["T_VARIABLE","$field",106],",",["T_WHITESPACE","\n                        ",106],["T_STRING","CustomJoinInterface",107],["T_DOUBLE_COLON","::",107],["T_CLASS","class",107],["T_WHITESPACE","\n                    ",107],")",["T_WHITESPACE","\n                ",108],")",";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$filter",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Return mapped field name\n     *\n     * @param string $field\n     * @return string\n     *\/",115],["T_WHITESPACE","\n    ",120],["T_PRIVATE","private",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getFieldMapping",121],"(",["T_VARIABLE","$field",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_ISSET","isset",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","fieldMapping",123],"[",["T_VARIABLE","$field",123],"]",")",["T_WHITESPACE"," ",123],"?",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","fieldMapping",123],"[",["T_VARIABLE","$field",123],"]",["T_WHITESPACE"," ",123],":",["T_WHITESPACE"," ",123],["T_VARIABLE","$field",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n",124],"}",["T_WHITESPACE","\n",125]]
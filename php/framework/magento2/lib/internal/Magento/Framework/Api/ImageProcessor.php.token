[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Framework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Api",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ImageContentInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Filesystem",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DirectoryList",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InputException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Filesystem",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Phrase",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Class ImageProcessor\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","ImageProcessor",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","ImageProcessorInterface",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * MIME type\/extension map\n     *\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$mimeTypeExtensionMap",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],"[",["T_WHITESPACE","\n        ",26],["T_CONSTANT_ENCAPSED_STRING","'image\/jpg'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'jpg'",27],",",["T_WHITESPACE","\n        ",27],["T_CONSTANT_ENCAPSED_STRING","'image\/jpeg'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'jpg'",28],",",["T_WHITESPACE","\n        ",28],["T_CONSTANT_ENCAPSED_STRING","'image\/gif'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'gif'",29],",",["T_WHITESPACE","\n        ",29],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'png'",30],",",["T_WHITESPACE","\n    ",30],"]",";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var Filesystem\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PRIVATE","private",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$filesystem",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var Filesystem\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$contentValidator",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var DataObjectHelper\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PRIVATE","private",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$dataObjectHelper",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$logger",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @var Uploader\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_PRIVATE","private",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$uploader",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\WriteInterface\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PRIVATE","private",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$mediaDirectory",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @param Filesystem $fileSystem\n     * @param ImageContentValidatorInterface $contentValidator\n     * @param DataObjectHelper $dataObjectHelper\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param Uploader $uploader\n     *\/",63],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","__construct",70],"(",["T_WHITESPACE","\n        ",70],["T_STRING","Filesystem",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$fileSystem",71],",",["T_WHITESPACE","\n        ",71],["T_STRING","ImageContentValidatorInterface",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$contentValidator",72],",",["T_WHITESPACE","\n        ",72],["T_STRING","DataObjectHelper",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$dataObjectHelper",73],",",["T_WHITESPACE","\n        ",73],["T_NS_SEPARATOR","\\",74],["T_STRING","Psr",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Log",74],["T_NS_SEPARATOR","\\",74],["T_STRING","LoggerInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$logger",74],",",["T_WHITESPACE","\n        ",74],["T_STRING","Uploader",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$uploader",75],["T_WHITESPACE","\n    ",75],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","filesystem",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$fileSystem",77],";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","contentValidator",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$contentValidator",78],";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","dataObjectHelper",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$dataObjectHelper",79],";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","logger",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$logger",80],";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","uploader",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$uploader",81],";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","mediaDirectory",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","filesystem",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getDirectoryWrite",82],"(",["T_STRING","DirectoryList",82],["T_DOUBLE_COLON","::",82],["T_STRING","MEDIA",82],")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",85],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","save",88],"(",["T_WHITESPACE","\n        ",88],["T_STRING","CustomAttributesDataInterface",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$dataObjectWithCustomAttributes",89],",",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$entityType",90],",",["T_WHITESPACE","\n        ",90],["T_STRING","CustomAttributesDataInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$previousCustomerData",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","null",91],["T_WHITESPACE","\n    ",91],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n        ",92],["T_COMMENT","\/\/Get all Image related custom attributes\n",93],["T_WHITESPACE","        ",94],["T_VARIABLE","$imageDataObjects",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","dataObjectHelper",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getCustomAttributeValueByType",94],"(",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$dataObjectWithCustomAttributes",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getCustomAttributes",95],"(",")",",",["T_WHITESPACE","\n            ",95],["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Framework",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Api",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Data",96],["T_NS_SEPARATOR","\\",96],["T_STRING","ImageContentInterface",96],["T_DOUBLE_COLON","::",96],["T_CLASS","class",96],["T_WHITESPACE","\n        ",96],")",";",["T_WHITESPACE","\n\n        ",97],["T_COMMENT","\/\/ Return if no images to process\n",99],["T_WHITESPACE","        ",100],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_EMPTY","empty",100],"(",["T_VARIABLE","$imageDataObjects",100],")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$dataObjectWithCustomAttributes",101],";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n        ",102],["T_COMMENT","\/\/ For every image, save it and replace it with corresponding Eav data object\n",104],["T_WHITESPACE","        ",105],["T_DOC_COMMENT","\/** @var $imageDataObject \\Magento\\Framework\\Api\\AttributeValue *\/",105],["T_WHITESPACE","\n        ",105],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$imageDataObjects",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$imageDataObject",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n\n            ",106],["T_DOC_COMMENT","\/** @var $imageContent \\Magento\\Framework\\Api\\Data\\ImageContentInterface *\/",108],["T_WHITESPACE","\n            ",108],["T_VARIABLE","$imageContent",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$imageDataObject",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getValue",109],"(",")",";",["T_WHITESPACE","\n\n            ",109],["T_VARIABLE","$filename",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","processImageContent",111],"(",["T_VARIABLE","$entityType",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$imageContent",111],")",";",["T_WHITESPACE","\n\n            ",111],["T_COMMENT","\/\/Set filename from static media location into data object\n",113],["T_WHITESPACE","            ",114],["T_VARIABLE","$dataObjectWithCustomAttributes",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","setCustomAttribute",114],"(",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$imageDataObject",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getAttributeCode",115],"(",")",",",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$filename",116],["T_WHITESPACE","\n            ",116],")",";",["T_WHITESPACE","\n\n            ",117],["T_COMMENT","\/\/Delete previously saved image if it exists\n",119],["T_WHITESPACE","            ",120],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$previousCustomerData",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$previousImageAttribute",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$previousCustomerData",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getCustomAttribute",121],"(",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$imageDataObject",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getAttributeCode",122],"(",")",["T_WHITESPACE","\n                ",122],")",";",["T_WHITESPACE","\n                ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$previousImageAttribute",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                    ",124],["T_VARIABLE","$previousImagePath",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$previousImageAttribute",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getValue",125],"(",")",";",["T_WHITESPACE","\n                    ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_EMPTY","empty",126],"(",["T_VARIABLE","$previousImagePath",126],")",["T_WHITESPACE"," ",126],["T_BOOLEAN_AND","&&",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$previousImagePath",126],["T_WHITESPACE"," ",126],["T_IS_NOT_EQUAL","!=",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$filename",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                        ",126],"@",["T_STRING","unlink",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","mediaDirectory",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getAbsolutePath",127],"(",")",["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$entityType",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$previousImagePath",127],")",";",["T_WHITESPACE","\n                    ",127],"}",["T_WHITESPACE","\n                ",128],"}",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$dataObjectWithCustomAttributes",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",136],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","processImageContent",139],"(",["T_VARIABLE","$entityType",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$imageContent",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(","!",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","contentValidator",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","isValid",141],"(",["T_VARIABLE","$imageContent",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_THROW","throw",142],["T_WHITESPACE"," ",142],["T_NEW","new",142],["T_WHITESPACE"," ",142],["T_STRING","InputException",142],"(",["T_NEW","new",142],["T_WHITESPACE"," ",142],["T_STRING","Phrase",142],"(",["T_CONSTANT_ENCAPSED_STRING","'The image content is not valid.'",142],")",")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$fileContent",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],"@",["T_STRING","base64_decode",145],"(",["T_VARIABLE","$imageContent",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getBase64EncodedData",145],"(",")",",",["T_WHITESPACE"," ",145],["T_STRING","true",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$tmpDirectory",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","filesystem",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getDirectoryWrite",146],"(",["T_STRING","DirectoryList",146],["T_DOUBLE_COLON","::",146],["T_STRING","SYS_TMP",146],")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$fileName",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getFileName",147],"(",["T_VARIABLE","$imageContent",147],")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$tmpFileName",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","substr",148],"(",["T_STRING","md5",148],"(",["T_STRING","rand",148],"(",")",")",",",["T_WHITESPACE"," ",148],["T_LNUMBER","0",148],",",["T_WHITESPACE"," ",148],["T_LNUMBER","7",148],")",["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'.'",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_VARIABLE","$fileName",148],";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$tmpDirectory",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","writeFile",149],"(",["T_VARIABLE","$tmpFileName",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$fileContent",149],")",";",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$fileAttributes",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],"[",["T_WHITESPACE","\n            ",151],["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$tmpDirectory",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getAbsolutePath",152],"(",")",["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_VARIABLE","$tmpFileName",152],",",["T_WHITESPACE","\n            ",152],["T_CONSTANT_ENCAPSED_STRING","'name'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$imageContent",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getName",153],"(",")",["T_WHITESPACE","\n        ",153],"]",";",["T_WHITESPACE","\n\n        ",154],["T_TRY","try",156],["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","uploader",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","processFileAttributes",157],"(",["T_VARIABLE","$fileAttributes",157],")",";",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","uploader",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setFilesDispersion",158],"(",["T_STRING","true",158],")",";",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","uploader",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","setFilenamesCaseSensitivity",159],"(",["T_STRING","false",159],")",";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","uploader",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","setAllowRenameFiles",160],"(",["T_STRING","true",160],")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$destinationFolder",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$entityType",161],";",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","uploader",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","save",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","mediaDirectory",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getAbsolutePath",162],"(",["T_VARIABLE","$destinationFolder",162],")",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$fileName",162],")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE"," ",163],["T_CATCH","catch",163],["T_WHITESPACE"," ",163],"(",["T_NS_SEPARATOR","\\",163],["T_STRING","Exception",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$e",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","logger",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","critical",164],"(",["T_VARIABLE","$e",164],")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n        ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","uploader",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getUploadedFileName",166],"(",")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * @param string $mimeType\n     * @return string\n     *\/",169],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","getMimeTypeExtension",173],"(",["T_VARIABLE","$mimeType",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_ISSET","isset",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","mimeTypeExtensionMap",175],"[",["T_VARIABLE","$mimeType",175],"]",")",["T_WHITESPACE"," ",175],"?",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","mimeTypeExtensionMap",175],"[",["T_VARIABLE","$mimeType",175],"]",["T_WHITESPACE"," ",175],":",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","''",175],";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * @param ImageContentInterface $imageContent\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",178],["T_WHITESPACE","\n    ",182],["T_PRIVATE","private",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","getFileName",183],"(",["T_VARIABLE","$imageContent",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$fileName",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$imageContent",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getName",185],"(",")",";",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_STRING","pathinfo",186],"(",["T_VARIABLE","$fileName",186],",",["T_WHITESPACE"," ",186],["T_STRING","PATHINFO_EXTENSION",186],")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(","!",["T_VARIABLE","$imageContent",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getType",187],"(",")",["T_WHITESPACE"," ",187],["T_BOOLEAN_OR","||",187],["T_WHITESPACE"," ",187],"!",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getMimeTypeExtension",187],"(",["T_VARIABLE","$imageContent",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getType",187],"(",")",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_THROW","throw",188],["T_WHITESPACE"," ",188],["T_NEW","new",188],["T_WHITESPACE"," ",188],["T_STRING","InputException",188],"(",["T_NEW","new",188],["T_WHITESPACE"," ",188],["T_STRING","Phrase",188],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot recognize image extension.'",188],")",")",";",["T_WHITESPACE","\n            ",188],"}",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$fileName",190],["T_WHITESPACE"," ",190],["T_CONCAT_EQUAL",".=",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'.'",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getMimeTypeExtension",190],"(",["T_VARIABLE","$imageContent",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getType",190],"(",")",")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n        ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$fileName",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n",193],"}",["T_WHITESPACE","\n",194]]
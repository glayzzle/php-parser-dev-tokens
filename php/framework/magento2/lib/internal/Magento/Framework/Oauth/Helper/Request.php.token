[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Oauth",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Helper",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RequestInterface",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","Request",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_COMMENT","\/**#@+\n     * HTTP Response Codes\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_CONST","const",15],["T_WHITESPACE"," ",15],["T_STRING","HTTP_OK",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_LNUMBER","200",15],";",["T_WHITESPACE","\n\n    ",15],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","HTTP_BAD_REQUEST",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","400",17],";",["T_WHITESPACE","\n\n    ",17],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","HTTP_UNAUTHORIZED",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_LNUMBER","401",19],";",["T_WHITESPACE","\n\n    ",19],["T_CONST","const",21],["T_WHITESPACE"," ",21],["T_STRING","HTTP_METHOD_NOT_ALLOWED",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_LNUMBER","405",21],";",["T_WHITESPACE","\n\n    ",21],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","HTTP_INTERNAL_ERROR",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_LNUMBER","500",23],";",["T_WHITESPACE","\n\n    ",23],["T_COMMENT","\/**#@-*\/",25],["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Process HTTP request object and prepare for token validation\n     *\n     * @param RequestInterface $httpRequest\n     * @return array\n     *\/",27],["T_WHITESPACE","\n    ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","prepareRequest",33],"(",["T_VARIABLE","$httpRequest",33],")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$oauthParams",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","_processRequest",35],"(",["T_WHITESPACE","\n            ",35],["T_VARIABLE","$httpRequest",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getHeader",36],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorization'",36],")",",",["T_WHITESPACE","\n            ",36],["T_VARIABLE","$httpRequest",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getHeader",37],"(",["T_NS_SEPARATOR","\\",37],["T_STRING","Zend_Http_Client",37],["T_DOUBLE_COLON","::",37],["T_STRING","CONTENT_TYPE",37],")",",",["T_WHITESPACE","\n            ",37],["T_VARIABLE","$httpRequest",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getContent",38],"(",")",",",["T_WHITESPACE","\n            ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getRequestUrl",39],"(",["T_VARIABLE","$httpRequest",39],")",["T_WHITESPACE","\n        ",39],")",";",["T_WHITESPACE","\n        ",40],["T_RETURN","return",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$oauthParams",41],";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Compute the request Url from the Http request\n     *\n     * @param RequestInterface $httpRequest\n     * @return string\n     *\/",44],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","getRequestUrl",50],"(",["T_VARIABLE","$httpRequest",50],")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_RETURN","return",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$httpRequest",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getScheme",52],"(",")",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$httpRequest",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getHttpHost",52],"(",["T_STRING","false",52],")",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$httpRequest",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getRequestUri",52],"(",")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Process oauth related protocol information and return as an array\n     *\n     * @param string $authHeaderValue\n     * @param string $contentTypeHeader\n     * @param string $requestBodyString\n     * @param string $requestUrl\n     * @return array\n     * merged array of oauth protocols and request parameters. eg :\n     * <pre>\n     * array (\n     *         'oauth_version' => '1.0',\n     *         'oauth_signature_method' => 'HMAC-SHA1',\n     *         'oauth_nonce' => 'rI7PSWxTZRHWU3R',\n     *         'oauth_timestamp' => '1377183099',\n     *         'oauth_consumer_key' => 'a6aa81cc3e65e2960a4879392445e718',\n     *         'oauth_signature' => 'VNg4mhFlXk7%2FvsxMqqUd5DWIj9s%3D'\n     * )\n     * <\/pre>\n     *\/",55],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","_processRequest",75],"(",["T_VARIABLE","$authHeaderValue",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$contentTypeHeader",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$requestBodyString",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$requestUrl",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$protocolParams",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],"[","]",";",["T_WHITESPACE","\n\n        ",77],["T_IF","if",79],["T_WHITESPACE"," ",79],"(","!",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_processHeader",79],"(",["T_VARIABLE","$authHeaderValue",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$protocolParams",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],"[","]",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n\n        ",81],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$contentTypeHeader",83],["T_WHITESPACE"," ",83],["T_BOOLEAN_AND","&&",83],["T_WHITESPACE"," ",83],["T_LNUMBER","0",83],["T_WHITESPACE"," ",83],["T_IS_IDENTICAL","===",83],["T_WHITESPACE"," ",83],["T_STRING","strpos",83],"(",["T_VARIABLE","$contentTypeHeader",83],",",["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Zend_Http_Client",83],["T_DOUBLE_COLON","::",83],["T_STRING","ENC_URLENCODED",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$protocolParamsNotSet",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"!",["T_VARIABLE","$protocolParams",84],";",["T_WHITESPACE","\n\n            ",84],["T_STRING","parse_str",86],"(",["T_VARIABLE","$requestBodyString",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$protocolBodyParams",86],")",";",["T_WHITESPACE","\n\n            ",86],["T_FOREACH","foreach",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$protocolBodyParams",88],["T_WHITESPACE"," ",88],["T_AS","as",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$bodyParamName",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$bodyParamValue",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(","!",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_isProtocolParameter",89],"(",["T_VARIABLE","$bodyParamName",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                    ",89],["T_VARIABLE","$protocolParams",90],"[",["T_VARIABLE","$bodyParamName",90],"]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$bodyParamValue",90],";",["T_WHITESPACE","\n                ",90],"}",["T_WHITESPACE"," ",91],["T_ELSEIF","elseif",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$protocolParamsNotSet",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                    ",91],["T_VARIABLE","$protocolParams",92],"[",["T_VARIABLE","$bodyParamName",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$bodyParamValue",92],";",["T_WHITESPACE","\n                ",92],"}",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$protocolParamsNotSet",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],"!",["T_VARIABLE","$protocolParams",96],";",["T_WHITESPACE","\n\n        ",96],["T_VARIABLE","$queryString",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Zend_Uri_Http",98],["T_DOUBLE_COLON","::",98],["T_STRING","fromString",98],"(",["T_VARIABLE","$requestUrl",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getQuery",98],"(",")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_extractQueryStringParams",99],"(",["T_VARIABLE","$protocolParams",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$queryString",99],")",";",["T_WHITESPACE","\n\n        ",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$protocolParamsNotSet",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_fetchProtocolParamsFromQuery",102],"(",["T_VARIABLE","$protocolParams",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$queryString",102],")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_COMMENT","\/\/ Combine request and header parameters\n",105],["T_WHITESPACE","        ",106],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$protocolParams",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Retrieve protocol parameters from query string\n     *\n     * @param array &$protocolParams\n     * @param array $queryString\n     * @return void\n     *\/",109],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","_fetchProtocolParamsFromQuery",116],"(","&",["T_VARIABLE","$protocolParams",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$queryString",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","is_array",118],"(",["T_VARIABLE","$queryString",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$queryString",119],["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$queryParamName",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$queryParamValue",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_isProtocolParameter",120],"(",["T_VARIABLE","$queryParamName",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                    ",120],["T_VARIABLE","$protocolParams",121],"[",["T_VARIABLE","$queryParamName",121],"]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$queryParamValue",121],";",["T_WHITESPACE","\n                ",121],"}",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Check if attribute is oAuth related\n     *\n     * @param string $attrName\n     * @return bool\n     *\/",127],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","_isProtocolParameter",133],"(",["T_VARIABLE","$attrName",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_BOOL_CAST","(bool)",135],["T_STRING","preg_match",135],"(",["T_CONSTANT_ENCAPSED_STRING","'\/oauth_[a-z_-]+\/'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$attrName",135],")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Process header parameters for Oauth\n     *\n     * @param string $authHeaderValue\n     * @param array &$protocolParams\n     * @return bool true if parameters from oauth headers are processed correctly\n     *\/",138],["T_WHITESPACE","\n    ",144],["T_PROTECTED","protected",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","_processHeader",145],"(",["T_VARIABLE","$authHeaderValue",145],",",["T_WHITESPACE"," ",145],"&",["T_VARIABLE","$protocolParams",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$authHeaderValue",147],["T_WHITESPACE"," ",147],["T_BOOLEAN_AND","&&",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'oauth'",147],["T_WHITESPACE"," ",147],["T_IS_IDENTICAL","===",147],["T_WHITESPACE"," ",147],["T_STRING","strtolower",147],"(",["T_STRING","substr",147],"(",["T_VARIABLE","$authHeaderValue",147],",",["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],",",["T_WHITESPACE"," ",147],["T_LNUMBER","5",147],")",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$authHeaderValue",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","substr",148],"(",["T_VARIABLE","$authHeaderValue",148],",",["T_WHITESPACE"," ",148],["T_LNUMBER","6",148],")",";",["T_WHITESPACE","\n            ",148],["T_COMMENT","\/\/ ignore 'OAuth ' at the beginning\n",149],["T_WHITESPACE","\n            ",150],["T_FOREACH","foreach",151],["T_WHITESPACE"," ",151],"(",["T_STRING","explode",151],"(",["T_CONSTANT_ENCAPSED_STRING","','",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$authHeaderValue",151],")",["T_WHITESPACE"," ",151],["T_AS","as",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$paramStr",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$nameAndValue",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","explode",152],"(",["T_CONSTANT_ENCAPSED_STRING","'='",152],",",["T_WHITESPACE"," ",152],["T_STRING","trim",152],"(",["T_VARIABLE","$paramStr",152],")",",",["T_WHITESPACE"," ",152],["T_LNUMBER","2",152],")",";",["T_WHITESPACE","\n\n                ",152],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_STRING","count",154],"(",["T_VARIABLE","$nameAndValue",154],")",["T_WHITESPACE"," ",154],"<",["T_WHITESPACE"," ",154],["T_LNUMBER","2",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                    ",154],["T_CONTINUE","continue",155],";",["T_WHITESPACE","\n                ",155],"}",["T_WHITESPACE","\n                ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_isProtocolParameter",157],"(",["T_VARIABLE","$nameAndValue",157],"[",["T_LNUMBER","0",157],"]",")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                    ",157],["T_VARIABLE","$protocolParams",158],"[",["T_STRING","rawurldecode",158],"(",["T_VARIABLE","$nameAndValue",158],"[",["T_LNUMBER","0",158],"]",")","]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","rawurldecode",158],"(",["T_STRING","trim",158],"(",["T_VARIABLE","$nameAndValue",158],"[",["T_LNUMBER","1",158],"]",",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'\"'",158],")",")",";",["T_WHITESPACE","\n                ",158],"}",["T_WHITESPACE","\n            ",159],"}",["T_WHITESPACE","\n            ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","true",161],";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_STRING","false",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Process query string for Oauth\n     *\n     * @param array &$protocolParams\n     * @param string $queryString\n     * @return void\n     *\/",166],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","_extractQueryStringParams",173],"(","&",["T_VARIABLE","$protocolParams",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$queryString",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$queryString",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_STRING","explode",176],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$queryString",176],")",["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$paramToValue",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$paramData",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","explode",177],"(",["T_CONSTANT_ENCAPSED_STRING","'='",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$paramToValue",177],")",";",["T_WHITESPACE","\n\n                ",177],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_LNUMBER","2",179],["T_WHITESPACE"," ",179],["T_IS_IDENTICAL","===",179],["T_WHITESPACE"," ",179],["T_STRING","count",179],"(",["T_VARIABLE","$paramData",179],")",["T_WHITESPACE"," ",179],["T_BOOLEAN_AND","&&",179],["T_WHITESPACE"," ",179],"!",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_isProtocolParameter",179],"(",["T_VARIABLE","$paramData",179],"[",["T_LNUMBER","0",179],"]",")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                    ",179],["T_VARIABLE","$protocolParams",180],"[",["T_STRING","rawurldecode",180],"(",["T_VARIABLE","$paramData",180],"[",["T_LNUMBER","0",180],"]",")","]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","rawurldecode",180],"(",["T_VARIABLE","$paramData",180],"[",["T_LNUMBER","1",180],"]",")",";",["T_WHITESPACE","\n                ",180],"}",["T_WHITESPACE","\n            ",181],"}",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Create response string for problem during request and set HTTP error code\n     *\n     * @param \\Exception $exception\n     * @param \\Magento\\Framework\\HTTP\\PhpEnvironment\\Response $response OPTIONAL If NULL - will use internal getter\n     * @return array\n     *\/",186],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","prepareErrorResponse",193],"(",["T_WHITESPACE","\n        ",193],["T_NS_SEPARATOR","\\",194],["T_STRING","Exception",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$exception",194],",",["T_WHITESPACE","\n        ",194],["T_NS_SEPARATOR","\\",195],["T_STRING","Magento",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Framework",195],["T_NS_SEPARATOR","\\",195],["T_STRING","HTTP",195],["T_NS_SEPARATOR","\\",195],["T_STRING","PhpEnvironment",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Response",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$response",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","null",195],["T_WHITESPACE","\n    ",195],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$errorMsg",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$exception",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getMessage",197],"(",")",";",["T_WHITESPACE","\n\n        ",197],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$exception",199],["T_WHITESPACE"," ",199],["T_INSTANCEOF","instanceof",199],["T_WHITESPACE"," ",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Magento",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Framework",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Oauth",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Exception",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$responseCode",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING","self",200],["T_DOUBLE_COLON","::",200],["T_STRING","HTTP_UNAUTHORIZED",200],";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE"," ",201],["T_ELSEIF","elseif",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$exception",201],["T_WHITESPACE"," ",201],["T_INSTANCEOF","instanceof",201],["T_WHITESPACE"," ",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Magento",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Framework",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Oauth",201],["T_NS_SEPARATOR","\\",201],["T_STRING","OauthInputException",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$responseCode",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","self",202],["T_DOUBLE_COLON","::",202],["T_STRING","HTTP_BAD_REQUEST",202],";",["T_WHITESPACE","\n            ",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$errorMsg",203],["T_WHITESPACE"," ",203],["T_IS_EQUAL","==",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'One or more input exceptions have occurred.'",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n                ",203],["T_VARIABLE","$errorMsg",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$exception",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getAggregatedErrorMessage",204],"(",")",";",["T_WHITESPACE","\n            ",204],"}",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE"," ",206],["T_ELSE","else",206],["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$errorMsg",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'internal_error&message='",207],["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$errorMsg",207],["T_WHITESPACE"," ",207],"?",["T_WHITESPACE"," ",207],["T_VARIABLE","$errorMsg",207],["T_WHITESPACE"," ",207],":",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'empty_message'",207],")",";",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$responseCode",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","self",208],["T_DOUBLE_COLON","::",208],["T_STRING","HTTP_INTERNAL_ERROR",208],";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n\n        ",209],["T_VARIABLE","$response",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","setHttpResponseCode",211],"(",["T_VARIABLE","$responseCode",211],")",";",["T_WHITESPACE","\n        ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],"[",["T_CONSTANT_ENCAPSED_STRING","'oauth_problem'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$errorMsg",212],"]",";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n",213],"}",["T_WHITESPACE","\n",214]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","App",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Runs given callback across given array of data and collects all PhpUnit assertion results.\n * Should be used in case data provider is huge to minimize overhead.\n *\/",8],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","AggregateInvoker",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_TestCase\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$_testCase",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * There is no PHPUnit internal API to determine whether --verbose or --debug options are passed.\n     * When verbose is true, data sets are gathered for any result, includind incomplete and skipped test.\n     * Only data sets for failed assertions are gathered otherwise.\n     *\n     * @var array\n     *\/",19],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_options",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],"[",["T_CONSTANT_ENCAPSED_STRING","'verbose'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_STRING","false",26],"]",";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @param \\PHPUnit_Framework_TestCase $testCase\n     * @param array $options\n     *\/",28],["T_WHITESPACE","\n    ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","__construct",32],"(",["T_VARIABLE","$testCase",32],",",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$options",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],"[","]",")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","_testCase",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$testCase",34],";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","_options",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$options",35],["T_WHITESPACE"," ",35],"+",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","_options",35],";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Collect all failed assertions and fail test in case such list is not empty.\n     * Incomplete and skipped test results are aggregated as well.\n     *\n     * @param callable $callback\n     * @param array[] $dataSource\n     * @return void\n     *\/",38],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","__invoke",46],"(",["T_CALLABLE","callable",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$callback",46],",",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$dataSource",46],")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$results",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],"[",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_IncompleteTestError'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],"[","]",",",["T_WHITESPACE","\n            ",49],["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_SkippedTestError'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],"[","]",",",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_AssertionFailedError'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],"[","]",",",["T_WHITESPACE","\n        ",51],"]",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$passed",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_LNUMBER","0",53],";",["T_WHITESPACE","\n        ",53],["T_FOREACH","foreach",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$dataSource",54],["T_WHITESPACE"," ",54],["T_AS","as",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$dataSetName",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$dataSet",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_TRY","try",55],["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                ",55],["T_STRING","call_user_func_array",56],"(",["T_VARIABLE","$callback",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$dataSet",56],")",";",["T_WHITESPACE","\n                ",56],["T_VARIABLE","$passed",57],["T_INC","++",57],";",["T_WHITESPACE","\n            ",57],"}",["T_WHITESPACE"," ",58],["T_CATCH","catch",58],["T_WHITESPACE"," ",58],"(",["T_NS_SEPARATOR","\\",58],["T_STRING","PHPUnit_Framework_IncompleteTestError",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$exception",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n                ",58],["T_VARIABLE","$results",59],"[",["T_STRING","get_class",59],"(",["T_VARIABLE","$exception",59],")","]","[","]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","prepareMessage",59],"(",["T_VARIABLE","$exception",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$dataSetName",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$dataSet",59],")",";",["T_WHITESPACE","\n            ",59],"}",["T_WHITESPACE"," ",60],["T_CATCH","catch",60],["T_WHITESPACE"," ",60],"(",["T_NS_SEPARATOR","\\",60],["T_STRING","PHPUnit_Framework_SkippedTestError",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$exception",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$results",61],"[",["T_STRING","get_class",61],"(",["T_VARIABLE","$exception",61],")","]","[","]",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","prepareMessage",61],"(",["T_VARIABLE","$exception",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$dataSetName",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$dataSet",61],")",";",["T_WHITESPACE","\n            ",61],"}",["T_WHITESPACE"," ",62],["T_CATCH","catch",62],["T_WHITESPACE"," ",62],"(",["T_NS_SEPARATOR","\\",62],["T_STRING","PHPUnit_Framework_AssertionFailedError",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$exception",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$results",63],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_AssertionFailedError'",63],"]","[","]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","prepareMessage",63],"(",["T_WHITESPACE","\n                    ",63],["T_VARIABLE","$exception",64],",",["T_WHITESPACE","\n                    ",64],["T_VARIABLE","$dataSetName",65],",",["T_WHITESPACE","\n                    ",65],["T_VARIABLE","$dataSet",66],["T_WHITESPACE","\n                ",66],")",";",["T_WHITESPACE","\n            ",67],"}",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","processResults",70],"(",["T_VARIABLE","$results",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$passed",70],")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * @param \\Exception $exception\n     * @param string $dataSetName\n     * @param mixed $dataSet\n     * @return string\n     *\/",73],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","prepareMessage",79],"(",["T_NS_SEPARATOR","\\",79],["T_STRING","Exception",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$exception",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$dataSetName",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$dataSet",79],")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_STRING","is_string",81],"(",["T_VARIABLE","$dataSetName",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$dataSetName",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","var_export",82],"(",["T_VARIABLE","$dataSet",82],",",["T_WHITESPACE"," ",82],["T_STRING","true",82],")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$exception",84],["T_WHITESPACE"," ",84],["T_INSTANCEOF","instanceof",84],["T_WHITESPACE"," ",84],["T_NS_SEPARATOR","\\",84],["T_STRING","PHPUnit_Framework_AssertionFailedError",84],["T_WHITESPACE","\n            ",84],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],"!",["T_VARIABLE","$exception",85],["T_WHITESPACE"," ",85],["T_INSTANCEOF","instanceof",85],["T_WHITESPACE"," ",85],["T_NS_SEPARATOR","\\",85],["T_STRING","PHPUnit_Framework_IncompleteTestError",85],["T_WHITESPACE","\n            ",85],["T_BOOLEAN_AND","&&",86],["T_WHITESPACE"," ",86],"!",["T_VARIABLE","$exception",86],["T_WHITESPACE"," ",86],["T_INSTANCEOF","instanceof",86],["T_WHITESPACE"," ",86],["T_NS_SEPARATOR","\\",86],["T_STRING","PHPUnit_Framework_SkippedTestError",86],["T_WHITESPACE","\n            ",86],["T_BOOLEAN_OR","||",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_options",87],"[",["T_CONSTANT_ENCAPSED_STRING","'verbose'",87],"]",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$dataSetName",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'Data set: '",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_VARIABLE","$dataSetName",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_STRING","PHP_EOL",88],";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE"," ",89],["T_ELSE","else",89],["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$dataSetName",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","''",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$dataSetName",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$exception",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getMessage",92],"(",")",["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","PHP_EOL",92],["T_WHITESPACE","\n        ",92],".",["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","PHPUnit_Util_Filter",93],["T_DOUBLE_COLON","::",93],["T_STRING","getFilteredStacktrace",93],"(",["T_VARIABLE","$exception",93],")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Analyze results of aggregated tests execution and complete test case appropriately\n     *\n     * @param array $results\n     * @param int $passed\n     * @return void\n     *\/",96],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","processResults",103],"(",["T_ARRAY","array",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$results",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$passed",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$totalCountsMessage",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","sprintf",105],"(",["T_WHITESPACE","\n            ",105],["T_CONSTANT_ENCAPSED_STRING","'Passed: %d, Failed: %d, Incomplete: %d, Skipped: %d.'",106],",",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$passed",107],",",["T_WHITESPACE","\n            ",107],["T_STRING","count",108],"(",["T_VARIABLE","$results",108],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_AssertionFailedError'",108],"]",")",",",["T_WHITESPACE","\n            ",108],["T_STRING","count",109],"(",["T_VARIABLE","$results",109],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_IncompleteTestError'",109],"]",")",",",["T_WHITESPACE","\n            ",109],["T_STRING","count",110],"(",["T_VARIABLE","$results",110],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_SkippedTestError'",110],"]",")",["T_WHITESPACE","\n        ",110],")",";",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$results",112],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_AssertionFailedError'",112],"]",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_testCase",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","fail",113],"(",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$totalCountsMessage",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_STRING","PHP_EOL",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_STRING","implode",114],"(",["T_STRING","PHP_EOL",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$results",114],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_AssertionFailedError'",114],"]",")",["T_WHITESPACE","\n            ",114],")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_VARIABLE","$results",117],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_IncompleteTestError'",117],"]",["T_WHITESPACE"," ",117],["T_BOOLEAN_AND","&&",117],["T_WHITESPACE"," ",117],"!",["T_VARIABLE","$results",117],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_SkippedTestError'",117],"]",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_RETURN","return",118],";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$message",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$totalCountsMessage",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_STRING","PHP_EOL",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_STRING","implode",120],"(",["T_WHITESPACE","\n            ",120],["T_STRING","PHP_EOL",121],",",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$results",122],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_IncompleteTestError'",122],"]",["T_WHITESPACE","\n        ",122],")",["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_STRING","PHP_EOL",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_STRING","implode",123],"(",["T_WHITESPACE","\n            ",123],["T_STRING","PHP_EOL",124],",",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$results",125],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_SkippedTestError'",125],"]",["T_WHITESPACE","\n        ",125],")",";",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$results",127],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_IncompleteTestError'",127],"]",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_testCase",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","markTestIncomplete",128],"(",["T_VARIABLE","$message",128],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE"," ",129],["T_ELSEIF","elseif",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$results",129],"[",["T_CONSTANT_ENCAPSED_STRING","'PHPUnit_Framework_SkippedTestError'",129],"]",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_testCase",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","markTestSkipped",130],"(",["T_VARIABLE","$message",130],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n",132],"}",["T_WHITESPACE","\n",133]]
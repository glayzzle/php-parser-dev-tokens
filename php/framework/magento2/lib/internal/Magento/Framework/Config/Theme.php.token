[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Theme configuration files handler\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Config",10],";",["T_WHITESPACE","\n\n",10],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Config",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Composer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Package",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Theme",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Is used for separation path of themes\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","THEME_PATH_SEPARATOR",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'\/'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Data extracted from the configuration file\n     *\n     * @var array\n     *\/",21],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_data",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Config\\Dom\\UrnResolver *\/",28],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$urnResolver",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Framework\\Config\\Dom\\UrnResolver $urnResolver\n     * @param string $configContent\n     *\/",31],["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","__construct",37],"(",["T_WHITESPACE","\n        ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Framework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Config",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Dom",38],["T_NS_SEPARATOR","\\",38],["T_STRING","UrnResolver",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$urnResolver",38],",",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$configContent",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","null",39],["T_WHITESPACE","\n    ",39],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","urnResolver",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$urnResolver",41],";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_data",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_extractData",42],"(",["T_VARIABLE","$configContent",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Get absolute path to theme.xsd\n     *\n     * @return string\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","getSchemaFile",50],"(",")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_RETURN","return",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","urnResolver",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getRealPath",52],"(",["T_CONSTANT_ENCAPSED_STRING","'urn:magento:framework:Config\/etc\/theme.xsd'",52],")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Extract configuration data from theme.xml\n     *\n     * @param string $configContent\n     * @return array\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",55],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","_extractData",62],"(",["T_VARIABLE","$configContent",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$data",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],"[",["T_WHITESPACE","\n            ",64],["T_CONSTANT_ENCAPSED_STRING","'title'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_STRING","null",65],",",["T_WHITESPACE","\n            ",65],["T_CONSTANT_ENCAPSED_STRING","'media'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_STRING","null",66],",",["T_WHITESPACE","\n            ",66],["T_CONSTANT_ENCAPSED_STRING","'parent'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_STRING","null",67],",",["T_WHITESPACE","\n        ",67],"]",";",["T_WHITESPACE","\n\n        ",68],["T_IF","if",70],["T_WHITESPACE"," ",70],"(","!",["T_EMPTY","empty",70],"(",["T_VARIABLE","$configContent",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$dom",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_NS_SEPARATOR","\\",71],["T_STRING","DOMDocument",71],"(",")",";",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$dom",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","loadXML",72],"(",["T_VARIABLE","$configContent",72],")",";",["T_WHITESPACE","\n            ",72],["T_COMMENT","\/\/ todo: validation of the document\n",73],["T_WHITESPACE","            ",74],["T_DOC_COMMENT","\/** @var $themeNode \\DOMElement *\/",74],["T_WHITESPACE","\n            ",74],["T_VARIABLE","$themeNode",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$dom",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getElementsByTagName",75],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","item",75],"(",["T_LNUMBER","0",75],")",";",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$themeTitleNode",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$themeNode",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getElementsByTagName",76],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",76],")",["T_OBJECT_OPERATOR","->",76],["T_STRING","item",76],"(",["T_LNUMBER","0",76],")",";",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$data",77],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",77],"]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$themeTitleNode",77],["T_WHITESPACE"," ",77],"?",["T_WHITESPACE"," ",77],["T_VARIABLE","$themeTitleNode",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","nodeValue",77],["T_WHITESPACE"," ",77],":",["T_WHITESPACE"," ",77],["T_STRING","null",77],";",["T_WHITESPACE","\n            ",77],["T_DOC_COMMENT","\/** @var $mediaNode \\DOMElement *\/",78],["T_WHITESPACE","\n            ",78],["T_VARIABLE","$mediaNode",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$themeNode",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getElementsByTagName",79],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","item",79],"(",["T_LNUMBER","0",79],")",";",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$previewImage",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$mediaNode",80],["T_WHITESPACE"," ",80],"?",["T_WHITESPACE"," ",80],["T_VARIABLE","$mediaNode",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getElementsByTagName",80],"(",["T_CONSTANT_ENCAPSED_STRING","'preview_image'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","item",80],"(",["T_LNUMBER","0",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","nodeValue",80],["T_WHITESPACE"," ",80],":",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","''",80],";",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$data",81],"[",["T_CONSTANT_ENCAPSED_STRING","'media'",81],"]","[",["T_CONSTANT_ENCAPSED_STRING","'preview_image'",81],"]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$previewImage",81],";",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$themeParentNode",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$themeNode",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getElementsByTagName",82],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","item",82],"(",["T_LNUMBER","0",82],")",";",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$data",83],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$themeParentNode",83],["T_WHITESPACE"," ",83],"?",["T_WHITESPACE"," ",83],["T_VARIABLE","$themeParentNode",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","nodeValue",83],["T_WHITESPACE"," ",83],":",["T_WHITESPACE"," ",83],["T_STRING","null",83],";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$data",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Get title for specified theme and package code\n     *\n     * @return string\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","getThemeTitle",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_data",96],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",96],"]",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Get theme media data\n     *\n     * @return array\n     *\/",99],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","getMedia",104],"(",")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_data",106],"[",["T_CONSTANT_ENCAPSED_STRING","'media'",106],"]",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Retrieve a parent theme code\n     *\n     * @return array|null\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getParentTheme",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$parentTheme",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_data",116],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",116],"]",";",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_VARIABLE","$parentTheme",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_STRING","null",118],";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_STRING","explode",120],"(",["T_STRING","self",120],["T_DOUBLE_COLON","::",120],["T_STRING","THEME_PATH_SEPARATOR",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$parentTheme",120],")",";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n",121],"}",["T_WHITESPACE","\n",122]]
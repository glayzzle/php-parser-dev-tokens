[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_DOC_COMMENT","\/**\n * Magento configuration XML DOM utility\n *\/",9],["T_WHITESPACE","\n",11],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Config",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Config",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Dom",14],["T_NS_SEPARATOR","\\",14],["T_STRING","UrnResolver",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Config",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Dom",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ValidationSchemaException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Phrase",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Class Dom\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",18],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","Dom",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * Prefix which will be used for root namespace\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","ROOT_NAMESPACE_PREFIX",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'x'",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Format of items in errors array to be used by default. Available placeholders - fields of \\LibXMLError.\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","ERROR_FORMAT_DEFAULT",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","\"%message%\\nLine: %line%\\n\"",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Config\\ValidationStateInterface\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$validationState",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Dom document\n     *\n     * @var \\DOMDocument\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$dom",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var Dom\\NodeMergingConfig\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$nodeMergingConfig",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Name of attribute that specifies type of argument node\n     *\n     * @var string|null\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$typeAttributeName",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Schema validation file\n     *\n     * @var string\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$schema",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Format of error messages\n     *\n     * @var string\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$errorFormat",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Default namespace for xml elements\n     *\n     * @var string\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$rootNamespace",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Config\\Dom\\UrnResolver\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PRIVATE","private",83],["T_WHITESPACE"," ",83],["T_STATIC","static",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$urnResolver",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Build DOM with initial XML contents and specifying identifier attributes for merging\n     *\n     * Format of $idAttributes: array('\/xpath\/to\/some\/node' => 'id_attribute_name')\n     * The path to ID attribute name should not include any attribute notations or modifiers -- only node names\n     *\n     * @param string $xml\n     * @param \\Magento\\Framework\\Config\\ValidationStateInterface $validationState\n     * @param array $idAttributes\n     * @param string $typeAttributeName\n     * @param string $schemaFile\n     * @param string $errorFormat\n     *\/",85],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","__construct",98],"(",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$xml",99],",",["T_WHITESPACE","\n        ",99],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Framework",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Config",100],["T_NS_SEPARATOR","\\",100],["T_STRING","ValidationStateInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$validationState",100],",",["T_WHITESPACE","\n        ",100],["T_ARRAY","array",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$idAttributes",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],"[","]",",",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$typeAttributeName",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","null",102],",",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$schemaFile",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","null",103],",",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$errorFormat",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","self",104],["T_DOUBLE_COLON","::",104],["T_STRING","ERROR_FORMAT_DEFAULT",104],["T_WHITESPACE","\n    ",104],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","validationState",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$validationState",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","schema",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$schemaFile",107],";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","nodeMergingConfig",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","Dom",108],["T_NS_SEPARATOR","\\",108],["T_STRING","NodeMergingConfig",108],"(",["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","Dom",108],["T_NS_SEPARATOR","\\",108],["T_STRING","NodePathMatcher",108],"(",")",",",["T_WHITESPACE"," ",108],["T_VARIABLE","$idAttributes",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","typeAttributeName",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$typeAttributeName",109],";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","errorFormat",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$errorFormat",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","dom",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_initDom",111],"(",["T_VARIABLE","$xml",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","rootNamespace",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","dom",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","lookupNamespaceUri",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","dom",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","namespaceURI",112],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Retrieve array of xml errors\n     *\n     * @param $errorFormat\n     * @return string[]\n     *\/",115],["T_WHITESPACE","\n    ",120],["T_PRIVATE","private",121],["T_WHITESPACE"," ",121],["T_STATIC","static",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getXmlErrors",121],"(",["T_VARIABLE","$errorFormat",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$errors",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],"[","]",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$validationErrors",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","libxml_get_errors",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_STRING","count",125],"(",["T_VARIABLE","$validationErrors",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_FOREACH","foreach",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$validationErrors",126],["T_WHITESPACE"," ",126],["T_AS","as",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$error",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$errors",127],"[","]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","self",127],["T_DOUBLE_COLON","::",127],["T_STRING","_renderErrorMessage",127],"(",["T_VARIABLE","$error",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$errorFormat",127],")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE"," ",129],["T_ELSE","else",129],["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$errors",130],"[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'Unknown validation error'",130],";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$errors",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Merge $xml into DOM document\n     *\n     * @param string $xml\n     * @return void\n     *\/",135],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","merge",141],"(",["T_VARIABLE","$xml",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$dom",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_initDom",143],"(",["T_VARIABLE","$xml",143],")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_mergeNode",144],"(",["T_VARIABLE","$dom",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","documentElement",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","''",144],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Recursive merging of the \\DOMElement into the original document\n     *\n     * Algorithm:\n     * 1. Find the same node in original document\n     * 2. Extend and override original document node attributes and scalar value if found\n     * 3. Append new node if original document doesn't have the same node\n     *\n     * @param \\DOMElement $node\n     * @param string $parentPath path to parent node\n     * @return void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",147],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","_mergeNode",160],"(",["T_NS_SEPARATOR","\\",160],["T_STRING","DOMElement",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$node",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$parentPath",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$path",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_getNodePathByParent",162],"(",["T_VARIABLE","$node",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$parentPath",162],")",";",["T_WHITESPACE","\n\n        ",162],["T_VARIABLE","$matchedNode",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_getMatchedNode",164],"(",["T_VARIABLE","$path",164],")",";",["T_WHITESPACE","\n\n        ",164],["T_COMMENT","\/* Update matched node attributes and value *\/",166],["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$matchedNode",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_COMMENT","\/\/different node type\n",168],["T_WHITESPACE","            ",169],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","typeAttributeName",169],["T_WHITESPACE"," ",169],["T_BOOLEAN_AND","&&",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$node",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","hasAttribute",169],"(",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","typeAttributeName",170],["T_WHITESPACE","\n            ",170],")",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$matchedNode",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","hasAttribute",171],"(",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","typeAttributeName",172],["T_WHITESPACE","\n            ",172],")",["T_WHITESPACE"," ",173],["T_BOOLEAN_AND","&&",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$node",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getAttribute",173],"(",["T_WHITESPACE","\n                ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","typeAttributeName",174],["T_WHITESPACE","\n            ",174],")",["T_WHITESPACE"," ",175],["T_IS_NOT_IDENTICAL","!==",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$matchedNode",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getAttribute",175],"(",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","typeAttributeName",176],["T_WHITESPACE","\n            ",176],")",["T_WHITESPACE","\n            ",177],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$parentMatchedNode",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_getMatchedNode",179],"(",["T_VARIABLE","$parentPath",179],")",";",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$newNode",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","dom",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","importNode",180],"(",["T_VARIABLE","$node",180],",",["T_WHITESPACE"," ",180],["T_STRING","true",180],")",";",["T_WHITESPACE","\n                ",180],["T_VARIABLE","$parentMatchedNode",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","replaceChild",181],"(",["T_VARIABLE","$newNode",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$matchedNode",181],")",";",["T_WHITESPACE","\n                ",181],["T_RETURN","return",182],";",["T_WHITESPACE","\n            ",182],"}",["T_WHITESPACE","\n\n            ",183],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_mergeAttributes",185],"(",["T_VARIABLE","$matchedNode",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$node",185],")",";",["T_WHITESPACE","\n            ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_VARIABLE","$node",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","hasChildNodes",186],"(",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_RETURN","return",187],";",["T_WHITESPACE","\n            ",187],"}",["T_WHITESPACE","\n            ",188],["T_COMMENT","\/* override node value *\/",189],["T_WHITESPACE","\n            ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_isTextNode",190],"(",["T_VARIABLE","$node",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                ",190],["T_COMMENT","\/* skip the case when the matched node has children, otherwise they get overridden *\/",191],["T_WHITESPACE","\n                ",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(","!",["T_VARIABLE","$matchedNode",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","hasChildNodes",192],"(",")",["T_WHITESPACE"," ",192],["T_BOOLEAN_OR","||",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_isTextNode",192],"(",["T_VARIABLE","$matchedNode",192],")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n                    ",192],["T_VARIABLE","$matchedNode",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","nodeValue",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$node",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","childNodes",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","item",193],"(",["T_LNUMBER","0",193],")",["T_OBJECT_OPERATOR","->",193],["T_STRING","nodeValue",193],";",["T_WHITESPACE","\n                ",193],"}",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE"," ",195],["T_ELSE","else",195],["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_COMMENT","\/* recursive merge for all child nodes *\/",196],["T_WHITESPACE","\n                ",196],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$node",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","childNodes",197],["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$childNode",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                    ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$childNode",198],["T_WHITESPACE"," ",198],["T_INSTANCEOF","instanceof",198],["T_WHITESPACE"," ",198],["T_NS_SEPARATOR","\\",198],["T_STRING","DOMElement",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n                        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_mergeNode",199],"(",["T_VARIABLE","$childNode",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$path",199],")",";",["T_WHITESPACE","\n                    ",199],"}",["T_WHITESPACE","\n                ",200],"}",["T_WHITESPACE","\n            ",201],"}",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE"," ",203],["T_ELSE","else",203],["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_COMMENT","\/* Add node as is to the document under the same parent element *\/",204],["T_WHITESPACE","\n            ",204],["T_VARIABLE","$parentMatchedNode",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_getMatchedNode",205],"(",["T_VARIABLE","$parentPath",205],")",";",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$newNode",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","dom",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","importNode",206],"(",["T_VARIABLE","$node",206],",",["T_WHITESPACE"," ",206],["T_STRING","true",206],")",";",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$parentMatchedNode",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","appendChild",207],"(",["T_VARIABLE","$newNode",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Check if the node content is text\n     *\n     * @param \\DOMElement $node\n     * @return bool\n     *\/",211],["T_WHITESPACE","\n    ",216],["T_PROTECTED","protected",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","_isTextNode",217],"(",["T_VARIABLE","$node",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$node",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","childNodes",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","length",219],["T_WHITESPACE"," ",219],["T_IS_EQUAL","==",219],["T_WHITESPACE"," ",219],["T_LNUMBER","1",219],["T_WHITESPACE"," ",219],["T_BOOLEAN_AND","&&",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$node",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","childNodes",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","item",219],"(",["T_LNUMBER","0",219],")",["T_WHITESPACE"," ",219],["T_INSTANCEOF","instanceof",219],["T_WHITESPACE"," ",219],["T_NS_SEPARATOR","\\",219],["T_STRING","DOMText",219],";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Merges attributes of the merge node to the base node\n     *\n     * @param \\DOMElement $baseNode\n     * @param \\DOMNode $mergeNode\n     * @return void\n     *\/",222],["T_WHITESPACE","\n    ",228],["T_PROTECTED","protected",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","_mergeAttributes",229],"(",["T_VARIABLE","$baseNode",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$mergeNode",229],")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_FOREACH","foreach",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$mergeNode",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","attributes",231],["T_WHITESPACE"," ",231],["T_AS","as",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$attribute",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$baseNode",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","setAttribute",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_getAttributeName",232],"(",["T_VARIABLE","$attribute",232],")",",",["T_WHITESPACE"," ",232],["T_VARIABLE","$attribute",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","value",232],")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Identify node path based on parent path and node attributes\n     *\n     * @param \\DOMElement $node\n     * @param string $parentPath\n     * @return string\n     *\/",236],["T_WHITESPACE","\n    ",242],["T_PROTECTED","protected",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","_getNodePathByParent",243],"(",["T_NS_SEPARATOR","\\",243],["T_STRING","DOMElement",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$node",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$parentPath",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$prefix",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","is_null",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","rootNamespace",245],")",["T_WHITESPACE"," ",245],"?",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","''",245],["T_WHITESPACE"," ",245],":",["T_WHITESPACE"," ",245],["T_STRING","self",245],["T_DOUBLE_COLON","::",245],["T_STRING","ROOT_NAMESPACE_PREFIX",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","':'",245],";",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$path",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$parentPath",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'\/'",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_VARIABLE","$prefix",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_VARIABLE","$node",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","tagName",246],";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$idAttribute",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","nodeMergingConfig",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getIdAttribute",247],"(",["T_VARIABLE","$path",247],")",";",["T_WHITESPACE","\n        ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_STRING","is_array",248],"(",["T_VARIABLE","$idAttribute",248],")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$constraints",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],"[","]",";",["T_WHITESPACE","\n            ",249],["T_FOREACH","foreach",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$idAttribute",250],["T_WHITESPACE"," ",250],["T_AS","as",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$attribute",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                ",250],["T_VARIABLE","$value",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$node",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getAttribute",251],"(",["T_VARIABLE","$attribute",251],")",";",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$constraints",252],"[","]",["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],"\"",["T_ENCAPSED_AND_WHITESPACE","@",252],["T_CURLY_OPEN","{",252],["T_VARIABLE","$attribute",252],"}",["T_ENCAPSED_AND_WHITESPACE","='",252],["T_CURLY_OPEN","{",252],["T_VARIABLE","$value",252],"}",["T_ENCAPSED_AND_WHITESPACE","'",252],"\"",";",["T_WHITESPACE","\n            ",252],"}",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$path",254],["T_WHITESPACE"," ",254],["T_CONCAT_EQUAL",".=",254],["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'['",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_STRING","implode",254],"(",["T_CONSTANT_ENCAPSED_STRING","' and '",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$constraints",254],")",["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","']'",254],";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE"," ",255],["T_ELSEIF","elseif",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$idAttribute",255],["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$value",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$node",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getAttribute",255],"(",["T_VARIABLE","$idAttribute",255],")",")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$path",256],["T_WHITESPACE"," ",256],["T_CONCAT_EQUAL",".=",256],["T_WHITESPACE"," ",256],"\"",["T_ENCAPSED_AND_WHITESPACE","[@",256],["T_CURLY_OPEN","{",256],["T_VARIABLE","$idAttribute",256],"}",["T_ENCAPSED_AND_WHITESPACE","='",256],["T_CURLY_OPEN","{",256],["T_VARIABLE","$value",256],"}",["T_ENCAPSED_AND_WHITESPACE","']",256],"\"",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n        ",257],["T_RETURN","return",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$path",258],";",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n\n    ",259],["T_DOC_COMMENT","\/**\n     * Getter for node by path\n     *\n     * @param string $nodePath\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException An exception is possible if original document contains\n     *     multiple nodes for identifier\n     * @return \\DOMElement|null\n     *\/",261],["T_WHITESPACE","\n    ",268],["T_PROTECTED","protected",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","_getMatchedNode",269],"(",["T_VARIABLE","$nodePath",269],")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$xPath",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_NEW","new",271],["T_WHITESPACE"," ",271],["T_NS_SEPARATOR","\\",271],["T_STRING","DOMXPath",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","dom",271],")",";",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","rootNamespace",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$xPath",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","registerNamespace",273],"(",["T_STRING","self",273],["T_DOUBLE_COLON","::",273],["T_STRING","ROOT_NAMESPACE_PREFIX",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","rootNamespace",273],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$matchedNodes",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$xPath",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","query",275],"(",["T_VARIABLE","$nodePath",275],")",";",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$node",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_STRING","null",276],";",["T_WHITESPACE","\n        ",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$matchedNodes",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","length",277],["T_WHITESPACE"," ",277],">",["T_WHITESPACE"," ",277],["T_LNUMBER","1",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n            ",277],["T_THROW","throw",278],["T_WHITESPACE"," ",278],["T_NEW","new",278],["T_WHITESPACE"," ",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Magento",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Framework",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Exception",278],["T_NS_SEPARATOR","\\",278],["T_STRING","LocalizedException",278],"(",["T_WHITESPACE","\n                ",278],["T_NEW","new",279],["T_WHITESPACE"," ",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Magento",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Framework",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Phrase",279],"(",["T_CONSTANT_ENCAPSED_STRING","\"More than one node matching the query: %1\"",279],",",["T_WHITESPACE"," ",279],"[",["T_VARIABLE","$nodePath",279],"]",")",["T_WHITESPACE","\n            ",279],")",";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE"," ",281],["T_ELSEIF","elseif",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$matchedNodes",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","length",281],["T_WHITESPACE"," ",281],["T_IS_EQUAL","==",281],["T_WHITESPACE"," ",281],["T_LNUMBER","1",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$node",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$matchedNodes",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","item",282],"(",["T_LNUMBER","0",282],")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$node",284],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Validate dom document\n     *\n     * @param \\DOMDocument $dom\n     * @param string $schema Absolute schema file path or URN\n     * @param string $errorFormat\n     * @return array of errors\n     * @throws \\Exception\n     *\/",287],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_STATIC","static",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","validateDomDocument",296],"(",["T_WHITESPACE","\n        ",296],["T_NS_SEPARATOR","\\",297],["T_STRING","DOMDocument",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$dom",297],",",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$schema",298],",",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$errorFormat",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","self",299],["T_DOUBLE_COLON","::",299],["T_STRING","ERROR_FORMAT_DEFAULT",299],["T_WHITESPACE","\n    ",299],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n        ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(","!",["T_STRING","function_exists",301],"(",["T_CONSTANT_ENCAPSED_STRING","'libxml_set_external_entity_loader'",301],")",")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],"[","]",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_IF","if",305],["T_WHITESPACE"," ",305],"(","!",["T_STRING","self",305],["T_DOUBLE_COLON","::",305],["T_VARIABLE","$urnResolver",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_STRING","self",306],["T_DOUBLE_COLON","::",306],["T_VARIABLE","$urnResolver",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_NEW","new",306],["T_WHITESPACE"," ",306],["T_STRING","UrnResolver",306],"(",")",";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$schema",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_STRING","self",308],["T_DOUBLE_COLON","::",308],["T_VARIABLE","$urnResolver",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getRealPath",308],"(",["T_VARIABLE","$schema",308],")",";",["T_WHITESPACE","\n        ",308],["T_STRING","libxml_use_internal_errors",309],"(",["T_STRING","true",309],")",";",["T_WHITESPACE","\n        ",309],["T_STRING","libxml_set_external_entity_loader",310],"(","[",["T_STRING","self",310],["T_DOUBLE_COLON","::",310],["T_VARIABLE","$urnResolver",310],",",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'registerEntityLoader'",310],"]",")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$errors",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],"[","]",";",["T_WHITESPACE","\n        ",311],["T_TRY","try",312],["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_VARIABLE","$result",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$dom",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","schemaValidate",313],"(",["T_VARIABLE","$schema",313],")",";",["T_WHITESPACE","\n            ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(","!",["T_VARIABLE","$result",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n                ",314],["T_VARIABLE","$errors",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","self",315],["T_DOUBLE_COLON","::",315],["T_STRING","getXmlErrors",315],"(",["T_VARIABLE","$errorFormat",315],")",";",["T_WHITESPACE","\n            ",315],"}",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE"," ",317],["T_CATCH","catch",317],["T_WHITESPACE"," ",317],"(",["T_NS_SEPARATOR","\\",317],["T_STRING","Exception",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$exception",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$errors",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_STRING","self",318],["T_DOUBLE_COLON","::",318],["T_STRING","getXmlErrors",318],"(",["T_VARIABLE","$errorFormat",318],")",";",["T_WHITESPACE","\n            ",318],["T_STRING","libxml_use_internal_errors",319],"(",["T_STRING","false",319],")",";",["T_WHITESPACE","\n            ",319],["T_STRING","array_unshift",320],"(",["T_VARIABLE","$errors",320],",",["T_WHITESPACE"," ",320],["T_NEW","new",320],["T_WHITESPACE"," ",320],["T_STRING","Phrase",320],"(",["T_CONSTANT_ENCAPSED_STRING","'Processed schema file: %1'",320],",",["T_WHITESPACE"," ",320],"[",["T_VARIABLE","$schema",320],"]",")",")",";",["T_WHITESPACE","\n            ",320],["T_THROW","throw",321],["T_WHITESPACE"," ",321],["T_NEW","new",321],["T_WHITESPACE"," ",321],["T_STRING","ValidationSchemaException",321],"(",["T_NEW","new",321],["T_WHITESPACE"," ",321],["T_STRING","Phrase",321],"(",["T_STRING","implode",321],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$errors",321],")",")",")",";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n        ",322],["T_STRING","libxml_set_external_entity_loader",323],"(",["T_STRING","null",323],")",";",["T_WHITESPACE","\n        ",323],["T_STRING","libxml_use_internal_errors",324],"(",["T_STRING","false",324],")",";",["T_WHITESPACE","\n        ",324],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$errors",325],";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_DOC_COMMENT","\/**\n     * Render error message string by replacing placeholders '%field%' with properties of \\LibXMLError\n     *\n     * @param \\LibXMLError $errorInfo\n     * @param string $format\n     * @return string\n     * @throws \\InvalidArgumentException\n     *\/",328],["T_WHITESPACE","\n    ",335],["T_PRIVATE","private",336],["T_WHITESPACE"," ",336],["T_STATIC","static",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","_renderErrorMessage",336],"(",["T_NS_SEPARATOR","\\",336],["T_STRING","LibXMLError",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$errorInfo",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$format",336],")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$result",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$format",338],";",["T_WHITESPACE","\n        ",338],["T_FOREACH","foreach",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$errorInfo",339],["T_WHITESPACE"," ",339],["T_AS","as",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$field",339],["T_WHITESPACE"," ",339],["T_DOUBLE_ARROW","=>",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$value",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$placeholder",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'%'",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$field",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'%'",340],";",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$value",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_STRING","trim",341],"(",["T_STRING_CAST","(string)",341],["T_VARIABLE","$value",341],")",";",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$result",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","str_replace",342],"(",["T_VARIABLE","$placeholder",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$value",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$result",342],")",";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n        ",343],["T_IF","if",344],["T_WHITESPACE"," ",344],"(",["T_STRING","strpos",344],"(",["T_VARIABLE","$result",344],",",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'%'",344],")",["T_WHITESPACE"," ",344],["T_IS_NOT_IDENTICAL","!==",344],["T_WHITESPACE"," ",344],["T_STRING","false",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n            ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_STRING","preg_match_all",345],"(",["T_CONSTANT_ENCAPSED_STRING","'\/%.+%\/'",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$result",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$matches",345],")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n                ",345],["T_VARIABLE","$unsupported",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],"[","]",";",["T_WHITESPACE","\n                ",346],["T_FOREACH","foreach",347],["T_WHITESPACE"," ",347],"(",["T_VARIABLE","$matches",347],"[",["T_LNUMBER","0",347],"]",["T_WHITESPACE"," ",347],["T_AS","as",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$placeholder",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n                    ",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_STRING","strpos",348],"(",["T_VARIABLE","$result",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$placeholder",348],")",["T_WHITESPACE"," ",348],["T_IS_NOT_IDENTICAL","!==",348],["T_WHITESPACE"," ",348],["T_STRING","false",348],")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n                        ",348],["T_VARIABLE","$unsupported",349],"[","]",["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$placeholder",349],";",["T_WHITESPACE","\n                    ",349],"}",["T_WHITESPACE","\n                ",350],"}",["T_WHITESPACE","\n                ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(","!",["T_EMPTY","empty",352],"(",["T_VARIABLE","$unsupported",352],")",")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n                    ",352],["T_THROW","throw",353],["T_WHITESPACE"," ",353],["T_NEW","new",353],["T_WHITESPACE"," ",353],["T_NS_SEPARATOR","\\",353],["T_STRING","InvalidArgumentException",353],"(",["T_WHITESPACE","\n                        ",353],"\"",["T_ENCAPSED_AND_WHITESPACE","Error format '",354],["T_CURLY_OPEN","{",354],["T_VARIABLE","$format",354],"}",["T_ENCAPSED_AND_WHITESPACE","' contains unsupported placeholders: ",354],"\"",["T_WHITESPACE"," ",354],".",["T_WHITESPACE"," ",354],["T_STRING","implode",354],"(",["T_CONSTANT_ENCAPSED_STRING","', '",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$unsupported",354],")",["T_WHITESPACE","\n                    ",354],")",";",["T_WHITESPACE","\n                ",355],"}",["T_WHITESPACE","\n            ",356],"}",["T_WHITESPACE","\n        ",357],"}",["T_WHITESPACE","\n        ",358],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$result",359],";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n\n    ",360],["T_DOC_COMMENT","\/**\n     * DOM document getter\n     *\n     * @return \\DOMDocument\n     *\/",362],["T_WHITESPACE","\n    ",366],["T_PUBLIC","public",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","getDom",367],"(",")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","dom",369],";",["T_WHITESPACE","\n    ",369],"}",["T_WHITESPACE","\n\n    ",370],["T_DOC_COMMENT","\/**\n     * Create DOM document based on $xml parameter\n     *\n     * @param string $xml\n     * @return \\DOMDocument\n     * @throws \\Magento\\Framework\\Config\\Dom\\ValidationException\n     *\/",372],["T_WHITESPACE","\n    ",378],["T_PROTECTED","protected",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","_initDom",379],"(",["T_VARIABLE","$xml",379],")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$dom",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_NEW","new",381],["T_WHITESPACE"," ",381],["T_NS_SEPARATOR","\\",381],["T_STRING","DOMDocument",381],"(",")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$useErrors",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","libxml_use_internal_errors",382],"(",["T_STRING","true",382],")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$res",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$dom",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","loadXML",383],"(",["T_VARIABLE","$xml",383],")",";",["T_WHITESPACE","\n        ",383],["T_IF","if",384],["T_WHITESPACE"," ",384],"(","!",["T_VARIABLE","$res",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$errors",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_STRING","self",385],["T_DOUBLE_COLON","::",385],["T_STRING","getXmlErrors",385],"(",["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","errorFormat",385],")",";",["T_WHITESPACE","\n            ",385],["T_STRING","libxml_use_internal_errors",386],"(",["T_VARIABLE","$useErrors",386],")",";",["T_WHITESPACE","\n            ",386],["T_THROW","throw",387],["T_WHITESPACE"," ",387],["T_NEW","new",387],["T_WHITESPACE"," ",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Magento",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Framework",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Config",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Dom",387],["T_NS_SEPARATOR","\\",387],["T_STRING","ValidationException",387],"(",["T_STRING","implode",387],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",387],",",["T_WHITESPACE"," ",387],["T_VARIABLE","$errors",387],")",")",";",["T_WHITESPACE","\n        ",387],"}",["T_WHITESPACE","\n        ",388],["T_STRING","libxml_use_internal_errors",389],"(",["T_VARIABLE","$useErrors",389],")",";",["T_WHITESPACE","\n        ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","validationState",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","isValidationRequired",390],"(",")",["T_WHITESPACE"," ",390],["T_BOOLEAN_AND","&&",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","schema",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$errors",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","validateDomDocument",391],"(",["T_VARIABLE","$dom",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","schema",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","errorFormat",391],")",";",["T_WHITESPACE","\n            ",391],["T_IF","if",392],["T_WHITESPACE"," ",392],"(",["T_STRING","count",392],"(",["T_VARIABLE","$errors",392],")",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n                ",392],["T_THROW","throw",393],["T_WHITESPACE"," ",393],["T_NEW","new",393],["T_WHITESPACE"," ",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Magento",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Framework",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Config",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Dom",393],["T_NS_SEPARATOR","\\",393],["T_STRING","ValidationException",393],"(",["T_STRING","implode",393],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$errors",393],")",")",";",["T_WHITESPACE","\n            ",393],"}",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE","\n        ",395],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$dom",396],";",["T_WHITESPACE","\n    ",396],"}",["T_WHITESPACE","\n\n    ",397],["T_DOC_COMMENT","\/**\n     * Validate self contents towards to specified schema\n     *\n     * @param string $schemaFileName absolute path to schema file\n     * @param array &$errors\n     * @return bool\n     *\/",399],["T_WHITESPACE","\n    ",405],["T_PUBLIC","public",406],["T_WHITESPACE"," ",406],["T_FUNCTION","function",406],["T_WHITESPACE"," ",406],["T_STRING","validate",406],"(",["T_VARIABLE","$schemaFileName",406],",",["T_WHITESPACE"," ",406],"&",["T_VARIABLE","$errors",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],"[","]",")",["T_WHITESPACE","\n    ",406],"{",["T_WHITESPACE","\n        ",407],["T_IF","if",408],["T_WHITESPACE"," ",408],"(",["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","validationState",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","isValidationRequired",408],"(",")",")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n            ",408],["T_VARIABLE","$errors",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","validateDomDocument",409],"(",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","dom",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$schemaFileName",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","errorFormat",409],")",";",["T_WHITESPACE","\n            ",409],["T_RETURN","return",410],["T_WHITESPACE"," ",410],"!",["T_STRING","count",410],"(",["T_VARIABLE","$errors",410],")",";",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE","\n        ",411],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_STRING","true",412],";",["T_WHITESPACE","\n    ",412],"}",["T_WHITESPACE","\n\n    ",413],["T_DOC_COMMENT","\/**\n     * Set schema file\n     *\n     * @param string $schemaFile\n     * @return $this\n     *\/",415],["T_WHITESPACE","\n    ",420],["T_PUBLIC","public",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","setSchemaFile",421],"(",["T_VARIABLE","$schemaFile",421],")",["T_WHITESPACE","\n    ",421],"{",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","schema",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$schemaFile",423],";",["T_WHITESPACE","\n        ",423],["T_RETURN","return",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],";",["T_WHITESPACE","\n    ",424],"}",["T_WHITESPACE","\n\n    ",425],["T_DOC_COMMENT","\/**\n     * Returns the attribute name with prefix, if there is one\n     *\n     * @param \\DOMAttr $attribute\n     * @return string\n     *\/",427],["T_WHITESPACE","\n    ",432],["T_PRIVATE","private",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","_getAttributeName",433],"(",["T_VARIABLE","$attribute",433],")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_IF","if",435],["T_WHITESPACE"," ",435],"(","!",["T_STRING","is_null",435],"(",["T_VARIABLE","$attribute",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","prefix",435],")",["T_WHITESPACE"," ",435],["T_BOOLEAN_AND","&&",435],["T_WHITESPACE"," ",435],"!",["T_EMPTY","empty",435],"(",["T_VARIABLE","$attribute",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","prefix",435],")",")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n            ",435],["T_VARIABLE","$attributeName",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$attribute",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","prefix",436],["T_WHITESPACE"," ",436],".",["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","':'",436],["T_WHITESPACE"," ",436],".",["T_WHITESPACE"," ",436],["T_VARIABLE","$attribute",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","name",436],";",["T_WHITESPACE","\n        ",436],"}",["T_WHITESPACE"," ",437],["T_ELSE","else",437],["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$attributeName",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$attribute",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","name",438],";",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE","\n        ",439],["T_RETURN","return",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$attributeName",440],";",["T_WHITESPACE","\n    ",440],"}",["T_WHITESPACE","\n",441],"}",["T_WHITESPACE","\n",442]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Search",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Request",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","StateException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Search",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Request",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Query",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filter",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Phrase",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Mapper",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var QueryInterface\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$rootQuery",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$queries",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$filters",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var string[]\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$mappedQueries",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var string[]\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PRIVATE","private",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$mappedFilters",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PRIVATE","private",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$aggregations",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\ObjectManagerInterface\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PRIVATE","private",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$objectManager",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PRIVATE","private",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$rootQueryName",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\ObjectManagerInterface $objectManager\n     * @param array $queries\n     * @param string $rootQueryName\n     * @param array $aggregations\n     * @param array $filters\n     * @throws \\Exception\n     * @throws \\InvalidArgumentException\n     * @throws StateException\n     *\/",57],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","__construct",67],"(",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","ObjectManagerInterface",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$objectManager",68],",",["T_WHITESPACE","\n        ",68],["T_ARRAY","array",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$queries",69],",",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$rootQueryName",70],",",["T_WHITESPACE","\n        ",70],["T_ARRAY","array",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$aggregations",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[","]",",",["T_WHITESPACE","\n        ",71],["T_ARRAY","array",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$filters",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[","]",["T_WHITESPACE","\n    ",72],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","objectManager",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$objectManager",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","queries",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$queries",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","aggregations",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$aggregations",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","filters",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$filters",77],";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","rootQueryName",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$rootQueryName",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Get Query Interface by name\n     *\n     * @return QueryInterface\n     * @throws \\Exception\n     * @throws \\InvalidArgumentException\n     * @throws StateException\n     *\/",81],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","getRootQuery",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","!",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","rootQuery",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","mappedQueries",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],"[","]",";",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","mappedFilters",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],"[","]",";",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","rootQuery",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","mapQuery",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","rootQueryName",94],")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","validate",95],"(",")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n        ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","rootQuery",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Convert array to Query instance\n     *\n     * @param string $queryName\n     * @return QueryInterface\n     * @throws \\Exception\n     * @throws \\InvalidArgumentException\n     * @throws StateException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",100],["T_WHITESPACE","\n    ",109],["T_PRIVATE","private",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","mapQuery",110],"(",["T_VARIABLE","$queryName",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!",["T_ISSET","isset",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","queries",112],"[",["T_VARIABLE","$queryName",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_THROW","throw",113],["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Exception",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Query '",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$queryName",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","' does not exist'",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE"," ",114],["T_ELSEIF","elseif",114],["T_WHITESPACE"," ",114],"(",["T_STRING","in_array",114],"(",["T_VARIABLE","$queryName",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","mappedQueries",114],")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_THROW","throw",115],["T_WHITESPACE"," ",115],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_STRING","StateException",115],"(",["T_WHITESPACE","\n                ",115],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_STRING","Phrase",116],"(",["T_CONSTANT_ENCAPSED_STRING","'Cycle found. Query %1 already used in request hierarchy'",116],",",["T_WHITESPACE"," ",116],"[",["T_VARIABLE","$queryName",116],"]",")",["T_WHITESPACE","\n            ",116],")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","mappedQueries",119],"[","]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$queryName",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$query",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","queries",120],"[",["T_VARIABLE","$queryName",120],"]",";",["T_WHITESPACE","\n        ",120],["T_SWITCH","switch",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$query",121],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",121],"]",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_CASE","case",122],["T_WHITESPACE"," ",122],["T_STRING","QueryInterface",122],["T_DOUBLE_COLON","::",122],["T_STRING","TYPE_MATCH",122],":",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$query",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","objectManager",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","create",123],"(",["T_WHITESPACE","\n                    ",123],["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Framework",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Search",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Request",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Query",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Match",124],["T_DOUBLE_COLON","::",124],["T_CLASS","class",124],",",["T_WHITESPACE","\n                    ",124],"[",["T_WHITESPACE","\n                        ",125],["T_CONSTANT_ENCAPSED_STRING","'name'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$query",126],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",126],"]",",",["T_WHITESPACE","\n                        ",126],["T_CONSTANT_ENCAPSED_STRING","'value'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$query",127],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",127],"]",",",["T_WHITESPACE","\n                        ",127],["T_CONSTANT_ENCAPSED_STRING","'boost'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_ISSET","isset",128],"(",["T_VARIABLE","$query",128],"[",["T_CONSTANT_ENCAPSED_STRING","'boost'",128],"]",")",["T_WHITESPACE"," ",128],"?",["T_WHITESPACE"," ",128],["T_VARIABLE","$query",128],"[",["T_CONSTANT_ENCAPSED_STRING","'boost'",128],"]",["T_WHITESPACE"," ",128],":",["T_WHITESPACE"," ",128],["T_LNUMBER","1",128],",",["T_WHITESPACE","\n                        ",128],["T_CONSTANT_ENCAPSED_STRING","'matches'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$query",129],"[",["T_CONSTANT_ENCAPSED_STRING","'match'",129],"]",["T_WHITESPACE","\n                    ",129],"]",["T_WHITESPACE","\n                ",130],")",";",["T_WHITESPACE","\n                ",131],["T_BREAK","break",132],";",["T_WHITESPACE","\n            ",132],["T_CASE","case",133],["T_WHITESPACE"," ",133],["T_STRING","QueryInterface",133],["T_DOUBLE_COLON","::",133],["T_STRING","TYPE_FILTER",133],":",["T_WHITESPACE","\n                ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_ISSET","isset",134],"(",["T_VARIABLE","$query",134],"[",["T_CONSTANT_ENCAPSED_STRING","'queryReference'",134],"]","[",["T_LNUMBER","0",134],"]",")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                    ",134],["T_VARIABLE","$reference",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","mapQuery",135],"(",["T_VARIABLE","$query",135],"[",["T_CONSTANT_ENCAPSED_STRING","'queryReference'",135],"]","[",["T_LNUMBER","0",135],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ref'",135],"]",")",";",["T_WHITESPACE","\n                    ",135],["T_VARIABLE","$referenceType",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","Filter",136],["T_DOUBLE_COLON","::",136],["T_STRING","REFERENCE_QUERY",136],";",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE"," ",137],["T_ELSEIF","elseif",137],["T_WHITESPACE"," ",137],"(",["T_ISSET","isset",137],"(",["T_VARIABLE","$query",137],"[",["T_CONSTANT_ENCAPSED_STRING","'filterReference'",137],"]","[",["T_LNUMBER","0",137],"]",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$reference",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","mapFilter",138],"(",["T_VARIABLE","$query",138],"[",["T_CONSTANT_ENCAPSED_STRING","'filterReference'",138],"]","[",["T_LNUMBER","0",138],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ref'",138],"]",")",";",["T_WHITESPACE","\n                    ",138],["T_VARIABLE","$referenceType",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","Filter",139],["T_DOUBLE_COLON","::",139],["T_STRING","REFERENCE_FILTER",139],";",["T_WHITESPACE","\n                ",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                    ",140],["T_THROW","throw",141],["T_WHITESPACE"," ",141],["T_NEW","new",141],["T_WHITESPACE"," ",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Exception",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Reference is not provided'",141],")",";",["T_WHITESPACE","\n                ",141],"}",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$query",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","objectManager",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","create",143],"(",["T_WHITESPACE","\n                    ",143],["T_NS_SEPARATOR","\\",144],["T_STRING","Magento",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Framework",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Search",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Request",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Query",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Filter",144],["T_DOUBLE_COLON","::",144],["T_CLASS","class",144],",",["T_WHITESPACE","\n                    ",144],"[",["T_WHITESPACE","\n                        ",145],["T_CONSTANT_ENCAPSED_STRING","'name'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$query",146],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",146],"]",",",["T_WHITESPACE","\n                        ",146],["T_CONSTANT_ENCAPSED_STRING","'boost'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_ISSET","isset",147],"(",["T_VARIABLE","$query",147],"[",["T_CONSTANT_ENCAPSED_STRING","'boost'",147],"]",")",["T_WHITESPACE"," ",147],"?",["T_WHITESPACE"," ",147],["T_VARIABLE","$query",147],"[",["T_CONSTANT_ENCAPSED_STRING","'boost'",147],"]",["T_WHITESPACE"," ",147],":",["T_WHITESPACE"," ",147],["T_LNUMBER","1",147],",",["T_WHITESPACE","\n                        ",147],["T_CONSTANT_ENCAPSED_STRING","'reference'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$reference",148],",",["T_WHITESPACE","\n                        ",148],["T_CONSTANT_ENCAPSED_STRING","'referenceType'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$referenceType",149],["T_WHITESPACE","\n                    ",149],"]",["T_WHITESPACE","\n                ",150],")",";",["T_WHITESPACE","\n                ",151],["T_BREAK","break",152],";",["T_WHITESPACE","\n            ",152],["T_CASE","case",153],["T_WHITESPACE"," ",153],["T_STRING","QueryInterface",153],["T_DOUBLE_COLON","::",153],["T_STRING","TYPE_BOOL",153],":",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$aggregatedByType",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","aggregateQueriesByType",154],"(",["T_VARIABLE","$query",154],"[",["T_CONSTANT_ENCAPSED_STRING","'queryReference'",154],"]",")",";",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$query",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","objectManager",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","create",155],"(",["T_WHITESPACE","\n                    ",155],["T_NS_SEPARATOR","\\",156],["T_STRING","Magento",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Framework",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Search",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Request",156],["T_NS_SEPARATOR","\\",156],["T_STRING","Query",156],["T_NS_SEPARATOR","\\",156],["T_STRING","BoolExpression",156],["T_DOUBLE_COLON","::",156],["T_CLASS","class",156],",",["T_WHITESPACE","\n                    ",156],["T_STRING","array_merge",157],"(",["T_WHITESPACE","\n                        ",157],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$query",158],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",158],"]",",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'boost'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_ISSET","isset",158],"(",["T_VARIABLE","$query",158],"[",["T_CONSTANT_ENCAPSED_STRING","'boost'",158],"]",")",["T_WHITESPACE"," ",158],"?",["T_WHITESPACE"," ",158],["T_VARIABLE","$query",158],"[",["T_CONSTANT_ENCAPSED_STRING","'boost'",158],"]",["T_WHITESPACE"," ",158],":",["T_WHITESPACE"," ",158],["T_LNUMBER","1",158],"]",",",["T_WHITESPACE","\n                        ",158],["T_VARIABLE","$aggregatedByType",159],["T_WHITESPACE","\n                    ",159],")",["T_WHITESPACE","\n                ",160],")",";",["T_WHITESPACE","\n                ",161],["T_BREAK","break",162],";",["T_WHITESPACE","\n            ",162],["T_DEFAULT","default",163],":",["T_WHITESPACE","\n                ",163],["T_THROW","throw",164],["T_WHITESPACE"," ",164],["T_NEW","new",164],["T_WHITESPACE"," ",164],["T_NS_SEPARATOR","\\",164],["T_STRING","InvalidArgumentException",164],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid query type'",164],")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n        ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$query",166],";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Convert array to Filter instance\n     *\n     * @param string $filterName\n     * @throws \\Exception\n     * @return FilterInterface\n     * @throws \\Exception\n     * @throws \\InvalidArgumentException\n     * @throws StateException\n     *\/",169],["T_WHITESPACE","\n    ",178],["T_PRIVATE","private",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","mapFilter",179],"(",["T_VARIABLE","$filterName",179],")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_ISSET","isset",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","filters",181],"[",["T_VARIABLE","$filterName",181],"]",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_THROW","throw",182],["T_WHITESPACE"," ",182],["T_NEW","new",182],["T_WHITESPACE"," ",182],["T_NS_SEPARATOR","\\",182],["T_STRING","Exception",182],"(",["T_CONSTANT_ENCAPSED_STRING","'Filter '",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_VARIABLE","$filterName",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","' does not exist'",182],")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE"," ",183],["T_ELSEIF","elseif",183],["T_WHITESPACE"," ",183],"(",["T_STRING","in_array",183],"(",["T_VARIABLE","$filterName",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","mappedFilters",183],")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_THROW","throw",184],["T_WHITESPACE"," ",184],["T_NEW","new",184],["T_WHITESPACE"," ",184],["T_STRING","StateException",184],"(",["T_WHITESPACE","\n                ",184],["T_NEW","new",185],["T_WHITESPACE"," ",185],["T_STRING","Phrase",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Cycle found. Filter %1 already used in request hierarchy'",185],",",["T_WHITESPACE"," ",185],"[",["T_VARIABLE","$filterName",185],"]",")",["T_WHITESPACE","\n            ",185],")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","mappedFilters",188],"[","]",["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$filterName",188],";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$filter",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","filters",189],"[",["T_VARIABLE","$filterName",189],"]",";",["T_WHITESPACE","\n        ",189],["T_SWITCH","switch",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$filter",190],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",190],"]",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_CASE","case",191],["T_WHITESPACE"," ",191],["T_STRING","FilterInterface",191],["T_DOUBLE_COLON","::",191],["T_STRING","TYPE_TERM",191],":",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$filter",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","objectManager",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","create",192],"(",["T_WHITESPACE","\n                    ",192],["T_NS_SEPARATOR","\\",193],["T_STRING","Magento",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Framework",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Search",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Request",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Filter",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Term",193],["T_DOUBLE_COLON","::",193],["T_CLASS","class",193],",",["T_WHITESPACE","\n                    ",193],"[",["T_WHITESPACE","\n                        ",194],["T_CONSTANT_ENCAPSED_STRING","'name'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$filter",195],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",195],"]",",",["T_WHITESPACE","\n                        ",195],["T_CONSTANT_ENCAPSED_STRING","'field'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$filter",196],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",196],"]",",",["T_WHITESPACE","\n                        ",196],["T_CONSTANT_ENCAPSED_STRING","'value'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$filter",197],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",197],"]",["T_WHITESPACE","\n                    ",197],"]",["T_WHITESPACE","\n                ",198],")",";",["T_WHITESPACE","\n                ",199],["T_BREAK","break",200],";",["T_WHITESPACE","\n            ",200],["T_CASE","case",201],["T_WHITESPACE"," ",201],["T_STRING","FilterInterface",201],["T_DOUBLE_COLON","::",201],["T_STRING","TYPE_RANGE",201],":",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$filter",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","objectManager",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","create",202],"(",["T_WHITESPACE","\n                    ",202],["T_NS_SEPARATOR","\\",203],["T_STRING","Magento",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Framework",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Search",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Request",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Filter",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Range",203],["T_DOUBLE_COLON","::",203],["T_CLASS","class",203],",",["T_WHITESPACE","\n                    ",203],"[",["T_WHITESPACE","\n                        ",204],["T_CONSTANT_ENCAPSED_STRING","'name'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$filter",205],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",205],"]",",",["T_WHITESPACE","\n                        ",205],["T_CONSTANT_ENCAPSED_STRING","'field'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$filter",206],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",206],"]",",",["T_WHITESPACE","\n                        ",206],["T_CONSTANT_ENCAPSED_STRING","'from'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_ISSET","isset",207],"(",["T_VARIABLE","$filter",207],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",207],"]",")",["T_WHITESPACE"," ",207],"?",["T_WHITESPACE"," ",207],["T_VARIABLE","$filter",207],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",207],"]",["T_WHITESPACE"," ",207],":",["T_WHITESPACE"," ",207],["T_STRING","null",207],",",["T_WHITESPACE","\n                        ",207],["T_CONSTANT_ENCAPSED_STRING","'to'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_ISSET","isset",208],"(",["T_VARIABLE","$filter",208],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",208],"]",")",["T_WHITESPACE"," ",208],"?",["T_WHITESPACE"," ",208],["T_VARIABLE","$filter",208],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",208],"]",["T_WHITESPACE"," ",208],":",["T_WHITESPACE"," ",208],["T_STRING","null",208],["T_WHITESPACE","\n                    ",208],"]",["T_WHITESPACE","\n                ",209],")",";",["T_WHITESPACE","\n                ",210],["T_BREAK","break",211],";",["T_WHITESPACE","\n            ",211],["T_CASE","case",212],["T_WHITESPACE"," ",212],["T_STRING","FilterInterface",212],["T_DOUBLE_COLON","::",212],["T_STRING","TYPE_WILDCARD",212],":",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$filter",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","objectManager",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","create",213],"(",["T_WHITESPACE","\n                    ",213],["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Framework",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Search",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Request",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Filter",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Wildcard",214],["T_DOUBLE_COLON","::",214],["T_CLASS","class",214],",",["T_WHITESPACE","\n                    ",214],"[",["T_WHITESPACE","\n                        ",215],["T_CONSTANT_ENCAPSED_STRING","'name'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$filter",216],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",216],"]",",",["T_WHITESPACE","\n                        ",216],["T_CONSTANT_ENCAPSED_STRING","'field'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$filter",217],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",217],"]",",",["T_WHITESPACE","\n                        ",217],["T_CONSTANT_ENCAPSED_STRING","'value'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$filter",218],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",218],"]",["T_WHITESPACE","\n                    ",218],"]",["T_WHITESPACE","\n                ",219],")",";",["T_WHITESPACE","\n                ",220],["T_BREAK","break",221],";",["T_WHITESPACE","\n            ",221],["T_CASE","case",222],["T_WHITESPACE"," ",222],["T_STRING","FilterInterface",222],["T_DOUBLE_COLON","::",222],["T_STRING","TYPE_BOOL",222],":",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$aggregatedByType",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","aggregateFiltersByType",223],"(",["T_VARIABLE","$filter",223],"[",["T_CONSTANT_ENCAPSED_STRING","'filterReference'",223],"]",")",";",["T_WHITESPACE","\n                ",223],["T_VARIABLE","$filter",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","objectManager",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","create",224],"(",["T_WHITESPACE","\n                    ",224],["T_NS_SEPARATOR","\\",225],["T_STRING","Magento",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Framework",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Search",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Request",225],["T_NS_SEPARATOR","\\",225],["T_STRING","Filter",225],["T_NS_SEPARATOR","\\",225],["T_STRING","BoolExpression",225],["T_DOUBLE_COLON","::",225],["T_CLASS","class",225],",",["T_WHITESPACE","\n                    ",225],["T_STRING","array_merge",226],"(",["T_WHITESPACE","\n                        ",226],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$filter",227],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",227],"]","]",",",["T_WHITESPACE","\n                        ",227],["T_VARIABLE","$aggregatedByType",228],["T_WHITESPACE","\n                    ",228],")",["T_WHITESPACE","\n                ",229],")",";",["T_WHITESPACE","\n                ",230],["T_BREAK","break",231],";",["T_WHITESPACE","\n            ",231],["T_DEFAULT","default",232],":",["T_WHITESPACE","\n                ",232],["T_THROW","throw",233],["T_WHITESPACE"," ",233],["T_NEW","new",233],["T_WHITESPACE"," ",233],["T_NS_SEPARATOR","\\",233],["T_STRING","InvalidArgumentException",233],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid filter type'",233],")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n        ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$filter",235],";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * Aggregate Filters by clause\n     *\n     * @param array $data\n     * @return array\n     *\/",238],["T_WHITESPACE","\n    ",243],["T_PRIVATE","private",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","aggregateFiltersByType",244],"(",["T_VARIABLE","$data",244],")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$list",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],"[","]",";",["T_WHITESPACE","\n        ",246],["T_FOREACH","foreach",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$data",247],["T_WHITESPACE"," ",247],["T_AS","as",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$value",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$list",248],"[",["T_VARIABLE","$value",248],"[",["T_CONSTANT_ENCAPSED_STRING","'clause'",248],"]","]","[",["T_VARIABLE","$value",248],"[",["T_CONSTANT_ENCAPSED_STRING","'ref'",248],"]","]",["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","mapFilter",248],"(",["T_VARIABLE","$value",248],"[",["T_CONSTANT_ENCAPSED_STRING","'ref'",248],"]",")",";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n        ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$list",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Aggregate Queries by clause\n     *\n     * @param array $data\n     * @return array\n     *\/",253],["T_WHITESPACE","\n    ",258],["T_PRIVATE","private",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","aggregateQueriesByType",259],"(",["T_VARIABLE","$data",259],")",["T_WHITESPACE","\n    ",259],"{",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$list",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],"[","]",";",["T_WHITESPACE","\n        ",261],["T_FOREACH","foreach",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$data",262],["T_WHITESPACE"," ",262],["T_AS","as",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$value",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$list",263],"[",["T_VARIABLE","$value",263],"[",["T_CONSTANT_ENCAPSED_STRING","'clause'",263],"]","]","[",["T_VARIABLE","$value",263],"[",["T_CONSTANT_ENCAPSED_STRING","'ref'",263],"]","]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","mapQuery",263],"(",["T_VARIABLE","$value",263],"[",["T_CONSTANT_ENCAPSED_STRING","'ref'",263],"]",")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$list",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * @return void\n     * @throws StateException\n     *\/",268],["T_WHITESPACE","\n    ",271],["T_PRIVATE","private",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","validate",272],"(",")",["T_WHITESPACE","\n    ",272],"{",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","validateQueries",274],"(",")",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","validateFilters",275],"(",")",";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * @return void\n     * @throws StateException\n     *\/",278],["T_WHITESPACE","\n    ",281],["T_PRIVATE","private",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","validateQueries",282],"(",")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","validateNotUsed",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","queries",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","mappedQueries",284],",",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'Query %1 is not used in request hierarchy'",284],")",";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * @param array $elements\n     * @param string[] $mappedElements\n     * @param string $errorMessage\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\StateException\n     *\/",287],["T_WHITESPACE","\n    ",293],["T_PRIVATE","private",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","validateNotUsed",294],"(",["T_VARIABLE","$elements",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$mappedElements",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$errorMessage",294],")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$allElements",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","array_keys",296],"(",["T_VARIABLE","$elements",296],")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$notUsedElements",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","implode",297],"(",["T_CONSTANT_ENCAPSED_STRING","', '",297],",",["T_WHITESPACE"," ",297],["T_STRING","array_diff",297],"(",["T_VARIABLE","$allElements",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$mappedElements",297],")",")",";",["T_WHITESPACE","\n        ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_EMPTY","empty",298],"(",["T_VARIABLE","$notUsedElements",298],")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_THROW","throw",299],["T_WHITESPACE"," ",299],["T_NEW","new",299],["T_WHITESPACE"," ",299],["T_STRING","StateException",299],"(",["T_NEW","new",299],["T_WHITESPACE"," ",299],["T_STRING","Phrase",299],"(",["T_VARIABLE","$errorMessage",299],",",["T_WHITESPACE"," ",299],"[",["T_VARIABLE","$notUsedElements",299],"]",")",")",";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n    ",300],"}",["T_WHITESPACE","\n\n    ",301],["T_DOC_COMMENT","\/**\n     * @return void\n     * @throws StateException\n     *\/",303],["T_WHITESPACE","\n    ",306],["T_PRIVATE","private",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","validateFilters",307],"(",")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","validateNotUsed",309],"(",["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","filters",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","mappedFilters",309],",",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'Filter %1 is not used in request hierarchy'",309],")",";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_DOC_COMMENT","\/**\n     * Build BucketInterface[] from array\n     *\n     * @return array\n     * @throws StateException\n     *\/",312],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","getBuckets",318],"(",")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$buckets",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],"[","]",";",["T_WHITESPACE","\n        ",320],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","aggregations",321],["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$bucketData",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$arguments",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],"[",["T_WHITESPACE","\n                ",322],["T_CONSTANT_ENCAPSED_STRING","'name'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$bucketData",323],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",323],"]",",",["T_WHITESPACE","\n                ",323],["T_CONSTANT_ENCAPSED_STRING","'field'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$bucketData",324],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",324],"]",",",["T_WHITESPACE","\n                ",324],["T_CONSTANT_ENCAPSED_STRING","'metrics'",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","mapMetrics",325],"(",["T_VARIABLE","$bucketData",325],")",",",["T_WHITESPACE","\n            ",325],"]",";",["T_WHITESPACE","\n            ",326],["T_SWITCH","switch",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$bucketData",327],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",327],"]",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n                ",327],["T_CASE","case",328],["T_WHITESPACE"," ",328],["T_STRING","BucketInterface",328],["T_DOUBLE_COLON","::",328],["T_STRING","TYPE_TERM",328],":",["T_WHITESPACE","\n                    ",328],["T_VARIABLE","$bucket",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","objectManager",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","create",329],"(",["T_WHITESPACE","\n                        ",329],["T_NS_SEPARATOR","\\",330],["T_STRING","Magento",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Framework",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Search",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Request",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Aggregation",330],["T_NS_SEPARATOR","\\",330],["T_STRING","TermBucket",330],["T_DOUBLE_COLON","::",330],["T_CLASS","class",330],",",["T_WHITESPACE","\n                        ",330],["T_VARIABLE","$arguments",331],["T_WHITESPACE","\n                    ",331],")",";",["T_WHITESPACE","\n                    ",332],["T_BREAK","break",333],";",["T_WHITESPACE","\n                ",333],["T_CASE","case",334],["T_WHITESPACE"," ",334],["T_STRING","BucketInterface",334],["T_DOUBLE_COLON","::",334],["T_STRING","TYPE_RANGE",334],":",["T_WHITESPACE","\n                    ",334],["T_VARIABLE","$bucket",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","objectManager",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","create",335],"(",["T_WHITESPACE","\n                        ",335],["T_NS_SEPARATOR","\\",336],["T_STRING","Magento",336],["T_NS_SEPARATOR","\\",336],["T_STRING","Framework",336],["T_NS_SEPARATOR","\\",336],["T_STRING","Search",336],["T_NS_SEPARATOR","\\",336],["T_STRING","Request",336],["T_NS_SEPARATOR","\\",336],["T_STRING","Aggregation",336],["T_NS_SEPARATOR","\\",336],["T_STRING","RangeBucket",336],["T_DOUBLE_COLON","::",336],["T_CLASS","class",336],",",["T_WHITESPACE","\n                        ",336],["T_STRING","array_merge",337],"(",["T_WHITESPACE","\n                            ",337],["T_VARIABLE","$arguments",338],",",["T_WHITESPACE","\n                            ",338],"[",["T_CONSTANT_ENCAPSED_STRING","'ranges'",339],["T_WHITESPACE"," ",339],["T_DOUBLE_ARROW","=>",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","mapRanges",339],"(",["T_VARIABLE","$bucketData",339],")","]",["T_WHITESPACE","\n                        ",339],")",["T_WHITESPACE","\n                    ",340],")",";",["T_WHITESPACE","\n                    ",341],["T_BREAK","break",342],";",["T_WHITESPACE","\n                ",342],["T_CASE","case",343],["T_WHITESPACE"," ",343],["T_STRING","BucketInterface",343],["T_DOUBLE_COLON","::",343],["T_STRING","TYPE_DYNAMIC",343],":",["T_WHITESPACE","\n                    ",343],["T_VARIABLE","$bucket",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","objectManager",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","create",344],"(",["T_WHITESPACE","\n                        ",344],["T_NS_SEPARATOR","\\",345],["T_STRING","Magento",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Framework",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Search",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Request",345],["T_NS_SEPARATOR","\\",345],["T_STRING","Aggregation",345],["T_NS_SEPARATOR","\\",345],["T_STRING","DynamicBucket",345],["T_DOUBLE_COLON","::",345],["T_CLASS","class",345],",",["T_WHITESPACE","\n                        ",345],["T_STRING","array_merge",346],"(",["T_WHITESPACE","\n                            ",346],["T_VARIABLE","$arguments",347],",",["T_WHITESPACE","\n                            ",347],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",348],["T_WHITESPACE"," ",348],["T_DOUBLE_ARROW","=>",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$bucketData",348],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",348],"]","]",["T_WHITESPACE","\n                        ",348],")",["T_WHITESPACE","\n                    ",349],")",";",["T_WHITESPACE","\n                    ",350],["T_BREAK","break",351],";",["T_WHITESPACE","\n                ",351],["T_DEFAULT","default",352],":",["T_WHITESPACE","\n                    ",352],["T_THROW","throw",353],["T_WHITESPACE"," ",353],["T_NEW","new",353],["T_WHITESPACE"," ",353],["T_STRING","StateException",353],"(",["T_NEW","new",353],["T_WHITESPACE"," ",353],["T_STRING","Phrase",353],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid bucket type'",353],")",")",";",["T_WHITESPACE","\n                    ",353],["T_BREAK","break",354],";",["T_WHITESPACE","\n            ",354],"}",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$buckets",356],"[","]",["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$bucket",356],";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$buckets",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * Build Metric[] from array\n     *\n     * @param array $bucketData\n     * @return array\n     *\/",361],["T_WHITESPACE","\n    ",366],["T_PRIVATE","private",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","mapMetrics",367],"(",["T_ARRAY","array",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$bucketData",367],")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$metricObjects",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],"[","]",";",["T_WHITESPACE","\n        ",369],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_ISSET","isset",370],"(",["T_VARIABLE","$bucketData",370],"[",["T_CONSTANT_ENCAPSED_STRING","'metric'",370],"]",")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$metrics",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$bucketData",371],"[",["T_CONSTANT_ENCAPSED_STRING","'metric'",371],"]",";",["T_WHITESPACE","\n            ",371],["T_FOREACH","foreach",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$metrics",372],["T_WHITESPACE"," ",372],["T_AS","as",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$metric",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                ",372],["T_VARIABLE","$metricObjects",373],"[","]",["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","objectManager",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","create",373],"(",["T_WHITESPACE","\n                    ",373],["T_NS_SEPARATOR","\\",374],["T_STRING","Magento",374],["T_NS_SEPARATOR","\\",374],["T_STRING","Framework",374],["T_NS_SEPARATOR","\\",374],["T_STRING","Search",374],["T_NS_SEPARATOR","\\",374],["T_STRING","Request",374],["T_NS_SEPARATOR","\\",374],["T_STRING","Aggregation",374],["T_NS_SEPARATOR","\\",374],["T_STRING","Metric",374],["T_DOUBLE_COLON","::",374],["T_CLASS","class",374],",",["T_WHITESPACE","\n                    ",374],"[",["T_WHITESPACE","\n                        ",375],["T_CONSTANT_ENCAPSED_STRING","'type'",376],["T_WHITESPACE"," ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$metric",376],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",376],"]",["T_WHITESPACE","\n                    ",376],"]",["T_WHITESPACE","\n                ",377],")",";",["T_WHITESPACE","\n            ",378],"}",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n        ",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$metricObjects",381],";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * Build Range[] from array\n     *\n     * @param array $bucketData\n     * @return array\n     *\/",384],["T_WHITESPACE","\n    ",389],["T_PRIVATE","private",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","mapRanges",390],"(",["T_ARRAY","array",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$bucketData",390],")",["T_WHITESPACE","\n    ",390],"{",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$rangeObjects",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],"[","]",";",["T_WHITESPACE","\n        ",392],["T_IF","if",393],["T_WHITESPACE"," ",393],"(",["T_ISSET","isset",393],"(",["T_VARIABLE","$bucketData",393],"[",["T_CONSTANT_ENCAPSED_STRING","'range'",393],"]",")",")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$ranges",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$bucketData",394],"[",["T_CONSTANT_ENCAPSED_STRING","'range'",394],"]",";",["T_WHITESPACE","\n            ",394],["T_FOREACH","foreach",395],["T_WHITESPACE"," ",395],"(",["T_VARIABLE","$ranges",395],["T_WHITESPACE"," ",395],["T_AS","as",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$range",395],")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n                ",395],["T_VARIABLE","$rangeObjects",396],"[","]",["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","objectManager",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","create",396],"(",["T_WHITESPACE","\n                    ",396],["T_NS_SEPARATOR","\\",397],["T_STRING","Magento",397],["T_NS_SEPARATOR","\\",397],["T_STRING","Framework",397],["T_NS_SEPARATOR","\\",397],["T_STRING","Search",397],["T_NS_SEPARATOR","\\",397],["T_STRING","Request",397],["T_NS_SEPARATOR","\\",397],["T_STRING","Aggregation",397],["T_NS_SEPARATOR","\\",397],["T_STRING","Range",397],["T_DOUBLE_COLON","::",397],["T_CLASS","class",397],",",["T_WHITESPACE","\n                    ",397],"[",["T_WHITESPACE","\n                        ",398],["T_CONSTANT_ENCAPSED_STRING","'from'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$range",399],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",399],"]",",",["T_WHITESPACE","\n                        ",399],["T_CONSTANT_ENCAPSED_STRING","'to'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$range",400],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",400],"]",["T_WHITESPACE","\n                    ",400],"]",["T_WHITESPACE","\n                ",401],")",";",["T_WHITESPACE","\n            ",402],"}",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n        ",404],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$rangeObjects",405],";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n",406],"}",["T_WHITESPACE","\n",407]]
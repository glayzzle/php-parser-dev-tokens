[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Framework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Search",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adapter",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Mysql",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DB",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Adapter",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AdapterInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DB",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Ddl",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Table",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","DB",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Select",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","TemporaryStorage",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_CONST","const",15],["T_WHITESPACE"," ",15],["T_STRING","TEMPORARY_TABLE_PREFIX",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'search_tmp_'",15],";",["T_WHITESPACE","\n\n    ",15],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","FIELD_ENTITY_ID",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",17],";",["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","FIELD_SCORE",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'score'",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\ResourceConnection\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$resource",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","__construct",28],"(",["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Framework",28],["T_NS_SEPARATOR","\\",28],["T_STRING","App",28],["T_NS_SEPARATOR","\\",28],["T_STRING","ResourceConnection",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$resource",28],")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","resource",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$resource",30],";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Stores Documents\n     *\n     * @param \\Magento\\Framework\\Api\\Search\\DocumentInterface[] $documents\n     * @return Table\n     * @deprecated\n     *\/",33],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","storeDocuments",40],"(",["T_VARIABLE","$documents",40],")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_RETURN","return",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","storeApiDocuments",42],"(",["T_VARIABLE","$documents",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Stores Api type Documents\n     *\n     * @param \\Magento\\Framework\\Api\\Search\\DocumentInterface[] $documents\n     * @return Table\n     *\/",45],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","storeApiDocuments",51],"(",["T_VARIABLE","$documents",51],")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$data",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],"[","]",";",["T_WHITESPACE","\n        ",53],["T_FOREACH","foreach",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$documents",54],["T_WHITESPACE"," ",54],["T_AS","as",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$document",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$data",55],"[","]",["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],"[",["T_WHITESPACE","\n                ",55],["T_VARIABLE","$document",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getId",56],"(",")",",",["T_WHITESPACE","\n                ",56],["T_VARIABLE","$document",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getCustomAttribute",57],"(",["T_CONSTANT_ENCAPSED_STRING","'score'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","getValue",57],"(",")",",",["T_WHITESPACE","\n            ",57],"]",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n\n        ",59],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","populateTemporaryTable",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","createTemporaryTable",61],"(",")",",",["T_WHITESPACE"," ",61],["T_VARIABLE","$data",61],")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Populates temporary table\n     *\n     * @param Table $table\n     * @param array $data\n     * @return Table\n     * @throws \\Zend_Db_Exception\n     *\/",64],["T_WHITESPACE","\n    ",71],["T_PRIVATE","private",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","populateTemporaryTable",72],"(",["T_STRING","Table",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$table",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$data",72],")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_STRING","count",74],"(",["T_VARIABLE","$data",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getConnection",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","insertArray",75],"(",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$table",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getName",76],"(",")",",",["T_WHITESPACE","\n                ",76],"[",["T_WHITESPACE","\n                    ",77],["T_STRING","self",78],["T_DOUBLE_COLON","::",78],["T_STRING","FIELD_ENTITY_ID",78],",",["T_WHITESPACE","\n                    ",78],["T_STRING","self",79],["T_DOUBLE_COLON","::",79],["T_STRING","FIELD_SCORE",79],",",["T_WHITESPACE","\n                ",79],"]",",",["T_WHITESPACE","\n                ",80],["T_VARIABLE","$data",81],["T_WHITESPACE","\n            ",81],")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$table",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * @param Select $select\n     * @return Table\n     * @throws \\Zend_Db_Exception\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","storeDocumentsFromSelect",92],"(",["T_STRING","Select",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$select",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$table",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","createTemporaryTable",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getConnection",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","query",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getConnection",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","insertFromSelect",95],"(",["T_VARIABLE","$select",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$table",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getName",95],"(",")",")",")",";",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$table",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * @return false|AdapterInterface\n     *\/",99],["T_WHITESPACE","\n    ",101],["T_PRIVATE","private",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getConnection",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","resource",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getConnection",104],"(",")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * @return Table\n     * @throws \\Zend_Db_Exception\n     *\/",107],["T_WHITESPACE","\n    ",110],["T_PRIVATE","private",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","createTemporaryTable",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$connection",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getConnection",113],"(",")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$tableName",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","resource",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getTableName",114],"(",["T_STRING","str_replace",114],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'_'",114],",",["T_WHITESPACE"," ",114],["T_STRING","uniqid",114],"(",["T_STRING","self",114],["T_DOUBLE_COLON","::",114],["T_STRING","TEMPORARY_TABLE_PREFIX",114],",",["T_WHITESPACE"," ",114],["T_STRING","true",114],")",")",")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$table",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$connection",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","newTable",115],"(",["T_VARIABLE","$tableName",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$connection",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","dropTemporaryTable",116],"(",["T_VARIABLE","$table",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getName",116],"(",")",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$table",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","addColumn",117],"(",["T_WHITESPACE","\n            ",117],["T_STRING","self",118],["T_DOUBLE_COLON","::",118],["T_STRING","FIELD_ENTITY_ID",118],",",["T_WHITESPACE","\n            ",118],["T_STRING","Table",119],["T_DOUBLE_COLON","::",119],["T_STRING","TYPE_INTEGER",119],",",["T_WHITESPACE","\n            ",119],["T_LNUMBER","10",120],",",["T_WHITESPACE","\n            ",120],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_STRING","true",121],",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'nullable'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_STRING","false",121],",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'primary'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_STRING","true",121],"]",",",["T_WHITESPACE","\n            ",121],["T_CONSTANT_ENCAPSED_STRING","'Entity ID'",122],["T_WHITESPACE","\n        ",122],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$table",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","addColumn",124],"(",["T_WHITESPACE","\n            ",124],["T_STRING","self",125],["T_DOUBLE_COLON","::",125],["T_STRING","FIELD_SCORE",125],",",["T_WHITESPACE","\n            ",125],["T_STRING","Table",126],["T_DOUBLE_COLON","::",126],["T_STRING","TYPE_DECIMAL",126],",",["T_WHITESPACE","\n            ",126],"[",["T_LNUMBER","32",127],",",["T_WHITESPACE"," ",127],["T_LNUMBER","16",127],"]",",",["T_WHITESPACE","\n            ",127],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_STRING","true",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'nullable'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_STRING","false",128],"]",",",["T_WHITESPACE","\n            ",128],["T_CONSTANT_ENCAPSED_STRING","'Score'",129],["T_WHITESPACE","\n        ",129],")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$table",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setOption",131],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'memory'",131],")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$connection",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","createTemporaryTable",132],"(",["T_VARIABLE","$table",132],")",";",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$table",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n",134],"}",["T_WHITESPACE","\n",135]]
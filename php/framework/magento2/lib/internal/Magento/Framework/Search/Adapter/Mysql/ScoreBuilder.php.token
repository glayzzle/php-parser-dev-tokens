[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Search",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adapter",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Mysql",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Class for generating sql condition for calculating store manager\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","ScoreBuilder",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PRIVATE","private",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$scoreCondition",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","''",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_CONST","const",21],["T_WHITESPACE"," ",21],["T_STRING","WEIGHT_FIELD",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'search_weight'",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Get column alias for global score query in sql\n     *\n     * @return string\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","getScoreAlias",28],"(",")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_RETURN","return",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'score'",30],";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Get generated sql condition for global score\n     *\n     * @return string\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","build",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$scoreCondition",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","scoreCondition",40],";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","clear",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$scoreAlias",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getScoreAlias",42],"(",")",";",["T_WHITESPACE","\n\n        ",42],["T_RETURN","return",44],["T_WHITESPACE"," ",44],"\"",["T_ENCAPSED_AND_WHITESPACE","(",44],["T_CURLY_OPEN","{",44],["T_VARIABLE","$scoreCondition",44],"}",["T_ENCAPSED_AND_WHITESPACE",") AS ",44],["T_CURLY_OPEN","{",44],["T_VARIABLE","$scoreAlias",44],"}","\"",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Start Query\n     *\n     * @return void\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","startQuery",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","addPlus",54],"(",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","scoreCondition",55],["T_WHITESPACE"," ",55],["T_CONCAT_EQUAL",".=",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'('",55],";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * End Query\n     *\n     * @param float $boost\n     * @return void\n     *\/",58],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","endQuery",64],"(",["T_VARIABLE","$boost",64],")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_IF","if",66],["T_WHITESPACE"," ",66],"(","!",["T_EMPTY","empty",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","scoreCondition",66],")",["T_WHITESPACE"," ",66],["T_BOOLEAN_AND","&&",66],["T_WHITESPACE"," ",66],["T_STRING","substr",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","scoreCondition",66],",",["T_WHITESPACE"," ",66],"-",["T_LNUMBER","1",66],")",["T_WHITESPACE"," ",66],["T_IS_NOT_IDENTICAL","!==",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'('",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","scoreCondition",67],["T_WHITESPACE"," ",67],["T_CONCAT_EQUAL",".=",67],["T_WHITESPACE"," ",67],"\"",["T_ENCAPSED_AND_WHITESPACE",") * ",67],["T_CURLY_OPEN","{",67],["T_VARIABLE","$boost",67],"}","\"",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE"," ",68],["T_ELSE","else",68],["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","scoreCondition",69],["T_WHITESPACE"," ",69],["T_CONCAT_EQUAL",".=",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'0)'",69],";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Add Condition for score calculation\n     *\n     * @param string $score\n     * @param bool $useWeights\n     * @return void\n     *\/",73],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","addCondition",80],"(",["T_VARIABLE","$score",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$useWeights",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","true",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","addPlus",82],"(",")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$condition",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"\"",["T_CURLY_OPEN","{",83],["T_VARIABLE","$score",83],"}","\"",";",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$useWeights",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$condition",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],"\"",["T_ENCAPSED_AND_WHITESPACE","LEAST((",85],["T_VARIABLE","$condition",85],["T_ENCAPSED_AND_WHITESPACE","), 1000000) * POW(2, ",85],"\"",["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_STRING","self",85],["T_DOUBLE_COLON","::",85],["T_STRING","WEIGHT_FIELD",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","')'",85],";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","scoreCondition",87],["T_WHITESPACE"," ",87],["T_CONCAT_EQUAL",".=",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$condition",87],";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Add Plus sign for Score calculation\n     *\n     * @return void\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PRIVATE","private",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","addPlus",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_EMPTY","empty",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","scoreCondition",97],")",["T_WHITESPACE"," ",97],["T_BOOLEAN_AND","&&",97],["T_WHITESPACE"," ",97],["T_STRING","substr",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","scoreCondition",97],",",["T_WHITESPACE"," ",97],"-",["T_LNUMBER","1",97],")",["T_WHITESPACE"," ",97],["T_IS_NOT_IDENTICAL","!==",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'('",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","scoreCondition",98],["T_WHITESPACE"," ",98],["T_CONCAT_EQUAL",".=",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","' + '",98],";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Clear score manager\n     *\n     * @return void\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PRIVATE","private",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","clear",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","scoreCondition",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","''",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n",110],"}",["T_WHITESPACE","\n",111]]
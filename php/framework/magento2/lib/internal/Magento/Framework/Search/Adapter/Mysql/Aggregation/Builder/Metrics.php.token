[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Search",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adapter",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Mysql",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Aggregation",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Builder",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Search",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Request",8],["T_NS_SEPARATOR","\\",8],["T_STRING","BucketInterface",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","RequestBucketInterface",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","Metrics",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * Available metrics\n     *\n     * @var string[]\n     *\/",12],["T_WHITESPACE","\n    ",16],["T_PRIVATE","private",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$allowedMetrics",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'sum'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'min'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'max'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'avg'",17],"]",";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * Build metrics for Select->columns\n     *\n     * @param RequestBucketInterface $bucket\n     * @return string[]\n     *\/",19],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","build",25],"(",["T_STRING","RequestBucketInterface",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$bucket",25],")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$selectAggregations",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[","]",";",["T_WHITESPACE","\n        ",27],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Search\\Request\\Aggregation\\Metric[] $metrics *\/",28],["T_WHITESPACE","\n        ",28],["T_VARIABLE","$metrics",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$bucket",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getMetrics",29],"(",")",";",["T_WHITESPACE","\n\n        ",29],["T_FOREACH","foreach",31],["T_WHITESPACE"," ",31],"(",["T_VARIABLE","$metrics",31],["T_WHITESPACE"," ",31],["T_AS","as",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$metric",31],")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n            ",31],["T_VARIABLE","$metricType",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$metric",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getType",32],"(",")",";",["T_WHITESPACE","\n            ",32],["T_IF","if",33],["T_WHITESPACE"," ",33],"(",["T_STRING","in_array",33],"(",["T_VARIABLE","$metricType",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","allowedMetrics",33],",",["T_WHITESPACE"," ",33],["T_STRING","true",33],")",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n                ",33],["T_VARIABLE","$selectAggregations",34],"[",["T_VARIABLE","$metricType",34],"]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"\"",["T_VARIABLE","$metricType",34],["T_ENCAPSED_AND_WHITESPACE","(main_table.value)",34],"\"",";",["T_WHITESPACE","\n            ",34],"}",["T_WHITESPACE","\n        ",35],"}",["T_WHITESPACE","\n\n        ",36],["T_RETURN","return",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$selectAggregations",38],";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n",39],"}",["T_WHITESPACE","\n",40]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Search",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Request",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Search Request xml converter\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Converter",11],["T_WHITESPACE"," ",11],["T_IMPLEMENTS","implements",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Config",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ConverterInterface",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Convert config\n     *\n     * @param \\DOMDocument $source\n     * @return array\n     *\/",13],["T_WHITESPACE","\n    ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","convert",19],"(",["T_VARIABLE","$source",19],")",["T_WHITESPACE","\n    ",19],"{",["T_WHITESPACE","\n        ",20],["T_DOC_COMMENT","\/** @var \\DOMNodeList $requestNodes *\/",21],["T_WHITESPACE","\n        ",21],["T_VARIABLE","$requestNodes",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$source",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","getElementsByTagName",22],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",22],")",";",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$requests",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],"[","]",";",["T_WHITESPACE","\n        ",23],["T_FOREACH","foreach",24],["T_WHITESPACE"," ",24],"(",["T_VARIABLE","$requestNodes",24],["T_WHITESPACE"," ",24],["T_AS","as",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$requestNode",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n            ",24],["T_VARIABLE","$simpleXmlNode",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","simplexml_import_dom",25],"(",["T_VARIABLE","$requestNode",25],")",";",["T_WHITESPACE","\n            ",25],["T_DOC_COMMENT","\/** @var \\DOMElement $requestNode *\/",26],["T_WHITESPACE","\n            ",26],["T_VARIABLE","$name",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$requestNode",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","getAttribute",27],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",27],")",";",["T_WHITESPACE","\n            ",27],["T_VARIABLE","$request",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","mergeAttributes",28],"(",["T_ARRAY_CAST","(array)",28],["T_VARIABLE","$simpleXmlNode",28],")",";",["T_WHITESPACE","\n            ",28],["T_VARIABLE","$request",29],"[",["T_CONSTANT_ENCAPSED_STRING","'dimensions'",29],"]",["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","convertNodes",29],"(",["T_VARIABLE","$simpleXmlNode",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","dimensions",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'name'",29],")",";",["T_WHITESPACE","\n            ",29],["T_VARIABLE","$request",30],"[",["T_CONSTANT_ENCAPSED_STRING","'queries'",30],"]",["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","convertNodes",30],"(",["T_VARIABLE","$simpleXmlNode",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","queries",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'name'",30],")",";",["T_WHITESPACE","\n            ",30],["T_VARIABLE","$request",31],"[",["T_CONSTANT_ENCAPSED_STRING","'filters'",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","convertNodes",31],"(",["T_VARIABLE","$simpleXmlNode",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","filters",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'name'",31],")",";",["T_WHITESPACE","\n            ",31],["T_VARIABLE","$request",32],"[",["T_CONSTANT_ENCAPSED_STRING","'aggregations'",32],"]",["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","convertNodes",32],"(",["T_VARIABLE","$simpleXmlNode",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","aggregations",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'name'",32],")",";",["T_WHITESPACE","\n            ",32],["T_VARIABLE","$requests",33],"[",["T_VARIABLE","$name",33],"]",["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$request",33],";",["T_WHITESPACE","\n        ",33],"}",["T_WHITESPACE","\n        ",34],["T_RETURN","return",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$requests",35],";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Merge attributes in node data\n     *\n     * @param array $data\n     * @return array\n     *\/",38],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","mergeAttributes",44],"(",["T_VARIABLE","$data",44],")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_ISSET","isset",46],"(",["T_VARIABLE","$data",46],"[",["T_CONSTANT_ENCAPSED_STRING","'@attributes'",46],"]",")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$data",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","array_merge",47],"(",["T_VARIABLE","$data",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],"[",["T_CONSTANT_ENCAPSED_STRING","'@attributes'",47],"]",")",";",["T_WHITESPACE","\n            ",47],["T_UNSET","unset",48],"(",["T_VARIABLE","$data",48],"[",["T_CONSTANT_ENCAPSED_STRING","'@attributes'",48],"]",")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n        ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$data",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Convert nodes to array\n     *\n     * @param \\SimpleXMLElement $nodes\n     * @param string $name\n     * @return array\n     *\/",53],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","convertNodes",60],"(",["T_NS_SEPARATOR","\\",60],["T_STRING","SimpleXMLElement",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$nodes",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$name",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$list",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[","]",";",["T_WHITESPACE","\n        ",62],["T_IF","if",63],["T_WHITESPACE"," ",63],"(","!",["T_EMPTY","empty",63],"(",["T_VARIABLE","$nodes",63],")",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n            ",63],["T_DOC_COMMENT","\/** @var \\SimpleXMLElement $node *\/",64],["T_WHITESPACE","\n            ",64],["T_FOREACH","foreach",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$nodes",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","children",65],"(",")",["T_WHITESPACE"," ",65],["T_AS","as",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$node",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_VARIABLE","$element",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","convertToArray",66],"(",["T_VARIABLE","$node",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","attributes",66],"(",")",")",";",["T_WHITESPACE","\n                ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$node",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","count",67],"(",")",["T_WHITESPACE"," ",67],">",["T_WHITESPACE"," ",67],["T_LNUMBER","0",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                    ",67],["T_VARIABLE","$element",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","convertChildNodes",68],"(",["T_VARIABLE","$element",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$node",68],")",";",["T_WHITESPACE","\n                ",68],"}",["T_WHITESPACE","\n                ",69],["T_VARIABLE","$type",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING_CAST","(string)",70],["T_VARIABLE","$node",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","attributes",70],"(",["T_CONSTANT_ENCAPSED_STRING","'xsi'",70],",",["T_WHITESPACE"," ",70],["T_STRING","true",70],")","[",["T_CONSTANT_ENCAPSED_STRING","'type'",70],"]",";",["T_WHITESPACE","\n                ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_EMPTY","empty",71],"(",["T_VARIABLE","$type",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n                    ",71],["T_VARIABLE","$element",72],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",72],"]",["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$type",72],";",["T_WHITESPACE","\n                ",72],"}",["T_WHITESPACE","\n\n                ",73],["T_VARIABLE","$list",75],"[",["T_VARIABLE","$element",75],"[",["T_VARIABLE","$name",75],"]","]",["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$element",75],";",["T_WHITESPACE","\n            ",75],"}",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$list",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Deep converting simlexml element to array\n     *\n     * @param \\SimpleXMLElement $node\n     * @return array\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","convertToArray",87],"(",["T_NS_SEPARATOR","\\",87],["T_STRING","SimpleXMLElement",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$node",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","mergeAttributes",89],"(",["T_STRING","json_decode",89],"(",["T_STRING","json_encode",89],"(",["T_VARIABLE","$node",89],")",",",["T_WHITESPACE"," ",89],["T_STRING","true",89],")",")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Convert child nodes to array\n     *\n     * @param array $element\n     * @param \\SimpleXMLElement $node\n     * @return array\n     *\/",92],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","convertChildNodes",99],"(",["T_ARRAY","array",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$element",99],",",["T_WHITESPACE"," ",99],["T_NS_SEPARATOR","\\",99],["T_STRING","SimpleXMLElement",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$node",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$node",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","count",101],"(",")",["T_WHITESPACE"," ",101],["T_IS_EQUAL","==",101],["T_WHITESPACE"," ",101],["T_LNUMBER","0",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$element",102],"[",["T_VARIABLE","$node",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getName",102],"(",")","]","[","]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","convertToArray",102],"(",["T_VARIABLE","$node",102],")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE"," ",103],["T_ELSE","else",103],["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$node",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","children",104],"(",")",["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$child",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$element",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","convertChildNodes",105],"(",["T_VARIABLE","$element",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$child",105],")",";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$element",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n",109],"}",["T_WHITESPACE","\n",110]]
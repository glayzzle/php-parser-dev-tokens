[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Framework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Search",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unit",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adapter",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Mysql",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","TestFramework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Unit",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Helper",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ObjectManager",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","ConditionManagerTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PHPUnit_Framework_TestCase",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\ResourceConnection|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PRIVATE","private",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$resource",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Search\\Adapter\\Mysql\\ConditionManager *\/",18],["T_WHITESPACE","\n    ",18],["T_PRIVATE","private",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$conditionManager",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DB\\Adapter\\AdapterInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$connectionMock",24],";",["T_WHITESPACE","\n\n    ",24],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setUp",26],"(",")",["T_WHITESPACE","\n    ",26],"{",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$objectManager",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_NEW","new",28],["T_WHITESPACE"," ",28],["T_STRING","ObjectManager",28],"(",["T_VARIABLE","$this",28],")",";",["T_WHITESPACE","\n\n        ",28],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","connectionMock",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getMockBuilder",30],"(",["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","DB",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Adapter",30],["T_NS_SEPARATOR","\\",30],["T_STRING","AdapterInterface",30],["T_DOUBLE_COLON","::",30],["T_CLASS","class",30],")",["T_WHITESPACE","\n            ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","disableOriginalConstructor",31],"(",")",["T_WHITESPACE","\n            ",31],["T_OBJECT_OPERATOR","->",32],["T_STRING","setMethods",32],"(","[",["T_CONSTANT_ENCAPSED_STRING","'quote'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",32],"]",")",["T_WHITESPACE","\n            ",32],["T_OBJECT_OPERATOR","->",33],["T_STRING","getMockForAbstractClass",33],"(",")",";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","connectionMock",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","expects",34],"(",["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","any",34],"(",")",")",["T_WHITESPACE","\n            ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","method",35],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",35],")",["T_WHITESPACE","\n            ",35],["T_OBJECT_OPERATOR","->",36],["T_STRING","will",36],"(",["T_WHITESPACE","\n                ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","returnCallback",37],"(",["T_WHITESPACE","\n                    ",37],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$value",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n                        ",38],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_STRING","sprintf",39],"(",["T_CONSTANT_ENCAPSED_STRING","'\\'%s\\''",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$value",39],")",";",["T_WHITESPACE","\n                    ",39],"}",["T_WHITESPACE","\n                ",40],")",["T_WHITESPACE","\n            ",41],")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","connectionMock",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","expects",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","any",43],"(",")",")",["T_WHITESPACE","\n            ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","method",44],"(",["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",44],")",["T_WHITESPACE","\n            ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","will",45],"(",["T_WHITESPACE","\n                ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","returnCallback",46],"(",["T_WHITESPACE","\n                    ",46],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$value",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n                        ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_STRING","sprintf",48],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`'",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$value",48],")",";",["T_WHITESPACE","\n                    ",48],"}",["T_WHITESPACE","\n                ",49],")",["T_WHITESPACE","\n            ",50],")",";",["T_WHITESPACE","\n\n        ",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","resource",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getMockBuilder",53],"(",["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Framework",53],["T_NS_SEPARATOR","\\",53],["T_STRING","App",53],["T_NS_SEPARATOR","\\",53],["T_STRING","ResourceConnection",53],["T_DOUBLE_COLON","::",53],["T_CLASS","class",53],")",["T_WHITESPACE","\n            ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","disableOriginalConstructor",54],"(",")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","getMock",55],"(",")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","resource",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","expects",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","once",56],"(",")",")",["T_WHITESPACE","\n            ",56],["T_OBJECT_OPERATOR","->",57],["T_STRING","method",57],"(",["T_CONSTANT_ENCAPSED_STRING","'getConnection'",57],")",["T_WHITESPACE","\n            ",57],["T_OBJECT_OPERATOR","->",58],["T_STRING","will",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","returnValue",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","connectionMock",58],")",")",";",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","conditionManager",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$objectManager",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getObject",60],"(",["T_WHITESPACE","\n            ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Framework",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Search",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Adapter",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Mysql",61],["T_NS_SEPARATOR","\\",61],["T_STRING","ConditionManager",61],["T_DOUBLE_COLON","::",61],["T_CLASS","class",61],",",["T_WHITESPACE","\n            ",61],"[",["T_WHITESPACE","\n                ",62],["T_CONSTANT_ENCAPSED_STRING","'resource'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","resource",63],["T_WHITESPACE","\n            ",63],"]",["T_WHITESPACE","\n        ",64],")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @dataProvider wrapBracketsDataProvider\n     * @param $query\n     * @param $expectedResult\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","testWrapBrackets",73],"(",["T_VARIABLE","$query",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$expectedResult",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$actualResult",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","conditionManager",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","wrapBrackets",75],"(",["T_VARIABLE","$query",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEquals",76],"(",["T_VARIABLE","$expectedResult",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$actualResult",76],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Data provider for wrapBrackets test\n     *\n     * @return array\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","wrapBracketsDataProvider",84],"(",")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],"[",["T_WHITESPACE","\n            ",86],["T_CONSTANT_ENCAPSED_STRING","'validQuery'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],"[",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'query'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'a = b'",88],",",["T_WHITESPACE","\n                ",88],["T_CONSTANT_ENCAPSED_STRING","'expectedResult'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'(a = b)'",89],",",["T_WHITESPACE","\n            ",89],"]",",",["T_WHITESPACE","\n            ",90],["T_CONSTANT_ENCAPSED_STRING","'emptyQuery'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],"[",["T_WHITESPACE","\n                ",91],["T_CONSTANT_ENCAPSED_STRING","'query'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","''",92],",",["T_WHITESPACE","\n                ",92],["T_CONSTANT_ENCAPSED_STRING","'expectedResult'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","''",93],",",["T_WHITESPACE","\n            ",93],"]",",",["T_WHITESPACE","\n            ",94],["T_CONSTANT_ENCAPSED_STRING","'invalidQuery'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],"[",["T_WHITESPACE","\n                ",95],["T_CONSTANT_ENCAPSED_STRING","'query'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'1'",96],",",["T_WHITESPACE","\n                ",96],["T_CONSTANT_ENCAPSED_STRING","'expectedResult'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'(1)'",97],",",["T_WHITESPACE","\n            ",97],"]",["T_WHITESPACE","\n        ",98],"]",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","testCombineQueries",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$queries",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[",["T_WHITESPACE","\n            ",104],["T_CONSTANT_ENCAPSED_STRING","'a = b'",105],",",["T_WHITESPACE","\n            ",105],["T_STRING","false",106],",",["T_WHITESPACE","\n            ",106],["T_STRING","true",107],",",["T_WHITESPACE","\n            ",107],["T_CONSTANT_ENCAPSED_STRING","''",108],",",["T_WHITESPACE","\n            ",108],["T_LNUMBER","0",109],",",["T_WHITESPACE","\n            ",109],["T_CONSTANT_ENCAPSED_STRING","'test'",110],",",["T_WHITESPACE","\n        ",110],"]",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$unionOperator",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'AND'",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$expectedResult",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'a = b AND 1 AND 0 AND test'",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$actualResult",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","conditionManager",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","combineQueries",114],"(",["T_VARIABLE","$queries",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$unionOperator",114],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertEquals",115],"(",["T_VARIABLE","$expectedResult",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$actualResult",115],")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * @dataProvider generateConditionDataProvider\n     * @param $field\n     * @param $operator\n     * @param $value\n     * @param $expectedResult\n     *\/",118],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","testGenerateCondition",125],"(",["T_VARIABLE","$field",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$operator",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$value",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$expectedResult",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$actualResult",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","conditionManager",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","generateCondition",127],"(",["T_VARIABLE","$field",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$operator",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$value",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertEquals",128],"(",["T_VARIABLE","$expectedResult",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$actualResult",128],")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",131],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","generateConditionDataProvider",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],"[",["T_WHITESPACE","\n            ",136],"[",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'field'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'a'",138],",",["T_WHITESPACE","\n                ",138],["T_CONSTANT_ENCAPSED_STRING","'operator'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'='",139],",",["T_WHITESPACE","\n                ",139],["T_CONSTANT_ENCAPSED_STRING","'value'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_LNUMBER","1",140],",",["T_WHITESPACE","\n                ",140],["T_CONSTANT_ENCAPSED_STRING","'expectedResult'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'`a` = \\'1\\''",141],",",["T_WHITESPACE","\n            ",141],"]",",",["T_WHITESPACE","\n            ",142],"[",["T_WHITESPACE","\n                ",143],["T_CONSTANT_ENCAPSED_STRING","'field'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'a'",144],",",["T_WHITESPACE","\n                ",144],["T_CONSTANT_ENCAPSED_STRING","'operator'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'='",145],",",["T_WHITESPACE","\n                ",145],["T_CONSTANT_ENCAPSED_STRING","'value'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'123'",146],",",["T_WHITESPACE","\n                ",146],["T_CONSTANT_ENCAPSED_STRING","'expectedResult'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'`a` = \\'123\\''",147],["T_WHITESPACE","\n            ",147],"]",",",["T_WHITESPACE","\n        ",148],"]",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n",150],"}",["T_WHITESPACE","\n",151]]
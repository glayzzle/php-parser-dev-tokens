[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Communication",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Communication",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigInterface",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","Config",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Reflection",9],["T_NS_SEPARATOR","\\",9],["T_STRING","MethodsMap",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Communication config generator based on service methods reflection\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","ReflectionGenerator",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","DEFAULT_HANDLER",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'defaultHandler'",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var MethodsMap\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$methodsMap",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Initialize dependencies\n     *\n     * @param MethodsMap $methodsMap\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","__construct",28],"(",["T_STRING","MethodsMap",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$methodsMap",28],")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","methodsMap",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$methodsMap",30],";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Extract service method metadata.\n     *\n     * @param string $className\n     * @param string $methodName\n     * @return array\n     *\/",33],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","extractMethodMetadata",40],"(",["T_VARIABLE","$className",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$methodName",40],")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$result",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],"[",["T_WHITESPACE","\n            ",42],["T_STRING","Config",43],["T_DOUBLE_COLON","::",43],["T_STRING","SCHEMA_METHOD_PARAMS",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],"[","]",",",["T_WHITESPACE","\n            ",43],["T_STRING","Config",44],["T_DOUBLE_COLON","::",44],["T_STRING","SCHEMA_METHOD_RETURN_TYPE",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","methodsMap",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getMethodReturnType",44],"(",["T_VARIABLE","$className",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$methodName",44],")",",",["T_WHITESPACE","\n            ",44],["T_STRING","Config",45],["T_DOUBLE_COLON","::",45],["T_STRING","SCHEMA_METHOD_HANDLER",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],"[",["T_STRING","Config",45],["T_DOUBLE_COLON","::",45],["T_STRING","HANDLER_TYPE",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$className",45],",",["T_WHITESPACE"," ",45],["T_STRING","Config",45],["T_DOUBLE_COLON","::",45],["T_STRING","HANDLER_METHOD",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$methodName",45],"]",["T_WHITESPACE","\n        ",45],"]",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$paramsMeta",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","methodsMap",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getMethodParams",47],"(",["T_VARIABLE","$className",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$methodName",47],")",";",["T_WHITESPACE","\n        ",47],["T_FOREACH","foreach",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$paramsMeta",48],["T_WHITESPACE"," ",48],["T_AS","as",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$paramPosition",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$paramMeta",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$result",49],"[",["T_STRING","Config",49],["T_DOUBLE_COLON","::",49],["T_STRING","SCHEMA_METHOD_PARAMS",49],"]","[","]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[",["T_WHITESPACE","\n                ",49],["T_STRING","Config",50],["T_DOUBLE_COLON","::",50],["T_STRING","SCHEMA_METHOD_PARAM_NAME",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$paramMeta",50],"[",["T_STRING","MethodsMap",50],["T_DOUBLE_COLON","::",50],["T_STRING","METHOD_META_NAME",50],"]",",",["T_WHITESPACE","\n                ",50],["T_STRING","Config",51],["T_DOUBLE_COLON","::",51],["T_STRING","SCHEMA_METHOD_PARAM_POSITION",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$paramPosition",51],",",["T_WHITESPACE","\n                ",51],["T_STRING","Config",52],["T_DOUBLE_COLON","::",52],["T_STRING","SCHEMA_METHOD_PARAM_IS_REQUIRED",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],"!",["T_VARIABLE","$paramMeta",52],"[",["T_STRING","MethodsMap",52],["T_DOUBLE_COLON","::",52],["T_STRING","METHOD_META_HAS_DEFAULT_VALUE",52],"]",",",["T_WHITESPACE","\n                ",52],["T_STRING","Config",53],["T_DOUBLE_COLON","::",53],["T_STRING","SCHEMA_METHOD_PARAM_TYPE",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$paramMeta",53],"[",["T_STRING","MethodsMap",53],["T_DOUBLE_COLON","::",53],["T_STRING","METHOD_META_TYPE",53],"]",",",["T_WHITESPACE","\n            ",53],"]",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n        ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$result",56],";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Generate config data based on service method signature.\n     *\n     * @param string $topicName\n     * @param string $serviceType\n     * @param string $serviceMethod\n     * @param array|null $handlers\n     * @return array\n     *\/",59],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","generateTopicConfigForServiceMethod",68],"(",["T_VARIABLE","$topicName",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$serviceType",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$serviceMethod",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$handlers",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],"[","]",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$methodMetadata",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","extractMethodMetadata",70],"(",["T_VARIABLE","$serviceType",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$serviceMethod",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$returnType",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$methodMetadata",71],"[",["T_STRING","Config",71],["T_DOUBLE_COLON","::",71],["T_STRING","SCHEMA_METHOD_RETURN_TYPE",71],"]",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$returnType",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$returnType",72],["T_WHITESPACE"," ",72],["T_IS_NOT_EQUAL","!=",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'void'",72],["T_WHITESPACE"," ",72],["T_BOOLEAN_AND","&&",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$returnType",72],["T_WHITESPACE"," ",72],["T_IS_NOT_EQUAL","!=",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'null'",72],")",["T_WHITESPACE"," ",72],"?",["T_WHITESPACE"," ",72],["T_VARIABLE","$returnType",72],["T_WHITESPACE"," ",72],":",["T_WHITESPACE"," ",72],["T_STRING","null",72],";",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],"[",["T_WHITESPACE","\n            ",73],["T_STRING","Config",74],["T_DOUBLE_COLON","::",74],["T_STRING","TOPIC_NAME",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$topicName",74],",",["T_WHITESPACE","\n            ",74],["T_STRING","Config",75],["T_DOUBLE_COLON","::",75],["T_STRING","TOPIC_IS_SYNCHRONOUS",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$returnType",75],["T_WHITESPACE"," ",75],"?",["T_WHITESPACE"," ",75],["T_STRING","true",75],["T_WHITESPACE"," ",75],":",["T_WHITESPACE"," ",75],["T_STRING","false",75],",",["T_WHITESPACE","\n            ",75],["T_STRING","Config",76],["T_DOUBLE_COLON","::",76],["T_STRING","TOPIC_REQUEST",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$methodMetadata",76],"[",["T_STRING","Config",76],["T_DOUBLE_COLON","::",76],["T_STRING","SCHEMA_METHOD_PARAMS",76],"]",",",["T_WHITESPACE","\n            ",76],["T_STRING","Config",77],["T_DOUBLE_COLON","::",77],["T_STRING","TOPIC_REQUEST_TYPE",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_STRING","Config",77],["T_DOUBLE_COLON","::",77],["T_STRING","TOPIC_REQUEST_TYPE_METHOD",77],",",["T_WHITESPACE","\n            ",77],["T_STRING","Config",78],["T_DOUBLE_COLON","::",78],["T_STRING","TOPIC_RESPONSE",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$returnType",78],",",["T_WHITESPACE","\n            ",78],["T_STRING","Config",79],["T_DOUBLE_COLON","::",79],["T_STRING","TOPIC_HANDLERS",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$handlers",79],["T_WHITESPACE","\n                ",79],"?",":",["T_WHITESPACE"," ",80],"[",["T_STRING","self",80],["T_DOUBLE_COLON","::",80],["T_STRING","DEFAULT_HANDLER",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$methodMetadata",80],"[",["T_STRING","Config",80],["T_DOUBLE_COLON","::",80],["T_STRING","SCHEMA_METHOD_HANDLER",80],"]","]",["T_WHITESPACE","\n        ",80],"]",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Generate topic name based on service type and method name.\n     *\n     * Perform the following conversion:\n     * \\Magento\\Customer\\Api\\RepositoryInterface + getById => magento.customer.api.repositoryInterface.getById\n     *\n     * @param string $typeName\n     * @param string $methodName\n     * @return string\n     *\/",84],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","generateTopicName",94],"(",["T_VARIABLE","$typeName",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$methodName",94],")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$parts",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","explode",96],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",96],",",["T_WHITESPACE"," ",96],["T_STRING","ltrim",96],"(",["T_VARIABLE","$typeName",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",96],")",")",";",["T_WHITESPACE","\n        ",96],["T_FOREACH","foreach",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$parts",97],["T_WHITESPACE"," ",97],["T_AS","as",97],["T_WHITESPACE"," ",97],"&",["T_VARIABLE","$part",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$part",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","lcfirst",98],"(",["T_VARIABLE","$part",98],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_STRING","implode",100],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$parts",100],")",["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'.'",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_VARIABLE","$methodName",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n",101],"}",["T_WHITESPACE","\n",102]]
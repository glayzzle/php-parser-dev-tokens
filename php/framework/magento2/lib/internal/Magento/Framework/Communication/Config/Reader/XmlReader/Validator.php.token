[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Communication",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Reader",6],["T_NS_SEPARATOR","\\",6],["T_STRING","XmlReader",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Stdlib",8],["T_NS_SEPARATOR","\\",8],["T_STRING","BooleanUtils",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Communication",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Config",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Validator",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","ConfigValidator",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Reflection",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TypeProcessor",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Reflection",11],["T_NS_SEPARATOR","\\",11],["T_STRING","MethodsMap",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Communication configuration validator.\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Validator",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","ConfigValidator",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * @var TypeProcessor\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$typeProcessor",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var MethodsMap\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$methodsMap",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var BooleanUtils\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$booleanUtils",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Initialize dependencies\n     *\n     * @param TypeProcessor $typeProcessor\n     * @param MethodsMap $methodsMap\n     * @param BooleanUtils $booleanUtils\n     *\/",33],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",["T_WHITESPACE","\n        ",40],["T_STRING","TypeProcessor",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$typeProcessor",41],",",["T_WHITESPACE","\n        ",41],["T_STRING","MethodsMap",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$methodsMap",42],",",["T_WHITESPACE","\n        ",42],["T_STRING","BooleanUtils",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$booleanUtils",43],["T_WHITESPACE","\n    ",43],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","booleanUtils",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$booleanUtils",45],";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","typeProcessor",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$typeProcessor",46],";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","methodsMap",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$methodsMap",47],";",["T_WHITESPACE","\n        ",47],["T_STRING","parent",48],["T_DOUBLE_COLON","::",48],["T_STRING","__construct",48],"(",["T_VARIABLE","$typeProcessor",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$methodsMap",48],")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Validate service method\n     *\n     * @param string $serviceMethod\n     * @param string $topicName\n     * @param string $className\n     * @param string $methodName\n     * @return void\n     *\/",51],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","validateServiceMethod",60],"(",["T_VARIABLE","$serviceMethod",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$topicName",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$className",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$methodName",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_TRY","try",62],["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","methodsMap",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getMethodParams",63],"(",["T_VARIABLE","$className",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$methodName",63],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE"," ",64],["T_CATCH","catch",64],["T_WHITESPACE"," ",64],"(",["T_NS_SEPARATOR","\\",64],["T_STRING","Exception",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$e",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_THROW","throw",65],["T_WHITESPACE"," ",65],["T_NEW","new",65],["T_WHITESPACE"," ",65],["T_NS_SEPARATOR","\\",65],["T_STRING","LogicException",65],"(",["T_WHITESPACE","\n                ",65],["T_STRING","sprintf",66],"(",["T_WHITESPACE","\n                    ",66],["T_CONSTANT_ENCAPSED_STRING","'Service method specified in the definition of topic \"%s\" is not available. Given \"%s\"'",67],",",["T_WHITESPACE","\n                    ",67],["T_VARIABLE","$topicName",68],",",["T_WHITESPACE","\n                    ",68],["T_VARIABLE","$serviceMethod",69],["T_WHITESPACE","\n                ",69],")",["T_WHITESPACE","\n            ",70],")",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Validate response request\n     *\n     * @param string $requestResponseSchema\n     * @param string $requestSchema\n     * @param string $topicName\n     * @param string $responseSchema\n     * @param array $handlers\n     * @return void\n     *\/",75],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","validateResponseRequest",85],"(",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$requestResponseSchema",86],",",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$requestSchema",87],",",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$topicName",88],",",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$responseSchema",89],",",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$handlers",90],["T_WHITESPACE","\n    ",90],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n        ",91],["T_DOC_COMMENT","\/** Validate schema attributes *\/",92],["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_VARIABLE","$requestResponseSchema",93],["T_WHITESPACE"," ",93],["T_BOOLEAN_AND","&&",93],["T_WHITESPACE"," ",93],"!",["T_VARIABLE","$requestSchema",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_THROW","throw",94],["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_NS_SEPARATOR","\\",94],["T_STRING","LogicException",94],"(",["T_WHITESPACE","\n                ",94],["T_STRING","sprintf",95],"(",["T_WHITESPACE","\n                    ",95],["T_CONSTANT_ENCAPSED_STRING","'Either \"request\" or \"schema\" attribute must be specified for topic \"%s\"'",96],",",["T_WHITESPACE","\n                    ",96],["T_VARIABLE","$topicName",97],["T_WHITESPACE","\n                ",97],")",["T_WHITESPACE","\n            ",98],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","(",["T_VARIABLE","$requestResponseSchema",101],["T_WHITESPACE"," ",101],["T_BOOLEAN_OR","||",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$responseSchema",101],")",["T_WHITESPACE"," ",101],["T_BOOLEAN_AND","&&",101],["T_WHITESPACE"," ",101],"(",["T_STRING","count",101],"(",["T_VARIABLE","$handlers",101],")",["T_WHITESPACE"," ",101],["T_IS_GREATER_OR_EQUAL",">=",101],["T_WHITESPACE"," ",101],["T_LNUMBER","2",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_THROW","throw",102],["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_NS_SEPARATOR","\\",102],["T_STRING","LogicException",102],"(",["T_WHITESPACE","\n                ",102],["T_STRING","sprintf",103],"(",["T_WHITESPACE","\n                    ",103],["T_CONSTANT_ENCAPSED_STRING","'Topic \"%s\" is configured for synchronous requests, that is why it must have exactly one '",104],["T_WHITESPACE","\n                    ",104],".",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'response handler declared. The following handlers declared: %s'",105],",",["T_WHITESPACE","\n                    ",105],["T_VARIABLE","$topicName",106],",",["T_WHITESPACE","\n                    ",106],["T_STRING","implode",107],"(",["T_CONSTANT_ENCAPSED_STRING","', '",107],",",["T_WHITESPACE"," ",107],["T_STRING","array_keys",107],"(",["T_VARIABLE","$handlers",107],")",")",["T_WHITESPACE","\n                ",107],")",["T_WHITESPACE","\n            ",108],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Validate declaration of the topic\n     *\n     * @param string $requestResponseSchema\n     * @param string $topicName\n     * @param string $requestSchema\n     * @param string $responseSchema\n     * @return void\n     *\/",113],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","validateDeclarationOfTopic",122],"(",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$requestResponseSchema",123],",",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$topicName",124],",",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$requestSchema",125],",",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$responseSchema",126],["T_WHITESPACE","\n    ",126],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$requestResponseSchema",128],["T_WHITESPACE"," ",128],["T_BOOLEAN_AND","&&",128],["T_WHITESPACE"," ",128],"!","(",["T_VARIABLE","$requestSchema",128],["T_WHITESPACE"," ",128],["T_BOOLEAN_AND","&&",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$responseSchema",128],")",["T_WHITESPACE"," ",128],["T_BOOLEAN_AND","&&",128],["T_WHITESPACE"," ",128],"!",["T_VARIABLE","$requestSchema",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_THROW","throw",129],["T_WHITESPACE"," ",129],["T_NEW","new",129],["T_WHITESPACE"," ",129],["T_NS_SEPARATOR","\\",129],["T_STRING","LogicException",129],"(",["T_WHITESPACE","\n                ",129],["T_STRING","sprintf",130],"(",["T_WHITESPACE","\n                    ",130],["T_CONSTANT_ENCAPSED_STRING","'Declaration of topic \"%s\" is invalid. Specify at least \"request\" or \"schema\".'",131],",",["T_WHITESPACE","\n                    ",131],["T_VARIABLE","$topicName",132],["T_WHITESPACE","\n                ",132],")",["T_WHITESPACE","\n            ",133],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n",136],"}",["T_WHITESPACE","\n",137]]
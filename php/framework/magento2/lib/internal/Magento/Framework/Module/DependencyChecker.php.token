[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Module",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Graph",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Checks for dependencies between modules\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","DependencyChecker",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Enabled module list from configuration\n     *\n     * @var array\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$enabledModuleList",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * The full module list information from filesystem\n     *\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$fullModuleList",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Graph\n     *\n     * @var Graph\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$graph",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var PackageInfo\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$packageInfo",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param ModuleList $list\n     * @param ModuleList\\Loader $loader\n     * @param PackageInfoFactory $packageInfoFactory\n     *\/",41],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","__construct",48],"(",["T_STRING","ModuleList",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$list",48],",",["T_WHITESPACE"," ",48],["T_STRING","ModuleList",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Loader",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$loader",48],",",["T_WHITESPACE"," ",48],["T_STRING","PackageInfoFactory",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$packageInfoFactory",48],")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","enabledModuleList",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$list",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getNames",50],"(",")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","fullModuleList",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$loader",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","load",51],"(",")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","packageInfo",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$packageInfoFactory",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","create",52],"(",")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Checks dependencies when disabling modules\n     *\n     * @param string[] $toBeDisabledModules\n     * @param string[] $currentlyEnabledModules\n     * @return array\n     *\/",55],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","checkDependenciesWhenDisableModules",62],"(",["T_VARIABLE","$toBeDisabledModules",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$currentlyEnabledModules",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","null",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$masterList",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ISSET","isset",64],"(",["T_VARIABLE","$currentlyEnabledModules",64],")",["T_WHITESPACE"," ",64],"?",["T_WHITESPACE"," ",64],["T_VARIABLE","$currentlyEnabledModules",64],":",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","enabledModuleList",64],";",["T_WHITESPACE","\n        ",64],["T_COMMENT","\/\/ assume disable succeeds: currently enabled modules - to-be-disabled modules\n",65],["T_WHITESPACE","        ",66],["T_VARIABLE","$enabledModules",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","array_diff",66],"(",["T_VARIABLE","$masterList",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$toBeDisabledModules",66],")",";",["T_WHITESPACE","\n        ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","checkDependencyGraph",67],"(",["T_STRING","false",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$toBeDisabledModules",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$enabledModules",67],")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Checks dependencies when enabling modules\n     *\n     * @param string[] $toBeEnabledModules\n     * @param string[] $currentlyEnabledModules\n     * @return array\n     *\/",70],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","checkDependenciesWhenEnableModules",77],"(",["T_VARIABLE","$toBeEnabledModules",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$currentlyEnabledModules",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$masterList",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_ISSET","isset",79],"(",["T_VARIABLE","$currentlyEnabledModules",79],")",["T_WHITESPACE"," ",79],"?",["T_WHITESPACE"," ",79],["T_VARIABLE","$currentlyEnabledModules",79],":",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","enabledModuleList",79],";",["T_WHITESPACE","\n        ",79],["T_COMMENT","\/\/ assume enable succeeds: union of currently enabled modules and to-be-enabled modules\n",80],["T_WHITESPACE","        ",81],["T_VARIABLE","$enabledModules",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","array_unique",81],"(",["T_STRING","array_merge",81],"(",["T_VARIABLE","$masterList",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$toBeEnabledModules",81],")",")",";",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","checkDependencyGraph",82],"(",["T_STRING","true",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$toBeEnabledModules",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$enabledModules",82],")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Check the dependency graph\n     *\n     * @param bool $isEnable\n     * @param string[] $moduleNames list of modules to be enabled\/disabled\n     * @param string[] $enabledModules list of enabled modules assuming enable\/disable succeeds\n     * @return array\n     *\/",85],["T_WHITESPACE","\n    ",92],["T_PRIVATE","private",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","checkDependencyGraph",93],"(",["T_VARIABLE","$isEnable",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$moduleNames",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$enabledModules",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","graph",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","createGraph",95],"(",")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$dependenciesMissingAll",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],"[","]",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$graphMode",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$isEnable",97],["T_WHITESPACE"," ",97],"?",["T_WHITESPACE"," ",97],["T_STRING","Graph",97],["T_DOUBLE_COLON","::",97],["T_STRING","DIRECTIONAL",97],["T_WHITESPACE"," ",97],":",["T_WHITESPACE"," ",97],["T_STRING","Graph",97],["T_DOUBLE_COLON","::",97],["T_STRING","INVERSE",97],";",["T_WHITESPACE","\n        ",97],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$moduleNames",98],["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$moduleName",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$dependenciesMissing",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],"[","]",";",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$paths",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","graph",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","findPathsToReachableNodes",100],"(",["T_VARIABLE","$moduleName",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$graphMode",100],")",";",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$modules",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","array_merge",101],"(",["T_WHITESPACE","\n                ",101],["T_STRING","array_keys",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","fullModuleList",102],")",",",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","packageInfo",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getNonExistingDependencies",103],"(",")",["T_WHITESPACE","\n            ",103],")",";",["T_WHITESPACE","\n            ",104],["T_FOREACH","foreach",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$modules",105],["T_WHITESPACE"," ",105],["T_AS","as",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$module",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_ISSET","isset",106],"(",["T_VARIABLE","$paths",106],"[",["T_VARIABLE","$module",106],"]",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                    ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$isEnable",107],["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],"!",["T_STRING","in_array",107],"(",["T_VARIABLE","$module",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$enabledModules",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                        ",107],["T_VARIABLE","$dependenciesMissing",108],"[",["T_VARIABLE","$module",108],"]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$paths",108],"[",["T_VARIABLE","$module",108],"]",";",["T_WHITESPACE","\n                    ",108],"}",["T_WHITESPACE"," ",109],["T_ELSE","else",109],["T_WHITESPACE"," ",109],["T_IF","if",109],["T_WHITESPACE"," ",109],"(","!",["T_VARIABLE","$isEnable",109],["T_WHITESPACE"," ",109],["T_BOOLEAN_AND","&&",109],["T_WHITESPACE"," ",109],["T_STRING","in_array",109],"(",["T_VARIABLE","$module",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$enabledModules",109],")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                        ",109],["T_VARIABLE","$dependenciesMissing",110],"[",["T_VARIABLE","$module",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","array_reverse",110],"(",["T_VARIABLE","$paths",110],"[",["T_VARIABLE","$module",110],"]",")",";",["T_WHITESPACE","\n                    ",110],"}",["T_WHITESPACE","\n                ",111],"}",["T_WHITESPACE","\n            ",112],"}",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$dependenciesMissingAll",114],"[",["T_VARIABLE","$moduleName",114],"]",["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$dependenciesMissing",114],";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$dependenciesMissingAll",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Create the dependency graph\n     *\n     * @return Graph\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PRIVATE","private",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","createGraph",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$nodes",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],"[","]",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$dependencies",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],"[","]",";",["T_WHITESPACE","\n\n        ",127],["T_COMMENT","\/\/ build the graph data\n",129],["T_WHITESPACE","        ",130],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(",["T_STRING","array_keys",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","fullModuleList",130],")",["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$moduleName",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$nodes",131],"[","]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$moduleName",131],";",["T_WHITESPACE","\n            ",131],["T_FOREACH","foreach",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","packageInfo",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getRequire",132],"(",["T_VARIABLE","$moduleName",132],")",["T_WHITESPACE"," ",132],["T_AS","as",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$dependModuleName",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$dependModuleName",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                    ",133],["T_VARIABLE","$dependencies",134],"[","]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],"[",["T_VARIABLE","$moduleName",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$dependModuleName",134],"]",";",["T_WHITESPACE","\n                ",134],"}",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$nodes",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","array_unique",138],"(",["T_WHITESPACE","\n            ",138],["T_STRING","array_merge",139],"(",["T_VARIABLE","$nodes",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","packageInfo",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getNonExistingDependencies",139],"(",")",")",["T_WHITESPACE","\n        ",139],")",";",["T_WHITESPACE","\n\n        ",140],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_NEW","new",142],["T_WHITESPACE"," ",142],["T_STRING","Graph",142],"(",["T_VARIABLE","$nodes",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$dependencies",142],")",";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n",143],"}",["T_WHITESPACE","\n",144]]
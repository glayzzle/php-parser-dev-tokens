[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SaveHandler",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceConnection",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DB",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Adapter",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AdapterInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Search",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Request",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Dimension",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Search",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Request",11],["T_NS_SEPARATOR","\\",11],["T_STRING","IndexScopeResolverInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Indexer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","IndexStructureInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Indexer",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ScopeResolver",13],["T_NS_SEPARATOR","\\",13],["T_STRING","FlatScopeResolver",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Indexer",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ScopeResolver",14],["T_NS_SEPARATOR","\\",14],["T_STRING","IndexScopeResolver",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Indexer",15],["T_NS_SEPARATOR","\\",15],["T_STRING","SaveHandler",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Batch",15],";",["T_WHITESPACE","\n\n",15],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","IndexerHandler",17],["T_WHITESPACE"," ",17],["T_IMPLEMENTS","implements",17],["T_WHITESPACE"," ",17],["T_STRING","IndexerInterface",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var string[]\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$dataTypes",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],"[",["T_CONSTANT_ENCAPSED_STRING","'searchable'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'filterable'",22],"]",";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var IndexStructureInterface\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$indexStructure",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$data",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$fields",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var Resource|Resource\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$resource",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @var Batch\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$batch",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var int\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$batchSize",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @var IndexScopeResolverInterface[]\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$scopeResolvers",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @param IndexStructureInterface $indexStructure\n     * @var AdapterInterface\n     *\/",59],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$connection",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @param IndexStructureInterface $indexStructure\n     * @param ResourceConnection $resource\n     * @param Batch $batch\n     * @param \\Magento\\Framework\\Indexer\\ScopeResolver\\IndexScopeResolver $indexScopeResolver\n     * @param \\Magento\\Framework\\Indexer\\ScopeResolver\\FlatScopeResolver $flatScopeResolver\n     * @param array $data\n     * @param int $batchSize\n     *\/",65],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","__construct",74],"(",["T_WHITESPACE","\n        ",74],["T_STRING","IndexStructureInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$indexStructure",75],",",["T_WHITESPACE","\n        ",75],["T_STRING","ResourceConnection",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$resource",76],",",["T_WHITESPACE","\n        ",76],["T_STRING","Batch",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$batch",77],",",["T_WHITESPACE","\n        ",77],["T_STRING","IndexScopeResolver",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$indexScopeResolver",78],",",["T_WHITESPACE","\n        ",78],["T_STRING","FlatScopeResolver",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$flatScopeResolver",79],",",["T_WHITESPACE","\n        ",79],["T_ARRAY","array",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$data",80],",",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$batchSize",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_LNUMBER","100",81],["T_WHITESPACE","\n    ",81],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","indexStructure",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$indexStructure",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","resource",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$resource",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","connection",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$resource",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getConnection",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","batch",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$batch",86],";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","scopeResolvers",87],"[",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","dataTypes",87],"[",["T_LNUMBER","0",87],"]","]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$indexScopeResolver",87],";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","scopeResolvers",88],"[",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","dataTypes",88],"[",["T_LNUMBER","1",88],"]","]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$flatScopeResolver",88],";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","data",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$data",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","batchSize",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$batchSize",90],";",["T_WHITESPACE","\n\n        ",90],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","fields",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],"[","]",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","prepareFields",93],"(",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","saveIndex",99],"(",["T_VARIABLE","$dimensions",99],",",["T_WHITESPACE"," ",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Traversable",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$documents",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_FOREACH","foreach",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","batch",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getItems",101],"(",["T_VARIABLE","$documents",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","batchSize",101],")",["T_WHITESPACE"," ",101],["T_AS","as",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$batchDocuments",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","insertDocumentsForSearchable",102],"(",["T_VARIABLE","$batchDocuments",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$dimensions",102],")",";",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","insertDocumentsForFilterable",103],"(",["T_VARIABLE","$batchDocuments",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$dimensions",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",107],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","deleteIndex",110],"(",["T_VARIABLE","$dimensions",110],",",["T_WHITESPACE"," ",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Traversable",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$documents",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_FOREACH","foreach",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","dataTypes",112],["T_WHITESPACE"," ",112],["T_AS","as",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$dataType",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_FOREACH","foreach",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","batch",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getItems",113],"(",["T_VARIABLE","$documents",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","batchSize",113],")",["T_WHITESPACE"," ",113],["T_AS","as",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$batchDocuments",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$documentsId",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","array_column",114],"(",["T_VARIABLE","$batchDocuments",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'id'",114],")",";",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","connection",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","delete",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getTableName",115],"(",["T_VARIABLE","$dataType",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$dimensions",115],")",",",["T_WHITESPACE"," ",115],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$documentsId",115],"]",")",";",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",120],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","cleanIndex",123],"(",["T_VARIABLE","$dimensions",123],")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","indexStructure",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","delete",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getIndexName",125],"(",")",",",["T_WHITESPACE"," ",125],["T_VARIABLE","$dimensions",125],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","indexStructure",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","create",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getIndexName",126],"(",")",",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","fields",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$dimensions",126],")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",129],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","isAvailable",132],"(",")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_STRING","true",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * @param string $dataType\n     * @param Dimension[] $dimensions\n     * @return string\n     *\/",137],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getTableName",142],"(",["T_VARIABLE","$dataType",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$dimensions",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","scopeResolvers",144],"[",["T_VARIABLE","$dataType",144],"]",["T_OBJECT_OPERATOR","->",144],["T_STRING","resolve",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getIndexName",144],"(",")",",",["T_WHITESPACE"," ",144],["T_VARIABLE","$dimensions",144],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * @return string\n     *\/",147],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","getIndexName",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","data",152],"[",["T_CONSTANT_ENCAPSED_STRING","'indexer_id'",152],"]",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * @param array $documents\n     * @param Dimension[] $dimensions\n     * @return void\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PRIVATE","private",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","insertDocumentsForSearchable",160],"(",["T_ARRAY","array",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$documents",160],",",["T_WHITESPACE"," ",160],["T_ARRAY","array",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$dimensions",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","connection",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","insertOnDuplicate",162],"(",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getTableName",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","dataTypes",163],"[",["T_LNUMBER","0",163],"]",",",["T_WHITESPACE"," ",163],["T_VARIABLE","$dimensions",163],")",",",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","prepareSearchableFields",164],"(",["T_VARIABLE","$documents",164],")",",",["T_WHITESPACE","\n            ",164],"[",["T_CONSTANT_ENCAPSED_STRING","'data_index'",165],"]",["T_WHITESPACE","\n        ",165],")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * @param array $documents\n     * @param Dimension[] $dimensions\n     * @return void\n     *\/",169],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","insertDocumentsForFilterable",174],"(",["T_ARRAY","array",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$documents",174],",",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$dimensions",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$onDuplicate",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],"[","]",";",["T_WHITESPACE","\n        ",176],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","fields",177],["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$field",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$field",178],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",178],"]",["T_WHITESPACE"," ",178],["T_IS_IDENTICAL","===",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","dataTypes",178],"[",["T_LNUMBER","1",178],"]",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$onDuplicate",179],"[","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$field",179],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",179],"]",";",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","connection",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","insertOnDuplicate",183],"(",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getTableName",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","dataTypes",184],"[",["T_LNUMBER","1",184],"]",",",["T_WHITESPACE"," ",184],["T_VARIABLE","$dimensions",184],")",",",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","prepareFilterableFields",185],"(",["T_VARIABLE","$documents",185],")",",",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$onDuplicate",186],["T_WHITESPACE","\n        ",186],")",";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * @param array $documents\n     * @return array\n     *\/",190],["T_WHITESPACE","\n    ",193],["T_PROTECTED","protected",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","prepareFilterableFields",194],"(",["T_ARRAY","array",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$documents",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$insertDocuments",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],"[","]",";",["T_WHITESPACE","\n        ",196],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$documents",197],["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$entityId",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$document",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$documentFlat",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$entityId",198],"]",";",["T_WHITESPACE","\n            ",198],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","fields",199],["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$field",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$field",200],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",200],"]",["T_WHITESPACE"," ",200],["T_IS_EQUAL","==",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","dataTypes",200],"[",["T_LNUMBER","1",200],"]",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n                    ",200],["T_VARIABLE","$documentFlat",201],"[",["T_VARIABLE","$field",201],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",201],"]","]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$document",201],"[",["T_VARIABLE","$field",201],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",201],"]","]",";",["T_WHITESPACE","\n                ",201],"}",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$insertDocuments",204],"[","]",["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$documentFlat",204],";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n        ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$insertDocuments",206],";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * @param array $documents\n     * @return array\n     *\/",209],["T_WHITESPACE","\n    ",212],["T_PRIVATE","private",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","prepareSearchableFields",213],"(",["T_ARRAY","array",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$documents",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$insertDocuments",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],"[","]",";",["T_WHITESPACE","\n        ",215],["T_FOREACH","foreach",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$documents",216],["T_WHITESPACE"," ",216],["T_AS","as",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$entityId",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$document",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_FOREACH","foreach",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","fields",217],["T_WHITESPACE"," ",217],["T_AS","as",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$field",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n                ",217],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$field",218],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",218],"]",["T_WHITESPACE"," ",218],["T_IS_IDENTICAL","===",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","dataTypes",218],"[",["T_LNUMBER","0",218],"]",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n                    ",218],["T_VARIABLE","$insertDocuments",219],"[","]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],"[",["T_WHITESPACE","\n                        ",219],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$entityId",220],",",["T_WHITESPACE","\n                        ",220],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$field",221],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",221],"]",",",["T_WHITESPACE","\n                        ",221],["T_CONSTANT_ENCAPSED_STRING","'data_index'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$document",222],"[",["T_VARIABLE","$field",222],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",222],"]","]",",",["T_WHITESPACE","\n                    ",222],"]",";",["T_WHITESPACE","\n                ",223],"}",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE","\n\n        ",226],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$insertDocuments",228],";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * @return void\n     *\/",231],["T_WHITESPACE","\n    ",233],["T_PRIVATE","private",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","prepareFields",234],"(",")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_FOREACH","foreach",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","data",236],"[",["T_CONSTANT_ENCAPSED_STRING","'fieldsets'",236],"]",["T_WHITESPACE"," ",236],["T_AS","as",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$fieldset",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","fields",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","array_merge",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","fields",237],",",["T_WHITESPACE"," ",237],["T_STRING","array_values",237],"(",["T_VARIABLE","$fieldset",237],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",237],"]",")",")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n",239],"}",["T_WHITESPACE","\n",240]]
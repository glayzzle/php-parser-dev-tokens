[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Framework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Filesystem",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Io",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Install and upgrade client abstract class\n *\/",9],["T_WHITESPACE","\n",11],["T_ABSTRACT","abstract",12],["T_WHITESPACE"," ",12],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","AbstractIo",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","IoInterface",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * If this variable is set to true, our library will be able to automaticaly\n     * create non-existant directories\n     *\n     * @var bool\n     *\/",14],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_allowCreateFolders",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_STRING","false",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Allow automaticaly create non-existant directories\n     *\n     * @param bool $flag\n     * @return $this\n     *\/",22],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","setAllowCreateFolders",28],"(",["T_VARIABLE","$flag",28],")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","_allowCreateFolders",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_BOOL_CAST","(bool)",30],["T_VARIABLE","$flag",30],";",["T_WHITESPACE","\n        ",30],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Open a connection\n     *\n     * @param array $args\n     * @return false\n     *\/",34],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","open",40],"(",["T_ARRAY","array",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$args",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],"[","]",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_RETURN","return",42],["T_WHITESPACE"," ",42],["T_STRING","false",42],";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @return string\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","dirsep",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'\/'",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @param string $path\n     * @return string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","getCleanPath",58],"(",["T_VARIABLE","$path",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_EMPTY","empty",60],"(",["T_VARIABLE","$path",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'.\/'",61],";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$path",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","trim",64],"(",["T_STRING","preg_replace",64],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\\\\\\\\\/\"",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",64],",",["T_WHITESPACE"," ",64],["T_STRING_CAST","(string)",64],["T_VARIABLE","$path",64],")",")",";",["T_WHITESPACE","\n\n        ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(","!",["T_STRING","preg_match",66],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/(\\.\\w{1,4})$\/\"",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$path",66],")",["T_WHITESPACE"," ",66],["T_BOOLEAN_AND","&&",66],["T_WHITESPACE"," ",66],"!",["T_STRING","preg_match",66],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\\?[^\\\\\/]+$\/\"",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$path",66],")",["T_WHITESPACE"," ",66],["T_BOOLEAN_AND","&&",66],["T_WHITESPACE"," ",66],"!",["T_STRING","preg_match",66],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\\\\\/$\/\"",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$path",66],")",["T_WHITESPACE","\n        ",66],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$path",68],["T_WHITESPACE"," ",68],["T_CONCAT_EQUAL",".=",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'\/'",68],";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$matches",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[","]",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$pattern",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","\"\/^(\\\\\/|\\w:\\\\\/|https?:\\\\\/\\\\\/[^\\\\\/]+\\\\\/)?(.*)$\/i\"",72],";",["T_WHITESPACE","\n        ",72],["T_STRING","preg_match_all",73],"(",["T_VARIABLE","$pattern",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$path",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$matches",73],",",["T_WHITESPACE"," ",73],["T_STRING","PREG_SET_ORDER",73],")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$pathTokR",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$matches",75],"[",["T_LNUMBER","0",75],"]","[",["T_LNUMBER","1",75],"]",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$pathTokP",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$matches",76],"[",["T_LNUMBER","0",76],"]","[",["T_LNUMBER","2",76],"]",";",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$pathTokP",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","preg_replace",78],"(","[",["T_CONSTANT_ENCAPSED_STRING","\"\/^\\\\\/+\/\"",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","\"\/\\\\\/+\/\"",78],"]",",",["T_WHITESPACE"," ",78],"[",["T_CONSTANT_ENCAPSED_STRING","\"\"",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",78],"]",",",["T_WHITESPACE"," ",78],["T_VARIABLE","$pathTokP",78],")",";",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$pathParts",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","explode",80],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$pathTokP",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$realPathParts",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],"[","]",";",["T_WHITESPACE","\n\n        ",81],["T_FOR","for",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$i",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_LNUMBER","0",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$realPathParts",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[","]",";",["T_WHITESPACE"," ",83],["T_VARIABLE","$i",83],["T_WHITESPACE"," ",83],"<",["T_WHITESPACE"," ",83],["T_STRING","count",83],"(",["T_VARIABLE","$pathParts",83],")",";",["T_WHITESPACE"," ",83],["T_VARIABLE","$i",83],["T_INC","++",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$pathParts",84],"[",["T_VARIABLE","$i",84],"]",["T_WHITESPACE"," ",84],["T_IS_EQUAL","==",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'.'",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_CONTINUE","continue",85],";",["T_WHITESPACE","\n            ",85],"}",["T_WHITESPACE"," ",86],["T_ELSEIF","elseif",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$pathParts",86],"[",["T_VARIABLE","$i",86],"]",["T_WHITESPACE"," ",86],["T_IS_EQUAL","==",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'..'",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_ISSET","isset",87],"(",["T_VARIABLE","$realPathParts",87],"[",["T_LNUMBER","0",87],"]",")",["T_WHITESPACE"," ",87],["T_BOOLEAN_AND","&&",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$realPathParts",87],"[",["T_LNUMBER","0",87],"]",["T_WHITESPACE"," ",87],["T_IS_NOT_EQUAL","!=",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'..'",87],["T_WHITESPACE"," ",87],["T_BOOLEAN_OR","||",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$pathTokR",87],["T_WHITESPACE"," ",87],["T_IS_NOT_EQUAL","!=",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","\"\"",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                    ",87],["T_STRING","array_pop",88],"(",["T_VARIABLE","$realPathParts",88],")",";",["T_WHITESPACE","\n                    ",88],["T_CONTINUE","continue",89],";",["T_WHITESPACE","\n                ",89],"}",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n\n            ",91],["T_VARIABLE","$realPathParts",93],"[","]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$pathParts",93],"[",["T_VARIABLE","$i",93],"]",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$pathTokR",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_STRING","implode",96],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$realPathParts",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * @param string $haystackPath\n     * @param string $needlePath\n     * @return bool\n     *\/",99],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","allowedPath",104],"(",["T_VARIABLE","$haystackPath",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$needlePath",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_STRING","strpos",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getCleanPath",106],"(",["T_VARIABLE","$haystackPath",106],")",",",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getCleanPath",106],"(",["T_VARIABLE","$needlePath",106],")",")",["T_WHITESPACE"," ",106],["T_IS_IDENTICAL","===",106],["T_WHITESPACE"," ",106],["T_LNUMBER","0",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n",107],"}",["T_WHITESPACE","\n",108]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Mysql PDO DB adapter\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",7],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",9],["T_WHITESPACE","\n",10],["T_NAMESPACE","namespace",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","DB",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Adapter",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Pdo",11],";",["T_WHITESPACE","\n\n",11],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Cache",13],["T_NS_SEPARATOR","\\",13],["T_STRING","FrontendInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DB",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Adapter",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AdapterInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","DB",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Adapter",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ConnectionException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","DB",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Adapter",16],["T_NS_SEPARATOR","\\",16],["T_STRING","DeadlockException",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","DB",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Adapter",17],["T_NS_SEPARATOR","\\",17],["T_STRING","DuplicateException",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","DB",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Adapter",18],["T_NS_SEPARATOR","\\",18],["T_STRING","LockWaitException",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Framework",19],["T_NS_SEPARATOR","\\",19],["T_STRING","DB",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Ddl",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Table",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Framework",20],["T_NS_SEPARATOR","\\",20],["T_STRING","DB",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ExpressionConverter",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Framework",21],["T_NS_SEPARATOR","\\",21],["T_STRING","DB",21],["T_NS_SEPARATOR","\\",21],["T_STRING","LoggerInterface",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Magento",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Framework",22],["T_NS_SEPARATOR","\\",22],["T_STRING","DB",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Profiler",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Framework",23],["T_NS_SEPARATOR","\\",23],["T_STRING","DB",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Select",23],";",["T_WHITESPACE","\n",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Framework",24],["T_NS_SEPARATOR","\\",24],["T_STRING","DB",24],["T_NS_SEPARATOR","\\",24],["T_STRING","SelectFactory",24],";",["T_WHITESPACE","\n",24],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Framework",25],["T_NS_SEPARATOR","\\",25],["T_STRING","DB",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Statement",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Parameter",25],";",["T_WHITESPACE","\n",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","Magento",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Framework",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Exception",26],["T_NS_SEPARATOR","\\",26],["T_STRING","LocalizedException",26],";",["T_WHITESPACE","\n",26],["T_USE","use",27],["T_WHITESPACE"," ",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Framework",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Phrase",27],";",["T_WHITESPACE","\n",27],["T_USE","use",28],["T_WHITESPACE"," ",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Framework",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Stdlib",28],["T_NS_SEPARATOR","\\",28],["T_STRING","DateTime",28],";",["T_WHITESPACE","\n",28],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Framework",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Stdlib",29],["T_NS_SEPARATOR","\\",29],["T_STRING","StringUtils",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","DB",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Query",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Generator",30],["T_WHITESPACE"," ",30],["T_AS","as",30],["T_WHITESPACE"," ",30],["T_STRING","QueryGenerator",30],";",["T_WHITESPACE","\n\n",30],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.ExcessivePublicCount)\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",32],["T_WHITESPACE","\n",37],["T_CLASS","class",38],["T_WHITESPACE"," ",38],["T_STRING","Mysql",38],["T_WHITESPACE"," ",38],["T_EXTENDS","extends",38],["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Zend_Db_Adapter_Pdo_Mysql",38],["T_WHITESPACE"," ",38],["T_IMPLEMENTS","implements",38],["T_WHITESPACE"," ",38],["T_STRING","AdapterInterface",38],["T_WHITESPACE","\n",38],"{",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","TIMESTAMP_FORMAT",40],["T_WHITESPACE","      ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","DATETIME_FORMAT",41],["T_WHITESPACE","       ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","DATE_FORMAT",42],["T_WHITESPACE","           ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",42],";",["T_WHITESPACE","\n\n    ",42],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","DDL_DESCRIBE",44],["T_WHITESPACE","          ",44],"=",["T_WHITESPACE"," ",44],["T_LNUMBER","1",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","DDL_CREATE",45],["T_WHITESPACE","            ",45],"=",["T_WHITESPACE"," ",45],["T_LNUMBER","2",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","DDL_INDEX",46],["T_WHITESPACE","             ",46],"=",["T_WHITESPACE"," ",46],["T_LNUMBER","3",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","DDL_FOREIGN_KEY",47],["T_WHITESPACE","       ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","4",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","DDL_CACHE_PREFIX",48],["T_WHITESPACE","      ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'DB_PDO_MYSQL_DDL'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","DDL_CACHE_TAG",49],["T_WHITESPACE","         ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'DB_PDO_MYSQL_DDL'",49],";",["T_WHITESPACE","\n\n    ",49],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","LENGTH_TABLE_NAME",51],["T_WHITESPACE","     ",51],"=",["T_WHITESPACE"," ",51],["T_LNUMBER","64",51],";",["T_WHITESPACE","\n    ",51],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","LENGTH_INDEX_NAME",52],["T_WHITESPACE","     ",52],"=",["T_WHITESPACE"," ",52],["T_LNUMBER","64",52],";",["T_WHITESPACE","\n    ",52],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","LENGTH_FOREIGN_NAME",53],["T_WHITESPACE","   ",53],"=",["T_WHITESPACE"," ",53],["T_LNUMBER","64",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * MEMORY engine type for MySQL tables\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","ENGINE_MEMORY",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'MEMORY'",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Maximum number of connection retries\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_CONST","const",63],["T_WHITESPACE"," ",63],["T_STRING","MAX_CONNECTION_RETRIES",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_LNUMBER","10",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Default class name for a DB statement.\n     *\n     * @var string\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_defaultStmtClass",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","DB",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Statement",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Pdo",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Mysql",70],["T_DOUBLE_COLON","::",70],["T_CLASS","class",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Current Transaction Level\n     *\n     * @var int\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_transactionLevel",77],["T_WHITESPACE","    ",77],"=",["T_WHITESPACE"," ",77],["T_LNUMBER","0",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Whether transaction was rolled back or not\n     *\n     * @var bool\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_isRolledBack",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","false",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Set attribute to connection flag\n     *\n     * @var bool\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_connectionFlagsSet",91],["T_WHITESPACE","  ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","false",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Tables DDL cache\n     *\n     * @var array\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_ddlCache",98],["T_WHITESPACE","            ",98],"=",["T_WHITESPACE"," ",98],"[","]",";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * SQL bind params. Used temporarily by regexp callback.\n     *\n     * @var array\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_bindParams",105],["T_WHITESPACE","          ",105],"=",["T_WHITESPACE"," ",105],"[","]",";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Autoincrement for bind value. Used by regexp callback.\n     *\n     * @var int\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$_bindIncrement",112],["T_WHITESPACE","       ",112],"=",["T_WHITESPACE"," ",112],["T_LNUMBER","0",112],";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Cache frontend adapter instance\n     *\n     * @var FrontendInterface\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$_cacheAdapter",119],";",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * DDL cache allowing flag\n     * @var bool\n     *\/",121],["T_WHITESPACE","\n    ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$_isDdlCacheAllowed",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","true",125],";",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * MySQL column - Table DDL type pairs\n     *\n     * @var array\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$_ddlColumnTypes",132],["T_WHITESPACE","      ",132],"=",["T_WHITESPACE"," ",132],"[",["T_WHITESPACE","\n        ",132],["T_STRING","Table",133],["T_DOUBLE_COLON","::",133],["T_STRING","TYPE_BOOLEAN",133],["T_WHITESPACE","       ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'bool'",133],",",["T_WHITESPACE","\n        ",133],["T_STRING","Table",134],["T_DOUBLE_COLON","::",134],["T_STRING","TYPE_SMALLINT",134],["T_WHITESPACE","      ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'smallint'",134],",",["T_WHITESPACE","\n        ",134],["T_STRING","Table",135],["T_DOUBLE_COLON","::",135],["T_STRING","TYPE_INTEGER",135],["T_WHITESPACE","       ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'int'",135],",",["T_WHITESPACE","\n        ",135],["T_STRING","Table",136],["T_DOUBLE_COLON","::",136],["T_STRING","TYPE_BIGINT",136],["T_WHITESPACE","        ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'bigint'",136],",",["T_WHITESPACE","\n        ",136],["T_STRING","Table",137],["T_DOUBLE_COLON","::",137],["T_STRING","TYPE_FLOAT",137],["T_WHITESPACE","         ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'float'",137],",",["T_WHITESPACE","\n        ",137],["T_STRING","Table",138],["T_DOUBLE_COLON","::",138],["T_STRING","TYPE_DECIMAL",138],["T_WHITESPACE","       ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'decimal'",138],",",["T_WHITESPACE","\n        ",138],["T_STRING","Table",139],["T_DOUBLE_COLON","::",139],["T_STRING","TYPE_NUMERIC",139],["T_WHITESPACE","       ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'decimal'",139],",",["T_WHITESPACE","\n        ",139],["T_STRING","Table",140],["T_DOUBLE_COLON","::",140],["T_STRING","TYPE_DATE",140],["T_WHITESPACE","          ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'date'",140],",",["T_WHITESPACE","\n        ",140],["T_STRING","Table",141],["T_DOUBLE_COLON","::",141],["T_STRING","TYPE_TIMESTAMP",141],["T_WHITESPACE","     ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",141],",",["T_WHITESPACE","\n        ",141],["T_STRING","Table",142],["T_DOUBLE_COLON","::",142],["T_STRING","TYPE_DATETIME",142],["T_WHITESPACE","      ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'datetime'",142],",",["T_WHITESPACE","\n        ",142],["T_STRING","Table",143],["T_DOUBLE_COLON","::",143],["T_STRING","TYPE_TEXT",143],["T_WHITESPACE","          ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'text'",143],",",["T_WHITESPACE","\n        ",143],["T_STRING","Table",144],["T_DOUBLE_COLON","::",144],["T_STRING","TYPE_BLOB",144],["T_WHITESPACE","          ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'blob'",144],",",["T_WHITESPACE","\n        ",144],["T_STRING","Table",145],["T_DOUBLE_COLON","::",145],["T_STRING","TYPE_VARBINARY",145],["T_WHITESPACE","     ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'blob'",145],",",["T_WHITESPACE","\n    ",145],"]",";",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * All possible DDL statements\n     * First 3 symbols for each statement\n     *\n     * @var string[]\n     *\/",148],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$_ddlRoutines",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"[",["T_CONSTANT_ENCAPSED_STRING","'alt'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'cre'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'ren'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'dro'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'tru'",154],"]",";",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Allowed interval units array\n     *\n     * @var array\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$_intervalUnits",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],"[",["T_WHITESPACE","\n        ",161],["T_STRING","self",162],["T_DOUBLE_COLON","::",162],["T_STRING","INTERVAL_YEAR",162],["T_WHITESPACE","     ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'YEAR'",162],",",["T_WHITESPACE","\n        ",162],["T_STRING","self",163],["T_DOUBLE_COLON","::",163],["T_STRING","INTERVAL_MONTH",163],["T_WHITESPACE","    ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'MONTH'",163],",",["T_WHITESPACE","\n        ",163],["T_STRING","self",164],["T_DOUBLE_COLON","::",164],["T_STRING","INTERVAL_DAY",164],["T_WHITESPACE","      ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'DAY'",164],",",["T_WHITESPACE","\n        ",164],["T_STRING","self",165],["T_DOUBLE_COLON","::",165],["T_STRING","INTERVAL_HOUR",165],["T_WHITESPACE","     ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'HOUR'",165],",",["T_WHITESPACE","\n        ",165],["T_STRING","self",166],["T_DOUBLE_COLON","::",166],["T_STRING","INTERVAL_MINUTE",166],["T_WHITESPACE","   ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'MINUTE'",166],",",["T_WHITESPACE","\n        ",166],["T_STRING","self",167],["T_DOUBLE_COLON","::",167],["T_STRING","INTERVAL_SECOND",167],["T_WHITESPACE","   ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'SECOND'",167],",",["T_WHITESPACE","\n    ",167],"]",";",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Hook callback to modify queries. Mysql specific property, designed only for backwards compatibility.\n     *\n     * @var array|null\n     *\/",170],["T_WHITESPACE","\n    ",174],["T_PROTECTED","protected",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$_queryHook",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","null",175],";",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * @var String\n     *\/",177],["T_WHITESPACE","\n    ",179],["T_PROTECTED","protected",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$string",180],";",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * @var DateTime\n     *\/",182],["T_WHITESPACE","\n    ",184],["T_PROTECTED","protected",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$dateTime",185],";",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * @var SelectFactory\n     *\/",187],["T_WHITESPACE","\n    ",189],["T_PROTECTED","protected",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$selectFactory",190],";",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * @var LoggerInterface\n     *\/",192],["T_WHITESPACE","\n    ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$logger",195],";",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Map that links database error code to corresponding Magento exception\n     *\n     * @var \\Zend_Db_Adapter_Exception[]\n     *\/",197],["T_WHITESPACE","\n    ",201],["T_PRIVATE","private",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$exceptionMap",202],";",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * @var QueryGenerator\n     *\/",204],["T_WHITESPACE","\n    ",206],["T_PRIVATE","private",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$queryGenerator",207],";",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * @param StringUtils $string\n     * @param DateTime $dateTime\n     * @param LoggerInterface $logger\n     * @param SelectFactory $selectFactory\n     * @param array $config\n     *\/",209],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","__construct",216],"(",["T_WHITESPACE","\n        ",216],["T_STRING","StringUtils",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$string",217],",",["T_WHITESPACE","\n        ",217],["T_STRING","DateTime",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$dateTime",218],",",["T_WHITESPACE","\n        ",218],["T_STRING","LoggerInterface",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$logger",219],",",["T_WHITESPACE","\n        ",219],["T_STRING","SelectFactory",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$selectFactory",220],",",["T_WHITESPACE","\n        ",220],["T_ARRAY","array",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$config",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],"[","]",["T_WHITESPACE","\n    ",221],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","string",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$string",223],";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","dateTime",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$dateTime",224],";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","logger",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$logger",225],";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","selectFactory",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$selectFactory",226],";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","exceptionMap",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],"[",["T_WHITESPACE","\n            ",227],["T_COMMENT","\/\/ SQLSTATE[HY000]: General error: 2006 MySQL server has gone away\n",228],["T_WHITESPACE","            ",229],["T_LNUMBER","2006",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_STRING","ConnectionException",229],["T_DOUBLE_COLON","::",229],["T_CLASS","class",229],",",["T_WHITESPACE","\n            ",229],["T_COMMENT","\/\/ SQLSTATE[HY000]: General error: 2013 Lost connection to MySQL server during query\n",230],["T_WHITESPACE","            ",231],["T_LNUMBER","2013",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_STRING","ConnectionException",231],["T_DOUBLE_COLON","::",231],["T_CLASS","class",231],",",["T_WHITESPACE","\n            ",231],["T_COMMENT","\/\/ SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded\n",232],["T_WHITESPACE","            ",233],["T_LNUMBER","1205",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_STRING","LockWaitException",233],["T_DOUBLE_COLON","::",233],["T_CLASS","class",233],",",["T_WHITESPACE","\n            ",233],["T_COMMENT","\/\/ SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock\n",234],["T_WHITESPACE","            ",235],["T_LNUMBER","1213",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_STRING","DeadlockException",235],["T_DOUBLE_COLON","::",235],["T_CLASS","class",235],",",["T_WHITESPACE","\n            ",235],["T_COMMENT","\/\/ SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry\n",236],["T_WHITESPACE","            ",237],["T_LNUMBER","1062",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_STRING","DuplicateException",237],["T_DOUBLE_COLON","::",237],["T_CLASS","class",237],",",["T_WHITESPACE","\n        ",237],"]",";",["T_WHITESPACE","\n        ",238],["T_TRY","try",239],["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_STRING","parent",240],["T_DOUBLE_COLON","::",240],["T_STRING","__construct",240],"(",["T_VARIABLE","$config",240],")",";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE"," ",241],["T_CATCH","catch",241],["T_WHITESPACE"," ",241],"(",["T_NS_SEPARATOR","\\",241],["T_STRING","Zend_Db_Adapter_Exception",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$e",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_THROW","throw",242],["T_WHITESPACE"," ",242],["T_NEW","new",242],["T_WHITESPACE"," ",242],["T_NS_SEPARATOR","\\",242],["T_STRING","InvalidArgumentException",242],"(",["T_VARIABLE","$e",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getMessage",242],"(",")",",",["T_WHITESPACE"," ",242],["T_VARIABLE","$e",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getCode",242],"(",")",",",["T_WHITESPACE"," ",242],["T_VARIABLE","$e",242],")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Begin new DB transaction for connection\n     *\n     * @return $this\n     * @throws \\Exception\n     *\/",246],["T_WHITESPACE","\n    ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","beginTransaction",252],"(",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_isRolledBack",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_THROW","throw",255],["T_WHITESPACE"," ",255],["T_NEW","new",255],["T_WHITESPACE"," ",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Exception",255],"(",["T_STRING","AdapterInterface",255],["T_DOUBLE_COLON","::",255],["T_STRING","ERROR_ROLLBACK_INCOMPLETE_MESSAGE",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n        ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_transactionLevel",257],["T_WHITESPACE"," ",257],["T_IS_IDENTICAL","===",257],["T_WHITESPACE"," ",257],["T_LNUMBER","0",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","logger",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","startTimer",258],"(",")",";",["T_WHITESPACE","\n            ",258],["T_STRING","parent",259],["T_DOUBLE_COLON","::",259],["T_STRING","beginTransaction",259],"(",")",";",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","logger",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","logStats",260],"(",["T_STRING","LoggerInterface",260],["T_DOUBLE_COLON","::",260],["T_STRING","TYPE_TRANSACTION",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'BEGIN'",260],")",";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n        ",261],["T_INC","++",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_transactionLevel",262],";",["T_WHITESPACE","\n        ",262],["T_RETURN","return",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],";",["T_WHITESPACE","\n    ",263],"}",["T_WHITESPACE","\n\n    ",264],["T_DOC_COMMENT","\/**\n     * Commit DB transaction\n     *\n     * @return $this\n     * @throws \\Exception\n     *\/",266],["T_WHITESPACE","\n    ",271],["T_PUBLIC","public",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","commit",272],"(",")",["T_WHITESPACE","\n    ",272],"{",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_transactionLevel",274],["T_WHITESPACE"," ",274],["T_IS_IDENTICAL","===",274],["T_WHITESPACE"," ",274],["T_LNUMBER","1",274],["T_WHITESPACE"," ",274],["T_BOOLEAN_AND","&&",274],["T_WHITESPACE"," ",274],"!",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_isRolledBack",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","logger",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","startTimer",275],"(",")",";",["T_WHITESPACE","\n            ",275],["T_STRING","parent",276],["T_DOUBLE_COLON","::",276],["T_STRING","commit",276],"(",")",";",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","logger",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","logStats",277],"(",["T_STRING","LoggerInterface",277],["T_DOUBLE_COLON","::",277],["T_STRING","TYPE_TRANSACTION",277],",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'COMMIT'",277],")",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE"," ",278],["T_ELSEIF","elseif",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_transactionLevel",278],["T_WHITESPACE"," ",278],["T_IS_IDENTICAL","===",278],["T_WHITESPACE"," ",278],["T_LNUMBER","0",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_THROW","throw",279],["T_WHITESPACE"," ",279],["T_NEW","new",279],["T_WHITESPACE"," ",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Exception",279],"(",["T_STRING","AdapterInterface",279],["T_DOUBLE_COLON","::",279],["T_STRING","ERROR_ASYMMETRIC_COMMIT_MESSAGE",279],")",";",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE"," ",280],["T_ELSEIF","elseif",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_isRolledBack",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n            ",280],["T_THROW","throw",281],["T_WHITESPACE"," ",281],["T_NEW","new",281],["T_WHITESPACE"," ",281],["T_NS_SEPARATOR","\\",281],["T_STRING","Exception",281],"(",["T_STRING","AdapterInterface",281],["T_DOUBLE_COLON","::",281],["T_STRING","ERROR_ROLLBACK_INCOMPLETE_MESSAGE",281],")",";",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n        ",282],["T_DEC","--",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_transactionLevel",283],";",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Rollback DB transaction\n     *\n     * @return $this\n     * @throws \\Exception\n     *\/",287],["T_WHITESPACE","\n    ",292],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","rollBack",293],"(",")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_transactionLevel",295],["T_WHITESPACE"," ",295],["T_IS_IDENTICAL","===",295],["T_WHITESPACE"," ",295],["T_LNUMBER","1",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","logger",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","startTimer",296],"(",")",";",["T_WHITESPACE","\n            ",296],["T_STRING","parent",297],["T_DOUBLE_COLON","::",297],["T_STRING","rollBack",297],"(",")",";",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_isRolledBack",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","false",298],";",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","logger",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","logStats",299],"(",["T_STRING","LoggerInterface",299],["T_DOUBLE_COLON","::",299],["T_STRING","TYPE_TRANSACTION",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'ROLLBACK'",299],")",";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE"," ",300],["T_ELSEIF","elseif",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_transactionLevel",300],["T_WHITESPACE"," ",300],["T_IS_IDENTICAL","===",300],["T_WHITESPACE"," ",300],["T_LNUMBER","0",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_THROW","throw",301],["T_WHITESPACE"," ",301],["T_NEW","new",301],["T_WHITESPACE"," ",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Exception",301],"(",["T_STRING","AdapterInterface",301],["T_DOUBLE_COLON","::",301],["T_STRING","ERROR_ASYMMETRIC_ROLLBACK_MESSAGE",301],")",";",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE"," ",302],["T_ELSE","else",302],["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_isRolledBack",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","true",303],";",["T_WHITESPACE","\n        ",303],"}",["T_WHITESPACE","\n        ",304],["T_DEC","--",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_transactionLevel",305],";",["T_WHITESPACE","\n        ",305],["T_RETURN","return",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n\n    ",307],["T_DOC_COMMENT","\/**\n     * Get adapter transaction level state. Return 0 if all transactions are complete\n     *\n     * @return int\n     *\/",309],["T_WHITESPACE","\n    ",313],["T_PUBLIC","public",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","getTransactionLevel",314],"(",")",["T_WHITESPACE","\n    ",314],"{",["T_WHITESPACE","\n        ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_transactionLevel",316],";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n\n    ",317],["T_DOC_COMMENT","\/**\n     * Convert date to DB format\n     *\n     * @param int|string|\\DateTime $date\n     * @return \\Zend_Db_Expr\n     *\/",319],["T_WHITESPACE","\n    ",324],["T_PUBLIC","public",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","convertDate",325],"(",["T_VARIABLE","$date",325],")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","formatDate",327],"(",["T_VARIABLE","$date",327],",",["T_WHITESPACE"," ",327],["T_STRING","false",327],")",";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Convert date and time to DB format\n     *\n     * @param   int|string|\\DateTime $datetime\n     * @return \\Zend_Db_Expr\n     *\/",330],["T_WHITESPACE","\n    ",335],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","convertDateTime",336],"(",["T_VARIABLE","$datetime",336],")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","formatDate",338],"(",["T_VARIABLE","$datetime",338],",",["T_WHITESPACE"," ",338],["T_STRING","true",338],")",";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Creates a PDO object and connects to the database.\n     *\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\n     * @return void\n     * @throws \\Zend_Db_Adapter_Exception\n     *\/",341],["T_WHITESPACE","\n    ",349],["T_PROTECTED","protected",350],["T_WHITESPACE"," ",350],["T_FUNCTION","function",350],["T_WHITESPACE"," ",350],["T_STRING","_connect",350],"(",")",["T_WHITESPACE","\n    ",350],"{",["T_WHITESPACE","\n        ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_connection",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_RETURN","return",353],";",["T_WHITESPACE","\n        ",353],"}",["T_WHITESPACE","\n\n        ",354],["T_IF","if",356],["T_WHITESPACE"," ",356],"(","!",["T_STRING","extension_loaded",356],"(",["T_CONSTANT_ENCAPSED_STRING","'pdo_mysql'",356],")",")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n            ",356],["T_THROW","throw",357],["T_WHITESPACE"," ",357],["T_NEW","new",357],["T_WHITESPACE"," ",357],["T_NS_SEPARATOR","\\",357],["T_STRING","Zend_Db_Adapter_Exception",357],"(",["T_CONSTANT_ENCAPSED_STRING","'pdo_mysql extension is not installed'",357],")",";",["T_WHITESPACE","\n        ",357],"}",["T_WHITESPACE","\n\n        ",358],["T_IF","if",360],["T_WHITESPACE"," ",360],"(","!",["T_ISSET","isset",360],"(",["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","_config",360],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",360],"]",")",")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n            ",360],["T_THROW","throw",361],["T_WHITESPACE"," ",361],["T_NEW","new",361],["T_WHITESPACE"," ",361],["T_NS_SEPARATOR","\\",361],["T_STRING","Zend_Db_Adapter_Exception",361],"(",["T_CONSTANT_ENCAPSED_STRING","'No host configured to connect'",361],")",";",["T_WHITESPACE","\n        ",361],"}",["T_WHITESPACE","\n\n        ",362],["T_IF","if",364],["T_WHITESPACE"," ",364],"(",["T_ISSET","isset",364],"(",["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_config",364],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",364],"]",")",")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_THROW","throw",365],["T_WHITESPACE"," ",365],["T_NEW","new",365],["T_WHITESPACE"," ",365],["T_NS_SEPARATOR","\\",365],["T_STRING","Zend_Db_Adapter_Exception",365],"(",["T_CONSTANT_ENCAPSED_STRING","'Port must be configured within host parameter (like localhost:3306'",365],")",";",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE","\n\n        ",366],["T_UNSET","unset",368],"(",["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_config",368],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",368],"]",")",";",["T_WHITESPACE","\n\n        ",368],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_STRING","strpos",370],"(",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_config",370],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",370],"]",",",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'\/'",370],")",["T_WHITESPACE"," ",370],["T_IS_NOT_IDENTICAL","!==",370],["T_WHITESPACE"," ",370],["T_STRING","false",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_config",371],"[",["T_CONSTANT_ENCAPSED_STRING","'unix_socket'",371],"]",["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_config",371],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",371],"]",";",["T_WHITESPACE","\n            ",371],["T_UNSET","unset",372],"(",["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_config",372],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",372],"]",")",";",["T_WHITESPACE","\n        ",372],"}",["T_WHITESPACE"," ",373],["T_ELSEIF","elseif",373],["T_WHITESPACE"," ",373],"(",["T_STRING","strpos",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_config",373],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",373],"]",",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","':'",373],")",["T_WHITESPACE"," ",373],["T_IS_NOT_IDENTICAL","!==",373],["T_WHITESPACE"," ",373],["T_STRING","false",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_LIST","list",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_config",374],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",374],"]",",",["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_config",374],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",374],"]",")",["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","explode",374],"(",["T_CONSTANT_ENCAPSED_STRING","':'",374],",",["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_config",374],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",374],"]",")",";",["T_WHITESPACE","\n        ",374],"}",["T_WHITESPACE","\n\n        ",375],["T_IF","if",377],["T_WHITESPACE"," ",377],"(","!",["T_ISSET","isset",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_config",377],"[",["T_CONSTANT_ENCAPSED_STRING","'driver_options'",377],"]","[",["T_NS_SEPARATOR","\\",377],["T_STRING","PDO",377],["T_DOUBLE_COLON","::",377],["T_STRING","MYSQL_ATTR_MULTI_STATEMENTS",377],"]",")",")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n            ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_config",378],"[",["T_CONSTANT_ENCAPSED_STRING","'driver_options'",378],"]","[",["T_NS_SEPARATOR","\\",378],["T_STRING","PDO",378],["T_DOUBLE_COLON","::",378],["T_STRING","MYSQL_ATTR_MULTI_STATEMENTS",378],"]",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","false",378],";",["T_WHITESPACE","\n        ",378],"}",["T_WHITESPACE","\n\n        ",379],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","logger",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","startTimer",381],"(",")",";",["T_WHITESPACE","\n        ",381],["T_STRING","parent",382],["T_DOUBLE_COLON","::",382],["T_STRING","_connect",382],"(",")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","logger",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","logStats",383],"(",["T_STRING","LoggerInterface",383],["T_DOUBLE_COLON","::",383],["T_STRING","TYPE_CONNECT",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","''",383],")",";",["T_WHITESPACE","\n\n        ",383],["T_DOC_COMMENT","\/** @link http:\/\/bugs.mysql.com\/bug.php?id=18551 *\/",385],["T_WHITESPACE","\n        ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_connection",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","query",386],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET SQL_MODE=''\"",386],")",";",["T_WHITESPACE","\n\n        ",386],["T_COMMENT","\/\/ As we use default value CURRENT_TIMESTAMP for TIMESTAMP type columns we need to set GMT timezone\n",388],["T_WHITESPACE","        ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","_connection",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","query",389],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET time_zone = '+00:00'\"",389],")",";",["T_WHITESPACE","\n\n        ",389],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_ISSET","isset",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_config",391],"[",["T_CONSTANT_ENCAPSED_STRING","'initStatements'",391],"]",")",")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","query",392],"(",["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_config",392],"[",["T_CONSTANT_ENCAPSED_STRING","'initStatements'",392],"]",")",";",["T_WHITESPACE","\n        ",392],"}",["T_WHITESPACE","\n\n        ",393],["T_IF","if",395],["T_WHITESPACE"," ",395],"(","!",["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","_connectionFlagsSet",395],")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n            ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_connection",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","setAttribute",396],"(",["T_NS_SEPARATOR","\\",396],["T_STRING","PDO",396],["T_DOUBLE_COLON","::",396],["T_STRING","ATTR_EMULATE_PREPARES",396],",",["T_WHITESPACE"," ",396],["T_STRING","true",396],")",";",["T_WHITESPACE","\n            ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_connection",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","setAttribute",397],"(",["T_NS_SEPARATOR","\\",397],["T_STRING","PDO",397],["T_DOUBLE_COLON","::",397],["T_STRING","MYSQL_ATTR_USE_BUFFERED_QUERY",397],",",["T_WHITESPACE"," ",397],["T_STRING","true",397],")",";",["T_WHITESPACE","\n            ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","_connectionFlagsSet",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","true",398],";",["T_WHITESPACE","\n        ",398],"}",["T_WHITESPACE","\n    ",399],"}",["T_WHITESPACE","\n\n    ",400],["T_DOC_COMMENT","\/**\n     * Run RAW Query\n     *\n     * @param string $sql\n     * @return \\Zend_Db_Statement_Interface\n     * @throws \\PDOException\n     *\/",402],["T_WHITESPACE","\n    ",408],["T_PUBLIC","public",409],["T_WHITESPACE"," ",409],["T_FUNCTION","function",409],["T_WHITESPACE"," ",409],["T_STRING","rawQuery",409],"(",["T_VARIABLE","$sql",409],")",["T_WHITESPACE","\n    ",409],"{",["T_WHITESPACE","\n        ",410],["T_TRY","try",411],["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n            ",411],["T_VARIABLE","$result",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","query",412],"(",["T_VARIABLE","$sql",412],")",";",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE"," ",413],["T_CATCH","catch",413],["T_WHITESPACE"," ",413],"(",["T_NS_SEPARATOR","\\",413],["T_STRING","Zend_Db_Statement_Exception",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$e",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_COMMENT","\/\/ Convert to \\PDOException to maintain backwards compatibility with usage of MySQL adapter\n",414],["T_WHITESPACE","            ",415],["T_VARIABLE","$e",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$e",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getPrevious",415],"(",")",";",["T_WHITESPACE","\n            ",415],["T_IF","if",416],["T_WHITESPACE"," ",416],"(","!","(",["T_VARIABLE","$e",416],["T_WHITESPACE"," ",416],["T_INSTANCEOF","instanceof",416],["T_WHITESPACE"," ",416],["T_NS_SEPARATOR","\\",416],["T_STRING","PDOException",416],")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n                ",416],["T_VARIABLE","$e",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_NEW","new",417],["T_WHITESPACE"," ",417],["T_NS_SEPARATOR","\\",417],["T_STRING","PDOException",417],"(",["T_VARIABLE","$e",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","getMessage",417],"(",")",",",["T_WHITESPACE"," ",417],["T_VARIABLE","$e",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","getCode",417],"(",")",")",";",["T_WHITESPACE","\n            ",417],"}",["T_WHITESPACE","\n            ",418],["T_THROW","throw",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$e",419],";",["T_WHITESPACE","\n        ",419],"}",["T_WHITESPACE","\n\n        ",420],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$result",422],";",["T_WHITESPACE","\n    ",422],"}",["T_WHITESPACE","\n\n    ",423],["T_DOC_COMMENT","\/**\n     * Run RAW query and Fetch First row\n     *\n     * @param string $sql\n     * @param string|int $field\n     * @return mixed|null\n     *\/",425],["T_WHITESPACE","\n    ",431],["T_PUBLIC","public",432],["T_WHITESPACE"," ",432],["T_FUNCTION","function",432],["T_WHITESPACE"," ",432],["T_STRING","rawFetchRow",432],"(",["T_VARIABLE","$sql",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$field",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","null",432],")",["T_WHITESPACE","\n    ",432],"{",["T_WHITESPACE","\n        ",433],["T_VARIABLE","$result",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","rawQuery",434],"(",["T_VARIABLE","$sql",434],")",";",["T_WHITESPACE","\n        ",434],["T_IF","if",435],["T_WHITESPACE"," ",435],"(","!",["T_VARIABLE","$result",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n            ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_STRING","false",436],";",["T_WHITESPACE","\n        ",436],"}",["T_WHITESPACE","\n\n        ",437],["T_VARIABLE","$row",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$result",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","fetch",439],"(",["T_NS_SEPARATOR","\\",439],["T_STRING","PDO",439],["T_DOUBLE_COLON","::",439],["T_STRING","FETCH_ASSOC",439],")",";",["T_WHITESPACE","\n        ",439],["T_IF","if",440],["T_WHITESPACE"," ",440],"(","!",["T_VARIABLE","$row",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_STRING","false",441],";",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE","\n\n        ",442],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_EMPTY","empty",444],"(",["T_VARIABLE","$field",444],")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_RETURN","return",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$row",445],";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE"," ",446],["T_ELSE","else",446],["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n            ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_ISSET","isset",447],"(",["T_VARIABLE","$row",447],"[",["T_VARIABLE","$field",447],"]",")",["T_WHITESPACE"," ",447],"?",["T_WHITESPACE"," ",447],["T_VARIABLE","$row",447],"[",["T_VARIABLE","$field",447],"]",["T_WHITESPACE"," ",447],":",["T_WHITESPACE"," ",447],["T_STRING","false",447],";",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n    ",448],"}",["T_WHITESPACE","\n\n    ",449],["T_DOC_COMMENT","\/**\n     * Check transaction level in case of DDL query\n     *\n     * @param string|\\Magento\\Framework\\DB\\Select $sql\n     * @return void\n     * @throws \\Zend_Db_Adapter_Exception\n     *\/",451],["T_WHITESPACE","\n    ",457],["T_PROTECTED","protected",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","_checkDdlTransaction",458],"(",["T_VARIABLE","$sql",458],")",["T_WHITESPACE","\n    ",458],"{",["T_WHITESPACE","\n        ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getTransactionLevel",460],"(",")",["T_WHITESPACE"," ",460],">",["T_WHITESPACE"," ",460],["T_LNUMBER","0",460],")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$sql",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_STRING","ltrim",461],"(",["T_STRING","preg_replace",461],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\s+\/'",461],",",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","' '",461],",",["T_WHITESPACE"," ",461],["T_VARIABLE","$sql",461],")",")",";",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$sqlMessage",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_STRING","explode",462],"(",["T_CONSTANT_ENCAPSED_STRING","' '",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$sql",462],",",["T_WHITESPACE"," ",462],["T_LNUMBER","3",462],")",";",["T_WHITESPACE","\n            ",462],["T_VARIABLE","$startSql",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_STRING","strtolower",463],"(",["T_STRING","substr",463],"(",["T_VARIABLE","$sqlMessage",463],"[",["T_LNUMBER","0",463],"]",",",["T_WHITESPACE"," ",463],["T_LNUMBER","0",463],",",["T_WHITESPACE"," ",463],["T_LNUMBER","3",463],")",")",";",["T_WHITESPACE","\n            ",463],["T_IF","if",464],["T_WHITESPACE"," ",464],"(",["T_STRING","in_array",464],"(",["T_VARIABLE","$startSql",464],",",["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_ddlRoutines",464],")",["T_WHITESPACE"," ",464],["T_BOOLEAN_AND","&&",464],["T_WHITESPACE"," ",464],["T_STRING","strcasecmp",464],"(",["T_VARIABLE","$sqlMessage",464],"[",["T_LNUMBER","1",464],"]",",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'temporary'",464],")",["T_WHITESPACE"," ",464],["T_IS_NOT_IDENTICAL","!==",464],["T_WHITESPACE"," ",464],["T_LNUMBER","0",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n                ",464],["T_STRING","trigger_error",465],"(",["T_STRING","AdapterInterface",465],["T_DOUBLE_COLON","::",465],["T_STRING","ERROR_DDL_MESSAGE",465],",",["T_WHITESPACE"," ",465],["T_STRING","E_USER_ERROR",465],")",";",["T_WHITESPACE","\n            ",465],"}",["T_WHITESPACE","\n        ",466],"}",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * Special handling for PDO query().\n     * All bind parameter names must begin with ':'.\n     *\n     * @param string|\\Magento\\Framework\\DB\\Select $sql The SQL statement with placeholders.\n     * @param mixed $bind An array of data or data itself to bind to the placeholders.\n     * @return \\Zend_Db_Statement_Pdo|void\n     * @throws \\Zend_Db_Adapter_Exception To re-throw \\PDOException.\n     * @throws \\Zend_Db_Statement_Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",470],["T_WHITESPACE","\n    ",480],["T_PROTECTED","protected",481],["T_WHITESPACE"," ",481],["T_FUNCTION","function",481],["T_WHITESPACE"," ",481],["T_STRING","_query",481],"(",["T_VARIABLE","$sql",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$bind",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],"[","]",")",["T_WHITESPACE","\n    ",481],"{",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$connectionErrors",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],"[",["T_WHITESPACE","\n            ",483],["T_LNUMBER","2006",484],",",["T_WHITESPACE"," ",484],["T_COMMENT","\/\/ SQLSTATE[HY000]: General error: 2006 MySQL server has gone away\n",484],["T_WHITESPACE","            ",485],["T_LNUMBER","2013",485],",",["T_WHITESPACE","  ",485],["T_COMMENT","\/\/ SQLSTATE[HY000]: General error: 2013 Lost connection to MySQL server during query\n",485],["T_WHITESPACE","        ",486],"]",";",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$triesCount",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_LNUMBER","0",487],";",["T_WHITESPACE","\n        ",487],["T_DO","do",488],["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n            ",488],["T_VARIABLE","$retry",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_STRING","false",489],";",["T_WHITESPACE","\n            ",489],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","logger",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","startTimer",490],"(",")",";",["T_WHITESPACE","\n            ",490],["T_TRY","try",491],["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                ",491],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","_checkDdlTransaction",492],"(",["T_VARIABLE","$sql",492],")",";",["T_WHITESPACE","\n                ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_prepareQuery",493],"(",["T_VARIABLE","$sql",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$bind",493],")",";",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$result",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_STRING","parent",494],["T_DOUBLE_COLON","::",494],["T_STRING","query",494],"(",["T_VARIABLE","$sql",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$bind",494],")",";",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","logger",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","logStats",495],"(",["T_STRING","LoggerInterface",495],["T_DOUBLE_COLON","::",495],["T_STRING","TYPE_QUERY",495],",",["T_WHITESPACE"," ",495],["T_VARIABLE","$sql",495],",",["T_WHITESPACE"," ",495],["T_VARIABLE","$bind",495],",",["T_WHITESPACE"," ",495],["T_VARIABLE","$result",495],")",";",["T_WHITESPACE","\n                ",495],["T_RETURN","return",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$result",496],";",["T_WHITESPACE","\n            ",496],"}",["T_WHITESPACE"," ",497],["T_CATCH","catch",497],["T_WHITESPACE"," ",497],"(",["T_NS_SEPARATOR","\\",497],["T_STRING","Exception",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$e",497],")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n                ",497],["T_COMMENT","\/\/ Finalize broken query\n",498],["T_WHITESPACE","                ",499],["T_VARIABLE","$profiler",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getProfiler",499],"(",")",";",["T_WHITESPACE","\n                ",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$profiler",500],["T_WHITESPACE"," ",500],["T_INSTANCEOF","instanceof",500],["T_WHITESPACE"," ",500],["T_STRING","Profiler",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n                    ",500],["T_DOC_COMMENT","\/** @var Profiler $profiler *\/",501],["T_WHITESPACE","\n                    ",501],["T_VARIABLE","$profiler",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","queryEndLast",502],"(",")",";",["T_WHITESPACE","\n                ",502],"}",["T_WHITESPACE","\n\n                ",503],["T_DOC_COMMENT","\/** @var $pdoException \\PDOException *\/",505],["T_WHITESPACE","\n                ",505],["T_VARIABLE","$pdoException",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_STRING","null",506],";",["T_WHITESPACE","\n                ",506],["T_IF","if",507],["T_WHITESPACE"," ",507],"(",["T_VARIABLE","$e",507],["T_WHITESPACE"," ",507],["T_INSTANCEOF","instanceof",507],["T_WHITESPACE"," ",507],["T_NS_SEPARATOR","\\",507],["T_STRING","PDOException",507],")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n                    ",507],["T_VARIABLE","$pdoException",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$e",508],";",["T_WHITESPACE","\n                ",508],"}",["T_WHITESPACE"," ",509],["T_ELSEIF","elseif",509],["T_WHITESPACE"," ",509],"(","(",["T_VARIABLE","$e",509],["T_WHITESPACE"," ",509],["T_INSTANCEOF","instanceof",509],["T_WHITESPACE"," ",509],["T_NS_SEPARATOR","\\",509],["T_STRING","Zend_Db_Statement_Exception",509],")",["T_WHITESPACE"," ",509],["T_BOOLEAN_AND","&&",509],["T_WHITESPACE"," ",509],"(",["T_VARIABLE","$e",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","getPrevious",509],"(",")",["T_WHITESPACE"," ",509],["T_INSTANCEOF","instanceof",509],["T_WHITESPACE"," ",509],["T_NS_SEPARATOR","\\",509],["T_STRING","PDOException",509],")",")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n                    ",509],["T_VARIABLE","$pdoException",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_VARIABLE","$e",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","getPrevious",510],"(",")",";",["T_WHITESPACE","\n                ",510],"}",["T_WHITESPACE","\n\n                ",511],["T_COMMENT","\/\/ Check to reconnect\n",513],["T_WHITESPACE","                ",514],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$pdoException",514],["T_WHITESPACE"," ",514],["T_BOOLEAN_AND","&&",514],["T_WHITESPACE"," ",514],["T_VARIABLE","$triesCount",514],["T_WHITESPACE"," ",514],"<",["T_WHITESPACE"," ",514],["T_STRING","self",514],["T_DOUBLE_COLON","::",514],["T_STRING","MAX_CONNECTION_RETRIES",514],["T_WHITESPACE","\n                    ",514],["T_BOOLEAN_AND","&&",515],["T_WHITESPACE"," ",515],["T_STRING","in_array",515],"(",["T_VARIABLE","$pdoException",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","errorInfo",515],"[",["T_LNUMBER","1",515],"]",",",["T_WHITESPACE"," ",515],["T_VARIABLE","$connectionErrors",515],")",["T_WHITESPACE","\n                ",515],")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n                    ",516],["T_VARIABLE","$retry",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_STRING","true",517],";",["T_WHITESPACE","\n                    ",517],["T_VARIABLE","$triesCount",518],["T_INC","++",518],";",["T_WHITESPACE","\n                    ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","closeConnection",519],"(",")",";",["T_WHITESPACE","\n                    ",519],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_connect",520],"(",")",";",["T_WHITESPACE","\n                ",520],"}",["T_WHITESPACE","\n\n                ",521],["T_IF","if",523],["T_WHITESPACE"," ",523],"(","!",["T_VARIABLE","$retry",523],")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n                    ",523],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","logger",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","logStats",524],"(",["T_STRING","LoggerInterface",524],["T_DOUBLE_COLON","::",524],["T_STRING","TYPE_QUERY",524],",",["T_WHITESPACE"," ",524],["T_VARIABLE","$sql",524],",",["T_WHITESPACE"," ",524],["T_VARIABLE","$bind",524],")",";",["T_WHITESPACE","\n                    ",524],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","logger",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","critical",525],"(",["T_VARIABLE","$e",525],")",";",["T_WHITESPACE","\n                    ",525],["T_COMMENT","\/\/ rethrow custom exception if needed\n",526],["T_WHITESPACE","                    ",527],["T_IF","if",527],["T_WHITESPACE"," ",527],"(",["T_VARIABLE","$pdoException",527],["T_WHITESPACE"," ",527],["T_BOOLEAN_AND","&&",527],["T_WHITESPACE"," ",527],["T_ISSET","isset",527],"(",["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","exceptionMap",527],"[",["T_VARIABLE","$pdoException",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","errorInfo",527],"[",["T_LNUMBER","1",527],"]","]",")",")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n                        ",527],["T_VARIABLE","$customExceptionClass",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","exceptionMap",528],"[",["T_VARIABLE","$pdoException",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","errorInfo",528],"[",["T_LNUMBER","1",528],"]","]",";",["T_WHITESPACE","\n                        ",528],["T_DOC_COMMENT","\/** @var \\Zend_Db_Adapter_Exception $customException *\/",529],["T_WHITESPACE","\n                        ",529],["T_VARIABLE","$customException",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_NEW","new",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$customExceptionClass",530],"(",["T_VARIABLE","$e",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getMessage",530],"(",")",",",["T_WHITESPACE"," ",530],["T_VARIABLE","$pdoException",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","errorInfo",530],"[",["T_LNUMBER","1",530],"]",",",["T_WHITESPACE"," ",530],["T_VARIABLE","$e",530],")",";",["T_WHITESPACE","\n                        ",530],["T_THROW","throw",531],["T_WHITESPACE"," ",531],["T_VARIABLE","$customException",531],";",["T_WHITESPACE","\n                    ",531],"}",["T_WHITESPACE","\n                    ",532],["T_THROW","throw",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$e",533],";",["T_WHITESPACE","\n                ",533],"}",["T_WHITESPACE","\n            ",534],"}",["T_WHITESPACE","\n        ",535],"}",["T_WHITESPACE"," ",536],["T_WHILE","while",536],["T_WHITESPACE"," ",536],"(",["T_VARIABLE","$retry",536],")",";",["T_WHITESPACE","\n    ",536],"}",["T_WHITESPACE","\n\n\n    ",537],["T_DOC_COMMENT","\/**\n     * Special handling for PDO query().\n     * All bind parameter names must begin with ':'.\n     *\n     * @param string|\\Magento\\Framework\\DB\\Select $sql The SQL statement with placeholders.\n     * @param mixed $bind An array of data or data itself to bind to the placeholders.\n     * @return \\Zend_Db_Statement_Pdo|void\n     * @throws \\Zend_Db_Adapter_Exception To re-throw \\PDOException.\n     * @throws LocalizedException In case multiple queries are attempted at once, to protect from SQL injection\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",540],["T_WHITESPACE","\n    ",550],["T_PUBLIC","public",551],["T_WHITESPACE"," ",551],["T_FUNCTION","function",551],["T_WHITESPACE"," ",551],["T_STRING","query",551],"(",["T_VARIABLE","$sql",551],",",["T_WHITESPACE"," ",551],["T_VARIABLE","$bind",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],"[","]",")",["T_WHITESPACE","\n    ",551],"{",["T_WHITESPACE","\n        ",552],["T_IF","if",553],["T_WHITESPACE"," ",553],"(",["T_STRING","strpos",553],"(",["T_STRING","rtrim",553],"(",["T_VARIABLE","$sql",553],",",["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","\" \\t\\n\\r\\0;\"",553],")",",",["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","';'",553],")",["T_WHITESPACE"," ",553],["T_IS_NOT_IDENTICAL","!==",553],["T_WHITESPACE"," ",553],["T_STRING","false",553],["T_WHITESPACE"," ",553],["T_BOOLEAN_AND","&&",553],["T_WHITESPACE"," ",553],["T_STRING","count",553],"(",["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","_splitMultiQuery",553],"(",["T_VARIABLE","$sql",553],")",")",["T_WHITESPACE"," ",553],">",["T_WHITESPACE"," ",553],["T_LNUMBER","1",553],")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n            ",553],["T_THROW","throw",554],["T_WHITESPACE"," ",554],["T_NEW","new",554],["T_WHITESPACE"," ",554],["T_NS_SEPARATOR","\\",554],["T_STRING","Magento",554],["T_NS_SEPARATOR","\\",554],["T_STRING","Framework",554],["T_NS_SEPARATOR","\\",554],["T_STRING","Exception",554],["T_NS_SEPARATOR","\\",554],["T_STRING","LocalizedException",554],"(",["T_NEW","new",554],["T_WHITESPACE"," ",554],["T_STRING","Phrase",554],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot execute multiple queries'",554],")",")",";",["T_WHITESPACE","\n        ",554],"}",["T_WHITESPACE","\n        ",555],["T_RETURN","return",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","_query",556],"(",["T_VARIABLE","$sql",556],",",["T_WHITESPACE"," ",556],["T_VARIABLE","$bind",556],")",";",["T_WHITESPACE","\n    ",556],"}",["T_WHITESPACE","\n\n    ",557],["T_DOC_COMMENT","\/**\n     * Allows multiple queries -- to safeguard against SQL injection, USE CAUTION and verify that input\n     * cannot be tampered with.\n     *\n     * Special handling for PDO query().\n     * All bind parameter names must begin with ':'.\n     *\n     * @param string|\\Magento\\Framework\\DB\\Select $sql The SQL statement with placeholders.\n     * @param mixed $bind An array of data or data itself to bind to the placeholders.\n     * @return \\Zend_Db_Statement_Pdo|void\n     * @throws \\Zend_Db_Adapter_Exception To re-throw \\PDOException.\n     * @throws LocalizedException In case multiple queries are attempted at once, to protect from SQL injection\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @deprecated\n     *\/",559],["T_WHITESPACE","\n    ",573],["T_PUBLIC","public",574],["T_WHITESPACE"," ",574],["T_FUNCTION","function",574],["T_WHITESPACE"," ",574],["T_STRING","multiQuery",574],"(",["T_VARIABLE","$sql",574],",",["T_WHITESPACE"," ",574],["T_VARIABLE","$bind",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],"[","]",")",["T_WHITESPACE","\n    ",574],"{",["T_WHITESPACE","\n        ",575],["T_RETURN","return",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_query",576],"(",["T_VARIABLE","$sql",576],",",["T_WHITESPACE"," ",576],["T_VARIABLE","$bind",576],")",";",["T_WHITESPACE","\n    ",576],"}",["T_WHITESPACE","\n\n    ",577],["T_DOC_COMMENT","\/**\n     * Prepares SQL query by moving to bind all special parameters that can be confused with bind placeholders\n     * (e.g. \"foo:bar\"). And also changes named bind to positional one, because underlying library has problems\n     * with named binds.\n     *\n     * @param \\Magento\\Framework\\DB\\Select|string $sql\n     * @param mixed $bind\n     * @return $this\n     *\/",579],["T_WHITESPACE","\n    ",587],["T_PROTECTED","protected",588],["T_WHITESPACE"," ",588],["T_FUNCTION","function",588],["T_WHITESPACE"," ",588],["T_STRING","_prepareQuery",588],"(","&",["T_VARIABLE","$sql",588],",",["T_WHITESPACE"," ",588],"&",["T_VARIABLE","$bind",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],"[","]",")",["T_WHITESPACE","\n    ",588],"{",["T_WHITESPACE","\n        ",589],["T_VARIABLE","$sql",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_STRING_CAST","(string)",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$sql",590],";",["T_WHITESPACE","\n        ",590],["T_IF","if",591],["T_WHITESPACE"," ",591],"(","!",["T_STRING","is_array",591],"(",["T_VARIABLE","$bind",591],")",")",["T_WHITESPACE"," ",591],"{",["T_WHITESPACE","\n            ",591],["T_VARIABLE","$bind",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],"[",["T_VARIABLE","$bind",592],"]",";",["T_WHITESPACE","\n        ",592],"}",["T_WHITESPACE","\n\n        ",593],["T_COMMENT","\/\/ Mixed bind is not supported - so remember whether it is named bind, to normalize later if required\n",595],["T_WHITESPACE","        ",596],["T_VARIABLE","$isNamedBind",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","false",596],";",["T_WHITESPACE","\n        ",596],["T_IF","if",597],["T_WHITESPACE"," ",597],"(",["T_VARIABLE","$bind",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_FOREACH","foreach",598],["T_WHITESPACE"," ",598],"(",["T_VARIABLE","$bind",598],["T_WHITESPACE"," ",598],["T_AS","as",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$k",598],["T_WHITESPACE"," ",598],["T_DOUBLE_ARROW","=>",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$v",598],")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n                ",598],["T_IF","if",599],["T_WHITESPACE"," ",599],"(","!",["T_STRING","is_int",599],"(",["T_VARIABLE","$k",599],")",")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n                    ",599],["T_VARIABLE","$isNamedBind",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_STRING","true",600],";",["T_WHITESPACE","\n                    ",600],["T_IF","if",601],["T_WHITESPACE"," ",601],"(",["T_VARIABLE","$k",601],"[",["T_LNUMBER","0",601],"]",["T_WHITESPACE"," ",601],["T_IS_NOT_EQUAL","!=",601],["T_WHITESPACE"," ",601],["T_CONSTANT_ENCAPSED_STRING","':'",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n                        ",601],["T_VARIABLE","$bind",602],"[","\"",["T_ENCAPSED_AND_WHITESPACE",":",602],["T_CURLY_OPEN","{",602],["T_VARIABLE","$k",602],"}","\"","]",["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_VARIABLE","$v",602],";",["T_WHITESPACE","\n                        ",602],["T_UNSET","unset",603],"(",["T_VARIABLE","$bind",603],"[",["T_VARIABLE","$k",603],"]",")",";",["T_WHITESPACE","\n                    ",603],"}",["T_WHITESPACE","\n                ",604],"}",["T_WHITESPACE","\n            ",605],"}",["T_WHITESPACE","\n        ",606],"}",["T_WHITESPACE","\n\n        ",607],["T_COMMENT","\/\/ Special query hook\n",609],["T_WHITESPACE","        ",610],["T_IF","if",610],["T_WHITESPACE"," ",610],"(",["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","_queryHook",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_VARIABLE","$object",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","_queryHook",611],"[",["T_CONSTANT_ENCAPSED_STRING","'object'",611],"]",";",["T_WHITESPACE","\n            ",611],["T_VARIABLE","$method",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","_queryHook",612],"[",["T_CONSTANT_ENCAPSED_STRING","'method'",612],"]",";",["T_WHITESPACE","\n            ",612],["T_VARIABLE","$object",613],["T_OBJECT_OPERATOR","->",613],["T_VARIABLE","$method",613],"(",["T_VARIABLE","$sql",613],",",["T_WHITESPACE"," ",613],["T_VARIABLE","$bind",613],")",";",["T_WHITESPACE","\n        ",613],"}",["T_WHITESPACE","\n\n        ",614],["T_RETURN","return",616],["T_WHITESPACE"," ",616],["T_VARIABLE","$this",616],";",["T_WHITESPACE","\n    ",616],"}",["T_WHITESPACE","\n\n    ",617],["T_DOC_COMMENT","\/**\n     * Callback function for preparation of query and bind by regexp.\n     * Checks query parameters for special symbols and moves such parameters to bind array as named ones.\n     * This method writes to $_bindParams, where query bind parameters are kept.\n     * This method requires further normalizing, if bind array is positional.\n     *\n     * @param string[] $matches\n     * @return string\n     *\/",619],["T_WHITESPACE","\n    ",627],["T_PUBLIC","public",628],["T_WHITESPACE"," ",628],["T_FUNCTION","function",628],["T_WHITESPACE"," ",628],["T_STRING","proccessBindCallback",628],"(",["T_VARIABLE","$matches",628],")",["T_WHITESPACE","\n    ",628],"{",["T_WHITESPACE","\n        ",629],["T_IF","if",630],["T_WHITESPACE"," ",630],"(",["T_ISSET","isset",630],"(",["T_VARIABLE","$matches",630],"[",["T_LNUMBER","6",630],"]",")",["T_WHITESPACE"," ",630],["T_BOOLEAN_AND","&&",630],["T_WHITESPACE"," ",630],"(",["T_WHITESPACE","\n            ",630],["T_STRING","strpos",631],"(",["T_VARIABLE","$matches",631],"[",["T_LNUMBER","6",631],"]",",",["T_WHITESPACE"," ",631],["T_CONSTANT_ENCAPSED_STRING","\"'\"",631],")",["T_WHITESPACE"," ",631],["T_IS_NOT_IDENTICAL","!==",631],["T_WHITESPACE"," ",631],["T_STRING","false",631],["T_WHITESPACE"," ",631],["T_BOOLEAN_OR","||",631],["T_WHITESPACE","\n            ",631],["T_STRING","strpos",632],"(",["T_VARIABLE","$matches",632],"[",["T_LNUMBER","6",632],"]",",",["T_WHITESPACE"," ",632],["T_CONSTANT_ENCAPSED_STRING","':'",632],")",["T_WHITESPACE"," ",632],["T_IS_NOT_IDENTICAL","!==",632],["T_WHITESPACE"," ",632],["T_STRING","false",632],["T_WHITESPACE"," ",632],["T_BOOLEAN_OR","||",632],["T_WHITESPACE","\n            ",632],["T_STRING","strpos",633],"(",["T_VARIABLE","$matches",633],"[",["T_LNUMBER","6",633],"]",",",["T_WHITESPACE"," ",633],["T_CONSTANT_ENCAPSED_STRING","'?'",633],")",["T_WHITESPACE"," ",633],["T_IS_NOT_IDENTICAL","!==",633],["T_WHITESPACE"," ",633],["T_STRING","false",633],")",["T_WHITESPACE","\n        ",633],")",["T_WHITESPACE"," ",634],"{",["T_WHITESPACE","\n            ",634],["T_VARIABLE","$bindName",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_CONSTANT_ENCAPSED_STRING","':_mage_bind_var_'",635],["T_WHITESPACE"," ",635],".",["T_WHITESPACE"," ",635],"(",["T_INC","++",635],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","_bindIncrement",635],")",";",["T_WHITESPACE","\n            ",635],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","_bindParams",636],"[",["T_VARIABLE","$bindName",636],"]",["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","_unQuote",636],"(",["T_VARIABLE","$matches",636],"[",["T_LNUMBER","6",636],"]",")",";",["T_WHITESPACE","\n            ",636],["T_RETURN","return",637],["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","' '",637],["T_WHITESPACE"," ",637],".",["T_WHITESPACE"," ",637],["T_VARIABLE","$bindName",637],";",["T_WHITESPACE","\n        ",637],"}",["T_WHITESPACE","\n        ",638],["T_RETURN","return",639],["T_WHITESPACE"," ",639],["T_VARIABLE","$matches",639],"[",["T_LNUMBER","0",639],"]",";",["T_WHITESPACE","\n    ",639],"}",["T_WHITESPACE","\n\n    ",640],["T_DOC_COMMENT","\/**\n     * Unquote raw string (use for auto-bind)\n     *\n     * @param string $string\n     * @return string\n     *\/",642],["T_WHITESPACE","\n    ",647],["T_PROTECTED","protected",648],["T_WHITESPACE"," ",648],["T_FUNCTION","function",648],["T_WHITESPACE"," ",648],["T_STRING","_unQuote",648],"(",["T_VARIABLE","$string",648],")",["T_WHITESPACE","\n    ",648],"{",["T_WHITESPACE","\n        ",649],["T_VARIABLE","$translate",650],["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],"[",["T_WHITESPACE","\n            ",650],["T_CONSTANT_ENCAPSED_STRING","\"\\\\000\"",651],["T_WHITESPACE"," ",651],["T_DOUBLE_ARROW","=>",651],["T_WHITESPACE"," ",651],["T_CONSTANT_ENCAPSED_STRING","\"\\000\"",651],",",["T_WHITESPACE","\n            ",651],["T_CONSTANT_ENCAPSED_STRING","\"\\\\n\"",652],["T_WHITESPACE","   ",652],["T_DOUBLE_ARROW","=>",652],["T_WHITESPACE"," ",652],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",652],",",["T_WHITESPACE","\n            ",652],["T_CONSTANT_ENCAPSED_STRING","\"\\\\r\"",653],["T_WHITESPACE","   ",653],["T_DOUBLE_ARROW","=>",653],["T_WHITESPACE"," ",653],["T_CONSTANT_ENCAPSED_STRING","\"\\r\"",653],",",["T_WHITESPACE","\n            ",653],["T_CONSTANT_ENCAPSED_STRING","\"\\\\\\\\\"",654],["T_WHITESPACE","  ",654],["T_DOUBLE_ARROW","=>",654],["T_WHITESPACE"," ",654],["T_CONSTANT_ENCAPSED_STRING","\"\\\\\"",654],",",["T_WHITESPACE","\n            ",654],["T_CONSTANT_ENCAPSED_STRING","\"\\'\"",655],["T_WHITESPACE","    ",655],["T_DOUBLE_ARROW","=>",655],["T_WHITESPACE"," ",655],["T_CONSTANT_ENCAPSED_STRING","\"'\"",655],",",["T_WHITESPACE","\n            ",655],["T_CONSTANT_ENCAPSED_STRING","\"\\\\\\\"\"",656],["T_WHITESPACE","  ",656],["T_DOUBLE_ARROW","=>",656],["T_WHITESPACE"," ",656],["T_CONSTANT_ENCAPSED_STRING","\"\\\"\"",656],",",["T_WHITESPACE","\n            ",656],["T_CONSTANT_ENCAPSED_STRING","\"\\\\032\"",657],["T_WHITESPACE"," ",657],["T_DOUBLE_ARROW","=>",657],["T_WHITESPACE"," ",657],["T_CONSTANT_ENCAPSED_STRING","\"\\032\"",657],",",["T_WHITESPACE","\n        ",657],"]",";",["T_WHITESPACE","\n        ",658],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_STRING","strtr",659],"(",["T_VARIABLE","$string",659],",",["T_WHITESPACE"," ",659],["T_VARIABLE","$translate",659],")",";",["T_WHITESPACE","\n    ",659],"}",["T_WHITESPACE","\n\n    ",660],["T_DOC_COMMENT","\/**\n     * Normalizes mixed positional-named bind to positional bind, and replaces named placeholders in query to\n     * '?' placeholders.\n     *\n     * @param string $sql\n     * @param array $bind\n     * @return $this\n     *\/",662],["T_WHITESPACE","\n    ",669],["T_PROTECTED","protected",670],["T_WHITESPACE"," ",670],["T_FUNCTION","function",670],["T_WHITESPACE"," ",670],["T_STRING","_convertMixedBind",670],"(","&",["T_VARIABLE","$sql",670],",",["T_WHITESPACE"," ",670],"&",["T_VARIABLE","$bind",670],")",["T_WHITESPACE","\n    ",670],"{",["T_WHITESPACE","\n        ",671],["T_VARIABLE","$positions",672],["T_WHITESPACE","  ",672],"=",["T_WHITESPACE"," ",672],"[","]",";",["T_WHITESPACE","\n        ",672],["T_VARIABLE","$offset",673],["T_WHITESPACE","     ",673],"=",["T_WHITESPACE"," ",673],["T_LNUMBER","0",673],";",["T_WHITESPACE","\n        ",673],["T_COMMENT","\/\/ get positions\n",674],["T_WHITESPACE","        ",675],["T_WHILE","while",675],["T_WHITESPACE"," ",675],"(",["T_STRING","true",675],")",["T_WHITESPACE"," ",675],"{",["T_WHITESPACE","\n            ",675],["T_VARIABLE","$pos",676],["T_WHITESPACE"," ",676],"=",["T_WHITESPACE"," ",676],["T_STRING","strpos",676],"(",["T_VARIABLE","$sql",676],",",["T_WHITESPACE"," ",676],["T_CONSTANT_ENCAPSED_STRING","'?'",676],",",["T_WHITESPACE"," ",676],["T_VARIABLE","$offset",676],")",";",["T_WHITESPACE","\n            ",676],["T_IF","if",677],["T_WHITESPACE"," ",677],"(",["T_VARIABLE","$pos",677],["T_WHITESPACE"," ",677],["T_IS_NOT_IDENTICAL","!==",677],["T_WHITESPACE"," ",677],["T_STRING","false",677],")",["T_WHITESPACE"," ",677],"{",["T_WHITESPACE","\n                ",677],["T_VARIABLE","$positions",678],"[","]",["T_WHITESPACE"," ",678],"=",["T_WHITESPACE"," ",678],["T_VARIABLE","$pos",678],";",["T_WHITESPACE","\n                ",678],["T_VARIABLE","$offset",679],["T_WHITESPACE","      ",679],"=",["T_WHITESPACE"," ",679],["T_INC","++",679],["T_VARIABLE","$pos",679],";",["T_WHITESPACE","\n            ",679],"}",["T_WHITESPACE"," ",680],["T_ELSE","else",680],["T_WHITESPACE"," ",680],"{",["T_WHITESPACE","\n                ",680],["T_BREAK","break",681],";",["T_WHITESPACE","\n            ",681],"}",["T_WHITESPACE","\n        ",682],"}",["T_WHITESPACE","\n\n        ",683],["T_VARIABLE","$bindResult",685],["T_WHITESPACE"," ",685],"=",["T_WHITESPACE"," ",685],"[","]",";",["T_WHITESPACE","\n        ",685],["T_VARIABLE","$map",686],["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],"[","]",";",["T_WHITESPACE","\n        ",686],["T_FOREACH","foreach",687],["T_WHITESPACE"," ",687],"(",["T_VARIABLE","$bind",687],["T_WHITESPACE"," ",687],["T_AS","as",687],["T_WHITESPACE"," ",687],["T_VARIABLE","$k",687],["T_WHITESPACE"," ",687],["T_DOUBLE_ARROW","=>",687],["T_WHITESPACE"," ",687],["T_VARIABLE","$v",687],")",["T_WHITESPACE"," ",687],"{",["T_WHITESPACE","\n            ",687],["T_COMMENT","\/\/ positional\n",688],["T_WHITESPACE","            ",689],["T_IF","if",689],["T_WHITESPACE"," ",689],"(",["T_STRING","is_int",689],"(",["T_VARIABLE","$k",689],")",")",["T_WHITESPACE"," ",689],"{",["T_WHITESPACE","\n                ",689],["T_IF","if",690],["T_WHITESPACE"," ",690],"(","!",["T_ISSET","isset",690],"(",["T_VARIABLE","$positions",690],"[",["T_VARIABLE","$k",690],"]",")",")",["T_WHITESPACE"," ",690],"{",["T_WHITESPACE","\n                    ",690],["T_CONTINUE","continue",691],";",["T_WHITESPACE","\n                ",691],"}",["T_WHITESPACE","\n                ",692],["T_VARIABLE","$bindResult",693],"[",["T_VARIABLE","$positions",693],"[",["T_VARIABLE","$k",693],"]","]",["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_VARIABLE","$v",693],";",["T_WHITESPACE","\n            ",693],"}",["T_WHITESPACE"," ",694],["T_ELSE","else",694],["T_WHITESPACE"," ",694],"{",["T_WHITESPACE","\n                ",694],["T_VARIABLE","$offset",695],["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_LNUMBER","0",695],";",["T_WHITESPACE","\n                ",695],["T_WHILE","while",696],["T_WHITESPACE"," ",696],"(",["T_STRING","true",696],")",["T_WHITESPACE"," ",696],"{",["T_WHITESPACE","\n                    ",696],["T_VARIABLE","$pos",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","strpos",697],"(",["T_VARIABLE","$sql",697],",",["T_WHITESPACE"," ",697],["T_VARIABLE","$k",697],",",["T_WHITESPACE"," ",697],["T_VARIABLE","$offset",697],")",";",["T_WHITESPACE","\n                    ",697],["T_IF","if",698],["T_WHITESPACE"," ",698],"(",["T_VARIABLE","$pos",698],["T_WHITESPACE"," ",698],["T_IS_IDENTICAL","===",698],["T_WHITESPACE"," ",698],["T_STRING","false",698],")",["T_WHITESPACE"," ",698],"{",["T_WHITESPACE","\n                        ",698],["T_BREAK","break",699],";",["T_WHITESPACE","\n                    ",699],"}",["T_WHITESPACE"," ",700],["T_ELSE","else",700],["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n                        ",700],["T_VARIABLE","$offset",701],["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_VARIABLE","$pos",701],["T_WHITESPACE"," ",701],"+",["T_WHITESPACE"," ",701],["T_STRING","strlen",701],"(",["T_VARIABLE","$k",701],")",";",["T_WHITESPACE","\n                        ",701],["T_VARIABLE","$bindResult",702],"[",["T_VARIABLE","$pos",702],"]",["T_WHITESPACE"," ",702],"=",["T_WHITESPACE"," ",702],["T_VARIABLE","$v",702],";",["T_WHITESPACE","\n                    ",702],"}",["T_WHITESPACE","\n                ",703],"}",["T_WHITESPACE","\n                ",704],["T_VARIABLE","$map",705],"[",["T_VARIABLE","$k",705],"]",["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_CONSTANT_ENCAPSED_STRING","'?'",705],";",["T_WHITESPACE","\n            ",705],"}",["T_WHITESPACE","\n        ",706],"}",["T_WHITESPACE","\n\n        ",707],["T_STRING","ksort",709],"(",["T_VARIABLE","$bindResult",709],")",";",["T_WHITESPACE","\n        ",709],["T_VARIABLE","$bind",710],["T_WHITESPACE"," ",710],"=",["T_WHITESPACE"," ",710],["T_STRING","array_values",710],"(",["T_VARIABLE","$bindResult",710],")",";",["T_WHITESPACE","\n        ",710],["T_VARIABLE","$sql",711],["T_WHITESPACE"," ",711],"=",["T_WHITESPACE"," ",711],["T_STRING","strtr",711],"(",["T_VARIABLE","$sql",711],",",["T_WHITESPACE"," ",711],["T_VARIABLE","$map",711],")",";",["T_WHITESPACE","\n\n        ",711],["T_RETURN","return",713],["T_WHITESPACE"," ",713],["T_VARIABLE","$this",713],";",["T_WHITESPACE","\n    ",713],"}",["T_WHITESPACE","\n\n    ",714],["T_DOC_COMMENT","\/**\n     * Sets (removes) query hook.\n     *\n     * $hook must be either array with 'object' and 'method' entries, or null to remove hook.\n     * Previous hook is returned.\n     *\n     * @param array $hook\n     * @return array|null\n     *\/",716],["T_WHITESPACE","\n    ",724],["T_PUBLIC","public",725],["T_WHITESPACE"," ",725],["T_FUNCTION","function",725],["T_WHITESPACE"," ",725],["T_STRING","setQueryHook",725],"(",["T_VARIABLE","$hook",725],")",["T_WHITESPACE","\n    ",725],"{",["T_WHITESPACE","\n        ",726],["T_VARIABLE","$prev",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","_queryHook",727],";",["T_WHITESPACE","\n        ",727],["T_VARIABLE","$this",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","_queryHook",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_VARIABLE","$hook",728],";",["T_WHITESPACE","\n        ",728],["T_RETURN","return",729],["T_WHITESPACE"," ",729],["T_VARIABLE","$prev",729],";",["T_WHITESPACE","\n    ",729],"}",["T_WHITESPACE","\n\n    ",730],["T_DOC_COMMENT","\/**\n     * Split multi statement query\n     *\n     * @param string $sql\n     * @return array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n\n     * @deprecated\n     *\/",732],["T_WHITESPACE","\n    ",741],["T_PROTECTED","protected",742],["T_WHITESPACE"," ",742],["T_FUNCTION","function",742],["T_WHITESPACE"," ",742],["T_STRING","_splitMultiQuery",742],"(",["T_VARIABLE","$sql",742],")",["T_WHITESPACE","\n    ",742],"{",["T_WHITESPACE","\n        ",743],["T_VARIABLE","$parts",744],["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],["T_STRING","preg_split",744],"(",["T_WHITESPACE","\n            ",744],["T_CONSTANT_ENCAPSED_STRING","'#(;|\\'|\"|\\\\\\\\|\/\/|--|\\n|\/\\*|\\*\/)#'",745],",",["T_WHITESPACE","\n            ",745],["T_VARIABLE","$sql",746],",",["T_WHITESPACE","\n            ",746],["T_STRING","null",747],",",["T_WHITESPACE","\n            ",747],["T_STRING","PREG_SPLIT_NO_EMPTY",748],["T_WHITESPACE"," ",748],"|",["T_WHITESPACE"," ",748],["T_STRING","PREG_SPLIT_DELIM_CAPTURE",748],["T_WHITESPACE","\n        ",748],")",";",["T_WHITESPACE","\n\n        ",749],["T_VARIABLE","$q",751],["T_WHITESPACE","      ",751],"=",["T_WHITESPACE"," ",751],["T_STRING","false",751],";",["T_WHITESPACE","\n        ",751],["T_VARIABLE","$c",752],["T_WHITESPACE","      ",752],"=",["T_WHITESPACE"," ",752],["T_STRING","false",752],";",["T_WHITESPACE","\n        ",752],["T_VARIABLE","$stmts",753],["T_WHITESPACE","  ",753],"=",["T_WHITESPACE"," ",753],"[","]",";",["T_WHITESPACE","\n        ",753],["T_VARIABLE","$s",754],["T_WHITESPACE","      ",754],"=",["T_WHITESPACE"," ",754],["T_CONSTANT_ENCAPSED_STRING","''",754],";",["T_WHITESPACE","\n\n        ",754],["T_FOREACH","foreach",756],["T_WHITESPACE"," ",756],"(",["T_VARIABLE","$parts",756],["T_WHITESPACE"," ",756],["T_AS","as",756],["T_WHITESPACE"," ",756],["T_VARIABLE","$i",756],["T_WHITESPACE"," ",756],["T_DOUBLE_ARROW","=>",756],["T_WHITESPACE"," ",756],["T_VARIABLE","$part",756],")",["T_WHITESPACE"," ",756],"{",["T_WHITESPACE","\n            ",756],["T_COMMENT","\/\/ strings\n",757],["T_WHITESPACE","            ",758],["T_IF","if",758],["T_WHITESPACE"," ",758],"(","(",["T_VARIABLE","$part",758],["T_WHITESPACE"," ",758],["T_IS_IDENTICAL","===",758],["T_WHITESPACE"," ",758],["T_CONSTANT_ENCAPSED_STRING","\"'\"",758],["T_WHITESPACE"," ",758],["T_BOOLEAN_OR","||",758],["T_WHITESPACE"," ",758],["T_VARIABLE","$part",758],["T_WHITESPACE"," ",758],["T_IS_IDENTICAL","===",758],["T_WHITESPACE"," ",758],["T_CONSTANT_ENCAPSED_STRING","'\"'",758],")",["T_WHITESPACE"," ",758],["T_BOOLEAN_AND","&&",758],["T_WHITESPACE"," ",758],"(",["T_VARIABLE","$i",758],["T_WHITESPACE"," ",758],["T_IS_IDENTICAL","===",758],["T_WHITESPACE"," ",758],["T_LNUMBER","0",758],["T_WHITESPACE"," ",758],["T_BOOLEAN_OR","||",758],["T_WHITESPACE"," ",758],["T_VARIABLE","$parts",758],"[",["T_VARIABLE","$i",758],"-",["T_LNUMBER","1",758],"]",["T_WHITESPACE"," ",758],["T_IS_NOT_IDENTICAL","!==",758],["T_WHITESPACE"," ",758],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",758],")",")",["T_WHITESPACE"," ",758],"{",["T_WHITESPACE","\n                ",758],["T_IF","if",759],["T_WHITESPACE"," ",759],"(",["T_VARIABLE","$q",759],["T_WHITESPACE"," ",759],["T_IS_IDENTICAL","===",759],["T_WHITESPACE"," ",759],["T_STRING","false",759],")",["T_WHITESPACE"," ",759],"{",["T_WHITESPACE","\n                    ",759],["T_VARIABLE","$q",760],["T_WHITESPACE"," ",760],"=",["T_WHITESPACE"," ",760],["T_VARIABLE","$part",760],";",["T_WHITESPACE","\n                ",760],"}",["T_WHITESPACE"," ",761],["T_ELSEIF","elseif",761],["T_WHITESPACE"," ",761],"(",["T_VARIABLE","$q",761],["T_WHITESPACE"," ",761],["T_IS_IDENTICAL","===",761],["T_WHITESPACE"," ",761],["T_VARIABLE","$part",761],")",["T_WHITESPACE"," ",761],"{",["T_WHITESPACE","\n                    ",761],["T_VARIABLE","$q",762],["T_WHITESPACE"," ",762],"=",["T_WHITESPACE"," ",762],["T_STRING","false",762],";",["T_WHITESPACE","\n                ",762],"}",["T_WHITESPACE","\n            ",763],"}",["T_WHITESPACE","\n\n            ",764],["T_COMMENT","\/\/ single line comments\n",766],["T_WHITESPACE","            ",767],["T_IF","if",767],["T_WHITESPACE"," ",767],"(","(",["T_VARIABLE","$part",767],["T_WHITESPACE"," ",767],["T_IS_IDENTICAL","===",767],["T_WHITESPACE"," ",767],["T_CONSTANT_ENCAPSED_STRING","'\/\/'",767],["T_WHITESPACE"," ",767],["T_BOOLEAN_OR","||",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$part",767],["T_WHITESPACE"," ",767],["T_IS_IDENTICAL","===",767],["T_WHITESPACE"," ",767],["T_CONSTANT_ENCAPSED_STRING","'--'",767],")",["T_WHITESPACE"," ",767],["T_BOOLEAN_AND","&&",767],["T_WHITESPACE"," ",767],"(",["T_VARIABLE","$i",767],["T_WHITESPACE"," ",767],["T_IS_IDENTICAL","===",767],["T_WHITESPACE"," ",767],["T_LNUMBER","0",767],["T_WHITESPACE"," ",767],["T_BOOLEAN_OR","||",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$parts",767],"[",["T_VARIABLE","$i",767],"-",["T_LNUMBER","1",767],"]",["T_WHITESPACE"," ",767],["T_IS_IDENTICAL","===",767],["T_WHITESPACE"," ",767],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",767],")",")",["T_WHITESPACE"," ",767],"{",["T_WHITESPACE","\n                ",767],["T_VARIABLE","$c",768],["T_WHITESPACE"," ",768],"=",["T_WHITESPACE"," ",768],["T_VARIABLE","$part",768],";",["T_WHITESPACE","\n            ",768],"}",["T_WHITESPACE"," ",769],["T_ELSEIF","elseif",769],["T_WHITESPACE"," ",769],"(",["T_VARIABLE","$part",769],["T_WHITESPACE"," ",769],["T_IS_IDENTICAL","===",769],["T_WHITESPACE"," ",769],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",769],["T_WHITESPACE"," ",769],["T_BOOLEAN_AND","&&",769],["T_WHITESPACE"," ",769],"(",["T_VARIABLE","$c",769],["T_WHITESPACE"," ",769],["T_IS_IDENTICAL","===",769],["T_WHITESPACE"," ",769],["T_CONSTANT_ENCAPSED_STRING","'\/\/'",769],["T_WHITESPACE"," ",769],["T_BOOLEAN_OR","||",769],["T_WHITESPACE"," ",769],["T_VARIABLE","$c",769],["T_WHITESPACE"," ",769],["T_IS_IDENTICAL","===",769],["T_WHITESPACE"," ",769],["T_CONSTANT_ENCAPSED_STRING","'--'",769],")",")",["T_WHITESPACE"," ",769],"{",["T_WHITESPACE","\n                ",769],["T_VARIABLE","$c",770],["T_WHITESPACE"," ",770],"=",["T_WHITESPACE"," ",770],["T_STRING","false",770],";",["T_WHITESPACE","\n            ",770],"}",["T_WHITESPACE","\n\n            ",771],["T_COMMENT","\/\/ multi line comments\n",773],["T_WHITESPACE","            ",774],["T_IF","if",774],["T_WHITESPACE"," ",774],"(",["T_VARIABLE","$part",774],["T_WHITESPACE"," ",774],["T_IS_IDENTICAL","===",774],["T_WHITESPACE"," ",774],["T_CONSTANT_ENCAPSED_STRING","'\/*'",774],["T_WHITESPACE"," ",774],["T_BOOLEAN_AND","&&",774],["T_WHITESPACE"," ",774],["T_VARIABLE","$c",774],["T_WHITESPACE"," ",774],["T_IS_IDENTICAL","===",774],["T_WHITESPACE"," ",774],["T_STRING","false",774],")",["T_WHITESPACE"," ",774],"{",["T_WHITESPACE","\n                ",774],["T_VARIABLE","$c",775],["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_CONSTANT_ENCAPSED_STRING","'\/*'",775],";",["T_WHITESPACE","\n            ",775],"}",["T_WHITESPACE"," ",776],["T_ELSEIF","elseif",776],["T_WHITESPACE"," ",776],"(",["T_VARIABLE","$part",776],["T_WHITESPACE"," ",776],["T_IS_IDENTICAL","===",776],["T_WHITESPACE"," ",776],["T_CONSTANT_ENCAPSED_STRING","'*\/'",776],["T_WHITESPACE"," ",776],["T_BOOLEAN_AND","&&",776],["T_WHITESPACE"," ",776],["T_VARIABLE","$c",776],["T_WHITESPACE"," ",776],["T_IS_IDENTICAL","===",776],["T_WHITESPACE"," ",776],["T_CONSTANT_ENCAPSED_STRING","'\/*'",776],")",["T_WHITESPACE"," ",776],"{",["T_WHITESPACE","\n                ",776],["T_VARIABLE","$c",777],["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],["T_STRING","false",777],";",["T_WHITESPACE","\n            ",777],"}",["T_WHITESPACE","\n\n            ",778],["T_COMMENT","\/\/ statements\n",780],["T_WHITESPACE","            ",781],["T_IF","if",781],["T_WHITESPACE"," ",781],"(",["T_VARIABLE","$part",781],["T_WHITESPACE"," ",781],["T_IS_IDENTICAL","===",781],["T_WHITESPACE"," ",781],["T_CONSTANT_ENCAPSED_STRING","';'",781],["T_WHITESPACE"," ",781],["T_BOOLEAN_AND","&&",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$q",781],["T_WHITESPACE"," ",781],["T_IS_IDENTICAL","===",781],["T_WHITESPACE"," ",781],["T_STRING","false",781],["T_WHITESPACE"," ",781],["T_BOOLEAN_AND","&&",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$c",781],["T_WHITESPACE"," ",781],["T_IS_IDENTICAL","===",781],["T_WHITESPACE"," ",781],["T_STRING","false",781],")",["T_WHITESPACE"," ",781],"{",["T_WHITESPACE","\n                ",781],["T_IF","if",782],["T_WHITESPACE"," ",782],"(",["T_STRING","trim",782],"(",["T_VARIABLE","$s",782],")",["T_WHITESPACE"," ",782],["T_IS_NOT_IDENTICAL","!==",782],["T_WHITESPACE"," ",782],["T_CONSTANT_ENCAPSED_STRING","''",782],")",["T_WHITESPACE"," ",782],"{",["T_WHITESPACE","\n                    ",782],["T_VARIABLE","$stmts",783],"[","]",["T_WHITESPACE"," ",783],"=",["T_WHITESPACE"," ",783],["T_STRING","trim",783],"(",["T_VARIABLE","$s",783],")",";",["T_WHITESPACE","\n                    ",783],["T_VARIABLE","$s",784],["T_WHITESPACE"," ",784],"=",["T_WHITESPACE"," ",784],["T_CONSTANT_ENCAPSED_STRING","''",784],";",["T_WHITESPACE","\n                ",784],"}",["T_WHITESPACE","\n            ",785],"}",["T_WHITESPACE"," ",786],["T_ELSE","else",786],["T_WHITESPACE"," ",786],"{",["T_WHITESPACE","\n                ",786],["T_VARIABLE","$s",787],["T_WHITESPACE"," ",787],["T_CONCAT_EQUAL",".=",787],["T_WHITESPACE"," ",787],["T_VARIABLE","$part",787],";",["T_WHITESPACE","\n            ",787],"}",["T_WHITESPACE","\n        ",788],"}",["T_WHITESPACE","\n        ",789],["T_IF","if",790],["T_WHITESPACE"," ",790],"(",["T_STRING","trim",790],"(",["T_VARIABLE","$s",790],")",["T_WHITESPACE"," ",790],["T_IS_NOT_IDENTICAL","!==",790],["T_WHITESPACE"," ",790],["T_CONSTANT_ENCAPSED_STRING","''",790],")",["T_WHITESPACE"," ",790],"{",["T_WHITESPACE","\n            ",790],["T_VARIABLE","$stmts",791],"[","]",["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_STRING","trim",791],"(",["T_VARIABLE","$s",791],")",";",["T_WHITESPACE","\n        ",791],"}",["T_WHITESPACE","\n\n        ",792],["T_RETURN","return",794],["T_WHITESPACE"," ",794],["T_VARIABLE","$stmts",794],";",["T_WHITESPACE","\n    ",794],"}",["T_WHITESPACE","\n\n    ",795],["T_DOC_COMMENT","\/**\n     * Drop the Foreign Key from table\n     *\n     * @param string $tableName\n     * @param string $fkName\n     * @param string $schemaName\n     * @return $this\n     *\/",797],["T_WHITESPACE","\n    ",804],["T_PUBLIC","public",805],["T_WHITESPACE"," ",805],["T_FUNCTION","function",805],["T_WHITESPACE"," ",805],["T_STRING","dropForeignKey",805],"(",["T_VARIABLE","$tableName",805],",",["T_WHITESPACE"," ",805],["T_VARIABLE","$fkName",805],",",["T_WHITESPACE"," ",805],["T_VARIABLE","$schemaName",805],["T_WHITESPACE"," ",805],"=",["T_WHITESPACE"," ",805],["T_STRING","null",805],")",["T_WHITESPACE","\n    ",805],"{",["T_WHITESPACE","\n        ",806],["T_VARIABLE","$foreignKeys",807],["T_WHITESPACE"," ",807],"=",["T_WHITESPACE"," ",807],["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","getForeignKeys",807],"(",["T_VARIABLE","$tableName",807],",",["T_WHITESPACE"," ",807],["T_VARIABLE","$schemaName",807],")",";",["T_WHITESPACE","\n        ",807],["T_VARIABLE","$fkName",808],["T_WHITESPACE"," ",808],"=",["T_WHITESPACE"," ",808],["T_STRING","strtoupper",808],"(",["T_VARIABLE","$fkName",808],")",";",["T_WHITESPACE","\n        ",808],["T_IF","if",809],["T_WHITESPACE"," ",809],"(",["T_STRING","substr",809],"(",["T_VARIABLE","$fkName",809],",",["T_WHITESPACE"," ",809],["T_LNUMBER","0",809],",",["T_WHITESPACE"," ",809],["T_LNUMBER","3",809],")",["T_WHITESPACE"," ",809],["T_IS_EQUAL","==",809],["T_WHITESPACE"," ",809],["T_CONSTANT_ENCAPSED_STRING","'FK_'",809],")",["T_WHITESPACE"," ",809],"{",["T_WHITESPACE","\n            ",809],["T_VARIABLE","$fkName",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_STRING","substr",810],"(",["T_VARIABLE","$fkName",810],",",["T_WHITESPACE"," ",810],["T_LNUMBER","3",810],")",";",["T_WHITESPACE","\n        ",810],"}",["T_WHITESPACE","\n        ",811],["T_FOREACH","foreach",812],["T_WHITESPACE"," ",812],"(","[",["T_VARIABLE","$fkName",812],",",["T_WHITESPACE"," ",812],["T_CONSTANT_ENCAPSED_STRING","'FK_'",812],["T_WHITESPACE"," ",812],".",["T_WHITESPACE"," ",812],["T_VARIABLE","$fkName",812],"]",["T_WHITESPACE"," ",812],["T_AS","as",812],["T_WHITESPACE"," ",812],["T_VARIABLE","$key",812],")",["T_WHITESPACE"," ",812],"{",["T_WHITESPACE","\n            ",812],["T_IF","if",813],["T_WHITESPACE"," ",813],"(",["T_ISSET","isset",813],"(",["T_VARIABLE","$foreignKeys",813],"[",["T_VARIABLE","$key",813],"]",")",")",["T_WHITESPACE"," ",813],"{",["T_WHITESPACE","\n                ",813],["T_VARIABLE","$sql",814],["T_WHITESPACE"," ",814],"=",["T_WHITESPACE"," ",814],["T_STRING","sprintf",814],"(",["T_WHITESPACE","\n                    ",814],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s DROP FOREIGN KEY %s'",815],",",["T_WHITESPACE","\n                    ",815],["T_VARIABLE","$this",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","quoteIdentifier",816],"(",["T_VARIABLE","$this",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","_getTableName",816],"(",["T_VARIABLE","$tableName",816],",",["T_WHITESPACE"," ",816],["T_VARIABLE","$schemaName",816],")",")",",",["T_WHITESPACE","\n                    ",816],["T_VARIABLE","$this",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","quoteIdentifier",817],"(",["T_VARIABLE","$foreignKeys",817],"[",["T_VARIABLE","$key",817],"]","[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",817],"]",")",["T_WHITESPACE","\n                ",817],")",";",["T_WHITESPACE","\n                ",818],["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","resetDdlCache",819],"(",["T_VARIABLE","$tableName",819],",",["T_WHITESPACE"," ",819],["T_VARIABLE","$schemaName",819],")",";",["T_WHITESPACE","\n                ",819],["T_VARIABLE","$this",820],["T_OBJECT_OPERATOR","->",820],["T_STRING","rawQuery",820],"(",["T_VARIABLE","$sql",820],")",";",["T_WHITESPACE","\n            ",820],"}",["T_WHITESPACE","\n        ",821],"}",["T_WHITESPACE","\n        ",822],["T_RETURN","return",823],["T_WHITESPACE"," ",823],["T_VARIABLE","$this",823],";",["T_WHITESPACE","\n    ",823],"}",["T_WHITESPACE","\n\n    ",824],["T_DOC_COMMENT","\/**\n     * Prepare table before add constraint foreign key\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param string $refTableName\n     * @param string $refColumnName\n     * @param string $onDelete\n     * @return $this\n     *\/",826],["T_WHITESPACE","\n    ",835],["T_PUBLIC","public",836],["T_WHITESPACE"," ",836],["T_FUNCTION","function",836],["T_WHITESPACE"," ",836],["T_STRING","purgeOrphanRecords",836],"(",["T_WHITESPACE","\n        ",836],["T_VARIABLE","$tableName",837],",",["T_WHITESPACE","\n        ",837],["T_VARIABLE","$columnName",838],",",["T_WHITESPACE","\n        ",838],["T_VARIABLE","$refTableName",839],",",["T_WHITESPACE","\n        ",839],["T_VARIABLE","$refColumnName",840],",",["T_WHITESPACE","\n        ",840],["T_VARIABLE","$onDelete",841],["T_WHITESPACE"," ",841],"=",["T_WHITESPACE"," ",841],["T_STRING","AdapterInterface",841],["T_DOUBLE_COLON","::",841],["T_STRING","FK_ACTION_CASCADE",841],["T_WHITESPACE","\n    ",841],")",["T_WHITESPACE"," ",842],"{",["T_WHITESPACE","\n        ",842],["T_VARIABLE","$onDelete",843],["T_WHITESPACE"," ",843],"=",["T_WHITESPACE"," ",843],["T_STRING","strtoupper",843],"(",["T_VARIABLE","$onDelete",843],")",";",["T_WHITESPACE","\n        ",843],["T_IF","if",844],["T_WHITESPACE"," ",844],"(",["T_VARIABLE","$onDelete",844],["T_WHITESPACE"," ",844],["T_IS_EQUAL","==",844],["T_WHITESPACE"," ",844],["T_STRING","AdapterInterface",844],["T_DOUBLE_COLON","::",844],["T_STRING","FK_ACTION_CASCADE",844],["T_WHITESPACE","\n            ",844],["T_BOOLEAN_OR","||",845],["T_WHITESPACE"," ",845],["T_VARIABLE","$onDelete",845],["T_WHITESPACE"," ",845],["T_IS_EQUAL","==",845],["T_WHITESPACE"," ",845],["T_STRING","AdapterInterface",845],["T_DOUBLE_COLON","::",845],["T_STRING","FK_ACTION_RESTRICT",845],["T_WHITESPACE","\n        ",845],")",["T_WHITESPACE"," ",846],"{",["T_WHITESPACE","\n            ",846],["T_VARIABLE","$sql",847],["T_WHITESPACE"," ",847],"=",["T_WHITESPACE"," ",847],["T_STRING","sprintf",847],"(",["T_WHITESPACE","\n                ",847],["T_CONSTANT_ENCAPSED_STRING","\"DELETE p.* FROM %s AS p LEFT JOIN %s AS r ON p.%s = r.%s WHERE r.%s IS NULL\"",848],",",["T_WHITESPACE","\n                ",848],["T_VARIABLE","$this",849],["T_OBJECT_OPERATOR","->",849],["T_STRING","quoteIdentifier",849],"(",["T_VARIABLE","$tableName",849],")",",",["T_WHITESPACE","\n                ",849],["T_VARIABLE","$this",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","quoteIdentifier",850],"(",["T_VARIABLE","$refTableName",850],")",",",["T_WHITESPACE","\n                ",850],["T_VARIABLE","$this",851],["T_OBJECT_OPERATOR","->",851],["T_STRING","quoteIdentifier",851],"(",["T_VARIABLE","$columnName",851],")",",",["T_WHITESPACE","\n                ",851],["T_VARIABLE","$this",852],["T_OBJECT_OPERATOR","->",852],["T_STRING","quoteIdentifier",852],"(",["T_VARIABLE","$refColumnName",852],")",",",["T_WHITESPACE","\n                ",852],["T_VARIABLE","$this",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","quoteIdentifier",853],"(",["T_VARIABLE","$refColumnName",853],")",["T_WHITESPACE","\n            ",853],")",";",["T_WHITESPACE","\n            ",854],["T_VARIABLE","$this",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","rawQuery",855],"(",["T_VARIABLE","$sql",855],")",";",["T_WHITESPACE","\n        ",855],"}",["T_WHITESPACE"," ",856],["T_ELSEIF","elseif",856],["T_WHITESPACE"," ",856],"(",["T_VARIABLE","$onDelete",856],["T_WHITESPACE"," ",856],["T_IS_EQUAL","==",856],["T_WHITESPACE"," ",856],["T_STRING","AdapterInterface",856],["T_DOUBLE_COLON","::",856],["T_STRING","FK_ACTION_SET_NULL",856],")",["T_WHITESPACE"," ",856],"{",["T_WHITESPACE","\n            ",856],["T_VARIABLE","$sql",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_STRING","sprintf",857],"(",["T_WHITESPACE","\n                ",857],["T_CONSTANT_ENCAPSED_STRING","\"UPDATE %s AS p LEFT JOIN %s AS r ON p.%s = r.%s SET p.%s = NULL WHERE r.%s IS NULL\"",858],",",["T_WHITESPACE","\n                ",858],["T_VARIABLE","$this",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","quoteIdentifier",859],"(",["T_VARIABLE","$tableName",859],")",",",["T_WHITESPACE","\n                ",859],["T_VARIABLE","$this",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","quoteIdentifier",860],"(",["T_VARIABLE","$refTableName",860],")",",",["T_WHITESPACE","\n                ",860],["T_VARIABLE","$this",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","quoteIdentifier",861],"(",["T_VARIABLE","$columnName",861],")",",",["T_WHITESPACE","\n                ",861],["T_VARIABLE","$this",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","quoteIdentifier",862],"(",["T_VARIABLE","$refColumnName",862],")",",",["T_WHITESPACE","\n                ",862],["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","quoteIdentifier",863],"(",["T_VARIABLE","$columnName",863],")",",",["T_WHITESPACE","\n                ",863],["T_VARIABLE","$this",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","quoteIdentifier",864],"(",["T_VARIABLE","$refColumnName",864],")",["T_WHITESPACE","\n            ",864],")",";",["T_WHITESPACE","\n            ",865],["T_VARIABLE","$this",866],["T_OBJECT_OPERATOR","->",866],["T_STRING","rawQuery",866],"(",["T_VARIABLE","$sql",866],")",";",["T_WHITESPACE","\n        ",866],"}",["T_WHITESPACE","\n\n        ",867],["T_RETURN","return",869],["T_WHITESPACE"," ",869],["T_VARIABLE","$this",869],";",["T_WHITESPACE","\n    ",869],"}",["T_WHITESPACE","\n\n    ",870],["T_DOC_COMMENT","\/**\n     * Check does table column exist\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param string $schemaName\n     * @return bool\n     *\/",872],["T_WHITESPACE","\n    ",879],["T_PUBLIC","public",880],["T_WHITESPACE"," ",880],["T_FUNCTION","function",880],["T_WHITESPACE"," ",880],["T_STRING","tableColumnExists",880],"(",["T_VARIABLE","$tableName",880],",",["T_WHITESPACE"," ",880],["T_VARIABLE","$columnName",880],",",["T_WHITESPACE"," ",880],["T_VARIABLE","$schemaName",880],["T_WHITESPACE"," ",880],"=",["T_WHITESPACE"," ",880],["T_STRING","null",880],")",["T_WHITESPACE","\n    ",880],"{",["T_WHITESPACE","\n        ",881],["T_VARIABLE","$describe",882],["T_WHITESPACE"," ",882],"=",["T_WHITESPACE"," ",882],["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","describeTable",882],"(",["T_VARIABLE","$tableName",882],",",["T_WHITESPACE"," ",882],["T_VARIABLE","$schemaName",882],")",";",["T_WHITESPACE","\n        ",882],["T_FOREACH","foreach",883],["T_WHITESPACE"," ",883],"(",["T_VARIABLE","$describe",883],["T_WHITESPACE"," ",883],["T_AS","as",883],["T_WHITESPACE"," ",883],["T_VARIABLE","$column",883],")",["T_WHITESPACE"," ",883],"{",["T_WHITESPACE","\n            ",883],["T_IF","if",884],["T_WHITESPACE"," ",884],"(",["T_VARIABLE","$column",884],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",884],"]",["T_WHITESPACE"," ",884],["T_IS_EQUAL","==",884],["T_WHITESPACE"," ",884],["T_VARIABLE","$columnName",884],")",["T_WHITESPACE"," ",884],"{",["T_WHITESPACE","\n                ",884],["T_RETURN","return",885],["T_WHITESPACE"," ",885],["T_STRING","true",885],";",["T_WHITESPACE","\n            ",885],"}",["T_WHITESPACE","\n        ",886],"}",["T_WHITESPACE","\n        ",887],["T_RETURN","return",888],["T_WHITESPACE"," ",888],["T_STRING","false",888],";",["T_WHITESPACE","\n    ",888],"}",["T_WHITESPACE","\n\n    ",889],["T_DOC_COMMENT","\/**\n     * Adds new column to table.\n     *\n     * Generally $defintion must be array with column data to keep this call cross-DB compatible.\n     * Using string as $definition is allowed only for concrete DB adapter.\n     * Adds primary key if needed\n     *\n     * @param   string $tableName\n     * @param   string $columnName\n     * @param   array|string $definition  string specific or universal array DB Server definition\n     * @param   string $schemaName\n     * @return  true|\\Zend_Db_Statement_Pdo\n     * @throws  \\Zend_Db_Exception\n     *\/",891],["T_WHITESPACE","\n    ",904],["T_PUBLIC","public",905],["T_WHITESPACE"," ",905],["T_FUNCTION","function",905],["T_WHITESPACE"," ",905],["T_STRING","addColumn",905],"(",["T_VARIABLE","$tableName",905],",",["T_WHITESPACE"," ",905],["T_VARIABLE","$columnName",905],",",["T_WHITESPACE"," ",905],["T_VARIABLE","$definition",905],",",["T_WHITESPACE"," ",905],["T_VARIABLE","$schemaName",905],["T_WHITESPACE"," ",905],"=",["T_WHITESPACE"," ",905],["T_STRING","null",905],")",["T_WHITESPACE","\n    ",905],"{",["T_WHITESPACE","\n        ",906],["T_IF","if",907],["T_WHITESPACE"," ",907],"(",["T_VARIABLE","$this",907],["T_OBJECT_OPERATOR","->",907],["T_STRING","tableColumnExists",907],"(",["T_VARIABLE","$tableName",907],",",["T_WHITESPACE"," ",907],["T_VARIABLE","$columnName",907],",",["T_WHITESPACE"," ",907],["T_VARIABLE","$schemaName",907],")",")",["T_WHITESPACE"," ",907],"{",["T_WHITESPACE","\n            ",907],["T_RETURN","return",908],["T_WHITESPACE"," ",908],["T_STRING","true",908],";",["T_WHITESPACE","\n        ",908],"}",["T_WHITESPACE","\n\n        ",909],["T_VARIABLE","$primaryKey",911],["T_WHITESPACE"," ",911],"=",["T_WHITESPACE"," ",911],["T_CONSTANT_ENCAPSED_STRING","''",911],";",["T_WHITESPACE","\n        ",911],["T_IF","if",912],["T_WHITESPACE"," ",912],"(",["T_STRING","is_array",912],"(",["T_VARIABLE","$definition",912],")",")",["T_WHITESPACE"," ",912],"{",["T_WHITESPACE","\n            ",912],["T_VARIABLE","$definition",913],["T_WHITESPACE"," ",913],"=",["T_WHITESPACE"," ",913],["T_STRING","array_change_key_case",913],"(",["T_VARIABLE","$definition",913],",",["T_WHITESPACE"," ",913],["T_STRING","CASE_UPPER",913],")",";",["T_WHITESPACE","\n            ",913],["T_IF","if",914],["T_WHITESPACE"," ",914],"(",["T_EMPTY","empty",914],"(",["T_VARIABLE","$definition",914],"[",["T_CONSTANT_ENCAPSED_STRING","'COMMENT'",914],"]",")",")",["T_WHITESPACE"," ",914],"{",["T_WHITESPACE","\n                ",914],["T_THROW","throw",915],["T_WHITESPACE"," ",915],["T_NEW","new",915],["T_WHITESPACE"," ",915],["T_NS_SEPARATOR","\\",915],["T_STRING","Zend_Db_Exception",915],"(",["T_CONSTANT_ENCAPSED_STRING","\"Impossible to create a column without comment.\"",915],")",";",["T_WHITESPACE","\n            ",915],"}",["T_WHITESPACE","\n            ",916],["T_IF","if",917],["T_WHITESPACE"," ",917],"(","!",["T_EMPTY","empty",917],"(",["T_VARIABLE","$definition",917],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",917],"]",")",")",["T_WHITESPACE"," ",917],"{",["T_WHITESPACE","\n                ",917],["T_VARIABLE","$primaryKey",918],["T_WHITESPACE"," ",918],"=",["T_WHITESPACE"," ",918],["T_STRING","sprintf",918],"(",["T_CONSTANT_ENCAPSED_STRING","', ADD PRIMARY KEY (%s)'",918],",",["T_WHITESPACE"," ",918],["T_VARIABLE","$this",918],["T_OBJECT_OPERATOR","->",918],["T_STRING","quoteIdentifier",918],"(",["T_VARIABLE","$columnName",918],")",")",";",["T_WHITESPACE","\n            ",918],"}",["T_WHITESPACE","\n            ",919],["T_VARIABLE","$definition",920],["T_WHITESPACE"," ",920],"=",["T_WHITESPACE"," ",920],["T_VARIABLE","$this",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","_getColumnDefinition",920],"(",["T_VARIABLE","$definition",920],")",";",["T_WHITESPACE","\n        ",920],"}",["T_WHITESPACE","\n\n        ",921],["T_VARIABLE","$sql",923],["T_WHITESPACE"," ",923],"=",["T_WHITESPACE"," ",923],["T_STRING","sprintf",923],"(",["T_WHITESPACE","\n            ",923],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s ADD COLUMN %s %s %s'",924],",",["T_WHITESPACE","\n            ",924],["T_VARIABLE","$this",925],["T_OBJECT_OPERATOR","->",925],["T_STRING","quoteIdentifier",925],"(",["T_VARIABLE","$this",925],["T_OBJECT_OPERATOR","->",925],["T_STRING","_getTableName",925],"(",["T_VARIABLE","$tableName",925],",",["T_WHITESPACE"," ",925],["T_VARIABLE","$schemaName",925],")",")",",",["T_WHITESPACE","\n            ",925],["T_VARIABLE","$this",926],["T_OBJECT_OPERATOR","->",926],["T_STRING","quoteIdentifier",926],"(",["T_VARIABLE","$columnName",926],")",",",["T_WHITESPACE","\n            ",926],["T_VARIABLE","$definition",927],",",["T_WHITESPACE","\n            ",927],["T_VARIABLE","$primaryKey",928],["T_WHITESPACE","\n        ",928],")",";",["T_WHITESPACE","\n\n        ",929],["T_VARIABLE","$result",931],["T_WHITESPACE"," ",931],"=",["T_WHITESPACE"," ",931],["T_VARIABLE","$this",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","rawQuery",931],"(",["T_VARIABLE","$sql",931],")",";",["T_WHITESPACE","\n\n        ",931],["T_VARIABLE","$this",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","resetDdlCache",933],"(",["T_VARIABLE","$tableName",933],",",["T_WHITESPACE"," ",933],["T_VARIABLE","$schemaName",933],")",";",["T_WHITESPACE","\n\n        ",933],["T_RETURN","return",935],["T_WHITESPACE"," ",935],["T_VARIABLE","$result",935],";",["T_WHITESPACE","\n    ",935],"}",["T_WHITESPACE","\n\n    ",936],["T_DOC_COMMENT","\/**\n     * Delete table column\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param string $schemaName\n     * @return true|\\Zend_Db_Statement_Pdo\n     *\/",938],["T_WHITESPACE","\n    ",945],["T_PUBLIC","public",946],["T_WHITESPACE"," ",946],["T_FUNCTION","function",946],["T_WHITESPACE"," ",946],["T_STRING","dropColumn",946],"(",["T_VARIABLE","$tableName",946],",",["T_WHITESPACE"," ",946],["T_VARIABLE","$columnName",946],",",["T_WHITESPACE"," ",946],["T_VARIABLE","$schemaName",946],["T_WHITESPACE"," ",946],"=",["T_WHITESPACE"," ",946],["T_STRING","null",946],")",["T_WHITESPACE","\n    ",946],"{",["T_WHITESPACE","\n        ",947],["T_IF","if",948],["T_WHITESPACE"," ",948],"(","!",["T_VARIABLE","$this",948],["T_OBJECT_OPERATOR","->",948],["T_STRING","tableColumnExists",948],"(",["T_VARIABLE","$tableName",948],",",["T_WHITESPACE"," ",948],["T_VARIABLE","$columnName",948],",",["T_WHITESPACE"," ",948],["T_VARIABLE","$schemaName",948],")",")",["T_WHITESPACE"," ",948],"{",["T_WHITESPACE","\n            ",948],["T_RETURN","return",949],["T_WHITESPACE"," ",949],["T_STRING","true",949],";",["T_WHITESPACE","\n        ",949],"}",["T_WHITESPACE","\n\n        ",950],["T_VARIABLE","$alterDrop",952],["T_WHITESPACE"," ",952],"=",["T_WHITESPACE"," ",952],"[","]",";",["T_WHITESPACE","\n\n        ",952],["T_VARIABLE","$foreignKeys",954],["T_WHITESPACE"," ",954],"=",["T_WHITESPACE"," ",954],["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","getForeignKeys",954],"(",["T_VARIABLE","$tableName",954],",",["T_WHITESPACE"," ",954],["T_VARIABLE","$schemaName",954],")",";",["T_WHITESPACE","\n        ",954],["T_FOREACH","foreach",955],["T_WHITESPACE"," ",955],"(",["T_VARIABLE","$foreignKeys",955],["T_WHITESPACE"," ",955],["T_AS","as",955],["T_WHITESPACE"," ",955],["T_VARIABLE","$fkProp",955],")",["T_WHITESPACE"," ",955],"{",["T_WHITESPACE","\n            ",955],["T_IF","if",956],["T_WHITESPACE"," ",956],"(",["T_VARIABLE","$fkProp",956],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",956],"]",["T_WHITESPACE"," ",956],["T_IS_EQUAL","==",956],["T_WHITESPACE"," ",956],["T_VARIABLE","$columnName",956],")",["T_WHITESPACE"," ",956],"{",["T_WHITESPACE","\n                ",956],["T_VARIABLE","$alterDrop",957],"[","]",["T_WHITESPACE"," ",957],"=",["T_WHITESPACE"," ",957],["T_CONSTANT_ENCAPSED_STRING","'DROP FOREIGN KEY '",957],["T_WHITESPACE"," ",957],".",["T_WHITESPACE"," ",957],["T_VARIABLE","$this",957],["T_OBJECT_OPERATOR","->",957],["T_STRING","quoteIdentifier",957],"(",["T_VARIABLE","$fkProp",957],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",957],"]",")",";",["T_WHITESPACE","\n            ",957],"}",["T_WHITESPACE","\n        ",958],"}",["T_WHITESPACE","\n\n        ",959],["T_COMMENT","\/* drop index that after column removal would coincide with the existing index by indexed columns *\/",961],["T_WHITESPACE","\n        ",961],["T_FOREACH","foreach",962],["T_WHITESPACE"," ",962],"(",["T_VARIABLE","$this",962],["T_OBJECT_OPERATOR","->",962],["T_STRING","getIndexList",962],"(",["T_VARIABLE","$tableName",962],",",["T_WHITESPACE"," ",962],["T_VARIABLE","$schemaName",962],")",["T_WHITESPACE"," ",962],["T_AS","as",962],["T_WHITESPACE"," ",962],["T_VARIABLE","$idxData",962],")",["T_WHITESPACE"," ",962],"{",["T_WHITESPACE","\n            ",962],["T_VARIABLE","$idxColumns",963],["T_WHITESPACE"," ",963],"=",["T_WHITESPACE"," ",963],["T_VARIABLE","$idxData",963],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",963],"]",";",["T_WHITESPACE","\n            ",963],["T_VARIABLE","$idxColumnKey",964],["T_WHITESPACE"," ",964],"=",["T_WHITESPACE"," ",964],["T_STRING","array_search",964],"(",["T_VARIABLE","$columnName",964],",",["T_WHITESPACE"," ",964],["T_VARIABLE","$idxColumns",964],")",";",["T_WHITESPACE","\n            ",964],["T_IF","if",965],["T_WHITESPACE"," ",965],"(",["T_VARIABLE","$idxColumnKey",965],["T_WHITESPACE"," ",965],["T_IS_NOT_IDENTICAL","!==",965],["T_WHITESPACE"," ",965],["T_STRING","false",965],")",["T_WHITESPACE"," ",965],"{",["T_WHITESPACE","\n                ",965],["T_UNSET","unset",966],"(",["T_VARIABLE","$idxColumns",966],"[",["T_VARIABLE","$idxColumnKey",966],"]",")",";",["T_WHITESPACE","\n                ",966],["T_IF","if",967],["T_WHITESPACE"," ",967],"(",["T_VARIABLE","$idxColumns",967],["T_WHITESPACE"," ",967],["T_BOOLEAN_AND","&&",967],["T_WHITESPACE"," ",967],["T_VARIABLE","$this",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","_getIndexByColumns",967],"(",["T_VARIABLE","$tableName",967],",",["T_WHITESPACE"," ",967],["T_VARIABLE","$idxColumns",967],",",["T_WHITESPACE"," ",967],["T_VARIABLE","$schemaName",967],")",")",["T_WHITESPACE"," ",967],"{",["T_WHITESPACE","\n                    ",967],["T_VARIABLE","$this",968],["T_OBJECT_OPERATOR","->",968],["T_STRING","dropIndex",968],"(",["T_VARIABLE","$tableName",968],",",["T_WHITESPACE"," ",968],["T_VARIABLE","$idxData",968],"[",["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",968],"]",",",["T_WHITESPACE"," ",968],["T_VARIABLE","$schemaName",968],")",";",["T_WHITESPACE","\n                ",968],"}",["T_WHITESPACE","\n            ",969],"}",["T_WHITESPACE","\n        ",970],"}",["T_WHITESPACE","\n\n        ",971],["T_VARIABLE","$alterDrop",973],"[","]",["T_WHITESPACE"," ",973],"=",["T_WHITESPACE"," ",973],["T_CONSTANT_ENCAPSED_STRING","'DROP COLUMN '",973],["T_WHITESPACE"," ",973],".",["T_WHITESPACE"," ",973],["T_VARIABLE","$this",973],["T_OBJECT_OPERATOR","->",973],["T_STRING","quoteIdentifier",973],"(",["T_VARIABLE","$columnName",973],")",";",["T_WHITESPACE","\n        ",973],["T_VARIABLE","$sql",974],["T_WHITESPACE"," ",974],"=",["T_WHITESPACE"," ",974],["T_STRING","sprintf",974],"(",["T_WHITESPACE","\n            ",974],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s %s'",975],",",["T_WHITESPACE","\n            ",975],["T_VARIABLE","$this",976],["T_OBJECT_OPERATOR","->",976],["T_STRING","quoteIdentifier",976],"(",["T_VARIABLE","$this",976],["T_OBJECT_OPERATOR","->",976],["T_STRING","_getTableName",976],"(",["T_VARIABLE","$tableName",976],",",["T_WHITESPACE"," ",976],["T_VARIABLE","$schemaName",976],")",")",",",["T_WHITESPACE","\n            ",976],["T_STRING","implode",977],"(",["T_CONSTANT_ENCAPSED_STRING","', '",977],",",["T_WHITESPACE"," ",977],["T_VARIABLE","$alterDrop",977],")",["T_WHITESPACE","\n        ",977],")",";",["T_WHITESPACE","\n\n        ",978],["T_VARIABLE","$result",980],["T_WHITESPACE"," ",980],"=",["T_WHITESPACE"," ",980],["T_VARIABLE","$this",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","rawQuery",980],"(",["T_VARIABLE","$sql",980],")",";",["T_WHITESPACE","\n        ",980],["T_VARIABLE","$this",981],["T_OBJECT_OPERATOR","->",981],["T_STRING","resetDdlCache",981],"(",["T_VARIABLE","$tableName",981],",",["T_WHITESPACE"," ",981],["T_VARIABLE","$schemaName",981],")",";",["T_WHITESPACE","\n\n        ",981],["T_RETURN","return",983],["T_WHITESPACE"," ",983],["T_VARIABLE","$result",983],";",["T_WHITESPACE","\n    ",983],"}",["T_WHITESPACE","\n\n    ",984],["T_DOC_COMMENT","\/**\n     * Retrieve index information by indexed columns or return NULL, if there is no index for a column list\n     *\n     * @param string $tableName\n     * @param array $columns\n     * @param string|null $schemaName\n     * @return array|null\n     *\/",986],["T_WHITESPACE","\n    ",993],["T_PROTECTED","protected",994],["T_WHITESPACE"," ",994],["T_FUNCTION","function",994],["T_WHITESPACE"," ",994],["T_STRING","_getIndexByColumns",994],"(",["T_VARIABLE","$tableName",994],",",["T_WHITESPACE"," ",994],["T_ARRAY","array",994],["T_WHITESPACE"," ",994],["T_VARIABLE","$columns",994],",",["T_WHITESPACE"," ",994],["T_VARIABLE","$schemaName",994],")",["T_WHITESPACE","\n    ",994],"{",["T_WHITESPACE","\n        ",995],["T_FOREACH","foreach",996],["T_WHITESPACE"," ",996],"(",["T_VARIABLE","$this",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","getIndexList",996],"(",["T_VARIABLE","$tableName",996],",",["T_WHITESPACE"," ",996],["T_VARIABLE","$schemaName",996],")",["T_WHITESPACE"," ",996],["T_AS","as",996],["T_WHITESPACE"," ",996],["T_VARIABLE","$idxData",996],")",["T_WHITESPACE"," ",996],"{",["T_WHITESPACE","\n            ",996],["T_IF","if",997],["T_WHITESPACE"," ",997],"(",["T_VARIABLE","$idxData",997],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",997],"]",["T_WHITESPACE"," ",997],["T_IS_IDENTICAL","===",997],["T_WHITESPACE"," ",997],["T_VARIABLE","$columns",997],")",["T_WHITESPACE"," ",997],"{",["T_WHITESPACE","\n                ",997],["T_RETURN","return",998],["T_WHITESPACE"," ",998],["T_VARIABLE","$idxData",998],";",["T_WHITESPACE","\n            ",998],"}",["T_WHITESPACE","\n        ",999],"}",["T_WHITESPACE","\n        ",1000],["T_RETURN","return",1001],["T_WHITESPACE"," ",1001],["T_STRING","null",1001],";",["T_WHITESPACE","\n    ",1001],"}",["T_WHITESPACE","\n\n    ",1002],["T_DOC_COMMENT","\/**\n     * Change the column name and definition\n     *\n     * For change definition of column - use modifyColumn\n     *\n     * @param string $tableName\n     * @param string $oldColumnName\n     * @param string $newColumnName\n     * @param array $definition\n     * @param boolean $flushData        flush table statistic\n     * @param string $schemaName\n     * @return \\Zend_Db_Statement_Pdo\n     * @throws \\Zend_Db_Exception\n     *\/",1004],["T_WHITESPACE","\n    ",1017],["T_PUBLIC","public",1018],["T_WHITESPACE"," ",1018],["T_FUNCTION","function",1018],["T_WHITESPACE"," ",1018],["T_STRING","changeColumn",1018],"(",["T_WHITESPACE","\n        ",1018],["T_VARIABLE","$tableName",1019],",",["T_WHITESPACE","\n        ",1019],["T_VARIABLE","$oldColumnName",1020],",",["T_WHITESPACE","\n        ",1020],["T_VARIABLE","$newColumnName",1021],",",["T_WHITESPACE","\n        ",1021],["T_VARIABLE","$definition",1022],",",["T_WHITESPACE","\n        ",1022],["T_VARIABLE","$flushData",1023],["T_WHITESPACE"," ",1023],"=",["T_WHITESPACE"," ",1023],["T_STRING","false",1023],",",["T_WHITESPACE","\n        ",1023],["T_VARIABLE","$schemaName",1024],["T_WHITESPACE"," ",1024],"=",["T_WHITESPACE"," ",1024],["T_STRING","null",1024],["T_WHITESPACE","\n    ",1024],")",["T_WHITESPACE"," ",1025],"{",["T_WHITESPACE","\n        ",1025],["T_IF","if",1026],["T_WHITESPACE"," ",1026],"(","!",["T_VARIABLE","$this",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","tableColumnExists",1026],"(",["T_VARIABLE","$tableName",1026],",",["T_WHITESPACE"," ",1026],["T_VARIABLE","$oldColumnName",1026],",",["T_WHITESPACE"," ",1026],["T_VARIABLE","$schemaName",1026],")",")",["T_WHITESPACE"," ",1026],"{",["T_WHITESPACE","\n            ",1026],["T_THROW","throw",1027],["T_WHITESPACE"," ",1027],["T_NEW","new",1027],["T_WHITESPACE"," ",1027],["T_NS_SEPARATOR","\\",1027],["T_STRING","Zend_Db_Exception",1027],"(",["T_WHITESPACE","\n                ",1027],["T_STRING","sprintf",1028],"(",["T_WHITESPACE","\n                    ",1028],["T_CONSTANT_ENCAPSED_STRING","'Column \"%s\" does not exist in table \"%s\".'",1029],",",["T_WHITESPACE","\n                    ",1029],["T_VARIABLE","$oldColumnName",1030],",",["T_WHITESPACE","\n                    ",1030],["T_VARIABLE","$tableName",1031],["T_WHITESPACE","\n                ",1031],")",["T_WHITESPACE","\n            ",1032],")",";",["T_WHITESPACE","\n        ",1033],"}",["T_WHITESPACE","\n\n        ",1034],["T_IF","if",1036],["T_WHITESPACE"," ",1036],"(",["T_STRING","is_array",1036],"(",["T_VARIABLE","$definition",1036],")",")",["T_WHITESPACE"," ",1036],"{",["T_WHITESPACE","\n            ",1036],["T_VARIABLE","$definition",1037],["T_WHITESPACE"," ",1037],"=",["T_WHITESPACE"," ",1037],["T_VARIABLE","$this",1037],["T_OBJECT_OPERATOR","->",1037],["T_STRING","_getColumnDefinition",1037],"(",["T_VARIABLE","$definition",1037],")",";",["T_WHITESPACE","\n        ",1037],"}",["T_WHITESPACE","\n\n        ",1038],["T_VARIABLE","$sql",1040],["T_WHITESPACE"," ",1040],"=",["T_WHITESPACE"," ",1040],["T_STRING","sprintf",1040],"(",["T_WHITESPACE","\n            ",1040],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s CHANGE COLUMN %s %s %s'",1041],",",["T_WHITESPACE","\n            ",1041],["T_VARIABLE","$this",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","quoteIdentifier",1042],"(",["T_VARIABLE","$tableName",1042],")",",",["T_WHITESPACE","\n            ",1042],["T_VARIABLE","$this",1043],["T_OBJECT_OPERATOR","->",1043],["T_STRING","quoteIdentifier",1043],"(",["T_VARIABLE","$oldColumnName",1043],")",",",["T_WHITESPACE","\n            ",1043],["T_VARIABLE","$this",1044],["T_OBJECT_OPERATOR","->",1044],["T_STRING","quoteIdentifier",1044],"(",["T_VARIABLE","$newColumnName",1044],")",",",["T_WHITESPACE","\n            ",1044],["T_VARIABLE","$definition",1045],["T_WHITESPACE","\n        ",1045],")",";",["T_WHITESPACE","\n\n        ",1046],["T_VARIABLE","$result",1048],["T_WHITESPACE"," ",1048],"=",["T_WHITESPACE"," ",1048],["T_VARIABLE","$this",1048],["T_OBJECT_OPERATOR","->",1048],["T_STRING","rawQuery",1048],"(",["T_VARIABLE","$sql",1048],")",";",["T_WHITESPACE","\n\n        ",1048],["T_IF","if",1050],["T_WHITESPACE"," ",1050],"(",["T_VARIABLE","$flushData",1050],")",["T_WHITESPACE"," ",1050],"{",["T_WHITESPACE","\n            ",1050],["T_VARIABLE","$this",1051],["T_OBJECT_OPERATOR","->",1051],["T_STRING","showTableStatus",1051],"(",["T_VARIABLE","$tableName",1051],",",["T_WHITESPACE"," ",1051],["T_VARIABLE","$schemaName",1051],")",";",["T_WHITESPACE","\n        ",1051],"}",["T_WHITESPACE","\n        ",1052],["T_VARIABLE","$this",1053],["T_OBJECT_OPERATOR","->",1053],["T_STRING","resetDdlCache",1053],"(",["T_VARIABLE","$tableName",1053],",",["T_WHITESPACE"," ",1053],["T_VARIABLE","$schemaName",1053],")",";",["T_WHITESPACE","\n\n        ",1053],["T_RETURN","return",1055],["T_WHITESPACE"," ",1055],["T_VARIABLE","$result",1055],";",["T_WHITESPACE","\n    ",1055],"}",["T_WHITESPACE","\n\n    ",1056],["T_DOC_COMMENT","\/**\n     * Modify the column definition\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param array|string $definition\n     * @param boolean $flushData\n     * @param string $schemaName\n     * @return $this\n     * @throws \\Zend_Db_Exception\n     *\/",1058],["T_WHITESPACE","\n    ",1068],["T_PUBLIC","public",1069],["T_WHITESPACE"," ",1069],["T_FUNCTION","function",1069],["T_WHITESPACE"," ",1069],["T_STRING","modifyColumn",1069],"(",["T_VARIABLE","$tableName",1069],",",["T_WHITESPACE"," ",1069],["T_VARIABLE","$columnName",1069],",",["T_WHITESPACE"," ",1069],["T_VARIABLE","$definition",1069],",",["T_WHITESPACE"," ",1069],["T_VARIABLE","$flushData",1069],["T_WHITESPACE"," ",1069],"=",["T_WHITESPACE"," ",1069],["T_STRING","false",1069],",",["T_WHITESPACE"," ",1069],["T_VARIABLE","$schemaName",1069],["T_WHITESPACE"," ",1069],"=",["T_WHITESPACE"," ",1069],["T_STRING","null",1069],")",["T_WHITESPACE","\n    ",1069],"{",["T_WHITESPACE","\n        ",1070],["T_IF","if",1071],["T_WHITESPACE"," ",1071],"(","!",["T_VARIABLE","$this",1071],["T_OBJECT_OPERATOR","->",1071],["T_STRING","tableColumnExists",1071],"(",["T_VARIABLE","$tableName",1071],",",["T_WHITESPACE"," ",1071],["T_VARIABLE","$columnName",1071],",",["T_WHITESPACE"," ",1071],["T_VARIABLE","$schemaName",1071],")",")",["T_WHITESPACE"," ",1071],"{",["T_WHITESPACE","\n            ",1071],["T_THROW","throw",1072],["T_WHITESPACE"," ",1072],["T_NEW","new",1072],["T_WHITESPACE"," ",1072],["T_NS_SEPARATOR","\\",1072],["T_STRING","Zend_Db_Exception",1072],"(",["T_STRING","sprintf",1072],"(",["T_CONSTANT_ENCAPSED_STRING","'Column \"%s\" does not exist in table \"%s\".'",1072],",",["T_WHITESPACE"," ",1072],["T_VARIABLE","$columnName",1072],",",["T_WHITESPACE"," ",1072],["T_VARIABLE","$tableName",1072],")",")",";",["T_WHITESPACE","\n        ",1072],"}",["T_WHITESPACE","\n        ",1073],["T_IF","if",1074],["T_WHITESPACE"," ",1074],"(",["T_STRING","is_array",1074],"(",["T_VARIABLE","$definition",1074],")",")",["T_WHITESPACE"," ",1074],"{",["T_WHITESPACE","\n            ",1074],["T_VARIABLE","$definition",1075],["T_WHITESPACE"," ",1075],"=",["T_WHITESPACE"," ",1075],["T_VARIABLE","$this",1075],["T_OBJECT_OPERATOR","->",1075],["T_STRING","_getColumnDefinition",1075],"(",["T_VARIABLE","$definition",1075],")",";",["T_WHITESPACE","\n        ",1075],"}",["T_WHITESPACE","\n\n        ",1076],["T_VARIABLE","$sql",1078],["T_WHITESPACE"," ",1078],"=",["T_WHITESPACE"," ",1078],["T_STRING","sprintf",1078],"(",["T_WHITESPACE","\n            ",1078],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s MODIFY COLUMN %s %s'",1079],",",["T_WHITESPACE","\n            ",1079],["T_VARIABLE","$this",1080],["T_OBJECT_OPERATOR","->",1080],["T_STRING","quoteIdentifier",1080],"(",["T_VARIABLE","$tableName",1080],")",",",["T_WHITESPACE","\n            ",1080],["T_VARIABLE","$this",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","quoteIdentifier",1081],"(",["T_VARIABLE","$columnName",1081],")",",",["T_WHITESPACE","\n            ",1081],["T_VARIABLE","$definition",1082],["T_WHITESPACE","\n        ",1082],")",";",["T_WHITESPACE","\n\n        ",1083],["T_VARIABLE","$this",1085],["T_OBJECT_OPERATOR","->",1085],["T_STRING","rawQuery",1085],"(",["T_VARIABLE","$sql",1085],")",";",["T_WHITESPACE","\n        ",1085],["T_IF","if",1086],["T_WHITESPACE"," ",1086],"(",["T_VARIABLE","$flushData",1086],")",["T_WHITESPACE"," ",1086],"{",["T_WHITESPACE","\n            ",1086],["T_VARIABLE","$this",1087],["T_OBJECT_OPERATOR","->",1087],["T_STRING","showTableStatus",1087],"(",["T_VARIABLE","$tableName",1087],",",["T_WHITESPACE"," ",1087],["T_VARIABLE","$schemaName",1087],")",";",["T_WHITESPACE","\n        ",1087],"}",["T_WHITESPACE","\n        ",1088],["T_VARIABLE","$this",1089],["T_OBJECT_OPERATOR","->",1089],["T_STRING","resetDdlCache",1089],"(",["T_VARIABLE","$tableName",1089],",",["T_WHITESPACE"," ",1089],["T_VARIABLE","$schemaName",1089],")",";",["T_WHITESPACE","\n\n        ",1089],["T_RETURN","return",1091],["T_WHITESPACE"," ",1091],["T_VARIABLE","$this",1091],";",["T_WHITESPACE","\n    ",1091],"}",["T_WHITESPACE","\n\n    ",1092],["T_DOC_COMMENT","\/**\n     * Show table status\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return mixed\n     *\/",1094],["T_WHITESPACE","\n    ",1100],["T_PUBLIC","public",1101],["T_WHITESPACE"," ",1101],["T_FUNCTION","function",1101],["T_WHITESPACE"," ",1101],["T_STRING","showTableStatus",1101],"(",["T_VARIABLE","$tableName",1101],",",["T_WHITESPACE"," ",1101],["T_VARIABLE","$schemaName",1101],["T_WHITESPACE"," ",1101],"=",["T_WHITESPACE"," ",1101],["T_STRING","null",1101],")",["T_WHITESPACE","\n    ",1101],"{",["T_WHITESPACE","\n        ",1102],["T_VARIABLE","$fromDbName",1103],["T_WHITESPACE"," ",1103],"=",["T_WHITESPACE"," ",1103],["T_STRING","null",1103],";",["T_WHITESPACE","\n        ",1103],["T_IF","if",1104],["T_WHITESPACE"," ",1104],"(",["T_VARIABLE","$schemaName",1104],["T_WHITESPACE"," ",1104],["T_IS_NOT_IDENTICAL","!==",1104],["T_WHITESPACE"," ",1104],["T_STRING","null",1104],")",["T_WHITESPACE"," ",1104],"{",["T_WHITESPACE","\n            ",1104],["T_VARIABLE","$fromDbName",1105],["T_WHITESPACE"," ",1105],"=",["T_WHITESPACE"," ",1105],["T_CONSTANT_ENCAPSED_STRING","' FROM '",1105],["T_WHITESPACE"," ",1105],".",["T_WHITESPACE"," ",1105],["T_VARIABLE","$this",1105],["T_OBJECT_OPERATOR","->",1105],["T_STRING","quoteIdentifier",1105],"(",["T_VARIABLE","$schemaName",1105],")",";",["T_WHITESPACE","\n        ",1105],"}",["T_WHITESPACE","\n        ",1106],["T_VARIABLE","$query",1107],["T_WHITESPACE"," ",1107],"=",["T_WHITESPACE"," ",1107],["T_STRING","sprintf",1107],"(",["T_CONSTANT_ENCAPSED_STRING","'SHOW TABLE STATUS%s LIKE %s'",1107],",",["T_WHITESPACE"," ",1107],["T_VARIABLE","$fromDbName",1107],",",["T_WHITESPACE"," ",1107],["T_VARIABLE","$this",1107],["T_OBJECT_OPERATOR","->",1107],["T_STRING","quote",1107],"(",["T_VARIABLE","$tableName",1107],")",")",";",["T_WHITESPACE","\n\n        ",1107],["T_RETURN","return",1109],["T_WHITESPACE"," ",1109],["T_VARIABLE","$this",1109],["T_OBJECT_OPERATOR","->",1109],["T_STRING","rawFetchRow",1109],"(",["T_VARIABLE","$query",1109],")",";",["T_WHITESPACE","\n    ",1109],"}",["T_WHITESPACE","\n\n    ",1110],["T_DOC_COMMENT","\/**\n     * Retrieve Create Table SQL\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return string\n     *\/",1112],["T_WHITESPACE","\n    ",1118],["T_PUBLIC","public",1119],["T_WHITESPACE"," ",1119],["T_FUNCTION","function",1119],["T_WHITESPACE"," ",1119],["T_STRING","getCreateTable",1119],"(",["T_VARIABLE","$tableName",1119],",",["T_WHITESPACE"," ",1119],["T_VARIABLE","$schemaName",1119],["T_WHITESPACE"," ",1119],"=",["T_WHITESPACE"," ",1119],["T_STRING","null",1119],")",["T_WHITESPACE","\n    ",1119],"{",["T_WHITESPACE","\n        ",1120],["T_VARIABLE","$cacheKey",1121],["T_WHITESPACE"," ",1121],"=",["T_WHITESPACE"," ",1121],["T_VARIABLE","$this",1121],["T_OBJECT_OPERATOR","->",1121],["T_STRING","_getTableName",1121],"(",["T_VARIABLE","$tableName",1121],",",["T_WHITESPACE"," ",1121],["T_VARIABLE","$schemaName",1121],")",";",["T_WHITESPACE","\n        ",1121],["T_VARIABLE","$ddl",1122],["T_WHITESPACE"," ",1122],"=",["T_WHITESPACE"," ",1122],["T_VARIABLE","$this",1122],["T_OBJECT_OPERATOR","->",1122],["T_STRING","loadDdlCache",1122],"(",["T_VARIABLE","$cacheKey",1122],",",["T_WHITESPACE"," ",1122],["T_STRING","self",1122],["T_DOUBLE_COLON","::",1122],["T_STRING","DDL_CREATE",1122],")",";",["T_WHITESPACE","\n        ",1122],["T_IF","if",1123],["T_WHITESPACE"," ",1123],"(",["T_VARIABLE","$ddl",1123],["T_WHITESPACE"," ",1123],["T_IS_IDENTICAL","===",1123],["T_WHITESPACE"," ",1123],["T_STRING","false",1123],")",["T_WHITESPACE"," ",1123],"{",["T_WHITESPACE","\n            ",1123],["T_VARIABLE","$sql",1124],["T_WHITESPACE"," ",1124],"=",["T_WHITESPACE"," ",1124],["T_CONSTANT_ENCAPSED_STRING","'SHOW CREATE TABLE '",1124],["T_WHITESPACE"," ",1124],".",["T_WHITESPACE"," ",1124],["T_VARIABLE","$this",1124],["T_OBJECT_OPERATOR","->",1124],["T_STRING","quoteIdentifier",1124],"(",["T_VARIABLE","$this",1124],["T_OBJECT_OPERATOR","->",1124],["T_STRING","_getTableName",1124],"(",["T_VARIABLE","$tableName",1124],",",["T_WHITESPACE"," ",1124],["T_VARIABLE","$schemaName",1124],")",")",";",["T_WHITESPACE","\n            ",1124],["T_VARIABLE","$ddl",1125],["T_WHITESPACE"," ",1125],"=",["T_WHITESPACE"," ",1125],["T_VARIABLE","$this",1125],["T_OBJECT_OPERATOR","->",1125],["T_STRING","rawFetchRow",1125],"(",["T_VARIABLE","$sql",1125],",",["T_WHITESPACE"," ",1125],["T_CONSTANT_ENCAPSED_STRING","'Create Table'",1125],")",";",["T_WHITESPACE","\n            ",1125],["T_VARIABLE","$this",1126],["T_OBJECT_OPERATOR","->",1126],["T_STRING","saveDdlCache",1126],"(",["T_VARIABLE","$cacheKey",1126],",",["T_WHITESPACE"," ",1126],["T_STRING","self",1126],["T_DOUBLE_COLON","::",1126],["T_STRING","DDL_CREATE",1126],",",["T_WHITESPACE"," ",1126],["T_VARIABLE","$ddl",1126],")",";",["T_WHITESPACE","\n        ",1126],"}",["T_WHITESPACE","\n\n        ",1127],["T_RETURN","return",1129],["T_WHITESPACE"," ",1129],["T_VARIABLE","$ddl",1129],";",["T_WHITESPACE","\n    ",1129],"}",["T_WHITESPACE","\n\n    ",1130],["T_DOC_COMMENT","\/**\n     * Retrieve the foreign keys descriptions for a table.\n     *\n     * The return value is an associative array keyed by the UPPERCASE foreign key,\n     * as returned by the RDBMS.\n     *\n     * The value of each array element is an associative array\n     * with the following keys:\n     *\n     * FK_NAME          => string; original foreign key name\n     * SCHEMA_NAME      => string; name of database or schema\n     * TABLE_NAME       => string;\n     * COLUMN_NAME      => string; column name\n     * REF_SCHEMA_NAME  => string; name of reference database or schema\n     * REF_TABLE_NAME   => string; reference table name\n     * REF_COLUMN_NAME  => string; reference column name\n     * ON_DELETE        => string; action type on delete row\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return array\n     *\/",1132],["T_WHITESPACE","\n    ",1153],["T_PUBLIC","public",1154],["T_WHITESPACE"," ",1154],["T_FUNCTION","function",1154],["T_WHITESPACE"," ",1154],["T_STRING","getForeignKeys",1154],"(",["T_VARIABLE","$tableName",1154],",",["T_WHITESPACE"," ",1154],["T_VARIABLE","$schemaName",1154],["T_WHITESPACE"," ",1154],"=",["T_WHITESPACE"," ",1154],["T_STRING","null",1154],")",["T_WHITESPACE","\n    ",1154],"{",["T_WHITESPACE","\n        ",1155],["T_VARIABLE","$cacheKey",1156],["T_WHITESPACE"," ",1156],"=",["T_WHITESPACE"," ",1156],["T_VARIABLE","$this",1156],["T_OBJECT_OPERATOR","->",1156],["T_STRING","_getTableName",1156],"(",["T_VARIABLE","$tableName",1156],",",["T_WHITESPACE"," ",1156],["T_VARIABLE","$schemaName",1156],")",";",["T_WHITESPACE","\n        ",1156],["T_VARIABLE","$ddl",1157],["T_WHITESPACE"," ",1157],"=",["T_WHITESPACE"," ",1157],["T_VARIABLE","$this",1157],["T_OBJECT_OPERATOR","->",1157],["T_STRING","loadDdlCache",1157],"(",["T_VARIABLE","$cacheKey",1157],",",["T_WHITESPACE"," ",1157],["T_STRING","self",1157],["T_DOUBLE_COLON","::",1157],["T_STRING","DDL_FOREIGN_KEY",1157],")",";",["T_WHITESPACE","\n        ",1157],["T_IF","if",1158],["T_WHITESPACE"," ",1158],"(",["T_VARIABLE","$ddl",1158],["T_WHITESPACE"," ",1158],["T_IS_IDENTICAL","===",1158],["T_WHITESPACE"," ",1158],["T_STRING","false",1158],")",["T_WHITESPACE"," ",1158],"{",["T_WHITESPACE","\n            ",1158],["T_VARIABLE","$ddl",1159],["T_WHITESPACE"," ",1159],"=",["T_WHITESPACE"," ",1159],"[","]",";",["T_WHITESPACE","\n            ",1159],["T_VARIABLE","$createSql",1160],["T_WHITESPACE"," ",1160],"=",["T_WHITESPACE"," ",1160],["T_VARIABLE","$this",1160],["T_OBJECT_OPERATOR","->",1160],["T_STRING","getCreateTable",1160],"(",["T_VARIABLE","$tableName",1160],",",["T_WHITESPACE"," ",1160],["T_VARIABLE","$schemaName",1160],")",";",["T_WHITESPACE","\n\n            ",1160],["T_COMMENT","\/\/ collect CONSTRAINT\n",1162],["T_WHITESPACE","            ",1163],["T_VARIABLE","$regExp",1163],["T_WHITESPACE","  ",1163],"=",["T_WHITESPACE"," ",1163],["T_CONSTANT_ENCAPSED_STRING","'#,\\s+CONSTRAINT `([^`]*)` FOREIGN KEY ?\\(`([^`]*)`\\) '",1163],["T_WHITESPACE","\n                ",1163],".",["T_WHITESPACE"," ",1164],["T_CONSTANT_ENCAPSED_STRING","'REFERENCES (`([^`]*)`\\.)?`([^`]*)` \\(`([^`]*)`\\)'",1164],["T_WHITESPACE","\n                ",1164],".",["T_WHITESPACE"," ",1165],["T_CONSTANT_ENCAPSED_STRING","'( ON DELETE (RESTRICT|CASCADE|SET NULL|NO ACTION))?'",1165],["T_WHITESPACE","\n                ",1165],".",["T_WHITESPACE"," ",1166],["T_CONSTANT_ENCAPSED_STRING","'( ON UPDATE (RESTRICT|CASCADE|SET NULL|NO ACTION))?#'",1166],";",["T_WHITESPACE","\n            ",1166],["T_VARIABLE","$matches",1167],["T_WHITESPACE"," ",1167],"=",["T_WHITESPACE"," ",1167],"[","]",";",["T_WHITESPACE","\n            ",1167],["T_STRING","preg_match_all",1168],"(",["T_VARIABLE","$regExp",1168],",",["T_WHITESPACE"," ",1168],["T_VARIABLE","$createSql",1168],",",["T_WHITESPACE"," ",1168],["T_VARIABLE","$matches",1168],",",["T_WHITESPACE"," ",1168],["T_STRING","PREG_SET_ORDER",1168],")",";",["T_WHITESPACE","\n            ",1168],["T_FOREACH","foreach",1169],["T_WHITESPACE"," ",1169],"(",["T_VARIABLE","$matches",1169],["T_WHITESPACE"," ",1169],["T_AS","as",1169],["T_WHITESPACE"," ",1169],["T_VARIABLE","$match",1169],")",["T_WHITESPACE"," ",1169],"{",["T_WHITESPACE","\n                ",1169],["T_VARIABLE","$ddl",1170],"[",["T_STRING","strtoupper",1170],"(",["T_VARIABLE","$match",1170],"[",["T_LNUMBER","1",1170],"]",")","]",["T_WHITESPACE"," ",1170],"=",["T_WHITESPACE"," ",1170],"[",["T_WHITESPACE","\n                    ",1170],["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",1171],["T_WHITESPACE","           ",1171],["T_DOUBLE_ARROW","=>",1171],["T_WHITESPACE"," ",1171],["T_VARIABLE","$match",1171],"[",["T_LNUMBER","1",1171],"]",",",["T_WHITESPACE","\n                    ",1171],["T_CONSTANT_ENCAPSED_STRING","'SCHEMA_NAME'",1172],["T_WHITESPACE","       ",1172],["T_DOUBLE_ARROW","=>",1172],["T_WHITESPACE"," ",1172],["T_VARIABLE","$schemaName",1172],",",["T_WHITESPACE","\n                    ",1172],["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",1173],["T_WHITESPACE","        ",1173],["T_DOUBLE_ARROW","=>",1173],["T_WHITESPACE"," ",1173],["T_VARIABLE","$tableName",1173],",",["T_WHITESPACE","\n                    ",1173],["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1174],["T_WHITESPACE","       ",1174],["T_DOUBLE_ARROW","=>",1174],["T_WHITESPACE"," ",1174],["T_VARIABLE","$match",1174],"[",["T_LNUMBER","2",1174],"]",",",["T_WHITESPACE","\n                    ",1174],["T_CONSTANT_ENCAPSED_STRING","'REF_SHEMA_NAME'",1175],["T_WHITESPACE","    ",1175],["T_DOUBLE_ARROW","=>",1175],["T_WHITESPACE"," ",1175],["T_ISSET","isset",1175],"(",["T_VARIABLE","$match",1175],"[",["T_LNUMBER","4",1175],"]",")",["T_WHITESPACE"," ",1175],"?",["T_WHITESPACE"," ",1175],["T_VARIABLE","$match",1175],"[",["T_LNUMBER","4",1175],"]",["T_WHITESPACE"," ",1175],":",["T_WHITESPACE"," ",1175],["T_VARIABLE","$schemaName",1175],",",["T_WHITESPACE","\n                    ",1175],["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1176],["T_WHITESPACE","    ",1176],["T_DOUBLE_ARROW","=>",1176],["T_WHITESPACE"," ",1176],["T_VARIABLE","$match",1176],"[",["T_LNUMBER","5",1176],"]",",",["T_WHITESPACE","\n                    ",1176],["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1177],["T_WHITESPACE","   ",1177],["T_DOUBLE_ARROW","=>",1177],["T_WHITESPACE"," ",1177],["T_VARIABLE","$match",1177],"[",["T_LNUMBER","6",1177],"]",",",["T_WHITESPACE","\n                    ",1177],["T_CONSTANT_ENCAPSED_STRING","'ON_DELETE'",1178],["T_WHITESPACE","         ",1178],["T_DOUBLE_ARROW","=>",1178],["T_WHITESPACE"," ",1178],["T_ISSET","isset",1178],"(",["T_VARIABLE","$match",1178],"[",["T_LNUMBER","7",1178],"]",")",["T_WHITESPACE"," ",1178],"?",["T_WHITESPACE"," ",1178],["T_VARIABLE","$match",1178],"[",["T_LNUMBER","8",1178],"]",["T_WHITESPACE"," ",1178],":",["T_WHITESPACE"," ",1178],["T_CONSTANT_ENCAPSED_STRING","''",1178],["T_WHITESPACE","\n                ",1178],"]",";",["T_WHITESPACE","\n            ",1179],"}",["T_WHITESPACE","\n\n            ",1180],["T_VARIABLE","$this",1182],["T_OBJECT_OPERATOR","->",1182],["T_STRING","saveDdlCache",1182],"(",["T_VARIABLE","$cacheKey",1182],",",["T_WHITESPACE"," ",1182],["T_STRING","self",1182],["T_DOUBLE_COLON","::",1182],["T_STRING","DDL_FOREIGN_KEY",1182],",",["T_WHITESPACE"," ",1182],["T_VARIABLE","$ddl",1182],")",";",["T_WHITESPACE","\n        ",1182],"}",["T_WHITESPACE","\n\n        ",1183],["T_RETURN","return",1185],["T_WHITESPACE"," ",1185],["T_VARIABLE","$ddl",1185],";",["T_WHITESPACE","\n    ",1185],"}",["T_WHITESPACE","\n\n    ",1186],["T_DOC_COMMENT","\/**\n     * Retrieve the foreign keys tree for all tables\n     *\n     * @return array\n     *\/",1188],["T_WHITESPACE","\n    ",1192],["T_PUBLIC","public",1193],["T_WHITESPACE"," ",1193],["T_FUNCTION","function",1193],["T_WHITESPACE"," ",1193],["T_STRING","getForeignKeysTree",1193],"(",")",["T_WHITESPACE","\n    ",1193],"{",["T_WHITESPACE","\n        ",1194],["T_VARIABLE","$tree",1195],["T_WHITESPACE"," ",1195],"=",["T_WHITESPACE"," ",1195],"[","]",";",["T_WHITESPACE","\n        ",1195],["T_FOREACH","foreach",1196],["T_WHITESPACE"," ",1196],"(",["T_VARIABLE","$this",1196],["T_OBJECT_OPERATOR","->",1196],["T_STRING","listTables",1196],"(",")",["T_WHITESPACE"," ",1196],["T_AS","as",1196],["T_WHITESPACE"," ",1196],["T_VARIABLE","$table",1196],")",["T_WHITESPACE"," ",1196],"{",["T_WHITESPACE","\n            ",1196],["T_FOREACH","foreach",1197],["T_WHITESPACE"," ",1197],"(",["T_VARIABLE","$this",1197],["T_OBJECT_OPERATOR","->",1197],["T_STRING","getForeignKeys",1197],"(",["T_VARIABLE","$table",1197],")",["T_WHITESPACE"," ",1197],["T_AS","as",1197],["T_WHITESPACE"," ",1197],["T_VARIABLE","$key",1197],")",["T_WHITESPACE"," ",1197],"{",["T_WHITESPACE","\n                ",1197],["T_VARIABLE","$tree",1198],"[",["T_VARIABLE","$table",1198],"]","[",["T_VARIABLE","$key",1198],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1198],"]","]",["T_WHITESPACE"," ",1198],"=",["T_WHITESPACE"," ",1198],["T_VARIABLE","$key",1198],";",["T_WHITESPACE","\n            ",1198],"}",["T_WHITESPACE","\n        ",1199],"}",["T_WHITESPACE","\n\n        ",1200],["T_RETURN","return",1202],["T_WHITESPACE"," ",1202],["T_VARIABLE","$tree",1202],";",["T_WHITESPACE","\n    ",1202],"}",["T_WHITESPACE","\n\n    ",1203],["T_DOC_COMMENT","\/**\n     * Modify tables, used for upgrade process\n     * Change columns definitions, reset foreign keys, change tables comments and engines.\n     *\n     * The value of each array element is an associative array\n     * with the following keys:\n     *\n     * columns => array; list of columns definitions\n     * comment => string; table comment\n     * engine  => string; table engine\n     *\n     * @param array $tables\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",1205],["T_WHITESPACE","\n    ",1221],["T_PUBLIC","public",1222],["T_WHITESPACE"," ",1222],["T_FUNCTION","function",1222],["T_WHITESPACE"," ",1222],["T_STRING","modifyTables",1222],"(",["T_VARIABLE","$tables",1222],")",["T_WHITESPACE","\n    ",1222],"{",["T_WHITESPACE","\n        ",1223],["T_VARIABLE","$foreignKeys",1224],["T_WHITESPACE"," ",1224],"=",["T_WHITESPACE"," ",1224],["T_VARIABLE","$this",1224],["T_OBJECT_OPERATOR","->",1224],["T_STRING","getForeignKeysTree",1224],"(",")",";",["T_WHITESPACE","\n        ",1224],["T_FOREACH","foreach",1225],["T_WHITESPACE"," ",1225],"(",["T_VARIABLE","$tables",1225],["T_WHITESPACE"," ",1225],["T_AS","as",1225],["T_WHITESPACE"," ",1225],["T_VARIABLE","$table",1225],["T_WHITESPACE"," ",1225],["T_DOUBLE_ARROW","=>",1225],["T_WHITESPACE"," ",1225],["T_VARIABLE","$tableData",1225],")",["T_WHITESPACE"," ",1225],"{",["T_WHITESPACE","\n            ",1225],["T_IF","if",1226],["T_WHITESPACE"," ",1226],"(","!",["T_VARIABLE","$this",1226],["T_OBJECT_OPERATOR","->",1226],["T_STRING","isTableExists",1226],"(",["T_VARIABLE","$table",1226],")",")",["T_WHITESPACE"," ",1226],"{",["T_WHITESPACE","\n                ",1226],["T_CONTINUE","continue",1227],";",["T_WHITESPACE","\n            ",1227],"}",["T_WHITESPACE","\n            ",1228],["T_FOREACH","foreach",1229],["T_WHITESPACE"," ",1229],"(",["T_VARIABLE","$tableData",1229],"[",["T_CONSTANT_ENCAPSED_STRING","'columns'",1229],"]",["T_WHITESPACE"," ",1229],["T_AS","as",1229],["T_WHITESPACE"," ",1229],["T_VARIABLE","$column",1229],["T_WHITESPACE"," ",1229],["T_DOUBLE_ARROW","=>",1229],["T_WHITESPACE"," ",1229],["T_VARIABLE","$columnDefinition",1229],")",["T_WHITESPACE"," ",1229],"{",["T_WHITESPACE","\n                ",1229],["T_IF","if",1230],["T_WHITESPACE"," ",1230],"(","!",["T_VARIABLE","$this",1230],["T_OBJECT_OPERATOR","->",1230],["T_STRING","tableColumnExists",1230],"(",["T_VARIABLE","$table",1230],",",["T_WHITESPACE"," ",1230],["T_VARIABLE","$column",1230],")",")",["T_WHITESPACE"," ",1230],"{",["T_WHITESPACE","\n                    ",1230],["T_CONTINUE","continue",1231],";",["T_WHITESPACE","\n                ",1231],"}",["T_WHITESPACE","\n                ",1232],["T_VARIABLE","$droppedKeys",1233],["T_WHITESPACE"," ",1233],"=",["T_WHITESPACE"," ",1233],"[","]",";",["T_WHITESPACE","\n                ",1233],["T_FOREACH","foreach",1234],["T_WHITESPACE"," ",1234],"(",["T_VARIABLE","$foreignKeys",1234],["T_WHITESPACE"," ",1234],["T_AS","as",1234],["T_WHITESPACE"," ",1234],["T_VARIABLE","$keyTable",1234],["T_WHITESPACE"," ",1234],["T_DOUBLE_ARROW","=>",1234],["T_WHITESPACE"," ",1234],["T_VARIABLE","$columns",1234],")",["T_WHITESPACE"," ",1234],"{",["T_WHITESPACE","\n                    ",1234],["T_FOREACH","foreach",1235],["T_WHITESPACE"," ",1235],"(",["T_VARIABLE","$columns",1235],["T_WHITESPACE"," ",1235],["T_AS","as",1235],["T_WHITESPACE"," ",1235],["T_VARIABLE","$columnName",1235],["T_WHITESPACE"," ",1235],["T_DOUBLE_ARROW","=>",1235],["T_WHITESPACE"," ",1235],["T_VARIABLE","$keyOptions",1235],")",["T_WHITESPACE"," ",1235],"{",["T_WHITESPACE","\n                        ",1235],["T_IF","if",1236],["T_WHITESPACE"," ",1236],"(",["T_VARIABLE","$table",1236],["T_WHITESPACE"," ",1236],["T_IS_EQUAL","==",1236],["T_WHITESPACE"," ",1236],["T_VARIABLE","$keyOptions",1236],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1236],"]",["T_WHITESPACE"," ",1236],["T_BOOLEAN_AND","&&",1236],["T_WHITESPACE"," ",1236],["T_VARIABLE","$column",1236],["T_WHITESPACE"," ",1236],["T_IS_EQUAL","==",1236],["T_WHITESPACE"," ",1236],["T_VARIABLE","$keyOptions",1236],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1236],"]",")",["T_WHITESPACE"," ",1236],"{",["T_WHITESPACE","\n                            ",1236],["T_VARIABLE","$this",1237],["T_OBJECT_OPERATOR","->",1237],["T_STRING","dropForeignKey",1237],"(",["T_VARIABLE","$keyTable",1237],",",["T_WHITESPACE"," ",1237],["T_VARIABLE","$keyOptions",1237],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",1237],"]",")",";",["T_WHITESPACE","\n                            ",1237],["T_VARIABLE","$droppedKeys",1238],"[","]",["T_WHITESPACE"," ",1238],"=",["T_WHITESPACE"," ",1238],["T_VARIABLE","$keyOptions",1238],";",["T_WHITESPACE","\n                        ",1238],"}",["T_WHITESPACE","\n                    ",1239],"}",["T_WHITESPACE","\n                ",1240],"}",["T_WHITESPACE","\n\n                ",1241],["T_VARIABLE","$this",1243],["T_OBJECT_OPERATOR","->",1243],["T_STRING","modifyColumn",1243],"(",["T_VARIABLE","$table",1243],",",["T_WHITESPACE"," ",1243],["T_VARIABLE","$column",1243],",",["T_WHITESPACE"," ",1243],["T_VARIABLE","$columnDefinition",1243],")",";",["T_WHITESPACE","\n\n                ",1243],["T_FOREACH","foreach",1245],["T_WHITESPACE"," ",1245],"(",["T_VARIABLE","$droppedKeys",1245],["T_WHITESPACE"," ",1245],["T_AS","as",1245],["T_WHITESPACE"," ",1245],["T_VARIABLE","$options",1245],")",["T_WHITESPACE"," ",1245],"{",["T_WHITESPACE","\n                    ",1245],["T_UNSET","unset",1246],"(",["T_VARIABLE","$columnDefinition",1246],"[",["T_CONSTANT_ENCAPSED_STRING","'identity'",1246],"]",",",["T_WHITESPACE"," ",1246],["T_VARIABLE","$columnDefinition",1246],"[",["T_CONSTANT_ENCAPSED_STRING","'primary'",1246],"]",",",["T_WHITESPACE"," ",1246],["T_VARIABLE","$columnDefinition",1246],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1246],"]",")",";",["T_WHITESPACE","\n\n                    ",1246],["T_VARIABLE","$onDelete",1248],["T_WHITESPACE"," ",1248],"=",["T_WHITESPACE"," ",1248],["T_VARIABLE","$options",1248],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_DELETE'",1248],"]",";",["T_WHITESPACE","\n\n                    ",1248],["T_IF","if",1250],["T_WHITESPACE"," ",1250],"(",["T_VARIABLE","$onDelete",1250],["T_WHITESPACE"," ",1250],["T_IS_EQUAL","==",1250],["T_WHITESPACE"," ",1250],["T_STRING","AdapterInterface",1250],["T_DOUBLE_COLON","::",1250],["T_STRING","FK_ACTION_SET_NULL",1250],")",["T_WHITESPACE"," ",1250],"{",["T_WHITESPACE","\n                        ",1250],["T_VARIABLE","$columnDefinition",1251],"[",["T_CONSTANT_ENCAPSED_STRING","'nullable'",1251],"]",["T_WHITESPACE"," ",1251],"=",["T_WHITESPACE"," ",1251],["T_STRING","true",1251],";",["T_WHITESPACE","\n                    ",1251],"}",["T_WHITESPACE","\n                    ",1252],["T_VARIABLE","$this",1253],["T_OBJECT_OPERATOR","->",1253],["T_STRING","modifyColumn",1253],"(",["T_VARIABLE","$options",1253],"[",["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",1253],"]",",",["T_WHITESPACE"," ",1253],["T_VARIABLE","$options",1253],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1253],"]",",",["T_WHITESPACE"," ",1253],["T_VARIABLE","$columnDefinition",1253],")",";",["T_WHITESPACE","\n                    ",1253],["T_VARIABLE","$this",1254],["T_OBJECT_OPERATOR","->",1254],["T_STRING","addForeignKey",1254],"(",["T_WHITESPACE","\n                        ",1254],["T_VARIABLE","$options",1255],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",1255],"]",",",["T_WHITESPACE","\n                        ",1255],["T_VARIABLE","$options",1256],"[",["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",1256],"]",",",["T_WHITESPACE","\n                        ",1256],["T_VARIABLE","$options",1257],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1257],"]",",",["T_WHITESPACE","\n                        ",1257],["T_VARIABLE","$options",1258],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1258],"]",",",["T_WHITESPACE","\n                        ",1258],["T_VARIABLE","$options",1259],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1259],"]",",",["T_WHITESPACE","\n                        ",1259],"(",["T_VARIABLE","$onDelete",1260],")",["T_WHITESPACE"," ",1260],"?",["T_WHITESPACE"," ",1260],["T_VARIABLE","$onDelete",1260],["T_WHITESPACE"," ",1260],":",["T_WHITESPACE"," ",1260],["T_STRING","AdapterInterface",1260],["T_DOUBLE_COLON","::",1260],["T_STRING","FK_ACTION_NO_ACTION",1260],["T_WHITESPACE","\n                    ",1260],")",";",["T_WHITESPACE","\n                ",1261],"}",["T_WHITESPACE","\n            ",1262],"}",["T_WHITESPACE","\n            ",1263],["T_IF","if",1264],["T_WHITESPACE"," ",1264],"(","!",["T_EMPTY","empty",1264],"(",["T_VARIABLE","$tableData",1264],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1264],"]",")",")",["T_WHITESPACE"," ",1264],"{",["T_WHITESPACE","\n                ",1264],["T_VARIABLE","$this",1265],["T_OBJECT_OPERATOR","->",1265],["T_STRING","changeTableComment",1265],"(",["T_VARIABLE","$table",1265],",",["T_WHITESPACE"," ",1265],["T_VARIABLE","$tableData",1265],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1265],"]",")",";",["T_WHITESPACE","\n            ",1265],"}",["T_WHITESPACE","\n            ",1266],["T_IF","if",1267],["T_WHITESPACE"," ",1267],"(","!",["T_EMPTY","empty",1267],"(",["T_VARIABLE","$tableData",1267],"[",["T_CONSTANT_ENCAPSED_STRING","'engine'",1267],"]",")",")",["T_WHITESPACE"," ",1267],"{",["T_WHITESPACE","\n                ",1267],["T_VARIABLE","$this",1268],["T_OBJECT_OPERATOR","->",1268],["T_STRING","changeTableEngine",1268],"(",["T_VARIABLE","$table",1268],",",["T_WHITESPACE"," ",1268],["T_VARIABLE","$tableData",1268],"[",["T_CONSTANT_ENCAPSED_STRING","'engine'",1268],"]",")",";",["T_WHITESPACE","\n            ",1268],"}",["T_WHITESPACE","\n        ",1269],"}",["T_WHITESPACE","\n\n        ",1270],["T_RETURN","return",1272],["T_WHITESPACE"," ",1272],["T_VARIABLE","$this",1272],";",["T_WHITESPACE","\n    ",1272],"}",["T_WHITESPACE","\n\n    ",1273],["T_DOC_COMMENT","\/**\n     * Retrieve table index information\n     *\n     * The return value is an associative array keyed by the UPPERCASE index key (except for primary key,\n     * that is always stored under 'PRIMARY' key) as returned by the RDBMS.\n     *\n     * The value of each array element is an associative array\n     * with the following keys:\n     *\n     * SCHEMA_NAME      => string; name of database or schema\n     * TABLE_NAME       => string; name of the table\n     * KEY_NAME         => string; the original index name\n     * COLUMNS_LIST     => array; array of index column names\n     * INDEX_TYPE       => string; lowercase, create index type\n     * INDEX_METHOD     => string; index method using\n     * type             => string; see INDEX_TYPE\n     * fields           => array; see COLUMNS_LIST\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return array|string|int\n     *\/",1275],["T_WHITESPACE","\n    ",1296],["T_PUBLIC","public",1297],["T_WHITESPACE"," ",1297],["T_FUNCTION","function",1297],["T_WHITESPACE"," ",1297],["T_STRING","getIndexList",1297],"(",["T_VARIABLE","$tableName",1297],",",["T_WHITESPACE"," ",1297],["T_VARIABLE","$schemaName",1297],["T_WHITESPACE"," ",1297],"=",["T_WHITESPACE"," ",1297],["T_STRING","null",1297],")",["T_WHITESPACE","\n    ",1297],"{",["T_WHITESPACE","\n        ",1298],["T_VARIABLE","$cacheKey",1299],["T_WHITESPACE"," ",1299],"=",["T_WHITESPACE"," ",1299],["T_VARIABLE","$this",1299],["T_OBJECT_OPERATOR","->",1299],["T_STRING","_getTableName",1299],"(",["T_VARIABLE","$tableName",1299],",",["T_WHITESPACE"," ",1299],["T_VARIABLE","$schemaName",1299],")",";",["T_WHITESPACE","\n        ",1299],["T_VARIABLE","$ddl",1300],["T_WHITESPACE"," ",1300],"=",["T_WHITESPACE"," ",1300],["T_VARIABLE","$this",1300],["T_OBJECT_OPERATOR","->",1300],["T_STRING","loadDdlCache",1300],"(",["T_VARIABLE","$cacheKey",1300],",",["T_WHITESPACE"," ",1300],["T_STRING","self",1300],["T_DOUBLE_COLON","::",1300],["T_STRING","DDL_INDEX",1300],")",";",["T_WHITESPACE","\n        ",1300],["T_IF","if",1301],["T_WHITESPACE"," ",1301],"(",["T_VARIABLE","$ddl",1301],["T_WHITESPACE"," ",1301],["T_IS_IDENTICAL","===",1301],["T_WHITESPACE"," ",1301],["T_STRING","false",1301],")",["T_WHITESPACE"," ",1301],"{",["T_WHITESPACE","\n            ",1301],["T_VARIABLE","$ddl",1302],["T_WHITESPACE"," ",1302],"=",["T_WHITESPACE"," ",1302],"[","]",";",["T_WHITESPACE","\n\n            ",1302],["T_VARIABLE","$sql",1304],["T_WHITESPACE"," ",1304],"=",["T_WHITESPACE"," ",1304],["T_STRING","sprintf",1304],"(",["T_WHITESPACE","\n                ",1304],["T_CONSTANT_ENCAPSED_STRING","'SHOW INDEX FROM %s'",1305],",",["T_WHITESPACE","\n                ",1305],["T_VARIABLE","$this",1306],["T_OBJECT_OPERATOR","->",1306],["T_STRING","quoteIdentifier",1306],"(",["T_VARIABLE","$this",1306],["T_OBJECT_OPERATOR","->",1306],["T_STRING","_getTableName",1306],"(",["T_VARIABLE","$tableName",1306],",",["T_WHITESPACE"," ",1306],["T_VARIABLE","$schemaName",1306],")",")",["T_WHITESPACE","\n            ",1306],")",";",["T_WHITESPACE","\n            ",1307],["T_FOREACH","foreach",1308],["T_WHITESPACE"," ",1308],"(",["T_VARIABLE","$this",1308],["T_OBJECT_OPERATOR","->",1308],["T_STRING","fetchAll",1308],"(",["T_VARIABLE","$sql",1308],")",["T_WHITESPACE"," ",1308],["T_AS","as",1308],["T_WHITESPACE"," ",1308],["T_VARIABLE","$row",1308],")",["T_WHITESPACE"," ",1308],"{",["T_WHITESPACE","\n                ",1308],["T_VARIABLE","$fieldKeyName",1309],["T_WHITESPACE","   ",1309],"=",["T_WHITESPACE"," ",1309],["T_CONSTANT_ENCAPSED_STRING","'Key_name'",1309],";",["T_WHITESPACE","\n                ",1309],["T_VARIABLE","$fieldNonUnique",1310],["T_WHITESPACE"," ",1310],"=",["T_WHITESPACE"," ",1310],["T_CONSTANT_ENCAPSED_STRING","'Non_unique'",1310],";",["T_WHITESPACE","\n                ",1310],["T_VARIABLE","$fieldColumn",1311],["T_WHITESPACE","    ",1311],"=",["T_WHITESPACE"," ",1311],["T_CONSTANT_ENCAPSED_STRING","'Column_name'",1311],";",["T_WHITESPACE","\n                ",1311],["T_VARIABLE","$fieldIndexType",1312],["T_WHITESPACE"," ",1312],"=",["T_WHITESPACE"," ",1312],["T_CONSTANT_ENCAPSED_STRING","'Index_type'",1312],";",["T_WHITESPACE","\n\n                ",1312],["T_IF","if",1314],["T_WHITESPACE"," ",1314],"(",["T_STRING","strtolower",1314],"(",["T_VARIABLE","$row",1314],"[",["T_VARIABLE","$fieldKeyName",1314],"]",")",["T_WHITESPACE"," ",1314],["T_IS_EQUAL","==",1314],["T_WHITESPACE"," ",1314],["T_STRING","AdapterInterface",1314],["T_DOUBLE_COLON","::",1314],["T_STRING","INDEX_TYPE_PRIMARY",1314],")",["T_WHITESPACE"," ",1314],"{",["T_WHITESPACE","\n                    ",1314],["T_VARIABLE","$indexType",1315],["T_WHITESPACE","  ",1315],"=",["T_WHITESPACE"," ",1315],["T_STRING","AdapterInterface",1315],["T_DOUBLE_COLON","::",1315],["T_STRING","INDEX_TYPE_PRIMARY",1315],";",["T_WHITESPACE","\n                ",1315],"}",["T_WHITESPACE"," ",1316],["T_ELSEIF","elseif",1316],["T_WHITESPACE"," ",1316],"(",["T_VARIABLE","$row",1316],"[",["T_VARIABLE","$fieldNonUnique",1316],"]",["T_WHITESPACE"," ",1316],["T_IS_EQUAL","==",1316],["T_WHITESPACE"," ",1316],["T_LNUMBER","0",1316],")",["T_WHITESPACE"," ",1316],"{",["T_WHITESPACE","\n                    ",1316],["T_VARIABLE","$indexType",1317],["T_WHITESPACE","  ",1317],"=",["T_WHITESPACE"," ",1317],["T_STRING","AdapterInterface",1317],["T_DOUBLE_COLON","::",1317],["T_STRING","INDEX_TYPE_UNIQUE",1317],";",["T_WHITESPACE","\n                ",1317],"}",["T_WHITESPACE"," ",1318],["T_ELSEIF","elseif",1318],["T_WHITESPACE"," ",1318],"(",["T_STRING","strtolower",1318],"(",["T_VARIABLE","$row",1318],"[",["T_VARIABLE","$fieldIndexType",1318],"]",")",["T_WHITESPACE"," ",1318],["T_IS_EQUAL","==",1318],["T_WHITESPACE"," ",1318],["T_STRING","AdapterInterface",1318],["T_DOUBLE_COLON","::",1318],["T_STRING","INDEX_TYPE_FULLTEXT",1318],")",["T_WHITESPACE"," ",1318],"{",["T_WHITESPACE","\n                    ",1318],["T_VARIABLE","$indexType",1319],["T_WHITESPACE","  ",1319],"=",["T_WHITESPACE"," ",1319],["T_STRING","AdapterInterface",1319],["T_DOUBLE_COLON","::",1319],["T_STRING","INDEX_TYPE_FULLTEXT",1319],";",["T_WHITESPACE","\n                ",1319],"}",["T_WHITESPACE"," ",1320],["T_ELSE","else",1320],["T_WHITESPACE"," ",1320],"{",["T_WHITESPACE","\n                    ",1320],["T_VARIABLE","$indexType",1321],["T_WHITESPACE","  ",1321],"=",["T_WHITESPACE"," ",1321],["T_STRING","AdapterInterface",1321],["T_DOUBLE_COLON","::",1321],["T_STRING","INDEX_TYPE_INDEX",1321],";",["T_WHITESPACE","\n                ",1321],"}",["T_WHITESPACE","\n\n                ",1322],["T_VARIABLE","$upperKeyName",1324],["T_WHITESPACE"," ",1324],"=",["T_WHITESPACE"," ",1324],["T_STRING","strtoupper",1324],"(",["T_VARIABLE","$row",1324],"[",["T_VARIABLE","$fieldKeyName",1324],"]",")",";",["T_WHITESPACE","\n                ",1324],["T_IF","if",1325],["T_WHITESPACE"," ",1325],"(",["T_ISSET","isset",1325],"(",["T_VARIABLE","$ddl",1325],"[",["T_VARIABLE","$upperKeyName",1325],"]",")",")",["T_WHITESPACE"," ",1325],"{",["T_WHITESPACE","\n                    ",1325],["T_VARIABLE","$ddl",1326],"[",["T_VARIABLE","$upperKeyName",1326],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",1326],"]","[","]",["T_WHITESPACE"," ",1326],"=",["T_WHITESPACE"," ",1326],["T_VARIABLE","$row",1326],"[",["T_VARIABLE","$fieldColumn",1326],"]",";",["T_WHITESPACE"," ",1326],["T_COMMENT","\/\/ for compatible\n",1326],["T_WHITESPACE","                    ",1327],["T_VARIABLE","$ddl",1327],"[",["T_VARIABLE","$upperKeyName",1327],"]","[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",1327],"]","[","]",["T_WHITESPACE"," ",1327],"=",["T_WHITESPACE"," ",1327],["T_VARIABLE","$row",1327],"[",["T_VARIABLE","$fieldColumn",1327],"]",";",["T_WHITESPACE","\n                ",1327],"}",["T_WHITESPACE"," ",1328],["T_ELSE","else",1328],["T_WHITESPACE"," ",1328],"{",["T_WHITESPACE","\n                    ",1328],["T_VARIABLE","$ddl",1329],"[",["T_VARIABLE","$upperKeyName",1329],"]",["T_WHITESPACE"," ",1329],"=",["T_WHITESPACE"," ",1329],"[",["T_WHITESPACE","\n                        ",1329],["T_CONSTANT_ENCAPSED_STRING","'SCHEMA_NAME'",1330],["T_WHITESPACE","   ",1330],["T_DOUBLE_ARROW","=>",1330],["T_WHITESPACE"," ",1330],["T_VARIABLE","$schemaName",1330],",",["T_WHITESPACE","\n                        ",1330],["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",1331],["T_WHITESPACE","    ",1331],["T_DOUBLE_ARROW","=>",1331],["T_WHITESPACE"," ",1331],["T_VARIABLE","$tableName",1331],",",["T_WHITESPACE","\n                        ",1331],["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",1332],["T_WHITESPACE","      ",1332],["T_DOUBLE_ARROW","=>",1332],["T_WHITESPACE"," ",1332],["T_VARIABLE","$row",1332],"[",["T_VARIABLE","$fieldKeyName",1332],"]",",",["T_WHITESPACE","\n                        ",1332],["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",1333],["T_WHITESPACE","  ",1333],["T_DOUBLE_ARROW","=>",1333],["T_WHITESPACE"," ",1333],"[",["T_VARIABLE","$row",1333],"[",["T_VARIABLE","$fieldColumn",1333],"]","]",",",["T_WHITESPACE","\n                        ",1333],["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",1334],["T_WHITESPACE","    ",1334],["T_DOUBLE_ARROW","=>",1334],["T_WHITESPACE"," ",1334],["T_VARIABLE","$indexType",1334],",",["T_WHITESPACE","\n                        ",1334],["T_CONSTANT_ENCAPSED_STRING","'INDEX_METHOD'",1335],["T_WHITESPACE","  ",1335],["T_DOUBLE_ARROW","=>",1335],["T_WHITESPACE"," ",1335],["T_VARIABLE","$row",1335],"[",["T_VARIABLE","$fieldIndexType",1335],"]",",",["T_WHITESPACE","\n                        ",1335],["T_CONSTANT_ENCAPSED_STRING","'type'",1336],["T_WHITESPACE","          ",1336],["T_DOUBLE_ARROW","=>",1336],["T_WHITESPACE"," ",1336],["T_STRING","strtolower",1336],"(",["T_VARIABLE","$indexType",1336],")",",",["T_WHITESPACE"," ",1336],["T_COMMENT","\/\/ for compatibility\n",1336],["T_WHITESPACE","                        ",1337],["T_CONSTANT_ENCAPSED_STRING","'fields'",1337],["T_WHITESPACE","        ",1337],["T_DOUBLE_ARROW","=>",1337],["T_WHITESPACE"," ",1337],"[",["T_VARIABLE","$row",1337],"[",["T_VARIABLE","$fieldColumn",1337],"]","]",",",["T_WHITESPACE"," ",1337],["T_COMMENT","\/\/ for compatibility\n",1337],["T_WHITESPACE","                    ",1338],"]",";",["T_WHITESPACE","\n                ",1338],"}",["T_WHITESPACE","\n            ",1339],"}",["T_WHITESPACE","\n            ",1340],["T_VARIABLE","$this",1341],["T_OBJECT_OPERATOR","->",1341],["T_STRING","saveDdlCache",1341],"(",["T_VARIABLE","$cacheKey",1341],",",["T_WHITESPACE"," ",1341],["T_STRING","self",1341],["T_DOUBLE_COLON","::",1341],["T_STRING","DDL_INDEX",1341],",",["T_WHITESPACE"," ",1341],["T_VARIABLE","$ddl",1341],")",";",["T_WHITESPACE","\n        ",1341],"}",["T_WHITESPACE","\n\n        ",1342],["T_RETURN","return",1344],["T_WHITESPACE"," ",1344],["T_VARIABLE","$ddl",1344],";",["T_WHITESPACE","\n    ",1344],"}",["T_WHITESPACE","\n\n    ",1345],["T_DOC_COMMENT","\/**\n     * Remove duplicate entry for create key\n     *\n     * @param string $table\n     * @param array $fields\n     * @param string[] $ids\n     * @return $this\n     *\/",1347],["T_WHITESPACE","\n    ",1354],["T_PROTECTED","protected",1355],["T_WHITESPACE"," ",1355],["T_FUNCTION","function",1355],["T_WHITESPACE"," ",1355],["T_STRING","_removeDuplicateEntry",1355],"(",["T_VARIABLE","$table",1355],",",["T_WHITESPACE"," ",1355],["T_VARIABLE","$fields",1355],",",["T_WHITESPACE"," ",1355],["T_VARIABLE","$ids",1355],")",["T_WHITESPACE","\n    ",1355],"{",["T_WHITESPACE","\n        ",1356],["T_VARIABLE","$where",1357],["T_WHITESPACE"," ",1357],"=",["T_WHITESPACE"," ",1357],"[","]",";",["T_WHITESPACE","\n        ",1357],["T_VARIABLE","$i",1358],["T_WHITESPACE"," ",1358],"=",["T_WHITESPACE"," ",1358],["T_LNUMBER","0",1358],";",["T_WHITESPACE","\n        ",1358],["T_FOREACH","foreach",1359],["T_WHITESPACE"," ",1359],"(",["T_VARIABLE","$fields",1359],["T_WHITESPACE"," ",1359],["T_AS","as",1359],["T_WHITESPACE"," ",1359],["T_VARIABLE","$field",1359],")",["T_WHITESPACE"," ",1359],"{",["T_WHITESPACE","\n            ",1359],["T_VARIABLE","$where",1360],"[","]",["T_WHITESPACE"," ",1360],"=",["T_WHITESPACE"," ",1360],["T_VARIABLE","$this",1360],["T_OBJECT_OPERATOR","->",1360],["T_STRING","quoteInto",1360],"(",["T_VARIABLE","$field",1360],["T_WHITESPACE"," ",1360],".",["T_WHITESPACE"," ",1360],["T_CONSTANT_ENCAPSED_STRING","'=?'",1360],",",["T_WHITESPACE"," ",1360],["T_VARIABLE","$ids",1360],"[",["T_VARIABLE","$i",1360],["T_INC","++",1360],"]",")",";",["T_WHITESPACE","\n        ",1360],"}",["T_WHITESPACE","\n\n        ",1361],["T_IF","if",1363],["T_WHITESPACE"," ",1363],"(","!",["T_VARIABLE","$where",1363],")",["T_WHITESPACE"," ",1363],"{",["T_WHITESPACE","\n            ",1363],["T_RETURN","return",1364],["T_WHITESPACE"," ",1364],["T_VARIABLE","$this",1364],";",["T_WHITESPACE","\n        ",1364],"}",["T_WHITESPACE","\n        ",1365],["T_VARIABLE","$whereCond",1366],["T_WHITESPACE"," ",1366],"=",["T_WHITESPACE"," ",1366],["T_STRING","implode",1366],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",1366],",",["T_WHITESPACE"," ",1366],["T_VARIABLE","$where",1366],")",";",["T_WHITESPACE","\n        ",1366],["T_VARIABLE","$sql",1367],["T_WHITESPACE"," ",1367],"=",["T_WHITESPACE"," ",1367],["T_STRING","sprintf",1367],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) as `cnt` FROM `%s` WHERE %s'",1367],",",["T_WHITESPACE"," ",1367],["T_VARIABLE","$table",1367],",",["T_WHITESPACE"," ",1367],["T_VARIABLE","$whereCond",1367],")",";",["T_WHITESPACE","\n\n        ",1367],["T_VARIABLE","$cnt",1369],["T_WHITESPACE"," ",1369],"=",["T_WHITESPACE"," ",1369],["T_VARIABLE","$this",1369],["T_OBJECT_OPERATOR","->",1369],["T_STRING","rawFetchRow",1369],"(",["T_VARIABLE","$sql",1369],",",["T_WHITESPACE"," ",1369],["T_CONSTANT_ENCAPSED_STRING","'cnt'",1369],")",";",["T_WHITESPACE","\n        ",1369],["T_IF","if",1370],["T_WHITESPACE"," ",1370],"(",["T_VARIABLE","$cnt",1370],["T_WHITESPACE"," ",1370],">",["T_WHITESPACE"," ",1370],["T_LNUMBER","1",1370],")",["T_WHITESPACE"," ",1370],"{",["T_WHITESPACE","\n            ",1370],["T_VARIABLE","$sql",1371],["T_WHITESPACE"," ",1371],"=",["T_WHITESPACE"," ",1371],["T_STRING","sprintf",1371],"(",["T_WHITESPACE","\n                ",1371],["T_CONSTANT_ENCAPSED_STRING","'DELETE FROM `%s` WHERE %s LIMIT %d'",1372],",",["T_WHITESPACE","\n                ",1372],["T_VARIABLE","$table",1373],",",["T_WHITESPACE","\n                ",1373],["T_VARIABLE","$whereCond",1374],",",["T_WHITESPACE","\n                ",1374],["T_VARIABLE","$cnt",1375],["T_WHITESPACE"," ",1375],"-",["T_WHITESPACE"," ",1375],["T_LNUMBER","1",1375],["T_WHITESPACE","\n            ",1375],")",";",["T_WHITESPACE","\n            ",1376],["T_VARIABLE","$this",1377],["T_OBJECT_OPERATOR","->",1377],["T_STRING","rawQuery",1377],"(",["T_VARIABLE","$sql",1377],")",";",["T_WHITESPACE","\n        ",1377],"}",["T_WHITESPACE","\n\n        ",1378],["T_RETURN","return",1380],["T_WHITESPACE"," ",1380],["T_VARIABLE","$this",1380],";",["T_WHITESPACE","\n    ",1380],"}",["T_WHITESPACE","\n\n    ",1381],["T_DOC_COMMENT","\/**\n     * Creates and returns a new \\Magento\\Framework\\DB\\Select object for this adapter.\n     *\n     * @return Select\n     *\/",1383],["T_WHITESPACE","\n    ",1387],["T_PUBLIC","public",1388],["T_WHITESPACE"," ",1388],["T_FUNCTION","function",1388],["T_WHITESPACE"," ",1388],["T_STRING","select",1388],"(",")",["T_WHITESPACE","\n    ",1388],"{",["T_WHITESPACE","\n",1389],["T_COMMENT","\/\/        return new Select($this);\n",1390],["T_WHITESPACE","        ",1391],["T_RETURN","return",1391],["T_WHITESPACE"," ",1391],["T_VARIABLE","$this",1391],["T_OBJECT_OPERATOR","->",1391],["T_STRING","selectFactory",1391],["T_OBJECT_OPERATOR","->",1391],["T_STRING","create",1391],"(",["T_VARIABLE","$this",1391],")",";",["T_WHITESPACE","\n    ",1391],"}",["T_WHITESPACE","\n\n    ",1392],["T_DOC_COMMENT","\/**\n     * Quotes a value and places into a piece of text at a placeholder.\n     *\n     * Method revrited for handle empty arrays in value param\n     *\n     * @param string  $text  The text with a placeholder.\n     * @param mixed   $value The value to quote.\n     * @param string  $type  OPTIONAL SQL datatype\n     * @param integer $count OPTIONAL count of placeholders to replace\n     * @return string An SQL-safe quoted value placed into the orignal text.\n     *\/",1394],["T_WHITESPACE","\n    ",1404],["T_PUBLIC","public",1405],["T_WHITESPACE"," ",1405],["T_FUNCTION","function",1405],["T_WHITESPACE"," ",1405],["T_STRING","quoteInto",1405],"(",["T_VARIABLE","$text",1405],",",["T_WHITESPACE"," ",1405],["T_VARIABLE","$value",1405],",",["T_WHITESPACE"," ",1405],["T_VARIABLE","$type",1405],["T_WHITESPACE"," ",1405],"=",["T_WHITESPACE"," ",1405],["T_STRING","null",1405],",",["T_WHITESPACE"," ",1405],["T_VARIABLE","$count",1405],["T_WHITESPACE"," ",1405],"=",["T_WHITESPACE"," ",1405],["T_STRING","null",1405],")",["T_WHITESPACE","\n    ",1405],"{",["T_WHITESPACE","\n        ",1406],["T_IF","if",1407],["T_WHITESPACE"," ",1407],"(",["T_STRING","is_array",1407],"(",["T_VARIABLE","$value",1407],")",["T_WHITESPACE"," ",1407],["T_BOOLEAN_AND","&&",1407],["T_WHITESPACE"," ",1407],["T_EMPTY","empty",1407],"(",["T_VARIABLE","$value",1407],")",")",["T_WHITESPACE"," ",1407],"{",["T_WHITESPACE","\n            ",1407],["T_VARIABLE","$value",1408],["T_WHITESPACE"," ",1408],"=",["T_WHITESPACE"," ",1408],["T_NEW","new",1408],["T_WHITESPACE"," ",1408],["T_NS_SEPARATOR","\\",1408],["T_STRING","Zend_Db_Expr",1408],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",1408],")",";",["T_WHITESPACE","\n        ",1408],"}",["T_WHITESPACE","\n\n        ",1409],["T_IF","if",1411],["T_WHITESPACE"," ",1411],"(",["T_VARIABLE","$value",1411],["T_WHITESPACE"," ",1411],["T_INSTANCEOF","instanceof",1411],["T_WHITESPACE"," ",1411],["T_NS_SEPARATOR","\\",1411],["T_STRING","DateTimeInterface",1411],")",["T_WHITESPACE"," ",1411],"{",["T_WHITESPACE","\n            ",1411],["T_VARIABLE","$value",1412],["T_WHITESPACE"," ",1412],"=",["T_WHITESPACE"," ",1412],["T_VARIABLE","$value",1412],["T_OBJECT_OPERATOR","->",1412],["T_STRING","format",1412],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",1412],")",";",["T_WHITESPACE","\n        ",1412],"}",["T_WHITESPACE","\n\n        ",1413],["T_RETURN","return",1415],["T_WHITESPACE"," ",1415],["T_STRING","parent",1415],["T_DOUBLE_COLON","::",1415],["T_STRING","quoteInto",1415],"(",["T_VARIABLE","$text",1415],",",["T_WHITESPACE"," ",1415],["T_VARIABLE","$value",1415],",",["T_WHITESPACE"," ",1415],["T_VARIABLE","$type",1415],",",["T_WHITESPACE"," ",1415],["T_VARIABLE","$count",1415],")",";",["T_WHITESPACE","\n    ",1415],"}",["T_WHITESPACE","\n\n    ",1416],["T_DOC_COMMENT","\/**\n     * Retrieve ddl cache name\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return string\n     *\/",1418],["T_WHITESPACE","\n    ",1424],["T_PROTECTED","protected",1425],["T_WHITESPACE"," ",1425],["T_FUNCTION","function",1425],["T_WHITESPACE"," ",1425],["T_STRING","_getTableName",1425],"(",["T_VARIABLE","$tableName",1425],",",["T_WHITESPACE"," ",1425],["T_VARIABLE","$schemaName",1425],["T_WHITESPACE"," ",1425],"=",["T_WHITESPACE"," ",1425],["T_STRING","null",1425],")",["T_WHITESPACE","\n    ",1425],"{",["T_WHITESPACE","\n        ",1426],["T_RETURN","return",1427],["T_WHITESPACE"," ",1427],"(",["T_VARIABLE","$schemaName",1427],["T_WHITESPACE"," ",1427],"?",["T_WHITESPACE"," ",1427],["T_VARIABLE","$schemaName",1427],["T_WHITESPACE"," ",1427],".",["T_WHITESPACE"," ",1427],["T_CONSTANT_ENCAPSED_STRING","'.'",1427],["T_WHITESPACE"," ",1427],":",["T_WHITESPACE"," ",1427],["T_CONSTANT_ENCAPSED_STRING","''",1427],")",["T_WHITESPACE"," ",1427],".",["T_WHITESPACE"," ",1427],["T_VARIABLE","$tableName",1427],";",["T_WHITESPACE","\n    ",1427],"}",["T_WHITESPACE","\n\n    ",1428],["T_DOC_COMMENT","\/**\n     * Retrieve Id for cache\n     *\n     * @param string $tableKey\n     * @param int $ddlType\n     * @return string\n     *\/",1430],["T_WHITESPACE","\n    ",1436],["T_PROTECTED","protected",1437],["T_WHITESPACE"," ",1437],["T_FUNCTION","function",1437],["T_WHITESPACE"," ",1437],["T_STRING","_getCacheId",1437],"(",["T_VARIABLE","$tableKey",1437],",",["T_WHITESPACE"," ",1437],["T_VARIABLE","$ddlType",1437],")",["T_WHITESPACE","\n    ",1437],"{",["T_WHITESPACE","\n        ",1438],["T_RETURN","return",1439],["T_WHITESPACE"," ",1439],["T_STRING","sprintf",1439],"(",["T_CONSTANT_ENCAPSED_STRING","'%s_%s_%s'",1439],",",["T_WHITESPACE"," ",1439],["T_STRING","self",1439],["T_DOUBLE_COLON","::",1439],["T_STRING","DDL_CACHE_PREFIX",1439],",",["T_WHITESPACE"," ",1439],["T_VARIABLE","$tableKey",1439],",",["T_WHITESPACE"," ",1439],["T_VARIABLE","$ddlType",1439],")",";",["T_WHITESPACE","\n    ",1439],"}",["T_WHITESPACE","\n\n    ",1440],["T_DOC_COMMENT","\/**\n     * Load DDL data from cache\n     * Return false if cache does not exists\n     *\n     * @param string $tableCacheKey the table cache key\n     * @param int $ddlType          the DDL constant\n     * @return string|array|int|false\n     *\/",1442],["T_WHITESPACE","\n    ",1449],["T_PUBLIC","public",1450],["T_WHITESPACE"," ",1450],["T_FUNCTION","function",1450],["T_WHITESPACE"," ",1450],["T_STRING","loadDdlCache",1450],"(",["T_VARIABLE","$tableCacheKey",1450],",",["T_WHITESPACE"," ",1450],["T_VARIABLE","$ddlType",1450],")",["T_WHITESPACE","\n    ",1450],"{",["T_WHITESPACE","\n        ",1451],["T_IF","if",1452],["T_WHITESPACE"," ",1452],"(","!",["T_VARIABLE","$this",1452],["T_OBJECT_OPERATOR","->",1452],["T_STRING","_isDdlCacheAllowed",1452],")",["T_WHITESPACE"," ",1452],"{",["T_WHITESPACE","\n            ",1452],["T_RETURN","return",1453],["T_WHITESPACE"," ",1453],["T_STRING","false",1453],";",["T_WHITESPACE","\n        ",1453],"}",["T_WHITESPACE","\n        ",1454],["T_IF","if",1455],["T_WHITESPACE"," ",1455],"(",["T_ISSET","isset",1455],"(",["T_VARIABLE","$this",1455],["T_OBJECT_OPERATOR","->",1455],["T_STRING","_ddlCache",1455],"[",["T_VARIABLE","$ddlType",1455],"]","[",["T_VARIABLE","$tableCacheKey",1455],"]",")",")",["T_WHITESPACE"," ",1455],"{",["T_WHITESPACE","\n            ",1455],["T_RETURN","return",1456],["T_WHITESPACE"," ",1456],["T_VARIABLE","$this",1456],["T_OBJECT_OPERATOR","->",1456],["T_STRING","_ddlCache",1456],"[",["T_VARIABLE","$ddlType",1456],"]","[",["T_VARIABLE","$tableCacheKey",1456],"]",";",["T_WHITESPACE","\n        ",1456],"}",["T_WHITESPACE","\n\n        ",1457],["T_IF","if",1459],["T_WHITESPACE"," ",1459],"(",["T_VARIABLE","$this",1459],["T_OBJECT_OPERATOR","->",1459],["T_STRING","_cacheAdapter",1459],")",["T_WHITESPACE"," ",1459],"{",["T_WHITESPACE","\n            ",1459],["T_VARIABLE","$cacheId",1460],["T_WHITESPACE"," ",1460],"=",["T_WHITESPACE"," ",1460],["T_VARIABLE","$this",1460],["T_OBJECT_OPERATOR","->",1460],["T_STRING","_getCacheId",1460],"(",["T_VARIABLE","$tableCacheKey",1460],",",["T_WHITESPACE"," ",1460],["T_VARIABLE","$ddlType",1460],")",";",["T_WHITESPACE","\n            ",1460],["T_VARIABLE","$data",1461],["T_WHITESPACE"," ",1461],"=",["T_WHITESPACE"," ",1461],["T_VARIABLE","$this",1461],["T_OBJECT_OPERATOR","->",1461],["T_STRING","_cacheAdapter",1461],["T_OBJECT_OPERATOR","->",1461],["T_STRING","load",1461],"(",["T_VARIABLE","$cacheId",1461],")",";",["T_WHITESPACE","\n            ",1461],["T_IF","if",1462],["T_WHITESPACE"," ",1462],"(",["T_VARIABLE","$data",1462],["T_WHITESPACE"," ",1462],["T_IS_NOT_IDENTICAL","!==",1462],["T_WHITESPACE"," ",1462],["T_STRING","false",1462],")",["T_WHITESPACE"," ",1462],"{",["T_WHITESPACE","\n                ",1462],["T_VARIABLE","$data",1463],["T_WHITESPACE"," ",1463],"=",["T_WHITESPACE"," ",1463],["T_STRING","unserialize",1463],"(",["T_VARIABLE","$data",1463],")",";",["T_WHITESPACE","\n                ",1463],["T_VARIABLE","$this",1464],["T_OBJECT_OPERATOR","->",1464],["T_STRING","_ddlCache",1464],"[",["T_VARIABLE","$ddlType",1464],"]","[",["T_VARIABLE","$tableCacheKey",1464],"]",["T_WHITESPACE"," ",1464],"=",["T_WHITESPACE"," ",1464],["T_VARIABLE","$data",1464],";",["T_WHITESPACE","\n            ",1464],"}",["T_WHITESPACE","\n            ",1465],["T_RETURN","return",1466],["T_WHITESPACE"," ",1466],["T_VARIABLE","$data",1466],";",["T_WHITESPACE","\n        ",1466],"}",["T_WHITESPACE","\n\n        ",1467],["T_RETURN","return",1469],["T_WHITESPACE"," ",1469],["T_STRING","false",1469],";",["T_WHITESPACE","\n    ",1469],"}",["T_WHITESPACE","\n\n    ",1470],["T_DOC_COMMENT","\/**\n     * Save DDL data into cache\n     *\n     * @param string $tableCacheKey\n     * @param int $ddlType\n     * @param array $data\n     * @return $this\n     *\/",1472],["T_WHITESPACE","\n    ",1479],["T_PUBLIC","public",1480],["T_WHITESPACE"," ",1480],["T_FUNCTION","function",1480],["T_WHITESPACE"," ",1480],["T_STRING","saveDdlCache",1480],"(",["T_VARIABLE","$tableCacheKey",1480],",",["T_WHITESPACE"," ",1480],["T_VARIABLE","$ddlType",1480],",",["T_WHITESPACE"," ",1480],["T_VARIABLE","$data",1480],")",["T_WHITESPACE","\n    ",1480],"{",["T_WHITESPACE","\n        ",1481],["T_IF","if",1482],["T_WHITESPACE"," ",1482],"(","!",["T_VARIABLE","$this",1482],["T_OBJECT_OPERATOR","->",1482],["T_STRING","_isDdlCacheAllowed",1482],")",["T_WHITESPACE"," ",1482],"{",["T_WHITESPACE","\n            ",1482],["T_RETURN","return",1483],["T_WHITESPACE"," ",1483],["T_VARIABLE","$this",1483],";",["T_WHITESPACE","\n        ",1483],"}",["T_WHITESPACE","\n        ",1484],["T_VARIABLE","$this",1485],["T_OBJECT_OPERATOR","->",1485],["T_STRING","_ddlCache",1485],"[",["T_VARIABLE","$ddlType",1485],"]","[",["T_VARIABLE","$tableCacheKey",1485],"]",["T_WHITESPACE"," ",1485],"=",["T_WHITESPACE"," ",1485],["T_VARIABLE","$data",1485],";",["T_WHITESPACE","\n\n        ",1485],["T_IF","if",1487],["T_WHITESPACE"," ",1487],"(",["T_VARIABLE","$this",1487],["T_OBJECT_OPERATOR","->",1487],["T_STRING","_cacheAdapter",1487],")",["T_WHITESPACE"," ",1487],"{",["T_WHITESPACE","\n            ",1487],["T_VARIABLE","$cacheId",1488],["T_WHITESPACE"," ",1488],"=",["T_WHITESPACE"," ",1488],["T_VARIABLE","$this",1488],["T_OBJECT_OPERATOR","->",1488],["T_STRING","_getCacheId",1488],"(",["T_VARIABLE","$tableCacheKey",1488],",",["T_WHITESPACE"," ",1488],["T_VARIABLE","$ddlType",1488],")",";",["T_WHITESPACE","\n            ",1488],["T_VARIABLE","$data",1489],["T_WHITESPACE"," ",1489],"=",["T_WHITESPACE"," ",1489],["T_STRING","serialize",1489],"(",["T_VARIABLE","$data",1489],")",";",["T_WHITESPACE","\n            ",1489],["T_VARIABLE","$this",1490],["T_OBJECT_OPERATOR","->",1490],["T_STRING","_cacheAdapter",1490],["T_OBJECT_OPERATOR","->",1490],["T_STRING","save",1490],"(",["T_VARIABLE","$data",1490],",",["T_WHITESPACE"," ",1490],["T_VARIABLE","$cacheId",1490],",",["T_WHITESPACE"," ",1490],"[",["T_STRING","self",1490],["T_DOUBLE_COLON","::",1490],["T_STRING","DDL_CACHE_TAG",1490],"]",")",";",["T_WHITESPACE","\n        ",1490],"}",["T_WHITESPACE","\n\n        ",1491],["T_RETURN","return",1493],["T_WHITESPACE"," ",1493],["T_VARIABLE","$this",1493],";",["T_WHITESPACE","\n    ",1493],"}",["T_WHITESPACE","\n\n    ",1494],["T_DOC_COMMENT","\/**\n     * Reset cached DDL data from cache\n     * if table name is null - reset all cached DDL data\n     *\n     * @param string $tableName\n     * @param string $schemaName OPTIONAL\n     * @return $this\n     *\/",1496],["T_WHITESPACE","\n    ",1503],["T_PUBLIC","public",1504],["T_WHITESPACE"," ",1504],["T_FUNCTION","function",1504],["T_WHITESPACE"," ",1504],["T_STRING","resetDdlCache",1504],"(",["T_VARIABLE","$tableName",1504],["T_WHITESPACE"," ",1504],"=",["T_WHITESPACE"," ",1504],["T_STRING","null",1504],",",["T_WHITESPACE"," ",1504],["T_VARIABLE","$schemaName",1504],["T_WHITESPACE"," ",1504],"=",["T_WHITESPACE"," ",1504],["T_STRING","null",1504],")",["T_WHITESPACE","\n    ",1504],"{",["T_WHITESPACE","\n        ",1505],["T_IF","if",1506],["T_WHITESPACE"," ",1506],"(","!",["T_VARIABLE","$this",1506],["T_OBJECT_OPERATOR","->",1506],["T_STRING","_isDdlCacheAllowed",1506],")",["T_WHITESPACE"," ",1506],"{",["T_WHITESPACE","\n            ",1506],["T_RETURN","return",1507],["T_WHITESPACE"," ",1507],["T_VARIABLE","$this",1507],";",["T_WHITESPACE","\n        ",1507],"}",["T_WHITESPACE","\n        ",1508],["T_IF","if",1509],["T_WHITESPACE"," ",1509],"(",["T_VARIABLE","$tableName",1509],["T_WHITESPACE"," ",1509],["T_IS_IDENTICAL","===",1509],["T_WHITESPACE"," ",1509],["T_STRING","null",1509],")",["T_WHITESPACE"," ",1509],"{",["T_WHITESPACE","\n            ",1509],["T_VARIABLE","$this",1510],["T_OBJECT_OPERATOR","->",1510],["T_STRING","_ddlCache",1510],["T_WHITESPACE"," ",1510],"=",["T_WHITESPACE"," ",1510],"[","]",";",["T_WHITESPACE","\n            ",1510],["T_IF","if",1511],["T_WHITESPACE"," ",1511],"(",["T_VARIABLE","$this",1511],["T_OBJECT_OPERATOR","->",1511],["T_STRING","_cacheAdapter",1511],")",["T_WHITESPACE"," ",1511],"{",["T_WHITESPACE","\n                ",1511],["T_VARIABLE","$this",1512],["T_OBJECT_OPERATOR","->",1512],["T_STRING","_cacheAdapter",1512],["T_OBJECT_OPERATOR","->",1512],["T_STRING","clean",1512],"(",["T_NS_SEPARATOR","\\",1512],["T_STRING","Zend_Cache",1512],["T_DOUBLE_COLON","::",1512],["T_STRING","CLEANING_MODE_MATCHING_TAG",1512],",",["T_WHITESPACE"," ",1512],"[",["T_STRING","self",1512],["T_DOUBLE_COLON","::",1512],["T_STRING","DDL_CACHE_TAG",1512],"]",")",";",["T_WHITESPACE","\n            ",1512],"}",["T_WHITESPACE","\n        ",1513],"}",["T_WHITESPACE"," ",1514],["T_ELSE","else",1514],["T_WHITESPACE"," ",1514],"{",["T_WHITESPACE","\n            ",1514],["T_VARIABLE","$cacheKey",1515],["T_WHITESPACE"," ",1515],"=",["T_WHITESPACE"," ",1515],["T_VARIABLE","$this",1515],["T_OBJECT_OPERATOR","->",1515],["T_STRING","_getTableName",1515],"(",["T_VARIABLE","$tableName",1515],",",["T_WHITESPACE"," ",1515],["T_VARIABLE","$schemaName",1515],")",";",["T_WHITESPACE","\n\n            ",1515],["T_VARIABLE","$ddlTypes",1517],["T_WHITESPACE"," ",1517],"=",["T_WHITESPACE"," ",1517],"[",["T_STRING","self",1517],["T_DOUBLE_COLON","::",1517],["T_STRING","DDL_DESCRIBE",1517],",",["T_WHITESPACE"," ",1517],["T_STRING","self",1517],["T_DOUBLE_COLON","::",1517],["T_STRING","DDL_CREATE",1517],",",["T_WHITESPACE"," ",1517],["T_STRING","self",1517],["T_DOUBLE_COLON","::",1517],["T_STRING","DDL_INDEX",1517],",",["T_WHITESPACE"," ",1517],["T_STRING","self",1517],["T_DOUBLE_COLON","::",1517],["T_STRING","DDL_FOREIGN_KEY",1517],"]",";",["T_WHITESPACE","\n            ",1517],["T_FOREACH","foreach",1518],["T_WHITESPACE"," ",1518],"(",["T_VARIABLE","$ddlTypes",1518],["T_WHITESPACE"," ",1518],["T_AS","as",1518],["T_WHITESPACE"," ",1518],["T_VARIABLE","$ddlType",1518],")",["T_WHITESPACE"," ",1518],"{",["T_WHITESPACE","\n                ",1518],["T_UNSET","unset",1519],"(",["T_VARIABLE","$this",1519],["T_OBJECT_OPERATOR","->",1519],["T_STRING","_ddlCache",1519],"[",["T_VARIABLE","$ddlType",1519],"]","[",["T_VARIABLE","$cacheKey",1519],"]",")",";",["T_WHITESPACE","\n            ",1519],"}",["T_WHITESPACE","\n\n            ",1520],["T_IF","if",1522],["T_WHITESPACE"," ",1522],"(",["T_VARIABLE","$this",1522],["T_OBJECT_OPERATOR","->",1522],["T_STRING","_cacheAdapter",1522],")",["T_WHITESPACE"," ",1522],"{",["T_WHITESPACE","\n                ",1522],["T_FOREACH","foreach",1523],["T_WHITESPACE"," ",1523],"(",["T_VARIABLE","$ddlTypes",1523],["T_WHITESPACE"," ",1523],["T_AS","as",1523],["T_WHITESPACE"," ",1523],["T_VARIABLE","$ddlType",1523],")",["T_WHITESPACE"," ",1523],"{",["T_WHITESPACE","\n                    ",1523],["T_VARIABLE","$cacheId",1524],["T_WHITESPACE"," ",1524],"=",["T_WHITESPACE"," ",1524],["T_VARIABLE","$this",1524],["T_OBJECT_OPERATOR","->",1524],["T_STRING","_getCacheId",1524],"(",["T_VARIABLE","$cacheKey",1524],",",["T_WHITESPACE"," ",1524],["T_VARIABLE","$ddlType",1524],")",";",["T_WHITESPACE","\n                    ",1524],["T_VARIABLE","$this",1525],["T_OBJECT_OPERATOR","->",1525],["T_STRING","_cacheAdapter",1525],["T_OBJECT_OPERATOR","->",1525],["T_STRING","remove",1525],"(",["T_VARIABLE","$cacheId",1525],")",";",["T_WHITESPACE","\n                ",1525],"}",["T_WHITESPACE","\n            ",1526],"}",["T_WHITESPACE","\n        ",1527],"}",["T_WHITESPACE","\n\n        ",1528],["T_RETURN","return",1530],["T_WHITESPACE"," ",1530],["T_VARIABLE","$this",1530],";",["T_WHITESPACE","\n    ",1530],"}",["T_WHITESPACE","\n\n    ",1531],["T_DOC_COMMENT","\/**\n     * Disallow DDL caching\n     * @return $this\n     *\/",1533],["T_WHITESPACE","\n    ",1536],["T_PUBLIC","public",1537],["T_WHITESPACE"," ",1537],["T_FUNCTION","function",1537],["T_WHITESPACE"," ",1537],["T_STRING","disallowDdlCache",1537],"(",")",["T_WHITESPACE","\n    ",1537],"{",["T_WHITESPACE","\n        ",1538],["T_VARIABLE","$this",1539],["T_OBJECT_OPERATOR","->",1539],["T_STRING","_isDdlCacheAllowed",1539],["T_WHITESPACE"," ",1539],"=",["T_WHITESPACE"," ",1539],["T_STRING","false",1539],";",["T_WHITESPACE","\n        ",1539],["T_RETURN","return",1540],["T_WHITESPACE"," ",1540],["T_VARIABLE","$this",1540],";",["T_WHITESPACE","\n    ",1540],"}",["T_WHITESPACE","\n\n    ",1541],["T_DOC_COMMENT","\/**\n     * Allow DDL caching\n     * @return $this\n     *\/",1543],["T_WHITESPACE","\n    ",1546],["T_PUBLIC","public",1547],["T_WHITESPACE"," ",1547],["T_FUNCTION","function",1547],["T_WHITESPACE"," ",1547],["T_STRING","allowDdlCache",1547],"(",")",["T_WHITESPACE","\n    ",1547],"{",["T_WHITESPACE","\n        ",1548],["T_VARIABLE","$this",1549],["T_OBJECT_OPERATOR","->",1549],["T_STRING","_isDdlCacheAllowed",1549],["T_WHITESPACE"," ",1549],"=",["T_WHITESPACE"," ",1549],["T_STRING","true",1549],";",["T_WHITESPACE","\n        ",1549],["T_RETURN","return",1550],["T_WHITESPACE"," ",1550],["T_VARIABLE","$this",1550],";",["T_WHITESPACE","\n    ",1550],"}",["T_WHITESPACE","\n\n    ",1551],["T_DOC_COMMENT","\/**\n     * Returns the column descriptions for a table.\n     *\n     * The return value is an associative array keyed by the column name,\n     * as returned by the RDBMS.\n     *\n     * The value of each array element is an associative array\n     * with the following keys:\n     *\n     * SCHEMA_NAME      => string; name of database or schema\n     * TABLE_NAME       => string;\n     * COLUMN_NAME      => string; column name\n     * COLUMN_POSITION  => number; ordinal position of column in table\n     * DATA_TYPE        => string; SQL datatype name of column\n     * DEFAULT          => string; default expression of column, null if none\n     * NULLABLE         => boolean; true if column can have nulls\n     * LENGTH           => number; length of CHAR\/VARCHAR\n     * SCALE            => number; scale of NUMERIC\/DECIMAL\n     * PRECISION        => number; precision of NUMERIC\/DECIMAL\n     * UNSIGNED         => boolean; unsigned property of an integer type\n     * PRIMARY          => boolean; true if column is part of the primary key\n     * PRIMARY_POSITION => integer; position of column in primary key\n     * IDENTITY         => integer; true if column is auto-generated with unique values\n     *\n     * @param string $tableName\n     * @param string $schemaName OPTIONAL\n     * @return array\n     *\/",1553],["T_WHITESPACE","\n    ",1580],["T_PUBLIC","public",1581],["T_WHITESPACE"," ",1581],["T_FUNCTION","function",1581],["T_WHITESPACE"," ",1581],["T_STRING","describeTable",1581],"(",["T_VARIABLE","$tableName",1581],",",["T_WHITESPACE"," ",1581],["T_VARIABLE","$schemaName",1581],["T_WHITESPACE"," ",1581],"=",["T_WHITESPACE"," ",1581],["T_STRING","null",1581],")",["T_WHITESPACE","\n    ",1581],"{",["T_WHITESPACE","\n        ",1582],["T_VARIABLE","$cacheKey",1583],["T_WHITESPACE"," ",1583],"=",["T_WHITESPACE"," ",1583],["T_VARIABLE","$this",1583],["T_OBJECT_OPERATOR","->",1583],["T_STRING","_getTableName",1583],"(",["T_VARIABLE","$tableName",1583],",",["T_WHITESPACE"," ",1583],["T_VARIABLE","$schemaName",1583],")",";",["T_WHITESPACE","\n        ",1583],["T_VARIABLE","$ddl",1584],["T_WHITESPACE"," ",1584],"=",["T_WHITESPACE"," ",1584],["T_VARIABLE","$this",1584],["T_OBJECT_OPERATOR","->",1584],["T_STRING","loadDdlCache",1584],"(",["T_VARIABLE","$cacheKey",1584],",",["T_WHITESPACE"," ",1584],["T_STRING","self",1584],["T_DOUBLE_COLON","::",1584],["T_STRING","DDL_DESCRIBE",1584],")",";",["T_WHITESPACE","\n        ",1584],["T_IF","if",1585],["T_WHITESPACE"," ",1585],"(",["T_VARIABLE","$ddl",1585],["T_WHITESPACE"," ",1585],["T_IS_IDENTICAL","===",1585],["T_WHITESPACE"," ",1585],["T_STRING","false",1585],")",["T_WHITESPACE"," ",1585],"{",["T_WHITESPACE","\n            ",1585],["T_VARIABLE","$ddl",1586],["T_WHITESPACE"," ",1586],"=",["T_WHITESPACE"," ",1586],["T_STRING","parent",1586],["T_DOUBLE_COLON","::",1586],["T_STRING","describeTable",1586],"(",["T_VARIABLE","$tableName",1586],",",["T_WHITESPACE"," ",1586],["T_VARIABLE","$schemaName",1586],")",";",["T_WHITESPACE","\n            ",1586],["T_DOC_COMMENT","\/**\n             * Remove bug in some MySQL versions, when int-column without default value is described as:\n             * having default empty string value\n             *\/",1587],["T_WHITESPACE","\n            ",1590],["T_VARIABLE","$affected",1591],["T_WHITESPACE"," ",1591],"=",["T_WHITESPACE"," ",1591],"[",["T_CONSTANT_ENCAPSED_STRING","'tinyint'",1591],",",["T_WHITESPACE"," ",1591],["T_CONSTANT_ENCAPSED_STRING","'smallint'",1591],",",["T_WHITESPACE"," ",1591],["T_CONSTANT_ENCAPSED_STRING","'mediumint'",1591],",",["T_WHITESPACE"," ",1591],["T_CONSTANT_ENCAPSED_STRING","'int'",1591],",",["T_WHITESPACE"," ",1591],["T_CONSTANT_ENCAPSED_STRING","'bigint'",1591],"]",";",["T_WHITESPACE","\n            ",1591],["T_FOREACH","foreach",1592],["T_WHITESPACE"," ",1592],"(",["T_VARIABLE","$ddl",1592],["T_WHITESPACE"," ",1592],["T_AS","as",1592],["T_WHITESPACE"," ",1592],["T_VARIABLE","$key",1592],["T_WHITESPACE"," ",1592],["T_DOUBLE_ARROW","=>",1592],["T_WHITESPACE"," ",1592],["T_VARIABLE","$columnData",1592],")",["T_WHITESPACE"," ",1592],"{",["T_WHITESPACE","\n                ",1592],["T_IF","if",1593],["T_WHITESPACE"," ",1593],"(","(",["T_VARIABLE","$columnData",1593],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1593],"]",["T_WHITESPACE"," ",1593],["T_IS_IDENTICAL","===",1593],["T_WHITESPACE"," ",1593],["T_CONSTANT_ENCAPSED_STRING","''",1593],")",["T_WHITESPACE"," ",1593],["T_BOOLEAN_AND","&&",1593],["T_WHITESPACE"," ",1593],"(",["T_STRING","array_search",1593],"(",["T_VARIABLE","$columnData",1593],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",1593],"]",",",["T_WHITESPACE"," ",1593],["T_VARIABLE","$affected",1593],")",["T_WHITESPACE"," ",1593],["T_IS_NOT_IDENTICAL","!==",1593],["T_WHITESPACE"," ",1593],["T_STRING","false",1593],")",")",["T_WHITESPACE"," ",1593],"{",["T_WHITESPACE","\n                    ",1593],["T_VARIABLE","$ddl",1594],"[",["T_VARIABLE","$key",1594],"]","[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1594],"]",["T_WHITESPACE"," ",1594],"=",["T_WHITESPACE"," ",1594],["T_STRING","null",1594],";",["T_WHITESPACE","\n                ",1594],"}",["T_WHITESPACE","\n            ",1595],"}",["T_WHITESPACE","\n            ",1596],["T_VARIABLE","$this",1597],["T_OBJECT_OPERATOR","->",1597],["T_STRING","saveDdlCache",1597],"(",["T_VARIABLE","$cacheKey",1597],",",["T_WHITESPACE"," ",1597],["T_STRING","self",1597],["T_DOUBLE_COLON","::",1597],["T_STRING","DDL_DESCRIBE",1597],",",["T_WHITESPACE"," ",1597],["T_VARIABLE","$ddl",1597],")",";",["T_WHITESPACE","\n        ",1597],"}",["T_WHITESPACE","\n\n        ",1598],["T_RETURN","return",1600],["T_WHITESPACE"," ",1600],["T_VARIABLE","$ddl",1600],";",["T_WHITESPACE","\n    ",1600],"}",["T_WHITESPACE","\n\n    ",1601],["T_DOC_COMMENT","\/**\n     * Format described column to definition, ready to be added to ddl table.\n     * Return array with keys: name, type, length, options, comment\n     *\n     * @param  array $columnData\n     * @return array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",1603],["T_WHITESPACE","\n    ",1611],["T_PUBLIC","public",1612],["T_WHITESPACE"," ",1612],["T_FUNCTION","function",1612],["T_WHITESPACE"," ",1612],["T_STRING","getColumnCreateByDescribe",1612],"(",["T_VARIABLE","$columnData",1612],")",["T_WHITESPACE","\n    ",1612],"{",["T_WHITESPACE","\n        ",1613],["T_VARIABLE","$type",1614],["T_WHITESPACE"," ",1614],"=",["T_WHITESPACE"," ",1614],["T_VARIABLE","$this",1614],["T_OBJECT_OPERATOR","->",1614],["T_STRING","_getColumnTypeByDdl",1614],"(",["T_VARIABLE","$columnData",1614],")",";",["T_WHITESPACE","\n        ",1614],["T_VARIABLE","$options",1615],["T_WHITESPACE"," ",1615],"=",["T_WHITESPACE"," ",1615],"[","]",";",["T_WHITESPACE","\n\n        ",1615],["T_IF","if",1617],["T_WHITESPACE"," ",1617],"(",["T_VARIABLE","$columnData",1617],"[",["T_CONSTANT_ENCAPSED_STRING","'IDENTITY'",1617],"]",["T_WHITESPACE"," ",1617],["T_IS_IDENTICAL","===",1617],["T_WHITESPACE"," ",1617],["T_STRING","true",1617],")",["T_WHITESPACE"," ",1617],"{",["T_WHITESPACE","\n            ",1617],["T_VARIABLE","$options",1618],"[",["T_CONSTANT_ENCAPSED_STRING","'identity'",1618],"]",["T_WHITESPACE"," ",1618],"=",["T_WHITESPACE"," ",1618],["T_STRING","true",1618],";",["T_WHITESPACE","\n        ",1618],"}",["T_WHITESPACE","\n        ",1619],["T_IF","if",1620],["T_WHITESPACE"," ",1620],"(",["T_VARIABLE","$columnData",1620],"[",["T_CONSTANT_ENCAPSED_STRING","'UNSIGNED'",1620],"]",["T_WHITESPACE"," ",1620],["T_IS_IDENTICAL","===",1620],["T_WHITESPACE"," ",1620],["T_STRING","true",1620],")",["T_WHITESPACE"," ",1620],"{",["T_WHITESPACE","\n            ",1620],["T_VARIABLE","$options",1621],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1621],"]",["T_WHITESPACE"," ",1621],"=",["T_WHITESPACE"," ",1621],["T_STRING","true",1621],";",["T_WHITESPACE","\n        ",1621],"}",["T_WHITESPACE","\n        ",1622],["T_IF","if",1623],["T_WHITESPACE"," ",1623],"(",["T_VARIABLE","$columnData",1623],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",1623],"]",["T_WHITESPACE"," ",1623],["T_IS_IDENTICAL","===",1623],["T_WHITESPACE"," ",1623],["T_STRING","false",1623],["T_WHITESPACE","\n            ",1623],["T_BOOLEAN_AND","&&",1624],["T_WHITESPACE"," ",1624],"!","(",["T_VARIABLE","$type",1624],["T_WHITESPACE"," ",1624],["T_IS_EQUAL","==",1624],["T_WHITESPACE"," ",1624],["T_STRING","Table",1624],["T_DOUBLE_COLON","::",1624],["T_STRING","TYPE_TEXT",1624],["T_WHITESPACE"," ",1624],["T_BOOLEAN_AND","&&",1624],["T_WHITESPACE"," ",1624],["T_STRING","strlen",1624],"(",["T_VARIABLE","$columnData",1624],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1624],"]",")",["T_WHITESPACE"," ",1624],["T_IS_NOT_EQUAL","!=",1624],["T_WHITESPACE"," ",1624],["T_LNUMBER","0",1624],")",["T_WHITESPACE","\n        ",1624],")",["T_WHITESPACE"," ",1625],"{",["T_WHITESPACE","\n            ",1625],["T_VARIABLE","$options",1626],"[",["T_CONSTANT_ENCAPSED_STRING","'nullable'",1626],"]",["T_WHITESPACE"," ",1626],"=",["T_WHITESPACE"," ",1626],["T_STRING","false",1626],";",["T_WHITESPACE","\n        ",1626],"}",["T_WHITESPACE","\n        ",1627],["T_IF","if",1628],["T_WHITESPACE"," ",1628],"(",["T_VARIABLE","$columnData",1628],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",1628],"]",["T_WHITESPACE"," ",1628],["T_IS_IDENTICAL","===",1628],["T_WHITESPACE"," ",1628],["T_STRING","true",1628],")",["T_WHITESPACE"," ",1628],"{",["T_WHITESPACE","\n            ",1628],["T_VARIABLE","$options",1629],"[",["T_CONSTANT_ENCAPSED_STRING","'primary'",1629],"]",["T_WHITESPACE"," ",1629],"=",["T_WHITESPACE"," ",1629],["T_STRING","true",1629],";",["T_WHITESPACE","\n        ",1629],"}",["T_WHITESPACE","\n        ",1630],["T_IF","if",1631],["T_WHITESPACE"," ",1631],"(","!",["T_STRING","is_null",1631],"(",["T_VARIABLE","$columnData",1631],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1631],"]",")",["T_WHITESPACE","\n            ",1631],["T_BOOLEAN_AND","&&",1632],["T_WHITESPACE"," ",1632],["T_VARIABLE","$type",1632],["T_WHITESPACE"," ",1632],["T_IS_NOT_EQUAL","!=",1632],["T_WHITESPACE"," ",1632],["T_STRING","Table",1632],["T_DOUBLE_COLON","::",1632],["T_STRING","TYPE_TEXT",1632],["T_WHITESPACE","\n        ",1632],")",["T_WHITESPACE"," ",1633],"{",["T_WHITESPACE","\n            ",1633],["T_VARIABLE","$options",1634],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",1634],"]",["T_WHITESPACE"," ",1634],"=",["T_WHITESPACE"," ",1634],["T_VARIABLE","$this",1634],["T_OBJECT_OPERATOR","->",1634],["T_STRING","quote",1634],"(",["T_VARIABLE","$columnData",1634],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1634],"]",")",";",["T_WHITESPACE","\n        ",1634],"}",["T_WHITESPACE","\n        ",1635],["T_IF","if",1636],["T_WHITESPACE"," ",1636],"(",["T_STRING","strlen",1636],"(",["T_VARIABLE","$columnData",1636],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",1636],"]",")",["T_WHITESPACE"," ",1636],">",["T_WHITESPACE"," ",1636],["T_LNUMBER","0",1636],")",["T_WHITESPACE"," ",1636],"{",["T_WHITESPACE","\n            ",1636],["T_VARIABLE","$options",1637],"[",["T_CONSTANT_ENCAPSED_STRING","'scale'",1637],"]",["T_WHITESPACE"," ",1637],"=",["T_WHITESPACE"," ",1637],["T_VARIABLE","$columnData",1637],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",1637],"]",";",["T_WHITESPACE","\n        ",1637],"}",["T_WHITESPACE","\n        ",1638],["T_IF","if",1639],["T_WHITESPACE"," ",1639],"(",["T_STRING","strlen",1639],"(",["T_VARIABLE","$columnData",1639],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",1639],"]",")",["T_WHITESPACE"," ",1639],">",["T_WHITESPACE"," ",1639],["T_LNUMBER","0",1639],")",["T_WHITESPACE"," ",1639],"{",["T_WHITESPACE","\n            ",1639],["T_VARIABLE","$options",1640],"[",["T_CONSTANT_ENCAPSED_STRING","'precision'",1640],"]",["T_WHITESPACE"," ",1640],"=",["T_WHITESPACE"," ",1640],["T_VARIABLE","$columnData",1640],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",1640],"]",";",["T_WHITESPACE","\n        ",1640],"}",["T_WHITESPACE","\n\n        ",1641],["T_VARIABLE","$comment",1643],["T_WHITESPACE"," ",1643],"=",["T_WHITESPACE"," ",1643],["T_VARIABLE","$this",1643],["T_OBJECT_OPERATOR","->",1643],["T_STRING","string",1643],["T_OBJECT_OPERATOR","->",1643],["T_STRING","upperCaseWords",1643],"(",["T_VARIABLE","$columnData",1643],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1643],"]",",",["T_WHITESPACE"," ",1643],["T_CONSTANT_ENCAPSED_STRING","'_'",1643],",",["T_WHITESPACE"," ",1643],["T_CONSTANT_ENCAPSED_STRING","' '",1643],")",";",["T_WHITESPACE","\n\n        ",1643],["T_VARIABLE","$result",1645],["T_WHITESPACE"," ",1645],"=",["T_WHITESPACE"," ",1645],"[",["T_WHITESPACE","\n            ",1645],["T_CONSTANT_ENCAPSED_STRING","'name'",1646],["T_WHITESPACE","      ",1646],["T_DOUBLE_ARROW","=>",1646],["T_WHITESPACE"," ",1646],["T_VARIABLE","$columnData",1646],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1646],"]",",",["T_WHITESPACE","\n            ",1646],["T_CONSTANT_ENCAPSED_STRING","'type'",1647],["T_WHITESPACE","      ",1647],["T_DOUBLE_ARROW","=>",1647],["T_WHITESPACE"," ",1647],["T_VARIABLE","$type",1647],",",["T_WHITESPACE","\n            ",1647],["T_CONSTANT_ENCAPSED_STRING","'length'",1648],["T_WHITESPACE","    ",1648],["T_DOUBLE_ARROW","=>",1648],["T_WHITESPACE"," ",1648],["T_VARIABLE","$columnData",1648],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",1648],"]",",",["T_WHITESPACE","\n            ",1648],["T_CONSTANT_ENCAPSED_STRING","'options'",1649],["T_WHITESPACE","   ",1649],["T_DOUBLE_ARROW","=>",1649],["T_WHITESPACE"," ",1649],["T_VARIABLE","$options",1649],",",["T_WHITESPACE","\n            ",1649],["T_CONSTANT_ENCAPSED_STRING","'comment'",1650],["T_WHITESPACE","   ",1650],["T_DOUBLE_ARROW","=>",1650],["T_WHITESPACE"," ",1650],["T_VARIABLE","$comment",1650],",",["T_WHITESPACE","\n        ",1650],"]",";",["T_WHITESPACE","\n\n        ",1651],["T_RETURN","return",1653],["T_WHITESPACE"," ",1653],["T_VARIABLE","$result",1653],";",["T_WHITESPACE","\n    ",1653],"}",["T_WHITESPACE","\n\n    ",1654],["T_DOC_COMMENT","\/**\n     * Create \\Magento\\Framework\\DB\\Ddl\\Table object by data from describe table\n     *\n     * @param string $tableName\n     * @param string $newTableName\n     * @return Table\n     *\/",1656],["T_WHITESPACE","\n    ",1662],["T_PUBLIC","public",1663],["T_WHITESPACE"," ",1663],["T_FUNCTION","function",1663],["T_WHITESPACE"," ",1663],["T_STRING","createTableByDdl",1663],"(",["T_VARIABLE","$tableName",1663],",",["T_WHITESPACE"," ",1663],["T_VARIABLE","$newTableName",1663],")",["T_WHITESPACE","\n    ",1663],"{",["T_WHITESPACE","\n        ",1664],["T_VARIABLE","$describe",1665],["T_WHITESPACE"," ",1665],"=",["T_WHITESPACE"," ",1665],["T_VARIABLE","$this",1665],["T_OBJECT_OPERATOR","->",1665],["T_STRING","describeTable",1665],"(",["T_VARIABLE","$tableName",1665],")",";",["T_WHITESPACE","\n        ",1665],["T_VARIABLE","$table",1666],["T_WHITESPACE"," ",1666],"=",["T_WHITESPACE"," ",1666],["T_VARIABLE","$this",1666],["T_OBJECT_OPERATOR","->",1666],["T_STRING","newTable",1666],"(",["T_VARIABLE","$newTableName",1666],")",["T_WHITESPACE","\n            ",1666],["T_OBJECT_OPERATOR","->",1667],["T_STRING","setComment",1667],"(",["T_VARIABLE","$this",1667],["T_OBJECT_OPERATOR","->",1667],["T_STRING","string",1667],["T_OBJECT_OPERATOR","->",1667],["T_STRING","upperCaseWords",1667],"(",["T_VARIABLE","$newTableName",1667],",",["T_WHITESPACE"," ",1667],["T_CONSTANT_ENCAPSED_STRING","'_'",1667],",",["T_WHITESPACE"," ",1667],["T_CONSTANT_ENCAPSED_STRING","' '",1667],")",")",";",["T_WHITESPACE","\n\n        ",1667],["T_FOREACH","foreach",1669],["T_WHITESPACE"," ",1669],"(",["T_VARIABLE","$describe",1669],["T_WHITESPACE"," ",1669],["T_AS","as",1669],["T_WHITESPACE"," ",1669],["T_VARIABLE","$columnData",1669],")",["T_WHITESPACE"," ",1669],"{",["T_WHITESPACE","\n            ",1669],["T_VARIABLE","$columnInfo",1670],["T_WHITESPACE"," ",1670],"=",["T_WHITESPACE"," ",1670],["T_VARIABLE","$this",1670],["T_OBJECT_OPERATOR","->",1670],["T_STRING","getColumnCreateByDescribe",1670],"(",["T_VARIABLE","$columnData",1670],")",";",["T_WHITESPACE","\n\n            ",1670],["T_VARIABLE","$table",1672],["T_OBJECT_OPERATOR","->",1672],["T_STRING","addColumn",1672],"(",["T_WHITESPACE","\n                ",1672],["T_VARIABLE","$columnInfo",1673],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",1673],"]",",",["T_WHITESPACE","\n                ",1673],["T_VARIABLE","$columnInfo",1674],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",1674],"]",",",["T_WHITESPACE","\n                ",1674],["T_VARIABLE","$columnInfo",1675],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",1675],"]",",",["T_WHITESPACE","\n                ",1675],["T_VARIABLE","$columnInfo",1676],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",1676],"]",",",["T_WHITESPACE","\n                ",1676],["T_VARIABLE","$columnInfo",1677],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1677],"]",["T_WHITESPACE","\n            ",1677],")",";",["T_WHITESPACE","\n        ",1678],"}",["T_WHITESPACE","\n\n        ",1679],["T_VARIABLE","$indexes",1681],["T_WHITESPACE"," ",1681],"=",["T_WHITESPACE"," ",1681],["T_VARIABLE","$this",1681],["T_OBJECT_OPERATOR","->",1681],["T_STRING","getIndexList",1681],"(",["T_VARIABLE","$tableName",1681],")",";",["T_WHITESPACE","\n        ",1681],["T_FOREACH","foreach",1682],["T_WHITESPACE"," ",1682],"(",["T_VARIABLE","$indexes",1682],["T_WHITESPACE"," ",1682],["T_AS","as",1682],["T_WHITESPACE"," ",1682],["T_VARIABLE","$indexData",1682],")",["T_WHITESPACE"," ",1682],"{",["T_WHITESPACE","\n            ",1682],["T_DOC_COMMENT","\/**\n             * Do not create primary index - it is created with identity column.\n             * For reliability check both name and type, because these values can start to differ in future.\n             *\/",1683],["T_WHITESPACE","\n            ",1686],["T_IF","if",1687],["T_WHITESPACE"," ",1687],"(","(",["T_VARIABLE","$indexData",1687],"[",["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",1687],"]",["T_WHITESPACE"," ",1687],["T_IS_EQUAL","==",1687],["T_WHITESPACE"," ",1687],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",1687],")",["T_WHITESPACE","\n                ",1687],["T_BOOLEAN_OR","||",1688],["T_WHITESPACE"," ",1688],"(",["T_VARIABLE","$indexData",1688],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",1688],"]",["T_WHITESPACE"," ",1688],["T_IS_EQUAL","==",1688],["T_WHITESPACE"," ",1688],["T_STRING","AdapterInterface",1688],["T_DOUBLE_COLON","::",1688],["T_STRING","INDEX_TYPE_PRIMARY",1688],")",["T_WHITESPACE","\n            ",1688],")",["T_WHITESPACE"," ",1689],"{",["T_WHITESPACE","\n                ",1689],["T_CONTINUE","continue",1690],";",["T_WHITESPACE","\n            ",1690],"}",["T_WHITESPACE","\n\n            ",1691],["T_VARIABLE","$fields",1693],["T_WHITESPACE"," ",1693],"=",["T_WHITESPACE"," ",1693],["T_VARIABLE","$indexData",1693],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",1693],"]",";",["T_WHITESPACE","\n            ",1693],["T_VARIABLE","$options",1694],["T_WHITESPACE"," ",1694],"=",["T_WHITESPACE"," ",1694],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",1694],["T_WHITESPACE"," ",1694],["T_DOUBLE_ARROW","=>",1694],["T_WHITESPACE"," ",1694],["T_VARIABLE","$indexData",1694],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",1694],"]","]",";",["T_WHITESPACE","\n            ",1694],["T_VARIABLE","$table",1695],["T_OBJECT_OPERATOR","->",1695],["T_STRING","addIndex",1695],"(",["T_VARIABLE","$this",1695],["T_OBJECT_OPERATOR","->",1695],["T_STRING","getIndexName",1695],"(",["T_VARIABLE","$newTableName",1695],",",["T_WHITESPACE"," ",1695],["T_VARIABLE","$fields",1695],",",["T_WHITESPACE"," ",1695],["T_VARIABLE","$indexData",1695],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",1695],"]",")",",",["T_WHITESPACE"," ",1695],["T_VARIABLE","$fields",1695],",",["T_WHITESPACE"," ",1695],["T_VARIABLE","$options",1695],")",";",["T_WHITESPACE","\n        ",1695],"}",["T_WHITESPACE","\n\n        ",1696],["T_VARIABLE","$foreignKeys",1698],["T_WHITESPACE"," ",1698],"=",["T_WHITESPACE"," ",1698],["T_VARIABLE","$this",1698],["T_OBJECT_OPERATOR","->",1698],["T_STRING","getForeignKeys",1698],"(",["T_VARIABLE","$tableName",1698],")",";",["T_WHITESPACE","\n        ",1698],["T_FOREACH","foreach",1699],["T_WHITESPACE"," ",1699],"(",["T_VARIABLE","$foreignKeys",1699],["T_WHITESPACE"," ",1699],["T_AS","as",1699],["T_WHITESPACE"," ",1699],["T_VARIABLE","$keyData",1699],")",["T_WHITESPACE"," ",1699],"{",["T_WHITESPACE","\n            ",1699],["T_VARIABLE","$fkName",1700],["T_WHITESPACE"," ",1700],"=",["T_WHITESPACE"," ",1700],["T_VARIABLE","$this",1700],["T_OBJECT_OPERATOR","->",1700],["T_STRING","getForeignKeyName",1700],"(",["T_WHITESPACE","\n                ",1700],["T_VARIABLE","$newTableName",1701],",",["T_WHITESPACE","\n                ",1701],["T_VARIABLE","$keyData",1702],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1702],"]",",",["T_WHITESPACE","\n                ",1702],["T_VARIABLE","$keyData",1703],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1703],"]",",",["T_WHITESPACE","\n                ",1703],["T_VARIABLE","$keyData",1704],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1704],"]",["T_WHITESPACE","\n            ",1704],")",";",["T_WHITESPACE","\n            ",1705],["T_VARIABLE","$onDelete",1706],["T_WHITESPACE"," ",1706],"=",["T_WHITESPACE"," ",1706],["T_VARIABLE","$this",1706],["T_OBJECT_OPERATOR","->",1706],["T_STRING","_getDdlAction",1706],"(",["T_VARIABLE","$keyData",1706],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_DELETE'",1706],"]",")",";",["T_WHITESPACE","\n\n            ",1706],["T_VARIABLE","$table",1708],["T_OBJECT_OPERATOR","->",1708],["T_STRING","addForeignKey",1708],"(",["T_WHITESPACE","\n                ",1708],["T_VARIABLE","$fkName",1709],",",["T_WHITESPACE","\n                ",1709],["T_VARIABLE","$keyData",1710],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",1710],"]",",",["T_WHITESPACE","\n                ",1710],["T_VARIABLE","$keyData",1711],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",1711],"]",",",["T_WHITESPACE","\n                ",1711],["T_VARIABLE","$keyData",1712],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",1712],"]",",",["T_WHITESPACE","\n                ",1712],["T_VARIABLE","$onDelete",1713],["T_WHITESPACE","\n            ",1713],")",";",["T_WHITESPACE","\n        ",1714],"}",["T_WHITESPACE","\n\n        ",1715],["T_COMMENT","\/\/ Set additional options\n",1717],["T_WHITESPACE","        ",1718],["T_VARIABLE","$tableData",1718],["T_WHITESPACE"," ",1718],"=",["T_WHITESPACE"," ",1718],["T_VARIABLE","$this",1718],["T_OBJECT_OPERATOR","->",1718],["T_STRING","showTableStatus",1718],"(",["T_VARIABLE","$tableName",1718],")",";",["T_WHITESPACE","\n        ",1718],["T_VARIABLE","$table",1719],["T_OBJECT_OPERATOR","->",1719],["T_STRING","setOption",1719],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",1719],",",["T_WHITESPACE"," ",1719],["T_VARIABLE","$tableData",1719],"[",["T_CONSTANT_ENCAPSED_STRING","'Engine'",1719],"]",")",";",["T_WHITESPACE","\n\n        ",1719],["T_RETURN","return",1721],["T_WHITESPACE"," ",1721],["T_VARIABLE","$table",1721],";",["T_WHITESPACE","\n    ",1721],"}",["T_WHITESPACE","\n\n    ",1722],["T_DOC_COMMENT","\/**\n     * Modify the column definition by data from describe table\n     *\n     * @param string $tableName\n     * @param string $columnName\n     * @param array $definition\n     * @param boolean $flushData\n     * @param string $schemaName\n     * @return $this\n     *\/",1724],["T_WHITESPACE","\n    ",1733],["T_PUBLIC","public",1734],["T_WHITESPACE"," ",1734],["T_FUNCTION","function",1734],["T_WHITESPACE"," ",1734],["T_STRING","modifyColumnByDdl",1734],"(",["T_VARIABLE","$tableName",1734],",",["T_WHITESPACE"," ",1734],["T_VARIABLE","$columnName",1734],",",["T_WHITESPACE"," ",1734],["T_VARIABLE","$definition",1734],",",["T_WHITESPACE"," ",1734],["T_VARIABLE","$flushData",1734],["T_WHITESPACE"," ",1734],"=",["T_WHITESPACE"," ",1734],["T_STRING","false",1734],",",["T_WHITESPACE"," ",1734],["T_VARIABLE","$schemaName",1734],["T_WHITESPACE"," ",1734],"=",["T_WHITESPACE"," ",1734],["T_STRING","null",1734],")",["T_WHITESPACE","\n    ",1734],"{",["T_WHITESPACE","\n        ",1735],["T_VARIABLE","$definition",1736],["T_WHITESPACE"," ",1736],"=",["T_WHITESPACE"," ",1736],["T_STRING","array_change_key_case",1736],"(",["T_VARIABLE","$definition",1736],",",["T_WHITESPACE"," ",1736],["T_STRING","CASE_UPPER",1736],")",";",["T_WHITESPACE","\n        ",1736],["T_VARIABLE","$definition",1737],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_TYPE'",1737],"]",["T_WHITESPACE"," ",1737],"=",["T_WHITESPACE"," ",1737],["T_VARIABLE","$this",1737],["T_OBJECT_OPERATOR","->",1737],["T_STRING","_getColumnTypeByDdl",1737],"(",["T_VARIABLE","$definition",1737],")",";",["T_WHITESPACE","\n        ",1737],["T_IF","if",1738],["T_WHITESPACE"," ",1738],"(",["T_STRING","array_key_exists",1738],"(",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1738],",",["T_WHITESPACE"," ",1738],["T_VARIABLE","$definition",1738],")",["T_WHITESPACE"," ",1738],["T_BOOLEAN_AND","&&",1738],["T_WHITESPACE"," ",1738],["T_STRING","is_null",1738],"(",["T_VARIABLE","$definition",1738],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1738],"]",")",")",["T_WHITESPACE"," ",1738],"{",["T_WHITESPACE","\n            ",1738],["T_UNSET","unset",1739],"(",["T_VARIABLE","$definition",1739],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",1739],"]",")",";",["T_WHITESPACE","\n        ",1739],"}",["T_WHITESPACE","\n\n        ",1740],["T_RETURN","return",1742],["T_WHITESPACE"," ",1742],["T_VARIABLE","$this",1742],["T_OBJECT_OPERATOR","->",1742],["T_STRING","modifyColumn",1742],"(",["T_VARIABLE","$tableName",1742],",",["T_WHITESPACE"," ",1742],["T_VARIABLE","$columnName",1742],",",["T_WHITESPACE"," ",1742],["T_VARIABLE","$definition",1742],",",["T_WHITESPACE"," ",1742],["T_VARIABLE","$flushData",1742],",",["T_WHITESPACE"," ",1742],["T_VARIABLE","$schemaName",1742],")",";",["T_WHITESPACE","\n    ",1742],"}",["T_WHITESPACE","\n\n    ",1743],["T_DOC_COMMENT","\/**\n     * Retrieve column data type by data from describe table\n     *\n     * @param array $column\n     * @return string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",1745],["T_WHITESPACE","\n    ",1751],["T_PROTECTED","protected",1752],["T_WHITESPACE"," ",1752],["T_FUNCTION","function",1752],["T_WHITESPACE"," ",1752],["T_STRING","_getColumnTypeByDdl",1752],"(",["T_VARIABLE","$column",1752],")",["T_WHITESPACE","\n    ",1752],"{",["T_WHITESPACE","\n        ",1753],["T_SWITCH","switch",1754],["T_WHITESPACE"," ",1754],"(",["T_VARIABLE","$column",1754],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",1754],"]",")",["T_WHITESPACE"," ",1754],"{",["T_WHITESPACE","\n            ",1754],["T_CASE","case",1755],["T_WHITESPACE"," ",1755],["T_CONSTANT_ENCAPSED_STRING","'bool'",1755],":",["T_WHITESPACE","\n                ",1755],["T_RETURN","return",1756],["T_WHITESPACE"," ",1756],["T_STRING","Table",1756],["T_DOUBLE_COLON","::",1756],["T_STRING","TYPE_BOOLEAN",1756],";",["T_WHITESPACE","\n            ",1756],["T_CASE","case",1757],["T_WHITESPACE"," ",1757],["T_CONSTANT_ENCAPSED_STRING","'tinytext'",1757],":",["T_WHITESPACE","\n            ",1757],["T_CASE","case",1758],["T_WHITESPACE"," ",1758],["T_CONSTANT_ENCAPSED_STRING","'char'",1758],":",["T_WHITESPACE","\n            ",1758],["T_CASE","case",1759],["T_WHITESPACE"," ",1759],["T_CONSTANT_ENCAPSED_STRING","'varchar'",1759],":",["T_WHITESPACE","\n            ",1759],["T_CASE","case",1760],["T_WHITESPACE"," ",1760],["T_CONSTANT_ENCAPSED_STRING","'text'",1760],":",["T_WHITESPACE","\n            ",1760],["T_CASE","case",1761],["T_WHITESPACE"," ",1761],["T_CONSTANT_ENCAPSED_STRING","'mediumtext'",1761],":",["T_WHITESPACE","\n            ",1761],["T_CASE","case",1762],["T_WHITESPACE"," ",1762],["T_CONSTANT_ENCAPSED_STRING","'longtext'",1762],":",["T_WHITESPACE","\n                ",1762],["T_RETURN","return",1763],["T_WHITESPACE"," ",1763],["T_STRING","Table",1763],["T_DOUBLE_COLON","::",1763],["T_STRING","TYPE_TEXT",1763],";",["T_WHITESPACE","\n            ",1763],["T_CASE","case",1764],["T_WHITESPACE"," ",1764],["T_CONSTANT_ENCAPSED_STRING","'blob'",1764],":",["T_WHITESPACE","\n            ",1764],["T_CASE","case",1765],["T_WHITESPACE"," ",1765],["T_CONSTANT_ENCAPSED_STRING","'mediumblob'",1765],":",["T_WHITESPACE","\n            ",1765],["T_CASE","case",1766],["T_WHITESPACE"," ",1766],["T_CONSTANT_ENCAPSED_STRING","'longblob'",1766],":",["T_WHITESPACE","\n                ",1766],["T_RETURN","return",1767],["T_WHITESPACE"," ",1767],["T_STRING","Table",1767],["T_DOUBLE_COLON","::",1767],["T_STRING","TYPE_BLOB",1767],";",["T_WHITESPACE","\n            ",1767],["T_CASE","case",1768],["T_WHITESPACE"," ",1768],["T_CONSTANT_ENCAPSED_STRING","'tinyint'",1768],":",["T_WHITESPACE","\n            ",1768],["T_CASE","case",1769],["T_WHITESPACE"," ",1769],["T_CONSTANT_ENCAPSED_STRING","'smallint'",1769],":",["T_WHITESPACE","\n                ",1769],["T_RETURN","return",1770],["T_WHITESPACE"," ",1770],["T_STRING","Table",1770],["T_DOUBLE_COLON","::",1770],["T_STRING","TYPE_SMALLINT",1770],";",["T_WHITESPACE","\n            ",1770],["T_CASE","case",1771],["T_WHITESPACE"," ",1771],["T_CONSTANT_ENCAPSED_STRING","'mediumint'",1771],":",["T_WHITESPACE","\n            ",1771],["T_CASE","case",1772],["T_WHITESPACE"," ",1772],["T_CONSTANT_ENCAPSED_STRING","'int'",1772],":",["T_WHITESPACE","\n                ",1772],["T_RETURN","return",1773],["T_WHITESPACE"," ",1773],["T_STRING","Table",1773],["T_DOUBLE_COLON","::",1773],["T_STRING","TYPE_INTEGER",1773],";",["T_WHITESPACE","\n            ",1773],["T_CASE","case",1774],["T_WHITESPACE"," ",1774],["T_CONSTANT_ENCAPSED_STRING","'bigint'",1774],":",["T_WHITESPACE","\n                ",1774],["T_RETURN","return",1775],["T_WHITESPACE"," ",1775],["T_STRING","Table",1775],["T_DOUBLE_COLON","::",1775],["T_STRING","TYPE_BIGINT",1775],";",["T_WHITESPACE","\n            ",1775],["T_CASE","case",1776],["T_WHITESPACE"," ",1776],["T_CONSTANT_ENCAPSED_STRING","'datetime'",1776],":",["T_WHITESPACE","\n                ",1776],["T_RETURN","return",1777],["T_WHITESPACE"," ",1777],["T_STRING","Table",1777],["T_DOUBLE_COLON","::",1777],["T_STRING","TYPE_DATETIME",1777],";",["T_WHITESPACE","\n            ",1777],["T_CASE","case",1778],["T_WHITESPACE"," ",1778],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",1778],":",["T_WHITESPACE","\n                ",1778],["T_RETURN","return",1779],["T_WHITESPACE"," ",1779],["T_STRING","Table",1779],["T_DOUBLE_COLON","::",1779],["T_STRING","TYPE_TIMESTAMP",1779],";",["T_WHITESPACE","\n            ",1779],["T_CASE","case",1780],["T_WHITESPACE"," ",1780],["T_CONSTANT_ENCAPSED_STRING","'date'",1780],":",["T_WHITESPACE","\n                ",1780],["T_RETURN","return",1781],["T_WHITESPACE"," ",1781],["T_STRING","Table",1781],["T_DOUBLE_COLON","::",1781],["T_STRING","TYPE_DATE",1781],";",["T_WHITESPACE","\n            ",1781],["T_CASE","case",1782],["T_WHITESPACE"," ",1782],["T_CONSTANT_ENCAPSED_STRING","'float'",1782],":",["T_WHITESPACE","\n                ",1782],["T_RETURN","return",1783],["T_WHITESPACE"," ",1783],["T_STRING","Table",1783],["T_DOUBLE_COLON","::",1783],["T_STRING","TYPE_FLOAT",1783],";",["T_WHITESPACE","\n            ",1783],["T_CASE","case",1784],["T_WHITESPACE"," ",1784],["T_CONSTANT_ENCAPSED_STRING","'decimal'",1784],":",["T_WHITESPACE","\n            ",1784],["T_CASE","case",1785],["T_WHITESPACE"," ",1785],["T_CONSTANT_ENCAPSED_STRING","'numeric'",1785],":",["T_WHITESPACE","\n                ",1785],["T_RETURN","return",1786],["T_WHITESPACE"," ",1786],["T_STRING","Table",1786],["T_DOUBLE_COLON","::",1786],["T_STRING","TYPE_DECIMAL",1786],";",["T_WHITESPACE","\n        ",1786],"}",["T_WHITESPACE","\n    ",1787],"}",["T_WHITESPACE","\n\n    ",1788],["T_DOC_COMMENT","\/**\n     * Change table storage engine\n     *\n     * @param string $tableName\n     * @param string $engine\n     * @param string $schemaName\n     * @return \\Zend_Db_Statement_Pdo\n     *\/",1790],["T_WHITESPACE","\n    ",1797],["T_PUBLIC","public",1798],["T_WHITESPACE"," ",1798],["T_FUNCTION","function",1798],["T_WHITESPACE"," ",1798],["T_STRING","changeTableEngine",1798],"(",["T_VARIABLE","$tableName",1798],",",["T_WHITESPACE"," ",1798],["T_VARIABLE","$engine",1798],",",["T_WHITESPACE"," ",1798],["T_VARIABLE","$schemaName",1798],["T_WHITESPACE"," ",1798],"=",["T_WHITESPACE"," ",1798],["T_STRING","null",1798],")",["T_WHITESPACE","\n    ",1798],"{",["T_WHITESPACE","\n        ",1799],["T_VARIABLE","$table",1800],["T_WHITESPACE"," ",1800],"=",["T_WHITESPACE"," ",1800],["T_VARIABLE","$this",1800],["T_OBJECT_OPERATOR","->",1800],["T_STRING","quoteIdentifier",1800],"(",["T_VARIABLE","$this",1800],["T_OBJECT_OPERATOR","->",1800],["T_STRING","_getTableName",1800],"(",["T_VARIABLE","$tableName",1800],",",["T_WHITESPACE"," ",1800],["T_VARIABLE","$schemaName",1800],")",")",";",["T_WHITESPACE","\n        ",1800],["T_VARIABLE","$sql",1801],["T_WHITESPACE","   ",1801],"=",["T_WHITESPACE"," ",1801],["T_STRING","sprintf",1801],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s ENGINE=%s'",1801],",",["T_WHITESPACE"," ",1801],["T_VARIABLE","$table",1801],",",["T_WHITESPACE"," ",1801],["T_VARIABLE","$engine",1801],")",";",["T_WHITESPACE","\n\n        ",1801],["T_RETURN","return",1803],["T_WHITESPACE"," ",1803],["T_VARIABLE","$this",1803],["T_OBJECT_OPERATOR","->",1803],["T_STRING","rawQuery",1803],"(",["T_VARIABLE","$sql",1803],")",";",["T_WHITESPACE","\n    ",1803],"}",["T_WHITESPACE","\n\n    ",1804],["T_DOC_COMMENT","\/**\n     * Change table comment\n     *\n     * @param string $tableName\n     * @param string $comment\n     * @param string $schemaName\n     * @return \\Zend_Db_Statement_Pdo\n     *\/",1806],["T_WHITESPACE","\n    ",1813],["T_PUBLIC","public",1814],["T_WHITESPACE"," ",1814],["T_FUNCTION","function",1814],["T_WHITESPACE"," ",1814],["T_STRING","changeTableComment",1814],"(",["T_VARIABLE","$tableName",1814],",",["T_WHITESPACE"," ",1814],["T_VARIABLE","$comment",1814],",",["T_WHITESPACE"," ",1814],["T_VARIABLE","$schemaName",1814],["T_WHITESPACE"," ",1814],"=",["T_WHITESPACE"," ",1814],["T_STRING","null",1814],")",["T_WHITESPACE","\n    ",1814],"{",["T_WHITESPACE","\n        ",1815],["T_VARIABLE","$table",1816],["T_WHITESPACE"," ",1816],"=",["T_WHITESPACE"," ",1816],["T_VARIABLE","$this",1816],["T_OBJECT_OPERATOR","->",1816],["T_STRING","quoteIdentifier",1816],"(",["T_VARIABLE","$this",1816],["T_OBJECT_OPERATOR","->",1816],["T_STRING","_getTableName",1816],"(",["T_VARIABLE","$tableName",1816],",",["T_WHITESPACE"," ",1816],["T_VARIABLE","$schemaName",1816],")",")",";",["T_WHITESPACE","\n        ",1816],["T_VARIABLE","$sql",1817],["T_WHITESPACE","   ",1817],"=",["T_WHITESPACE"," ",1817],["T_STRING","sprintf",1817],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE %s COMMENT='%s'\"",1817],",",["T_WHITESPACE"," ",1817],["T_VARIABLE","$table",1817],",",["T_WHITESPACE"," ",1817],["T_VARIABLE","$comment",1817],")",";",["T_WHITESPACE","\n\n        ",1817],["T_RETURN","return",1819],["T_WHITESPACE"," ",1819],["T_VARIABLE","$this",1819],["T_OBJECT_OPERATOR","->",1819],["T_STRING","rawQuery",1819],"(",["T_VARIABLE","$sql",1819],")",";",["T_WHITESPACE","\n    ",1819],"}",["T_WHITESPACE","\n\n    ",1820],["T_DOC_COMMENT","\/**\n     * Inserts a table row with specified data\n     * Special for Zero values to identity column\n     *\n     * @param string $table\n     * @param array $bind\n     * @return int The number of affected rows.\n     *\/",1822],["T_WHITESPACE","\n    ",1829],["T_PUBLIC","public",1830],["T_WHITESPACE"," ",1830],["T_FUNCTION","function",1830],["T_WHITESPACE"," ",1830],["T_STRING","insertForce",1830],"(",["T_VARIABLE","$table",1830],",",["T_WHITESPACE"," ",1830],["T_ARRAY","array",1830],["T_WHITESPACE"," ",1830],["T_VARIABLE","$bind",1830],")",["T_WHITESPACE","\n    ",1830],"{",["T_WHITESPACE","\n        ",1831],["T_VARIABLE","$this",1832],["T_OBJECT_OPERATOR","->",1832],["T_STRING","rawQuery",1832],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET @OLD_INSERT_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO'\"",1832],")",";",["T_WHITESPACE","\n        ",1832],["T_VARIABLE","$result",1833],["T_WHITESPACE"," ",1833],"=",["T_WHITESPACE"," ",1833],["T_VARIABLE","$this",1833],["T_OBJECT_OPERATOR","->",1833],["T_STRING","insert",1833],"(",["T_VARIABLE","$table",1833],",",["T_WHITESPACE"," ",1833],["T_VARIABLE","$bind",1833],")",";",["T_WHITESPACE","\n        ",1833],["T_VARIABLE","$this",1834],["T_OBJECT_OPERATOR","->",1834],["T_STRING","rawQuery",1834],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET SQL_MODE=IFNULL(@OLD_INSERT_SQL_MODE,'')\"",1834],")",";",["T_WHITESPACE","\n\n        ",1834],["T_RETURN","return",1836],["T_WHITESPACE"," ",1836],["T_VARIABLE","$result",1836],";",["T_WHITESPACE","\n    ",1836],"}",["T_WHITESPACE","\n\n    ",1837],["T_DOC_COMMENT","\/**\n     * Inserts a table row with specified data.\n     *\n     * @param string $table The table to insert data into.\n     * @param array $data Column-value pairs or array of column-value pairs.\n     * @param array $fields update fields pairs or values\n     * @return int The number of affected rows.\n     * @throws \\Zend_Db_Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",1839],["T_WHITESPACE","\n    ",1849],["T_PUBLIC","public",1850],["T_WHITESPACE"," ",1850],["T_FUNCTION","function",1850],["T_WHITESPACE"," ",1850],["T_STRING","insertOnDuplicate",1850],"(",["T_VARIABLE","$table",1850],",",["T_WHITESPACE"," ",1850],["T_ARRAY","array",1850],["T_WHITESPACE"," ",1850],["T_VARIABLE","$data",1850],",",["T_WHITESPACE"," ",1850],["T_ARRAY","array",1850],["T_WHITESPACE"," ",1850],["T_VARIABLE","$fields",1850],["T_WHITESPACE"," ",1850],"=",["T_WHITESPACE"," ",1850],"[","]",")",["T_WHITESPACE","\n    ",1850],"{",["T_WHITESPACE","\n        ",1851],["T_COMMENT","\/\/ extract and quote col names from the array keys\n",1852],["T_WHITESPACE","        ",1853],["T_VARIABLE","$row",1853],["T_WHITESPACE","    ",1853],"=",["T_WHITESPACE"," ",1853],["T_STRING","reset",1853],"(",["T_VARIABLE","$data",1853],")",";",["T_WHITESPACE"," ",1853],["T_COMMENT","\/\/ get first element from data array\n",1853],["T_WHITESPACE","        ",1854],["T_VARIABLE","$bind",1854],["T_WHITESPACE","   ",1854],"=",["T_WHITESPACE"," ",1854],"[","]",";",["T_WHITESPACE"," ",1854],["T_COMMENT","\/\/ SQL bind array\n",1854],["T_WHITESPACE","        ",1855],["T_VARIABLE","$values",1855],["T_WHITESPACE"," ",1855],"=",["T_WHITESPACE"," ",1855],"[","]",";",["T_WHITESPACE","\n\n        ",1855],["T_IF","if",1857],["T_WHITESPACE"," ",1857],"(",["T_STRING","is_array",1857],"(",["T_VARIABLE","$row",1857],")",")",["T_WHITESPACE"," ",1857],"{",["T_WHITESPACE"," ",1857],["T_COMMENT","\/\/ Array of column-value pairs\n",1857],["T_WHITESPACE","            ",1858],["T_VARIABLE","$cols",1858],["T_WHITESPACE"," ",1858],"=",["T_WHITESPACE"," ",1858],["T_STRING","array_keys",1858],"(",["T_VARIABLE","$row",1858],")",";",["T_WHITESPACE","\n            ",1858],["T_FOREACH","foreach",1859],["T_WHITESPACE"," ",1859],"(",["T_VARIABLE","$data",1859],["T_WHITESPACE"," ",1859],["T_AS","as",1859],["T_WHITESPACE"," ",1859],["T_VARIABLE","$row",1859],")",["T_WHITESPACE"," ",1859],"{",["T_WHITESPACE","\n                ",1859],["T_IF","if",1860],["T_WHITESPACE"," ",1860],"(",["T_STRING","array_diff",1860],"(",["T_VARIABLE","$cols",1860],",",["T_WHITESPACE"," ",1860],["T_STRING","array_keys",1860],"(",["T_VARIABLE","$row",1860],")",")",")",["T_WHITESPACE"," ",1860],"{",["T_WHITESPACE","\n                    ",1860],["T_THROW","throw",1861],["T_WHITESPACE"," ",1861],["T_NEW","new",1861],["T_WHITESPACE"," ",1861],["T_NS_SEPARATOR","\\",1861],["T_STRING","Zend_Db_Exception",1861],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid data for insert'",1861],")",";",["T_WHITESPACE","\n                ",1861],"}",["T_WHITESPACE","\n                ",1862],["T_VARIABLE","$values",1863],"[","]",["T_WHITESPACE"," ",1863],"=",["T_WHITESPACE"," ",1863],["T_VARIABLE","$this",1863],["T_OBJECT_OPERATOR","->",1863],["T_STRING","_prepareInsertData",1863],"(",["T_VARIABLE","$row",1863],",",["T_WHITESPACE"," ",1863],["T_VARIABLE","$bind",1863],")",";",["T_WHITESPACE","\n            ",1863],"}",["T_WHITESPACE","\n            ",1864],["T_UNSET","unset",1865],"(",["T_VARIABLE","$row",1865],")",";",["T_WHITESPACE","\n        ",1865],"}",["T_WHITESPACE"," ",1866],["T_ELSE","else",1866],["T_WHITESPACE"," ",1866],"{",["T_WHITESPACE"," ",1866],["T_COMMENT","\/\/ Column-value pairs\n",1866],["T_WHITESPACE","            ",1867],["T_VARIABLE","$cols",1867],["T_WHITESPACE","     ",1867],"=",["T_WHITESPACE"," ",1867],["T_STRING","array_keys",1867],"(",["T_VARIABLE","$data",1867],")",";",["T_WHITESPACE","\n            ",1867],["T_VARIABLE","$values",1868],"[","]",["T_WHITESPACE"," ",1868],"=",["T_WHITESPACE"," ",1868],["T_VARIABLE","$this",1868],["T_OBJECT_OPERATOR","->",1868],["T_STRING","_prepareInsertData",1868],"(",["T_VARIABLE","$data",1868],",",["T_WHITESPACE"," ",1868],["T_VARIABLE","$bind",1868],")",";",["T_WHITESPACE","\n        ",1868],"}",["T_WHITESPACE","\n\n        ",1869],["T_VARIABLE","$updateFields",1871],["T_WHITESPACE"," ",1871],"=",["T_WHITESPACE"," ",1871],"[","]",";",["T_WHITESPACE","\n        ",1871],["T_IF","if",1872],["T_WHITESPACE"," ",1872],"(",["T_EMPTY","empty",1872],"(",["T_VARIABLE","$fields",1872],")",")",["T_WHITESPACE"," ",1872],"{",["T_WHITESPACE","\n            ",1872],["T_VARIABLE","$fields",1873],["T_WHITESPACE"," ",1873],"=",["T_WHITESPACE"," ",1873],["T_VARIABLE","$cols",1873],";",["T_WHITESPACE","\n        ",1873],"}",["T_WHITESPACE","\n\n        ",1874],["T_COMMENT","\/\/ prepare ON DUPLICATE KEY conditions\n",1876],["T_WHITESPACE","        ",1877],["T_FOREACH","foreach",1877],["T_WHITESPACE"," ",1877],"(",["T_VARIABLE","$fields",1877],["T_WHITESPACE"," ",1877],["T_AS","as",1877],["T_WHITESPACE"," ",1877],["T_VARIABLE","$k",1877],["T_WHITESPACE"," ",1877],["T_DOUBLE_ARROW","=>",1877],["T_WHITESPACE"," ",1877],["T_VARIABLE","$v",1877],")",["T_WHITESPACE"," ",1877],"{",["T_WHITESPACE","\n            ",1877],["T_VARIABLE","$field",1878],["T_WHITESPACE"," ",1878],"=",["T_WHITESPACE"," ",1878],["T_VARIABLE","$value",1878],["T_WHITESPACE"," ",1878],"=",["T_WHITESPACE"," ",1878],["T_STRING","null",1878],";",["T_WHITESPACE","\n            ",1878],["T_IF","if",1879],["T_WHITESPACE"," ",1879],"(","!",["T_STRING","is_numeric",1879],"(",["T_VARIABLE","$k",1879],")",")",["T_WHITESPACE"," ",1879],"{",["T_WHITESPACE","\n                ",1879],["T_VARIABLE","$field",1880],["T_WHITESPACE"," ",1880],"=",["T_WHITESPACE"," ",1880],["T_VARIABLE","$this",1880],["T_OBJECT_OPERATOR","->",1880],["T_STRING","quoteIdentifier",1880],"(",["T_VARIABLE","$k",1880],")",";",["T_WHITESPACE","\n                ",1880],["T_IF","if",1881],["T_WHITESPACE"," ",1881],"(",["T_VARIABLE","$v",1881],["T_WHITESPACE"," ",1881],["T_INSTANCEOF","instanceof",1881],["T_WHITESPACE"," ",1881],["T_NS_SEPARATOR","\\",1881],["T_STRING","Zend_Db_Expr",1881],")",["T_WHITESPACE"," ",1881],"{",["T_WHITESPACE","\n                    ",1881],["T_VARIABLE","$value",1882],["T_WHITESPACE"," ",1882],"=",["T_WHITESPACE"," ",1882],["T_VARIABLE","$v",1882],["T_OBJECT_OPERATOR","->",1882],["T_STRING","__toString",1882],"(",")",";",["T_WHITESPACE","\n                ",1882],"}",["T_WHITESPACE"," ",1883],["T_ELSEIF","elseif",1883],["T_WHITESPACE"," ",1883],"(",["T_STRING","is_string",1883],"(",["T_VARIABLE","$v",1883],")",")",["T_WHITESPACE"," ",1883],"{",["T_WHITESPACE","\n                    ",1883],["T_VARIABLE","$value",1884],["T_WHITESPACE"," ",1884],"=",["T_WHITESPACE"," ",1884],["T_STRING","sprintf",1884],"(",["T_CONSTANT_ENCAPSED_STRING","'VALUES(%s)'",1884],",",["T_WHITESPACE"," ",1884],["T_VARIABLE","$this",1884],["T_OBJECT_OPERATOR","->",1884],["T_STRING","quoteIdentifier",1884],"(",["T_VARIABLE","$v",1884],")",")",";",["T_WHITESPACE","\n                ",1884],"}",["T_WHITESPACE"," ",1885],["T_ELSEIF","elseif",1885],["T_WHITESPACE"," ",1885],"(",["T_STRING","is_numeric",1885],"(",["T_VARIABLE","$v",1885],")",")",["T_WHITESPACE"," ",1885],"{",["T_WHITESPACE","\n                    ",1885],["T_VARIABLE","$value",1886],["T_WHITESPACE"," ",1886],"=",["T_WHITESPACE"," ",1886],["T_VARIABLE","$this",1886],["T_OBJECT_OPERATOR","->",1886],["T_STRING","quoteInto",1886],"(",["T_CONSTANT_ENCAPSED_STRING","'?'",1886],",",["T_WHITESPACE"," ",1886],["T_VARIABLE","$v",1886],")",";",["T_WHITESPACE","\n                ",1886],"}",["T_WHITESPACE","\n            ",1887],"}",["T_WHITESPACE"," ",1888],["T_ELSEIF","elseif",1888],["T_WHITESPACE"," ",1888],"(",["T_STRING","is_string",1888],"(",["T_VARIABLE","$v",1888],")",")",["T_WHITESPACE"," ",1888],"{",["T_WHITESPACE","\n                ",1888],["T_VARIABLE","$value",1889],["T_WHITESPACE"," ",1889],"=",["T_WHITESPACE"," ",1889],["T_STRING","sprintf",1889],"(",["T_CONSTANT_ENCAPSED_STRING","'VALUES(%s)'",1889],",",["T_WHITESPACE"," ",1889],["T_VARIABLE","$this",1889],["T_OBJECT_OPERATOR","->",1889],["T_STRING","quoteIdentifier",1889],"(",["T_VARIABLE","$v",1889],")",")",";",["T_WHITESPACE","\n                ",1889],["T_VARIABLE","$field",1890],["T_WHITESPACE"," ",1890],"=",["T_WHITESPACE"," ",1890],["T_VARIABLE","$this",1890],["T_OBJECT_OPERATOR","->",1890],["T_STRING","quoteIdentifier",1890],"(",["T_VARIABLE","$v",1890],")",";",["T_WHITESPACE","\n            ",1890],"}",["T_WHITESPACE","\n\n            ",1891],["T_IF","if",1893],["T_WHITESPACE"," ",1893],"(",["T_VARIABLE","$field",1893],["T_WHITESPACE"," ",1893],["T_BOOLEAN_AND","&&",1893],["T_WHITESPACE"," ",1893],["T_STRING","is_string",1893],"(",["T_VARIABLE","$value",1893],")",["T_WHITESPACE"," ",1893],["T_BOOLEAN_AND","&&",1893],["T_WHITESPACE"," ",1893],["T_VARIABLE","$value",1893],["T_WHITESPACE"," ",1893],["T_IS_NOT_IDENTICAL","!==",1893],["T_WHITESPACE"," ",1893],["T_CONSTANT_ENCAPSED_STRING","''",1893],")",["T_WHITESPACE"," ",1893],"{",["T_WHITESPACE","\n                ",1893],["T_VARIABLE","$updateFields",1894],"[","]",["T_WHITESPACE"," ",1894],"=",["T_WHITESPACE"," ",1894],["T_STRING","sprintf",1894],"(",["T_CONSTANT_ENCAPSED_STRING","'%s = %s'",1894],",",["T_WHITESPACE"," ",1894],["T_VARIABLE","$field",1894],",",["T_WHITESPACE"," ",1894],["T_VARIABLE","$value",1894],")",";",["T_WHITESPACE","\n            ",1894],"}",["T_WHITESPACE","\n        ",1895],"}",["T_WHITESPACE","\n\n        ",1896],["T_VARIABLE","$insertSql",1898],["T_WHITESPACE"," ",1898],"=",["T_WHITESPACE"," ",1898],["T_VARIABLE","$this",1898],["T_OBJECT_OPERATOR","->",1898],["T_STRING","_getInsertSqlQuery",1898],"(",["T_VARIABLE","$table",1898],",",["T_WHITESPACE"," ",1898],["T_VARIABLE","$cols",1898],",",["T_WHITESPACE"," ",1898],["T_VARIABLE","$values",1898],")",";",["T_WHITESPACE","\n        ",1898],["T_IF","if",1899],["T_WHITESPACE"," ",1899],"(",["T_VARIABLE","$updateFields",1899],")",["T_WHITESPACE"," ",1899],"{",["T_WHITESPACE","\n            ",1899],["T_VARIABLE","$insertSql",1900],["T_WHITESPACE"," ",1900],["T_CONCAT_EQUAL",".=",1900],["T_WHITESPACE"," ",1900],["T_CONSTANT_ENCAPSED_STRING","' ON DUPLICATE KEY UPDATE '",1900],["T_WHITESPACE"," ",1900],".",["T_WHITESPACE"," ",1900],["T_STRING","implode",1900],"(",["T_CONSTANT_ENCAPSED_STRING","', '",1900],",",["T_WHITESPACE"," ",1900],["T_VARIABLE","$updateFields",1900],")",";",["T_WHITESPACE","\n        ",1900],"}",["T_WHITESPACE","\n        ",1901],["T_COMMENT","\/\/ execute the statement and return the number of affected rows\n",1902],["T_WHITESPACE","        ",1903],["T_VARIABLE","$stmt",1903],["T_WHITESPACE","   ",1903],"=",["T_WHITESPACE"," ",1903],["T_VARIABLE","$this",1903],["T_OBJECT_OPERATOR","->",1903],["T_STRING","query",1903],"(",["T_VARIABLE","$insertSql",1903],",",["T_WHITESPACE"," ",1903],["T_STRING","array_values",1903],"(",["T_VARIABLE","$bind",1903],")",")",";",["T_WHITESPACE","\n        ",1903],["T_VARIABLE","$result",1904],["T_WHITESPACE"," ",1904],"=",["T_WHITESPACE"," ",1904],["T_VARIABLE","$stmt",1904],["T_OBJECT_OPERATOR","->",1904],["T_STRING","rowCount",1904],"(",")",";",["T_WHITESPACE","\n\n        ",1904],["T_RETURN","return",1906],["T_WHITESPACE"," ",1906],["T_VARIABLE","$result",1906],";",["T_WHITESPACE","\n    ",1906],"}",["T_WHITESPACE","\n\n    ",1907],["T_DOC_COMMENT","\/**\n     * Inserts a table multiply rows with specified data.\n     *\n     * @param string|array|\\Zend_Db_Expr $table The table to insert data into.\n     * @param array $data Column-value pairs or array of Column-value pairs.\n     * @return int The number of affected rows.\n     * @throws \\Zend_Db_Exception\n     *\/",1909],["T_WHITESPACE","\n    ",1916],["T_PUBLIC","public",1917],["T_WHITESPACE"," ",1917],["T_FUNCTION","function",1917],["T_WHITESPACE"," ",1917],["T_STRING","insertMultiple",1917],"(",["T_VARIABLE","$table",1917],",",["T_WHITESPACE"," ",1917],["T_ARRAY","array",1917],["T_WHITESPACE"," ",1917],["T_VARIABLE","$data",1917],")",["T_WHITESPACE","\n    ",1917],"{",["T_WHITESPACE","\n        ",1918],["T_VARIABLE","$row",1919],["T_WHITESPACE"," ",1919],"=",["T_WHITESPACE"," ",1919],["T_STRING","reset",1919],"(",["T_VARIABLE","$data",1919],")",";",["T_WHITESPACE","\n        ",1919],["T_COMMENT","\/\/ support insert syntaxes\n",1920],["T_WHITESPACE","        ",1921],["T_IF","if",1921],["T_WHITESPACE"," ",1921],"(","!",["T_STRING","is_array",1921],"(",["T_VARIABLE","$row",1921],")",")",["T_WHITESPACE"," ",1921],"{",["T_WHITESPACE","\n            ",1921],["T_RETURN","return",1922],["T_WHITESPACE"," ",1922],["T_VARIABLE","$this",1922],["T_OBJECT_OPERATOR","->",1922],["T_STRING","insert",1922],"(",["T_VARIABLE","$table",1922],",",["T_WHITESPACE"," ",1922],["T_VARIABLE","$data",1922],")",";",["T_WHITESPACE","\n        ",1922],"}",["T_WHITESPACE","\n\n        ",1923],["T_COMMENT","\/\/ validate data array\n",1925],["T_WHITESPACE","        ",1926],["T_VARIABLE","$cols",1926],["T_WHITESPACE"," ",1926],"=",["T_WHITESPACE"," ",1926],["T_STRING","array_keys",1926],"(",["T_VARIABLE","$row",1926],")",";",["T_WHITESPACE","\n        ",1926],["T_VARIABLE","$insertArray",1927],["T_WHITESPACE"," ",1927],"=",["T_WHITESPACE"," ",1927],"[","]",";",["T_WHITESPACE","\n        ",1927],["T_FOREACH","foreach",1928],["T_WHITESPACE"," ",1928],"(",["T_VARIABLE","$data",1928],["T_WHITESPACE"," ",1928],["T_AS","as",1928],["T_WHITESPACE"," ",1928],["T_VARIABLE","$row",1928],")",["T_WHITESPACE"," ",1928],"{",["T_WHITESPACE","\n            ",1928],["T_VARIABLE","$line",1929],["T_WHITESPACE"," ",1929],"=",["T_WHITESPACE"," ",1929],"[","]",";",["T_WHITESPACE","\n            ",1929],["T_IF","if",1930],["T_WHITESPACE"," ",1930],"(",["T_STRING","array_diff",1930],"(",["T_VARIABLE","$cols",1930],",",["T_WHITESPACE"," ",1930],["T_STRING","array_keys",1930],"(",["T_VARIABLE","$row",1930],")",")",")",["T_WHITESPACE"," ",1930],"{",["T_WHITESPACE","\n                ",1930],["T_THROW","throw",1931],["T_WHITESPACE"," ",1931],["T_NEW","new",1931],["T_WHITESPACE"," ",1931],["T_NS_SEPARATOR","\\",1931],["T_STRING","Zend_Db_Exception",1931],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid data for insert'",1931],")",";",["T_WHITESPACE","\n            ",1931],"}",["T_WHITESPACE","\n            ",1932],["T_FOREACH","foreach",1933],["T_WHITESPACE"," ",1933],"(",["T_VARIABLE","$cols",1933],["T_WHITESPACE"," ",1933],["T_AS","as",1933],["T_WHITESPACE"," ",1933],["T_VARIABLE","$field",1933],")",["T_WHITESPACE"," ",1933],"{",["T_WHITESPACE","\n                ",1933],["T_VARIABLE","$line",1934],"[","]",["T_WHITESPACE"," ",1934],"=",["T_WHITESPACE"," ",1934],["T_VARIABLE","$row",1934],"[",["T_VARIABLE","$field",1934],"]",";",["T_WHITESPACE","\n            ",1934],"}",["T_WHITESPACE","\n            ",1935],["T_VARIABLE","$insertArray",1936],"[","]",["T_WHITESPACE"," ",1936],"=",["T_WHITESPACE"," ",1936],["T_VARIABLE","$line",1936],";",["T_WHITESPACE","\n        ",1936],"}",["T_WHITESPACE","\n        ",1937],["T_UNSET","unset",1938],"(",["T_VARIABLE","$row",1938],")",";",["T_WHITESPACE","\n\n        ",1938],["T_RETURN","return",1940],["T_WHITESPACE"," ",1940],["T_VARIABLE","$this",1940],["T_OBJECT_OPERATOR","->",1940],["T_STRING","insertArray",1940],"(",["T_VARIABLE","$table",1940],",",["T_WHITESPACE"," ",1940],["T_VARIABLE","$cols",1940],",",["T_WHITESPACE"," ",1940],["T_VARIABLE","$insertArray",1940],")",";",["T_WHITESPACE","\n    ",1940],"}",["T_WHITESPACE","\n\n    ",1941],["T_DOC_COMMENT","\/**\n     * Insert array into a table based on columns definition\n     *\n     * $data can be represented as:\n     * - arrays of values ordered according to columns in $columns array\n     *      array(\n     *          array('value1', 'value2'),\n     *          array('value3', 'value4'),\n     *      )\n     * - array of values, if $columns contains only one column\n     *      array('value1', 'value2')\n     *\n     * @param   string $table\n     * @param   array $columns\n     * @param   array $data\n     * @return  int\n     * @throws  \\Zend_Db_Exception\n     *\/",1943],["T_WHITESPACE","\n    ",1960],["T_PUBLIC","public",1961],["T_WHITESPACE"," ",1961],["T_FUNCTION","function",1961],["T_WHITESPACE"," ",1961],["T_STRING","insertArray",1961],"(",["T_VARIABLE","$table",1961],",",["T_WHITESPACE"," ",1961],["T_ARRAY","array",1961],["T_WHITESPACE"," ",1961],["T_VARIABLE","$columns",1961],",",["T_WHITESPACE"," ",1961],["T_ARRAY","array",1961],["T_WHITESPACE"," ",1961],["T_VARIABLE","$data",1961],")",["T_WHITESPACE","\n    ",1961],"{",["T_WHITESPACE","\n        ",1962],["T_VARIABLE","$values",1963],["T_WHITESPACE","       ",1963],"=",["T_WHITESPACE"," ",1963],"[","]",";",["T_WHITESPACE","\n        ",1963],["T_VARIABLE","$bind",1964],["T_WHITESPACE","         ",1964],"=",["T_WHITESPACE"," ",1964],"[","]",";",["T_WHITESPACE","\n        ",1964],["T_VARIABLE","$columnsCount",1965],["T_WHITESPACE"," ",1965],"=",["T_WHITESPACE"," ",1965],["T_STRING","count",1965],"(",["T_VARIABLE","$columns",1965],")",";",["T_WHITESPACE","\n        ",1965],["T_FOREACH","foreach",1966],["T_WHITESPACE"," ",1966],"(",["T_VARIABLE","$data",1966],["T_WHITESPACE"," ",1966],["T_AS","as",1966],["T_WHITESPACE"," ",1966],["T_VARIABLE","$row",1966],")",["T_WHITESPACE"," ",1966],"{",["T_WHITESPACE","\n            ",1966],["T_IF","if",1967],["T_WHITESPACE"," ",1967],"(",["T_VARIABLE","$columnsCount",1967],["T_WHITESPACE"," ",1967],["T_IS_NOT_EQUAL","!=",1967],["T_WHITESPACE"," ",1967],["T_STRING","count",1967],"(",["T_VARIABLE","$row",1967],")",")",["T_WHITESPACE"," ",1967],"{",["T_WHITESPACE","\n                ",1967],["T_THROW","throw",1968],["T_WHITESPACE"," ",1968],["T_NEW","new",1968],["T_WHITESPACE"," ",1968],["T_NS_SEPARATOR","\\",1968],["T_STRING","Zend_Db_Exception",1968],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid data for insert'",1968],")",";",["T_WHITESPACE","\n            ",1968],"}",["T_WHITESPACE","\n            ",1969],["T_VARIABLE","$values",1970],"[","]",["T_WHITESPACE"," ",1970],"=",["T_WHITESPACE"," ",1970],["T_VARIABLE","$this",1970],["T_OBJECT_OPERATOR","->",1970],["T_STRING","_prepareInsertData",1970],"(",["T_VARIABLE","$row",1970],",",["T_WHITESPACE"," ",1970],["T_VARIABLE","$bind",1970],")",";",["T_WHITESPACE","\n        ",1970],"}",["T_WHITESPACE","\n\n        ",1971],["T_VARIABLE","$insertQuery",1973],["T_WHITESPACE"," ",1973],"=",["T_WHITESPACE"," ",1973],["T_VARIABLE","$this",1973],["T_OBJECT_OPERATOR","->",1973],["T_STRING","_getInsertSqlQuery",1973],"(",["T_VARIABLE","$table",1973],",",["T_WHITESPACE"," ",1973],["T_VARIABLE","$columns",1973],",",["T_WHITESPACE"," ",1973],["T_VARIABLE","$values",1973],")",";",["T_WHITESPACE","\n\n        ",1973],["T_COMMENT","\/\/ execute the statement and return the number of affected rows\n",1975],["T_WHITESPACE","        ",1976],["T_VARIABLE","$stmt",1976],["T_WHITESPACE","   ",1976],"=",["T_WHITESPACE"," ",1976],["T_VARIABLE","$this",1976],["T_OBJECT_OPERATOR","->",1976],["T_STRING","query",1976],"(",["T_VARIABLE","$insertQuery",1976],",",["T_WHITESPACE"," ",1976],["T_VARIABLE","$bind",1976],")",";",["T_WHITESPACE","\n        ",1976],["T_VARIABLE","$result",1977],["T_WHITESPACE"," ",1977],"=",["T_WHITESPACE"," ",1977],["T_VARIABLE","$stmt",1977],["T_OBJECT_OPERATOR","->",1977],["T_STRING","rowCount",1977],"(",")",";",["T_WHITESPACE","\n\n        ",1977],["T_RETURN","return",1979],["T_WHITESPACE"," ",1979],["T_VARIABLE","$result",1979],";",["T_WHITESPACE","\n    ",1979],"}",["T_WHITESPACE","\n\n    ",1980],["T_DOC_COMMENT","\/**\n     * Set cache adapter\n     *\n     * @param FrontendInterface $cacheAdapter\n     * @return $this\n     *\/",1982],["T_WHITESPACE","\n    ",1987],["T_PUBLIC","public",1988],["T_WHITESPACE"," ",1988],["T_FUNCTION","function",1988],["T_WHITESPACE"," ",1988],["T_STRING","setCacheAdapter",1988],"(",["T_STRING","FrontendInterface",1988],["T_WHITESPACE"," ",1988],["T_VARIABLE","$cacheAdapter",1988],")",["T_WHITESPACE","\n    ",1988],"{",["T_WHITESPACE","\n        ",1989],["T_VARIABLE","$this",1990],["T_OBJECT_OPERATOR","->",1990],["T_STRING","_cacheAdapter",1990],["T_WHITESPACE"," ",1990],"=",["T_WHITESPACE"," ",1990],["T_VARIABLE","$cacheAdapter",1990],";",["T_WHITESPACE","\n        ",1990],["T_RETURN","return",1991],["T_WHITESPACE"," ",1991],["T_VARIABLE","$this",1991],";",["T_WHITESPACE","\n    ",1991],"}",["T_WHITESPACE","\n\n    ",1992],["T_DOC_COMMENT","\/**\n     * Return new DDL Table object\n     *\n     * @param string $tableName the table name\n     * @param string $schemaName the database\/schema name\n     * @return Table\n     *\/",1994],["T_WHITESPACE","\n    ",2000],["T_PUBLIC","public",2001],["T_WHITESPACE"," ",2001],["T_FUNCTION","function",2001],["T_WHITESPACE"," ",2001],["T_STRING","newTable",2001],"(",["T_VARIABLE","$tableName",2001],["T_WHITESPACE"," ",2001],"=",["T_WHITESPACE"," ",2001],["T_STRING","null",2001],",",["T_WHITESPACE"," ",2001],["T_VARIABLE","$schemaName",2001],["T_WHITESPACE"," ",2001],"=",["T_WHITESPACE"," ",2001],["T_STRING","null",2001],")",["T_WHITESPACE","\n    ",2001],"{",["T_WHITESPACE","\n        ",2002],["T_VARIABLE","$table",2003],["T_WHITESPACE"," ",2003],"=",["T_WHITESPACE"," ",2003],["T_NEW","new",2003],["T_WHITESPACE"," ",2003],["T_STRING","Table",2003],"(",")",";",["T_WHITESPACE","\n        ",2003],["T_IF","if",2004],["T_WHITESPACE"," ",2004],"(",["T_VARIABLE","$tableName",2004],["T_WHITESPACE"," ",2004],["T_IS_NOT_IDENTICAL","!==",2004],["T_WHITESPACE"," ",2004],["T_STRING","null",2004],")",["T_WHITESPACE"," ",2004],"{",["T_WHITESPACE","\n            ",2004],["T_VARIABLE","$table",2005],["T_OBJECT_OPERATOR","->",2005],["T_STRING","setName",2005],"(",["T_VARIABLE","$tableName",2005],")",";",["T_WHITESPACE","\n        ",2005],"}",["T_WHITESPACE","\n        ",2006],["T_IF","if",2007],["T_WHITESPACE"," ",2007],"(",["T_VARIABLE","$schemaName",2007],["T_WHITESPACE"," ",2007],["T_IS_NOT_IDENTICAL","!==",2007],["T_WHITESPACE"," ",2007],["T_STRING","null",2007],")",["T_WHITESPACE"," ",2007],"{",["T_WHITESPACE","\n            ",2007],["T_VARIABLE","$table",2008],["T_OBJECT_OPERATOR","->",2008],["T_STRING","setSchema",2008],"(",["T_VARIABLE","$schemaName",2008],")",";",["T_WHITESPACE","\n        ",2008],"}",["T_WHITESPACE","\n        ",2009],["T_IF","if",2010],["T_WHITESPACE"," ",2010],"(",["T_ISSET","isset",2010],"(",["T_VARIABLE","$this",2010],["T_OBJECT_OPERATOR","->",2010],["T_STRING","_config",2010],"[",["T_CONSTANT_ENCAPSED_STRING","'engine'",2010],"]",")",")",["T_WHITESPACE"," ",2010],"{",["T_WHITESPACE","\n            ",2010],["T_VARIABLE","$table",2011],["T_OBJECT_OPERATOR","->",2011],["T_STRING","setOption",2011],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",2011],",",["T_WHITESPACE"," ",2011],["T_VARIABLE","$this",2011],["T_OBJECT_OPERATOR","->",2011],["T_STRING","_config",2011],"[",["T_CONSTANT_ENCAPSED_STRING","'engine'",2011],"]",")",";",["T_WHITESPACE","\n        ",2011],"}",["T_WHITESPACE","\n\n        ",2012],["T_RETURN","return",2014],["T_WHITESPACE"," ",2014],["T_VARIABLE","$table",2014],";",["T_WHITESPACE","\n    ",2014],"}",["T_WHITESPACE","\n\n    ",2015],["T_DOC_COMMENT","\/**\n     * Create table\n     *\n     * @param Table $table\n     * @throws \\Zend_Db_Exception\n     * @return \\Zend_Db_Statement_Pdo\n     *\/",2017],["T_WHITESPACE","\n    ",2023],["T_PUBLIC","public",2024],["T_WHITESPACE"," ",2024],["T_FUNCTION","function",2024],["T_WHITESPACE"," ",2024],["T_STRING","createTable",2024],"(",["T_STRING","Table",2024],["T_WHITESPACE"," ",2024],["T_VARIABLE","$table",2024],")",["T_WHITESPACE","\n    ",2024],"{",["T_WHITESPACE","\n        ",2025],["T_VARIABLE","$columns",2026],["T_WHITESPACE"," ",2026],"=",["T_WHITESPACE"," ",2026],["T_VARIABLE","$table",2026],["T_OBJECT_OPERATOR","->",2026],["T_STRING","getColumns",2026],"(",")",";",["T_WHITESPACE","\n        ",2026],["T_FOREACH","foreach",2027],["T_WHITESPACE"," ",2027],"(",["T_VARIABLE","$columns",2027],["T_WHITESPACE"," ",2027],["T_AS","as",2027],["T_WHITESPACE"," ",2027],["T_VARIABLE","$columnEntry",2027],")",["T_WHITESPACE"," ",2027],"{",["T_WHITESPACE","\n            ",2027],["T_IF","if",2028],["T_WHITESPACE"," ",2028],"(",["T_EMPTY","empty",2028],"(",["T_VARIABLE","$columnEntry",2028],"[",["T_CONSTANT_ENCAPSED_STRING","'COMMENT'",2028],"]",")",")",["T_WHITESPACE"," ",2028],"{",["T_WHITESPACE","\n                ",2028],["T_THROW","throw",2029],["T_WHITESPACE"," ",2029],["T_NEW","new",2029],["T_WHITESPACE"," ",2029],["T_NS_SEPARATOR","\\",2029],["T_STRING","Zend_Db_Exception",2029],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot create table without columns comments\"",2029],")",";",["T_WHITESPACE","\n            ",2029],"}",["T_WHITESPACE","\n        ",2030],"}",["T_WHITESPACE","\n\n        ",2031],["T_VARIABLE","$sqlFragment",2033],["T_WHITESPACE","    ",2033],"=",["T_WHITESPACE"," ",2033],["T_STRING","array_merge",2033],"(",["T_WHITESPACE","\n            ",2033],["T_VARIABLE","$this",2034],["T_OBJECT_OPERATOR","->",2034],["T_STRING","_getColumnsDefinition",2034],"(",["T_VARIABLE","$table",2034],")",",",["T_WHITESPACE","\n            ",2034],["T_VARIABLE","$this",2035],["T_OBJECT_OPERATOR","->",2035],["T_STRING","_getIndexesDefinition",2035],"(",["T_VARIABLE","$table",2035],")",",",["T_WHITESPACE","\n            ",2035],["T_VARIABLE","$this",2036],["T_OBJECT_OPERATOR","->",2036],["T_STRING","_getForeignKeysDefinition",2036],"(",["T_VARIABLE","$table",2036],")",["T_WHITESPACE","\n        ",2036],")",";",["T_WHITESPACE","\n        ",2037],["T_VARIABLE","$tableOptions",2038],["T_WHITESPACE","   ",2038],"=",["T_WHITESPACE"," ",2038],["T_VARIABLE","$this",2038],["T_OBJECT_OPERATOR","->",2038],["T_STRING","_getOptionsDefinition",2038],"(",["T_VARIABLE","$table",2038],")",";",["T_WHITESPACE","\n        ",2038],["T_VARIABLE","$sql",2039],["T_WHITESPACE"," ",2039],"=",["T_WHITESPACE"," ",2039],["T_STRING","sprintf",2039],"(",["T_WHITESPACE","\n            ",2039],["T_CONSTANT_ENCAPSED_STRING","\"CREATE TABLE IF NOT EXISTS %s (\\n%s\\n) %s\"",2040],",",["T_WHITESPACE","\n            ",2040],["T_VARIABLE","$this",2041],["T_OBJECT_OPERATOR","->",2041],["T_STRING","quoteIdentifier",2041],"(",["T_VARIABLE","$table",2041],["T_OBJECT_OPERATOR","->",2041],["T_STRING","getName",2041],"(",")",")",",",["T_WHITESPACE","\n            ",2041],["T_STRING","implode",2042],"(",["T_CONSTANT_ENCAPSED_STRING","\",\\n\"",2042],",",["T_WHITESPACE"," ",2042],["T_VARIABLE","$sqlFragment",2042],")",",",["T_WHITESPACE","\n            ",2042],["T_STRING","implode",2043],"(",["T_CONSTANT_ENCAPSED_STRING","\" \"",2043],",",["T_WHITESPACE"," ",2043],["T_VARIABLE","$tableOptions",2043],")",["T_WHITESPACE","\n        ",2043],")",";",["T_WHITESPACE","\n        ",2044],["T_VARIABLE","$result",2045],["T_WHITESPACE"," ",2045],"=",["T_WHITESPACE"," ",2045],["T_VARIABLE","$this",2045],["T_OBJECT_OPERATOR","->",2045],["T_STRING","query",2045],"(",["T_VARIABLE","$sql",2045],")",";",["T_WHITESPACE","\n        ",2045],["T_VARIABLE","$this",2046],["T_OBJECT_OPERATOR","->",2046],["T_STRING","resetDdlCache",2046],"(",["T_VARIABLE","$table",2046],["T_OBJECT_OPERATOR","->",2046],["T_STRING","getName",2046],"(",")",",",["T_WHITESPACE"," ",2046],["T_VARIABLE","$table",2046],["T_OBJECT_OPERATOR","->",2046],["T_STRING","getSchema",2046],"(",")",")",";",["T_WHITESPACE","\n\n        ",2046],["T_RETURN","return",2048],["T_WHITESPACE"," ",2048],["T_VARIABLE","$result",2048],";",["T_WHITESPACE","\n    ",2048],"}",["T_WHITESPACE","\n\n    ",2049],["T_DOC_COMMENT","\/**\n     * Create temporary table\n     *\n     * @param \\Magento\\Framework\\DB\\Ddl\\Table $table\n     * @throws \\Zend_Db_Exception\n     * @return \\Zend_Db_Pdo_Statement\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",2051],["T_WHITESPACE","\n    ",2058],["T_PUBLIC","public",2059],["T_WHITESPACE"," ",2059],["T_FUNCTION","function",2059],["T_WHITESPACE"," ",2059],["T_STRING","createTemporaryTable",2059],"(",["T_NS_SEPARATOR","\\",2059],["T_STRING","Magento",2059],["T_NS_SEPARATOR","\\",2059],["T_STRING","Framework",2059],["T_NS_SEPARATOR","\\",2059],["T_STRING","DB",2059],["T_NS_SEPARATOR","\\",2059],["T_STRING","Ddl",2059],["T_NS_SEPARATOR","\\",2059],["T_STRING","Table",2059],["T_WHITESPACE"," ",2059],["T_VARIABLE","$table",2059],")",["T_WHITESPACE","\n    ",2059],"{",["T_WHITESPACE","\n        ",2060],["T_VARIABLE","$columns",2061],["T_WHITESPACE"," ",2061],"=",["T_WHITESPACE"," ",2061],["T_VARIABLE","$table",2061],["T_OBJECT_OPERATOR","->",2061],["T_STRING","getColumns",2061],"(",")",";",["T_WHITESPACE","\n        ",2061],["T_VARIABLE","$sqlFragment",2062],["T_WHITESPACE","    ",2062],"=",["T_WHITESPACE"," ",2062],["T_STRING","array_merge",2062],"(",["T_WHITESPACE","\n            ",2062],["T_VARIABLE","$this",2063],["T_OBJECT_OPERATOR","->",2063],["T_STRING","_getColumnsDefinition",2063],"(",["T_VARIABLE","$table",2063],")",",",["T_WHITESPACE","\n            ",2063],["T_VARIABLE","$this",2064],["T_OBJECT_OPERATOR","->",2064],["T_STRING","_getIndexesDefinition",2064],"(",["T_VARIABLE","$table",2064],")",",",["T_WHITESPACE","\n            ",2064],["T_VARIABLE","$this",2065],["T_OBJECT_OPERATOR","->",2065],["T_STRING","_getForeignKeysDefinition",2065],"(",["T_VARIABLE","$table",2065],")",["T_WHITESPACE","\n        ",2065],")",";",["T_WHITESPACE","\n        ",2066],["T_VARIABLE","$tableOptions",2067],["T_WHITESPACE","   ",2067],"=",["T_WHITESPACE"," ",2067],["T_VARIABLE","$this",2067],["T_OBJECT_OPERATOR","->",2067],["T_STRING","_getOptionsDefinition",2067],"(",["T_VARIABLE","$table",2067],")",";",["T_WHITESPACE","\n        ",2067],["T_VARIABLE","$sql",2068],["T_WHITESPACE"," ",2068],"=",["T_WHITESPACE"," ",2068],["T_STRING","sprintf",2068],"(",["T_WHITESPACE","\n            ",2068],["T_CONSTANT_ENCAPSED_STRING","\"CREATE TEMPORARY TABLE %s (\\n%s\\n) %s\"",2069],",",["T_WHITESPACE","\n            ",2069],["T_VARIABLE","$this",2070],["T_OBJECT_OPERATOR","->",2070],["T_STRING","quoteIdentifier",2070],"(",["T_VARIABLE","$table",2070],["T_OBJECT_OPERATOR","->",2070],["T_STRING","getName",2070],"(",")",")",",",["T_WHITESPACE","\n            ",2070],["T_STRING","implode",2071],"(",["T_CONSTANT_ENCAPSED_STRING","\",\\n\"",2071],",",["T_WHITESPACE"," ",2071],["T_VARIABLE","$sqlFragment",2071],")",",",["T_WHITESPACE","\n            ",2071],["T_STRING","implode",2072],"(",["T_CONSTANT_ENCAPSED_STRING","\" \"",2072],",",["T_WHITESPACE"," ",2072],["T_VARIABLE","$tableOptions",2072],")",["T_WHITESPACE","\n        ",2072],")",";",["T_WHITESPACE","\n\n        ",2073],["T_RETURN","return",2075],["T_WHITESPACE"," ",2075],["T_VARIABLE","$this",2075],["T_OBJECT_OPERATOR","->",2075],["T_STRING","query",2075],"(",["T_VARIABLE","$sql",2075],")",";",["T_WHITESPACE","\n    ",2075],"}",["T_WHITESPACE","\n\n    ",2076],["T_DOC_COMMENT","\/**\n     * Create temporary table like\n     *\n     * @param string $temporaryTableName\n     * @param string $originTableName\n     * @param bool $ifNotExists\n     * @return \\Zend_Db_Statement_Pdo\n     *\/",2078],["T_WHITESPACE","\n    ",2085],["T_PUBLIC","public",2086],["T_WHITESPACE"," ",2086],["T_FUNCTION","function",2086],["T_WHITESPACE"," ",2086],["T_STRING","createTemporaryTableLike",2086],"(",["T_VARIABLE","$temporaryTableName",2086],",",["T_WHITESPACE"," ",2086],["T_VARIABLE","$originTableName",2086],",",["T_WHITESPACE"," ",2086],["T_VARIABLE","$ifNotExists",2086],["T_WHITESPACE"," ",2086],"=",["T_WHITESPACE"," ",2086],["T_STRING","false",2086],")",["T_WHITESPACE","\n    ",2086],"{",["T_WHITESPACE","\n        ",2087],["T_VARIABLE","$ifNotExistsSql",2088],["T_WHITESPACE"," ",2088],"=",["T_WHITESPACE"," ",2088],"(",["T_VARIABLE","$ifNotExists",2088],["T_WHITESPACE"," ",2088],"?",["T_WHITESPACE"," ",2088],["T_CONSTANT_ENCAPSED_STRING","'IF NOT EXISTS'",2088],["T_WHITESPACE"," ",2088],":",["T_WHITESPACE"," ",2088],["T_CONSTANT_ENCAPSED_STRING","''",2088],")",";",["T_WHITESPACE","\n        ",2088],["T_VARIABLE","$temporaryTable",2089],["T_WHITESPACE"," ",2089],"=",["T_WHITESPACE"," ",2089],["T_VARIABLE","$this",2089],["T_OBJECT_OPERATOR","->",2089],["T_STRING","quoteIdentifier",2089],"(",["T_VARIABLE","$this",2089],["T_OBJECT_OPERATOR","->",2089],["T_STRING","_getTableName",2089],"(",["T_VARIABLE","$temporaryTableName",2089],")",")",";",["T_WHITESPACE","\n        ",2089],["T_VARIABLE","$originTable",2090],["T_WHITESPACE"," ",2090],"=",["T_WHITESPACE"," ",2090],["T_VARIABLE","$this",2090],["T_OBJECT_OPERATOR","->",2090],["T_STRING","quoteIdentifier",2090],"(",["T_VARIABLE","$this",2090],["T_OBJECT_OPERATOR","->",2090],["T_STRING","_getTableName",2090],"(",["T_VARIABLE","$originTableName",2090],")",")",";",["T_WHITESPACE","\n        ",2090],["T_VARIABLE","$sql",2091],["T_WHITESPACE"," ",2091],"=",["T_WHITESPACE"," ",2091],["T_STRING","sprintf",2091],"(",["T_CONSTANT_ENCAPSED_STRING","'CREATE TEMPORARY TABLE %s %s LIKE %s'",2091],",",["T_WHITESPACE"," ",2091],["T_VARIABLE","$ifNotExistsSql",2091],",",["T_WHITESPACE"," ",2091],["T_VARIABLE","$temporaryTable",2091],",",["T_WHITESPACE"," ",2091],["T_VARIABLE","$originTable",2091],")",";",["T_WHITESPACE","\n\n        ",2091],["T_RETURN","return",2093],["T_WHITESPACE"," ",2093],["T_VARIABLE","$this",2093],["T_OBJECT_OPERATOR","->",2093],["T_STRING","query",2093],"(",["T_VARIABLE","$sql",2093],")",";",["T_WHITESPACE","\n    ",2093],"}",["T_WHITESPACE","\n\n    ",2094],["T_DOC_COMMENT","\/**\n     * Rename several tables\n     *\n     * @param array $tablePairs array('oldName' => 'Name1', 'newName' => 'Name2')\n     *\n     * @return boolean\n     * @throws \\Zend_Db_Exception\n     *\/",2096],["T_WHITESPACE","\n    ",2103],["T_PUBLIC","public",2104],["T_WHITESPACE"," ",2104],["T_FUNCTION","function",2104],["T_WHITESPACE"," ",2104],["T_STRING","renameTablesBatch",2104],"(",["T_ARRAY","array",2104],["T_WHITESPACE"," ",2104],["T_VARIABLE","$tablePairs",2104],")",["T_WHITESPACE","\n    ",2104],"{",["T_WHITESPACE","\n        ",2105],["T_IF","if",2106],["T_WHITESPACE"," ",2106],"(",["T_STRING","count",2106],"(",["T_VARIABLE","$tablePairs",2106],")",["T_WHITESPACE"," ",2106],["T_IS_EQUAL","==",2106],["T_WHITESPACE"," ",2106],["T_LNUMBER","0",2106],")",["T_WHITESPACE"," ",2106],"{",["T_WHITESPACE","\n            ",2106],["T_THROW","throw",2107],["T_WHITESPACE"," ",2107],["T_NEW","new",2107],["T_WHITESPACE"," ",2107],["T_NS_SEPARATOR","\\",2107],["T_STRING","Zend_Db_Exception",2107],"(",["T_CONSTANT_ENCAPSED_STRING","'Please provide tables for rename'",2107],")",";",["T_WHITESPACE","\n        ",2107],"}",["T_WHITESPACE","\n\n        ",2108],["T_VARIABLE","$renamesList",2110],["T_WHITESPACE"," ",2110],"=",["T_WHITESPACE"," ",2110],"[","]",";",["T_WHITESPACE","\n        ",2110],["T_VARIABLE","$tablesList",2111],["T_WHITESPACE","  ",2111],"=",["T_WHITESPACE"," ",2111],"[","]",";",["T_WHITESPACE","\n        ",2111],["T_FOREACH","foreach",2112],["T_WHITESPACE"," ",2112],"(",["T_VARIABLE","$tablePairs",2112],["T_WHITESPACE"," ",2112],["T_AS","as",2112],["T_WHITESPACE"," ",2112],["T_VARIABLE","$pair",2112],")",["T_WHITESPACE"," ",2112],"{",["T_WHITESPACE","\n            ",2112],["T_VARIABLE","$oldTableName",2113],["T_WHITESPACE","  ",2113],"=",["T_WHITESPACE"," ",2113],["T_VARIABLE","$pair",2113],"[",["T_CONSTANT_ENCAPSED_STRING","'oldName'",2113],"]",";",["T_WHITESPACE","\n            ",2113],["T_VARIABLE","$newTableName",2114],["T_WHITESPACE","  ",2114],"=",["T_WHITESPACE"," ",2114],["T_VARIABLE","$pair",2114],"[",["T_CONSTANT_ENCAPSED_STRING","'newName'",2114],"]",";",["T_WHITESPACE","\n            ",2114],["T_VARIABLE","$renamesList",2115],"[","]",["T_WHITESPACE"," ",2115],"=",["T_WHITESPACE"," ",2115],["T_STRING","sprintf",2115],"(",["T_CONSTANT_ENCAPSED_STRING","'%s TO %s'",2115],",",["T_WHITESPACE"," ",2115],["T_VARIABLE","$oldTableName",2115],",",["T_WHITESPACE"," ",2115],["T_VARIABLE","$newTableName",2115],")",";",["T_WHITESPACE","\n\n            ",2115],["T_VARIABLE","$tablesList",2117],"[",["T_VARIABLE","$oldTableName",2117],"]",["T_WHITESPACE"," ",2117],"=",["T_WHITESPACE"," ",2117],["T_VARIABLE","$oldTableName",2117],";",["T_WHITESPACE","\n            ",2117],["T_VARIABLE","$tablesList",2118],"[",["T_VARIABLE","$newTableName",2118],"]",["T_WHITESPACE"," ",2118],"=",["T_WHITESPACE"," ",2118],["T_VARIABLE","$newTableName",2118],";",["T_WHITESPACE","\n        ",2118],"}",["T_WHITESPACE","\n\n        ",2119],["T_VARIABLE","$query",2121],["T_WHITESPACE"," ",2121],"=",["T_WHITESPACE"," ",2121],["T_STRING","sprintf",2121],"(",["T_CONSTANT_ENCAPSED_STRING","'RENAME TABLE %s'",2121],",",["T_WHITESPACE"," ",2121],["T_STRING","implode",2121],"(",["T_CONSTANT_ENCAPSED_STRING","','",2121],",",["T_WHITESPACE"," ",2121],["T_VARIABLE","$renamesList",2121],")",")",";",["T_WHITESPACE","\n        ",2121],["T_VARIABLE","$this",2122],["T_OBJECT_OPERATOR","->",2122],["T_STRING","query",2122],"(",["T_VARIABLE","$query",2122],")",";",["T_WHITESPACE","\n\n        ",2122],["T_FOREACH","foreach",2124],["T_WHITESPACE"," ",2124],"(",["T_VARIABLE","$tablesList",2124],["T_WHITESPACE"," ",2124],["T_AS","as",2124],["T_WHITESPACE"," ",2124],["T_VARIABLE","$table",2124],")",["T_WHITESPACE"," ",2124],"{",["T_WHITESPACE","\n            ",2124],["T_VARIABLE","$this",2125],["T_OBJECT_OPERATOR","->",2125],["T_STRING","resetDdlCache",2125],"(",["T_VARIABLE","$table",2125],")",";",["T_WHITESPACE","\n        ",2125],"}",["T_WHITESPACE","\n\n        ",2126],["T_RETURN","return",2128],["T_WHITESPACE"," ",2128],["T_STRING","true",2128],";",["T_WHITESPACE","\n    ",2128],"}",["T_WHITESPACE","\n\n    ",2129],["T_DOC_COMMENT","\/**\n     * Retrieve columns and primary keys definition array for create table\n     *\n     * @param Table $table\n     * @return string[]\n     * @throws \\Zend_Db_Exception\n     *\/",2131],["T_WHITESPACE","\n    ",2137],["T_PROTECTED","protected",2138],["T_WHITESPACE"," ",2138],["T_FUNCTION","function",2138],["T_WHITESPACE"," ",2138],["T_STRING","_getColumnsDefinition",2138],"(",["T_STRING","Table",2138],["T_WHITESPACE"," ",2138],["T_VARIABLE","$table",2138],")",["T_WHITESPACE","\n    ",2138],"{",["T_WHITESPACE","\n        ",2139],["T_VARIABLE","$definition",2140],["T_WHITESPACE"," ",2140],"=",["T_WHITESPACE"," ",2140],"[","]",";",["T_WHITESPACE","\n        ",2140],["T_VARIABLE","$primary",2141],["T_WHITESPACE","    ",2141],"=",["T_WHITESPACE"," ",2141],"[","]",";",["T_WHITESPACE","\n        ",2141],["T_VARIABLE","$columns",2142],["T_WHITESPACE","    ",2142],"=",["T_WHITESPACE"," ",2142],["T_VARIABLE","$table",2142],["T_OBJECT_OPERATOR","->",2142],["T_STRING","getColumns",2142],"(",")",";",["T_WHITESPACE","\n        ",2142],["T_IF","if",2143],["T_WHITESPACE"," ",2143],"(",["T_EMPTY","empty",2143],"(",["T_VARIABLE","$columns",2143],")",")",["T_WHITESPACE"," ",2143],"{",["T_WHITESPACE","\n            ",2143],["T_THROW","throw",2144],["T_WHITESPACE"," ",2144],["T_NEW","new",2144],["T_WHITESPACE"," ",2144],["T_NS_SEPARATOR","\\",2144],["T_STRING","Zend_Db_Exception",2144],"(",["T_CONSTANT_ENCAPSED_STRING","'Table columns are not defined'",2144],")",";",["T_WHITESPACE","\n        ",2144],"}",["T_WHITESPACE","\n\n        ",2145],["T_FOREACH","foreach",2147],["T_WHITESPACE"," ",2147],"(",["T_VARIABLE","$columns",2147],["T_WHITESPACE"," ",2147],["T_AS","as",2147],["T_WHITESPACE"," ",2147],["T_VARIABLE","$columnData",2147],")",["T_WHITESPACE"," ",2147],"{",["T_WHITESPACE","\n            ",2147],["T_VARIABLE","$columnDefinition",2148],["T_WHITESPACE"," ",2148],"=",["T_WHITESPACE"," ",2148],["T_VARIABLE","$this",2148],["T_OBJECT_OPERATOR","->",2148],["T_STRING","_getColumnDefinition",2148],"(",["T_VARIABLE","$columnData",2148],")",";",["T_WHITESPACE","\n            ",2148],["T_IF","if",2149],["T_WHITESPACE"," ",2149],"(",["T_VARIABLE","$columnData",2149],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",2149],"]",")",["T_WHITESPACE"," ",2149],"{",["T_WHITESPACE","\n                ",2149],["T_VARIABLE","$primary",2150],"[",["T_VARIABLE","$columnData",2150],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",2150],"]","]",["T_WHITESPACE"," ",2150],"=",["T_WHITESPACE"," ",2150],["T_VARIABLE","$columnData",2150],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY_POSITION'",2150],"]",";",["T_WHITESPACE","\n            ",2150],"}",["T_WHITESPACE","\n\n            ",2151],["T_VARIABLE","$definition",2153],"[","]",["T_WHITESPACE"," ",2153],"=",["T_WHITESPACE"," ",2153],["T_STRING","sprintf",2153],"(",["T_WHITESPACE","\n                ",2153],["T_CONSTANT_ENCAPSED_STRING","'  %s %s'",2154],",",["T_WHITESPACE","\n                ",2154],["T_VARIABLE","$this",2155],["T_OBJECT_OPERATOR","->",2155],["T_STRING","quoteIdentifier",2155],"(",["T_VARIABLE","$columnData",2155],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",2155],"]",")",",",["T_WHITESPACE","\n                ",2155],["T_VARIABLE","$columnDefinition",2156],["T_WHITESPACE","\n            ",2156],")",";",["T_WHITESPACE","\n        ",2157],"}",["T_WHITESPACE","\n\n        ",2158],["T_COMMENT","\/\/ PRIMARY KEY\n",2160],["T_WHITESPACE","        ",2161],["T_IF","if",2161],["T_WHITESPACE"," ",2161],"(","!",["T_EMPTY","empty",2161],"(",["T_VARIABLE","$primary",2161],")",")",["T_WHITESPACE"," ",2161],"{",["T_WHITESPACE","\n            ",2161],["T_STRING","asort",2162],"(",["T_VARIABLE","$primary",2162],",",["T_WHITESPACE"," ",2162],["T_STRING","SORT_NUMERIC",2162],")",";",["T_WHITESPACE","\n            ",2162],["T_VARIABLE","$primary",2163],["T_WHITESPACE","      ",2163],"=",["T_WHITESPACE"," ",2163],["T_STRING","array_map",2163],"(","[",["T_VARIABLE","$this",2163],",",["T_WHITESPACE"," ",2163],["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",2163],"]",",",["T_WHITESPACE"," ",2163],["T_STRING","array_keys",2163],"(",["T_VARIABLE","$primary",2163],")",")",";",["T_WHITESPACE","\n            ",2163],["T_VARIABLE","$definition",2164],"[","]",["T_WHITESPACE"," ",2164],"=",["T_WHITESPACE"," ",2164],["T_STRING","sprintf",2164],"(",["T_CONSTANT_ENCAPSED_STRING","'  PRIMARY KEY (%s)'",2164],",",["T_WHITESPACE"," ",2164],["T_STRING","implode",2164],"(",["T_CONSTANT_ENCAPSED_STRING","', '",2164],",",["T_WHITESPACE"," ",2164],["T_VARIABLE","$primary",2164],")",")",";",["T_WHITESPACE","\n        ",2164],"}",["T_WHITESPACE","\n\n        ",2165],["T_RETURN","return",2167],["T_WHITESPACE"," ",2167],["T_VARIABLE","$definition",2167],";",["T_WHITESPACE","\n    ",2167],"}",["T_WHITESPACE","\n\n    ",2168],["T_DOC_COMMENT","\/**\n     * Retrieve table indexes definition array for create table\n     *\n     * @param Table $table\n     * @return string[]\n     *\/",2170],["T_WHITESPACE","\n    ",2175],["T_PROTECTED","protected",2176],["T_WHITESPACE"," ",2176],["T_FUNCTION","function",2176],["T_WHITESPACE"," ",2176],["T_STRING","_getIndexesDefinition",2176],"(",["T_STRING","Table",2176],["T_WHITESPACE"," ",2176],["T_VARIABLE","$table",2176],")",["T_WHITESPACE","\n    ",2176],"{",["T_WHITESPACE","\n        ",2177],["T_VARIABLE","$definition",2178],["T_WHITESPACE"," ",2178],"=",["T_WHITESPACE"," ",2178],"[","]",";",["T_WHITESPACE","\n        ",2178],["T_VARIABLE","$indexes",2179],["T_WHITESPACE"," ",2179],"=",["T_WHITESPACE"," ",2179],["T_VARIABLE","$table",2179],["T_OBJECT_OPERATOR","->",2179],["T_STRING","getIndexes",2179],"(",")",";",["T_WHITESPACE","\n        ",2179],["T_FOREACH","foreach",2180],["T_WHITESPACE"," ",2180],"(",["T_VARIABLE","$indexes",2180],["T_WHITESPACE"," ",2180],["T_AS","as",2180],["T_WHITESPACE"," ",2180],["T_VARIABLE","$indexData",2180],")",["T_WHITESPACE"," ",2180],"{",["T_WHITESPACE","\n            ",2180],["T_IF","if",2181],["T_WHITESPACE"," ",2181],"(","!",["T_EMPTY","empty",2181],"(",["T_VARIABLE","$indexData",2181],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",2181],"]",")",")",["T_WHITESPACE"," ",2181],"{",["T_WHITESPACE","\n                ",2181],["T_COMMENT","\/\/Skipping not supported fulltext indexes for NDB\n",2182],["T_WHITESPACE","                ",2183],["T_IF","if",2183],["T_WHITESPACE"," ",2183],"(","(",["T_VARIABLE","$indexData",2183],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",2183],"]",["T_WHITESPACE"," ",2183],["T_IS_EQUAL","==",2183],["T_WHITESPACE"," ",2183],["T_STRING","AdapterInterface",2183],["T_DOUBLE_COLON","::",2183],["T_STRING","INDEX_TYPE_FULLTEXT",2183],")",["T_WHITESPACE"," ",2183],["T_BOOLEAN_AND","&&",2183],["T_WHITESPACE"," ",2183],["T_VARIABLE","$this",2183],["T_OBJECT_OPERATOR","->",2183],["T_STRING","isNdb",2183],"(",["T_VARIABLE","$table",2183],")",")",["T_WHITESPACE"," ",2183],"{",["T_WHITESPACE","\n                    ",2183],["T_CONTINUE","continue",2184],";",["T_WHITESPACE","\n                ",2184],"}",["T_WHITESPACE","\n                ",2185],["T_SWITCH","switch",2186],["T_WHITESPACE"," ",2186],"(",["T_VARIABLE","$indexData",2186],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",2186],"]",")",["T_WHITESPACE"," ",2186],"{",["T_WHITESPACE","\n                    ",2186],["T_CASE","case",2187],["T_WHITESPACE"," ",2187],["T_STRING","AdapterInterface",2187],["T_DOUBLE_COLON","::",2187],["T_STRING","INDEX_TYPE_PRIMARY",2187],":",["T_WHITESPACE","\n                        ",2187],["T_VARIABLE","$indexType",2188],["T_WHITESPACE"," ",2188],"=",["T_WHITESPACE"," ",2188],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY KEY'",2188],";",["T_WHITESPACE","\n                        ",2188],["T_UNSET","unset",2189],"(",["T_VARIABLE","$indexData",2189],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_NAME'",2189],"]",")",";",["T_WHITESPACE","\n                        ",2189],["T_BREAK","break",2190],";",["T_WHITESPACE","\n                    ",2190],["T_DEFAULT","default",2191],":",["T_WHITESPACE","\n                        ",2191],["T_VARIABLE","$indexType",2192],["T_WHITESPACE"," ",2192],"=",["T_WHITESPACE"," ",2192],["T_STRING","strtoupper",2192],"(",["T_VARIABLE","$indexData",2192],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",2192],"]",")",";",["T_WHITESPACE","\n                        ",2192],["T_BREAK","break",2193],";",["T_WHITESPACE","\n                ",2193],"}",["T_WHITESPACE","\n            ",2194],"}",["T_WHITESPACE"," ",2195],["T_ELSE","else",2195],["T_WHITESPACE"," ",2195],"{",["T_WHITESPACE","\n                ",2195],["T_VARIABLE","$indexType",2196],["T_WHITESPACE"," ",2196],"=",["T_WHITESPACE"," ",2196],["T_CONSTANT_ENCAPSED_STRING","'KEY'",2196],";",["T_WHITESPACE","\n            ",2196],"}",["T_WHITESPACE","\n\n            ",2197],["T_VARIABLE","$columns",2199],["T_WHITESPACE"," ",2199],"=",["T_WHITESPACE"," ",2199],"[","]",";",["T_WHITESPACE","\n            ",2199],["T_FOREACH","foreach",2200],["T_WHITESPACE"," ",2200],"(",["T_VARIABLE","$indexData",2200],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS'",2200],"]",["T_WHITESPACE"," ",2200],["T_AS","as",2200],["T_WHITESPACE"," ",2200],["T_VARIABLE","$columnData",2200],")",["T_WHITESPACE"," ",2200],"{",["T_WHITESPACE","\n                ",2200],["T_VARIABLE","$column",2201],["T_WHITESPACE"," ",2201],"=",["T_WHITESPACE"," ",2201],["T_VARIABLE","$this",2201],["T_OBJECT_OPERATOR","->",2201],["T_STRING","quoteIdentifier",2201],"(",["T_VARIABLE","$columnData",2201],"[",["T_CONSTANT_ENCAPSED_STRING","'NAME'",2201],"]",")",";",["T_WHITESPACE","\n                ",2201],["T_IF","if",2202],["T_WHITESPACE"," ",2202],"(","!",["T_EMPTY","empty",2202],"(",["T_VARIABLE","$columnData",2202],"[",["T_CONSTANT_ENCAPSED_STRING","'SIZE'",2202],"]",")",")",["T_WHITESPACE"," ",2202],"{",["T_WHITESPACE","\n                    ",2202],["T_VARIABLE","$column",2203],["T_WHITESPACE"," ",2203],["T_CONCAT_EQUAL",".=",2203],["T_WHITESPACE"," ",2203],["T_STRING","sprintf",2203],"(",["T_CONSTANT_ENCAPSED_STRING","'(%d)'",2203],",",["T_WHITESPACE"," ",2203],["T_VARIABLE","$columnData",2203],"[",["T_CONSTANT_ENCAPSED_STRING","'SIZE'",2203],"]",")",";",["T_WHITESPACE","\n                ",2203],"}",["T_WHITESPACE","\n                ",2204],["T_VARIABLE","$columns",2205],"[","]",["T_WHITESPACE"," ",2205],"=",["T_WHITESPACE"," ",2205],["T_VARIABLE","$column",2205],";",["T_WHITESPACE","\n            ",2205],"}",["T_WHITESPACE","\n            ",2206],["T_VARIABLE","$indexName",2207],["T_WHITESPACE"," ",2207],"=",["T_WHITESPACE"," ",2207],["T_ISSET","isset",2207],"(",["T_VARIABLE","$indexData",2207],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_NAME'",2207],"]",")",["T_WHITESPACE"," ",2207],"?",["T_WHITESPACE"," ",2207],["T_VARIABLE","$this",2207],["T_OBJECT_OPERATOR","->",2207],["T_STRING","quoteIdentifier",2207],"(",["T_VARIABLE","$indexData",2207],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_NAME'",2207],"]",")",["T_WHITESPACE"," ",2207],":",["T_WHITESPACE"," ",2207],["T_CONSTANT_ENCAPSED_STRING","''",2207],";",["T_WHITESPACE","\n            ",2207],["T_VARIABLE","$definition",2208],"[","]",["T_WHITESPACE"," ",2208],"=",["T_WHITESPACE"," ",2208],["T_STRING","sprintf",2208],"(",["T_WHITESPACE","\n                ",2208],["T_CONSTANT_ENCAPSED_STRING","'  %s %s (%s)'",2209],",",["T_WHITESPACE","\n                ",2209],["T_VARIABLE","$indexType",2210],",",["T_WHITESPACE","\n                ",2210],["T_VARIABLE","$indexName",2211],",",["T_WHITESPACE","\n                ",2211],["T_STRING","implode",2212],"(",["T_CONSTANT_ENCAPSED_STRING","', '",2212],",",["T_WHITESPACE"," ",2212],["T_VARIABLE","$columns",2212],")",["T_WHITESPACE","\n            ",2212],")",";",["T_WHITESPACE","\n        ",2213],"}",["T_WHITESPACE","\n\n        ",2214],["T_RETURN","return",2216],["T_WHITESPACE"," ",2216],["T_VARIABLE","$definition",2216],";",["T_WHITESPACE","\n    ",2216],"}",["T_WHITESPACE","\n\n    ",2217],["T_DOC_COMMENT","\/**\n     * Check if NDB is used for table\n     *\n     * @param Table $table\n     * @return bool\n     *\/",2219],["T_WHITESPACE","\n    ",2224],["T_PROTECTED","protected",2225],["T_WHITESPACE"," ",2225],["T_FUNCTION","function",2225],["T_WHITESPACE"," ",2225],["T_STRING","isNdb",2225],"(",["T_STRING","Table",2225],["T_WHITESPACE"," ",2225],["T_VARIABLE","$table",2225],")",["T_WHITESPACE","\n    ",2225],"{",["T_WHITESPACE","\n        ",2226],["T_VARIABLE","$engineType",2227],["T_WHITESPACE"," ",2227],"=",["T_WHITESPACE"," ",2227],["T_STRING","strtolower",2227],"(",["T_VARIABLE","$table",2227],["T_OBJECT_OPERATOR","->",2227],["T_STRING","getOption",2227],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",2227],")",")",";",["T_WHITESPACE","\n        ",2227],["T_RETURN","return",2228],["T_WHITESPACE"," ",2228],["T_VARIABLE","$engineType",2228],["T_WHITESPACE"," ",2228],["T_IS_EQUAL","==",2228],["T_WHITESPACE"," ",2228],["T_CONSTANT_ENCAPSED_STRING","'ndb'",2228],["T_WHITESPACE"," ",2228],["T_BOOLEAN_OR","||",2228],["T_WHITESPACE"," ",2228],["T_VARIABLE","$engineType",2228],["T_WHITESPACE"," ",2228],["T_IS_EQUAL","==",2228],["T_WHITESPACE"," ",2228],["T_CONSTANT_ENCAPSED_STRING","'ndbcluster'",2228],";",["T_WHITESPACE","\n    ",2228],"}",["T_WHITESPACE","\n\n    ",2229],["T_DOC_COMMENT","\/**\n     * Retrieve table foreign keys definition array for create table\n     *\n     * @param Table $table\n     * @return string[]\n     *\/",2231],["T_WHITESPACE","\n    ",2236],["T_PROTECTED","protected",2237],["T_WHITESPACE"," ",2237],["T_FUNCTION","function",2237],["T_WHITESPACE"," ",2237],["T_STRING","_getForeignKeysDefinition",2237],"(",["T_STRING","Table",2237],["T_WHITESPACE"," ",2237],["T_VARIABLE","$table",2237],")",["T_WHITESPACE","\n    ",2237],"{",["T_WHITESPACE","\n        ",2238],["T_VARIABLE","$definition",2239],["T_WHITESPACE"," ",2239],"=",["T_WHITESPACE"," ",2239],"[","]",";",["T_WHITESPACE","\n        ",2239],["T_VARIABLE","$relations",2240],["T_WHITESPACE","  ",2240],"=",["T_WHITESPACE"," ",2240],["T_VARIABLE","$table",2240],["T_OBJECT_OPERATOR","->",2240],["T_STRING","getForeignKeys",2240],"(",")",";",["T_WHITESPACE","\n\n        ",2240],["T_IF","if",2242],["T_WHITESPACE"," ",2242],"(","!",["T_EMPTY","empty",2242],"(",["T_VARIABLE","$relations",2242],")",")",["T_WHITESPACE"," ",2242],"{",["T_WHITESPACE","\n            ",2242],["T_FOREACH","foreach",2243],["T_WHITESPACE"," ",2243],"(",["T_VARIABLE","$relations",2243],["T_WHITESPACE"," ",2243],["T_AS","as",2243],["T_WHITESPACE"," ",2243],["T_VARIABLE","$fkData",2243],")",["T_WHITESPACE"," ",2243],"{",["T_WHITESPACE","\n                ",2243],["T_VARIABLE","$onDelete",2244],["T_WHITESPACE"," ",2244],"=",["T_WHITESPACE"," ",2244],["T_VARIABLE","$this",2244],["T_OBJECT_OPERATOR","->",2244],["T_STRING","_getDdlAction",2244],"(",["T_VARIABLE","$fkData",2244],"[",["T_CONSTANT_ENCAPSED_STRING","'ON_DELETE'",2244],"]",")",";",["T_WHITESPACE","\n                ",2244],["T_VARIABLE","$definition",2245],"[","]",["T_WHITESPACE"," ",2245],"=",["T_WHITESPACE"," ",2245],["T_STRING","sprintf",2245],"(",["T_WHITESPACE","\n                    ",2245],["T_CONSTANT_ENCAPSED_STRING","'  CONSTRAINT %s FOREIGN KEY (%s) REFERENCES %s (%s) ON DELETE %s'",2246],",",["T_WHITESPACE","\n                    ",2246],["T_VARIABLE","$this",2247],["T_OBJECT_OPERATOR","->",2247],["T_STRING","quoteIdentifier",2247],"(",["T_VARIABLE","$fkData",2247],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",2247],"]",")",",",["T_WHITESPACE","\n                    ",2247],["T_VARIABLE","$this",2248],["T_OBJECT_OPERATOR","->",2248],["T_STRING","quoteIdentifier",2248],"(",["T_VARIABLE","$fkData",2248],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",2248],"]",")",",",["T_WHITESPACE","\n                    ",2248],["T_VARIABLE","$this",2249],["T_OBJECT_OPERATOR","->",2249],["T_STRING","quoteIdentifier",2249],"(",["T_VARIABLE","$fkData",2249],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",2249],"]",")",",",["T_WHITESPACE","\n                    ",2249],["T_VARIABLE","$this",2250],["T_OBJECT_OPERATOR","->",2250],["T_STRING","quoteIdentifier",2250],"(",["T_VARIABLE","$fkData",2250],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",2250],"]",")",",",["T_WHITESPACE","\n                    ",2250],["T_VARIABLE","$onDelete",2251],["T_WHITESPACE","\n                ",2251],")",";",["T_WHITESPACE","\n            ",2252],"}",["T_WHITESPACE","\n        ",2253],"}",["T_WHITESPACE","\n\n        ",2254],["T_RETURN","return",2256],["T_WHITESPACE"," ",2256],["T_VARIABLE","$definition",2256],";",["T_WHITESPACE","\n    ",2256],"}",["T_WHITESPACE","\n\n    ",2257],["T_DOC_COMMENT","\/**\n     * Retrieve table options definition array for create table\n     *\n     * @param Table $table\n     * @return string[]\n     * @throws \\Zend_Db_Exception\n     *\/",2259],["T_WHITESPACE","\n    ",2265],["T_PROTECTED","protected",2266],["T_WHITESPACE"," ",2266],["T_FUNCTION","function",2266],["T_WHITESPACE"," ",2266],["T_STRING","_getOptionsDefinition",2266],"(",["T_STRING","Table",2266],["T_WHITESPACE"," ",2266],["T_VARIABLE","$table",2266],")",["T_WHITESPACE","\n    ",2266],"{",["T_WHITESPACE","\n        ",2267],["T_VARIABLE","$definition",2268],["T_WHITESPACE"," ",2268],"=",["T_WHITESPACE"," ",2268],"[","]",";",["T_WHITESPACE","\n        ",2268],["T_VARIABLE","$comment",2269],["T_WHITESPACE","    ",2269],"=",["T_WHITESPACE"," ",2269],["T_VARIABLE","$table",2269],["T_OBJECT_OPERATOR","->",2269],["T_STRING","getComment",2269],"(",")",";",["T_WHITESPACE","\n        ",2269],["T_IF","if",2270],["T_WHITESPACE"," ",2270],"(",["T_EMPTY","empty",2270],"(",["T_VARIABLE","$comment",2270],")",")",["T_WHITESPACE"," ",2270],"{",["T_WHITESPACE","\n            ",2270],["T_THROW","throw",2271],["T_WHITESPACE"," ",2271],["T_NEW","new",2271],["T_WHITESPACE"," ",2271],["T_NS_SEPARATOR","\\",2271],["T_STRING","Zend_Db_Exception",2271],"(",["T_CONSTANT_ENCAPSED_STRING","'Comment for table is required and must be defined'",2271],")",";",["T_WHITESPACE","\n        ",2271],"}",["T_WHITESPACE","\n        ",2272],["T_VARIABLE","$definition",2273],"[","]",["T_WHITESPACE"," ",2273],"=",["T_WHITESPACE"," ",2273],["T_VARIABLE","$this",2273],["T_OBJECT_OPERATOR","->",2273],["T_STRING","quoteInto",2273],"(",["T_CONSTANT_ENCAPSED_STRING","'COMMENT=?'",2273],",",["T_WHITESPACE"," ",2273],["T_VARIABLE","$comment",2273],")",";",["T_WHITESPACE","\n\n        ",2273],["T_VARIABLE","$tableProps",2275],["T_WHITESPACE"," ",2275],"=",["T_WHITESPACE"," ",2275],"[",["T_WHITESPACE","\n            ",2275],["T_CONSTANT_ENCAPSED_STRING","'type'",2276],["T_WHITESPACE","              ",2276],["T_DOUBLE_ARROW","=>",2276],["T_WHITESPACE"," ",2276],["T_CONSTANT_ENCAPSED_STRING","'ENGINE=%s'",2276],",",["T_WHITESPACE","\n            ",2276],["T_CONSTANT_ENCAPSED_STRING","'checksum'",2277],["T_WHITESPACE","          ",2277],["T_DOUBLE_ARROW","=>",2277],["T_WHITESPACE"," ",2277],["T_CONSTANT_ENCAPSED_STRING","'CHECKSUM=%d'",2277],",",["T_WHITESPACE","\n            ",2277],["T_CONSTANT_ENCAPSED_STRING","'auto_increment'",2278],["T_WHITESPACE","    ",2278],["T_DOUBLE_ARROW","=>",2278],["T_WHITESPACE"," ",2278],["T_CONSTANT_ENCAPSED_STRING","'AUTO_INCREMENT=%d'",2278],",",["T_WHITESPACE","\n            ",2278],["T_CONSTANT_ENCAPSED_STRING","'avg_row_length'",2279],["T_WHITESPACE","    ",2279],["T_DOUBLE_ARROW","=>",2279],["T_WHITESPACE"," ",2279],["T_CONSTANT_ENCAPSED_STRING","'AVG_ROW_LENGTH=%d'",2279],",",["T_WHITESPACE","\n            ",2279],["T_CONSTANT_ENCAPSED_STRING","'max_rows'",2280],["T_WHITESPACE","          ",2280],["T_DOUBLE_ARROW","=>",2280],["T_WHITESPACE"," ",2280],["T_CONSTANT_ENCAPSED_STRING","'MAX_ROWS=%d'",2280],",",["T_WHITESPACE","\n            ",2280],["T_CONSTANT_ENCAPSED_STRING","'min_rows'",2281],["T_WHITESPACE","          ",2281],["T_DOUBLE_ARROW","=>",2281],["T_WHITESPACE"," ",2281],["T_CONSTANT_ENCAPSED_STRING","'MIN_ROWS=%d'",2281],",",["T_WHITESPACE","\n            ",2281],["T_CONSTANT_ENCAPSED_STRING","'delay_key_write'",2282],["T_WHITESPACE","   ",2282],["T_DOUBLE_ARROW","=>",2282],["T_WHITESPACE"," ",2282],["T_CONSTANT_ENCAPSED_STRING","'DELAY_KEY_WRITE=%d'",2282],",",["T_WHITESPACE","\n            ",2282],["T_CONSTANT_ENCAPSED_STRING","'row_format'",2283],["T_WHITESPACE","        ",2283],["T_DOUBLE_ARROW","=>",2283],["T_WHITESPACE"," ",2283],["T_CONSTANT_ENCAPSED_STRING","'row_format=%s'",2283],",",["T_WHITESPACE","\n            ",2283],["T_CONSTANT_ENCAPSED_STRING","'charset'",2284],["T_WHITESPACE","           ",2284],["T_DOUBLE_ARROW","=>",2284],["T_WHITESPACE"," ",2284],["T_CONSTANT_ENCAPSED_STRING","'charset=%s'",2284],",",["T_WHITESPACE","\n            ",2284],["T_CONSTANT_ENCAPSED_STRING","'collate'",2285],["T_WHITESPACE","           ",2285],["T_DOUBLE_ARROW","=>",2285],["T_WHITESPACE"," ",2285],["T_CONSTANT_ENCAPSED_STRING","'COLLATE=%s'",2285],",",["T_WHITESPACE","\n        ",2285],"]",";",["T_WHITESPACE","\n        ",2286],["T_FOREACH","foreach",2287],["T_WHITESPACE"," ",2287],"(",["T_VARIABLE","$tableProps",2287],["T_WHITESPACE"," ",2287],["T_AS","as",2287],["T_WHITESPACE"," ",2287],["T_VARIABLE","$key",2287],["T_WHITESPACE"," ",2287],["T_DOUBLE_ARROW","=>",2287],["T_WHITESPACE"," ",2287],["T_VARIABLE","$mask",2287],")",["T_WHITESPACE"," ",2287],"{",["T_WHITESPACE","\n            ",2287],["T_VARIABLE","$v",2288],["T_WHITESPACE"," ",2288],"=",["T_WHITESPACE"," ",2288],["T_VARIABLE","$table",2288],["T_OBJECT_OPERATOR","->",2288],["T_STRING","getOption",2288],"(",["T_VARIABLE","$key",2288],")",";",["T_WHITESPACE","\n            ",2288],["T_IF","if",2289],["T_WHITESPACE"," ",2289],"(",["T_VARIABLE","$v",2289],["T_WHITESPACE"," ",2289],["T_IS_NOT_IDENTICAL","!==",2289],["T_WHITESPACE"," ",2289],["T_STRING","null",2289],")",["T_WHITESPACE"," ",2289],"{",["T_WHITESPACE","\n                ",2289],["T_VARIABLE","$definition",2290],"[","]",["T_WHITESPACE"," ",2290],"=",["T_WHITESPACE"," ",2290],["T_STRING","sprintf",2290],"(",["T_VARIABLE","$mask",2290],",",["T_WHITESPACE"," ",2290],["T_VARIABLE","$v",2290],")",";",["T_WHITESPACE","\n            ",2290],"}",["T_WHITESPACE","\n        ",2291],"}",["T_WHITESPACE","\n\n        ",2292],["T_RETURN","return",2294],["T_WHITESPACE"," ",2294],["T_VARIABLE","$definition",2294],";",["T_WHITESPACE","\n    ",2294],"}",["T_WHITESPACE","\n\n    ",2295],["T_DOC_COMMENT","\/**\n     * Get column definition from description\n     *\n     * @param  array $options\n     * @param  null|string $ddlType\n     * @return string\n     *\/",2297],["T_WHITESPACE","\n    ",2303],["T_PUBLIC","public",2304],["T_WHITESPACE"," ",2304],["T_FUNCTION","function",2304],["T_WHITESPACE"," ",2304],["T_STRING","getColumnDefinitionFromDescribe",2304],"(",["T_VARIABLE","$options",2304],",",["T_WHITESPACE"," ",2304],["T_VARIABLE","$ddlType",2304],["T_WHITESPACE"," ",2304],"=",["T_WHITESPACE"," ",2304],["T_STRING","null",2304],")",["T_WHITESPACE","\n    ",2304],"{",["T_WHITESPACE","\n        ",2305],["T_VARIABLE","$columnInfo",2306],["T_WHITESPACE"," ",2306],"=",["T_WHITESPACE"," ",2306],["T_VARIABLE","$this",2306],["T_OBJECT_OPERATOR","->",2306],["T_STRING","getColumnCreateByDescribe",2306],"(",["T_VARIABLE","$options",2306],")",";",["T_WHITESPACE","\n        ",2306],["T_FOREACH","foreach",2307],["T_WHITESPACE"," ",2307],"(",["T_VARIABLE","$columnInfo",2307],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",2307],"]",["T_WHITESPACE"," ",2307],["T_AS","as",2307],["T_WHITESPACE"," ",2307],["T_VARIABLE","$key",2307],["T_WHITESPACE"," ",2307],["T_DOUBLE_ARROW","=>",2307],["T_WHITESPACE"," ",2307],["T_VARIABLE","$value",2307],")",["T_WHITESPACE"," ",2307],"{",["T_WHITESPACE","\n            ",2307],["T_VARIABLE","$columnInfo",2308],"[",["T_VARIABLE","$key",2308],"]",["T_WHITESPACE"," ",2308],"=",["T_WHITESPACE"," ",2308],["T_VARIABLE","$value",2308],";",["T_WHITESPACE","\n        ",2308],"}",["T_WHITESPACE","\n        ",2309],["T_RETURN","return",2310],["T_WHITESPACE"," ",2310],["T_VARIABLE","$this",2310],["T_OBJECT_OPERATOR","->",2310],["T_STRING","_getColumnDefinition",2310],"(",["T_VARIABLE","$columnInfo",2310],",",["T_WHITESPACE"," ",2310],["T_VARIABLE","$ddlType",2310],")",";",["T_WHITESPACE","\n    ",2310],"}",["T_WHITESPACE","\n\n    ",2311],["T_DOC_COMMENT","\/**\n     * Retrieve column definition fragment\n     *\n     * @param array $options\n     * @param string $ddlType Table DDL Column type constant\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return string\n     * @throws \\Zend_Db_Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",2313],["T_WHITESPACE","\n    ",2325],["T_PROTECTED","protected",2326],["T_WHITESPACE"," ",2326],["T_FUNCTION","function",2326],["T_WHITESPACE"," ",2326],["T_STRING","_getColumnDefinition",2326],"(",["T_VARIABLE","$options",2326],",",["T_WHITESPACE"," ",2326],["T_VARIABLE","$ddlType",2326],["T_WHITESPACE"," ",2326],"=",["T_WHITESPACE"," ",2326],["T_STRING","null",2326],")",["T_WHITESPACE","\n    ",2326],"{",["T_WHITESPACE","\n        ",2327],["T_COMMENT","\/\/ convert keys to uppercase\n",2328],["T_WHITESPACE","        ",2329],["T_VARIABLE","$options",2329],["T_WHITESPACE","    ",2329],"=",["T_WHITESPACE"," ",2329],["T_STRING","array_change_key_case",2329],"(",["T_VARIABLE","$options",2329],",",["T_WHITESPACE"," ",2329],["T_STRING","CASE_UPPER",2329],")",";",["T_WHITESPACE","\n        ",2329],["T_VARIABLE","$cType",2330],["T_WHITESPACE","      ",2330],"=",["T_WHITESPACE"," ",2330],["T_STRING","null",2330],";",["T_WHITESPACE","\n        ",2330],["T_VARIABLE","$cUnsigned",2331],["T_WHITESPACE","  ",2331],"=",["T_WHITESPACE"," ",2331],["T_STRING","false",2331],";",["T_WHITESPACE","\n        ",2331],["T_VARIABLE","$cNullable",2332],["T_WHITESPACE","  ",2332],"=",["T_WHITESPACE"," ",2332],["T_STRING","true",2332],";",["T_WHITESPACE","\n        ",2332],["T_VARIABLE","$cDefault",2333],["T_WHITESPACE","   ",2333],"=",["T_WHITESPACE"," ",2333],["T_STRING","false",2333],";",["T_WHITESPACE","\n        ",2333],["T_VARIABLE","$cIdentity",2334],["T_WHITESPACE","  ",2334],"=",["T_WHITESPACE"," ",2334],["T_STRING","false",2334],";",["T_WHITESPACE","\n\n        ",2334],["T_COMMENT","\/\/ detect and validate column type\n",2336],["T_WHITESPACE","        ",2337],["T_IF","if",2337],["T_WHITESPACE"," ",2337],"(",["T_VARIABLE","$ddlType",2337],["T_WHITESPACE"," ",2337],["T_IS_IDENTICAL","===",2337],["T_WHITESPACE"," ",2337],["T_STRING","null",2337],")",["T_WHITESPACE"," ",2337],"{",["T_WHITESPACE","\n            ",2337],["T_VARIABLE","$ddlType",2338],["T_WHITESPACE"," ",2338],"=",["T_WHITESPACE"," ",2338],["T_VARIABLE","$this",2338],["T_OBJECT_OPERATOR","->",2338],["T_STRING","_getDdlType",2338],"(",["T_VARIABLE","$options",2338],")",";",["T_WHITESPACE","\n        ",2338],"}",["T_WHITESPACE","\n\n        ",2339],["T_IF","if",2341],["T_WHITESPACE"," ",2341],"(",["T_EMPTY","empty",2341],"(",["T_VARIABLE","$ddlType",2341],")",["T_WHITESPACE"," ",2341],["T_BOOLEAN_OR","||",2341],["T_WHITESPACE"," ",2341],"!",["T_ISSET","isset",2341],"(",["T_VARIABLE","$this",2341],["T_OBJECT_OPERATOR","->",2341],["T_STRING","_ddlColumnTypes",2341],"[",["T_VARIABLE","$ddlType",2341],"]",")",")",["T_WHITESPACE"," ",2341],"{",["T_WHITESPACE","\n            ",2341],["T_THROW","throw",2342],["T_WHITESPACE"," ",2342],["T_NEW","new",2342],["T_WHITESPACE"," ",2342],["T_NS_SEPARATOR","\\",2342],["T_STRING","Zend_Db_Exception",2342],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid column definition data'",2342],")",";",["T_WHITESPACE","\n        ",2342],"}",["T_WHITESPACE","\n\n        ",2343],["T_COMMENT","\/\/ column size\n",2345],["T_WHITESPACE","        ",2346],["T_VARIABLE","$cType",2346],["T_WHITESPACE"," ",2346],"=",["T_WHITESPACE"," ",2346],["T_VARIABLE","$this",2346],["T_OBJECT_OPERATOR","->",2346],["T_STRING","_ddlColumnTypes",2346],"[",["T_VARIABLE","$ddlType",2346],"]",";",["T_WHITESPACE","\n        ",2346],["T_SWITCH","switch",2347],["T_WHITESPACE"," ",2347],"(",["T_VARIABLE","$ddlType",2347],")",["T_WHITESPACE"," ",2347],"{",["T_WHITESPACE","\n            ",2347],["T_CASE","case",2348],["T_WHITESPACE"," ",2348],["T_STRING","Table",2348],["T_DOUBLE_COLON","::",2348],["T_STRING","TYPE_SMALLINT",2348],":",["T_WHITESPACE","\n            ",2348],["T_CASE","case",2349],["T_WHITESPACE"," ",2349],["T_STRING","Table",2349],["T_DOUBLE_COLON","::",2349],["T_STRING","TYPE_INTEGER",2349],":",["T_WHITESPACE","\n            ",2349],["T_CASE","case",2350],["T_WHITESPACE"," ",2350],["T_STRING","Table",2350],["T_DOUBLE_COLON","::",2350],["T_STRING","TYPE_BIGINT",2350],":",["T_WHITESPACE","\n                ",2350],["T_IF","if",2351],["T_WHITESPACE"," ",2351],"(","!",["T_EMPTY","empty",2351],"(",["T_VARIABLE","$options",2351],"[",["T_CONSTANT_ENCAPSED_STRING","'UNSIGNED'",2351],"]",")",")",["T_WHITESPACE"," ",2351],"{",["T_WHITESPACE","\n                    ",2351],["T_VARIABLE","$cUnsigned",2352],["T_WHITESPACE"," ",2352],"=",["T_WHITESPACE"," ",2352],["T_STRING","true",2352],";",["T_WHITESPACE","\n                ",2352],"}",["T_WHITESPACE","\n                ",2353],["T_BREAK","break",2354],";",["T_WHITESPACE","\n            ",2354],["T_CASE","case",2355],["T_WHITESPACE"," ",2355],["T_STRING","Table",2355],["T_DOUBLE_COLON","::",2355],["T_STRING","TYPE_DECIMAL",2355],":",["T_WHITESPACE","\n            ",2355],["T_CASE","case",2356],["T_WHITESPACE"," ",2356],["T_STRING","Table",2356],["T_DOUBLE_COLON","::",2356],["T_STRING","TYPE_NUMERIC",2356],":",["T_WHITESPACE","\n                ",2356],["T_VARIABLE","$precision",2357],["T_WHITESPACE","  ",2357],"=",["T_WHITESPACE"," ",2357],["T_LNUMBER","10",2357],";",["T_WHITESPACE","\n                ",2357],["T_VARIABLE","$scale",2358],["T_WHITESPACE","      ",2358],"=",["T_WHITESPACE"," ",2358],["T_LNUMBER","0",2358],";",["T_WHITESPACE","\n                ",2358],["T_VARIABLE","$match",2359],["T_WHITESPACE","      ",2359],"=",["T_WHITESPACE"," ",2359],"[","]",";",["T_WHITESPACE","\n                ",2359],["T_IF","if",2360],["T_WHITESPACE"," ",2360],"(","!",["T_EMPTY","empty",2360],"(",["T_VARIABLE","$options",2360],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",2360],"]",")",["T_WHITESPACE"," ",2360],["T_BOOLEAN_AND","&&",2360],["T_WHITESPACE"," ",2360],["T_STRING","preg_match",2360],"(",["T_CONSTANT_ENCAPSED_STRING","'#^\\(?(\\d+),(\\d+)\\)?$#'",2360],",",["T_WHITESPACE"," ",2360],["T_VARIABLE","$options",2360],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",2360],"]",",",["T_WHITESPACE"," ",2360],["T_VARIABLE","$match",2360],")",")",["T_WHITESPACE"," ",2360],"{",["T_WHITESPACE","\n                    ",2360],["T_VARIABLE","$precision",2361],["T_WHITESPACE","  ",2361],"=",["T_WHITESPACE"," ",2361],["T_VARIABLE","$match",2361],"[",["T_LNUMBER","1",2361],"]",";",["T_WHITESPACE","\n                    ",2361],["T_VARIABLE","$scale",2362],["T_WHITESPACE","      ",2362],"=",["T_WHITESPACE"," ",2362],["T_VARIABLE","$match",2362],"[",["T_LNUMBER","2",2362],"]",";",["T_WHITESPACE","\n                ",2362],"}",["T_WHITESPACE"," ",2363],["T_ELSE","else",2363],["T_WHITESPACE"," ",2363],"{",["T_WHITESPACE","\n                    ",2363],["T_IF","if",2364],["T_WHITESPACE"," ",2364],"(",["T_ISSET","isset",2364],"(",["T_VARIABLE","$options",2364],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",2364],"]",")",["T_WHITESPACE"," ",2364],["T_BOOLEAN_AND","&&",2364],["T_WHITESPACE"," ",2364],["T_STRING","is_numeric",2364],"(",["T_VARIABLE","$options",2364],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",2364],"]",")",")",["T_WHITESPACE"," ",2364],"{",["T_WHITESPACE","\n                        ",2364],["T_VARIABLE","$scale",2365],["T_WHITESPACE"," ",2365],"=",["T_WHITESPACE"," ",2365],["T_VARIABLE","$options",2365],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",2365],"]",";",["T_WHITESPACE","\n                    ",2365],"}",["T_WHITESPACE","\n                    ",2366],["T_IF","if",2367],["T_WHITESPACE"," ",2367],"(",["T_ISSET","isset",2367],"(",["T_VARIABLE","$options",2367],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",2367],"]",")",["T_WHITESPACE"," ",2367],["T_BOOLEAN_AND","&&",2367],["T_WHITESPACE"," ",2367],["T_STRING","is_numeric",2367],"(",["T_VARIABLE","$options",2367],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",2367],"]",")",")",["T_WHITESPACE"," ",2367],"{",["T_WHITESPACE","\n                        ",2367],["T_VARIABLE","$precision",2368],["T_WHITESPACE"," ",2368],"=",["T_WHITESPACE"," ",2368],["T_VARIABLE","$options",2368],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",2368],"]",";",["T_WHITESPACE","\n                    ",2368],"}",["T_WHITESPACE","\n                ",2369],"}",["T_WHITESPACE","\n                ",2370],["T_VARIABLE","$cType",2371],["T_WHITESPACE"," ",2371],["T_CONCAT_EQUAL",".=",2371],["T_WHITESPACE"," ",2371],["T_STRING","sprintf",2371],"(",["T_CONSTANT_ENCAPSED_STRING","'(%d,%d)'",2371],",",["T_WHITESPACE"," ",2371],["T_VARIABLE","$precision",2371],",",["T_WHITESPACE"," ",2371],["T_VARIABLE","$scale",2371],")",";",["T_WHITESPACE","\n                ",2371],["T_BREAK","break",2372],";",["T_WHITESPACE","\n            ",2372],["T_CASE","case",2373],["T_WHITESPACE"," ",2373],["T_STRING","Table",2373],["T_DOUBLE_COLON","::",2373],["T_STRING","TYPE_TEXT",2373],":",["T_WHITESPACE","\n            ",2373],["T_CASE","case",2374],["T_WHITESPACE"," ",2374],["T_STRING","Table",2374],["T_DOUBLE_COLON","::",2374],["T_STRING","TYPE_BLOB",2374],":",["T_WHITESPACE","\n            ",2374],["T_CASE","case",2375],["T_WHITESPACE"," ",2375],["T_STRING","Table",2375],["T_DOUBLE_COLON","::",2375],["T_STRING","TYPE_VARBINARY",2375],":",["T_WHITESPACE","\n                ",2375],["T_IF","if",2376],["T_WHITESPACE"," ",2376],"(",["T_EMPTY","empty",2376],"(",["T_VARIABLE","$options",2376],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",2376],"]",")",")",["T_WHITESPACE"," ",2376],"{",["T_WHITESPACE","\n                    ",2376],["T_VARIABLE","$length",2377],["T_WHITESPACE"," ",2377],"=",["T_WHITESPACE"," ",2377],["T_STRING","Table",2377],["T_DOUBLE_COLON","::",2377],["T_STRING","DEFAULT_TEXT_SIZE",2377],";",["T_WHITESPACE","\n                ",2377],"}",["T_WHITESPACE"," ",2378],["T_ELSE","else",2378],["T_WHITESPACE"," ",2378],"{",["T_WHITESPACE","\n                    ",2378],["T_VARIABLE","$length",2379],["T_WHITESPACE"," ",2379],"=",["T_WHITESPACE"," ",2379],["T_VARIABLE","$this",2379],["T_OBJECT_OPERATOR","->",2379],["T_STRING","_parseTextSize",2379],"(",["T_VARIABLE","$options",2379],"[",["T_CONSTANT_ENCAPSED_STRING","'LENGTH'",2379],"]",")",";",["T_WHITESPACE","\n                ",2379],"}",["T_WHITESPACE","\n                ",2380],["T_IF","if",2381],["T_WHITESPACE"," ",2381],"(",["T_VARIABLE","$length",2381],["T_WHITESPACE"," ",2381],["T_IS_SMALLER_OR_EQUAL","<=",2381],["T_WHITESPACE"," ",2381],["T_LNUMBER","255",2381],")",["T_WHITESPACE"," ",2381],"{",["T_WHITESPACE","\n                    ",2381],["T_VARIABLE","$cType",2382],["T_WHITESPACE"," ",2382],"=",["T_WHITESPACE"," ",2382],["T_VARIABLE","$ddlType",2382],["T_WHITESPACE"," ",2382],["T_IS_EQUAL","==",2382],["T_WHITESPACE"," ",2382],["T_STRING","Table",2382],["T_DOUBLE_COLON","::",2382],["T_STRING","TYPE_TEXT",2382],["T_WHITESPACE"," ",2382],"?",["T_WHITESPACE"," ",2382],["T_CONSTANT_ENCAPSED_STRING","'varchar'",2382],["T_WHITESPACE"," ",2382],":",["T_WHITESPACE"," ",2382],["T_CONSTANT_ENCAPSED_STRING","'varbinary'",2382],";",["T_WHITESPACE","\n                    ",2382],["T_VARIABLE","$cType",2383],["T_WHITESPACE"," ",2383],"=",["T_WHITESPACE"," ",2383],["T_STRING","sprintf",2383],"(",["T_CONSTANT_ENCAPSED_STRING","'%s(%d)'",2383],",",["T_WHITESPACE"," ",2383],["T_VARIABLE","$cType",2383],",",["T_WHITESPACE"," ",2383],["T_VARIABLE","$length",2383],")",";",["T_WHITESPACE","\n                ",2383],"}",["T_WHITESPACE"," ",2384],["T_ELSEIF","elseif",2384],["T_WHITESPACE"," ",2384],"(",["T_VARIABLE","$length",2384],["T_WHITESPACE"," ",2384],">",["T_WHITESPACE"," ",2384],["T_LNUMBER","255",2384],["T_WHITESPACE"," ",2384],["T_BOOLEAN_AND","&&",2384],["T_WHITESPACE"," ",2384],["T_VARIABLE","$length",2384],["T_WHITESPACE"," ",2384],["T_IS_SMALLER_OR_EQUAL","<=",2384],["T_WHITESPACE"," ",2384],["T_LNUMBER","65536",2384],")",["T_WHITESPACE"," ",2384],"{",["T_WHITESPACE","\n                    ",2384],["T_VARIABLE","$cType",2385],["T_WHITESPACE"," ",2385],"=",["T_WHITESPACE"," ",2385],["T_VARIABLE","$ddlType",2385],["T_WHITESPACE"," ",2385],["T_IS_EQUAL","==",2385],["T_WHITESPACE"," ",2385],["T_STRING","Table",2385],["T_DOUBLE_COLON","::",2385],["T_STRING","TYPE_TEXT",2385],["T_WHITESPACE"," ",2385],"?",["T_WHITESPACE"," ",2385],["T_CONSTANT_ENCAPSED_STRING","'text'",2385],["T_WHITESPACE"," ",2385],":",["T_WHITESPACE"," ",2385],["T_CONSTANT_ENCAPSED_STRING","'blob'",2385],";",["T_WHITESPACE","\n                ",2385],"}",["T_WHITESPACE"," ",2386],["T_ELSEIF","elseif",2386],["T_WHITESPACE"," ",2386],"(",["T_VARIABLE","$length",2386],["T_WHITESPACE"," ",2386],">",["T_WHITESPACE"," ",2386],["T_LNUMBER","65536",2386],["T_WHITESPACE"," ",2386],["T_BOOLEAN_AND","&&",2386],["T_WHITESPACE"," ",2386],["T_VARIABLE","$length",2386],["T_WHITESPACE"," ",2386],["T_IS_SMALLER_OR_EQUAL","<=",2386],["T_WHITESPACE"," ",2386],["T_LNUMBER","16777216",2386],")",["T_WHITESPACE"," ",2386],"{",["T_WHITESPACE","\n                    ",2386],["T_VARIABLE","$cType",2387],["T_WHITESPACE"," ",2387],"=",["T_WHITESPACE"," ",2387],["T_VARIABLE","$ddlType",2387],["T_WHITESPACE"," ",2387],["T_IS_EQUAL","==",2387],["T_WHITESPACE"," ",2387],["T_STRING","Table",2387],["T_DOUBLE_COLON","::",2387],["T_STRING","TYPE_TEXT",2387],["T_WHITESPACE"," ",2387],"?",["T_WHITESPACE"," ",2387],["T_CONSTANT_ENCAPSED_STRING","'mediumtext'",2387],["T_WHITESPACE"," ",2387],":",["T_WHITESPACE"," ",2387],["T_CONSTANT_ENCAPSED_STRING","'mediumblob'",2387],";",["T_WHITESPACE","\n                ",2387],"}",["T_WHITESPACE"," ",2388],["T_ELSE","else",2388],["T_WHITESPACE"," ",2388],"{",["T_WHITESPACE","\n                    ",2388],["T_VARIABLE","$cType",2389],["T_WHITESPACE"," ",2389],"=",["T_WHITESPACE"," ",2389],["T_VARIABLE","$ddlType",2389],["T_WHITESPACE"," ",2389],["T_IS_EQUAL","==",2389],["T_WHITESPACE"," ",2389],["T_STRING","Table",2389],["T_DOUBLE_COLON","::",2389],["T_STRING","TYPE_TEXT",2389],["T_WHITESPACE"," ",2389],"?",["T_WHITESPACE"," ",2389],["T_CONSTANT_ENCAPSED_STRING","'longtext'",2389],["T_WHITESPACE"," ",2389],":",["T_WHITESPACE"," ",2389],["T_CONSTANT_ENCAPSED_STRING","'longblob'",2389],";",["T_WHITESPACE","\n                ",2389],"}",["T_WHITESPACE","\n                ",2390],["T_BREAK","break",2391],";",["T_WHITESPACE","\n        ",2391],"}",["T_WHITESPACE","\n\n        ",2392],["T_IF","if",2394],["T_WHITESPACE"," ",2394],"(",["T_STRING","array_key_exists",2394],"(",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",2394],",",["T_WHITESPACE"," ",2394],["T_VARIABLE","$options",2394],")",")",["T_WHITESPACE"," ",2394],"{",["T_WHITESPACE","\n            ",2394],["T_VARIABLE","$cDefault",2395],["T_WHITESPACE"," ",2395],"=",["T_WHITESPACE"," ",2395],["T_VARIABLE","$options",2395],"[",["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",2395],"]",";",["T_WHITESPACE","\n        ",2395],"}",["T_WHITESPACE","\n        ",2396],["T_IF","if",2397],["T_WHITESPACE"," ",2397],"(",["T_STRING","array_key_exists",2397],"(",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",2397],",",["T_WHITESPACE"," ",2397],["T_VARIABLE","$options",2397],")",")",["T_WHITESPACE"," ",2397],"{",["T_WHITESPACE","\n            ",2397],["T_VARIABLE","$cNullable",2398],["T_WHITESPACE"," ",2398],"=",["T_WHITESPACE"," ",2398],["T_BOOL_CAST","(bool)",2398],["T_VARIABLE","$options",2398],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",2398],"]",";",["T_WHITESPACE","\n        ",2398],"}",["T_WHITESPACE","\n        ",2399],["T_IF","if",2400],["T_WHITESPACE"," ",2400],"(","!",["T_EMPTY","empty",2400],"(",["T_VARIABLE","$options",2400],"[",["T_CONSTANT_ENCAPSED_STRING","'IDENTITY'",2400],"]",")",["T_WHITESPACE"," ",2400],["T_BOOLEAN_OR","||",2400],["T_WHITESPACE"," ",2400],"!",["T_EMPTY","empty",2400],"(",["T_VARIABLE","$options",2400],"[",["T_CONSTANT_ENCAPSED_STRING","'AUTO_INCREMENT'",2400],"]",")",")",["T_WHITESPACE"," ",2400],"{",["T_WHITESPACE","\n            ",2400],["T_VARIABLE","$cIdentity",2401],["T_WHITESPACE"," ",2401],"=",["T_WHITESPACE"," ",2401],["T_STRING","true",2401],";",["T_WHITESPACE","\n        ",2401],"}",["T_WHITESPACE","\n\n        ",2402],["T_COMMENT","\/*  For cases when tables created from createTableByDdl()\n         *  where default value can be quoted already.\n         *  We need to avoid \"double-quoting\" here\n         *\/",2404],["T_WHITESPACE","\n        ",2407],["T_IF","if",2408],["T_WHITESPACE"," ",2408],"(",["T_VARIABLE","$cDefault",2408],["T_WHITESPACE"," ",2408],["T_IS_NOT_IDENTICAL","!==",2408],["T_WHITESPACE"," ",2408],["T_STRING","null",2408],["T_WHITESPACE"," ",2408],["T_BOOLEAN_AND","&&",2408],["T_WHITESPACE"," ",2408],["T_STRING","strlen",2408],"(",["T_VARIABLE","$cDefault",2408],")",")",["T_WHITESPACE"," ",2408],"{",["T_WHITESPACE","\n            ",2408],["T_VARIABLE","$cDefault",2409],["T_WHITESPACE"," ",2409],"=",["T_WHITESPACE"," ",2409],["T_STRING","str_replace",2409],"(",["T_CONSTANT_ENCAPSED_STRING","\"'\"",2409],",",["T_WHITESPACE"," ",2409],["T_CONSTANT_ENCAPSED_STRING","''",2409],",",["T_WHITESPACE"," ",2409],["T_VARIABLE","$cDefault",2409],")",";",["T_WHITESPACE","\n        ",2409],"}",["T_WHITESPACE","\n\n        ",2410],["T_COMMENT","\/\/ prepare default value string\n",2412],["T_WHITESPACE","        ",2413],["T_IF","if",2413],["T_WHITESPACE"," ",2413],"(",["T_VARIABLE","$ddlType",2413],["T_WHITESPACE"," ",2413],["T_IS_EQUAL","==",2413],["T_WHITESPACE"," ",2413],["T_STRING","Table",2413],["T_DOUBLE_COLON","::",2413],["T_STRING","TYPE_TIMESTAMP",2413],")",["T_WHITESPACE"," ",2413],"{",["T_WHITESPACE","\n            ",2413],["T_IF","if",2414],["T_WHITESPACE"," ",2414],"(",["T_VARIABLE","$cDefault",2414],["T_WHITESPACE"," ",2414],["T_IS_IDENTICAL","===",2414],["T_WHITESPACE"," ",2414],["T_STRING","null",2414],")",["T_WHITESPACE"," ",2414],"{",["T_WHITESPACE","\n                ",2414],["T_VARIABLE","$cDefault",2415],["T_WHITESPACE"," ",2415],"=",["T_WHITESPACE"," ",2415],["T_NEW","new",2415],["T_WHITESPACE"," ",2415],["T_NS_SEPARATOR","\\",2415],["T_STRING","Zend_Db_Expr",2415],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",2415],")",";",["T_WHITESPACE","\n            ",2415],"}",["T_WHITESPACE"," ",2416],["T_ELSEIF","elseif",2416],["T_WHITESPACE"," ",2416],"(",["T_VARIABLE","$cDefault",2416],["T_WHITESPACE"," ",2416],["T_IS_EQUAL","==",2416],["T_WHITESPACE"," ",2416],["T_STRING","Table",2416],["T_DOUBLE_COLON","::",2416],["T_STRING","TIMESTAMP_INIT",2416],")",["T_WHITESPACE"," ",2416],"{",["T_WHITESPACE","\n                ",2416],["T_VARIABLE","$cDefault",2417],["T_WHITESPACE"," ",2417],"=",["T_WHITESPACE"," ",2417],["T_NEW","new",2417],["T_WHITESPACE"," ",2417],["T_NS_SEPARATOR","\\",2417],["T_STRING","Zend_Db_Expr",2417],"(",["T_CONSTANT_ENCAPSED_STRING","'CURRENT_TIMESTAMP'",2417],")",";",["T_WHITESPACE","\n            ",2417],"}",["T_WHITESPACE"," ",2418],["T_ELSEIF","elseif",2418],["T_WHITESPACE"," ",2418],"(",["T_VARIABLE","$cDefault",2418],["T_WHITESPACE"," ",2418],["T_IS_EQUAL","==",2418],["T_WHITESPACE"," ",2418],["T_STRING","Table",2418],["T_DOUBLE_COLON","::",2418],["T_STRING","TIMESTAMP_UPDATE",2418],")",["T_WHITESPACE"," ",2418],"{",["T_WHITESPACE","\n                ",2418],["T_VARIABLE","$cDefault",2419],["T_WHITESPACE"," ",2419],"=",["T_WHITESPACE"," ",2419],["T_NEW","new",2419],["T_WHITESPACE"," ",2419],["T_NS_SEPARATOR","\\",2419],["T_STRING","Zend_Db_Expr",2419],"(",["T_CONSTANT_ENCAPSED_STRING","'0 ON UPDATE CURRENT_TIMESTAMP'",2419],")",";",["T_WHITESPACE","\n            ",2419],"}",["T_WHITESPACE"," ",2420],["T_ELSEIF","elseif",2420],["T_WHITESPACE"," ",2420],"(",["T_VARIABLE","$cDefault",2420],["T_WHITESPACE"," ",2420],["T_IS_EQUAL","==",2420],["T_WHITESPACE"," ",2420],["T_STRING","Table",2420],["T_DOUBLE_COLON","::",2420],["T_STRING","TIMESTAMP_INIT_UPDATE",2420],")",["T_WHITESPACE"," ",2420],"{",["T_WHITESPACE","\n                ",2420],["T_VARIABLE","$cDefault",2421],["T_WHITESPACE"," ",2421],"=",["T_WHITESPACE"," ",2421],["T_NEW","new",2421],["T_WHITESPACE"," ",2421],["T_NS_SEPARATOR","\\",2421],["T_STRING","Zend_Db_Expr",2421],"(",["T_CONSTANT_ENCAPSED_STRING","'CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'",2421],")",";",["T_WHITESPACE","\n            ",2421],"}",["T_WHITESPACE"," ",2422],["T_ELSEIF","elseif",2422],["T_WHITESPACE"," ",2422],"(",["T_VARIABLE","$cNullable",2422],["T_WHITESPACE"," ",2422],["T_BOOLEAN_AND","&&",2422],["T_WHITESPACE"," ",2422],"!",["T_VARIABLE","$cDefault",2422],")",["T_WHITESPACE"," ",2422],"{",["T_WHITESPACE","\n                ",2422],["T_VARIABLE","$cDefault",2423],["T_WHITESPACE"," ",2423],"=",["T_WHITESPACE"," ",2423],["T_NEW","new",2423],["T_WHITESPACE"," ",2423],["T_NS_SEPARATOR","\\",2423],["T_STRING","Zend_Db_Expr",2423],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",2423],")",";",["T_WHITESPACE","\n            ",2423],"}",["T_WHITESPACE"," ",2424],["T_ELSE","else",2424],["T_WHITESPACE"," ",2424],"{",["T_WHITESPACE","\n                ",2424],["T_VARIABLE","$cDefault",2425],["T_WHITESPACE"," ",2425],"=",["T_WHITESPACE"," ",2425],["T_STRING","false",2425],";",["T_WHITESPACE","\n            ",2425],"}",["T_WHITESPACE","\n        ",2426],"}",["T_WHITESPACE"," ",2427],["T_ELSEIF","elseif",2427],["T_WHITESPACE"," ",2427],"(",["T_STRING","is_null",2427],"(",["T_VARIABLE","$cDefault",2427],")",["T_WHITESPACE"," ",2427],["T_BOOLEAN_AND","&&",2427],["T_WHITESPACE"," ",2427],["T_VARIABLE","$cNullable",2427],")",["T_WHITESPACE"," ",2427],"{",["T_WHITESPACE","\n            ",2427],["T_VARIABLE","$cDefault",2428],["T_WHITESPACE"," ",2428],"=",["T_WHITESPACE"," ",2428],["T_NEW","new",2428],["T_WHITESPACE"," ",2428],["T_NS_SEPARATOR","\\",2428],["T_STRING","Zend_Db_Expr",2428],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",2428],")",";",["T_WHITESPACE","\n        ",2428],"}",["T_WHITESPACE","\n\n        ",2429],["T_IF","if",2431],["T_WHITESPACE"," ",2431],"(",["T_EMPTY","empty",2431],"(",["T_VARIABLE","$options",2431],"[",["T_CONSTANT_ENCAPSED_STRING","'COMMENT'",2431],"]",")",")",["T_WHITESPACE"," ",2431],"{",["T_WHITESPACE","\n            ",2431],["T_VARIABLE","$comment",2432],["T_WHITESPACE"," ",2432],"=",["T_WHITESPACE"," ",2432],["T_CONSTANT_ENCAPSED_STRING","''",2432],";",["T_WHITESPACE","\n        ",2432],"}",["T_WHITESPACE"," ",2433],["T_ELSE","else",2433],["T_WHITESPACE"," ",2433],"{",["T_WHITESPACE","\n            ",2433],["T_VARIABLE","$comment",2434],["T_WHITESPACE"," ",2434],"=",["T_WHITESPACE"," ",2434],["T_VARIABLE","$options",2434],"[",["T_CONSTANT_ENCAPSED_STRING","'COMMENT'",2434],"]",";",["T_WHITESPACE","\n        ",2434],"}",["T_WHITESPACE","\n\n        ",2435],["T_COMMENT","\/\/set column position\n",2437],["T_WHITESPACE","        ",2438],["T_VARIABLE","$after",2438],["T_WHITESPACE"," ",2438],"=",["T_WHITESPACE"," ",2438],["T_STRING","null",2438],";",["T_WHITESPACE","\n        ",2438],["T_IF","if",2439],["T_WHITESPACE"," ",2439],"(","!",["T_EMPTY","empty",2439],"(",["T_VARIABLE","$options",2439],"[",["T_CONSTANT_ENCAPSED_STRING","'AFTER'",2439],"]",")",")",["T_WHITESPACE"," ",2439],"{",["T_WHITESPACE","\n            ",2439],["T_VARIABLE","$after",2440],["T_WHITESPACE"," ",2440],"=",["T_WHITESPACE"," ",2440],["T_VARIABLE","$options",2440],"[",["T_CONSTANT_ENCAPSED_STRING","'AFTER'",2440],"]",";",["T_WHITESPACE","\n        ",2440],"}",["T_WHITESPACE","\n\n        ",2441],["T_RETURN","return",2443],["T_WHITESPACE"," ",2443],["T_STRING","sprintf",2443],"(",["T_WHITESPACE","\n            ",2443],["T_CONSTANT_ENCAPSED_STRING","'%s%s%s%s%s COMMENT %s %s'",2444],",",["T_WHITESPACE","\n            ",2444],["T_VARIABLE","$cType",2445],",",["T_WHITESPACE","\n            ",2445],["T_VARIABLE","$cUnsigned",2446],["T_WHITESPACE"," ",2446],"?",["T_WHITESPACE"," ",2446],["T_CONSTANT_ENCAPSED_STRING","' UNSIGNED'",2446],["T_WHITESPACE"," ",2446],":",["T_WHITESPACE"," ",2446],["T_CONSTANT_ENCAPSED_STRING","''",2446],",",["T_WHITESPACE","\n            ",2446],["T_VARIABLE","$cNullable",2447],["T_WHITESPACE"," ",2447],"?",["T_WHITESPACE"," ",2447],["T_CONSTANT_ENCAPSED_STRING","' NULL'",2447],["T_WHITESPACE"," ",2447],":",["T_WHITESPACE"," ",2447],["T_CONSTANT_ENCAPSED_STRING","' NOT NULL'",2447],",",["T_WHITESPACE","\n            ",2447],["T_VARIABLE","$cDefault",2448],["T_WHITESPACE"," ",2448],["T_IS_NOT_IDENTICAL","!==",2448],["T_WHITESPACE"," ",2448],["T_STRING","false",2448],["T_WHITESPACE"," ",2448],"?",["T_WHITESPACE"," ",2448],["T_VARIABLE","$this",2448],["T_OBJECT_OPERATOR","->",2448],["T_STRING","quoteInto",2448],"(",["T_CONSTANT_ENCAPSED_STRING","' default ?'",2448],",",["T_WHITESPACE"," ",2448],["T_VARIABLE","$cDefault",2448],")",["T_WHITESPACE"," ",2448],":",["T_WHITESPACE"," ",2448],["T_CONSTANT_ENCAPSED_STRING","''",2448],",",["T_WHITESPACE","\n            ",2448],["T_VARIABLE","$cIdentity",2449],["T_WHITESPACE"," ",2449],"?",["T_WHITESPACE"," ",2449],["T_CONSTANT_ENCAPSED_STRING","' auto_increment'",2449],["T_WHITESPACE"," ",2449],":",["T_WHITESPACE"," ",2449],["T_CONSTANT_ENCAPSED_STRING","''",2449],",",["T_WHITESPACE","\n            ",2449],["T_VARIABLE","$this",2450],["T_OBJECT_OPERATOR","->",2450],["T_STRING","quote",2450],"(",["T_VARIABLE","$comment",2450],")",",",["T_WHITESPACE","\n            ",2450],["T_VARIABLE","$after",2451],["T_WHITESPACE"," ",2451],"?",["T_WHITESPACE"," ",2451],["T_CONSTANT_ENCAPSED_STRING","'AFTER '",2451],["T_WHITESPACE"," ",2451],".",["T_WHITESPACE"," ",2451],["T_VARIABLE","$this",2451],["T_OBJECT_OPERATOR","->",2451],["T_STRING","quoteIdentifier",2451],"(",["T_VARIABLE","$after",2451],")",["T_WHITESPACE"," ",2451],":",["T_WHITESPACE"," ",2451],["T_CONSTANT_ENCAPSED_STRING","''",2451],["T_WHITESPACE","\n        ",2451],")",";",["T_WHITESPACE","\n    ",2452],"}",["T_WHITESPACE","\n\n    ",2453],["T_DOC_COMMENT","\/**\n     * Drop table from database\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return true\n     *\/",2455],["T_WHITESPACE","\n    ",2461],["T_PUBLIC","public",2462],["T_WHITESPACE"," ",2462],["T_FUNCTION","function",2462],["T_WHITESPACE"," ",2462],["T_STRING","dropTable",2462],"(",["T_VARIABLE","$tableName",2462],",",["T_WHITESPACE"," ",2462],["T_VARIABLE","$schemaName",2462],["T_WHITESPACE"," ",2462],"=",["T_WHITESPACE"," ",2462],["T_STRING","null",2462],")",["T_WHITESPACE","\n    ",2462],"{",["T_WHITESPACE","\n        ",2463],["T_VARIABLE","$table",2464],["T_WHITESPACE"," ",2464],"=",["T_WHITESPACE"," ",2464],["T_VARIABLE","$this",2464],["T_OBJECT_OPERATOR","->",2464],["T_STRING","quoteIdentifier",2464],"(",["T_VARIABLE","$this",2464],["T_OBJECT_OPERATOR","->",2464],["T_STRING","_getTableName",2464],"(",["T_VARIABLE","$tableName",2464],",",["T_WHITESPACE"," ",2464],["T_VARIABLE","$schemaName",2464],")",")",";",["T_WHITESPACE","\n        ",2464],["T_VARIABLE","$query",2465],["T_WHITESPACE"," ",2465],"=",["T_WHITESPACE"," ",2465],["T_CONSTANT_ENCAPSED_STRING","'DROP TABLE IF EXISTS '",2465],["T_WHITESPACE"," ",2465],".",["T_WHITESPACE"," ",2465],["T_VARIABLE","$table",2465],";",["T_WHITESPACE","\n        ",2465],["T_VARIABLE","$this",2466],["T_OBJECT_OPERATOR","->",2466],["T_STRING","query",2466],"(",["T_VARIABLE","$query",2466],")",";",["T_WHITESPACE","\n        ",2466],["T_VARIABLE","$this",2467],["T_OBJECT_OPERATOR","->",2467],["T_STRING","resetDdlCache",2467],"(",["T_VARIABLE","$tableName",2467],",",["T_WHITESPACE"," ",2467],["T_VARIABLE","$schemaName",2467],")",";",["T_WHITESPACE","\n        ",2467],["T_RETURN","return",2468],["T_WHITESPACE"," ",2468],["T_STRING","true",2468],";",["T_WHITESPACE","\n    ",2468],"}",["T_WHITESPACE","\n\n    ",2469],["T_DOC_COMMENT","\/**\n     * Drop temporary table from database\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return boolean\n     *\/",2471],["T_WHITESPACE","\n    ",2477],["T_PUBLIC","public",2478],["T_WHITESPACE"," ",2478],["T_FUNCTION","function",2478],["T_WHITESPACE"," ",2478],["T_STRING","dropTemporaryTable",2478],"(",["T_VARIABLE","$tableName",2478],",",["T_WHITESPACE"," ",2478],["T_VARIABLE","$schemaName",2478],["T_WHITESPACE"," ",2478],"=",["T_WHITESPACE"," ",2478],["T_STRING","null",2478],")",["T_WHITESPACE","\n    ",2478],"{",["T_WHITESPACE","\n        ",2479],["T_VARIABLE","$table",2480],["T_WHITESPACE"," ",2480],"=",["T_WHITESPACE"," ",2480],["T_VARIABLE","$this",2480],["T_OBJECT_OPERATOR","->",2480],["T_STRING","quoteIdentifier",2480],"(",["T_VARIABLE","$this",2480],["T_OBJECT_OPERATOR","->",2480],["T_STRING","_getTableName",2480],"(",["T_VARIABLE","$tableName",2480],",",["T_WHITESPACE"," ",2480],["T_VARIABLE","$schemaName",2480],")",")",";",["T_WHITESPACE","\n        ",2480],["T_VARIABLE","$query",2481],["T_WHITESPACE"," ",2481],"=",["T_WHITESPACE"," ",2481],["T_CONSTANT_ENCAPSED_STRING","'DROP TEMPORARY TABLE IF EXISTS '",2481],["T_WHITESPACE"," ",2481],".",["T_WHITESPACE"," ",2481],["T_VARIABLE","$table",2481],";",["T_WHITESPACE","\n        ",2481],["T_VARIABLE","$this",2482],["T_OBJECT_OPERATOR","->",2482],["T_STRING","query",2482],"(",["T_VARIABLE","$query",2482],")",";",["T_WHITESPACE","\n\n        ",2482],["T_RETURN","return",2484],["T_WHITESPACE"," ",2484],["T_STRING","true",2484],";",["T_WHITESPACE","\n    ",2484],"}",["T_WHITESPACE","\n\n    ",2485],["T_DOC_COMMENT","\/**\n     * Truncate a table\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return $this\n     * @throws \\Zend_Db_Exception\n     *\/",2487],["T_WHITESPACE","\n    ",2494],["T_PUBLIC","public",2495],["T_WHITESPACE"," ",2495],["T_FUNCTION","function",2495],["T_WHITESPACE"," ",2495],["T_STRING","truncateTable",2495],"(",["T_VARIABLE","$tableName",2495],",",["T_WHITESPACE"," ",2495],["T_VARIABLE","$schemaName",2495],["T_WHITESPACE"," ",2495],"=",["T_WHITESPACE"," ",2495],["T_STRING","null",2495],")",["T_WHITESPACE","\n    ",2495],"{",["T_WHITESPACE","\n        ",2496],["T_IF","if",2497],["T_WHITESPACE"," ",2497],"(","!",["T_VARIABLE","$this",2497],["T_OBJECT_OPERATOR","->",2497],["T_STRING","isTableExists",2497],"(",["T_VARIABLE","$tableName",2497],",",["T_WHITESPACE"," ",2497],["T_VARIABLE","$schemaName",2497],")",")",["T_WHITESPACE"," ",2497],"{",["T_WHITESPACE","\n            ",2497],["T_THROW","throw",2498],["T_WHITESPACE"," ",2498],["T_NEW","new",2498],["T_WHITESPACE"," ",2498],["T_NS_SEPARATOR","\\",2498],["T_STRING","Zend_Db_Exception",2498],"(",["T_STRING","sprintf",2498],"(",["T_CONSTANT_ENCAPSED_STRING","'Table \"%s\" is not exists'",2498],",",["T_WHITESPACE"," ",2498],["T_VARIABLE","$tableName",2498],")",")",";",["T_WHITESPACE","\n        ",2498],"}",["T_WHITESPACE","\n\n        ",2499],["T_VARIABLE","$table",2501],["T_WHITESPACE"," ",2501],"=",["T_WHITESPACE"," ",2501],["T_VARIABLE","$this",2501],["T_OBJECT_OPERATOR","->",2501],["T_STRING","quoteIdentifier",2501],"(",["T_VARIABLE","$this",2501],["T_OBJECT_OPERATOR","->",2501],["T_STRING","_getTableName",2501],"(",["T_VARIABLE","$tableName",2501],",",["T_WHITESPACE"," ",2501],["T_VARIABLE","$schemaName",2501],")",")",";",["T_WHITESPACE","\n        ",2501],["T_VARIABLE","$query",2502],["T_WHITESPACE"," ",2502],"=",["T_WHITESPACE"," ",2502],["T_CONSTANT_ENCAPSED_STRING","'TRUNCATE TABLE '",2502],["T_WHITESPACE"," ",2502],".",["T_WHITESPACE"," ",2502],["T_VARIABLE","$table",2502],";",["T_WHITESPACE","\n        ",2502],["T_VARIABLE","$this",2503],["T_OBJECT_OPERATOR","->",2503],["T_STRING","query",2503],"(",["T_VARIABLE","$query",2503],")",";",["T_WHITESPACE","\n\n        ",2503],["T_RETURN","return",2505],["T_WHITESPACE"," ",2505],["T_VARIABLE","$this",2505],";",["T_WHITESPACE","\n    ",2505],"}",["T_WHITESPACE","\n\n    ",2506],["T_DOC_COMMENT","\/**\n     * Check is a table exists\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return bool\n     *\/",2508],["T_WHITESPACE","\n    ",2514],["T_PUBLIC","public",2515],["T_WHITESPACE"," ",2515],["T_FUNCTION","function",2515],["T_WHITESPACE"," ",2515],["T_STRING","isTableExists",2515],"(",["T_VARIABLE","$tableName",2515],",",["T_WHITESPACE"," ",2515],["T_VARIABLE","$schemaName",2515],["T_WHITESPACE"," ",2515],"=",["T_WHITESPACE"," ",2515],["T_STRING","null",2515],")",["T_WHITESPACE","\n    ",2515],"{",["T_WHITESPACE","\n        ",2516],["T_RETURN","return",2517],["T_WHITESPACE"," ",2517],["T_VARIABLE","$this",2517],["T_OBJECT_OPERATOR","->",2517],["T_STRING","showTableStatus",2517],"(",["T_VARIABLE","$tableName",2517],",",["T_WHITESPACE"," ",2517],["T_VARIABLE","$schemaName",2517],")",["T_WHITESPACE"," ",2517],["T_IS_NOT_IDENTICAL","!==",2517],["T_WHITESPACE"," ",2517],["T_STRING","false",2517],";",["T_WHITESPACE","\n    ",2517],"}",["T_WHITESPACE","\n\n    ",2518],["T_DOC_COMMENT","\/**\n     * Rename table\n     *\n     * @param string $oldTableName\n     * @param string $newTableName\n     * @param string $schemaName\n     * @return true\n     * @throws \\Zend_Db_Exception\n     *\/",2520],["T_WHITESPACE","\n    ",2528],["T_PUBLIC","public",2529],["T_WHITESPACE"," ",2529],["T_FUNCTION","function",2529],["T_WHITESPACE"," ",2529],["T_STRING","renameTable",2529],"(",["T_VARIABLE","$oldTableName",2529],",",["T_WHITESPACE"," ",2529],["T_VARIABLE","$newTableName",2529],",",["T_WHITESPACE"," ",2529],["T_VARIABLE","$schemaName",2529],["T_WHITESPACE"," ",2529],"=",["T_WHITESPACE"," ",2529],["T_STRING","null",2529],")",["T_WHITESPACE","\n    ",2529],"{",["T_WHITESPACE","\n        ",2530],["T_IF","if",2531],["T_WHITESPACE"," ",2531],"(","!",["T_VARIABLE","$this",2531],["T_OBJECT_OPERATOR","->",2531],["T_STRING","isTableExists",2531],"(",["T_VARIABLE","$oldTableName",2531],",",["T_WHITESPACE"," ",2531],["T_VARIABLE","$schemaName",2531],")",")",["T_WHITESPACE"," ",2531],"{",["T_WHITESPACE","\n            ",2531],["T_THROW","throw",2532],["T_WHITESPACE"," ",2532],["T_NEW","new",2532],["T_WHITESPACE"," ",2532],["T_NS_SEPARATOR","\\",2532],["T_STRING","Zend_Db_Exception",2532],"(",["T_STRING","sprintf",2532],"(",["T_CONSTANT_ENCAPSED_STRING","'Table \"%s\" is not exists'",2532],",",["T_WHITESPACE"," ",2532],["T_VARIABLE","$oldTableName",2532],")",")",";",["T_WHITESPACE","\n        ",2532],"}",["T_WHITESPACE","\n        ",2533],["T_IF","if",2534],["T_WHITESPACE"," ",2534],"(",["T_VARIABLE","$this",2534],["T_OBJECT_OPERATOR","->",2534],["T_STRING","isTableExists",2534],"(",["T_VARIABLE","$newTableName",2534],",",["T_WHITESPACE"," ",2534],["T_VARIABLE","$schemaName",2534],")",")",["T_WHITESPACE"," ",2534],"{",["T_WHITESPACE","\n            ",2534],["T_THROW","throw",2535],["T_WHITESPACE"," ",2535],["T_NEW","new",2535],["T_WHITESPACE"," ",2535],["T_NS_SEPARATOR","\\",2535],["T_STRING","Zend_Db_Exception",2535],"(",["T_STRING","sprintf",2535],"(",["T_CONSTANT_ENCAPSED_STRING","'Table \"%s\" already exists'",2535],",",["T_WHITESPACE"," ",2535],["T_VARIABLE","$newTableName",2535],")",")",";",["T_WHITESPACE","\n        ",2535],"}",["T_WHITESPACE","\n\n        ",2536],["T_VARIABLE","$oldTable",2538],["T_WHITESPACE"," ",2538],"=",["T_WHITESPACE"," ",2538],["T_VARIABLE","$this",2538],["T_OBJECT_OPERATOR","->",2538],["T_STRING","_getTableName",2538],"(",["T_VARIABLE","$oldTableName",2538],",",["T_WHITESPACE"," ",2538],["T_VARIABLE","$schemaName",2538],")",";",["T_WHITESPACE","\n        ",2538],["T_VARIABLE","$newTable",2539],["T_WHITESPACE"," ",2539],"=",["T_WHITESPACE"," ",2539],["T_VARIABLE","$this",2539],["T_OBJECT_OPERATOR","->",2539],["T_STRING","_getTableName",2539],"(",["T_VARIABLE","$newTableName",2539],",",["T_WHITESPACE"," ",2539],["T_VARIABLE","$schemaName",2539],")",";",["T_WHITESPACE","\n\n        ",2539],["T_VARIABLE","$query",2541],["T_WHITESPACE"," ",2541],"=",["T_WHITESPACE"," ",2541],["T_STRING","sprintf",2541],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s RENAME TO %s'",2541],",",["T_WHITESPACE"," ",2541],["T_VARIABLE","$oldTable",2541],",",["T_WHITESPACE"," ",2541],["T_VARIABLE","$newTable",2541],")",";",["T_WHITESPACE","\n        ",2541],["T_VARIABLE","$this",2542],["T_OBJECT_OPERATOR","->",2542],["T_STRING","query",2542],"(",["T_VARIABLE","$query",2542],")",";",["T_WHITESPACE","\n\n        ",2542],["T_VARIABLE","$this",2544],["T_OBJECT_OPERATOR","->",2544],["T_STRING","resetDdlCache",2544],"(",["T_VARIABLE","$oldTableName",2544],",",["T_WHITESPACE"," ",2544],["T_VARIABLE","$schemaName",2544],")",";",["T_WHITESPACE","\n\n        ",2544],["T_RETURN","return",2546],["T_WHITESPACE"," ",2546],["T_STRING","true",2546],";",["T_WHITESPACE","\n    ",2546],"}",["T_WHITESPACE","\n\n    ",2547],["T_DOC_COMMENT","\/**\n     * Add new index to table name\n     *\n     * @param string $tableName\n     * @param string $indexName\n     * @param string|array $fields  the table column name or array of ones\n     * @param string $indexType     the index type\n     * @param string $schemaName\n     * @return \\Zend_Db_Statement_Interface\n     * @throws \\Zend_Db_Exception\n     * @throws \\Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",2549],["T_WHITESPACE","\n    ",2562],["T_PUBLIC","public",2563],["T_WHITESPACE"," ",2563],["T_FUNCTION","function",2563],["T_WHITESPACE"," ",2563],["T_STRING","addIndex",2563],"(",["T_WHITESPACE","\n        ",2563],["T_VARIABLE","$tableName",2564],",",["T_WHITESPACE","\n        ",2564],["T_VARIABLE","$indexName",2565],",",["T_WHITESPACE","\n        ",2565],["T_VARIABLE","$fields",2566],",",["T_WHITESPACE","\n        ",2566],["T_VARIABLE","$indexType",2567],["T_WHITESPACE"," ",2567],"=",["T_WHITESPACE"," ",2567],["T_STRING","AdapterInterface",2567],["T_DOUBLE_COLON","::",2567],["T_STRING","INDEX_TYPE_INDEX",2567],",",["T_WHITESPACE","\n        ",2567],["T_VARIABLE","$schemaName",2568],["T_WHITESPACE"," ",2568],"=",["T_WHITESPACE"," ",2568],["T_STRING","null",2568],["T_WHITESPACE","\n    ",2568],")",["T_WHITESPACE"," ",2569],"{",["T_WHITESPACE","\n        ",2569],["T_VARIABLE","$columns",2570],["T_WHITESPACE"," ",2570],"=",["T_WHITESPACE"," ",2570],["T_VARIABLE","$this",2570],["T_OBJECT_OPERATOR","->",2570],["T_STRING","describeTable",2570],"(",["T_VARIABLE","$tableName",2570],",",["T_WHITESPACE"," ",2570],["T_VARIABLE","$schemaName",2570],")",";",["T_WHITESPACE","\n        ",2570],["T_VARIABLE","$keyList",2571],["T_WHITESPACE"," ",2571],"=",["T_WHITESPACE"," ",2571],["T_VARIABLE","$this",2571],["T_OBJECT_OPERATOR","->",2571],["T_STRING","getIndexList",2571],"(",["T_VARIABLE","$tableName",2571],",",["T_WHITESPACE"," ",2571],["T_VARIABLE","$schemaName",2571],")",";",["T_WHITESPACE","\n\n        ",2571],["T_VARIABLE","$query",2573],["T_WHITESPACE"," ",2573],"=",["T_WHITESPACE"," ",2573],["T_STRING","sprintf",2573],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s'",2573],",",["T_WHITESPACE"," ",2573],["T_VARIABLE","$this",2573],["T_OBJECT_OPERATOR","->",2573],["T_STRING","quoteIdentifier",2573],"(",["T_VARIABLE","$this",2573],["T_OBJECT_OPERATOR","->",2573],["T_STRING","_getTableName",2573],"(",["T_VARIABLE","$tableName",2573],",",["T_WHITESPACE"," ",2573],["T_VARIABLE","$schemaName",2573],")",")",")",";",["T_WHITESPACE","\n        ",2573],["T_IF","if",2574],["T_WHITESPACE"," ",2574],"(",["T_ISSET","isset",2574],"(",["T_VARIABLE","$keyList",2574],"[",["T_STRING","strtoupper",2574],"(",["T_VARIABLE","$indexName",2574],")","]",")",")",["T_WHITESPACE"," ",2574],"{",["T_WHITESPACE","\n            ",2574],["T_IF","if",2575],["T_WHITESPACE"," ",2575],"(",["T_VARIABLE","$keyList",2575],"[",["T_STRING","strtoupper",2575],"(",["T_VARIABLE","$indexName",2575],")","]","[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",2575],"]",["T_WHITESPACE"," ",2575],["T_IS_EQUAL","==",2575],["T_WHITESPACE"," ",2575],["T_STRING","AdapterInterface",2575],["T_DOUBLE_COLON","::",2575],["T_STRING","INDEX_TYPE_PRIMARY",2575],")",["T_WHITESPACE"," ",2575],"{",["T_WHITESPACE","\n                ",2575],["T_VARIABLE","$query",2576],["T_WHITESPACE"," ",2576],["T_CONCAT_EQUAL",".=",2576],["T_WHITESPACE"," ",2576],["T_CONSTANT_ENCAPSED_STRING","' DROP PRIMARY KEY,'",2576],";",["T_WHITESPACE","\n            ",2576],"}",["T_WHITESPACE"," ",2577],["T_ELSE","else",2577],["T_WHITESPACE"," ",2577],"{",["T_WHITESPACE","\n                ",2577],["T_VARIABLE","$query",2578],["T_WHITESPACE"," ",2578],["T_CONCAT_EQUAL",".=",2578],["T_WHITESPACE"," ",2578],["T_STRING","sprintf",2578],"(",["T_CONSTANT_ENCAPSED_STRING","' DROP INDEX %s,'",2578],",",["T_WHITESPACE"," ",2578],["T_VARIABLE","$this",2578],["T_OBJECT_OPERATOR","->",2578],["T_STRING","quoteIdentifier",2578],"(",["T_VARIABLE","$indexName",2578],")",")",";",["T_WHITESPACE","\n            ",2578],"}",["T_WHITESPACE","\n        ",2579],"}",["T_WHITESPACE","\n\n        ",2580],["T_IF","if",2582],["T_WHITESPACE"," ",2582],"(","!",["T_STRING","is_array",2582],"(",["T_VARIABLE","$fields",2582],")",")",["T_WHITESPACE"," ",2582],"{",["T_WHITESPACE","\n            ",2582],["T_VARIABLE","$fields",2583],["T_WHITESPACE"," ",2583],"=",["T_WHITESPACE"," ",2583],"[",["T_VARIABLE","$fields",2583],"]",";",["T_WHITESPACE","\n        ",2583],"}",["T_WHITESPACE","\n\n        ",2584],["T_VARIABLE","$fieldSql",2586],["T_WHITESPACE"," ",2586],"=",["T_WHITESPACE"," ",2586],"[","]",";",["T_WHITESPACE","\n        ",2586],["T_FOREACH","foreach",2587],["T_WHITESPACE"," ",2587],"(",["T_VARIABLE","$fields",2587],["T_WHITESPACE"," ",2587],["T_AS","as",2587],["T_WHITESPACE"," ",2587],["T_VARIABLE","$field",2587],")",["T_WHITESPACE"," ",2587],"{",["T_WHITESPACE","\n            ",2587],["T_IF","if",2588],["T_WHITESPACE"," ",2588],"(","!",["T_ISSET","isset",2588],"(",["T_VARIABLE","$columns",2588],"[",["T_VARIABLE","$field",2588],"]",")",")",["T_WHITESPACE"," ",2588],"{",["T_WHITESPACE","\n                ",2588],["T_VARIABLE","$msg",2589],["T_WHITESPACE"," ",2589],"=",["T_WHITESPACE"," ",2589],["T_STRING","sprintf",2589],"(",["T_WHITESPACE","\n                    ",2589],["T_CONSTANT_ENCAPSED_STRING","'There is no field \"%s\" that you are trying to create an index on \"%s\"'",2590],",",["T_WHITESPACE","\n                    ",2590],["T_VARIABLE","$field",2591],",",["T_WHITESPACE","\n                    ",2591],["T_VARIABLE","$tableName",2592],["T_WHITESPACE","\n                ",2592],")",";",["T_WHITESPACE","\n                ",2593],["T_THROW","throw",2594],["T_WHITESPACE"," ",2594],["T_NEW","new",2594],["T_WHITESPACE"," ",2594],["T_NS_SEPARATOR","\\",2594],["T_STRING","Zend_Db_Exception",2594],"(",["T_VARIABLE","$msg",2594],")",";",["T_WHITESPACE","\n            ",2594],"}",["T_WHITESPACE","\n            ",2595],["T_VARIABLE","$fieldSql",2596],"[","]",["T_WHITESPACE"," ",2596],"=",["T_WHITESPACE"," ",2596],["T_VARIABLE","$this",2596],["T_OBJECT_OPERATOR","->",2596],["T_STRING","quoteIdentifier",2596],"(",["T_VARIABLE","$field",2596],")",";",["T_WHITESPACE","\n        ",2596],"}",["T_WHITESPACE","\n        ",2597],["T_VARIABLE","$fieldSql",2598],["T_WHITESPACE"," ",2598],"=",["T_WHITESPACE"," ",2598],["T_STRING","implode",2598],"(",["T_CONSTANT_ENCAPSED_STRING","','",2598],",",["T_WHITESPACE"," ",2598],["T_VARIABLE","$fieldSql",2598],")",";",["T_WHITESPACE","\n\n        ",2598],["T_SWITCH","switch",2600],["T_WHITESPACE"," ",2600],"(",["T_STRING","strtolower",2600],"(",["T_VARIABLE","$indexType",2600],")",")",["T_WHITESPACE"," ",2600],"{",["T_WHITESPACE","\n            ",2600],["T_CASE","case",2601],["T_WHITESPACE"," ",2601],["T_STRING","AdapterInterface",2601],["T_DOUBLE_COLON","::",2601],["T_STRING","INDEX_TYPE_PRIMARY",2601],":",["T_WHITESPACE","\n                ",2601],["T_VARIABLE","$condition",2602],["T_WHITESPACE"," ",2602],"=",["T_WHITESPACE"," ",2602],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY KEY'",2602],";",["T_WHITESPACE","\n                ",2602],["T_BREAK","break",2603],";",["T_WHITESPACE","\n            ",2603],["T_CASE","case",2604],["T_WHITESPACE"," ",2604],["T_STRING","AdapterInterface",2604],["T_DOUBLE_COLON","::",2604],["T_STRING","INDEX_TYPE_UNIQUE",2604],":",["T_WHITESPACE","\n                ",2604],["T_VARIABLE","$condition",2605],["T_WHITESPACE"," ",2605],"=",["T_WHITESPACE"," ",2605],["T_CONSTANT_ENCAPSED_STRING","'UNIQUE '",2605],["T_WHITESPACE"," ",2605],".",["T_WHITESPACE"," ",2605],["T_VARIABLE","$this",2605],["T_OBJECT_OPERATOR","->",2605],["T_STRING","quoteIdentifier",2605],"(",["T_VARIABLE","$indexName",2605],")",";",["T_WHITESPACE","\n                ",2605],["T_BREAK","break",2606],";",["T_WHITESPACE","\n            ",2606],["T_CASE","case",2607],["T_WHITESPACE"," ",2607],["T_STRING","AdapterInterface",2607],["T_DOUBLE_COLON","::",2607],["T_STRING","INDEX_TYPE_FULLTEXT",2607],":",["T_WHITESPACE","\n                ",2607],["T_VARIABLE","$condition",2608],["T_WHITESPACE"," ",2608],"=",["T_WHITESPACE"," ",2608],["T_CONSTANT_ENCAPSED_STRING","'FULLTEXT '",2608],["T_WHITESPACE"," ",2608],".",["T_WHITESPACE"," ",2608],["T_VARIABLE","$this",2608],["T_OBJECT_OPERATOR","->",2608],["T_STRING","quoteIdentifier",2608],"(",["T_VARIABLE","$indexName",2608],")",";",["T_WHITESPACE","\n                ",2608],["T_BREAK","break",2609],";",["T_WHITESPACE","\n            ",2609],["T_DEFAULT","default",2610],":",["T_WHITESPACE","\n                ",2610],["T_VARIABLE","$condition",2611],["T_WHITESPACE"," ",2611],"=",["T_WHITESPACE"," ",2611],["T_CONSTANT_ENCAPSED_STRING","'INDEX '",2611],["T_WHITESPACE"," ",2611],".",["T_WHITESPACE"," ",2611],["T_VARIABLE","$this",2611],["T_OBJECT_OPERATOR","->",2611],["T_STRING","quoteIdentifier",2611],"(",["T_VARIABLE","$indexName",2611],")",";",["T_WHITESPACE","\n                ",2611],["T_BREAK","break",2612],";",["T_WHITESPACE","\n        ",2612],"}",["T_WHITESPACE","\n\n        ",2613],["T_VARIABLE","$query",2615],["T_WHITESPACE"," ",2615],["T_CONCAT_EQUAL",".=",2615],["T_WHITESPACE"," ",2615],["T_STRING","sprintf",2615],"(",["T_CONSTANT_ENCAPSED_STRING","' ADD %s (%s)'",2615],",",["T_WHITESPACE"," ",2615],["T_VARIABLE","$condition",2615],",",["T_WHITESPACE"," ",2615],["T_VARIABLE","$fieldSql",2615],")",";",["T_WHITESPACE","\n\n        ",2615],["T_VARIABLE","$cycle",2617],["T_WHITESPACE"," ",2617],"=",["T_WHITESPACE"," ",2617],["T_STRING","true",2617],";",["T_WHITESPACE","\n        ",2617],["T_WHILE","while",2618],["T_WHITESPACE"," ",2618],"(",["T_VARIABLE","$cycle",2618],["T_WHITESPACE"," ",2618],["T_IS_IDENTICAL","===",2618],["T_WHITESPACE"," ",2618],["T_STRING","true",2618],")",["T_WHITESPACE"," ",2618],"{",["T_WHITESPACE","\n            ",2618],["T_TRY","try",2619],["T_WHITESPACE"," ",2619],"{",["T_WHITESPACE","\n                ",2619],["T_VARIABLE","$result",2620],["T_WHITESPACE"," ",2620],"=",["T_WHITESPACE"," ",2620],["T_VARIABLE","$this",2620],["T_OBJECT_OPERATOR","->",2620],["T_STRING","rawQuery",2620],"(",["T_VARIABLE","$query",2620],")",";",["T_WHITESPACE","\n                ",2620],["T_VARIABLE","$cycle",2621],["T_WHITESPACE","  ",2621],"=",["T_WHITESPACE"," ",2621],["T_STRING","false",2621],";",["T_WHITESPACE","\n            ",2621],"}",["T_WHITESPACE"," ",2622],["T_CATCH","catch",2622],["T_WHITESPACE"," ",2622],"(",["T_NS_SEPARATOR","\\",2622],["T_STRING","Exception",2622],["T_WHITESPACE"," ",2622],["T_VARIABLE","$e",2622],")",["T_WHITESPACE"," ",2622],"{",["T_WHITESPACE","\n                ",2622],["T_IF","if",2623],["T_WHITESPACE"," ",2623],"(",["T_STRING","in_array",2623],"(",["T_STRING","strtolower",2623],"(",["T_VARIABLE","$indexType",2623],")",",",["T_WHITESPACE"," ",2623],"[",["T_CONSTANT_ENCAPSED_STRING","'primary'",2623],",",["T_WHITESPACE"," ",2623],["T_CONSTANT_ENCAPSED_STRING","'unique'",2623],"]",")",")",["T_WHITESPACE"," ",2623],"{",["T_WHITESPACE","\n                    ",2623],["T_VARIABLE","$match",2624],["T_WHITESPACE"," ",2624],"=",["T_WHITESPACE"," ",2624],"[","]",";",["T_WHITESPACE","\n                    ",2624],["T_IF","if",2625],["T_WHITESPACE"," ",2625],"(",["T_STRING","preg_match",2625],"(",["T_CONSTANT_ENCAPSED_STRING","'#SQLSTATE\\[23000\\]: [^:]+: 1062[^\\']+\\'([\\d-\\.]+)\\'#'",2625],",",["T_WHITESPACE"," ",2625],["T_VARIABLE","$e",2625],["T_OBJECT_OPERATOR","->",2625],["T_STRING","getMessage",2625],"(",")",",",["T_WHITESPACE"," ",2625],["T_VARIABLE","$match",2625],")",")",["T_WHITESPACE"," ",2625],"{",["T_WHITESPACE","\n                        ",2625],["T_VARIABLE","$ids",2626],["T_WHITESPACE"," ",2626],"=",["T_WHITESPACE"," ",2626],["T_STRING","explode",2626],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",2626],",",["T_WHITESPACE"," ",2626],["T_VARIABLE","$match",2626],"[",["T_LNUMBER","1",2626],"]",")",";",["T_WHITESPACE","\n                        ",2626],["T_VARIABLE","$this",2627],["T_OBJECT_OPERATOR","->",2627],["T_STRING","_removeDuplicateEntry",2627],"(",["T_VARIABLE","$tableName",2627],",",["T_WHITESPACE"," ",2627],["T_VARIABLE","$fields",2627],",",["T_WHITESPACE"," ",2627],["T_VARIABLE","$ids",2627],")",";",["T_WHITESPACE","\n                        ",2627],["T_CONTINUE","continue",2628],";",["T_WHITESPACE","\n                    ",2628],"}",["T_WHITESPACE","\n                ",2629],"}",["T_WHITESPACE","\n                ",2630],["T_THROW","throw",2631],["T_WHITESPACE"," ",2631],["T_VARIABLE","$e",2631],";",["T_WHITESPACE","\n            ",2631],"}",["T_WHITESPACE","\n        ",2632],"}",["T_WHITESPACE","\n\n        ",2633],["T_VARIABLE","$this",2635],["T_OBJECT_OPERATOR","->",2635],["T_STRING","resetDdlCache",2635],"(",["T_VARIABLE","$tableName",2635],",",["T_WHITESPACE"," ",2635],["T_VARIABLE","$schemaName",2635],")",";",["T_WHITESPACE","\n\n        ",2635],["T_RETURN","return",2637],["T_WHITESPACE"," ",2637],["T_VARIABLE","$result",2637],";",["T_WHITESPACE","\n    ",2637],"}",["T_WHITESPACE","\n\n    ",2638],["T_DOC_COMMENT","\/**\n     * Drop the index from table\n     *\n     * @param string $tableName\n     * @param string $keyName\n     * @param string $schemaName\n     * @return true|\\Zend_Db_Statement_Interface\n     *\/",2640],["T_WHITESPACE","\n    ",2647],["T_PUBLIC","public",2648],["T_WHITESPACE"," ",2648],["T_FUNCTION","function",2648],["T_WHITESPACE"," ",2648],["T_STRING","dropIndex",2648],"(",["T_VARIABLE","$tableName",2648],",",["T_WHITESPACE"," ",2648],["T_VARIABLE","$keyName",2648],",",["T_WHITESPACE"," ",2648],["T_VARIABLE","$schemaName",2648],["T_WHITESPACE"," ",2648],"=",["T_WHITESPACE"," ",2648],["T_STRING","null",2648],")",["T_WHITESPACE","\n    ",2648],"{",["T_WHITESPACE","\n        ",2649],["T_VARIABLE","$indexList",2650],["T_WHITESPACE"," ",2650],"=",["T_WHITESPACE"," ",2650],["T_VARIABLE","$this",2650],["T_OBJECT_OPERATOR","->",2650],["T_STRING","getIndexList",2650],"(",["T_VARIABLE","$tableName",2650],",",["T_WHITESPACE"," ",2650],["T_VARIABLE","$schemaName",2650],")",";",["T_WHITESPACE","\n        ",2650],["T_VARIABLE","$keyName",2651],["T_WHITESPACE"," ",2651],"=",["T_WHITESPACE"," ",2651],["T_STRING","strtoupper",2651],"(",["T_VARIABLE","$keyName",2651],")",";",["T_WHITESPACE","\n        ",2651],["T_IF","if",2652],["T_WHITESPACE"," ",2652],"(","!",["T_ISSET","isset",2652],"(",["T_VARIABLE","$indexList",2652],"[",["T_VARIABLE","$keyName",2652],"]",")",")",["T_WHITESPACE"," ",2652],"{",["T_WHITESPACE","\n            ",2652],["T_RETURN","return",2653],["T_WHITESPACE"," ",2653],["T_STRING","true",2653],";",["T_WHITESPACE","\n        ",2653],"}",["T_WHITESPACE","\n\n        ",2654],["T_IF","if",2656],["T_WHITESPACE"," ",2656],"(",["T_VARIABLE","$keyName",2656],["T_WHITESPACE"," ",2656],["T_IS_EQUAL","==",2656],["T_WHITESPACE"," ",2656],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",2656],")",["T_WHITESPACE"," ",2656],"{",["T_WHITESPACE","\n            ",2656],["T_VARIABLE","$cond",2657],["T_WHITESPACE"," ",2657],"=",["T_WHITESPACE"," ",2657],["T_CONSTANT_ENCAPSED_STRING","'DROP PRIMARY KEY'",2657],";",["T_WHITESPACE","\n        ",2657],"}",["T_WHITESPACE"," ",2658],["T_ELSE","else",2658],["T_WHITESPACE"," ",2658],"{",["T_WHITESPACE","\n            ",2658],["T_VARIABLE","$cond",2659],["T_WHITESPACE"," ",2659],"=",["T_WHITESPACE"," ",2659],["T_CONSTANT_ENCAPSED_STRING","'DROP KEY '",2659],["T_WHITESPACE"," ",2659],".",["T_WHITESPACE"," ",2659],["T_VARIABLE","$this",2659],["T_OBJECT_OPERATOR","->",2659],["T_STRING","quoteIdentifier",2659],"(",["T_VARIABLE","$indexList",2659],"[",["T_VARIABLE","$keyName",2659],"]","[",["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",2659],"]",")",";",["T_WHITESPACE","\n        ",2659],"}",["T_WHITESPACE","\n        ",2660],["T_VARIABLE","$sql",2661],["T_WHITESPACE"," ",2661],"=",["T_WHITESPACE"," ",2661],["T_STRING","sprintf",2661],"(",["T_WHITESPACE","\n            ",2661],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s %s'",2662],",",["T_WHITESPACE","\n            ",2662],["T_VARIABLE","$this",2663],["T_OBJECT_OPERATOR","->",2663],["T_STRING","quoteIdentifier",2663],"(",["T_VARIABLE","$this",2663],["T_OBJECT_OPERATOR","->",2663],["T_STRING","_getTableName",2663],"(",["T_VARIABLE","$tableName",2663],",",["T_WHITESPACE"," ",2663],["T_VARIABLE","$schemaName",2663],")",")",",",["T_WHITESPACE","\n            ",2663],["T_VARIABLE","$cond",2664],["T_WHITESPACE","\n        ",2664],")",";",["T_WHITESPACE","\n\n        ",2665],["T_VARIABLE","$this",2667],["T_OBJECT_OPERATOR","->",2667],["T_STRING","resetDdlCache",2667],"(",["T_VARIABLE","$tableName",2667],",",["T_WHITESPACE"," ",2667],["T_VARIABLE","$schemaName",2667],")",";",["T_WHITESPACE","\n\n        ",2667],["T_RETURN","return",2669],["T_WHITESPACE"," ",2669],["T_VARIABLE","$this",2669],["T_OBJECT_OPERATOR","->",2669],["T_STRING","rawQuery",2669],"(",["T_VARIABLE","$sql",2669],")",";",["T_WHITESPACE","\n    ",2669],"}",["T_WHITESPACE","\n\n    ",2670],["T_DOC_COMMENT","\/**\n     * Add new Foreign Key to table\n     * If Foreign Key with same name is exist - it will be deleted\n     *\n     * @param string $fkName\n     * @param string $tableName\n     * @param string $columnName\n     * @param string $refTableName\n     * @param string $refColumnName\n     * @param string $onDelete\n     * @param bool $purge            trying remove invalid data\n     * @param string $schemaName\n     * @param string $refSchemaName\n     * @return \\Zend_Db_Statement_Interface\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",2672],["T_WHITESPACE","\n    ",2687],["T_PUBLIC","public",2688],["T_WHITESPACE"," ",2688],["T_FUNCTION","function",2688],["T_WHITESPACE"," ",2688],["T_STRING","addForeignKey",2688],"(",["T_WHITESPACE","\n        ",2688],["T_VARIABLE","$fkName",2689],",",["T_WHITESPACE","\n        ",2689],["T_VARIABLE","$tableName",2690],",",["T_WHITESPACE","\n        ",2690],["T_VARIABLE","$columnName",2691],",",["T_WHITESPACE","\n        ",2691],["T_VARIABLE","$refTableName",2692],",",["T_WHITESPACE","\n        ",2692],["T_VARIABLE","$refColumnName",2693],",",["T_WHITESPACE","\n        ",2693],["T_VARIABLE","$onDelete",2694],["T_WHITESPACE"," ",2694],"=",["T_WHITESPACE"," ",2694],["T_STRING","AdapterInterface",2694],["T_DOUBLE_COLON","::",2694],["T_STRING","FK_ACTION_CASCADE",2694],",",["T_WHITESPACE","\n        ",2694],["T_VARIABLE","$purge",2695],["T_WHITESPACE"," ",2695],"=",["T_WHITESPACE"," ",2695],["T_STRING","false",2695],",",["T_WHITESPACE","\n        ",2695],["T_VARIABLE","$schemaName",2696],["T_WHITESPACE"," ",2696],"=",["T_WHITESPACE"," ",2696],["T_STRING","null",2696],",",["T_WHITESPACE","\n        ",2696],["T_VARIABLE","$refSchemaName",2697],["T_WHITESPACE"," ",2697],"=",["T_WHITESPACE"," ",2697],["T_STRING","null",2697],["T_WHITESPACE","\n    ",2697],")",["T_WHITESPACE"," ",2698],"{",["T_WHITESPACE","\n        ",2698],["T_VARIABLE","$this",2699],["T_OBJECT_OPERATOR","->",2699],["T_STRING","dropForeignKey",2699],"(",["T_VARIABLE","$tableName",2699],",",["T_WHITESPACE"," ",2699],["T_VARIABLE","$fkName",2699],",",["T_WHITESPACE"," ",2699],["T_VARIABLE","$schemaName",2699],")",";",["T_WHITESPACE","\n\n        ",2699],["T_IF","if",2701],["T_WHITESPACE"," ",2701],"(",["T_VARIABLE","$purge",2701],")",["T_WHITESPACE"," ",2701],"{",["T_WHITESPACE","\n            ",2701],["T_VARIABLE","$this",2702],["T_OBJECT_OPERATOR","->",2702],["T_STRING","purgeOrphanRecords",2702],"(",["T_VARIABLE","$tableName",2702],",",["T_WHITESPACE"," ",2702],["T_VARIABLE","$columnName",2702],",",["T_WHITESPACE"," ",2702],["T_VARIABLE","$refTableName",2702],",",["T_WHITESPACE"," ",2702],["T_VARIABLE","$refColumnName",2702],",",["T_WHITESPACE"," ",2702],["T_VARIABLE","$onDelete",2702],")",";",["T_WHITESPACE","\n        ",2702],"}",["T_WHITESPACE","\n\n        ",2703],["T_VARIABLE","$query",2705],["T_WHITESPACE"," ",2705],"=",["T_WHITESPACE"," ",2705],["T_STRING","sprintf",2705],"(",["T_WHITESPACE","\n            ",2705],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s ADD CONSTRAINT %s FOREIGN KEY (%s) REFERENCES %s (%s)'",2706],",",["T_WHITESPACE","\n            ",2706],["T_VARIABLE","$this",2707],["T_OBJECT_OPERATOR","->",2707],["T_STRING","quoteIdentifier",2707],"(",["T_VARIABLE","$this",2707],["T_OBJECT_OPERATOR","->",2707],["T_STRING","_getTableName",2707],"(",["T_VARIABLE","$tableName",2707],",",["T_WHITESPACE"," ",2707],["T_VARIABLE","$schemaName",2707],")",")",",",["T_WHITESPACE","\n            ",2707],["T_VARIABLE","$this",2708],["T_OBJECT_OPERATOR","->",2708],["T_STRING","quoteIdentifier",2708],"(",["T_VARIABLE","$fkName",2708],")",",",["T_WHITESPACE","\n            ",2708],["T_VARIABLE","$this",2709],["T_OBJECT_OPERATOR","->",2709],["T_STRING","quoteIdentifier",2709],"(",["T_VARIABLE","$columnName",2709],")",",",["T_WHITESPACE","\n            ",2709],["T_VARIABLE","$this",2710],["T_OBJECT_OPERATOR","->",2710],["T_STRING","quoteIdentifier",2710],"(",["T_VARIABLE","$this",2710],["T_OBJECT_OPERATOR","->",2710],["T_STRING","_getTableName",2710],"(",["T_VARIABLE","$refTableName",2710],",",["T_WHITESPACE"," ",2710],["T_VARIABLE","$refSchemaName",2710],")",")",",",["T_WHITESPACE","\n            ",2710],["T_VARIABLE","$this",2711],["T_OBJECT_OPERATOR","->",2711],["T_STRING","quoteIdentifier",2711],"(",["T_VARIABLE","$refColumnName",2711],")",["T_WHITESPACE","\n        ",2711],")",";",["T_WHITESPACE","\n\n        ",2712],["T_IF","if",2714],["T_WHITESPACE"," ",2714],"(",["T_VARIABLE","$onDelete",2714],["T_WHITESPACE"," ",2714],["T_IS_NOT_IDENTICAL","!==",2714],["T_WHITESPACE"," ",2714],["T_STRING","null",2714],")",["T_WHITESPACE"," ",2714],"{",["T_WHITESPACE","\n            ",2714],["T_VARIABLE","$query",2715],["T_WHITESPACE"," ",2715],["T_CONCAT_EQUAL",".=",2715],["T_WHITESPACE"," ",2715],["T_CONSTANT_ENCAPSED_STRING","' ON DELETE '",2715],["T_WHITESPACE"," ",2715],".",["T_WHITESPACE"," ",2715],["T_STRING","strtoupper",2715],"(",["T_VARIABLE","$onDelete",2715],")",";",["T_WHITESPACE","\n        ",2715],"}",["T_WHITESPACE","\n\n        ",2716],["T_VARIABLE","$result",2718],["T_WHITESPACE"," ",2718],"=",["T_WHITESPACE"," ",2718],["T_VARIABLE","$this",2718],["T_OBJECT_OPERATOR","->",2718],["T_STRING","rawQuery",2718],"(",["T_VARIABLE","$query",2718],")",";",["T_WHITESPACE","\n        ",2718],["T_VARIABLE","$this",2719],["T_OBJECT_OPERATOR","->",2719],["T_STRING","resetDdlCache",2719],"(",["T_VARIABLE","$tableName",2719],")",";",["T_WHITESPACE","\n        ",2719],["T_RETURN","return",2720],["T_WHITESPACE"," ",2720],["T_VARIABLE","$result",2720],";",["T_WHITESPACE","\n    ",2720],"}",["T_WHITESPACE","\n\n    ",2721],["T_DOC_COMMENT","\/**\n     * Format Date to internal database date format\n     *\n     * @param int|string|\\DateTime $date\n     * @param bool $includeTime\n     * @return \\Zend_Db_Expr\n     *\/",2723],["T_WHITESPACE","\n    ",2729],["T_PUBLIC","public",2730],["T_WHITESPACE"," ",2730],["T_FUNCTION","function",2730],["T_WHITESPACE"," ",2730],["T_STRING","formatDate",2730],"(",["T_VARIABLE","$date",2730],",",["T_WHITESPACE"," ",2730],["T_VARIABLE","$includeTime",2730],["T_WHITESPACE"," ",2730],"=",["T_WHITESPACE"," ",2730],["T_STRING","true",2730],")",["T_WHITESPACE","\n    ",2730],"{",["T_WHITESPACE","\n        ",2731],["T_VARIABLE","$date",2732],["T_WHITESPACE"," ",2732],"=",["T_WHITESPACE"," ",2732],["T_VARIABLE","$this",2732],["T_OBJECT_OPERATOR","->",2732],["T_STRING","dateTime",2732],["T_OBJECT_OPERATOR","->",2732],["T_STRING","formatDate",2732],"(",["T_VARIABLE","$date",2732],",",["T_WHITESPACE"," ",2732],["T_VARIABLE","$includeTime",2732],")",";",["T_WHITESPACE","\n\n        ",2732],["T_IF","if",2734],["T_WHITESPACE"," ",2734],"(",["T_VARIABLE","$date",2734],["T_WHITESPACE"," ",2734],["T_IS_IDENTICAL","===",2734],["T_WHITESPACE"," ",2734],["T_STRING","null",2734],")",["T_WHITESPACE"," ",2734],"{",["T_WHITESPACE","\n            ",2734],["T_RETURN","return",2735],["T_WHITESPACE"," ",2735],["T_NEW","new",2735],["T_WHITESPACE"," ",2735],["T_NS_SEPARATOR","\\",2735],["T_STRING","Zend_Db_Expr",2735],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",2735],")",";",["T_WHITESPACE","\n        ",2735],"}",["T_WHITESPACE","\n\n        ",2736],["T_RETURN","return",2738],["T_WHITESPACE"," ",2738],["T_NEW","new",2738],["T_WHITESPACE"," ",2738],["T_NS_SEPARATOR","\\",2738],["T_STRING","Zend_Db_Expr",2738],"(",["T_VARIABLE","$this",2738],["T_OBJECT_OPERATOR","->",2738],["T_STRING","quote",2738],"(",["T_VARIABLE","$date",2738],")",")",";",["T_WHITESPACE","\n    ",2738],"}",["T_WHITESPACE","\n\n    ",2739],["T_DOC_COMMENT","\/**\n     * Run additional environment before setup\n     *\n     * @return $this\n     *\/",2741],["T_WHITESPACE","\n    ",2745],["T_PUBLIC","public",2746],["T_WHITESPACE"," ",2746],["T_FUNCTION","function",2746],["T_WHITESPACE"," ",2746],["T_STRING","startSetup",2746],"(",")",["T_WHITESPACE","\n    ",2746],"{",["T_WHITESPACE","\n        ",2747],["T_VARIABLE","$this",2748],["T_OBJECT_OPERATOR","->",2748],["T_STRING","rawQuery",2748],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET SQL_MODE=''\"",2748],")",";",["T_WHITESPACE","\n        ",2748],["T_VARIABLE","$this",2749],["T_OBJECT_OPERATOR","->",2749],["T_STRING","rawQuery",2749],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0\"",2749],")",";",["T_WHITESPACE","\n        ",2749],["T_VARIABLE","$this",2750],["T_OBJECT_OPERATOR","->",2750],["T_STRING","rawQuery",2750],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO'\"",2750],")",";",["T_WHITESPACE","\n\n        ",2750],["T_RETURN","return",2752],["T_WHITESPACE"," ",2752],["T_VARIABLE","$this",2752],";",["T_WHITESPACE","\n    ",2752],"}",["T_WHITESPACE","\n\n    ",2753],["T_DOC_COMMENT","\/**\n     * Run additional environment after setup\n     *\n     * @return $this\n     *\/",2755],["T_WHITESPACE","\n    ",2759],["T_PUBLIC","public",2760],["T_WHITESPACE"," ",2760],["T_FUNCTION","function",2760],["T_WHITESPACE"," ",2760],["T_STRING","endSetup",2760],"(",")",["T_WHITESPACE","\n    ",2760],"{",["T_WHITESPACE","\n        ",2761],["T_VARIABLE","$this",2762],["T_OBJECT_OPERATOR","->",2762],["T_STRING","rawQuery",2762],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET SQL_MODE=IFNULL(@OLD_SQL_MODE,'')\"",2762],")",";",["T_WHITESPACE","\n        ",2762],["T_VARIABLE","$this",2763],["T_OBJECT_OPERATOR","->",2763],["T_STRING","rawQuery",2763],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS=0, 0, 1)\"",2763],")",";",["T_WHITESPACE","\n\n        ",2763],["T_RETURN","return",2765],["T_WHITESPACE"," ",2765],["T_VARIABLE","$this",2765],";",["T_WHITESPACE","\n    ",2765],"}",["T_WHITESPACE","\n\n    ",2766],["T_DOC_COMMENT","\/**\n     * Build SQL statement for condition\n     *\n     * If $condition integer or string - exact value will be filtered ('eq' condition)\n     *\n     * If $condition is array is - one of the following structures is expected:\n     * - array(\"from\" => $fromValue, \"to\" => $toValue)\n     * - array(\"eq\" => $equalValue)\n     * - array(\"neq\" => $notEqualValue)\n     * - array(\"like\" => $likeValue)\n     * - array(\"in\" => array($inValues))\n     * - array(\"nin\" => array($notInValues))\n     * - array(\"notnull\" => $valueIsNotNull)\n     * - array(\"null\" => $valueIsNull)\n     * - array(\"gt\" => $greaterValue)\n     * - array(\"lt\" => $lessValue)\n     * - array(\"gteq\" => $greaterOrEqualValue)\n     * - array(\"lteq\" => $lessOrEqualValue)\n     * - array(\"finset\" => $valueInSet)\n     * - array(\"regexp\" => $regularExpression)\n     * - array(\"seq\" => $stringValue)\n     * - array(\"sneq\" => $stringValue)\n     *\n     * If non matched - sequential array is expected and OR conditions\n     * will be built using above mentioned structure\n     *\n     * @param string $fieldName\n     * @param integer|string|array $condition\n     * @return string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",2768],["T_WHITESPACE","\n    ",2798],["T_PUBLIC","public",2799],["T_WHITESPACE"," ",2799],["T_FUNCTION","function",2799],["T_WHITESPACE"," ",2799],["T_STRING","prepareSqlCondition",2799],"(",["T_VARIABLE","$fieldName",2799],",",["T_WHITESPACE"," ",2799],["T_VARIABLE","$condition",2799],")",["T_WHITESPACE","\n    ",2799],"{",["T_WHITESPACE","\n        ",2800],["T_VARIABLE","$conditionKeyMap",2801],["T_WHITESPACE"," ",2801],"=",["T_WHITESPACE"," ",2801],"[",["T_WHITESPACE","\n            ",2801],["T_CONSTANT_ENCAPSED_STRING","'eq'",2802],["T_WHITESPACE","            ",2802],["T_DOUBLE_ARROW","=>",2802],["T_WHITESPACE"," ",2802],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} = ?\"",2802],",",["T_WHITESPACE","\n            ",2802],["T_CONSTANT_ENCAPSED_STRING","'neq'",2803],["T_WHITESPACE","           ",2803],["T_DOUBLE_ARROW","=>",2803],["T_WHITESPACE"," ",2803],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} != ?\"",2803],",",["T_WHITESPACE","\n            ",2803],["T_CONSTANT_ENCAPSED_STRING","'like'",2804],["T_WHITESPACE","          ",2804],["T_DOUBLE_ARROW","=>",2804],["T_WHITESPACE"," ",2804],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} LIKE ?\"",2804],",",["T_WHITESPACE","\n            ",2804],["T_CONSTANT_ENCAPSED_STRING","'nlike'",2805],["T_WHITESPACE","         ",2805],["T_DOUBLE_ARROW","=>",2805],["T_WHITESPACE"," ",2805],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} NOT LIKE ?\"",2805],",",["T_WHITESPACE","\n            ",2805],["T_CONSTANT_ENCAPSED_STRING","'in'",2806],["T_WHITESPACE","            ",2806],["T_DOUBLE_ARROW","=>",2806],["T_WHITESPACE"," ",2806],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} IN(?)\"",2806],",",["T_WHITESPACE","\n            ",2806],["T_CONSTANT_ENCAPSED_STRING","'nin'",2807],["T_WHITESPACE","           ",2807],["T_DOUBLE_ARROW","=>",2807],["T_WHITESPACE"," ",2807],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} NOT IN(?)\"",2807],",",["T_WHITESPACE","\n            ",2807],["T_CONSTANT_ENCAPSED_STRING","'is'",2808],["T_WHITESPACE","            ",2808],["T_DOUBLE_ARROW","=>",2808],["T_WHITESPACE"," ",2808],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} IS ?\"",2808],",",["T_WHITESPACE","\n            ",2808],["T_CONSTANT_ENCAPSED_STRING","'notnull'",2809],["T_WHITESPACE","       ",2809],["T_DOUBLE_ARROW","=>",2809],["T_WHITESPACE"," ",2809],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} IS NOT NULL\"",2809],",",["T_WHITESPACE","\n            ",2809],["T_CONSTANT_ENCAPSED_STRING","'null'",2810],["T_WHITESPACE","          ",2810],["T_DOUBLE_ARROW","=>",2810],["T_WHITESPACE"," ",2810],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} IS NULL\"",2810],",",["T_WHITESPACE","\n            ",2810],["T_CONSTANT_ENCAPSED_STRING","'gt'",2811],["T_WHITESPACE","            ",2811],["T_DOUBLE_ARROW","=>",2811],["T_WHITESPACE"," ",2811],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} > ?\"",2811],",",["T_WHITESPACE","\n            ",2811],["T_CONSTANT_ENCAPSED_STRING","'lt'",2812],["T_WHITESPACE","            ",2812],["T_DOUBLE_ARROW","=>",2812],["T_WHITESPACE"," ",2812],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} < ?\"",2812],",",["T_WHITESPACE","\n            ",2812],["T_CONSTANT_ENCAPSED_STRING","'gteq'",2813],["T_WHITESPACE","          ",2813],["T_DOUBLE_ARROW","=>",2813],["T_WHITESPACE"," ",2813],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} >= ?\"",2813],",",["T_WHITESPACE","\n            ",2813],["T_CONSTANT_ENCAPSED_STRING","'lteq'",2814],["T_WHITESPACE","          ",2814],["T_DOUBLE_ARROW","=>",2814],["T_WHITESPACE"," ",2814],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} <= ?\"",2814],",",["T_WHITESPACE","\n            ",2814],["T_CONSTANT_ENCAPSED_STRING","'finset'",2815],["T_WHITESPACE","        ",2815],["T_DOUBLE_ARROW","=>",2815],["T_WHITESPACE"," ",2815],["T_CONSTANT_ENCAPSED_STRING","\"FIND_IN_SET(?, {{fieldName}})\"",2815],",",["T_WHITESPACE","\n            ",2815],["T_CONSTANT_ENCAPSED_STRING","'regexp'",2816],["T_WHITESPACE","        ",2816],["T_DOUBLE_ARROW","=>",2816],["T_WHITESPACE"," ",2816],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} REGEXP ?\"",2816],",",["T_WHITESPACE","\n            ",2816],["T_CONSTANT_ENCAPSED_STRING","'from'",2817],["T_WHITESPACE","          ",2817],["T_DOUBLE_ARROW","=>",2817],["T_WHITESPACE"," ",2817],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} >= ?\"",2817],",",["T_WHITESPACE","\n            ",2817],["T_CONSTANT_ENCAPSED_STRING","'to'",2818],["T_WHITESPACE","            ",2818],["T_DOUBLE_ARROW","=>",2818],["T_WHITESPACE"," ",2818],["T_CONSTANT_ENCAPSED_STRING","\"{{fieldName}} <= ?\"",2818],",",["T_WHITESPACE","\n            ",2818],["T_CONSTANT_ENCAPSED_STRING","'seq'",2819],["T_WHITESPACE","           ",2819],["T_DOUBLE_ARROW","=>",2819],["T_WHITESPACE"," ",2819],["T_STRING","null",2819],",",["T_WHITESPACE","\n            ",2819],["T_CONSTANT_ENCAPSED_STRING","'sneq'",2820],["T_WHITESPACE","          ",2820],["T_DOUBLE_ARROW","=>",2820],["T_WHITESPACE"," ",2820],["T_STRING","null",2820],",",["T_WHITESPACE","\n            ",2820],["T_CONSTANT_ENCAPSED_STRING","'ntoa'",2821],["T_WHITESPACE","          ",2821],["T_DOUBLE_ARROW","=>",2821],["T_WHITESPACE"," ",2821],["T_CONSTANT_ENCAPSED_STRING","\"INET_NTOA({{fieldName}}) LIKE ?\"",2821],",",["T_WHITESPACE","\n        ",2821],"]",";",["T_WHITESPACE","\n\n        ",2822],["T_VARIABLE","$query",2824],["T_WHITESPACE"," ",2824],"=",["T_WHITESPACE"," ",2824],["T_CONSTANT_ENCAPSED_STRING","''",2824],";",["T_WHITESPACE","\n        ",2824],["T_IF","if",2825],["T_WHITESPACE"," ",2825],"(",["T_STRING","is_array",2825],"(",["T_VARIABLE","$condition",2825],")",")",["T_WHITESPACE"," ",2825],"{",["T_WHITESPACE","\n            ",2825],["T_VARIABLE","$key",2826],["T_WHITESPACE"," ",2826],"=",["T_WHITESPACE"," ",2826],["T_STRING","key",2826],"(",["T_STRING","array_intersect_key",2826],"(",["T_VARIABLE","$condition",2826],",",["T_WHITESPACE"," ",2826],["T_VARIABLE","$conditionKeyMap",2826],")",")",";",["T_WHITESPACE","\n\n            ",2826],["T_IF","if",2828],["T_WHITESPACE"," ",2828],"(",["T_ISSET","isset",2828],"(",["T_VARIABLE","$condition",2828],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",2828],"]",")",["T_WHITESPACE"," ",2828],["T_BOOLEAN_OR","||",2828],["T_WHITESPACE"," ",2828],["T_ISSET","isset",2828],"(",["T_VARIABLE","$condition",2828],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",2828],"]",")",")",["T_WHITESPACE"," ",2828],"{",["T_WHITESPACE","\n                ",2828],["T_IF","if",2829],["T_WHITESPACE"," ",2829],"(",["T_ISSET","isset",2829],"(",["T_VARIABLE","$condition",2829],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",2829],"]",")",")",["T_WHITESPACE"," ",2829],"{",["T_WHITESPACE","\n                    ",2829],["T_VARIABLE","$from",2830],["T_WHITESPACE","  ",2830],"=",["T_WHITESPACE"," ",2830],["T_VARIABLE","$this",2830],["T_OBJECT_OPERATOR","->",2830],["T_STRING","_prepareSqlDateCondition",2830],"(",["T_VARIABLE","$condition",2830],",",["T_WHITESPACE"," ",2830],["T_CONSTANT_ENCAPSED_STRING","'from'",2830],")",";",["T_WHITESPACE","\n                    ",2830],["T_VARIABLE","$query",2831],["T_WHITESPACE"," ",2831],"=",["T_WHITESPACE"," ",2831],["T_VARIABLE","$this",2831],["T_OBJECT_OPERATOR","->",2831],["T_STRING","_prepareQuotedSqlCondition",2831],"(",["T_VARIABLE","$conditionKeyMap",2831],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",2831],"]",",",["T_WHITESPACE"," ",2831],["T_VARIABLE","$from",2831],",",["T_WHITESPACE"," ",2831],["T_VARIABLE","$fieldName",2831],")",";",["T_WHITESPACE","\n                ",2831],"}",["T_WHITESPACE","\n\n                ",2832],["T_IF","if",2834],["T_WHITESPACE"," ",2834],"(",["T_ISSET","isset",2834],"(",["T_VARIABLE","$condition",2834],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",2834],"]",")",")",["T_WHITESPACE"," ",2834],"{",["T_WHITESPACE","\n                    ",2834],["T_VARIABLE","$query",2835],["T_WHITESPACE"," ",2835],["T_CONCAT_EQUAL",".=",2835],["T_WHITESPACE"," ",2835],["T_EMPTY","empty",2835],"(",["T_VARIABLE","$query",2835],")",["T_WHITESPACE"," ",2835],"?",["T_WHITESPACE"," ",2835],["T_CONSTANT_ENCAPSED_STRING","''",2835],["T_WHITESPACE"," ",2835],":",["T_WHITESPACE"," ",2835],["T_CONSTANT_ENCAPSED_STRING","' AND '",2835],";",["T_WHITESPACE","\n                    ",2835],["T_VARIABLE","$to",2836],["T_WHITESPACE","     ",2836],"=",["T_WHITESPACE"," ",2836],["T_VARIABLE","$this",2836],["T_OBJECT_OPERATOR","->",2836],["T_STRING","_prepareSqlDateCondition",2836],"(",["T_VARIABLE","$condition",2836],",",["T_WHITESPACE"," ",2836],["T_CONSTANT_ENCAPSED_STRING","'to'",2836],")",";",["T_WHITESPACE","\n                    ",2836],["T_VARIABLE","$query",2837],["T_WHITESPACE"," ",2837],"=",["T_WHITESPACE"," ",2837],["T_VARIABLE","$this",2837],["T_OBJECT_OPERATOR","->",2837],["T_STRING","_prepareQuotedSqlCondition",2837],"(",["T_VARIABLE","$query",2837],["T_WHITESPACE"," ",2837],".",["T_WHITESPACE"," ",2837],["T_VARIABLE","$conditionKeyMap",2837],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",2837],"]",",",["T_WHITESPACE"," ",2837],["T_VARIABLE","$to",2837],",",["T_WHITESPACE"," ",2837],["T_VARIABLE","$fieldName",2837],")",";",["T_WHITESPACE","\n                ",2837],"}",["T_WHITESPACE","\n            ",2838],"}",["T_WHITESPACE"," ",2839],["T_ELSEIF","elseif",2839],["T_WHITESPACE"," ",2839],"(",["T_STRING","array_key_exists",2839],"(",["T_VARIABLE","$key",2839],",",["T_WHITESPACE"," ",2839],["T_VARIABLE","$conditionKeyMap",2839],")",")",["T_WHITESPACE"," ",2839],"{",["T_WHITESPACE","\n                ",2839],["T_VARIABLE","$value",2840],["T_WHITESPACE"," ",2840],"=",["T_WHITESPACE"," ",2840],["T_VARIABLE","$condition",2840],"[",["T_VARIABLE","$key",2840],"]",";",["T_WHITESPACE","\n                ",2840],["T_IF","if",2841],["T_WHITESPACE"," ",2841],"(","(",["T_VARIABLE","$key",2841],["T_WHITESPACE"," ",2841],["T_IS_EQUAL","==",2841],["T_WHITESPACE"," ",2841],["T_CONSTANT_ENCAPSED_STRING","'seq'",2841],")",["T_WHITESPACE"," ",2841],["T_BOOLEAN_OR","||",2841],["T_WHITESPACE"," ",2841],"(",["T_VARIABLE","$key",2841],["T_WHITESPACE"," ",2841],["T_IS_EQUAL","==",2841],["T_WHITESPACE"," ",2841],["T_CONSTANT_ENCAPSED_STRING","'sneq'",2841],")",")",["T_WHITESPACE"," ",2841],"{",["T_WHITESPACE","\n                    ",2841],["T_VARIABLE","$key",2842],["T_WHITESPACE"," ",2842],"=",["T_WHITESPACE"," ",2842],["T_VARIABLE","$this",2842],["T_OBJECT_OPERATOR","->",2842],["T_STRING","_transformStringSqlCondition",2842],"(",["T_VARIABLE","$key",2842],",",["T_WHITESPACE"," ",2842],["T_VARIABLE","$value",2842],")",";",["T_WHITESPACE","\n                ",2842],"}",["T_WHITESPACE","\n                ",2843],["T_IF","if",2844],["T_WHITESPACE"," ",2844],"(","(",["T_VARIABLE","$key",2844],["T_WHITESPACE"," ",2844],["T_IS_EQUAL","==",2844],["T_WHITESPACE"," ",2844],["T_CONSTANT_ENCAPSED_STRING","'in'",2844],["T_WHITESPACE"," ",2844],["T_BOOLEAN_OR","||",2844],["T_WHITESPACE"," ",2844],["T_VARIABLE","$key",2844],["T_WHITESPACE"," ",2844],["T_IS_EQUAL","==",2844],["T_WHITESPACE"," ",2844],["T_CONSTANT_ENCAPSED_STRING","'nin'",2844],")",["T_WHITESPACE"," ",2844],["T_BOOLEAN_AND","&&",2844],["T_WHITESPACE"," ",2844],["T_STRING","is_string",2844],"(",["T_VARIABLE","$value",2844],")",")",["T_WHITESPACE"," ",2844],"{",["T_WHITESPACE","\n                    ",2844],["T_VARIABLE","$value",2845],["T_WHITESPACE"," ",2845],"=",["T_WHITESPACE"," ",2845],["T_STRING","explode",2845],"(",["T_CONSTANT_ENCAPSED_STRING","','",2845],",",["T_WHITESPACE"," ",2845],["T_VARIABLE","$value",2845],")",";",["T_WHITESPACE","\n                ",2845],"}",["T_WHITESPACE","\n                ",2846],["T_VARIABLE","$query",2847],["T_WHITESPACE"," ",2847],"=",["T_WHITESPACE"," ",2847],["T_VARIABLE","$this",2847],["T_OBJECT_OPERATOR","->",2847],["T_STRING","_prepareQuotedSqlCondition",2847],"(",["T_VARIABLE","$conditionKeyMap",2847],"[",["T_VARIABLE","$key",2847],"]",",",["T_WHITESPACE"," ",2847],["T_VARIABLE","$value",2847],",",["T_WHITESPACE"," ",2847],["T_VARIABLE","$fieldName",2847],")",";",["T_WHITESPACE","\n            ",2847],"}",["T_WHITESPACE"," ",2848],["T_ELSE","else",2848],["T_WHITESPACE"," ",2848],"{",["T_WHITESPACE","\n                ",2848],["T_VARIABLE","$queries",2849],["T_WHITESPACE"," ",2849],"=",["T_WHITESPACE"," ",2849],"[","]",";",["T_WHITESPACE","\n                ",2849],["T_FOREACH","foreach",2850],["T_WHITESPACE"," ",2850],"(",["T_VARIABLE","$condition",2850],["T_WHITESPACE"," ",2850],["T_AS","as",2850],["T_WHITESPACE"," ",2850],["T_VARIABLE","$orCondition",2850],")",["T_WHITESPACE"," ",2850],"{",["T_WHITESPACE","\n                    ",2850],["T_VARIABLE","$queries",2851],"[","]",["T_WHITESPACE"," ",2851],"=",["T_WHITESPACE"," ",2851],["T_STRING","sprintf",2851],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",2851],",",["T_WHITESPACE"," ",2851],["T_VARIABLE","$this",2851],["T_OBJECT_OPERATOR","->",2851],["T_STRING","prepareSqlCondition",2851],"(",["T_VARIABLE","$fieldName",2851],",",["T_WHITESPACE"," ",2851],["T_VARIABLE","$orCondition",2851],")",")",";",["T_WHITESPACE","\n                ",2851],"}",["T_WHITESPACE","\n\n                ",2852],["T_VARIABLE","$query",2854],["T_WHITESPACE"," ",2854],"=",["T_WHITESPACE"," ",2854],["T_STRING","sprintf",2854],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",2854],",",["T_WHITESPACE"," ",2854],["T_STRING","implode",2854],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",2854],",",["T_WHITESPACE"," ",2854],["T_VARIABLE","$queries",2854],")",")",";",["T_WHITESPACE","\n            ",2854],"}",["T_WHITESPACE","\n        ",2855],"}",["T_WHITESPACE"," ",2856],["T_ELSE","else",2856],["T_WHITESPACE"," ",2856],"{",["T_WHITESPACE","\n            ",2856],["T_VARIABLE","$query",2857],["T_WHITESPACE"," ",2857],"=",["T_WHITESPACE"," ",2857],["T_VARIABLE","$this",2857],["T_OBJECT_OPERATOR","->",2857],["T_STRING","_prepareQuotedSqlCondition",2857],"(",["T_VARIABLE","$conditionKeyMap",2857],"[",["T_CONSTANT_ENCAPSED_STRING","'eq'",2857],"]",",",["T_WHITESPACE"," ",2857],["T_STRING_CAST","(string)",2857],["T_VARIABLE","$condition",2857],",",["T_WHITESPACE"," ",2857],["T_VARIABLE","$fieldName",2857],")",";",["T_WHITESPACE","\n        ",2857],"}",["T_WHITESPACE","\n\n        ",2858],["T_RETURN","return",2860],["T_WHITESPACE"," ",2860],["T_VARIABLE","$query",2860],";",["T_WHITESPACE","\n    ",2860],"}",["T_WHITESPACE","\n\n    ",2861],["T_DOC_COMMENT","\/**\n     * Prepare Sql condition\n     *\n     * @param  string $text Condition value\n     * @param  mixed $value\n     * @param  string $fieldName\n     * @return string\n     *\/",2863],["T_WHITESPACE","\n    ",2870],["T_PROTECTED","protected",2871],["T_WHITESPACE"," ",2871],["T_FUNCTION","function",2871],["T_WHITESPACE"," ",2871],["T_STRING","_prepareQuotedSqlCondition",2871],"(",["T_VARIABLE","$text",2871],",",["T_WHITESPACE"," ",2871],["T_VARIABLE","$value",2871],",",["T_WHITESPACE"," ",2871],["T_VARIABLE","$fieldName",2871],")",["T_WHITESPACE","\n    ",2871],"{",["T_WHITESPACE","\n        ",2872],["T_VARIABLE","$sql",2873],["T_WHITESPACE"," ",2873],"=",["T_WHITESPACE"," ",2873],["T_VARIABLE","$this",2873],["T_OBJECT_OPERATOR","->",2873],["T_STRING","quoteInto",2873],"(",["T_VARIABLE","$text",2873],",",["T_WHITESPACE"," ",2873],["T_VARIABLE","$value",2873],")",";",["T_WHITESPACE","\n        ",2873],["T_VARIABLE","$sql",2874],["T_WHITESPACE"," ",2874],"=",["T_WHITESPACE"," ",2874],["T_STRING","str_replace",2874],"(",["T_CONSTANT_ENCAPSED_STRING","'{{fieldName}}'",2874],",",["T_WHITESPACE"," ",2874],["T_VARIABLE","$fieldName",2874],",",["T_WHITESPACE"," ",2874],["T_VARIABLE","$sql",2874],")",";",["T_WHITESPACE","\n        ",2874],["T_RETURN","return",2875],["T_WHITESPACE"," ",2875],["T_VARIABLE","$sql",2875],";",["T_WHITESPACE","\n    ",2875],"}",["T_WHITESPACE","\n\n    ",2876],["T_DOC_COMMENT","\/**\n     * Transforms sql condition key 'seq' \/ 'sneq' that is used for comparing string values to its analog:\n     * - 'null' \/ 'notnull' for empty strings\n     * - 'eq' \/ 'neq' for non-empty strings\n     *\n     * @param string $conditionKey\n     * @param mixed $value\n     * @return string\n     *\/",2878],["T_WHITESPACE","\n    ",2886],["T_PROTECTED","protected",2887],["T_WHITESPACE"," ",2887],["T_FUNCTION","function",2887],["T_WHITESPACE"," ",2887],["T_STRING","_transformStringSqlCondition",2887],"(",["T_VARIABLE","$conditionKey",2887],",",["T_WHITESPACE"," ",2887],["T_VARIABLE","$value",2887],")",["T_WHITESPACE","\n    ",2887],"{",["T_WHITESPACE","\n        ",2888],["T_VARIABLE","$value",2889],["T_WHITESPACE"," ",2889],"=",["T_WHITESPACE"," ",2889],["T_STRING_CAST","(string)",2889],["T_WHITESPACE"," ",2889],["T_VARIABLE","$value",2889],";",["T_WHITESPACE","\n        ",2889],["T_IF","if",2890],["T_WHITESPACE"," ",2890],"(",["T_VARIABLE","$value",2890],["T_WHITESPACE"," ",2890],["T_IS_EQUAL","==",2890],["T_WHITESPACE"," ",2890],["T_CONSTANT_ENCAPSED_STRING","''",2890],")",["T_WHITESPACE"," ",2890],"{",["T_WHITESPACE","\n            ",2890],["T_RETURN","return",2891],["T_WHITESPACE"," ",2891],"(",["T_VARIABLE","$conditionKey",2891],["T_WHITESPACE"," ",2891],["T_IS_EQUAL","==",2891],["T_WHITESPACE"," ",2891],["T_CONSTANT_ENCAPSED_STRING","'seq'",2891],")",["T_WHITESPACE"," ",2891],"?",["T_WHITESPACE"," ",2891],["T_CONSTANT_ENCAPSED_STRING","'null'",2891],["T_WHITESPACE"," ",2891],":",["T_WHITESPACE"," ",2891],["T_CONSTANT_ENCAPSED_STRING","'notnull'",2891],";",["T_WHITESPACE","\n        ",2891],"}",["T_WHITESPACE"," ",2892],["T_ELSE","else",2892],["T_WHITESPACE"," ",2892],"{",["T_WHITESPACE","\n            ",2892],["T_RETURN","return",2893],["T_WHITESPACE"," ",2893],"(",["T_VARIABLE","$conditionKey",2893],["T_WHITESPACE"," ",2893],["T_IS_EQUAL","==",2893],["T_WHITESPACE"," ",2893],["T_CONSTANT_ENCAPSED_STRING","'seq'",2893],")",["T_WHITESPACE"," ",2893],"?",["T_WHITESPACE"," ",2893],["T_CONSTANT_ENCAPSED_STRING","'eq'",2893],["T_WHITESPACE"," ",2893],":",["T_WHITESPACE"," ",2893],["T_CONSTANT_ENCAPSED_STRING","'neq'",2893],";",["T_WHITESPACE","\n        ",2893],"}",["T_WHITESPACE","\n    ",2894],"}",["T_WHITESPACE","\n\n    ",2895],["T_DOC_COMMENT","\/**\n     * Prepare value for save in column\n     * Return converted to column data type value\n     *\n     * @param array $column     the column describe array\n     * @param mixed $value\n     * @return mixed\n     *\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",2897],["T_WHITESPACE","\n    ",2907],["T_PUBLIC","public",2908],["T_WHITESPACE"," ",2908],["T_FUNCTION","function",2908],["T_WHITESPACE"," ",2908],["T_STRING","prepareColumnValue",2908],"(",["T_ARRAY","array",2908],["T_WHITESPACE"," ",2908],["T_VARIABLE","$column",2908],",",["T_WHITESPACE"," ",2908],["T_VARIABLE","$value",2908],")",["T_WHITESPACE","\n    ",2908],"{",["T_WHITESPACE","\n        ",2909],["T_IF","if",2910],["T_WHITESPACE"," ",2910],"(",["T_VARIABLE","$value",2910],["T_WHITESPACE"," ",2910],["T_INSTANCEOF","instanceof",2910],["T_WHITESPACE"," ",2910],["T_NS_SEPARATOR","\\",2910],["T_STRING","Zend_Db_Expr",2910],")",["T_WHITESPACE"," ",2910],"{",["T_WHITESPACE","\n            ",2910],["T_RETURN","return",2911],["T_WHITESPACE"," ",2911],["T_VARIABLE","$value",2911],";",["T_WHITESPACE","\n        ",2911],"}",["T_WHITESPACE","\n        ",2912],["T_IF","if",2913],["T_WHITESPACE"," ",2913],"(",["T_VARIABLE","$value",2913],["T_WHITESPACE"," ",2913],["T_INSTANCEOF","instanceof",2913],["T_WHITESPACE"," ",2913],["T_STRING","Parameter",2913],")",["T_WHITESPACE"," ",2913],"{",["T_WHITESPACE","\n            ",2913],["T_RETURN","return",2914],["T_WHITESPACE"," ",2914],["T_VARIABLE","$value",2914],";",["T_WHITESPACE","\n        ",2914],"}",["T_WHITESPACE","\n\n        ",2915],["T_COMMENT","\/\/ return original value if invalid column describe data\n",2917],["T_WHITESPACE","        ",2918],["T_IF","if",2918],["T_WHITESPACE"," ",2918],"(","!",["T_ISSET","isset",2918],"(",["T_VARIABLE","$column",2918],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",2918],"]",")",")",["T_WHITESPACE"," ",2918],"{",["T_WHITESPACE","\n            ",2918],["T_RETURN","return",2919],["T_WHITESPACE"," ",2919],["T_VARIABLE","$value",2919],";",["T_WHITESPACE","\n        ",2919],"}",["T_WHITESPACE","\n\n        ",2920],["T_COMMENT","\/\/ return null\n",2922],["T_WHITESPACE","        ",2923],["T_IF","if",2923],["T_WHITESPACE"," ",2923],"(",["T_STRING","is_null",2923],"(",["T_VARIABLE","$value",2923],")",["T_WHITESPACE"," ",2923],["T_BOOLEAN_AND","&&",2923],["T_WHITESPACE"," ",2923],["T_VARIABLE","$column",2923],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",2923],"]",")",["T_WHITESPACE"," ",2923],"{",["T_WHITESPACE","\n            ",2923],["T_RETURN","return",2924],["T_WHITESPACE"," ",2924],["T_STRING","null",2924],";",["T_WHITESPACE","\n        ",2924],"}",["T_WHITESPACE","\n\n        ",2925],["T_SWITCH","switch",2927],["T_WHITESPACE"," ",2927],"(",["T_VARIABLE","$column",2927],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",2927],"]",")",["T_WHITESPACE"," ",2927],"{",["T_WHITESPACE","\n            ",2927],["T_CASE","case",2928],["T_WHITESPACE"," ",2928],["T_CONSTANT_ENCAPSED_STRING","'smallint'",2928],":",["T_WHITESPACE","\n            ",2928],["T_CASE","case",2929],["T_WHITESPACE"," ",2929],["T_CONSTANT_ENCAPSED_STRING","'int'",2929],":",["T_WHITESPACE","\n                ",2929],["T_VARIABLE","$value",2930],["T_WHITESPACE"," ",2930],"=",["T_WHITESPACE"," ",2930],["T_INT_CAST","(int)",2930],["T_VARIABLE","$value",2930],";",["T_WHITESPACE","\n                ",2930],["T_BREAK","break",2931],";",["T_WHITESPACE","\n            ",2931],["T_CASE","case",2932],["T_WHITESPACE"," ",2932],["T_CONSTANT_ENCAPSED_STRING","'bigint'",2932],":",["T_WHITESPACE","\n                ",2932],["T_IF","if",2933],["T_WHITESPACE"," ",2933],"(","!",["T_STRING","is_integer",2933],"(",["T_VARIABLE","$value",2933],")",")",["T_WHITESPACE"," ",2933],"{",["T_WHITESPACE","\n                    ",2933],["T_VARIABLE","$value",2934],["T_WHITESPACE"," ",2934],"=",["T_WHITESPACE"," ",2934],["T_STRING","sprintf",2934],"(",["T_CONSTANT_ENCAPSED_STRING","'%.0f'",2934],",",["T_WHITESPACE"," ",2934],["T_DOUBLE_CAST","(float)",2934],["T_VARIABLE","$value",2934],")",";",["T_WHITESPACE","\n                ",2934],"}",["T_WHITESPACE","\n                ",2935],["T_BREAK","break",2936],";",["T_WHITESPACE","\n\n            ",2936],["T_CASE","case",2938],["T_WHITESPACE"," ",2938],["T_CONSTANT_ENCAPSED_STRING","'decimal'",2938],":",["T_WHITESPACE","\n                ",2938],["T_VARIABLE","$precision",2939],["T_WHITESPACE","  ",2939],"=",["T_WHITESPACE"," ",2939],["T_LNUMBER","10",2939],";",["T_WHITESPACE","\n                ",2939],["T_VARIABLE","$scale",2940],["T_WHITESPACE","      ",2940],"=",["T_WHITESPACE"," ",2940],["T_LNUMBER","0",2940],";",["T_WHITESPACE","\n                ",2940],["T_IF","if",2941],["T_WHITESPACE"," ",2941],"(",["T_ISSET","isset",2941],"(",["T_VARIABLE","$column",2941],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",2941],"]",")",")",["T_WHITESPACE"," ",2941],"{",["T_WHITESPACE","\n                    ",2941],["T_VARIABLE","$scale",2942],["T_WHITESPACE"," ",2942],"=",["T_WHITESPACE"," ",2942],["T_VARIABLE","$column",2942],"[",["T_CONSTANT_ENCAPSED_STRING","'SCALE'",2942],"]",";",["T_WHITESPACE","\n                ",2942],"}",["T_WHITESPACE","\n                ",2943],["T_IF","if",2944],["T_WHITESPACE"," ",2944],"(",["T_ISSET","isset",2944],"(",["T_VARIABLE","$column",2944],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",2944],"]",")",")",["T_WHITESPACE"," ",2944],"{",["T_WHITESPACE","\n                    ",2944],["T_VARIABLE","$precision",2945],["T_WHITESPACE"," ",2945],"=",["T_WHITESPACE"," ",2945],["T_VARIABLE","$column",2945],"[",["T_CONSTANT_ENCAPSED_STRING","'PRECISION'",2945],"]",";",["T_WHITESPACE","\n                ",2945],"}",["T_WHITESPACE","\n                ",2946],["T_VARIABLE","$format",2947],["T_WHITESPACE"," ",2947],"=",["T_WHITESPACE"," ",2947],["T_STRING","sprintf",2947],"(",["T_CONSTANT_ENCAPSED_STRING","'%%%d.%dF'",2947],",",["T_WHITESPACE"," ",2947],["T_VARIABLE","$precision",2947],["T_WHITESPACE"," ",2947],"-",["T_WHITESPACE"," ",2947],["T_VARIABLE","$scale",2947],",",["T_WHITESPACE"," ",2947],["T_VARIABLE","$scale",2947],")",";",["T_WHITESPACE","\n                ",2947],["T_VARIABLE","$value",2948],["T_WHITESPACE","  ",2948],"=",["T_WHITESPACE"," ",2948],["T_DOUBLE_CAST","(float)",2948],["T_STRING","sprintf",2948],"(",["T_VARIABLE","$format",2948],",",["T_WHITESPACE"," ",2948],["T_VARIABLE","$value",2948],")",";",["T_WHITESPACE","\n                ",2948],["T_BREAK","break",2949],";",["T_WHITESPACE","\n\n            ",2949],["T_CASE","case",2951],["T_WHITESPACE"," ",2951],["T_CONSTANT_ENCAPSED_STRING","'float'",2951],":",["T_WHITESPACE","\n                ",2951],["T_VARIABLE","$value",2952],["T_WHITESPACE","  ",2952],"=",["T_WHITESPACE"," ",2952],["T_DOUBLE_CAST","(float)",2952],["T_STRING","sprintf",2952],"(",["T_CONSTANT_ENCAPSED_STRING","'%F'",2952],",",["T_WHITESPACE"," ",2952],["T_VARIABLE","$value",2952],")",";",["T_WHITESPACE","\n                ",2952],["T_BREAK","break",2953],";",["T_WHITESPACE","\n\n            ",2953],["T_CASE","case",2955],["T_WHITESPACE"," ",2955],["T_CONSTANT_ENCAPSED_STRING","'date'",2955],":",["T_WHITESPACE","\n                ",2955],["T_VARIABLE","$value",2956],["T_WHITESPACE","  ",2956],"=",["T_WHITESPACE"," ",2956],["T_VARIABLE","$this",2956],["T_OBJECT_OPERATOR","->",2956],["T_STRING","formatDate",2956],"(",["T_VARIABLE","$value",2956],",",["T_WHITESPACE"," ",2956],["T_STRING","false",2956],")",";",["T_WHITESPACE","\n                ",2956],["T_BREAK","break",2957],";",["T_WHITESPACE","\n            ",2957],["T_CASE","case",2958],["T_WHITESPACE"," ",2958],["T_CONSTANT_ENCAPSED_STRING","'datetime'",2958],":",["T_WHITESPACE","\n            ",2958],["T_CASE","case",2959],["T_WHITESPACE"," ",2959],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",2959],":",["T_WHITESPACE","\n                ",2959],["T_VARIABLE","$value",2960],["T_WHITESPACE","  ",2960],"=",["T_WHITESPACE"," ",2960],["T_VARIABLE","$this",2960],["T_OBJECT_OPERATOR","->",2960],["T_STRING","formatDate",2960],"(",["T_VARIABLE","$value",2960],")",";",["T_WHITESPACE","\n                ",2960],["T_BREAK","break",2961],";",["T_WHITESPACE","\n\n            ",2961],["T_CASE","case",2963],["T_WHITESPACE"," ",2963],["T_CONSTANT_ENCAPSED_STRING","'varchar'",2963],":",["T_WHITESPACE","\n            ",2963],["T_CASE","case",2964],["T_WHITESPACE"," ",2964],["T_CONSTANT_ENCAPSED_STRING","'mediumtext'",2964],":",["T_WHITESPACE","\n            ",2964],["T_CASE","case",2965],["T_WHITESPACE"," ",2965],["T_CONSTANT_ENCAPSED_STRING","'text'",2965],":",["T_WHITESPACE","\n            ",2965],["T_CASE","case",2966],["T_WHITESPACE"," ",2966],["T_CONSTANT_ENCAPSED_STRING","'longtext'",2966],":",["T_WHITESPACE","\n                ",2966],["T_VARIABLE","$value",2967],["T_WHITESPACE","  ",2967],"=",["T_WHITESPACE"," ",2967],["T_STRING_CAST","(string)",2967],["T_VARIABLE","$value",2967],";",["T_WHITESPACE","\n                ",2967],["T_IF","if",2968],["T_WHITESPACE"," ",2968],"(",["T_VARIABLE","$column",2968],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",2968],"]",["T_WHITESPACE"," ",2968],["T_BOOLEAN_AND","&&",2968],["T_WHITESPACE"," ",2968],["T_VARIABLE","$value",2968],["T_WHITESPACE"," ",2968],["T_IS_EQUAL","==",2968],["T_WHITESPACE"," ",2968],["T_CONSTANT_ENCAPSED_STRING","''",2968],")",["T_WHITESPACE"," ",2968],"{",["T_WHITESPACE","\n                    ",2968],["T_VARIABLE","$value",2969],["T_WHITESPACE"," ",2969],"=",["T_WHITESPACE"," ",2969],["T_STRING","null",2969],";",["T_WHITESPACE","\n                ",2969],"}",["T_WHITESPACE","\n                ",2970],["T_BREAK","break",2971],";",["T_WHITESPACE","\n\n            ",2971],["T_CASE","case",2973],["T_WHITESPACE"," ",2973],["T_CONSTANT_ENCAPSED_STRING","'varbinary'",2973],":",["T_WHITESPACE","\n            ",2973],["T_CASE","case",2974],["T_WHITESPACE"," ",2974],["T_CONSTANT_ENCAPSED_STRING","'mediumblob'",2974],":",["T_WHITESPACE","\n            ",2974],["T_CASE","case",2975],["T_WHITESPACE"," ",2975],["T_CONSTANT_ENCAPSED_STRING","'blob'",2975],":",["T_WHITESPACE","\n            ",2975],["T_CASE","case",2976],["T_WHITESPACE"," ",2976],["T_CONSTANT_ENCAPSED_STRING","'longblob'",2976],":",["T_WHITESPACE","\n                ",2976],["T_COMMENT","\/\/ No special processing for MySQL is needed\n",2977],["T_WHITESPACE","                ",2978],["T_BREAK","break",2978],";",["T_WHITESPACE","\n        ",2978],"}",["T_WHITESPACE","\n\n        ",2979],["T_RETURN","return",2981],["T_WHITESPACE"," ",2981],["T_VARIABLE","$value",2981],";",["T_WHITESPACE","\n    ",2981],"}",["T_WHITESPACE","\n\n    ",2982],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that check condition and return true or false value\n     *\n     * @param \\Zend_Db_Expr|\\Magento\\Framework\\DB\\Select|string $expression\n     * @param string $true  true value\n     * @param string $false false value\n     * @return \\Zend_Db_Expr\n     *\/",2984],["T_WHITESPACE","\n    ",2991],["T_PUBLIC","public",2992],["T_WHITESPACE"," ",2992],["T_FUNCTION","function",2992],["T_WHITESPACE"," ",2992],["T_STRING","getCheckSql",2992],"(",["T_VARIABLE","$expression",2992],",",["T_WHITESPACE"," ",2992],["T_VARIABLE","$true",2992],",",["T_WHITESPACE"," ",2992],["T_VARIABLE","$false",2992],")",["T_WHITESPACE","\n    ",2992],"{",["T_WHITESPACE","\n        ",2993],["T_IF","if",2994],["T_WHITESPACE"," ",2994],"(",["T_VARIABLE","$expression",2994],["T_WHITESPACE"," ",2994],["T_INSTANCEOF","instanceof",2994],["T_WHITESPACE"," ",2994],["T_NS_SEPARATOR","\\",2994],["T_STRING","Zend_Db_Expr",2994],["T_WHITESPACE"," ",2994],["T_BOOLEAN_OR","||",2994],["T_WHITESPACE"," ",2994],["T_VARIABLE","$expression",2994],["T_WHITESPACE"," ",2994],["T_INSTANCEOF","instanceof",2994],["T_WHITESPACE"," ",2994],["T_NS_SEPARATOR","\\",2994],["T_STRING","Zend_Db_Select",2994],")",["T_WHITESPACE"," ",2994],"{",["T_WHITESPACE","\n            ",2994],["T_VARIABLE","$expression",2995],["T_WHITESPACE"," ",2995],"=",["T_WHITESPACE"," ",2995],["T_STRING","sprintf",2995],"(",["T_CONSTANT_ENCAPSED_STRING","\"IF((%s), %s, %s)\"",2995],",",["T_WHITESPACE"," ",2995],["T_VARIABLE","$expression",2995],",",["T_WHITESPACE"," ",2995],["T_VARIABLE","$true",2995],",",["T_WHITESPACE"," ",2995],["T_VARIABLE","$false",2995],")",";",["T_WHITESPACE","\n        ",2995],"}",["T_WHITESPACE"," ",2996],["T_ELSE","else",2996],["T_WHITESPACE"," ",2996],"{",["T_WHITESPACE","\n            ",2996],["T_VARIABLE","$expression",2997],["T_WHITESPACE"," ",2997],"=",["T_WHITESPACE"," ",2997],["T_STRING","sprintf",2997],"(",["T_CONSTANT_ENCAPSED_STRING","\"IF(%s, %s, %s)\"",2997],",",["T_WHITESPACE"," ",2997],["T_VARIABLE","$expression",2997],",",["T_WHITESPACE"," ",2997],["T_VARIABLE","$true",2997],",",["T_WHITESPACE"," ",2997],["T_VARIABLE","$false",2997],")",";",["T_WHITESPACE","\n        ",2997],"}",["T_WHITESPACE","\n\n        ",2998],["T_RETURN","return",3000],["T_WHITESPACE"," ",3000],["T_NEW","new",3000],["T_WHITESPACE"," ",3000],["T_NS_SEPARATOR","\\",3000],["T_STRING","Zend_Db_Expr",3000],"(",["T_VARIABLE","$expression",3000],")",";",["T_WHITESPACE","\n    ",3000],"}",["T_WHITESPACE","\n\n    ",3001],["T_DOC_COMMENT","\/**\n     * Returns valid IFNULL expression\n     *\n     * @param \\Zend_Db_Expr|\\Magento\\Framework\\DB\\Select|string $expression\n     * @param string|int $value OPTIONAL. Applies when $expression is NULL\n     * @return \\Zend_Db_Expr\n     *\/",3003],["T_WHITESPACE","\n    ",3009],["T_PUBLIC","public",3010],["T_WHITESPACE"," ",3010],["T_FUNCTION","function",3010],["T_WHITESPACE"," ",3010],["T_STRING","getIfNullSql",3010],"(",["T_VARIABLE","$expression",3010],",",["T_WHITESPACE"," ",3010],["T_VARIABLE","$value",3010],["T_WHITESPACE"," ",3010],"=",["T_WHITESPACE"," ",3010],["T_LNUMBER","0",3010],")",["T_WHITESPACE","\n    ",3010],"{",["T_WHITESPACE","\n        ",3011],["T_IF","if",3012],["T_WHITESPACE"," ",3012],"(",["T_VARIABLE","$expression",3012],["T_WHITESPACE"," ",3012],["T_INSTANCEOF","instanceof",3012],["T_WHITESPACE"," ",3012],["T_NS_SEPARATOR","\\",3012],["T_STRING","Zend_Db_Expr",3012],["T_WHITESPACE"," ",3012],["T_BOOLEAN_OR","||",3012],["T_WHITESPACE"," ",3012],["T_VARIABLE","$expression",3012],["T_WHITESPACE"," ",3012],["T_INSTANCEOF","instanceof",3012],["T_WHITESPACE"," ",3012],["T_NS_SEPARATOR","\\",3012],["T_STRING","Zend_Db_Select",3012],")",["T_WHITESPACE"," ",3012],"{",["T_WHITESPACE","\n            ",3012],["T_VARIABLE","$expression",3013],["T_WHITESPACE"," ",3013],"=",["T_WHITESPACE"," ",3013],["T_STRING","sprintf",3013],"(",["T_CONSTANT_ENCAPSED_STRING","\"IFNULL((%s), %s)\"",3013],",",["T_WHITESPACE"," ",3013],["T_VARIABLE","$expression",3013],",",["T_WHITESPACE"," ",3013],["T_VARIABLE","$value",3013],")",";",["T_WHITESPACE","\n        ",3013],"}",["T_WHITESPACE"," ",3014],["T_ELSE","else",3014],["T_WHITESPACE"," ",3014],"{",["T_WHITESPACE","\n            ",3014],["T_VARIABLE","$expression",3015],["T_WHITESPACE"," ",3015],"=",["T_WHITESPACE"," ",3015],["T_STRING","sprintf",3015],"(",["T_CONSTANT_ENCAPSED_STRING","\"IFNULL(%s, %s)\"",3015],",",["T_WHITESPACE"," ",3015],["T_VARIABLE","$expression",3015],",",["T_WHITESPACE"," ",3015],["T_VARIABLE","$value",3015],")",";",["T_WHITESPACE","\n        ",3015],"}",["T_WHITESPACE","\n\n        ",3016],["T_RETURN","return",3018],["T_WHITESPACE"," ",3018],["T_NEW","new",3018],["T_WHITESPACE"," ",3018],["T_NS_SEPARATOR","\\",3018],["T_STRING","Zend_Db_Expr",3018],"(",["T_VARIABLE","$expression",3018],")",";",["T_WHITESPACE","\n    ",3018],"}",["T_WHITESPACE","\n\n    ",3019],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that check value against multiple condition cases\n     * and return different result depends on them\n     *\n     * @param string $valueName Name of value to check\n     * @param array $casesResults Cases and results\n     * @param string $defaultValue value to use if value doesn't confirm to any cases\n     * @return \\Zend_Db_Expr\n     *\/",3021],["T_WHITESPACE","\n    ",3029],["T_PUBLIC","public",3030],["T_WHITESPACE"," ",3030],["T_FUNCTION","function",3030],["T_WHITESPACE"," ",3030],["T_STRING","getCaseSql",3030],"(",["T_VARIABLE","$valueName",3030],",",["T_WHITESPACE"," ",3030],["T_VARIABLE","$casesResults",3030],",",["T_WHITESPACE"," ",3030],["T_VARIABLE","$defaultValue",3030],["T_WHITESPACE"," ",3030],"=",["T_WHITESPACE"," ",3030],["T_STRING","null",3030],")",["T_WHITESPACE","\n    ",3030],"{",["T_WHITESPACE","\n        ",3031],["T_VARIABLE","$expression",3032],["T_WHITESPACE"," ",3032],"=",["T_WHITESPACE"," ",3032],["T_CONSTANT_ENCAPSED_STRING","'CASE '",3032],["T_WHITESPACE"," ",3032],".",["T_WHITESPACE"," ",3032],["T_VARIABLE","$valueName",3032],";",["T_WHITESPACE","\n        ",3032],["T_FOREACH","foreach",3033],["T_WHITESPACE"," ",3033],"(",["T_VARIABLE","$casesResults",3033],["T_WHITESPACE"," ",3033],["T_AS","as",3033],["T_WHITESPACE"," ",3033],["T_VARIABLE","$case",3033],["T_WHITESPACE"," ",3033],["T_DOUBLE_ARROW","=>",3033],["T_WHITESPACE"," ",3033],["T_VARIABLE","$result",3033],")",["T_WHITESPACE"," ",3033],"{",["T_WHITESPACE","\n            ",3033],["T_VARIABLE","$expression",3034],["T_WHITESPACE"," ",3034],["T_CONCAT_EQUAL",".=",3034],["T_WHITESPACE"," ",3034],["T_CONSTANT_ENCAPSED_STRING","' WHEN '",3034],["T_WHITESPACE"," ",3034],".",["T_WHITESPACE"," ",3034],["T_VARIABLE","$case",3034],["T_WHITESPACE"," ",3034],".",["T_WHITESPACE"," ",3034],["T_CONSTANT_ENCAPSED_STRING","' THEN '",3034],["T_WHITESPACE"," ",3034],".",["T_WHITESPACE"," ",3034],["T_VARIABLE","$result",3034],";",["T_WHITESPACE","\n        ",3034],"}",["T_WHITESPACE","\n        ",3035],["T_IF","if",3036],["T_WHITESPACE"," ",3036],"(",["T_VARIABLE","$defaultValue",3036],["T_WHITESPACE"," ",3036],["T_IS_NOT_IDENTICAL","!==",3036],["T_WHITESPACE"," ",3036],["T_STRING","null",3036],")",["T_WHITESPACE"," ",3036],"{",["T_WHITESPACE","\n            ",3036],["T_VARIABLE","$expression",3037],["T_WHITESPACE"," ",3037],["T_CONCAT_EQUAL",".=",3037],["T_WHITESPACE"," ",3037],["T_CONSTANT_ENCAPSED_STRING","' ELSE '",3037],["T_WHITESPACE"," ",3037],".",["T_WHITESPACE"," ",3037],["T_VARIABLE","$defaultValue",3037],";",["T_WHITESPACE","\n        ",3037],"}",["T_WHITESPACE","\n        ",3038],["T_VARIABLE","$expression",3039],["T_WHITESPACE"," ",3039],["T_CONCAT_EQUAL",".=",3039],["T_WHITESPACE"," ",3039],["T_CONSTANT_ENCAPSED_STRING","' END'",3039],";",["T_WHITESPACE","\n\n        ",3039],["T_RETURN","return",3041],["T_WHITESPACE"," ",3041],["T_NEW","new",3041],["T_WHITESPACE"," ",3041],["T_NS_SEPARATOR","\\",3041],["T_STRING","Zend_Db_Expr",3041],"(",["T_VARIABLE","$expression",3041],")",";",["T_WHITESPACE","\n    ",3041],"}",["T_WHITESPACE","\n\n    ",3042],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that combine together (concatenate) the results from data array\n     * All arguments in data must be quoted\n     *\n     * @param string[] $data\n     * @param string $separator concatenate with separator\n     * @return \\Zend_Db_Expr\n     *\/",3044],["T_WHITESPACE","\n    ",3051],["T_PUBLIC","public",3052],["T_WHITESPACE"," ",3052],["T_FUNCTION","function",3052],["T_WHITESPACE"," ",3052],["T_STRING","getConcatSql",3052],"(",["T_ARRAY","array",3052],["T_WHITESPACE"," ",3052],["T_VARIABLE","$data",3052],",",["T_WHITESPACE"," ",3052],["T_VARIABLE","$separator",3052],["T_WHITESPACE"," ",3052],"=",["T_WHITESPACE"," ",3052],["T_STRING","null",3052],")",["T_WHITESPACE","\n    ",3052],"{",["T_WHITESPACE","\n        ",3053],["T_VARIABLE","$format",3054],["T_WHITESPACE"," ",3054],"=",["T_WHITESPACE"," ",3054],["T_EMPTY","empty",3054],"(",["T_VARIABLE","$separator",3054],")",["T_WHITESPACE"," ",3054],"?",["T_WHITESPACE"," ",3054],["T_CONSTANT_ENCAPSED_STRING","'CONCAT(%s)'",3054],["T_WHITESPACE"," ",3054],":",["T_WHITESPACE"," ",3054],"\"",["T_ENCAPSED_AND_WHITESPACE","CONCAT_WS('",3054],["T_CURLY_OPEN","{",3054],["T_VARIABLE","$separator",3054],"}",["T_ENCAPSED_AND_WHITESPACE","', %s)",3054],"\"",";",["T_WHITESPACE","\n        ",3054],["T_RETURN","return",3055],["T_WHITESPACE"," ",3055],["T_NEW","new",3055],["T_WHITESPACE"," ",3055],["T_NS_SEPARATOR","\\",3055],["T_STRING","Zend_Db_Expr",3055],"(",["T_STRING","sprintf",3055],"(",["T_VARIABLE","$format",3055],",",["T_WHITESPACE"," ",3055],["T_STRING","implode",3055],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3055],",",["T_WHITESPACE"," ",3055],["T_VARIABLE","$data",3055],")",")",")",";",["T_WHITESPACE","\n    ",3055],"}",["T_WHITESPACE","\n\n    ",3056],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL that returns length of character string\n     * The string argument must be quoted\n     *\n     * @param string $string\n     * @return \\Zend_Db_Expr\n     *\/",3058],["T_WHITESPACE","\n    ",3064],["T_PUBLIC","public",3065],["T_WHITESPACE"," ",3065],["T_FUNCTION","function",3065],["T_WHITESPACE"," ",3065],["T_STRING","getLengthSql",3065],"(",["T_VARIABLE","$string",3065],")",["T_WHITESPACE","\n    ",3065],"{",["T_WHITESPACE","\n        ",3066],["T_RETURN","return",3067],["T_WHITESPACE"," ",3067],["T_NEW","new",3067],["T_WHITESPACE"," ",3067],["T_NS_SEPARATOR","\\",3067],["T_STRING","Zend_Db_Expr",3067],"(",["T_STRING","sprintf",3067],"(",["T_CONSTANT_ENCAPSED_STRING","'LENGTH(%s)'",3067],",",["T_WHITESPACE"," ",3067],["T_VARIABLE","$string",3067],")",")",";",["T_WHITESPACE","\n    ",3067],"}",["T_WHITESPACE","\n\n    ",3068],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that compare with two or more arguments, and returns the smallest\n     * (minimum-valued) argument\n     * All arguments in data must be quoted\n     *\n     * @param string[] $data\n     * @return \\Zend_Db_Expr\n     *\/",3070],["T_WHITESPACE","\n    ",3077],["T_PUBLIC","public",3078],["T_WHITESPACE"," ",3078],["T_FUNCTION","function",3078],["T_WHITESPACE"," ",3078],["T_STRING","getLeastSql",3078],"(",["T_ARRAY","array",3078],["T_WHITESPACE"," ",3078],["T_VARIABLE","$data",3078],")",["T_WHITESPACE","\n    ",3078],"{",["T_WHITESPACE","\n        ",3079],["T_RETURN","return",3080],["T_WHITESPACE"," ",3080],["T_NEW","new",3080],["T_WHITESPACE"," ",3080],["T_NS_SEPARATOR","\\",3080],["T_STRING","Zend_Db_Expr",3080],"(",["T_STRING","sprintf",3080],"(",["T_CONSTANT_ENCAPSED_STRING","'LEAST(%s)'",3080],",",["T_WHITESPACE"," ",3080],["T_STRING","implode",3080],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3080],",",["T_WHITESPACE"," ",3080],["T_VARIABLE","$data",3080],")",")",")",";",["T_WHITESPACE","\n    ",3080],"}",["T_WHITESPACE","\n\n    ",3081],["T_DOC_COMMENT","\/**\n     * Generate fragment of SQL, that compare with two or more arguments, and returns the largest\n     * (maximum-valued) argument\n     * All arguments in data must be quoted\n     *\n     * @param string[] $data\n     * @return \\Zend_Db_Expr\n     *\/",3083],["T_WHITESPACE","\n    ",3090],["T_PUBLIC","public",3091],["T_WHITESPACE"," ",3091],["T_FUNCTION","function",3091],["T_WHITESPACE"," ",3091],["T_STRING","getGreatestSql",3091],"(",["T_ARRAY","array",3091],["T_WHITESPACE"," ",3091],["T_VARIABLE","$data",3091],")",["T_WHITESPACE","\n    ",3091],"{",["T_WHITESPACE","\n        ",3092],["T_RETURN","return",3093],["T_WHITESPACE"," ",3093],["T_NEW","new",3093],["T_WHITESPACE"," ",3093],["T_NS_SEPARATOR","\\",3093],["T_STRING","Zend_Db_Expr",3093],"(",["T_STRING","sprintf",3093],"(",["T_CONSTANT_ENCAPSED_STRING","'GREATEST(%s)'",3093],",",["T_WHITESPACE"," ",3093],["T_STRING","implode",3093],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3093],",",["T_WHITESPACE"," ",3093],["T_VARIABLE","$data",3093],")",")",")",";",["T_WHITESPACE","\n    ",3093],"}",["T_WHITESPACE","\n\n    ",3094],["T_DOC_COMMENT","\/**\n     * Get Interval Unit SQL fragment\n     *\n     * @param int $interval\n     * @param string $unit\n     * @return string\n     * @throws \\Zend_Db_Exception\n     *\/",3096],["T_WHITESPACE","\n    ",3103],["T_PROTECTED","protected",3104],["T_WHITESPACE"," ",3104],["T_FUNCTION","function",3104],["T_WHITESPACE"," ",3104],["T_STRING","_getIntervalUnitSql",3104],"(",["T_VARIABLE","$interval",3104],",",["T_WHITESPACE"," ",3104],["T_VARIABLE","$unit",3104],")",["T_WHITESPACE","\n    ",3104],"{",["T_WHITESPACE","\n        ",3105],["T_IF","if",3106],["T_WHITESPACE"," ",3106],"(","!",["T_ISSET","isset",3106],"(",["T_VARIABLE","$this",3106],["T_OBJECT_OPERATOR","->",3106],["T_STRING","_intervalUnits",3106],"[",["T_VARIABLE","$unit",3106],"]",")",")",["T_WHITESPACE"," ",3106],"{",["T_WHITESPACE","\n            ",3106],["T_THROW","throw",3107],["T_WHITESPACE"," ",3107],["T_NEW","new",3107],["T_WHITESPACE"," ",3107],["T_NS_SEPARATOR","\\",3107],["T_STRING","Zend_Db_Exception",3107],"(",["T_STRING","sprintf",3107],"(",["T_CONSTANT_ENCAPSED_STRING","'Undefined interval unit \"%s\" specified'",3107],",",["T_WHITESPACE"," ",3107],["T_VARIABLE","$unit",3107],")",")",";",["T_WHITESPACE","\n        ",3107],"}",["T_WHITESPACE","\n\n        ",3108],["T_RETURN","return",3110],["T_WHITESPACE"," ",3110],["T_STRING","sprintf",3110],"(",["T_CONSTANT_ENCAPSED_STRING","'INTERVAL %d %s'",3110],",",["T_WHITESPACE"," ",3110],["T_VARIABLE","$interval",3110],",",["T_WHITESPACE"," ",3110],["T_VARIABLE","$this",3110],["T_OBJECT_OPERATOR","->",3110],["T_STRING","_intervalUnits",3110],"[",["T_VARIABLE","$unit",3110],"]",")",";",["T_WHITESPACE","\n    ",3110],"}",["T_WHITESPACE","\n\n    ",3111],["T_DOC_COMMENT","\/**\n     * Add time values (intervals) to a date value\n     *\n     * @see INTERVAL_* constants for $unit\n     *\n     * @param \\Zend_Db_Expr|string $date   quoted field name or SQL statement\n     * @param int $interval\n     * @param string $unit\n     * @return \\Zend_Db_Expr\n     *\/",3113],["T_WHITESPACE","\n    ",3122],["T_PUBLIC","public",3123],["T_WHITESPACE"," ",3123],["T_FUNCTION","function",3123],["T_WHITESPACE"," ",3123],["T_STRING","getDateAddSql",3123],"(",["T_VARIABLE","$date",3123],",",["T_WHITESPACE"," ",3123],["T_VARIABLE","$interval",3123],",",["T_WHITESPACE"," ",3123],["T_VARIABLE","$unit",3123],")",["T_WHITESPACE","\n    ",3123],"{",["T_WHITESPACE","\n        ",3124],["T_VARIABLE","$expr",3125],["T_WHITESPACE"," ",3125],"=",["T_WHITESPACE"," ",3125],["T_STRING","sprintf",3125],"(",["T_CONSTANT_ENCAPSED_STRING","'DATE_ADD(%s, %s)'",3125],",",["T_WHITESPACE"," ",3125],["T_VARIABLE","$date",3125],",",["T_WHITESPACE"," ",3125],["T_VARIABLE","$this",3125],["T_OBJECT_OPERATOR","->",3125],["T_STRING","_getIntervalUnitSql",3125],"(",["T_VARIABLE","$interval",3125],",",["T_WHITESPACE"," ",3125],["T_VARIABLE","$unit",3125],")",")",";",["T_WHITESPACE","\n        ",3125],["T_RETURN","return",3126],["T_WHITESPACE"," ",3126],["T_NEW","new",3126],["T_WHITESPACE"," ",3126],["T_NS_SEPARATOR","\\",3126],["T_STRING","Zend_Db_Expr",3126],"(",["T_VARIABLE","$expr",3126],")",";",["T_WHITESPACE","\n    ",3126],"}",["T_WHITESPACE","\n\n    ",3127],["T_DOC_COMMENT","\/**\n     * Subtract time values (intervals) to a date value\n     *\n     * @see INTERVAL_* constants for $expr\n     *\n     * @param \\Zend_Db_Expr|string $date   quoted field name or SQL statement\n     * @param int|string $interval\n     * @param string $unit\n     * @return \\Zend_Db_Expr\n     *\/",3129],["T_WHITESPACE","\n    ",3138],["T_PUBLIC","public",3139],["T_WHITESPACE"," ",3139],["T_FUNCTION","function",3139],["T_WHITESPACE"," ",3139],["T_STRING","getDateSubSql",3139],"(",["T_VARIABLE","$date",3139],",",["T_WHITESPACE"," ",3139],["T_VARIABLE","$interval",3139],",",["T_WHITESPACE"," ",3139],["T_VARIABLE","$unit",3139],")",["T_WHITESPACE","\n    ",3139],"{",["T_WHITESPACE","\n        ",3140],["T_VARIABLE","$expr",3141],["T_WHITESPACE"," ",3141],"=",["T_WHITESPACE"," ",3141],["T_STRING","sprintf",3141],"(",["T_CONSTANT_ENCAPSED_STRING","'DATE_SUB(%s, %s)'",3141],",",["T_WHITESPACE"," ",3141],["T_VARIABLE","$date",3141],",",["T_WHITESPACE"," ",3141],["T_VARIABLE","$this",3141],["T_OBJECT_OPERATOR","->",3141],["T_STRING","_getIntervalUnitSql",3141],"(",["T_VARIABLE","$interval",3141],",",["T_WHITESPACE"," ",3141],["T_VARIABLE","$unit",3141],")",")",";",["T_WHITESPACE","\n        ",3141],["T_RETURN","return",3142],["T_WHITESPACE"," ",3142],["T_NEW","new",3142],["T_WHITESPACE"," ",3142],["T_NS_SEPARATOR","\\",3142],["T_STRING","Zend_Db_Expr",3142],"(",["T_VARIABLE","$expr",3142],")",";",["T_WHITESPACE","\n    ",3142],"}",["T_WHITESPACE","\n\n    ",3143],["T_DOC_COMMENT","\/**\n     * Format date as specified\n     *\n     * Supported format Specifier\n     *\n     * %H   Hour (00..23)\n     * %i   Minutes, numeric (00..59)\n     * %s   Seconds (00..59)\n     * %d   Day of the month, numeric (00..31)\n     * %m   Month, numeric (00..12)\n     * %Y   Year, numeric, four digits\n     *\n     * @param string $date  quoted date value or non quoted SQL statement(field)\n     * @param string $format\n     * @return \\Zend_Db_Expr\n     *\/",3145],["T_WHITESPACE","\n    ",3160],["T_PUBLIC","public",3161],["T_WHITESPACE"," ",3161],["T_FUNCTION","function",3161],["T_WHITESPACE"," ",3161],["T_STRING","getDateFormatSql",3161],"(",["T_VARIABLE","$date",3161],",",["T_WHITESPACE"," ",3161],["T_VARIABLE","$format",3161],")",["T_WHITESPACE","\n    ",3161],"{",["T_WHITESPACE","\n        ",3162],["T_VARIABLE","$expr",3163],["T_WHITESPACE"," ",3163],"=",["T_WHITESPACE"," ",3163],["T_STRING","sprintf",3163],"(",["T_CONSTANT_ENCAPSED_STRING","\"DATE_FORMAT(%s, '%s')\"",3163],",",["T_WHITESPACE"," ",3163],["T_VARIABLE","$date",3163],",",["T_WHITESPACE"," ",3163],["T_VARIABLE","$format",3163],")",";",["T_WHITESPACE","\n        ",3163],["T_RETURN","return",3164],["T_WHITESPACE"," ",3164],["T_NEW","new",3164],["T_WHITESPACE"," ",3164],["T_NS_SEPARATOR","\\",3164],["T_STRING","Zend_Db_Expr",3164],"(",["T_VARIABLE","$expr",3164],")",";",["T_WHITESPACE","\n    ",3164],"}",["T_WHITESPACE","\n\n    ",3165],["T_DOC_COMMENT","\/**\n     * Extract the date part of a date or datetime expression\n     *\n     * @param \\Zend_Db_Expr|string $date   quoted field name or SQL statement\n     * @return \\Zend_Db_Expr\n     *\/",3167],["T_WHITESPACE","\n    ",3172],["T_PUBLIC","public",3173],["T_WHITESPACE"," ",3173],["T_FUNCTION","function",3173],["T_WHITESPACE"," ",3173],["T_STRING","getDatePartSql",3173],"(",["T_VARIABLE","$date",3173],")",["T_WHITESPACE","\n    ",3173],"{",["T_WHITESPACE","\n        ",3174],["T_RETURN","return",3175],["T_WHITESPACE"," ",3175],["T_NEW","new",3175],["T_WHITESPACE"," ",3175],["T_NS_SEPARATOR","\\",3175],["T_STRING","Zend_Db_Expr",3175],"(",["T_STRING","sprintf",3175],"(",["T_CONSTANT_ENCAPSED_STRING","'DATE(%s)'",3175],",",["T_WHITESPACE"," ",3175],["T_VARIABLE","$date",3175],")",")",";",["T_WHITESPACE","\n    ",3175],"}",["T_WHITESPACE","\n\n    ",3176],["T_DOC_COMMENT","\/**\n     * Prepare substring sql function\n     *\n     * @param \\Zend_Db_Expr|string $stringExpression quoted field name or SQL statement\n     * @param int|string|\\Zend_Db_Expr $pos\n     * @param int|string|\\Zend_Db_Expr|null $len\n     * @return \\Zend_Db_Expr\n     *\/",3178],["T_WHITESPACE","\n    ",3185],["T_PUBLIC","public",3186],["T_WHITESPACE"," ",3186],["T_FUNCTION","function",3186],["T_WHITESPACE"," ",3186],["T_STRING","getSubstringSql",3186],"(",["T_VARIABLE","$stringExpression",3186],",",["T_WHITESPACE"," ",3186],["T_VARIABLE","$pos",3186],",",["T_WHITESPACE"," ",3186],["T_VARIABLE","$len",3186],["T_WHITESPACE"," ",3186],"=",["T_WHITESPACE"," ",3186],["T_STRING","null",3186],")",["T_WHITESPACE","\n    ",3186],"{",["T_WHITESPACE","\n        ",3187],["T_IF","if",3188],["T_WHITESPACE"," ",3188],"(",["T_STRING","is_null",3188],"(",["T_VARIABLE","$len",3188],")",")",["T_WHITESPACE"," ",3188],"{",["T_WHITESPACE","\n            ",3188],["T_RETURN","return",3189],["T_WHITESPACE"," ",3189],["T_NEW","new",3189],["T_WHITESPACE"," ",3189],["T_NS_SEPARATOR","\\",3189],["T_STRING","Zend_Db_Expr",3189],"(",["T_STRING","sprintf",3189],"(",["T_CONSTANT_ENCAPSED_STRING","'SUBSTRING(%s, %s)'",3189],",",["T_WHITESPACE"," ",3189],["T_VARIABLE","$stringExpression",3189],",",["T_WHITESPACE"," ",3189],["T_VARIABLE","$pos",3189],")",")",";",["T_WHITESPACE","\n        ",3189],"}",["T_WHITESPACE","\n        ",3190],["T_RETURN","return",3191],["T_WHITESPACE"," ",3191],["T_NEW","new",3191],["T_WHITESPACE"," ",3191],["T_NS_SEPARATOR","\\",3191],["T_STRING","Zend_Db_Expr",3191],"(",["T_STRING","sprintf",3191],"(",["T_CONSTANT_ENCAPSED_STRING","'SUBSTRING(%s, %s, %s)'",3191],",",["T_WHITESPACE"," ",3191],["T_VARIABLE","$stringExpression",3191],",",["T_WHITESPACE"," ",3191],["T_VARIABLE","$pos",3191],",",["T_WHITESPACE"," ",3191],["T_VARIABLE","$len",3191],")",")",";",["T_WHITESPACE","\n    ",3191],"}",["T_WHITESPACE","\n\n    ",3192],["T_DOC_COMMENT","\/**\n     * Prepare standard deviation sql function\n     *\n     * @param \\Zend_Db_Expr|string $expressionField   quoted field name or SQL statement\n     * @return \\Zend_Db_Expr\n     *\/",3194],["T_WHITESPACE","\n    ",3199],["T_PUBLIC","public",3200],["T_WHITESPACE"," ",3200],["T_FUNCTION","function",3200],["T_WHITESPACE"," ",3200],["T_STRING","getStandardDeviationSql",3200],"(",["T_VARIABLE","$expressionField",3200],")",["T_WHITESPACE","\n    ",3200],"{",["T_WHITESPACE","\n        ",3201],["T_RETURN","return",3202],["T_WHITESPACE"," ",3202],["T_NEW","new",3202],["T_WHITESPACE"," ",3202],["T_NS_SEPARATOR","\\",3202],["T_STRING","Zend_Db_Expr",3202],"(",["T_STRING","sprintf",3202],"(",["T_CONSTANT_ENCAPSED_STRING","'STDDEV_SAMP(%s)'",3202],",",["T_WHITESPACE"," ",3202],["T_VARIABLE","$expressionField",3202],")",")",";",["T_WHITESPACE","\n    ",3202],"}",["T_WHITESPACE","\n\n    ",3203],["T_DOC_COMMENT","\/**\n     * Extract part of a date\n     *\n     * @see INTERVAL_* constants for $unit\n     *\n     * @param \\Zend_Db_Expr|string $date   quoted field name or SQL statement\n     * @param string $unit\n     * @return \\Zend_Db_Expr\n     * @throws \\Zend_Db_Exception\n     *\/",3205],["T_WHITESPACE","\n    ",3214],["T_PUBLIC","public",3215],["T_WHITESPACE"," ",3215],["T_FUNCTION","function",3215],["T_WHITESPACE"," ",3215],["T_STRING","getDateExtractSql",3215],"(",["T_VARIABLE","$date",3215],",",["T_WHITESPACE"," ",3215],["T_VARIABLE","$unit",3215],")",["T_WHITESPACE","\n    ",3215],"{",["T_WHITESPACE","\n        ",3216],["T_IF","if",3217],["T_WHITESPACE"," ",3217],"(","!",["T_ISSET","isset",3217],"(",["T_VARIABLE","$this",3217],["T_OBJECT_OPERATOR","->",3217],["T_STRING","_intervalUnits",3217],"[",["T_VARIABLE","$unit",3217],"]",")",")",["T_WHITESPACE"," ",3217],"{",["T_WHITESPACE","\n            ",3217],["T_THROW","throw",3218],["T_WHITESPACE"," ",3218],["T_NEW","new",3218],["T_WHITESPACE"," ",3218],["T_NS_SEPARATOR","\\",3218],["T_STRING","Zend_Db_Exception",3218],"(",["T_STRING","sprintf",3218],"(",["T_CONSTANT_ENCAPSED_STRING","'Undefined interval unit \"%s\" specified'",3218],",",["T_WHITESPACE"," ",3218],["T_VARIABLE","$unit",3218],")",")",";",["T_WHITESPACE","\n        ",3218],"}",["T_WHITESPACE","\n\n        ",3219],["T_VARIABLE","$expr",3221],["T_WHITESPACE"," ",3221],"=",["T_WHITESPACE"," ",3221],["T_STRING","sprintf",3221],"(",["T_CONSTANT_ENCAPSED_STRING","'EXTRACT(%s FROM %s)'",3221],",",["T_WHITESPACE"," ",3221],["T_VARIABLE","$this",3221],["T_OBJECT_OPERATOR","->",3221],["T_STRING","_intervalUnits",3221],"[",["T_VARIABLE","$unit",3221],"]",",",["T_WHITESPACE"," ",3221],["T_VARIABLE","$date",3221],")",";",["T_WHITESPACE","\n        ",3221],["T_RETURN","return",3222],["T_WHITESPACE"," ",3222],["T_NEW","new",3222],["T_WHITESPACE"," ",3222],["T_NS_SEPARATOR","\\",3222],["T_STRING","Zend_Db_Expr",3222],"(",["T_VARIABLE","$expr",3222],")",";",["T_WHITESPACE","\n    ",3222],"}",["T_WHITESPACE","\n\n    ",3223],["T_DOC_COMMENT","\/**\n     * Returns a compressed version of the table name if it is too long\n     *\n     * @param string $tableName\n     * @return string\n     * @codeCoverageIgnore\n     *\/",3225],["T_WHITESPACE","\n    ",3231],["T_PUBLIC","public",3232],["T_WHITESPACE"," ",3232],["T_FUNCTION","function",3232],["T_WHITESPACE"," ",3232],["T_STRING","getTableName",3232],"(",["T_VARIABLE","$tableName",3232],")",["T_WHITESPACE","\n    ",3232],"{",["T_WHITESPACE","\n        ",3233],["T_RETURN","return",3234],["T_WHITESPACE"," ",3234],["T_STRING","ExpressionConverter",3234],["T_DOUBLE_COLON","::",3234],["T_STRING","shortenEntityName",3234],"(",["T_VARIABLE","$tableName",3234],",",["T_WHITESPACE"," ",3234],["T_CONSTANT_ENCAPSED_STRING","'t_'",3234],")",";",["T_WHITESPACE","\n    ",3234],"}",["T_WHITESPACE","\n\n    ",3235],["T_DOC_COMMENT","\/**\n     * Build a trigger name based on table name and trigger details\n     *\n     * @param string $tableName  The table which is the subject of the trigger\n     * @param string $time  Either \"before\" or \"after\"\n     * @param string $event  The DB level event which activates the trigger, i.e. \"update\" or \"insert\"\n     * @return string\n     * @codeCoverageIgnore\n     *\/",3237],["T_WHITESPACE","\n\n    ",3245],["T_PUBLIC","public",3247],["T_WHITESPACE"," ",3247],["T_FUNCTION","function",3247],["T_WHITESPACE"," ",3247],["T_STRING","getTriggerName",3247],"(",["T_VARIABLE","$tableName",3247],",",["T_WHITESPACE"," ",3247],["T_VARIABLE","$time",3247],",",["T_WHITESPACE"," ",3247],["T_VARIABLE","$event",3247],")",["T_WHITESPACE","\n    ",3247],"{",["T_WHITESPACE","\n        ",3248],["T_VARIABLE","$triggerName",3249],["T_WHITESPACE"," ",3249],"=",["T_WHITESPACE"," ",3249],["T_CONSTANT_ENCAPSED_STRING","'trg_'",3249],["T_WHITESPACE"," ",3249],".",["T_WHITESPACE"," ",3249],["T_VARIABLE","$tableName",3249],["T_WHITESPACE"," ",3249],".",["T_WHITESPACE"," ",3249],["T_CONSTANT_ENCAPSED_STRING","'_'",3249],["T_WHITESPACE"," ",3249],".",["T_WHITESPACE"," ",3249],["T_VARIABLE","$time",3249],["T_WHITESPACE"," ",3249],".",["T_WHITESPACE"," ",3249],["T_CONSTANT_ENCAPSED_STRING","'_'",3249],["T_WHITESPACE"," ",3249],".",["T_WHITESPACE"," ",3249],["T_VARIABLE","$event",3249],";",["T_WHITESPACE","\n        ",3249],["T_RETURN","return",3250],["T_WHITESPACE"," ",3250],["T_STRING","ExpressionConverter",3250],["T_DOUBLE_COLON","::",3250],["T_STRING","shortenEntityName",3250],"(",["T_VARIABLE","$triggerName",3250],",",["T_WHITESPACE"," ",3250],["T_CONSTANT_ENCAPSED_STRING","'trg_'",3250],")",";",["T_WHITESPACE","\n    ",3250],"}",["T_WHITESPACE","\n\n    ",3251],["T_DOC_COMMENT","\/**\n     * Retrieve valid index name\n     * Check index name length and allowed symbols\n     *\n     * @param string $tableName\n     * @param string|string[] $fields  the columns list\n     * @param string $indexType\n     * @return string\n     *\/",3253],["T_WHITESPACE","\n    ",3261],["T_PUBLIC","public",3262],["T_WHITESPACE"," ",3262],["T_FUNCTION","function",3262],["T_WHITESPACE"," ",3262],["T_STRING","getIndexName",3262],"(",["T_VARIABLE","$tableName",3262],",",["T_WHITESPACE"," ",3262],["T_VARIABLE","$fields",3262],",",["T_WHITESPACE"," ",3262],["T_VARIABLE","$indexType",3262],["T_WHITESPACE"," ",3262],"=",["T_WHITESPACE"," ",3262],["T_CONSTANT_ENCAPSED_STRING","''",3262],")",["T_WHITESPACE","\n    ",3262],"{",["T_WHITESPACE","\n        ",3263],["T_IF","if",3264],["T_WHITESPACE"," ",3264],"(",["T_STRING","is_array",3264],"(",["T_VARIABLE","$fields",3264],")",")",["T_WHITESPACE"," ",3264],"{",["T_WHITESPACE","\n            ",3264],["T_VARIABLE","$fields",3265],["T_WHITESPACE"," ",3265],"=",["T_WHITESPACE"," ",3265],["T_STRING","implode",3265],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",3265],",",["T_WHITESPACE"," ",3265],["T_VARIABLE","$fields",3265],")",";",["T_WHITESPACE","\n        ",3265],"}",["T_WHITESPACE","\n\n        ",3266],["T_SWITCH","switch",3268],["T_WHITESPACE"," ",3268],"(",["T_STRING","strtolower",3268],"(",["T_VARIABLE","$indexType",3268],")",")",["T_WHITESPACE"," ",3268],"{",["T_WHITESPACE","\n            ",3268],["T_CASE","case",3269],["T_WHITESPACE"," ",3269],["T_STRING","AdapterInterface",3269],["T_DOUBLE_COLON","::",3269],["T_STRING","INDEX_TYPE_UNIQUE",3269],":",["T_WHITESPACE","\n                ",3269],["T_VARIABLE","$prefix",3270],["T_WHITESPACE"," ",3270],"=",["T_WHITESPACE"," ",3270],["T_CONSTANT_ENCAPSED_STRING","'unq_'",3270],";",["T_WHITESPACE","\n                ",3270],["T_BREAK","break",3271],";",["T_WHITESPACE","\n            ",3271],["T_CASE","case",3272],["T_WHITESPACE"," ",3272],["T_STRING","AdapterInterface",3272],["T_DOUBLE_COLON","::",3272],["T_STRING","INDEX_TYPE_FULLTEXT",3272],":",["T_WHITESPACE","\n                ",3272],["T_VARIABLE","$prefix",3273],["T_WHITESPACE"," ",3273],"=",["T_WHITESPACE"," ",3273],["T_CONSTANT_ENCAPSED_STRING","'fti_'",3273],";",["T_WHITESPACE","\n                ",3273],["T_BREAK","break",3274],";",["T_WHITESPACE","\n            ",3274],["T_CASE","case",3275],["T_WHITESPACE"," ",3275],["T_STRING","AdapterInterface",3275],["T_DOUBLE_COLON","::",3275],["T_STRING","INDEX_TYPE_INDEX",3275],":",["T_WHITESPACE","\n            ",3275],["T_DEFAULT","default",3276],":",["T_WHITESPACE","\n                ",3276],["T_VARIABLE","$prefix",3277],["T_WHITESPACE"," ",3277],"=",["T_WHITESPACE"," ",3277],["T_CONSTANT_ENCAPSED_STRING","'idx_'",3277],";",["T_WHITESPACE","\n        ",3277],"}",["T_WHITESPACE","\n        ",3278],["T_RETURN","return",3279],["T_WHITESPACE"," ",3279],["T_STRING","strtoupper",3279],"(",["T_STRING","ExpressionConverter",3279],["T_DOUBLE_COLON","::",3279],["T_STRING","shortenEntityName",3279],"(",["T_VARIABLE","$tableName",3279],["T_WHITESPACE"," ",3279],".",["T_WHITESPACE"," ",3279],["T_CONSTANT_ENCAPSED_STRING","'_'",3279],["T_WHITESPACE"," ",3279],".",["T_WHITESPACE"," ",3279],["T_VARIABLE","$fields",3279],",",["T_WHITESPACE"," ",3279],["T_VARIABLE","$prefix",3279],")",")",";",["T_WHITESPACE","\n    ",3279],"}",["T_WHITESPACE","\n\n    ",3280],["T_DOC_COMMENT","\/**\n     * Retrieve valid foreign key name\n     * Check foreign key name length and allowed symbols\n     *\n     * @param string $priTableName\n     * @param string $priColumnName\n     * @param string $refTableName\n     * @param string $refColumnName\n     * @return string\n     * @codeCoverageIgnore\n     *\/",3282],["T_WHITESPACE","\n    ",3292],["T_PUBLIC","public",3293],["T_WHITESPACE"," ",3293],["T_FUNCTION","function",3293],["T_WHITESPACE"," ",3293],["T_STRING","getForeignKeyName",3293],"(",["T_VARIABLE","$priTableName",3293],",",["T_WHITESPACE"," ",3293],["T_VARIABLE","$priColumnName",3293],",",["T_WHITESPACE"," ",3293],["T_VARIABLE","$refTableName",3293],",",["T_WHITESPACE"," ",3293],["T_VARIABLE","$refColumnName",3293],")",["T_WHITESPACE","\n    ",3293],"{",["T_WHITESPACE","\n        ",3294],["T_VARIABLE","$fkName",3295],["T_WHITESPACE"," ",3295],"=",["T_WHITESPACE"," ",3295],["T_STRING","sprintf",3295],"(",["T_CONSTANT_ENCAPSED_STRING","'%s_%s_%s_%s'",3295],",",["T_WHITESPACE"," ",3295],["T_VARIABLE","$priTableName",3295],",",["T_WHITESPACE"," ",3295],["T_VARIABLE","$priColumnName",3295],",",["T_WHITESPACE"," ",3295],["T_VARIABLE","$refTableName",3295],",",["T_WHITESPACE"," ",3295],["T_VARIABLE","$refColumnName",3295],")",";",["T_WHITESPACE","\n        ",3295],["T_RETURN","return",3296],["T_WHITESPACE"," ",3296],["T_STRING","strtoupper",3296],"(",["T_STRING","ExpressionConverter",3296],["T_DOUBLE_COLON","::",3296],["T_STRING","shortenEntityName",3296],"(",["T_VARIABLE","$fkName",3296],",",["T_WHITESPACE"," ",3296],["T_CONSTANT_ENCAPSED_STRING","'fk_'",3296],")",")",";",["T_WHITESPACE","\n    ",3296],"}",["T_WHITESPACE","\n\n    ",3297],["T_DOC_COMMENT","\/**\n     * Stop updating indexes\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return $this\n     *\/",3299],["T_WHITESPACE","\n    ",3305],["T_PUBLIC","public",3306],["T_WHITESPACE"," ",3306],["T_FUNCTION","function",3306],["T_WHITESPACE"," ",3306],["T_STRING","disableTableKeys",3306],"(",["T_VARIABLE","$tableName",3306],",",["T_WHITESPACE"," ",3306],["T_VARIABLE","$schemaName",3306],["T_WHITESPACE"," ",3306],"=",["T_WHITESPACE"," ",3306],["T_STRING","null",3306],")",["T_WHITESPACE","\n    ",3306],"{",["T_WHITESPACE","\n        ",3307],["T_VARIABLE","$tableName",3308],["T_WHITESPACE"," ",3308],"=",["T_WHITESPACE"," ",3308],["T_VARIABLE","$this",3308],["T_OBJECT_OPERATOR","->",3308],["T_STRING","_getTableName",3308],"(",["T_VARIABLE","$tableName",3308],",",["T_WHITESPACE"," ",3308],["T_VARIABLE","$schemaName",3308],")",";",["T_WHITESPACE","\n        ",3308],["T_VARIABLE","$query",3309],["T_WHITESPACE","     ",3309],"=",["T_WHITESPACE"," ",3309],["T_STRING","sprintf",3309],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s DISABLE KEYS'",3309],",",["T_WHITESPACE"," ",3309],["T_VARIABLE","$this",3309],["T_OBJECT_OPERATOR","->",3309],["T_STRING","quoteIdentifier",3309],"(",["T_VARIABLE","$tableName",3309],")",")",";",["T_WHITESPACE","\n        ",3309],["T_VARIABLE","$this",3310],["T_OBJECT_OPERATOR","->",3310],["T_STRING","query",3310],"(",["T_VARIABLE","$query",3310],")",";",["T_WHITESPACE","\n\n        ",3310],["T_RETURN","return",3312],["T_WHITESPACE"," ",3312],["T_VARIABLE","$this",3312],";",["T_WHITESPACE","\n    ",3312],"}",["T_WHITESPACE","\n\n    ",3313],["T_DOC_COMMENT","\/**\n     * Re-create missing indexes\n     *\n     * @param string $tableName\n     * @param string $schemaName\n     * @return $this\n     *\/",3315],["T_WHITESPACE","\n    ",3321],["T_PUBLIC","public",3322],["T_WHITESPACE"," ",3322],["T_FUNCTION","function",3322],["T_WHITESPACE"," ",3322],["T_STRING","enableTableKeys",3322],"(",["T_VARIABLE","$tableName",3322],",",["T_WHITESPACE"," ",3322],["T_VARIABLE","$schemaName",3322],["T_WHITESPACE"," ",3322],"=",["T_WHITESPACE"," ",3322],["T_STRING","null",3322],")",["T_WHITESPACE","\n    ",3322],"{",["T_WHITESPACE","\n        ",3323],["T_VARIABLE","$tableName",3324],["T_WHITESPACE"," ",3324],"=",["T_WHITESPACE"," ",3324],["T_VARIABLE","$this",3324],["T_OBJECT_OPERATOR","->",3324],["T_STRING","_getTableName",3324],"(",["T_VARIABLE","$tableName",3324],",",["T_WHITESPACE"," ",3324],["T_VARIABLE","$schemaName",3324],")",";",["T_WHITESPACE","\n        ",3324],["T_VARIABLE","$query",3325],["T_WHITESPACE","     ",3325],"=",["T_WHITESPACE"," ",3325],["T_STRING","sprintf",3325],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE %s ENABLE KEYS'",3325],",",["T_WHITESPACE"," ",3325],["T_VARIABLE","$this",3325],["T_OBJECT_OPERATOR","->",3325],["T_STRING","quoteIdentifier",3325],"(",["T_VARIABLE","$tableName",3325],")",")",";",["T_WHITESPACE","\n        ",3325],["T_VARIABLE","$this",3326],["T_OBJECT_OPERATOR","->",3326],["T_STRING","query",3326],"(",["T_VARIABLE","$query",3326],")",";",["T_WHITESPACE","\n\n        ",3326],["T_RETURN","return",3328],["T_WHITESPACE"," ",3328],["T_VARIABLE","$this",3328],";",["T_WHITESPACE","\n    ",3328],"}",["T_WHITESPACE","\n\n    ",3329],["T_DOC_COMMENT","\/**\n     * Get insert from Select object query\n     *\n     * @param Select $select\n     * @param string $table     insert into table\n     * @param array $fields\n     * @param int|false $mode\n     * @return string\n     *\/",3331],["T_WHITESPACE","\n    ",3339],["T_PUBLIC","public",3340],["T_WHITESPACE"," ",3340],["T_FUNCTION","function",3340],["T_WHITESPACE"," ",3340],["T_STRING","insertFromSelect",3340],"(",["T_STRING","Select",3340],["T_WHITESPACE"," ",3340],["T_VARIABLE","$select",3340],",",["T_WHITESPACE"," ",3340],["T_VARIABLE","$table",3340],",",["T_WHITESPACE"," ",3340],["T_ARRAY","array",3340],["T_WHITESPACE"," ",3340],["T_VARIABLE","$fields",3340],["T_WHITESPACE"," ",3340],"=",["T_WHITESPACE"," ",3340],"[","]",",",["T_WHITESPACE"," ",3340],["T_VARIABLE","$mode",3340],["T_WHITESPACE"," ",3340],"=",["T_WHITESPACE"," ",3340],["T_STRING","false",3340],")",["T_WHITESPACE","\n    ",3340],"{",["T_WHITESPACE","\n        ",3341],["T_VARIABLE","$query",3342],["T_WHITESPACE"," ",3342],"=",["T_WHITESPACE"," ",3342],["T_CONSTANT_ENCAPSED_STRING","'INSERT'",3342],";",["T_WHITESPACE","\n        ",3342],["T_IF","if",3343],["T_WHITESPACE"," ",3343],"(",["T_VARIABLE","$mode",3343],["T_WHITESPACE"," ",3343],["T_IS_EQUAL","==",3343],["T_WHITESPACE"," ",3343],["T_STRING","self",3343],["T_DOUBLE_COLON","::",3343],["T_STRING","INSERT_IGNORE",3343],")",["T_WHITESPACE"," ",3343],"{",["T_WHITESPACE","\n            ",3343],["T_VARIABLE","$query",3344],["T_WHITESPACE"," ",3344],["T_CONCAT_EQUAL",".=",3344],["T_WHITESPACE"," ",3344],["T_CONSTANT_ENCAPSED_STRING","' IGNORE'",3344],";",["T_WHITESPACE","\n        ",3344],"}",["T_WHITESPACE","\n        ",3345],["T_VARIABLE","$query",3346],["T_WHITESPACE"," ",3346],"=",["T_WHITESPACE"," ",3346],["T_STRING","sprintf",3346],"(",["T_CONSTANT_ENCAPSED_STRING","'%s INTO %s'",3346],",",["T_WHITESPACE"," ",3346],["T_VARIABLE","$query",3346],",",["T_WHITESPACE"," ",3346],["T_VARIABLE","$this",3346],["T_OBJECT_OPERATOR","->",3346],["T_STRING","quoteIdentifier",3346],"(",["T_VARIABLE","$table",3346],")",")",";",["T_WHITESPACE","\n        ",3346],["T_IF","if",3347],["T_WHITESPACE"," ",3347],"(",["T_VARIABLE","$fields",3347],")",["T_WHITESPACE"," ",3347],"{",["T_WHITESPACE","\n            ",3347],["T_VARIABLE","$columns",3348],["T_WHITESPACE"," ",3348],"=",["T_WHITESPACE"," ",3348],["T_STRING","array_map",3348],"(","[",["T_VARIABLE","$this",3348],",",["T_WHITESPACE"," ",3348],["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",3348],"]",",",["T_WHITESPACE"," ",3348],["T_VARIABLE","$fields",3348],")",";",["T_WHITESPACE","\n            ",3348],["T_VARIABLE","$query",3349],["T_WHITESPACE"," ",3349],"=",["T_WHITESPACE"," ",3349],["T_STRING","sprintf",3349],"(",["T_CONSTANT_ENCAPSED_STRING","'%s (%s)'",3349],",",["T_WHITESPACE"," ",3349],["T_VARIABLE","$query",3349],",",["T_WHITESPACE"," ",3349],["T_STRING","join",3349],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3349],",",["T_WHITESPACE"," ",3349],["T_VARIABLE","$columns",3349],")",")",";",["T_WHITESPACE","\n        ",3349],"}",["T_WHITESPACE","\n\n        ",3350],["T_VARIABLE","$query",3352],["T_WHITESPACE"," ",3352],"=",["T_WHITESPACE"," ",3352],["T_STRING","sprintf",3352],"(",["T_CONSTANT_ENCAPSED_STRING","'%s %s'",3352],",",["T_WHITESPACE"," ",3352],["T_VARIABLE","$query",3352],",",["T_WHITESPACE"," ",3352],["T_VARIABLE","$select",3352],["T_OBJECT_OPERATOR","->",3352],["T_STRING","assemble",3352],"(",")",")",";",["T_WHITESPACE","\n\n        ",3352],["T_IF","if",3354],["T_WHITESPACE"," ",3354],"(",["T_VARIABLE","$mode",3354],["T_WHITESPACE"," ",3354],["T_IS_EQUAL","==",3354],["T_WHITESPACE"," ",3354],["T_STRING","self",3354],["T_DOUBLE_COLON","::",3354],["T_STRING","INSERT_ON_DUPLICATE",3354],")",["T_WHITESPACE"," ",3354],"{",["T_WHITESPACE","\n            ",3354],["T_IF","if",3355],["T_WHITESPACE"," ",3355],"(","!",["T_VARIABLE","$fields",3355],")",["T_WHITESPACE"," ",3355],"{",["T_WHITESPACE","\n                ",3355],["T_VARIABLE","$describe",3356],["T_WHITESPACE"," ",3356],"=",["T_WHITESPACE"," ",3356],["T_VARIABLE","$this",3356],["T_OBJECT_OPERATOR","->",3356],["T_STRING","describeTable",3356],"(",["T_VARIABLE","$table",3356],")",";",["T_WHITESPACE","\n                ",3356],["T_FOREACH","foreach",3357],["T_WHITESPACE"," ",3357],"(",["T_VARIABLE","$describe",3357],["T_WHITESPACE"," ",3357],["T_AS","as",3357],["T_WHITESPACE"," ",3357],["T_VARIABLE","$column",3357],")",["T_WHITESPACE"," ",3357],"{",["T_WHITESPACE","\n                    ",3357],["T_IF","if",3358],["T_WHITESPACE"," ",3358],"(",["T_VARIABLE","$column",3358],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",3358],"]",["T_WHITESPACE"," ",3358],["T_IS_IDENTICAL","===",3358],["T_WHITESPACE"," ",3358],["T_STRING","false",3358],")",["T_WHITESPACE"," ",3358],"{",["T_WHITESPACE","\n                        ",3358],["T_VARIABLE","$fields",3359],"[","]",["T_WHITESPACE"," ",3359],"=",["T_WHITESPACE"," ",3359],["T_VARIABLE","$column",3359],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",3359],"]",";",["T_WHITESPACE","\n                    ",3359],"}",["T_WHITESPACE","\n                ",3360],"}",["T_WHITESPACE","\n            ",3361],"}",["T_WHITESPACE","\n            ",3362],["T_VARIABLE","$update",3363],["T_WHITESPACE"," ",3363],"=",["T_WHITESPACE"," ",3363],"[","]",";",["T_WHITESPACE","\n            ",3363],["T_FOREACH","foreach",3364],["T_WHITESPACE"," ",3364],"(",["T_VARIABLE","$fields",3364],["T_WHITESPACE"," ",3364],["T_AS","as",3364],["T_WHITESPACE"," ",3364],["T_VARIABLE","$field",3364],")",["T_WHITESPACE"," ",3364],"{",["T_WHITESPACE","\n                ",3364],["T_VARIABLE","$update",3365],"[","]",["T_WHITESPACE"," ",3365],"=",["T_WHITESPACE"," ",3365],["T_STRING","sprintf",3365],"(",["T_CONSTANT_ENCAPSED_STRING","'%1$s = VALUES(%1$s)'",3365],",",["T_WHITESPACE"," ",3365],["T_VARIABLE","$this",3365],["T_OBJECT_OPERATOR","->",3365],["T_STRING","quoteIdentifier",3365],"(",["T_VARIABLE","$field",3365],")",")",";",["T_WHITESPACE","\n            ",3365],"}",["T_WHITESPACE","\n\n            ",3366],["T_IF","if",3368],["T_WHITESPACE"," ",3368],"(",["T_VARIABLE","$update",3368],")",["T_WHITESPACE"," ",3368],"{",["T_WHITESPACE","\n                ",3368],["T_VARIABLE","$query",3369],["T_WHITESPACE"," ",3369],"=",["T_WHITESPACE"," ",3369],["T_STRING","sprintf",3369],"(",["T_CONSTANT_ENCAPSED_STRING","'%s ON DUPLICATE KEY UPDATE %s'",3369],",",["T_WHITESPACE"," ",3369],["T_VARIABLE","$query",3369],",",["T_WHITESPACE"," ",3369],["T_STRING","join",3369],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3369],",",["T_WHITESPACE"," ",3369],["T_VARIABLE","$update",3369],")",")",";",["T_WHITESPACE","\n            ",3369],"}",["T_WHITESPACE","\n        ",3370],"}",["T_WHITESPACE","\n\n        ",3371],["T_RETURN","return",3373],["T_WHITESPACE"," ",3373],["T_VARIABLE","$query",3373],";",["T_WHITESPACE","\n    ",3373],"}",["T_WHITESPACE","\n\n    ",3374],["T_DOC_COMMENT","\/**\n     * Get insert queries in array for insert by range with step parameter\n     *\n     * @param string $rangeField\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @param int $stepCount\n     * @return \\Magento\\Framework\\DB\\Select[]\n     * @throws LocalizedException\n     * @deprecated\n     *\/",3376],["T_WHITESPACE","\n    ",3385],["T_PUBLIC","public",3386],["T_WHITESPACE"," ",3386],["T_FUNCTION","function",3386],["T_WHITESPACE"," ",3386],["T_STRING","selectsByRange",3386],"(",["T_VARIABLE","$rangeField",3386],",",["T_WHITESPACE"," ",3386],["T_NS_SEPARATOR","\\",3386],["T_STRING","Magento",3386],["T_NS_SEPARATOR","\\",3386],["T_STRING","Framework",3386],["T_NS_SEPARATOR","\\",3386],["T_STRING","DB",3386],["T_NS_SEPARATOR","\\",3386],["T_STRING","Select",3386],["T_WHITESPACE"," ",3386],["T_VARIABLE","$select",3386],",",["T_WHITESPACE"," ",3386],["T_VARIABLE","$stepCount",3386],["T_WHITESPACE"," ",3386],"=",["T_WHITESPACE"," ",3386],["T_LNUMBER","100",3386],")",["T_WHITESPACE","\n    ",3386],"{",["T_WHITESPACE","\n        ",3387],["T_VARIABLE","$iterator",3388],["T_WHITESPACE"," ",3388],"=",["T_WHITESPACE"," ",3388],["T_VARIABLE","$this",3388],["T_OBJECT_OPERATOR","->",3388],["T_STRING","getQueryGenerator",3388],"(",")",["T_OBJECT_OPERATOR","->",3388],["T_STRING","generate",3388],"(",["T_VARIABLE","$rangeField",3388],",",["T_WHITESPACE"," ",3388],["T_VARIABLE","$select",3388],",",["T_WHITESPACE"," ",3388],["T_VARIABLE","$stepCount",3388],")",";",["T_WHITESPACE","\n        ",3388],["T_VARIABLE","$queries",3389],["T_WHITESPACE"," ",3389],"=",["T_WHITESPACE"," ",3389],"[","]",";",["T_WHITESPACE","\n        ",3389],["T_FOREACH","foreach",3390],["T_WHITESPACE"," ",3390],"(",["T_VARIABLE","$iterator",3390],["T_WHITESPACE"," ",3390],["T_AS","as",3390],["T_WHITESPACE"," ",3390],["T_VARIABLE","$query",3390],")",["T_WHITESPACE"," ",3390],"{",["T_WHITESPACE","\n            ",3390],["T_VARIABLE","$queries",3391],"[","]",["T_WHITESPACE"," ",3391],"=",["T_WHITESPACE"," ",3391],["T_VARIABLE","$query",3391],";",["T_WHITESPACE","\n        ",3391],"}",["T_WHITESPACE","\n        ",3392],["T_RETURN","return",3393],["T_WHITESPACE"," ",3393],["T_VARIABLE","$queries",3393],";",["T_WHITESPACE","\n    ",3393],"}",["T_WHITESPACE","\n\n    ",3394],["T_DOC_COMMENT","\/**\n     * Get query generator\n     *\n     * @return QueryGenerator\n     * @deprecated\n     *\/",3396],["T_WHITESPACE","\n    ",3401],["T_PRIVATE","private",3402],["T_WHITESPACE"," ",3402],["T_FUNCTION","function",3402],["T_WHITESPACE"," ",3402],["T_STRING","getQueryGenerator",3402],"(",")",["T_WHITESPACE","\n    ",3402],"{",["T_WHITESPACE","\n        ",3403],["T_IF","if",3404],["T_WHITESPACE"," ",3404],"(",["T_VARIABLE","$this",3404],["T_OBJECT_OPERATOR","->",3404],["T_STRING","queryGenerator",3404],["T_WHITESPACE"," ",3404],["T_IS_IDENTICAL","===",3404],["T_WHITESPACE"," ",3404],["T_STRING","null",3404],")",["T_WHITESPACE"," ",3404],"{",["T_WHITESPACE","\n            ",3404],["T_VARIABLE","$this",3405],["T_OBJECT_OPERATOR","->",3405],["T_STRING","queryGenerator",3405],["T_WHITESPACE"," ",3405],"=",["T_WHITESPACE"," ",3405],["T_NS_SEPARATOR","\\",3405],["T_STRING","Magento",3405],["T_NS_SEPARATOR","\\",3405],["T_STRING","Framework",3405],["T_NS_SEPARATOR","\\",3405],["T_STRING","App",3405],["T_NS_SEPARATOR","\\",3405],["T_STRING","ObjectManager",3405],["T_DOUBLE_COLON","::",3405],["T_STRING","getInstance",3405],"(",")",["T_OBJECT_OPERATOR","->",3405],["T_STRING","create",3405],"(",["T_STRING","QueryGenerator",3405],["T_DOUBLE_COLON","::",3405],["T_CLASS","class",3405],")",";",["T_WHITESPACE","\n        ",3405],"}",["T_WHITESPACE","\n        ",3406],["T_RETURN","return",3407],["T_WHITESPACE"," ",3407],["T_VARIABLE","$this",3407],["T_OBJECT_OPERATOR","->",3407],["T_STRING","queryGenerator",3407],";",["T_WHITESPACE","\n    ",3407],"}",["T_WHITESPACE","\n\n    ",3408],["T_DOC_COMMENT","\/**\n     * Get update table query using select object for join and update\n     *\n     * @param Select $select\n     * @param string|array $table\n     * @return string\n     * @throws LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",3410],["T_WHITESPACE","\n    ",3419],["T_PUBLIC","public",3420],["T_WHITESPACE"," ",3420],["T_FUNCTION","function",3420],["T_WHITESPACE"," ",3420],["T_STRING","updateFromSelect",3420],"(",["T_STRING","Select",3420],["T_WHITESPACE"," ",3420],["T_VARIABLE","$select",3420],",",["T_WHITESPACE"," ",3420],["T_VARIABLE","$table",3420],")",["T_WHITESPACE","\n    ",3420],"{",["T_WHITESPACE","\n        ",3421],["T_IF","if",3422],["T_WHITESPACE"," ",3422],"(","!",["T_STRING","is_array",3422],"(",["T_VARIABLE","$table",3422],")",")",["T_WHITESPACE"," ",3422],"{",["T_WHITESPACE","\n            ",3422],["T_VARIABLE","$table",3423],["T_WHITESPACE"," ",3423],"=",["T_WHITESPACE"," ",3423],"[",["T_VARIABLE","$table",3423],["T_WHITESPACE"," ",3423],["T_DOUBLE_ARROW","=>",3423],["T_WHITESPACE"," ",3423],["T_VARIABLE","$table",3423],"]",";",["T_WHITESPACE","\n        ",3423],"}",["T_WHITESPACE","\n\n        ",3424],["T_COMMENT","\/\/ get table name and alias\n",3426],["T_WHITESPACE","        ",3427],["T_VARIABLE","$keys",3427],["T_WHITESPACE","       ",3427],"=",["T_WHITESPACE"," ",3427],["T_STRING","array_keys",3427],"(",["T_VARIABLE","$table",3427],")",";",["T_WHITESPACE","\n        ",3427],["T_VARIABLE","$tableAlias",3428],["T_WHITESPACE"," ",3428],"=",["T_WHITESPACE"," ",3428],["T_VARIABLE","$keys",3428],"[",["T_LNUMBER","0",3428],"]",";",["T_WHITESPACE","\n        ",3428],["T_VARIABLE","$tableName",3429],["T_WHITESPACE","  ",3429],"=",["T_WHITESPACE"," ",3429],["T_VARIABLE","$table",3429],"[",["T_VARIABLE","$keys",3429],"[",["T_LNUMBER","0",3429],"]","]",";",["T_WHITESPACE","\n\n        ",3429],["T_VARIABLE","$query",3431],["T_WHITESPACE"," ",3431],"=",["T_WHITESPACE"," ",3431],["T_STRING","sprintf",3431],"(",["T_CONSTANT_ENCAPSED_STRING","'UPDATE %s'",3431],",",["T_WHITESPACE"," ",3431],["T_VARIABLE","$this",3431],["T_OBJECT_OPERATOR","->",3431],["T_STRING","quoteTableAs",3431],"(",["T_VARIABLE","$tableName",3431],",",["T_WHITESPACE"," ",3431],["T_VARIABLE","$tableAlias",3431],")",")",";",["T_WHITESPACE","\n\n        ",3431],["T_COMMENT","\/\/ render JOIN conditions (FROM Part)\n",3433],["T_WHITESPACE","        ",3434],["T_VARIABLE","$joinConds",3434],["T_WHITESPACE","  ",3434],"=",["T_WHITESPACE"," ",3434],"[","]",";",["T_WHITESPACE","\n        ",3434],["T_FOREACH","foreach",3435],["T_WHITESPACE"," ",3435],"(",["T_VARIABLE","$select",3435],["T_OBJECT_OPERATOR","->",3435],["T_STRING","getPart",3435],"(",["T_NS_SEPARATOR","\\",3435],["T_STRING","Magento",3435],["T_NS_SEPARATOR","\\",3435],["T_STRING","Framework",3435],["T_NS_SEPARATOR","\\",3435],["T_STRING","DB",3435],["T_NS_SEPARATOR","\\",3435],["T_STRING","Select",3435],["T_DOUBLE_COLON","::",3435],["T_STRING","FROM",3435],")",["T_WHITESPACE"," ",3435],["T_AS","as",3435],["T_WHITESPACE"," ",3435],["T_VARIABLE","$correlationName",3435],["T_WHITESPACE"," ",3435],["T_DOUBLE_ARROW","=>",3435],["T_WHITESPACE"," ",3435],["T_VARIABLE","$joinProp",3435],")",["T_WHITESPACE"," ",3435],"{",["T_WHITESPACE","\n            ",3435],["T_IF","if",3436],["T_WHITESPACE"," ",3436],"(",["T_VARIABLE","$joinProp",3436],"[",["T_CONSTANT_ENCAPSED_STRING","'joinType'",3436],"]",["T_WHITESPACE"," ",3436],["T_IS_EQUAL","==",3436],["T_WHITESPACE"," ",3436],["T_NS_SEPARATOR","\\",3436],["T_STRING","Magento",3436],["T_NS_SEPARATOR","\\",3436],["T_STRING","Framework",3436],["T_NS_SEPARATOR","\\",3436],["T_STRING","DB",3436],["T_NS_SEPARATOR","\\",3436],["T_STRING","Select",3436],["T_DOUBLE_COLON","::",3436],["T_STRING","FROM",3436],")",["T_WHITESPACE"," ",3436],"{",["T_WHITESPACE","\n                ",3436],["T_VARIABLE","$joinType",3437],["T_WHITESPACE"," ",3437],"=",["T_WHITESPACE"," ",3437],["T_STRING","strtoupper",3437],"(",["T_NS_SEPARATOR","\\",3437],["T_STRING","Magento",3437],["T_NS_SEPARATOR","\\",3437],["T_STRING","Framework",3437],["T_NS_SEPARATOR","\\",3437],["T_STRING","DB",3437],["T_NS_SEPARATOR","\\",3437],["T_STRING","Select",3437],["T_DOUBLE_COLON","::",3437],["T_STRING","INNER_JOIN",3437],")",";",["T_WHITESPACE","\n            ",3437],"}",["T_WHITESPACE"," ",3438],["T_ELSE","else",3438],["T_WHITESPACE"," ",3438],"{",["T_WHITESPACE","\n                ",3438],["T_VARIABLE","$joinType",3439],["T_WHITESPACE"," ",3439],"=",["T_WHITESPACE"," ",3439],["T_STRING","strtoupper",3439],"(",["T_VARIABLE","$joinProp",3439],"[",["T_CONSTANT_ENCAPSED_STRING","'joinType'",3439],"]",")",";",["T_WHITESPACE","\n            ",3439],"}",["T_WHITESPACE","\n            ",3440],["T_VARIABLE","$joinTable",3441],["T_WHITESPACE"," ",3441],"=",["T_WHITESPACE"," ",3441],["T_CONSTANT_ENCAPSED_STRING","''",3441],";",["T_WHITESPACE","\n            ",3441],["T_IF","if",3442],["T_WHITESPACE"," ",3442],"(",["T_VARIABLE","$joinProp",3442],"[",["T_CONSTANT_ENCAPSED_STRING","'schema'",3442],"]",["T_WHITESPACE"," ",3442],["T_IS_NOT_IDENTICAL","!==",3442],["T_WHITESPACE"," ",3442],["T_STRING","null",3442],")",["T_WHITESPACE"," ",3442],"{",["T_WHITESPACE","\n                ",3442],["T_VARIABLE","$joinTable",3443],["T_WHITESPACE"," ",3443],"=",["T_WHITESPACE"," ",3443],["T_STRING","sprintf",3443],"(",["T_CONSTANT_ENCAPSED_STRING","'%s.'",3443],",",["T_WHITESPACE"," ",3443],["T_VARIABLE","$this",3443],["T_OBJECT_OPERATOR","->",3443],["T_STRING","quoteIdentifier",3443],"(",["T_VARIABLE","$joinProp",3443],"[",["T_CONSTANT_ENCAPSED_STRING","'schema'",3443],"]",")",")",";",["T_WHITESPACE","\n            ",3443],"}",["T_WHITESPACE","\n            ",3444],["T_VARIABLE","$joinTable",3445],["T_WHITESPACE"," ",3445],["T_CONCAT_EQUAL",".=",3445],["T_WHITESPACE"," ",3445],["T_VARIABLE","$this",3445],["T_OBJECT_OPERATOR","->",3445],["T_STRING","quoteTableAs",3445],"(",["T_VARIABLE","$joinProp",3445],"[",["T_CONSTANT_ENCAPSED_STRING","'tableName'",3445],"]",",",["T_WHITESPACE"," ",3445],["T_VARIABLE","$correlationName",3445],")",";",["T_WHITESPACE","\n\n            ",3445],["T_VARIABLE","$join",3447],["T_WHITESPACE"," ",3447],"=",["T_WHITESPACE"," ",3447],["T_STRING","sprintf",3447],"(",["T_CONSTANT_ENCAPSED_STRING","' %s %s'",3447],",",["T_WHITESPACE"," ",3447],["T_VARIABLE","$joinType",3447],",",["T_WHITESPACE"," ",3447],["T_VARIABLE","$joinTable",3447],")",";",["T_WHITESPACE","\n\n            ",3447],["T_IF","if",3449],["T_WHITESPACE"," ",3449],"(","!",["T_EMPTY","empty",3449],"(",["T_VARIABLE","$joinProp",3449],"[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",3449],"]",")",")",["T_WHITESPACE"," ",3449],"{",["T_WHITESPACE","\n                ",3449],["T_VARIABLE","$join",3450],["T_WHITESPACE"," ",3450],"=",["T_WHITESPACE"," ",3450],["T_STRING","sprintf",3450],"(",["T_CONSTANT_ENCAPSED_STRING","'%s ON %s'",3450],",",["T_WHITESPACE"," ",3450],["T_VARIABLE","$join",3450],",",["T_WHITESPACE"," ",3450],["T_VARIABLE","$joinProp",3450],"[",["T_CONSTANT_ENCAPSED_STRING","'joinCondition'",3450],"]",")",";",["T_WHITESPACE","\n            ",3450],"}",["T_WHITESPACE","\n\n            ",3451],["T_VARIABLE","$joinConds",3453],"[","]",["T_WHITESPACE"," ",3453],"=",["T_WHITESPACE"," ",3453],["T_VARIABLE","$join",3453],";",["T_WHITESPACE","\n        ",3453],"}",["T_WHITESPACE","\n\n        ",3454],["T_IF","if",3456],["T_WHITESPACE"," ",3456],"(",["T_VARIABLE","$joinConds",3456],")",["T_WHITESPACE"," ",3456],"{",["T_WHITESPACE","\n            ",3456],["T_VARIABLE","$query",3457],["T_WHITESPACE"," ",3457],"=",["T_WHITESPACE"," ",3457],["T_STRING","sprintf",3457],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s\\n%s\"",3457],",",["T_WHITESPACE"," ",3457],["T_VARIABLE","$query",3457],",",["T_WHITESPACE"," ",3457],["T_STRING","implode",3457],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",3457],",",["T_WHITESPACE"," ",3457],["T_VARIABLE","$joinConds",3457],")",")",";",["T_WHITESPACE","\n        ",3457],"}",["T_WHITESPACE","\n\n        ",3458],["T_COMMENT","\/\/ render UPDATE SET\n",3460],["T_WHITESPACE","        ",3461],["T_VARIABLE","$columns",3461],["T_WHITESPACE"," ",3461],"=",["T_WHITESPACE"," ",3461],"[","]",";",["T_WHITESPACE","\n        ",3461],["T_FOREACH","foreach",3462],["T_WHITESPACE"," ",3462],"(",["T_VARIABLE","$select",3462],["T_OBJECT_OPERATOR","->",3462],["T_STRING","getPart",3462],"(",["T_NS_SEPARATOR","\\",3462],["T_STRING","Magento",3462],["T_NS_SEPARATOR","\\",3462],["T_STRING","Framework",3462],["T_NS_SEPARATOR","\\",3462],["T_STRING","DB",3462],["T_NS_SEPARATOR","\\",3462],["T_STRING","Select",3462],["T_DOUBLE_COLON","::",3462],["T_STRING","COLUMNS",3462],")",["T_WHITESPACE"," ",3462],["T_AS","as",3462],["T_WHITESPACE"," ",3462],["T_VARIABLE","$columnEntry",3462],")",["T_WHITESPACE"," ",3462],"{",["T_WHITESPACE","\n            ",3462],["T_LIST","list",3463],"(",["T_VARIABLE","$correlationName",3463],",",["T_WHITESPACE"," ",3463],["T_VARIABLE","$column",3463],",",["T_WHITESPACE"," ",3463],["T_VARIABLE","$alias",3463],")",["T_WHITESPACE"," ",3463],"=",["T_WHITESPACE"," ",3463],["T_VARIABLE","$columnEntry",3463],";",["T_WHITESPACE","\n            ",3463],["T_IF","if",3464],["T_WHITESPACE"," ",3464],"(",["T_EMPTY","empty",3464],"(",["T_VARIABLE","$alias",3464],")",")",["T_WHITESPACE"," ",3464],"{",["T_WHITESPACE","\n                ",3464],["T_VARIABLE","$alias",3465],["T_WHITESPACE"," ",3465],"=",["T_WHITESPACE"," ",3465],["T_VARIABLE","$column",3465],";",["T_WHITESPACE","\n            ",3465],"}",["T_WHITESPACE","\n            ",3466],["T_IF","if",3467],["T_WHITESPACE"," ",3467],"(","!",["T_VARIABLE","$column",3467],["T_WHITESPACE"," ",3467],["T_INSTANCEOF","instanceof",3467],["T_WHITESPACE"," ",3467],["T_NS_SEPARATOR","\\",3467],["T_STRING","Zend_Db_Expr",3467],["T_WHITESPACE"," ",3467],["T_BOOLEAN_AND","&&",3467],["T_WHITESPACE"," ",3467],"!",["T_EMPTY","empty",3467],"(",["T_VARIABLE","$correlationName",3467],")",")",["T_WHITESPACE"," ",3467],"{",["T_WHITESPACE","\n                ",3467],["T_VARIABLE","$column",3468],["T_WHITESPACE"," ",3468],"=",["T_WHITESPACE"," ",3468],["T_VARIABLE","$this",3468],["T_OBJECT_OPERATOR","->",3468],["T_STRING","quoteIdentifier",3468],"(","[",["T_VARIABLE","$correlationName",3468],",",["T_WHITESPACE"," ",3468],["T_VARIABLE","$column",3468],"]",")",";",["T_WHITESPACE","\n            ",3468],"}",["T_WHITESPACE","\n            ",3469],["T_VARIABLE","$columns",3470],"[","]",["T_WHITESPACE"," ",3470],"=",["T_WHITESPACE"," ",3470],["T_STRING","sprintf",3470],"(",["T_CONSTANT_ENCAPSED_STRING","'%s = %s'",3470],",",["T_WHITESPACE"," ",3470],["T_VARIABLE","$this",3470],["T_OBJECT_OPERATOR","->",3470],["T_STRING","quoteIdentifier",3470],"(","[",["T_VARIABLE","$tableAlias",3470],",",["T_WHITESPACE"," ",3470],["T_VARIABLE","$alias",3470],"]",")",",",["T_WHITESPACE"," ",3470],["T_VARIABLE","$column",3470],")",";",["T_WHITESPACE","\n        ",3470],"}",["T_WHITESPACE","\n\n        ",3471],["T_IF","if",3473],["T_WHITESPACE"," ",3473],"(","!",["T_VARIABLE","$columns",3473],")",["T_WHITESPACE"," ",3473],"{",["T_WHITESPACE","\n            ",3473],["T_THROW","throw",3474],["T_WHITESPACE"," ",3474],["T_NEW","new",3474],["T_WHITESPACE"," ",3474],["T_STRING","LocalizedException",3474],"(",["T_WHITESPACE","\n                ",3474],["T_NEW","new",3475],["T_WHITESPACE"," ",3475],["T_NS_SEPARATOR","\\",3475],["T_STRING","Magento",3475],["T_NS_SEPARATOR","\\",3475],["T_STRING","Framework",3475],["T_NS_SEPARATOR","\\",3475],["T_STRING","Phrase",3475],"(",["T_CONSTANT_ENCAPSED_STRING","'The columns for UPDATE statement are not defined'",3475],")",["T_WHITESPACE","\n            ",3475],")",";",["T_WHITESPACE","\n        ",3476],"}",["T_WHITESPACE","\n\n        ",3477],["T_VARIABLE","$query",3479],["T_WHITESPACE"," ",3479],"=",["T_WHITESPACE"," ",3479],["T_STRING","sprintf",3479],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s\\nSET %s\"",3479],",",["T_WHITESPACE"," ",3479],["T_VARIABLE","$query",3479],",",["T_WHITESPACE"," ",3479],["T_STRING","implode",3479],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3479],",",["T_WHITESPACE"," ",3479],["T_VARIABLE","$columns",3479],")",")",";",["T_WHITESPACE","\n\n        ",3479],["T_COMMENT","\/\/ render WHERE\n",3481],["T_WHITESPACE","        ",3482],["T_VARIABLE","$wherePart",3482],["T_WHITESPACE"," ",3482],"=",["T_WHITESPACE"," ",3482],["T_VARIABLE","$select",3482],["T_OBJECT_OPERATOR","->",3482],["T_STRING","getPart",3482],"(",["T_NS_SEPARATOR","\\",3482],["T_STRING","Magento",3482],["T_NS_SEPARATOR","\\",3482],["T_STRING","Framework",3482],["T_NS_SEPARATOR","\\",3482],["T_STRING","DB",3482],["T_NS_SEPARATOR","\\",3482],["T_STRING","Select",3482],["T_DOUBLE_COLON","::",3482],["T_STRING","WHERE",3482],")",";",["T_WHITESPACE","\n        ",3482],["T_IF","if",3483],["T_WHITESPACE"," ",3483],"(",["T_VARIABLE","$wherePart",3483],")",["T_WHITESPACE"," ",3483],"{",["T_WHITESPACE","\n            ",3483],["T_VARIABLE","$query",3484],["T_WHITESPACE"," ",3484],"=",["T_WHITESPACE"," ",3484],["T_STRING","sprintf",3484],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s\\nWHERE %s\"",3484],",",["T_WHITESPACE"," ",3484],["T_VARIABLE","$query",3484],",",["T_WHITESPACE"," ",3484],["T_STRING","implode",3484],"(",["T_CONSTANT_ENCAPSED_STRING","' '",3484],",",["T_WHITESPACE"," ",3484],["T_VARIABLE","$wherePart",3484],")",")",";",["T_WHITESPACE","\n        ",3484],"}",["T_WHITESPACE","\n\n        ",3485],["T_RETURN","return",3487],["T_WHITESPACE"," ",3487],["T_VARIABLE","$query",3487],";",["T_WHITESPACE","\n    ",3487],"}",["T_WHITESPACE","\n\n    ",3488],["T_DOC_COMMENT","\/**\n     * Get delete from select object query\n     *\n     * @param Select $select\n     * @param string $table the table name or alias used in select\n     * @return string\n     *\/",3490],["T_WHITESPACE","\n    ",3496],["T_PUBLIC","public",3497],["T_WHITESPACE"," ",3497],["T_FUNCTION","function",3497],["T_WHITESPACE"," ",3497],["T_STRING","deleteFromSelect",3497],"(",["T_STRING","Select",3497],["T_WHITESPACE"," ",3497],["T_VARIABLE","$select",3497],",",["T_WHITESPACE"," ",3497],["T_VARIABLE","$table",3497],")",["T_WHITESPACE","\n    ",3497],"{",["T_WHITESPACE","\n        ",3498],["T_VARIABLE","$select",3499],["T_WHITESPACE"," ",3499],"=",["T_WHITESPACE"," ",3499],["T_CLONE","clone",3499],["T_WHITESPACE"," ",3499],["T_VARIABLE","$select",3499],";",["T_WHITESPACE","\n        ",3499],["T_VARIABLE","$select",3500],["T_OBJECT_OPERATOR","->",3500],["T_STRING","reset",3500],"(",["T_NS_SEPARATOR","\\",3500],["T_STRING","Magento",3500],["T_NS_SEPARATOR","\\",3500],["T_STRING","Framework",3500],["T_NS_SEPARATOR","\\",3500],["T_STRING","DB",3500],["T_NS_SEPARATOR","\\",3500],["T_STRING","Select",3500],["T_DOUBLE_COLON","::",3500],["T_STRING","DISTINCT",3500],")",";",["T_WHITESPACE","\n        ",3500],["T_VARIABLE","$select",3501],["T_OBJECT_OPERATOR","->",3501],["T_STRING","reset",3501],"(",["T_NS_SEPARATOR","\\",3501],["T_STRING","Magento",3501],["T_NS_SEPARATOR","\\",3501],["T_STRING","Framework",3501],["T_NS_SEPARATOR","\\",3501],["T_STRING","DB",3501],["T_NS_SEPARATOR","\\",3501],["T_STRING","Select",3501],["T_DOUBLE_COLON","::",3501],["T_STRING","COLUMNS",3501],")",";",["T_WHITESPACE","\n\n        ",3501],["T_VARIABLE","$query",3503],["T_WHITESPACE"," ",3503],"=",["T_WHITESPACE"," ",3503],["T_STRING","sprintf",3503],"(",["T_CONSTANT_ENCAPSED_STRING","'DELETE %s %s'",3503],",",["T_WHITESPACE"," ",3503],["T_VARIABLE","$this",3503],["T_OBJECT_OPERATOR","->",3503],["T_STRING","quoteIdentifier",3503],"(",["T_VARIABLE","$table",3503],")",",",["T_WHITESPACE"," ",3503],["T_VARIABLE","$select",3503],["T_OBJECT_OPERATOR","->",3503],["T_STRING","assemble",3503],"(",")",")",";",["T_WHITESPACE","\n\n        ",3503],["T_RETURN","return",3505],["T_WHITESPACE"," ",3505],["T_VARIABLE","$query",3505],";",["T_WHITESPACE","\n    ",3505],"}",["T_WHITESPACE","\n\n    ",3506],["T_DOC_COMMENT","\/**\n     * Calculate checksum for table or for group of tables\n     *\n     * @param array|string $tableNames array of tables names | table name\n     * @param string $schemaName schema name\n     * @return array\n     *\/",3508],["T_WHITESPACE","\n    ",3514],["T_PUBLIC","public",3515],["T_WHITESPACE"," ",3515],["T_FUNCTION","function",3515],["T_WHITESPACE"," ",3515],["T_STRING","getTablesChecksum",3515],"(",["T_VARIABLE","$tableNames",3515],",",["T_WHITESPACE"," ",3515],["T_VARIABLE","$schemaName",3515],["T_WHITESPACE"," ",3515],"=",["T_WHITESPACE"," ",3515],["T_STRING","null",3515],")",["T_WHITESPACE","\n    ",3515],"{",["T_WHITESPACE","\n        ",3516],["T_VARIABLE","$result",3517],["T_WHITESPACE","     ",3517],"=",["T_WHITESPACE"," ",3517],"[","]",";",["T_WHITESPACE","\n        ",3517],["T_VARIABLE","$tableNames",3518],["T_WHITESPACE"," ",3518],"=",["T_WHITESPACE"," ",3518],["T_STRING","is_array",3518],"(",["T_VARIABLE","$tableNames",3518],")",["T_WHITESPACE"," ",3518],"?",["T_WHITESPACE"," ",3518],["T_VARIABLE","$tableNames",3518],["T_WHITESPACE"," ",3518],":",["T_WHITESPACE"," ",3518],"[",["T_VARIABLE","$tableNames",3518],"]",";",["T_WHITESPACE","\n\n        ",3518],["T_FOREACH","foreach",3520],["T_WHITESPACE"," ",3520],"(",["T_VARIABLE","$tableNames",3520],["T_WHITESPACE"," ",3520],["T_AS","as",3520],["T_WHITESPACE"," ",3520],["T_VARIABLE","$tableName",3520],")",["T_WHITESPACE"," ",3520],"{",["T_WHITESPACE","\n            ",3520],["T_VARIABLE","$query",3521],["T_WHITESPACE"," ",3521],"=",["T_WHITESPACE"," ",3521],["T_CONSTANT_ENCAPSED_STRING","'CHECKSUM TABLE '",3521],["T_WHITESPACE"," ",3521],".",["T_WHITESPACE"," ",3521],["T_VARIABLE","$this",3521],["T_OBJECT_OPERATOR","->",3521],["T_STRING","_getTableName",3521],"(",["T_VARIABLE","$tableName",3521],",",["T_WHITESPACE"," ",3521],["T_VARIABLE","$schemaName",3521],")",";",["T_WHITESPACE","\n            ",3521],["T_VARIABLE","$checkSumArray",3522],["T_WHITESPACE","      ",3522],"=",["T_WHITESPACE"," ",3522],["T_VARIABLE","$this",3522],["T_OBJECT_OPERATOR","->",3522],["T_STRING","fetchRow",3522],"(",["T_VARIABLE","$query",3522],")",";",["T_WHITESPACE","\n            ",3522],["T_VARIABLE","$result",3523],"[",["T_VARIABLE","$tableName",3523],"]",["T_WHITESPACE"," ",3523],"=",["T_WHITESPACE"," ",3523],["T_VARIABLE","$checkSumArray",3523],"[",["T_CONSTANT_ENCAPSED_STRING","'Checksum'",3523],"]",";",["T_WHITESPACE","\n        ",3523],"}",["T_WHITESPACE","\n\n        ",3524],["T_RETURN","return",3526],["T_WHITESPACE"," ",3526],["T_VARIABLE","$result",3526],";",["T_WHITESPACE","\n    ",3526],"}",["T_WHITESPACE","\n\n    ",3527],["T_DOC_COMMENT","\/**\n     * Check if the database support STRAIGHT JOIN\n     *\n     * @return true\n     *\/",3529],["T_WHITESPACE","\n    ",3533],["T_PUBLIC","public",3534],["T_WHITESPACE"," ",3534],["T_FUNCTION","function",3534],["T_WHITESPACE"," ",3534],["T_STRING","supportStraightJoin",3534],"(",")",["T_WHITESPACE","\n    ",3534],"{",["T_WHITESPACE","\n        ",3535],["T_RETURN","return",3536],["T_WHITESPACE"," ",3536],["T_STRING","true",3536],";",["T_WHITESPACE","\n    ",3536],"}",["T_WHITESPACE","\n\n    ",3537],["T_DOC_COMMENT","\/**\n     * Adds order by random to select object\n     * Possible using integer field for optimization\n     *\n     * @param Select $select\n     * @param string $field\n     * @return $this\n     *\/",3539],["T_WHITESPACE","\n    ",3546],["T_PUBLIC","public",3547],["T_WHITESPACE"," ",3547],["T_FUNCTION","function",3547],["T_WHITESPACE"," ",3547],["T_STRING","orderRand",3547],"(",["T_STRING","Select",3547],["T_WHITESPACE"," ",3547],["T_VARIABLE","$select",3547],",",["T_WHITESPACE"," ",3547],["T_VARIABLE","$field",3547],["T_WHITESPACE"," ",3547],"=",["T_WHITESPACE"," ",3547],["T_STRING","null",3547],")",["T_WHITESPACE","\n    ",3547],"{",["T_WHITESPACE","\n        ",3548],["T_IF","if",3549],["T_WHITESPACE"," ",3549],"(",["T_VARIABLE","$field",3549],["T_WHITESPACE"," ",3549],["T_IS_NOT_IDENTICAL","!==",3549],["T_WHITESPACE"," ",3549],["T_STRING","null",3549],")",["T_WHITESPACE"," ",3549],"{",["T_WHITESPACE","\n            ",3549],["T_VARIABLE","$expression",3550],["T_WHITESPACE"," ",3550],"=",["T_WHITESPACE"," ",3550],["T_NEW","new",3550],["T_WHITESPACE"," ",3550],["T_NS_SEPARATOR","\\",3550],["T_STRING","Zend_Db_Expr",3550],"(",["T_STRING","sprintf",3550],"(",["T_CONSTANT_ENCAPSED_STRING","'RAND() * %s'",3550],",",["T_WHITESPACE"," ",3550],["T_VARIABLE","$this",3550],["T_OBJECT_OPERATOR","->",3550],["T_STRING","quoteIdentifier",3550],"(",["T_VARIABLE","$field",3550],")",")",")",";",["T_WHITESPACE","\n            ",3550],["T_VARIABLE","$select",3551],["T_OBJECT_OPERATOR","->",3551],["T_STRING","columns",3551],"(","[",["T_CONSTANT_ENCAPSED_STRING","'mage_rand'",3551],["T_WHITESPACE"," ",3551],["T_DOUBLE_ARROW","=>",3551],["T_WHITESPACE"," ",3551],["T_VARIABLE","$expression",3551],"]",")",";",["T_WHITESPACE","\n            ",3551],["T_VARIABLE","$spec",3552],["T_WHITESPACE"," ",3552],"=",["T_WHITESPACE"," ",3552],["T_NEW","new",3552],["T_WHITESPACE"," ",3552],["T_NS_SEPARATOR","\\",3552],["T_STRING","Zend_Db_Expr",3552],"(",["T_CONSTANT_ENCAPSED_STRING","'mage_rand'",3552],")",";",["T_WHITESPACE","\n        ",3552],"}",["T_WHITESPACE"," ",3553],["T_ELSE","else",3553],["T_WHITESPACE"," ",3553],"{",["T_WHITESPACE","\n            ",3553],["T_VARIABLE","$spec",3554],["T_WHITESPACE"," ",3554],"=",["T_WHITESPACE"," ",3554],["T_NEW","new",3554],["T_WHITESPACE"," ",3554],["T_NS_SEPARATOR","\\",3554],["T_STRING","Zend_Db_Expr",3554],"(",["T_CONSTANT_ENCAPSED_STRING","'RAND()'",3554],")",";",["T_WHITESPACE","\n        ",3554],"}",["T_WHITESPACE","\n        ",3555],["T_VARIABLE","$select",3556],["T_OBJECT_OPERATOR","->",3556],["T_STRING","order",3556],"(",["T_VARIABLE","$spec",3556],")",";",["T_WHITESPACE","\n\n        ",3556],["T_RETURN","return",3558],["T_WHITESPACE"," ",3558],["T_VARIABLE","$this",3558],";",["T_WHITESPACE","\n    ",3558],"}",["T_WHITESPACE","\n\n    ",3559],["T_DOC_COMMENT","\/**\n     * Render SQL FOR UPDATE clause\n     *\n     * @param string $sql\n     * @return string\n     *\/",3561],["T_WHITESPACE","\n    ",3566],["T_PUBLIC","public",3567],["T_WHITESPACE"," ",3567],["T_FUNCTION","function",3567],["T_WHITESPACE"," ",3567],["T_STRING","forUpdate",3567],"(",["T_VARIABLE","$sql",3567],")",["T_WHITESPACE","\n    ",3567],"{",["T_WHITESPACE","\n        ",3568],["T_RETURN","return",3569],["T_WHITESPACE"," ",3569],["T_STRING","sprintf",3569],"(",["T_CONSTANT_ENCAPSED_STRING","'%s FOR UPDATE'",3569],",",["T_WHITESPACE"," ",3569],["T_VARIABLE","$sql",3569],")",";",["T_WHITESPACE","\n    ",3569],"}",["T_WHITESPACE","\n\n    ",3570],["T_DOC_COMMENT","\/**\n     * Prepare insert data\n     *\n     * @param mixed $row\n     * @param array $bind\n     * @return string\n     *\/",3572],["T_WHITESPACE","\n    ",3578],["T_PROTECTED","protected",3579],["T_WHITESPACE"," ",3579],["T_FUNCTION","function",3579],["T_WHITESPACE"," ",3579],["T_STRING","_prepareInsertData",3579],"(",["T_VARIABLE","$row",3579],",",["T_WHITESPACE"," ",3579],"&",["T_VARIABLE","$bind",3579],")",["T_WHITESPACE","\n    ",3579],"{",["T_WHITESPACE","\n        ",3580],["T_VARIABLE","$row",3581],["T_WHITESPACE"," ",3581],"=",["T_WHITESPACE"," ",3581],["T_ARRAY_CAST","(array)",3581],["T_VARIABLE","$row",3581],";",["T_WHITESPACE","\n        ",3581],["T_VARIABLE","$line",3582],["T_WHITESPACE"," ",3582],"=",["T_WHITESPACE"," ",3582],"[","]",";",["T_WHITESPACE","\n        ",3582],["T_FOREACH","foreach",3583],["T_WHITESPACE"," ",3583],"(",["T_VARIABLE","$row",3583],["T_WHITESPACE"," ",3583],["T_AS","as",3583],["T_WHITESPACE"," ",3583],["T_VARIABLE","$value",3583],")",["T_WHITESPACE"," ",3583],"{",["T_WHITESPACE","\n            ",3583],["T_IF","if",3584],["T_WHITESPACE"," ",3584],"(",["T_VARIABLE","$value",3584],["T_WHITESPACE"," ",3584],["T_INSTANCEOF","instanceof",3584],["T_WHITESPACE"," ",3584],["T_NS_SEPARATOR","\\",3584],["T_STRING","Zend_Db_Expr",3584],")",["T_WHITESPACE"," ",3584],"{",["T_WHITESPACE","\n                ",3584],["T_VARIABLE","$line",3585],"[","]",["T_WHITESPACE"," ",3585],"=",["T_WHITESPACE"," ",3585],["T_VARIABLE","$value",3585],["T_OBJECT_OPERATOR","->",3585],["T_STRING","__toString",3585],"(",")",";",["T_WHITESPACE","\n            ",3585],"}",["T_WHITESPACE"," ",3586],["T_ELSE","else",3586],["T_WHITESPACE"," ",3586],"{",["T_WHITESPACE","\n                ",3586],["T_VARIABLE","$line",3587],"[","]",["T_WHITESPACE"," ",3587],"=",["T_WHITESPACE"," ",3587],["T_CONSTANT_ENCAPSED_STRING","'?'",3587],";",["T_WHITESPACE","\n                ",3587],["T_VARIABLE","$bind",3588],"[","]",["T_WHITESPACE"," ",3588],"=",["T_WHITESPACE"," ",3588],["T_VARIABLE","$value",3588],";",["T_WHITESPACE","\n            ",3588],"}",["T_WHITESPACE","\n        ",3589],"}",["T_WHITESPACE","\n        ",3590],["T_VARIABLE","$line",3591],["T_WHITESPACE"," ",3591],"=",["T_WHITESPACE"," ",3591],["T_STRING","implode",3591],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3591],",",["T_WHITESPACE"," ",3591],["T_VARIABLE","$line",3591],")",";",["T_WHITESPACE","\n\n        ",3591],["T_RETURN","return",3593],["T_WHITESPACE"," ",3593],["T_STRING","sprintf",3593],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",3593],",",["T_WHITESPACE"," ",3593],["T_VARIABLE","$line",3593],")",";",["T_WHITESPACE","\n    ",3593],"}",["T_WHITESPACE","\n\n    ",3594],["T_DOC_COMMENT","\/**\n     * Return insert sql query\n     *\n     * @param string $tableName\n     * @param array $columns\n     * @param array $values\n     * @return string\n     *\/",3596],["T_WHITESPACE","\n    ",3603],["T_PROTECTED","protected",3604],["T_WHITESPACE"," ",3604],["T_FUNCTION","function",3604],["T_WHITESPACE"," ",3604],["T_STRING","_getInsertSqlQuery",3604],"(",["T_VARIABLE","$tableName",3604],",",["T_WHITESPACE"," ",3604],["T_ARRAY","array",3604],["T_WHITESPACE"," ",3604],["T_VARIABLE","$columns",3604],",",["T_WHITESPACE"," ",3604],["T_ARRAY","array",3604],["T_WHITESPACE"," ",3604],["T_VARIABLE","$values",3604],")",["T_WHITESPACE","\n    ",3604],"{",["T_WHITESPACE","\n        ",3605],["T_VARIABLE","$tableName",3606],["T_WHITESPACE"," ",3606],"=",["T_WHITESPACE"," ",3606],["T_VARIABLE","$this",3606],["T_OBJECT_OPERATOR","->",3606],["T_STRING","quoteIdentifier",3606],"(",["T_VARIABLE","$tableName",3606],",",["T_WHITESPACE"," ",3606],["T_STRING","true",3606],")",";",["T_WHITESPACE","\n        ",3606],["T_VARIABLE","$columns",3607],["T_WHITESPACE","   ",3607],"=",["T_WHITESPACE"," ",3607],["T_STRING","array_map",3607],"(","[",["T_VARIABLE","$this",3607],",",["T_WHITESPACE"," ",3607],["T_CONSTANT_ENCAPSED_STRING","'quoteIdentifier'",3607],"]",",",["T_WHITESPACE"," ",3607],["T_VARIABLE","$columns",3607],")",";",["T_WHITESPACE","\n        ",3607],["T_VARIABLE","$columns",3608],["T_WHITESPACE","   ",3608],"=",["T_WHITESPACE"," ",3608],["T_STRING","implode",3608],"(",["T_CONSTANT_ENCAPSED_STRING","','",3608],",",["T_WHITESPACE"," ",3608],["T_VARIABLE","$columns",3608],")",";",["T_WHITESPACE","\n        ",3608],["T_VARIABLE","$values",3609],["T_WHITESPACE","    ",3609],"=",["T_WHITESPACE"," ",3609],["T_STRING","implode",3609],"(",["T_CONSTANT_ENCAPSED_STRING","', '",3609],",",["T_WHITESPACE"," ",3609],["T_VARIABLE","$values",3609],")",";",["T_WHITESPACE","\n\n        ",3609],["T_VARIABLE","$insertSql",3611],["T_WHITESPACE"," ",3611],"=",["T_WHITESPACE"," ",3611],["T_STRING","sprintf",3611],"(",["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO %s (%s) VALUES %s'",3611],",",["T_WHITESPACE"," ",3611],["T_VARIABLE","$tableName",3611],",",["T_WHITESPACE"," ",3611],["T_VARIABLE","$columns",3611],",",["T_WHITESPACE"," ",3611],["T_VARIABLE","$values",3611],")",";",["T_WHITESPACE","\n\n        ",3611],["T_RETURN","return",3613],["T_WHITESPACE"," ",3613],["T_VARIABLE","$insertSql",3613],";",["T_WHITESPACE","\n    ",3613],"}",["T_WHITESPACE","\n\n    ",3614],["T_DOC_COMMENT","\/**\n     * Return ddl type\n     *\n     * @param array $options\n     * @return string\n     *\/",3616],["T_WHITESPACE","\n    ",3621],["T_PROTECTED","protected",3622],["T_WHITESPACE"," ",3622],["T_FUNCTION","function",3622],["T_WHITESPACE"," ",3622],["T_STRING","_getDdlType",3622],"(",["T_VARIABLE","$options",3622],")",["T_WHITESPACE","\n    ",3622],"{",["T_WHITESPACE","\n        ",3623],["T_VARIABLE","$ddlType",3624],["T_WHITESPACE"," ",3624],"=",["T_WHITESPACE"," ",3624],["T_STRING","null",3624],";",["T_WHITESPACE","\n        ",3624],["T_IF","if",3625],["T_WHITESPACE"," ",3625],"(",["T_ISSET","isset",3625],"(",["T_VARIABLE","$options",3625],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",3625],"]",")",")",["T_WHITESPACE"," ",3625],"{",["T_WHITESPACE","\n            ",3625],["T_VARIABLE","$ddlType",3626],["T_WHITESPACE"," ",3626],"=",["T_WHITESPACE"," ",3626],["T_VARIABLE","$options",3626],"[",["T_CONSTANT_ENCAPSED_STRING","'TYPE'",3626],"]",";",["T_WHITESPACE","\n        ",3626],"}",["T_WHITESPACE"," ",3627],["T_ELSEIF","elseif",3627],["T_WHITESPACE"," ",3627],"(",["T_ISSET","isset",3627],"(",["T_VARIABLE","$options",3627],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_TYPE'",3627],"]",")",")",["T_WHITESPACE"," ",3627],"{",["T_WHITESPACE","\n            ",3627],["T_VARIABLE","$ddlType",3628],["T_WHITESPACE"," ",3628],"=",["T_WHITESPACE"," ",3628],["T_VARIABLE","$options",3628],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_TYPE'",3628],"]",";",["T_WHITESPACE","\n        ",3628],"}",["T_WHITESPACE","\n\n        ",3629],["T_RETURN","return",3631],["T_WHITESPACE"," ",3631],["T_VARIABLE","$ddlType",3631],";",["T_WHITESPACE","\n    ",3631],"}",["T_WHITESPACE","\n\n    ",3632],["T_DOC_COMMENT","\/**\n     * Return DDL action\n     *\n     * @param string $action\n     * @return string\n     *\/",3634],["T_WHITESPACE","\n    ",3639],["T_PROTECTED","protected",3640],["T_WHITESPACE"," ",3640],["T_FUNCTION","function",3640],["T_WHITESPACE"," ",3640],["T_STRING","_getDdlAction",3640],"(",["T_VARIABLE","$action",3640],")",["T_WHITESPACE","\n    ",3640],"{",["T_WHITESPACE","\n        ",3641],["T_SWITCH","switch",3642],["T_WHITESPACE"," ",3642],"(",["T_VARIABLE","$action",3642],")",["T_WHITESPACE"," ",3642],"{",["T_WHITESPACE","\n            ",3642],["T_CASE","case",3643],["T_WHITESPACE"," ",3643],["T_STRING","AdapterInterface",3643],["T_DOUBLE_COLON","::",3643],["T_STRING","FK_ACTION_CASCADE",3643],":",["T_WHITESPACE","\n                ",3643],["T_RETURN","return",3644],["T_WHITESPACE"," ",3644],["T_STRING","Table",3644],["T_DOUBLE_COLON","::",3644],["T_STRING","ACTION_CASCADE",3644],";",["T_WHITESPACE","\n            ",3644],["T_CASE","case",3645],["T_WHITESPACE"," ",3645],["T_STRING","AdapterInterface",3645],["T_DOUBLE_COLON","::",3645],["T_STRING","FK_ACTION_SET_NULL",3645],":",["T_WHITESPACE","\n                ",3645],["T_RETURN","return",3646],["T_WHITESPACE"," ",3646],["T_STRING","Table",3646],["T_DOUBLE_COLON","::",3646],["T_STRING","ACTION_SET_NULL",3646],";",["T_WHITESPACE","\n            ",3646],["T_CASE","case",3647],["T_WHITESPACE"," ",3647],["T_STRING","AdapterInterface",3647],["T_DOUBLE_COLON","::",3647],["T_STRING","FK_ACTION_RESTRICT",3647],":",["T_WHITESPACE","\n                ",3647],["T_RETURN","return",3648],["T_WHITESPACE"," ",3648],["T_STRING","Table",3648],["T_DOUBLE_COLON","::",3648],["T_STRING","ACTION_RESTRICT",3648],";",["T_WHITESPACE","\n            ",3648],["T_DEFAULT","default",3649],":",["T_WHITESPACE","\n                ",3649],["T_RETURN","return",3650],["T_WHITESPACE"," ",3650],["T_STRING","Table",3650],["T_DOUBLE_COLON","::",3650],["T_STRING","ACTION_NO_ACTION",3650],";",["T_WHITESPACE","\n        ",3650],"}",["T_WHITESPACE","\n    ",3651],"}",["T_WHITESPACE","\n\n    ",3652],["T_DOC_COMMENT","\/**\n     * Prepare sql date condition\n     *\n     * @param array $condition\n     * @param string $key\n     * @return string\n     *\/",3654],["T_WHITESPACE","\n    ",3660],["T_PROTECTED","protected",3661],["T_WHITESPACE"," ",3661],["T_FUNCTION","function",3661],["T_WHITESPACE"," ",3661],["T_STRING","_prepareSqlDateCondition",3661],"(",["T_VARIABLE","$condition",3661],",",["T_WHITESPACE"," ",3661],["T_VARIABLE","$key",3661],")",["T_WHITESPACE","\n    ",3661],"{",["T_WHITESPACE","\n        ",3662],["T_IF","if",3663],["T_WHITESPACE"," ",3663],"(",["T_EMPTY","empty",3663],"(",["T_VARIABLE","$condition",3663],"[",["T_CONSTANT_ENCAPSED_STRING","'date'",3663],"]",")",")",["T_WHITESPACE"," ",3663],"{",["T_WHITESPACE","\n            ",3663],["T_IF","if",3664],["T_WHITESPACE"," ",3664],"(",["T_EMPTY","empty",3664],"(",["T_VARIABLE","$condition",3664],"[",["T_CONSTANT_ENCAPSED_STRING","'datetime'",3664],"]",")",")",["T_WHITESPACE"," ",3664],"{",["T_WHITESPACE","\n                ",3664],["T_VARIABLE","$result",3665],["T_WHITESPACE"," ",3665],"=",["T_WHITESPACE"," ",3665],["T_VARIABLE","$condition",3665],"[",["T_VARIABLE","$key",3665],"]",";",["T_WHITESPACE","\n            ",3665],"}",["T_WHITESPACE"," ",3666],["T_ELSE","else",3666],["T_WHITESPACE"," ",3666],"{",["T_WHITESPACE","\n                ",3666],["T_VARIABLE","$result",3667],["T_WHITESPACE"," ",3667],"=",["T_WHITESPACE"," ",3667],["T_VARIABLE","$this",3667],["T_OBJECT_OPERATOR","->",3667],["T_STRING","formatDate",3667],"(",["T_VARIABLE","$condition",3667],"[",["T_VARIABLE","$key",3667],"]",")",";",["T_WHITESPACE","\n            ",3667],"}",["T_WHITESPACE","\n        ",3668],"}",["T_WHITESPACE"," ",3669],["T_ELSE","else",3669],["T_WHITESPACE"," ",3669],"{",["T_WHITESPACE","\n            ",3669],["T_VARIABLE","$result",3670],["T_WHITESPACE"," ",3670],"=",["T_WHITESPACE"," ",3670],["T_VARIABLE","$this",3670],["T_OBJECT_OPERATOR","->",3670],["T_STRING","formatDate",3670],"(",["T_VARIABLE","$condition",3670],"[",["T_VARIABLE","$key",3670],"]",")",";",["T_WHITESPACE","\n        ",3670],"}",["T_WHITESPACE","\n\n        ",3671],["T_RETURN","return",3673],["T_WHITESPACE"," ",3673],["T_VARIABLE","$result",3673],";",["T_WHITESPACE","\n    ",3673],"}",["T_WHITESPACE","\n\n    ",3674],["T_DOC_COMMENT","\/**\n     * Try to find installed primary key name, if not - formate new one.\n     *\n     * @param string $tableName Table name\n     * @param string $schemaName OPTIONAL\n     * @return string Primary Key name\n     *\/",3676],["T_WHITESPACE","\n    ",3682],["T_PUBLIC","public",3683],["T_WHITESPACE"," ",3683],["T_FUNCTION","function",3683],["T_WHITESPACE"," ",3683],["T_STRING","getPrimaryKeyName",3683],"(",["T_VARIABLE","$tableName",3683],",",["T_WHITESPACE"," ",3683],["T_VARIABLE","$schemaName",3683],["T_WHITESPACE"," ",3683],"=",["T_WHITESPACE"," ",3683],["T_STRING","null",3683],")",["T_WHITESPACE","\n    ",3683],"{",["T_WHITESPACE","\n        ",3684],["T_VARIABLE","$indexes",3685],["T_WHITESPACE"," ",3685],"=",["T_WHITESPACE"," ",3685],["T_VARIABLE","$this",3685],["T_OBJECT_OPERATOR","->",3685],["T_STRING","getIndexList",3685],"(",["T_VARIABLE","$tableName",3685],",",["T_WHITESPACE"," ",3685],["T_VARIABLE","$schemaName",3685],")",";",["T_WHITESPACE","\n        ",3685],["T_IF","if",3686],["T_WHITESPACE"," ",3686],"(",["T_ISSET","isset",3686],"(",["T_VARIABLE","$indexes",3686],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",3686],"]",")",")",["T_WHITESPACE"," ",3686],"{",["T_WHITESPACE","\n            ",3686],["T_RETURN","return",3687],["T_WHITESPACE"," ",3687],["T_VARIABLE","$indexes",3687],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",3687],"]","[",["T_CONSTANT_ENCAPSED_STRING","'KEY_NAME'",3687],"]",";",["T_WHITESPACE","\n        ",3687],"}",["T_WHITESPACE"," ",3688],["T_ELSE","else",3688],["T_WHITESPACE"," ",3688],"{",["T_WHITESPACE","\n            ",3688],["T_RETURN","return",3689],["T_WHITESPACE"," ",3689],["T_CONSTANT_ENCAPSED_STRING","'PK_'",3689],["T_WHITESPACE"," ",3689],".",["T_WHITESPACE"," ",3689],["T_STRING","strtoupper",3689],"(",["T_VARIABLE","$tableName",3689],")",";",["T_WHITESPACE","\n        ",3689],"}",["T_WHITESPACE","\n    ",3690],"}",["T_WHITESPACE","\n\n    ",3691],["T_DOC_COMMENT","\/**\n     * Parse text size\n     * Returns max allowed size if value great it\n     *\n     * @param string|int $size\n     * @return int\n     *\/",3693],["T_WHITESPACE","\n    ",3699],["T_PROTECTED","protected",3700],["T_WHITESPACE"," ",3700],["T_FUNCTION","function",3700],["T_WHITESPACE"," ",3700],["T_STRING","_parseTextSize",3700],"(",["T_VARIABLE","$size",3700],")",["T_WHITESPACE","\n    ",3700],"{",["T_WHITESPACE","\n        ",3701],["T_VARIABLE","$size",3702],["T_WHITESPACE"," ",3702],"=",["T_WHITESPACE"," ",3702],["T_STRING","trim",3702],"(",["T_VARIABLE","$size",3702],")",";",["T_WHITESPACE","\n        ",3702],["T_VARIABLE","$last",3703],["T_WHITESPACE"," ",3703],"=",["T_WHITESPACE"," ",3703],["T_STRING","strtolower",3703],"(",["T_STRING","substr",3703],"(",["T_VARIABLE","$size",3703],",",["T_WHITESPACE"," ",3703],"-",["T_LNUMBER","1",3703],")",")",";",["T_WHITESPACE","\n\n        ",3703],["T_SWITCH","switch",3705],["T_WHITESPACE"," ",3705],"(",["T_VARIABLE","$last",3705],")",["T_WHITESPACE"," ",3705],"{",["T_WHITESPACE","\n            ",3705],["T_CASE","case",3706],["T_WHITESPACE"," ",3706],["T_CONSTANT_ENCAPSED_STRING","'k'",3706],":",["T_WHITESPACE","\n                ",3706],["T_VARIABLE","$size",3707],["T_WHITESPACE"," ",3707],"=",["T_WHITESPACE"," ",3707],["T_STRING","intval",3707],"(",["T_VARIABLE","$size",3707],")",["T_WHITESPACE"," ",3707],"*",["T_WHITESPACE"," ",3707],["T_LNUMBER","1024",3707],";",["T_WHITESPACE","\n                ",3707],["T_BREAK","break",3708],";",["T_WHITESPACE","\n            ",3708],["T_CASE","case",3709],["T_WHITESPACE"," ",3709],["T_CONSTANT_ENCAPSED_STRING","'m'",3709],":",["T_WHITESPACE","\n                ",3709],["T_VARIABLE","$size",3710],["T_WHITESPACE"," ",3710],"=",["T_WHITESPACE"," ",3710],["T_STRING","intval",3710],"(",["T_VARIABLE","$size",3710],")",["T_WHITESPACE"," ",3710],"*",["T_WHITESPACE"," ",3710],["T_LNUMBER","1024",3710],["T_WHITESPACE"," ",3710],"*",["T_WHITESPACE"," ",3710],["T_LNUMBER","1024",3710],";",["T_WHITESPACE","\n                ",3710],["T_BREAK","break",3711],";",["T_WHITESPACE","\n            ",3711],["T_CASE","case",3712],["T_WHITESPACE"," ",3712],["T_CONSTANT_ENCAPSED_STRING","'g'",3712],":",["T_WHITESPACE","\n                ",3712],["T_VARIABLE","$size",3713],["T_WHITESPACE"," ",3713],"=",["T_WHITESPACE"," ",3713],["T_STRING","intval",3713],"(",["T_VARIABLE","$size",3713],")",["T_WHITESPACE"," ",3713],"*",["T_WHITESPACE"," ",3713],["T_LNUMBER","1024",3713],["T_WHITESPACE"," ",3713],"*",["T_WHITESPACE"," ",3713],["T_LNUMBER","1024",3713],["T_WHITESPACE"," ",3713],"*",["T_WHITESPACE"," ",3713],["T_LNUMBER","1024",3713],";",["T_WHITESPACE","\n                ",3713],["T_BREAK","break",3714],";",["T_WHITESPACE","\n        ",3714],"}",["T_WHITESPACE","\n\n        ",3715],["T_IF","if",3717],["T_WHITESPACE"," ",3717],"(",["T_EMPTY","empty",3717],"(",["T_VARIABLE","$size",3717],")",")",["T_WHITESPACE"," ",3717],"{",["T_WHITESPACE","\n            ",3717],["T_RETURN","return",3718],["T_WHITESPACE"," ",3718],["T_STRING","Table",3718],["T_DOUBLE_COLON","::",3718],["T_STRING","DEFAULT_TEXT_SIZE",3718],";",["T_WHITESPACE","\n        ",3718],"}",["T_WHITESPACE","\n        ",3719],["T_IF","if",3720],["T_WHITESPACE"," ",3720],"(",["T_VARIABLE","$size",3720],["T_WHITESPACE"," ",3720],["T_IS_GREATER_OR_EQUAL",">=",3720],["T_WHITESPACE"," ",3720],["T_STRING","Table",3720],["T_DOUBLE_COLON","::",3720],["T_STRING","MAX_TEXT_SIZE",3720],")",["T_WHITESPACE"," ",3720],"{",["T_WHITESPACE","\n            ",3720],["T_RETURN","return",3721],["T_WHITESPACE"," ",3721],["T_STRING","Table",3721],["T_DOUBLE_COLON","::",3721],["T_STRING","MAX_TEXT_SIZE",3721],";",["T_WHITESPACE","\n        ",3721],"}",["T_WHITESPACE","\n\n        ",3722],["T_RETURN","return",3724],["T_WHITESPACE"," ",3724],["T_STRING","intval",3724],"(",["T_VARIABLE","$size",3724],")",";",["T_WHITESPACE","\n    ",3724],"}",["T_WHITESPACE","\n\n    ",3725],["T_DOC_COMMENT","\/**\n     * Converts fetched blob into raw binary PHP data.\n     * The MySQL drivers do it nice, no processing required.\n     *\n     * @param mixed $value\n     * @return mixed\n     *\/",3727],["T_WHITESPACE","\n    ",3733],["T_PUBLIC","public",3734],["T_WHITESPACE"," ",3734],["T_FUNCTION","function",3734],["T_WHITESPACE"," ",3734],["T_STRING","decodeVarbinary",3734],"(",["T_VARIABLE","$value",3734],")",["T_WHITESPACE","\n    ",3734],"{",["T_WHITESPACE","\n        ",3735],["T_RETURN","return",3736],["T_WHITESPACE"," ",3736],["T_VARIABLE","$value",3736],";",["T_WHITESPACE","\n    ",3736],"}",["T_WHITESPACE","\n\n    ",3737],["T_DOC_COMMENT","\/**\n     * Create trigger\n     *\n     * @param \\Magento\\Framework\\DB\\Ddl\\Trigger $trigger\n     * @throws \\Zend_Db_Exception\n     * @return \\Zend_Db_Statement_Pdo\n     *\/",3739],["T_WHITESPACE","\n    ",3745],["T_PUBLIC","public",3746],["T_WHITESPACE"," ",3746],["T_FUNCTION","function",3746],["T_WHITESPACE"," ",3746],["T_STRING","createTrigger",3746],"(",["T_NS_SEPARATOR","\\",3746],["T_STRING","Magento",3746],["T_NS_SEPARATOR","\\",3746],["T_STRING","Framework",3746],["T_NS_SEPARATOR","\\",3746],["T_STRING","DB",3746],["T_NS_SEPARATOR","\\",3746],["T_STRING","Ddl",3746],["T_NS_SEPARATOR","\\",3746],["T_STRING","Trigger",3746],["T_WHITESPACE"," ",3746],["T_VARIABLE","$trigger",3746],")",["T_WHITESPACE","\n    ",3746],"{",["T_WHITESPACE","\n        ",3747],["T_IF","if",3748],["T_WHITESPACE"," ",3748],"(","!",["T_VARIABLE","$trigger",3748],["T_OBJECT_OPERATOR","->",3748],["T_STRING","getStatements",3748],"(",")",")",["T_WHITESPACE"," ",3748],"{",["T_WHITESPACE","\n            ",3748],["T_THROW","throw",3749],["T_WHITESPACE"," ",3749],["T_NEW","new",3749],["T_WHITESPACE"," ",3749],["T_NS_SEPARATOR","\\",3749],["T_STRING","Zend_Db_Exception",3749],"(",["T_WHITESPACE","\n                ",3749],["T_STRING_CAST","(string)",3750],["T_NEW","new",3750],["T_WHITESPACE"," ",3750],["T_NS_SEPARATOR","\\",3750],["T_STRING","Magento",3750],["T_NS_SEPARATOR","\\",3750],["T_STRING","Framework",3750],["T_NS_SEPARATOR","\\",3750],["T_STRING","Phrase",3750],"(",["T_WHITESPACE","\n                    ",3750],["T_CONSTANT_ENCAPSED_STRING","'Trigger %1 has not statements available'",3751],",",["T_WHITESPACE","\n                    ",3751],"[",["T_VARIABLE","$trigger",3752],["T_OBJECT_OPERATOR","->",3752],["T_STRING","getName",3752],"(",")","]",["T_WHITESPACE","\n                ",3752],")",["T_WHITESPACE","\n            ",3753],")",";",["T_WHITESPACE","\n        ",3754],"}",["T_WHITESPACE","\n\n        ",3755],["T_VARIABLE","$statements",3757],["T_WHITESPACE"," ",3757],"=",["T_WHITESPACE"," ",3757],["T_STRING","implode",3757],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",3757],",",["T_WHITESPACE"," ",3757],["T_VARIABLE","$trigger",3757],["T_OBJECT_OPERATOR","->",3757],["T_STRING","getStatements",3757],"(",")",")",";",["T_WHITESPACE","\n\n        ",3757],["T_VARIABLE","$sql",3759],["T_WHITESPACE"," ",3759],"=",["T_WHITESPACE"," ",3759],["T_STRING","sprintf",3759],"(",["T_WHITESPACE","\n            ",3759],["T_CONSTANT_ENCAPSED_STRING","\"CREATE TRIGGER %s %s %s ON %s FOR EACH ROW\\nBEGIN\\n%s\\nEND\"",3760],",",["T_WHITESPACE","\n            ",3760],["T_VARIABLE","$trigger",3761],["T_OBJECT_OPERATOR","->",3761],["T_STRING","getName",3761],"(",")",",",["T_WHITESPACE","\n            ",3761],["T_VARIABLE","$trigger",3762],["T_OBJECT_OPERATOR","->",3762],["T_STRING","getTime",3762],"(",")",",",["T_WHITESPACE","\n            ",3762],["T_VARIABLE","$trigger",3763],["T_OBJECT_OPERATOR","->",3763],["T_STRING","getEvent",3763],"(",")",",",["T_WHITESPACE","\n            ",3763],["T_VARIABLE","$trigger",3764],["T_OBJECT_OPERATOR","->",3764],["T_STRING","getTable",3764],"(",")",",",["T_WHITESPACE","\n            ",3764],["T_VARIABLE","$statements",3765],["T_WHITESPACE","\n        ",3765],")",";",["T_WHITESPACE","\n\n        ",3766],["T_RETURN","return",3768],["T_WHITESPACE"," ",3768],["T_VARIABLE","$this",3768],["T_OBJECT_OPERATOR","->",3768],["T_STRING","multiQuery",3768],"(",["T_VARIABLE","$sql",3768],")",";",["T_WHITESPACE","\n    ",3768],"}",["T_WHITESPACE","\n\n    ",3769],["T_DOC_COMMENT","\/**\n     * Drop trigger from database\n     *\n     * @param string $triggerName\n     * @param string|null $schemaName\n     * @return bool\n     * @throws \\InvalidArgumentException\n     *\/",3771],["T_WHITESPACE","\n    ",3778],["T_PUBLIC","public",3779],["T_WHITESPACE"," ",3779],["T_FUNCTION","function",3779],["T_WHITESPACE"," ",3779],["T_STRING","dropTrigger",3779],"(",["T_VARIABLE","$triggerName",3779],",",["T_WHITESPACE"," ",3779],["T_VARIABLE","$schemaName",3779],["T_WHITESPACE"," ",3779],"=",["T_WHITESPACE"," ",3779],["T_STRING","null",3779],")",["T_WHITESPACE","\n    ",3779],"{",["T_WHITESPACE","\n        ",3780],["T_IF","if",3781],["T_WHITESPACE"," ",3781],"(",["T_EMPTY","empty",3781],"(",["T_VARIABLE","$triggerName",3781],")",")",["T_WHITESPACE"," ",3781],"{",["T_WHITESPACE","\n            ",3781],["T_THROW","throw",3782],["T_WHITESPACE"," ",3782],["T_NEW","new",3782],["T_WHITESPACE"," ",3782],["T_NS_SEPARATOR","\\",3782],["T_STRING","InvalidArgumentException",3782],"(",["T_STRING_CAST","(string)",3782],["T_NEW","new",3782],["T_WHITESPACE"," ",3782],["T_NS_SEPARATOR","\\",3782],["T_STRING","Magento",3782],["T_NS_SEPARATOR","\\",3782],["T_STRING","Framework",3782],["T_NS_SEPARATOR","\\",3782],["T_STRING","Phrase",3782],"(",["T_CONSTANT_ENCAPSED_STRING","'Trigger name is not defined'",3782],")",")",";",["T_WHITESPACE","\n        ",3782],"}",["T_WHITESPACE","\n\n        ",3783],["T_VARIABLE","$triggerName",3785],["T_WHITESPACE"," ",3785],"=",["T_WHITESPACE"," ",3785],"(",["T_VARIABLE","$schemaName",3785],["T_WHITESPACE"," ",3785],"?",["T_WHITESPACE"," ",3785],["T_VARIABLE","$schemaName",3785],["T_WHITESPACE"," ",3785],".",["T_WHITESPACE"," ",3785],["T_CONSTANT_ENCAPSED_STRING","'.'",3785],["T_WHITESPACE"," ",3785],":",["T_WHITESPACE"," ",3785],["T_CONSTANT_ENCAPSED_STRING","''",3785],")",["T_WHITESPACE"," ",3785],".",["T_WHITESPACE"," ",3785],["T_VARIABLE","$triggerName",3785],";",["T_WHITESPACE","\n\n        ",3785],["T_VARIABLE","$sql",3787],["T_WHITESPACE"," ",3787],"=",["T_WHITESPACE"," ",3787],["T_CONSTANT_ENCAPSED_STRING","'DROP TRIGGER IF EXISTS '",3787],["T_WHITESPACE"," ",3787],".",["T_WHITESPACE"," ",3787],["T_VARIABLE","$this",3787],["T_OBJECT_OPERATOR","->",3787],["T_STRING","quoteIdentifier",3787],"(",["T_VARIABLE","$triggerName",3787],")",";",["T_WHITESPACE","\n        ",3787],["T_VARIABLE","$this",3788],["T_OBJECT_OPERATOR","->",3788],["T_STRING","query",3788],"(",["T_VARIABLE","$sql",3788],")",";",["T_WHITESPACE","\n\n        ",3788],["T_RETURN","return",3790],["T_WHITESPACE"," ",3790],["T_STRING","true",3790],";",["T_WHITESPACE","\n    ",3790],"}",["T_WHITESPACE","\n\n    ",3791],["T_DOC_COMMENT","\/**\n     * Check if all transactions have been committed\n     *\n     * @return void\n     *\/",3793],["T_WHITESPACE","\n    ",3797],["T_PUBLIC","public",3798],["T_WHITESPACE"," ",3798],["T_FUNCTION","function",3798],["T_WHITESPACE"," ",3798],["T_STRING","__destruct",3798],"(",")",["T_WHITESPACE","\n    ",3798],"{",["T_WHITESPACE","\n        ",3799],["T_IF","if",3800],["T_WHITESPACE"," ",3800],"(",["T_VARIABLE","$this",3800],["T_OBJECT_OPERATOR","->",3800],["T_STRING","_transactionLevel",3800],["T_WHITESPACE"," ",3800],">",["T_WHITESPACE"," ",3800],["T_LNUMBER","0",3800],")",["T_WHITESPACE"," ",3800],"{",["T_WHITESPACE","\n            ",3800],["T_STRING","trigger_error",3801],"(",["T_CONSTANT_ENCAPSED_STRING","'Some transactions have not been committed or rolled back'",3801],",",["T_WHITESPACE"," ",3801],["T_STRING","E_USER_ERROR",3801],")",";",["T_WHITESPACE","\n        ",3801],"}",["T_WHITESPACE","\n    ",3802],"}",["T_WHITESPACE","\n\n    ",3803],["T_DOC_COMMENT","\/**\n     * Retrieve tables list\n     *\n     * @param null|string $likeCondition\n     * @return array\n     *\/",3805],["T_WHITESPACE","\n    ",3810],["T_PUBLIC","public",3811],["T_WHITESPACE"," ",3811],["T_FUNCTION","function",3811],["T_WHITESPACE"," ",3811],["T_STRING","getTables",3811],"(",["T_VARIABLE","$likeCondition",3811],["T_WHITESPACE"," ",3811],"=",["T_WHITESPACE"," ",3811],["T_STRING","null",3811],")",["T_WHITESPACE","\n    ",3811],"{",["T_WHITESPACE","\n        ",3812],["T_VARIABLE","$sql",3813],["T_WHITESPACE"," ",3813],"=",["T_WHITESPACE"," ",3813],["T_STRING","is_null",3813],"(",["T_VARIABLE","$likeCondition",3813],")",["T_WHITESPACE"," ",3813],"?",["T_WHITESPACE"," ",3813],["T_CONSTANT_ENCAPSED_STRING","'SHOW TABLES'",3813],["T_WHITESPACE"," ",3813],":",["T_WHITESPACE"," ",3813],["T_STRING","sprintf",3813],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW TABLES LIKE '%s'\"",3813],",",["T_WHITESPACE"," ",3813],["T_VARIABLE","$likeCondition",3813],")",";",["T_WHITESPACE","\n        ",3813],["T_VARIABLE","$result",3814],["T_WHITESPACE"," ",3814],"=",["T_WHITESPACE"," ",3814],["T_VARIABLE","$this",3814],["T_OBJECT_OPERATOR","->",3814],["T_STRING","query",3814],"(",["T_VARIABLE","$sql",3814],")",";",["T_WHITESPACE","\n        ",3814],["T_VARIABLE","$tables",3815],["T_WHITESPACE"," ",3815],"=",["T_WHITESPACE"," ",3815],"[","]",";",["T_WHITESPACE","\n        ",3815],["T_WHILE","while",3816],["T_WHITESPACE"," ",3816],"(",["T_VARIABLE","$row",3816],["T_WHITESPACE"," ",3816],"=",["T_WHITESPACE"," ",3816],["T_VARIABLE","$result",3816],["T_OBJECT_OPERATOR","->",3816],["T_STRING","fetchColumn",3816],"(",")",")",["T_WHITESPACE"," ",3816],"{",["T_WHITESPACE","\n            ",3816],["T_VARIABLE","$tables",3817],"[","]",["T_WHITESPACE"," ",3817],"=",["T_WHITESPACE"," ",3817],["T_VARIABLE","$row",3817],";",["T_WHITESPACE","\n        ",3817],"}",["T_WHITESPACE","\n        ",3818],["T_RETURN","return",3819],["T_WHITESPACE"," ",3819],["T_VARIABLE","$tables",3819],";",["T_WHITESPACE","\n    ",3819],"}",["T_WHITESPACE","\n\n    ",3820],["T_DOC_COMMENT","\/**\n     * Returns auto increment field if exists\n     *\n     * @param string $tableName\n     * @param string|null $schemaName\n     * @return string|bool\n     *\/",3822],["T_WHITESPACE","\n    ",3828],["T_PUBLIC","public",3829],["T_WHITESPACE"," ",3829],["T_FUNCTION","function",3829],["T_WHITESPACE"," ",3829],["T_STRING","getAutoIncrementField",3829],"(",["T_VARIABLE","$tableName",3829],",",["T_WHITESPACE"," ",3829],["T_VARIABLE","$schemaName",3829],["T_WHITESPACE"," ",3829],"=",["T_WHITESPACE"," ",3829],["T_STRING","null",3829],")",["T_WHITESPACE","\n    ",3829],"{",["T_WHITESPACE","\n        ",3830],["T_VARIABLE","$indexName",3831],["T_WHITESPACE"," ",3831],"=",["T_WHITESPACE"," ",3831],["T_VARIABLE","$this",3831],["T_OBJECT_OPERATOR","->",3831],["T_STRING","getPrimaryKeyName",3831],"(",["T_VARIABLE","$tableName",3831],",",["T_WHITESPACE"," ",3831],["T_VARIABLE","$schemaName",3831],")",";",["T_WHITESPACE","\n        ",3831],["T_VARIABLE","$indexes",3832],["T_WHITESPACE"," ",3832],"=",["T_WHITESPACE"," ",3832],["T_VARIABLE","$this",3832],["T_OBJECT_OPERATOR","->",3832],["T_STRING","getIndexList",3832],"(",["T_VARIABLE","$tableName",3832],")",";",["T_WHITESPACE","\n        ",3832],["T_IF","if",3833],["T_WHITESPACE"," ",3833],"(",["T_VARIABLE","$indexName",3833],["T_WHITESPACE"," ",3833],["T_BOOLEAN_AND","&&",3833],["T_WHITESPACE"," ",3833],["T_STRING","count",3833],"(",["T_VARIABLE","$indexes",3833],"[",["T_VARIABLE","$indexName",3833],"]","[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",3833],"]",")",["T_WHITESPACE"," ",3833],["T_IS_EQUAL","==",3833],["T_WHITESPACE"," ",3833],["T_LNUMBER","1",3833],")",["T_WHITESPACE"," ",3833],"{",["T_WHITESPACE","\n            ",3833],["T_RETURN","return",3834],["T_WHITESPACE"," ",3834],["T_STRING","current",3834],"(",["T_VARIABLE","$indexes",3834],"[",["T_VARIABLE","$indexName",3834],"]","[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",3834],"]",")",";",["T_WHITESPACE","\n        ",3834],"}",["T_WHITESPACE","\n        ",3835],["T_RETURN","return",3836],["T_WHITESPACE"," ",3836],["T_STRING","false",3836],";",["T_WHITESPACE","\n    ",3836],"}",["T_WHITESPACE","\n",3837],"}",["T_WHITESPACE","\n",3838]]
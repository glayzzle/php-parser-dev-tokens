[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Asset",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * \\Iterator that aggregates one or more assets and provides a single public file with equivalent behavior\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Merged",11],["T_WHITESPACE"," ",11],["T_IMPLEMENTS","implements",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Iterator",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Directory for dynamically generated public view files, relative to STATIC_VIEW\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","CACHE_VIEW_REL",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'_cache'",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$logger",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var MergeStrategyInterface\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$mergeStrategy",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\View\\Asset\\Repository\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$assetRepo",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var MergeableInterface[]\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$assets",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$contentType",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$isInitialized",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","false",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param MergeStrategyInterface $mergeStrategy\n     * @param \\Magento\\Framework\\View\\Asset\\Repository $assetRepo\n     * @param MergeableInterface[] $assets\n     * @throws \\InvalidArgumentException\n     *\/",48],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","__construct",55],"(",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Psr",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Log",56],["T_NS_SEPARATOR","\\",56],["T_STRING","LoggerInterface",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$logger",56],",",["T_WHITESPACE","\n        ",56],["T_STRING","MergeStrategyInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$mergeStrategy",57],",",["T_WHITESPACE","\n        ",57],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Framework",58],["T_NS_SEPARATOR","\\",58],["T_STRING","View",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Asset",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Repository",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$assetRepo",58],",",["T_WHITESPACE","\n        ",58],["T_ARRAY","array",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$assets",59],["T_WHITESPACE","\n    ",59],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","logger",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$logger",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","mergeStrategy",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$mergeStrategy",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assetRepo",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$assetRepo",63],";",["T_WHITESPACE","\n\n        ",63],["T_IF","if",65],["T_WHITESPACE"," ",65],"(","!",["T_VARIABLE","$assets",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_THROW","throw",66],["T_WHITESPACE"," ",66],["T_NEW","new",66],["T_WHITESPACE"," ",66],["T_NS_SEPARATOR","\\",66],["T_STRING","InvalidArgumentException",66],"(",["T_CONSTANT_ENCAPSED_STRING","'At least one asset has to be passed for merging.'",66],")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n        ",67],["T_DOC_COMMENT","\/** @var $asset MergeableInterface *\/",68],["T_WHITESPACE","\n        ",68],["T_FOREACH","foreach",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$assets",69],["T_WHITESPACE"," ",69],["T_AS","as",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$asset",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(","!","(",["T_VARIABLE","$asset",70],["T_WHITESPACE"," ",70],["T_INSTANCEOF","instanceof",70],["T_WHITESPACE"," ",70],["T_STRING","MergeableInterface",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n                ",70],["T_THROW","throw",71],["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_NS_SEPARATOR","\\",71],["T_STRING","InvalidArgumentException",71],"(",["T_WHITESPACE","\n                    ",71],["T_CONSTANT_ENCAPSED_STRING","'Asset has to implement \\Magento\\Framework\\View\\Asset\\MergeableInterface.'",72],["T_WHITESPACE","\n                ",72],")",";",["T_WHITESPACE","\n            ",73],"}",["T_WHITESPACE","\n            ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","contentType",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","contentType",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$asset",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getContentType",76],"(",")",";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE"," ",77],["T_ELSEIF","elseif",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$asset",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getContentType",77],"(",")",["T_WHITESPACE"," ",77],["T_IS_NOT_EQUAL","!=",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","contentType",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                ",77],["T_THROW","throw",78],["T_WHITESPACE"," ",78],["T_NEW","new",78],["T_WHITESPACE"," ",78],["T_NS_SEPARATOR","\\",78],["T_STRING","InvalidArgumentException",78],"(",["T_WHITESPACE","\n                    ",78],"\"",["T_ENCAPSED_AND_WHITESPACE","Content type '",79],["T_CURLY_OPEN","{",79],["T_VARIABLE","$asset",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getContentType",79],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","' cannot be merged with '",79],["T_CURLY_OPEN","{",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","contentType",79],"}",["T_ENCAPSED_AND_WHITESPACE","'.",79],"\"",["T_WHITESPACE","\n                ",79],")",";",["T_WHITESPACE","\n            ",80],"}",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assets",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$assets",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Attempt to merge assets, falling back to original non-merged ones, if merging fails\n     *\n     * @return void\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","initialize",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","isInitialized",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","isInitialized",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","true",94],";",["T_WHITESPACE","\n            ",94],["T_TRY","try",95],["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$mergedAsset",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","createMergedAsset",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assets",96],")",";",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","mergeStrategy",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","merge",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assets",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$mergedAsset",97],")",";",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assets",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[",["T_VARIABLE","$mergedAsset",98],"]",";",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE"," ",99],["T_CATCH","catch",99],["T_WHITESPACE"," ",99],"(",["T_NS_SEPARATOR","\\",99],["T_STRING","Exception",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$e",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","logger",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","critical",100],"(",["T_VARIABLE","$e",100],")",";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Create an asset object for merged file\n     *\n     * @param array $assets\n     * @return MergeableInterface\n     *\/",105],["T_WHITESPACE","\n    ",110],["T_PRIVATE","private",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","createMergedAsset",111],"(",["T_ARRAY","array",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$assets",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$paths",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],"[","]",";",["T_WHITESPACE","\n        ",113],["T_DOC_COMMENT","\/** @var MergeableInterface $asset *\/",114],["T_WHITESPACE","\n        ",114],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$assets",115],["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$asset",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$paths",116],"[","]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$asset",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getPath",116],"(",")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$paths",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","array_unique",118],"(",["T_VARIABLE","$paths",118],")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$filePath",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","md5",119],"(",["T_STRING","implode",119],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$paths",119],")",")",["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'.'",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","contentType",119],";",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","assetRepo",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","createArbitrary",120],"(",["T_VARIABLE","$filePath",120],",",["T_WHITESPACE"," ",120],["T_STRING","self",120],["T_DOUBLE_COLON","::",120],["T_STRING","getRelativeDir",120],"(",")",")",";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\n     * @return AssetInterface\n     *\/",123],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","current",128],"(",")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","initialize",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","current",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assets",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",134],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","key",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","initialize",139],"(",")",";",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","key",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assets",140],")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",143],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","next",146],"(",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","initialize",148],"(",")",";",["T_WHITESPACE","\n        ",148],["T_STRING","next",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assets",149],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",152],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","rewind",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","initialize",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_STRING","reset",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assets",158],")",";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",161],["T_WHITESPACE","\n    ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","valid",164],"(",")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","initialize",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_BOOL_CAST","(bool)",167],["T_STRING","current",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assets",167],")",";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Returns directory for storing merged files relative to STATIC_VIEW\n     *\n     * @return string\n     *\/",170],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_STATIC","static",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","getRelativeDir",175],"(",")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_STRING","self",177],["T_DOUBLE_COLON","::",177],["T_STRING","CACHE_VIEW_REL",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'\/merged'",177],";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n",178],"}",["T_WHITESPACE","\n",179]]
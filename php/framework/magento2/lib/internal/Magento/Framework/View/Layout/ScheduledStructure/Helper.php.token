[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Layout",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ScheduledStructure",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","View",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Layout",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","State",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Helper",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_COMMENT","\/**#@+\n     * Scheduled structure array indexes\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","SCHEDULED_STRUCTURE_INDEX_TYPE",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_LNUMBER","0",16],";",["T_WHITESPACE","\n    ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","SCHEDULED_STRUCTURE_INDEX_ALIAS",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","1",17],";",["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","SCHEDULED_STRUCTURE_INDEX_PARENT_NAME",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_LNUMBER","2",18],";",["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","SCHEDULED_STRUCTURE_INDEX_SIBLING_NAME",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_LNUMBER","3",19],";",["T_WHITESPACE","\n    ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","SCHEDULED_STRUCTURE_INDEX_IS_AFTER",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_LNUMBER","4",20],";",["T_WHITESPACE","\n    ",20],["T_COMMENT","\/**#@-*\/",21],["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Anonymous block counter\n     *\n     * @var int\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$counter",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_LNUMBER","0",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$logger",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var State\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$state",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param State $state\n     *\/",40],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","__construct",44],"(",["T_WHITESPACE","\n        ",44],["T_NS_SEPARATOR","\\",45],["T_STRING","Psr",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Log",45],["T_NS_SEPARATOR","\\",45],["T_STRING","LoggerInterface",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$logger",45],",",["T_WHITESPACE","\n        ",45],["T_STRING","State",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$state",46],["T_WHITESPACE","\n    ",46],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","logger",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$logger",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","state",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$state",49],";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Generate anonymous element name for structure\n     *\n     * @param string $class\n     * @return string\n     *\/",52],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_generateAnonymousName",58],"(",["T_VARIABLE","$class",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$position",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","strpos",60],"(",["T_VARIABLE","$class",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'\\\\Block\\\\'",60],")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$key",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$position",61],["T_WHITESPACE"," ",61],["T_IS_NOT_IDENTICAL","!==",61],["T_WHITESPACE"," ",61],["T_STRING","false",61],["T_WHITESPACE"," ",61],"?",["T_WHITESPACE"," ",61],["T_STRING","substr",61],"(",["T_VARIABLE","$class",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$position",61],["T_WHITESPACE"," ",61],"+",["T_WHITESPACE"," ",61],["T_LNUMBER","7",61],")",["T_WHITESPACE"," ",61],":",["T_WHITESPACE"," ",61],["T_VARIABLE","$class",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$key",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","strtolower",62],"(",["T_STRING","trim",62],"(",["T_VARIABLE","$key",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'_'",62],")",")",";",["T_WHITESPACE","\n        ",62],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$key",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","counter",63],["T_INC","++",63],";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Populate queue for generating structural elements\n     *\n     * @param Layout\\ScheduledStructure $scheduledStructure\n     * @param \\Magento\\Framework\\View\\Layout\\Element $currentNode\n     * @param \\Magento\\Framework\\View\\Layout\\Element $parentNode\n     * @return string\n     * @see scheduleElement() where the scheduledStructure is used\n     *\/",66],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","scheduleStructure",75],"(",["T_WHITESPACE","\n        ",75],["T_STRING","Layout",76],["T_NS_SEPARATOR","\\",76],["T_STRING","ScheduledStructure",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$scheduledStructure",76],",",["T_WHITESPACE","\n        ",76],["T_STRING","Layout",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Element",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$currentNode",77],",",["T_WHITESPACE","\n        ",77],["T_STRING","Layout",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Element",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$parentNode",78],["T_WHITESPACE","\n    ",78],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n        ",79],["T_COMMENT","\/\/ if it hasn't a name it must be generated\n",80],["T_WHITESPACE","        ",81],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_STRING_CAST","(string)",81],["T_VARIABLE","$currentNode",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getAttribute",81],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$name",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_generateAnonymousName",82],"(",["T_VARIABLE","$parentNode",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getElementName",82],"(",")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'_schedule_block'",82],")",";",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$currentNode",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","setAttribute",83],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$name",83],")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$path",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$name",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING_CAST","(string)",85],["T_VARIABLE","$currentNode",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getAttribute",85],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",85],")",";",["T_WHITESPACE","\n\n        ",85],["T_COMMENT","\/\/ Prepare scheduled element with default parameters [type, alias, parentName, siblingName, isAfter]\n",87],["T_WHITESPACE","        ",88],["T_VARIABLE","$row",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],"[",["T_WHITESPACE","\n            ",88],["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","SCHEDULED_STRUCTURE_INDEX_TYPE",89],["T_WHITESPACE","           ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$currentNode",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getName",89],"(",")",",",["T_WHITESPACE","\n            ",89],["T_STRING","self",90],["T_DOUBLE_COLON","::",90],["T_STRING","SCHEDULED_STRUCTURE_INDEX_ALIAS",90],["T_WHITESPACE","          ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","''",90],",",["T_WHITESPACE","\n            ",90],["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","SCHEDULED_STRUCTURE_INDEX_PARENT_NAME",91],["T_WHITESPACE","    ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","''",91],",",["T_WHITESPACE","\n            ",91],["T_STRING","self",92],["T_DOUBLE_COLON","::",92],["T_STRING","SCHEDULED_STRUCTURE_INDEX_SIBLING_NAME",92],["T_WHITESPACE","   ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_STRING","null",92],",",["T_WHITESPACE","\n            ",92],["T_STRING","self",93],["T_DOUBLE_COLON","::",93],["T_STRING","SCHEDULED_STRUCTURE_INDEX_IS_AFTER",93],["T_WHITESPACE","       ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_STRING","true",93],",",["T_WHITESPACE","\n        ",93],"]",";",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$parentName",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$parentNode",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getElementName",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_COMMENT","\/\/if this element has a parent element, there must be reset [alias, parentName, siblingName, isAfter]\n",97],["T_WHITESPACE","        ",98],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$parentName",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$row",99],"[",["T_STRING","self",99],["T_DOUBLE_COLON","::",99],["T_STRING","SCHEDULED_STRUCTURE_INDEX_ALIAS",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING_CAST","(string)",99],["T_VARIABLE","$currentNode",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getAttribute",99],"(",["T_CONSTANT_ENCAPSED_STRING","'as'",99],")",";",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$row",100],"[",["T_STRING","self",100],["T_DOUBLE_COLON","::",100],["T_STRING","SCHEDULED_STRUCTURE_INDEX_PARENT_NAME",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$parentName",100],";",["T_WHITESPACE","\n\n            ",100],["T_LIST","list",102],"(",["T_VARIABLE","$row",102],"[",["T_STRING","self",102],["T_DOUBLE_COLON","::",102],["T_STRING","SCHEDULED_STRUCTURE_INDEX_SIBLING_NAME",102],"]",",",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$row",103],"[",["T_STRING","self",103],["T_DOUBLE_COLON","::",103],["T_STRING","SCHEDULED_STRUCTURE_INDEX_IS_AFTER",103],"]",")",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_beforeAfterToSibling",103],"(",["T_VARIABLE","$currentNode",103],")",";",["T_WHITESPACE","\n\n            ",103],["T_COMMENT","\/\/ materialized path for referencing nodes in the plain array of _scheduledStructure\n",105],["T_WHITESPACE","            ",106],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$scheduledStructure",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","hasPath",106],"(",["T_VARIABLE","$parentName",106],")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$path",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$scheduledStructure",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getPath",107],"(",["T_VARIABLE","$parentName",107],")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'\/'",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$path",107],";",["T_WHITESPACE","\n            ",107],"}",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_overrideElementWorkaround",111],"(",["T_VARIABLE","$scheduledStructure",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$name",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$path",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$scheduledStructure",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","setPathElement",112],"(",["T_VARIABLE","$name",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$path",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$scheduledStructure",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setStructureElement",113],"(",["T_VARIABLE","$name",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$row",113],")",";",["T_WHITESPACE","\n        ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$name",114],";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Destroy previous element with same name and all its children, if new element overrides it\n     *\n     * This is a workaround to handle situation, when an element emerges with name of element that already exists.\n     * In this case we destroy entire structure of the former element and replace with the new one.\n     *\n     * @param Layout\\ScheduledStructure $scheduledStructure\n     * @param string $name\n     * @param string $path\n     * @return void\n     *\/",117],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","_overrideElementWorkaround",128],"(",["T_STRING","Layout",128],["T_NS_SEPARATOR","\\",128],["T_STRING","ScheduledStructure",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$scheduledStructure",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$name",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$path",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$scheduledStructure",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","hasStructureElement",130],"(",["T_VARIABLE","$name",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$scheduledStructure",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setStructureElementData",131],"(",["T_VARIABLE","$name",131],",",["T_WHITESPACE"," ",131],"[","]",")",";",["T_WHITESPACE","\n            ",131],["T_FOREACH","foreach",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$scheduledStructure",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getPaths",132],"(",")",["T_WHITESPACE"," ",132],["T_AS","as",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$potentialChild",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$childPath",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_LNUMBER","0",133],["T_WHITESPACE"," ",133],["T_IS_IDENTICAL","===",133],["T_WHITESPACE"," ",133],["T_STRING","strpos",133],"(",["T_VARIABLE","$childPath",133],",",["T_WHITESPACE"," ",133],"\"",["T_CURLY_OPEN","{",133],["T_VARIABLE","$path",133],"}",["T_ENCAPSED_AND_WHITESPACE","\/",133],"\"",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                    ",133],["T_VARIABLE","$scheduledStructure",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","unsetPathElement",134],"(",["T_VARIABLE","$potentialChild",134],")",";",["T_WHITESPACE","\n                    ",134],["T_VARIABLE","$scheduledStructure",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","unsetStructureElement",135],"(",["T_VARIABLE","$potentialChild",135],")",";",["T_WHITESPACE","\n                ",135],"}",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Analyze \"before\" and \"after\" information in the node and return sibling name and whether \"after\" or \"before\"\n     *\n     * @param \\Magento\\Framework\\View\\Layout\\Element $node\n     * @return array\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","_beforeAfterToSibling",147],"(",["T_VARIABLE","$node",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$result",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],"[",["T_STRING","null",149],",",["T_WHITESPACE"," ",149],["T_STRING","true",149],"]",";",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_ISSET","isset",150],"(",["T_VARIABLE","$node",150],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",150],"]",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$result",151],"[",["T_LNUMBER","0",151],"]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING_CAST","(string)",151],["T_VARIABLE","$node",151],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",151],"]",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE"," ",152],["T_ELSEIF","elseif",152],["T_WHITESPACE"," ",152],"(",["T_ISSET","isset",152],"(",["T_VARIABLE","$node",152],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",152],"]",")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$result",153],"[",["T_LNUMBER","0",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING_CAST","(string)",153],["T_VARIABLE","$node",153],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",153],"]",";",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$result",154],"[",["T_LNUMBER","1",154],"]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","false",154],";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n        ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$result",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Process queue of structural elements and actually add them to structure, and schedule elements for generation\n     *\n     * The catch is to populate parents first, if they are not in the structure yet.\n     * Since layout updates could come in arbitrary order, a case is possible where an element is declared in reference,\n     * while referenced element itself is not declared yet.\n     *\n     * @param \\Magento\\Framework\\View\\Layout\\ScheduledStructure $scheduledStructure\n     * @param Layout\\Data\\Structure $structure\n     * @param string $key in _scheduledStructure represent element name\n     * @return void\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",159],["T_WHITESPACE","\n    ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","scheduleElement",173],"(",["T_WHITESPACE","\n        ",173],["T_STRING","Layout",174],["T_NS_SEPARATOR","\\",174],["T_STRING","ScheduledStructure",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$scheduledStructure",174],",",["T_WHITESPACE","\n        ",174],["T_STRING","Layout",175],["T_NS_SEPARATOR","\\",175],["T_STRING","Data",175],["T_NS_SEPARATOR","\\",175],["T_STRING","Structure",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$structure",175],",",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$key",176],["T_WHITESPACE","\n    ",176],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$row",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$scheduledStructure",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getStructureElement",178],"(",["T_VARIABLE","$key",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$data",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$scheduledStructure",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getStructureElementData",179],"(",["T_VARIABLE","$key",179],")",";",["T_WHITESPACE","\n        ",179],["T_COMMENT","\/\/ if we have reference container to not existed element\n",180],["T_WHITESPACE","        ",181],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_ISSET","isset",181],"(",["T_VARIABLE","$row",181],"[",["T_STRING","self",181],["T_DOUBLE_COLON","::",181],["T_STRING","SCHEDULED_STRUCTURE_INDEX_TYPE",181],"]",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","logger",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","critical",182],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Broken reference: missing declaration of the element '",182],["T_CURLY_OPEN","{",182],["T_VARIABLE","$key",182],"}",["T_ENCAPSED_AND_WHITESPACE","'.",182],"\"",")",";",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$scheduledStructure",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","unsetPathElement",183],"(",["T_VARIABLE","$key",183],")",";",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$scheduledStructure",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","unsetStructureElement",184],"(",["T_VARIABLE","$key",184],")",";",["T_WHITESPACE","\n            ",184],["T_RETURN","return",185],";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n        ",186],["T_LIST","list",187],"(",["T_VARIABLE","$type",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$alias",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$parentName",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$siblingName",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$isAfter",187],")",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$row",187],";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$name",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_createStructuralElement",188],"(",["T_VARIABLE","$structure",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$key",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$type",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$parentName",188],["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_VARIABLE","$alias",188],")",";",["T_WHITESPACE","\n        ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$parentName",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_COMMENT","\/\/ recursively populate parent first\n",190],["T_WHITESPACE","            ",191],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$scheduledStructure",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","hasStructureElement",191],"(",["T_VARIABLE","$parentName",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","scheduleElement",192],"(",["T_VARIABLE","$scheduledStructure",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$structure",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$parentName",192],")",";",["T_WHITESPACE","\n            ",192],"}",["T_WHITESPACE","\n            ",193],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$structure",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","hasElement",194],"(",["T_VARIABLE","$parentName",194],")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                ",194],["T_TRY","try",195],["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                    ",195],["T_VARIABLE","$structure",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setAsChild",196],"(",["T_VARIABLE","$name",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$parentName",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$alias",196],")",";",["T_WHITESPACE","\n                ",196],"}",["T_WHITESPACE"," ",197],["T_CATCH","catch",197],["T_WHITESPACE"," ",197],"(",["T_NS_SEPARATOR","\\",197],["T_STRING","Exception",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$e",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","logger",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","critical",198],"(",["T_VARIABLE","$e",198],")",";",["T_WHITESPACE","\n                ",198],"}",["T_WHITESPACE","\n            ",199],"}",["T_WHITESPACE"," ",200],["T_ELSE","else",200],["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$scheduledStructure",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setElementToBrokenParentList",201],"(",["T_VARIABLE","$key",201],")",";",["T_WHITESPACE","\n\n                ",201],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","state",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getMode",203],"(",")",["T_WHITESPACE"," ",203],["T_IS_IDENTICAL","===",203],["T_WHITESPACE"," ",203],["T_STRING","State",203],["T_DOUBLE_COLON","::",203],["T_STRING","MODE_DEVELOPER",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n                    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","logger",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","info",204],"(",["T_WHITESPACE","\n                        ",204],"\"",["T_ENCAPSED_AND_WHITESPACE","Broken reference: the '",205],["T_CURLY_OPEN","{",205],["T_VARIABLE","$name",205],"}",["T_ENCAPSED_AND_WHITESPACE","' element cannot be added as child to '",205],["T_CURLY_OPEN","{",205],["T_VARIABLE","$parentName",205],"}",["T_ENCAPSED_AND_WHITESPACE","', ",205],"\"",["T_WHITESPACE"," ",205],".",["T_WHITESPACE","\n                        ",205],["T_CONSTANT_ENCAPSED_STRING","'because the latter doesn\\'t exist'",206],["T_WHITESPACE","\n                    ",206],")",";",["T_WHITESPACE","\n                ",207],"}",["T_WHITESPACE","\n            ",208],"}",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n\n        ",210],["T_COMMENT","\/\/ Move from scheduledStructure to scheduledElement\n",212],["T_WHITESPACE","        ",213],["T_VARIABLE","$scheduledStructure",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","unsetStructureElement",213],"(",["T_VARIABLE","$key",213],")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$scheduledStructure",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","setElement",214],"(",["T_VARIABLE","$name",214],",",["T_WHITESPACE"," ",214],"[",["T_VARIABLE","$type",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$data",214],"]",")",";",["T_WHITESPACE","\n\n        ",214],["T_DOC_COMMENT","\/**\n         * Some elements provide info \"after\" or \"before\" which sibling they are supposed to go\n         * Add element into list of sorting\n         *\/",216],["T_WHITESPACE","\n        ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$siblingName",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$scheduledStructure",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setElementToSortList",221],"(",["T_VARIABLE","$parentName",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$name",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$siblingName",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$isAfter",221],")",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Register an element in structure\n     *\n     * Will assign an \"anonymous\" name to the element, if provided with an empty name\n     *\n     * @param Layout\\Data\\Structure $structure\n     * @param string $name\n     * @param string $type\n     * @param string $class\n     * @return string\n     *\/",225],["T_WHITESPACE","\n    ",235],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","_createStructuralElement",236],"(",["T_STRING","Layout",236],["T_NS_SEPARATOR","\\",236],["T_STRING","Data",236],["T_NS_SEPARATOR","\\",236],["T_STRING","Structure",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$structure",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$name",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$type",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$class",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_EMPTY","empty",238],"(",["T_VARIABLE","$name",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$name",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_generateAnonymousName",239],"(",["T_VARIABLE","$class",239],")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$structure",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","createElement",241],"(",["T_VARIABLE","$name",241],",",["T_WHITESPACE"," ",241],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$type",241],"]",")",";",["T_WHITESPACE","\n        ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$name",242],";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n",243],"}",["T_WHITESPACE","\n",244]]
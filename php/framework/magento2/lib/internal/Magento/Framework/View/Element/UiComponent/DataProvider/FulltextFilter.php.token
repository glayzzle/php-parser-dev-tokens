[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Framework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","View",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Element",7],["T_NS_SEPARATOR","\\",7],["T_STRING","UiComponent",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DataProvider",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Collection",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Collection",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AbstractDb",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Filter",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Class Fulltext\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","FulltextFilter",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE"," ",16],["T_STRING","FilterApplierInterface",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Returns list of columns from fulltext index (doesn't support more then one FTI per table)\n     *\n     * @param AbstractDb $collection\n     * @param string $indexTable\n     * @return array\n     *\/",18],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","getFulltextIndexColumns",25],"(",["T_STRING","AbstractDb",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$collection",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$indexTable",25],")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$indexes",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$collection",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","getConnection",27],"(",")",["T_OBJECT_OPERATOR","->",27],["T_STRING","getIndexList",27],"(",["T_VARIABLE","$indexTable",27],")",";",["T_WHITESPACE","\n        ",27],["T_FOREACH","foreach",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$indexes",28],["T_WHITESPACE"," ",28],["T_AS","as",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$index",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n            ",28],["T_IF","if",29],["T_WHITESPACE"," ",29],"(",["T_STRING","strtoupper",29],"(",["T_VARIABLE","$index",29],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_TYPE'",29],"]",")",["T_WHITESPACE"," ",29],["T_IS_EQUAL","==",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'FULLTEXT'",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n                ",29],["T_RETURN","return",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$index",30],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMNS_LIST'",30],"]",";",["T_WHITESPACE","\n            ",30],"}",["T_WHITESPACE","\n        ",31],"}",["T_WHITESPACE","\n        ",32],["T_RETURN","return",33],["T_WHITESPACE"," ",33],"[","]",";",["T_WHITESPACE","\n    ",33],"}",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Add table alias to columns\n     *\n     * @param array $columns\n     * @param AbstractDb $collection\n     * @param string $indexTable\n     * @return array\n     *\/",36],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","addTableAliasToColumns",44],"(",["T_ARRAY","array",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$columns",44],",",["T_WHITESPACE"," ",44],["T_STRING","AbstractDb",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$collection",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$indexTable",44],")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$alias",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","''",46],";",["T_WHITESPACE","\n        ",46],["T_FOREACH","foreach",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$collection",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getSelect",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","getPart",47],"(",["T_CONSTANT_ENCAPSED_STRING","'from'",47],")",["T_WHITESPACE"," ",47],["T_AS","as",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$tableAlias",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$indexTable",48],["T_WHITESPACE"," ",48],["T_IS_EQUAL","==",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$data",48],"[",["T_CONSTANT_ENCAPSED_STRING","'tableName'",48],"]",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n                ",48],["T_VARIABLE","$alias",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$tableAlias",49],";",["T_WHITESPACE","\n                ",49],["T_BREAK","break",50],";",["T_WHITESPACE","\n            ",50],"}",["T_WHITESPACE","\n        ",51],"}",["T_WHITESPACE","\n        ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$alias",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$columns",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","array_map",54],"(",["T_WHITESPACE","\n                ",54],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$column",55],")",["T_WHITESPACE"," ",55],["T_USE","use",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$alias",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                    ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'`'",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_VARIABLE","$alias",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'`.'",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_VARIABLE","$column",56],";",["T_WHITESPACE","\n                ",56],"}",",",["T_WHITESPACE","\n                ",57],["T_VARIABLE","$columns",58],["T_WHITESPACE","\n            ",58],")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n\n        ",60],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$columns",62],";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Apply fulltext filters\n     *\n     * @param Collection $collection\n     * @param Filter $filter\n     * @return void\n     *\/",65],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","apply",72],"(",["T_STRING","Collection",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$collection",72],",",["T_WHITESPACE"," ",72],["T_STRING","Filter",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$filter",72],")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_VARIABLE","$collection",74],["T_WHITESPACE"," ",74],["T_INSTANCEOF","instanceof",74],["T_WHITESPACE"," ",74],["T_STRING","AbstractDb",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_THROW","throw",75],["T_WHITESPACE"," ",75],["T_NEW","new",75],["T_WHITESPACE"," ",75],["T_NS_SEPARATOR","\\",75],["T_STRING","InvalidArgumentException",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Database collection required.'",75],")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_DOC_COMMENT","\/** @var SearchResult $collection *\/",78],["T_WHITESPACE","\n        ",78],["T_VARIABLE","$mainTable",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$collection",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMainTable",79],"(",")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$columns",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getFulltextIndexColumns",80],"(",["T_VARIABLE","$collection",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$mainTable",80],")",";",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_VARIABLE","$columns",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_RETURN","return",82],";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$columns",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","addTableAliasToColumns",85],"(",["T_VARIABLE","$columns",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$collection",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$mainTable",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$collection",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getSelect",86],"(",")",["T_WHITESPACE","\n            ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","where",87],"(",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'MATCH('",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_STRING","implode",88],"(",["T_CONSTANT_ENCAPSED_STRING","','",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$columns",88],")",["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","') AGAINST(?)'",88],",",["T_WHITESPACE","\n                ",88],["T_VARIABLE","$filter",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getValue",89],"(",")",["T_WHITESPACE","\n            ",89],")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n",91],"}",["T_WHITESPACE","\n",92]]
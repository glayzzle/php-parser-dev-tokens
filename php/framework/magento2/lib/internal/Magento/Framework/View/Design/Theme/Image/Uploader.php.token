[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Design",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Theme",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Image",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Theme Image Uploader\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Uploader",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Allowed file extensions to upload\n     *\n     * @var array\n     *\/",13],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$_allowedExtensions",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],"[",["T_CONSTANT_ENCAPSED_STRING","'jpg'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'gif'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'png'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'xbm'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'wbmp'",18],"]",";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * File system\n     *\n     * @var \\Magento\\Framework\\Filesystem\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_filesystem",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Transfer adapter\n     *\n     * @var \\Zend_File_Transfer_Adapter_Http\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_transferAdapter",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Uploader factory\n     *\n     * @var \\Magento\\Framework\\File\\UploaderFactory\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_uploaderFactory",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\HTTP\\Adapter\\FileTransferFactory $adapterFactory\n     * @param \\Magento\\Framework\\File\\UploaderFactory $uploaderFactory\n     *\/",41],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","__construct",48],"(",["T_WHITESPACE","\n        ",48],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Framework",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Filesystem",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$filesystem",49],",",["T_WHITESPACE","\n        ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Framework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","HTTP",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Adapter",50],["T_NS_SEPARATOR","\\",50],["T_STRING","FileTransferFactory",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$adapterFactory",50],",",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Framework",51],["T_NS_SEPARATOR","\\",51],["T_STRING","File",51],["T_NS_SEPARATOR","\\",51],["T_STRING","UploaderFactory",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$uploaderFactory",51],["T_WHITESPACE","\n    ",51],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_filesystem",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$filesystem",53],";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_transferAdapter",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$adapterFactory",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","create",54],"(",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_uploaderFactory",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$uploaderFactory",55],";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Upload preview image\n     *\n     * @param string $scope the request key for file\n     * @param string $destinationPath path to upload directory\n     * @return bool\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",58],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","uploadPreviewImage",66],"(",["T_VARIABLE","$scope",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$destinationPath",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_transferAdapter",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","isUploaded",68],"(",["T_VARIABLE","$scope",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_STRING","false",69],";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_transferAdapter",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","isValid",71],"(",["T_VARIABLE","$scope",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_THROW","throw",72],["T_WHITESPACE"," ",72],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Magento",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Framework",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Exception",72],["T_NS_SEPARATOR","\\",72],["T_STRING","LocalizedException",72],"(",["T_WHITESPACE","\n                ",72],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Framework",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Phrase",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Uploaded image is not valid'",73],")",["T_WHITESPACE","\n            ",73],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$upload",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_uploaderFactory",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","create",76],"(","[",["T_CONSTANT_ENCAPSED_STRING","'fileId'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$scope",76],"]",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$upload",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setAllowCreateFolders",77],"(",["T_STRING","true",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$upload",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setAllowedExtensions",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_allowedExtensions",78],")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$upload",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setAllowRenameFiles",79],"(",["T_STRING","true",79],")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$upload",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setFilesDispersion",80],"(",["T_STRING","false",80],")",";",["T_WHITESPACE","\n\n        ",80],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_VARIABLE","$upload",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","checkAllowedExtension",82],"(",["T_VARIABLE","$upload",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getFileExtension",82],"(",")",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_THROW","throw",83],["T_WHITESPACE"," ",83],["T_NEW","new",83],["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Framework",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Exception",83],["T_NS_SEPARATOR","\\",83],["T_STRING","LocalizedException",83],"(",["T_WHITESPACE","\n                ",83],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Framework",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Phrase",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid image file type.'",84],")",["T_WHITESPACE","\n            ",84],")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_VARIABLE","$upload",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","save",87],"(",["T_VARIABLE","$destinationPath",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_THROW","throw",88],["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Exception",88],["T_NS_SEPARATOR","\\",88],["T_STRING","LocalizedException",88],"(",["T_WHITESPACE","\n                ",88],["T_NEW","new",89],["T_WHITESPACE"," ",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Framework",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Phrase",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Image can not be saved.'",89],")",["T_WHITESPACE","\n            ",89],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$destinationPath",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'\/'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$upload",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getUploadedFileName",92],"(",")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n",93],"}",["T_WHITESPACE","\n",94]]
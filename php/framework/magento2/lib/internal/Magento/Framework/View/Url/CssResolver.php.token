[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Url",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","View",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FileSystem",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Helper to work with CSS files\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","CssResolver",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * PCRE that matches non-absolute URLs in CSS content\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","REGEX_CSS_RELATIVE_URLS",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE","\n        ",18],["T_CONSTANT_ENCAPSED_STRING","'#url\\s*\\(\\s*(?(?=\\'|\").)(?!http\\:\/\/|https\\:\/\/|\/|data\\:)(.+?)(?:[\\#\\?].*?|[\\'\"])?\\s*\\)#'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * Adjust relative URLs in CSS content as if the file with this content is to be moved to new location\n     *\n     * @param string $cssContent\n     * @param string $relatedPath\n     * @param string $filePath\n     * @return mixed\n     *\/",21],["T_WHITESPACE","\n    ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","relocateRelativeUrls",29],"(",["T_VARIABLE","$cssContent",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$relatedPath",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$filePath",29],")",["T_WHITESPACE","\n    ",29],"{",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$offset",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","FileSystem",31],["T_DOUBLE_COLON","::",31],["T_STRING","offsetPath",31],"(",["T_VARIABLE","$relatedPath",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$filePath",31],")",";",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$callback",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],"(",["T_VARIABLE","$path",32],")",["T_WHITESPACE"," ",32],["T_USE","use",32],["T_WHITESPACE"," ",32],"(",["T_VARIABLE","$offset",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n            ",32],["T_RETURN","return",33],["T_WHITESPACE"," ",33],["T_STRING","FileSystem",33],["T_DOUBLE_COLON","::",33],["T_STRING","normalizePath",33],"(",["T_VARIABLE","$offset",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'\/'",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_VARIABLE","$path",33],")",";",["T_WHITESPACE","\n        ",33],"}",";",["T_WHITESPACE","\n        ",34],["T_RETURN","return",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","replaceRelativeUrls",35],"(",["T_VARIABLE","$cssContent",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$callback",35],")",";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * A generic method for applying certain callback to all found relative URLs in CSS content\n     *\n     * Traverse through all relative URLs and apply a callback to each path\n     * The $inlineCallback is a user function that obtains the URL value and must return a replacement\n     *\n     * @param string $cssContent\n     * @param callback $inlineCallback\n     * @return string\n     *\/",38],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","replaceRelativeUrls",48],"(",["T_VARIABLE","$cssContent",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$inlineCallback",48],")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$patterns",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","self",50],["T_DOUBLE_COLON","::",50],["T_STRING","extractRelativeUrls",50],"(",["T_VARIABLE","$cssContent",50],")",";",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$patterns",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$replace",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],"[","]",";",["T_WHITESPACE","\n            ",52],["T_FOREACH","foreach",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$patterns",53],["T_WHITESPACE"," ",53],["T_AS","as",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$pattern",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$path",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(","!",["T_ISSET","isset",54],"(",["T_VARIABLE","$replace",54],"[",["T_VARIABLE","$pattern",54],"]",")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                    ",54],["T_VARIABLE","$newPath",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","call_user_func",55],"(",["T_VARIABLE","$inlineCallback",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$path",55],")",";",["T_WHITESPACE","\n                    ",55],["T_VARIABLE","$newPattern",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","str_replace",56],"(",["T_VARIABLE","$path",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$newPath",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$pattern",56],")",";",["T_WHITESPACE","\n                    ",56],["T_VARIABLE","$replace",57],"[",["T_VARIABLE","$pattern",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$newPattern",57],";",["T_WHITESPACE","\n                ",57],"}",["T_WHITESPACE","\n            ",58],"}",["T_WHITESPACE","\n            ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$replace",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$cssContent",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","str_replace",61],"(",["T_STRING","array_keys",61],"(",["T_VARIABLE","$replace",61],")",",",["T_WHITESPACE"," ",61],["T_STRING","array_values",61],"(",["T_VARIABLE","$replace",61],")",",",["T_WHITESPACE"," ",61],["T_VARIABLE","$cssContent",61],")",";",["T_WHITESPACE","\n            ",61],"}",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$cssContent",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Extract all \"import\" directives from CSS-content and put them to the top of document\n     *\n     * @param string $cssContent\n     * @return string\n     *\/",67],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","aggregateImportDirectives",73],"(",["T_VARIABLE","$cssContent",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$parts",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","preg_split",75],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(@import\\s.+?;\\s*)\/'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$cssContent",75],",",["T_WHITESPACE"," ",75],"-",["T_LNUMBER","1",75],",",["T_WHITESPACE"," ",75],["T_STRING","PREG_SPLIT_DELIM_CAPTURE",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$imports",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],"[","]",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$css",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],"[","]",";",["T_WHITESPACE","\n        ",77],["T_FOREACH","foreach",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$parts",78],["T_WHITESPACE"," ",78],["T_AS","as",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$part",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_LNUMBER","0",79],["T_WHITESPACE"," ",79],["T_IS_IDENTICAL","===",79],["T_WHITESPACE"," ",79],["T_STRING","strpos",79],"(",["T_VARIABLE","$part",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'@import'",79],",",["T_WHITESPACE"," ",79],["T_LNUMBER","0",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$imports",80],"[","]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","trim",80],"(",["T_VARIABLE","$part",80],")",";",["T_WHITESPACE","\n            ",80],"}",["T_WHITESPACE"," ",81],["T_ELSE","else",81],["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                ",81],["T_VARIABLE","$css",82],"[","]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$part",82],";",["T_WHITESPACE","\n            ",82],"}",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$result",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","implode",86],"(",["T_VARIABLE","$css",86],")",";",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$imports",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$result",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","implode",88],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$imports",88],")",["T_WHITESPACE","\n                ",88],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"\\n\/* The above import directives are aggregated from content. *\/\\n\"",89],["T_WHITESPACE","\n                ",89],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$result",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$result",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Subroutine for obtaining url() fragments from the CSS content\n     *\n     * @param string $cssContent\n     * @return array\n     *\/",95],["T_WHITESPACE","\n    ",100],["T_PRIVATE","private",101],["T_WHITESPACE"," ",101],["T_STATIC","static",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","extractRelativeUrls",101],"(",["T_VARIABLE","$cssContent",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_STRING","preg_match_all",103],"(",["T_STRING","self",103],["T_DOUBLE_COLON","::",103],["T_STRING","REGEX_CSS_RELATIVE_URLS",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$cssContent",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$matches",103],")",";",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_EMPTY","empty",104],"(",["T_VARIABLE","$matches",104],"[",["T_LNUMBER","0",104],"]",")",["T_WHITESPACE"," ",104],["T_BOOLEAN_AND","&&",104],["T_WHITESPACE"," ",104],"!",["T_EMPTY","empty",104],"(",["T_VARIABLE","$matches",104],"[",["T_LNUMBER","1",104],"]",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_STRING","array_combine",105],"(",["T_VARIABLE","$matches",105],"[",["T_LNUMBER","0",105],"]",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$matches",105],"[",["T_LNUMBER","1",105],"]",")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n        ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],"[","]",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n",108],"}",["T_WHITESPACE","\n",109]]
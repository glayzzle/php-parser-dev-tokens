[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Asset",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * List of page assets that combines into groups ones having the same properties\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","GroupedCollection",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_STRING","Collection",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_COMMENT","\/**#@+\n     * Special properties, enforced to be grouped by\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","PROPERTY_CONTENT_TYPE",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'content_type'",16],";",["T_WHITESPACE","\n\n    ",16],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","PROPERTY_CAN_MERGE",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'can_merge'",18],";",["T_WHITESPACE","\n\n    ",18],["T_COMMENT","\/**#@-*\/",20],["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Property Factory\n     *\n     * @var \\Magento\\Framework\\View\\Asset\\PropertyGroupFactory\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$propertyFactory",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Property Groups\n     *\n     * @var PropertyGroup[]\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$groups",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"[","]",";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param PropertyGroupFactory $propertyFactory\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","__construct",41],"(",["T_STRING","PropertyGroupFactory",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$propertyFactory",41],")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","propertyFactory",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$propertyFactory",43],";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Add an instance, identified by a unique identifier, to the list and to the corresponding group\n     *\n     * @param string $identifier\n     * @param AssetInterface $asset\n     * @param array $properties\n     * @return void\n     *\/",46],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","add",54],"(",["T_VARIABLE","$identifier",54],",",["T_WHITESPACE"," ",54],["T_STRING","AssetInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$asset",54],",",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$properties",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_STRING","parent",56],["T_DOUBLE_COLON","::",56],["T_STRING","add",56],"(",["T_VARIABLE","$identifier",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$asset",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$properties",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getFilteredProperties",57],"(",["T_VARIABLE","$asset",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$properties",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getGroupFor",58],"(",["T_VARIABLE","$properties",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","add",58],"(",["T_VARIABLE","$identifier",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$asset",58],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @param string $identifier\n     * @param AssetInterface $asset\n     * @param string $key\n     * @return void\n     *\/",61],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","insert",67],"(",["T_VARIABLE","$identifier",67],",",["T_WHITESPACE"," ",67],["T_STRING","AssetInterface",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$asset",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$key",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_STRING","parent",69],["T_DOUBLE_COLON","::",69],["T_STRING","insert",69],"(",["T_VARIABLE","$identifier",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$asset",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$key",69],")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$properties",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getFilteredProperties",70],"(",["T_VARIABLE","$asset",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getGroupFor",71],"(",["T_VARIABLE","$properties",71],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","insert",71],"(",["T_VARIABLE","$identifier",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$asset",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$key",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * @param AssetInterface $asset\n     * @param array $properties\n     * @return array\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","getFilteredProperties",79],"(",["T_STRING","AssetInterface",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$asset",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$properties",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[","]",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$properties",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","array_filter",81],"(",["T_VARIABLE","$properties",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$properties",82],"[",["T_STRING","self",82],["T_DOUBLE_COLON","::",82],["T_STRING","PROPERTY_CONTENT_TYPE",82],"]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$asset",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getContentType",82],"(",")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$properties",83],"[",["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_STRING","PROPERTY_CAN_MERGE",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$asset",83],["T_WHITESPACE"," ",83],["T_INSTANCEOF","instanceof",83],["T_WHITESPACE"," ",83],["T_STRING","MergeableInterface",83],";",["T_WHITESPACE","\n\n        ",83],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$properties",85],";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Retrieve existing or new group matching the properties\n     *\n     * @param array $properties\n     * @return PropertyGroup\n     *\/",88],["T_WHITESPACE","\n    ",93],["T_PRIVATE","private",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","getGroupFor",94],"(",["T_ARRAY","array",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$properties",94],")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_DOC_COMMENT","\/** @var $existingGroup PropertyGroup *\/",96],["T_WHITESPACE","\n        ",96],["T_FOREACH","foreach",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","groups",97],["T_WHITESPACE"," ",97],["T_AS","as",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$existingGroup",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$existingGroup",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getProperties",98],"(",")",["T_WHITESPACE"," ",98],["T_IS_EQUAL","==",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$properties",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$existingGroup",99],";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_DOC_COMMENT","\/** @var $newGroup PropertyGroup *\/",102],["T_WHITESPACE","\n        ",102],["T_VARIABLE","$newGroup",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","propertyFactory",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","create",103],"(","[",["T_CONSTANT_ENCAPSED_STRING","'properties'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$properties",103],"]",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","groups",104],"[","]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$newGroup",104],";",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$newGroup",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Remove an instance from the list and from the corresponding group\n     *\n     * @param string $identifier\n     * @return void\n     *\/",108],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","remove",114],"(",["T_VARIABLE","$identifier",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_STRING","parent",116],["T_DOUBLE_COLON","::",116],["T_STRING","remove",116],"(",["T_VARIABLE","$identifier",116],")",";",["T_WHITESPACE","\n        ",116],["T_DOC_COMMENT","\/** @var PropertyGroup $group  *\/",117],["T_WHITESPACE","\n        ",117],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","groups",118],["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$group",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$group",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","has",119],"(",["T_VARIABLE","$identifier",119],")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$group",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","remove",120],"(",["T_VARIABLE","$identifier",120],")",";",["T_WHITESPACE","\n                ",120],["T_RETURN","return",121],";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Retrieve groups, containing assets that have the same properties\n     *\n     * @return PropertyGroup[]\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","getGroups",131],"(",")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","groups",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Get asset group by content type\n     *\n     * @param string $contentType\n     * @return bool|PropertyGroup\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getGroupByContentType",142],"(",["T_VARIABLE","$contentType",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","groups",144],["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$group",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$group",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getProperty",145],"(",["T_STRING","self",145],["T_DOUBLE_COLON","::",145],["T_STRING","PROPERTY_CONTENT_TYPE",145],")",["T_WHITESPACE"," ",145],["T_IS_EQUAL","==",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$contentType",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$group",146],";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_STRING","false",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n",151],"}",["T_WHITESPACE","\n",152]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Framework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","View",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Asset",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DirectoryList",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Filesystem",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Directory",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ReadFactory",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ObjectManager",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","View",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Asset",12],["T_NS_SEPARATOR","\\",12],["T_STRING","PreProcessor",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ChainFactoryInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","View",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Design",13],["T_NS_SEPARATOR","\\",13],["T_STRING","FileResolution",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Fallback",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Resolver",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Simple",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","View",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Design",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Theme",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ThemeProviderInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * A service for preprocessing content of assets\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",16],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","Source",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$filesystem",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\ReadInterface\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$rootDir",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\WriteInterface\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$varDir",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\View\\Asset\\PreProcessor\\Pool\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$preProcessorPool",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\View\\Design\\FileResolution\\Fallback\\StaticFile\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$fallback",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\View\\Design\\Theme\\ListInterface\n     * @deprecated\n     *\/",48],["T_WHITESPACE","\n    ",51],["T_PRIVATE","private",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$themeList",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @var ChainFactoryInterface\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PRIVATE","private",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$chainFactory",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var ReadFactory\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PRIVATE","private",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$readFactory",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var ThemeProviderInterface\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PRIVATE","private",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$themeProvider",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param ReadFactory $readFactory\n     * @param PreProcessor\\Pool $preProcessorPool\n     * @param \\Magento\\Framework\\View\\Design\\FileResolution\\Fallback\\StaticFile $fallback\n     * @param \\Magento\\Framework\\View\\Design\\Theme\\ListInterface $themeList\n     * @param ChainFactoryInterface $chainFactory\n     *\/",69],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","__construct",79],"(",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Framework",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Filesystem",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$filesystem",80],",",["T_WHITESPACE","\n        ",80],["T_STRING","ReadFactory",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$readFactory",81],",",["T_WHITESPACE","\n        ",81],["T_STRING","PreProcessor",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Pool",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$preProcessorPool",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Framework",83],["T_NS_SEPARATOR","\\",83],["T_STRING","View",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Design",83],["T_NS_SEPARATOR","\\",83],["T_STRING","FileResolution",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Fallback",83],["T_NS_SEPARATOR","\\",83],["T_STRING","StaticFile",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$fallback",83],",",["T_WHITESPACE","\n        ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Framework",84],["T_NS_SEPARATOR","\\",84],["T_STRING","View",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Design",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Theme",84],["T_NS_SEPARATOR","\\",84],["T_STRING","ListInterface",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$themeList",84],",",["T_WHITESPACE","\n        ",84],["T_STRING","ChainFactoryInterface",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$chainFactory",85],["T_WHITESPACE","\n    ",85],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","filesystem",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$filesystem",87],";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","readFactory",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$readFactory",88],";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","rootDir",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$filesystem",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getDirectoryRead",89],"(",["T_STRING","DirectoryList",89],["T_DOUBLE_COLON","::",89],["T_STRING","ROOT",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","varDir",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$filesystem",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getDirectoryWrite",90],"(",["T_STRING","DirectoryList",90],["T_DOUBLE_COLON","::",90],["T_STRING","VAR_DIR",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","preProcessorPool",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$preProcessorPool",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","fallback",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$fallback",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","themeList",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$themeList",93],";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","chainFactory",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$chainFactory",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Get absolute path to the asset file\n     *\n     * @param LocalInterface $asset\n     * @return bool|string\n     *\/",97],["T_WHITESPACE","\n    ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","getFile",103],"(",["T_STRING","LocalInterface",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$asset",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$result",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","preProcess",105],"(",["T_VARIABLE","$asset",105],")",";",["T_WHITESPACE","\n        ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_VARIABLE","$result",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_STRING","false",107],";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n        ",108],["T_LIST","list",109],"(",["T_VARIABLE","$dir",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$path",109],")",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$result",109],";",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","readFactory",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","create",110],"(",["T_VARIABLE","$dir",110],")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getAbsolutePath",110],"(",["T_VARIABLE","$path",110],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Get content of an asset\n     *\n     * @param LocalInterface $asset\n     * @return bool|string\n     *\/",113],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","getContent",119],"(",["T_STRING","LocalInterface",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$asset",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$result",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","preProcess",121],"(",["T_VARIABLE","$asset",121],")",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_VARIABLE","$result",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_STRING","false",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        ",124],["T_LIST","list",125],"(",["T_VARIABLE","$dir",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$path",125],")",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$result",125],";",["T_WHITESPACE","\n        ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","readFactory",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","create",126],"(",["T_VARIABLE","$dir",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","readFile",126],"(",["T_VARIABLE","$path",126],")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Perform necessary preprocessing and materialization when the specified asset is requested\n     *\n     * Returns an array of two elements:\n     * - directory where the file is supposed to be found\n     * - relative path to the file\n     *\n     * returns false if source file was not found\n     *\n     * @param LocalInterface $asset\n     * @return array|bool\n     *\/",129],["T_WHITESPACE","\n    ",140],["T_PRIVATE","private",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","preProcess",141],"(",["T_STRING","LocalInterface",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$asset",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$sourceFile",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","findSourceFile",143],"(",["T_VARIABLE","$asset",143],")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$dir",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","rootDir",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getAbsolutePath",144],"(",")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$path",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","''",145],";",["T_WHITESPACE","\n        ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$sourceFile",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$path",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","basename",147],"(",["T_VARIABLE","$sourceFile",147],")",";",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$dir",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","dirname",148],"(",["T_VARIABLE","$sourceFile",148],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$chain",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","createChain",151],"(",["T_VARIABLE","$asset",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$dir",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$path",151],")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","preProcessorPool",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","process",152],"(",["T_VARIABLE","$chain",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$chain",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertValid",153],"(",")",";",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$chain",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","isChanged",154],"(",")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$dir",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","varDir",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getAbsolutePath",155],"(",")",";",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$path",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","DirectoryList",156],["T_DOUBLE_COLON","::",156],["T_STRING","TMP_MATERIALIZATION_DIR",156],["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'\/source\/'",156],["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_VARIABLE","$chain",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getTargetAssetPath",156],"(",")",";",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","varDir",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","writeFile",157],"(",["T_VARIABLE","$path",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$chain",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getContent",157],"(",")",")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_EMPTY","empty",159],"(",["T_VARIABLE","$path",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$result",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","false",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE"," ",161],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$result",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],"[",["T_VARIABLE","$dir",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$path",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$chain",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getContentType",162],"(",")","]",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$result",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * @param LocalInterface $asset\n     * @return string\n     *\/",167],["T_WHITESPACE","\n    ",170],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","getSourceContentType",171],"(",["T_STRING","LocalInterface",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$asset",171],")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_LIST","list",173],"(",",",",",["T_VARIABLE","$type",173],")",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","preProcess",173],"(",["T_VARIABLE","$asset",173],")",";",["T_WHITESPACE","\n        ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$type",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * @param LocalInterface $asset\n     * @return bool|string\n     *\/",177],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","findSource",181],"(",["T_STRING","LocalInterface",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$asset",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","findSourceFile",183],"(",["T_VARIABLE","$asset",183],")",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Infer a content type from the specified path\n     *\n     * @param string $path\n     * @return string\n     *\/",186],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","getContentType",192],"(",["T_VARIABLE","$path",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_STRING","strtolower",194],"(",["T_STRING","pathinfo",194],"(",["T_VARIABLE","$path",194],",",["T_WHITESPACE"," ",194],["T_STRING","PATHINFO_EXTENSION",194],")",")",";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Search for asset file depending on its context type\n     *\n     * @param LocalInterface $asset\n     * @return bool|string\n     * @throws \\LogicException\n     *\/",197],["T_WHITESPACE","\n    ",203],["T_PRIVATE","private",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","findSourceFile",204],"(",["T_STRING","LocalInterface",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$asset",204],")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$context",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$asset",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getContext",206],"(",")",";",["T_WHITESPACE","\n        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$context",207],["T_WHITESPACE"," ",207],["T_INSTANCEOF","instanceof",207],["T_WHITESPACE"," ",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Magento",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Framework",207],["T_NS_SEPARATOR","\\",207],["T_STRING","View",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Asset",207],["T_NS_SEPARATOR","\\",207],["T_STRING","File",207],["T_NS_SEPARATOR","\\",207],["T_STRING","FallbackContext",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$result",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","findFileThroughFallback",208],"(",["T_VARIABLE","$asset",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$context",208],")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE"," ",209],["T_ELSEIF","elseif",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$context",209],["T_WHITESPACE"," ",209],["T_INSTANCEOF","instanceof",209],["T_WHITESPACE"," ",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Magento",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Framework",209],["T_NS_SEPARATOR","\\",209],["T_STRING","View",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Asset",209],["T_NS_SEPARATOR","\\",209],["T_STRING","File",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Context",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$result",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","findFile",210],"(",["T_VARIABLE","$asset",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$context",210],")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE"," ",211],["T_ELSE","else",211],["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$type",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","get_class",212],"(",["T_VARIABLE","$context",212],")",";",["T_WHITESPACE","\n            ",212],["T_THROW","throw",213],["T_WHITESPACE"," ",213],["T_NEW","new",213],["T_WHITESPACE"," ",213],["T_NS_SEPARATOR","\\",213],["T_STRING","LogicException",213],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Support for ",213],["T_CURLY_OPEN","{",213],["T_VARIABLE","$type",213],"}",["T_ENCAPSED_AND_WHITESPACE"," is not implemented.",213],"\"",")",";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$result",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Find asset file via fallback mechanism\n     *\n     * @param LocalInterface $asset\n     * @param \\Magento\\Framework\\View\\Asset\\File\\FallbackContext $context\n     * @return bool|string\n     *\/",218],["T_WHITESPACE","\n    ",224],["T_PRIVATE","private",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","findFileThroughFallback",225],"(",["T_WHITESPACE","\n        ",225],["T_STRING","LocalInterface",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$asset",226],",",["T_WHITESPACE","\n        ",226],["T_NS_SEPARATOR","\\",227],["T_STRING","Magento",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Framework",227],["T_NS_SEPARATOR","\\",227],["T_STRING","View",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Asset",227],["T_NS_SEPARATOR","\\",227],["T_STRING","File",227],["T_NS_SEPARATOR","\\",227],["T_STRING","FallbackContext",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$context",227],["T_WHITESPACE","\n    ",227],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$themeModel",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getThemeProvider",229],"(",")",["T_OBJECT_OPERATOR","->",229],["T_STRING","getThemeByFullPath",229],"(",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$context",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getAreaCode",230],"(",")",["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'\/'",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_VARIABLE","$context",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getThemePath",230],"(",")",["T_WHITESPACE","\n        ",230],")",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$sourceFile",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","fallback",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getFile",232],"(",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$context",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getAreaCode",233],"(",")",",",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$themeModel",234],",",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$context",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getLocale",235],"(",")",",",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$asset",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getFilePath",236],"(",")",",",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$asset",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getModule",237],"(",")",["T_WHITESPACE","\n        ",237],")",";",["T_WHITESPACE","\n        ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$sourceFile",239],";",["T_WHITESPACE","\n    ",239],"}",["T_WHITESPACE","\n\n    ",240],["T_DOC_COMMENT","\/**\n     * @return ThemeProviderInterface\n     *\/",242],["T_WHITESPACE","\n    ",244],["T_PRIVATE","private",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","getThemeProvider",245],"(",")",["T_WHITESPACE","\n    ",245],"{",["T_WHITESPACE","\n        ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_STRING","null",247],["T_WHITESPACE"," ",247],["T_IS_IDENTICAL","===",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","themeProvider",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","themeProvider",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","ObjectManager",248],["T_DOUBLE_COLON","::",248],["T_STRING","getInstance",248],"(",")",["T_OBJECT_OPERATOR","->",248],["T_STRING","get",248],"(",["T_STRING","ThemeProviderInterface",248],["T_DOUBLE_COLON","::",248],["T_CLASS","class",248],")",";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n\n        ",249],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","themeProvider",251],";",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * Find asset file by simply appending its path to the directory in context\n     *\n     * @param LocalInterface $asset\n     * @param \\Magento\\Framework\\View\\Asset\\File\\Context $context\n     * @return string\n     *\/",254],["T_WHITESPACE","\n    ",260],["T_PRIVATE","private",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","findFile",261],"(",["T_STRING","LocalInterface",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$asset",261],",",["T_WHITESPACE"," ",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Magento",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Framework",261],["T_NS_SEPARATOR","\\",261],["T_STRING","View",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Asset",261],["T_NS_SEPARATOR","\\",261],["T_STRING","File",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Context",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$context",261],")",["T_WHITESPACE","\n    ",261],"{",["T_WHITESPACE","\n        ",262],["T_VARIABLE","$dir",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","filesystem",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getDirectoryRead",263],"(",["T_VARIABLE","$context",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getBaseDirType",263],"(",")",")",";",["T_WHITESPACE","\n        ",263],["T_STRING","Simple",264],["T_DOUBLE_COLON","::",264],["T_STRING","assertFilePathFormat",264],"(",["T_VARIABLE","$asset",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getFilePath",264],"(",")",")",";",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$dir",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getAbsolutePath",265],"(",["T_VARIABLE","$asset",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getPath",265],"(",")",")",";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\View\\Asset\\LocalInterface $asset\n     *\n     * @return bool|string\n     * @deprecated If custom vendor directory is outside Magento root, then this method will return unexpected result\n     *\/",268],["T_WHITESPACE","\n    ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","findRelativeSourceFilePath",274],"(",["T_STRING","LocalInterface",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$asset",274],")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$sourceFile",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","findSourceFile",276],"(",["T_VARIABLE","$asset",276],")",";",["T_WHITESPACE","\n        ",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(","!",["T_VARIABLE","$sourceFile",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n            ",277],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_STRING","false",278],";",["T_WHITESPACE","\n        ",278],"}",["T_WHITESPACE","\n        ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","rootDir",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getRelativePath",280],"(",["T_VARIABLE","$sourceFile",280],")",";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * Creates a chain for pre-processing\n     *\n     * @param LocalInterface $asset\n     * @param string|bool $dir\n     * @param string|bool $path\n     * @return PreProcessor\\Chain\n     *\/",283],["T_WHITESPACE","\n    ",290],["T_PRIVATE","private",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","createChain",291],"(",["T_STRING","LocalInterface",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$asset",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$dir",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$path",291],")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$path",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$origContent",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","readFactory",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","create",294],"(",["T_VARIABLE","$dir",294],")",["T_OBJECT_OPERATOR","->",294],["T_STRING","readFile",294],"(",["T_VARIABLE","$path",294],")",";",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$origContentType",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getContentType",295],"(",["T_VARIABLE","$path",295],")",";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE"," ",296],["T_ELSE","else",296],["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$origContent",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","''",297],";",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$origContentType",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$asset",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getContentType",298],"(",")",";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n\n        ",299],["T_VARIABLE","$chain",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","chainFactory",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","create",301],"(",["T_WHITESPACE","\n            ",301],"[",["T_WHITESPACE","\n                ",302],["T_CONSTANT_ENCAPSED_STRING","'asset'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$asset",303],",",["T_WHITESPACE","\n                ",303],["T_CONSTANT_ENCAPSED_STRING","'origContent'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$origContent",304],",",["T_WHITESPACE","\n                ",304],["T_CONSTANT_ENCAPSED_STRING","'origContentType'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$origContentType",305],",",["T_WHITESPACE","\n                ",305],["T_CONSTANT_ENCAPSED_STRING","'origAssetPath'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$dir",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'\/'",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_VARIABLE","$path",306],["T_WHITESPACE","\n            ",306],"]",["T_WHITESPACE","\n        ",307],")",";",["T_WHITESPACE","\n        ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$chain",309],";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n",310],"}",["T_WHITESPACE","\n",311]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento profiler for requests to database\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceModel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Db",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","Profiler",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DB",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Profiler",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * Default connection type for timer name creation\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_CONST","const",15],["T_WHITESPACE"," ",15],["T_STRING","TIMER_PREFIX",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'DB_QUERY'",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * Default connection type for timer name creation\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","DEFAULT_CONNECTION_TYPE",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'database'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var array Allowed query types\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_queryTypes",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[",["T_CONSTANT_ENCAPSED_STRING","'select'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'insert'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'update'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'delete'",25],"]",";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Form and return timer name\n     *\n     * @param string $operation\n     * @return string\n     *\/",27],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","_getTimerName",33],"(",["T_VARIABLE","$operation",33],")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_COMMENT","\/\/ default name of connection type\n",35],["T_WHITESPACE","        ",36],["T_VARIABLE","$timerName",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Framework",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","ResourceModel",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Db",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Profiler",36],["T_DOUBLE_COLON","::",36],["T_STRING","DEFAULT_CONNECTION_TYPE",36],";",["T_WHITESPACE","\n\n        ",36],["T_COMMENT","\/\/ connection type to database\n",38],["T_WHITESPACE","        ",39],["T_IF","if",39],["T_WHITESPACE"," ",39],"(","!",["T_EMPTY","empty",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","_type",39],")",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n            ",39],["T_VARIABLE","$timerName",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","_type",40],";",["T_WHITESPACE","\n        ",40],"}",["T_WHITESPACE","\n\n        ",41],["T_COMMENT","\/\/ sql operation\n",43],["T_WHITESPACE","        ",44],["T_VARIABLE","$timerName",44],["T_WHITESPACE"," ",44],["T_CONCAT_EQUAL",".=",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'_'",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_VARIABLE","$operation",44],";",["T_WHITESPACE","\n\n        ",44],["T_COMMENT","\/\/ database host\n",46],["T_WHITESPACE","        ",47],["T_IF","if",47],["T_WHITESPACE"," ",47],"(","!",["T_EMPTY","empty",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_host",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$timerName",48],["T_WHITESPACE"," ",48],["T_CONCAT_EQUAL",".=",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'_'",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_host",48],";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n\n        ",49],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Framework",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Model",51],["T_NS_SEPARATOR","\\",51],["T_STRING","ResourceModel",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Db",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Profiler",51],["T_DOUBLE_COLON","::",51],["T_STRING","TIMER_PREFIX",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","':'",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$timerName",51],";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Parse query type and return\n     *\n     * @param string $queryText\n     * @return string\n     *\/",54],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","_parseQueryType",60],"(",["T_VARIABLE","$queryText",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$queryTypeParsed",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","strtolower",62],"(",["T_STRING","substr",62],"(",["T_STRING","ltrim",62],"(",["T_VARIABLE","$queryText",62],")",",",["T_WHITESPACE"," ",62],["T_LNUMBER","0",62],",",["T_WHITESPACE"," ",62],["T_LNUMBER","6",62],")",")",";",["T_WHITESPACE","\n\n        ",62],["T_IF","if",64],["T_WHITESPACE"," ",64],"(","!",["T_STRING","in_array",64],"(",["T_VARIABLE","$queryTypeParsed",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_queryTypes",64],")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$queryTypeParsed",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'query'",65],";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n\n        ",66],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$queryTypeParsed",68],";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Starts a query. Creates a new query profile object (\\Zend_Db_Profiler_Query)\n     *\n     * @param string $queryText SQL statement\n     * @param integer $queryType OPTIONAL Type of query, one of the \\Zend_Db_Profiler::* constants\n     * @return integer|null\n     *\/",71],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","queryStart",78],"(",["T_VARIABLE","$queryText",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$queryType",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","null",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$result",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","parent",80],["T_DOUBLE_COLON","::",80],["T_STRING","queryStart",80],"(",["T_VARIABLE","$queryText",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$queryType",80],")",";",["T_WHITESPACE","\n\n        ",80],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$result",82],["T_WHITESPACE"," ",82],["T_IS_NOT_IDENTICAL","!==",82],["T_WHITESPACE"," ",82],["T_STRING","null",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$queryTypeParsed",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_parseQueryType",83],"(",["T_VARIABLE","$queryText",83],")",";",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$timerName",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_getTimerName",84],"(",["T_VARIABLE","$queryTypeParsed",84],")",";",["T_WHITESPACE","\n\n            ",84],["T_VARIABLE","$tags",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"[","]",";",["T_WHITESPACE","\n\n            ",86],["T_COMMENT","\/\/ connection type to database\n",88],["T_WHITESPACE","            ",89],["T_VARIABLE","$typePrefix",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","''",89],";",["T_WHITESPACE","\n            ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_type",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                ",90],["T_VARIABLE","$tags",91],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",91],"]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_type",91],";",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$typePrefix",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_type",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","':'",92],";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n\n            ",93],["T_COMMENT","\/\/ sql operation\n",95],["T_WHITESPACE","            ",96],["T_VARIABLE","$tags",96],"[",["T_CONSTANT_ENCAPSED_STRING","'operation'",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$typePrefix",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$queryTypeParsed",96],";",["T_WHITESPACE","\n\n            ",96],["T_COMMENT","\/\/ database host\n",98],["T_WHITESPACE","            ",99],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_host",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$tags",100],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_host",100],";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n\n            ",101],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Framework",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Profiler",103],["T_DOUBLE_COLON","::",103],["T_STRING","start",103],"(",["T_VARIABLE","$timerName",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$tags",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$result",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Ends a query. Pass it the handle that was returned by queryStart().\n     *\n     * @param int $queryId\n     * @return string|void\n     *\/",109],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","queryEnd",115],"(",["T_VARIABLE","$queryId",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$result",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","parent",117],["T_DOUBLE_COLON","::",117],["T_STRING","queryEnd",117],"(",["T_VARIABLE","$queryId",117],")",";",["T_WHITESPACE","\n\n        ",117],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$result",119],["T_WHITESPACE"," ",119],["T_IS_NOT_EQUAL","!=",119],["T_WHITESPACE"," ",119],["T_STRING","self",119],["T_DOUBLE_COLON","::",119],["T_STRING","IGNORED",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_DOC_COMMENT","\/** @var \\Zend_Db_Profiler_Query $queryProfile *\/",120],["T_WHITESPACE","\n            ",120],["T_VARIABLE","$queryProfile",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_queryProfiles",121],"[",["T_VARIABLE","$queryId",121],"]",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$queryTypeParsed",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_parseQueryType",122],"(",["T_VARIABLE","$queryProfile",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getQuery",122],"(",")",")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$timerName",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_getTimerName",123],"(",["T_VARIABLE","$queryTypeParsed",123],")",";",["T_WHITESPACE","\n\n            ",123],["T_NS_SEPARATOR","\\",125],["T_STRING","Magento",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Framework",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Profiler",125],["T_DOUBLE_COLON","::",125],["T_STRING","stop",125],"(",["T_VARIABLE","$timerName",125],")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$result",128],";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n",129],"}",["T_WHITESPACE","\n",130]]
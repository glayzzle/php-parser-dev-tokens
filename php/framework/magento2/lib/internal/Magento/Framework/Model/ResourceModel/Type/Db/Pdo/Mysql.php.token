[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Type",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Db",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Pdo",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResourceConnection",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ConnectionAdapterInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DB",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DB",13],["T_NS_SEPARATOR","\\",13],["T_STRING","SelectFactory",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Stdlib",14],";",["T_WHITESPACE","\n\n",14],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Mysql",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ResourceModel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Type",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Db",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE"," ",16],["T_STRING","ConnectionAdapterInterface",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * @var Stdlib\\StringUtils\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$string",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var Stdlib\\DateTime\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$dateTime",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$connectionConfig",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$selectFactory",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @param Stdlib\\StringUtils $string\n     * @param Stdlib\\DateTime $dateTime\n     * @param SelectFactory $selectFactory\n     * @param array $config\n     *\/",38],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","__construct",44],"(",["T_WHITESPACE","\n        ",44],["T_STRING","Stdlib",45],["T_NS_SEPARATOR","\\",45],["T_STRING","StringUtils",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$string",45],",",["T_WHITESPACE","\n        ",45],["T_STRING","Stdlib",46],["T_NS_SEPARATOR","\\",46],["T_STRING","DateTime",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$dateTime",46],",",["T_WHITESPACE","\n        ",46],["T_STRING","SelectFactory",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$selectFactory",47],",",["T_WHITESPACE","\n        ",47],["T_ARRAY","array",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$config",48],["T_WHITESPACE","\n    ",48],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","string",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$string",50],";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","dateTime",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$dateTime",51],";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","selectFactory",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$selectFactory",52],";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","connectionConfig",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getValidConfig",53],"(",["T_VARIABLE","$config",53],")",";",["T_WHITESPACE","\n\n        ",53],["T_STRING","parent",55],["T_DOUBLE_COLON","::",55],["T_STRING","__construct",55],"(",")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","getConnection",61],"(",["T_STRING","DB",61],["T_NS_SEPARATOR","\\",61],["T_STRING","LoggerInterface",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$logger",61],")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$connection",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getDbConnectionInstance",63],"(",["T_VARIABLE","$logger",63],")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$profiler",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$connection",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getProfiler",65],"(",")",";",["T_WHITESPACE","\n        ",65],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$profiler",66],["T_WHITESPACE"," ",66],["T_INSTANCEOF","instanceof",66],["T_WHITESPACE"," ",66],["T_STRING","DB",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Profiler",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$profiler",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","setType",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","connectionConfig",67],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",67],"]",")",";",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$profiler",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","setHost",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","connectionConfig",68],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",68],"]",")",";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n\n        ",69],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$connection",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Create and return DB connection object instance\n     *\n     * @param DB\\LoggerInterface $logger\n     * @return \\Magento\\Framework\\DB\\Adapter\\Pdo\\Mysql\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","getDbConnectionInstance",80],"(",["T_STRING","DB",80],["T_NS_SEPARATOR","\\",80],["T_STRING","LoggerInterface",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$logger",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$className",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getDbConnectionClassName",82],"(",")",";",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_NEW","new",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$className",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","string",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","dateTime",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$logger",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","selectFactory",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","connectionConfig",83],")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Retrieve DB connection class name\n     *\n     * @return string\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getDbConnectionClassName",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_STRING","DB",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Adapter",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Pdo",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Mysql",93],["T_DOUBLE_COLON","::",93],["T_CLASS","class",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Validates the config and adds default options, if any is missing\n     *\n     * @param array $config\n     * @return array\n     *\/",96],["T_WHITESPACE","\n    ",101],["T_PRIVATE","private",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getValidConfig",102],"(",["T_ARRAY","array",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$config",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$default",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[",["T_CONSTANT_ENCAPSED_STRING","'initStatements'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'SET NAMES utf8'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'type'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'pdo_mysql'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'active'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_STRING","false",104],"]",";",["T_WHITESPACE","\n        ",104],["T_FOREACH","foreach",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$default",105],["T_WHITESPACE"," ",105],["T_AS","as",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$key",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$value",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_ISSET","isset",106],"(",["T_VARIABLE","$config",106],"[",["T_VARIABLE","$key",106],"]",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$config",107],"[",["T_VARIABLE","$key",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$value",107],";",["T_WHITESPACE","\n            ",107],"}",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$required",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",110],"]",";",["T_WHITESPACE","\n        ",110],["T_FOREACH","foreach",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$required",111],["T_WHITESPACE"," ",111],["T_AS","as",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$name",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!",["T_ISSET","isset",112],"(",["T_VARIABLE","$config",112],"[",["T_VARIABLE","$name",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_THROW","throw",113],["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_NS_SEPARATOR","\\",113],["T_STRING","InvalidArgumentException",113],"(","\"",["T_ENCAPSED_AND_WHITESPACE","MySQL adapter: Missing required configuration option '",113],["T_VARIABLE","$name",113],["T_ENCAPSED_AND_WHITESPACE","'",113],"\"",")",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n\n        ",115],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_ISSET","isset",117],"(",["T_VARIABLE","$config",117],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",117],"]",")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_THROW","throw",118],["T_WHITESPACE"," ",118],["T_NEW","new",118],["T_WHITESPACE"," ",118],["T_NS_SEPARATOR","\\",118],["T_STRING","InvalidArgumentException",118],"(",["T_WHITESPACE","\n                ",118],"\"",["T_ENCAPSED_AND_WHITESPACE","Port must be configured within host (like '",119],["T_VARIABLE","$config",119],"[",["T_STRING","host",119],"]",["T_ENCAPSED_AND_WHITESPACE",":",119],["T_VARIABLE","$config",119],"[",["T_STRING","port",119],"]",["T_ENCAPSED_AND_WHITESPACE","') parameter, not within port",119],"\"",["T_WHITESPACE","\n            ",119],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_VARIABLE","$config",123],"[",["T_CONSTANT_ENCAPSED_STRING","'active'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],"!","(",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$config",124],"[",["T_CONSTANT_ENCAPSED_STRING","'active'",124],"]",["T_WHITESPACE"," ",124],["T_IS_IDENTICAL","===",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'false'",124],["T_WHITESPACE","\n            ",124],["T_BOOLEAN_OR","||",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$config",125],"[",["T_CONSTANT_ENCAPSED_STRING","'active'",125],"]",["T_WHITESPACE"," ",125],["T_IS_IDENTICAL","===",125],["T_WHITESPACE"," ",125],["T_STRING","false",125],["T_WHITESPACE","\n            ",125],["T_BOOLEAN_OR","||",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$config",126],"[",["T_CONSTANT_ENCAPSED_STRING","'active'",126],"]",["T_WHITESPACE"," ",126],["T_IS_IDENTICAL","===",126],["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'0'",126],["T_WHITESPACE","\n        ",126],")",";",["T_WHITESPACE","\n\n        ",127],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$config",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
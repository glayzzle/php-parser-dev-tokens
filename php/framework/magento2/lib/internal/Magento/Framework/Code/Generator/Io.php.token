[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Code",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Generator",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FileSystemException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DriverInterface",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Io",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Default code generation directory\n     * Should correspond the value from \\Magento\\Framework\\Filesystem\n     *\/",13],["T_WHITESPACE","\n    ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","DEFAULT_DIRECTORY",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'generated\/code'",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * Path to directory where new file must be created\n     *\n     * @var string\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_generationDirectory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Driver\\File\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$filesystemDriver",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Filesystem\\Driver\\File $filesystemDriver\n     * @param null|string $generationDirectory\n     *\/",31],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","__construct",35],"(",["T_WHITESPACE","\n        ",35],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Framework",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Filesystem",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Driver",36],["T_NS_SEPARATOR","\\",36],["T_STRING","File",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$filesystemDriver",36],",",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$generationDirectory",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","null",37],["T_WHITESPACE","\n    ",37],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","filesystemDriver",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$filesystemDriver",39],";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","initGeneratorDirectory",40],"(",["T_VARIABLE","$generationDirectory",40],")",";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Get path to generation directory\n     *\n     * @param null|string $directory\n     * @return string\n     *\/",43],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","initGeneratorDirectory",49],"(",["T_VARIABLE","$directory",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","null",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$directory",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_generationDirectory",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","rtrim",52],"(",["T_VARIABLE","$directory",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'\/'",52],")",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'\/'",52],";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE"," ",53],["T_ELSE","else",53],["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_generationDirectory",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","realpath",54],"(",["T_DIR","__DIR__",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/..\/..\/'",54],")",["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'\/'",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_STRING","self",54],["T_DOUBLE_COLON","::",54],["T_STRING","DEFAULT_DIRECTORY",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'\/'",54],";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * @param string $className\n     * @return string\n     *\/",58],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getResultFileDirectory",62],"(",["T_VARIABLE","$className",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$fileName",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","generateResultFileName",64],"(",["T_VARIABLE","$className",64],")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$pathParts",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","explode",65],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$fileName",65],")",";",["T_WHITESPACE","\n        ",65],["T_UNSET","unset",66],"(",["T_VARIABLE","$pathParts",66],"[",["T_STRING","count",66],"(",["T_VARIABLE","$pathParts",66],")",["T_WHITESPACE"," ",66],"-",["T_WHITESPACE"," ",66],["T_LNUMBER","1",66],"]",")",";",["T_WHITESPACE","\n\n        ",66],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_STRING","implode",68],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$pathParts",68],")",["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'\/'",68],";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @param string $className\n     * @return string\n     *\/",71],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","generateResultFileName",75],"(",["T_VARIABLE","$className",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_generationDirectory",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_STRING","ltrim",77],"(",["T_STRING","str_replace",77],"(","[",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'_'",77],"]",",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'\/'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$className",77],")",",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'\/'",77],")",["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'.php'",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @param string $fileName\n     * @param string $content\n     * @throws FileSystemException\n     * @return bool\n     *\/",80],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","writeResultFile",86],"(",["T_VARIABLE","$fileName",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$content",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_DOC_COMMENT","\/**\n         * Rename is atomic on *nix systems, while file_put_contents is not. Writing to a\n         * temporary file whose name is process-unique and renaming to the real location helps\n         * avoid race conditions. Race condition can occur if the compiler has not been run, when\n         * multiple processes are attempting to access the generated file simultaneously.\n         *\/",88],["T_WHITESPACE","\n        ",93],["T_VARIABLE","$content",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","\"<?php\\n\"",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$content",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$tmpFile",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$fileName",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\".\"",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_STRING","getmypid",95],"(",")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","filesystemDriver",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","filePutContents",96],"(",["T_VARIABLE","$tmpFile",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$content",96],")",";",["T_WHITESPACE","\n\n        ",96],["T_TRY","try",98],["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$success",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","filesystemDriver",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","rename",99],"(",["T_VARIABLE","$tmpFile",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$fileName",99],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE"," ",100],["T_CATCH","catch",100],["T_WHITESPACE"," ",100],"(",["T_STRING","FileSystemException",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$e",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","fileExists",101],"(",["T_VARIABLE","$fileName",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_THROW","throw",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$e",102],";",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE"," ",103],["T_ELSE","else",103],["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                ",103],["T_DOC_COMMENT","\/**\n                 * Due to race conditions, file may have already been written, causing rename to fail. As long as\n                 * the file exists, everything is okay.\n                 *\/",104],["T_WHITESPACE","\n                ",107],["T_VARIABLE","$success",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","true",108],";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n\n        ",110],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$success",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * @return bool\n     *\/",115],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","makeGenerationDirectory",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_makeDirectory",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_generationDirectory",120],")",";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * @param string $className\n     * @return bool\n     *\/",123],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","makeResultFileDirectory",127],"(",["T_VARIABLE","$className",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_makeDirectory",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getResultFileDirectory",129],"(",["T_VARIABLE","$className",129],")",")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * @return string\n     *\/",132],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getGenerationDirectory",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_generationDirectory",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * @param string $fileName\n     * @return bool\n     *\/",140],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","fileExists",144],"(",["T_VARIABLE","$fileName",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","filesystemDriver",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","isExists",146],"(",["T_VARIABLE","$fileName",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Wrapper for include\n     *\n     * @param string $fileName\n     * @return mixed\n     * @codeCoverageIgnore\n     *\/",149],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","includeFile",156],"(",["T_VARIABLE","$fileName",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_INCLUDE","include",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$fileName",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * @param string $directory\n     * @return bool\n     *\/",161],["T_WHITESPACE","\n    ",164],["T_PRIVATE","private",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","_makeDirectory",165],"(",["T_VARIABLE","$directory",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","filesystemDriver",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","isWritable",167],"(",["T_VARIABLE","$directory",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_STRING","true",168],";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n        ",169],["T_TRY","try",170],["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","filesystemDriver",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","isDirectory",171],"(",["T_VARIABLE","$directory",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","filesystemDriver",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","createDirectory",172],"(",["T_VARIABLE","$directory",172],")",";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n            ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","true",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE"," ",175],["T_CATCH","catch",175],["T_WHITESPACE"," ",175],"(",["T_STRING","FileSystemException",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$e",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_STRING","false",176],";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n",178],"}",["T_WHITESPACE","\n",179]]
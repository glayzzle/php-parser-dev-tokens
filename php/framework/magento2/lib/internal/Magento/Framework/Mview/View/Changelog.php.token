[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Mview",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceConnection",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Phrase",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Changelog",11],["T_WHITESPACE"," ",11],["T_IMPLEMENTS","implements",11],["T_WHITESPACE"," ",11],["T_STRING","ChangelogInterface",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Suffix for changelog table\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_CONST","const",16],["T_WHITESPACE"," ",16],["T_STRING","NAME_SUFFIX",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'cl'",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * Column name of changelog entity\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_CONST","const",21],["T_WHITESPACE"," ",21],["T_STRING","COLUMN_NAME",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Database connection\n     *\n     * @var \\Magento\\Framework\\DB\\Adapter\\AdapterInterface\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$connection",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * View Id identifier\n     *\n     * @var string\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$viewId",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\ResourceConnection\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$resource",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","__construct",45],"(",["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Framework",45],["T_NS_SEPARATOR","\\",45],["T_STRING","App",45],["T_NS_SEPARATOR","\\",45],["T_STRING","ResourceConnection",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$resource",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","connection",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$resource",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getConnection",47],"(",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","resource",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$resource",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","checkConnection",49],"(",")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Check DB connection\n     *\n     * @return void\n     * @throws \\Exception\n     *\/",52],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","checkConnection",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(","!",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","connection",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_THROW","throw",61],["T_WHITESPACE"," ",61],["T_NEW","new",61],["T_WHITESPACE"," ",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Exception",61],"(",["T_CONSTANT_ENCAPSED_STRING","'Write DB connection is not available'",61],")",";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Create changelog table\n     *\n     * @return void\n     * @throws \\Exception\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","create",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$changelogTableName",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","resource",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getTableName",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getName",73],"(",")",")",";",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","connection",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","isTableExists",74],"(",["T_VARIABLE","$changelogTableName",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$table",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","connection",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","newTable",75],"(",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$changelogTableName",76],["T_WHITESPACE","\n            ",76],")",["T_OBJECT_OPERATOR","->",77],["T_STRING","addColumn",77],"(",["T_WHITESPACE","\n                ",77],["T_CONSTANT_ENCAPSED_STRING","'version_id'",78],",",["T_WHITESPACE","\n                ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Framework",79],["T_NS_SEPARATOR","\\",79],["T_STRING","DB",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Ddl",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Table",79],["T_DOUBLE_COLON","::",79],["T_STRING","TYPE_INTEGER",79],",",["T_WHITESPACE","\n                ",79],["T_STRING","null",80],",",["T_WHITESPACE","\n                ",80],"[",["T_CONSTANT_ENCAPSED_STRING","'identity'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","true",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","true",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'nullable'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","false",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'primary'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","true",81],"]",",",["T_WHITESPACE","\n                ",81],["T_CONSTANT_ENCAPSED_STRING","'Version ID'",82],["T_WHITESPACE","\n            ",82],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","addColumn",83],"(",["T_WHITESPACE","\n                ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getColumnName",84],"(",")",",",["T_WHITESPACE","\n                ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Framework",85],["T_NS_SEPARATOR","\\",85],["T_STRING","DB",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Ddl",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Table",85],["T_DOUBLE_COLON","::",85],["T_STRING","TYPE_INTEGER",85],",",["T_WHITESPACE","\n                ",85],["T_STRING","null",86],",",["T_WHITESPACE","\n                ",86],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_STRING","true",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'nullable'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_STRING","false",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'default'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'0'",87],"]",",",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'Entity ID'",88],["T_WHITESPACE","\n            ",88],")",";",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","connection",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","createTable",90],"(",["T_VARIABLE","$table",90],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Drop changelog table\n     *\n     * @return void\n     * @throws ChangelogTableNotExistsException\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","drop",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$changelogTableName",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","resource",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getTableName",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getName",102],"(",")",")",";",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","connection",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isTableExists",103],"(",["T_VARIABLE","$changelogTableName",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_THROW","throw",104],["T_WHITESPACE"," ",104],["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_STRING","ChangelogTableNotExistsException",104],"(",["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_STRING","Phrase",104],"(",["T_CONSTANT_ENCAPSED_STRING","\"Table %1 does not exist\"",104],",",["T_WHITESPACE"," ",104],"[",["T_VARIABLE","$changelogTableName",104],"]",")",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n\n        ",105],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","connection",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","dropTable",107],"(",["T_VARIABLE","$changelogTableName",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Clear changelog table by version_id\n     *\n     * @param int $versionId\n     * @return boolean\n     * @throws ChangelogTableNotExistsException\n     *\/",110],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","clear",117],"(",["T_VARIABLE","$versionId",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$changelogTableName",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","resource",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getTableName",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getName",119],"(",")",")",";",["T_WHITESPACE","\n        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(","!",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","connection",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","isTableExists",120],"(",["T_VARIABLE","$changelogTableName",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_THROW","throw",121],["T_WHITESPACE"," ",121],["T_NEW","new",121],["T_WHITESPACE"," ",121],["T_STRING","ChangelogTableNotExistsException",121],"(",["T_NEW","new",121],["T_WHITESPACE"," ",121],["T_STRING","Phrase",121],"(",["T_CONSTANT_ENCAPSED_STRING","\"Table %1 does not exist\"",121],",",["T_WHITESPACE"," ",121],"[",["T_VARIABLE","$changelogTableName",121],"]",")",")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","connection",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","delete",124],"(",["T_VARIABLE","$changelogTableName",124],",",["T_WHITESPACE"," ",124],"[",["T_CONSTANT_ENCAPSED_STRING","'version_id <= ?'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_INT_CAST","(int)",124],["T_VARIABLE","$versionId",124],"]",")",";",["T_WHITESPACE","\n\n        ",124],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","true",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Retrieve entity ids by range [$fromVersionId..$toVersionId]\n     *\n     * @param int $fromVersionId\n     * @param int $toVersionId\n     * @return int[]\n     * @throws ChangelogTableNotExistsException\n     *\/",129],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getList",137],"(",["T_VARIABLE","$fromVersionId",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$toVersionId",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$changelogTableName",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","resource",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getTableName",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getName",139],"(",")",")",";",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","connection",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","isTableExists",140],"(",["T_VARIABLE","$changelogTableName",140],")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_THROW","throw",141],["T_WHITESPACE"," ",141],["T_NEW","new",141],["T_WHITESPACE"," ",141],["T_STRING","ChangelogTableNotExistsException",141],"(",["T_NEW","new",141],["T_WHITESPACE"," ",141],["T_STRING","Phrase",141],"(",["T_CONSTANT_ENCAPSED_STRING","\"Table %1 does not exist\"",141],",",["T_WHITESPACE"," ",141],"[",["T_VARIABLE","$changelogTableName",141],"]",")",")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],["T_VARIABLE","$select",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","connection",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","select",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","distinct",144],"(",["T_WHITESPACE","\n            ",144],["T_STRING","true",145],["T_WHITESPACE","\n        ",145],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","from",146],"(",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$changelogTableName",147],",",["T_WHITESPACE","\n            ",147],"[",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getColumnName",148],"(",")","]",["T_WHITESPACE","\n        ",148],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","where",149],"(",["T_WHITESPACE","\n            ",149],["T_CONSTANT_ENCAPSED_STRING","'version_id > ?'",150],",",["T_WHITESPACE","\n            ",150],["T_INT_CAST","(int)",151],["T_VARIABLE","$fromVersionId",151],["T_WHITESPACE","\n        ",151],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","where",152],"(",["T_WHITESPACE","\n            ",152],["T_CONSTANT_ENCAPSED_STRING","'version_id <= ?'",153],",",["T_WHITESPACE","\n            ",153],["T_INT_CAST","(int)",154],["T_VARIABLE","$toVersionId",154],["T_WHITESPACE","\n        ",154],")",";",["T_WHITESPACE","\n\n        ",155],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","connection",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","fetchCol",157],"(",["T_VARIABLE","$select",157],")",";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Get maximum version_id from changelog\n     * @return int\n     * @throws ChangelogTableNotExistsException\n     * @throws \\Exception\n     *\/",160],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","getVersion",166],"(",")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$changelogTableName",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","resource",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getTableName",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getName",168],"(",")",")",";",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(","!",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","connection",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","isTableExists",169],"(",["T_VARIABLE","$changelogTableName",169],")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_THROW","throw",170],["T_WHITESPACE"," ",170],["T_NEW","new",170],["T_WHITESPACE"," ",170],["T_STRING","ChangelogTableNotExistsException",170],"(",["T_NEW","new",170],["T_WHITESPACE"," ",170],["T_STRING","Phrase",170],"(",["T_CONSTANT_ENCAPSED_STRING","\"Table %1 does not exist\"",170],",",["T_WHITESPACE"," ",170],"[",["T_VARIABLE","$changelogTableName",170],"]",")",")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$row",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","connection",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","fetchRow",172],"(",["T_CONSTANT_ENCAPSED_STRING","'SHOW TABLE STATUS LIKE ?'",172],",",["T_WHITESPACE"," ",172],"[",["T_VARIABLE","$changelogTableName",172],"]",")",";",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_ISSET","isset",173],"(",["T_VARIABLE","$row",173],"[",["T_CONSTANT_ENCAPSED_STRING","'Auto_increment'",173],"]",")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_INT_CAST","(int)",174],["T_VARIABLE","$row",174],"[",["T_CONSTANT_ENCAPSED_STRING","'Auto_increment'",174],"]",["T_WHITESPACE"," ",174],"-",["T_WHITESPACE"," ",174],["T_LNUMBER","1",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE"," ",175],["T_ELSE","else",175],["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_THROW","throw",176],["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Exception",176],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Table status for `",176],["T_CURLY_OPEN","{",176],["T_VARIABLE","$changelogTableName",176],"}",["T_ENCAPSED_AND_WHITESPACE","` is incorrect. Can`t fetch version id.",176],"\"",")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Get changlog name\n     *\n     * Build a changelog name by concatenating view identifier and changelog name suffix.\n     *\n     * @throws \\Exception\n     * @return string\n     *\/",180],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getName",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_STRING","strlen",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","viewId",190],")",["T_WHITESPACE"," ",190],["T_IS_EQUAL","==",190],["T_WHITESPACE"," ",190],["T_LNUMBER","0",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_THROW","throw",191],["T_WHITESPACE"," ",191],["T_NEW","new",191],["T_WHITESPACE"," ",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Exception",191],"(",["T_CONSTANT_ENCAPSED_STRING","\"View's identifier is not set\"",191],")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","viewId",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'_'",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_STRING","self",193],["T_DOUBLE_COLON","::",193],["T_STRING","NAME_SUFFIX",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Get changlog entity column name\n     *\n     * @return string\n     *\/",196],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","getColumnName",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_STRING","self",203],["T_DOUBLE_COLON","::",203],["T_STRING","COLUMN_NAME",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Set view's identifier\n     *\n     * @param string $viewId\n     * @return Changelog\n     *\/",206],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","setViewId",212],"(",["T_VARIABLE","$viewId",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","viewId",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$viewId",214],";",["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * @return string\n     *\/",218],["T_WHITESPACE","\n    ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","getViewId",221],"(",")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","viewId",223],";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n",224],"}",["T_WHITESPACE","\n",225]]
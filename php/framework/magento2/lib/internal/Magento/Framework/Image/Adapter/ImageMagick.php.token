[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Image",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adapter",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","ImageMagick",8],["T_WHITESPACE"," ",8],["T_EXTENDS","extends",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Image",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Adapter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AbstractAdapter",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * The blur factor where > 1 is blurry, < 1 is sharp\n     *\/",10],["T_WHITESPACE","\n    ",12],["T_CONST","const",13],["T_WHITESPACE"," ",13],["T_STRING","BLUR_FACTOR",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_DNUMBER","0.7",13],";",["T_WHITESPACE","\n\n    ",13],["T_DOC_COMMENT","\/**\n     * Error messages\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","ERROR_WATERMARK_IMAGE_ABSENT",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'Watermark Image absent.'",18],";",["T_WHITESPACE","\n\n    ",18],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","ERROR_WRONG_IMAGE",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'Image is not readable or file name is empty.'",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Options Container\n     *\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_options",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[",["T_WHITESPACE","\n        ",27],["T_CONSTANT_ENCAPSED_STRING","'resolution'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],"[",["T_CONSTANT_ENCAPSED_STRING","'x'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_LNUMBER","72",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'y'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_LNUMBER","72",28],"]",",",["T_WHITESPACE","\n        ",28],["T_CONSTANT_ENCAPSED_STRING","'small_image'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_LNUMBER","300",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'height'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_LNUMBER","300",29],"]",",",["T_WHITESPACE","\n        ",29],["T_CONSTANT_ENCAPSED_STRING","'sharpen'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],"[",["T_CONSTANT_ENCAPSED_STRING","'radius'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_LNUMBER","4",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'deviation'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_LNUMBER","1",30],"]",",",["T_WHITESPACE","\n    ",30],"]",";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Set\/get background color. Check Imagick::COLOR_* constants\n     *\n     * @param int|string|array $color\n     * @return int\n     *\/",33],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","backgroundColor",39],"(",["T_VARIABLE","$color",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","null",39],")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_IF","if",41],["T_WHITESPACE"," ",41],"(",["T_VARIABLE","$color",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n            ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_STRING","is_array",42],"(",["T_VARIABLE","$color",42],")",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n                ",42],["T_VARIABLE","$color",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","\"rgb(\"",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_STRING","join",43],"(",["T_CONSTANT_ENCAPSED_STRING","','",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$color",43],")",["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","\")\"",43],";",["T_WHITESPACE","\n            ",43],"}",["T_WHITESPACE","\n\n            ",44],["T_VARIABLE","$pixel",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_NEW","new",46],["T_WHITESPACE"," ",46],["T_NS_SEPARATOR","\\",46],["T_STRING","ImagickPixel",46],"(",")",";",["T_WHITESPACE","\n            ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_STRING","is_numeric",47],"(",["T_VARIABLE","$color",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n                ",47],["T_VARIABLE","$pixel",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setColorValue",48],"(",["T_VARIABLE","$color",48],",",["T_WHITESPACE"," ",48],["T_LNUMBER","1",48],")",";",["T_WHITESPACE","\n            ",48],"}",["T_WHITESPACE"," ",49],["T_ELSE","else",49],["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n                ",49],["T_VARIABLE","$pixel",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setColor",50],"(",["T_VARIABLE","$color",50],")",";",["T_WHITESPACE","\n            ",50],"}",["T_WHITESPACE","\n            ",51],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_imageHandler",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n                ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_imageHandler",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","setImageBackgroundColor",53],"(",["T_VARIABLE","$color",53],")",";",["T_WHITESPACE","\n            ",53],"}",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE"," ",55],["T_ELSE","else",55],["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$pixel",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_imageHandler",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getImageBackgroundColor",56],"(",")",";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","imageBackgroundColor",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$pixel",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getColorAsString",59],"(",")",";",["T_WHITESPACE","\n\n        ",59],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","imageBackgroundColor",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Open image for processing\n     *\n     * @param string $filename\n     * @return void\n     * @throws \\Exception\n     *\/",64],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","open",71],"(",["T_VARIABLE","$filename",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_fileName",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$filename",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_checkCanProcess",74],"(",")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_getFileAttributes",75],"(",")",";",["T_WHITESPACE","\n\n        ",75],["T_TRY","try",77],["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_imageHandler",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_NEW","new",78],["T_WHITESPACE"," ",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Imagick",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_fileName",78],")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE"," ",79],["T_CATCH","catch",79],["T_WHITESPACE"," ",79],"(",["T_NS_SEPARATOR","\\",79],["T_STRING","ImagickException",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$e",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_THROW","throw",80],["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Exception",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Unsupported image format.'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$e",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getCode",80],"(",")",",",["T_WHITESPACE"," ",80],["T_VARIABLE","$e",80],")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n\n        ",81],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","backgroundColor",83],"(",")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getMimeType",84],"(",")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Save image to specific path.\n     * If some folders of path does not exist they will be created\n     *\n     * @param null|string $destination\n     * @param null|string $newName\n     * @return void\n     * @throws \\Exception  If destination path is not writable\n     *\/",87],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","save",96],"(",["T_VARIABLE","$destination",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","null",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$newName",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","null",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$fileName",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_prepareDestination",98],"(",["T_VARIABLE","$destination",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$newName",98],")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_applyOptions",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_imageHandler",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","stripImage",101],"(",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_imageHandler",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","writeImage",102],"(",["T_VARIABLE","$fileName",102],")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Apply options to image. Will be usable later when create an option container\n     *\n     * @return $this\n     *\/",105],["T_WHITESPACE","\n    ",109],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","_applyOptions",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_imageHandler",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","setImageCompressionQuality",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","quality",112],"(",")",")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_imageHandler",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setImageCompression",113],"(",["T_NS_SEPARATOR","\\",113],["T_STRING","Imagick",113],["T_DOUBLE_COLON","::",113],["T_STRING","COMPRESSION_JPEG",113],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_imageHandler",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","setImageUnits",114],"(",["T_NS_SEPARATOR","\\",114],["T_STRING","Imagick",114],["T_DOUBLE_COLON","::",114],["T_STRING","RESOLUTION_PIXELSPERINCH",114],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_imageHandler",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setImageResolution",115],"(",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_options",116],"[",["T_CONSTANT_ENCAPSED_STRING","'resolution'",116],"]","[",["T_CONSTANT_ENCAPSED_STRING","'x'",116],"]",",",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_options",117],"[",["T_CONSTANT_ENCAPSED_STRING","'resolution'",117],"]","[",["T_CONSTANT_ENCAPSED_STRING","'y'",117],"]",["T_WHITESPACE","\n        ",117],")",";",["T_WHITESPACE","\n        ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_STRING","method_exists",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_imageHandler",119],",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'optimizeImageLayers'",119],")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_imageHandler",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","optimizeImageLayers",120],"(",")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * @see \\Magento\\Framework\\Image\\Adapter\\AbstractAdapter::getImage\n     * @return string\n     *\/",126],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","getImage",130],"(",")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_applyOptions",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_imageHandler",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getImageBlob",133],"(",")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Change the image size\n     *\n     * @param null|int $frameWidth\n     * @param null|int $frameHeight\n     * @return void\n     *\/",136],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","resize",143],"(",["T_VARIABLE","$frameWidth",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","null",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$frameHeight",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","null",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_checkCanProcess",145],"(",")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$dims",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_adaptResizeValues",146],"(",["T_VARIABLE","$frameWidth",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$frameHeight",146],")",";",["T_WHITESPACE","\n\n        ",146],["T_VARIABLE","$newImage",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_NEW","new",148],["T_WHITESPACE"," ",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Imagick",148],"(",")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$newImage",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","newImage",149],"(",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$dims",150],"[",["T_CONSTANT_ENCAPSED_STRING","'frame'",150],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",150],"]",",",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$dims",151],"[",["T_CONSTANT_ENCAPSED_STRING","'frame'",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",151],"]",",",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_imageHandler",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getImageBackgroundColor",152],"(",")",["T_WHITESPACE","\n        ",152],")",";",["T_WHITESPACE","\n\n        ",153],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_imageHandler",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","resizeImage",155],"(",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$dims",156],"[",["T_CONSTANT_ENCAPSED_STRING","'dst'",156],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",156],"]",",",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$dims",157],"[",["T_CONSTANT_ENCAPSED_STRING","'dst'",157],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",157],"]",",",["T_WHITESPACE","\n            ",157],["T_NS_SEPARATOR","\\",158],["T_STRING","Imagick",158],["T_DOUBLE_COLON","::",158],["T_STRING","FILTER_CUBIC",158],",",["T_WHITESPACE","\n            ",158],["T_STRING","self",159],["T_DOUBLE_COLON","::",159],["T_STRING","BLUR_FACTOR",159],["T_WHITESPACE","\n        ",159],")",";",["T_WHITESPACE","\n\n        ",160],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_imageHandler",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getImageWidth",162],"(",")",["T_WHITESPACE"," ",162],"<",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_options",162],"[",["T_CONSTANT_ENCAPSED_STRING","'small_image'",162],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",162],"]",["T_WHITESPACE"," ",162],["T_BOOLEAN_OR","||",162],["T_WHITESPACE","\n            ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_imageHandler",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getImageHeight",163],"(",")",["T_WHITESPACE"," ",163],"<",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_options",163],"[",["T_CONSTANT_ENCAPSED_STRING","'small_image'",163],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",163],"]",["T_WHITESPACE","\n        ",163],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_imageHandler",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","sharpenImage",165],"(",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_options",166],"[",["T_CONSTANT_ENCAPSED_STRING","'sharpen'",166],"]","[",["T_CONSTANT_ENCAPSED_STRING","'radius'",166],"]",",",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_options",167],"[",["T_CONSTANT_ENCAPSED_STRING","'sharpen'",167],"]","[",["T_CONSTANT_ENCAPSED_STRING","'deviation'",167],"]",["T_WHITESPACE","\n            ",167],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n\n        ",169],["T_VARIABLE","$newImage",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","compositeImage",171],"(",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_imageHandler",172],",",["T_WHITESPACE","\n            ",172],["T_NS_SEPARATOR","\\",173],["T_STRING","Imagick",173],["T_DOUBLE_COLON","::",173],["T_STRING","COMPOSITE_OVER",173],",",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$dims",174],"[",["T_CONSTANT_ENCAPSED_STRING","'dst'",174],"]","[",["T_CONSTANT_ENCAPSED_STRING","'x'",174],"]",",",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$dims",175],"[",["T_CONSTANT_ENCAPSED_STRING","'dst'",175],"]","[",["T_CONSTANT_ENCAPSED_STRING","'y'",175],"]",["T_WHITESPACE","\n        ",175],")",";",["T_WHITESPACE","\n\n        ",176],["T_VARIABLE","$newImage",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","setImageFormat",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_imageHandler",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getImageFormat",178],"(",")",")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_imageHandler",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","clear",179],"(",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_imageHandler",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","destroy",180],"(",")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_imageHandler",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$newImage",181],";",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","refreshImageDimensions",183],"(",")",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Rotate image on specific angle\n     *\n     * @param int $angle\n     * @return void\n     *\/",186],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","rotate",192],"(",["T_VARIABLE","$angle",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_checkCanProcess",194],"(",")",";",["T_WHITESPACE","\n        ",194],["T_COMMENT","\/\/ compatibility with GD2 adapter\n",195],["T_WHITESPACE","        ",196],["T_VARIABLE","$angle",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_LNUMBER","360",196],["T_WHITESPACE"," ",196],"-",["T_WHITESPACE"," ",196],["T_VARIABLE","$angle",196],";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$pixel",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_NEW","new",197],["T_WHITESPACE"," ",197],["T_NS_SEPARATOR","\\",197],["T_STRING","ImagickPixel",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$pixel",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","setColor",198],"(",["T_CONSTANT_ENCAPSED_STRING","\"rgb(\"",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","imageBackgroundColor",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","\")\"",198],")",";",["T_WHITESPACE","\n\n        ",198],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_imageHandler",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","rotateImage",200],"(",["T_VARIABLE","$pixel",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$angle",200],")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","refreshImageDimensions",201],"(",")",";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Crop image\n     *\n     * @param int $top\n     * @param int $left\n     * @param int $right\n     * @param int $bottom\n     * @return bool\n     *\/",204],["T_WHITESPACE","\n    ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","crop",213],"(",["T_VARIABLE","$top",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_LNUMBER","0",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$left",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_LNUMBER","0",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$right",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_LNUMBER","0",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$bottom",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_LNUMBER","0",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$left",215],["T_WHITESPACE"," ",215],["T_IS_EQUAL","==",215],["T_WHITESPACE"," ",215],["T_LNUMBER","0",215],["T_WHITESPACE"," ",215],["T_BOOLEAN_AND","&&",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$top",215],["T_WHITESPACE"," ",215],["T_IS_EQUAL","==",215],["T_WHITESPACE"," ",215],["T_LNUMBER","0",215],["T_WHITESPACE"," ",215],["T_BOOLEAN_AND","&&",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$right",215],["T_WHITESPACE"," ",215],["T_IS_EQUAL","==",215],["T_WHITESPACE"," ",215],["T_LNUMBER","0",215],["T_WHITESPACE"," ",215],["T_BOOLEAN_AND","&&",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$bottom",215],["T_WHITESPACE"," ",215],["T_IS_EQUAL","==",215],["T_WHITESPACE"," ",215],["T_LNUMBER","0",215],["T_WHITESPACE"," ",215],["T_BOOLEAN_OR","||",215],["T_WHITESPACE"," ",215],"!",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_canProcess",215],"(",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_STRING","false",216],";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n\n        ",217],["T_VARIABLE","$newWidth",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_imageSrcWidth",219],["T_WHITESPACE"," ",219],"-",["T_WHITESPACE"," ",219],["T_VARIABLE","$left",219],["T_WHITESPACE"," ",219],"-",["T_WHITESPACE"," ",219],["T_VARIABLE","$right",219],";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$newHeight",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_imageSrcHeight",220],["T_WHITESPACE"," ",220],"-",["T_WHITESPACE"," ",220],["T_VARIABLE","$top",220],["T_WHITESPACE"," ",220],"-",["T_WHITESPACE"," ",220],["T_VARIABLE","$bottom",220],";",["T_WHITESPACE","\n\n        ",220],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_imageHandler",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","cropImage",222],"(",["T_VARIABLE","$newWidth",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$newHeight",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$left",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$top",222],")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","refreshImageDimensions",223],"(",")",";",["T_WHITESPACE","\n        ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_STRING","true",224],";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Add watermark to image\n     *\n     * @param string $imagePath\n     * @param int $positionX\n     * @param int $positionY\n     * @param int $opacity\n     * @param bool $tile\n     * @return void\n     * @throws \\LogicException\n     * @throws \\Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",227],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","watermark",241],"(",["T_VARIABLE","$imagePath",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$positionX",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_LNUMBER","0",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$positionY",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_LNUMBER","0",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$opacity",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_LNUMBER","30",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$tile",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","false",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_EMPTY","empty",243],"(",["T_VARIABLE","$imagePath",243],")",["T_WHITESPACE"," ",243],["T_BOOLEAN_OR","||",243],["T_WHITESPACE"," ",243],"!",["T_STRING","file_exists",243],"(",["T_VARIABLE","$imagePath",243],")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_THROW","throw",244],["T_WHITESPACE"," ",244],["T_NEW","new",244],["T_WHITESPACE"," ",244],["T_NS_SEPARATOR","\\",244],["T_STRING","LogicException",244],"(",["T_STRING","self",244],["T_DOUBLE_COLON","::",244],["T_STRING","ERROR_WATERMARK_IMAGE_ABSENT",244],")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_checkCanProcess",246],"(",")",";",["T_WHITESPACE","\n\n        ",246],["T_VARIABLE","$opacity",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getWatermarkImageOpacity",248],"(",")",["T_WHITESPACE"," ",248],"?",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getWatermarkImageOpacity",248],"(",")",["T_WHITESPACE"," ",248],":",["T_WHITESPACE"," ",248],["T_VARIABLE","$opacity",248],";",["T_WHITESPACE","\n\n        ",248],["T_VARIABLE","$opacity",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_DOUBLE_CAST","(double)",250],["T_STRING","number_format",250],"(",["T_VARIABLE","$opacity",250],["T_WHITESPACE"," ",250],"\/",["T_WHITESPACE"," ",250],["T_LNUMBER","100",250],",",["T_WHITESPACE"," ",250],["T_LNUMBER","1",250],")",";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$watermark",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_NEW","new",251],["T_WHITESPACE"," ",251],["T_NS_SEPARATOR","\\",251],["T_STRING","Imagick",251],"(",["T_VARIABLE","$imagePath",251],")",";",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getWatermarkWidth",253],"(",")",["T_WHITESPACE"," ",253],["T_BOOLEAN_AND","&&",253],["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getWatermarkHeight",254],"(",")",["T_WHITESPACE"," ",254],["T_BOOLEAN_AND","&&",254],["T_WHITESPACE","\n            ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getWatermarkPosition",255],"(",")",["T_WHITESPACE"," ",255],["T_IS_NOT_EQUAL","!=",255],["T_WHITESPACE"," ",255],["T_STRING","self",255],["T_DOUBLE_COLON","::",255],["T_STRING","POSITION_STRETCH",255],["T_WHITESPACE","\n        ",255],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$watermark",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","resizeImage",257],"(",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getWatermarkWidth",258],"(",")",",",["T_WHITESPACE","\n                ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getWatermarkHeight",259],"(",")",",",["T_WHITESPACE","\n                ",259],["T_NS_SEPARATOR","\\",260],["T_STRING","Imagick",260],["T_DOUBLE_COLON","::",260],["T_STRING","FILTER_CUBIC",260],",",["T_WHITESPACE","\n                ",260],["T_STRING","self",261],["T_DOUBLE_COLON","::",261],["T_STRING","BLUR_FACTOR",261],["T_WHITESPACE","\n            ",261],")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n\n        ",263],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_STRING","method_exists",265],"(",["T_VARIABLE","$watermark",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'setImageOpacity'",265],")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_COMMENT","\/\/ available from imagick 6.3.1\n",266],["T_WHITESPACE","            ",267],["T_VARIABLE","$watermark",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","setImageOpacity",267],"(",["T_VARIABLE","$opacity",267],")",";",["T_WHITESPACE","\n        ",267],"}",["T_WHITESPACE"," ",268],["T_ELSE","else",268],["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_COMMENT","\/\/ go to each pixel and make it transparent\n",269],["T_WHITESPACE","            ",270],["T_VARIABLE","$watermark",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","paintTransparentImage",270],"(",["T_VARIABLE","$watermark",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getImagePixelColor",270],"(",["T_LNUMBER","0",270],",",["T_WHITESPACE"," ",270],["T_LNUMBER","0",270],")",",",["T_WHITESPACE"," ",270],["T_LNUMBER","1",270],",",["T_WHITESPACE"," ",270],["T_LNUMBER","65530",270],")",";",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$watermark",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","evaluateImage",271],"(",["T_NS_SEPARATOR","\\",271],["T_STRING","Imagick",271],["T_DOUBLE_COLON","::",271],["T_STRING","EVALUATE_SUBTRACT",271],",",["T_WHITESPACE"," ",271],["T_LNUMBER","1",271],["T_WHITESPACE"," ",271],"-",["T_WHITESPACE"," ",271],["T_VARIABLE","$opacity",271],",",["T_WHITESPACE"," ",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Imagick",271],["T_DOUBLE_COLON","::",271],["T_STRING","CHANNEL_ALPHA",271],")",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n\n        ",272],["T_SWITCH","switch",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getWatermarkPosition",274],"(",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_CASE","case",275],["T_WHITESPACE"," ",275],["T_STRING","self",275],["T_DOUBLE_COLON","::",275],["T_STRING","POSITION_STRETCH",275],":",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$watermark",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","sampleImage",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_imageSrcWidth",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_imageSrcHeight",276],")",";",["T_WHITESPACE","\n                ",276],["T_BREAK","break",277],";",["T_WHITESPACE","\n            ",277],["T_CASE","case",278],["T_WHITESPACE"," ",278],["T_STRING","self",278],["T_DOUBLE_COLON","::",278],["T_STRING","POSITION_CENTER",278],":",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$positionX",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_imageSrcWidth",279],["T_WHITESPACE"," ",279],"-",["T_WHITESPACE"," ",279],["T_VARIABLE","$watermark",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getImageWidth",279],"(",")",")",["T_WHITESPACE"," ",279],"\/",["T_WHITESPACE"," ",279],["T_LNUMBER","2",279],";",["T_WHITESPACE","\n                ",279],["T_VARIABLE","$positionY",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_imageSrcHeight",280],["T_WHITESPACE"," ",280],"-",["T_WHITESPACE"," ",280],["T_VARIABLE","$watermark",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getImageHeight",280],"(",")",")",["T_WHITESPACE"," ",280],"\/",["T_WHITESPACE"," ",280],["T_LNUMBER","2",280],";",["T_WHITESPACE","\n                ",280],["T_BREAK","break",281],";",["T_WHITESPACE","\n            ",281],["T_CASE","case",282],["T_WHITESPACE"," ",282],["T_STRING","self",282],["T_DOUBLE_COLON","::",282],["T_STRING","POSITION_TOP_RIGHT",282],":",["T_WHITESPACE","\n                ",282],["T_VARIABLE","$positionX",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_imageSrcWidth",283],["T_WHITESPACE"," ",283],"-",["T_WHITESPACE"," ",283],["T_VARIABLE","$watermark",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getImageWidth",283],"(",")",";",["T_WHITESPACE","\n                ",283],["T_BREAK","break",284],";",["T_WHITESPACE","\n            ",284],["T_CASE","case",285],["T_WHITESPACE"," ",285],["T_STRING","self",285],["T_DOUBLE_COLON","::",285],["T_STRING","POSITION_BOTTOM_RIGHT",285],":",["T_WHITESPACE","\n                ",285],["T_VARIABLE","$positionX",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_imageSrcWidth",286],["T_WHITESPACE"," ",286],"-",["T_WHITESPACE"," ",286],["T_VARIABLE","$watermark",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getImageWidth",286],"(",")",";",["T_WHITESPACE","\n                ",286],["T_VARIABLE","$positionY",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_imageSrcHeight",287],["T_WHITESPACE"," ",287],"-",["T_WHITESPACE"," ",287],["T_VARIABLE","$watermark",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getImageHeight",287],"(",")",";",["T_WHITESPACE","\n                ",287],["T_BREAK","break",288],";",["T_WHITESPACE","\n            ",288],["T_CASE","case",289],["T_WHITESPACE"," ",289],["T_STRING","self",289],["T_DOUBLE_COLON","::",289],["T_STRING","POSITION_BOTTOM_LEFT",289],":",["T_WHITESPACE","\n                ",289],["T_VARIABLE","$positionY",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_imageSrcHeight",290],["T_WHITESPACE"," ",290],"-",["T_WHITESPACE"," ",290],["T_VARIABLE","$watermark",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getImageHeight",290],"(",")",";",["T_WHITESPACE","\n                ",290],["T_BREAK","break",291],";",["T_WHITESPACE","\n            ",291],["T_CASE","case",292],["T_WHITESPACE"," ",292],["T_STRING","self",292],["T_DOUBLE_COLON","::",292],["T_STRING","POSITION_TILE",292],":",["T_WHITESPACE","\n                ",292],["T_VARIABLE","$positionX",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_LNUMBER","0",293],";",["T_WHITESPACE","\n                ",293],["T_VARIABLE","$positionY",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_LNUMBER","0",294],";",["T_WHITESPACE","\n                ",294],["T_VARIABLE","$tile",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","true",295],";",["T_WHITESPACE","\n                ",295],["T_BREAK","break",296],";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n\n        ",297],["T_TRY","try",299],["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$tile",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n                ",300],["T_VARIABLE","$offsetX",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$positionX",301],";",["T_WHITESPACE","\n                ",301],["T_VARIABLE","$offsetY",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$positionY",302],";",["T_WHITESPACE","\n                ",302],["T_WHILE","while",303],["T_WHITESPACE"," ",303],"(",["T_VARIABLE","$offsetY",303],["T_WHITESPACE"," ",303],["T_IS_SMALLER_OR_EQUAL","<=",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_imageSrcHeight",303],["T_WHITESPACE"," ",303],"+",["T_WHITESPACE"," ",303],["T_VARIABLE","$watermark",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getImageHeight",303],"(",")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n                    ",303],["T_WHILE","while",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$offsetX",304],["T_WHITESPACE"," ",304],["T_IS_SMALLER_OR_EQUAL","<=",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_imageSrcWidth",304],["T_WHITESPACE"," ",304],"+",["T_WHITESPACE"," ",304],["T_VARIABLE","$watermark",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getImageWidth",304],"(",")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n                        ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_imageHandler",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","compositeImage",305],"(",["T_VARIABLE","$watermark",305],",",["T_WHITESPACE"," ",305],["T_NS_SEPARATOR","\\",305],["T_STRING","Imagick",305],["T_DOUBLE_COLON","::",305],["T_STRING","COMPOSITE_OVER",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$offsetX",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$offsetY",305],")",";",["T_WHITESPACE","\n                        ",305],["T_VARIABLE","$offsetX",306],["T_WHITESPACE"," ",306],["T_PLUS_EQUAL","+=",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$watermark",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getImageWidth",306],"(",")",";",["T_WHITESPACE","\n                    ",306],"}",["T_WHITESPACE","\n                    ",307],["T_VARIABLE","$offsetX",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$positionX",308],";",["T_WHITESPACE","\n                    ",308],["T_VARIABLE","$offsetY",309],["T_WHITESPACE"," ",309],["T_PLUS_EQUAL","+=",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$watermark",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getImageHeight",309],"(",")",";",["T_WHITESPACE","\n                ",309],"}",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE"," ",311],["T_ELSE","else",311],["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_imageHandler",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","compositeImage",312],"(",["T_VARIABLE","$watermark",312],",",["T_WHITESPACE"," ",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Imagick",312],["T_DOUBLE_COLON","::",312],["T_STRING","COMPOSITE_OVER",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$positionX",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$positionY",312],")",";",["T_WHITESPACE","\n            ",312],"}",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE"," ",314],["T_CATCH","catch",314],["T_WHITESPACE"," ",314],"(",["T_NS_SEPARATOR","\\",314],["T_STRING","ImagickException",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$e",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_THROW","throw",315],["T_WHITESPACE"," ",315],["T_NEW","new",315],["T_WHITESPACE"," ",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Exception",315],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to create watermark.'",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$e",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getCode",315],"(",")",",",["T_WHITESPACE"," ",315],["T_VARIABLE","$e",315],")",";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n\n        ",316],["T_COMMENT","\/\/ merge layers\n",318],["T_WHITESPACE","        ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_imageHandler",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","mergeImageLayers",319],"(",["T_NS_SEPARATOR","\\",319],["T_STRING","Imagick",319],["T_DOUBLE_COLON","::",319],["T_STRING","LAYERMETHOD_FLATTEN",319],")",";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$watermark",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","clear",320],"(",")",";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$watermark",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","destroy",321],"(",")",";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n\n    ",322],["T_DOC_COMMENT","\/**\n     * Checks required dependencies\n     *\n     * @return void\n     * @throws \\Exception If some of dependencies are missing\n     *\/",324],["T_WHITESPACE","\n    ",329],["T_PUBLIC","public",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","checkDependencies",330],"(",")",["T_WHITESPACE","\n    ",330],"{",["T_WHITESPACE","\n        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(","!",["T_STRING","class_exists",332],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Imagick'",332],",",["T_WHITESPACE"," ",332],["T_STRING","false",332],")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_THROW","throw",333],["T_WHITESPACE"," ",333],["T_NEW","new",333],["T_WHITESPACE"," ",333],["T_NS_SEPARATOR","\\",333],["T_STRING","Exception",333],"(",["T_CONSTANT_ENCAPSED_STRING","\"Required PHP extension 'Imagick' was not loaded.\"",333],")",";",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n    ",335],["T_DOC_COMMENT","\/**\n     * Reassign image dimensions\n     *\n     * @return void\n     *\/",337],["T_WHITESPACE","\n    ",341],["T_PUBLIC","public",342],["T_WHITESPACE"," ",342],["T_FUNCTION","function",342],["T_WHITESPACE"," ",342],["T_STRING","refreshImageDimensions",342],"(",")",["T_WHITESPACE","\n    ",342],"{",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_imageSrcWidth",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_imageHandler",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getImageWidth",344],"(",")",";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_imageSrcHeight",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_imageHandler",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getImageHeight",345],"(",")",";",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_imageHandler",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","setImagePage",346],"(",["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_imageSrcWidth",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_imageSrcHeight",346],",",["T_WHITESPACE"," ",346],["T_LNUMBER","0",346],",",["T_WHITESPACE"," ",346],["T_LNUMBER","0",346],")",";",["T_WHITESPACE","\n    ",346],"}",["T_WHITESPACE","\n\n    ",347],["T_DOC_COMMENT","\/**\n     * Standard destructor. Destroy stored information about image\n     *\/",349],["T_WHITESPACE","\n    ",351],["T_PUBLIC","public",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","__destruct",352],"(",")",["T_WHITESPACE","\n    ",352],"{",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","destroy",354],"(",")",";",["T_WHITESPACE","\n    ",354],"}",["T_WHITESPACE","\n\n    ",355],["T_DOC_COMMENT","\/**\n     * Destroy stored information about image\n     *\n     * @return $this\n     *\/",357],["T_WHITESPACE","\n    ",361],["T_PUBLIC","public",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","destroy",362],"(",")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(",["T_STRING","null",364],["T_WHITESPACE"," ",364],["T_IS_NOT_IDENTICAL","!==",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_imageHandler",364],["T_WHITESPACE"," ",364],["T_BOOLEAN_AND","&&",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_imageHandler",364],["T_WHITESPACE"," ",364],["T_INSTANCEOF","instanceof",364],["T_WHITESPACE"," ",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Imagick",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","_imageHandler",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","clear",365],"(",")",";",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_imageHandler",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","destroy",366],"(",")",";",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_imageHandler",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","null",367],";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE","\n        ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],";",["T_WHITESPACE","\n    ",369],"}",["T_WHITESPACE","\n\n    ",370],["T_DOC_COMMENT","\/**\n     * Returns rgba array of the specified pixel\n     *\n     * @param int $x\n     * @param int $y\n     * @return array\n     *\/",372],["T_WHITESPACE","\n    ",378],["T_PUBLIC","public",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","getColorAt",379],"(",["T_VARIABLE","$x",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$y",379],")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$pixel",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_imageHandler",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getImagePixelColor",381],"(",["T_VARIABLE","$x",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$y",381],")",";",["T_WHITESPACE","\n\n        ",381],["T_VARIABLE","$color",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$pixel",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getColor",383],"(",")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$rgbaColor",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],"[",["T_WHITESPACE","\n            ",384],["T_CONSTANT_ENCAPSED_STRING","'red'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$color",385],"[",["T_CONSTANT_ENCAPSED_STRING","'r'",385],"]",",",["T_WHITESPACE","\n            ",385],["T_CONSTANT_ENCAPSED_STRING","'green'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$color",386],"[",["T_CONSTANT_ENCAPSED_STRING","'g'",386],"]",",",["T_WHITESPACE","\n            ",386],["T_CONSTANT_ENCAPSED_STRING","'blue'",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$color",387],"[",["T_CONSTANT_ENCAPSED_STRING","'b'",387],"]",",",["T_WHITESPACE","\n            ",387],["T_CONSTANT_ENCAPSED_STRING","'alpha'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],"(",["T_LNUMBER","1",388],["T_WHITESPACE"," ",388],"-",["T_WHITESPACE"," ",388],["T_VARIABLE","$color",388],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",388],"]",")",["T_WHITESPACE"," ",388],"*",["T_WHITESPACE"," ",388],["T_LNUMBER","127",388],",",["T_WHITESPACE","\n        ",388],"]",";",["T_WHITESPACE","\n        ",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$rgbaColor",390],";",["T_WHITESPACE","\n    ",390],"}",["T_WHITESPACE","\n\n    ",391],["T_DOC_COMMENT","\/**\n     * Check whether the adapter can work with the image\n     *\n     * @throws \\LogicException\n     * @return true\n     *\/",393],["T_WHITESPACE","\n    ",398],["T_PROTECTED","protected",399],["T_WHITESPACE"," ",399],["T_FUNCTION","function",399],["T_WHITESPACE"," ",399],["T_STRING","_checkCanProcess",399],"(",")",["T_WHITESPACE","\n    ",399],"{",["T_WHITESPACE","\n        ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(","!",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_canProcess",401],"(",")",")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n            ",401],["T_THROW","throw",402],["T_WHITESPACE"," ",402],["T_NEW","new",402],["T_WHITESPACE"," ",402],["T_NS_SEPARATOR","\\",402],["T_STRING","LogicException",402],"(",["T_STRING","self",402],["T_DOUBLE_COLON","::",402],["T_STRING","ERROR_WRONG_IMAGE",402],")",";",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n        ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_STRING","true",404],";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Create Image from string\n     *\n     * @param string $text\n     * @param string $font\n     * @return \\Magento\\Framework\\Image\\Adapter\\AbstractAdapter\n     *\/",407],["T_WHITESPACE","\n    ",413],["T_PUBLIC","public",414],["T_WHITESPACE"," ",414],["T_FUNCTION","function",414],["T_WHITESPACE"," ",414],["T_STRING","createPngFromString",414],"(",["T_VARIABLE","$text",414],",",["T_WHITESPACE"," ",414],["T_VARIABLE","$font",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","''",414],")",["T_WHITESPACE","\n    ",414],"{",["T_WHITESPACE","\n        ",415],["T_VARIABLE","$image",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_getImagickObject",416],"(",")",";",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$draw",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","_getImagickDrawObject",417],"(",")",";",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$color",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_getImagickPixelObject",418],"(",["T_CONSTANT_ENCAPSED_STRING","'#000000'",418],")",";",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$background",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","_getImagickPixelObject",419],"(",["T_CONSTANT_ENCAPSED_STRING","'#ffffff00'",419],")",";",["T_WHITESPACE","\n        ",419],["T_COMMENT","\/\/ Transparent\n",420],["T_WHITESPACE","\n        ",421],["T_IF","if",422],["T_WHITESPACE"," ",422],"(","!",["T_EMPTY","empty",422],"(",["T_VARIABLE","$font",422],")",")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n            ",422],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_STRING","method_exists",423],"(",["T_VARIABLE","$image",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'setFont'",423],")",")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n                ",423],["T_VARIABLE","$image",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","setFont",424],"(",["T_VARIABLE","$font",424],")",";",["T_WHITESPACE","\n            ",424],"}",["T_WHITESPACE"," ",425],["T_ELSEIF","elseif",425],["T_WHITESPACE"," ",425],"(",["T_STRING","method_exists",425],"(",["T_VARIABLE","$draw",425],",",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","'setFont'",425],")",")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                ",425],["T_VARIABLE","$draw",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","setFont",426],"(",["T_VARIABLE","$font",426],")",";",["T_WHITESPACE","\n            ",426],"}",["T_WHITESPACE","\n        ",427],"}",["T_WHITESPACE","\n\n        ",428],["T_VARIABLE","$draw",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","setFontSize",430],"(",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_fontSize",430],")",";",["T_WHITESPACE","\n        ",430],["T_VARIABLE","$draw",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","setFillColor",431],"(",["T_VARIABLE","$color",431],")",";",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$draw",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","setStrokeAntialias",432],"(",["T_STRING","true",432],")",";",["T_WHITESPACE","\n        ",432],["T_VARIABLE","$draw",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","setTextAntialias",433],"(",["T_STRING","true",433],")",";",["T_WHITESPACE","\n\n        ",433],["T_VARIABLE","$metrics",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$image",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","queryFontMetrics",435],"(",["T_VARIABLE","$draw",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$text",435],")",";",["T_WHITESPACE","\n\n        ",435],["T_VARIABLE","$draw",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","annotation",437],"(",["T_LNUMBER","0",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$metrics",437],"[",["T_CONSTANT_ENCAPSED_STRING","'ascender'",437],"]",",",["T_WHITESPACE"," ",437],["T_VARIABLE","$text",437],")",";",["T_WHITESPACE","\n\n        ",437],["T_VARIABLE","$height",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_STRING","abs",439],"(",["T_VARIABLE","$metrics",439],"[",["T_CONSTANT_ENCAPSED_STRING","'ascender'",439],"]",")",["T_WHITESPACE"," ",439],"+",["T_WHITESPACE"," ",439],["T_STRING","abs",439],"(",["T_VARIABLE","$metrics",439],"[",["T_CONSTANT_ENCAPSED_STRING","'descender'",439],"]",")",";",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$image",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","newImage",440],"(",["T_VARIABLE","$metrics",440],"[",["T_CONSTANT_ENCAPSED_STRING","'textWidth'",440],"]",",",["T_WHITESPACE"," ",440],["T_VARIABLE","$height",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$background",440],")",";",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","_fileType",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","IMAGETYPE_PNG",441],";",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$image",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","setImageFormat",442],"(",["T_CONSTANT_ENCAPSED_STRING","'png'",442],")",";",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$image",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","drawImage",443],"(",["T_VARIABLE","$draw",443],")",";",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_imageHandler",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_VARIABLE","$image",444],";",["T_WHITESPACE","\n\n        ",444],["T_RETURN","return",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],";",["T_WHITESPACE","\n    ",446],"}",["T_WHITESPACE","\n\n    ",447],["T_DOC_COMMENT","\/**\n     * Get Imagick object\n     *\n     * @param mixed $files\n     * @return \\Imagick\n     *\/",449],["T_WHITESPACE","\n    ",454],["T_PROTECTED","protected",455],["T_WHITESPACE"," ",455],["T_FUNCTION","function",455],["T_WHITESPACE"," ",455],["T_STRING","_getImagickObject",455],"(",["T_VARIABLE","$files",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","null",455],")",["T_WHITESPACE","\n    ",455],"{",["T_WHITESPACE","\n        ",456],["T_RETURN","return",457],["T_WHITESPACE"," ",457],["T_NEW","new",457],["T_WHITESPACE"," ",457],["T_NS_SEPARATOR","\\",457],["T_STRING","Imagick",457],"(",["T_VARIABLE","$files",457],")",";",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n\n    ",458],["T_DOC_COMMENT","\/**\n     * Get ImagickDraw object\n     *\n     * @return \\ImagickDraw\n     *\/",460],["T_WHITESPACE","\n    ",464],["T_PROTECTED","protected",465],["T_WHITESPACE"," ",465],["T_FUNCTION","function",465],["T_WHITESPACE"," ",465],["T_STRING","_getImagickDrawObject",465],"(",")",["T_WHITESPACE","\n    ",465],"{",["T_WHITESPACE","\n        ",466],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_NEW","new",467],["T_WHITESPACE"," ",467],["T_NS_SEPARATOR","\\",467],["T_STRING","ImagickDraw",467],"(",")",";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * Get ImagickPixel object\n     *\n     * @param string|null $color\n     * @return \\ImagickPixel\n     *\/",470],["T_WHITESPACE","\n    ",475],["T_PROTECTED","protected",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","_getImagickPixelObject",476],"(",["T_VARIABLE","$color",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_STRING","null",476],")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_RETURN","return",478],["T_WHITESPACE"," ",478],["T_NEW","new",478],["T_WHITESPACE"," ",478],["T_NS_SEPARATOR","\\",478],["T_STRING","ImagickPixel",478],"(",["T_VARIABLE","$color",478],")",";",["T_WHITESPACE","\n    ",478],"}",["T_WHITESPACE","\n",479],"}",["T_WHITESPACE","\n",480]]
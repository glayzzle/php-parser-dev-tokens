[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Image",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Adapter",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","Gd2",8],["T_WHITESPACE"," ",8],["T_EXTENDS","extends",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Image",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Adapter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AbstractAdapter",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * Required extensions\n     *\n     * @var array\n     *\/",10],["T_WHITESPACE","\n    ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$_requiredExtensions",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],"[",["T_CONSTANT_ENCAPSED_STRING","\"gd\"",15],"]",";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * Image output callbacks by type\n     *\n     * @var array\n     *\/",17],["T_WHITESPACE","\n    ",21],["T_PRIVATE","private",22],["T_WHITESPACE"," ",22],["T_STATIC","static",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_callbacks",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],"[",["T_WHITESPACE","\n        ",22],["T_STRING","IMAGETYPE_GIF",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],"[",["T_CONSTANT_ENCAPSED_STRING","'output'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'imagegif'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'create'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefromgif'",23],"]",",",["T_WHITESPACE","\n        ",23],["T_STRING","IMAGETYPE_JPEG",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],"[",["T_CONSTANT_ENCAPSED_STRING","'output'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'imagejpeg'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'create'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefromjpeg'",24],"]",",",["T_WHITESPACE","\n        ",24],["T_STRING","IMAGETYPE_PNG",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],"[",["T_CONSTANT_ENCAPSED_STRING","'output'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'imagepng'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'create'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefrompng'",25],"]",",",["T_WHITESPACE","\n        ",25],["T_STRING","IMAGETYPE_XBM",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],"[",["T_CONSTANT_ENCAPSED_STRING","'output'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'imagexbm'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'create'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefromxbm'",26],"]",",",["T_WHITESPACE","\n        ",26],["T_STRING","IMAGETYPE_WBMP",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],"[",["T_CONSTANT_ENCAPSED_STRING","'output'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'imagewbmp'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'create'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'imagecreatefromxbm'",27],"]",",",["T_WHITESPACE","\n    ",27],"]",";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Whether image was resized or not\n     *\n     * @var bool\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$_resized",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","false",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * For properties reset, e.g. mimeType caching.\n     *\n     * @return void\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","_reset",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_fileMimeType",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_fileType",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Open image for processing\n     *\n     * @param string $filename\n     * @return void\n     * @throws \\OverflowException\n     *\/",48],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","open",55],"(",["T_VARIABLE","$filename",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_fileName",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$filename",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_reset",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getMimeType",59],"(",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_getFileAttributes",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_isMemoryLimitReached",61],"(",")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_THROW","throw",62],["T_WHITESPACE"," ",62],["T_NEW","new",62],["T_WHITESPACE"," ",62],["T_NS_SEPARATOR","\\",62],["T_STRING","OverflowException",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Memory limit has been reached.'",62],")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","imageDestroy",64],"(",")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_imageHandler",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","call_user_func",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_getCallback",65],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",65],")",",",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_fileName",65],")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Checks whether memory limit is reached.\n     *\n     * @return bool\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","_isMemoryLimitReached",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$limit",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_convertToByte",75],"(",["T_STRING","ini_get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'memory_limit'",75],")",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$requiredMemory",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_getImageNeedMemorySize",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_fileName",76],")",";",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$limit",77],["T_WHITESPACE"," ",77],["T_IS_IDENTICAL","===",77],["T_WHITESPACE"," ",77],"-",["T_LNUMBER","1",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_COMMENT","\/\/ A limit of -1 means no limit: http:\/\/www.php.net\/manual\/en\/ini.core.php#ini.memory-limit\n",78],["T_WHITESPACE","            ",79],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_STRING","false",79],";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","memory_get_usage",81],"(",["T_STRING","true",81],")",["T_WHITESPACE"," ",81],"+",["T_WHITESPACE"," ",81],["T_VARIABLE","$requiredMemory",81],["T_WHITESPACE"," ",81],">",["T_WHITESPACE"," ",81],["T_VARIABLE","$limit",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Get image needed memory size\n     *\n     * @param string $file\n     * @return float|int\n     *\/",84],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","_getImageNeedMemorySize",90],"(",["T_VARIABLE","$file",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$imageInfo",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","getimagesize",92],"(",["T_VARIABLE","$file",92],")",";",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_ISSET","isset",93],"(",["T_VARIABLE","$imageInfo",93],"[",["T_LNUMBER","0",93],"]",")",["T_WHITESPACE"," ",93],["T_BOOLEAN_OR","||",93],["T_WHITESPACE"," ",93],"!",["T_ISSET","isset",93],"(",["T_VARIABLE","$imageInfo",93],"[",["T_LNUMBER","1",93],"]",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_LNUMBER","0",94],";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_ISSET","isset",96],"(",["T_VARIABLE","$imageInfo",96],"[",["T_CONSTANT_ENCAPSED_STRING","'channels'",96],"]",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_COMMENT","\/\/ if there is no info about this parameter lets set it for maximum\n",97],["T_WHITESPACE","            ",98],["T_VARIABLE","$imageInfo",98],"[",["T_CONSTANT_ENCAPSED_STRING","'channels'",98],"]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_LNUMBER","4",98],";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(","!",["T_ISSET","isset",100],"(",["T_VARIABLE","$imageInfo",100],"[",["T_CONSTANT_ENCAPSED_STRING","'bits'",100],"]",")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_COMMENT","\/\/ if there is no info about this parameter lets set it for maximum\n",101],["T_WHITESPACE","            ",102],["T_VARIABLE","$imageInfo",102],"[",["T_CONSTANT_ENCAPSED_STRING","'bits'",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_LNUMBER","8",102],";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_STRING","round",105],"(",["T_WHITESPACE","\n            ",105],"(",["T_VARIABLE","$imageInfo",106],"[",["T_LNUMBER","0",106],"]",["T_WHITESPACE"," ",106],"*",["T_WHITESPACE"," ",106],["T_VARIABLE","$imageInfo",106],"[",["T_LNUMBER","1",106],"]",["T_WHITESPACE"," ",106],"*",["T_WHITESPACE"," ",106],["T_VARIABLE","$imageInfo",106],"[",["T_CONSTANT_ENCAPSED_STRING","'bits'",106],"]",["T_WHITESPACE"," ",106],"*",["T_WHITESPACE"," ",106],["T_VARIABLE","$imageInfo",106],"[",["T_CONSTANT_ENCAPSED_STRING","'channels'",106],"]",["T_WHITESPACE"," ",106],"\/",["T_WHITESPACE"," ",106],["T_LNUMBER","8",106],["T_WHITESPACE"," ",106],"+",["T_WHITESPACE"," ",106],["T_STRING","Pow",106],"(",["T_LNUMBER","2",106],",",["T_WHITESPACE"," ",106],["T_LNUMBER","16",106],")",")",["T_WHITESPACE"," ",106],"*",["T_WHITESPACE"," ",106],["T_DNUMBER","1.65",106],["T_WHITESPACE","\n        ",106],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Converts memory value (e.g. 64M, 129K) to bytes.\n     * Case insensitive value might be used.\n     *\n     * @param string $memoryValue\n     * @return int\n     *\/",110],["T_WHITESPACE","\n    ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","_convertToByte",117],"(",["T_VARIABLE","$memoryValue",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_STRING","stripos",119],"(",["T_VARIABLE","$memoryValue",119],",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'G'",119],")",["T_WHITESPACE"," ",119],["T_IS_NOT_IDENTICAL","!==",119],["T_WHITESPACE"," ",119],["T_STRING","false",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_INT_CAST","(int)",120],["T_VARIABLE","$memoryValue",120],["T_WHITESPACE"," ",120],"*",["T_WHITESPACE"," ",120],["T_STRING","pow",120],"(",["T_LNUMBER","1024",120],",",["T_WHITESPACE"," ",120],["T_LNUMBER","3",120],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE"," ",121],["T_ELSEIF","elseif",121],["T_WHITESPACE"," ",121],"(",["T_STRING","stripos",121],"(",["T_VARIABLE","$memoryValue",121],",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'M'",121],")",["T_WHITESPACE"," ",121],["T_IS_NOT_IDENTICAL","!==",121],["T_WHITESPACE"," ",121],["T_STRING","false",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_INT_CAST","(int)",122],["T_VARIABLE","$memoryValue",122],["T_WHITESPACE"," ",122],"*",["T_WHITESPACE"," ",122],["T_LNUMBER","1024",122],["T_WHITESPACE"," ",122],"*",["T_WHITESPACE"," ",122],["T_LNUMBER","1024",122],";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE"," ",123],["T_ELSEIF","elseif",123],["T_WHITESPACE"," ",123],"(",["T_STRING","stripos",123],"(",["T_VARIABLE","$memoryValue",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'K'",123],")",["T_WHITESPACE"," ",123],["T_IS_NOT_IDENTICAL","!==",123],["T_WHITESPACE"," ",123],["T_STRING","false",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_INT_CAST","(int)",124],["T_VARIABLE","$memoryValue",124],["T_WHITESPACE"," ",124],"*",["T_WHITESPACE"," ",124],["T_LNUMBER","1024",124],";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_INT_CAST","(int)",127],["T_VARIABLE","$memoryValue",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Save image to specific path.\n     * If some folders of path does not exist they will be created\n     *\n     * @param null|string $destination\n     * @param null|string $newName\n     * @return void\n     * @throws \\Exception  If destination path is not writable\n     *\/",130],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","save",139],"(",["T_VARIABLE","$destination",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","null",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$newName",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","null",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$fileName",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_prepareDestination",141],"(",["T_VARIABLE","$destination",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$newName",141],")",";",["T_WHITESPACE","\n\n        ",141],["T_IF","if",143],["T_WHITESPACE"," ",143],"(","!",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_resized",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_COMMENT","\/\/ keep alpha transparency\n",144],["T_WHITESPACE","            ",145],["T_VARIABLE","$isAlpha",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","false",145],";",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$isTrueColor",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","false",146],";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_getTransparency",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_imageHandler",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_fileType",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$isAlpha",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$isTrueColor",147],")",";",["T_WHITESPACE","\n            ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$isAlpha",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$isTrueColor",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                    ",149],["T_VARIABLE","$newImage",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","imagecreatetruecolor",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_imageSrcWidth",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_imageSrcHeight",150],")",";",["T_WHITESPACE","\n                ",150],"}",["T_WHITESPACE"," ",151],["T_ELSE","else",151],["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                    ",151],["T_VARIABLE","$newImage",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","imagecreate",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_imageSrcWidth",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_imageSrcHeight",152],")",";",["T_WHITESPACE","\n                ",152],"}",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_fillBackgroundColor",154],"(",["T_VARIABLE","$newImage",154],")",";",["T_WHITESPACE","\n                ",154],["T_STRING","imagecopy",155],"(",["T_VARIABLE","$newImage",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_imageHandler",155],",",["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],",",["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],",",["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],",",["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_imageSrcWidth",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_imageSrcHeight",155],")",";",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","imageDestroy",156],"(",")",";",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_imageHandler",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$newImage",157],";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n\n        ",159],["T_COMMENT","\/\/ Enable interlace\n",161],["T_WHITESPACE","        ",162],["T_STRING","imageinterlace",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_imageHandler",162],",",["T_WHITESPACE"," ",162],["T_STRING","true",162],")",";",["T_WHITESPACE","\n\n        ",162],["T_COMMENT","\/\/ Set image quality value\n",164],["T_WHITESPACE","        ",165],["T_SWITCH","switch",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_fileType",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_CASE","case",166],["T_WHITESPACE"," ",166],["T_STRING","IMAGETYPE_PNG",166],":",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$quality",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_LNUMBER","9",167],";",["T_WHITESPACE","   ",167],["T_COMMENT","\/\/ For PNG files compression level must be from 0 (no compression) to 9.\n",167],["T_WHITESPACE","                ",168],["T_BREAK","break",168],";",["T_WHITESPACE","\n\n            ",168],["T_CASE","case",170],["T_WHITESPACE"," ",170],["T_STRING","IMAGETYPE_JPEG",170],":",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$quality",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","quality",171],"(",")",";",["T_WHITESPACE","\n                ",171],["T_BREAK","break",172],";",["T_WHITESPACE","\n\n            ",172],["T_DEFAULT","default",174],":",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$quality",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","null",175],";",["T_WHITESPACE","    ",175],["T_COMMENT","\/\/ No compression.\n",175],["T_WHITESPACE","        ",176],"}",["T_WHITESPACE","\n\n        ",176],["T_COMMENT","\/\/ Prepare callback method parameters\n",178],["T_WHITESPACE","        ",179],["T_VARIABLE","$functionParameters",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],"[",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_imageHandler",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$fileName",179],"]",";",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$quality",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$functionParameters",181],"[","]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$quality",181],";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_STRING","call_user_func_array",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_getCallback",184],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",184],")",",",["T_WHITESPACE"," ",184],["T_VARIABLE","$functionParameters",184],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * @see \\Magento\\Framework\\Image\\Adapter\\AbstractAdapter::getImage\n     * @return string\n     *\/",187],["T_WHITESPACE","\n    ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","getImage",191],"(",")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_STRING","ob_start",193],"(",")",";",["T_WHITESPACE","\n        ",193],["T_STRING","call_user_func",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_getCallback",194],"(",["T_CONSTANT_ENCAPSED_STRING","'output'",194],")",",",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_imageHandler",194],")",";",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_STRING","ob_get_clean",195],"(",")",";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Obtain function name, basing on image type and callback type\n     *\n     * @param string $callbackType\n     * @param null|int $fileType\n     * @param string $unsupportedText\n     * @return string\n     * @throws \\Exception\n     *\/",198],["T_WHITESPACE","\n    ",206],["T_PRIVATE","private",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","_getCallback",207],"(",["T_VARIABLE","$callbackType",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$fileType",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","null",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$unsupportedText",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'Unsupported image format.'",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_STRING","null",209],["T_WHITESPACE"," ",209],["T_IS_IDENTICAL","===",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$fileType",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$fileType",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_fileType",210],";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n        ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_EMPTY","empty",212],"(",["T_STRING","self",212],["T_DOUBLE_COLON","::",212],["T_VARIABLE","$_callbacks",212],"[",["T_VARIABLE","$fileType",212],"]",")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_THROW","throw",213],["T_WHITESPACE"," ",213],["T_NEW","new",213],["T_WHITESPACE"," ",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Exception",213],"(",["T_VARIABLE","$unsupportedText",213],")",";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_EMPTY","empty",215],"(",["T_STRING","self",215],["T_DOUBLE_COLON","::",215],["T_VARIABLE","$_callbacks",215],"[",["T_VARIABLE","$fileType",215],"]","[",["T_VARIABLE","$callbackType",215],"]",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_THROW","throw",216],["T_WHITESPACE"," ",216],["T_NEW","new",216],["T_WHITESPACE"," ",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Exception",216],"(",["T_CONSTANT_ENCAPSED_STRING","'Callback not found.'",216],")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n        ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_STRING","self",218],["T_DOUBLE_COLON","::",218],["T_VARIABLE","$_callbacks",218],"[",["T_VARIABLE","$fileType",218],"]","[",["T_VARIABLE","$callbackType",218],"]",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Fill image with main background color.\n     * Returns a color identifier.\n     *\n     * @param resource &$imageResourceTo\n     * @return int\n     * @throws \\Exception\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",221],["T_WHITESPACE","\n    ",229],["T_PRIVATE","private",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","_fillBackgroundColor",230],"(","&",["T_VARIABLE","$imageResourceTo",230],")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_COMMENT","\/\/ try to keep transparency, if any\n",232],["T_WHITESPACE","        ",233],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_keepTransparency",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$isAlpha",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","false",234],";",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$transparentIndex",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_getTransparency",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_imageHandler",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_fileType",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$isAlpha",235],")",";",["T_WHITESPACE","\n            ",235],["T_TRY","try",236],["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_COMMENT","\/\/ fill truecolor png with alpha transparency\n",237],["T_WHITESPACE","                ",238],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$isAlpha",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                    ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(","!",["T_STRING","imagealphablending",239],"(",["T_VARIABLE","$imageResourceTo",239],",",["T_WHITESPACE"," ",239],["T_STRING","false",239],")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n                        ",239],["T_THROW","throw",240],["T_WHITESPACE"," ",240],["T_NEW","new",240],["T_WHITESPACE"," ",240],["T_NS_SEPARATOR","\\",240],["T_STRING","Exception",240],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to set alpha blending for PNG image.'",240],")",";",["T_WHITESPACE","\n                    ",240],"}",["T_WHITESPACE","\n                    ",241],["T_VARIABLE","$transparentAlphaColor",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","imagecolorallocatealpha",242],"(",["T_VARIABLE","$imageResourceTo",242],",",["T_WHITESPACE"," ",242],["T_LNUMBER","0",242],",",["T_WHITESPACE"," ",242],["T_LNUMBER","0",242],",",["T_WHITESPACE"," ",242],["T_LNUMBER","0",242],",",["T_WHITESPACE"," ",242],["T_LNUMBER","127",242],")",";",["T_WHITESPACE","\n                    ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_STRING","false",243],["T_WHITESPACE"," ",243],["T_IS_IDENTICAL","===",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$transparentAlphaColor",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                        ",243],["T_THROW","throw",244],["T_WHITESPACE"," ",244],["T_NEW","new",244],["T_WHITESPACE"," ",244],["T_NS_SEPARATOR","\\",244],["T_STRING","Exception",244],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to allocate alpha transparency for PNG image.'",244],")",";",["T_WHITESPACE","\n                    ",244],"}",["T_WHITESPACE","\n                    ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(","!",["T_STRING","imagefill",246],"(",["T_VARIABLE","$imageResourceTo",246],",",["T_WHITESPACE"," ",246],["T_LNUMBER","0",246],",",["T_WHITESPACE"," ",246],["T_LNUMBER","0",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$transparentAlphaColor",246],")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                        ",246],["T_THROW","throw",247],["T_WHITESPACE"," ",247],["T_NEW","new",247],["T_WHITESPACE"," ",247],["T_NS_SEPARATOR","\\",247],["T_STRING","Exception",247],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to fill PNG image with alpha transparency.'",247],")",";",["T_WHITESPACE","\n                    ",247],"}",["T_WHITESPACE","\n                    ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(","!",["T_STRING","imagesavealpha",249],"(",["T_VARIABLE","$imageResourceTo",249],",",["T_WHITESPACE"," ",249],["T_STRING","true",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                        ",249],["T_THROW","throw",250],["T_WHITESPACE"," ",250],["T_NEW","new",250],["T_WHITESPACE"," ",250],["T_NS_SEPARATOR","\\",250],["T_STRING","Exception",250],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to save alpha transparency into PNG image.'",250],")",";",["T_WHITESPACE","\n                    ",250],"}",["T_WHITESPACE","\n\n                    ",251],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$transparentAlphaColor",253],";",["T_WHITESPACE","\n                ",253],"}",["T_WHITESPACE"," ",254],["T_ELSEIF","elseif",254],["T_WHITESPACE"," ",254],"(",["T_STRING","false",254],["T_WHITESPACE"," ",254],["T_IS_NOT_IDENTICAL","!==",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$transparentIndex",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                    ",254],["T_COMMENT","\/\/ fill image with indexed non-alpha transparency\n",255],["T_WHITESPACE","                    ",256],["T_VARIABLE","$transparentColor",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","false",256],";",["T_WHITESPACE","\n                    ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$transparentIndex",257],["T_WHITESPACE"," ",257],["T_IS_GREATER_OR_EQUAL",">=",257],["T_WHITESPACE"," ",257],["T_LNUMBER","0",257],["T_WHITESPACE"," ",257],["T_BOOLEAN_AND","&&",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$transparentIndex",257],["T_WHITESPACE"," ",257],["T_IS_SMALLER_OR_EQUAL","<=",257],["T_WHITESPACE"," ",257],["T_STRING","imagecolorstotal",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_imageHandler",257],")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                        ",257],["T_LIST","list",258],"(",["T_VARIABLE","$r",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$g",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$b",258],")",["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","array_values",258],"(",["T_STRING","imagecolorsforindex",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_imageHandler",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$transparentIndex",258],")",")",";",["T_WHITESPACE","\n                        ",258],["T_VARIABLE","$transparentColor",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_STRING","imagecolorallocate",259],"(",["T_VARIABLE","$imageResourceTo",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$r",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$g",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$b",259],")",";",["T_WHITESPACE","\n                    ",259],"}",["T_WHITESPACE","\n                    ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_STRING","false",261],["T_WHITESPACE"," ",261],["T_IS_IDENTICAL","===",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$transparentColor",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n                        ",261],["T_THROW","throw",262],["T_WHITESPACE"," ",262],["T_NEW","new",262],["T_WHITESPACE"," ",262],["T_NS_SEPARATOR","\\",262],["T_STRING","Exception",262],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to allocate transparent color for image.'",262],")",";",["T_WHITESPACE","\n                    ",262],"}",["T_WHITESPACE","\n                    ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(","!",["T_STRING","imagefill",264],"(",["T_VARIABLE","$imageResourceTo",264],",",["T_WHITESPACE"," ",264],["T_LNUMBER","0",264],",",["T_WHITESPACE"," ",264],["T_LNUMBER","0",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$transparentColor",264],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                        ",264],["T_THROW","throw",265],["T_WHITESPACE"," ",265],["T_NEW","new",265],["T_WHITESPACE"," ",265],["T_NS_SEPARATOR","\\",265],["T_STRING","Exception",265],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to fill image with transparency.'",265],")",";",["T_WHITESPACE","\n                    ",265],"}",["T_WHITESPACE","\n                    ",266],["T_STRING","imagecolortransparent",267],"(",["T_VARIABLE","$imageResourceTo",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$transparentColor",267],")",";",["T_WHITESPACE","\n                    ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$transparentColor",268],";",["T_WHITESPACE","\n                ",268],"}",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE"," ",270],["T_CATCH","catch",270],["T_WHITESPACE"," ",270],"(",["T_NS_SEPARATOR","\\",270],["T_STRING","Exception",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$e",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                ",270],["T_COMMENT","\/\/ fallback to default background color\n",271],["T_WHITESPACE","            ",272],"}",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n        ",273],["T_LIST","list",274],"(",["T_VARIABLE","$r",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$g",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$b",274],")",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_backgroundColor",274],";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$color",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","imagecolorallocate",275],"(",["T_VARIABLE","$imageResourceTo",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$r",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$g",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$b",275],")",";",["T_WHITESPACE","\n        ",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(","!",["T_STRING","imagefill",276],"(",["T_VARIABLE","$imageResourceTo",276],",",["T_WHITESPACE"," ",276],["T_LNUMBER","0",276],",",["T_WHITESPACE"," ",276],["T_LNUMBER","0",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$color",276],")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_THROW","throw",277],["T_WHITESPACE"," ",277],["T_NEW","new",277],["T_WHITESPACE"," ",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Exception",277],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Failed to fill image background with color ",277],["T_CURLY_OPEN","{",277],["T_VARIABLE","$r",277],"}",["T_ENCAPSED_AND_WHITESPACE"," ",277],["T_CURLY_OPEN","{",277],["T_VARIABLE","$g",277],"}",["T_ENCAPSED_AND_WHITESPACE"," ",277],["T_CURLY_OPEN","{",277],["T_VARIABLE","$b",277],"}",["T_ENCAPSED_AND_WHITESPACE",".",277],"\"",")",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n\n        ",278],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$color",280],";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * Gives true for a PNG with alpha, false otherwise\n     *\n     * @param string $fileName\n     * @return boolean\n     *\/",283],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","checkAlpha",289],"(",["T_VARIABLE","$fileName",289],")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],"(",["T_STRING","ord",291],"(",["T_STRING","file_get_contents",291],"(",["T_VARIABLE","$fileName",291],",",["T_WHITESPACE"," ",291],["T_STRING","false",291],",",["T_WHITESPACE"," ",291],["T_STRING","null",291],",",["T_WHITESPACE"," ",291],["T_LNUMBER","25",291],",",["T_WHITESPACE"," ",291],["T_LNUMBER","1",291],")",")",["T_WHITESPACE"," ",291],"&",["T_WHITESPACE"," ",291],["T_LNUMBER","6",291],["T_WHITESPACE"," ",291],"&",["T_WHITESPACE"," ",291],["T_LNUMBER","4",291],")",["T_WHITESPACE"," ",291],["T_IS_EQUAL","==",291],["T_WHITESPACE"," ",291],["T_LNUMBER","4",291],";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Checks if image has alpha transparency\n     *\n     * @param resource $imageResource\n     * @param int $fileType one of the constants IMAGETYPE_*\n     * @param bool &$isAlpha\n     * @param bool &$isTrueColor\n     * @return boolean\n     * @SuppressWarnings(PHPMD.BooleanGetMethodName)\n     *\/",294],["T_WHITESPACE","\n    ",303],["T_PRIVATE","private",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","_getTransparency",304],"(",["T_VARIABLE","$imageResource",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$fileType",304],",",["T_WHITESPACE"," ",304],"&",["T_VARIABLE","$isAlpha",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","false",304],",",["T_WHITESPACE"," ",304],"&",["T_VARIABLE","$isTrueColor",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","false",304],")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$isAlpha",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","false",306],";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$isTrueColor",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","false",307],";",["T_WHITESPACE","\n        ",307],["T_COMMENT","\/\/ assume that transparency is supported by gif\/png only\n",308],["T_WHITESPACE","        ",309],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_STRING","IMAGETYPE_GIF",309],["T_WHITESPACE"," ",309],["T_IS_IDENTICAL","===",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$fileType",309],["T_WHITESPACE"," ",309],["T_BOOLEAN_OR","||",309],["T_WHITESPACE"," ",309],["T_STRING","IMAGETYPE_PNG",309],["T_WHITESPACE"," ",309],["T_IS_IDENTICAL","===",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$fileType",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_COMMENT","\/\/ check for specific transparent color\n",310],["T_WHITESPACE","            ",311],["T_VARIABLE","$transparentIndex",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","imagecolortransparent",311],"(",["T_VARIABLE","$imageResource",311],")",";",["T_WHITESPACE","\n            ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$transparentIndex",312],["T_WHITESPACE"," ",312],["T_IS_GREATER_OR_EQUAL",">=",312],["T_WHITESPACE"," ",312],["T_LNUMBER","0",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n                ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$transparentIndex",313],";",["T_WHITESPACE","\n            ",313],"}",["T_WHITESPACE"," ",314],["T_ELSEIF","elseif",314],["T_WHITESPACE"," ",314],"(",["T_STRING","IMAGETYPE_PNG",314],["T_WHITESPACE"," ",314],["T_IS_IDENTICAL","===",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$fileType",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n                ",314],["T_COMMENT","\/\/ assume that truecolor PNG has transparency\n",315],["T_WHITESPACE","                ",316],["T_VARIABLE","$isAlpha",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","checkAlpha",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_fileName",316],")",";",["T_WHITESPACE","\n                ",316],["T_VARIABLE","$isTrueColor",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","true",317],";",["T_WHITESPACE","\n                ",317],["T_COMMENT","\/\/ -1\n",318],["T_WHITESPACE","                ",319],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$transparentIndex",319],";",["T_WHITESPACE","\n            ",319],"}",["T_WHITESPACE","\n        ",320],"}",["T_WHITESPACE","\n        ",321],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_STRING","IMAGETYPE_JPEG",322],["T_WHITESPACE"," ",322],["T_IS_IDENTICAL","===",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$fileType",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n            ",322],["T_VARIABLE","$isTrueColor",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","true",323],";",["T_WHITESPACE","\n        ",323],"}",["T_WHITESPACE","\n        ",324],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_STRING","false",325],";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_DOC_COMMENT","\/**\n     * Change the image size\n     *\n     * @param null|int $frameWidth\n     * @param null|int $frameHeight\n     * @return void\n     *\/",328],["T_WHITESPACE","\n    ",334],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","resize",335],"(",["T_VARIABLE","$frameWidth",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","null",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$frameHeight",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","null",335],")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$dims",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_adaptResizeValues",337],"(",["T_VARIABLE","$frameWidth",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$frameHeight",337],")",";",["T_WHITESPACE","\n\n        ",337],["T_COMMENT","\/\/ create new image\n",339],["T_WHITESPACE","        ",340],["T_VARIABLE","$isAlpha",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_STRING","false",340],";",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$isTrueColor",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_STRING","false",341],";",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_getTransparency",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_imageHandler",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_fileType",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$isAlpha",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$isTrueColor",342],")",";",["T_WHITESPACE","\n        ",342],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$isTrueColor",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n            ",343],["T_VARIABLE","$newImage",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_STRING","imagecreatetruecolor",344],"(",["T_VARIABLE","$dims",344],"[",["T_CONSTANT_ENCAPSED_STRING","'frame'",344],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",344],"]",",",["T_WHITESPACE"," ",344],["T_VARIABLE","$dims",344],"[",["T_CONSTANT_ENCAPSED_STRING","'frame'",344],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",344],"]",")",";",["T_WHITESPACE","\n        ",344],"}",["T_WHITESPACE"," ",345],["T_ELSE","else",345],["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$newImage",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_STRING","imagecreate",346],"(",["T_VARIABLE","$dims",346],"[",["T_CONSTANT_ENCAPSED_STRING","'frame'",346],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",346],"]",",",["T_WHITESPACE"," ",346],["T_VARIABLE","$dims",346],"[",["T_CONSTANT_ENCAPSED_STRING","'frame'",346],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",346],"]",")",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n\n        ",347],["T_COMMENT","\/\/ fill new image with required color\n",349],["T_WHITESPACE","        ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_fillBackgroundColor",350],"(",["T_VARIABLE","$newImage",350],")",";",["T_WHITESPACE","\n\n        ",350],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_imageHandler",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_COMMENT","\/\/ resample source image and copy it into new frame\n",353],["T_WHITESPACE","            ",354],["T_STRING","imagecopyresampled",354],"(",["T_WHITESPACE","\n                ",354],["T_VARIABLE","$newImage",355],",",["T_WHITESPACE","\n                ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_imageHandler",356],",",["T_WHITESPACE","\n                ",356],["T_VARIABLE","$dims",357],"[",["T_CONSTANT_ENCAPSED_STRING","'dst'",357],"]","[",["T_CONSTANT_ENCAPSED_STRING","'x'",357],"]",",",["T_WHITESPACE","\n                ",357],["T_VARIABLE","$dims",358],"[",["T_CONSTANT_ENCAPSED_STRING","'dst'",358],"]","[",["T_CONSTANT_ENCAPSED_STRING","'y'",358],"]",",",["T_WHITESPACE","\n                ",358],["T_VARIABLE","$dims",359],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",359],"]","[",["T_CONSTANT_ENCAPSED_STRING","'x'",359],"]",",",["T_WHITESPACE","\n                ",359],["T_VARIABLE","$dims",360],"[",["T_CONSTANT_ENCAPSED_STRING","'src'",360],"]","[",["T_CONSTANT_ENCAPSED_STRING","'y'",360],"]",",",["T_WHITESPACE","\n                ",360],["T_VARIABLE","$dims",361],"[",["T_CONSTANT_ENCAPSED_STRING","'dst'",361],"]","[",["T_CONSTANT_ENCAPSED_STRING","'width'",361],"]",",",["T_WHITESPACE","\n                ",361],["T_VARIABLE","$dims",362],"[",["T_CONSTANT_ENCAPSED_STRING","'dst'",362],"]","[",["T_CONSTANT_ENCAPSED_STRING","'height'",362],"]",",",["T_WHITESPACE","\n                ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_imageSrcWidth",363],",",["T_WHITESPACE","\n                ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_imageSrcHeight",364],["T_WHITESPACE","\n            ",364],")",";",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","imageDestroy",367],"(",")",";",["T_WHITESPACE","\n        ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_imageHandler",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$newImage",368],";",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","refreshImageDimensions",369],"(",")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_resized",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING","true",370],";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Rotate image on specific angle\n     *\n     * @param int $angle\n     * @return void\n     *\/",373],["T_WHITESPACE","\n    ",378],["T_PUBLIC","public",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","rotate",379],"(",["T_VARIABLE","$angle",379],")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$rotatedImage",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_STRING","imagerotate",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_imageHandler",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$angle",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","imageBackgroundColor",381],")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","imageDestroy",382],"(",")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_imageHandler",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$rotatedImage",383],";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","refreshImageDimensions",384],"(",")",";",["T_WHITESPACE","\n    ",384],"}",["T_WHITESPACE","\n\n    ",385],["T_DOC_COMMENT","\/**\n     * Add watermark to image\n     *\n     * @param string $imagePath\n     * @param int $positionX\n     * @param int $positionY\n     * @param int $opacity\n     * @param bool $tile\n     * @return void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",387],["T_WHITESPACE","\n    ",400],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","watermark",401],"(",["T_VARIABLE","$imagePath",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$positionX",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_LNUMBER","0",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$positionY",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_LNUMBER","0",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$opacity",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_LNUMBER","30",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$tile",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","false",401],")",["T_WHITESPACE","\n    ",401],"{",["T_WHITESPACE","\n        ",402],["T_LIST","list",403],"(",["T_VARIABLE","$watermarkSrcWidth",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$watermarkSrcHeight",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$watermarkFileType",403],",",")",["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_getImageOptions",403],"(",["T_VARIABLE","$imagePath",403],")",";",["T_WHITESPACE","\n        ",403],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_getFileAttributes",404],"(",")",";",["T_WHITESPACE","\n        ",404],["T_VARIABLE","$watermark",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","call_user_func",405],"(",["T_WHITESPACE","\n            ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","_getCallback",406],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$watermarkFileType",406],",",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'Unsupported watermark image format.'",406],")",",",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$imagePath",407],["T_WHITESPACE","\n        ",407],")",";",["T_WHITESPACE","\n\n        ",408],["T_VARIABLE","$merged",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_STRING","false",410],";",["T_WHITESPACE","\n\n        ",410],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getWatermarkWidth",412],"(",")",["T_WHITESPACE"," ",412],["T_BOOLEAN_AND","&&",412],["T_WHITESPACE","\n            ",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getWatermarkHeight",413],"(",")",["T_WHITESPACE"," ",413],["T_BOOLEAN_AND","&&",413],["T_WHITESPACE","\n            ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","getWatermarkPosition",414],"(",")",["T_WHITESPACE"," ",414],["T_IS_NOT_EQUAL","!=",414],["T_WHITESPACE"," ",414],["T_STRING","self",414],["T_DOUBLE_COLON","::",414],["T_STRING","POSITION_STRETCH",414],["T_WHITESPACE","\n        ",414],")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n            ",415],["T_VARIABLE","$newWatermark",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_STRING","imagecreatetruecolor",416],"(",["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getWatermarkWidth",416],"(",")",",",["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getWatermarkHeight",416],"(",")",")",";",["T_WHITESPACE","\n            ",416],["T_STRING","imagealphablending",417],"(",["T_VARIABLE","$newWatermark",417],",",["T_WHITESPACE"," ",417],["T_STRING","false",417],")",";",["T_WHITESPACE","\n            ",417],["T_VARIABLE","$col",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","imagecolorallocate",418],"(",["T_VARIABLE","$newWatermark",418],",",["T_WHITESPACE"," ",418],["T_LNUMBER","255",418],",",["T_WHITESPACE"," ",418],["T_LNUMBER","255",418],",",["T_WHITESPACE"," ",418],["T_LNUMBER","255",418],")",";",["T_WHITESPACE","\n            ",418],["T_STRING","imagecolortransparent",419],"(",["T_VARIABLE","$newWatermark",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$col",419],")",";",["T_WHITESPACE","\n            ",419],["T_STRING","imagefilledrectangle",420],"(",["T_VARIABLE","$newWatermark",420],",",["T_WHITESPACE"," ",420],["T_LNUMBER","0",420],",",["T_WHITESPACE"," ",420],["T_LNUMBER","0",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getWatermarkWidth",420],"(",")",",",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getWatermarkHeight",420],"(",")",",",["T_WHITESPACE"," ",420],["T_VARIABLE","$col",420],")",";",["T_WHITESPACE","\n            ",420],["T_STRING","imagealphablending",421],"(",["T_VARIABLE","$newWatermark",421],",",["T_WHITESPACE"," ",421],["T_STRING","true",421],")",";",["T_WHITESPACE","\n            ",421],["T_STRING","imageSaveAlpha",422],"(",["T_VARIABLE","$newWatermark",422],",",["T_WHITESPACE"," ",422],["T_STRING","true",422],")",";",["T_WHITESPACE","\n            ",422],["T_STRING","imagecopyresampled",423],"(",["T_WHITESPACE","\n                ",423],["T_VARIABLE","$newWatermark",424],",",["T_WHITESPACE","\n                ",424],["T_VARIABLE","$watermark",425],",",["T_WHITESPACE","\n                ",425],["T_LNUMBER","0",426],",",["T_WHITESPACE","\n                ",426],["T_LNUMBER","0",427],",",["T_WHITESPACE","\n                ",427],["T_LNUMBER","0",428],",",["T_WHITESPACE","\n                ",428],["T_LNUMBER","0",429],",",["T_WHITESPACE","\n                ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","getWatermarkWidth",430],"(",")",",",["T_WHITESPACE","\n                ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","getWatermarkHeight",431],"(",")",",",["T_WHITESPACE","\n                ",431],["T_STRING","imagesx",432],"(",["T_VARIABLE","$watermark",432],")",",",["T_WHITESPACE","\n                ",432],["T_STRING","imagesy",433],"(",["T_VARIABLE","$watermark",433],")",["T_WHITESPACE","\n            ",433],")",";",["T_WHITESPACE","\n            ",434],["T_VARIABLE","$watermark",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$newWatermark",435],";",["T_WHITESPACE","\n        ",435],"}",["T_WHITESPACE","\n\n        ",436],["T_IF","if",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getWatermarkPosition",438],"(",")",["T_WHITESPACE"," ",438],["T_IS_EQUAL","==",438],["T_WHITESPACE"," ",438],["T_STRING","self",438],["T_DOUBLE_COLON","::",438],["T_STRING","POSITION_TILE",438],")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n            ",438],["T_VARIABLE","$tile",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_STRING","true",439],";",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE"," ",440],["T_ELSEIF","elseif",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getWatermarkPosition",440],"(",")",["T_WHITESPACE"," ",440],["T_IS_EQUAL","==",440],["T_WHITESPACE"," ",440],["T_STRING","self",440],["T_DOUBLE_COLON","::",440],["T_STRING","POSITION_STRETCH",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_VARIABLE","$newWatermark",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","imagecreatetruecolor",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","_imageSrcWidth",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","_imageSrcHeight",441],")",";",["T_WHITESPACE","\n            ",441],["T_STRING","imagealphablending",442],"(",["T_VARIABLE","$newWatermark",442],",",["T_WHITESPACE"," ",442],["T_STRING","false",442],")",";",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$col",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_STRING","imagecolorallocate",443],"(",["T_VARIABLE","$newWatermark",443],",",["T_WHITESPACE"," ",443],["T_LNUMBER","255",443],",",["T_WHITESPACE"," ",443],["T_LNUMBER","255",443],",",["T_WHITESPACE"," ",443],["T_LNUMBER","255",443],")",";",["T_WHITESPACE","\n            ",443],["T_STRING","imagecolortransparent",444],"(",["T_VARIABLE","$newWatermark",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$col",444],")",";",["T_WHITESPACE","\n            ",444],["T_STRING","imagefilledrectangle",445],"(",["T_VARIABLE","$newWatermark",445],",",["T_WHITESPACE"," ",445],["T_LNUMBER","0",445],",",["T_WHITESPACE"," ",445],["T_LNUMBER","0",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","_imageSrcWidth",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","_imageSrcHeight",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$col",445],")",";",["T_WHITESPACE","\n            ",445],["T_STRING","imagealphablending",446],"(",["T_VARIABLE","$newWatermark",446],",",["T_WHITESPACE"," ",446],["T_STRING","true",446],")",";",["T_WHITESPACE","\n            ",446],["T_STRING","imageSaveAlpha",447],"(",["T_VARIABLE","$newWatermark",447],",",["T_WHITESPACE"," ",447],["T_STRING","true",447],")",";",["T_WHITESPACE","\n            ",447],["T_STRING","imagecopyresampled",448],"(",["T_WHITESPACE","\n                ",448],["T_VARIABLE","$newWatermark",449],",",["T_WHITESPACE","\n                ",449],["T_VARIABLE","$watermark",450],",",["T_WHITESPACE","\n                ",450],["T_LNUMBER","0",451],",",["T_WHITESPACE","\n                ",451],["T_LNUMBER","0",452],",",["T_WHITESPACE","\n                ",452],["T_LNUMBER","0",453],",",["T_WHITESPACE","\n                ",453],["T_LNUMBER","0",454],",",["T_WHITESPACE","\n                ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","_imageSrcWidth",455],",",["T_WHITESPACE","\n                ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","_imageSrcHeight",456],",",["T_WHITESPACE","\n                ",456],["T_STRING","imagesx",457],"(",["T_VARIABLE","$watermark",457],")",",",["T_WHITESPACE","\n                ",457],["T_STRING","imagesy",458],"(",["T_VARIABLE","$watermark",458],")",["T_WHITESPACE","\n            ",458],")",";",["T_WHITESPACE","\n            ",459],["T_VARIABLE","$watermark",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$newWatermark",460],";",["T_WHITESPACE","\n        ",460],"}",["T_WHITESPACE"," ",461],["T_ELSEIF","elseif",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getWatermarkPosition",461],"(",")",["T_WHITESPACE"," ",461],["T_IS_EQUAL","==",461],["T_WHITESPACE"," ",461],["T_STRING","self",461],["T_DOUBLE_COLON","::",461],["T_STRING","POSITION_CENTER",461],")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$positionX",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","_imageSrcWidth",462],["T_WHITESPACE"," ",462],"\/",["T_WHITESPACE"," ",462],["T_LNUMBER","2",462],["T_WHITESPACE"," ",462],"-",["T_WHITESPACE"," ",462],["T_STRING","imagesx",462],"(",["T_VARIABLE","$watermark",462],")",["T_WHITESPACE"," ",462],"\/",["T_WHITESPACE"," ",462],["T_LNUMBER","2",462],";",["T_WHITESPACE","\n            ",462],["T_VARIABLE","$positionY",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_imageSrcHeight",463],["T_WHITESPACE"," ",463],"\/",["T_WHITESPACE"," ",463],["T_LNUMBER","2",463],["T_WHITESPACE"," ",463],"-",["T_WHITESPACE"," ",463],["T_STRING","imagesy",463],"(",["T_VARIABLE","$watermark",463],")",["T_WHITESPACE"," ",463],"\/",["T_WHITESPACE"," ",463],["T_LNUMBER","2",463],";",["T_WHITESPACE","\n            ",463],["T_STRING","imagecopymerge",464],"(",["T_WHITESPACE","\n                ",464],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_imageHandler",465],",",["T_WHITESPACE","\n                ",465],["T_VARIABLE","$watermark",466],",",["T_WHITESPACE","\n                ",466],["T_VARIABLE","$positionX",467],",",["T_WHITESPACE","\n                ",467],["T_VARIABLE","$positionY",468],",",["T_WHITESPACE","\n                ",468],["T_LNUMBER","0",469],",",["T_WHITESPACE","\n                ",469],["T_LNUMBER","0",470],",",["T_WHITESPACE","\n                ",470],["T_STRING","imagesx",471],"(",["T_VARIABLE","$watermark",471],")",",",["T_WHITESPACE","\n                ",471],["T_STRING","imagesy",472],"(",["T_VARIABLE","$watermark",472],")",",",["T_WHITESPACE","\n                ",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","getWatermarkImageOpacity",473],"(",")",["T_WHITESPACE","\n            ",473],")",";",["T_WHITESPACE","\n        ",474],"}",["T_WHITESPACE"," ",475],["T_ELSEIF","elseif",475],["T_WHITESPACE"," ",475],"(",["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","getWatermarkPosition",475],"(",")",["T_WHITESPACE"," ",475],["T_IS_EQUAL","==",475],["T_WHITESPACE"," ",475],["T_STRING","self",475],["T_DOUBLE_COLON","::",475],["T_STRING","POSITION_TOP_RIGHT",475],")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n            ",475],["T_VARIABLE","$positionX",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_imageSrcWidth",476],["T_WHITESPACE"," ",476],"-",["T_WHITESPACE"," ",476],["T_STRING","imagesx",476],"(",["T_VARIABLE","$watermark",476],")",";",["T_WHITESPACE","\n            ",476],["T_STRING","imagecopymerge",477],"(",["T_WHITESPACE","\n                ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","_imageHandler",478],",",["T_WHITESPACE","\n                ",478],["T_VARIABLE","$watermark",479],",",["T_WHITESPACE","\n                ",479],["T_VARIABLE","$positionX",480],",",["T_WHITESPACE","\n                ",480],["T_VARIABLE","$positionY",481],",",["T_WHITESPACE","\n                ",481],["T_LNUMBER","0",482],",",["T_WHITESPACE","\n                ",482],["T_LNUMBER","0",483],",",["T_WHITESPACE","\n                ",483],["T_STRING","imagesx",484],"(",["T_VARIABLE","$watermark",484],")",",",["T_WHITESPACE","\n                ",484],["T_STRING","imagesy",485],"(",["T_VARIABLE","$watermark",485],")",",",["T_WHITESPACE","\n                ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getWatermarkImageOpacity",486],"(",")",["T_WHITESPACE","\n            ",486],")",";",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE"," ",488],["T_ELSEIF","elseif",488],["T_WHITESPACE"," ",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getWatermarkPosition",488],"(",")",["T_WHITESPACE"," ",488],["T_IS_EQUAL","==",488],["T_WHITESPACE"," ",488],["T_STRING","self",488],["T_DOUBLE_COLON","::",488],["T_STRING","POSITION_TOP_LEFT",488],")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n            ",488],["T_STRING","imagecopymerge",489],"(",["T_WHITESPACE","\n                ",489],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","_imageHandler",490],",",["T_WHITESPACE","\n                ",490],["T_VARIABLE","$watermark",491],",",["T_WHITESPACE","\n                ",491],["T_VARIABLE","$positionX",492],",",["T_WHITESPACE","\n                ",492],["T_VARIABLE","$positionY",493],",",["T_WHITESPACE","\n                ",493],["T_LNUMBER","0",494],",",["T_WHITESPACE","\n                ",494],["T_LNUMBER","0",495],",",["T_WHITESPACE","\n                ",495],["T_STRING","imagesx",496],"(",["T_VARIABLE","$watermark",496],")",",",["T_WHITESPACE","\n                ",496],["T_STRING","imagesy",497],"(",["T_VARIABLE","$watermark",497],")",",",["T_WHITESPACE","\n                ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getWatermarkImageOpacity",498],"(",")",["T_WHITESPACE","\n            ",498],")",";",["T_WHITESPACE","\n        ",499],"}",["T_WHITESPACE"," ",500],["T_ELSEIF","elseif",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getWatermarkPosition",500],"(",")",["T_WHITESPACE"," ",500],["T_IS_EQUAL","==",500],["T_WHITESPACE"," ",500],["T_STRING","self",500],["T_DOUBLE_COLON","::",500],["T_STRING","POSITION_BOTTOM_RIGHT",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],["T_VARIABLE","$positionX",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","_imageSrcWidth",501],["T_WHITESPACE"," ",501],"-",["T_WHITESPACE"," ",501],["T_STRING","imagesx",501],"(",["T_VARIABLE","$watermark",501],")",";",["T_WHITESPACE","\n            ",501],["T_VARIABLE","$positionY",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_imageSrcHeight",502],["T_WHITESPACE"," ",502],"-",["T_WHITESPACE"," ",502],["T_STRING","imagesy",502],"(",["T_VARIABLE","$watermark",502],")",";",["T_WHITESPACE","\n            ",502],["T_STRING","imagecopymerge",503],"(",["T_WHITESPACE","\n                ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","_imageHandler",504],",",["T_WHITESPACE","\n                ",504],["T_VARIABLE","$watermark",505],",",["T_WHITESPACE","\n                ",505],["T_VARIABLE","$positionX",506],",",["T_WHITESPACE","\n                ",506],["T_VARIABLE","$positionY",507],",",["T_WHITESPACE","\n                ",507],["T_LNUMBER","0",508],",",["T_WHITESPACE","\n                ",508],["T_LNUMBER","0",509],",",["T_WHITESPACE","\n                ",509],["T_STRING","imagesx",510],"(",["T_VARIABLE","$watermark",510],")",",",["T_WHITESPACE","\n                ",510],["T_STRING","imagesy",511],"(",["T_VARIABLE","$watermark",511],")",",",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getWatermarkImageOpacity",512],"(",")",["T_WHITESPACE","\n            ",512],")",";",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE"," ",514],["T_ELSEIF","elseif",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getWatermarkPosition",514],"(",")",["T_WHITESPACE"," ",514],["T_IS_EQUAL","==",514],["T_WHITESPACE"," ",514],["T_STRING","self",514],["T_DOUBLE_COLON","::",514],["T_STRING","POSITION_BOTTOM_LEFT",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n            ",514],["T_VARIABLE","$positionY",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_imageSrcHeight",515],["T_WHITESPACE"," ",515],"-",["T_WHITESPACE"," ",515],["T_STRING","imagesy",515],"(",["T_VARIABLE","$watermark",515],")",";",["T_WHITESPACE","\n            ",515],["T_STRING","imagecopymerge",516],"(",["T_WHITESPACE","\n                ",516],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","_imageHandler",517],",",["T_WHITESPACE","\n                ",517],["T_VARIABLE","$watermark",518],",",["T_WHITESPACE","\n                ",518],["T_VARIABLE","$positionX",519],",",["T_WHITESPACE","\n                ",519],["T_VARIABLE","$positionY",520],",",["T_WHITESPACE","\n                ",520],["T_LNUMBER","0",521],",",["T_WHITESPACE","\n                ",521],["T_LNUMBER","0",522],",",["T_WHITESPACE","\n                ",522],["T_STRING","imagesx",523],"(",["T_VARIABLE","$watermark",523],")",",",["T_WHITESPACE","\n                ",523],["T_STRING","imagesy",524],"(",["T_VARIABLE","$watermark",524],")",",",["T_WHITESPACE","\n                ",524],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","getWatermarkImageOpacity",525],"(",")",["T_WHITESPACE","\n            ",525],")",";",["T_WHITESPACE","\n        ",526],"}",["T_WHITESPACE","\n\n        ",527],["T_IF","if",529],["T_WHITESPACE"," ",529],"(",["T_VARIABLE","$tile",529],["T_WHITESPACE"," ",529],["T_IS_IDENTICAL","===",529],["T_WHITESPACE"," ",529],["T_STRING","false",529],["T_WHITESPACE"," ",529],["T_BOOLEAN_AND","&&",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$merged",529],["T_WHITESPACE"," ",529],["T_IS_IDENTICAL","===",529],["T_WHITESPACE"," ",529],["T_STRING","false",529],")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n            ",529],["T_STRING","imagecopymerge",530],"(",["T_WHITESPACE","\n                ",530],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","_imageHandler",531],",",["T_WHITESPACE","\n                ",531],["T_VARIABLE","$watermark",532],",",["T_WHITESPACE","\n                ",532],["T_VARIABLE","$positionX",533],",",["T_WHITESPACE","\n                ",533],["T_VARIABLE","$positionY",534],",",["T_WHITESPACE","\n                ",534],["T_LNUMBER","0",535],",",["T_WHITESPACE","\n                ",535],["T_LNUMBER","0",536],",",["T_WHITESPACE","\n                ",536],["T_STRING","imagesx",537],"(",["T_VARIABLE","$watermark",537],")",",",["T_WHITESPACE","\n                ",537],["T_STRING","imagesy",538],"(",["T_VARIABLE","$watermark",538],")",",",["T_WHITESPACE","\n                ",538],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","getWatermarkImageOpacity",539],"(",")",["T_WHITESPACE","\n            ",539],")",";",["T_WHITESPACE","\n        ",540],"}",["T_WHITESPACE"," ",541],["T_ELSE","else",541],["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n            ",541],["T_VARIABLE","$offsetX",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_VARIABLE","$positionX",542],";",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$offsetY",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_VARIABLE","$positionY",543],";",["T_WHITESPACE","\n            ",543],["T_WHILE","while",544],["T_WHITESPACE"," ",544],"(",["T_VARIABLE","$offsetY",544],["T_WHITESPACE"," ",544],["T_IS_SMALLER_OR_EQUAL","<=",544],["T_WHITESPACE"," ",544],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","_imageSrcHeight",544],["T_WHITESPACE"," ",544],"+",["T_WHITESPACE"," ",544],["T_STRING","imagesy",544],"(",["T_VARIABLE","$watermark",544],")",")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n                ",544],["T_WHILE","while",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$offsetX",545],["T_WHITESPACE"," ",545],["T_IS_SMALLER_OR_EQUAL","<=",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","_imageSrcWidth",545],["T_WHITESPACE"," ",545],"+",["T_WHITESPACE"," ",545],["T_STRING","imagesx",545],"(",["T_VARIABLE","$watermark",545],")",")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n                    ",545],["T_STRING","imagecopymerge",546],"(",["T_WHITESPACE","\n                        ",546],["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","_imageHandler",547],",",["T_WHITESPACE","\n                        ",547],["T_VARIABLE","$watermark",548],",",["T_WHITESPACE","\n                        ",548],["T_VARIABLE","$offsetX",549],",",["T_WHITESPACE","\n                        ",549],["T_VARIABLE","$offsetY",550],",",["T_WHITESPACE","\n                        ",550],["T_LNUMBER","0",551],",",["T_WHITESPACE","\n                        ",551],["T_LNUMBER","0",552],",",["T_WHITESPACE","\n                        ",552],["T_STRING","imagesx",553],"(",["T_VARIABLE","$watermark",553],")",",",["T_WHITESPACE","\n                        ",553],["T_STRING","imagesy",554],"(",["T_VARIABLE","$watermark",554],")",",",["T_WHITESPACE","\n                        ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","getWatermarkImageOpacity",555],"(",")",["T_WHITESPACE","\n                    ",555],")",";",["T_WHITESPACE","\n                    ",556],["T_VARIABLE","$offsetX",557],["T_WHITESPACE"," ",557],["T_PLUS_EQUAL","+=",557],["T_WHITESPACE"," ",557],["T_STRING","imagesx",557],"(",["T_VARIABLE","$watermark",557],")",";",["T_WHITESPACE","\n                ",557],"}",["T_WHITESPACE","\n                ",558],["T_VARIABLE","$offsetX",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$positionX",559],";",["T_WHITESPACE","\n                ",559],["T_VARIABLE","$offsetY",560],["T_WHITESPACE"," ",560],["T_PLUS_EQUAL","+=",560],["T_WHITESPACE"," ",560],["T_STRING","imagesy",560],"(",["T_VARIABLE","$watermark",560],")",";",["T_WHITESPACE","\n            ",560],"}",["T_WHITESPACE","\n        ",561],"}",["T_WHITESPACE","\n\n        ",562],["T_STRING","imagedestroy",564],"(",["T_VARIABLE","$watermark",564],")",";",["T_WHITESPACE","\n        ",564],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","refreshImageDimensions",565],"(",")",";",["T_WHITESPACE","\n    ",565],"}",["T_WHITESPACE","\n\n    ",566],["T_DOC_COMMENT","\/**\n     * Crop image\n     *\n     * @param int $top\n     * @param int $left\n     * @param int $right\n     * @param int $bottom\n     * @return bool\n     *\/",568],["T_WHITESPACE","\n    ",576],["T_PUBLIC","public",577],["T_WHITESPACE"," ",577],["T_FUNCTION","function",577],["T_WHITESPACE"," ",577],["T_STRING","crop",577],"(",["T_VARIABLE","$top",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_LNUMBER","0",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$left",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_LNUMBER","0",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$right",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_LNUMBER","0",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$bottom",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_LNUMBER","0",577],")",["T_WHITESPACE","\n    ",577],"{",["T_WHITESPACE","\n        ",578],["T_IF","if",579],["T_WHITESPACE"," ",579],"(",["T_VARIABLE","$left",579],["T_WHITESPACE"," ",579],["T_IS_EQUAL","==",579],["T_WHITESPACE"," ",579],["T_LNUMBER","0",579],["T_WHITESPACE"," ",579],["T_BOOLEAN_AND","&&",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$top",579],["T_WHITESPACE"," ",579],["T_IS_EQUAL","==",579],["T_WHITESPACE"," ",579],["T_LNUMBER","0",579],["T_WHITESPACE"," ",579],["T_BOOLEAN_AND","&&",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$right",579],["T_WHITESPACE"," ",579],["T_IS_EQUAL","==",579],["T_WHITESPACE"," ",579],["T_LNUMBER","0",579],["T_WHITESPACE"," ",579],["T_BOOLEAN_AND","&&",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$bottom",579],["T_WHITESPACE"," ",579],["T_IS_EQUAL","==",579],["T_WHITESPACE"," ",579],["T_LNUMBER","0",579],")",["T_WHITESPACE"," ",579],"{",["T_WHITESPACE","\n            ",579],["T_RETURN","return",580],["T_WHITESPACE"," ",580],["T_STRING","false",580],";",["T_WHITESPACE","\n        ",580],"}",["T_WHITESPACE","\n\n        ",581],["T_VARIABLE","$newWidth",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","_imageSrcWidth",583],["T_WHITESPACE"," ",583],"-",["T_WHITESPACE"," ",583],["T_VARIABLE","$left",583],["T_WHITESPACE"," ",583],"-",["T_WHITESPACE"," ",583],["T_VARIABLE","$right",583],";",["T_WHITESPACE","\n        ",583],["T_VARIABLE","$newHeight",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","_imageSrcHeight",584],["T_WHITESPACE"," ",584],"-",["T_WHITESPACE"," ",584],["T_VARIABLE","$top",584],["T_WHITESPACE"," ",584],"-",["T_WHITESPACE"," ",584],["T_VARIABLE","$bottom",584],";",["T_WHITESPACE","\n\n        ",584],["T_VARIABLE","$canvas",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_STRING","imagecreatetruecolor",586],"(",["T_VARIABLE","$newWidth",586],",",["T_WHITESPACE"," ",586],["T_VARIABLE","$newHeight",586],")",";",["T_WHITESPACE","\n\n        ",586],["T_IF","if",588],["T_WHITESPACE"," ",588],"(",["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","_fileType",588],["T_WHITESPACE"," ",588],["T_IS_EQUAL","==",588],["T_WHITESPACE"," ",588],["T_STRING","IMAGETYPE_PNG",588],")",["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n            ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","_saveAlpha",589],"(",["T_VARIABLE","$canvas",589],")",";",["T_WHITESPACE","\n        ",589],"}",["T_WHITESPACE","\n\n        ",590],["T_STRING","imagecopyresampled",592],"(",["T_WHITESPACE","\n            ",592],["T_VARIABLE","$canvas",593],",",["T_WHITESPACE","\n            ",593],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_imageHandler",594],",",["T_WHITESPACE","\n            ",594],["T_LNUMBER","0",595],",",["T_WHITESPACE","\n            ",595],["T_LNUMBER","0",596],",",["T_WHITESPACE","\n            ",596],["T_VARIABLE","$left",597],",",["T_WHITESPACE","\n            ",597],["T_VARIABLE","$top",598],",",["T_WHITESPACE","\n            ",598],["T_VARIABLE","$newWidth",599],",",["T_WHITESPACE","\n            ",599],["T_VARIABLE","$newHeight",600],",",["T_WHITESPACE","\n            ",600],["T_VARIABLE","$newWidth",601],",",["T_WHITESPACE","\n            ",601],["T_VARIABLE","$newHeight",602],["T_WHITESPACE","\n        ",602],")",";",["T_WHITESPACE","\n        ",603],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","imageDestroy",604],"(",")",";",["T_WHITESPACE","\n        ",604],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","_imageHandler",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_VARIABLE","$canvas",605],";",["T_WHITESPACE","\n        ",605],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","refreshImageDimensions",606],"(",")",";",["T_WHITESPACE","\n        ",606],["T_RETURN","return",607],["T_WHITESPACE"," ",607],["T_STRING","true",607],";",["T_WHITESPACE","\n    ",607],"}",["T_WHITESPACE","\n\n    ",608],["T_DOC_COMMENT","\/**\n     * Checks required dependencies\n     *\n     * @return void\n     * @throws \\Exception If some of dependencies are missing\n     *\/",610],["T_WHITESPACE","\n    ",615],["T_PUBLIC","public",616],["T_WHITESPACE"," ",616],["T_FUNCTION","function",616],["T_WHITESPACE"," ",616],["T_STRING","checkDependencies",616],"(",")",["T_WHITESPACE","\n    ",616],"{",["T_WHITESPACE","\n        ",617],["T_FOREACH","foreach",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_requiredExtensions",618],["T_WHITESPACE"," ",618],["T_AS","as",618],["T_WHITESPACE"," ",618],["T_VARIABLE","$value",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n            ",618],["T_IF","if",619],["T_WHITESPACE"," ",619],"(","!",["T_STRING","extension_loaded",619],"(",["T_VARIABLE","$value",619],")",")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                ",619],["T_THROW","throw",620],["T_WHITESPACE"," ",620],["T_NEW","new",620],["T_WHITESPACE"," ",620],["T_NS_SEPARATOR","\\",620],["T_STRING","Exception",620],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Required PHP extension '",620],["T_CURLY_OPEN","{",620],["T_VARIABLE","$value",620],"}",["T_ENCAPSED_AND_WHITESPACE","' was not loaded.",620],"\"",")",";",["T_WHITESPACE","\n            ",620],"}",["T_WHITESPACE","\n        ",621],"}",["T_WHITESPACE","\n    ",622],"}",["T_WHITESPACE","\n\n    ",623],["T_DOC_COMMENT","\/**\n     * Reassign image dimensions\n     *\n     * @return void\n     *\/",625],["T_WHITESPACE","\n    ",629],["T_PUBLIC","public",630],["T_WHITESPACE"," ",630],["T_FUNCTION","function",630],["T_WHITESPACE"," ",630],["T_STRING","refreshImageDimensions",630],"(",")",["T_WHITESPACE","\n    ",630],"{",["T_WHITESPACE","\n        ",631],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","_imageSrcWidth",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_STRING","imagesx",632],"(",["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","_imageHandler",632],")",";",["T_WHITESPACE","\n        ",632],["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","_imageSrcHeight",633],["T_WHITESPACE"," ",633],"=",["T_WHITESPACE"," ",633],["T_STRING","imagesy",633],"(",["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","_imageHandler",633],")",";",["T_WHITESPACE","\n    ",633],"}",["T_WHITESPACE","\n\n    ",634],["T_DOC_COMMENT","\/**\n     * Standard destructor. Destroy stored information about image\n     *\/",636],["T_WHITESPACE","\n    ",638],["T_PUBLIC","public",639],["T_WHITESPACE"," ",639],["T_FUNCTION","function",639],["T_WHITESPACE"," ",639],["T_STRING","__destruct",639],"(",")",["T_WHITESPACE","\n    ",639],"{",["T_WHITESPACE","\n        ",640],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","imageDestroy",641],"(",")",";",["T_WHITESPACE","\n    ",641],"}",["T_WHITESPACE","\n\n    ",642],["T_DOC_COMMENT","\/**\n     * Helper function to free up memory associated with _imageHandler resource\n     *\n     * @return void\n     *\/",644],["T_WHITESPACE","\n    ",648],["T_PRIVATE","private",649],["T_WHITESPACE"," ",649],["T_FUNCTION","function",649],["T_WHITESPACE"," ",649],["T_STRING","imageDestroy",649],"(",")",["T_WHITESPACE","\n    ",649],"{",["T_WHITESPACE","\n        ",650],["T_IF","if",651],["T_WHITESPACE"," ",651],"(",["T_STRING","is_resource",651],"(",["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","_imageHandler",651],")",")",["T_WHITESPACE"," ",651],"{",["T_WHITESPACE","\n            ",651],["T_STRING","imagedestroy",652],"(",["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","_imageHandler",652],")",";",["T_WHITESPACE","\n        ",652],"}",["T_WHITESPACE","\n    ",653],"}",["T_WHITESPACE","\n\n    ",654],["T_DOC_COMMENT","\/**\n     * Fixes saving PNG alpha channel\n     *\n     * @param resource $imageHandler\n     * @return void\n     *\/",656],["T_WHITESPACE","\n    ",661],["T_PRIVATE","private",662],["T_WHITESPACE"," ",662],["T_FUNCTION","function",662],["T_WHITESPACE"," ",662],["T_STRING","_saveAlpha",662],"(",["T_VARIABLE","$imageHandler",662],")",["T_WHITESPACE","\n    ",662],"{",["T_WHITESPACE","\n        ",663],["T_VARIABLE","$background",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_STRING","imagecolorallocate",664],"(",["T_VARIABLE","$imageHandler",664],",",["T_WHITESPACE"," ",664],["T_LNUMBER","0",664],",",["T_WHITESPACE"," ",664],["T_LNUMBER","0",664],",",["T_WHITESPACE"," ",664],["T_LNUMBER","0",664],")",";",["T_WHITESPACE","\n        ",664],["T_STRING","ImageColorTransparent",665],"(",["T_VARIABLE","$imageHandler",665],",",["T_WHITESPACE"," ",665],["T_VARIABLE","$background",665],")",";",["T_WHITESPACE","\n        ",665],["T_STRING","imagealphablending",666],"(",["T_VARIABLE","$imageHandler",666],",",["T_WHITESPACE"," ",666],["T_STRING","false",666],")",";",["T_WHITESPACE","\n        ",666],["T_STRING","imagesavealpha",667],"(",["T_VARIABLE","$imageHandler",667],",",["T_WHITESPACE"," ",667],["T_STRING","true",667],")",";",["T_WHITESPACE","\n    ",667],"}",["T_WHITESPACE","\n\n    ",668],["T_DOC_COMMENT","\/**\n     * Returns rgba array of the specified pixel\n     *\n     * @param int $x\n     * @param int $y\n     * @return array\n     *\/",670],["T_WHITESPACE","\n    ",676],["T_PUBLIC","public",677],["T_WHITESPACE"," ",677],["T_FUNCTION","function",677],["T_WHITESPACE"," ",677],["T_STRING","getColorAt",677],"(",["T_VARIABLE","$x",677],",",["T_WHITESPACE"," ",677],["T_VARIABLE","$y",677],")",["T_WHITESPACE","\n    ",677],"{",["T_WHITESPACE","\n        ",678],["T_VARIABLE","$colorIndex",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_STRING","imagecolorat",679],"(",["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","_imageHandler",679],",",["T_WHITESPACE"," ",679],["T_VARIABLE","$x",679],",",["T_WHITESPACE"," ",679],["T_VARIABLE","$y",679],")",";",["T_WHITESPACE","\n        ",679],["T_RETURN","return",680],["T_WHITESPACE"," ",680],["T_STRING","imagecolorsforindex",680],"(",["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","_imageHandler",680],",",["T_WHITESPACE"," ",680],["T_VARIABLE","$colorIndex",680],")",";",["T_WHITESPACE","\n    ",680],"}",["T_WHITESPACE","\n\n    ",681],["T_DOC_COMMENT","\/**\n     * Create Image from string\n     *\n     * @param string $text\n     * @param string $font\n     * @return \\Magento\\Framework\\Image\\Adapter\\AbstractAdapter\n     *\/",683],["T_WHITESPACE","\n    ",689],["T_PUBLIC","public",690],["T_WHITESPACE"," ",690],["T_FUNCTION","function",690],["T_WHITESPACE"," ",690],["T_STRING","createPngFromString",690],"(",["T_VARIABLE","$text",690],",",["T_WHITESPACE"," ",690],["T_VARIABLE","$font",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_CONSTANT_ENCAPSED_STRING","''",690],")",["T_WHITESPACE","\n    ",690],"{",["T_WHITESPACE","\n        ",691],["T_VARIABLE","$error",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_STRING","false",692],";",["T_WHITESPACE","\n        ",692],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","_resized",693],["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_STRING","true",693],";",["T_WHITESPACE","\n        ",693],["T_TRY","try",694],["T_WHITESPACE"," ",694],"{",["T_WHITESPACE","\n            ",694],["T_VARIABLE","$this",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","_createImageFromTtfText",695],"(",["T_VARIABLE","$text",695],",",["T_WHITESPACE"," ",695],["T_VARIABLE","$font",695],")",";",["T_WHITESPACE","\n        ",695],"}",["T_WHITESPACE"," ",696],["T_CATCH","catch",696],["T_WHITESPACE"," ",696],"(",["T_NS_SEPARATOR","\\",696],["T_STRING","Exception",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$e",696],")",["T_WHITESPACE"," ",696],"{",["T_WHITESPACE","\n            ",696],["T_VARIABLE","$error",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","true",697],";",["T_WHITESPACE","\n        ",697],"}",["T_WHITESPACE","\n\n        ",698],["T_IF","if",700],["T_WHITESPACE"," ",700],"(",["T_VARIABLE","$error",700],["T_WHITESPACE"," ",700],["T_BOOLEAN_OR","||",700],["T_WHITESPACE"," ",700],["T_EMPTY","empty",700],"(",["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","_imageHandler",700],")",")",["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n            ",700],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","_createImageFromText",701],"(",["T_VARIABLE","$text",701],")",";",["T_WHITESPACE","\n        ",701],"}",["T_WHITESPACE","\n\n        ",702],["T_RETURN","return",704],["T_WHITESPACE"," ",704],["T_VARIABLE","$this",704],";",["T_WHITESPACE","\n    ",704],"}",["T_WHITESPACE","\n\n    ",705],["T_DOC_COMMENT","\/**\n     * Create Image using standard font\n     *\n     * @param string $text\n     * @return void\n     *\/",707],["T_WHITESPACE","\n    ",712],["T_PROTECTED","protected",713],["T_WHITESPACE"," ",713],["T_FUNCTION","function",713],["T_WHITESPACE"," ",713],["T_STRING","_createImageFromText",713],"(",["T_VARIABLE","$text",713],")",["T_WHITESPACE","\n    ",713],"{",["T_WHITESPACE","\n        ",714],["T_VARIABLE","$width",715],["T_WHITESPACE"," ",715],"=",["T_WHITESPACE"," ",715],["T_STRING","imagefontwidth",715],"(",["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","_fontSize",715],")",["T_WHITESPACE"," ",715],"*",["T_WHITESPACE"," ",715],["T_STRING","strlen",715],"(",["T_VARIABLE","$text",715],")",";",["T_WHITESPACE","\n        ",715],["T_VARIABLE","$height",716],["T_WHITESPACE"," ",716],"=",["T_WHITESPACE"," ",716],["T_STRING","imagefontheight",716],"(",["T_VARIABLE","$this",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","_fontSize",716],")",";",["T_WHITESPACE","\n\n        ",716],["T_VARIABLE","$this",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","_createEmptyImage",718],"(",["T_VARIABLE","$width",718],",",["T_WHITESPACE"," ",718],["T_VARIABLE","$height",718],")",";",["T_WHITESPACE","\n\n        ",718],["T_VARIABLE","$black",720],["T_WHITESPACE"," ",720],"=",["T_WHITESPACE"," ",720],["T_STRING","imagecolorallocate",720],"(",["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","_imageHandler",720],",",["T_WHITESPACE"," ",720],["T_LNUMBER","0",720],",",["T_WHITESPACE"," ",720],["T_LNUMBER","0",720],",",["T_WHITESPACE"," ",720],["T_LNUMBER","0",720],")",";",["T_WHITESPACE","\n        ",720],["T_STRING","imagestring",721],"(",["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","_imageHandler",721],",",["T_WHITESPACE"," ",721],["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","_fontSize",721],",",["T_WHITESPACE"," ",721],["T_LNUMBER","0",721],",",["T_WHITESPACE"," ",721],["T_LNUMBER","0",721],",",["T_WHITESPACE"," ",721],["T_VARIABLE","$text",721],",",["T_WHITESPACE"," ",721],["T_VARIABLE","$black",721],")",";",["T_WHITESPACE","\n    ",721],"}",["T_WHITESPACE","\n\n    ",722],["T_DOC_COMMENT","\/**\n     * Create Image using ttf font\n     * Note: This function requires both the GD library and the FreeType library\n     *\n     * @param string $text\n     * @param string $font\n     * @return void\n     * @throws \\Exception\n     *\/",724],["T_WHITESPACE","\n    ",732],["T_PROTECTED","protected",733],["T_WHITESPACE"," ",733],["T_FUNCTION","function",733],["T_WHITESPACE"," ",733],["T_STRING","_createImageFromTtfText",733],"(",["T_VARIABLE","$text",733],",",["T_WHITESPACE"," ",733],["T_VARIABLE","$font",733],")",["T_WHITESPACE","\n    ",733],"{",["T_WHITESPACE","\n        ",734],["T_VARIABLE","$boundingBox",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_STRING","imagettfbbox",735],"(",["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","_fontSize",735],",",["T_WHITESPACE"," ",735],["T_LNUMBER","0",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$font",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$text",735],")",";",["T_WHITESPACE","\n        ",735],["T_VARIABLE","$width",736],["T_WHITESPACE"," ",736],"=",["T_WHITESPACE"," ",736],["T_STRING","abs",736],"(",["T_VARIABLE","$boundingBox",736],"[",["T_LNUMBER","4",736],"]",")",["T_WHITESPACE"," ",736],"+",["T_WHITESPACE"," ",736],["T_STRING","abs",736],"(",["T_VARIABLE","$boundingBox",736],"[",["T_LNUMBER","0",736],"]",")",";",["T_WHITESPACE","\n        ",736],["T_VARIABLE","$height",737],["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_STRING","abs",737],"(",["T_VARIABLE","$boundingBox",737],"[",["T_LNUMBER","5",737],"]",")",["T_WHITESPACE"," ",737],"+",["T_WHITESPACE"," ",737],["T_STRING","abs",737],"(",["T_VARIABLE","$boundingBox",737],"[",["T_LNUMBER","1",737],"]",")",";",["T_WHITESPACE","\n\n        ",737],["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","_createEmptyImage",739],"(",["T_VARIABLE","$width",739],",",["T_WHITESPACE"," ",739],["T_VARIABLE","$height",739],")",";",["T_WHITESPACE","\n\n        ",739],["T_VARIABLE","$black",741],["T_WHITESPACE"," ",741],"=",["T_WHITESPACE"," ",741],["T_STRING","imagecolorallocate",741],"(",["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","_imageHandler",741],",",["T_WHITESPACE"," ",741],["T_LNUMBER","0",741],",",["T_WHITESPACE"," ",741],["T_LNUMBER","0",741],",",["T_WHITESPACE"," ",741],["T_LNUMBER","0",741],")",";",["T_WHITESPACE","\n        ",741],["T_VARIABLE","$result",742],["T_WHITESPACE"," ",742],"=",["T_WHITESPACE"," ",742],["T_STRING","imagettftext",742],"(",["T_WHITESPACE","\n            ",742],["T_VARIABLE","$this",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","_imageHandler",743],",",["T_WHITESPACE","\n            ",743],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","_fontSize",744],",",["T_WHITESPACE","\n            ",744],["T_LNUMBER","0",745],",",["T_WHITESPACE","\n            ",745],["T_LNUMBER","0",746],",",["T_WHITESPACE","\n            ",746],["T_VARIABLE","$height",747],["T_WHITESPACE"," ",747],"-",["T_WHITESPACE"," ",747],["T_STRING","abs",747],"(",["T_VARIABLE","$boundingBox",747],"[",["T_LNUMBER","1",747],"]",")",",",["T_WHITESPACE","\n            ",747],["T_VARIABLE","$black",748],",",["T_WHITESPACE","\n            ",748],["T_VARIABLE","$font",749],",",["T_WHITESPACE","\n            ",749],["T_VARIABLE","$text",750],["T_WHITESPACE","\n        ",750],")",";",["T_WHITESPACE","\n        ",751],["T_IF","if",752],["T_WHITESPACE"," ",752],"(",["T_VARIABLE","$result",752],["T_WHITESPACE"," ",752],["T_IS_IDENTICAL","===",752],["T_WHITESPACE"," ",752],["T_STRING","false",752],")",["T_WHITESPACE"," ",752],"{",["T_WHITESPACE","\n            ",752],["T_THROW","throw",753],["T_WHITESPACE"," ",753],["T_NEW","new",753],["T_WHITESPACE"," ",753],["T_NS_SEPARATOR","\\",753],["T_STRING","Exception",753],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to create TTF text'",753],")",";",["T_WHITESPACE","\n        ",753],"}",["T_WHITESPACE","\n    ",754],"}",["T_WHITESPACE","\n\n    ",755],["T_DOC_COMMENT","\/**\n     * Create empty image with transparent background\n     *\n     * @param int $width\n     * @param int $height\n     * @return void\n     *\/",757],["T_WHITESPACE","\n    ",763],["T_PROTECTED","protected",764],["T_WHITESPACE"," ",764],["T_FUNCTION","function",764],["T_WHITESPACE"," ",764],["T_STRING","_createEmptyImage",764],"(",["T_VARIABLE","$width",764],",",["T_WHITESPACE"," ",764],["T_VARIABLE","$height",764],")",["T_WHITESPACE","\n    ",764],"{",["T_WHITESPACE","\n        ",765],["T_VARIABLE","$this",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","_fileType",766],["T_WHITESPACE"," ",766],"=",["T_WHITESPACE"," ",766],["T_STRING","IMAGETYPE_PNG",766],";",["T_WHITESPACE","\n        ",766],["T_VARIABLE","$image",767],["T_WHITESPACE"," ",767],"=",["T_WHITESPACE"," ",767],["T_STRING","imagecreatetruecolor",767],"(",["T_VARIABLE","$width",767],",",["T_WHITESPACE"," ",767],["T_VARIABLE","$height",767],")",";",["T_WHITESPACE","\n        ",767],["T_VARIABLE","$colorWhite",768],["T_WHITESPACE"," ",768],"=",["T_WHITESPACE"," ",768],["T_STRING","imagecolorallocatealpha",768],"(",["T_VARIABLE","$image",768],",",["T_WHITESPACE"," ",768],["T_LNUMBER","255",768],",",["T_WHITESPACE"," ",768],["T_LNUMBER","255",768],",",["T_WHITESPACE"," ",768],["T_LNUMBER","255",768],",",["T_WHITESPACE"," ",768],["T_LNUMBER","127",768],")",";",["T_WHITESPACE","\n\n        ",768],["T_STRING","imagealphablending",770],"(",["T_VARIABLE","$image",770],",",["T_WHITESPACE"," ",770],["T_STRING","true",770],")",";",["T_WHITESPACE","\n        ",770],["T_STRING","imagesavealpha",771],"(",["T_VARIABLE","$image",771],",",["T_WHITESPACE"," ",771],["T_STRING","true",771],")",";",["T_WHITESPACE","\n\n        ",771],["T_STRING","imagefill",773],"(",["T_VARIABLE","$image",773],",",["T_WHITESPACE"," ",773],["T_LNUMBER","0",773],",",["T_WHITESPACE"," ",773],["T_LNUMBER","0",773],",",["T_WHITESPACE"," ",773],["T_VARIABLE","$colorWhite",773],")",";",["T_WHITESPACE","\n        ",773],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","imageDestroy",774],"(",")",";",["T_WHITESPACE","\n        ",774],["T_VARIABLE","$this",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","_imageHandler",775],["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_VARIABLE","$image",775],";",["T_WHITESPACE","\n    ",775],"}",["T_WHITESPACE","\n",776],"}",["T_WHITESPACE","\n",777]]
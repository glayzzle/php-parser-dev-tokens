[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Setup",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DB",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Adapter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AdapterInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * @codeCoverageIgnore\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ExternalFKSetup",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var SchemaSetupInterface\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$setup",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$entityTable",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$entityColumn",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$externalTable",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$externalColumn",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$onDelete",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Install external foreign key\n     *\n     * @param SchemaSetupInterface $setup\n     * @param string $entityTable\n     * @param string $entityColumn\n     * @param string $externalTable\n     * @param string $externalColumn\n     * @param string $onDelete\n     * @return void\n     *\/",45],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","install",56],"(",["T_WHITESPACE","\n        ",56],["T_STRING","SchemaSetupInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$setup",57],",",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$entityTable",58],",",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$entityColumn",59],",",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$externalTable",60],",",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$externalColumn",61],",",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$onDelete",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","AdapterInterface",62],["T_DOUBLE_COLON","::",62],["T_STRING","FK_ACTION_CASCADE",62],["T_WHITESPACE","\n    ",62],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setup",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$setup",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","entityTable",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$entityTable",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","entityColumn",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$entityColumn",66],";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","externalTable",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$externalTable",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","externalColumn",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$externalColumn",68],";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","onDelete",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$onDelete",69],";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","execute",71],"(",")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Set external foreign key\n     *\n     * @return void\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","execute",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$entityTableInfo",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","setup",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getConnection",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","describeTable",81],"(",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","setup",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getTable",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","entityTable",82],")",["T_WHITESPACE","\n        ",82],")",";",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(","!",["T_VARIABLE","$entityTableInfo",84],"[",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","entityColumn",84],"]","[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",84],"]",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","dropOldForeignKey",85],"(",")",";",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","addForeignKeys",86],"(",")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE"," ",87],["T_ELSE","else",87],["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","addDefaultForeignKey",88],"(",")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Get foreign keys for tables and columns\n     *\n     * @param string $refTable\n     * @param string $refColumn\n     * @param string $targetTable\n     * @param string $targetColumn\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",92],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getForeignKeys",102],"(",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$targetTable",103],",",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$targetColumn",104],",",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$refTable",105],",",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$refColumn",106],["T_WHITESPACE","\n    ",106],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$foreignKeys",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","setup",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getConnection",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","getForeignKeys",108],"(",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setup",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getTable",109],"(",["T_VARIABLE","$targetTable",109],")",["T_WHITESPACE","\n        ",109],")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$foreignKeys",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","array_filter",111],"(",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$foreignKeys",112],",",["T_WHITESPACE","\n            ",112],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$key",113],")",["T_WHITESPACE"," ",113],["T_USE","use",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$targetColumn",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$refTable",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$refColumn",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$key",114],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",114],"]",["T_WHITESPACE"," ",114],["T_IS_EQUAL","==",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$targetColumn",114],["T_WHITESPACE","\n                ",114],["T_BOOLEAN_AND","&&",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$key",115],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",115],"]",["T_WHITESPACE"," ",115],["T_IS_EQUAL","==",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$refTable",115],";",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n        ",116],")",";",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$foreignKeys",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Remove foreign key if exists\n     *\n     * @param string $targetTable\n     * @param string $targetColumn\n     * @param string $refTable\n     * @param string $refColumn\n     * @return void\n     *\/",121],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","clearForeignKey",130],"(",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$targetTable",131],",",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$targetColumn",132],",",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$refTable",133],",",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$refColumn",134],["T_WHITESPACE","\n    ",134],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$foreignKeys",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getForeignKeys",136],"(",["T_VARIABLE","$targetTable",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$targetColumn",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$refTable",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$refColumn",136],")",";",["T_WHITESPACE","\n        ",136],["T_FOREACH","foreach",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$foreignKeys",137],["T_WHITESPACE"," ",137],["T_AS","as",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$foreignKey",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","setup",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getConnection",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","dropForeignKey",138],"(",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$foreignKey",139],"[",["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",139],"]",",",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$foreignKey",140],"[",["T_CONSTANT_ENCAPSED_STRING","'FK_NAME'",140],"]",["T_WHITESPACE","\n            ",140],")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Add default foreign key\n     *\n     * @return void\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","addDefaultForeignKey",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(","!",["T_STRING","count",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getForeignKeys",152],"(",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","externalTable",153],",",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","externalColumn",154],",",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","entityTable",155],",",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","entityColumn",156],["T_WHITESPACE","\n        ",156],")",")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setup",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getConnection",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","addForeignKey",158],"(",["T_WHITESPACE","\n                ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","setup",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getFkName",159],"(",["T_WHITESPACE","\n                    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","externalTable",160],",",["T_WHITESPACE","\n                    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","externalColumn",161],",",["T_WHITESPACE","\n                    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","entityTable",162],",",["T_WHITESPACE","\n                    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","entityColumn",163],["T_WHITESPACE","\n                ",163],")",",",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","setup",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getTable",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","externalTable",165],")",",",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","externalColumn",166],",",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","setup",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getTable",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","entityTable",167],")",",",["T_WHITESPACE","\n                ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","entityColumn",168],",",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","onDelete",169],["T_WHITESPACE","\n            ",169],")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Add foreign keys to entity table\n     *\n     * @return void\n     *\/",174],["T_WHITESPACE","\n    ",178],["T_PROTECTED","protected",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","addForeignKeys",179],"(",")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$foreignKeys",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setup",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getConnection",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","getForeignKeys",181],"(",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","setup",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getTable",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","entityTable",182],")",["T_WHITESPACE","\n        ",182],")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$foreignKeys",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","array_filter",184],"(",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$foreignKeys",185],",",["T_WHITESPACE","\n            ",185],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$key",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$key",187],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",187],"]",["T_WHITESPACE"," ",187],["T_IS_EQUAL","==",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","entityColumn",187],";",["T_WHITESPACE","\n            ",187],"}",["T_WHITESPACE","\n        ",188],")",";",["T_WHITESPACE","\n        ",189],["T_FOREACH","foreach",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$foreignKeys",190],["T_WHITESPACE"," ",190],["T_AS","as",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$foreignKeyInfo",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(","!",["T_STRING","count",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getForeignKeys",191],"(",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","externalTable",192],",",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","externalColumn",193],",",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","setup",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getTablePlaceholder",194],"(",["T_VARIABLE","$foreignKeyInfo",194],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",194],"]",")",",",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$foreignKeyInfo",195],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",195],"]",["T_WHITESPACE","\n            ",195],")",")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","setup",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getConnection",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","addForeignKey",197],"(",["T_WHITESPACE","\n                    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","setup",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getFkName",198],"(",["T_WHITESPACE","\n                        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","externalTable",199],",",["T_WHITESPACE","\n                        ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","externalColumn",200],",",["T_WHITESPACE","\n                        ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setup",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getTablePlaceholder",201],"(",["T_VARIABLE","$foreignKeyInfo",201],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",201],"]",")",",",["T_WHITESPACE","\n                        ",201],["T_VARIABLE","$foreignKeyInfo",202],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",202],"]",["T_WHITESPACE","\n                    ",202],")",",",["T_WHITESPACE","\n                    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","setup",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getTable",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","externalTable",204],")",",",["T_WHITESPACE","\n                    ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","externalColumn",205],",",["T_WHITESPACE","\n                    ",205],["T_VARIABLE","$foreignKeyInfo",206],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_TABLE_NAME'",206],"]",",",["T_WHITESPACE","\n                    ",206],["T_VARIABLE","$foreignKeyInfo",207],"[",["T_CONSTANT_ENCAPSED_STRING","'REF_COLUMN_NAME'",207],"]",",",["T_WHITESPACE","\n                    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","onDelete",208],["T_WHITESPACE","\n                ",208],")",";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Drop old foreign key\n     *\n     * @return void\n     *\/",214],["T_WHITESPACE","\n    ",218],["T_PROTECTED","protected",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","dropOldForeignKey",219],"(",")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_STRING","count",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getForeignKeys",221],"(",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","externalTable",222],",",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","externalColumn",223],",",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","entityTable",224],",",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","entityColumn",225],["T_WHITESPACE","\n        ",225],")",")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","clearForeignKey",227],"(",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","externalTable",228],",",["T_WHITESPACE","\n                ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","externalColumn",229],",",["T_WHITESPACE","\n                ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","entityTable",230],",",["T_WHITESPACE","\n                ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","entityColumn",231],["T_WHITESPACE","\n            ",231],")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n",234],"}",["T_WHITESPACE","\n",235]]
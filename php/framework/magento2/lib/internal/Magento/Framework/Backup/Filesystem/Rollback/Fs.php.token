[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Backup",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Filesystem",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Rollback",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ObjectManager",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Rollback worker for rolling back via local filesystem\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Fs",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","AbstractRollback",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Backup\\Filesystem\\Helper\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$fsHelper",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Files rollback implementation via local filesystem\n     *\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\n     * @see AbstractRollback::run()\n     *\/",22],["T_WHITESPACE","\n    ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","run",30],"(",")",["T_WHITESPACE","\n    ",30],"{",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$snapshotPath",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","_snapshot",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getBackupPath",32],"(",")",";",["T_WHITESPACE","\n\n        ",32],["T_IF","if",34],["T_WHITESPACE"," ",34],"(","!",["T_STRING","is_file",34],"(",["T_VARIABLE","$snapshotPath",34],")",["T_WHITESPACE"," ",34],["T_BOOLEAN_OR","||",34],["T_WHITESPACE"," ",34],"!",["T_STRING","is_readable",34],"(",["T_VARIABLE","$snapshotPath",34],")",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n            ",34],["T_THROW","throw",35],["T_WHITESPACE"," ",35],["T_NEW","new",35],["T_WHITESPACE"," ",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Framework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Backup",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Exception",35],["T_NS_SEPARATOR","\\",35],["T_STRING","CantLoadSnapshot",35],"(",["T_WHITESPACE","\n                ",35],["T_NEW","new",36],["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Framework",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Phrase",36],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t load snapshot archive'",36],")",["T_WHITESPACE","\n            ",36],")",";",["T_WHITESPACE","\n        ",37],"}",["T_WHITESPACE","\n\n        ",38],["T_VARIABLE","$fsHelper",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getFsHelper",40],"(",")",";",["T_WHITESPACE","\n\n        ",40],["T_VARIABLE","$filesInfo",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$fsHelper",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getInfo",42],"(",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_snapshot",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getRootDir",43],"(",")",",",["T_WHITESPACE","\n            ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Backup",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Filesystem",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Helper",44],["T_DOUBLE_COLON","::",44],["T_STRING","INFO_WRITABLE",44],",",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_snapshot",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getIgnorePaths",45],"(",")",["T_WHITESPACE","\n        ",45],")",";",["T_WHITESPACE","\n\n        ",46],["T_IF","if",48],["T_WHITESPACE"," ",48],"(","!",["T_VARIABLE","$filesInfo",48],"[",["T_CONSTANT_ENCAPSED_STRING","'writable'",48],"]",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(","!",["T_EMPTY","empty",49],"(",["T_VARIABLE","$filesInfo",49],"[",["T_CONSTANT_ENCAPSED_STRING","'writableMeta'",49],"]",")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n                ",49],["T_THROW","throw",50],["T_WHITESPACE"," ",50],["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Framework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Backup",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Exception",50],["T_NS_SEPARATOR","\\",50],["T_STRING","NotEnoughPermissions",50],"(",["T_WHITESPACE","\n                    ",50],["T_NEW","new",51],["T_WHITESPACE"," ",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Framework",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Phrase",51],"(",["T_WHITESPACE","\n                        ",51],["T_CONSTANT_ENCAPSED_STRING","'You need write permissions for: %1'",52],",",["T_WHITESPACE","\n                        ",52],"[",["T_STRING","implode",53],"(",["T_CONSTANT_ENCAPSED_STRING","', '",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$filesInfo",53],"[",["T_CONSTANT_ENCAPSED_STRING","'writableMeta'",53],"]",")","]",["T_WHITESPACE","\n                    ",53],")",["T_WHITESPACE","\n                ",54],")",";",["T_WHITESPACE","\n            ",55],"}",["T_WHITESPACE","\n\n            ",56],["T_THROW","throw",58],["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Magento",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Framework",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Backup",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Exception",58],["T_NS_SEPARATOR","\\",58],["T_STRING","NotEnoughPermissions",58],"(",["T_WHITESPACE","\n                ",58],["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Framework",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Phrase",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to make rollback because not all files are writable'",59],")",["T_WHITESPACE","\n            ",59],")",";",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE","\n\n        ",61],["T_VARIABLE","$archiver",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Framework",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Archive",63],"(",")",";",["T_WHITESPACE","\n\n        ",63],["T_DOC_COMMENT","\/**\n         * we need these fake initializations because all magento's files in filesystem will be deleted and autoloader\n         * wont be able to load classes that we need for unpacking\n         *\/",65],["T_WHITESPACE","\n        ",68],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Framework",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Archive",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Tar",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_NEW","new",70],["T_WHITESPACE"," ",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Archive",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Gz",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Magento",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Framework",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Archive",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Helper",71],["T_NS_SEPARATOR","\\",71],["T_STRING","File",71],"(",["T_CONSTANT_ENCAPSED_STRING","''",71],")",";",["T_WHITESPACE","\n        ",71],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Magento",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Framework",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Archive",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Helper",72],["T_NS_SEPARATOR","\\",72],["T_STRING","File",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Gz",72],"(",["T_CONSTANT_ENCAPSED_STRING","''",72],")",";",["T_WHITESPACE","\n        ",72],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Framework",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Exception",73],["T_NS_SEPARATOR","\\",73],["T_STRING","LocalizedException",73],"(",["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Framework",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Phrase",73],"(",["T_CONSTANT_ENCAPSED_STRING","'dummy'",73],")",")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$fsHelper",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","rm",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_snapshot",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getRootDir",75],"(",")",",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_snapshot",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getIgnorePaths",75],"(",")",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$archiver",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","unpack",76],"(",["T_VARIABLE","$snapshotPath",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_snapshot",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getRootDir",76],"(",")",")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\Backup\\Filesystem\\Helper\n     * @deprecated\n     *\/",79],["T_WHITESPACE","\n    ",82],["T_PRIVATE","private",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","getFsHelper",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","fsHelper",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","fsHelper",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","ObjectManager",86],["T_DOUBLE_COLON","::",86],["T_STRING","getInstance",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","get",86],"(",["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Framework",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Backup",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Filesystem",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Helper",86],["T_DOUBLE_COLON","::",86],["T_CLASS","class",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","fsHelper",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n",90],"}",["T_WHITESPACE","\n",91]]
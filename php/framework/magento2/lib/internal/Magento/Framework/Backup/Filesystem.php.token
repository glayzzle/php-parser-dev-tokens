[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Backup",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ObjectManager",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Class to work with filesystem backups\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",13],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Filesystem",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","AbstractBackup",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Paths that ignored when creating or rolling back snapshot\n     *\n     * @var array\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_ignorePaths",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[","]",";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Whether use ftp account for rollback procedure\n     *\n     * @var bool\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_useFtp",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","false",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Ftp host\n     *\n     * @var string\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_ftpHost",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Ftp username\n     *\n     * @var string\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_ftpUser",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Password to ftp account\n     *\n     * @var string\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_ftpPass",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Ftp path to Magento installation\n     *\n     * @var string\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_ftpPath",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Backup\\Filesystem\\Rollback\\Ftp\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$rollBackFtp",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Backup\\Filesystem\\Rollback\\Fs\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$rollBackFs",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Implementation Rollback functionality for Filesystem\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return bool\n     *\/",72],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","rollback",78],"(",")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_lastOperationSucceed",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","false",80],";",["T_WHITESPACE","\n\n        ",80],["T_STRING","set_time_limit",82],"(",["T_LNUMBER","0",82],")",";",["T_WHITESPACE","\n        ",82],["T_STRING","ignore_user_abort",83],"(",["T_STRING","true",83],")",";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$rollbackWorker",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_useFtp",85],["T_WHITESPACE"," ",85],"?",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getRollBackFtp",85],"(",")",["T_WHITESPACE"," ",85],":",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getRollBackFs",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$rollbackWorker",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","run",86],"(",")",";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_lastOperationSucceed",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","true",88],";",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_lastOperationSucceed",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Implementation Create Backup functionality for Filesystem\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return boolean\n     *\/",92],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","create",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_STRING","set_time_limit",100],"(",["T_LNUMBER","0",100],")",";",["T_WHITESPACE","\n        ",100],["T_STRING","ignore_user_abort",101],"(",["T_STRING","true",101],")",";",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_lastOperationSucceed",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_checkBackupsDir",105],"(",")",";",["T_WHITESPACE","\n\n        ",105],["T_VARIABLE","$fsHelper",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Framework",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Backup",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Filesystem",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Helper",107],"(",")",";",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$filesInfo",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$fsHelper",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getInfo",109],"(",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getRootDir",110],"(",")",",",["T_WHITESPACE","\n            ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Backup",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Filesystem",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Helper",111],["T_DOUBLE_COLON","::",111],["T_STRING","INFO_READABLE",111],["T_WHITESPACE"," ",111],"|",["T_WHITESPACE"," ",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Backup",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Filesystem",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Helper",111],["T_DOUBLE_COLON","::",111],["T_STRING","INFO_SIZE",111],",",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getIgnorePaths",112],"(",")",["T_WHITESPACE","\n        ",112],")",";",["T_WHITESPACE","\n\n        ",113],["T_IF","if",115],["T_WHITESPACE"," ",115],"(","!",["T_VARIABLE","$filesInfo",115],"[",["T_CONSTANT_ENCAPSED_STRING","'readable'",115],"]",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_THROW","throw",116],["T_WHITESPACE"," ",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Framework",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Backup",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Exception",116],["T_NS_SEPARATOR","\\",116],["T_STRING","NotEnoughPermissions",116],"(",["T_WHITESPACE","\n                ",116],["T_NEW","new",117],["T_WHITESPACE"," ",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Magento",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Framework",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Phrase",117],"(",["T_CONSTANT_ENCAPSED_STRING","'Not enough permissions to read files for backup'",117],")",["T_WHITESPACE","\n            ",117],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","validateAvailableDiscSpace",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getBackupsDir",120],"(",")",",",["T_WHITESPACE"," ",120],["T_VARIABLE","$filesInfo",120],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",120],"]",")",";",["T_WHITESPACE","\n\n        ",120],["T_VARIABLE","$tarTmpPath",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_getTarTmpPath",122],"(",")",";",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$tarPacker",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Framework",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Backup",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Archive",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Tar",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$tarPacker",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setSkipFiles",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getIgnorePaths",125],"(",")",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","pack",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getRootDir",125],"(",")",",",["T_WHITESPACE"," ",125],["T_VARIABLE","$tarTmpPath",125],",",["T_WHITESPACE"," ",125],["T_STRING","true",125],")",";",["T_WHITESPACE","\n\n        ",125],["T_IF","if",127],["T_WHITESPACE"," ",127],"(","!",["T_STRING","is_file",127],"(",["T_VARIABLE","$tarTmpPath",127],")",["T_WHITESPACE"," ",127],["T_BOOLEAN_OR","||",127],["T_WHITESPACE"," ",127],["T_STRING","filesize",127],"(",["T_VARIABLE","$tarTmpPath",127],")",["T_WHITESPACE"," ",127],["T_IS_EQUAL","==",127],["T_WHITESPACE"," ",127],["T_LNUMBER","0",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_THROW","throw",128],["T_WHITESPACE"," ",128],["T_NEW","new",128],["T_WHITESPACE"," ",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Magento",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Framework",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Exception",128],["T_NS_SEPARATOR","\\",128],["T_STRING","LocalizedException",128],"(",["T_WHITESPACE","\n                ",128],["T_NEW","new",129],["T_WHITESPACE"," ",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Magento",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Framework",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Phrase",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create backup'",129],")",["T_WHITESPACE","\n            ",129],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_VARIABLE","$backupPath",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getBackupPath",133],"(",")",";",["T_WHITESPACE","\n\n        ",133],["T_VARIABLE","$gzPacker",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_NEW","new",135],["T_WHITESPACE"," ",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Magento",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Framework",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Archive",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Gz",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$gzPacker",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","pack",136],"(",["T_VARIABLE","$tarTmpPath",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$backupPath",136],")",";",["T_WHITESPACE","\n\n        ",136],["T_IF","if",138],["T_WHITESPACE"," ",138],"(","!",["T_STRING","is_file",138],"(",["T_VARIABLE","$backupPath",138],")",["T_WHITESPACE"," ",138],["T_BOOLEAN_OR","||",138],["T_WHITESPACE"," ",138],["T_STRING","filesize",138],"(",["T_VARIABLE","$backupPath",138],")",["T_WHITESPACE"," ",138],["T_IS_EQUAL","==",138],["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_THROW","throw",139],["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Magento",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Framework",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Exception",139],["T_NS_SEPARATOR","\\",139],["T_STRING","LocalizedException",139],"(",["T_WHITESPACE","\n                ",139],["T_NEW","new",140],["T_WHITESPACE"," ",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Magento",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Framework",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Phrase",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create backup'",140],")",["T_WHITESPACE","\n            ",140],")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],"@",["T_STRING","unlink",144],"(",["T_VARIABLE","$tarTmpPath",144],")",";",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_lastOperationSucceed",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","true",146],";",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_lastOperationSucceed",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Validate if disk space is available for creating backup\n     *\n     * @param string $backupDir\n     * @param int $size\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",150],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","validateAvailableDiscSpace",158],"(",["T_VARIABLE","$backupDir",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$size",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$freeSpace",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","disk_free_space",160],"(",["T_VARIABLE","$backupDir",160],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$requiredSpace",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_LNUMBER","2",161],["T_WHITESPACE"," ",161],"*",["T_WHITESPACE"," ",161],["T_VARIABLE","$size",161],";",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$requiredSpace",162],["T_WHITESPACE"," ",162],">",["T_WHITESPACE"," ",162],["T_VARIABLE","$freeSpace",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_THROW","throw",163],["T_WHITESPACE"," ",163],["T_NEW","new",163],["T_WHITESPACE"," ",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Magento",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Framework",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Backup",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Exception",163],["T_NS_SEPARATOR","\\",163],["T_STRING","NotEnoughFreeSpace",163],"(",["T_WHITESPACE","\n                ",163],["T_NEW","new",164],["T_WHITESPACE"," ",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Magento",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Framework",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Phrase",164],"(",["T_WHITESPACE","\n                ",164],["T_CONSTANT_ENCAPSED_STRING","'Warning: necessary space for backup is '",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],"(",["T_STRING","ceil",165],"(",["T_VARIABLE","$requiredSpace",165],")",["T_WHITESPACE"," ",165],"\/",["T_WHITESPACE"," ",165],["T_LNUMBER","1024",165],")",["T_WHITESPACE","\n                ",165],".",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'MB, but your free disc space is '",166],["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],"(",["T_STRING","ceil",166],"(",["T_VARIABLE","$freeSpace",166],")",["T_WHITESPACE"," ",166],"\/",["T_WHITESPACE"," ",166],["T_LNUMBER","1024",166],")",["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'MB.'",166],["T_WHITESPACE","\n                ",166],")",["T_WHITESPACE","\n            ",167],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Force class to use ftp for rollback procedure\n     *\n     * @param string $host\n     * @param string $username\n     * @param string $password\n     * @param string $path\n     * @return $this\n     *\/",172],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","setUseFtp",181],"(",["T_VARIABLE","$host",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$username",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$password",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$path",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_useFtp",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","true",183],";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_ftpHost",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$host",184],";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_ftpUser",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$username",185],";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_ftpPass",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$password",186],";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_ftpPath",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$path",187],";",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Get backup type\n     *\n     * @return string\n     *\n     * @see BackupInterface::getType()\n     *\/",191],["T_WHITESPACE","\n    ",197],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","getType",198],"(",")",["T_WHITESPACE","\n    ",198],"{",["T_WHITESPACE","\n        ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'filesystem'",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Add path that should be ignoring when creating or rolling back backup\n     *\n     * @param string|array $paths\n     * @return $this\n     *\/",203],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","addIgnorePaths",209],"(",["T_VARIABLE","$paths",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_STRING","is_string",211],"(",["T_VARIABLE","$paths",211],")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_STRING","in_array",212],"(",["T_VARIABLE","$paths",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_ignorePaths",212],")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_ignorePaths",213],"[","]",["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$paths",213],";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE"," ",215],["T_ELSEIF","elseif",215],["T_WHITESPACE"," ",215],"(",["T_STRING","is_array",215],"(",["T_VARIABLE","$paths",215],")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_FOREACH","foreach",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$paths",216],["T_WHITESPACE"," ",216],["T_AS","as",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$path",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","addIgnorePaths",217],"(",["T_VARIABLE","$path",217],")",";",["T_WHITESPACE","\n            ",217],"}",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Get paths that should be ignored while creating or rolling back backup procedure\n     *\n     * @return array\n     *\/",224],["T_WHITESPACE","\n    ",228],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","getIgnorePaths",229],"(",")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_ignorePaths",231],";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Set directory where backups saved and add it to ignore paths\n     *\n     * @param string $backupsDir\n     * @return $this\n     *\n     * @see AbstractBackup::setBackupsDir()\n     *\/",234],["T_WHITESPACE","\n    ",241],["T_PUBLIC","public",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","setBackupsDir",242],"(",["T_VARIABLE","$backupsDir",242],")",["T_WHITESPACE","\n    ",242],"{",["T_WHITESPACE","\n        ",243],["T_STRING","parent",244],["T_DOUBLE_COLON","::",244],["T_STRING","setBackupsDir",244],"(",["T_VARIABLE","$backupsDir",244],")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","addIgnorePaths",245],"(",["T_VARIABLE","$backupsDir",245],")",";",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Getter for $_ftpPath variable\n     *\n     * @return string\n     *\/",249],["T_WHITESPACE","\n    ",253],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","getFtpPath",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_ftpPath",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Get ftp connection string\n     *\n     * @return string\n     *\/",259],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","getFtpConnectString",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'ftp:\/\/'",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_ftpUser",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","':'",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_ftpPass",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'@'",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_ftpHost",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_ftpPath",266],";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n    ",267],["T_DOC_COMMENT","\/**\n     * Check backups directory existence and whether it's writeable\n     *\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",269],["T_WHITESPACE","\n    ",274],["T_PROTECTED","protected",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","_checkBackupsDir",275],"(",")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$backupsDir",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getBackupsDir",277],"(",")",";",["T_WHITESPACE","\n\n        ",277],["T_IF","if",279],["T_WHITESPACE"," ",279],"(","!",["T_STRING","is_dir",279],"(",["T_VARIABLE","$backupsDir",279],")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_VARIABLE","$backupsDirParentDirectory",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_STRING","basename",280],"(",["T_VARIABLE","$backupsDir",280],")",";",["T_WHITESPACE","\n\n            ",280],["T_IF","if",282],["T_WHITESPACE"," ",282],"(","!",["T_STRING","is_writeable",282],"(",["T_VARIABLE","$backupsDirParentDirectory",282],")",")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                ",282],["T_THROW","throw",283],["T_WHITESPACE"," ",283],["T_NEW","new",283],["T_WHITESPACE"," ",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Magento",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Framework",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Backup",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Exception",283],["T_NS_SEPARATOR","\\",283],["T_STRING","NotEnoughPermissions",283],"(",["T_WHITESPACE","\n                    ",283],["T_NEW","new",284],["T_WHITESPACE"," ",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Magento",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Framework",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Phrase",284],"(",["T_CONSTANT_ENCAPSED_STRING","'Cant create backups directory'",284],")",["T_WHITESPACE","\n                ",284],")",";",["T_WHITESPACE","\n            ",285],"}",["T_WHITESPACE","\n\n            ",286],["T_STRING","mkdir",288],"(",["T_VARIABLE","$backupsDir",288],")",";",["T_WHITESPACE","\n            ",288],["T_STRING","chmod",289],"(",["T_VARIABLE","$backupsDir",289],")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n\n        ",290],["T_IF","if",292],["T_WHITESPACE"," ",292],"(","!",["T_STRING","is_writable",292],"(",["T_VARIABLE","$backupsDir",292],")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_THROW","throw",293],["T_WHITESPACE"," ",293],["T_NEW","new",293],["T_WHITESPACE"," ",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Magento",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Framework",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Backup",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Exception",293],["T_NS_SEPARATOR","\\",293],["T_STRING","NotEnoughPermissions",293],"(",["T_WHITESPACE","\n                ",293],["T_NEW","new",294],["T_WHITESPACE"," ",294],["T_NS_SEPARATOR","\\",294],["T_STRING","Magento",294],["T_NS_SEPARATOR","\\",294],["T_STRING","Framework",294],["T_NS_SEPARATOR","\\",294],["T_STRING","Phrase",294],"(",["T_CONSTANT_ENCAPSED_STRING","'Backups directory is not writeable'",294],")",["T_WHITESPACE","\n            ",294],")",";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Generate tmp name for tarball\n     *\n     * @return string\n     *\/",299],["T_WHITESPACE","\n    ",303],["T_PROTECTED","protected",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","_getTarTmpPath",304],"(",")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$tmpName",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'~tmp-'",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_STRING","microtime",306],"(",["T_STRING","true",306],")",["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'.tar'",306],";",["T_WHITESPACE","\n        ",306],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getBackupsDir",307],"(",")",["T_WHITESPACE"," ",307],".",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'\/'",307],["T_WHITESPACE"," ",307],".",["T_WHITESPACE"," ",307],["T_VARIABLE","$tmpName",307],";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n\n    ",308],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\Backup\\Filesystem\\Rollback\\Ftp\n     * @deprecated\n     *\/",310],["T_WHITESPACE","\n    ",313],["T_PROTECTED","protected",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","getRollBackFtp",314],"(",")",["T_WHITESPACE","\n    ",314],"{",["T_WHITESPACE","\n        ",315],["T_IF","if",316],["T_WHITESPACE"," ",316],"(","!",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","rollBackFtp",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n            ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","rollBackFtp",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","ObjectManager",317],["T_DOUBLE_COLON","::",317],["T_STRING","getInstance",317],"(",")",["T_OBJECT_OPERATOR","->",317],["T_STRING","create",317],"(",["T_WHITESPACE","\n                ",317],["T_NS_SEPARATOR","\\",318],["T_STRING","Magento",318],["T_NS_SEPARATOR","\\",318],["T_STRING","Framework",318],["T_NS_SEPARATOR","\\",318],["T_STRING","Backup",318],["T_NS_SEPARATOR","\\",318],["T_STRING","Filesystem",318],["T_NS_SEPARATOR","\\",318],["T_STRING","Rollback",318],["T_NS_SEPARATOR","\\",318],["T_STRING","Ftp",318],["T_DOUBLE_COLON","::",318],["T_CLASS","class",318],",",["T_WHITESPACE","\n                ",318],"[",["T_CONSTANT_ENCAPSED_STRING","'snapshotObject'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],"]",["T_WHITESPACE","\n            ",319],")",";",["T_WHITESPACE","\n        ",320],"}",["T_WHITESPACE","\n\n        ",321],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","rollBackFtp",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\Backup\\Filesystem\\Rollback\\Fs\n     * @deprecated\n     *\/",326],["T_WHITESPACE","\n    ",329],["T_PROTECTED","protected",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","getRollBackFs",330],"(",")",["T_WHITESPACE","\n    ",330],"{",["T_WHITESPACE","\n        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(","!",["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","rollBackFs",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","rollBackFs",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","ObjectManager",333],["T_DOUBLE_COLON","::",333],["T_STRING","getInstance",333],"(",")",["T_OBJECT_OPERATOR","->",333],["T_STRING","create",333],"(",["T_WHITESPACE","\n                ",333],["T_NS_SEPARATOR","\\",334],["T_STRING","Magento",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Framework",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Backup",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Filesystem",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Rollback",334],["T_NS_SEPARATOR","\\",334],["T_STRING","Fs",334],["T_DOUBLE_COLON","::",334],["T_CLASS","class",334],",",["T_WHITESPACE","\n                ",334],"[",["T_CONSTANT_ENCAPSED_STRING","'snapshotObject'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],"]",["T_WHITESPACE","\n            ",335],")",";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n\n        ",337],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","rollBackFs",339],";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n",340],"}",["T_WHITESPACE","\n",341]]
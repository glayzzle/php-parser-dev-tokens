[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Web API request.\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Webapi",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AreaList",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","RequestInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Config",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ScopeInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HTTP",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PhpEnvironment",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Request",13],["T_WHITESPACE"," ",13],["T_AS","as",13],["T_WHITESPACE"," ",13],["T_STRING","HttpRequest",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Stdlib",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Cookie",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CookieReaderInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Phrase",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Stdlib",16],["T_NS_SEPARATOR","\\",16],["T_STRING","StringUtils",16],";",["T_WHITESPACE","\n\n",16],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Request",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","HttpRequest",18],["T_WHITESPACE"," ",18],["T_IMPLEMENTS","implements",18],["T_WHITESPACE"," ",18],["T_STRING","RequestInterface",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Name of query parameter to specify services for which to generate schema\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","REQUEST_PARAM_SERVICES",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'services'",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * services parameter value to indicate that a schema for all services should be generated\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","ALL_SERVICES",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'all'",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Modify pathInfo: strip down the front name and query parameters.\n     *\n     * @param CookieReaderInterface $cookieReader\n     * @param StringUtils $converter\n     * @param AreaList $areaList\n     * @param ScopeInterface $configScope\n     * @param null|string|\\Zend_Uri $uri\n     *\/",30],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","__construct",39],"(",["T_WHITESPACE","\n        ",39],["T_STRING","CookieReaderInterface",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$cookieReader",40],",",["T_WHITESPACE","\n        ",40],["T_STRING","StringUtils",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$converter",41],",",["T_WHITESPACE","\n        ",41],["T_STRING","AreaList",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$areaList",42],",",["T_WHITESPACE","\n        ",42],["T_STRING","ScopeInterface",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$configScope",43],",",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$uri",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],["T_WHITESPACE","\n    ",44],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n        ",45],["T_STRING","parent",46],["T_DOUBLE_COLON","::",46],["T_STRING","__construct",46],"(",["T_VARIABLE","$cookieReader",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$converter",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$uri",46],")",";",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$pathInfo",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getRequestUri",48],"(",")",";",["T_WHITESPACE","\n        ",48],["T_DOC_COMMENT","\/** Remove base url and area from path *\/",49],["T_WHITESPACE","\n        ",49],["T_VARIABLE","$areaFrontName",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$areaList",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getFrontName",50],"(",["T_VARIABLE","$configScope",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getCurrentScope",50],"(",")",")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$pathInfo",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","preg_replace",51],"(","\"",["T_ENCAPSED_AND_WHITESPACE","#.*?\/",51],["T_CURLY_OPEN","{",51],["T_VARIABLE","$areaFrontName",51],"}",["T_ENCAPSED_AND_WHITESPACE","\/?#",51],"\"",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'\/'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$pathInfo",51],")",";",["T_WHITESPACE","\n        ",51],["T_DOC_COMMENT","\/** Remove GET parameters from path *\/",52],["T_WHITESPACE","\n        ",52],["T_VARIABLE","$pathInfo",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","preg_replace",53],"(",["T_CONSTANT_ENCAPSED_STRING","'#\\?.*#'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","''",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$pathInfo",53],")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","setPathInfo",54],"(",["T_VARIABLE","$pathInfo",54],")",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\n     * Added CGI environment support.\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getHeader",62],"(",["T_VARIABLE","$header",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$default",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","false",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$headerValue",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","parent",64],["T_DOUBLE_COLON","::",64],["T_STRING","getHeader",64],"(",["T_VARIABLE","$header",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$default",64],")",";",["T_WHITESPACE","\n        ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$headerValue",65],["T_WHITESPACE"," ",65],["T_IS_EQUAL","==",65],["T_WHITESPACE"," ",65],["T_STRING","false",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_DOC_COMMENT","\/** Workaround for hhvm environment *\/",66],["T_WHITESPACE","\n            ",66],["T_VARIABLE","$header",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'REDIRECT_HTTP_'",67],["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_STRING","strtoupper",67],"(",["T_STRING","str_replace",67],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'_'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$header",67],")",")",";",["T_WHITESPACE","\n            ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_ISSET","isset",68],"(",["T_VARIABLE","$_SERVER",68],"[",["T_VARIABLE","$header",68],"]",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$headerValue",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$_SERVER",69],"[",["T_VARIABLE","$header",69],"]",";",["T_WHITESPACE","\n            ",69],"}",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$headerValue",72],";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Identify versions of resources that should be used for API configuration generation.\n     *\n     * @param string|null $default\n     * @return array|string\n     * @throws \\Magento\\Framework\\Webapi\\Exception When GET parameters are invalid\n     *\/",75],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","getRequestedServices",82],"(",["T_VARIABLE","$default",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","null",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$param",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getParam",84],"(",["T_STRING","self",84],["T_DOUBLE_COLON","::",84],["T_STRING","REQUEST_PARAM_SERVICES",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$default",84],")",";",["T_WHITESPACE","\n        ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_convertRequestParamToServiceArray",85],"(",["T_VARIABLE","$param",85],")",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Extract the resources query param value and return associative array of the form 'resource' => 'version'\n     *\n     * @param string $param eg <pre> testModule1AllSoapAndRestV1,testModule2AllSoapNoRestV1 <\/pre>\n     * @return string|array <pre> eg array (\n     *      'testModule1AllSoapAndRestV1',\n     *      'testModule2AllSoapNoRestV1',\n     *      )<\/pre>\n     * @throws \\Magento\\Framework\\Webapi\\Exception\n     *\/",88],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","_convertRequestParamToServiceArray",98],"(",["T_VARIABLE","$param",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$serviceSeparator",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","','",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$serviceVerPattern",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","\"[a-zA-Z\\d]*V[\\d]+\"",101],";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$regexp",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],"\"",["T_ENCAPSED_AND_WHITESPACE","\/^(",102],["T_CURLY_OPEN","{",102],["T_VARIABLE","$serviceVerPattern",102],"}",["T_ENCAPSED_AND_WHITESPACE",")([",102],["T_CURLY_OPEN","{",102],["T_VARIABLE","$serviceSeparator",102],"}",["T_ENCAPSED_AND_WHITESPACE","]",102],["T_CURLY_OPEN","{",102],["T_VARIABLE","$serviceVerPattern",102],"}",["T_ENCAPSED_AND_WHITESPACE",")*\\$\/",102],"\"",";",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$param",103],["T_WHITESPACE"," ",103],["T_IS_EQUAL","==",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'all'",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$param",104],";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_COMMENT","\/\/Check if the $param is of valid format\n",106],["T_WHITESPACE","        ",107],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_EMPTY","empty",107],"(",["T_VARIABLE","$param",107],")",["T_WHITESPACE"," ",107],["T_BOOLEAN_OR","||",107],["T_WHITESPACE"," ",107],"!",["T_STRING","preg_match",107],"(",["T_VARIABLE","$regexp",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$param",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$message",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","Phrase",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Incorrect format of request URI or Requested services are missing.'",108],")",";",["T_WHITESPACE","\n            ",108],["T_THROW","throw",109],["T_WHITESPACE"," ",109],["T_NEW","new",109],["T_WHITESPACE"," ",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Framework",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Webapi",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Exception",109],"(",["T_VARIABLE","$message",109],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n        ",110],["T_COMMENT","\/\/Split the $param string to create an array of 'service' => 'version'\n",111],["T_WHITESPACE","        ",112],["T_VARIABLE","$serviceVersionArray",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","explode",112],"(",["T_VARIABLE","$serviceSeparator",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$param",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$serviceArray",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],"[","]",";",["T_WHITESPACE","\n        ",113],["T_FOREACH","foreach",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$serviceVersionArray",114],["T_WHITESPACE"," ",114],["T_AS","as",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$service",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$serviceArray",115],"[","]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$service",115],";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$serviceArray",117],";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n",118],"}",["T_WHITESPACE","\n",119]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Framework",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Webapi",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DirectoryList",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","State",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AbstractAggregateException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AuthenticationException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AuthorizationException",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Exception",13],["T_NS_SEPARATOR","\\",13],["T_STRING","LocalizedException",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Exception",14],["T_NS_SEPARATOR","\\",14],["T_STRING","NoSuchEntityException",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Phrase",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Webapi",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_WHITESPACE"," ",16],["T_AS","as",16],["T_WHITESPACE"," ",16],["T_STRING","WebapiException",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Helper for errors processing.\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",18],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","ErrorProcessor",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","DEFAULT_SHUTDOWN_FUNCTION",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'apiShutdownFunction'",25],";",["T_WHITESPACE","\n\n    ",25],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","DEFAULT_ERROR_HTTP_CODE",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_LNUMBER","500",27],";",["T_WHITESPACE","\n\n    ",27],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","DEFAULT_RESPONSE_CHARSET",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",29],";",["T_WHITESPACE","\n\n    ",29],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","INTERNAL_SERVER_ERROR_MSG",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'Internal Error. Details are available in Magento log file. Report ID: %s'",31],";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/**#@+\n     * Error data representation formats.\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","DATA_FORMAT_JSON",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'json'",36],";",["T_WHITESPACE","\n\n    ",36],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","DATA_FORMAT_XML",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'xml'",38],";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/**#@-*\/",40],["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Json\\Encoder\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$encoder",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\State\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_appState",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_logger",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Filesystem instance\n     *\n     * @var \\Magento\\Framework\\Filesystem\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_filesystem",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\Write\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$directoryWrite",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Json\\Encoder $encoder\n     * @param \\Magento\\Framework\\App\\State $appState\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     *\/",69],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","__construct",75],"(",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Framework",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Json",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Encoder",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$encoder",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Framework",77],["T_NS_SEPARATOR","\\",77],["T_STRING","App",77],["T_NS_SEPARATOR","\\",77],["T_STRING","State",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$appState",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Psr",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Log",78],["T_NS_SEPARATOR","\\",78],["T_STRING","LoggerInterface",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$logger",78],",",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Framework",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Filesystem",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$filesystem",79],["T_WHITESPACE","\n    ",79],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","encoder",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$encoder",81],";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_appState",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$appState",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_logger",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$logger",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_filesystem",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$filesystem",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","directoryWrite",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_filesystem",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getDirectoryWrite",85],"(",["T_STRING","DirectoryList",85],["T_DOUBLE_COLON","::",85],["T_STRING","VAR_DIR",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","registerShutdownFunction",86],"(",")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Mask actual exception for security reasons in case when it should not be exposed to API clients.\n     *\n     * Convert any exception into \\Magento\\Framework\\Webapi\\Exception.\n     *\n     * @param \\Exception $exception Exception to convert to a WebAPI exception\n     *\n     * @return WebapiException\n     *\/",89],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","maskException",98],"(",["T_NS_SEPARATOR","\\",98],["T_STRING","Exception",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$exception",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$isDevMode",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_appState",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getMode",100],"(",")",["T_WHITESPACE"," ",100],["T_IS_IDENTICAL","===",100],["T_WHITESPACE"," ",100],["T_STRING","State",100],["T_DOUBLE_COLON","::",100],["T_STRING","MODE_DEVELOPER",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$stackTrace",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$isDevMode",101],["T_WHITESPACE"," ",101],"?",["T_WHITESPACE"," ",101],["T_VARIABLE","$exception",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getTraceAsString",101],"(",")",["T_WHITESPACE"," ",101],":",["T_WHITESPACE"," ",101],["T_STRING","null",101],";",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$exception",103],["T_WHITESPACE"," ",103],["T_INSTANCEOF","instanceof",103],["T_WHITESPACE"," ",103],["T_STRING","WebapiException",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$maskedException",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$exception",104],";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE"," ",105],["T_ELSEIF","elseif",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$exception",105],["T_WHITESPACE"," ",105],["T_INSTANCEOF","instanceof",105],["T_WHITESPACE"," ",105],["T_STRING","LocalizedException",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_COMMENT","\/\/ Map HTTP codes for LocalizedExceptions according to exception type\n",106],["T_WHITESPACE","            ",107],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$exception",107],["T_WHITESPACE"," ",107],["T_INSTANCEOF","instanceof",107],["T_WHITESPACE"," ",107],["T_STRING","NoSuchEntityException",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$httpCode",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","WebapiException",108],["T_DOUBLE_COLON","::",108],["T_STRING","HTTP_NOT_FOUND",108],";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE"," ",109],["T_ELSEIF","elseif",109],["T_WHITESPACE"," ",109],"(","(",["T_VARIABLE","$exception",109],["T_WHITESPACE"," ",109],["T_INSTANCEOF","instanceof",109],["T_WHITESPACE"," ",109],["T_STRING","AuthorizationException",109],")",["T_WHITESPACE","\n                ",109],["T_BOOLEAN_OR","||",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$exception",110],["T_WHITESPACE"," ",110],["T_INSTANCEOF","instanceof",110],["T_WHITESPACE"," ",110],["T_STRING","AuthenticationException",110],")",["T_WHITESPACE","\n            ",110],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$httpCode",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","WebapiException",112],["T_DOUBLE_COLON","::",112],["T_STRING","HTTP_UNAUTHORIZED",112],";",["T_WHITESPACE","\n            ",112],"}",["T_WHITESPACE"," ",113],["T_ELSE","else",113],["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_COMMENT","\/\/ Input, Expired, InvalidState exceptions will fall to here\n",114],["T_WHITESPACE","                ",115],["T_VARIABLE","$httpCode",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","WebapiException",115],["T_DOUBLE_COLON","::",115],["T_STRING","HTTP_BAD_REQUEST",115],";",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n\n            ",116],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$exception",118],["T_WHITESPACE"," ",118],["T_INSTANCEOF","instanceof",118],["T_WHITESPACE"," ",118],["T_STRING","AbstractAggregateException",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_VARIABLE","$errors",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$exception",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getErrors",119],"(",")",";",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE"," ",120],["T_ELSE","else",120],["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$errors",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","null",121],";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n\n            ",122],["T_VARIABLE","$maskedException",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_STRING","WebapiException",124],"(",["T_WHITESPACE","\n                ",124],["T_NEW","new",125],["T_WHITESPACE"," ",125],["T_STRING","Phrase",125],"(",["T_VARIABLE","$exception",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getRawMessage",125],"(",")",")",",",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$exception",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getCode",126],"(",")",",",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$httpCode",127],",",["T_WHITESPACE","\n                ",127],["T_VARIABLE","$exception",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getParameters",128],"(",")",",",["T_WHITESPACE","\n                ",128],["T_STRING","get_class",129],"(",["T_VARIABLE","$exception",129],")",",",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$errors",130],",",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$stackTrace",131],["T_WHITESPACE","\n            ",131],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE"," ",133],["T_ELSE","else",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$message",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$exception",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getMessage",134],"(",")",";",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$code",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$exception",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getCode",135],"(",")",";",["T_WHITESPACE","\n            ",135],["T_COMMENT","\/\/if not in Dev mode, make sure the message and code is masked for unanticipated exceptions\n",136],["T_WHITESPACE","            ",137],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_VARIABLE","$isDevMode",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_DOC_COMMENT","\/** Log information about actual exception *\/",138],["T_WHITESPACE","\n                ",138],["T_VARIABLE","$reportId",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_critical",139],"(",["T_VARIABLE","$exception",139],")",";",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$message",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","sprintf",140],"(",["T_STRING","self",140],["T_DOUBLE_COLON","::",140],["T_STRING","INTERNAL_SERVER_ERROR_MSG",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$reportId",140],")",";",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$code",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_LNUMBER","0",141],";",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$maskedException",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_NEW","new",143],["T_WHITESPACE"," ",143],["T_STRING","WebapiException",143],"(",["T_WHITESPACE","\n                ",143],["T_NEW","new",144],["T_WHITESPACE"," ",144],["T_STRING","Phrase",144],"(",["T_VARIABLE","$message",144],")",",",["T_WHITESPACE","\n                ",144],["T_VARIABLE","$code",145],",",["T_WHITESPACE","\n                ",145],["T_STRING","WebapiException",146],["T_DOUBLE_COLON","::",146],["T_STRING","HTTP_INTERNAL_ERROR",146],",",["T_WHITESPACE","\n                ",146],"[","]",",",["T_WHITESPACE","\n                ",147],["T_CONSTANT_ENCAPSED_STRING","''",148],",",["T_WHITESPACE","\n                ",148],["T_STRING","null",149],",",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$stackTrace",150],["T_WHITESPACE","\n            ",150],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$maskedException",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Process API exception.\n     *\n     * Create report if not in developer mode and render error to send correct API response.\n     *\n     * @param \\Exception $exception\n     * @param int $httpCode\n     * @return void\n     * @SuppressWarnings(PHPMD.ExitExpression)\n     *\/",156],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","renderException",166],"(",["T_NS_SEPARATOR","\\",166],["T_STRING","Exception",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$exception",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$httpCode",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","self",166],["T_DOUBLE_COLON","::",166],["T_STRING","DEFAULT_ERROR_HTTP_CODE",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_appState",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getMode",169],"(",")",["T_WHITESPACE"," ",169],["T_IS_EQUAL","==",169],["T_WHITESPACE"," ",169],["T_STRING","State",169],["T_DOUBLE_COLON","::",169],["T_STRING","MODE_DEVELOPER",169],["T_WHITESPACE"," ",169],["T_BOOLEAN_OR","||",169],["T_WHITESPACE","\n            ",169],["T_VARIABLE","$exception",170],["T_WHITESPACE"," ",170],["T_INSTANCEOF","instanceof",170],["T_WHITESPACE"," ",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Magento",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Framework",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Webapi",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Exception",170],["T_WHITESPACE","\n        ",170],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","renderErrorMessage",172],"(",["T_VARIABLE","$exception",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getMessage",172],"(",")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$exception",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getTraceAsString",172],"(",")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$httpCode",172],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$reportId",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_critical",174],"(",["T_VARIABLE","$exception",174],")",";",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","renderErrorMessage",175],"(",["T_WHITESPACE","\n                ",175],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_STRING","Phrase",176],"(",["T_CONSTANT_ENCAPSED_STRING","'Internal Error. Details are available in Magento log file. Report ID: %1'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$reportId",176],")",",",["T_WHITESPACE","\n                ",176],["T_CONSTANT_ENCAPSED_STRING","'Trace is not available.'",177],",",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$httpCode",178],["T_WHITESPACE","\n            ",178],")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n        ",180],["T_EXIT","exit",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * Log information about exception to exception log.\n     *\n     * @param \\Exception $exception\n     * @return string $reportId\n     *\/",184],["T_WHITESPACE","\n    ",189],["T_PROTECTED","protected",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","_critical",190],"(",["T_NS_SEPARATOR","\\",190],["T_STRING","Exception",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$exception",190],")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$reportId",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","uniqid",192],"(",["T_CONSTANT_ENCAPSED_STRING","\"webapi-\"",192],")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$message",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],"\"",["T_ENCAPSED_AND_WHITESPACE","Report ID: ",193],["T_CURLY_OPEN","{",193],["T_VARIABLE","$reportId",193],"}",["T_ENCAPSED_AND_WHITESPACE","; Message: ",193],["T_CURLY_OPEN","{",193],["T_VARIABLE","$exception",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getMessage",193],"(",")","}","\"",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$code",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$exception",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getCode",194],"(",")",";",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$exception",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_NEW","new",195],["T_WHITESPACE"," ",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Exception",195],"(",["T_VARIABLE","$message",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$code",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$exception",195],")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_logger",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","critical",196],"(",["T_VARIABLE","$exception",196],")",";",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$reportId",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Render error according to mime type.\n     *\n     * @param string $errorMessage\n     * @param string $trace\n     * @param int $httpCode\n     * @return void\n     *\/",200],["T_WHITESPACE","\n    ",207],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","renderErrorMessage",208],"(",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$errorMessage",209],",",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$trace",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'Trace is not available.'",210],",",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$httpCode",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","self",211],["T_DOUBLE_COLON","::",211],["T_STRING","DEFAULT_ERROR_HTTP_CODE",211],["T_WHITESPACE","\n    ",211],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n        ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_ISSET","isset",213],"(",["T_VARIABLE","$_SERVER",213],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT'",213],"]",")",["T_WHITESPACE"," ",213],["T_BOOLEAN_AND","&&",213],["T_WHITESPACE"," ",213],["T_STRING","strstr",213],"(",["T_VARIABLE","$_SERVER",213],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT'",213],"]",",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'xml'",213],")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$output",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_formatError",214],"(",["T_VARIABLE","$errorMessage",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$trace",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$httpCode",214],",",["T_WHITESPACE"," ",214],["T_STRING","self",214],["T_DOUBLE_COLON","::",214],["T_STRING","DATA_FORMAT_XML",214],")",";",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$mimeType",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'application\/xml'",215],";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE"," ",216],["T_ELSE","else",216],["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_DOC_COMMENT","\/** Default format is JSON *\/",217],["T_WHITESPACE","\n            ",217],["T_VARIABLE","$output",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_formatError",218],"(",["T_VARIABLE","$errorMessage",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$trace",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$httpCode",218],",",["T_WHITESPACE"," ",218],["T_STRING","self",218],["T_DOUBLE_COLON","::",218],["T_STRING","DATA_FORMAT_JSON",218],")",";",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$mimeType",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",219],";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n        ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(","!",["T_STRING","headers_sent",221],"(",")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_STRING","header",222],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.1 '",222],["T_WHITESPACE"," ",222],".",["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$httpCode",222],["T_WHITESPACE"," ",222],"?",["T_WHITESPACE"," ",222],["T_VARIABLE","$httpCode",222],["T_WHITESPACE"," ",222],":",["T_WHITESPACE"," ",222],["T_STRING","self",222],["T_DOUBLE_COLON","::",222],["T_STRING","DEFAULT_ERROR_HTTP_CODE",222],")",")",";",["T_WHITESPACE","\n            ",222],["T_STRING","header",223],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: '",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_VARIABLE","$mimeType",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'; charset='",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_STRING","self",223],["T_DOUBLE_COLON","::",223],["T_STRING","DEFAULT_RESPONSE_CHARSET",223],")",";",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n        ",224],["T_ECHO","echo",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$output",225],";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Format error data according to required format.\n     *\n     * @param string $errorMessage\n     * @param string $trace\n     * @param int $httpCode\n     * @param string $format\n     * @return array|string\n     *\/",228],["T_WHITESPACE","\n    ",236],["T_PROTECTED","protected",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","_formatError",237],"(",["T_VARIABLE","$errorMessage",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$trace",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$httpCode",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$format",237],")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$errorData",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],"[","]",";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$message",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$httpCode",240],",",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'message'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$errorMessage",240],"]",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$isDeveloperMode",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_appState",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getMode",241],"(",")",["T_WHITESPACE"," ",241],["T_IS_EQUAL","==",241],["T_WHITESPACE"," ",241],["T_STRING","State",241],["T_DOUBLE_COLON","::",241],["T_STRING","MODE_DEVELOPER",241],";",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$isDeveloperMode",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$message",243],"[",["T_CONSTANT_ENCAPSED_STRING","'trace'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$trace",243],";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$errorData",245],"[",["T_CONSTANT_ENCAPSED_STRING","'messages'",245],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",245],"]","[","]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$message",245],";",["T_WHITESPACE","\n        ",245],["T_SWITCH","switch",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$format",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_CASE","case",247],["T_WHITESPACE"," ",247],["T_STRING","self",247],["T_DOUBLE_COLON","::",247],["T_STRING","DATA_FORMAT_JSON",247],":",["T_WHITESPACE","\n                ",247],["T_VARIABLE","$errorData",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","encoder",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","encode",248],"(",["T_VARIABLE","$errorData",248],")",";",["T_WHITESPACE","\n                ",248],["T_BREAK","break",249],";",["T_WHITESPACE","\n            ",249],["T_CASE","case",250],["T_WHITESPACE"," ",250],["T_STRING","self",250],["T_DOUBLE_COLON","::",250],["T_STRING","DATA_FORMAT_XML",250],":",["T_WHITESPACE","\n                ",250],["T_VARIABLE","$errorData",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\"?>'",251],["T_WHITESPACE","\n                    ",251],".",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'<error>'",252],["T_WHITESPACE","\n                    ",252],".",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'<messages>'",253],["T_WHITESPACE","\n                    ",253],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'<error>'",254],["T_WHITESPACE","\n                    ",254],".",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'<data_item>'",255],["T_WHITESPACE","\n                    ",255],".",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'<code>'",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_VARIABLE","$httpCode",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'<\/code>'",256],["T_WHITESPACE","\n                    ",256],".",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'<message><![CDATA['",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_VARIABLE","$errorMessage",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","']]><\/message>'",257],["T_WHITESPACE","\n                    ",257],".",["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$isDeveloperMode",258],["T_WHITESPACE"," ",258],"?",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'<trace><![CDATA['",258],["T_WHITESPACE"," ",258],".",["T_WHITESPACE"," ",258],["T_VARIABLE","$trace",258],["T_WHITESPACE"," ",258],".",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","']]><\/trace>'",258],["T_WHITESPACE"," ",258],":",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","''",258],")",["T_WHITESPACE","\n                    ",258],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'<\/data_item>'",259],["T_WHITESPACE","\n                    ",259],".",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'<\/error>'",260],["T_WHITESPACE","\n                    ",260],".",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'<\/messages>'",261],["T_WHITESPACE","\n                    ",261],".",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'<\/error>'",262],";",["T_WHITESPACE","\n                ",262],["T_BREAK","break",263],";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$errorData",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Declare web API-specific shutdown function.\n     *\n     * @return $this\n     *\/",268],["T_WHITESPACE","\n    ",272],["T_PUBLIC","public",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","registerShutdownFunction",273],"(",")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_STRING","register_shutdown_function",275],"(","[",["T_VARIABLE","$this",275],",",["T_WHITESPACE"," ",275],["T_STRING","self",275],["T_DOUBLE_COLON","::",275],["T_STRING","DEFAULT_SHUTDOWN_FUNCTION",275],"]",")",";",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Function to catch errors, that has not been caught by the user error dispatcher function.\n     *\n     * @return void\n     *\/",279],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","apiShutdownFunction",284],"(",")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$fatalErrorFlag",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","E_ERROR",286],["T_WHITESPACE"," ",286],"|",["T_WHITESPACE"," ",286],["T_STRING","E_USER_ERROR",286],["T_WHITESPACE"," ",286],"|",["T_WHITESPACE"," ",286],["T_STRING","E_PARSE",286],["T_WHITESPACE"," ",286],"|",["T_WHITESPACE"," ",286],["T_STRING","E_CORE_ERROR",286],["T_WHITESPACE"," ",286],"|",["T_WHITESPACE"," ",286],["T_STRING","E_COMPILE_ERROR",286],["T_WHITESPACE"," ",286],"|",["T_WHITESPACE"," ",286],["T_STRING","E_RECOVERABLE_ERROR",286],";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$error",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","error_get_last",287],"(",")",";",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$error",288],["T_WHITESPACE"," ",288],["T_BOOLEAN_AND","&&",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$error",288],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",288],"]",["T_WHITESPACE"," ",288],"&",["T_WHITESPACE"," ",288],["T_VARIABLE","$fatalErrorFlag",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$errorMessage",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],"\"",["T_ENCAPSED_AND_WHITESPACE","Fatal Error: '",289],["T_CURLY_OPEN","{",289],["T_VARIABLE","$error",289],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",289],"]","}",["T_ENCAPSED_AND_WHITESPACE","' in '",289],["T_CURLY_OPEN","{",289],["T_VARIABLE","$error",289],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",289],"]","}",["T_ENCAPSED_AND_WHITESPACE","' on line ",289],["T_CURLY_OPEN","{",289],["T_VARIABLE","$error",289],"[",["T_CONSTANT_ENCAPSED_STRING","'line'",289],"]","}","\"",";",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$reportId",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_saveFatalErrorReport",290],"(",["T_VARIABLE","$errorMessage",290],")",";",["T_WHITESPACE","\n            ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_appState",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getMode",291],"(",")",["T_WHITESPACE"," ",291],["T_IS_EQUAL","==",291],["T_WHITESPACE"," ",291],["T_STRING","State",291],["T_DOUBLE_COLON","::",291],["T_STRING","MODE_DEVELOPER",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","renderErrorMessage",292],"(",["T_VARIABLE","$errorMessage",292],")",";",["T_WHITESPACE","\n            ",292],"}",["T_WHITESPACE"," ",293],["T_ELSE","else",293],["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","renderErrorMessage",294],"(",["T_WHITESPACE","\n                    ",294],["T_NEW","new",295],["T_WHITESPACE"," ",295],["T_STRING","Phrase",295],"(",["T_CONSTANT_ENCAPSED_STRING","'Server internal error. See details in report api\/%1'",295],",",["T_WHITESPACE"," ",295],"[",["T_VARIABLE","$reportId",295],"]",")",["T_WHITESPACE","\n                ",295],")",";",["T_WHITESPACE","\n            ",296],"}",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Log information about fatal error.\n     *\n     * @param string $reportData\n     * @return string\n     *\/",301],["T_WHITESPACE","\n    ",306],["T_PROTECTED","protected",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","_saveFatalErrorReport",307],"(",["T_VARIABLE","$reportData",307],")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","directoryWrite",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","create",309],"(",["T_CONSTANT_ENCAPSED_STRING","'report\/api'",309],")",";",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$reportId",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","abs",310],"(",["T_STRING","intval",310],"(",["T_STRING","microtime",310],"(",["T_STRING","true",310],")",["T_WHITESPACE"," ",310],"*",["T_WHITESPACE"," ",310],["T_STRING","rand",310],"(",["T_LNUMBER","100",310],",",["T_WHITESPACE"," ",310],["T_LNUMBER","1000",310],")",")",")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","directoryWrite",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","writeFile",311],"(",["T_CONSTANT_ENCAPSED_STRING","'report\/api\/'",311],["T_WHITESPACE"," ",311],".",["T_WHITESPACE"," ",311],["T_VARIABLE","$reportId",311],",",["T_WHITESPACE"," ",311],["T_STRING","serialize",311],"(",["T_VARIABLE","$reportData",311],")",")",";",["T_WHITESPACE","\n        ",311],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$reportId",312],";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n",313],"}",["T_WHITESPACE","\n",314]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Framework",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Pricing",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adjustment",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Pricing",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Amount",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AmountFactory",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Pricing",10],["T_NS_SEPARATOR","\\",10],["T_STRING","SaleableInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Class Calculator\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Calculator",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","CalculatorInterface",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var AmountFactory\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$amountFactory",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @param AmountFactory $amountFactory\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","__construct",25],"(",["T_STRING","AmountFactory",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$amountFactory",25],")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","amountFactory",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$amountFactory",27],";",["T_WHITESPACE","\n    ",27],"}",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Retrieve Amount object based on given float amount, product and exclude option.\n     * It is possible to pass \"true\" or adjustment code to exclude all or specific adjustment from an amount.\n     *\n     * @param float|string $amount\n     * @param SaleableInterface $saleableItem\n     * @param null|bool|string|array $exclude\n     * @param null|array $context\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",30],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","getAmount",41],"(",["T_VARIABLE","$amount",41],",",["T_WHITESPACE"," ",41],["T_STRING","SaleableInterface",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$saleableItem",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$exclude",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","null",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$context",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],"[","]",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$baseAmount",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$fullAmount",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$amount",43],";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$previousAdjustments",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_LNUMBER","0",44],";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$adjustments",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"[","]",";",["T_WHITESPACE","\n        ",45],["T_FOREACH","foreach",46],["T_WHITESPACE"," ",46],"(",["T_VARIABLE","$saleableItem",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getPriceInfo",46],"(",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getAdjustments",46],"(",")",["T_WHITESPACE"," ",46],["T_AS","as",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$adjustment",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$code",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$adjustment",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getAdjustmentCode",47],"(",")",";",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$toExclude",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","false",48],";",["T_WHITESPACE","\n            ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(","!",["T_STRING","is_array",49],"(",["T_VARIABLE","$exclude",49],")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n                ",49],["T_IF","if",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$exclude",50],["T_WHITESPACE"," ",50],["T_IS_IDENTICAL","===",50],["T_WHITESPACE"," ",50],["T_STRING","true",50],["T_WHITESPACE"," ",50],["T_BOOLEAN_OR","||",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$exclude",50],["T_WHITESPACE"," ",50],["T_IS_NOT_IDENTICAL","!==",50],["T_WHITESPACE"," ",50],["T_STRING","null",50],["T_WHITESPACE"," ",50],["T_BOOLEAN_AND","&&",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$code",50],["T_WHITESPACE"," ",50],["T_IS_IDENTICAL","===",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$exclude",50],")",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n                    ",50],["T_VARIABLE","$toExclude",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","true",51],";",["T_WHITESPACE","\n                ",51],"}",["T_WHITESPACE","\n            ",52],"}",["T_WHITESPACE"," ",53],["T_ELSE","else",53],["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_STRING","in_array",54],"(",["T_VARIABLE","$code",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$exclude",54],")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                    ",54],["T_VARIABLE","$toExclude",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","true",55],";",["T_WHITESPACE","\n                ",55],"}",["T_WHITESPACE","\n            ",56],"}",["T_WHITESPACE","\n            ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$adjustment",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","isIncludedInBasePrice",58],"(",")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n                ",58],["T_VARIABLE","$adjust",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$adjustment",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","extractAdjustment",59],"(",["T_VARIABLE","$baseAmount",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$saleableItem",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$context",59],")",";",["T_WHITESPACE","\n                ",59],["T_VARIABLE","$baseAmount",60],["T_WHITESPACE"," ",60],["T_MINUS_EQUAL","-=",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$adjust",60],";",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$fullAmount",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$adjustment",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","applyAdjustment",61],"(",["T_VARIABLE","$fullAmount",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$saleableItem",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$context",61],")",";",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$adjust",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$fullAmount",62],["T_WHITESPACE"," ",62],"-",["T_WHITESPACE"," ",62],["T_VARIABLE","$baseAmount",62],["T_WHITESPACE"," ",62],"-",["T_WHITESPACE"," ",62],["T_VARIABLE","$previousAdjustments",62],";",["T_WHITESPACE","\n                ",62],["T_IF","if",63],["T_WHITESPACE"," ",63],"(","!",["T_VARIABLE","$toExclude",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                    ",63],["T_VARIABLE","$adjustments",64],"[",["T_VARIABLE","$code",64],"]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$adjust",64],";",["T_WHITESPACE","\n                ",64],"}",["T_WHITESPACE","\n            ",65],"}",["T_WHITESPACE"," ",66],["T_ELSEIF","elseif",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$adjustment",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","isIncludedInDisplayPrice",66],"(",["T_VARIABLE","$saleableItem",66],")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n                ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$toExclude",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                    ",67],["T_CONTINUE","continue",68],";",["T_WHITESPACE","\n                ",68],"}",["T_WHITESPACE","\n                ",69],["T_VARIABLE","$newAmount",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$adjustment",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","applyAdjustment",70],"(",["T_VARIABLE","$fullAmount",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$saleableItem",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$context",70],")",";",["T_WHITESPACE","\n                ",70],["T_VARIABLE","$adjust",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$newAmount",71],["T_WHITESPACE"," ",71],"-",["T_WHITESPACE"," ",71],["T_VARIABLE","$fullAmount",71],";",["T_WHITESPACE","\n                ",71],["T_VARIABLE","$adjustments",72],"[",["T_VARIABLE","$code",72],"]",["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$adjust",72],";",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$fullAmount",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$newAmount",73],";",["T_WHITESPACE","\n                ",73],["T_VARIABLE","$previousAdjustments",74],["T_WHITESPACE"," ",74],["T_PLUS_EQUAL","+=",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$adjust",74],";",["T_WHITESPACE","\n            ",74],"}",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","amountFactory",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","create",78],"(",["T_VARIABLE","$fullAmount",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$adjustments",78],")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n",79],"}",["T_WHITESPACE","\n",80]]
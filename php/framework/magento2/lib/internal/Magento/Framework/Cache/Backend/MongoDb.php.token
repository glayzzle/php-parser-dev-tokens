[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * MongoDb cache backend\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Cache",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Backend",10],";",["T_WHITESPACE","\n\n",10],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","MongoDb",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Zend_Cache_Backend",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Zend_Cache_Backend_ExtendedInterface",12],["T_WHITESPACE","\n",12],"{",["T_WHITESPACE","\n    ",13],["T_DOC_COMMENT","\/**\n     * Infinite expiration time\n     *\/",14],["T_WHITESPACE","\n    ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","EXPIRATION_TIME_INFINITE",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","0",17],";",["T_WHITESPACE","\n\n    ",17],["T_COMMENT","\/**#@+\n     * Available comparison modes. Used for composing queries to search by tags\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","COMPARISON_MODE_MATCHING_TAG",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Zend_Cache",22],["T_DOUBLE_COLON","::",22],["T_STRING","CLEANING_MODE_MATCHING_TAG",22],";",["T_WHITESPACE","\n\n    ",22],["T_CONST","const",24],["T_WHITESPACE"," ",24],["T_STRING","COMPARISON_MODE_NOT_MATCHING_TAG",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Zend_Cache",24],["T_DOUBLE_COLON","::",24],["T_STRING","CLEANING_MODE_NOT_MATCHING_TAG",24],";",["T_WHITESPACE","\n\n    ",24],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","COMPARISON_MODE_MATCHING_ANY_TAG",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Zend_Cache",26],["T_DOUBLE_COLON","::",26],["T_STRING","CLEANING_MODE_MATCHING_ANY_TAG",26],";",["T_WHITESPACE","\n\n    ",26],["T_COMMENT","\/**#@-*\/",28],["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\MongoCollection|null\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_collection",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","null",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * List of available options\n     *\n     * @var array\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_options",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],"[",["T_WHITESPACE","\n        ",40],["T_DOC_COMMENT","\/** MongoDB connection string *\/",41],["T_WHITESPACE","\n        ",41],["T_CONSTANT_ENCAPSED_STRING","'connection_string'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'mongodb:\/\/localhost:27017'",42],",",["T_WHITESPACE","\n        ",42],["T_DOC_COMMENT","\/** MongoDB connection options *\/",43],["T_WHITESPACE","\n        ",43],["T_CONSTANT_ENCAPSED_STRING","'mongo_options'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],"[","]",",",["T_WHITESPACE","\n        ",44],["T_DOC_COMMENT","\/** Name of a database to be used for cache storage *\/",45],["T_WHITESPACE","\n        ",45],["T_CONSTANT_ENCAPSED_STRING","'db'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","''",46],",",["T_WHITESPACE","\n        ",46],["T_DOC_COMMENT","\/** Name of a collection to be used for cache storage *\/",47],["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'collection'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'cache'",48],",",["T_WHITESPACE","\n    ",48],"]",";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @param array $options\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","__construct",54],"(",["T_ARRAY","array",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$options",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(","!",["T_STRING","extension_loaded",56],"(",["T_CONSTANT_ENCAPSED_STRING","'mongo'",56],")",["T_WHITESPACE"," ",56],["T_BOOLEAN_OR","||",56],["T_WHITESPACE"," ",56],"!",["T_STRING","version_compare",56],"(",["T_NS_SEPARATOR","\\",56],["T_STRING","Mongo",56],["T_DOUBLE_COLON","::",56],["T_STRING","VERSION",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'1.2.11'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'>='",56],")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Zend_Cache",57],["T_DOUBLE_COLON","::",57],["T_STRING","throwException",57],"(",["T_WHITESPACE","\n                ",57],["T_CONSTANT_ENCAPSED_STRING","\"At least 1.2.11 version of 'mongo' extension is required for using MongoDb cache backend\"",58],["T_WHITESPACE","\n            ",58],")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_EMPTY","empty",61],"(",["T_VARIABLE","$options",61],"[",["T_CONSTANT_ENCAPSED_STRING","'db'",61],"]",")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Zend_Cache",62],["T_DOUBLE_COLON","::",62],["T_STRING","throwException",62],"(",["T_CONSTANT_ENCAPSED_STRING","\"'db' option is not specified\"",62],")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_STRING","parent",64],["T_DOUBLE_COLON","::",64],["T_STRING","__construct",64],"(",["T_VARIABLE","$options",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Get collection\n     *\n     * @return \\MongoCollection\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","_getCollection",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_STRING","null",74],["T_WHITESPACE"," ",74],["T_IS_IDENTICAL","===",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_collection",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$connection",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_NEW","new",75],["T_WHITESPACE"," ",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Mongo",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_options",75],"[",["T_CONSTANT_ENCAPSED_STRING","'connection_string'",75],"]",",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_options",75],"[",["T_CONSTANT_ENCAPSED_STRING","'mongo_options'",75],"]",")",";",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$database",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$connection",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","selectDB",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_options",76],"[",["T_CONSTANT_ENCAPSED_STRING","'db'",76],"]",")",";",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_collection",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$database",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","selectCollection",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_options",77],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",77],"]",")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n        ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_collection",79],";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids\n     *\n     * @return string[] array of stored cache ids (string)\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getIds",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_STRING","array_keys",89],"(",["T_STRING","iterator_to_array",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_getCollection",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","find",89],"(","[","]",",",["T_WHITESPACE"," ",89],"[",["T_CONSTANT_ENCAPSED_STRING","'_id'",89],"]",")",")",")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Return an array of stored tags\n     *\n     * @return string[] array of stored tags (string)\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getTags",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$result",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_getCollection",99],"(",")",["T_OBJECT_OPERATOR","->",99],["T_STRING","distinct",99],"(",["T_CONSTANT_ENCAPSED_STRING","'tags'",99],")",";",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$result",100],["T_WHITESPACE"," ",100],"?",":",["T_WHITESPACE"," ",100],"[","]",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which match given tags\n     *\n     * In case of multiple tags, a logical AND is made between tags\n     *\n     * @param string[] $tags array of tags\n     * @return string[] array of matching cache ids (string)\n     *\/",103],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getIdsMatchingTags",111],"(",["T_VARIABLE","$tags",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],"[","]",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$query",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_getQueryMatchingTags",113],"(",["T_VARIABLE","$tags",113],",",["T_WHITESPACE"," ",113],["T_STRING","self",113],["T_DOUBLE_COLON","::",113],["T_STRING","COMPARISON_MODE_MATCHING_TAG",113],")",";",["T_WHITESPACE","\n        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_EMPTY","empty",114],"(",["T_VARIABLE","$query",114],")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],"[","]",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$result",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_getCollection",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","find",117],"(",["T_VARIABLE","$query",117],",",["T_WHITESPACE"," ",117],"[",["T_CONSTANT_ENCAPSED_STRING","'_id'",117],"]",")",";",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_STRING","array_keys",118],"(",["T_STRING","iterator_to_array",118],"(",["T_VARIABLE","$result",118],")",")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which don't match given tags\n     *\n     * In case of multiple tags, a logical OR is made between tags\n     *\n     * @param string[] $tags array of tags\n     * @return string[] array of not matching cache ids (string)\n     *\/",121],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","getIdsNotMatchingTags",129],"(",["T_VARIABLE","$tags",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],"[","]",")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$query",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_getQueryMatchingTags",131],"(",["T_VARIABLE","$tags",131],",",["T_WHITESPACE"," ",131],["T_STRING","self",131],["T_DOUBLE_COLON","::",131],["T_STRING","COMPARISON_MODE_NOT_MATCHING_TAG",131],")",";",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_EMPTY","empty",132],"(",["T_VARIABLE","$query",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],"[","]",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$result",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getCollection",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","find",135],"(",["T_VARIABLE","$query",135],",",["T_WHITESPACE"," ",135],"[",["T_CONSTANT_ENCAPSED_STRING","'_id'",135],"]",")",";",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_STRING","array_keys",136],"(",["T_STRING","iterator_to_array",136],"(",["T_VARIABLE","$result",136],")",")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Return an array of stored cache ids which match any given tags\n     *\n     * In case of multiple tags, a logical AND is made between tags\n     *\n     * @param string[] $tags array of tags\n     * @return string[] array of any matching cache ids (string)\n     *\/",139],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getIdsMatchingAnyTags",147],"(",["T_VARIABLE","$tags",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],"[","]",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$query",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_getQueryMatchingTags",149],"(",["T_VARIABLE","$tags",149],",",["T_WHITESPACE"," ",149],["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_STRING","COMPARISON_MODE_MATCHING_ANY_TAG",149],")",";",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_EMPTY","empty",150],"(",["T_VARIABLE","$query",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],"[","]",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$result",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getCollection",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","find",153],"(",["T_VARIABLE","$query",153],",",["T_WHITESPACE"," ",153],"[",["T_CONSTANT_ENCAPSED_STRING","'_id'",153],"]",")",";",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_STRING","array_keys",154],"(",["T_STRING","iterator_to_array",154],"(",["T_VARIABLE","$result",154],")",")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Get query to filter by specified tags and comparison mode\n     *\n     * @param string[] $tags\n     * @param string $comparisonMode\n     * @return array\n     *\/",157],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","_getQueryMatchingTags",164],"(",["T_ARRAY","array",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$tags",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$comparisonMode",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$operators",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],"[",["T_WHITESPACE","\n            ",166],["T_STRING","self",167],["T_DOUBLE_COLON","::",167],["T_STRING","COMPARISON_MODE_MATCHING_TAG",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'$and'",167],",",["T_WHITESPACE","\n            ",167],["T_STRING","self",168],["T_DOUBLE_COLON","::",168],["T_STRING","COMPARISON_MODE_NOT_MATCHING_TAG",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'$nor'",168],",",["T_WHITESPACE","\n            ",168],["T_STRING","self",169],["T_DOUBLE_COLON","::",169],["T_STRING","COMPARISON_MODE_MATCHING_ANY_TAG",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'$or'",169],",",["T_WHITESPACE","\n        ",169],"]",";",["T_WHITESPACE","\n        ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_ISSET","isset",171],"(",["T_VARIABLE","$operators",171],"[",["T_VARIABLE","$comparisonMode",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_NS_SEPARATOR","\\",172],["T_STRING","Zend_Cache",172],["T_DOUBLE_COLON","::",172],["T_STRING","throwException",172],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Incorrect comparison mode specified: ",172],["T_CURLY_OPEN","{",172],["T_VARIABLE","$comparisonMode",172],"}","\"",")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$operator",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$operators",174],"[",["T_VARIABLE","$comparisonMode",174],"]",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$query",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],"[","]",";",["T_WHITESPACE","\n        ",175],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$tags",176],["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$tag",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$query",177],"[",["T_VARIABLE","$operator",177],"]","[","]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],"[",["T_CONSTANT_ENCAPSED_STRING","'tags'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_quoteString",177],"(",["T_VARIABLE","$tag",177],")","]",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$query",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Return the filling percentage of the backend storage\n     *\n     * @return int integer between 0 and 100\n     * TODO: implement basing on info from MongoDB server\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getFillingPercentage",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_LNUMBER","1",190],";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * Return an array of metadatas for the given cache id\n     *\n     * The array must include these keys :\n     * - expire : the expire timestamp\n     * - tags : a string array of tags\n     * - mtime : timestamp of last modification time\n     *\n     * @param string $cacheId cache id\n     * @return array|false array of metadatas (false if the cache id is not found)\n     *\/",193],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","getMetadatas",204],"(",["T_VARIABLE","$cacheId",204],")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$result",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_getCollection",206],"(",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","findOne",206],"(",["T_WHITESPACE","\n            ",206],"[",["T_CONSTANT_ENCAPSED_STRING","'_id'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_quoteString",207],"(",["T_VARIABLE","$cacheId",207],")","]",",",["T_WHITESPACE","\n            ",207],"[",["T_CONSTANT_ENCAPSED_STRING","'expire'",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'tags'",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'mtime'",208],"]",["T_WHITESPACE","\n        ",208],")",";",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$result",210],["T_WHITESPACE"," ",210],["T_IS_IDENTICAL","===",210],["T_WHITESPACE"," ",210],["T_STRING","null",210],["T_WHITESPACE"," ",210],"?",["T_WHITESPACE"," ",210],["T_STRING","false",210],["T_WHITESPACE"," ",210],":",["T_WHITESPACE"," ",210],["T_VARIABLE","$result",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Give (if possible) an extra lifetime to the given cache id\n     *\n     * @param string $cacheId cache id\n     * @param int $extraLifetime\n     * @return boolean true if ok\n     *\/",213],["T_WHITESPACE","\n    ",219],["T_PUBLIC","public",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","touch",220],"(",["T_VARIABLE","$cacheId",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$extraLifetime",220],")",["T_WHITESPACE","\n    ",220],"{",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$time",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","time",222],"(",")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$condition",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],"[",["T_CONSTANT_ENCAPSED_STRING","'_id'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_quoteString",223],"(",["T_VARIABLE","$cacheId",223],")",",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'expire'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],"[",["T_CONSTANT_ENCAPSED_STRING","'$gt'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$time",223],"]","]",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$update",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],"[",["T_CONSTANT_ENCAPSED_STRING","'$set'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$time",224],"]",",",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'$inc'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],"[",["T_CONSTANT_ENCAPSED_STRING","'expire'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_INT_CAST","(int)",224],["T_VARIABLE","$extraLifetime",224],"]","]",";",["T_WHITESPACE","\n        ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_getCollection",225],"(",")",["T_OBJECT_OPERATOR","->",225],["T_STRING","update",225],"(",["T_VARIABLE","$condition",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$update",225],")",";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Return an associative array of capabilities (booleans) of the backend\n     *\n     * The array must include these keys :\n     * - automatic_cleaning (is automating cleaning necessary)\n     * - tags (are tags supported)\n     * - expired_read (is it possible to read expired cache records\n     *                 (for doNotTestCacheValidity option for example))\n     * - priority does the backend deal with priority when saving\n     * - infinite_lifetime (is infinite lifetime can work with this backend)\n     * - get_list (is it possible to get the list of cache ids and the complete list of tags)\n     *\n     * @return array associative of with capabilities\n     *\/",228],["T_WHITESPACE","\n    ",241],["T_PUBLIC","public",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","getCapabilities",242],"(",")",["T_WHITESPACE","\n    ",242],"{",["T_WHITESPACE","\n        ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],"[",["T_WHITESPACE","\n            ",244],["T_CONSTANT_ENCAPSED_STRING","'automatic_cleaning'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_STRING","true",245],",",["T_WHITESPACE","\n            ",245],["T_CONSTANT_ENCAPSED_STRING","'tags'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_STRING","true",246],",",["T_WHITESPACE","\n            ",246],["T_CONSTANT_ENCAPSED_STRING","'expired_read'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_STRING","true",247],",",["T_WHITESPACE","\n            ",247],["T_CONSTANT_ENCAPSED_STRING","'priority'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_STRING","false",248],",",["T_WHITESPACE","\n            ",248],["T_CONSTANT_ENCAPSED_STRING","'infinite_lifetime'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_STRING","true",249],",",["T_WHITESPACE","\n            ",249],["T_CONSTANT_ENCAPSED_STRING","'get_list'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_STRING","true",250],["T_WHITESPACE","\n        ",250],"]",";",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * Test if a cache is available for the given id and (if yes) return it (false else)\n     *\n     * Note : return value is always \"string\" (unserialization is done by the core not by the backend)\n     *\n     * @param  string  $cacheId                     Cache id\n     * @param  boolean $notTestCacheValidity If set to true, the cache validity won't be tested\n     * @return string|bool cached data. Return false if nothing found\n     *\/",254],["T_WHITESPACE","\n    ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","load",263],"(",["T_VARIABLE","$cacheId",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$notTestCacheValidity",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","false",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$query",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],"[",["T_CONSTANT_ENCAPSED_STRING","'_id'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_quoteString",265],"(",["T_VARIABLE","$cacheId",265],")","]",";",["T_WHITESPACE","\n        ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(","!",["T_VARIABLE","$notTestCacheValidity",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$query",267],"[",["T_CONSTANT_ENCAPSED_STRING","'$or'",267],"]",["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],"[",["T_WHITESPACE","\n                ",267],"[",["T_CONSTANT_ENCAPSED_STRING","'expire'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_STRING","self",268],["T_DOUBLE_COLON","::",268],["T_STRING","EXPIRATION_TIME_INFINITE",268],"]",",",["T_WHITESPACE","\n                ",268],"[",["T_CONSTANT_ENCAPSED_STRING","'expire'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],"[",["T_CONSTANT_ENCAPSED_STRING","'$gt'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_STRING","time",269],"(",")","]","]",",",["T_WHITESPACE","\n            ",269],"]",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$result",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_getCollection",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","findOne",272],"(",["T_VARIABLE","$query",272],",",["T_WHITESPACE"," ",272],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",272],"]",")",";",["T_WHITESPACE","\n        ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$result",273],["T_WHITESPACE"," ",273],"?",["T_WHITESPACE"," ",273],["T_VARIABLE","$result",273],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",273],"]",["T_OBJECT_OPERATOR","->",273],["T_STRING","bin",273],["T_WHITESPACE"," ",273],":",["T_WHITESPACE"," ",273],["T_STRING","false",273],";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Test if a cache is available or not (for the given id)\n     *\n     * @param  string $cacheId cache id\n     * @return int|bool \"last modified\" timestamp of the available cache record or false if cache is not available\n     *\/",276],["T_WHITESPACE","\n    ",281],["T_PUBLIC","public",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","test",282],"(",["T_VARIABLE","$cacheId",282],")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$result",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_getCollection",284],"(",")",["T_OBJECT_OPERATOR","->",284],["T_STRING","findOne",284],"(",["T_WHITESPACE","\n            ",284],"[",["T_WHITESPACE","\n                ",285],["T_CONSTANT_ENCAPSED_STRING","'_id'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_quoteString",286],"(",["T_VARIABLE","$cacheId",286],")",",",["T_WHITESPACE","\n                ",286],["T_CONSTANT_ENCAPSED_STRING","'$or'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],"[",["T_WHITESPACE","\n                    ",287],"[",["T_CONSTANT_ENCAPSED_STRING","'expire'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_STRING","self",288],["T_DOUBLE_COLON","::",288],["T_STRING","EXPIRATION_TIME_INFINITE",288],"]",",",["T_WHITESPACE","\n                    ",288],"[",["T_CONSTANT_ENCAPSED_STRING","'expire'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],"[",["T_CONSTANT_ENCAPSED_STRING","'$gt'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_STRING","time",289],"(",")","]","]",",",["T_WHITESPACE","\n                ",289],"]",",",["T_WHITESPACE","\n            ",290],"]",",",["T_WHITESPACE","\n            ",291],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",292],"]",["T_WHITESPACE","\n        ",292],")",";",["T_WHITESPACE","\n        ",293],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$result",294],["T_WHITESPACE"," ",294],"?",["T_WHITESPACE"," ",294],["T_VARIABLE","$result",294],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",294],"]",["T_WHITESPACE"," ",294],":",["T_WHITESPACE"," ",294],["T_STRING","false",294],";",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_DOC_COMMENT","\/**\n     * Save some string data into a cache record\n     *\n     * Note : $data is always \"string\" (serialization is done by the\n     * core not by the backend)\n     *\n     * @param  string $data            Datas to cache\n     * @param  string $cacheId              Cache id\n     * @param  string[] $tags             Array of strings, the cache record will be tagged by each string entry\n     * @param  int|bool $specificLifetime If != false, set a specific lifetime (null => infinite lifetime)\n     * @return boolean true if no problem\n     *\/",297],["T_WHITESPACE","\n    ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","save",309],"(",["T_VARIABLE","$data",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$cacheId",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$tags",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],"[","]",",",["T_WHITESPACE"," ",309],["T_VARIABLE","$specificLifetime",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","false",309],")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$lifetime",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getLifetime",311],"(",["T_VARIABLE","$specificLifetime",311],")",";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$time",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_STRING","time",312],"(",")",";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$expire",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$lifetime",313],["T_WHITESPACE"," ",313],["T_IS_IDENTICAL","===",313],["T_WHITESPACE"," ",313],["T_STRING","null",313],["T_WHITESPACE"," ",313],"?",["T_WHITESPACE"," ",313],["T_STRING","self",313],["T_DOUBLE_COLON","::",313],["T_STRING","EXPIRATION_TIME_INFINITE",313],["T_WHITESPACE"," ",313],":",["T_WHITESPACE"," ",313],["T_VARIABLE","$time",313],["T_WHITESPACE"," ",313],"+",["T_WHITESPACE"," ",313],["T_VARIABLE","$lifetime",313],";",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$tags",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_STRING","array_map",314],"(","[",["T_VARIABLE","$this",314],",",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'_quoteString'",314],"]",",",["T_WHITESPACE"," ",314],["T_VARIABLE","$tags",314],")",";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$document",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],"[",["T_WHITESPACE","\n            ",315],["T_CONSTANT_ENCAPSED_STRING","'_id'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_quoteString",316],"(",["T_VARIABLE","$cacheId",316],")",",",["T_WHITESPACE","\n            ",316],["T_CONSTANT_ENCAPSED_STRING","'data'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_NEW","new",317],["T_WHITESPACE"," ",317],["T_NS_SEPARATOR","\\",317],["T_STRING","MongoBinData",317],"(",["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_quoteString",317],"(",["T_VARIABLE","$data",317],")",",",["T_WHITESPACE"," ",317],["T_NS_SEPARATOR","\\",317],["T_STRING","MongoBinData",317],["T_DOUBLE_COLON","::",317],["T_STRING","BYTE_ARRAY",317],")",",",["T_WHITESPACE","\n            ",317],["T_CONSTANT_ENCAPSED_STRING","'tags'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$tags",318],",",["T_WHITESPACE","\n            ",318],["T_CONSTANT_ENCAPSED_STRING","'mtime'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$time",319],",",["T_WHITESPACE","\n            ",319],["T_CONSTANT_ENCAPSED_STRING","'expire'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$expire",320],",",["T_WHITESPACE","\n        ",320],"]",";",["T_WHITESPACE","\n        ",321],["T_RETURN","return",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_getCollection",322],"(",")",["T_OBJECT_OPERATOR","->",322],["T_STRING","save",322],"(",["T_VARIABLE","$document",322],")",";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n\n    ",323],["T_DOC_COMMENT","\/**\n     * Remove a cache record\n     *\n     * @param  string $cacheId Cache id\n     * @return boolean True if no problem\n     *\/",325],["T_WHITESPACE","\n    ",330],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","remove",331],"(",["T_VARIABLE","$cacheId",331],")",["T_WHITESPACE","\n    ",331],"{",["T_WHITESPACE","\n        ",332],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_getCollection",333],"(",")",["T_OBJECT_OPERATOR","->",333],["T_STRING","remove",333],"(","[",["T_CONSTANT_ENCAPSED_STRING","'_id'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_quoteString",333],"(",["T_VARIABLE","$cacheId",333],")","]",")",";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n\n    ",334],["T_DOC_COMMENT","\/**\n     * Clean some cache records\n     *\n     * Available modes are :\n     * \\Zend_Cache::CLEANING_MODE_ALL (default)    => remove all cache entries ($tags is not used)\n     * \\Zend_Cache::CLEANING_MODE_OLD              => remove too old cache entries ($tags is not used)\n     * \\Zend_Cache::CLEANING_MODE_MATCHING_TAG     => remove cache entries matching all given tags\n     *                                               ($tags can be an array of strings or a single string)\n     * \\Zend_Cache::CLEANING_MODE_NOT_MATCHING_TAG => remove cache entries not {matching one of the given tags}\n     *                                               ($tags can be an array of strings or a single string)\n     * \\Zend_Cache::CLEANING_MODE_MATCHING_ANY_TAG => remove cache entries matching any given tags\n     *                                               ($tags can be an array of strings or a single string)\n     *\n     * @param  string $mode Clean mode\n     * @param  string[] $tags Array of tags\n     * @return bool true if no problem\n     *\/",336],["T_WHITESPACE","\n    ",352],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","clean",353],"(",["T_VARIABLE","$mode",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_NS_SEPARATOR","\\",353],["T_STRING","Zend_Cache",353],["T_DOUBLE_COLON","::",353],["T_STRING","CLEANING_MODE_ALL",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$tags",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],"[","]",")",["T_WHITESPACE","\n    ",353],"{",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$result",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_STRING","false",355],";",["T_WHITESPACE","\n        ",355],["T_SWITCH","switch",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$mode",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n            ",356],["T_CASE","case",357],["T_WHITESPACE"," ",357],["T_NS_SEPARATOR","\\",357],["T_STRING","Zend_Cache",357],["T_DOUBLE_COLON","::",357],["T_STRING","CLEANING_MODE_ALL",357],":",["T_WHITESPACE","\n                ",357],["T_VARIABLE","$result",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_getCollection",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","drop",358],"(",")",";",["T_WHITESPACE","\n                ",358],["T_VARIABLE","$result",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_BOOL_CAST","(bool)",359],["T_VARIABLE","$result",359],"[",["T_CONSTANT_ENCAPSED_STRING","'ok'",359],"]",";",["T_WHITESPACE","\n                ",359],["T_BREAK","break",360],";",["T_WHITESPACE","\n            ",360],["T_CASE","case",361],["T_WHITESPACE"," ",361],["T_NS_SEPARATOR","\\",361],["T_STRING","Zend_Cache",361],["T_DOUBLE_COLON","::",361],["T_STRING","CLEANING_MODE_OLD",361],":",["T_WHITESPACE","\n                ",361],["T_VARIABLE","$query",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],"[",["T_CONSTANT_ENCAPSED_STRING","'expire'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],"[",["T_CONSTANT_ENCAPSED_STRING","'$ne'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_STRING","self",362],["T_DOUBLE_COLON","::",362],["T_STRING","EXPIRATION_TIME_INFINITE",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'$lte'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_STRING","time",362],"(",")","]","]",";",["T_WHITESPACE","\n                ",362],["T_BREAK","break",363],";",["T_WHITESPACE","\n            ",363],["T_CASE","case",364],["T_WHITESPACE"," ",364],["T_NS_SEPARATOR","\\",364],["T_STRING","Zend_Cache",364],["T_DOUBLE_COLON","::",364],["T_STRING","CLEANING_MODE_MATCHING_TAG",364],":",["T_WHITESPACE","\n            ",364],["T_CASE","case",365],["T_WHITESPACE"," ",365],["T_NS_SEPARATOR","\\",365],["T_STRING","Zend_Cache",365],["T_DOUBLE_COLON","::",365],["T_STRING","CLEANING_MODE_NOT_MATCHING_TAG",365],":",["T_WHITESPACE","\n            ",365],["T_CASE","case",366],["T_WHITESPACE"," ",366],["T_NS_SEPARATOR","\\",366],["T_STRING","Zend_Cache",366],["T_DOUBLE_COLON","::",366],["T_STRING","CLEANING_MODE_MATCHING_ANY_TAG",366],":",["T_WHITESPACE","\n                ",366],["T_VARIABLE","$query",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_getQueryMatchingTags",367],"(",["T_ARRAY_CAST","(array)",367],["T_VARIABLE","$tags",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$mode",367],")",";",["T_WHITESPACE","\n                ",367],["T_BREAK","break",368],";",["T_WHITESPACE","\n            ",368],["T_DEFAULT","default",369],":",["T_WHITESPACE","\n                ",369],["T_NS_SEPARATOR","\\",370],["T_STRING","Zend_Cache",370],["T_DOUBLE_COLON","::",370],["T_STRING","throwException",370],"(",["T_CONSTANT_ENCAPSED_STRING","'Unsupported cleaning mode: '",370],["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_VARIABLE","$mode",370],")",";",["T_WHITESPACE","\n        ",370],"}",["T_WHITESPACE","\n        ",371],["T_IF","if",372],["T_WHITESPACE"," ",372],"(","!",["T_EMPTY","empty",372],"(",["T_VARIABLE","$query",372],")",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$result",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_getCollection",373],"(",")",["T_OBJECT_OPERATOR","->",373],["T_STRING","remove",373],"(",["T_VARIABLE","$query",373],")",";",["T_WHITESPACE","\n        ",373],"}",["T_WHITESPACE","\n\n        ",374],["T_RETURN","return",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$result",376],";",["T_WHITESPACE","\n    ",376],"}",["T_WHITESPACE","\n\n    ",377],["T_DOC_COMMENT","\/**\n     * Quote specified value to be used in query as string\n     *\n     * @param string $value\n     * @return string\n     *\/",379],["T_WHITESPACE","\n    ",384],["T_PROTECTED","protected",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","_quoteString",385],"(",["T_VARIABLE","$value",385],")",["T_WHITESPACE","\n    ",385],"{",["T_WHITESPACE","\n        ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_STRING_CAST","(string)",387],["T_VARIABLE","$value",387],";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n",388],"}",["T_WHITESPACE","\n",389]]
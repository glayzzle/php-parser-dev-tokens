[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Setup",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Module",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Dependency",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Parser",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Setup",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Module",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Dependency",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ParserInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Code parser\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Code",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_STRING","ParserInterface",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Declared namespaces\n     *\n     * @var array\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$declaredNamespaces",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Template method. Main algorithm\n     *\n     * {@inheritdoc}\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","parse",27],"(",["T_ARRAY","array",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$options",27],")",["T_WHITESPACE","\n    ",27],"{",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","checkOptions",29],"(",["T_VARIABLE","$options",29],")",";",["T_WHITESPACE","\n\n        ",29],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","declaredNamespaces",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$options",31],"[",["T_CONSTANT_ENCAPSED_STRING","'declared_namespaces'",31],"]",";",["T_WHITESPACE","\n\n        ",31],["T_VARIABLE","$pattern",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'#\\b((?<module>('",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_STRING","implode",33],"(",["T_WHITESPACE","\n            ",33],["T_CONSTANT_ENCAPSED_STRING","'[\\\\\\\\]|'",34],",",["T_WHITESPACE","\n            ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","declaredNamespaces",35],["T_WHITESPACE","\n        ",35],")",["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'[\\\\\\\\])[a-zA-Z0-9]+)[a-zA-Z0-9_\\\\\\\\]*)\\b#'",36],";",["T_WHITESPACE","\n\n        ",36],["T_VARIABLE","$modules",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],"[","]",";",["T_WHITESPACE","\n        ",38],["T_FOREACH","foreach",39],["T_WHITESPACE"," ",39],"(",["T_VARIABLE","$options",39],"[",["T_CONSTANT_ENCAPSED_STRING","'files_for_parse'",39],"]",["T_WHITESPACE"," ",39],["T_AS","as",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$file",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n            ",39],["T_VARIABLE","$content",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","file_get_contents",40],"(",["T_VARIABLE","$file",40],")",";",["T_WHITESPACE","\n            ",40],["T_VARIABLE","$module",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","extractModuleName",41],"(",["T_VARIABLE","$file",41],")",";",["T_WHITESPACE","\n\n            ",41],["T_COMMENT","\/\/ also collect modules without dependencies\n",43],["T_WHITESPACE","            ",44],["T_IF","if",44],["T_WHITESPACE"," ",44],"(","!",["T_ISSET","isset",44],"(",["T_VARIABLE","$modules",44],"[",["T_VARIABLE","$module",44],"]",")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n                ",44],["T_VARIABLE","$modules",45],"[",["T_VARIABLE","$module",45],"]",["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$module",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],"[","]","]",";",["T_WHITESPACE","\n            ",45],"}",["T_WHITESPACE","\n\n            ",46],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_STRING","preg_match_all",48],"(",["T_VARIABLE","$pattern",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$content",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$matches",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n                ",48],["T_VARIABLE","$dependencies",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","array_count_values",49],"(",["T_VARIABLE","$matches",49],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",49],"]",")",";",["T_WHITESPACE","\n                ",49],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$dependencies",50],["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$dependency",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$count",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n                    ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$module",51],["T_WHITESPACE"," ",51],["T_IS_EQUAL","==",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$dependency",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n                        ",51],["T_CONTINUE","continue",52],";",["T_WHITESPACE","\n                    ",52],"}",["T_WHITESPACE","\n                    ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_ISSET","isset",54],"(",["T_VARIABLE","$modules",54],"[",["T_VARIABLE","$module",54],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dependencies'",54],"]","[",["T_VARIABLE","$dependency",54],"]",")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                        ",54],["T_VARIABLE","$modules",55],"[",["T_VARIABLE","$module",55],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dependencies'",55],"]","[",["T_VARIABLE","$dependency",55],"]","[",["T_CONSTANT_ENCAPSED_STRING","'count'",55],"]",["T_WHITESPACE"," ",55],["T_PLUS_EQUAL","+=",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$count",55],";",["T_WHITESPACE","\n                    ",55],"}",["T_WHITESPACE"," ",56],["T_ELSE","else",56],["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n                        ",56],["T_VARIABLE","$modules",57],"[",["T_VARIABLE","$module",57],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dependencies'",57],"]","[",["T_VARIABLE","$dependency",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[",["T_WHITESPACE","\n                            ",57],["T_CONSTANT_ENCAPSED_STRING","'lib'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$dependency",58],",",["T_WHITESPACE","\n                            ",58],["T_CONSTANT_ENCAPSED_STRING","'count'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$count",59],",",["T_WHITESPACE","\n                        ",59],"]",";",["T_WHITESPACE","\n                    ",60],"}",["T_WHITESPACE","\n                ",61],"}",["T_WHITESPACE","\n            ",62],"}",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n        ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$modules",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Template method. Check passed options step\n     *\n     * @param array $options\n     * @return void\n     * @throws \\InvalidArgumentException\n     *\/",68],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","checkOptions",75],"(",["T_VARIABLE","$options",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(","!",["T_ISSET","isset",77],"(",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$options",78],"[",["T_CONSTANT_ENCAPSED_STRING","'files_for_parse'",78],"]",["T_WHITESPACE","\n        ",78],")",["T_WHITESPACE"," ",79],["T_BOOLEAN_OR","||",79],["T_WHITESPACE"," ",79],"!",["T_STRING","is_array",79],"(",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$options",80],"[",["T_CONSTANT_ENCAPSED_STRING","'files_for_parse'",80],"]",["T_WHITESPACE","\n        ",80],")",["T_WHITESPACE"," ",81],["T_BOOLEAN_OR","||",81],["T_WHITESPACE"," ",81],"!",["T_VARIABLE","$options",81],"[",["T_CONSTANT_ENCAPSED_STRING","'files_for_parse'",81],"]",["T_WHITESPACE","\n        ",81],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_THROW","throw",83],["T_WHITESPACE"," ",83],["T_NEW","new",83],["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","InvalidArgumentException",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Parse error: Option \"files_for_parse\" is wrong.'",83],")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(","!",["T_ISSET","isset",86],"(",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$options",87],"[",["T_CONSTANT_ENCAPSED_STRING","'declared_namespaces'",87],"]",["T_WHITESPACE","\n        ",87],")",["T_WHITESPACE"," ",88],["T_BOOLEAN_OR","||",88],["T_WHITESPACE"," ",88],"!",["T_STRING","is_array",88],"(",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$options",89],"[",["T_CONSTANT_ENCAPSED_STRING","'declared_namespaces'",89],"]",["T_WHITESPACE","\n        ",89],")",["T_WHITESPACE"," ",90],["T_BOOLEAN_OR","||",90],["T_WHITESPACE"," ",90],"!",["T_VARIABLE","$options",90],"[",["T_CONSTANT_ENCAPSED_STRING","'declared_namespaces'",90],"]",["T_WHITESPACE","\n        ",90],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_THROW","throw",92],["T_WHITESPACE"," ",92],["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_NS_SEPARATOR","\\",92],["T_STRING","InvalidArgumentException",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Parse error: Option \"declared_namespaces\" is wrong.'",92],")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Extract module name form file path\n     *\n     * @param string $file\n     * @return string\n     *\/",96],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","extractModuleName",102],"(",["T_VARIABLE","$file",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$pattern",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'#code\/(?<namespace>'",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","declaredNamespaces",104],"[",["T_LNUMBER","0",104],"]",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","')[\/_\\\\\\\\]?(?<module>[^\/]+)\/#'",104],";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_STRING","preg_match",105],"(",["T_VARIABLE","$pattern",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$file",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$matches",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$matches",106],"[",["T_CONSTANT_ENCAPSED_STRING","'namespace'",106],"]",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_VARIABLE","$matches",106],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",106],"]",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","''",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n",109],"}",["T_WHITESPACE","\n",110]]
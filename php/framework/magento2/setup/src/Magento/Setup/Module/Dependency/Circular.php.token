[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Setup",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Module",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Dependency",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Graph",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Build circular dependencies by modules map\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Circular",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Map where the key is the vertex and the value are the adjacent vertices(dependencies) of this vertex\n     *\n     * @var array\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$dependencies",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],"[","]",";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Modules circular dependencies map\n     *\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$circularDependencies",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[","]",";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Graph object\n     *\n     * @var \\Magento\\Framework\\Data\\Graph\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$graph",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Build modules dependencies\n     *\n     * @param array $dependencies Key is the vertex and the value are the adjacent vertices(dependencies) of this vertex\n     * @return array\n     *\/",36],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","buildCircularDependencies",42],"(",["T_VARIABLE","$dependencies",42],")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","init",44],"(",["T_VARIABLE","$dependencies",44],")",";",["T_WHITESPACE","\n\n        ",44],["T_FOREACH","foreach",46],["T_WHITESPACE"," ",46],"(",["T_STRING","array_keys",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","dependencies",46],")",["T_WHITESPACE"," ",46],["T_AS","as",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$vertex",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","expandDependencies",47],"(",["T_VARIABLE","$vertex",47],")",";",["T_WHITESPACE","\n        ",47],"}",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$circulars",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","graph",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","findCycle",50],"(",["T_STRING","null",50],",",["T_WHITESPACE"," ",50],["T_STRING","false",50],")",";",["T_WHITESPACE","\n        ",50],["T_FOREACH","foreach",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$circulars",51],["T_WHITESPACE"," ",51],["T_AS","as",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$circular",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_STRING","array_shift",52],"(",["T_VARIABLE","$circular",52],")",";",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","buildCircular",53],"(",["T_VARIABLE","$circular",53],")",";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","divideByModules",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","circularDependencies",56],")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Init data before building\n     *\n     * @param array $dependencies\n     * @return void\n     *\/",59],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","init",65],"(",["T_VARIABLE","$dependencies",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","dependencies",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$dependencies",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","circularDependencies",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],"[","]",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","graph",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STRING","Graph",69],"(",["T_STRING","array_keys",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","dependencies",69],")",",",["T_WHITESPACE"," ",69],"[","]",")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Expand modules dependencies from chain\n     *\n     * @param string $vertex\n     * @param array $path nesting path\n     * @return void\n     *\/",72],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","expandDependencies",79],"(",["T_VARIABLE","$vertex",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$path",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[","]",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","dependencies",81],"[",["T_VARIABLE","$vertex",81],"]",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_RETURN","return",82],";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$path",85],"[","]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$vertex",85],";",["T_WHITESPACE","\n        ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","dependencies",86],"[",["T_VARIABLE","$vertex",86],"]",["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$dependency",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_ISSET","isset",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","dependencies",87],"[",["T_VARIABLE","$dependency",87],"]",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                ",87],["T_COMMENT","\/\/ dependency vertex is not described in basic definition\n",88],["T_WHITESPACE","                ",89],["T_CONTINUE","continue",89],";",["T_WHITESPACE","\n            ",89],"}",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$relations",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","graph",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getRelations",91],"(",")",";",["T_WHITESPACE","\n            ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_ISSET","isset",92],"(",["T_VARIABLE","$relations",92],"[",["T_VARIABLE","$vertex",92],"]","[",["T_VARIABLE","$dependency",92],"]",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                ",92],["T_CONTINUE","continue",93],";",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","graph",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","addRelation",95],"(",["T_VARIABLE","$vertex",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$dependency",95],")",";",["T_WHITESPACE","\n\n            ",95],["T_VARIABLE","$searchResult",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","array_search",97],"(",["T_VARIABLE","$dependency",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$path",97],")",";",["T_WHITESPACE","\n\n            ",97],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_STRING","false",99],["T_WHITESPACE"," ",99],["T_IS_NOT_IDENTICAL","!==",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$searchResult",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","buildCircular",100],"(",["T_STRING","array_slice",100],"(",["T_VARIABLE","$path",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$searchResult",100],")",")",";",["T_WHITESPACE","\n                ",100],["T_BREAK","break",101],";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE"," ",102],["T_ELSE","else",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","expandDependencies",103],"(",["T_VARIABLE","$dependency",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$path",103],")",";",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Build all circular dependencies based on chain\n     *\n     * @param array $modules\n     * @return void\n     *\/",108],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","buildCircular",114],"(",["T_VARIABLE","$modules",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$path",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'\/'",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_STRING","implode",116],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$modules",116],")",";",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_ISSET","isset",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","circularDependencies",117],"[",["T_VARIABLE","$path",117],"]",")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_RETURN","return",118],";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","circularDependencies",120],"[",["T_VARIABLE","$path",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$modules",120],";",["T_WHITESPACE","\n        ",120],["T_STRING","array_push",121],"(",["T_VARIABLE","$modules",121],",",["T_WHITESPACE"," ",121],["T_STRING","array_shift",121],"(",["T_VARIABLE","$modules",121],")",")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","buildCircular",122],"(",["T_VARIABLE","$modules",122],")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Divide dependencies by modules\n     *\n     * @param array $circularDependencies\n     * @return array\n     *\/",125],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","divideByModules",131],"(",["T_VARIABLE","$circularDependencies",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$dependenciesByModule",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],"[","]",";",["T_WHITESPACE","\n        ",133],["T_FOREACH","foreach",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$circularDependencies",134],["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$circularDependency",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$module",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$circularDependency",135],"[",["T_LNUMBER","0",135],"]",";",["T_WHITESPACE","\n            ",135],["T_STRING","array_push",136],"(",["T_VARIABLE","$circularDependency",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$module",136],")",";",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$dependenciesByModule",137],"[",["T_VARIABLE","$module",137],"]","[","]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$circularDependency",137],";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$dependenciesByModule",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n",141],"}",["T_WHITESPACE","\n",142]]
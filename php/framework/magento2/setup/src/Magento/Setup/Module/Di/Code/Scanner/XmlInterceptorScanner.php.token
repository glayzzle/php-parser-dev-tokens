[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Setup",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Module",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Di",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Code",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Scanner",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","XmlInterceptorScanner",8],["T_WHITESPACE"," ",8],["T_IMPLEMENTS","implements",8],["T_WHITESPACE"," ",8],["T_STRING","ScannerInterface",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * Get array of interceptor class names\n     *\n     * @param array $files\n     * @return array\n     *\/",10],["T_WHITESPACE","\n    ",15],["T_PUBLIC","public",16],["T_WHITESPACE"," ",16],["T_FUNCTION","function",16],["T_WHITESPACE"," ",16],["T_STRING","collectEntities",16],"(",["T_ARRAY","array",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$files",16],")",["T_WHITESPACE","\n    ",16],"{",["T_WHITESPACE","\n        ",17],["T_VARIABLE","$output",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],"[","]",";",["T_WHITESPACE","\n        ",18],["T_FOREACH","foreach",19],["T_WHITESPACE"," ",19],"(",["T_VARIABLE","$files",19],["T_WHITESPACE"," ",19],["T_AS","as",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$file",19],")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n            ",19],["T_VARIABLE","$output",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_STRING","array_merge",20],"(",["T_VARIABLE","$output",20],",",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","_collectEntitiesFromString",20],"(",["T_STRING","file_get_contents",20],"(",["T_VARIABLE","$file",20],")",")",")",";",["T_WHITESPACE","\n        ",20],"}",["T_WHITESPACE","\n        ",21],["T_VARIABLE","$output",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_STRING","array_unique",22],"(",["T_VARIABLE","$output",22],")",";",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$output",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","_filterEntities",23],"(",["T_VARIABLE","$output",23],")",";",["T_WHITESPACE","\n        ",23],["T_RETURN","return",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$output",24],";",["T_WHITESPACE","\n    ",24],"}",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Collect entities from XML string\n     *\n     *\n     * @param string $content\n     * @return array\n     *\/",27],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","_collectEntitiesFromString",34],"(",["T_VARIABLE","$content",34],")",["T_WHITESPACE","\n    ",34],"{",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$output",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],"[","]",";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$dom",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_NS_SEPARATOR","\\",37],["T_STRING","DOMDocument",37],"(",")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$dom",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","loadXML",38],"(",["T_VARIABLE","$content",38],")",";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$xpath",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NEW","new",39],["T_WHITESPACE"," ",39],["T_NS_SEPARATOR","\\",39],["T_STRING","DOMXPath",39],"(",["T_VARIABLE","$dom",39],")",";",["T_WHITESPACE","\n        ",39],["T_DOC_COMMENT","\/** @var $entityNode \\DOMNode *\/",40],["T_WHITESPACE","\n        ",40],["T_FOREACH","foreach",41],["T_WHITESPACE"," ",41],"(",["T_VARIABLE","$xpath",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","query",41],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/type[plugin]|\/\/virtualType[plugin]'",41],")",["T_WHITESPACE"," ",41],["T_AS","as",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$entityNode",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n            ",41],["T_VARIABLE","$attributes",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$entityNode",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","attributes",42],";",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$type",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$attributes",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getNamedItem",43],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",43],")",";",["T_WHITESPACE","\n            ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$type",44],["T_WHITESPACE"," ",44],["T_IS_NOT_IDENTICAL","!==",44],["T_WHITESPACE"," ",44],["T_STRING","null",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n                ",44],["T_STRING","array_push",45],"(",["T_VARIABLE","$output",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$type",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","nodeValue",45],")",";",["T_WHITESPACE","\n            ",45],"}",["T_WHITESPACE"," ",46],["T_ELSE","else",46],["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n                ",46],["T_STRING","array_push",47],"(",["T_VARIABLE","$output",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$attributes",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getNamedItem",47],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",47],")",["T_OBJECT_OPERATOR","->",47],["T_STRING","nodeValue",47],")",";",["T_WHITESPACE","\n            ",47],"}",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n        ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$output",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Filter found entities if needed\n     *\n     * @param array $output\n     * @return array\n     *\/",53],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","_filterEntities",59],"(",["T_ARRAY","array",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$output",59],")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$filteredEntities",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],"[","]",";",["T_WHITESPACE","\n        ",61],["T_FOREACH","foreach",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$output",62],["T_WHITESPACE"," ",62],["T_AS","as",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$entityName",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_COMMENT","\/\/ @todo the controller handling logic below must be removed when controllers become PSR-0 compliant\n",63],["T_WHITESPACE","            ",64],["T_VARIABLE","$controllerSuffix",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Controller'",64],";",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$pathParts",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","explode",65],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$entityName",65],")",";",["T_WHITESPACE","\n            ",65],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_STRING","strrpos",66],"(",["T_WHITESPACE","\n                ",66],["T_VARIABLE","$entityName",67],",",["T_WHITESPACE","\n                ",67],["T_VARIABLE","$controllerSuffix",68],["T_WHITESPACE","\n            ",68],")",["T_WHITESPACE"," ",69],["T_IS_IDENTICAL","===",69],["T_WHITESPACE"," ",69],["T_STRING","strlen",69],"(",["T_WHITESPACE","\n                ",69],["T_VARIABLE","$entityName",70],["T_WHITESPACE","\n            ",70],")",["T_WHITESPACE"," ",71],"-",["T_WHITESPACE"," ",71],["T_STRING","strlen",71],"(",["T_WHITESPACE","\n                ",71],["T_VARIABLE","$controllerSuffix",72],["T_WHITESPACE","\n            ",72],")",["T_WHITESPACE"," ",73],["T_BOOLEAN_AND","&&",73],["T_WHITESPACE"," ",73],["T_ISSET","isset",73],"(",["T_WHITESPACE","\n                ",73],["T_VARIABLE","$pathParts",74],"[",["T_LNUMBER","2",74],"]",["T_WHITESPACE","\n            ",74],")",["T_WHITESPACE"," ",75],["T_BOOLEAN_AND","&&",75],["T_WHITESPACE"," ",75],"!",["T_STRING","in_array",75],"(",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$pathParts",76],"[",["T_LNUMBER","2",76],"]",",",["T_WHITESPACE","\n                ",76],"[",["T_CONSTANT_ENCAPSED_STRING","'Block'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'Helper'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'Model'",77],"]",["T_WHITESPACE","\n            ",77],")",["T_WHITESPACE","\n            ",78],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_handleControllerClassName",80],"(",["T_VARIABLE","$entityName",80],")",";",["T_WHITESPACE","\n            ",80],"}",["T_WHITESPACE","\n            ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_STRING","class_exists",82],"(",["T_VARIABLE","$entityName",82],")",["T_WHITESPACE"," ",82],["T_BOOLEAN_OR","||",82],["T_WHITESPACE"," ",82],["T_STRING","interface_exists",82],"(",["T_VARIABLE","$entityName",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_STRING","array_push",83],"(",["T_VARIABLE","$filteredEntities",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$entityName",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\\\\Interceptor'",83],")",";",["T_WHITESPACE","\n            ",83],"}",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$filteredEntities",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Include file with controller declaration if needed\n     *\n     * @param string $className\n     * @return void\n     *\/",89],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","_handleControllerClassName",95],"(",["T_VARIABLE","$className",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_STRING","class_exists",97],"(",["T_VARIABLE","$className",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$className",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","preg_replace",98],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^a-zA-Z0-9_]\/'",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","''",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$className",98],")",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$className",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","preg_replace",99],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^([0-9A-Za-z]*)_([0-9A-Za-z]*)\/'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'\\\\1_\\\\2_controllers'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$className",99],")",";",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$filePath",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","stream_resolve_include_path",100],"(",["T_STRING","str_replace",100],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'\/'",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$className",100],")",["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'.php'",100],")",";",["T_WHITESPACE","\n            ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_STRING","file_exists",101],"(",["T_VARIABLE","$filePath",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_REQUIRE_ONCE","require_once",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$filePath",102],";",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n",105],"}",["T_WHITESPACE","\n",106]]
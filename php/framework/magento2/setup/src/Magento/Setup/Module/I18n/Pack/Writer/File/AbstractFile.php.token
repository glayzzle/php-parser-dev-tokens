[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Setup",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Module",6],["T_NS_SEPARATOR","\\",6],["T_STRING","I18n",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Pack",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Writer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","File",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Setup",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Module",8],["T_NS_SEPARATOR","\\",8],["T_STRING","I18n",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Context",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Setup",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Module",9],["T_NS_SEPARATOR","\\",9],["T_STRING","I18n",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Dictionary",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Setup",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Module",10],["T_NS_SEPARATOR","\\",10],["T_STRING","I18n",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Factory",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Setup",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Module",11],["T_NS_SEPARATOR","\\",11],["T_STRING","I18n",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Locale",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Setup",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Module",12],["T_NS_SEPARATOR","\\",12],["T_STRING","I18n",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Pack",12],["T_NS_SEPARATOR","\\",12],["T_STRING","WriterInterface",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Abstract pack writer\n *\/",14],["T_WHITESPACE","\n",16],["T_ABSTRACT","abstract",17],["T_WHITESPACE"," ",17],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","AbstractFile",17],["T_WHITESPACE"," ",17],["T_IMPLEMENTS","implements",17],["T_WHITESPACE"," ",17],["T_STRING","WriterInterface",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * Context\n     *\n     * @var \\Magento\\Setup\\Module\\I18n\\Context\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_context",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Dictionary loader. This object is need for read dictionary for merge mode\n     *\n     * @var \\Magento\\Setup\\Module\\I18n\\Dictionary\\Loader\\FileInterface\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_dictionaryLoader",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Domain abstract factory\n     *\n     * @var \\Magento\\Setup\\Module\\I18n\\Factory\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_factory",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Locale\n     *\n     * @var \\Magento\\Setup\\Module\\I18n\\Locale\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_locale",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Save mode. One of const of WriterInterface::MODE_\n     *\n     * @var string\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_mode",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Writer construct\n     *\n     * @param Context $context\n     * @param Dictionary\\Loader\\FileInterface $dictionaryLoader\n     * @param Factory $factory\n     *\/",54],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","__construct",61],"(",["T_STRING","Context",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$context",61],",",["T_WHITESPACE"," ",61],["T_STRING","Dictionary",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Loader",61],["T_NS_SEPARATOR","\\",61],["T_STRING","FileInterface",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$dictionaryLoader",61],",",["T_WHITESPACE"," ",61],["T_STRING","Factory",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$factory",61],")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_context",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$context",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_dictionaryLoader",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$dictionaryLoader",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_factory",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$factory",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","write",71],"(",["T_STRING","Dictionary",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$dictionary",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$packPath",71],",",["T_WHITESPACE"," ",71],["T_STRING","Locale",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$locale",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$mode",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","self",71],["T_DOUBLE_COLON","::",71],["T_STRING","MODE_REPLACE",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","writeDictionary",73],"(",["T_VARIABLE","$dictionary",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$locale",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$mode",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","writeDictionary",79],"(",["T_STRING","Dictionary",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$dictionary",79],",",["T_WHITESPACE"," ",79],["T_STRING","Locale",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$locale",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$mode",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","self",79],["T_DOUBLE_COLON","::",79],["T_STRING","MODE_REPLACE",79],")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_locale",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$locale",81],";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_mode",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$mode",82],";",["T_WHITESPACE","\n\n        ",82],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_buildPackFilesData",84],"(",["T_VARIABLE","$dictionary",84],")",["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$file",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$phrases",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_createDirectoryIfNotExist",85],"(",["T_STRING","dirname",85],"(",["T_VARIABLE","$file",85],")",")",";",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_writeFile",86],"(",["T_VARIABLE","$file",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$phrases",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Create one pack file. Template method\n     *\n     * @param string $file\n     * @param array $phrases\n     * @return void\n     * @throws \\RuntimeException\n     *\/",90],["T_WHITESPACE","\n    ",97],["T_ABSTRACT","abstract",98],["T_WHITESPACE"," ",98],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","_writeFile",98],"(",["T_VARIABLE","$file",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$phrases",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Build pack files data\n     *\n     * @param Dictionary $dictionary\n     * @return array\n     * @throws \\RuntimeException\n     *\/",100],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","_buildPackFilesData",107],"(",["T_STRING","Dictionary",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$dictionary",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$files",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],"[","]",";",["T_WHITESPACE","\n        ",109],["T_FOREACH","foreach",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$dictionary",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getPhrases",110],"(",")",["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$key",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$phrase",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(","!",["T_VARIABLE","$phrase",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getContextType",111],"(",")",["T_WHITESPACE"," ",111],["T_BOOLEAN_OR","||",111],["T_WHITESPACE"," ",111],"!",["T_VARIABLE","$phrase",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getContextValue",111],"(",")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_THROW","throw",112],["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_NS_SEPARATOR","\\",112],["T_STRING","RuntimeException",112],"(",["T_WHITESPACE","\n                    ",112],["T_STRING","sprintf",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Missed context in row #%d.'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$key",113],["T_WHITESPACE"," ",113],"+",["T_WHITESPACE"," ",113],["T_LNUMBER","1",113],")",["T_WHITESPACE","\n                    ",113],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",114],["T_WHITESPACE","\n                    ",114],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Each row has to consist of 4 columns: original phrase, translation, context type, context value'",115],["T_WHITESPACE","\n                ",115],")",";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n            ",117],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$phrase",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getContextValue",118],"(",")",["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$context",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_TRY","try",119],["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                    ",119],["T_VARIABLE","$path",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_context",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","buildPathToLocaleDirectoryByContext",120],"(",["T_VARIABLE","$phrase",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getContextType",120],"(",")",",",["T_WHITESPACE"," ",120],["T_VARIABLE","$context",120],")",";",["T_WHITESPACE","\n                ",120],"}",["T_WHITESPACE"," ",121],["T_CATCH","catch",121],["T_WHITESPACE"," ",121],"(",["T_NS_SEPARATOR","\\",121],["T_STRING","InvalidArgumentException",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$e",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                    ",121],["T_THROW","throw",122],["T_WHITESPACE"," ",122],["T_NEW","new",122],["T_WHITESPACE"," ",122],["T_NS_SEPARATOR","\\",122],["T_STRING","InvalidArgumentException",122],"(",["T_VARIABLE","$e",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getMessage",122],"(",")",["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","' Row #'",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$key",122],["T_WHITESPACE"," ",122],"+",["T_WHITESPACE"," ",122],["T_LNUMBER","1",122],")",["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'.'",122],")",";",["T_WHITESPACE","\n                ",122],"}",["T_WHITESPACE","\n\n                ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_STRING","null",125],["T_WHITESPACE"," ",125],["T_IS_IDENTICAL","===",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$path",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                    ",125],["T_CONTINUE","continue",126],";",["T_WHITESPACE","\n                ",126],"}",["T_WHITESPACE","\n\n                ",127],["T_VARIABLE","$filename",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$path",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_locale",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'.'",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_getFileExtension",129],"(",")",";",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$files",130],"[",["T_VARIABLE","$filename",130],"]","[",["T_VARIABLE","$phrase",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getPhrase",130],"(",")","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$phrase",130],";",["T_WHITESPACE","\n            ",130],"}",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$files",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Get file extension\n     *\n     * @return string\n     *\/",136],["T_WHITESPACE","\n    ",140],["T_ABSTRACT","abstract",141],["T_WHITESPACE"," ",141],["T_PROTECTED","protected",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","_getFileExtension",141],"(",")",";",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Create directory if not exists\n     *\n     * @param string $destinationPath\n     * @param int $mode\n     * @param bool $recursive Allows the creation of nested directories specified in the $destinationPath\n     * @return void\n     *\/",143],["T_WHITESPACE","\n    ",150],["T_PROTECTED","protected",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","_createDirectoryIfNotExist",151],"(",["T_VARIABLE","$destinationPath",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$mode",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_LNUMBER","0777",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$recursive",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","true",151],")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(","!",["T_STRING","is_dir",153],"(",["T_VARIABLE","$destinationPath",153],")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_STRING","mkdir",154],"(",["T_VARIABLE","$destinationPath",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$mode",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$recursive",154],")",";",["T_WHITESPACE","\n            ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$mode",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                ",155],["T_STRING","chmod",156],"(",["T_VARIABLE","$destinationPath",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$mode",156],")",";",["T_WHITESPACE","\n            ",156],"}",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n",159],"}",["T_WHITESPACE","\n",160]]
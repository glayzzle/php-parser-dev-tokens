[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Setup",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Composer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MagentoComposerApplication",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Composer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RequireUpdateDryRunCommand",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Filesystem",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DirectoryList",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Composer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ComposerJsonFinder",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Composer",12],["T_NS_SEPARATOR","\\",12],["T_STRING","MagentoComposerApplicationFactory",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Filesystem",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Driver",13],["T_NS_SEPARATOR","\\",13],["T_STRING","File",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * This class checks for dependencies between components after an upgrade. It is used in readiness check.\n *\/",15],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","DependencyReadinessCheck",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * @var ComposerJsonFinder\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$composerJsonFinder",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var DirectoryList\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$directoryList",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var RequireUpdateDryRunCommand\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$requireUpdateDryRunCommand",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var File\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$file",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var MagentoComposerApplication\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PRIVATE","private",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$magentoComposerApplication",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param ComposerJsonFinder $composerJsonFinder\n     * @param DirectoryList $directoryList\n     * @param File $file\n     * @param MagentoComposerApplicationFactory $composerAppFactory\n     *\/",45],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","__construct",53],"(",["T_WHITESPACE","\n        ",53],["T_STRING","ComposerJsonFinder",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$composerJsonFinder",54],",",["T_WHITESPACE","\n        ",54],["T_STRING","DirectoryList",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$directoryList",55],",",["T_WHITESPACE","\n        ",55],["T_STRING","File",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$file",56],",",["T_WHITESPACE","\n        ",56],["T_STRING","MagentoComposerApplicationFactory",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$composerAppFactory",57],["T_WHITESPACE","\n    ",57],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","composerJsonFinder",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$composerJsonFinder",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","directoryList",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$directoryList",60],";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","file",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$file",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","requireUpdateDryRunCommand",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$composerAppFactory",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","createRequireUpdateDryRunCommand",62],"(",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","magentoComposerApplication",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$composerAppFactory",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","create",63],"(",")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Run Composer dependency check\n     *\n     * @param array $packages\n     * @return array\n     * @throws \\Exception\n     *\/",66],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","runReadinessCheck",73],"(",["T_ARRAY","array",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$packages",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$composerJson",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","composerJsonFinder",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","findComposerJson",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","file",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","copy",76],"(",["T_VARIABLE","$composerJson",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","directoryList",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getPath",76],"(",["T_STRING","DirectoryList",76],["T_DOUBLE_COLON","::",76],["T_STRING","VAR_DIR",76],")",["T_WHITESPACE"," ",76],".",["T_WHITESPACE","  ",76],["T_CONSTANT_ENCAPSED_STRING","'\/composer.json'",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$workingDir",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","directoryList",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getPath",77],"(",["T_STRING","DirectoryList",77],["T_DOUBLE_COLON","::",77],["T_STRING","VAR_DIR",77],")",";",["T_WHITESPACE","\n        ",77],["T_TRY","try",78],["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_FOREACH","foreach",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$packages",79],["T_WHITESPACE"," ",79],["T_AS","as",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$package",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n                ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_STRING","strpos",80],"(",["T_VARIABLE","$package",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'magento\/product-enterprise-edition'",80],")",["T_WHITESPACE"," ",80],["T_IS_NOT_IDENTICAL","!==",80],["T_WHITESPACE"," ",80],["T_STRING","false",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","magentoComposerApplication",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","runComposerCommand",81],"(",["T_WHITESPACE","\n                        ",81],"[",["T_WHITESPACE","\n                            ",82],["T_CONSTANT_ENCAPSED_STRING","'command'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'remove'",83],",",["T_WHITESPACE","\n                            ",83],["T_CONSTANT_ENCAPSED_STRING","'packages'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'magento\/product-community-edition'",84],"]",",",["T_WHITESPACE","\n                            ",84],["T_CONSTANT_ENCAPSED_STRING","'--no-update'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_STRING","true",85],["T_WHITESPACE","\n                        ",85],"]",",",["T_WHITESPACE","\n                        ",86],["T_VARIABLE","$workingDir",87],["T_WHITESPACE","\n                    ",87],")",";",["T_WHITESPACE","\n                ",88],"}",["T_WHITESPACE","\n            ",89],"}",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","requireUpdateDryRunCommand",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","run",91],"(",["T_VARIABLE","$packages",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$workingDir",91],")",";",["T_WHITESPACE","\n            ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_STRING","true",92],"]",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE"," ",93],["T_CATCH","catch",93],["T_WHITESPACE"," ",93],"(",["T_NS_SEPARATOR","\\",93],["T_STRING","RuntimeException",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$e",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$message",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","str_replace",94],"(",["T_STRING","PHP_EOL",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'<br\/>'",94],",",["T_WHITESPACE"," ",94],["T_STRING","htmlspecialchars",94],"(",["T_VARIABLE","$e",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getMessage",94],"(",")",")",")",";",["T_WHITESPACE","\n            ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_STRING","false",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'error'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$message",95],"]",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n",97],"}",["T_WHITESPACE","\n",98]]
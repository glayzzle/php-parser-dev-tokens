[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Setup",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unit",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Setup",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AdminAccount",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","AdminAccountTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PHPUnit_Framework_TestCase",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Setup\\Module\\Setup\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PRIVATE","private",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$setUpMock",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Framework\\DB\\Adapter\\Pdo\\Mysql\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$dbAdapterMock",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject|\\Magento\\Framework\\Encryption\\EncryptorInterface\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$encryptor",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var AdminAccount\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$adminAccount",31],";",["T_WHITESPACE","\n\n    ",31],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","setUpMock",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getMock",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Setup",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Module",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Setup",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],",",["T_WHITESPACE"," ",35],"[","]",",",["T_WHITESPACE"," ",35],"[","]",",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","''",35],",",["T_WHITESPACE"," ",35],["T_STRING","false",35],")",";",["T_WHITESPACE","\n\n        ",35],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","dbAdapterMock",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getMock",37],"(",["T_NS_SEPARATOR","\\",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Framework",37],["T_NS_SEPARATOR","\\",37],["T_STRING","DB",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Adapter",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Pdo",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Mysql",37],["T_DOUBLE_COLON","::",37],["T_CLASS","class",37],",",["T_WHITESPACE"," ",37],"[","]",",",["T_WHITESPACE"," ",37],"[","]",",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","''",37],",",["T_WHITESPACE"," ",37],["T_STRING","false",37],")",";",["T_WHITESPACE","\n\n        ",37],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","setUpMock",39],["T_WHITESPACE","\n            ",39],["T_OBJECT_OPERATOR","->",40],["T_STRING","expects",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","any",40],"(",")",")",["T_WHITESPACE","\n            ",40],["T_OBJECT_OPERATOR","->",41],["T_STRING","method",41],"(",["T_CONSTANT_ENCAPSED_STRING","'getConnection'",41],")",["T_WHITESPACE","\n            ",41],["T_OBJECT_OPERATOR","->",42],["T_STRING","will",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","returnValue",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","dbAdapterMock",42],")",")",";",["T_WHITESPACE","\n\n        ",42],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","setUpMock",44],["T_WHITESPACE","\n            ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","expects",45],"(",["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","any",45],"(",")",")",["T_WHITESPACE","\n            ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","method",46],"(",["T_CONSTANT_ENCAPSED_STRING","'getTable'",46],")",["T_WHITESPACE","\n            ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","will",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","returnCallback",47],"(",["T_WHITESPACE","\n                ",47],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$table",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n                    ",48],["T_RETURN","return",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$table",49],";",["T_WHITESPACE","\n                ",49],"}",["T_WHITESPACE","\n            ",50],")",")",";",["T_WHITESPACE","\n\n        ",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","encryptor",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getMockBuilder",53],"(",["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Framework",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Encryption",53],["T_NS_SEPARATOR","\\",53],["T_STRING","EncryptorInterface",53],["T_DOUBLE_COLON","::",53],["T_CLASS","class",53],")",["T_WHITESPACE","\n            ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","getMockForAbstractClass",54],"(",")",";",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$data",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[",["T_WHITESPACE","\n            ",56],["T_STRING","AdminAccount",57],["T_DOUBLE_COLON","::",57],["T_STRING","KEY_FIRST_NAME",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'John'",57],",",["T_WHITESPACE","\n            ",57],["T_STRING","AdminAccount",58],["T_DOUBLE_COLON","::",58],["T_STRING","KEY_LAST_NAME",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Doe'",58],",",["T_WHITESPACE","\n            ",58],["T_STRING","AdminAccount",59],["T_DOUBLE_COLON","::",59],["T_STRING","KEY_EMAIL",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'john.doe@test.com'",59],",",["T_WHITESPACE","\n            ",59],["T_STRING","AdminAccount",60],["T_DOUBLE_COLON","::",60],["T_STRING","KEY_PASSWORD",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'123123q'",60],",",["T_WHITESPACE","\n            ",60],["T_STRING","AdminAccount",61],["T_DOUBLE_COLON","::",61],["T_STRING","KEY_USER",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'admin'",61],",",["T_WHITESPACE","\n        ",61],"]",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","adminAccount",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_NEW","new",64],["T_WHITESPACE"," ",64],["T_STRING","AdminAccount",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setUpMock",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","encryptor",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$data",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","testSaveUserExistsAdminRoleExists",67],"(",")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_COMMENT","\/\/ existing user data\n",69],["T_WHITESPACE","        ",70],["T_VARIABLE","$existingUserData",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"[",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'email'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'john.doe@test.com'",71],",",["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'username'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'admin'",72],",",["T_WHITESPACE","\n            ",72],["T_CONSTANT_ENCAPSED_STRING","'user_id'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_LNUMBER","1",73],",",["T_WHITESPACE","\n        ",73],"]",";",["T_WHITESPACE","\n\n        ",74],["T_COMMENT","\/\/ existing admin role data\n",76],["T_WHITESPACE","        ",77],["T_VARIABLE","$existingAdminRoleData",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],"[",["T_WHITESPACE","\n            ",77],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",78],["T_WHITESPACE","  ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],",",["T_WHITESPACE","\n            ",78],["T_CONSTANT_ENCAPSED_STRING","'tree_level'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_LNUMBER","2",79],",",["T_WHITESPACE","\n            ",79],["T_CONSTANT_ENCAPSED_STRING","'role_type'",80],["T_WHITESPACE","  ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'U'",80],",",["T_WHITESPACE","\n            ",80],["T_CONSTANT_ENCAPSED_STRING","'user_id'",81],["T_WHITESPACE","    ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],",",["T_WHITESPACE","\n            ",81],["T_CONSTANT_ENCAPSED_STRING","'user_type'",82],["T_WHITESPACE","  ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_LNUMBER","2",82],",",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'role_name'",83],["T_WHITESPACE","  ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'admin'",83],",",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","'role_id'",84],["T_WHITESPACE","    ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_LNUMBER","1",84],",",["T_WHITESPACE","\n        ",84],"]",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$returnValueMap",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],"[",["T_WHITESPACE","\n            ",87],"[",["T_WHITESPACE","\n                ",88],["T_CONSTANT_ENCAPSED_STRING","'SELECT user_id, username, email FROM admin_user WHERE username = :username OR email = :email'",89],",",["T_WHITESPACE","\n                ",89],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'admin'",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'email'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'john.doe@test.com'",90],"]",",",["T_WHITESPACE","\n                ",90],["T_STRING","null",91],",",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$existingUserData",92],",",["T_WHITESPACE","\n            ",92],"]",",",["T_WHITESPACE","\n            ",93],"[",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM authorization_role WHERE user_id = :user_id AND user_type = :user_type'",95],",",["T_WHITESPACE","\n                ",95],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_LNUMBER","1",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'user_type'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_LNUMBER","2",96],"]",",",["T_WHITESPACE","\n                ",96],["T_STRING","null",97],",",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$existingAdminRoleData",98],",",["T_WHITESPACE","\n            ",98],"]",",",["T_WHITESPACE","\n        ",99],"]",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","dbAdapterMock",101],["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","expects",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","exactly",102],"(",["T_LNUMBER","2",102],")",")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","method",103],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchRow'",103],")",["T_WHITESPACE","\n            ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","will",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","returnValueMap",104],"(",["T_VARIABLE","$returnValueMap",104],")",")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","dbAdapterMock",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","expects",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","once",105],"(",")",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","method",105],"(",["T_CONSTANT_ENCAPSED_STRING","'quoteInto'",105],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","will",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","returnValue",105],"(",["T_CONSTANT_ENCAPSED_STRING","''",105],")",")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","dbAdapterMock",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","expects",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","once",106],"(",")",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","method",106],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",106],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","will",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","returnValue",106],"(",["T_LNUMBER","1",106],")",")",";",["T_WHITESPACE","\n\n        ",106],["T_COMMENT","\/\/ should never insert new row\n",108],["T_WHITESPACE","        ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","dbAdapterMock",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","expects",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","never",109],"(",")",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","method",109],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",109],")",";",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","adminAccount",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","save",111],"(",")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","testSaveUserExistsNewAdminRole",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_COMMENT","\/\/ existing user data\n",116],["T_WHITESPACE","        ",117],["T_VARIABLE","$existingUserData",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],"[",["T_WHITESPACE","\n            ",117],["T_CONSTANT_ENCAPSED_STRING","'email'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'john.doe@test.com'",118],",",["T_WHITESPACE","\n            ",118],["T_CONSTANT_ENCAPSED_STRING","'username'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'admin'",119],",",["T_WHITESPACE","\n            ",119],["T_CONSTANT_ENCAPSED_STRING","'user_id'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_LNUMBER","1",120],",",["T_WHITESPACE","\n        ",120],"]",";",["T_WHITESPACE","\n\n        ",121],["T_COMMENT","\/\/ speical admin role data\n",123],["T_WHITESPACE","        ",124],["T_VARIABLE","$administratorRoleData",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],"[",["T_WHITESPACE","\n            ",124],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",125],["T_WHITESPACE","  ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_LNUMBER","0",125],",",["T_WHITESPACE","\n            ",125],["T_CONSTANT_ENCAPSED_STRING","'tree_level'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_LNUMBER","1",126],",",["T_WHITESPACE","\n            ",126],["T_CONSTANT_ENCAPSED_STRING","'role_type'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'G'",127],",",["T_WHITESPACE","\n            ",127],["T_CONSTANT_ENCAPSED_STRING","'user_id'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","0",128],",",["T_WHITESPACE","\n            ",128],["T_CONSTANT_ENCAPSED_STRING","'user_type'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_LNUMBER","2",129],",",["T_WHITESPACE","\n            ",129],["T_CONSTANT_ENCAPSED_STRING","'role_name'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'Administrators'",130],",",["T_WHITESPACE","\n            ",130],["T_CONSTANT_ENCAPSED_STRING","'role_id'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_LNUMBER","0",131],",",["T_WHITESPACE","\n        ",131],"]",";",["T_WHITESPACE","\n\n        ",132],["T_VARIABLE","$returnValueMap",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],"[",["T_WHITESPACE","\n            ",134],"[",["T_WHITESPACE","\n                ",135],["T_CONSTANT_ENCAPSED_STRING","'SELECT user_id, username, email FROM admin_user WHERE username = :username OR email = :email'",136],",",["T_WHITESPACE","\n                ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'admin'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'email'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'john.doe@test.com'",137],"]",",",["T_WHITESPACE","\n                ",137],["T_STRING","null",138],",",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$existingUserData",139],",",["T_WHITESPACE","\n            ",139],"]",",",["T_WHITESPACE","\n            ",140],"[",["T_WHITESPACE","\n                ",141],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM authorization_role WHERE user_id = :user_id AND user_type = :user_type'",142],",",["T_WHITESPACE","\n                ",142],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_LNUMBER","1",143],",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'user_type'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_LNUMBER","2",143],"]",",",["T_WHITESPACE","\n                ",143],["T_STRING","null",144],",",["T_WHITESPACE","\n                ",144],"[","]",",",["T_WHITESPACE","\n            ",145],"]",",",["T_WHITESPACE","\n            ",146],"[",["T_WHITESPACE","\n                ",147],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM authorization_role WHERE parent_id = :parent_id AND tree_level = :tree_level '",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE","\n                ",148],["T_CONSTANT_ENCAPSED_STRING","'AND role_type = :role_type AND user_id = :user_id '",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE","\n                ",149],["T_CONSTANT_ENCAPSED_STRING","'AND user_type = :user_type AND role_name = :role_name'",150],",",["T_WHITESPACE","\n                ",150],"[",["T_WHITESPACE","\n                    ",151],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",152],["T_WHITESPACE","  ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_LNUMBER","0",152],",",["T_WHITESPACE","\n                    ",152],["T_CONSTANT_ENCAPSED_STRING","'tree_level'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_LNUMBER","1",153],",",["T_WHITESPACE","\n                    ",153],["T_CONSTANT_ENCAPSED_STRING","'role_type'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'G'",154],",",["T_WHITESPACE","\n                    ",154],["T_CONSTANT_ENCAPSED_STRING","'user_id'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],",",["T_WHITESPACE","\n                    ",155],["T_CONSTANT_ENCAPSED_STRING","'user_type'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_LNUMBER","2",156],",",["T_WHITESPACE","\n                    ",156],["T_CONSTANT_ENCAPSED_STRING","'role_name'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'Administrators'",157],",",["T_WHITESPACE","\n                ",157],"]",",",["T_WHITESPACE","\n                ",158],["T_STRING","null",159],",",["T_WHITESPACE","\n                ",159],["T_VARIABLE","$administratorRoleData",160],",",["T_WHITESPACE","\n            ",160],"]",",",["T_WHITESPACE","\n        ",161],"]",";",["T_WHITESPACE","\n\n        ",162],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","dbAdapterMock",164],["T_WHITESPACE","\n            ",164],["T_OBJECT_OPERATOR","->",165],["T_STRING","expects",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","exactly",165],"(",["T_LNUMBER","3",165],")",")",["T_WHITESPACE","\n            ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","method",166],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchRow'",166],")",["T_WHITESPACE","\n            ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","will",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","returnValueMap",167],"(",["T_VARIABLE","$returnValueMap",167],")",")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","dbAdapterMock",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","expects",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","once",168],"(",")",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","method",168],"(",["T_CONSTANT_ENCAPSED_STRING","'quoteInto'",168],")",["T_OBJECT_OPERATOR","->",168],["T_STRING","will",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","returnValue",168],"(",["T_CONSTANT_ENCAPSED_STRING","''",168],")",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","dbAdapterMock",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","expects",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","once",169],"(",")",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","method",169],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",169],")",["T_OBJECT_OPERATOR","->",169],["T_STRING","will",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","returnValue",169],"(",["T_LNUMBER","1",169],")",")",";",["T_WHITESPACE","\n\n        ",169],["T_COMMENT","\/\/ should only insert once (admin role)\n",171],["T_WHITESPACE","        ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","dbAdapterMock",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","expects",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","once",172],"(",")",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","method",172],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",172],")",";",["T_WHITESPACE","\n\n        ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","adminAccount",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","save",174],"(",")",";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","testSaveNewUserAdminRoleExists",177],"(",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_COMMENT","\/\/ existing admin role data\n",179],["T_WHITESPACE","        ",180],["T_VARIABLE","$existingAdminRoleData",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],"[",["T_WHITESPACE","\n            ",180],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",181],["T_WHITESPACE","  ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_LNUMBER","0",181],",",["T_WHITESPACE","\n            ",181],["T_CONSTANT_ENCAPSED_STRING","'tree_level'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_LNUMBER","2",182],",",["T_WHITESPACE","\n            ",182],["T_CONSTANT_ENCAPSED_STRING","'role_type'",183],["T_WHITESPACE","  ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'U'",183],",",["T_WHITESPACE","\n            ",183],["T_CONSTANT_ENCAPSED_STRING","'user_id'",184],["T_WHITESPACE","    ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_LNUMBER","1",184],",",["T_WHITESPACE","\n            ",184],["T_CONSTANT_ENCAPSED_STRING","'user_type'",185],["T_WHITESPACE","  ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_LNUMBER","2",185],",",["T_WHITESPACE","\n            ",185],["T_CONSTANT_ENCAPSED_STRING","'role_name'",186],["T_WHITESPACE","  ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'admin'",186],",",["T_WHITESPACE","\n            ",186],["T_CONSTANT_ENCAPSED_STRING","'role_id'",187],["T_WHITESPACE","    ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_LNUMBER","1",187],",",["T_WHITESPACE","\n        ",187],"]",";",["T_WHITESPACE","\n\n        ",188],["T_VARIABLE","$returnValueMap",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],"[",["T_WHITESPACE","\n            ",190],"[",["T_WHITESPACE","\n                ",191],["T_CONSTANT_ENCAPSED_STRING","'SELECT user_id, username, email FROM admin_user WHERE username = :username OR email = :email'",192],",",["T_WHITESPACE","\n                ",192],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'admin'",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'email'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'john.doe@test.com'",193],"]",",",["T_WHITESPACE","\n                ",193],["T_STRING","null",194],",",["T_WHITESPACE","\n                ",194],"[","]",",",["T_WHITESPACE","\n            ",195],"]",",",["T_WHITESPACE","\n            ",196],"[",["T_WHITESPACE","\n                ",197],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM authorization_role WHERE user_id = :user_id AND user_type = :user_type'",198],",",["T_WHITESPACE","\n                ",198],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_LNUMBER","1",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'user_type'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_LNUMBER","2",199],"]",",",["T_WHITESPACE","\n                ",199],["T_STRING","null",200],",",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$existingAdminRoleData",201],",",["T_WHITESPACE","\n            ",201],"]",",",["T_WHITESPACE","\n        ",202],"]",";",["T_WHITESPACE","\n\n        ",203],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","dbAdapterMock",205],["T_WHITESPACE","\n            ",205],["T_OBJECT_OPERATOR","->",206],["T_STRING","expects",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","exactly",206],"(",["T_LNUMBER","2",206],")",")",["T_WHITESPACE","\n            ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","method",207],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchRow'",207],")",["T_WHITESPACE","\n            ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","will",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","returnValueMap",208],"(",["T_VARIABLE","$returnValueMap",208],")",")",";",["T_WHITESPACE","\n        ",208],["T_COMMENT","\/\/ insert only once (new user)\n",209],["T_WHITESPACE","        ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","dbAdapterMock",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","expects",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","once",210],"(",")",")",["T_OBJECT_OPERATOR","->",210],["T_STRING","method",210],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",210],")",";",["T_WHITESPACE","\n        ",210],["T_COMMENT","\/\/ after inserting new user\n",211],["T_WHITESPACE","        ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","dbAdapterMock",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","expects",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","once",212],"(",")",")",["T_OBJECT_OPERATOR","->",212],["T_STRING","method",212],"(",["T_CONSTANT_ENCAPSED_STRING","'lastInsertId'",212],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","will",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","returnValue",212],"(",["T_LNUMBER","1",212],")",")",";",["T_WHITESPACE","\n\n        ",212],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","adminAccount",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","save",214],"(",")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","testSaveNewUserNewAdminRole",217],"(",")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_COMMENT","\/\/ special admin role data\n",219],["T_WHITESPACE","        ",220],["T_VARIABLE","$administratorRoleData",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],"[",["T_WHITESPACE","\n            ",220],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",221],["T_WHITESPACE","  ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_LNUMBER","0",221],",",["T_WHITESPACE","\n            ",221],["T_CONSTANT_ENCAPSED_STRING","'tree_level'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_LNUMBER","1",222],",",["T_WHITESPACE","\n            ",222],["T_CONSTANT_ENCAPSED_STRING","'role_type'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'G'",223],",",["T_WHITESPACE","\n            ",223],["T_CONSTANT_ENCAPSED_STRING","'user_id'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_LNUMBER","0",224],",",["T_WHITESPACE","\n            ",224],["T_CONSTANT_ENCAPSED_STRING","'user_type'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_LNUMBER","2",225],",",["T_WHITESPACE","\n            ",225],["T_CONSTANT_ENCAPSED_STRING","'role_name'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'Administrators'",226],",",["T_WHITESPACE","\n            ",226],["T_CONSTANT_ENCAPSED_STRING","'role_id'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],",",["T_WHITESPACE","\n        ",227],"]",";",["T_WHITESPACE","\n\n        ",228],["T_VARIABLE","$returnValueMap",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],"[",["T_WHITESPACE","\n            ",230],"[",["T_WHITESPACE","\n                ",231],["T_CONSTANT_ENCAPSED_STRING","'SELECT user_id, username, email FROM admin_user WHERE username = :username OR email = :email'",232],",",["T_WHITESPACE","\n                ",232],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'admin'",233],",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'email'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'john.doe@test.com'",233],"]",",",["T_WHITESPACE","\n                ",233],["T_STRING","null",234],",",["T_WHITESPACE","\n                ",234],"[","]",",",["T_WHITESPACE","\n            ",235],"]",",",["T_WHITESPACE","\n            ",236],"[",["T_WHITESPACE","\n                ",237],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM authorization_role WHERE user_id = :user_id AND user_type = :user_type'",238],",",["T_WHITESPACE","\n                ",238],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_LNUMBER","1",239],",",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'user_type'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_LNUMBER","2",239],"]",",",["T_WHITESPACE","\n                ",239],["T_STRING","null",240],",",["T_WHITESPACE","\n                ",240],"[","]",",",["T_WHITESPACE","\n            ",241],"]",",",["T_WHITESPACE","\n            ",242],"[",["T_WHITESPACE","\n                ",243],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM authorization_role WHERE parent_id = :parent_id AND tree_level = :tree_level '",244],["T_WHITESPACE"," ",244],".",["T_WHITESPACE","\n                ",244],["T_CONSTANT_ENCAPSED_STRING","'AND role_type = :role_type AND user_id = :user_id '",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE","\n                ",245],["T_CONSTANT_ENCAPSED_STRING","'AND user_type = :user_type AND role_name = :role_name'",246],",",["T_WHITESPACE","\n                ",246],"[",["T_WHITESPACE","\n                    ",247],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",248],["T_WHITESPACE","  ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_LNUMBER","0",248],",",["T_WHITESPACE","\n                    ",248],["T_CONSTANT_ENCAPSED_STRING","'tree_level'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_LNUMBER","1",249],",",["T_WHITESPACE","\n                    ",249],["T_CONSTANT_ENCAPSED_STRING","'role_type'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'G'",250],",",["T_WHITESPACE","\n                    ",250],["T_CONSTANT_ENCAPSED_STRING","'user_id'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_LNUMBER","0",251],",",["T_WHITESPACE","\n                    ",251],["T_CONSTANT_ENCAPSED_STRING","'user_type'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_LNUMBER","2",252],",",["T_WHITESPACE","\n                    ",252],["T_CONSTANT_ENCAPSED_STRING","'role_name'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'Administrators'",253],",",["T_WHITESPACE","\n                ",253],"]",",",["T_WHITESPACE","\n                ",254],["T_STRING","null",255],",",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$administratorRoleData",256],",",["T_WHITESPACE","\n            ",256],"]",["T_WHITESPACE","\n\n        ",257],"]",";",["T_WHITESPACE","\n\n        ",259],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","dbAdapterMock",261],["T_WHITESPACE","\n            ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","expects",262],"(",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","exactly",262],"(",["T_LNUMBER","3",262],")",")",["T_WHITESPACE","\n            ",262],["T_OBJECT_OPERATOR","->",263],["T_STRING","method",263],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchRow'",263],")",["T_WHITESPACE","\n            ",263],["T_OBJECT_OPERATOR","->",264],["T_STRING","will",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","returnValueMap",264],"(",["T_VARIABLE","$returnValueMap",264],")",")",";",["T_WHITESPACE","\n        ",264],["T_COMMENT","\/\/ after inserting new user\n",265],["T_WHITESPACE","        ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","dbAdapterMock",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","expects",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","once",266],"(",")",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","method",266],"(",["T_CONSTANT_ENCAPSED_STRING","'lastInsertId'",266],")",["T_OBJECT_OPERATOR","->",266],["T_STRING","will",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","returnValue",266],"(",["T_LNUMBER","1",266],")",")",";",["T_WHITESPACE","\n\n        ",266],["T_COMMENT","\/\/ insert twice only (new user and new admin role)\n",268],["T_WHITESPACE","        ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","dbAdapterMock",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","expects",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","exactly",269],"(",["T_LNUMBER","2",269],")",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","method",269],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",269],")",";",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","adminAccount",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","save",271],"(",")",";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_DOC_COMMENT","\/**\n     * @expectedException \\Exception\n     * @expectedExceptionMessage An existing user has the given email but different username.\n     *\/",274],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","testSaveExceptionUsernameNotMatch",278],"(",")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_COMMENT","\/\/ existing user in db\n",280],["T_WHITESPACE","        ",281],["T_VARIABLE","$existingUserData",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],"[",["T_WHITESPACE","\n            ",281],["T_CONSTANT_ENCAPSED_STRING","'email'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'john.doe@test.com'",282],",",["T_WHITESPACE","\n            ",282],["T_CONSTANT_ENCAPSED_STRING","'username'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'Another.name'",283],",",["T_WHITESPACE","\n        ",283],"]",";",["T_WHITESPACE","\n\n        ",284],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","dbAdapterMock",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","expects",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","once",286],"(",")",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","method",286],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchRow'",286],")",["T_OBJECT_OPERATOR","->",286],["T_STRING","will",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","returnValue",286],"(",["T_VARIABLE","$existingUserData",286],")",")",";",["T_WHITESPACE","\n        ",286],["T_COMMENT","\/\/ should not alter db\n",287],["T_WHITESPACE","        ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","dbAdapterMock",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","expects",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","never",288],"(",")",")",["T_OBJECT_OPERATOR","->",288],["T_STRING","method",288],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",288],")",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","dbAdapterMock",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","expects",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","never",289],"(",")",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","method",289],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",289],")",";",["T_WHITESPACE","\n\n        ",289],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","adminAccount",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","save",291],"(",")",";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * @expectedException \\Exception\n     * @expectedExceptionMessage An existing user has the given username but different email.\n     *\/",294],["T_WHITESPACE","\n    ",297],["T_PUBLIC","public",298],["T_WHITESPACE"," ",298],["T_FUNCTION","function",298],["T_WHITESPACE"," ",298],["T_STRING","testSaveExceptionEmailNotMatch",298],"(",")",["T_WHITESPACE","\n    ",298],"{",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$existingUserData",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],"[",["T_WHITESPACE","\n            ",300],["T_CONSTANT_ENCAPSED_STRING","'email'",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'another.email@test.com'",301],",",["T_WHITESPACE","\n            ",301],["T_CONSTANT_ENCAPSED_STRING","'username'",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'admin'",302],",",["T_WHITESPACE","\n        ",302],"]",";",["T_WHITESPACE","\n\n        ",303],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","dbAdapterMock",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","expects",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","once",305],"(",")",")",["T_OBJECT_OPERATOR","->",305],["T_STRING","method",305],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchRow'",305],")",["T_OBJECT_OPERATOR","->",305],["T_STRING","will",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","returnValue",305],"(",["T_VARIABLE","$existingUserData",305],")",")",";",["T_WHITESPACE","\n        ",305],["T_COMMENT","\/\/ should not alter db\n",306],["T_WHITESPACE","        ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","dbAdapterMock",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","expects",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","never",307],"(",")",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","method",307],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",307],")",";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","dbAdapterMock",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","expects",308],"(",["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","never",308],"(",")",")",["T_OBJECT_OPERATOR","->",308],["T_STRING","method",308],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",308],")",";",["T_WHITESPACE","\n\n        ",308],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","adminAccount",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","save",310],"(",")",";",["T_WHITESPACE","\n    ",310],"}",["T_WHITESPACE","\n\n    ",311],["T_DOC_COMMENT","\/**\n     * @expectedException \\Exception\n     * @expectedExceptionMessage No Administrators role was found, data fixture needs to be run\n     *\/",313],["T_WHITESPACE","\n    ",316],["T_PUBLIC","public",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","testSaveExceptionSpecialAdminRoleNotFound",317],"(",")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","dbAdapterMock",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","expects",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","once",319],"(",")",")",["T_OBJECT_OPERATOR","->",319],["T_STRING","method",319],"(",["T_CONSTANT_ENCAPSED_STRING","'lastInsertId'",319],")",["T_OBJECT_OPERATOR","->",319],["T_STRING","will",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","returnValue",319],"(",["T_LNUMBER","1",319],")",")",";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","dbAdapterMock",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","expects",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","exactly",320],"(",["T_LNUMBER","3",320],")",")",["T_OBJECT_OPERATOR","->",320],["T_STRING","method",320],"(",["T_CONSTANT_ENCAPSED_STRING","'fetchRow'",320],")",["T_OBJECT_OPERATOR","->",320],["T_STRING","will",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","returnValue",320],"(","[","]",")",")",";",["T_WHITESPACE","\n\n        ",320],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","adminAccount",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","save",322],"(",")",";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n",323],"}",["T_WHITESPACE","\n",324]]
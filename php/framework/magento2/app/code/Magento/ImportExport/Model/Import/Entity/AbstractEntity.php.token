[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ImportExport",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Import",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceConnection",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ImportExport",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Import",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AbstractSource",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ImportExport",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Import",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","ImportExport",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ImportExport",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Import",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ErrorProcessing",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ProcessingError",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ImportExport",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Import",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ErrorProcessing",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ProcessingErrorAggregatorInterface",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Import entity abstract model\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",14],["T_WHITESPACE","\n",18],["T_ABSTRACT","abstract",19],["T_WHITESPACE"," ",19],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","AbstractEntity",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * Database constants\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_CONST","const",24],["T_WHITESPACE"," ",24],["T_STRING","DB_MAX_PACKET_COEFFICIENT",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_LNUMBER","900000",24],";",["T_WHITESPACE","\n\n    ",24],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","DB_MAX_PACKET_DATA",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_LNUMBER","1048576",26],";",["T_WHITESPACE","\n\n    ",26],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","DB_MAX_VARCHAR_LENGTH",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_LNUMBER","256",28],";",["T_WHITESPACE","\n\n    ",28],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","DB_MAX_TEXT_LENGTH",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_LNUMBER","65536",30],";",["T_WHITESPACE","\n\n    ",30],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","ERROR_CODE_SYSTEM_EXCEPTION",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'systemException'",32],";",["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","ERROR_CODE_COLUMN_NOT_FOUND",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'columnNotFound'",33],";",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","ERROR_CODE_COLUMN_EMPTY_HEADER",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'columnEmptyHeader'",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","ERROR_CODE_COLUMN_NAME_INVALID",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'columnNameInvalid'",35],";",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","ERROR_CODE_ATTRIBUTE_NOT_VALID",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'attributeNotInvalid'",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","ERROR_CODE_DUPLICATE_UNIQUE_ATTRIBUTE",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'duplicateUniqueAttribute'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","ERROR_CODE_ILLEGAL_CHARACTERS",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'illegalCharacters'",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","ERROR_CODE_INVALID_ATTRIBUTE",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'invalidAttributeName'",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","ERROR_CODE_WRONG_QUOTES",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'wrongQuotes'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","ERROR_CODE_COLUMNS_NUMBER",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'wrongColumnsNumber'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","ERROR_CODE_CATEGORY_NOT_VALID",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'categoryNotValid'",42],";",["T_WHITESPACE","\n\n    ",42],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$errorMessageTemplates",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],"[",["T_WHITESPACE","\n        ",44],["T_STRING","self",45],["T_DOUBLE_COLON","::",45],["T_STRING","ERROR_CODE_SYSTEM_EXCEPTION",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'General system exception happened'",45],",",["T_WHITESPACE","\n        ",45],["T_STRING","self",46],["T_DOUBLE_COLON","::",46],["T_STRING","ERROR_CODE_COLUMN_NOT_FOUND",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find required columns: %s.'",46],",",["T_WHITESPACE","\n        ",46],["T_STRING","self",47],["T_DOUBLE_COLON","::",47],["T_STRING","ERROR_CODE_COLUMN_EMPTY_HEADER",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'Columns number: \"%s\" have empty headers'",47],",",["T_WHITESPACE","\n        ",47],["T_STRING","self",48],["T_DOUBLE_COLON","::",48],["T_STRING","ERROR_CODE_COLUMN_NAME_INVALID",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'Column names: \"%s\" are invalid'",48],",",["T_WHITESPACE","\n        ",48],["T_STRING","self",49],["T_DOUBLE_COLON","::",49],["T_STRING","ERROR_CODE_ATTRIBUTE_NOT_VALID",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","\"Please correct the value for '%s'.\"",49],",",["T_WHITESPACE","\n        ",49],["T_STRING","self",50],["T_DOUBLE_COLON","::",50],["T_STRING","ERROR_CODE_DUPLICATE_UNIQUE_ATTRIBUTE",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"Duplicate Unique Attribute for '%s'\"",50],",",["T_WHITESPACE","\n        ",50],["T_STRING","self",51],["T_DOUBLE_COLON","::",51],["T_STRING","ERROR_CODE_ILLEGAL_CHARACTERS",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","\"Illegal character used for attribute %s\"",51],",",["T_WHITESPACE","\n        ",51],["T_STRING","self",52],["T_DOUBLE_COLON","::",52],["T_STRING","ERROR_CODE_INVALID_ATTRIBUTE",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Header contains invalid attribute(s): \"%s\"'",52],",",["T_WHITESPACE","\n        ",52],["T_STRING","self",53],["T_DOUBLE_COLON","::",53],["T_STRING","ERROR_CODE_WRONG_QUOTES",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","\"Curly quotes used instead of straight quotes\"",53],",",["T_WHITESPACE","\n        ",53],["T_STRING","self",54],["T_DOUBLE_COLON","::",54],["T_STRING","ERROR_CODE_COLUMNS_NUMBER",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","\"Number of columns does not correspond to the number of rows in the header\"",54],",",["T_WHITESPACE","\n    ",54],"]",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Validation failure message template definitions\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_messageTemplates",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[","]",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * DB connection.\n     *\n     * @var \\Magento\\Framework\\DB\\Adapter\\AdapterInterface\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_connection",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Has data process validation done?8\n     *\n     * @var bool\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_dataValidated",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","false",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Valid column names\n     *\n     * @array\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$validColumnNames",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[","]",";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * If we should check column names\n     *\n     * @var bool\n     *\/",85],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$needColumnCheck",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","false",90],";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * DB data source model.\n     *\n     * @var \\Magento\\ImportExport\\Model\\ResourceModel\\Import\\Data\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$_dataSourceModel",97],";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Entity type id.\n     *\n     * @var int\n     *\/",99],["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$_entityTypeId",104],";",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Error codes with arrays of corresponding row numbers.\n     *\n     * @var array\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$_errors",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],"[","]",";",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Flag to disable import.\n     *\n     * @var bool\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$_importAllowed",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","true",118],";",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Attributes with index (not label) value.\n     *\n     * @var array\n     *\/",120],["T_WHITESPACE","\n    ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$_indexValueAttributes",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],"[","]",";",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Entity model parameters.\n     *\n     * @var array\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$_parameters",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],"[","]",";",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning.\n     *\n     * @var string[]\n     *\/",134],["T_WHITESPACE","\n    ",138],["T_PROTECTED","protected",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$_specialAttributes",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],"[","]",";",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Permanent entity columns.\n     *\n     * @var string[]\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$_permanentAttributes",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],"[","]",";",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Number of entities processed by validation.\n     *\n     * @var int\n     *\/",148],["T_WHITESPACE","\n    ",152],["T_PROTECTED","protected",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$_processedEntitiesCount",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_LNUMBER","0",153],";",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Number of rows processed by validation.\n     *\n     * @var int\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$_processedRowsCount",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_LNUMBER","0",160],";",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Array of numbers of validated rows as keys and boolean TRUE as values.\n     *\n     * @var array\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$_validatedRows",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],"[","]",";",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Source model.\n     *\n     * @var AbstractSource\n     *\/",169],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$_source",174],";",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Array of unique attributes\n     *\n     * @var array\n     *\/",176],["T_WHITESPACE","\n    ",180],["T_PROTECTED","protected",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$_uniqueAttributes",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],"[","]",";",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Import export data\n     *\n     * @var \\Magento\\ImportExport\\Helper\\Data\n     *\/",183],["T_WHITESPACE","\n    ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$_importExportData",188],";",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Json Helper\n     *\n     * @var \\Magento\\Framework\\Json\\Helper\\Data\n     *\/",190],["T_WHITESPACE","\n    ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$jsonHelper",195],";",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Magento string lib\n     *\n     * @var \\Magento\\Framework\\Stdlib\\StringUtils\n     *\/",197],["T_WHITESPACE","\n    ",201],["T_PROTECTED","protected",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$string",202],";",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\ImportExport\\Model\\ResourceModel\\Helper\n     *\/",204],["T_WHITESPACE","\n    ",206],["T_PROTECTED","protected",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$_resourceHelper",207],";",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * Count if created items\n     *\n     * @var int\n     *\/",209],["T_WHITESPACE","\n    ",213],["T_PROTECTED","protected",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$countItemsCreated",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_LNUMBER","0",214],";",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Count if updated items\n     *\n     * @var int\n     *\/",216],["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$countItemsUpdated",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_LNUMBER","0",221],";",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Count if deleted items\n     *\n     * @var int\n     *\/",223],["T_WHITESPACE","\n    ",227],["T_PROTECTED","protected",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$countItemsDeleted",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_LNUMBER","0",228],";",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * Need to log in import history\n     *\n     * @var bool\n     *\/",230],["T_WHITESPACE","\n    ",234],["T_PROTECTED","protected",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$logInHistory",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","false",235],";",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * @var ProcessingErrorAggregatorInterface\n     *\/",237],["T_WHITESPACE","\n    ",239],["T_PROTECTED","protected",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$errorAggregator",240],";",["T_WHITESPACE","\n\n    ",240],["T_DOC_COMMENT","\/**\n     * Product metadata pool\n     *\n     * @var \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",242],["T_WHITESPACE","\n    ",246],["T_PROTECTED","protected",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$metadataPool",247],";",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Json\\Helper\\Data $jsonHelper\n     * @param \\Magento\\ImportExport\\Helper\\Data $importExportData\n     * @param \\Magento\\ImportExport\\Model\\ResourceModel\\Import\\Data $importData\n     * @param \\Magento\\Eav\\Model\\Config $config\n     * @param ResourceConnection $resource\n     * @param \\Magento\\ImportExport\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Framework\\Stdlib\\StringUtils $string\n     * @param ProcessingErrorAggregatorInterface $errorAggregator\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",249],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","__construct",260],"(",["T_WHITESPACE","\n        ",260],["T_NS_SEPARATOR","\\",261],["T_STRING","Magento",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Framework",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Json",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Helper",261],["T_NS_SEPARATOR","\\",261],["T_STRING","Data",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$jsonHelper",261],",",["T_WHITESPACE","\n        ",261],["T_NS_SEPARATOR","\\",262],["T_STRING","Magento",262],["T_NS_SEPARATOR","\\",262],["T_STRING","ImportExport",262],["T_NS_SEPARATOR","\\",262],["T_STRING","Helper",262],["T_NS_SEPARATOR","\\",262],["T_STRING","Data",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$importExportData",262],",",["T_WHITESPACE","\n        ",262],["T_NS_SEPARATOR","\\",263],["T_STRING","Magento",263],["T_NS_SEPARATOR","\\",263],["T_STRING","ImportExport",263],["T_NS_SEPARATOR","\\",263],["T_STRING","Model",263],["T_NS_SEPARATOR","\\",263],["T_STRING","ResourceModel",263],["T_NS_SEPARATOR","\\",263],["T_STRING","Import",263],["T_NS_SEPARATOR","\\",263],["T_STRING","Data",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$importData",263],",",["T_WHITESPACE","\n        ",263],["T_NS_SEPARATOR","\\",264],["T_STRING","Magento",264],["T_NS_SEPARATOR","\\",264],["T_STRING","Eav",264],["T_NS_SEPARATOR","\\",264],["T_STRING","Model",264],["T_NS_SEPARATOR","\\",264],["T_STRING","Config",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$config",264],",",["T_WHITESPACE","\n        ",264],["T_STRING","ResourceConnection",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$resource",265],",",["T_WHITESPACE","\n        ",265],["T_NS_SEPARATOR","\\",266],["T_STRING","Magento",266],["T_NS_SEPARATOR","\\",266],["T_STRING","ImportExport",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Model",266],["T_NS_SEPARATOR","\\",266],["T_STRING","ResourceModel",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Helper",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$resourceHelper",266],",",["T_WHITESPACE","\n        ",266],["T_NS_SEPARATOR","\\",267],["T_STRING","Magento",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Framework",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Stdlib",267],["T_NS_SEPARATOR","\\",267],["T_STRING","StringUtils",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$string",267],",",["T_WHITESPACE","\n        ",267],["T_STRING","ProcessingErrorAggregatorInterface",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$errorAggregator",268],["T_WHITESPACE","\n    ",268],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","jsonHelper",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$jsonHelper",270],";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_importExportData",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$importExportData",271],";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_resourceHelper",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$resourceHelper",272],";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","string",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$string",273],";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","errorAggregator",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$errorAggregator",274],";",["T_WHITESPACE","\n\n        ",274],["T_FOREACH","foreach",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","errorMessageTemplates",276],["T_WHITESPACE"," ",276],["T_AS","as",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$errorCode",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$message",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getErrorAggregator",277],"(",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","addErrorMessageTemplate",277],"(",["T_VARIABLE","$errorCode",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$message",277],")",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n\n        ",278],["T_VARIABLE","$entityType",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$config",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getEntityType",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getEntityTypeCode",280],"(",")",")",";",["T_WHITESPACE","\n\n        ",280],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_entityTypeId",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$entityType",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getEntityTypeId",282],"(",")",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_dataSourceModel",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$importData",283],";",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_connection",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$resource",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getConnection",284],"(",")",";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Inner source object getter.\n     *\n     * @return AbstractSource\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",287],["T_WHITESPACE","\n    ",292],["T_PROTECTED","protected",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","_getSource",293],"(",")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(","!",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_source",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_THROW","throw",296],["T_WHITESPACE"," ",296],["T_NEW","new",296],["T_WHITESPACE"," ",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Magento",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Framework",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Exception",296],["T_NS_SEPARATOR","\\",296],["T_STRING","LocalizedException",296],"(",["T_STRING","__",296],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify a source.'",296],")",")",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_source",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Import data rows.\n     *\n     * @abstract\n     * @return boolean\n     *\/",301],["T_WHITESPACE","\n    ",306],["T_ABSTRACT","abstract",307],["T_WHITESPACE"," ",307],["T_PROTECTED","protected",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","_importData",307],"(",")",";",["T_WHITESPACE","\n\n    ",307],["T_DOC_COMMENT","\/**\n     * Returns boolean TRUE if row scope is default (fundamental) scope.\n     *\n     * @param array $rowData\n     * @return bool\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",309],["T_WHITESPACE","\n    ",315],["T_PROTECTED","protected",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","_isRowScopeDefault",316],"(",["T_ARRAY","array",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$rowData",316],")",["T_WHITESPACE","\n    ",316],"{",["T_WHITESPACE","\n        ",317],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_STRING","true",318],";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_DOC_COMMENT","\/**\n     * Change row data before saving in DB table.\n     *\n     * @param array $rowData\n     * @return array\n     *\/",321],["T_WHITESPACE","\n    ",326],["T_PROTECTED","protected",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","_prepareRowForDb",327],"(",["T_ARRAY","array",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$rowData",327],")",["T_WHITESPACE","\n    ",327],"{",["T_WHITESPACE","\n        ",328],["T_DOC_COMMENT","\/**\n         * Convert all empty strings to null values, as\n         * a) we don't use empty string in DB\n         * b) empty strings instead of numeric values will product errors in Sql Server\n         *\/",329],["T_WHITESPACE","\n        ",333],["T_FOREACH","foreach",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$rowData",334],["T_WHITESPACE"," ",334],["T_AS","as",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$key",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$val",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n            ",334],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$val",335],["T_WHITESPACE"," ",335],["T_IS_IDENTICAL","===",335],["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","''",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n                ",335],["T_VARIABLE","$rowData",336],"[",["T_VARIABLE","$key",336],"]",["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_STRING","null",336],";",["T_WHITESPACE","\n            ",336],"}",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n        ",338],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$rowData",339],";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Add errors to error aggregator\n     *\n     * @param string $code\n     * @param array|mixed $errors\n     * @return void\n     *\/",342],["T_WHITESPACE","\n    ",348],["T_PROTECTED","protected",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","addErrors",349],"(",["T_VARIABLE","$code",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$errors",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_IF","if",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$errors",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getErrorAggregator",352],"(",")",["T_OBJECT_OPERATOR","->",352],["T_STRING","addError",352],"(",["T_WHITESPACE","\n                ",352],["T_VARIABLE","$code",353],",",["T_WHITESPACE","\n                ",353],["T_STRING","ProcessingError",354],["T_DOUBLE_COLON","::",354],["T_STRING","ERROR_LEVEL_CRITICAL",354],",",["T_WHITESPACE","\n                ",354],["T_STRING","null",355],",",["T_WHITESPACE","\n                ",355],["T_STRING","implode",356],"(",["T_CONSTANT_ENCAPSED_STRING","'\", \"'",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$errors",356],")",["T_WHITESPACE","\n            ",356],")",";",["T_WHITESPACE","\n        ",357],"}",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * Validate data rows and save bunches to DB.\n     *\n     * @return $this|void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",361],["T_WHITESPACE","\n    ",366],["T_PROTECTED","protected",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","_saveValidatedBunches",367],"(",")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$source",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","_getSource",369],"(",")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$currentDataSize",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_LNUMBER","0",370],";",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$bunchRows",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],"[","]",";",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$startNewBunch",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_STRING","false",372],";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$nextRowBackup",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],"[","]",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$maxDataSize",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_resourceHelper",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getMaxDataSize",374],"(",")",";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$bunchSize",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_importExportData",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getBunchSize",375],"(",")",";",["T_WHITESPACE","\n\n        ",375],["T_VARIABLE","$source",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","rewind",377],"(",")",";",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_dataSourceModel",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","cleanBunches",378],"(",")",";",["T_WHITESPACE","\n\n        ",378],["T_WHILE","while",380],["T_WHITESPACE"," ",380],"(",["T_VARIABLE","$source",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","valid",380],"(",")",["T_WHITESPACE"," ",380],["T_BOOLEAN_OR","||",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$bunchRows",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n            ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$startNewBunch",381],["T_WHITESPACE"," ",381],["T_BOOLEAN_OR","||",381],["T_WHITESPACE"," ",381],"!",["T_VARIABLE","$source",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","valid",381],"(",")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_dataSourceModel",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","saveBunch",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getEntityTypeCode",382],"(",")",",",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getBehavior",382],"(",")",",",["T_WHITESPACE"," ",382],["T_VARIABLE","$bunchRows",382],")",";",["T_WHITESPACE","\n\n                ",382],["T_VARIABLE","$bunchRows",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$nextRowBackup",384],";",["T_WHITESPACE","\n                ",384],["T_VARIABLE","$currentDataSize",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_STRING","strlen",385],"(",["T_STRING","serialize",385],"(",["T_VARIABLE","$bunchRows",385],")",")",";",["T_WHITESPACE","\n                ",385],["T_VARIABLE","$startNewBunch",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","false",386],";",["T_WHITESPACE","\n                ",386],["T_VARIABLE","$nextRowBackup",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],"[","]",";",["T_WHITESPACE","\n            ",387],"}",["T_WHITESPACE","\n            ",388],["T_IF","if",389],["T_WHITESPACE"," ",389],"(",["T_VARIABLE","$source",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","valid",389],"(",")",")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n                ",389],["T_TRY","try",390],["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                    ",390],["T_VARIABLE","$rowData",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$source",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","current",391],"(",")",";",["T_WHITESPACE","\n                ",391],"}",["T_WHITESPACE"," ",392],["T_CATCH","catch",392],["T_WHITESPACE"," ",392],"(",["T_NS_SEPARATOR","\\",392],["T_STRING","InvalidArgumentException",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$e",392],")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n                    ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","addRowError",393],"(",["T_VARIABLE","$e",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getMessage",393],"(",")",",",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_processedRowsCount",393],")",";",["T_WHITESPACE","\n                    ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","_processedRowsCount",394],["T_INC","++",394],";",["T_WHITESPACE","\n                    ",394],["T_VARIABLE","$source",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","next",395],"(",")",";",["T_WHITESPACE","\n                    ",395],["T_CONTINUE","continue",396],";",["T_WHITESPACE","\n                ",396],"}",["T_WHITESPACE","\n\n                ",397],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_processedRowsCount",399],["T_INC","++",399],";",["T_WHITESPACE","\n\n                ",399],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","validateRow",401],"(",["T_VARIABLE","$rowData",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$source",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","key",401],"(",")",")",")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n                    ",401],["T_COMMENT","\/\/ add row to bunch for save\n",402],["T_WHITESPACE","                    ",403],["T_VARIABLE","$rowData",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_prepareRowForDb",403],"(",["T_VARIABLE","$rowData",403],")",";",["T_WHITESPACE","\n                    ",403],["T_VARIABLE","$rowSize",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_STRING","strlen",404],"(",["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","jsonHelper",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","jsonEncode",404],"(",["T_VARIABLE","$rowData",404],")",")",";",["T_WHITESPACE","\n\n                    ",404],["T_VARIABLE","$isBunchSizeExceeded",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$bunchSize",406],["T_WHITESPACE"," ",406],">",["T_WHITESPACE"," ",406],["T_LNUMBER","0",406],["T_WHITESPACE"," ",406],["T_BOOLEAN_AND","&&",406],["T_WHITESPACE"," ",406],["T_STRING","count",406],"(",["T_VARIABLE","$bunchRows",406],")",["T_WHITESPACE"," ",406],["T_IS_GREATER_OR_EQUAL",">=",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$bunchSize",406],";",["T_WHITESPACE","\n\n                    ",406],["T_IF","if",408],["T_WHITESPACE"," ",408],"(",["T_VARIABLE","$currentDataSize",408],["T_WHITESPACE"," ",408],"+",["T_WHITESPACE"," ",408],["T_VARIABLE","$rowSize",408],["T_WHITESPACE"," ",408],["T_IS_GREATER_OR_EQUAL",">=",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$maxDataSize",408],["T_WHITESPACE"," ",408],["T_BOOLEAN_OR","||",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$isBunchSizeExceeded",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n                        ",408],["T_VARIABLE","$startNewBunch",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_STRING","true",409],";",["T_WHITESPACE","\n                        ",409],["T_VARIABLE","$nextRowBackup",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],"[",["T_VARIABLE","$source",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","key",410],"(",")",["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$rowData",410],"]",";",["T_WHITESPACE","\n                    ",410],"}",["T_WHITESPACE"," ",411],["T_ELSE","else",411],["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n                        ",411],["T_VARIABLE","$bunchRows",412],"[",["T_VARIABLE","$source",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","key",412],"(",")","]",["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$rowData",412],";",["T_WHITESPACE","\n                        ",412],["T_VARIABLE","$currentDataSize",413],["T_WHITESPACE"," ",413],["T_PLUS_EQUAL","+=",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$rowSize",413],";",["T_WHITESPACE","\n                    ",413],"}",["T_WHITESPACE","\n                ",414],"}",["T_WHITESPACE","\n                ",415],["T_VARIABLE","$source",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","next",416],"(",")",";",["T_WHITESPACE","\n            ",416],"}",["T_WHITESPACE","\n        ",417],"}",["T_WHITESPACE","\n        ",418],["T_RETURN","return",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],";",["T_WHITESPACE","\n    ",419],"}",["T_WHITESPACE","\n\n    ",420],["T_DOC_COMMENT","\/**\n     * Add error with corresponding current data source row number.\n     *\n     * @param string $errorCode Error code or simply column name\n     * @param int $errorRowNum Row number.\n     * @param string $colName OPTIONAL Column name.\n     * @param string $errorMessage OPTIONAL Column name.\n     * @param string $errorLevel\n     * @param string $errorDescription\n     * @return $this\n     *\/",422],["T_WHITESPACE","\n    ",432],["T_PUBLIC","public",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","addRowError",433],"(",["T_WHITESPACE","\n        ",433],["T_VARIABLE","$errorCode",434],",",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$errorRowNum",435],",",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$colName",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_STRING","null",436],",",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$errorMessage",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_STRING","null",437],",",["T_WHITESPACE","\n        ",437],["T_VARIABLE","$errorLevel",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_STRING","ProcessingError",438],["T_DOUBLE_COLON","::",438],["T_STRING","ERROR_LEVEL_CRITICAL",438],",",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$errorDescription",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_STRING","null",439],["T_WHITESPACE","\n    ",439],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$errorCode",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING_CAST","(string)",441],["T_VARIABLE","$errorCode",441],";",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getErrorAggregator",442],"(",")",["T_OBJECT_OPERATOR","->",442],["T_STRING","addError",442],"(",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$errorCode",443],",",["T_WHITESPACE","\n            ",443],["T_VARIABLE","$errorLevel",444],",",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$errorRowNum",445],",",["T_WHITESPACE","\n            ",445],["T_VARIABLE","$colName",446],",",["T_WHITESPACE","\n            ",446],["T_VARIABLE","$errorMessage",447],",",["T_WHITESPACE","\n            ",447],["T_VARIABLE","$errorDescription",448],["T_WHITESPACE","\n        ",448],")",";",["T_WHITESPACE","\n\n        ",449],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * Add message template for specific error code from outside.\n     *\n     * @param string $errorCode Error code\n     * @param string $message Message template\n     * @return $this\n     *\/",454],["T_WHITESPACE","\n    ",460],["T_PUBLIC","public",461],["T_WHITESPACE"," ",461],["T_FUNCTION","function",461],["T_WHITESPACE"," ",461],["T_STRING","addMessageTemplate",461],"(",["T_VARIABLE","$errorCode",461],",",["T_WHITESPACE"," ",461],["T_VARIABLE","$message",461],")",["T_WHITESPACE","\n    ",461],"{",["T_WHITESPACE","\n        ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getErrorAggregator",463],"(",")",["T_OBJECT_OPERATOR","->",463],["T_STRING","addErrorMessageTemplate",463],"(",["T_VARIABLE","$errorCode",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$message",463],")",";",["T_WHITESPACE","\n\n        ",463],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Returns attributes all values in label-value or value-value pairs form. Labels are lower-cased.\n     *\n     * @param \\Magento\\Eav\\Model\\Entity\\Attribute\\AbstractAttribute $attribute\n     * @param array $indexValAttrs OPTIONAL Additional attributes' codes with index values.\n     * @return array\n     *\/",468],["T_WHITESPACE","\n    ",474],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","getAttributeOptions",475],"(",["T_WHITESPACE","\n        ",475],["T_NS_SEPARATOR","\\",476],["T_STRING","Magento",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Eav",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Model",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Entity",476],["T_NS_SEPARATOR","\\",476],["T_STRING","Attribute",476],["T_NS_SEPARATOR","\\",476],["T_STRING","AbstractAttribute",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$attribute",476],",",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$indexValAttrs",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],"[","]",["T_WHITESPACE","\n    ",477],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n        ",478],["T_VARIABLE","$options",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],"[","]",";",["T_WHITESPACE","\n\n        ",479],["T_IF","if",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$attribute",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","usesSource",481],"(",")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n            ",481],["T_COMMENT","\/\/ merge global entity index value attributes\n",482],["T_WHITESPACE","            ",483],["T_VARIABLE","$indexValAttrs",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_STRING","array_merge",483],"(",["T_VARIABLE","$indexValAttrs",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","_indexValueAttributes",483],")",";",["T_WHITESPACE","\n\n            ",483],["T_COMMENT","\/\/ should attribute has index (option value) instead of a label?\n",485],["T_WHITESPACE","            ",486],["T_VARIABLE","$index",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_STRING","in_array",486],"(",["T_VARIABLE","$attribute",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getAttributeCode",486],"(",")",",",["T_WHITESPACE"," ",486],["T_VARIABLE","$indexValAttrs",486],")",["T_WHITESPACE"," ",486],"?",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'value'",486],["T_WHITESPACE"," ",486],":",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'label'",486],";",["T_WHITESPACE","\n\n            ",486],["T_COMMENT","\/\/ only default (admin) store values used\n",488],["T_WHITESPACE","            ",489],["T_VARIABLE","$attribute",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","setStoreId",489],"(",["T_NS_SEPARATOR","\\",489],["T_STRING","Magento",489],["T_NS_SEPARATOR","\\",489],["T_STRING","Store",489],["T_NS_SEPARATOR","\\",489],["T_STRING","Model",489],["T_NS_SEPARATOR","\\",489],["T_STRING","Store",489],["T_DOUBLE_COLON","::",489],["T_STRING","DEFAULT_STORE_ID",489],")",";",["T_WHITESPACE","\n\n            ",489],["T_TRY","try",491],["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                ",491],["T_FOREACH","foreach",492],["T_WHITESPACE"," ",492],"(",["T_VARIABLE","$attribute",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getSource",492],"(",")",["T_OBJECT_OPERATOR","->",492],["T_STRING","getAllOptions",492],"(",["T_STRING","false",492],")",["T_WHITESPACE"," ",492],["T_AS","as",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$option",492],")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n                    ",492],["T_VARIABLE","$value",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_STRING","is_array",493],"(",["T_VARIABLE","$option",493],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",493],"]",")",["T_WHITESPACE"," ",493],"?",["T_WHITESPACE"," ",493],["T_VARIABLE","$option",493],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",493],"]",["T_WHITESPACE"," ",493],":",["T_WHITESPACE"," ",493],"[",["T_VARIABLE","$option",493],"]",";",["T_WHITESPACE","\n                    ",493],["T_FOREACH","foreach",494],["T_WHITESPACE"," ",494],"(",["T_VARIABLE","$value",494],["T_WHITESPACE"," ",494],["T_AS","as",494],["T_WHITESPACE"," ",494],["T_VARIABLE","$innerOption",494],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n                        ",494],["T_IF","if",495],["T_WHITESPACE"," ",495],"(",["T_STRING","strlen",495],"(",["T_VARIABLE","$innerOption",495],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",495],"]",")",")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n                            ",495],["T_COMMENT","\/\/ skip ' -- Please Select -- ' option\n",496],["T_WHITESPACE","                            ",497],["T_VARIABLE","$options",497],"[",["T_STRING","strtolower",497],"(",["T_VARIABLE","$innerOption",497],"[",["T_VARIABLE","$index",497],"]",")","]",["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$innerOption",497],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",497],"]",";",["T_WHITESPACE","\n                        ",497],"}",["T_WHITESPACE","\n                    ",498],"}",["T_WHITESPACE","\n                ",499],"}",["T_WHITESPACE","\n            ",500],"}",["T_WHITESPACE"," ",501],["T_CATCH","catch",501],["T_WHITESPACE"," ",501],"(",["T_NS_SEPARATOR","\\",501],["T_STRING","Exception",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$e",501],")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n                ",501],["T_COMMENT","\/\/ ignore exceptions connected with source models\n",502],["T_WHITESPACE","            ",503],"}",["T_WHITESPACE","\n        ",503],"}",["T_WHITESPACE","\n        ",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$options",505],";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_DOC_COMMENT","\/**\n     * Import behavior getter.\n     *\n     * @return string\n     *\/",508],["T_WHITESPACE","\n    ",512],["T_PUBLIC","public",513],["T_WHITESPACE"," ",513],["T_FUNCTION","function",513],["T_WHITESPACE"," ",513],["T_STRING","getBehavior",513],"(",")",["T_WHITESPACE","\n    ",513],"{",["T_WHITESPACE","\n        ",514],["T_IF","if",515],["T_WHITESPACE"," ",515],"(","!",["T_ISSET","isset",515],"(",["T_WHITESPACE","\n            ",515],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_parameters",516],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",516],"]",["T_WHITESPACE","\n        ",516],")",["T_WHITESPACE"," ",517],["T_BOOLEAN_OR","||",517],["T_WHITESPACE","\n            ",517],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_parameters",518],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",518],"]",["T_WHITESPACE"," ",518],["T_IS_NOT_EQUAL","!=",518],["T_WHITESPACE"," ",518],["T_NS_SEPARATOR","\\",518],["T_STRING","Magento",518],["T_NS_SEPARATOR","\\",518],["T_STRING","ImportExport",518],["T_NS_SEPARATOR","\\",518],["T_STRING","Model",518],["T_NS_SEPARATOR","\\",518],["T_STRING","Import",518],["T_DOUBLE_COLON","::",518],["T_STRING","BEHAVIOR_APPEND",518],["T_WHITESPACE"," ",518],["T_BOOLEAN_AND","&&",518],["T_WHITESPACE","\n            ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","_parameters",519],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",519],"]",["T_WHITESPACE"," ",519],["T_IS_NOT_EQUAL","!=",519],["T_WHITESPACE"," ",519],["T_NS_SEPARATOR","\\",519],["T_STRING","Magento",519],["T_NS_SEPARATOR","\\",519],["T_STRING","ImportExport",519],["T_NS_SEPARATOR","\\",519],["T_STRING","Model",519],["T_NS_SEPARATOR","\\",519],["T_STRING","Import",519],["T_DOUBLE_COLON","::",519],["T_STRING","BEHAVIOR_REPLACE",519],["T_WHITESPACE"," ",519],["T_BOOLEAN_AND","&&",519],["T_WHITESPACE","\n            ",519],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_parameters",520],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",520],"]",["T_WHITESPACE"," ",520],["T_IS_NOT_EQUAL","!=",520],["T_WHITESPACE"," ",520],["T_NS_SEPARATOR","\\",520],["T_STRING","Magento",520],["T_NS_SEPARATOR","\\",520],["T_STRING","ImportExport",520],["T_NS_SEPARATOR","\\",520],["T_STRING","Model",520],["T_NS_SEPARATOR","\\",520],["T_STRING","Import",520],["T_DOUBLE_COLON","::",520],["T_STRING","BEHAVIOR_DELETE",520],["T_WHITESPACE","\n        ",520],")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n            ",521],["T_RETURN","return",522],["T_WHITESPACE"," ",522],["T_NS_SEPARATOR","\\",522],["T_STRING","Magento",522],["T_NS_SEPARATOR","\\",522],["T_STRING","ImportExport",522],["T_NS_SEPARATOR","\\",522],["T_STRING","Model",522],["T_NS_SEPARATOR","\\",522],["T_STRING","Import",522],["T_DOUBLE_COLON","::",522],["T_STRING","getDefaultBehavior",522],"(",")",";",["T_WHITESPACE","\n        ",522],"}",["T_WHITESPACE","\n        ",523],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","_parameters",524],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",524],"]",";",["T_WHITESPACE","\n    ",524],"}",["T_WHITESPACE","\n\n    ",525],["T_DOC_COMMENT","\/**\n     * EAV entity type code getter.\n     *\n     * @abstract\n     * @return string\n     *\/",527],["T_WHITESPACE","\n    ",532],["T_ABSTRACT","abstract",533],["T_WHITESPACE"," ",533],["T_PUBLIC","public",533],["T_WHITESPACE"," ",533],["T_FUNCTION","function",533],["T_WHITESPACE"," ",533],["T_STRING","getEntityTypeCode",533],"(",")",";",["T_WHITESPACE","\n\n    ",533],["T_DOC_COMMENT","\/**\n     * Entity type ID getter.\n     *\n     * @return int\n     *\/",535],["T_WHITESPACE","\n    ",539],["T_PUBLIC","public",540],["T_WHITESPACE"," ",540],["T_FUNCTION","function",540],["T_WHITESPACE"," ",540],["T_STRING","getEntityTypeId",540],"(",")",["T_WHITESPACE","\n    ",540],"{",["T_WHITESPACE","\n        ",541],["T_RETURN","return",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","_entityTypeId",542],";",["T_WHITESPACE","\n    ",542],"}",["T_WHITESPACE","\n\n    ",543],["T_DOC_COMMENT","\/**\n     * Returns number of checked entities.\n     *\n     * @return int\n     *\/",545],["T_WHITESPACE","\n    ",549],["T_PUBLIC","public",550],["T_WHITESPACE"," ",550],["T_FUNCTION","function",550],["T_WHITESPACE"," ",550],["T_STRING","getProcessedEntitiesCount",550],"(",")",["T_WHITESPACE","\n    ",550],"{",["T_WHITESPACE","\n        ",551],["T_RETURN","return",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_processedEntitiesCount",552],";",["T_WHITESPACE","\n    ",552],"}",["T_WHITESPACE","\n\n    ",553],["T_DOC_COMMENT","\/**\n     * Returns number of checked rows.\n     *\n     * @return int\n     *\/",555],["T_WHITESPACE","\n    ",559],["T_PUBLIC","public",560],["T_WHITESPACE"," ",560],["T_FUNCTION","function",560],["T_WHITESPACE"," ",560],["T_STRING","getProcessedRowsCount",560],"(",")",["T_WHITESPACE","\n    ",560],"{",["T_WHITESPACE","\n        ",561],["T_RETURN","return",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","_processedRowsCount",562],";",["T_WHITESPACE","\n    ",562],"}",["T_WHITESPACE","\n\n    ",563],["T_DOC_COMMENT","\/**\n     * Source object getter.\n     *\n     * @return AbstractSource\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",565],["T_WHITESPACE","\n    ",570],["T_PUBLIC","public",571],["T_WHITESPACE"," ",571],["T_FUNCTION","function",571],["T_WHITESPACE"," ",571],["T_STRING","getSource",571],"(",")",["T_WHITESPACE","\n    ",571],"{",["T_WHITESPACE","\n        ",572],["T_IF","if",573],["T_WHITESPACE"," ",573],"(","!",["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","_source",573],")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n            ",573],["T_THROW","throw",574],["T_WHITESPACE"," ",574],["T_NEW","new",574],["T_WHITESPACE"," ",574],["T_NS_SEPARATOR","\\",574],["T_STRING","Magento",574],["T_NS_SEPARATOR","\\",574],["T_STRING","Framework",574],["T_NS_SEPARATOR","\\",574],["T_STRING","Exception",574],["T_NS_SEPARATOR","\\",574],["T_STRING","LocalizedException",574],"(",["T_STRING","__",574],"(",["T_CONSTANT_ENCAPSED_STRING","'The source is not set.'",574],")",")",";",["T_WHITESPACE","\n        ",574],"}",["T_WHITESPACE","\n        ",575],["T_RETURN","return",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_source",576],";",["T_WHITESPACE","\n    ",576],"}",["T_WHITESPACE","\n\n    ",577],["T_DOC_COMMENT","\/**\n     * Import process start.\n     *\n     * @return bool Result of operation.\n     *\/",579],["T_WHITESPACE","\n    ",583],["T_PUBLIC","public",584],["T_WHITESPACE"," ",584],["T_FUNCTION","function",584],["T_WHITESPACE"," ",584],["T_STRING","importData",584],"(",")",["T_WHITESPACE","\n    ",584],"{",["T_WHITESPACE","\n        ",585],["T_RETURN","return",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","_importData",586],"(",")",";",["T_WHITESPACE","\n    ",586],"}",["T_WHITESPACE","\n\n    ",587],["T_DOC_COMMENT","\/**\n     * Is attribute contains particular data (not plain entity attribute).\n     *\n     * @param string $attrCode\n     * @return bool\n     *\/",589],["T_WHITESPACE","\n    ",594],["T_PUBLIC","public",595],["T_WHITESPACE"," ",595],["T_FUNCTION","function",595],["T_WHITESPACE"," ",595],["T_STRING","isAttributeParticular",595],"(",["T_VARIABLE","$attrCode",595],")",["T_WHITESPACE","\n    ",595],"{",["T_WHITESPACE","\n        ",596],["T_RETURN","return",597],["T_WHITESPACE"," ",597],["T_STRING","in_array",597],"(",["T_VARIABLE","$attrCode",597],",",["T_WHITESPACE"," ",597],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","_specialAttributes",597],")",";",["T_WHITESPACE","\n    ",597],"}",["T_WHITESPACE","\n\n    ",598],["T_DOC_COMMENT","\/**\n     * Check one attribute. Can be overridden in child.\n     *\n     * @param string $attrCode Attribute code\n     * @param array $attrParams Attribute params\n     * @param array $rowData Row data\n     * @param int $rowNum\n     * @return boolean\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",600],["T_WHITESPACE","\n    ",609],["T_PUBLIC","public",610],["T_WHITESPACE"," ",610],["T_FUNCTION","function",610],["T_WHITESPACE"," ",610],["T_STRING","isAttributeValid",610],"(",["T_VARIABLE","$attrCode",610],",",["T_WHITESPACE"," ",610],["T_ARRAY","array",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$attrParams",610],",",["T_WHITESPACE"," ",610],["T_ARRAY","array",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$rowData",610],",",["T_WHITESPACE"," ",610],["T_VARIABLE","$rowNum",610],")",["T_WHITESPACE","\n    ",610],"{",["T_WHITESPACE","\n        ",611],["T_SWITCH","switch",612],["T_WHITESPACE"," ",612],"(",["T_VARIABLE","$attrParams",612],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",612],"]",")",["T_WHITESPACE"," ",612],"{",["T_WHITESPACE","\n            ",612],["T_CASE","case",613],["T_WHITESPACE"," ",613],["T_CONSTANT_ENCAPSED_STRING","'varchar'",613],":",["T_WHITESPACE","\n                ",613],["T_VARIABLE","$val",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","string",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","cleanString",614],"(",["T_VARIABLE","$rowData",614],"[",["T_VARIABLE","$attrCode",614],"]",")",";",["T_WHITESPACE","\n                ",614],["T_VARIABLE","$valid",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","string",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","strlen",615],"(",["T_VARIABLE","$val",615],")",["T_WHITESPACE"," ",615],"<",["T_WHITESPACE"," ",615],["T_STRING","self",615],["T_DOUBLE_COLON","::",615],["T_STRING","DB_MAX_VARCHAR_LENGTH",615],";",["T_WHITESPACE","\n                ",615],["T_BREAK","break",616],";",["T_WHITESPACE","\n            ",616],["T_CASE","case",617],["T_WHITESPACE"," ",617],["T_CONSTANT_ENCAPSED_STRING","'decimal'",617],":",["T_WHITESPACE","\n                ",617],["T_VARIABLE","$val",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_STRING","trim",618],"(",["T_VARIABLE","$rowData",618],"[",["T_VARIABLE","$attrCode",618],"]",")",";",["T_WHITESPACE","\n                ",618],["T_VARIABLE","$valid",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_DOUBLE_CAST","(double)",619],["T_VARIABLE","$val",619],["T_WHITESPACE"," ",619],["T_IS_EQUAL","==",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$val",619],";",["T_WHITESPACE","\n                ",619],["T_BREAK","break",620],";",["T_WHITESPACE","\n            ",620],["T_CASE","case",621],["T_WHITESPACE"," ",621],["T_CONSTANT_ENCAPSED_STRING","'select'",621],":",["T_WHITESPACE","\n            ",621],["T_CASE","case",622],["T_WHITESPACE"," ",622],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",622],":",["T_WHITESPACE","\n                ",622],["T_VARIABLE","$valid",623],["T_WHITESPACE"," ",623],"=",["T_WHITESPACE"," ",623],["T_ISSET","isset",623],"(",["T_VARIABLE","$attrParams",623],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",623],"]","[",["T_STRING","strtolower",623],"(",["T_VARIABLE","$rowData",623],"[",["T_VARIABLE","$attrCode",623],"]",")","]",")",";",["T_WHITESPACE","\n                ",623],["T_BREAK","break",624],";",["T_WHITESPACE","\n            ",624],["T_CASE","case",625],["T_WHITESPACE"," ",625],["T_CONSTANT_ENCAPSED_STRING","'int'",625],":",["T_WHITESPACE","\n                ",625],["T_VARIABLE","$val",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_STRING","trim",626],"(",["T_VARIABLE","$rowData",626],"[",["T_VARIABLE","$attrCode",626],"]",")",";",["T_WHITESPACE","\n                ",626],["T_VARIABLE","$valid",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_INT_CAST","(int)",627],["T_VARIABLE","$val",627],["T_WHITESPACE"," ",627],["T_IS_EQUAL","==",627],["T_WHITESPACE"," ",627],["T_VARIABLE","$val",627],";",["T_WHITESPACE","\n                ",627],["T_BREAK","break",628],";",["T_WHITESPACE","\n            ",628],["T_CASE","case",629],["T_WHITESPACE"," ",629],["T_CONSTANT_ENCAPSED_STRING","'datetime'",629],":",["T_WHITESPACE","\n                ",629],["T_VARIABLE","$val",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],["T_STRING","trim",630],"(",["T_VARIABLE","$rowData",630],"[",["T_VARIABLE","$attrCode",630],"]",")",";",["T_WHITESPACE","\n                ",630],["T_VARIABLE","$valid",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_STRING","strtotime",631],"(",["T_VARIABLE","$val",631],")",["T_WHITESPACE"," ",631],["T_IS_NOT_IDENTICAL","!==",631],["T_WHITESPACE"," ",631],["T_STRING","false",631],";",["T_WHITESPACE","\n                ",631],["T_BREAK","break",632],";",["T_WHITESPACE","\n            ",632],["T_CASE","case",633],["T_WHITESPACE"," ",633],["T_CONSTANT_ENCAPSED_STRING","'text'",633],":",["T_WHITESPACE","\n                ",633],["T_VARIABLE","$val",634],["T_WHITESPACE"," ",634],"=",["T_WHITESPACE"," ",634],["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","string",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","cleanString",634],"(",["T_VARIABLE","$rowData",634],"[",["T_VARIABLE","$attrCode",634],"]",")",";",["T_WHITESPACE","\n                ",634],["T_VARIABLE","$valid",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","string",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","strlen",635],"(",["T_VARIABLE","$val",635],")",["T_WHITESPACE"," ",635],"<",["T_WHITESPACE"," ",635],["T_STRING","self",635],["T_DOUBLE_COLON","::",635],["T_STRING","DB_MAX_TEXT_LENGTH",635],";",["T_WHITESPACE","\n                ",635],["T_BREAK","break",636],";",["T_WHITESPACE","\n            ",636],["T_DEFAULT","default",637],":",["T_WHITESPACE","\n                ",637],["T_VARIABLE","$valid",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_STRING","true",638],";",["T_WHITESPACE","\n                ",638],["T_BREAK","break",639],";",["T_WHITESPACE","\n        ",639],"}",["T_WHITESPACE","\n\n        ",640],["T_IF","if",642],["T_WHITESPACE"," ",642],"(","!",["T_VARIABLE","$valid",642],")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n            ",642],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","addRowError",643],"(",["T_STRING","self",643],["T_DOUBLE_COLON","::",643],["T_STRING","ERROR_CODE_ATTRIBUTE_NOT_VALID",643],",",["T_WHITESPACE"," ",643],["T_VARIABLE","$rowNum",643],",",["T_WHITESPACE"," ",643],["T_VARIABLE","$attrCode",643],")",";",["T_WHITESPACE","\n        ",643],"}",["T_WHITESPACE"," ",644],["T_ELSEIF","elseif",644],["T_WHITESPACE"," ",644],"(","!",["T_EMPTY","empty",644],"(",["T_VARIABLE","$attrParams",644],"[",["T_CONSTANT_ENCAPSED_STRING","'is_unique'",644],"]",")",")",["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n            ",644],["T_IF","if",645],["T_WHITESPACE"," ",645],"(",["T_ISSET","isset",645],"(",["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_uniqueAttributes",645],"[",["T_VARIABLE","$attrCode",645],"]","[",["T_VARIABLE","$rowData",645],"[",["T_VARIABLE","$attrCode",645],"]","]",")",")",["T_WHITESPACE"," ",645],"{",["T_WHITESPACE","\n                ",645],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","addRowError",646],"(",["T_STRING","self",646],["T_DOUBLE_COLON","::",646],["T_STRING","ERROR_CODE_DUPLICATE_UNIQUE_ATTRIBUTE",646],",",["T_WHITESPACE"," ",646],["T_VARIABLE","$rowNum",646],",",["T_WHITESPACE"," ",646],["T_VARIABLE","$attrCode",646],")",";",["T_WHITESPACE","\n                ",646],["T_RETURN","return",647],["T_WHITESPACE"," ",647],["T_STRING","false",647],";",["T_WHITESPACE","\n            ",647],"}",["T_WHITESPACE","\n            ",648],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","_uniqueAttributes",649],"[",["T_VARIABLE","$attrCode",649],"]","[",["T_VARIABLE","$rowData",649],"[",["T_VARIABLE","$attrCode",649],"]","]",["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_STRING","true",649],";",["T_WHITESPACE","\n        ",649],"}",["T_WHITESPACE","\n        ",650],["T_RETURN","return",651],["T_WHITESPACE"," ",651],["T_BOOL_CAST","(bool)",651],["T_VARIABLE","$valid",651],";",["T_WHITESPACE","\n    ",651],"}",["T_WHITESPACE","\n\n    ",652],["T_DOC_COMMENT","\/**\n     * Import possibility getter.\n     *\n     * @return bool\n     *\/",654],["T_WHITESPACE","\n    ",658],["T_PUBLIC","public",659],["T_WHITESPACE"," ",659],["T_FUNCTION","function",659],["T_WHITESPACE"," ",659],["T_STRING","isImportAllowed",659],"(",")",["T_WHITESPACE","\n    ",659],"{",["T_WHITESPACE","\n        ",660],["T_RETURN","return",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","_importAllowed",661],";",["T_WHITESPACE","\n    ",661],"}",["T_WHITESPACE","\n\n    ",662],["T_DOC_COMMENT","\/**\n     * Returns TRUE if row is valid and not in skipped rows array.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @return bool\n     *\/",664],["T_WHITESPACE","\n    ",670],["T_PUBLIC","public",671],["T_WHITESPACE"," ",671],["T_FUNCTION","function",671],["T_WHITESPACE"," ",671],["T_STRING","isRowAllowedToImport",671],"(",["T_ARRAY","array",671],["T_WHITESPACE"," ",671],["T_VARIABLE","$rowData",671],",",["T_WHITESPACE"," ",671],["T_VARIABLE","$rowNum",671],")",["T_WHITESPACE","\n    ",671],"{",["T_WHITESPACE","\n        ",672],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","validateRow",673],"(",["T_VARIABLE","$rowData",673],",",["T_WHITESPACE"," ",673],["T_VARIABLE","$rowNum",673],")",";",["T_WHITESPACE","\n        ",673],["T_RETURN","return",674],["T_WHITESPACE"," ",674],"!",["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","getErrorAggregator",674],"(",")",["T_OBJECT_OPERATOR","->",674],["T_STRING","isRowInvalid",674],"(",["T_VARIABLE","$rowNum",674],")",";",["T_WHITESPACE","\n    ",674],"}",["T_WHITESPACE","\n\n    ",675],["T_DOC_COMMENT","\/**\n     * Retrieve message template\n     *\n     * @param string $errorCode\n     * @return null|string\n     *\/",677],["T_WHITESPACE","\n    ",682],["T_PUBLIC","public",683],["T_WHITESPACE"," ",683],["T_FUNCTION","function",683],["T_WHITESPACE"," ",683],["T_STRING","retrieveMessageTemplate",683],"(",["T_VARIABLE","$errorCode",683],")",["T_WHITESPACE","\n    ",683],"{",["T_WHITESPACE","\n        ",684],["T_IF","if",685],["T_WHITESPACE"," ",685],"(",["T_ISSET","isset",685],"(",["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","_messageTemplates",685],"[",["T_VARIABLE","$errorCode",685],"]",")",")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n            ",685],["T_RETURN","return",686],["T_WHITESPACE"," ",686],["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","_messageTemplates",686],"[",["T_VARIABLE","$errorCode",686],"]",";",["T_WHITESPACE","\n        ",686],"}",["T_WHITESPACE","\n        ",687],["T_RETURN","return",688],["T_WHITESPACE"," ",688],["T_STRING","null",688],";",["T_WHITESPACE","\n    ",688],"}",["T_WHITESPACE","\n\n    ",689],["T_DOC_COMMENT","\/**\n     * Is import need to log in history.\n     *\n     * @return bool\n     *\/",691],["T_WHITESPACE","\n    ",695],["T_PUBLIC","public",696],["T_WHITESPACE"," ",696],["T_FUNCTION","function",696],["T_WHITESPACE"," ",696],["T_STRING","isNeedToLogInHistory",696],"(",")",["T_WHITESPACE","\n    ",696],"{",["T_WHITESPACE","\n        ",697],["T_RETURN","return",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$this",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","logInHistory",698],";",["T_WHITESPACE","\n    ",698],"}",["T_WHITESPACE","\n\n    ",699],["T_DOC_COMMENT","\/**\n     * Validate data row.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @return boolean\n     *\/",701],["T_WHITESPACE","\n    ",707],["T_ABSTRACT","abstract",708],["T_WHITESPACE"," ",708],["T_PUBLIC","public",708],["T_WHITESPACE"," ",708],["T_FUNCTION","function",708],["T_WHITESPACE"," ",708],["T_STRING","validateRow",708],"(",["T_ARRAY","array",708],["T_WHITESPACE"," ",708],["T_VARIABLE","$rowData",708],",",["T_WHITESPACE"," ",708],["T_VARIABLE","$rowNum",708],")",";",["T_WHITESPACE","\n\n    ",708],["T_DOC_COMMENT","\/**\n     * Set data from outside to change behavior. I.e. for setting some default parameters etc.\n     *\n     * @param array $params\n     * @return $this\n     *\/",710],["T_WHITESPACE","\n    ",715],["T_PUBLIC","public",716],["T_WHITESPACE"," ",716],["T_FUNCTION","function",716],["T_WHITESPACE"," ",716],["T_STRING","setParameters",716],"(",["T_ARRAY","array",716],["T_WHITESPACE"," ",716],["T_VARIABLE","$params",716],")",["T_WHITESPACE","\n    ",716],"{",["T_WHITESPACE","\n        ",717],["T_VARIABLE","$this",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","_parameters",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_VARIABLE","$params",718],";",["T_WHITESPACE","\n        ",718],["T_RETURN","return",719],["T_WHITESPACE"," ",719],["T_VARIABLE","$this",719],";",["T_WHITESPACE","\n    ",719],"}",["T_WHITESPACE","\n\n    ",720],["T_DOC_COMMENT","\/**\n     * Get data from outside to change behavior. I.e. for setting some default parameters etc.\n     *\n     * @return array $params\n     *\/",722],["T_WHITESPACE","\n    ",726],["T_PUBLIC","public",727],["T_WHITESPACE"," ",727],["T_FUNCTION","function",727],["T_WHITESPACE"," ",727],["T_STRING","getParameters",727],"(",")",["T_WHITESPACE","\n    ",727],"{",["T_WHITESPACE","\n        ",728],["T_RETURN","return",729],["T_WHITESPACE"," ",729],["T_VARIABLE","$this",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","_parameters",729],";",["T_WHITESPACE","\n    ",729],"}",["T_WHITESPACE","\n\n    ",730],["T_DOC_COMMENT","\/**\n     * Source model setter.\n     *\n     * @param AbstractSource $source\n     * @return $this\n     *\/",732],["T_WHITESPACE","\n    ",737],["T_PUBLIC","public",738],["T_WHITESPACE"," ",738],["T_FUNCTION","function",738],["T_WHITESPACE"," ",738],["T_STRING","setSource",738],"(",["T_STRING","AbstractSource",738],["T_WHITESPACE"," ",738],["T_VARIABLE","$source",738],")",["T_WHITESPACE","\n    ",738],"{",["T_WHITESPACE","\n        ",739],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","_source",740],["T_WHITESPACE"," ",740],"=",["T_WHITESPACE"," ",740],["T_VARIABLE","$source",740],";",["T_WHITESPACE","\n        ",740],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","_dataValidated",741],["T_WHITESPACE"," ",741],"=",["T_WHITESPACE"," ",741],["T_STRING","false",741],";",["T_WHITESPACE","\n\n        ",741],["T_RETURN","return",743],["T_WHITESPACE"," ",743],["T_VARIABLE","$this",743],";",["T_WHITESPACE","\n    ",743],"}",["T_WHITESPACE","\n\n    ",744],["T_DOC_COMMENT","\/**\n     * Validate data.\n     *\n     * @return ProcessingErrorAggregatorInterface\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",746],["T_WHITESPACE","\n    ",752],["T_PUBLIC","public",753],["T_WHITESPACE"," ",753],["T_FUNCTION","function",753],["T_WHITESPACE"," ",753],["T_STRING","validateData",753],"(",")",["T_WHITESPACE","\n    ",753],"{",["T_WHITESPACE","\n        ",754],["T_IF","if",755],["T_WHITESPACE"," ",755],"(","!",["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","_dataValidated",755],")",["T_WHITESPACE"," ",755],"{",["T_WHITESPACE","\n            ",755],["T_VARIABLE","$this",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","getErrorAggregator",756],"(",")",["T_OBJECT_OPERATOR","->",756],["T_STRING","clear",756],"(",")",";",["T_WHITESPACE","\n            ",756],["T_COMMENT","\/\/ do all permanent columns exist?\n",757],["T_WHITESPACE","            ",758],["T_VARIABLE","$absentColumns",758],["T_WHITESPACE"," ",758],"=",["T_WHITESPACE"," ",758],["T_STRING","array_diff",758],"(",["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","_permanentAttributes",758],",",["T_WHITESPACE"," ",758],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","getSource",758],"(",")",["T_OBJECT_OPERATOR","->",758],["T_STRING","getColNames",758],"(",")",")",";",["T_WHITESPACE","\n            ",758],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","addErrors",759],"(",["T_STRING","self",759],["T_DOUBLE_COLON","::",759],["T_STRING","ERROR_CODE_COLUMN_NOT_FOUND",759],",",["T_WHITESPACE"," ",759],["T_VARIABLE","$absentColumns",759],")",";",["T_WHITESPACE","\n\n            ",759],["T_IF","if",761],["T_WHITESPACE"," ",761],"(",["T_STRING","ImportExport",761],["T_DOUBLE_COLON","::",761],["T_STRING","BEHAVIOR_DELETE",761],["T_WHITESPACE"," ",761],["T_IS_NOT_EQUAL","!=",761],["T_WHITESPACE"," ",761],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","getBehavior",761],"(",")",")",["T_WHITESPACE"," ",761],"{",["T_WHITESPACE","\n                ",761],["T_COMMENT","\/\/ check attribute columns names validity\n",762],["T_WHITESPACE","                ",763],["T_VARIABLE","$columnNumber",763],["T_WHITESPACE"," ",763],"=",["T_WHITESPACE"," ",763],["T_LNUMBER","0",763],";",["T_WHITESPACE","\n                ",763],["T_VARIABLE","$emptyHeaderColumns",764],["T_WHITESPACE"," ",764],"=",["T_WHITESPACE"," ",764],"[","]",";",["T_WHITESPACE","\n                ",764],["T_VARIABLE","$invalidColumns",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],"[","]",";",["T_WHITESPACE","\n                ",765],["T_VARIABLE","$invalidAttributes",766],["T_WHITESPACE"," ",766],"=",["T_WHITESPACE"," ",766],"[","]",";",["T_WHITESPACE","\n                ",766],["T_FOREACH","foreach",767],["T_WHITESPACE"," ",767],"(",["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","getSource",767],"(",")",["T_OBJECT_OPERATOR","->",767],["T_STRING","getColNames",767],"(",")",["T_WHITESPACE"," ",767],["T_AS","as",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$columnName",767],")",["T_WHITESPACE"," ",767],"{",["T_WHITESPACE","\n                    ",767],["T_VARIABLE","$columnNumber",768],["T_INC","++",768],";",["T_WHITESPACE","\n                    ",768],["T_IF","if",769],["T_WHITESPACE"," ",769],"(","!",["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","isAttributeParticular",769],"(",["T_VARIABLE","$columnName",769],")",")",["T_WHITESPACE"," ",769],"{",["T_WHITESPACE","\n                        ",769],["T_IF","if",770],["T_WHITESPACE"," ",770],"(",["T_STRING","trim",770],"(",["T_VARIABLE","$columnName",770],")",["T_WHITESPACE"," ",770],["T_IS_EQUAL","==",770],["T_WHITESPACE"," ",770],["T_CONSTANT_ENCAPSED_STRING","''",770],")",["T_WHITESPACE"," ",770],"{",["T_WHITESPACE","\n                            ",770],["T_VARIABLE","$emptyHeaderColumns",771],"[","]",["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_VARIABLE","$columnNumber",771],";",["T_WHITESPACE","\n                        ",771],"}",["T_WHITESPACE"," ",772],["T_ELSEIF","elseif",772],["T_WHITESPACE"," ",772],"(","!",["T_STRING","preg_match",772],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[a-z][a-z0-9_]*$\/'",772],",",["T_WHITESPACE"," ",772],["T_VARIABLE","$columnName",772],")",")",["T_WHITESPACE"," ",772],"{",["T_WHITESPACE","\n                            ",772],["T_VARIABLE","$invalidColumns",773],"[","]",["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],["T_VARIABLE","$columnName",773],";",["T_WHITESPACE","\n                        ",773],"}",["T_WHITESPACE"," ",774],["T_ELSEIF","elseif",774],["T_WHITESPACE"," ",774],"(",["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","needColumnCheck",774],["T_WHITESPACE"," ",774],["T_BOOLEAN_AND","&&",774],["T_WHITESPACE"," ",774],"!",["T_STRING","in_array",774],"(",["T_VARIABLE","$columnName",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getValidColumnNames",774],"(",")",")",")",["T_WHITESPACE"," ",774],"{",["T_WHITESPACE","\n                            ",774],["T_VARIABLE","$invalidAttributes",775],"[","]",["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_VARIABLE","$columnName",775],";",["T_WHITESPACE","\n                        ",775],"}",["T_WHITESPACE","\n                    ",776],"}",["T_WHITESPACE","\n                ",777],"}",["T_WHITESPACE","\n                ",778],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","addErrors",779],"(",["T_STRING","self",779],["T_DOUBLE_COLON","::",779],["T_STRING","ERROR_CODE_INVALID_ATTRIBUTE",779],",",["T_WHITESPACE"," ",779],["T_VARIABLE","$invalidAttributes",779],")",";",["T_WHITESPACE","\n                ",779],["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","addErrors",780],"(",["T_STRING","self",780],["T_DOUBLE_COLON","::",780],["T_STRING","ERROR_CODE_COLUMN_EMPTY_HEADER",780],",",["T_WHITESPACE"," ",780],["T_VARIABLE","$emptyHeaderColumns",780],")",";",["T_WHITESPACE","\n                ",780],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","addErrors",781],"(",["T_STRING","self",781],["T_DOUBLE_COLON","::",781],["T_STRING","ERROR_CODE_COLUMN_NAME_INVALID",781],",",["T_WHITESPACE"," ",781],["T_VARIABLE","$invalidColumns",781],")",";",["T_WHITESPACE","\n            ",781],"}",["T_WHITESPACE","\n\n            ",782],["T_IF","if",784],["T_WHITESPACE"," ",784],"(","!",["T_VARIABLE","$this",784],["T_OBJECT_OPERATOR","->",784],["T_STRING","getErrorAggregator",784],"(",")",["T_OBJECT_OPERATOR","->",784],["T_STRING","getErrorsCount",784],"(",")",")",["T_WHITESPACE"," ",784],"{",["T_WHITESPACE","\n                ",784],["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","_saveValidatedBunches",785],"(",")",";",["T_WHITESPACE","\n                ",785],["T_VARIABLE","$this",786],["T_OBJECT_OPERATOR","->",786],["T_STRING","_dataValidated",786],["T_WHITESPACE"," ",786],"=",["T_WHITESPACE"," ",786],["T_STRING","true",786],";",["T_WHITESPACE","\n            ",786],"}",["T_WHITESPACE","\n        ",787],"}",["T_WHITESPACE","\n        ",788],["T_RETURN","return",789],["T_WHITESPACE"," ",789],["T_VARIABLE","$this",789],["T_OBJECT_OPERATOR","->",789],["T_STRING","getErrorAggregator",789],"(",")",";",["T_WHITESPACE","\n    ",789],"}",["T_WHITESPACE","\n\n    ",790],["T_DOC_COMMENT","\/**\n     * @return ProcessingErrorAggregatorInterface\n     *\/",792],["T_WHITESPACE","\n    ",794],["T_PUBLIC","public",795],["T_WHITESPACE"," ",795],["T_FUNCTION","function",795],["T_WHITESPACE"," ",795],["T_STRING","getErrorAggregator",795],"(",")",["T_WHITESPACE","\n    ",795],"{",["T_WHITESPACE","\n        ",796],["T_RETURN","return",797],["T_WHITESPACE"," ",797],["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","errorAggregator",797],";",["T_WHITESPACE","\n    ",797],"}",["T_WHITESPACE","\n\n    ",798],["T_DOC_COMMENT","\/**\n     * Get count of created items\n     *\n     * @return int\n     *\/",800],["T_WHITESPACE","\n    ",804],["T_PUBLIC","public",805],["T_WHITESPACE"," ",805],["T_FUNCTION","function",805],["T_WHITESPACE"," ",805],["T_STRING","getCreatedItemsCount",805],"(",")",["T_WHITESPACE","\n    ",805],"{",["T_WHITESPACE","\n        ",806],["T_RETURN","return",807],["T_WHITESPACE"," ",807],["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","countItemsCreated",807],";",["T_WHITESPACE","\n    ",807],"}",["T_WHITESPACE","\n\n    ",808],["T_DOC_COMMENT","\/**\n     * Get count of updated items\n     *\n     * @return int\n     *\/",810],["T_WHITESPACE","\n    ",814],["T_PUBLIC","public",815],["T_WHITESPACE"," ",815],["T_FUNCTION","function",815],["T_WHITESPACE"," ",815],["T_STRING","getUpdatedItemsCount",815],"(",")",["T_WHITESPACE","\n    ",815],"{",["T_WHITESPACE","\n        ",816],["T_RETURN","return",817],["T_WHITESPACE"," ",817],["T_VARIABLE","$this",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","countItemsUpdated",817],";",["T_WHITESPACE","\n    ",817],"}",["T_WHITESPACE","\n\n    ",818],["T_DOC_COMMENT","\/**\n     * Get count of deleted items\n     *\n     * @return int\n     *\/",820],["T_WHITESPACE","\n    ",824],["T_PUBLIC","public",825],["T_WHITESPACE"," ",825],["T_FUNCTION","function",825],["T_WHITESPACE"," ",825],["T_STRING","getDeletedItemsCount",825],"(",")",["T_WHITESPACE","\n    ",825],"{",["T_WHITESPACE","\n        ",826],["T_RETURN","return",827],["T_WHITESPACE"," ",827],["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","countItemsDeleted",827],";",["T_WHITESPACE","\n    ",827],"}",["T_WHITESPACE","\n\n    ",828],["T_DOC_COMMENT","\/**\n     * Retrieve valid column names\n     *\n     * @return array\n     *\/",830],["T_WHITESPACE","\n    ",834],["T_PUBLIC","public",835],["T_WHITESPACE"," ",835],["T_FUNCTION","function",835],["T_WHITESPACE"," ",835],["T_STRING","getValidColumnNames",835],"(",")",["T_WHITESPACE","\n    ",835],"{",["T_WHITESPACE","\n        ",836],["T_RETURN","return",837],["T_WHITESPACE"," ",837],["T_VARIABLE","$this",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","validColumnNames",837],";",["T_WHITESPACE","\n    ",837],"}",["T_WHITESPACE","\n\n    ",838],["T_DOC_COMMENT","\/**\n     * Get product metadata pool\n     *\n     * @return \\Magento\\Framework\\EntityManager\\MetadataPool\n     *\/",840],["T_WHITESPACE","\n    ",844],["T_PROTECTED","protected",845],["T_WHITESPACE"," ",845],["T_FUNCTION","function",845],["T_WHITESPACE"," ",845],["T_STRING","getMetadataPool",845],"(",")",["T_WHITESPACE","\n    ",845],"{",["T_WHITESPACE","\n        ",846],["T_IF","if",847],["T_WHITESPACE"," ",847],"(","!",["T_VARIABLE","$this",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","metadataPool",847],")",["T_WHITESPACE"," ",847],"{",["T_WHITESPACE","\n            ",847],["T_VARIABLE","$this",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","metadataPool",848],["T_WHITESPACE"," ",848],"=",["T_WHITESPACE"," ",848],["T_NS_SEPARATOR","\\",848],["T_STRING","Magento",848],["T_NS_SEPARATOR","\\",848],["T_STRING","Framework",848],["T_NS_SEPARATOR","\\",848],["T_STRING","App",848],["T_NS_SEPARATOR","\\",848],["T_STRING","ObjectManager",848],["T_DOUBLE_COLON","::",848],["T_STRING","getInstance",848],"(",")",["T_WHITESPACE","\n                ",848],["T_OBJECT_OPERATOR","->",849],["T_STRING","get",849],"(",["T_NS_SEPARATOR","\\",849],["T_STRING","Magento",849],["T_NS_SEPARATOR","\\",849],["T_STRING","Framework",849],["T_NS_SEPARATOR","\\",849],["T_STRING","EntityManager",849],["T_NS_SEPARATOR","\\",849],["T_STRING","MetadataPool",849],["T_DOUBLE_COLON","::",849],["T_CLASS","class",849],")",";",["T_WHITESPACE","\n        ",849],"}",["T_WHITESPACE","\n        ",850],["T_RETURN","return",851],["T_WHITESPACE"," ",851],["T_VARIABLE","$this",851],["T_OBJECT_OPERATOR","->",851],["T_STRING","metadataPool",851],";",["T_WHITESPACE","\n    ",851],"}",["T_WHITESPACE","\n",852],"}",["T_WHITESPACE","\n",853]]
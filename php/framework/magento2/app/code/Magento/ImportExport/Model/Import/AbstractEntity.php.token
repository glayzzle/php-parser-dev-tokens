[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ImportExport",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Import",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ImportExport",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Import",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ErrorProcessing",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProcessingError",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ImportExport",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Import",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ErrorProcessing",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProcessingErrorAggregatorInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResourceConnection",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Import entity abstract model\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",16],["T_ABSTRACT","abstract",17],["T_WHITESPACE"," ",17],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","AbstractEntity",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * Custom row import behavior column name\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","COLUMN_ACTION",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'_action'",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Value in custom column for delete behaviour\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","COLUMN_ACTION_VALUE_DELETE",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'delete'",27],";",["T_WHITESPACE","\n\n    ",27],["T_COMMENT","\/**#@+\n     * XML paths to parameters\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","XML_PATH_BUNCH_SIZE",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'import\/format_v2\/bunch_size'",32],";",["T_WHITESPACE","\n\n    ",32],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","XML_PATH_PAGE_SIZE",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'import\/format_v2\/page_size'",34],";",["T_WHITESPACE","\n\n    ",34],["T_COMMENT","\/**#@-*\/",36],["T_WHITESPACE","\n\n    ",36],["T_COMMENT","\/**#@+\n     * Database constants\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","DB_MAX_VARCHAR_LENGTH",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_LNUMBER","256",41],";",["T_WHITESPACE","\n\n    ",41],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","DB_MAX_TEXT_LENGTH",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","65536",43],";",["T_WHITESPACE","\n\n    ",43],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","ERROR_CODE_SYSTEM_EXCEPTION",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'systemException'",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","ERROR_CODE_COLUMN_NOT_FOUND",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'columnNotFound'",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","ERROR_CODE_COLUMN_EMPTY_HEADER",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'columnEmptyHeader'",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","ERROR_CODE_COLUMN_NAME_INVALID",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'columnNameInvalid'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","ERROR_CODE_ATTRIBUTE_NOT_VALID",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'attributeNotInvalid'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","ERROR_CODE_DUPLICATE_UNIQUE_ATTRIBUTE",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'duplicateUniqueAttribute'",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","ERROR_CODE_ILLEGAL_CHARACTERS",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'illegalCharacters'",51],";",["T_WHITESPACE","\n    ",51],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","ERROR_CODE_INVALID_ATTRIBUTE",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'invalidAttributeName'",52],";",["T_WHITESPACE","\n    ",52],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","ERROR_CODE_WRONG_QUOTES",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'wrongQuotes'",53],";",["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","ERROR_CODE_COLUMNS_NUMBER",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'wrongColumnsNumber'",54],";",["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","ERROR_EXCEEDED_MAX_LENGTH",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'exceededMaxLength'",55],";",["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","ERROR_INVALID_ATTRIBUTE_TYPE",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'invalidAttributeType'",56],";",["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","ERROR_INVALID_ATTRIBUTE_OPTION",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'absentAttributeOption'",57],";",["T_WHITESPACE","\n\n    ",57],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$errorMessageTemplates",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[",["T_WHITESPACE","\n        ",59],["T_STRING","self",60],["T_DOUBLE_COLON","::",60],["T_STRING","ERROR_CODE_SYSTEM_EXCEPTION",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'General system exception happened'",60],",",["T_WHITESPACE","\n        ",60],["T_STRING","self",61],["T_DOUBLE_COLON","::",61],["T_STRING","ERROR_CODE_COLUMN_NOT_FOUND",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find required columns: %s.'",61],",",["T_WHITESPACE","\n        ",61],["T_STRING","self",62],["T_DOUBLE_COLON","::",62],["T_STRING","ERROR_CODE_COLUMN_EMPTY_HEADER",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Columns number: \"%s\" have empty headers'",62],",",["T_WHITESPACE","\n        ",62],["T_STRING","self",63],["T_DOUBLE_COLON","::",63],["T_STRING","ERROR_CODE_COLUMN_NAME_INVALID",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'Column names: \"%s\" are invalid'",63],",",["T_WHITESPACE","\n        ",63],["T_STRING","self",64],["T_DOUBLE_COLON","::",64],["T_STRING","ERROR_CODE_ATTRIBUTE_NOT_VALID",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"Please correct the value for '%s'\"",64],",",["T_WHITESPACE","\n        ",64],["T_STRING","self",65],["T_DOUBLE_COLON","::",65],["T_STRING","ERROR_CODE_DUPLICATE_UNIQUE_ATTRIBUTE",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","\"Duplicate Unique Attribute for '%s'\"",65],",",["T_WHITESPACE","\n        ",65],["T_STRING","self",66],["T_DOUBLE_COLON","::",66],["T_STRING","ERROR_CODE_ILLEGAL_CHARACTERS",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","\"Illegal character used for attribute %s\"",66],",",["T_WHITESPACE","\n        ",66],["T_STRING","self",67],["T_DOUBLE_COLON","::",67],["T_STRING","ERROR_CODE_INVALID_ATTRIBUTE",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Header contains invalid attribute(s): \"%s\"'",67],",",["T_WHITESPACE","\n        ",67],["T_STRING","self",68],["T_DOUBLE_COLON","::",68],["T_STRING","ERROR_CODE_WRONG_QUOTES",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","\"Curly quotes used instead of straight quotes\"",68],",",["T_WHITESPACE","\n        ",68],["T_STRING","self",69],["T_DOUBLE_COLON","::",69],["T_STRING","ERROR_CODE_COLUMNS_NUMBER",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","\"Number of columns does not correspond to the number of rows in the header\"",69],",",["T_WHITESPACE","\n        ",69],["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","ERROR_EXCEEDED_MAX_LENGTH",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Attribute %s exceeded max length'",70],",",["T_WHITESPACE","\n        ",70],["T_STRING","self",71],["T_DOUBLE_COLON","::",71],["T_STRING","ERROR_INVALID_ATTRIBUTE_TYPE",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'Value for \\'%s\\' attribute contains incorrect value'",72],",",["T_WHITESPACE","\n        ",72],["T_STRING","self",73],["T_DOUBLE_COLON","::",73],["T_STRING","ERROR_INVALID_ATTRIBUTE_OPTION",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE","\n            ",73],["T_CONSTANT_ENCAPSED_STRING","\"Value for %s attribute contains incorrect value, see acceptable values on settings specified for Admin\"",74],",",["T_WHITESPACE","\n    ",74],"]",";",["T_WHITESPACE","\n\n    ",75],["T_COMMENT","\/**#@-*\/",77],["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * DB connection\n     *\n     * @var \\Magento\\Framework\\DB\\Adapter\\AdapterInterface\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_connection",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Has data process validation done?\n     *\n     * @var bool\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_dataValidated",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","false",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Valid column names\n     *\n     * @array\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$validColumnNames",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[","]",";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * If we should check column names\n     *\n     * @var bool\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$needColumnCheck",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","false",105],";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * DB data source model\n     *\n     * @var \\Magento\\ImportExport\\Model\\ResourceModel\\Import\\Data\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$_dataSourceModel",112],";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * @var ProcessingErrorAggregatorInterface\n     *\/",114],["T_WHITESPACE","\n    ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$errorAggregator",117],";",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Flag to disable import\n     *\n     * @var bool\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$_importAllowed",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","true",124],";",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Magento string lib\n     *\n     * @var \\Magento\\Framework\\Stdlib\\StringUtils\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$string",131],";",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Entity model parameters\n     *\n     * @var array\n     *\/",133],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$_parameters",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],"[","]",";",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning\n     *\n     * @var string[]\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_PROTECTED","protected",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$_specialAttributes",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],"[",["T_STRING","self",145],["T_DOUBLE_COLON","::",145],["T_STRING","COLUMN_ACTION",145],"]",";",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Permanent entity columns\n     *\n     * @var string[]\n     *\/",147],["T_WHITESPACE","\n    ",151],["T_PROTECTED","protected",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$_permanentAttributes",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],"[","]",";",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Number of entities processed by validation\n     *\n     * @var int\n     *\/",154],["T_WHITESPACE","\n    ",158],["T_PROTECTED","protected",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$_processedEntitiesCount",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_LNUMBER","0",159],";",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Number of rows processed by validation\n     *\n     * @var int\n     *\/",161],["T_WHITESPACE","\n    ",165],["T_PROTECTED","protected",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$_processedRowsCount",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_LNUMBER","0",166],";",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Need to log in import history\n     *\n     * @var bool\n     *\/",168],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$logInHistory",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","true",173],";",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Rows which will be skipped during import\n     *\n     * [Row number 1] => true,\n     * ...\n     * [Row number N] => true\n     *\n     * @var array\n     *\/",175],["T_WHITESPACE","\n    ",183],["T_PROTECTED","protected",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$_skippedRows",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],"[","]",";",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Array of numbers of validated rows as keys and boolean TRUE as values\n     *\n     * @var array\n     *\/",186],["T_WHITESPACE","\n    ",190],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$_validatedRows",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],"[","]",";",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * Source model\n     *\n     * @var AbstractSource\n     *\/",193],["T_WHITESPACE","\n    ",197],["T_PROTECTED","protected",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$_source",198],";",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Array of unique attributes\n     *\n     * @var array\n     *\/",200],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$_uniqueAttributes",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],"[","]",";",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * List of available behaviors\n     *\n     * @var string[]\n     *\/",207],["T_WHITESPACE","\n    ",211],["T_PROTECTED","protected",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$_availableBehaviors",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],"[",["T_WHITESPACE","\n        ",212],["T_NS_SEPARATOR","\\",213],["T_STRING","Magento",213],["T_NS_SEPARATOR","\\",213],["T_STRING","ImportExport",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Model",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Import",213],["T_DOUBLE_COLON","::",213],["T_STRING","BEHAVIOR_ADD_UPDATE",213],",",["T_WHITESPACE","\n        ",213],["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","ImportExport",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Model",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Import",214],["T_DOUBLE_COLON","::",214],["T_STRING","BEHAVIOR_DELETE",214],",",["T_WHITESPACE","\n        ",214],["T_NS_SEPARATOR","\\",215],["T_STRING","Magento",215],["T_NS_SEPARATOR","\\",215],["T_STRING","ImportExport",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Model",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Import",215],["T_DOUBLE_COLON","::",215],["T_STRING","BEHAVIOR_CUSTOM",215],",",["T_WHITESPACE","\n    ",215],"]",";",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Number of items to fetch from db in one query\n     *\n     * @var int\n     *\/",218],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$_pageSize",223],";",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Maximum size of packet, that can be sent to DB\n     *\n     * @var int\n     *\/",225],["T_WHITESPACE","\n    ",229],["T_PROTECTED","protected",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$_maxDataSize",230],";",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Number of items to save to the db in one query\n     *\n     * @var int\n     *\/",232],["T_WHITESPACE","\n    ",236],["T_PROTECTED","protected",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$_bunchSize",237],";",["T_WHITESPACE","\n\n    ",237],["T_DOC_COMMENT","\/**\n     * Code of a primary attribute which identifies the entity group if import contains of multiple rows\n     *\n     * @var string\n     *\/",239],["T_WHITESPACE","\n    ",243],["T_PROTECTED","protected",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$masterAttributeCode",244],";",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",246],["T_WHITESPACE","\n    ",250],["T_PROTECTED","protected",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$_scopeConfig",251],";",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Count if created items\n     *\n     * @var int\n     *\/",253],["T_WHITESPACE","\n    ",257],["T_PROTECTED","protected",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$countItemsCreated",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_LNUMBER","0",258],";",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Count if updated items\n     *\n     * @var int\n     *\/",260],["T_WHITESPACE","\n    ",264],["T_PROTECTED","protected",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$countItemsUpdated",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_LNUMBER","0",265],";",["T_WHITESPACE","\n\n    ",265],["T_DOC_COMMENT","\/**\n     * Count if deleted items\n     *\n     * @var int\n     *\/",267],["T_WHITESPACE","\n    ",271],["T_PROTECTED","protected",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$countItemsDeleted",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_LNUMBER","0",272],";",["T_WHITESPACE","\n\n    ",272],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Stdlib\\StringUtils $string\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\ImportExport\\Model\\ImportFactory $importFactory\n     * @param \\Magento\\ImportExport\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param ProcessingErrorAggregatorInterface $errorAggregator\n     * @param array $data\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",274],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","__construct",284],"(",["T_WHITESPACE","\n        ",284],["T_NS_SEPARATOR","\\",285],["T_STRING","Magento",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Framework",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Stdlib",285],["T_NS_SEPARATOR","\\",285],["T_STRING","StringUtils",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$string",285],",",["T_WHITESPACE","\n        ",285],["T_NS_SEPARATOR","\\",286],["T_STRING","Magento",286],["T_NS_SEPARATOR","\\",286],["T_STRING","Framework",286],["T_NS_SEPARATOR","\\",286],["T_STRING","App",286],["T_NS_SEPARATOR","\\",286],["T_STRING","Config",286],["T_NS_SEPARATOR","\\",286],["T_STRING","ScopeConfigInterface",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$scopeConfig",286],",",["T_WHITESPACE","\n        ",286],["T_NS_SEPARATOR","\\",287],["T_STRING","Magento",287],["T_NS_SEPARATOR","\\",287],["T_STRING","ImportExport",287],["T_NS_SEPARATOR","\\",287],["T_STRING","Model",287],["T_NS_SEPARATOR","\\",287],["T_STRING","ImportFactory",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$importFactory",287],",",["T_WHITESPACE","\n        ",287],["T_NS_SEPARATOR","\\",288],["T_STRING","Magento",288],["T_NS_SEPARATOR","\\",288],["T_STRING","ImportExport",288],["T_NS_SEPARATOR","\\",288],["T_STRING","Model",288],["T_NS_SEPARATOR","\\",288],["T_STRING","ResourceModel",288],["T_NS_SEPARATOR","\\",288],["T_STRING","Helper",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$resourceHelper",288],",",["T_WHITESPACE","\n        ",288],["T_STRING","ResourceConnection",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$resource",289],",",["T_WHITESPACE","\n        ",289],["T_STRING","ProcessingErrorAggregatorInterface",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$errorAggregator",290],",",["T_WHITESPACE","\n        ",290],["T_ARRAY","array",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$data",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],"[","]",["T_WHITESPACE","\n    ",291],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_scopeConfig",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$scopeConfig",293],";",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_dataSourceModel",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_ISSET","isset",294],"(",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$data",295],"[",["T_CONSTANT_ENCAPSED_STRING","'data_source_model'",295],"]",["T_WHITESPACE","\n        ",295],")",["T_WHITESPACE"," ",296],"?",["T_WHITESPACE"," ",296],["T_VARIABLE","$data",296],"[",["T_CONSTANT_ENCAPSED_STRING","'data_source_model'",296],"]",["T_WHITESPACE"," ",296],":",["T_WHITESPACE"," ",296],["T_VARIABLE","$importFactory",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","create",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","getDataSourceModel",296],"(",")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_connection",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE","\n            ",297],["T_ISSET","isset",298],"(",["T_VARIABLE","$data",298],"[",["T_CONSTANT_ENCAPSED_STRING","'connection'",298],"]",")",["T_WHITESPACE"," ",298],"?",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$data",299],"[",["T_CONSTANT_ENCAPSED_STRING","'connection'",299],"]",["T_WHITESPACE"," ",299],":",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$resource",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getConnection",300],"(",")",";",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","string",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$string",301],";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_pageSize",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_ISSET","isset",302],"(",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$data",303],"[",["T_CONSTANT_ENCAPSED_STRING","'page_size'",303],"]",["T_WHITESPACE","\n        ",303],")",["T_WHITESPACE"," ",304],"?",["T_WHITESPACE"," ",304],["T_VARIABLE","$data",304],"[",["T_CONSTANT_ENCAPSED_STRING","'page_size'",304],"]",["T_WHITESPACE"," ",304],":",["T_WHITESPACE"," ",304],"(",["T_STATIC","static",304],["T_DOUBLE_COLON","::",304],["T_STRING","XML_PATH_PAGE_SIZE",304],["T_WHITESPACE"," ",304],"?",["T_WHITESPACE"," ",304],["T_INT_CAST","(int)",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_scopeConfig",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getValue",304],"(",["T_WHITESPACE","\n            ",304],["T_STATIC","static",305],["T_DOUBLE_COLON","::",305],["T_STRING","XML_PATH_PAGE_SIZE",305],",",["T_WHITESPACE","\n            ",305],["T_NS_SEPARATOR","\\",306],["T_STRING","Magento",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Store",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Model",306],["T_NS_SEPARATOR","\\",306],["T_STRING","ScopeInterface",306],["T_DOUBLE_COLON","::",306],["T_STRING","SCOPE_STORE",306],["T_WHITESPACE","\n        ",306],")",["T_WHITESPACE"," ",307],":",["T_WHITESPACE"," ",307],["T_LNUMBER","0",307],")",";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_maxDataSize",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_ISSET","isset",308],"(",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$data",309],"[",["T_CONSTANT_ENCAPSED_STRING","'max_data_size'",309],"]",["T_WHITESPACE","\n        ",309],")",["T_WHITESPACE"," ",310],"?",["T_WHITESPACE"," ",310],["T_VARIABLE","$data",310],"[",["T_CONSTANT_ENCAPSED_STRING","'max_data_size'",310],"]",["T_WHITESPACE"," ",310],":",["T_WHITESPACE"," ",310],["T_VARIABLE","$resourceHelper",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getMaxDataSize",310],"(",")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_bunchSize",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_ISSET","isset",311],"(",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$data",312],"[",["T_CONSTANT_ENCAPSED_STRING","'bunch_size'",312],"]",["T_WHITESPACE","\n        ",312],")",["T_WHITESPACE"," ",313],"?",["T_WHITESPACE"," ",313],["T_VARIABLE","$data",313],"[",["T_CONSTANT_ENCAPSED_STRING","'bunch_size'",313],"]",["T_WHITESPACE"," ",313],":",["T_WHITESPACE"," ",313],"(",["T_STATIC","static",313],["T_DOUBLE_COLON","::",313],["T_STRING","XML_PATH_BUNCH_SIZE",313],["T_WHITESPACE"," ",313],"?",["T_WHITESPACE"," ",313],["T_INT_CAST","(int)",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_scopeConfig",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getValue",313],"(",["T_WHITESPACE","\n            ",313],["T_STATIC","static",314],["T_DOUBLE_COLON","::",314],["T_STRING","XML_PATH_BUNCH_SIZE",314],",",["T_WHITESPACE","\n            ",314],["T_NS_SEPARATOR","\\",315],["T_STRING","Magento",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Store",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Model",315],["T_NS_SEPARATOR","\\",315],["T_STRING","ScopeInterface",315],["T_DOUBLE_COLON","::",315],["T_STRING","SCOPE_STORE",315],["T_WHITESPACE","\n        ",315],")",["T_WHITESPACE"," ",316],":",["T_WHITESPACE"," ",316],["T_LNUMBER","0",316],")",";",["T_WHITESPACE","\n\n        ",316],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","errorAggregator",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$errorAggregator",318],";",["T_WHITESPACE","\n\n        ",318],["T_FOREACH","foreach",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","errorMessageTemplates",320],["T_WHITESPACE"," ",320],["T_AS","as",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$errorCode",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$message",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getErrorAggregator",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","addErrorMessageTemplate",321],"(",["T_VARIABLE","$errorCode",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$message",321],")",";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n\n    ",323],["T_DOC_COMMENT","\/**\n     * @return ProcessingErrorAggregatorInterface\n     *\/",325],["T_WHITESPACE","\n    ",327],["T_PUBLIC","public",328],["T_WHITESPACE"," ",328],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],["T_STRING","getErrorAggregator",328],"(",")",["T_WHITESPACE","\n    ",328],"{",["T_WHITESPACE","\n        ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","errorAggregator",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_DOC_COMMENT","\/**\n     * Import data rows\n     *\n     * @abstract\n     * @return boolean\n     *\/",333],["T_WHITESPACE","\n    ",338],["T_ABSTRACT","abstract",339],["T_WHITESPACE"," ",339],["T_PROTECTED","protected",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","_importData",339],"(",")",";",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Imported entity type code getter\n     *\n     * @abstract\n     * @return string\n     *\/",341],["T_WHITESPACE","\n    ",346],["T_ABSTRACT","abstract",347],["T_WHITESPACE"," ",347],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","getEntityTypeCode",347],"(",")",";",["T_WHITESPACE","\n\n    ",347],["T_DOC_COMMENT","\/**\n     * Change row data before saving in DB table\n     *\n     * @param array $rowData\n     * @return array\n     *\/",349],["T_WHITESPACE","\n    ",354],["T_PROTECTED","protected",355],["T_WHITESPACE"," ",355],["T_FUNCTION","function",355],["T_WHITESPACE"," ",355],["T_STRING","_prepareRowForDb",355],"(",["T_ARRAY","array",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$rowData",355],")",["T_WHITESPACE","\n    ",355],"{",["T_WHITESPACE","\n        ",356],["T_DOC_COMMENT","\/**\n         * Convert all empty strings to null values, as\n         * a) we don't use empty string in DB\n         * b) empty strings instead of numeric values will product errors in Sql Server\n         *\/",357],["T_WHITESPACE","\n        ",361],["T_FOREACH","foreach",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$rowData",362],["T_WHITESPACE"," ",362],["T_AS","as",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$key",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$val",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$val",363],["T_WHITESPACE"," ",363],["T_IS_IDENTICAL","===",363],["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","''",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                ",363],["T_VARIABLE","$rowData",364],"[",["T_VARIABLE","$key",364],"]",["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","null",364],";",["T_WHITESPACE","\n            ",364],"}",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE","\n        ",366],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$rowData",367],";",["T_WHITESPACE","\n    ",367],"}",["T_WHITESPACE","\n\n    ",368],["T_DOC_COMMENT","\/**\n     * Add errors to error aggregator\n     *\n     * @param string $code\n     * @param array|mixed $errors\n     * @return void\n     *\/",370],["T_WHITESPACE","\n    ",376],["T_PROTECTED","protected",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","addErrors",377],"(",["T_VARIABLE","$code",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$errors",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$errors",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getErrorAggregator",380],"(",")",["T_OBJECT_OPERATOR","->",380],["T_STRING","addError",380],"(",["T_WHITESPACE","\n                ",380],["T_VARIABLE","$code",381],",",["T_WHITESPACE","\n                ",381],["T_STRING","ProcessingError",382],["T_DOUBLE_COLON","::",382],["T_STRING","ERROR_LEVEL_CRITICAL",382],",",["T_WHITESPACE","\n                ",382],["T_STRING","null",383],",",["T_WHITESPACE","\n                ",383],["T_STRING","implode",384],"(",["T_CONSTANT_ENCAPSED_STRING","'\", \"'",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$errors",384],")",["T_WHITESPACE","\n            ",384],")",";",["T_WHITESPACE","\n        ",385],"}",["T_WHITESPACE","\n    ",386],"}",["T_WHITESPACE","\n\n    ",387],["T_DOC_COMMENT","\/**\n     * Validate data rows and save bunches to DB\n     *\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",389],["T_WHITESPACE","\n    ",395],["T_PROTECTED","protected",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","_saveValidatedBunches",396],"(",")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$source",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getSource",398],"(",")",";",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$bunchRows",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],"[","]",";",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$startNewBunch",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_STRING","false",400],";",["T_WHITESPACE","\n\n        ",400],["T_VARIABLE","$source",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","rewind",402],"(",")",";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_dataSourceModel",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","cleanBunches",403],"(",")",";",["T_WHITESPACE","\n        ",403],["T_VARIABLE","$masterAttributeCode",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getMasterAttributeCode",404],"(",")",";",["T_WHITESPACE","\n\n        ",404],["T_WHILE","while",406],["T_WHITESPACE"," ",406],"(",["T_VARIABLE","$source",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","valid",406],"(",")",["T_WHITESPACE"," ",406],["T_BOOLEAN_OR","||",406],["T_WHITESPACE"," ",406],["T_STRING","count",406],"(",["T_VARIABLE","$bunchRows",406],")",["T_WHITESPACE"," ",406],["T_BOOLEAN_OR","||",406],["T_WHITESPACE"," ",406],["T_ISSET","isset",406],"(",["T_VARIABLE","$entityGroup",406],")",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n            ",406],["T_IF","if",407],["T_WHITESPACE"," ",407],"(",["T_VARIABLE","$startNewBunch",407],["T_WHITESPACE"," ",407],["T_BOOLEAN_OR","||",407],["T_WHITESPACE"," ",407],"!",["T_VARIABLE","$source",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","valid",407],"(",")",")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n                ",407],["T_COMMENT","\/* If the end approached add last validated entity group to the bunch *\/",408],["T_WHITESPACE","\n                ",408],["T_IF","if",409],["T_WHITESPACE"," ",409],"(","!",["T_VARIABLE","$source",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","valid",409],"(",")",["T_WHITESPACE"," ",409],["T_BOOLEAN_AND","&&",409],["T_WHITESPACE"," ",409],["T_ISSET","isset",409],"(",["T_VARIABLE","$entityGroup",409],")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n                    ",409],["T_FOREACH","foreach",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$entityGroup",410],["T_WHITESPACE"," ",410],["T_AS","as",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$key",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$value",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                        ",410],["T_VARIABLE","$bunchRows",411],"[",["T_VARIABLE","$key",411],"]",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$value",411],";",["T_WHITESPACE","\n                    ",411],"}",["T_WHITESPACE","\n                    ",412],["T_UNSET","unset",413],"(",["T_VARIABLE","$entityGroup",413],")",";",["T_WHITESPACE","\n                ",413],"}",["T_WHITESPACE","\n                ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_dataSourceModel",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","saveBunch",415],"(",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getEntityTypeCode",415],"(",")",",",["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getBehavior",415],"(",")",",",["T_WHITESPACE"," ",415],["T_VARIABLE","$bunchRows",415],")",";",["T_WHITESPACE","\n\n                ",415],["T_VARIABLE","$bunchRows",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],"[","]",";",["T_WHITESPACE","\n                ",417],["T_VARIABLE","$startNewBunch",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","false",418],";",["T_WHITESPACE","\n            ",418],"}",["T_WHITESPACE","\n            ",419],["T_IF","if",420],["T_WHITESPACE"," ",420],"(",["T_VARIABLE","$source",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","valid",420],"(",")",")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n                ",420],["T_VARIABLE","$valid",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","true",421],";",["T_WHITESPACE","\n                ",421],["T_TRY","try",422],["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                    ",422],["T_VARIABLE","$rowData",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$source",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","current",423],"(",")",";",["T_WHITESPACE","\n                    ",423],["T_FOREACH","foreach",424],["T_WHITESPACE"," ",424],"(",["T_VARIABLE","$rowData",424],["T_WHITESPACE"," ",424],["T_AS","as",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$attrName",424],["T_WHITESPACE"," ",424],["T_DOUBLE_ARROW","=>",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$element",424],")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                        ",424],["T_IF","if",425],["T_WHITESPACE"," ",425],"(","!",["T_STRING","mb_check_encoding",425],"(",["T_VARIABLE","$element",425],",",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",425],")",")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                            ",425],["T_VARIABLE","$valid",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_STRING","false",426],";",["T_WHITESPACE","\n                            ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","addRowError",427],"(",["T_WHITESPACE","\n                                ",427],["T_STRING","AbstractEntity",428],["T_DOUBLE_COLON","::",428],["T_STRING","ERROR_CODE_ILLEGAL_CHARACTERS",428],",",["T_WHITESPACE","\n                                ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","_processedRowsCount",429],",",["T_WHITESPACE","\n                                ",429],["T_VARIABLE","$attrName",430],["T_WHITESPACE","\n                            ",430],")",";",["T_WHITESPACE","\n                        ",431],"}",["T_WHITESPACE","\n                    ",432],"}",["T_WHITESPACE","\n                ",433],"}",["T_WHITESPACE"," ",434],["T_CATCH","catch",434],["T_WHITESPACE"," ",434],"(",["T_NS_SEPARATOR","\\",434],["T_STRING","InvalidArgumentException",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$e",434],")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n                    ",434],["T_VARIABLE","$valid",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_STRING","false",435],";",["T_WHITESPACE","\n                    ",435],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","addRowError",436],"(",["T_VARIABLE","$e",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getMessage",436],"(",")",",",["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_processedRowsCount",436],")",";",["T_WHITESPACE","\n                ",436],"}",["T_WHITESPACE","\n                ",437],["T_IF","if",438],["T_WHITESPACE"," ",438],"(","!",["T_VARIABLE","$valid",438],")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                    ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_processedRowsCount",439],["T_INC","++",439],";",["T_WHITESPACE","\n                    ",439],["T_VARIABLE","$source",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","next",440],"(",")",";",["T_WHITESPACE","\n                    ",440],["T_CONTINUE","continue",441],";",["T_WHITESPACE","\n                ",441],"}",["T_WHITESPACE","\n\n                ",442],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_ISSET","isset",444],"(",["T_VARIABLE","$rowData",444],"[",["T_VARIABLE","$masterAttributeCode",444],"]",")",["T_WHITESPACE"," ",444],["T_BOOLEAN_AND","&&",444],["T_WHITESPACE"," ",444],["T_STRING","trim",444],"(",["T_VARIABLE","$rowData",444],"[",["T_VARIABLE","$masterAttributeCode",444],"]",")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                    ",444],["T_COMMENT","\/* Add entity group that passed validation to bunch *\/",445],["T_WHITESPACE","\n                    ",445],["T_IF","if",446],["T_WHITESPACE"," ",446],"(",["T_ISSET","isset",446],"(",["T_VARIABLE","$entityGroup",446],")",")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n                        ",446],["T_FOREACH","foreach",447],["T_WHITESPACE"," ",447],"(",["T_VARIABLE","$entityGroup",447],["T_WHITESPACE"," ",447],["T_AS","as",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$key",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$value",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n                            ",447],["T_VARIABLE","$bunchRows",448],"[",["T_VARIABLE","$key",448],"]",["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$value",448],";",["T_WHITESPACE","\n                        ",448],"}",["T_WHITESPACE","\n                        ",449],["T_VARIABLE","$productDataSize",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_STRING","strlen",450],"(",["T_STRING","serialize",450],"(",["T_VARIABLE","$bunchRows",450],")",")",";",["T_WHITESPACE","\n\n                        ",450],["T_COMMENT","\/* Check if the new bunch should be started *\/",452],["T_WHITESPACE","\n                        ",452],["T_VARIABLE","$isBunchSizeExceeded",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_bunchSize",453],["T_WHITESPACE"," ",453],">",["T_WHITESPACE"," ",453],["T_LNUMBER","0",453],["T_WHITESPACE"," ",453],["T_BOOLEAN_AND","&&",453],["T_WHITESPACE"," ",453],["T_STRING","count",453],"(",["T_VARIABLE","$bunchRows",453],")",["T_WHITESPACE"," ",453],["T_IS_GREATER_OR_EQUAL",">=",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_bunchSize",453],")",";",["T_WHITESPACE","\n                        ",453],["T_VARIABLE","$startNewBunch",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$productDataSize",454],["T_WHITESPACE"," ",454],["T_IS_GREATER_OR_EQUAL",">=",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","_maxDataSize",454],["T_WHITESPACE"," ",454],["T_BOOLEAN_OR","||",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$isBunchSizeExceeded",454],";",["T_WHITESPACE","\n                    ",454],"}",["T_WHITESPACE","\n\n                    ",455],["T_COMMENT","\/* And start a new one *\/",457],["T_WHITESPACE","\n                    ",457],["T_VARIABLE","$entityGroup",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],"[","]",";",["T_WHITESPACE","\n                ",458],"}",["T_WHITESPACE","\n\n                ",459],["T_IF","if",461],["T_WHITESPACE"," ",461],"(",["T_ISSET","isset",461],"(",["T_VARIABLE","$entityGroup",461],")",["T_WHITESPACE"," ",461],["T_BOOLEAN_AND","&&",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","validateRow",461],"(",["T_VARIABLE","$rowData",461],",",["T_WHITESPACE"," ",461],["T_VARIABLE","$source",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","key",461],"(",")",")",")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n                    ",461],["T_COMMENT","\/* Add row to entity group *\/",462],["T_WHITESPACE","\n                    ",462],["T_VARIABLE","$entityGroup",463],"[",["T_VARIABLE","$source",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","key",463],"(",")","]",["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_prepareRowForDb",463],"(",["T_VARIABLE","$rowData",463],")",";",["T_WHITESPACE","\n                ",463],"}",["T_WHITESPACE"," ",464],["T_ELSEIF","elseif",464],["T_WHITESPACE"," ",464],"(",["T_ISSET","isset",464],"(",["T_VARIABLE","$entityGroup",464],")",")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n                    ",464],["T_COMMENT","\/* In case validation of one line of the group fails kill the entire group *\/",465],["T_WHITESPACE","\n                    ",465],["T_UNSET","unset",466],"(",["T_VARIABLE","$entityGroup",466],")",";",["T_WHITESPACE","\n                ",466],"}",["T_WHITESPACE","\n\n                ",467],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_processedRowsCount",469],["T_INC","++",469],";",["T_WHITESPACE","\n                ",469],["T_VARIABLE","$source",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","next",470],"(",")",";",["T_WHITESPACE","\n            ",470],"}",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n        ",472],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$this",473],";",["T_WHITESPACE","\n    ",473],"}",["T_WHITESPACE","\n\n    ",474],["T_DOC_COMMENT","\/**\n     * Add error with corresponding current data source row number.\n     *\n     * @param string $errorCode Error code or simply column name\n     * @param int $errorRowNum Row number.\n     * @param string $colName OPTIONAL Column name.\n     * @param string $errorMessage OPTIONAL Column name.\n     * @param string $errorLevel\n     * @param string $errorDescription\n     * @return $this\n     *\/",476],["T_WHITESPACE","\n    ",486],["T_PUBLIC","public",487],["T_WHITESPACE"," ",487],["T_FUNCTION","function",487],["T_WHITESPACE"," ",487],["T_STRING","addRowError",487],"(",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$errorCode",488],",",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$errorRowNum",489],",",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$colName",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","null",490],",",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$errorMessage",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_STRING","null",491],",",["T_WHITESPACE","\n        ",491],["T_VARIABLE","$errorLevel",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_STRING","ProcessingError",492],["T_DOUBLE_COLON","::",492],["T_STRING","ERROR_LEVEL_CRITICAL",492],",",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$errorDescription",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_STRING","null",493],["T_WHITESPACE","\n    ",493],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$errorCode",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_STRING_CAST","(string)",495],["T_VARIABLE","$errorCode",495],";",["T_WHITESPACE","\n        ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getErrorAggregator",496],"(",")",["T_OBJECT_OPERATOR","->",496],["T_STRING","addError",496],"(",["T_WHITESPACE","\n            ",496],["T_VARIABLE","$errorCode",497],",",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$errorLevel",498],",",["T_WHITESPACE","\n            ",498],["T_VARIABLE","$errorRowNum",499],",",["T_WHITESPACE","\n            ",499],["T_VARIABLE","$colName",500],",",["T_WHITESPACE","\n            ",500],["T_VARIABLE","$errorMessage",501],",",["T_WHITESPACE","\n            ",501],["T_VARIABLE","$errorDescription",502],["T_WHITESPACE","\n        ",502],")",";",["T_WHITESPACE","\n\n        ",503],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_DOC_COMMENT","\/**\n     * Add message template for specific error code from outside\n     *\n     * @param string $errorCode Error code\n     * @param string $message Message template\n     * @return $this\n     *\/",508],["T_WHITESPACE","\n    ",514],["T_PUBLIC","public",515],["T_WHITESPACE"," ",515],["T_FUNCTION","function",515],["T_WHITESPACE"," ",515],["T_STRING","addMessageTemplate",515],"(",["T_VARIABLE","$errorCode",515],",",["T_WHITESPACE"," ",515],["T_VARIABLE","$message",515],")",["T_WHITESPACE","\n    ",515],"{",["T_WHITESPACE","\n        ",516],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","getErrorAggregator",517],"(",")",["T_OBJECT_OPERATOR","->",517],["T_STRING","addErrorMessageTemplate",517],"(",["T_VARIABLE","$errorCode",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$message",517],")",";",["T_WHITESPACE","\n\n        ",517],["T_RETURN","return",519],["T_WHITESPACE"," ",519],["T_VARIABLE","$this",519],";",["T_WHITESPACE","\n    ",519],"}",["T_WHITESPACE","\n\n    ",520],["T_DOC_COMMENT","\/**\n     * Import behavior getter\n     *\n     * @param array $rowData\n     * @return string\n     *\/",522],["T_WHITESPACE","\n    ",527],["T_PUBLIC","public",528],["T_WHITESPACE"," ",528],["T_FUNCTION","function",528],["T_WHITESPACE"," ",528],["T_STRING","getBehavior",528],"(",["T_ARRAY","array",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$rowData",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_STRING","null",528],")",["T_WHITESPACE","\n    ",528],"{",["T_WHITESPACE","\n        ",529],["T_IF","if",530],["T_WHITESPACE"," ",530],"(",["T_ISSET","isset",530],"(",["T_WHITESPACE","\n            ",530],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","_parameters",531],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",531],"]",["T_WHITESPACE","\n        ",531],")",["T_WHITESPACE"," ",532],["T_BOOLEAN_AND","&&",532],["T_WHITESPACE"," ",532],["T_STRING","in_array",532],"(",["T_WHITESPACE","\n            ",532],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_parameters",533],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",533],"]",",",["T_WHITESPACE","\n            ",533],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","_availableBehaviors",534],["T_WHITESPACE","\n        ",534],")",["T_WHITESPACE","\n        ",535],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n            ",536],["T_VARIABLE","$behavior",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","_parameters",537],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",537],"]",";",["T_WHITESPACE","\n            ",537],["T_IF","if",538],["T_WHITESPACE"," ",538],"(",["T_VARIABLE","$rowData",538],["T_WHITESPACE"," ",538],["T_IS_NOT_IDENTICAL","!==",538],["T_WHITESPACE"," ",538],["T_STRING","null",538],["T_WHITESPACE"," ",538],["T_BOOLEAN_AND","&&",538],["T_WHITESPACE"," ",538],["T_VARIABLE","$behavior",538],["T_WHITESPACE"," ",538],["T_IS_EQUAL","==",538],["T_WHITESPACE"," ",538],["T_NS_SEPARATOR","\\",538],["T_STRING","Magento",538],["T_NS_SEPARATOR","\\",538],["T_STRING","ImportExport",538],["T_NS_SEPARATOR","\\",538],["T_STRING","Model",538],["T_NS_SEPARATOR","\\",538],["T_STRING","Import",538],["T_DOUBLE_COLON","::",538],["T_STRING","BEHAVIOR_CUSTOM",538],")",["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n                ",538],["T_COMMENT","\/\/ try analyze value in self::COLUMN_CUSTOM column and return behavior for given $rowData\n",539],["T_WHITESPACE","                ",540],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_STRING","array_key_exists",540],"(",["T_STRING","self",540],["T_DOUBLE_COLON","::",540],["T_STRING","COLUMN_ACTION",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$rowData",540],")",")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n                    ",540],["T_IF","if",541],["T_WHITESPACE"," ",541],"(",["T_STRING","strtolower",541],"(",["T_VARIABLE","$rowData",541],"[",["T_STRING","self",541],["T_DOUBLE_COLON","::",541],["T_STRING","COLUMN_ACTION",541],"]",")",["T_WHITESPACE"," ",541],["T_IS_EQUAL","==",541],["T_WHITESPACE"," ",541],["T_STRING","self",541],["T_DOUBLE_COLON","::",541],["T_STRING","COLUMN_ACTION_VALUE_DELETE",541],")",["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n                        ",541],["T_VARIABLE","$behavior",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_NS_SEPARATOR","\\",542],["T_STRING","Magento",542],["T_NS_SEPARATOR","\\",542],["T_STRING","ImportExport",542],["T_NS_SEPARATOR","\\",542],["T_STRING","Model",542],["T_NS_SEPARATOR","\\",542],["T_STRING","Import",542],["T_DOUBLE_COLON","::",542],["T_STRING","BEHAVIOR_DELETE",542],";",["T_WHITESPACE","\n                    ",542],"}",["T_WHITESPACE"," ",543],["T_ELSE","else",543],["T_WHITESPACE"," ",543],"{",["T_WHITESPACE","\n                        ",543],["T_COMMENT","\/\/ as per task description, if column value is different to self::COLUMN_CUSTOM_VALUE_DELETE,\n",544],["T_WHITESPACE","                        ",545],["T_COMMENT","\/\/ we should always use default behavior\n",545],["T_WHITESPACE","                        ",546],["T_RETURN","return",546],["T_WHITESPACE"," ",546],["T_STRING","self",546],["T_DOUBLE_COLON","::",546],["T_STRING","getDefaultBehavior",546],"(",")",";",["T_WHITESPACE","\n                    ",546],"}",["T_WHITESPACE","\n                    ",547],["T_IF","if",548],["T_WHITESPACE"," ",548],"(",["T_STRING","in_array",548],"(",["T_VARIABLE","$behavior",548],",",["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_availableBehaviors",548],")",")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n                        ",548],["T_RETURN","return",549],["T_WHITESPACE"," ",549],["T_VARIABLE","$behavior",549],";",["T_WHITESPACE","\n                    ",549],"}",["T_WHITESPACE","\n                ",550],"}",["T_WHITESPACE","\n            ",551],"}",["T_WHITESPACE"," ",552],["T_ELSE","else",552],["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n                ",552],["T_COMMENT","\/\/ if method is invoked without $rowData we should just return $this->_parameters['behavior']\n",553],["T_WHITESPACE","                ",554],["T_RETURN","return",554],["T_WHITESPACE"," ",554],["T_VARIABLE","$behavior",554],";",["T_WHITESPACE","\n            ",554],"}",["T_WHITESPACE","\n        ",555],"}",["T_WHITESPACE","\n\n        ",556],["T_RETURN","return",558],["T_WHITESPACE"," ",558],["T_STRING","self",558],["T_DOUBLE_COLON","::",558],["T_STRING","getDefaultBehavior",558],"(",")",";",["T_WHITESPACE","\n    ",558],"}",["T_WHITESPACE","\n\n    ",559],["T_DOC_COMMENT","\/**\n     * Get default import behavior\n     *\n     * @return string\n     *\/",561],["T_WHITESPACE","\n    ",565],["T_PUBLIC","public",566],["T_WHITESPACE"," ",566],["T_STATIC","static",566],["T_WHITESPACE"," ",566],["T_FUNCTION","function",566],["T_WHITESPACE"," ",566],["T_STRING","getDefaultBehavior",566],"(",")",["T_WHITESPACE","\n    ",566],"{",["T_WHITESPACE","\n        ",567],["T_RETURN","return",568],["T_WHITESPACE"," ",568],["T_NS_SEPARATOR","\\",568],["T_STRING","Magento",568],["T_NS_SEPARATOR","\\",568],["T_STRING","ImportExport",568],["T_NS_SEPARATOR","\\",568],["T_STRING","Model",568],["T_NS_SEPARATOR","\\",568],["T_STRING","Import",568],["T_DOUBLE_COLON","::",568],["T_STRING","BEHAVIOR_ADD_UPDATE",568],";",["T_WHITESPACE","\n    ",568],"}",["T_WHITESPACE","\n\n    ",569],["T_DOC_COMMENT","\/**\n     * Returns number of checked entities\n     *\n     * @return int\n     *\/",571],["T_WHITESPACE","\n    ",575],["T_PUBLIC","public",576],["T_WHITESPACE"," ",576],["T_FUNCTION","function",576],["T_WHITESPACE"," ",576],["T_STRING","getProcessedEntitiesCount",576],"(",")",["T_WHITESPACE","\n    ",576],"{",["T_WHITESPACE","\n        ",577],["T_RETURN","return",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","_processedEntitiesCount",578],";",["T_WHITESPACE","\n    ",578],"}",["T_WHITESPACE","\n\n    ",579],["T_DOC_COMMENT","\/**\n     * Returns number of checked rows\n     *\n     * @return int\n     *\/",581],["T_WHITESPACE","\n    ",585],["T_PUBLIC","public",586],["T_WHITESPACE"," ",586],["T_FUNCTION","function",586],["T_WHITESPACE"," ",586],["T_STRING","getProcessedRowsCount",586],"(",")",["T_WHITESPACE","\n    ",586],"{",["T_WHITESPACE","\n        ",587],["T_RETURN","return",588],["T_WHITESPACE"," ",588],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","_processedRowsCount",588],";",["T_WHITESPACE","\n    ",588],"}",["T_WHITESPACE","\n\n    ",589],["T_DOC_COMMENT","\/**\n     * Source object getter\n     *\n     * @return AbstractSource\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",591],["T_WHITESPACE","\n    ",596],["T_PUBLIC","public",597],["T_WHITESPACE"," ",597],["T_FUNCTION","function",597],["T_WHITESPACE"," ",597],["T_STRING","getSource",597],"(",")",["T_WHITESPACE","\n    ",597],"{",["T_WHITESPACE","\n        ",598],["T_IF","if",599],["T_WHITESPACE"," ",599],"(","!",["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","_source",599],")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n            ",599],["T_THROW","throw",600],["T_WHITESPACE"," ",600],["T_NEW","new",600],["T_WHITESPACE"," ",600],["T_NS_SEPARATOR","\\",600],["T_STRING","Magento",600],["T_NS_SEPARATOR","\\",600],["T_STRING","Framework",600],["T_NS_SEPARATOR","\\",600],["T_STRING","Exception",600],["T_NS_SEPARATOR","\\",600],["T_STRING","LocalizedException",600],"(",["T_STRING","__",600],"(",["T_CONSTANT_ENCAPSED_STRING","'The source is not set.'",600],")",")",";",["T_WHITESPACE","\n        ",600],"}",["T_WHITESPACE","\n        ",601],["T_RETURN","return",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","_source",602],";",["T_WHITESPACE","\n    ",602],"}",["T_WHITESPACE","\n\n    ",603],["T_DOC_COMMENT","\/**\n     * Import process start\n     *\n     * @return bool Result of operation\n     *\/",605],["T_WHITESPACE","\n    ",609],["T_PUBLIC","public",610],["T_WHITESPACE"," ",610],["T_FUNCTION","function",610],["T_WHITESPACE"," ",610],["T_STRING","importData",610],"(",")",["T_WHITESPACE","\n    ",610],"{",["T_WHITESPACE","\n        ",611],["T_RETURN","return",612],["T_WHITESPACE"," ",612],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","_importData",612],"(",")",";",["T_WHITESPACE","\n    ",612],"}",["T_WHITESPACE","\n\n    ",613],["T_DOC_COMMENT","\/**\n     * Is attribute contains particular data (not plain entity attribute)\n     *\n     * @param string $attributeCode\n     * @return bool\n     *\/",615],["T_WHITESPACE","\n    ",620],["T_PUBLIC","public",621],["T_WHITESPACE"," ",621],["T_FUNCTION","function",621],["T_WHITESPACE"," ",621],["T_STRING","isAttributeParticular",621],"(",["T_VARIABLE","$attributeCode",621],")",["T_WHITESPACE","\n    ",621],"{",["T_WHITESPACE","\n        ",622],["T_RETURN","return",623],["T_WHITESPACE"," ",623],["T_STRING","in_array",623],"(",["T_VARIABLE","$attributeCode",623],",",["T_WHITESPACE"," ",623],["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","_specialAttributes",623],")",";",["T_WHITESPACE","\n    ",623],"}",["T_WHITESPACE","\n\n    ",624],["T_DOC_COMMENT","\/**\n     * @return string the master attribute code to use in an import\n     *\/",626],["T_WHITESPACE","\n    ",628],["T_PUBLIC","public",629],["T_WHITESPACE"," ",629],["T_FUNCTION","function",629],["T_WHITESPACE"," ",629],["T_STRING","getMasterAttributeCode",629],"(",")",["T_WHITESPACE","\n    ",629],"{",["T_WHITESPACE","\n        ",630],["T_RETURN","return",631],["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","masterAttributeCode",631],";",["T_WHITESPACE","\n    ",631],"}",["T_WHITESPACE","\n\n    ",632],["T_DOC_COMMENT","\/**\n     * Check one attribute can be overridden in child\n     *\n     * @param string $attributeCode Attribute code\n     * @param array $attributeParams Attribute params\n     * @param array $rowData Row data\n     * @param int $rowNumber\n     * @return bool\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",634],["T_WHITESPACE","\n    ",643],["T_PUBLIC","public",644],["T_WHITESPACE"," ",644],["T_FUNCTION","function",644],["T_WHITESPACE"," ",644],["T_STRING","isAttributeValid",644],"(",["T_VARIABLE","$attributeCode",644],",",["T_WHITESPACE"," ",644],["T_ARRAY","array",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$attributeParams",644],",",["T_WHITESPACE"," ",644],["T_ARRAY","array",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$rowData",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$rowNumber",644],")",["T_WHITESPACE","\n    ",644],"{",["T_WHITESPACE","\n        ",645],["T_VARIABLE","$message",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],["T_CONSTANT_ENCAPSED_STRING","''",646],";",["T_WHITESPACE","\n        ",646],["T_SWITCH","switch",647],["T_WHITESPACE"," ",647],"(",["T_VARIABLE","$attributeParams",647],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",647],"]",")",["T_WHITESPACE"," ",647],"{",["T_WHITESPACE","\n            ",647],["T_CASE","case",648],["T_WHITESPACE"," ",648],["T_CONSTANT_ENCAPSED_STRING","'varchar'",648],":",["T_WHITESPACE","\n                ",648],["T_VARIABLE","$value",649],["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","string",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","cleanString",649],"(",["T_VARIABLE","$rowData",649],"[",["T_VARIABLE","$attributeCode",649],"]",")",";",["T_WHITESPACE","\n                ",649],["T_VARIABLE","$valid",650],["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","string",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","strlen",650],"(",["T_VARIABLE","$value",650],")",["T_WHITESPACE"," ",650],"<",["T_WHITESPACE"," ",650],["T_STRING","self",650],["T_DOUBLE_COLON","::",650],["T_STRING","DB_MAX_VARCHAR_LENGTH",650],";",["T_WHITESPACE","\n                ",650],["T_VARIABLE","$message",651],["T_WHITESPACE"," ",651],"=",["T_WHITESPACE"," ",651],["T_STRING","self",651],["T_DOUBLE_COLON","::",651],["T_STRING","ERROR_EXCEEDED_MAX_LENGTH",651],";",["T_WHITESPACE","\n                ",651],["T_BREAK","break",652],";",["T_WHITESPACE","\n            ",652],["T_CASE","case",653],["T_WHITESPACE"," ",653],["T_CONSTANT_ENCAPSED_STRING","'decimal'",653],":",["T_WHITESPACE","\n                ",653],["T_VARIABLE","$value",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_STRING","trim",654],"(",["T_VARIABLE","$rowData",654],"[",["T_VARIABLE","$attributeCode",654],"]",")",";",["T_WHITESPACE","\n                ",654],["T_VARIABLE","$valid",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_DOUBLE_CAST","(double)",655],["T_VARIABLE","$value",655],["T_WHITESPACE"," ",655],["T_IS_EQUAL","==",655],["T_WHITESPACE"," ",655],["T_VARIABLE","$value",655],["T_WHITESPACE"," ",655],["T_BOOLEAN_AND","&&",655],["T_WHITESPACE"," ",655],["T_STRING","is_numeric",655],"(",["T_VARIABLE","$value",655],")",";",["T_WHITESPACE","\n                ",655],["T_VARIABLE","$message",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_STRING","self",656],["T_DOUBLE_COLON","::",656],["T_STRING","ERROR_INVALID_ATTRIBUTE_TYPE",656],";",["T_WHITESPACE","\n                ",656],["T_BREAK","break",657],";",["T_WHITESPACE","\n            ",657],["T_CASE","case",658],["T_WHITESPACE"," ",658],["T_CONSTANT_ENCAPSED_STRING","'select'",658],":",["T_WHITESPACE","\n            ",658],["T_CASE","case",659],["T_WHITESPACE"," ",659],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",659],":",["T_WHITESPACE","\n                ",659],["T_VARIABLE","$valid",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_ISSET","isset",660],"(",["T_VARIABLE","$attributeParams",660],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",660],"]","[",["T_STRING","strtolower",660],"(",["T_VARIABLE","$rowData",660],"[",["T_VARIABLE","$attributeCode",660],"]",")","]",")",";",["T_WHITESPACE","\n                ",660],["T_VARIABLE","$message",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_STRING","self",661],["T_DOUBLE_COLON","::",661],["T_STRING","ERROR_INVALID_ATTRIBUTE_OPTION",661],";",["T_WHITESPACE","\n                ",661],["T_BREAK","break",662],";",["T_WHITESPACE","\n            ",662],["T_CASE","case",663],["T_WHITESPACE"," ",663],["T_CONSTANT_ENCAPSED_STRING","'int'",663],":",["T_WHITESPACE","\n                ",663],["T_VARIABLE","$value",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_STRING","trim",664],"(",["T_VARIABLE","$rowData",664],"[",["T_VARIABLE","$attributeCode",664],"]",")",";",["T_WHITESPACE","\n                ",664],["T_VARIABLE","$valid",665],["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],["T_INT_CAST","(int)",665],["T_VARIABLE","$value",665],["T_WHITESPACE"," ",665],["T_IS_EQUAL","==",665],["T_WHITESPACE"," ",665],["T_VARIABLE","$value",665],["T_WHITESPACE"," ",665],["T_BOOLEAN_AND","&&",665],["T_WHITESPACE"," ",665],["T_STRING","is_numeric",665],"(",["T_VARIABLE","$value",665],")",";",["T_WHITESPACE","\n                ",665],["T_VARIABLE","$message",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_STRING","self",666],["T_DOUBLE_COLON","::",666],["T_STRING","ERROR_INVALID_ATTRIBUTE_TYPE",666],";",["T_WHITESPACE","\n                ",666],["T_BREAK","break",667],";",["T_WHITESPACE","\n            ",667],["T_CASE","case",668],["T_WHITESPACE"," ",668],["T_CONSTANT_ENCAPSED_STRING","'datetime'",668],":",["T_WHITESPACE","\n                ",668],["T_VARIABLE","$value",669],["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],["T_STRING","trim",669],"(",["T_VARIABLE","$rowData",669],"[",["T_VARIABLE","$attributeCode",669],"]",")",";",["T_WHITESPACE","\n                ",669],["T_VARIABLE","$valid",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_STRING","strtotime",670],"(",["T_VARIABLE","$value",670],")",["T_WHITESPACE"," ",670],["T_IS_NOT_IDENTICAL","!==",670],["T_WHITESPACE"," ",670],["T_STRING","false",670],";",["T_WHITESPACE","\n                ",670],["T_VARIABLE","$message",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_STRING","self",671],["T_DOUBLE_COLON","::",671],["T_STRING","ERROR_INVALID_ATTRIBUTE_TYPE",671],";",["T_WHITESPACE","\n                ",671],["T_BREAK","break",672],";",["T_WHITESPACE","\n            ",672],["T_CASE","case",673],["T_WHITESPACE"," ",673],["T_CONSTANT_ENCAPSED_STRING","'text'",673],":",["T_WHITESPACE","\n                ",673],["T_VARIABLE","$value",674],["T_WHITESPACE"," ",674],"=",["T_WHITESPACE"," ",674],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","string",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","cleanString",674],"(",["T_VARIABLE","$rowData",674],"[",["T_VARIABLE","$attributeCode",674],"]",")",";",["T_WHITESPACE","\n                ",674],["T_VARIABLE","$valid",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","string",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","strlen",675],"(",["T_VARIABLE","$value",675],")",["T_WHITESPACE"," ",675],"<",["T_WHITESPACE"," ",675],["T_STRING","self",675],["T_DOUBLE_COLON","::",675],["T_STRING","DB_MAX_TEXT_LENGTH",675],";",["T_WHITESPACE","\n                ",675],["T_VARIABLE","$message",676],["T_WHITESPACE"," ",676],"=",["T_WHITESPACE"," ",676],["T_STRING","self",676],["T_DOUBLE_COLON","::",676],["T_STRING","ERROR_EXCEEDED_MAX_LENGTH",676],";",["T_WHITESPACE","\n                ",676],["T_BREAK","break",677],";",["T_WHITESPACE","\n            ",677],["T_DEFAULT","default",678],":",["T_WHITESPACE","\n                ",678],["T_VARIABLE","$valid",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_STRING","true",679],";",["T_WHITESPACE","\n                ",679],["T_BREAK","break",680],";",["T_WHITESPACE","\n        ",680],"}",["T_WHITESPACE","\n\n        ",681],["T_IF","if",683],["T_WHITESPACE"," ",683],"(","!",["T_VARIABLE","$valid",683],")",["T_WHITESPACE"," ",683],"{",["T_WHITESPACE","\n            ",683],["T_IF","if",684],["T_WHITESPACE"," ",684],"(",["T_VARIABLE","$message",684],["T_WHITESPACE"," ",684],["T_IS_EQUAL","==",684],["T_WHITESPACE"," ",684],["T_STRING","self",684],["T_DOUBLE_COLON","::",684],["T_STRING","ERROR_INVALID_ATTRIBUTE_TYPE",684],")",["T_WHITESPACE"," ",684],"{",["T_WHITESPACE","\n                ",684],["T_VARIABLE","$message",685],["T_WHITESPACE"," ",685],"=",["T_WHITESPACE"," ",685],["T_STRING","sprintf",685],"(",["T_WHITESPACE","\n                    ",685],["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","errorMessageTemplates",686],"[",["T_VARIABLE","$message",686],"]",",",["T_WHITESPACE","\n                    ",686],["T_VARIABLE","$attributeCode",687],",",["T_WHITESPACE","\n                    ",687],["T_VARIABLE","$attributeParams",688],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",688],"]",["T_WHITESPACE","\n                ",688],")",";",["T_WHITESPACE","\n            ",689],"}",["T_WHITESPACE","\n            ",690],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","addRowError",691],"(",["T_VARIABLE","$message",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$rowNumber",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$attributeCode",691],")",";",["T_WHITESPACE","\n        ",691],"}",["T_WHITESPACE"," ",692],["T_ELSEIF","elseif",692],["T_WHITESPACE"," ",692],"(","!",["T_EMPTY","empty",692],"(",["T_VARIABLE","$attributeParams",692],"[",["T_CONSTANT_ENCAPSED_STRING","'is_unique'",692],"]",")",")",["T_WHITESPACE"," ",692],"{",["T_WHITESPACE","\n            ",692],["T_IF","if",693],["T_WHITESPACE"," ",693],"(",["T_ISSET","isset",693],"(",["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","_uniqueAttributes",693],"[",["T_VARIABLE","$attributeCode",693],"]","[",["T_VARIABLE","$rowData",693],"[",["T_VARIABLE","$attributeCode",693],"]","]",")",")",["T_WHITESPACE"," ",693],"{",["T_WHITESPACE","\n                ",693],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","addRowError",694],"(",["T_STRING","self",694],["T_DOUBLE_COLON","::",694],["T_STRING","ERROR_CODE_DUPLICATE_UNIQUE_ATTRIBUTE",694],",",["T_WHITESPACE"," ",694],["T_VARIABLE","$rowNumber",694],",",["T_WHITESPACE"," ",694],["T_VARIABLE","$attributeCode",694],")",";",["T_WHITESPACE","\n                ",694],["T_RETURN","return",695],["T_WHITESPACE"," ",695],["T_STRING","false",695],";",["T_WHITESPACE","\n            ",695],"}",["T_WHITESPACE","\n            ",696],["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","_uniqueAttributes",697],"[",["T_VARIABLE","$attributeCode",697],"]","[",["T_VARIABLE","$rowData",697],"[",["T_VARIABLE","$attributeCode",697],"]","]",["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","true",697],";",["T_WHITESPACE","\n        ",697],"}",["T_WHITESPACE","\n        ",698],["T_RETURN","return",699],["T_WHITESPACE"," ",699],["T_BOOL_CAST","(bool)",699],["T_VARIABLE","$valid",699],";",["T_WHITESPACE","\n    ",699],"}",["T_WHITESPACE","\n\n    ",700],["T_DOC_COMMENT","\/**\n     * Import possibility getter\n     *\n     * @return bool\n     *\/",702],["T_WHITESPACE","\n    ",706],["T_PUBLIC","public",707],["T_WHITESPACE"," ",707],["T_FUNCTION","function",707],["T_WHITESPACE"," ",707],["T_STRING","isImportAllowed",707],"(",")",["T_WHITESPACE","\n    ",707],"{",["T_WHITESPACE","\n        ",708],["T_RETURN","return",709],["T_WHITESPACE"," ",709],["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","_importAllowed",709],";",["T_WHITESPACE","\n    ",709],"}",["T_WHITESPACE","\n\n    ",710],["T_DOC_COMMENT","\/**\n     * Returns TRUE if row is valid and not in skipped rows array\n     *\n     * @param array $rowData\n     * @param int $rowNumber\n     * @return bool\n     *\/",712],["T_WHITESPACE","\n    ",718],["T_PUBLIC","public",719],["T_WHITESPACE"," ",719],["T_FUNCTION","function",719],["T_WHITESPACE"," ",719],["T_STRING","isRowAllowedToImport",719],"(",["T_ARRAY","array",719],["T_WHITESPACE"," ",719],["T_VARIABLE","$rowData",719],",",["T_WHITESPACE"," ",719],["T_VARIABLE","$rowNumber",719],")",["T_WHITESPACE","\n    ",719],"{",["T_WHITESPACE","\n        ",720],["T_RETURN","return",721],["T_WHITESPACE"," ",721],["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","validateRow",721],"(",["T_VARIABLE","$rowData",721],",",["T_WHITESPACE"," ",721],["T_VARIABLE","$rowNumber",721],")",["T_WHITESPACE"," ",721],["T_BOOLEAN_AND","&&",721],["T_WHITESPACE"," ",721],"!",["T_ISSET","isset",721],"(",["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","_skippedRows",721],"[",["T_VARIABLE","$rowNumber",721],"]",")",";",["T_WHITESPACE","\n    ",721],"}",["T_WHITESPACE","\n\n    ",722],["T_DOC_COMMENT","\/**\n     * Is import need to log in history.\n     *\n     * @return bool\n     *\/",724],["T_WHITESPACE","\n    ",728],["T_PUBLIC","public",729],["T_WHITESPACE"," ",729],["T_FUNCTION","function",729],["T_WHITESPACE"," ",729],["T_STRING","isNeedToLogInHistory",729],"(",")",["T_WHITESPACE","\n    ",729],"{",["T_WHITESPACE","\n        ",730],["T_RETURN","return",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","logInHistory",731],";",["T_WHITESPACE","\n    ",731],"}",["T_WHITESPACE","\n\n    ",732],["T_DOC_COMMENT","\/**\n     * Validate data row\n     *\n     * @param array $rowData\n     * @param int $rowNumber\n     * @return bool\n     *\/",734],["T_WHITESPACE","\n    ",740],["T_ABSTRACT","abstract",741],["T_WHITESPACE"," ",741],["T_PUBLIC","public",741],["T_WHITESPACE"," ",741],["T_FUNCTION","function",741],["T_WHITESPACE"," ",741],["T_STRING","validateRow",741],"(",["T_ARRAY","array",741],["T_WHITESPACE"," ",741],["T_VARIABLE","$rowData",741],",",["T_WHITESPACE"," ",741],["T_VARIABLE","$rowNumber",741],")",";",["T_WHITESPACE","\n\n    ",741],["T_DOC_COMMENT","\/**\n     * Set data from outside to change behavior\n     *\n     * @param array $parameters\n     * @return $this\n     *\/",743],["T_WHITESPACE","\n    ",748],["T_PUBLIC","public",749],["T_WHITESPACE"," ",749],["T_FUNCTION","function",749],["T_WHITESPACE"," ",749],["T_STRING","setParameters",749],"(",["T_ARRAY","array",749],["T_WHITESPACE"," ",749],["T_VARIABLE","$parameters",749],")",["T_WHITESPACE","\n    ",749],"{",["T_WHITESPACE","\n        ",750],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","_parameters",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_VARIABLE","$parameters",751],";",["T_WHITESPACE","\n        ",751],["T_RETURN","return",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$this",752],";",["T_WHITESPACE","\n    ",752],"}",["T_WHITESPACE","\n\n    ",753],["T_DOC_COMMENT","\/**\n     * Source model setter\n     *\n     * @param AbstractSource $source\n     * @return $this\n     *\/",755],["T_WHITESPACE","\n    ",760],["T_PUBLIC","public",761],["T_WHITESPACE"," ",761],["T_FUNCTION","function",761],["T_WHITESPACE"," ",761],["T_STRING","setSource",761],"(",["T_STRING","AbstractSource",761],["T_WHITESPACE"," ",761],["T_VARIABLE","$source",761],")",["T_WHITESPACE","\n    ",761],"{",["T_WHITESPACE","\n        ",762],["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","_source",763],["T_WHITESPACE"," ",763],"=",["T_WHITESPACE"," ",763],["T_VARIABLE","$source",763],";",["T_WHITESPACE","\n        ",763],["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","_dataValidated",764],["T_WHITESPACE"," ",764],"=",["T_WHITESPACE"," ",764],["T_STRING","false",764],";",["T_WHITESPACE","\n\n        ",764],["T_RETURN","return",766],["T_WHITESPACE"," ",766],["T_VARIABLE","$this",766],";",["T_WHITESPACE","\n    ",766],"}",["T_WHITESPACE","\n\n    ",767],["T_DOC_COMMENT","\/**\n     * Validate data\n     *\n     * @return ProcessingErrorAggregatorInterface\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",769],["T_WHITESPACE","\n    ",774],["T_PUBLIC","public",775],["T_WHITESPACE"," ",775],["T_FUNCTION","function",775],["T_WHITESPACE"," ",775],["T_STRING","validateData",775],"(",")",["T_WHITESPACE","\n    ",775],"{",["T_WHITESPACE","\n        ",776],["T_IF","if",777],["T_WHITESPACE"," ",777],"(","!",["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_dataValidated",777],")",["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n            ",777],["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","getErrorAggregator",778],"(",")",["T_OBJECT_OPERATOR","->",778],["T_STRING","clear",778],"(",")",";",["T_WHITESPACE","\n            ",778],["T_COMMENT","\/\/ do all permanent columns exist?\n",779],["T_WHITESPACE","            ",780],["T_VARIABLE","$absentColumns",780],["T_WHITESPACE"," ",780],"=",["T_WHITESPACE"," ",780],["T_STRING","array_diff",780],"(",["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","_permanentAttributes",780],",",["T_WHITESPACE"," ",780],["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","getSource",780],"(",")",["T_OBJECT_OPERATOR","->",780],["T_STRING","getColNames",780],"(",")",")",";",["T_WHITESPACE","\n            ",780],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","addErrors",781],"(",["T_STRING","self",781],["T_DOUBLE_COLON","::",781],["T_STRING","ERROR_CODE_COLUMN_NOT_FOUND",781],",",["T_WHITESPACE"," ",781],["T_VARIABLE","$absentColumns",781],")",";",["T_WHITESPACE","\n\n            ",781],["T_COMMENT","\/\/ check attribute columns names validity\n",783],["T_WHITESPACE","            ",784],["T_VARIABLE","$columnNumber",784],["T_WHITESPACE"," ",784],"=",["T_WHITESPACE"," ",784],["T_LNUMBER","0",784],";",["T_WHITESPACE","\n            ",784],["T_VARIABLE","$emptyHeaderColumns",785],["T_WHITESPACE"," ",785],"=",["T_WHITESPACE"," ",785],"[","]",";",["T_WHITESPACE","\n            ",785],["T_VARIABLE","$invalidColumns",786],["T_WHITESPACE"," ",786],"=",["T_WHITESPACE"," ",786],"[","]",";",["T_WHITESPACE","\n            ",786],["T_VARIABLE","$invalidAttributes",787],["T_WHITESPACE"," ",787],"=",["T_WHITESPACE"," ",787],"[","]",";",["T_WHITESPACE","\n            ",787],["T_FOREACH","foreach",788],["T_WHITESPACE"," ",788],"(",["T_VARIABLE","$this",788],["T_OBJECT_OPERATOR","->",788],["T_STRING","getSource",788],"(",")",["T_OBJECT_OPERATOR","->",788],["T_STRING","getColNames",788],"(",")",["T_WHITESPACE"," ",788],["T_AS","as",788],["T_WHITESPACE"," ",788],["T_VARIABLE","$columnName",788],")",["T_WHITESPACE"," ",788],"{",["T_WHITESPACE","\n                ",788],["T_VARIABLE","$columnNumber",789],["T_INC","++",789],";",["T_WHITESPACE","\n                ",789],["T_IF","if",790],["T_WHITESPACE"," ",790],"(","!",["T_VARIABLE","$this",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","isAttributeParticular",790],"(",["T_VARIABLE","$columnName",790],")",")",["T_WHITESPACE"," ",790],"{",["T_WHITESPACE","\n                    ",790],["T_IF","if",791],["T_WHITESPACE"," ",791],"(",["T_STRING","trim",791],"(",["T_VARIABLE","$columnName",791],")",["T_WHITESPACE"," ",791],["T_IS_EQUAL","==",791],["T_WHITESPACE"," ",791],["T_CONSTANT_ENCAPSED_STRING","''",791],")",["T_WHITESPACE"," ",791],"{",["T_WHITESPACE","\n                        ",791],["T_VARIABLE","$emptyHeaderColumns",792],"[","]",["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_VARIABLE","$columnNumber",792],";",["T_WHITESPACE","\n                    ",792],"}",["T_WHITESPACE"," ",793],["T_ELSEIF","elseif",793],["T_WHITESPACE"," ",793],"(","!",["T_STRING","preg_match",793],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[a-z][a-z0-9_]*$\/'",793],",",["T_WHITESPACE"," ",793],["T_VARIABLE","$columnName",793],")",")",["T_WHITESPACE"," ",793],"{",["T_WHITESPACE","\n                        ",793],["T_VARIABLE","$invalidColumns",794],"[","]",["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],["T_VARIABLE","$columnName",794],";",["T_WHITESPACE","\n                    ",794],"}",["T_WHITESPACE"," ",795],["T_ELSEIF","elseif",795],["T_WHITESPACE"," ",795],"(",["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","needColumnCheck",795],["T_WHITESPACE"," ",795],["T_BOOLEAN_AND","&&",795],["T_WHITESPACE"," ",795],"!",["T_STRING","in_array",795],"(",["T_VARIABLE","$columnName",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","getValidColumnNames",795],"(",")",")",")",["T_WHITESPACE"," ",795],"{",["T_WHITESPACE","\n                        ",795],["T_VARIABLE","$invalidAttributes",796],"[","]",["T_WHITESPACE"," ",796],"=",["T_WHITESPACE"," ",796],["T_VARIABLE","$columnName",796],";",["T_WHITESPACE","\n                    ",796],"}",["T_WHITESPACE","\n                ",797],"}",["T_WHITESPACE","\n            ",798],"}",["T_WHITESPACE","\n            ",799],["T_VARIABLE","$this",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","addErrors",800],"(",["T_STRING","self",800],["T_DOUBLE_COLON","::",800],["T_STRING","ERROR_CODE_INVALID_ATTRIBUTE",800],",",["T_WHITESPACE"," ",800],["T_VARIABLE","$invalidAttributes",800],")",";",["T_WHITESPACE","\n            ",800],["T_VARIABLE","$this",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","addErrors",801],"(",["T_STRING","self",801],["T_DOUBLE_COLON","::",801],["T_STRING","ERROR_CODE_COLUMN_EMPTY_HEADER",801],",",["T_WHITESPACE"," ",801],["T_VARIABLE","$emptyHeaderColumns",801],")",";",["T_WHITESPACE","\n            ",801],["T_VARIABLE","$this",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","addErrors",802],"(",["T_STRING","self",802],["T_DOUBLE_COLON","::",802],["T_STRING","ERROR_CODE_COLUMN_NAME_INVALID",802],",",["T_WHITESPACE"," ",802],["T_VARIABLE","$invalidColumns",802],")",";",["T_WHITESPACE","\n\n            ",802],["T_IF","if",804],["T_WHITESPACE"," ",804],"(","!",["T_VARIABLE","$this",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","getErrorAggregator",804],"(",")",["T_OBJECT_OPERATOR","->",804],["T_STRING","getErrorsCount",804],"(",")",")",["T_WHITESPACE"," ",804],"{",["T_WHITESPACE","\n                ",804],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","_saveValidatedBunches",805],"(",")",";",["T_WHITESPACE","\n                ",805],["T_VARIABLE","$this",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","_dataValidated",806],["T_WHITESPACE"," ",806],"=",["T_WHITESPACE"," ",806],["T_STRING","true",806],";",["T_WHITESPACE","\n            ",806],"}",["T_WHITESPACE","\n        ",807],"}",["T_WHITESPACE","\n        ",808],["T_RETURN","return",809],["T_WHITESPACE"," ",809],["T_VARIABLE","$this",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","getErrorAggregator",809],"(",")",";",["T_WHITESPACE","\n    ",809],"}",["T_WHITESPACE","\n\n    ",810],["T_DOC_COMMENT","\/**\n     * Get count of created items\n     *\n     * @return int\n     *\/",812],["T_WHITESPACE","\n    ",816],["T_PUBLIC","public",817],["T_WHITESPACE"," ",817],["T_FUNCTION","function",817],["T_WHITESPACE"," ",817],["T_STRING","getCreatedItemsCount",817],"(",")",["T_WHITESPACE","\n    ",817],"{",["T_WHITESPACE","\n        ",818],["T_RETURN","return",819],["T_WHITESPACE"," ",819],["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","countItemsCreated",819],";",["T_WHITESPACE","\n    ",819],"}",["T_WHITESPACE","\n\n    ",820],["T_DOC_COMMENT","\/**\n     * Get count of updated items\n     *\n     * @return int\n     *\/",822],["T_WHITESPACE","\n    ",826],["T_PUBLIC","public",827],["T_WHITESPACE"," ",827],["T_FUNCTION","function",827],["T_WHITESPACE"," ",827],["T_STRING","getUpdatedItemsCount",827],"(",")",["T_WHITESPACE","\n    ",827],"{",["T_WHITESPACE","\n        ",828],["T_RETURN","return",829],["T_WHITESPACE"," ",829],["T_VARIABLE","$this",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","countItemsUpdated",829],";",["T_WHITESPACE","\n    ",829],"}",["T_WHITESPACE","\n\n    ",830],["T_DOC_COMMENT","\/**\n     * Get count of deleted items\n     *\n     * @return int\n     *\/",832],["T_WHITESPACE","\n    ",836],["T_PUBLIC","public",837],["T_WHITESPACE"," ",837],["T_FUNCTION","function",837],["T_WHITESPACE"," ",837],["T_STRING","getDeletedItemsCount",837],"(",")",["T_WHITESPACE","\n    ",837],"{",["T_WHITESPACE","\n        ",838],["T_RETURN","return",839],["T_WHITESPACE"," ",839],["T_VARIABLE","$this",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","countItemsDeleted",839],";",["T_WHITESPACE","\n    ",839],"}",["T_WHITESPACE","\n\n    ",840],["T_DOC_COMMENT","\/**\n     * Update proceed items counter\n     *\n     * @param array $created\n     * @param array $updated\n     * @param array $deleted\n     * @return $this\n     *\/",842],["T_WHITESPACE","\n    ",849],["T_PROTECTED","protected",850],["T_WHITESPACE"," ",850],["T_FUNCTION","function",850],["T_WHITESPACE"," ",850],["T_STRING","updateItemsCounterStats",850],"(",["T_ARRAY","array",850],["T_WHITESPACE"," ",850],["T_VARIABLE","$created",850],["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],"[","]",",",["T_WHITESPACE"," ",850],["T_ARRAY","array",850],["T_WHITESPACE"," ",850],["T_VARIABLE","$updated",850],["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],"[","]",",",["T_WHITESPACE"," ",850],["T_ARRAY","array",850],["T_WHITESPACE"," ",850],["T_VARIABLE","$deleted",850],["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],"[","]",")",["T_WHITESPACE","\n    ",850],"{",["T_WHITESPACE","\n        ",851],["T_VARIABLE","$this",852],["T_OBJECT_OPERATOR","->",852],["T_STRING","countItemsCreated",852],["T_WHITESPACE"," ",852],"=",["T_WHITESPACE"," ",852],["T_STRING","count",852],"(",["T_VARIABLE","$created",852],")",";",["T_WHITESPACE","\n        ",852],["T_VARIABLE","$this",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","countItemsUpdated",853],["T_WHITESPACE"," ",853],"=",["T_WHITESPACE"," ",853],["T_STRING","count",853],"(",["T_VARIABLE","$updated",853],")",";",["T_WHITESPACE","\n        ",853],["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","countItemsDeleted",854],["T_WHITESPACE"," ",854],"=",["T_WHITESPACE"," ",854],["T_STRING","count",854],"(",["T_VARIABLE","$deleted",854],")",";",["T_WHITESPACE","\n        ",854],["T_RETURN","return",855],["T_WHITESPACE"," ",855],["T_VARIABLE","$this",855],";",["T_WHITESPACE","\n    ",855],"}",["T_WHITESPACE","\n\n    ",856],["T_DOC_COMMENT","\/**\n     * Retrieve valid column names\n     *\n     * @return array\n     *\/",858],["T_WHITESPACE","\n    ",862],["T_PUBLIC","public",863],["T_WHITESPACE"," ",863],["T_FUNCTION","function",863],["T_WHITESPACE"," ",863],["T_STRING","getValidColumnNames",863],"(",")",["T_WHITESPACE","\n    ",863],"{",["T_WHITESPACE","\n        ",864],["T_RETURN","return",865],["T_WHITESPACE"," ",865],["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","validColumnNames",865],";",["T_WHITESPACE","\n    ",865],"}",["T_WHITESPACE","\n",866],"}",["T_WHITESPACE","\n",867]]
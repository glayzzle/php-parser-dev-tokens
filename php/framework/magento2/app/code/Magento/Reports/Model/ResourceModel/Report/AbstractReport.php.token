[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Reports",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Report",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Abstract report aggregate resource model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",9],["T_WHITESPACE","\n",12],["T_ABSTRACT","abstract",13],["T_WHITESPACE"," ",13],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","AbstractReport",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractDb",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Flag object\n     *\n     * @var \\Magento\\Reports\\Model\\Flag\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_flag",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_STRING","null",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Logger instance\n     *\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_logger",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Locale date instance\n     *\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_localeDate",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Reports flag factory\n     *\n     * @var \\Magento\\Reports\\Model\\FlagFactory\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_reportsFlagFactory",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\DateTime\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$dateTime",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Magento\\Reports\\Model\\FlagFactory $reportsFlagFactory\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\Timezone\\Validator $timezoneValidator\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\DateTime $dateTime\n     * @param null $connectionName\n     *\/",48],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","__construct",59],"(",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Magento",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Framework",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Model",60],["T_NS_SEPARATOR","\\",60],["T_STRING","ResourceModel",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Db",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Context",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$context",60],",",["T_WHITESPACE","\n        ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Psr",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Log",61],["T_NS_SEPARATOR","\\",61],["T_STRING","LoggerInterface",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$logger",61],",",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Stdlib",62],["T_NS_SEPARATOR","\\",62],["T_STRING","DateTime",62],["T_NS_SEPARATOR","\\",62],["T_STRING","TimezoneInterface",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$localeDate",62],",",["T_WHITESPACE","\n        ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Reports",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","FlagFactory",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$reportsFlagFactory",63],",",["T_WHITESPACE","\n        ",63],["T_NS_SEPARATOR","\\",64],["T_STRING","Magento",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Framework",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Stdlib",64],["T_NS_SEPARATOR","\\",64],["T_STRING","DateTime",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Timezone",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Validator",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$timezoneValidator",64],",",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Framework",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Stdlib",65],["T_NS_SEPARATOR","\\",65],["T_STRING","DateTime",65],["T_NS_SEPARATOR","\\",65],["T_STRING","DateTime",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$dateTime",65],",",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$connectionName",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","null",66],["T_WHITESPACE","\n    ",66],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n        ",67],["T_STRING","parent",68],["T_DOUBLE_COLON","::",68],["T_STRING","__construct",68],"(",["T_VARIABLE","$context",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$connectionName",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_logger",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$logger",69],";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_localeDate",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$localeDate",70],";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_reportsFlagFactory",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$reportsFlagFactory",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","timezoneValidator",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$timezoneValidator",72],";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","dateTime",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$dateTime",73],";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Retrieve flag object\n     *\n     * @return \\Magento\\Reports\\Model\\Flag\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","_getFlag",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_flag",83],["T_WHITESPACE"," ",83],["T_IS_IDENTICAL","===",83],["T_WHITESPACE"," ",83],["T_STRING","null",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_flag",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_reportsFlagFactory",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","create",84],"(",")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_flag",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Saves flag\n     *\n     * @param string $code\n     * @param mixed $value\n     * @return $this\n     *\/",89],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","_setFlagData",96],"(",["T_VARIABLE","$code",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$value",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","null",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_getFlag",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","setReportFlagCode",98],"(",["T_VARIABLE","$code",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","unsetData",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","loadSelf",98],"(",")",";",["T_WHITESPACE","\n\n        ",98],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$value",100],["T_WHITESPACE"," ",100],["T_IS_NOT_IDENTICAL","!==",100],["T_WHITESPACE"," ",100],["T_STRING","null",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_getFlag",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","setFlagData",101],"(",["T_VARIABLE","$value",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n        ",102],["T_COMMENT","\/\/ touch last_update\n",104],["T_WHITESPACE","        ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_getFlag",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","setLastUpdate",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","dateTime",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","gmtDate",105],"(",")",")",";",["T_WHITESPACE","\n\n        ",105],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_getFlag",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","save",107],"(",")",";",["T_WHITESPACE","\n\n        ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Retrieve flag data\n     *\n     * @param string $code\n     * @return mixed\n     *\/",112],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","_getFlagData",118],"(",["T_VARIABLE","$code",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_getFlag",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","setReportFlagCode",120],"(",["T_VARIABLE","$code",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","unsetData",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","loadSelf",120],"(",")",";",["T_WHITESPACE","\n\n        ",120],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_getFlag",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","getFlagData",122],"(",")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Truncate table\n     *\n     * @param string $table\n     * @return $this\n     *\/",125],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","_truncateTable",131],"(",["T_VARIABLE","$table",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getConnection",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getTransactionLevel",133],"(",")",["T_WHITESPACE"," ",133],">",["T_WHITESPACE"," ",133],["T_LNUMBER","0",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getConnection",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","delete",134],"(",["T_VARIABLE","$table",134],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE"," ",135],["T_ELSE","else",135],["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getConnection",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","truncateTable",136],"(",["T_VARIABLE","$table",136],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Clear report table by specified date range.\n     * If specified source table parameters,\n     * condition will be generated by source table sub-select.\n     *\n     * @param string $table\n     * @param null|string $from\n     * @param null|string $to\n     * @param null|\\Magento\\Framework\\DB\\Select|string $subSelect\n     * @param bool $doNotUseTruncate\n     * @param \\Magento\\Framework\\DB\\Adapter\\AdapterInterface $connection\n     * @return $this\n     *\/",141],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","_clearTableByDateRange",154],"(",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$table",155],",",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$from",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","null",156],",",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$to",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","null",157],",",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$subSelect",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","null",158],",",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$doNotUseTruncate",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","false",159],",",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$connection",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","null",160],["T_WHITESPACE","\n    ",160],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$from",162],["T_WHITESPACE"," ",162],["T_IS_IDENTICAL","===",162],["T_WHITESPACE"," ",162],["T_STRING","null",162],["T_WHITESPACE"," ",162],["T_BOOLEAN_AND","&&",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$to",162],["T_WHITESPACE"," ",162],["T_IS_IDENTICAL","===",162],["T_WHITESPACE"," ",162],["T_STRING","null",162],["T_WHITESPACE"," ",162],["T_BOOLEAN_AND","&&",162],["T_WHITESPACE"," ",162],"!",["T_VARIABLE","$doNotUseTruncate",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_truncateTable",163],"(",["T_VARIABLE","$table",163],")",";",["T_WHITESPACE","\n            ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n\n        ",165],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$subSelect",167],["T_WHITESPACE"," ",167],["T_IS_NOT_IDENTICAL","!==",167],["T_WHITESPACE"," ",167],["T_STRING","null",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$deleteCondition",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_makeConditionFromDateRangeSelect",168],"(",["T_VARIABLE","$subSelect",168],",",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'period'",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$connection",168],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE"," ",169],["T_ELSE","else",169],["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$condition",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],"[","]",";",["T_WHITESPACE","\n            ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$from",171],["T_WHITESPACE"," ",171],["T_IS_NOT_IDENTICAL","!==",171],["T_WHITESPACE"," ",171],["T_STRING","null",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$condition",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getConnection",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","quoteInto",172],"(",["T_CONSTANT_ENCAPSED_STRING","'period >= ?'",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$from",172],")",";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n\n            ",173],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$to",175],["T_WHITESPACE"," ",175],["T_IS_NOT_IDENTICAL","!==",175],["T_WHITESPACE"," ",175],["T_STRING","null",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$condition",176],"[","]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getConnection",176],"(",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","quoteInto",176],"(",["T_CONSTANT_ENCAPSED_STRING","'period <= ?'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$to",176],")",";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$deleteCondition",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","implode",178],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$condition",178],")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getConnection",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","delete",180],"(",["T_VARIABLE","$table",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$deleteCondition",180],")",";",["T_WHITESPACE","\n        ",180],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * Generate table date range select\n     *\n     * @param string $table\n     * @param string $column\n     * @param string $whereColumn\n     * @param null|string|\\DateTime $from\n     * @param null|string|\\DateTime $to\n     * @param [][] $additionalWhere\n     * @param string $alias\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",184],["T_WHITESPACE","\n    ",195],["T_PROTECTED","protected",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","_getTableDateRangeSelect",196],"(",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$table",197],",",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$column",198],",",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$whereColumn",199],",",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$from",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING","null",200],",",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$to",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","null",201],",",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$additionalWhere",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],"[","]",",",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$alias",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'date_range_table'",203],["T_WHITESPACE","\n    ",203],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$connection",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getConnection",205],"(",")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$select",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$connection",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","select",206],"(",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","from",206],"(",["T_WHITESPACE","\n            ",206],"[",["T_VARIABLE","$alias",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$table",207],"]",",",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$connection",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getDatePartSql",208],"(",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getStoreTZOffsetQuery",209],"(","[",["T_VARIABLE","$alias",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$table",209],"]",",",["T_WHITESPACE"," ",209],["T_VARIABLE","$alias",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'.'",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_VARIABLE","$column",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$from",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$to",209],")",["T_WHITESPACE","\n            ",209],")",["T_WHITESPACE","\n        ",210],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","distinct",211],"(",["T_WHITESPACE","\n            ",211],["T_STRING","true",212],["T_WHITESPACE","\n        ",212],")",";",["T_WHITESPACE","\n\n        ",213],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$from",215],["T_WHITESPACE"," ",215],["T_IS_NOT_IDENTICAL","!==",215],["T_WHITESPACE"," ",215],["T_STRING","null",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$select",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","where",216],"(",["T_VARIABLE","$alias",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'.'",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_VARIABLE","$whereColumn",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","' >= ?'",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$from",216],")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n\n        ",217],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$to",219],["T_WHITESPACE"," ",219],["T_IS_NOT_IDENTICAL","!==",219],["T_WHITESPACE"," ",219],["T_STRING","null",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$select",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","where",220],"(",["T_VARIABLE","$alias",220],["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'.'",220],["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_VARIABLE","$whereColumn",220],["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","' <= ?'",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$to",220],")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n\n        ",221],["T_IF","if",223],["T_WHITESPACE"," ",223],"(","!",["T_EMPTY","empty",223],"(",["T_VARIABLE","$additionalWhere",223],")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_FOREACH","foreach",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$additionalWhere",224],["T_WHITESPACE"," ",224],["T_AS","as",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$condition",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_STRING","is_array",225],"(",["T_VARIABLE","$condition",225],")",["T_WHITESPACE"," ",225],["T_BOOLEAN_AND","&&",225],["T_WHITESPACE"," ",225],["T_STRING","count",225],"(",["T_VARIABLE","$condition",225],")",["T_WHITESPACE"," ",225],["T_IS_EQUAL","==",225],["T_WHITESPACE"," ",225],["T_LNUMBER","2",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                    ",225],["T_VARIABLE","$condition",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$connection",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","quoteInto",226],"(",["T_VARIABLE","$condition",226],"[",["T_LNUMBER","0",226],"]",",",["T_WHITESPACE"," ",226],["T_VARIABLE","$condition",226],"[",["T_LNUMBER","1",226],"]",")",";",["T_WHITESPACE","\n                ",226],"}",["T_WHITESPACE"," ",227],["T_ELSEIF","elseif",227],["T_WHITESPACE"," ",227],"(",["T_STRING","is_array",227],"(",["T_VARIABLE","$condition",227],")",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n                    ",227],["T_COMMENT","\/\/ Invalid condition\n",228],["T_WHITESPACE","                    ",229],["T_CONTINUE","continue",229],";",["T_WHITESPACE","\n                ",229],"}",["T_WHITESPACE","\n                ",230],["T_VARIABLE","$condition",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","str_replace",231],"(",["T_CONSTANT_ENCAPSED_STRING","'{{table}}'",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$connection",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","quoteIdentifier",231],"(",["T_VARIABLE","$alias",231],")",",",["T_WHITESPACE"," ",231],["T_VARIABLE","$condition",231],")",";",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$select",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","where",232],"(",["T_VARIABLE","$condition",232],")",";",["T_WHITESPACE","\n            ",232],"}",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n\n        ",234],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$select",236],";",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n\n    ",237],["T_DOC_COMMENT","\/**\n     * Make condition for using in where section from select statement with single date column\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @param string $periodColumn\n     * @param \\Magento\\Framework\\DB\\Adapter\\AdapterInterface $connection\n     * @return array|bool|string\n     *\/",239],["T_WHITESPACE","\n    ",246],["T_PROTECTED","protected",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","_makeConditionFromDateRangeSelect",247],"(",["T_VARIABLE","$select",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$periodColumn",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$connection",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","null",247],")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(","!",["T_VARIABLE","$connection",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$connection",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getConnection",250],"(",")",";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_STATIC","static",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$selectResultCache",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],"[","]",";",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$cacheKey",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING_CAST","(string)",254],["T_VARIABLE","$select",254],";",["T_WHITESPACE","\n\n        ",254],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_STRING","array_key_exists",256],"(",["T_VARIABLE","$cacheKey",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$selectResultCache",256],")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_TRY","try",257],["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$selectResult",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],"[","]",";",["T_WHITESPACE","\n\n                ",258],["T_VARIABLE","$query",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$connection",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","query",260],"(",["T_VARIABLE","$select",260],")",";",["T_WHITESPACE","\n\n                ",260],["T_WHILE","while",262],["T_WHITESPACE"," ",262],"(",["T_STRING","true",262],["T_WHITESPACE"," ",262],["T_IS_EQUAL","==",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$date",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$query",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","fetchColumn",262],"(",")",")",")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                    ",262],["T_VARIABLE","$selectResult",263],"[","]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$date",263],";",["T_WHITESPACE","\n                ",263],"}",["T_WHITESPACE","\n            ",264],"}",["T_WHITESPACE"," ",265],["T_CATCH","catch",265],["T_WHITESPACE"," ",265],"(",["T_NS_SEPARATOR","\\",265],["T_STRING","Exception",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$e",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                ",265],["T_VARIABLE","$selectResult",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","false",266],";",["T_WHITESPACE","\n            ",266],"}",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$selectResultCache",268],"[",["T_VARIABLE","$cacheKey",268],"]",["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$selectResult",268],";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE"," ",269],["T_ELSE","else",269],["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$selectResult",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$selectResultCache",270],"[",["T_VARIABLE","$cacheKey",270],"]",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$selectResult",272],["T_WHITESPACE"," ",272],["T_IS_IDENTICAL","===",272],["T_WHITESPACE"," ",272],["T_STRING","false",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_STRING","false",273],";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n\n        ",274],["T_VARIABLE","$whereCondition",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],"[","]",";",["T_WHITESPACE","\n\n        ",276],["T_FOREACH","foreach",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$selectResult",278],["T_WHITESPACE"," ",278],["T_AS","as",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$date",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$whereCondition",279],"[","]",["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$connection",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","prepareSqlCondition",279],"(",["T_VARIABLE","$periodColumn",279],",",["T_WHITESPACE"," ",279],"[",["T_CONSTANT_ENCAPSED_STRING","'like'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$date",279],"]",")",";",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$whereCondition",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","implode",281],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$whereCondition",281],")",";",["T_WHITESPACE","\n        ",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$whereCondition",282],["T_WHITESPACE"," ",282],["T_IS_EQUAL","==",282],["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","''",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n            ",282],["T_VARIABLE","$whereCondition",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'1=0'",283],";",["T_WHITESPACE","  ",283],["T_COMMENT","\/\/ FALSE condition!\n",283],["T_WHITESPACE","        ",284],"}",["T_WHITESPACE","\n\n        ",284],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$whereCondition",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Generate table date range select\n     *\n     * @param string $table\n     * @param string $relatedTable\n     * @param [] $joinCondition\n     * @param string $column\n     * @param string $whereColumn\n     * @param string|null $from\n     * @param string|null $to\n     * @param [][] $additionalWhere\n     * @param string $alias\n     * @param string $relatedAlias\n     * @return \\Magento\\Framework\\DB\\Select\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",289],["T_WHITESPACE","\n    ",304],["T_PROTECTED","protected",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","_getTableDateRangeRelatedSelect",305],"(",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$table",306],",",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$relatedTable",307],",",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$joinCondition",308],",",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$column",309],",",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$whereColumn",310],",",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$from",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","null",311],",",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$to",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_STRING","null",312],",",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$additionalWhere",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],"[","]",",",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$alias",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'date_range_table'",314],",",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$relatedAlias",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'related_date_range_table'",315],["T_WHITESPACE","\n    ",315],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$connection",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getConnection",317],"(",")",";",["T_WHITESPACE","\n        ",317],["T_VARIABLE","$joinConditionSql",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],"[","]",";",["T_WHITESPACE","\n\n        ",318],["T_FOREACH","foreach",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$joinCondition",320],["T_WHITESPACE"," ",320],["T_AS","as",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$fkField",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$pkField",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$joinConditionSql",321],"[","]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_STRING","sprintf",321],"(",["T_CONSTANT_ENCAPSED_STRING","'%s.%s = %s.%s'",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$alias",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$fkField",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$relatedAlias",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$pkField",321],")",";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n\n        ",322],["T_VARIABLE","$select",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$connection",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","select",324],"(",")",["T_OBJECT_OPERATOR","->",324],["T_STRING","from",324],"(",["T_WHITESPACE","\n            ",324],"[",["T_VARIABLE","$alias",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$table",325],"]",",",["T_WHITESPACE","\n            ",325],["T_VARIABLE","$connection",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getDatePartSql",326],"(",["T_VARIABLE","$connection",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","quoteIdentifier",326],"(",["T_VARIABLE","$alias",326],["T_WHITESPACE"," ",326],".",["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'.'",326],["T_WHITESPACE"," ",326],".",["T_WHITESPACE"," ",326],["T_VARIABLE","$column",326],")",")",["T_WHITESPACE","\n        ",326],")",["T_OBJECT_OPERATOR","->",327],["T_STRING","joinInner",327],"(",["T_WHITESPACE","\n            ",327],"[",["T_VARIABLE","$relatedAlias",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$relatedTable",328],"]",",",["T_WHITESPACE","\n            ",328],["T_STRING","implode",329],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$joinConditionSql",329],")",",",["T_WHITESPACE","\n            ",329],"[","]",["T_WHITESPACE","\n        ",330],")",["T_OBJECT_OPERATOR","->",331],["T_STRING","distinct",331],"(",["T_WHITESPACE","\n            ",331],["T_STRING","true",332],["T_WHITESPACE","\n        ",332],")",";",["T_WHITESPACE","\n\n        ",333],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$from",335],["T_WHITESPACE"," ",335],["T_IS_NOT_IDENTICAL","!==",335],["T_WHITESPACE"," ",335],["T_STRING","null",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$select",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","where",336],"(",["T_VARIABLE","$relatedAlias",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'.'",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_VARIABLE","$whereColumn",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","' >= ?'",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$from",336],")",";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n\n        ",337],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$to",339],["T_WHITESPACE"," ",339],["T_IS_NOT_IDENTICAL","!==",339],["T_WHITESPACE"," ",339],["T_STRING","null",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$select",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","where",340],"(",["T_VARIABLE","$relatedAlias",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'.'",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$whereColumn",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","' <= ?'",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$to",340],")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n\n        ",341],["T_IF","if",343],["T_WHITESPACE"," ",343],"(","!",["T_EMPTY","empty",343],"(",["T_VARIABLE","$additionalWhere",343],")",")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n            ",343],["T_FOREACH","foreach",344],["T_WHITESPACE"," ",344],"(",["T_VARIABLE","$additionalWhere",344],["T_WHITESPACE"," ",344],["T_AS","as",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$condition",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n                ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_STRING","is_array",345],"(",["T_VARIABLE","$condition",345],")",["T_WHITESPACE"," ",345],["T_BOOLEAN_AND","&&",345],["T_WHITESPACE"," ",345],["T_STRING","count",345],"(",["T_VARIABLE","$condition",345],")",["T_WHITESPACE"," ",345],["T_IS_EQUAL","==",345],["T_WHITESPACE"," ",345],["T_LNUMBER","2",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n                    ",345],["T_VARIABLE","$condition",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$connection",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","quoteInto",346],"(",["T_VARIABLE","$condition",346],"[",["T_LNUMBER","0",346],"]",",",["T_WHITESPACE"," ",346],["T_VARIABLE","$condition",346],"[",["T_LNUMBER","1",346],"]",")",";",["T_WHITESPACE","\n                ",346],"}",["T_WHITESPACE"," ",347],["T_ELSEIF","elseif",347],["T_WHITESPACE"," ",347],"(",["T_STRING","is_array",347],"(",["T_VARIABLE","$condition",347],")",")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n                    ",347],["T_COMMENT","\/\/ Invalid condition\n",348],["T_WHITESPACE","                    ",349],["T_CONTINUE","continue",349],";",["T_WHITESPACE","\n                ",349],"}",["T_WHITESPACE","\n                ",350],["T_VARIABLE","$condition",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","str_replace",351],"(",["T_WHITESPACE","\n                    ",351],"[",["T_CONSTANT_ENCAPSED_STRING","'{{table}}'",352],",",["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","'{{related_table}}'",352],"]",",",["T_WHITESPACE","\n                    ",352],"[",["T_VARIABLE","$connection",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","quoteIdentifier",353],"(",["T_VARIABLE","$alias",353],")",",",["T_WHITESPACE"," ",353],["T_VARIABLE","$connection",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","quoteIdentifier",353],"(",["T_VARIABLE","$relatedAlias",353],")","]",",",["T_WHITESPACE","\n                    ",353],["T_VARIABLE","$condition",354],["T_WHITESPACE","\n                ",354],")",";",["T_WHITESPACE","\n                ",355],["T_VARIABLE","$select",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","where",356],"(",["T_VARIABLE","$condition",356],")",";",["T_WHITESPACE","\n            ",356],"}",["T_WHITESPACE","\n        ",357],"}",["T_WHITESPACE","\n\n        ",358],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$select",360],";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * Retrieve query for attribute with timezone conversion\n     *\n     * @param string|[] $table\n     * @param string $column\n     * @param null|mixed $from\n     * @param null|mixed $to\n     * @param null|int|string|\\Magento\\Store\\Model\\Store $store\n     * @param \\Magento\\Framework\\DB\\Adapter\\AdapterInterface $connection\n     * @return string\n     *\/",363],["T_WHITESPACE","\n    ",373],["T_PUBLIC","public",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","getStoreTZOffsetQuery",374],"(",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$table",375],",",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$column",376],",",["T_WHITESPACE","\n        ",376],["T_VARIABLE","$from",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","null",377],",",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$to",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","null",378],",",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$store",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_STRING","null",379],",",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$connection",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_STRING","null",380],["T_WHITESPACE","\n    ",380],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n        ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(","!",["T_VARIABLE","$connection",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_VARIABLE","$connection",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getConnection",383],"(",")",";",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n\n        ",384],["T_VARIABLE","$column",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$connection",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","quoteIdentifier",386],"(",["T_VARIABLE","$column",386],")",";",["T_WHITESPACE","\n\n        ",386],["T_IF","if",388],["T_WHITESPACE"," ",388],"(",["T_STRING","null",388],["T_WHITESPACE"," ",388],["T_IS_IDENTICAL","===",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$from",388],")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$selectOldest",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$connection",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","select",389],"(",")",["T_OBJECT_OPERATOR","->",389],["T_STRING","from",389],"(",["T_VARIABLE","$table",389],",",["T_WHITESPACE"," ",389],"[","\"",["T_ENCAPSED_AND_WHITESPACE","MIN(",389],["T_CURLY_OPEN","{",389],["T_VARIABLE","$column",389],"}",["T_ENCAPSED_AND_WHITESPACE",")",389],"\"","]",")",";",["T_WHITESPACE","\n            ",389],["T_VARIABLE","$from",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$connection",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","fetchOne",390],"(",["T_VARIABLE","$selectOldest",390],")",";",["T_WHITESPACE","\n            ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_STRING","null",391],["T_WHITESPACE"," ",391],["T_IS_IDENTICAL","===",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$from",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n                ",391],["T_VARIABLE","$date",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_NEW","new",392],["T_WHITESPACE"," ",392],["T_NS_SEPARATOR","\\",392],["T_STRING","DateTime",392],"(",")",";",["T_WHITESPACE","\n                ",392],["T_VARIABLE","$from",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$date",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","format",393],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",393],")",";",["T_WHITESPACE","\n            ",393],"}",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE","\n\n        ",395],["T_VARIABLE","$periods",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_getTZOffsetTransitions",397],"(",["T_WHITESPACE","\n            ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","_localeDate",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","scopeDate",398],"(",["T_VARIABLE","$store",398],")",["T_OBJECT_OPERATOR","->",398],["T_STRING","format",398],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",398],")",",",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$from",399],",",["T_WHITESPACE","\n            ",399],["T_VARIABLE","$to",400],["T_WHITESPACE","\n        ",400],")",";",["T_WHITESPACE","\n        ",401],["T_IF","if",402],["T_WHITESPACE"," ",402],"(",["T_EMPTY","empty",402],"(",["T_VARIABLE","$periods",402],")",")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_RETURN","return",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$column",403],";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n\n        ",404],["T_VARIABLE","$query",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","\"\"",406],";",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$periodsCount",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_STRING","count",407],"(",["T_VARIABLE","$periods",407],")",";",["T_WHITESPACE","\n\n        ",407],["T_VARIABLE","$i",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_LNUMBER","0",409],";",["T_WHITESPACE","\n        ",409],["T_FOREACH","foreach",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$periods",410],["T_WHITESPACE"," ",410],["T_AS","as",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$offset",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$timestamps",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n            ",410],["T_VARIABLE","$subParts",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],"[","]",";",["T_WHITESPACE","\n            ",411],["T_FOREACH","foreach",412],["T_WHITESPACE"," ",412],"(",["T_VARIABLE","$timestamps",412],["T_WHITESPACE"," ",412],["T_AS","as",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$ts",412],")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                ",412],["T_VARIABLE","$subParts",413],"[","]",["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],"\"",["T_ENCAPSED_AND_WHITESPACE","(",413],["T_CURLY_OPEN","{",413],["T_VARIABLE","$column",413],"}",["T_ENCAPSED_AND_WHITESPACE"," between ",413],["T_CURLY_OPEN","{",413],["T_VARIABLE","$ts",413],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",413],"]","}",["T_ENCAPSED_AND_WHITESPACE"," and ",413],["T_CURLY_OPEN","{",413],["T_VARIABLE","$ts",413],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",413],"]","}",["T_ENCAPSED_AND_WHITESPACE",")",413],"\"",";",["T_WHITESPACE","\n            ",413],"}",["T_WHITESPACE","\n\n            ",414],["T_VARIABLE","$then",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$connection",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getDateAddSql",416],"(",["T_WHITESPACE","\n                ",416],["T_VARIABLE","$column",417],",",["T_WHITESPACE","\n                ",417],["T_VARIABLE","$offset",418],",",["T_WHITESPACE","\n                ",418],["T_NS_SEPARATOR","\\",419],["T_STRING","Magento",419],["T_NS_SEPARATOR","\\",419],["T_STRING","Framework",419],["T_NS_SEPARATOR","\\",419],["T_STRING","DB",419],["T_NS_SEPARATOR","\\",419],["T_STRING","Adapter",419],["T_NS_SEPARATOR","\\",419],["T_STRING","AdapterInterface",419],["T_DOUBLE_COLON","::",419],["T_STRING","INTERVAL_SECOND",419],["T_WHITESPACE","\n            ",419],")",";",["T_WHITESPACE","\n\n            ",420],["T_VARIABLE","$query",422],["T_WHITESPACE"," ",422],["T_CONCAT_EQUAL",".=",422],["T_WHITESPACE"," ",422],["T_INC","++",422],["T_VARIABLE","$i",422],["T_WHITESPACE"," ",422],["T_IS_EQUAL","==",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$periodsCount",422],["T_WHITESPACE"," ",422],"?",["T_WHITESPACE"," ",422],["T_VARIABLE","$then",422],["T_WHITESPACE"," ",422],":",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","\"CASE WHEN \"",422],["T_WHITESPACE"," ",422],".",["T_WHITESPACE"," ",422],["T_STRING","join",422],"(",["T_CONSTANT_ENCAPSED_STRING","\" OR \"",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$subParts",422],")",["T_WHITESPACE"," ",422],".",["T_WHITESPACE"," ",422],"\"",["T_ENCAPSED_AND_WHITESPACE"," THEN ",422],["T_CURLY_OPEN","{",422],["T_VARIABLE","$then",422],"}",["T_ENCAPSED_AND_WHITESPACE"," ELSE ",422],"\"",";",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE","\n\n        ",423],["T_RETURN","return",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$query",425],["T_WHITESPACE"," ",425],".",["T_WHITESPACE"," ",425],["T_STRING","str_repeat",425],"(",["T_CONSTANT_ENCAPSED_STRING","'END '",425],",",["T_WHITESPACE"," ",425],["T_STRING","count",425],"(",["T_VARIABLE","$periods",425],")",["T_WHITESPACE"," ",425],"-",["T_WHITESPACE"," ",425],["T_LNUMBER","1",425],")",";",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n\n    ",426],["T_DOC_COMMENT","\/**\n     * Retrieve transitions for offsets of given timezone\n     *\n     * @param string $timezone\n     * @param mixed $from\n     * @param mixed $to\n     * @return array\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",428],["T_WHITESPACE","\n    ",436],["T_PROTECTED","protected",437],["T_WHITESPACE"," ",437],["T_FUNCTION","function",437],["T_WHITESPACE"," ",437],["T_STRING","_getTZOffsetTransitions",437],"(",["T_VARIABLE","$timezone",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$from",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_STRING","null",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$to",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_STRING","null",437],")",["T_WHITESPACE","\n    ",437],"{",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$tzTransitions",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],"[","]",";",["T_WHITESPACE","\n        ",439],["T_TRY","try",440],["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(","!",["T_EMPTY","empty",441],"(",["T_VARIABLE","$from",441],")",")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n                ",441],["T_VARIABLE","$from",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$from",442],["T_WHITESPACE"," ",442],["T_INSTANCEOF","instanceof",442],["T_WHITESPACE"," ",442],["T_NS_SEPARATOR","\\",442],["T_STRING","DateTime",442],["T_WHITESPACE","\n                    ",442],"?",["T_WHITESPACE"," ",443],["T_VARIABLE","$from",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getTimestamp",443],"(",")",["T_WHITESPACE","\n                    ",443],":",["T_WHITESPACE"," ",444],"(",["T_NEW","new",444],["T_WHITESPACE"," ",444],["T_NS_SEPARATOR","\\",444],["T_STRING","DateTime",444],"(",["T_VARIABLE","$from",444],")",")",["T_OBJECT_OPERATOR","->",444],["T_STRING","getTimestamp",444],"(",")",";",["T_WHITESPACE","\n            ",444],"}",["T_WHITESPACE","\n\n            ",445],["T_VARIABLE","$to",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$to",447],["T_WHITESPACE"," ",447],["T_INSTANCEOF","instanceof",447],["T_WHITESPACE"," ",447],["T_NS_SEPARATOR","\\",447],["T_STRING","DateTime",447],["T_WHITESPACE","\n                ",447],"?",["T_WHITESPACE"," ",448],["T_VARIABLE","$to",448],["T_WHITESPACE","\n                ",448],":",["T_WHITESPACE"," ",449],["T_NEW","new",449],["T_WHITESPACE"," ",449],["T_NS_SEPARATOR","\\",449],["T_STRING","DateTime",449],"(",["T_VARIABLE","$to",449],")",";",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$nextPeriod",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getConnection",450],"(",")",["T_OBJECT_OPERATOR","->",450],["T_STRING","formatDate",450],"(",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$to",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","format",451],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",451],")",["T_WHITESPACE","\n            ",451],")",";",["T_WHITESPACE","\n            ",452],["T_VARIABLE","$to",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$to",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getTimestamp",453],"(",")",";",["T_WHITESPACE","\n\n            ",453],["T_VARIABLE","$dtz",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_NEW","new",455],["T_WHITESPACE"," ",455],["T_NS_SEPARATOR","\\",455],["T_STRING","DateTimeZone",455],"(",["T_VARIABLE","$timezone",455],")",";",["T_WHITESPACE","\n            ",455],["T_VARIABLE","$transitions",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$dtz",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getTransitions",456],"(",")",";",["T_WHITESPACE","\n\n            ",456],["T_FOR","for",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$i",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","count",458],"(",["T_VARIABLE","$transitions",458],")",["T_WHITESPACE"," ",458],"-",["T_WHITESPACE"," ",458],["T_LNUMBER","1",458],";",["T_WHITESPACE"," ",458],["T_VARIABLE","$i",458],["T_WHITESPACE"," ",458],["T_IS_GREATER_OR_EQUAL",">=",458],["T_WHITESPACE"," ",458],["T_LNUMBER","0",458],";",["T_WHITESPACE"," ",458],["T_VARIABLE","$i",458],["T_DEC","--",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n                ",458],["T_VARIABLE","$tr",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$transitions",459],"[",["T_VARIABLE","$i",459],"]",";",["T_WHITESPACE","\n                ",459],["T_TRY","try",460],["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n                    ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","timezoneValidator",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","validate",461],"(",["T_VARIABLE","$tr",461],"[",["T_CONSTANT_ENCAPSED_STRING","'ts'",461],"]",",",["T_WHITESPACE"," ",461],["T_VARIABLE","$to",461],")",";",["T_WHITESPACE","\n                ",461],"}",["T_WHITESPACE"," ",462],["T_CATCH","catch",462],["T_WHITESPACE"," ",462],"(",["T_NS_SEPARATOR","\\",462],["T_STRING","Magento",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Framework",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Exception",462],["T_NS_SEPARATOR","\\",462],["T_STRING","ValidatorException",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$e",462],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n                    ",462],["T_CONTINUE","continue",463],";",["T_WHITESPACE","\n                ",463],"}",["T_WHITESPACE","\n\n                ",464],["T_VARIABLE","$tr",466],"[",["T_CONSTANT_ENCAPSED_STRING","'time'",466],"]",["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getConnection",466],"(",")",["T_OBJECT_OPERATOR","->",466],["T_STRING","formatDate",466],"(",["T_WHITESPACE","\n                    ",466],"(",["T_NEW","new",467],["T_WHITESPACE"," ",467],["T_NS_SEPARATOR","\\",467],["T_STRING","DateTime",467],"(",["T_VARIABLE","$tr",467],"[",["T_CONSTANT_ENCAPSED_STRING","'time'",467],"]",")",")",["T_OBJECT_OPERATOR","->",467],["T_STRING","format",467],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",467],")",["T_WHITESPACE","\n                ",467],")",";",["T_WHITESPACE","\n                ",468],["T_VARIABLE","$tzTransitions",469],"[",["T_VARIABLE","$tr",469],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",469],"]","]","[","]",["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",469],["T_WHITESPACE"," ",469],["T_DOUBLE_ARROW","=>",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$tr",469],"[",["T_CONSTANT_ENCAPSED_STRING","'time'",469],"]",",",["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'to'",469],["T_WHITESPACE"," ",469],["T_DOUBLE_ARROW","=>",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$nextPeriod",469],"]",";",["T_WHITESPACE","\n\n                ",469],["T_IF","if",471],["T_WHITESPACE"," ",471],"(","!",["T_EMPTY","empty",471],"(",["T_VARIABLE","$from",471],")",["T_WHITESPACE"," ",471],["T_BOOLEAN_AND","&&",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$tr",471],"[",["T_CONSTANT_ENCAPSED_STRING","'ts'",471],"]",["T_WHITESPACE"," ",471],"<",["T_WHITESPACE"," ",471],["T_VARIABLE","$from",471],")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n                    ",471],["T_BREAK","break",472],";",["T_WHITESPACE","\n                ",472],"}",["T_WHITESPACE","\n                ",473],["T_VARIABLE","$nextPeriod",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$tr",474],"[",["T_CONSTANT_ENCAPSED_STRING","'time'",474],"]",";",["T_WHITESPACE","\n            ",474],"}",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE"," ",476],["T_CATCH","catch",476],["T_WHITESPACE"," ",476],"(",["T_NS_SEPARATOR","\\",476],["T_STRING","Exception",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$e",476],")",["T_WHITESPACE"," ",476],"{",["T_WHITESPACE","\n            ",476],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","_logger",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","critical",477],"(",["T_VARIABLE","$e",477],")",";",["T_WHITESPACE","\n        ",477],"}",["T_WHITESPACE","\n\n        ",478],["T_RETURN","return",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$tzTransitions",480],";",["T_WHITESPACE","\n    ",480],"}",["T_WHITESPACE","\n",481],"}",["T_WHITESPACE","\n",482]]
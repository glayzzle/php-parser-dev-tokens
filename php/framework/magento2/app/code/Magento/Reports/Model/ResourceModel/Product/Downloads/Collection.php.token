[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Product Downloads Report collection\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",7],["T_WHITESPACE","\n",11],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Reports",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ResourceModel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Product",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Downloads",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Collection",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Catalog",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ResourceModel",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Product",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Collection",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Identifier field name\n     *\n     * @var string\n     *\/",16],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$_idFieldName",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'link_id'",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Add downloads summary grouping by product\n     *\n     * @return $this\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","addSummary",28],"(",")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$connection",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getConnection",30],"(",")",";",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$linkExpr",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$connection",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getIfNullSql",31],"(",["T_CONSTANT_ENCAPSED_STRING","'l_store.title'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'l.title'",31],")",";",["T_WHITESPACE","\n\n        ",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getSelect",33],"(",")",["T_OBJECT_OPERATOR","->",33],["T_STRING","joinInner",33],"(",["T_WHITESPACE","\n            ",33],"[",["T_CONSTANT_ENCAPSED_STRING","'d'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getTable",34],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_purchased_item'",34],")","]",",",["T_WHITESPACE","\n            ",34],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = d.product_id'",35],",",["T_WHITESPACE","\n            ",35],"[",["T_WHITESPACE","\n                ",36],["T_CONSTANT_ENCAPSED_STRING","'purchases'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Zend_Db_Expr",37],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(d.number_of_downloads_bought)'",37],")",",",["T_WHITESPACE","\n                ",37],["T_CONSTANT_ENCAPSED_STRING","'downloads'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Zend_Db_Expr",38],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(d.number_of_downloads_used)'",38],")",["T_WHITESPACE","\n            ",38],"]",["T_WHITESPACE","\n        ",39],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","joinInner",40],"(",["T_WHITESPACE","\n            ",40],"[",["T_CONSTANT_ENCAPSED_STRING","'l'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getTable",41],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_title'",41],")","]",",",["T_WHITESPACE","\n            ",41],["T_CONSTANT_ENCAPSED_STRING","'d.link_id = l.link_id'",42],",",["T_WHITESPACE","\n            ",42],"[",["T_CONSTANT_ENCAPSED_STRING","'l.link_id'",43],"]",["T_WHITESPACE","\n        ",43],")",["T_OBJECT_OPERATOR","->",44],["T_STRING","joinLeft",44],"(",["T_WHITESPACE","\n            ",44],"[",["T_CONSTANT_ENCAPSED_STRING","'l_store'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getTable",45],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable_link_title'",45],")","]",",",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$connection",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","quoteInto",46],"(",["T_CONSTANT_ENCAPSED_STRING","'l.link_id = l_store.link_id AND l_store.store_id = ?'",46],",",["T_WHITESPACE"," ",46],["T_INT_CAST","(int)",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getStoreId",46],"(",")",")",",",["T_WHITESPACE","\n            ",46],"[",["T_CONSTANT_ENCAPSED_STRING","'link_title'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$linkExpr",47],"]",["T_WHITESPACE","\n        ",47],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","where",48],"(",["T_WHITESPACE","\n            ",48],["T_STRING","implode",49],"(",["T_WHITESPACE","\n                ",49],["T_CONSTANT_ENCAPSED_STRING","' OR '",50],",",["T_WHITESPACE","\n                ",50],"[",["T_WHITESPACE","\n                    ",51],["T_VARIABLE","$connection",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","quoteInto",52],"(",["T_CONSTANT_ENCAPSED_STRING","'d.number_of_downloads_bought > ?'",52],",",["T_WHITESPACE"," ",52],["T_LNUMBER","0",52],")",",",["T_WHITESPACE","\n                    ",52],["T_VARIABLE","$connection",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","quoteInto",53],"(",["T_CONSTANT_ENCAPSED_STRING","'d.number_of_downloads_used > ?'",53],",",["T_WHITESPACE"," ",53],["T_LNUMBER","0",53],")",["T_WHITESPACE","\n                ",53],"]",["T_WHITESPACE","\n            ",54],")",["T_WHITESPACE","\n        ",55],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","group",56],"(",["T_WHITESPACE","\n            ",56],["T_CONSTANT_ENCAPSED_STRING","'d.link_id'",57],["T_WHITESPACE","\n        ",57],")",";",["T_WHITESPACE","\n        ",58],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Add sorting\n     *\n     * @param string $attribute\n     * @param string $dir\n     * @return $this\n     *\/",62],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","setOrder",69],"(",["T_VARIABLE","$attribute",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$dir",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","self",69],["T_DOUBLE_COLON","::",69],["T_STRING","SORT_ORDER_DESC",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$attribute",71],["T_WHITESPACE"," ",71],["T_IS_EQUAL","==",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'purchases'",71],["T_WHITESPACE"," ",71],["T_BOOLEAN_OR","||",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$attribute",71],["T_WHITESPACE"," ",71],["T_IS_EQUAL","==",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'downloads'",71],["T_WHITESPACE"," ",71],["T_BOOLEAN_OR","||",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$attribute",71],["T_WHITESPACE"," ",71],["T_IS_EQUAL","==",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'link_title'",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getSelect",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","order",72],"(",["T_VARIABLE","$attribute",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","' '",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$dir",72],")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE"," ",73],["T_ELSE","else",73],["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_STRING","parent",74],["T_DOUBLE_COLON","::",74],["T_STRING","setOrder",74],"(",["T_VARIABLE","$attribute",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$dir",74],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Add filtering\n     *\n     * @param string $field\n     * @param null|string $condition\n     * @return $this\n     *\/",79],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","addFieldToFilter",86],"(",["T_VARIABLE","$field",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$condition",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","null",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$field",88],["T_WHITESPACE"," ",88],["T_IS_EQUAL","==",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'link_title'",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$conditionSql",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_getConditionSql",89],"(",["T_CONSTANT_ENCAPSED_STRING","'l.title'",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$condition",89],")",";",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getSelect",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","where",90],"(",["T_VARIABLE","$conditionSql",90],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE"," ",91],["T_ELSE","else",91],["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_STRING","parent",92],["T_DOUBLE_COLON","::",92],["T_STRING","addFieldToFilter",92],"(",["T_VARIABLE","$field",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$condition",92],")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n",95],"}",["T_WHITESPACE","\n",96]]
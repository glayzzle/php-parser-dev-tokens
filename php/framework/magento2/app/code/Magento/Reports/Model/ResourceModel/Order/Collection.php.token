[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Reports",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Order",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DB",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Select",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Reports orders collection\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","Collection",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Sales",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ResourceModel",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Order",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Collection",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * Is live\n     *\n     * @var bool\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_isLive",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","false",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Sales amount expression\n     *\n     * @var string\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_salesAmountExpression",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_scopeConfig",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Store manager instance\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_storeManager",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Locale date instance\n     *\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_localeDate",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Order config instance\n     *\n     * @var \\Magento\\Sales\\Model\\Order\\Config\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_orderConfig",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Reports order factory\n     *\n     * @var \\Magento\\Sales\\Model\\ResourceModel\\Report\\OrderFactory\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_reportOrderFactory",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Framework\\Data\\Collection\\EntityFactory $entityFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Data\\Collection\\Db\\FetchStrategyInterface $fetchStrategy\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\VersionControl\\Snapshot $entitySnapshot\n     * @param \\Magento\\Framework\\DB\\Helper $coreResourceHelper\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Magento\\Sales\\Model\\Order\\Config $orderConfig\n     * @param \\Magento\\Sales\\Model\\ResourceModel\\Report\\OrderFactory $reportOrderFactory\n     * @param null $connection\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\AbstractDb $resource\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",68],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","__construct",87],"(",["T_WHITESPACE","\n        ",87],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Data",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Collection",88],["T_NS_SEPARATOR","\\",88],["T_STRING","EntityFactory",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$entityFactory",88],",",["T_WHITESPACE","\n        ",88],["T_NS_SEPARATOR","\\",89],["T_STRING","Psr",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Log",89],["T_NS_SEPARATOR","\\",89],["T_STRING","LoggerInterface",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$logger",89],",",["T_WHITESPACE","\n        ",89],["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Framework",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Data",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Collection",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Db",90],["T_NS_SEPARATOR","\\",90],["T_STRING","FetchStrategyInterface",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$fetchStrategy",90],",",["T_WHITESPACE","\n        ",90],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Framework",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Event",91],["T_NS_SEPARATOR","\\",91],["T_STRING","ManagerInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$eventManager",91],",",["T_WHITESPACE","\n        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Model",92],["T_NS_SEPARATOR","\\",92],["T_STRING","ResourceModel",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Db",92],["T_NS_SEPARATOR","\\",92],["T_STRING","VersionControl",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Snapshot",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$entitySnapshot",92],",",["T_WHITESPACE","\n        ",92],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Framework",93],["T_NS_SEPARATOR","\\",93],["T_STRING","DB",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Helper",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$coreResourceHelper",93],",",["T_WHITESPACE","\n        ",93],["T_NS_SEPARATOR","\\",94],["T_STRING","Magento",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Framework",94],["T_NS_SEPARATOR","\\",94],["T_STRING","App",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Config",94],["T_NS_SEPARATOR","\\",94],["T_STRING","ScopeConfigInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$scopeConfig",94],",",["T_WHITESPACE","\n        ",94],["T_NS_SEPARATOR","\\",95],["T_STRING","Magento",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Store",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Model",95],["T_NS_SEPARATOR","\\",95],["T_STRING","StoreManagerInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$storeManager",95],",",["T_WHITESPACE","\n        ",95],["T_NS_SEPARATOR","\\",96],["T_STRING","Magento",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Framework",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Stdlib",96],["T_NS_SEPARATOR","\\",96],["T_STRING","DateTime",96],["T_NS_SEPARATOR","\\",96],["T_STRING","TimezoneInterface",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$localeDate",96],",",["T_WHITESPACE","\n        ",96],["T_NS_SEPARATOR","\\",97],["T_STRING","Magento",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Sales",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Model",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Order",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Config",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$orderConfig",97],",",["T_WHITESPACE","\n        ",97],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Sales",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Model",98],["T_NS_SEPARATOR","\\",98],["T_STRING","ResourceModel",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Report",98],["T_NS_SEPARATOR","\\",98],["T_STRING","OrderFactory",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$reportOrderFactory",98],",",["T_WHITESPACE","\n        ",98],["T_NS_SEPARATOR","\\",99],["T_STRING","Magento",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Framework",99],["T_NS_SEPARATOR","\\",99],["T_STRING","DB",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Adapter",99],["T_NS_SEPARATOR","\\",99],["T_STRING","AdapterInterface",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$connection",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","null",99],",",["T_WHITESPACE","\n        ",99],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Framework",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","ResourceModel",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Db",100],["T_NS_SEPARATOR","\\",100],["T_STRING","AbstractDb",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$resource",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","null",100],["T_WHITESPACE","\n    ",100],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n        ",101],["T_STRING","parent",102],["T_DOUBLE_COLON","::",102],["T_STRING","__construct",102],"(",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$entityFactory",103],",",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$logger",104],",",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$fetchStrategy",105],",",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$eventManager",106],",",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$entitySnapshot",107],",",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$coreResourceHelper",108],",",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$connection",109],",",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$resource",110],["T_WHITESPACE","\n        ",110],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_scopeConfig",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$scopeConfig",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_storeManager",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$storeManager",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_localeDate",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$localeDate",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_orderConfig",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$orderConfig",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_reportOrderFactory",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$reportOrderFactory",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Check range for live mode\n     *\n     * @param string $range\n     * @return $this\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",119],["T_WHITESPACE","\n    ",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","checkIsLive",126],"(",["T_VARIABLE","$range",126],")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_isLive",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_BOOL_CAST","(bool)",128],"(","!",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_scopeConfig",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getValue",128],"(",["T_WHITESPACE","\n            ",128],["T_CONSTANT_ENCAPSED_STRING","'sales\/dashboard\/use_aggregated_data'",129],",",["T_WHITESPACE","\n            ",129],["T_NS_SEPARATOR","\\",130],["T_STRING","Magento",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Store",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Model",130],["T_NS_SEPARATOR","\\",130],["T_STRING","ScopeInterface",130],["T_DOUBLE_COLON","::",130],["T_STRING","SCOPE_STORE",130],["T_WHITESPACE","\n        ",130],")",")",";",["T_WHITESPACE","\n        ",131],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Retrieve is live flag for rep\n     *\n     * @return bool\n     * @codeCoverageIgnore\n     *\/",135],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","isLive",141],"(",")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_isLive",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Prepare report summary\n     *\n     * @param string $range\n     * @param mixed $customStart\n     * @param mixed $customEnd\n     * @param int $isFilter\n     * @return $this\n     *\/",146],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","prepareSummary",155],"(",["T_VARIABLE","$range",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$customStart",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$customEnd",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$isFilter",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","checkIsLive",157],"(",["T_VARIABLE","$range",157],")",";",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_isLive",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_prepareSummaryLive",159],"(",["T_VARIABLE","$range",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$customStart",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$customEnd",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$isFilter",159],")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE"," ",160],["T_ELSE","else",160],["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_prepareSummaryAggregated",161],"(",["T_VARIABLE","$range",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$customStart",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$customEnd",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$isFilter",161],")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Get sales amount expression\n     *\n     * @return string\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PROTECTED","protected",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","_getSalesAmountExpression",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_STRING","null",174],["T_WHITESPACE"," ",174],["T_IS_IDENTICAL","===",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_salesAmountExpression",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$connection",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getConnection",175],"(",")",";",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$expressionTransferObject",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Magento",176],["T_NS_SEPARATOR","\\",176],["T_STRING","Framework",176],["T_NS_SEPARATOR","\\",176],["T_STRING","DataObject",176],"(",["T_WHITESPACE","\n                ",176],"[",["T_WHITESPACE","\n                    ",177],["T_CONSTANT_ENCAPSED_STRING","'expression'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'%s - %s - %s - (%s - %s - %s)'",178],",",["T_WHITESPACE","\n                    ",178],["T_CONSTANT_ENCAPSED_STRING","'arguments'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],"[",["T_WHITESPACE","\n                        ",179],["T_VARIABLE","$connection",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getIfNullSql",180],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_total_invoiced'",180],",",["T_WHITESPACE"," ",180],["T_LNUMBER","0",180],")",",",["T_WHITESPACE","\n                        ",180],["T_VARIABLE","$connection",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getIfNullSql",181],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_tax_invoiced'",181],",",["T_WHITESPACE"," ",181],["T_LNUMBER","0",181],")",",",["T_WHITESPACE","\n                        ",181],["T_VARIABLE","$connection",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getIfNullSql",182],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_shipping_invoiced'",182],",",["T_WHITESPACE"," ",182],["T_LNUMBER","0",182],")",",",["T_WHITESPACE","\n                        ",182],["T_VARIABLE","$connection",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getIfNullSql",183],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_total_refunded'",183],",",["T_WHITESPACE"," ",183],["T_LNUMBER","0",183],")",",",["T_WHITESPACE","\n                        ",183],["T_VARIABLE","$connection",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getIfNullSql",184],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_tax_refunded'",184],",",["T_WHITESPACE"," ",184],["T_LNUMBER","0",184],")",",",["T_WHITESPACE","\n                        ",184],["T_VARIABLE","$connection",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getIfNullSql",185],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_shipping_refunded'",185],",",["T_WHITESPACE"," ",185],["T_LNUMBER","0",185],")",",",["T_WHITESPACE","\n                    ",185],"]",",",["T_WHITESPACE","\n                ",186],"]",["T_WHITESPACE","\n            ",187],")",";",["T_WHITESPACE","\n\n            ",188],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_eventManager",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","dispatch",190],"(",["T_WHITESPACE","\n                ",190],["T_CONSTANT_ENCAPSED_STRING","'sales_prepare_amount_expression'",191],",",["T_WHITESPACE","\n                ",191],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'expression_object'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$expressionTransferObject",192],"]",["T_WHITESPACE","\n            ",192],")",";",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_salesAmountExpression",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","vsprintf",194],"(",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$expressionTransferObject",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getExpression",195],"(",")",",",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$expressionTransferObject",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getArguments",196],"(",")",["T_WHITESPACE","\n            ",196],")",";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_salesAmountExpression",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Prepare report summary from live data\n     *\n     * @param string $range\n     * @param mixed $customStart\n     * @param mixed $customEnd\n     * @param int $isFilter\n     * @return $this\n     *\/",203],["T_WHITESPACE","\n    ",211],["T_PROTECTED","protected",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","_prepareSummaryLive",212],"(",["T_VARIABLE","$range",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$customStart",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$customEnd",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$isFilter",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_LNUMBER","0",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","setMainTable",214],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",214],")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$connection",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getConnection",215],"(",")",";",["T_WHITESPACE","\n\n        ",215],["T_DOC_COMMENT","\/**\n         * Reset all columns, because result will group only by 'created_at' field\n         *\/",217],["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getSelect",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","reset",220],"(",["T_NS_SEPARATOR","\\",220],["T_STRING","Magento",220],["T_NS_SEPARATOR","\\",220],["T_STRING","Framework",220],["T_NS_SEPARATOR","\\",220],["T_STRING","DB",220],["T_NS_SEPARATOR","\\",220],["T_STRING","Select",220],["T_DOUBLE_COLON","::",220],["T_STRING","COLUMNS",220],")",";",["T_WHITESPACE","\n\n        ",220],["T_VARIABLE","$expression",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_getSalesAmountExpression",222],"(",")",";",["T_WHITESPACE","\n        ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$isFilter",223],["T_WHITESPACE"," ",223],["T_IS_EQUAL","==",223],["T_WHITESPACE"," ",223],["T_LNUMBER","0",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getSelect",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","columns",224],"(",["T_WHITESPACE","\n                ",224],"[",["T_WHITESPACE","\n                    ",225],["T_CONSTANT_ENCAPSED_STRING","'revenue'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_NEW","new",226],["T_WHITESPACE"," ",226],["T_NS_SEPARATOR","\\",226],["T_STRING","Zend_Db_Expr",226],"(",["T_WHITESPACE","\n                        ",226],["T_STRING","sprintf",227],"(",["T_WHITESPACE","\n                            ",227],["T_CONSTANT_ENCAPSED_STRING","'SUM((%s) * %s)'",228],",",["T_WHITESPACE","\n                            ",228],["T_VARIABLE","$expression",229],",",["T_WHITESPACE","\n                            ",229],["T_VARIABLE","$connection",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getIfNullSql",230],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_to_global_rate'",230],",",["T_WHITESPACE"," ",230],["T_LNUMBER","0",230],")",["T_WHITESPACE","\n                        ",230],")",["T_WHITESPACE","\n                    ",231],")",",",["T_WHITESPACE","\n                ",232],"]",["T_WHITESPACE","\n            ",233],")",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE"," ",235],["T_ELSE","else",235],["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getSelect",236],"(",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","columns",236],"(","[",["T_CONSTANT_ENCAPSED_STRING","'revenue'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_NEW","new",236],["T_WHITESPACE"," ",236],["T_NS_SEPARATOR","\\",236],["T_STRING","Zend_Db_Expr",236],"(",["T_STRING","sprintf",236],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(%s)'",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$expression",236],")",")","]",")",";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n\n        ",237],["T_VARIABLE","$dateRange",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getDateRange",239],"(",["T_VARIABLE","$range",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$customStart",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$customEnd",239],")",";",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$tzRangeOffsetExpression",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_getTZRangeOffsetExpression",241],"(",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$range",242],",",["T_WHITESPACE","\n            ",242],["T_CONSTANT_ENCAPSED_STRING","'created_at'",243],",",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$dateRange",244],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",244],"]",",",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$dateRange",245],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",245],"]",["T_WHITESPACE","\n        ",245],")",";",["T_WHITESPACE","\n\n        ",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getSelect",248],"(",")",["T_OBJECT_OPERATOR","->",248],["T_STRING","columns",248],"(",["T_WHITESPACE","\n            ",248],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'COUNT(main_table.entity_id)'",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'range'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$tzRangeOffsetExpression",249],"]",["T_WHITESPACE","\n        ",249],")",["T_OBJECT_OPERATOR","->",250],["T_STRING","where",250],"(",["T_WHITESPACE","\n            ",250],["T_CONSTANT_ENCAPSED_STRING","'main_table.state NOT IN (?)'",251],",",["T_WHITESPACE","\n            ",251],"[",["T_NS_SEPARATOR","\\",252],["T_STRING","Magento",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Sales",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Model",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Order",252],["T_DOUBLE_COLON","::",252],["T_STRING","STATE_PENDING_PAYMENT",252],",",["T_WHITESPACE"," ",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Magento",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Sales",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Model",252],["T_NS_SEPARATOR","\\",252],["T_STRING","Order",252],["T_DOUBLE_COLON","::",252],["T_STRING","STATE_NEW",252],"]",["T_WHITESPACE","\n        ",252],")",["T_OBJECT_OPERATOR","->",253],["T_STRING","order",253],"(",["T_WHITESPACE","\n            ",253],["T_CONSTANT_ENCAPSED_STRING","'range'",254],",",["T_WHITESPACE","\n            ",254],["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Framework",255],["T_NS_SEPARATOR","\\",255],["T_STRING","DB",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Select",255],["T_DOUBLE_COLON","::",255],["T_STRING","SQL_ASC",255],["T_WHITESPACE","\n        ",255],")",["T_OBJECT_OPERATOR","->",256],["T_STRING","group",256],"(",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$tzRangeOffsetExpression",257],["T_WHITESPACE","\n        ",257],")",";",["T_WHITESPACE","\n\n        ",258],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","addFieldToFilter",260],"(",["T_CONSTANT_ENCAPSED_STRING","'created_at'",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$dateRange",260],")",";",["T_WHITESPACE","\n\n        ",260],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Prepare report summary from aggregated data\n     *\n     * @param string $range\n     * @param string|null $customStart\n     * @param string|null $customEnd\n     * @return $this\n     *\/",265],["T_WHITESPACE","\n    ",272],["T_PROTECTED","protected",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","_prepareSummaryAggregated",273],"(",["T_VARIABLE","$range",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$customStart",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$customEnd",273],")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","setMainTable",275],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_aggregated_created'",275],")",";",["T_WHITESPACE","\n        ",275],["T_DOC_COMMENT","\/**\n         * Reset all columns, because result will group only by 'created_at' field\n         *\/",276],["T_WHITESPACE","\n        ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getSelect",279],"(",")",["T_OBJECT_OPERATOR","->",279],["T_STRING","reset",279],"(",["T_NS_SEPARATOR","\\",279],["T_STRING","Magento",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Framework",279],["T_NS_SEPARATOR","\\",279],["T_STRING","DB",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Select",279],["T_DOUBLE_COLON","::",279],["T_STRING","COLUMNS",279],")",";",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$rangePeriod",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_getRangeExpressionForAttribute",280],"(",["T_VARIABLE","$range",280],",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'main_table.period'",280],")",";",["T_WHITESPACE","\n\n        ",280],["T_VARIABLE","$tableName",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getConnection",282],"(",")",["T_OBJECT_OPERATOR","->",282],["T_STRING","quoteIdentifier",282],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.period'",282],")",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$rangePeriodAggregateStmt",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","str_replace",283],"(",["T_VARIABLE","$tableName",283],",",["T_WHITESPACE"," ",283],"\"",["T_ENCAPSED_AND_WHITESPACE","MIN(",283],["T_CURLY_OPEN","{",283],["T_VARIABLE","$tableName",283],"}",["T_ENCAPSED_AND_WHITESPACE",")",283],"\"",",",["T_WHITESPACE"," ",283],["T_VARIABLE","$rangePeriod",283],")",";",["T_WHITESPACE","\n\n        ",283],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getSelect",285],"(",")",["T_OBJECT_OPERATOR","->",285],["T_STRING","columns",285],"(",["T_WHITESPACE","\n            ",285],"[",["T_WHITESPACE","\n                ",286],["T_CONSTANT_ENCAPSED_STRING","'revenue'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.total_revenue_amount)'",287],",",["T_WHITESPACE","\n                ",287],["T_CONSTANT_ENCAPSED_STRING","'quantity'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.orders_count)'",288],",",["T_WHITESPACE","\n                ",288],["T_CONSTANT_ENCAPSED_STRING","'range'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$rangePeriodAggregateStmt",289],",",["T_WHITESPACE","\n            ",289],"]",["T_WHITESPACE","\n        ",290],")",["T_OBJECT_OPERATOR","->",291],["T_STRING","order",291],"(",["T_WHITESPACE","\n            ",291],["T_CONSTANT_ENCAPSED_STRING","'range'",292],["T_WHITESPACE","\n        ",292],")",["T_OBJECT_OPERATOR","->",293],["T_STRING","group",293],"(",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$rangePeriod",294],["T_WHITESPACE","\n        ",294],")",";",["T_WHITESPACE","\n\n        ",295],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getSelect",297],"(",")",["T_OBJECT_OPERATOR","->",297],["T_STRING","where",297],"(",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_getConditionSql",298],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.period'",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getDateRange",298],"(",["T_VARIABLE","$range",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$customStart",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$customEnd",298],")",")",["T_WHITESPACE","\n        ",298],")",";",["T_WHITESPACE","\n\n        ",299],["T_VARIABLE","$statuses",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_orderConfig",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getStateStatuses",301],"(",["T_NS_SEPARATOR","\\",301],["T_STRING","Magento",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Sales",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Model",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Order",301],["T_DOUBLE_COLON","::",301],["T_STRING","STATE_CANCELED",301],")",";",["T_WHITESPACE","\n\n        ",301],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_EMPTY","empty",303],"(",["T_VARIABLE","$statuses",303],")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$statuses",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],"[",["T_LNUMBER","0",304],"]",";",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","addFieldToFilter",306],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.order_status'",306],",",["T_WHITESPACE"," ",306],"[",["T_CONSTANT_ENCAPSED_STRING","'nin'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$statuses",306],"]",")",";",["T_WHITESPACE","\n\n        ",306],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n\n    ",309],["T_DOC_COMMENT","\/**\n     * Get range expression\n     *\n     * @param string $range\n     * @return \\Zend_Db_Expr\n     *\/",311],["T_WHITESPACE","\n    ",316],["T_PROTECTED","protected",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","_getRangeExpression",317],"(",["T_VARIABLE","$range",317],")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_SWITCH","switch",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$range",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_CASE","case",320],["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'24h'",320],":",["T_WHITESPACE","\n                ",320],["T_VARIABLE","$expression",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getConnection",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","getConcatSql",321],"(",["T_WHITESPACE","\n                    ",321],"[",["T_WHITESPACE","\n                        ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getConnection",323],"(",")",["T_OBJECT_OPERATOR","->",323],["T_STRING","getDateFormatSql",323],"(",["T_CONSTANT_ENCAPSED_STRING","'{{attribute}}'",323],",",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'%Y-%m-%d %H:'",323],")",",",["T_WHITESPACE","\n                        ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getConnection",324],"(",")",["T_OBJECT_OPERATOR","->",324],["T_STRING","quote",324],"(",["T_CONSTANT_ENCAPSED_STRING","'00'",324],")",",",["T_WHITESPACE","\n                    ",324],"]",["T_WHITESPACE","\n                ",325],")",";",["T_WHITESPACE","\n                ",326],["T_BREAK","break",327],";",["T_WHITESPACE","\n            ",327],["T_CASE","case",328],["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'7d'",328],":",["T_WHITESPACE","\n            ",328],["T_CASE","case",329],["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'1m'",329],":",["T_WHITESPACE","\n                ",329],["T_VARIABLE","$expression",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getConnection",330],"(",")",["T_OBJECT_OPERATOR","->",330],["T_STRING","getDateFormatSql",330],"(",["T_CONSTANT_ENCAPSED_STRING","'{{attribute}}'",330],",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'%Y-%m-%d'",330],")",";",["T_WHITESPACE","\n                ",330],["T_BREAK","break",331],";",["T_WHITESPACE","\n            ",331],["T_CASE","case",332],["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'1y'",332],":",["T_WHITESPACE","\n            ",332],["T_CASE","case",333],["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'2y'",333],":",["T_WHITESPACE","\n            ",333],["T_CASE","case",334],["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'custom'",334],":",["T_WHITESPACE","\n            ",334],["T_DEFAULT","default",335],":",["T_WHITESPACE","\n                ",335],["T_VARIABLE","$expression",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getConnection",336],"(",")",["T_OBJECT_OPERATOR","->",336],["T_STRING","getDateFormatSql",336],"(",["T_CONSTANT_ENCAPSED_STRING","'{{attribute}}'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'%Y-%m'",336],")",";",["T_WHITESPACE","\n                ",336],["T_BREAK","break",337],";",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n\n        ",338],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$expression",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Retrieve range expression adapted for attribute\n     *\n     * @param string $range\n     * @param string $attribute\n     * @return string\n     *\/",343],["T_WHITESPACE","\n    ",349],["T_PROTECTED","protected",350],["T_WHITESPACE"," ",350],["T_FUNCTION","function",350],["T_WHITESPACE"," ",350],["T_STRING","_getRangeExpressionForAttribute",350],"(",["T_VARIABLE","$range",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$attribute",350],")",["T_WHITESPACE","\n    ",350],"{",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$expression",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_getRangeExpression",352],"(",["T_VARIABLE","$range",352],")",";",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_STRING","str_replace",353],"(",["T_CONSTANT_ENCAPSED_STRING","'{{attribute}}'",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getConnection",353],"(",")",["T_OBJECT_OPERATOR","->",353],["T_STRING","quoteIdentifier",353],"(",["T_VARIABLE","$attribute",353],")",",",["T_WHITESPACE"," ",353],["T_VARIABLE","$expression",353],")",";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Retrieve query for attribute with timezone conversion\n     *\n     * @param string $range\n     * @param string $attribute\n     * @param string|null $from\n     * @param string|null $to\n     * @return string\n     *\/",356],["T_WHITESPACE","\n    ",364],["T_PROTECTED","protected",365],["T_WHITESPACE"," ",365],["T_FUNCTION","function",365],["T_WHITESPACE"," ",365],["T_STRING","_getTZRangeOffsetExpression",365],"(",["T_VARIABLE","$range",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$attribute",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$from",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","null",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$to",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","null",365],")",["T_WHITESPACE","\n    ",365],"{",["T_WHITESPACE","\n        ",366],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_STRING","str_replace",367],"(",["T_WHITESPACE","\n            ",367],["T_CONSTANT_ENCAPSED_STRING","'{{attribute}}'",368],",",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","_reportOrderFactory",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","create",369],"(",")",["T_OBJECT_OPERATOR","->",369],["T_STRING","getStoreTZOffsetQuery",369],"(",["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getMainTable",369],"(",")",",",["T_WHITESPACE"," ",369],["T_VARIABLE","$attribute",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$from",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$to",369],")",",",["T_WHITESPACE","\n            ",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_getRangeExpression",370],"(",["T_VARIABLE","$range",370],")",["T_WHITESPACE","\n        ",370],")",";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n\n    ",372],["T_DOC_COMMENT","\/**\n     * Retrieve range expression with timezone conversion adapted for attribute\n     *\n     * @param string $range\n     * @param string $attribute\n     * @param string $tzFrom\n     * @param string $tzTo\n     * @return string\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",374],["T_WHITESPACE","\n    ",383],["T_PROTECTED","protected",384],["T_WHITESPACE"," ",384],["T_FUNCTION","function",384],["T_WHITESPACE"," ",384],["T_STRING","_getTZRangeExpressionForAttribute",384],"(",["T_VARIABLE","$range",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$attribute",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$tzFrom",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'+00:00'",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$tzTo",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","null",384],")",["T_WHITESPACE","\n    ",384],"{",["T_WHITESPACE","\n        ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(",["T_STRING","null",386],["T_WHITESPACE"," ",386],["T_IS_EQUAL","==",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$tzTo",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n            ",386],["T_VARIABLE","$tzTo",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","_localeDate",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","scopeDate",387],"(",")",["T_OBJECT_OPERATOR","->",387],["T_STRING","format",387],"(",["T_CONSTANT_ENCAPSED_STRING","'P'",387],")",";",["T_WHITESPACE","\n        ",387],"}",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$connection",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getConnection",389],"(",")",";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$expression",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_getRangeExpression",390],"(",["T_VARIABLE","$range",390],")",";",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$attribute",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$connection",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","quoteIdentifier",391],"(",["T_VARIABLE","$attribute",391],")",";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$periodExpr",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$connection",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getDateAddSql",392],"(",["T_WHITESPACE","\n            ",392],["T_VARIABLE","$attribute",393],",",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$tzTo",394],",",["T_WHITESPACE","\n            ",394],["T_NS_SEPARATOR","\\",395],["T_STRING","Magento",395],["T_NS_SEPARATOR","\\",395],["T_STRING","Framework",395],["T_NS_SEPARATOR","\\",395],["T_STRING","DB",395],["T_NS_SEPARATOR","\\",395],["T_STRING","Adapter",395],["T_NS_SEPARATOR","\\",395],["T_STRING","AdapterInterface",395],["T_DOUBLE_COLON","::",395],["T_STRING","INTERVAL_HOUR",395],["T_WHITESPACE","\n        ",395],")",";",["T_WHITESPACE","\n\n        ",396],["T_RETURN","return",398],["T_WHITESPACE"," ",398],["T_STRING","str_replace",398],"(",["T_CONSTANT_ENCAPSED_STRING","'{{attribute}}'",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$periodExpr",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$expression",398],")",";",["T_WHITESPACE","\n    ",398],"}",["T_WHITESPACE","\n\n    ",399],["T_DOC_COMMENT","\/**\n     * Calculate From and To dates (or times) by given period\n     *\n     * @param string $range\n     * @param string $customStart\n     * @param string $customEnd\n     * @param bool $returnObjects\n     * @return array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",401],["T_WHITESPACE","\n    ",410],["T_PUBLIC","public",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","getDateRange",411],"(",["T_VARIABLE","$range",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$customStart",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$customEnd",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$returnObjects",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","false",411],")",["T_WHITESPACE","\n    ",411],"{",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$dateEnd",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_NEW","new",413],["T_WHITESPACE"," ",413],["T_NS_SEPARATOR","\\",413],["T_STRING","DateTime",413],"(",")",";",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$dateStart",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_NEW","new",414],["T_WHITESPACE"," ",414],["T_NS_SEPARATOR","\\",414],["T_STRING","DateTime",414],"(",")",";",["T_WHITESPACE","\n\n        ",414],["T_COMMENT","\/\/ go to the end of a day\n",416],["T_WHITESPACE","        ",417],["T_VARIABLE","$dateEnd",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","setTime",417],"(",["T_LNUMBER","23",417],",",["T_WHITESPACE"," ",417],["T_LNUMBER","59",417],",",["T_WHITESPACE"," ",417],["T_LNUMBER","59",417],")",";",["T_WHITESPACE","\n\n        ",417],["T_VARIABLE","$dateStart",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","setTime",419],"(",["T_LNUMBER","0",419],",",["T_WHITESPACE"," ",419],["T_LNUMBER","0",419],",",["T_WHITESPACE"," ",419],["T_LNUMBER","0",419],")",";",["T_WHITESPACE","\n\n        ",419],["T_SWITCH","switch",421],["T_WHITESPACE"," ",421],"(",["T_VARIABLE","$range",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n            ",421],["T_CASE","case",422],["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'24h'",422],":",["T_WHITESPACE","\n                ",422],["T_VARIABLE","$dateEnd",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_NEW","new",423],["T_WHITESPACE"," ",423],["T_NS_SEPARATOR","\\",423],["T_STRING","DateTime",423],"(",")",";",["T_WHITESPACE","\n                ",423],["T_VARIABLE","$dateEnd",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","modify",424],"(",["T_CONSTANT_ENCAPSED_STRING","'+1 hour'",424],")",";",["T_WHITESPACE","\n                ",424],["T_VARIABLE","$dateStart",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_CLONE","clone",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$dateEnd",425],";",["T_WHITESPACE","\n                ",425],["T_VARIABLE","$dateStart",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","modify",426],"(",["T_CONSTANT_ENCAPSED_STRING","'-1 day'",426],")",";",["T_WHITESPACE","\n                ",426],["T_BREAK","break",427],";",["T_WHITESPACE","\n\n            ",427],["T_CASE","case",429],["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'7d'",429],":",["T_WHITESPACE","\n                ",429],["T_COMMENT","\/\/ substract 6 days we need to include\n",430],["T_WHITESPACE","                ",431],["T_COMMENT","\/\/ only today and not hte last one from range\n",431],["T_WHITESPACE","                ",432],["T_VARIABLE","$dateStart",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","modify",432],"(",["T_CONSTANT_ENCAPSED_STRING","'-6 days'",432],")",";",["T_WHITESPACE","\n                ",432],["T_BREAK","break",433],";",["T_WHITESPACE","\n\n            ",433],["T_CASE","case",435],["T_WHITESPACE"," ",435],["T_CONSTANT_ENCAPSED_STRING","'1m'",435],":",["T_WHITESPACE","\n                ",435],["T_VARIABLE","$dateStart",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","setDate",436],"(",["T_WHITESPACE","\n                    ",436],["T_VARIABLE","$dateStart",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","format",437],"(",["T_CONSTANT_ENCAPSED_STRING","'Y'",437],")",",",["T_WHITESPACE","\n                    ",437],["T_VARIABLE","$dateStart",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","format",438],"(",["T_CONSTANT_ENCAPSED_STRING","'m'",438],")",",",["T_WHITESPACE","\n                    ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_scopeConfig",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getValue",439],"(",["T_WHITESPACE","\n                        ",439],["T_CONSTANT_ENCAPSED_STRING","'reports\/dashboard\/mtd_start'",440],",",["T_WHITESPACE","\n                        ",440],["T_NS_SEPARATOR","\\",441],["T_STRING","Magento",441],["T_NS_SEPARATOR","\\",441],["T_STRING","Store",441],["T_NS_SEPARATOR","\\",441],["T_STRING","Model",441],["T_NS_SEPARATOR","\\",441],["T_STRING","ScopeInterface",441],["T_DOUBLE_COLON","::",441],["T_STRING","SCOPE_STORE",441],["T_WHITESPACE","\n                    ",441],")",["T_WHITESPACE","\n                ",442],")",";",["T_WHITESPACE","\n                ",443],["T_BREAK","break",444],";",["T_WHITESPACE","\n\n            ",444],["T_CASE","case",446],["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","'custom'",446],":",["T_WHITESPACE","\n                ",446],["T_VARIABLE","$dateStart",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$customStart",447],["T_WHITESPACE"," ",447],"?",["T_WHITESPACE"," ",447],["T_VARIABLE","$customStart",447],["T_WHITESPACE"," ",447],":",["T_WHITESPACE"," ",447],["T_VARIABLE","$dateEnd",447],";",["T_WHITESPACE","\n                ",447],["T_VARIABLE","$dateEnd",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$customEnd",448],["T_WHITESPACE"," ",448],"?",["T_WHITESPACE"," ",448],["T_VARIABLE","$customEnd",448],["T_WHITESPACE"," ",448],":",["T_WHITESPACE"," ",448],["T_VARIABLE","$dateEnd",448],";",["T_WHITESPACE","\n                ",448],["T_BREAK","break",449],";",["T_WHITESPACE","\n\n            ",449],["T_CASE","case",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'1y'",451],":",["T_WHITESPACE","\n            ",451],["T_CASE","case",452],["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'2y'",452],":",["T_WHITESPACE","\n                ",452],["T_VARIABLE","$startMonthDay",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_STRING","explode",453],"(",["T_WHITESPACE","\n                    ",453],["T_CONSTANT_ENCAPSED_STRING","','",454],",",["T_WHITESPACE","\n                    ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","_scopeConfig",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getValue",455],"(",["T_WHITESPACE","\n                        ",455],["T_CONSTANT_ENCAPSED_STRING","'reports\/dashboard\/ytd_start'",456],",",["T_WHITESPACE","\n                        ",456],["T_NS_SEPARATOR","\\",457],["T_STRING","Magento",457],["T_NS_SEPARATOR","\\",457],["T_STRING","Store",457],["T_NS_SEPARATOR","\\",457],["T_STRING","Model",457],["T_NS_SEPARATOR","\\",457],["T_STRING","ScopeInterface",457],["T_DOUBLE_COLON","::",457],["T_STRING","SCOPE_STORE",457],["T_WHITESPACE","\n                    ",457],")",["T_WHITESPACE","\n                ",458],")",";",["T_WHITESPACE","\n                ",459],["T_VARIABLE","$startMonth",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_ISSET","isset",460],"(",["T_VARIABLE","$startMonthDay",460],"[",["T_LNUMBER","0",460],"]",")",["T_WHITESPACE"," ",460],"?",["T_WHITESPACE"," ",460],["T_INT_CAST","(int)",460],["T_VARIABLE","$startMonthDay",460],"[",["T_LNUMBER","0",460],"]",["T_WHITESPACE"," ",460],":",["T_WHITESPACE"," ",460],["T_LNUMBER","1",460],";",["T_WHITESPACE","\n                ",460],["T_VARIABLE","$startDay",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_ISSET","isset",461],"(",["T_VARIABLE","$startMonthDay",461],"[",["T_LNUMBER","1",461],"]",")",["T_WHITESPACE"," ",461],"?",["T_WHITESPACE"," ",461],["T_INT_CAST","(int)",461],["T_VARIABLE","$startMonthDay",461],"[",["T_LNUMBER","1",461],"]",["T_WHITESPACE"," ",461],":",["T_WHITESPACE"," ",461],["T_LNUMBER","1",461],";",["T_WHITESPACE","\n                ",461],["T_VARIABLE","$dateStart",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","setDate",462],"(",["T_VARIABLE","$dateStart",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","format",462],"(",["T_CONSTANT_ENCAPSED_STRING","'Y'",462],")",",",["T_WHITESPACE"," ",462],["T_VARIABLE","$startMonth",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$startDay",462],")",";",["T_WHITESPACE","\n                ",462],["T_IF","if",463],["T_WHITESPACE"," ",463],"(",["T_VARIABLE","$range",463],["T_WHITESPACE"," ",463],["T_IS_EQUAL","==",463],["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","'2y'",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                    ",463],["T_VARIABLE","$dateStart",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","modify",464],"(",["T_CONSTANT_ENCAPSED_STRING","'-1 year'",464],")",";",["T_WHITESPACE","\n                ",464],"}",["T_WHITESPACE","\n                ",465],["T_BREAK","break",466],";",["T_WHITESPACE","\n        ",466],"}",["T_WHITESPACE","\n\n        ",467],["T_IF","if",469],["T_WHITESPACE"," ",469],"(",["T_VARIABLE","$returnObjects",469],")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n            ",469],["T_RETURN","return",470],["T_WHITESPACE"," ",470],"[",["T_VARIABLE","$dateStart",470],",",["T_WHITESPACE"," ",470],["T_VARIABLE","$dateEnd",470],"]",";",["T_WHITESPACE","\n        ",470],"}",["T_WHITESPACE"," ",471],["T_ELSE","else",471],["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n            ",471],["T_RETURN","return",472],["T_WHITESPACE"," ",472],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",472],["T_WHITESPACE"," ",472],["T_DOUBLE_ARROW","=>",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$dateStart",472],",",["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'to'",472],["T_WHITESPACE"," ",472],["T_DOUBLE_ARROW","=>",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$dateEnd",472],",",["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'datetime'",472],["T_WHITESPACE"," ",472],["T_DOUBLE_ARROW","=>",472],["T_WHITESPACE"," ",472],["T_STRING","true",472],"]",";",["T_WHITESPACE","\n        ",472],"}",["T_WHITESPACE","\n    ",473],"}",["T_WHITESPACE","\n\n    ",474],["T_DOC_COMMENT","\/**\n     * Add item count expression\n     *\n     * @return $this\n     *\/",476],["T_WHITESPACE","\n    ",480],["T_PUBLIC","public",481],["T_WHITESPACE"," ",481],["T_FUNCTION","function",481],["T_WHITESPACE"," ",481],["T_STRING","addItemCountExpr",481],"(",")",["T_WHITESPACE","\n    ",481],"{",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","getSelect",483],"(",")",["T_OBJECT_OPERATOR","->",483],["T_STRING","columns",483],"(","[",["T_CONSTANT_ENCAPSED_STRING","'items_count'",483],["T_WHITESPACE"," ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'total_item_count'",483],"]",",",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'main_table'",483],")",";",["T_WHITESPACE","\n        ",483],["T_RETURN","return",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$this",484],";",["T_WHITESPACE","\n    ",484],"}",["T_WHITESPACE","\n\n    ",485],["T_DOC_COMMENT","\/**\n     * Calculate totals report\n     *\n     * @param int $isFilter\n     * @return $this\n     *\/",487],["T_WHITESPACE","\n    ",492],["T_PUBLIC","public",493],["T_WHITESPACE"," ",493],["T_FUNCTION","function",493],["T_WHITESPACE"," ",493],["T_STRING","calculateTotals",493],"(",["T_VARIABLE","$isFilter",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_LNUMBER","0",493],")",["T_WHITESPACE","\n    ",493],"{",["T_WHITESPACE","\n        ",494],["T_IF","if",495],["T_WHITESPACE"," ",495],"(",["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","isLive",495],"(",")",")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n            ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","_calculateTotalsLive",496],"(",["T_VARIABLE","$isFilter",496],")",";",["T_WHITESPACE","\n        ",496],"}",["T_WHITESPACE"," ",497],["T_ELSE","else",497],["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","_calculateTotalsAggregated",498],"(",["T_VARIABLE","$isFilter",498],")",";",["T_WHITESPACE","\n        ",498],"}",["T_WHITESPACE","\n\n        ",499],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],";",["T_WHITESPACE","\n    ",501],"}",["T_WHITESPACE","\n\n    ",502],["T_DOC_COMMENT","\/**\n     * Calculate totals live report\n     *\n     * @param int $isFilter\n     * @return $this\n     *\/",504],["T_WHITESPACE","\n    ",509],["T_PROTECTED","protected",510],["T_WHITESPACE"," ",510],["T_FUNCTION","function",510],["T_WHITESPACE"," ",510],["T_STRING","_calculateTotalsLive",510],"(",["T_VARIABLE","$isFilter",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_LNUMBER","0",510],")",["T_WHITESPACE","\n    ",510],"{",["T_WHITESPACE","\n        ",511],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","setMainTable",512],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",512],")",";",["T_WHITESPACE","\n        ",512],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","removeAllFieldsFromSelect",513],"(",")",";",["T_WHITESPACE","\n\n        ",513],["T_VARIABLE","$connection",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","getConnection",515],"(",")",";",["T_WHITESPACE","\n\n        ",515],["T_VARIABLE","$baseTaxInvoiced",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$connection",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","getIfNullSql",517],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_tax_invoiced'",517],",",["T_WHITESPACE"," ",517],["T_LNUMBER","0",517],")",";",["T_WHITESPACE","\n        ",517],["T_VARIABLE","$baseTaxRefunded",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$connection",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getIfNullSql",518],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_tax_refunded'",518],",",["T_WHITESPACE"," ",518],["T_LNUMBER","0",518],")",";",["T_WHITESPACE","\n        ",518],["T_VARIABLE","$baseShippingInvoiced",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$connection",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","getIfNullSql",519],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_shipping_invoiced'",519],",",["T_WHITESPACE"," ",519],["T_LNUMBER","0",519],")",";",["T_WHITESPACE","\n        ",519],["T_VARIABLE","$baseShippingRefunded",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$connection",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","getIfNullSql",520],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_shipping_refunded'",520],",",["T_WHITESPACE"," ",520],["T_LNUMBER","0",520],")",";",["T_WHITESPACE","\n\n        ",520],["T_VARIABLE","$revenueExp",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_getSalesAmountExpression",522],"(",")",";",["T_WHITESPACE","\n        ",522],["T_VARIABLE","$taxExp",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_STRING","sprintf",523],"(",["T_CONSTANT_ENCAPSED_STRING","'%s - %s'",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$baseTaxInvoiced",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$baseTaxRefunded",523],")",";",["T_WHITESPACE","\n        ",523],["T_VARIABLE","$shippingExp",524],["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],["T_STRING","sprintf",524],"(",["T_CONSTANT_ENCAPSED_STRING","'%s - %s'",524],",",["T_WHITESPACE"," ",524],["T_VARIABLE","$baseShippingInvoiced",524],",",["T_WHITESPACE"," ",524],["T_VARIABLE","$baseShippingRefunded",524],")",";",["T_WHITESPACE","\n\n        ",524],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_VARIABLE","$isFilter",526],["T_WHITESPACE"," ",526],["T_IS_EQUAL","==",526],["T_WHITESPACE"," ",526],["T_LNUMBER","0",526],")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_VARIABLE","$rateExp",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$connection",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getIfNullSql",527],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_to_global_rate'",527],",",["T_WHITESPACE"," ",527],["T_LNUMBER","0",527],")",";",["T_WHITESPACE","\n            ",527],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","getSelect",528],"(",")",["T_OBJECT_OPERATOR","->",528],["T_STRING","columns",528],"(",["T_WHITESPACE","\n                ",528],"[",["T_WHITESPACE","\n                    ",529],["T_CONSTANT_ENCAPSED_STRING","'revenue'",530],["T_WHITESPACE"," ",530],["T_DOUBLE_ARROW","=>",530],["T_WHITESPACE"," ",530],["T_NEW","new",530],["T_WHITESPACE"," ",530],["T_NS_SEPARATOR","\\",530],["T_STRING","Zend_Db_Expr",530],"(",["T_STRING","sprintf",530],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM((%s) * %s)'",530],",",["T_WHITESPACE"," ",530],["T_VARIABLE","$revenueExp",530],",",["T_WHITESPACE"," ",530],["T_VARIABLE","$rateExp",530],")",")",",",["T_WHITESPACE","\n                    ",530],["T_CONSTANT_ENCAPSED_STRING","'tax'",531],["T_WHITESPACE"," ",531],["T_DOUBLE_ARROW","=>",531],["T_WHITESPACE"," ",531],["T_NEW","new",531],["T_WHITESPACE"," ",531],["T_NS_SEPARATOR","\\",531],["T_STRING","Zend_Db_Expr",531],"(",["T_STRING","sprintf",531],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM((%s) * %s)'",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$taxExp",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$rateExp",531],")",")",",",["T_WHITESPACE","\n                    ",531],["T_CONSTANT_ENCAPSED_STRING","'shipping'",532],["T_WHITESPACE"," ",532],["T_DOUBLE_ARROW","=>",532],["T_WHITESPACE"," ",532],["T_NEW","new",532],["T_WHITESPACE"," ",532],["T_NS_SEPARATOR","\\",532],["T_STRING","Zend_Db_Expr",532],"(",["T_STRING","sprintf",532],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM((%s) * %s)'",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$shippingExp",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$rateExp",532],")",")",",",["T_WHITESPACE","\n                ",532],"]",["T_WHITESPACE","\n            ",533],")",";",["T_WHITESPACE","\n        ",534],"}",["T_WHITESPACE"," ",535],["T_ELSE","else",535],["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n            ",535],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getSelect",536],"(",")",["T_OBJECT_OPERATOR","->",536],["T_STRING","columns",536],"(",["T_WHITESPACE","\n                ",536],"[",["T_WHITESPACE","\n                    ",537],["T_CONSTANT_ENCAPSED_STRING","'revenue'",538],["T_WHITESPACE"," ",538],["T_DOUBLE_ARROW","=>",538],["T_WHITESPACE"," ",538],["T_NEW","new",538],["T_WHITESPACE"," ",538],["T_NS_SEPARATOR","\\",538],["T_STRING","Zend_Db_Expr",538],"(",["T_STRING","sprintf",538],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(%s)'",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$revenueExp",538],")",")",",",["T_WHITESPACE","\n                    ",538],["T_CONSTANT_ENCAPSED_STRING","'tax'",539],["T_WHITESPACE"," ",539],["T_DOUBLE_ARROW","=>",539],["T_WHITESPACE"," ",539],["T_NEW","new",539],["T_WHITESPACE"," ",539],["T_NS_SEPARATOR","\\",539],["T_STRING","Zend_Db_Expr",539],"(",["T_STRING","sprintf",539],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(%s)'",539],",",["T_WHITESPACE"," ",539],["T_VARIABLE","$taxExp",539],")",")",",",["T_WHITESPACE","\n                    ",539],["T_CONSTANT_ENCAPSED_STRING","'shipping'",540],["T_WHITESPACE"," ",540],["T_DOUBLE_ARROW","=>",540],["T_WHITESPACE"," ",540],["T_NEW","new",540],["T_WHITESPACE"," ",540],["T_NS_SEPARATOR","\\",540],["T_STRING","Zend_Db_Expr",540],"(",["T_STRING","sprintf",540],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(%s)'",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$shippingExp",540],")",")",",",["T_WHITESPACE","\n                ",540],"]",["T_WHITESPACE","\n            ",541],")",";",["T_WHITESPACE","\n        ",542],"}",["T_WHITESPACE","\n\n        ",543],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","getSelect",545],"(",")",["T_OBJECT_OPERATOR","->",545],["T_STRING","columns",545],"(",["T_WHITESPACE","\n            ",545],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",546],["T_WHITESPACE"," ",546],["T_DOUBLE_ARROW","=>",546],["T_WHITESPACE"," ",546],["T_CONSTANT_ENCAPSED_STRING","'COUNT(main_table.entity_id)'",546],"]",["T_WHITESPACE","\n        ",546],")",["T_OBJECT_OPERATOR","->",547],["T_STRING","where",547],"(",["T_WHITESPACE","\n            ",547],["T_CONSTANT_ENCAPSED_STRING","'main_table.state NOT IN (?)'",548],",",["T_WHITESPACE","\n            ",548],"[",["T_NS_SEPARATOR","\\",549],["T_STRING","Magento",549],["T_NS_SEPARATOR","\\",549],["T_STRING","Sales",549],["T_NS_SEPARATOR","\\",549],["T_STRING","Model",549],["T_NS_SEPARATOR","\\",549],["T_STRING","Order",549],["T_DOUBLE_COLON","::",549],["T_STRING","STATE_PENDING_PAYMENT",549],",",["T_WHITESPACE"," ",549],["T_NS_SEPARATOR","\\",549],["T_STRING","Magento",549],["T_NS_SEPARATOR","\\",549],["T_STRING","Sales",549],["T_NS_SEPARATOR","\\",549],["T_STRING","Model",549],["T_NS_SEPARATOR","\\",549],["T_STRING","Order",549],["T_DOUBLE_COLON","::",549],["T_STRING","STATE_NEW",549],"]",["T_WHITESPACE","\n        ",549],")",";",["T_WHITESPACE","\n\n        ",550],["T_RETURN","return",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],";",["T_WHITESPACE","\n    ",552],"}",["T_WHITESPACE","\n\n    ",553],["T_DOC_COMMENT","\/**\n     * Calculate totals aggregated report\n     *\n     * @param int $isFilter\n     * @return $this\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",555],["T_WHITESPACE","\n    ",561],["T_PROTECTED","protected",562],["T_WHITESPACE"," ",562],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","_calculateTotalsAggregated",562],"(",["T_VARIABLE","$isFilter",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_LNUMBER","0",562],")",["T_WHITESPACE","\n    ",562],"{",["T_WHITESPACE","\n        ",563],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","setMainTable",564],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_aggregated_created'",564],")",";",["T_WHITESPACE","\n        ",564],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","removeAllFieldsFromSelect",565],"(",")",";",["T_WHITESPACE","\n\n        ",565],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getSelect",567],"(",")",["T_OBJECT_OPERATOR","->",567],["T_STRING","columns",567],"(",["T_WHITESPACE","\n            ",567],"[",["T_WHITESPACE","\n                ",568],["T_CONSTANT_ENCAPSED_STRING","'revenue'",569],["T_WHITESPACE"," ",569],["T_DOUBLE_ARROW","=>",569],["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.total_revenue_amount)'",569],",",["T_WHITESPACE","\n                ",569],["T_CONSTANT_ENCAPSED_STRING","'tax'",570],["T_WHITESPACE"," ",570],["T_DOUBLE_ARROW","=>",570],["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.total_tax_amount_actual)'",570],",",["T_WHITESPACE","\n                ",570],["T_CONSTANT_ENCAPSED_STRING","'shipping'",571],["T_WHITESPACE"," ",571],["T_DOUBLE_ARROW","=>",571],["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.total_shipping_amount_actual)'",571],",",["T_WHITESPACE","\n                ",571],["T_CONSTANT_ENCAPSED_STRING","'quantity'",572],["T_WHITESPACE"," ",572],["T_DOUBLE_ARROW","=>",572],["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'SUM(orders_count)'",572],",",["T_WHITESPACE","\n            ",572],"]",["T_WHITESPACE","\n        ",573],")",";",["T_WHITESPACE","\n\n        ",574],["T_VARIABLE","$statuses",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_orderConfig",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getStateStatuses",576],"(",["T_NS_SEPARATOR","\\",576],["T_STRING","Magento",576],["T_NS_SEPARATOR","\\",576],["T_STRING","Sales",576],["T_NS_SEPARATOR","\\",576],["T_STRING","Model",576],["T_NS_SEPARATOR","\\",576],["T_STRING","Order",576],["T_DOUBLE_COLON","::",576],["T_STRING","STATE_CANCELED",576],")",";",["T_WHITESPACE","\n\n        ",576],["T_IF","if",578],["T_WHITESPACE"," ",578],"(",["T_EMPTY","empty",578],"(",["T_VARIABLE","$statuses",578],")",")",["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n            ",578],["T_VARIABLE","$statuses",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],"[",["T_LNUMBER","0",579],"]",";",["T_WHITESPACE","\n        ",579],"}",["T_WHITESPACE","\n\n        ",580],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getSelect",582],"(",")",["T_OBJECT_OPERATOR","->",582],["T_STRING","where",582],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.order_status NOT IN(?)'",582],",",["T_WHITESPACE"," ",582],["T_VARIABLE","$statuses",582],")",";",["T_WHITESPACE","\n\n        ",582],["T_RETURN","return",584],["T_WHITESPACE"," ",584],["T_VARIABLE","$this",584],";",["T_WHITESPACE","\n    ",584],"}",["T_WHITESPACE","\n\n    ",585],["T_DOC_COMMENT","\/**\n     * Calculate lifitime sales\n     *\n     * @param int $isFilter\n     * @return $this\n     *\/",587],["T_WHITESPACE","\n    ",592],["T_PUBLIC","public",593],["T_WHITESPACE"," ",593],["T_FUNCTION","function",593],["T_WHITESPACE"," ",593],["T_STRING","calculateSales",593],"(",["T_VARIABLE","$isFilter",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_LNUMBER","0",593],")",["T_WHITESPACE","\n    ",593],"{",["T_WHITESPACE","\n        ",594],["T_VARIABLE","$statuses",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","_orderConfig",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","getStateStatuses",595],"(",["T_NS_SEPARATOR","\\",595],["T_STRING","Magento",595],["T_NS_SEPARATOR","\\",595],["T_STRING","Sales",595],["T_NS_SEPARATOR","\\",595],["T_STRING","Model",595],["T_NS_SEPARATOR","\\",595],["T_STRING","Order",595],["T_DOUBLE_COLON","::",595],["T_STRING","STATE_CANCELED",595],")",";",["T_WHITESPACE","\n\n        ",595],["T_IF","if",597],["T_WHITESPACE"," ",597],"(",["T_EMPTY","empty",597],"(",["T_VARIABLE","$statuses",597],")",")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_VARIABLE","$statuses",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],"[",["T_LNUMBER","0",598],"]",";",["T_WHITESPACE","\n        ",598],"}",["T_WHITESPACE","\n        ",599],["T_VARIABLE","$connection",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","getConnection",600],"(",")",";",["T_WHITESPACE","\n\n        ",600],["T_IF","if",602],["T_WHITESPACE"," ",602],"(",["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","_scopeConfig",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","getValue",602],"(",["T_WHITESPACE","\n            ",602],["T_CONSTANT_ENCAPSED_STRING","'sales\/dashboard\/use_aggregated_data'",603],",",["T_WHITESPACE","\n            ",603],["T_NS_SEPARATOR","\\",604],["T_STRING","Magento",604],["T_NS_SEPARATOR","\\",604],["T_STRING","Store",604],["T_NS_SEPARATOR","\\",604],["T_STRING","Model",604],["T_NS_SEPARATOR","\\",604],["T_STRING","ScopeInterface",604],["T_DOUBLE_COLON","::",604],["T_STRING","SCOPE_STORE",604],["T_WHITESPACE","\n        ",604],")",["T_WHITESPACE","\n        ",605],")",["T_WHITESPACE"," ",606],"{",["T_WHITESPACE","\n            ",606],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","setMainTable",607],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_aggregated_created'",607],")",";",["T_WHITESPACE","\n            ",607],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","removeAllFieldsFromSelect",608],"(",")",";",["T_WHITESPACE","\n            ",608],["T_VARIABLE","$averageExpr",609],["T_WHITESPACE"," ",609],"=",["T_WHITESPACE"," ",609],["T_VARIABLE","$connection",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","getCheckSql",609],"(",["T_WHITESPACE","\n                ",609],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.orders_count) > 0'",610],",",["T_WHITESPACE","\n                ",610],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.total_revenue_amount)\/SUM(main_table.orders_count)'",611],",",["T_WHITESPACE","\n                ",611],["T_LNUMBER","0",612],["T_WHITESPACE","\n            ",612],")",";",["T_WHITESPACE","\n            ",613],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getSelect",614],"(",")",["T_OBJECT_OPERATOR","->",614],["T_STRING","columns",614],"(",["T_WHITESPACE","\n                ",614],"[",["T_CONSTANT_ENCAPSED_STRING","'lifetime'",615],["T_WHITESPACE"," ",615],["T_DOUBLE_ARROW","=>",615],["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.total_revenue_amount)'",615],",",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'average'",615],["T_WHITESPACE"," ",615],["T_DOUBLE_ARROW","=>",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$averageExpr",615],"]",["T_WHITESPACE","\n            ",615],")",";",["T_WHITESPACE","\n\n            ",616],["T_IF","if",618],["T_WHITESPACE"," ",618],"(","!",["T_VARIABLE","$isFilter",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n                ",618],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","addFieldToFilter",619],"(",["T_WHITESPACE","\n                    ",619],["T_CONSTANT_ENCAPSED_STRING","'store_id'",620],",",["T_WHITESPACE","\n                    ",620],"[",["T_CONSTANT_ENCAPSED_STRING","'eq'",621],["T_WHITESPACE"," ",621],["T_DOUBLE_ARROW","=>",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","_storeManager",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","getStore",621],"(",["T_NS_SEPARATOR","\\",621],["T_STRING","Magento",621],["T_NS_SEPARATOR","\\",621],["T_STRING","Store",621],["T_NS_SEPARATOR","\\",621],["T_STRING","Model",621],["T_NS_SEPARATOR","\\",621],["T_STRING","Store",621],["T_DOUBLE_COLON","::",621],["T_STRING","ADMIN_CODE",621],")",["T_OBJECT_OPERATOR","->",621],["T_STRING","getId",621],"(",")","]",["T_WHITESPACE","\n                ",621],")",";",["T_WHITESPACE","\n            ",622],"}",["T_WHITESPACE","\n            ",623],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","getSelect",624],"(",")",["T_OBJECT_OPERATOR","->",624],["T_STRING","where",624],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.order_status NOT IN(?)'",624],",",["T_WHITESPACE"," ",624],["T_VARIABLE","$statuses",624],")",";",["T_WHITESPACE","\n        ",624],"}",["T_WHITESPACE"," ",625],["T_ELSE","else",625],["T_WHITESPACE"," ",625],"{",["T_WHITESPACE","\n            ",625],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","setMainTable",626],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",626],")",";",["T_WHITESPACE","\n            ",626],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","removeAllFieldsFromSelect",627],"(",")",";",["T_WHITESPACE","\n\n            ",627],["T_VARIABLE","$expr",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","_getSalesAmountExpression",629],"(",")",";",["T_WHITESPACE","\n\n            ",629],["T_IF","if",631],["T_WHITESPACE"," ",631],"(",["T_VARIABLE","$isFilter",631],["T_WHITESPACE"," ",631],["T_IS_EQUAL","==",631],["T_WHITESPACE"," ",631],["T_LNUMBER","0",631],")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n                ",631],["T_VARIABLE","$expr",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_CONSTANT_ENCAPSED_STRING","'('",632],["T_WHITESPACE"," ",632],".",["T_WHITESPACE"," ",632],["T_VARIABLE","$expr",632],["T_WHITESPACE"," ",632],".",["T_WHITESPACE"," ",632],["T_CONSTANT_ENCAPSED_STRING","') * main_table.base_to_global_rate'",632],";",["T_WHITESPACE","\n            ",632],"}",["T_WHITESPACE","\n\n            ",633],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","getSelect",635],"(",")",["T_OBJECT_OPERATOR","->",635],["T_STRING","columns",635],"(",["T_WHITESPACE","\n                ",635],"[",["T_CONSTANT_ENCAPSED_STRING","'lifetime'",636],["T_WHITESPACE"," ",636],["T_DOUBLE_ARROW","=>",636],["T_WHITESPACE"," ",636],"\"",["T_ENCAPSED_AND_WHITESPACE","SUM(",636],["T_CURLY_OPEN","{",636],["T_VARIABLE","$expr",636],"}",["T_ENCAPSED_AND_WHITESPACE",")",636],"\"",",",["T_WHITESPACE"," ",636],["T_CONSTANT_ENCAPSED_STRING","'average'",636],["T_WHITESPACE"," ",636],["T_DOUBLE_ARROW","=>",636],["T_WHITESPACE"," ",636],"\"",["T_ENCAPSED_AND_WHITESPACE","AVG(",636],["T_CURLY_OPEN","{",636],["T_VARIABLE","$expr",636],"}",["T_ENCAPSED_AND_WHITESPACE",")",636],"\"","]",["T_WHITESPACE","\n            ",636],")",["T_OBJECT_OPERATOR","->",637],["T_STRING","where",637],"(",["T_WHITESPACE","\n                ",637],["T_CONSTANT_ENCAPSED_STRING","'main_table.status NOT IN(?)'",638],",",["T_WHITESPACE","\n                ",638],["T_VARIABLE","$statuses",639],["T_WHITESPACE","\n            ",639],")",["T_OBJECT_OPERATOR","->",640],["T_STRING","where",640],"(",["T_WHITESPACE","\n                ",640],["T_CONSTANT_ENCAPSED_STRING","'main_table.state NOT IN(?)'",641],",",["T_WHITESPACE","\n                ",641],"[",["T_NS_SEPARATOR","\\",642],["T_STRING","Magento",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Sales",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Model",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Order",642],["T_DOUBLE_COLON","::",642],["T_STRING","STATE_NEW",642],",",["T_WHITESPACE"," ",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Magento",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Sales",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Model",642],["T_NS_SEPARATOR","\\",642],["T_STRING","Order",642],["T_DOUBLE_COLON","::",642],["T_STRING","STATE_PENDING_PAYMENT",642],"]",["T_WHITESPACE","\n            ",642],")",";",["T_WHITESPACE","\n        ",643],"}",["T_WHITESPACE","\n        ",644],["T_RETURN","return",645],["T_WHITESPACE"," ",645],["T_VARIABLE","$this",645],";",["T_WHITESPACE","\n    ",645],"}",["T_WHITESPACE","\n\n    ",646],["T_DOC_COMMENT","\/**\n     * Set date range\n     *\n     * @param string $fromDate\n     * @param string $toDate\n     * @return $this\n     *\/",648],["T_WHITESPACE","\n    ",654],["T_PUBLIC","public",655],["T_WHITESPACE"," ",655],["T_FUNCTION","function",655],["T_WHITESPACE"," ",655],["T_STRING","setDateRange",655],"(",["T_VARIABLE","$fromDate",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$toDate",655],")",["T_WHITESPACE","\n    ",655],"{",["T_WHITESPACE","\n        ",656],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","_reset",657],"(",")",["T_OBJECT_OPERATOR","->",657],["T_STRING","addFieldToFilter",657],"(",["T_WHITESPACE","\n            ",657],["T_CONSTANT_ENCAPSED_STRING","'created_at'",658],",",["T_WHITESPACE","\n            ",658],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",659],["T_WHITESPACE"," ",659],["T_DOUBLE_ARROW","=>",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$fromDate",659],",",["T_WHITESPACE"," ",659],["T_CONSTANT_ENCAPSED_STRING","'to'",659],["T_WHITESPACE"," ",659],["T_DOUBLE_ARROW","=>",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$toDate",659],"]",["T_WHITESPACE","\n        ",659],")",["T_OBJECT_OPERATOR","->",660],["T_STRING","addFieldToFilter",660],"(",["T_WHITESPACE","\n            ",660],["T_CONSTANT_ENCAPSED_STRING","'state'",661],",",["T_WHITESPACE","\n            ",661],"[",["T_CONSTANT_ENCAPSED_STRING","'neq'",662],["T_WHITESPACE"," ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_NS_SEPARATOR","\\",662],["T_STRING","Magento",662],["T_NS_SEPARATOR","\\",662],["T_STRING","Sales",662],["T_NS_SEPARATOR","\\",662],["T_STRING","Model",662],["T_NS_SEPARATOR","\\",662],["T_STRING","Order",662],["T_DOUBLE_COLON","::",662],["T_STRING","STATE_CANCELED",662],"]",["T_WHITESPACE","\n        ",662],")",["T_OBJECT_OPERATOR","->",663],["T_STRING","getSelect",663],"(",")",["T_OBJECT_OPERATOR","->",663],["T_STRING","columns",663],"(",["T_WHITESPACE","\n            ",663],"[",["T_CONSTANT_ENCAPSED_STRING","'orders'",664],["T_WHITESPACE"," ",664],["T_DOUBLE_ARROW","=>",664],["T_WHITESPACE"," ",664],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT(main_table.entity_id))'",664],"]",["T_WHITESPACE","\n        ",664],")",["T_OBJECT_OPERATOR","->",665],["T_STRING","group",665],"(",["T_WHITESPACE","\n            ",665],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",666],["T_WHITESPACE","\n        ",666],")",";",["T_WHITESPACE","\n\n        ",667],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","getSelect",669],"(",")",["T_OBJECT_OPERATOR","->",669],["T_STRING","columns",669],"(","[",["T_CONSTANT_ENCAPSED_STRING","'items'",669],["T_WHITESPACE"," ",669],["T_DOUBLE_ARROW","=>",669],["T_WHITESPACE"," ",669],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.total_qty_ordered)'",669],"]",")",";",["T_WHITESPACE","\n\n        ",669],["T_RETURN","return",671],["T_WHITESPACE"," ",671],["T_VARIABLE","$this",671],";",["T_WHITESPACE","\n    ",671],"}",["T_WHITESPACE","\n\n    ",672],["T_DOC_COMMENT","\/**\n     * Set store filter collection\n     *\n     * @param int[] $storeIds\n     * @return $this\n     *\/",674],["T_WHITESPACE","\n    ",679],["T_PUBLIC","public",680],["T_WHITESPACE"," ",680],["T_FUNCTION","function",680],["T_WHITESPACE"," ",680],["T_STRING","setStoreIds",680],"(",["T_VARIABLE","$storeIds",680],")",["T_WHITESPACE","\n    ",680],"{",["T_WHITESPACE","\n        ",681],["T_VARIABLE","$connection",682],["T_WHITESPACE"," ",682],"=",["T_WHITESPACE"," ",682],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","getConnection",682],"(",")",";",["T_WHITESPACE","\n        ",682],["T_VARIABLE","$baseSubtotalInvoiced",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_VARIABLE","$connection",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","getIfNullSql",683],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_invoiced'",683],",",["T_WHITESPACE"," ",683],["T_LNUMBER","0",683],")",";",["T_WHITESPACE","\n        ",683],["T_VARIABLE","$baseDiscountRefunded",684],["T_WHITESPACE"," ",684],"=",["T_WHITESPACE"," ",684],["T_VARIABLE","$connection",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","getIfNullSql",684],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_discount_refunded'",684],",",["T_WHITESPACE"," ",684],["T_LNUMBER","0",684],")",";",["T_WHITESPACE","\n        ",684],["T_VARIABLE","$baseSubtotalRefunded",685],["T_WHITESPACE"," ",685],"=",["T_WHITESPACE"," ",685],["T_VARIABLE","$connection",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","getIfNullSql",685],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_refunded'",685],",",["T_WHITESPACE"," ",685],["T_LNUMBER","0",685],")",";",["T_WHITESPACE","\n        ",685],["T_VARIABLE","$baseDiscountInvoiced",686],["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_VARIABLE","$connection",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","getIfNullSql",686],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_discount_invoiced'",686],",",["T_WHITESPACE"," ",686],["T_LNUMBER","0",686],")",";",["T_WHITESPACE","\n        ",686],["T_VARIABLE","$baseTotalInvocedCost",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_VARIABLE","$connection",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","getIfNullSql",687],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_total_invoiced_cost'",687],",",["T_WHITESPACE"," ",687],["T_LNUMBER","0",687],")",";",["T_WHITESPACE","\n        ",687],["T_IF","if",688],["T_WHITESPACE"," ",688],"(",["T_VARIABLE","$storeIds",688],")",["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n            ",688],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","getSelect",689],"(",")",["T_OBJECT_OPERATOR","->",689],["T_STRING","columns",689],"(",["T_WHITESPACE","\n                ",689],"[",["T_WHITESPACE","\n                    ",690],["T_CONSTANT_ENCAPSED_STRING","'subtotal'",691],["T_WHITESPACE"," ",691],["T_DOUBLE_ARROW","=>",691],["T_WHITESPACE"," ",691],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_subtotal)'",691],",",["T_WHITESPACE","\n                    ",691],["T_CONSTANT_ENCAPSED_STRING","'tax'",692],["T_WHITESPACE"," ",692],["T_DOUBLE_ARROW","=>",692],["T_WHITESPACE"," ",692],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_tax_amount)'",692],",",["T_WHITESPACE","\n                    ",692],["T_CONSTANT_ENCAPSED_STRING","'shipping'",693],["T_WHITESPACE"," ",693],["T_DOUBLE_ARROW","=>",693],["T_WHITESPACE"," ",693],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_shipping_amount)'",693],",",["T_WHITESPACE","\n                    ",693],["T_CONSTANT_ENCAPSED_STRING","'discount'",694],["T_WHITESPACE"," ",694],["T_DOUBLE_ARROW","=>",694],["T_WHITESPACE"," ",694],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_discount_amount)'",694],",",["T_WHITESPACE","\n                    ",694],["T_CONSTANT_ENCAPSED_STRING","'total'",695],["T_WHITESPACE"," ",695],["T_DOUBLE_ARROW","=>",695],["T_WHITESPACE"," ",695],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_grand_total)'",695],",",["T_WHITESPACE","\n                    ",695],["T_CONSTANT_ENCAPSED_STRING","'invoiced'",696],["T_WHITESPACE"," ",696],["T_DOUBLE_ARROW","=>",696],["T_WHITESPACE"," ",696],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_total_paid)'",696],",",["T_WHITESPACE","\n                    ",696],["T_CONSTANT_ENCAPSED_STRING","'refunded'",697],["T_WHITESPACE"," ",697],["T_DOUBLE_ARROW","=>",697],["T_WHITESPACE"," ",697],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_total_refunded)'",697],",",["T_WHITESPACE","\n                    ",697],["T_CONSTANT_ENCAPSED_STRING","'profit'",698],["T_WHITESPACE"," ",698],["T_DOUBLE_ARROW","=>",698],["T_WHITESPACE"," ",698],"\"",["T_ENCAPSED_AND_WHITESPACE","SUM(",698],["T_CURLY_OPEN","{",698],["T_VARIABLE","$baseSubtotalInvoiced",698],"}",["T_ENCAPSED_AND_WHITESPACE",") ",698],"\"",["T_WHITESPACE"," ",698],".",["T_WHITESPACE","\n                    ",698],"\"",["T_ENCAPSED_AND_WHITESPACE","+ SUM(",699],["T_CURLY_OPEN","{",699],["T_VARIABLE","$baseDiscountRefunded",699],"}",["T_ENCAPSED_AND_WHITESPACE",") - SUM(",699],["T_CURLY_OPEN","{",699],["T_VARIABLE","$baseSubtotalRefunded",699],"}",["T_ENCAPSED_AND_WHITESPACE",") ",699],"\"",["T_WHITESPACE"," ",699],".",["T_WHITESPACE","\n                    ",699],"\"",["T_ENCAPSED_AND_WHITESPACE","- SUM(",700],["T_CURLY_OPEN","{",700],["T_VARIABLE","$baseDiscountInvoiced",700],"}",["T_ENCAPSED_AND_WHITESPACE",") - SUM(",700],["T_CURLY_OPEN","{",700],["T_VARIABLE","$baseTotalInvocedCost",700],"}",["T_ENCAPSED_AND_WHITESPACE",")",700],"\"",",",["T_WHITESPACE","\n                ",700],"]",["T_WHITESPACE","\n            ",701],")",";",["T_WHITESPACE","\n        ",702],"}",["T_WHITESPACE"," ",703],["T_ELSE","else",703],["T_WHITESPACE"," ",703],"{",["T_WHITESPACE","\n            ",703],["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","getSelect",704],"(",")",["T_OBJECT_OPERATOR","->",704],["T_STRING","columns",704],"(",["T_WHITESPACE","\n                ",704],"[",["T_WHITESPACE","\n                    ",705],["T_CONSTANT_ENCAPSED_STRING","'subtotal'",706],["T_WHITESPACE"," ",706],["T_DOUBLE_ARROW","=>",706],["T_WHITESPACE"," ",706],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_subtotal * main_table.base_to_global_rate)'",706],",",["T_WHITESPACE","\n                    ",706],["T_CONSTANT_ENCAPSED_STRING","'tax'",707],["T_WHITESPACE"," ",707],["T_DOUBLE_ARROW","=>",707],["T_WHITESPACE"," ",707],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_tax_amount * main_table.base_to_global_rate)'",707],",",["T_WHITESPACE","\n                    ",707],["T_CONSTANT_ENCAPSED_STRING","'shipping'",708],["T_WHITESPACE"," ",708],["T_DOUBLE_ARROW","=>",708],["T_WHITESPACE"," ",708],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_shipping_amount * main_table.base_to_global_rate)'",708],",",["T_WHITESPACE","\n                    ",708],["T_CONSTANT_ENCAPSED_STRING","'discount'",709],["T_WHITESPACE"," ",709],["T_DOUBLE_ARROW","=>",709],["T_WHITESPACE"," ",709],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_discount_amount * main_table.base_to_global_rate)'",709],",",["T_WHITESPACE","\n                    ",709],["T_CONSTANT_ENCAPSED_STRING","'total'",710],["T_WHITESPACE"," ",710],["T_DOUBLE_ARROW","=>",710],["T_WHITESPACE"," ",710],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_grand_total * main_table.base_to_global_rate)'",710],",",["T_WHITESPACE","\n                    ",710],["T_CONSTANT_ENCAPSED_STRING","'invoiced'",711],["T_WHITESPACE"," ",711],["T_DOUBLE_ARROW","=>",711],["T_WHITESPACE"," ",711],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_total_paid * main_table.base_to_global_rate)'",711],",",["T_WHITESPACE","\n                    ",711],["T_CONSTANT_ENCAPSED_STRING","'refunded'",712],["T_WHITESPACE"," ",712],["T_DOUBLE_ARROW","=>",712],["T_WHITESPACE"," ",712],["T_CONSTANT_ENCAPSED_STRING","'SUM(main_table.base_total_refunded * main_table.base_to_global_rate)'",712],",",["T_WHITESPACE","\n                    ",712],["T_CONSTANT_ENCAPSED_STRING","'profit'",713],["T_WHITESPACE"," ",713],["T_DOUBLE_ARROW","=>",713],["T_WHITESPACE"," ",713],"\"",["T_ENCAPSED_AND_WHITESPACE","SUM(",713],["T_CURLY_OPEN","{",713],["T_VARIABLE","$baseSubtotalInvoiced",713],"}",["T_ENCAPSED_AND_WHITESPACE"," *  main_table.base_to_global_rate) ",713],"\"",["T_WHITESPACE"," ",713],".",["T_WHITESPACE","\n                    ",713],"\"",["T_ENCAPSED_AND_WHITESPACE","+ SUM(",714],["T_CURLY_OPEN","{",714],["T_VARIABLE","$baseDiscountRefunded",714],"}",["T_ENCAPSED_AND_WHITESPACE"," * main_table.base_to_global_rate) ",714],"\"",["T_WHITESPACE"," ",714],".",["T_WHITESPACE","\n                    ",714],"\"",["T_ENCAPSED_AND_WHITESPACE","- SUM(",715],["T_CURLY_OPEN","{",715],["T_VARIABLE","$baseSubtotalRefunded",715],"}",["T_ENCAPSED_AND_WHITESPACE"," * main_table.base_to_global_rate) ",715],"\"",["T_WHITESPACE"," ",715],".",["T_WHITESPACE","\n                    ",715],"\"",["T_ENCAPSED_AND_WHITESPACE","- SUM(",716],["T_CURLY_OPEN","{",716],["T_VARIABLE","$baseDiscountInvoiced",716],"}",["T_ENCAPSED_AND_WHITESPACE"," * main_table.base_to_global_rate) ",716],"\"",["T_WHITESPACE"," ",716],".",["T_WHITESPACE","\n                    ",716],"\"",["T_ENCAPSED_AND_WHITESPACE","- SUM(",717],["T_CURLY_OPEN","{",717],["T_VARIABLE","$baseTotalInvocedCost",717],"}",["T_ENCAPSED_AND_WHITESPACE"," * main_table.base_to_global_rate)",717],"\"",",",["T_WHITESPACE","\n                ",717],"]",["T_WHITESPACE","\n            ",718],")",";",["T_WHITESPACE","\n        ",719],"}",["T_WHITESPACE","\n\n        ",720],["T_RETURN","return",722],["T_WHITESPACE"," ",722],["T_VARIABLE","$this",722],";",["T_WHITESPACE","\n    ",722],"}",["T_WHITESPACE","\n\n    ",723],["T_DOC_COMMENT","\/**\n     * Add group By customer attribute\n     *\n     * @return $this\n     *\/",725],["T_WHITESPACE","\n    ",729],["T_PUBLIC","public",730],["T_WHITESPACE"," ",730],["T_FUNCTION","function",730],["T_WHITESPACE"," ",730],["T_STRING","groupByCustomer",730],"(",")",["T_WHITESPACE","\n    ",730],"{",["T_WHITESPACE","\n        ",731],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","getSelect",732],"(",")",["T_OBJECT_OPERATOR","->",732],["T_STRING","where",732],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.customer_id IS NOT NULL'",732],")",["T_OBJECT_OPERATOR","->",732],["T_STRING","group",732],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.customer_id'",732],")",";",["T_WHITESPACE","\n        ",732],["T_RETURN","return",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$this",733],";",["T_WHITESPACE","\n    ",733],"}",["T_WHITESPACE","\n\n    ",734],["T_DOC_COMMENT","\/**\n     * Join Customer Name (concat)\n     *\n     * @param string $alias\n     * @return $this\n     *\/",736],["T_WHITESPACE","\n    ",741],["T_PUBLIC","public",742],["T_WHITESPACE"," ",742],["T_FUNCTION","function",742],["T_WHITESPACE"," ",742],["T_STRING","joinCustomerName",742],"(",["T_VARIABLE","$alias",742],["T_WHITESPACE"," ",742],"=",["T_WHITESPACE"," ",742],["T_CONSTANT_ENCAPSED_STRING","'name'",742],")",["T_WHITESPACE","\n    ",742],"{",["T_WHITESPACE","\n        ",743],["T_VARIABLE","$fields",744],["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table.customer_firstname'",744],",",["T_WHITESPACE"," ",744],["T_CONSTANT_ENCAPSED_STRING","'main_table.customer_lastname'",744],"]",";",["T_WHITESPACE","\n        ",744],["T_VARIABLE","$fieldConcat",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","getConnection",745],"(",")",["T_OBJECT_OPERATOR","->",745],["T_STRING","getConcatSql",745],"(",["T_VARIABLE","$fields",745],",",["T_WHITESPACE"," ",745],["T_CONSTANT_ENCAPSED_STRING","' '",745],")",";",["T_WHITESPACE","\n        ",745],["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","getSelect",746],"(",")",["T_OBJECT_OPERATOR","->",746],["T_STRING","columns",746],"(","[",["T_VARIABLE","$alias",746],["T_WHITESPACE"," ",746],["T_DOUBLE_ARROW","=>",746],["T_WHITESPACE"," ",746],["T_VARIABLE","$fieldConcat",746],"]",")",";",["T_WHITESPACE","\n        ",746],["T_RETURN","return",747],["T_WHITESPACE"," ",747],["T_VARIABLE","$this",747],";",["T_WHITESPACE","\n    ",747],"}",["T_WHITESPACE","\n\n    ",748],["T_DOC_COMMENT","\/**\n     * Add Order count field to select\n     *\n     * @return $this\n     *\/",750],["T_WHITESPACE","\n    ",754],["T_PUBLIC","public",755],["T_WHITESPACE"," ",755],["T_FUNCTION","function",755],["T_WHITESPACE"," ",755],["T_STRING","addOrdersCount",755],"(",")",["T_WHITESPACE","\n    ",755],"{",["T_WHITESPACE","\n        ",756],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","addFieldToFilter",757],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",757],",",["T_WHITESPACE"," ",757],"[",["T_CONSTANT_ENCAPSED_STRING","'neq'",757],["T_WHITESPACE"," ",757],["T_DOUBLE_ARROW","=>",757],["T_WHITESPACE"," ",757],["T_NS_SEPARATOR","\\",757],["T_STRING","Magento",757],["T_NS_SEPARATOR","\\",757],["T_STRING","Sales",757],["T_NS_SEPARATOR","\\",757],["T_STRING","Model",757],["T_NS_SEPARATOR","\\",757],["T_STRING","Order",757],["T_DOUBLE_COLON","::",757],["T_STRING","STATE_CANCELED",757],"]",")",";",["T_WHITESPACE","\n        ",757],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","getSelect",758],"(",")",["T_OBJECT_OPERATOR","->",758],["T_STRING","columns",758],"(","[",["T_CONSTANT_ENCAPSED_STRING","'orders_count'",758],["T_WHITESPACE"," ",758],["T_DOUBLE_ARROW","=>",758],["T_WHITESPACE"," ",758],["T_CONSTANT_ENCAPSED_STRING","'COUNT(main_table.entity_id)'",758],"]",")",";",["T_WHITESPACE","\n\n        ",758],["T_RETURN","return",760],["T_WHITESPACE"," ",760],["T_VARIABLE","$this",760],";",["T_WHITESPACE","\n    ",760],"}",["T_WHITESPACE","\n\n    ",761],["T_DOC_COMMENT","\/**\n     * Add revenue\n     *\n     * @param bool $convertCurrency\n     * @return $this\n     *\/",763],["T_WHITESPACE","\n    ",768],["T_PUBLIC","public",769],["T_WHITESPACE"," ",769],["T_FUNCTION","function",769],["T_WHITESPACE"," ",769],["T_STRING","addRevenueToSelect",769],"(",["T_VARIABLE","$convertCurrency",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_STRING","false",769],")",["T_WHITESPACE","\n    ",769],"{",["T_WHITESPACE","\n        ",770],["T_VARIABLE","$expr",771],["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","getTotalsExpression",771],"(",["T_WHITESPACE","\n            ",771],"!",["T_VARIABLE","$convertCurrency",772],",",["T_WHITESPACE","\n            ",772],["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","getConnection",773],"(",")",["T_OBJECT_OPERATOR","->",773],["T_STRING","getIfNullSql",773],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_refunded'",773],",",["T_WHITESPACE"," ",773],["T_LNUMBER","0",773],")",",",["T_WHITESPACE","\n            ",773],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getConnection",774],"(",")",["T_OBJECT_OPERATOR","->",774],["T_STRING","getIfNullSql",774],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_canceled'",774],",",["T_WHITESPACE"," ",774],["T_LNUMBER","0",774],")",",",["T_WHITESPACE","\n            ",774],["T_VARIABLE","$this",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","getConnection",775],"(",")",["T_OBJECT_OPERATOR","->",775],["T_STRING","getIfNullSql",775],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_discount_canceled'",775],",",["T_WHITESPACE"," ",775],["T_LNUMBER","0",775],")",["T_WHITESPACE","\n        ",775],")",";",["T_WHITESPACE","\n        ",776],["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","getSelect",777],"(",")",["T_OBJECT_OPERATOR","->",777],["T_STRING","columns",777],"(","[",["T_CONSTANT_ENCAPSED_STRING","'revenue'",777],["T_WHITESPACE"," ",777],["T_DOUBLE_ARROW","=>",777],["T_WHITESPACE"," ",777],["T_VARIABLE","$expr",777],"]",")",";",["T_WHITESPACE","\n\n        ",777],["T_RETURN","return",779],["T_WHITESPACE"," ",779],["T_VARIABLE","$this",779],";",["T_WHITESPACE","\n    ",779],"}",["T_WHITESPACE","\n\n    ",780],["T_DOC_COMMENT","\/**\n     * Add summary average totals\n     *\n     * @param int $storeId\n     * @return $this\n     *\/",782],["T_WHITESPACE","\n    ",787],["T_PUBLIC","public",788],["T_WHITESPACE"," ",788],["T_FUNCTION","function",788],["T_WHITESPACE"," ",788],["T_STRING","addSumAvgTotals",788],"(",["T_VARIABLE","$storeId",788],["T_WHITESPACE"," ",788],"=",["T_WHITESPACE"," ",788],["T_LNUMBER","0",788],")",["T_WHITESPACE","\n    ",788],"{",["T_WHITESPACE","\n        ",789],["T_DOC_COMMENT","\/**\n         * calculate average and total amount\n         *\/",790],["T_WHITESPACE","\n        ",792],["T_VARIABLE","$expr",793],["T_WHITESPACE"," ",793],"=",["T_WHITESPACE"," ",793],["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","getTotalsExpression",793],"(",["T_WHITESPACE","\n            ",793],["T_VARIABLE","$storeId",794],",",["T_WHITESPACE","\n            ",794],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","getConnection",795],"(",")",["T_OBJECT_OPERATOR","->",795],["T_STRING","getIfNullSql",795],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_refunded'",795],",",["T_WHITESPACE"," ",795],["T_LNUMBER","0",795],")",",",["T_WHITESPACE","\n            ",795],["T_VARIABLE","$this",796],["T_OBJECT_OPERATOR","->",796],["T_STRING","getConnection",796],"(",")",["T_OBJECT_OPERATOR","->",796],["T_STRING","getIfNullSql",796],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_canceled'",796],",",["T_WHITESPACE"," ",796],["T_LNUMBER","0",796],")",",",["T_WHITESPACE","\n            ",796],["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","getConnection",797],"(",")",["T_OBJECT_OPERATOR","->",797],["T_STRING","getIfNullSql",797],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.base_discount_canceled'",797],",",["T_WHITESPACE"," ",797],["T_LNUMBER","0",797],")",["T_WHITESPACE","\n        ",797],")",";",["T_WHITESPACE","\n\n        ",798],["T_VARIABLE","$this",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","getSelect",800],"(",")",["T_OBJECT_OPERATOR","->",800],["T_STRING","columns",800],"(",["T_WHITESPACE","\n            ",800],"[",["T_CONSTANT_ENCAPSED_STRING","'orders_avg_amount'",801],["T_WHITESPACE"," ",801],["T_DOUBLE_ARROW","=>",801],["T_WHITESPACE"," ",801],"\"",["T_ENCAPSED_AND_WHITESPACE","AVG(",801],["T_CURLY_OPEN","{",801],["T_VARIABLE","$expr",801],"}",["T_ENCAPSED_AND_WHITESPACE",")",801],"\"","]",["T_WHITESPACE","\n        ",801],")",["T_OBJECT_OPERATOR","->",802],["T_STRING","columns",802],"(",["T_WHITESPACE","\n            ",802],"[",["T_CONSTANT_ENCAPSED_STRING","'orders_sum_amount'",803],["T_WHITESPACE"," ",803],["T_DOUBLE_ARROW","=>",803],["T_WHITESPACE"," ",803],"\"",["T_ENCAPSED_AND_WHITESPACE","SUM(",803],["T_CURLY_OPEN","{",803],["T_VARIABLE","$expr",803],"}",["T_ENCAPSED_AND_WHITESPACE",")",803],"\"","]",["T_WHITESPACE","\n        ",803],")",";",["T_WHITESPACE","\n\n        ",804],["T_RETURN","return",806],["T_WHITESPACE"," ",806],["T_VARIABLE","$this",806],";",["T_WHITESPACE","\n    ",806],"}",["T_WHITESPACE","\n\n    ",807],["T_DOC_COMMENT","\/**\n     * Get SQL expression for totals\n     *\n     * @param int $storeId\n     * @param string $baseSubtotalRefunded\n     * @param string $baseSubtotalCanceled\n     * @param string $baseDiscountCanceled\n     * @return string\n     *\/",809],["T_WHITESPACE","\n    ",817],["T_PROTECTED","protected",818],["T_WHITESPACE"," ",818],["T_FUNCTION","function",818],["T_WHITESPACE"," ",818],["T_STRING","getTotalsExpression",818],"(",["T_WHITESPACE","\n        ",818],["T_VARIABLE","$storeId",819],",",["T_WHITESPACE","\n        ",819],["T_VARIABLE","$baseSubtotalRefunded",820],",",["T_WHITESPACE","\n        ",820],["T_VARIABLE","$baseSubtotalCanceled",821],",",["T_WHITESPACE","\n        ",821],["T_VARIABLE","$baseDiscountCanceled",822],["T_WHITESPACE","\n    ",822],")",["T_WHITESPACE"," ",823],"{",["T_WHITESPACE","\n        ",823],["T_VARIABLE","$template",824],["T_WHITESPACE"," ",824],"=",["T_WHITESPACE"," ",824],"(",["T_VARIABLE","$storeId",824],["T_WHITESPACE"," ",824],["T_IS_NOT_EQUAL","!=",824],["T_WHITESPACE"," ",824],["T_LNUMBER","0",824],")",["T_WHITESPACE","\n            ",824],"?",["T_WHITESPACE"," ",825],["T_CONSTANT_ENCAPSED_STRING","'(main_table.base_subtotal - %2$s - %1$s - ABS(main_table.base_discount_amount) - %3$s)'",825],["T_WHITESPACE","\n            ",825],":",["T_WHITESPACE"," ",826],["T_CONSTANT_ENCAPSED_STRING","'((main_table.base_subtotal - %1$s - %2$s - ABS(main_table.base_discount_amount) - %3$s) '",826],["T_WHITESPACE","\n                ",826],".",["T_WHITESPACE"," ",827],["T_CONSTANT_ENCAPSED_STRING","' * main_table.base_to_global_rate)'",827],";",["T_WHITESPACE","\n        ",827],["T_RETURN","return",828],["T_WHITESPACE"," ",828],["T_STRING","sprintf",828],"(",["T_VARIABLE","$template",828],",",["T_WHITESPACE"," ",828],["T_VARIABLE","$baseSubtotalRefunded",828],",",["T_WHITESPACE"," ",828],["T_VARIABLE","$baseSubtotalCanceled",828],",",["T_WHITESPACE"," ",828],["T_VARIABLE","$baseDiscountCanceled",828],")",";",["T_WHITESPACE","\n    ",828],"}",["T_WHITESPACE","\n\n    ",829],["T_DOC_COMMENT","\/**\n     * Sort order by total amount\n     *\n     * @param string $dir\n     * @return $this\n     *\/",831],["T_WHITESPACE","\n    ",836],["T_PUBLIC","public",837],["T_WHITESPACE"," ",837],["T_FUNCTION","function",837],["T_WHITESPACE"," ",837],["T_STRING","orderByTotalAmount",837],"(",["T_VARIABLE","$dir",837],["T_WHITESPACE"," ",837],"=",["T_WHITESPACE"," ",837],["T_STRING","self",837],["T_DOUBLE_COLON","::",837],["T_STRING","SORT_ORDER_DESC",837],")",["T_WHITESPACE","\n    ",837],"{",["T_WHITESPACE","\n        ",838],["T_VARIABLE","$this",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","getSelect",839],"(",")",["T_OBJECT_OPERATOR","->",839],["T_STRING","order",839],"(",["T_CONSTANT_ENCAPSED_STRING","'orders_sum_amount '",839],["T_WHITESPACE"," ",839],".",["T_WHITESPACE"," ",839],["T_VARIABLE","$dir",839],")",";",["T_WHITESPACE","\n        ",839],["T_RETURN","return",840],["T_WHITESPACE"," ",840],["T_VARIABLE","$this",840],";",["T_WHITESPACE","\n    ",840],"}",["T_WHITESPACE","\n\n    ",841],["T_DOC_COMMENT","\/**\n     * Order by orders count\n     *\n     * @param string $dir\n     * @return $this\n     *\/",843],["T_WHITESPACE","\n    ",848],["T_PUBLIC","public",849],["T_WHITESPACE"," ",849],["T_FUNCTION","function",849],["T_WHITESPACE"," ",849],["T_STRING","orderByOrdersCount",849],"(",["T_VARIABLE","$dir",849],["T_WHITESPACE"," ",849],"=",["T_WHITESPACE"," ",849],["T_STRING","self",849],["T_DOUBLE_COLON","::",849],["T_STRING","SORT_ORDER_DESC",849],")",["T_WHITESPACE","\n    ",849],"{",["T_WHITESPACE","\n        ",850],["T_VARIABLE","$this",851],["T_OBJECT_OPERATOR","->",851],["T_STRING","getSelect",851],"(",")",["T_OBJECT_OPERATOR","->",851],["T_STRING","order",851],"(",["T_CONSTANT_ENCAPSED_STRING","'orders_count '",851],["T_WHITESPACE"," ",851],".",["T_WHITESPACE"," ",851],["T_VARIABLE","$dir",851],")",";",["T_WHITESPACE","\n        ",851],["T_RETURN","return",852],["T_WHITESPACE"," ",852],["T_VARIABLE","$this",852],";",["T_WHITESPACE","\n    ",852],"}",["T_WHITESPACE","\n\n    ",853],["T_DOC_COMMENT","\/**\n     * Order by customer registration\n     *\n     * @param string $dir\n     * @return $this\n     *\/",855],["T_WHITESPACE","\n    ",860],["T_PUBLIC","public",861],["T_WHITESPACE"," ",861],["T_FUNCTION","function",861],["T_WHITESPACE"," ",861],["T_STRING","orderByCustomerRegistration",861],"(",["T_VARIABLE","$dir",861],["T_WHITESPACE"," ",861],"=",["T_WHITESPACE"," ",861],["T_STRING","self",861],["T_DOUBLE_COLON","::",861],["T_STRING","SORT_ORDER_DESC",861],")",["T_WHITESPACE","\n    ",861],"{",["T_WHITESPACE","\n        ",862],["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","setOrder",863],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",863],",",["T_WHITESPACE"," ",863],["T_VARIABLE","$dir",863],")",";",["T_WHITESPACE","\n        ",863],["T_RETURN","return",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$this",864],";",["T_WHITESPACE","\n    ",864],"}",["T_WHITESPACE","\n\n    ",865],["T_DOC_COMMENT","\/**\n     * Sort order by order created_at date\n     *\n     * @param string $dir\n     * @return $this\n     *\/",867],["T_WHITESPACE","\n    ",872],["T_PUBLIC","public",873],["T_WHITESPACE"," ",873],["T_FUNCTION","function",873],["T_WHITESPACE"," ",873],["T_STRING","orderByCreatedAt",873],"(",["T_VARIABLE","$dir",873],["T_WHITESPACE"," ",873],"=",["T_WHITESPACE"," ",873],["T_STRING","self",873],["T_DOUBLE_COLON","::",873],["T_STRING","SORT_ORDER_DESC",873],")",["T_WHITESPACE","\n    ",873],"{",["T_WHITESPACE","\n        ",874],["T_VARIABLE","$this",875],["T_OBJECT_OPERATOR","->",875],["T_STRING","setOrder",875],"(",["T_CONSTANT_ENCAPSED_STRING","'created_at'",875],",",["T_WHITESPACE"," ",875],["T_VARIABLE","$dir",875],")",";",["T_WHITESPACE","\n        ",875],["T_RETURN","return",876],["T_WHITESPACE"," ",876],["T_VARIABLE","$this",876],";",["T_WHITESPACE","\n    ",876],"}",["T_WHITESPACE","\n\n    ",877],["T_DOC_COMMENT","\/**\n     * Get select count sql\n     *\n     * @return Select\n     *\/",879],["T_WHITESPACE","\n    ",883],["T_PUBLIC","public",884],["T_WHITESPACE"," ",884],["T_FUNCTION","function",884],["T_WHITESPACE"," ",884],["T_STRING","getSelectCountSql",884],"(",")",["T_WHITESPACE","\n    ",884],"{",["T_WHITESPACE","\n        ",885],["T_VARIABLE","$countSelect",886],["T_WHITESPACE"," ",886],"=",["T_WHITESPACE"," ",886],["T_CLONE","clone",886],["T_WHITESPACE"," ",886],["T_VARIABLE","$this",886],["T_OBJECT_OPERATOR","->",886],["T_STRING","getSelect",886],"(",")",";",["T_WHITESPACE","\n        ",886],["T_VARIABLE","$countSelect",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","reset",887],"(",["T_NS_SEPARATOR","\\",887],["T_STRING","Magento",887],["T_NS_SEPARATOR","\\",887],["T_STRING","Framework",887],["T_NS_SEPARATOR","\\",887],["T_STRING","DB",887],["T_NS_SEPARATOR","\\",887],["T_STRING","Select",887],["T_DOUBLE_COLON","::",887],["T_STRING","ORDER",887],")",";",["T_WHITESPACE","\n        ",887],["T_VARIABLE","$countSelect",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","reset",888],"(",["T_NS_SEPARATOR","\\",888],["T_STRING","Magento",888],["T_NS_SEPARATOR","\\",888],["T_STRING","Framework",888],["T_NS_SEPARATOR","\\",888],["T_STRING","DB",888],["T_NS_SEPARATOR","\\",888],["T_STRING","Select",888],["T_DOUBLE_COLON","::",888],["T_STRING","LIMIT_COUNT",888],")",";",["T_WHITESPACE","\n        ",888],["T_VARIABLE","$countSelect",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","reset",889],"(",["T_NS_SEPARATOR","\\",889],["T_STRING","Magento",889],["T_NS_SEPARATOR","\\",889],["T_STRING","Framework",889],["T_NS_SEPARATOR","\\",889],["T_STRING","DB",889],["T_NS_SEPARATOR","\\",889],["T_STRING","Select",889],["T_DOUBLE_COLON","::",889],["T_STRING","LIMIT_OFFSET",889],")",";",["T_WHITESPACE","\n        ",889],["T_VARIABLE","$countSelect",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","reset",890],"(",["T_NS_SEPARATOR","\\",890],["T_STRING","Magento",890],["T_NS_SEPARATOR","\\",890],["T_STRING","Framework",890],["T_NS_SEPARATOR","\\",890],["T_STRING","DB",890],["T_NS_SEPARATOR","\\",890],["T_STRING","Select",890],["T_DOUBLE_COLON","::",890],["T_STRING","COLUMNS",890],")",";",["T_WHITESPACE","\n        ",890],["T_VARIABLE","$countSelect",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","reset",891],"(",["T_NS_SEPARATOR","\\",891],["T_STRING","Magento",891],["T_NS_SEPARATOR","\\",891],["T_STRING","Framework",891],["T_NS_SEPARATOR","\\",891],["T_STRING","DB",891],["T_NS_SEPARATOR","\\",891],["T_STRING","Select",891],["T_DOUBLE_COLON","::",891],["T_STRING","GROUP",891],")",";",["T_WHITESPACE","\n        ",891],["T_VARIABLE","$countSelect",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","reset",892],"(",["T_NS_SEPARATOR","\\",892],["T_STRING","Magento",892],["T_NS_SEPARATOR","\\",892],["T_STRING","Framework",892],["T_NS_SEPARATOR","\\",892],["T_STRING","DB",892],["T_NS_SEPARATOR","\\",892],["T_STRING","Select",892],["T_DOUBLE_COLON","::",892],["T_STRING","HAVING",892],")",";",["T_WHITESPACE","\n        ",892],["T_VARIABLE","$countSelect",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","columns",893],"(",["T_CONSTANT_ENCAPSED_STRING","\"COUNT(DISTINCT main_table.entity_id)\"",893],")",";",["T_WHITESPACE","\n\n        ",893],["T_RETURN","return",895],["T_WHITESPACE"," ",895],["T_VARIABLE","$countSelect",895],";",["T_WHITESPACE","\n    ",895],"}",["T_WHITESPACE","\n\n    ",896],["T_DOC_COMMENT","\/**\n     * Initialize initial fields to select\n     *\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",898],["T_WHITESPACE","\n    ",903],["T_PROTECTED","protected",904],["T_WHITESPACE"," ",904],["T_FUNCTION","function",904],["T_WHITESPACE"," ",904],["T_STRING","_initInitialFieldsToSelect",904],"(",")",["T_WHITESPACE","\n    ",904],"{",["T_WHITESPACE","\n        ",905],["T_COMMENT","\/\/ No fields should be initialized\n",906],["T_WHITESPACE","        ",907],["T_RETURN","return",907],["T_WHITESPACE"," ",907],["T_VARIABLE","$this",907],";",["T_WHITESPACE","\n    ",907],"}",["T_WHITESPACE","\n\n    ",908],["T_DOC_COMMENT","\/**\n     * Add period filter by created_at attribute\n     *\n     * @param string $period\n     * @return $this\n     *\/",910],["T_WHITESPACE","\n    ",915],["T_PUBLIC","public",916],["T_WHITESPACE"," ",916],["T_FUNCTION","function",916],["T_WHITESPACE"," ",916],["T_STRING","addCreateAtPeriodFilter",916],"(",["T_VARIABLE","$period",916],")",["T_WHITESPACE","\n    ",916],"{",["T_WHITESPACE","\n        ",917],["T_LIST","list",918],"(",["T_VARIABLE","$from",918],",",["T_WHITESPACE"," ",918],["T_VARIABLE","$to",918],")",["T_WHITESPACE"," ",918],"=",["T_WHITESPACE"," ",918],["T_VARIABLE","$this",918],["T_OBJECT_OPERATOR","->",918],["T_STRING","getDateRange",918],"(",["T_VARIABLE","$period",918],",",["T_WHITESPACE"," ",918],["T_LNUMBER","0",918],",",["T_WHITESPACE"," ",918],["T_LNUMBER","0",918],",",["T_WHITESPACE"," ",918],["T_STRING","true",918],")",";",["T_WHITESPACE","\n\n        ",918],["T_VARIABLE","$this",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","checkIsLive",920],"(",["T_VARIABLE","$period",920],")",";",["T_WHITESPACE","\n\n        ",920],["T_IF","if",922],["T_WHITESPACE"," ",922],"(",["T_VARIABLE","$this",922],["T_OBJECT_OPERATOR","->",922],["T_STRING","isLive",922],"(",")",")",["T_WHITESPACE"," ",922],"{",["T_WHITESPACE","\n            ",922],["T_VARIABLE","$fieldToFilter",923],["T_WHITESPACE"," ",923],"=",["T_WHITESPACE"," ",923],["T_CONSTANT_ENCAPSED_STRING","'created_at'",923],";",["T_WHITESPACE","\n        ",923],"}",["T_WHITESPACE"," ",924],["T_ELSE","else",924],["T_WHITESPACE"," ",924],"{",["T_WHITESPACE","\n            ",924],["T_VARIABLE","$fieldToFilter",925],["T_WHITESPACE"," ",925],"=",["T_WHITESPACE"," ",925],["T_CONSTANT_ENCAPSED_STRING","'period'",925],";",["T_WHITESPACE","\n        ",925],"}",["T_WHITESPACE","\n\n        ",926],["T_VARIABLE","$this",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","addFieldToFilter",928],"(",["T_WHITESPACE","\n            ",928],["T_VARIABLE","$fieldToFilter",929],",",["T_WHITESPACE","\n            ",929],"[",["T_WHITESPACE","\n                ",930],["T_CONSTANT_ENCAPSED_STRING","'from'",931],["T_WHITESPACE"," ",931],["T_DOUBLE_ARROW","=>",931],["T_WHITESPACE"," ",931],["T_VARIABLE","$from",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","format",931],"(",["T_NS_SEPARATOR","\\",931],["T_STRING","Magento",931],["T_NS_SEPARATOR","\\",931],["T_STRING","Framework",931],["T_NS_SEPARATOR","\\",931],["T_STRING","Stdlib",931],["T_NS_SEPARATOR","\\",931],["T_STRING","DateTime",931],["T_DOUBLE_COLON","::",931],["T_STRING","DATETIME_PHP_FORMAT",931],")",",",["T_WHITESPACE","\n                ",931],["T_CONSTANT_ENCAPSED_STRING","'to'",932],["T_WHITESPACE"," ",932],["T_DOUBLE_ARROW","=>",932],["T_WHITESPACE"," ",932],["T_VARIABLE","$to",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","format",932],"(",["T_NS_SEPARATOR","\\",932],["T_STRING","Magento",932],["T_NS_SEPARATOR","\\",932],["T_STRING","Framework",932],["T_NS_SEPARATOR","\\",932],["T_STRING","Stdlib",932],["T_NS_SEPARATOR","\\",932],["T_STRING","DateTime",932],["T_DOUBLE_COLON","::",932],["T_STRING","DATETIME_PHP_FORMAT",932],")",["T_WHITESPACE","\n            ",932],"]",["T_WHITESPACE","\n        ",933],")",";",["T_WHITESPACE","\n\n        ",934],["T_RETURN","return",936],["T_WHITESPACE"," ",936],["T_VARIABLE","$this",936],";",["T_WHITESPACE","\n    ",936],"}",["T_WHITESPACE","\n",937],"}",["T_WHITESPACE","\n",938]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Reports",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Quote",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Item",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceConnection",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Collection of Magento\\Quote\\Model\\Quote\\Item\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Collection",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ResourceModel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Db",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Collection",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractCollection",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Join fields\n     *\n     * @var array\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_joinedFields",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],"[","]",";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Fields map for correlation names & real selected fields\n     *\n     * @var array\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_map",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'main_table.store_id'",30],"]","]",";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$productResource",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\ResourceModel\\Customer\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$customerResource",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\ResourceModel\\Order\\Collection\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$orderResource",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Data\\Collection\\EntityFactory $entityFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Data\\Collection\\Db\\FetchStrategyInterface $fetchStrategy\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection $productResource\n     * @param \\Magento\\Customer\\Model\\ResourceModel\\Customer $customerResource\n     * @param \\Magento\\Sales\\Model\\ResourceModel\\Order\\Collection $orderResource\n     * @param \\Magento\\Framework\\DB\\Adapter\\AdapterInterface $connection\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\AbstractDb $resource\n     *\/",47],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","__construct",58],"(",["T_WHITESPACE","\n        ",58],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Framework",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Data",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Collection",59],["T_NS_SEPARATOR","\\",59],["T_STRING","EntityFactory",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$entityFactory",59],",",["T_WHITESPACE","\n        ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Psr",60],["T_NS_SEPARATOR","\\",60],["T_STRING","Log",60],["T_NS_SEPARATOR","\\",60],["T_STRING","LoggerInterface",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$logger",60],",",["T_WHITESPACE","\n        ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Framework",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Data",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Collection",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Db",61],["T_NS_SEPARATOR","\\",61],["T_STRING","FetchStrategyInterface",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$fetchStrategy",61],",",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Framework",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Event",62],["T_NS_SEPARATOR","\\",62],["T_STRING","ManagerInterface",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$eventManager",62],",",["T_WHITESPACE","\n        ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Magento",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Catalog",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Model",63],["T_NS_SEPARATOR","\\",63],["T_STRING","ResourceModel",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Product",63],["T_NS_SEPARATOR","\\",63],["T_STRING","Collection",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$productResource",63],",",["T_WHITESPACE","\n        ",63],["T_NS_SEPARATOR","\\",64],["T_STRING","Magento",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Customer",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Model",64],["T_NS_SEPARATOR","\\",64],["T_STRING","ResourceModel",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Customer",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$customerResource",64],",",["T_WHITESPACE","\n        ",64],["T_NS_SEPARATOR","\\",65],["T_STRING","Magento",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Sales",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Model",65],["T_NS_SEPARATOR","\\",65],["T_STRING","ResourceModel",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Order",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Collection",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$orderResource",65],",",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Framework",66],["T_NS_SEPARATOR","\\",66],["T_STRING","DB",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Adapter",66],["T_NS_SEPARATOR","\\",66],["T_STRING","AdapterInterface",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$connection",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","null",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Framework",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","ResourceModel",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Db",67],["T_NS_SEPARATOR","\\",67],["T_STRING","AbstractDb",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$resource",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","null",67],["T_WHITESPACE","\n    ",67],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n        ",68],["T_STRING","parent",69],["T_DOUBLE_COLON","::",69],["T_STRING","__construct",69],"(",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$entityFactory",70],",",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$logger",71],",",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$fetchStrategy",72],",",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$eventManager",73],",",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$connection",74],",",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$resource",75],["T_WHITESPACE","\n        ",75],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","productResource",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$productResource",77],";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","customerResource",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$customerResource",78],";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","orderResource",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$orderResource",79],";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Resource initialization\n     *\n     * @return void\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","_construct",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_init",89],"(",["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Quote",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Model",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Quote",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Item",89],["T_DOUBLE_COLON","::",89],["T_CLASS","class",89],",",["T_WHITESPACE"," ",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Quote",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Model",89],["T_NS_SEPARATOR","\\",89],["T_STRING","ResourceModel",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Quote",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Item",89],["T_DOUBLE_COLON","::",89],["T_CLASS","class",89],")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Prepare select query for products in carts report\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","prepareActiveCartItems",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$quoteItemsSelect",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getSelect",99],"(",")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$quoteItemsSelect",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","reset",100],"(",")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","from",101],"(","[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getTable",101],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_item'",101],")","]",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","''",101],")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","columns",102],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.product_id'",102],")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","columns",103],"(","[",["T_CONSTANT_ENCAPSED_STRING","'carts'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_NEW","new",103],["T_WHITESPACE"," ",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Zend_Db_Expr",103],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(main_table.item_id)'",103],")","]",")",["T_WHITESPACE","\n            ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","columns",104],"(",["T_CONSTANT_ENCAPSED_STRING","'quote.base_to_global_rate'",104],")",["T_WHITESPACE","\n            ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","joinInner",105],"(",["T_WHITESPACE","\n                ",105],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getTable",106],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",106],")","]",",",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'main_table.quote_id = quote.entity_id'",107],",",["T_WHITESPACE","\n                ",107],["T_STRING","null",108],["T_WHITESPACE","\n            ",108],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","where",109],"(",["T_WHITESPACE","\n                ",109],["T_CONSTANT_ENCAPSED_STRING","'quote.is_active = ?'",110],",",["T_WHITESPACE","\n                ",110],["T_LNUMBER","1",111],["T_WHITESPACE","\n            ",111],")",["T_OBJECT_OPERATOR","->",112],["T_STRING","group",112],"(",["T_WHITESPACE","\n                ",112],["T_CONSTANT_ENCAPSED_STRING","'main_table.product_id'",113],["T_WHITESPACE","\n            ",113],")",";",["T_WHITESPACE","\n\n        ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$quoteItemsSelect",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Orders quantity data\n     *\n     * @param array $productIds\n     * @return array\n     *\/",119],["T_WHITESPACE","\n    ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","getOrdersData",125],"(",["T_ARRAY","array",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$productIds",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$ordersSubSelect",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_CLONE","clone",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","orderResource",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getSelect",127],"(",")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$ordersSubSelect",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","reset",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","from",128],"(",["T_WHITESPACE","\n            ",128],"[",["T_CONSTANT_ENCAPSED_STRING","'oi'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getTable",129],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_item'",129],")","]",",",["T_WHITESPACE","\n            ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'orders'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_NEW","new",130],["T_WHITESPACE"," ",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Zend_Db_Expr",130],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(1)'",130],")","]",["T_WHITESPACE","\n        ",130],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","where",131],"(",["T_CONSTANT_ENCAPSED_STRING","'oi.product_id IN (?)'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$productIds",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","group",131],"(",["T_WHITESPACE","\n            ",131],["T_CONSTANT_ENCAPSED_STRING","'oi.product_id'",132],["T_WHITESPACE","\n        ",132],")",";",["T_WHITESPACE","\n\n        ",133],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","orderResource",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getConnection",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","fetchAssoc",135],"(",["T_VARIABLE","$ordersSubSelect",135],")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Add store ids to filter\n     *\n     * @param array $storeIds\n     * @return $this\n     *\/",138],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","addStoreFilter",144],"(",["T_VARIABLE","$storeIds",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addFieldToFilter",146],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",146],",",["T_WHITESPACE"," ",146],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$storeIds",146],"]",")",";",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Get select count sql\n     *\n     * @return \\Magento\\Framework\\DB\\Select\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getSelectCountSql",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$countSelect",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_CLONE","clone",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","prepareActiveCartItems",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$countSelect",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","reset",158],"(",["T_NS_SEPARATOR","\\",158],["T_STRING","Magento",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Framework",158],["T_NS_SEPARATOR","\\",158],["T_STRING","DB",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Select",158],["T_DOUBLE_COLON","::",158],["T_STRING","COLUMNS",158],")",["T_WHITESPACE","\n            ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","reset",159],"(",["T_NS_SEPARATOR","\\",159],["T_STRING","Magento",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Framework",159],["T_NS_SEPARATOR","\\",159],["T_STRING","DB",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Select",159],["T_DOUBLE_COLON","::",159],["T_STRING","GROUP",159],")",["T_WHITESPACE","\n            ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","columns",160],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT main_table.product_id)'",160],")",";",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$countSelect",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Separate query for product and order data\n     *\n     * @param array $productIds\n     * @return array\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",164],["T_WHITESPACE","\n    ",170],["T_PROTECTED","protected",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","getProductData",171],"(",["T_ARRAY","array",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$productIds",171],")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$productConnection",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","productResource",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getConnection",173],"(",")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$productAttrName",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","productResource",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getAttribute",174],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$productAttrNameId",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_INT_CAST","(int)",175],["T_VARIABLE","$productAttrName",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getAttributeId",175],"(",")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$productAttrPrice",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","productResource",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getAttribute",176],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$productAttrPriceId",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_INT_CAST","(int)",177],["T_VARIABLE","$productAttrPrice",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getAttributeId",177],"(",")",";",["T_WHITESPACE","\n\n        ",177],["T_VARIABLE","$linkField",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","productResource",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getEntity",179],"(",")",["T_OBJECT_OPERATOR","->",179],["T_STRING","getLinkField",179],"(",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$select",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_CLONE","clone",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","productResource",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getSelect",180],"(",")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$select",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","reset",181],"(",")",";",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$select",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","from",182],"(",["T_WHITESPACE","\n            ",182],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getTable",183],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",183],")","]",",",["T_WHITESPACE","\n            ",183],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id'",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'main_table.*'",184],"]",["T_WHITESPACE","\n        ",184],")",["T_OBJECT_OPERATOR","->",185],["T_STRING","useStraightJoin",185],"(",["T_WHITESPACE","\n            ",185],["T_STRING","true",186],["T_WHITESPACE","\n        ",186],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","joinInner",187],"(",["T_WHITESPACE","\n            ",187],"[",["T_CONSTANT_ENCAPSED_STRING","'product_name'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$productAttrName",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getBackend",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","getTable",188],"(",")","]",",",["T_WHITESPACE","\n            ",188],"\"",["T_ENCAPSED_AND_WHITESPACE","product_name.",189],["T_CURLY_OPEN","{",189],["T_VARIABLE","$linkField",189],"}",["T_ENCAPSED_AND_WHITESPACE"," = main_table.",189],["T_CURLY_OPEN","{",189],["T_VARIABLE","$linkField",189],"}","\"",["T_WHITESPACE","\n            ",189],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","' AND product_name.attribute_id = '",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_VARIABLE","$productAttrNameId",190],["T_WHITESPACE","\n            ",190],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","' AND product_name.store_id = '",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Magento",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Store",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Model",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Store",191],["T_DOUBLE_COLON","::",191],["T_STRING","DEFAULT_STORE_ID",191],",",["T_WHITESPACE","\n            ",191],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'product_name.value'",192],"]",["T_WHITESPACE","\n        ",192],")",["T_OBJECT_OPERATOR","->",193],["T_STRING","joinInner",193],"(",["T_WHITESPACE","\n            ",193],"[",["T_CONSTANT_ENCAPSED_STRING","'product_price'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$productAttrPrice",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getBackend",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","getTable",194],"(",")","]",",",["T_WHITESPACE","\n            ",194],"\"",["T_ENCAPSED_AND_WHITESPACE","product_price.",195],["T_CURLY_OPEN","{",195],["T_VARIABLE","$linkField",195],"}",["T_ENCAPSED_AND_WHITESPACE"," = main_table.",195],["T_CURLY_OPEN","{",195],["T_VARIABLE","$linkField",195],"}","\"",["T_WHITESPACE","\n            ",195],".","\"",["T_ENCAPSED_AND_WHITESPACE"," AND product_price.attribute_id = ",196],["T_CURLY_OPEN","{",196],["T_VARIABLE","$productAttrPriceId",196],"}","\"",",",["T_WHITESPACE","\n            ",196],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_NEW","new",197],["T_WHITESPACE"," ",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Zend_Db_Expr",197],"(",["T_CONSTANT_ENCAPSED_STRING","'product_price.value'",197],")","]",["T_WHITESPACE","\n        ",197],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","where",198],"(",["T_CONSTANT_ENCAPSED_STRING","\"main_table.entity_id IN (?)\"",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$productIds",198],")",";",["T_WHITESPACE","\n\n        ",198],["T_VARIABLE","$productData",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$productConnection",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","fetchAssoc",200],"(",["T_VARIABLE","$select",200],")",";",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$productData",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Add data fetched from another database\n     *\n     * @return $this\n     *\/",204],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","_afterLoad",209],"(",")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_STRING","parent",211],["T_DOUBLE_COLON","::",211],["T_STRING","_afterLoad",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$items",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getItems",212],"(",")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$productIds",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],"[","]",";",["T_WHITESPACE","\n        ",213],["T_FOREACH","foreach",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$items",214],["T_WHITESPACE"," ",214],["T_AS","as",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$item",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$productIds",215],"[","]",["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$item",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getProductId",215],"(",")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$productData",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getProductData",217],"(",["T_VARIABLE","$productIds",217],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$orderData",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getOrdersData",218],"(",["T_VARIABLE","$productIds",218],")",";",["T_WHITESPACE","\n        ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$items",219],["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$item",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$item",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","setId",220],"(",["T_VARIABLE","$item",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getProductId",220],"(",")",")",";",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$item",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setPrice",221],"(",["T_VARIABLE","$productData",221],"[",["T_VARIABLE","$item",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getProductId",221],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",221],"]",["T_WHITESPACE"," ",221],"*",["T_WHITESPACE"," ",221],["T_VARIABLE","$item",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getBaseToGlobalRate",221],"(",")",")",";",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$item",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","setName",222],"(",["T_VARIABLE","$productData",222],"[",["T_VARIABLE","$item",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getProductId",222],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",222],"]",")",";",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$item",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setOrders",223],"(",["T_LNUMBER","0",223],")",";",["T_WHITESPACE","\n            ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_ISSET","isset",224],"(",["T_VARIABLE","$orderData",224],"[",["T_VARIABLE","$item",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getProductId",224],"(",")","]",")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$item",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","setOrders",225],"(",["T_VARIABLE","$orderData",225],"[",["T_VARIABLE","$item",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getProductId",225],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'orders'",225],"]",")",";",["T_WHITESPACE","\n            ",225],"}",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n\n        ",227],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n",230],"}",["T_WHITESPACE","\n",231]]
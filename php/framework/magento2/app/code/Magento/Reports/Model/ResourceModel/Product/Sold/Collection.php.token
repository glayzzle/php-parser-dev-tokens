[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Report Sold Products collection\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",7],["T_WHITESPACE","\n",11],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Reports",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ResourceModel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Product",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sold",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.DepthOfInheritance)\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","Collection",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Reports",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ResourceModel",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Order",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Collection",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * Set Date range to collection\n     *\n     * @param int $from\n     * @param int $to\n     * @return $this\n     *\/",19],["T_WHITESPACE","\n    ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setDateRange",26],"(",["T_VARIABLE","$from",26],",",["T_WHITESPACE"," ",26],["T_VARIABLE","$to",26],")",["T_WHITESPACE","\n    ",26],"{",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","_reset",28],"(",")",["T_OBJECT_OPERATOR","->",28],["T_STRING","addAttributeToSelect",28],"(",["T_WHITESPACE","\n            ",28],["T_CONSTANT_ENCAPSED_STRING","'*'",29],["T_WHITESPACE","\n        ",29],")",["T_OBJECT_OPERATOR","->",30],["T_STRING","addOrderedQty",30],"(",["T_WHITESPACE","\n            ",30],["T_VARIABLE","$from",31],",",["T_WHITESPACE","\n            ",31],["T_VARIABLE","$to",32],["T_WHITESPACE","\n        ",32],")",["T_OBJECT_OPERATOR","->",33],["T_STRING","setOrder",33],"(",["T_WHITESPACE","\n            ",33],["T_CONSTANT_ENCAPSED_STRING","'ordered_qty'",34],",",["T_WHITESPACE","\n            ",34],["T_STRING","self",35],["T_DOUBLE_COLON","::",35],["T_STRING","SORT_ORDER_DESC",35],["T_WHITESPACE","\n        ",35],")",";",["T_WHITESPACE","\n        ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],";",["T_WHITESPACE","\n    ",37],"}",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Add ordered qty's\n     *\n     * @param string $from\n     * @param string $to\n     * @return $this\n     *\/",40],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","addOrderedQty",47],"(",["T_VARIABLE","$from",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","''",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$to",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","''",47],")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$connection",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getConnection",49],"(",")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$orderTableAliasName",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$connection",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","quoteIdentifier",50],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",50],")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$orderJoinCondition",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],"[",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$orderTableAliasName",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'.entity_id = order_items.order_id'",53],",",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$connection",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","quoteInto",54],"(","\"",["T_CURLY_OPEN","{",54],["T_VARIABLE","$orderTableAliasName",54],"}",["T_ENCAPSED_AND_WHITESPACE",".state <> ?",54],"\"",",",["T_WHITESPACE"," ",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Sales",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Order",54],["T_DOUBLE_COLON","::",54],["T_STRING","STATE_CANCELED",54],")",",",["T_WHITESPACE","\n        ",54],"]",";",["T_WHITESPACE","\n\n        ",55],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$from",57],["T_WHITESPACE"," ",57],["T_IS_NOT_EQUAL","!=",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","''",57],["T_WHITESPACE"," ",57],["T_BOOLEAN_AND","&&",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$to",57],["T_WHITESPACE"," ",57],["T_IS_NOT_EQUAL","!=",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","''",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$fieldName",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$orderTableAliasName",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'.created_at'",58],";",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$orderJoinCondition",59],"[","]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","prepareBetweenSql",59],"(",["T_VARIABLE","$fieldName",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$from",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$to",59],")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getSelect",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","reset",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","from",62],"(",["T_WHITESPACE","\n            ",62],"[",["T_CONSTANT_ENCAPSED_STRING","'order_items'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getTable",63],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_item'",63],")","]",",",["T_WHITESPACE","\n            ",63],"[",["T_CONSTANT_ENCAPSED_STRING","'ordered_qty'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'SUM(order_items.qty_ordered)'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'order_items_name'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'order_items.name'",64],"]",["T_WHITESPACE","\n        ",64],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","joinInner",65],"(",["T_WHITESPACE","\n            ",65],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getTable",66],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",66],")","]",",",["T_WHITESPACE","\n            ",66],["T_STRING","implode",67],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$orderJoinCondition",67],")",",",["T_WHITESPACE","\n            ",67],"[","]",["T_WHITESPACE","\n        ",68],")",["T_OBJECT_OPERATOR","->",69],["T_STRING","where",69],"(",["T_WHITESPACE","\n            ",69],["T_CONSTANT_ENCAPSED_STRING","'parent_item_id IS NULL'",70],["T_WHITESPACE","\n        ",70],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","group",71],"(",["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'order_items.product_id'",72],["T_WHITESPACE","\n        ",72],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","having",73],"(",["T_WHITESPACE","\n            ",73],["T_CONSTANT_ENCAPSED_STRING","'SUM(order_items.qty_ordered) > ?'",74],",",["T_WHITESPACE","\n            ",74],["T_LNUMBER","0",75],["T_WHITESPACE","\n        ",75],")",";",["T_WHITESPACE","\n        ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Set store filter to collection\n     *\n     * @param array $storeIds\n     * @return $this\n     *\/",80],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","setStoreIds",86],"(",["T_VARIABLE","$storeIds",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$storeIds",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getSelect",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","where",89],"(",["T_CONSTANT_ENCAPSED_STRING","'order_items.store_id IN (?)'",89],",",["T_WHITESPACE"," ",89],["T_ARRAY_CAST","(array)",89],["T_VARIABLE","$storeIds",89],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Set order\n     *\n     * @param string $attribute\n     * @param string $dir\n     * @return $this\n     *\/",94],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","setOrder",101],"(",["T_VARIABLE","$attribute",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$dir",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","self",101],["T_DOUBLE_COLON","::",101],["T_STRING","SORT_ORDER_DESC",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_STRING","in_array",103],"(",["T_VARIABLE","$attribute",103],",",["T_WHITESPACE"," ",103],"[",["T_CONSTANT_ENCAPSED_STRING","'orders'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'ordered_qty'",103],"]",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getSelect",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","order",104],"(",["T_VARIABLE","$attribute",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","' '",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$dir",104],")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE"," ",105],["T_ELSE","else",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_STRING","parent",106],["T_DOUBLE_COLON","::",106],["T_STRING","setOrder",106],"(",["T_VARIABLE","$attribute",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$dir",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Prepare between sql\n     *\n     * @param string $fieldName Field name with table suffix ('created_at' or 'main_table.created_at')\n     * @param string $from\n     * @param string $to\n     * @return string Formatted sql string\n     *\/",112],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","prepareBetweenSql",120],"(",["T_VARIABLE","$fieldName",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$from",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$to",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_STRING","sprintf",122],"(",["T_WHITESPACE","\n            ",122],["T_CONSTANT_ENCAPSED_STRING","'(%s BETWEEN %s AND %s)'",123],",",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$fieldName",124],",",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getConnection",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","quote",125],"(",["T_VARIABLE","$from",125],")",",",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getConnection",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","quote",126],"(",["T_VARIABLE","$to",126],")",["T_WHITESPACE","\n        ",126],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n",128],"}",["T_WHITESPACE","\n",129]]
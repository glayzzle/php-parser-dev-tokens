[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Reports",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Quote",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","Collection",8],["T_WHITESPACE"," ",8],["T_EXTENDS","extends",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Quote",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceModel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Quote",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Collection",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\ResourceModel\\Customer\n     *\/",10],["T_WHITESPACE","\n    ",12],["T_PROTECTED","protected",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$customerResource",13],";",["T_WHITESPACE","\n\n    ",13],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Data\\Collection\\EntityFactoryInterface $entityFactory\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\Data\\Collection\\Db\\FetchStrategyInterface $fetchStrategy\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\VersionControl\\Snapshot $entitySnapshot\n     * @param \\Magento\\Customer\\Model\\ResourceModel\\Customer $customerResource\n     * @param \\Magento\\Framework\\DB\\Adapter\\AdapterInterface $connection\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\AbstractDb $resource\n     *\/",15],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","__construct",25],"(",["T_WHITESPACE","\n        ",25],["T_NS_SEPARATOR","\\",26],["T_STRING","Magento",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Framework",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Data",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Collection",26],["T_NS_SEPARATOR","\\",26],["T_STRING","EntityFactoryInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$entityFactory",26],",",["T_WHITESPACE","\n        ",26],["T_NS_SEPARATOR","\\",27],["T_STRING","Psr",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Log",27],["T_NS_SEPARATOR","\\",27],["T_STRING","LoggerInterface",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$logger",27],",",["T_WHITESPACE","\n        ",27],["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Framework",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Data",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Collection",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Db",28],["T_NS_SEPARATOR","\\",28],["T_STRING","FetchStrategyInterface",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$fetchStrategy",28],",",["T_WHITESPACE","\n        ",28],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Framework",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Event",29],["T_NS_SEPARATOR","\\",29],["T_STRING","ManagerInterface",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$eventManager",29],",",["T_WHITESPACE","\n        ",29],["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Framework",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Model",30],["T_NS_SEPARATOR","\\",30],["T_STRING","ResourceModel",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Db",30],["T_NS_SEPARATOR","\\",30],["T_STRING","VersionControl",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Snapshot",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$entitySnapshot",30],",",["T_WHITESPACE","\n        ",30],["T_NS_SEPARATOR","\\",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Customer",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Model",31],["T_NS_SEPARATOR","\\",31],["T_STRING","ResourceModel",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Customer",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$customerResource",31],",",["T_WHITESPACE","\n        ",31],["T_NS_SEPARATOR","\\",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Framework",32],["T_NS_SEPARATOR","\\",32],["T_STRING","DB",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Adapter",32],["T_NS_SEPARATOR","\\",32],["T_STRING","AdapterInterface",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$connection",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],",",["T_WHITESPACE","\n        ",32],["T_NS_SEPARATOR","\\",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Framework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Model",33],["T_NS_SEPARATOR","\\",33],["T_STRING","ResourceModel",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Db",33],["T_NS_SEPARATOR","\\",33],["T_STRING","AbstractDb",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$resource",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","null",33],["T_WHITESPACE","\n    ",33],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n        ",34],["T_STRING","parent",35],["T_DOUBLE_COLON","::",35],["T_STRING","__construct",35],"(",["T_WHITESPACE","\n            ",35],["T_VARIABLE","$entityFactory",36],",",["T_WHITESPACE","\n            ",36],["T_VARIABLE","$logger",37],",",["T_WHITESPACE","\n            ",37],["T_VARIABLE","$fetchStrategy",38],",",["T_WHITESPACE","\n            ",38],["T_VARIABLE","$eventManager",39],",",["T_WHITESPACE","\n            ",39],["T_VARIABLE","$entitySnapshot",40],",",["T_WHITESPACE","\n            ",40],["T_VARIABLE","$connection",41],",",["T_WHITESPACE","\n            ",41],["T_VARIABLE","$resource",42],["T_WHITESPACE","\n        ",42],")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","customerResource",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$customerResource",44],";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Prepare for abandoned report\n     *\n     * @param array $storeIds\n     * @param string $filter\n     * @return $this\n     *\/",47],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","prepareForAbandonedReport",54],"(",["T_VARIABLE","$storeIds",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$filter",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","null",54],")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","addFieldToFilter",56],"(",["T_WHITESPACE","\n            ",56],["T_CONSTANT_ENCAPSED_STRING","'items_count'",57],",",["T_WHITESPACE","\n            ",57],"[",["T_CONSTANT_ENCAPSED_STRING","'neq'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'0'",58],"]",["T_WHITESPACE","\n        ",58],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","addFieldToFilter",59],"(",["T_WHITESPACE","\n            ",59],["T_CONSTANT_ENCAPSED_STRING","'main_table.is_active'",60],",",["T_WHITESPACE","\n            ",60],["T_CONSTANT_ENCAPSED_STRING","'1'",61],["T_WHITESPACE","\n        ",61],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","addFieldToFilter",62],"(",["T_WHITESPACE","\n            ",62],["T_CONSTANT_ENCAPSED_STRING","'main_table.customer_id'",63],",",["T_WHITESPACE","\n            ",63],"[",["T_CONSTANT_ENCAPSED_STRING","'neq'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_STRING","null",64],"]",["T_WHITESPACE","\n        ",64],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","addSubtotal",65],"(",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$storeIds",66],",",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$filter",67],["T_WHITESPACE","\n        ",67],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","setOrder",68],"(",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",69],["T_WHITESPACE","\n        ",69],")",";",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_ISSET","isset",71],"(",["T_VARIABLE","$filter",71],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",71],"]",")",["T_WHITESPACE"," ",71],["T_BOOLEAN_OR","||",71],["T_WHITESPACE"," ",71],["T_ISSET","isset",71],"(",["T_VARIABLE","$filter",71],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_name'",71],"]",")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","addCustomerData",72],"(",["T_VARIABLE","$filter",72],")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_STRING","is_array",74],"(",["T_VARIABLE","$storeIds",74],")",["T_WHITESPACE"," ",74],["T_BOOLEAN_AND","&&",74],["T_WHITESPACE"," ",74],"!",["T_EMPTY","empty",74],"(",["T_VARIABLE","$storeIds",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addFieldToFilter",75],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",75],",",["T_WHITESPACE"," ",75],"[",["T_CONSTANT_ENCAPSED_STRING","'in'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$storeIds",75],"]",")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Add customer data\n     *\n     * @param array|null $filter\n     * @return $this\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","addCustomerData",87],"(",["T_VARIABLE","$filter",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","null",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$customersSelect",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","customerResource",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getConnection",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","select",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$customersSelect",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","from",90],"(",["T_WHITESPACE","\n            ",90],"[",["T_CONSTANT_ENCAPSED_STRING","'customer'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","customerResource",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getTable",91],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",91],")","]",",",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",92],["T_WHITESPACE","\n        ",92],")",";",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_ISSET","isset",94],"(",["T_VARIABLE","$filter",94],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_name'",94],"]",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$customerName",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","customerResource",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getConnection",95],"(",")",["T_WHITESPACE","\n                ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","getConcatSql",96],"(","[",["T_CONSTANT_ENCAPSED_STRING","'customer.firstname'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'customer.lastname'",96],"]",",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","' '",96],")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$customersSelect",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","where",97],"(",["T_VARIABLE","$customerName",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","' LIKE ?'",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'%'",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_VARIABLE","$filter",97],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_name'",97],"]",["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'%'",97],")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n        ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_ISSET","isset",99],"(",["T_VARIABLE","$filter",99],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",99],"]",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$customersSelect",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","where",100],"(",["T_CONSTANT_ENCAPSED_STRING","'customer.email LIKE ?'",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'%'",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_VARIABLE","$filter",100],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",100],"]",["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'%'",100],")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$filteredCustomers",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","customerResource",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getConnection",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","fetchCol",102],"(",["T_VARIABLE","$customersSelect",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getSelect",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","where",103],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.customer_id IN (?)'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$filteredCustomers",103],")",";",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Add subtotals\n     *\n     * @param array $storeIds\n     * @param null|array $filter\n     * @return $this\n     *\/",107],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","addSubtotal",114],"(",["T_VARIABLE","$storeIds",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","''",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$filter",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","null",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_STRING","is_array",116],"(",["T_VARIABLE","$storeIds",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getSelect",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","columns",117],"(",["T_WHITESPACE","\n                ",117],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'(main_table.base_subtotal_with_discount*main_table.base_to_global_rate)'",118],"]",["T_WHITESPACE","\n            ",118],")",";",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_joinedFields",120],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'(main_table.base_subtotal_with_discount*main_table.base_to_global_rate)'",121],";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE"," ",122],["T_ELSE","else",122],["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getSelect",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","columns",123],"(","[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_with_discount'",123],"]",")",";",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_joinedFields",124],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_with_discount'",124],";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$filter",127],["T_WHITESPACE"," ",127],["T_BOOLEAN_AND","&&",127],["T_WHITESPACE"," ",127],["T_STRING","is_array",127],"(",["T_VARIABLE","$filter",127],")",["T_WHITESPACE"," ",127],["T_BOOLEAN_AND","&&",127],["T_WHITESPACE"," ",127],["T_ISSET","isset",127],"(",["T_VARIABLE","$filter",127],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",127],"]",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_ISSET","isset",128],"(",["T_VARIABLE","$filter",128],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",128],"]","[",["T_CONSTANT_ENCAPSED_STRING","'from'",128],"]",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getSelect",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","where",129],"(",["T_WHITESPACE","\n                    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_joinedFields",130],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",130],"]",["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","' >= ?'",130],",",["T_WHITESPACE","\n                    ",130],["T_VARIABLE","$filter",131],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",131],"]","[",["T_CONSTANT_ENCAPSED_STRING","'from'",131],"]",",",["T_WHITESPACE","\n                    ",131],["T_NS_SEPARATOR","\\",132],["T_STRING","Zend_Db",132],["T_DOUBLE_COLON","::",132],["T_STRING","FLOAT_TYPE",132],["T_WHITESPACE","\n                ",132],")",";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n            ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_ISSET","isset",135],"(",["T_VARIABLE","$filter",135],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",135],"]","[",["T_CONSTANT_ENCAPSED_STRING","'to'",135],"]",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getSelect",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","where",136],"(",["T_WHITESPACE","\n                    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_joinedFields",137],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",137],"]",["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","' <= ?'",137],",",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$filter",138],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",138],"]","[",["T_CONSTANT_ENCAPSED_STRING","'to'",138],"]",",",["T_WHITESPACE","\n                    ",138],["T_NS_SEPARATOR","\\",139],["T_STRING","Zend_Db",139],["T_DOUBLE_COLON","::",139],["T_STRING","FLOAT_TYPE",139],["T_WHITESPACE","\n                ",139],")",";",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Resolve customers data based on ids quote table.\n     *\n     * @return void\n     *\/",147],["T_WHITESPACE","\n    ",151],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","resolveCustomerNames",152],"(",")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$select",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","customerResource",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getConnection",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","select",154],"(",")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$customerName",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","customerResource",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getConnection",155],"(",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","getConcatSql",155],"(","[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",155],",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'lastname'",155],"]",",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","' '",155],")",";",["T_WHITESPACE","\n\n        ",155],["T_VARIABLE","$select",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","from",157],"(",["T_WHITESPACE","\n            ",157],"[",["T_CONSTANT_ENCAPSED_STRING","'customer'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","customerResource",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getTable",158],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",158],")","]",",",["T_WHITESPACE","\n            ",158],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'email'",159],"]",["T_WHITESPACE","\n        ",159],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$select",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","columns",161],"(",["T_WHITESPACE","\n            ",161],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_name'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$customerName",162],"]",["T_WHITESPACE","\n        ",162],")",";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$select",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","where",164],"(",["T_WHITESPACE","\n            ",164],["T_CONSTANT_ENCAPSED_STRING","'customer.entity_id IN (?)'",165],",",["T_WHITESPACE","\n            ",165],["T_STRING","array_column",166],"(",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getData",167],"(",")",",",["T_WHITESPACE","\n                ",167],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",168],["T_WHITESPACE","\n            ",168],")",["T_WHITESPACE","\n        ",169],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$customersData",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","customerResource",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getConnection",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","fetchAll",171],"(",["T_VARIABLE","$select",171],")",";",["T_WHITESPACE","\n\n        ",171],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getItems",173],"(",")",["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$item",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_FOREACH","foreach",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$customersData",174],["T_WHITESPACE"," ",174],["T_AS","as",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$customerItemData",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$item",175],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",175],"]",["T_WHITESPACE"," ",175],["T_IS_EQUAL","==",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$customerItemData",175],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",175],"]",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                    ",175],["T_VARIABLE","$item",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","setData",176],"(",["T_STRING","array_merge",176],"(",["T_VARIABLE","$item",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getData",176],"(",")",",",["T_WHITESPACE"," ",176],["T_VARIABLE","$customerItemData",176],")",")",";",["T_WHITESPACE","\n                ",176],"}",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n",180],"}",["T_WHITESPACE","\n",181]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Reports",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unit",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Reports",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Helper",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","HelperTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PHPUnit_Framework_TestCase",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Reports\\Model\\ResourceModel\\Helper\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$helper",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\ResourceConnection|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$resourceMock",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DB\\Adapter\\AdapterInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$connectionMock",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * {@inheritDoc}\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","setUp",31],"(",")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","resourceMock",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getMockBuilder",33],"(",["T_NS_SEPARATOR","\\",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Framework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","App",33],["T_NS_SEPARATOR","\\",33],["T_STRING","ResourceConnection",33],["T_DOUBLE_COLON","::",33],["T_CLASS","class",33],")",["T_WHITESPACE","\n            ",33],["T_OBJECT_OPERATOR","->",34],["T_STRING","disableOriginalConstructor",34],"(",")",["T_WHITESPACE","\n            ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","getMock",35],"(",")",";",["T_WHITESPACE","\n\n        ",35],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","connectionMock",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getMockBuilder",37],"(",["T_NS_SEPARATOR","\\",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Framework",37],["T_NS_SEPARATOR","\\",37],["T_STRING","DB",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Adapter",37],["T_NS_SEPARATOR","\\",37],["T_STRING","AdapterInterface",37],["T_DOUBLE_COLON","::",37],["T_CLASS","class",37],")",["T_WHITESPACE","\n            ",37],["T_OBJECT_OPERATOR","->",38],["T_STRING","getMock",38],"(",")",";",["T_WHITESPACE","\n\n        ",38],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","resourceMock",40],["T_WHITESPACE","\n            ",40],["T_OBJECT_OPERATOR","->",41],["T_STRING","expects",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","any",41],"(",")",")",["T_WHITESPACE","\n            ",41],["T_OBJECT_OPERATOR","->",42],["T_STRING","method",42],"(",["T_CONSTANT_ENCAPSED_STRING","'getConnection'",42],")",["T_WHITESPACE","\n            ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","willReturn",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","connectionMock",43],")",";",["T_WHITESPACE","\n\n        ",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","helper",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_NEW","new",45],["T_WHITESPACE"," ",45],["T_STRING","Helper",45],"(",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","resourceMock",46],["T_WHITESPACE","\n        ",46],")",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @return void\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testMergeVisitorProductIndex",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$mainTable",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'mainTable'",55],";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$data",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[",["T_CONSTANT_ENCAPSED_STRING","'dataKey'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'dataValue'",56],"]",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$matchFields",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[",["T_CONSTANT_ENCAPSED_STRING","'matchField'",57],"]",";",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","connectionMock",59],["T_WHITESPACE","\n            ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","expects",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","once",60],"(",")",")",["T_WHITESPACE","\n            ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","method",61],"(",["T_CONSTANT_ENCAPSED_STRING","'insertOnDuplicate'",61],")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","with",62],"(",["T_VARIABLE","$mainTable",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$data",62],",",["T_WHITESPACE"," ",62],["T_STRING","array_keys",62],"(",["T_VARIABLE","$data",62],")",")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","helper",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","mergeVisitorProductIndex",64],"(",["T_VARIABLE","$mainTable",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$data",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$matchFields",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @param string $type\n     * @param array $result\n     * @dataProvider typesDataProvider\n     * @return void\n     *\/",67],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","testUpdateReportRatingPos",73],"(",["T_VARIABLE","$type",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$result",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$mainTable",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'mainTable'",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$column",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'column'",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$aggregationTable",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'aggregationTable'",77],";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$selectMock",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMockBuilder",79],"(",["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Framework",79],["T_NS_SEPARATOR","\\",79],["T_STRING","DB",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Select",79],["T_DOUBLE_COLON","::",79],["T_CLASS","class",79],")",["T_WHITESPACE","\n            ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","disableOriginalConstructor",80],"(",")",["T_WHITESPACE","\n            ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","getMock",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$selectMock",82],["T_WHITESPACE","\n            ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","expects",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","any",83],"(",")",")",["T_WHITESPACE","\n            ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","method",84],"(",["T_CONSTANT_ENCAPSED_STRING","'from'",84],")",["T_WHITESPACE","\n            ",84],["T_OBJECT_OPERATOR","->",85],["T_STRING","willReturnSelf",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$selectMock",86],["T_WHITESPACE","\n            ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","expects",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","once",87],"(",")",")",["T_WHITESPACE","\n            ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","method",88],"(",["T_CONSTANT_ENCAPSED_STRING","'group'",88],")",["T_WHITESPACE","\n            ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","willReturnSelf",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$selectMock",90],["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","expects",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","once",91],"(",")",")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","method",92],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",92],")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","willReturnSelf",93],"(",")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$selectMock",94],["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","expects",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","once",95],"(",")",")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","method",96],"(",["T_CONSTANT_ENCAPSED_STRING","'insertFromSelect'",96],")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","with",97],"(",["T_VARIABLE","$aggregationTable",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$result",97],")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","willReturnSelf",98],"(",")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","connectionMock",100],["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","expects",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","any",101],"(",")",")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","method",102],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",102],")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","willReturn",103],"(",["T_VARIABLE","$selectMock",103],")",";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","helper",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","updateReportRatingPos",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","connectionMock",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$type",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$column",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$mainTable",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$aggregationTable",105],")",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",108],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","typesDataProvider",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$mResult",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],"[",["T_CONSTANT_ENCAPSED_STRING","'period'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'store_id'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'product_id'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'product_name'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'product_price'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'column'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'rating_pos'",113],"]",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$dResult",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],"[",["T_CONSTANT_ENCAPSED_STRING","'period'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'store_id'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'product_id'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'product_name'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'product_price'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'id'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'column'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'rating_pos'",114],"]",";",["T_WHITESPACE","\n        ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],"[",["T_WHITESPACE","\n            ",115],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'year'",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'result'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$mResult",116],"]",",",["T_WHITESPACE","\n            ",116],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'month'",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'result'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$mResult",117],"]",",",["T_WHITESPACE","\n            ",117],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'day'",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'result'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$dResult",118],"]",",",["T_WHITESPACE","\n            ",118],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_STRING","null",119],",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'result'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$mResult",119],"]",["T_WHITESPACE","\n        ",119],"]",";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n",121],"}",["T_WHITESPACE","\n",122]]
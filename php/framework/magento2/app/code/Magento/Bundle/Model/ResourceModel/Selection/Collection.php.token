[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Bundle",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Selection",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","GroupManagementInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DataObject",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DB",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Select",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Bundle Selections Resource Collection\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Collection",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Catalog",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ResourceModel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Product",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Collection",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * Selection table name\n     *\n     * @var string\n     *\/",17],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$_selectionTable",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var DataObject\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$itemPrototype",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","null",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogRule\\Model\\ResourceModel\\Product\\CollectionProcessor\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$catalogRuleProcessor",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Is website scope prices joined to collection\n     *\n     * @var bool\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$websiteScopePriceJoined",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","false",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Initialize collection\n     *\n     * @return void\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","_construct",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_STRING","parent",48],["T_DOUBLE_COLON","::",48],["T_STRING","_construct",48],"(",")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setRowIdFieldName",49],"(",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",49],")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_selectionTable",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getTable",50],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_selection'",50],")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Set store id for each collection item when collection was loaded\n     *\n     * @return $this\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_afterLoad",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_STRING","parent",60],["T_DOUBLE_COLON","::",60],["T_STRING","_afterLoad",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getStoreId",61],"(",")",["T_WHITESPACE"," ",61],["T_BOOLEAN_AND","&&",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_items",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_FOREACH","foreach",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_items",62],["T_WHITESPACE"," ",62],["T_AS","as",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$item",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$item",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setStoreId",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getStoreId",63],"(",")",")",";",["T_WHITESPACE","\n            ",63],"}",["T_WHITESPACE","\n        ",64],"}",["T_WHITESPACE","\n        ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Initialize collection select\n     *\n     * @return $this|void\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","_initSelect",74],"(",")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_STRING","parent",76],["T_DOUBLE_COLON","::",76],["T_STRING","_initSelect",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getSelect",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","join",77],"(",["T_WHITESPACE","\n            ",77],"[",["T_CONSTANT_ENCAPSED_STRING","'selection'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_selectionTable",78],"]",",",["T_WHITESPACE","\n            ",78],["T_CONSTANT_ENCAPSED_STRING","'selection.product_id = e.entity_id'",79],",",["T_WHITESPACE","\n            ",79],"[",["T_CONSTANT_ENCAPSED_STRING","'*'",80],"]",["T_WHITESPACE","\n        ",80],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Join website scope prices to collection, override default prices\n     *\n     * @param int $websiteId\n     * @return $this\n     *\/",84],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","joinPrices",90],"(",["T_VARIABLE","$websiteId",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$connection",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getConnection",92],"(",")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$priceType",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$connection",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getCheckSql",93],"(",["T_WHITESPACE","\n            ",93],["T_CONSTANT_ENCAPSED_STRING","'price.selection_price_type IS NOT NULL'",94],",",["T_WHITESPACE","\n            ",94],["T_CONSTANT_ENCAPSED_STRING","'price.selection_price_type'",95],",",["T_WHITESPACE","\n            ",95],["T_CONSTANT_ENCAPSED_STRING","'selection.selection_price_type'",96],["T_WHITESPACE","\n        ",96],")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$priceValue",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$connection",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getCheckSql",98],"(",["T_WHITESPACE","\n            ",98],["T_CONSTANT_ENCAPSED_STRING","'price.selection_price_value IS NOT NULL'",99],",",["T_WHITESPACE","\n            ",99],["T_CONSTANT_ENCAPSED_STRING","'price.selection_price_value'",100],",",["T_WHITESPACE","\n            ",100],["T_CONSTANT_ENCAPSED_STRING","'selection.selection_price_value'",101],["T_WHITESPACE","\n        ",101],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getSelect",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","joinLeft",103],"(",["T_WHITESPACE","\n            ",103],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getTable",104],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_selection_price'",104],")","]",",",["T_WHITESPACE","\n            ",104],["T_CONSTANT_ENCAPSED_STRING","'selection.selection_id = price.selection_id AND price.website_id = '",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_INT_CAST","(int)",105],["T_VARIABLE","$websiteId",105],",",["T_WHITESPACE","\n            ",105],"[",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'selection_price_type'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$priceType",107],",",["T_WHITESPACE","\n                ",107],["T_CONSTANT_ENCAPSED_STRING","'selection_price_value'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$priceValue",108],",",["T_WHITESPACE","\n                ",108],["T_CONSTANT_ENCAPSED_STRING","'price_scope'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'price.website_id'",109],["T_WHITESPACE","\n            ",109],"]",["T_WHITESPACE","\n        ",110],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","websiteScopePriceJoined",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","true",112],";",["T_WHITESPACE","\n\n        ",112],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Apply option ids filter to collection\n     *\n     * @param array $optionIds\n     * @return $this\n     *\/",117],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","setOptionIdsFilter",123],"(",["T_VARIABLE","$optionIds",123],")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_EMPTY","empty",125],"(",["T_VARIABLE","$optionIds",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getSelect",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","where",126],"(",["T_CONSTANT_ENCAPSED_STRING","'selection.option_id IN (?)'",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$optionIds",126],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Apply selection ids filter to collection\n     *\n     * @param array $selectionIds\n     * @return $this\n     *\/",131],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","setSelectionIdsFilter",137],"(",["T_VARIABLE","$selectionIds",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_EMPTY","empty",139],"(",["T_VARIABLE","$selectionIds",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getSelect",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","where",140],"(",["T_CONSTANT_ENCAPSED_STRING","'selection.selection_id IN (?)'",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$selectionIds",140],")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Set position order\n     *\n     * @return $this\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","setPositionOrder",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getSelect",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","order",152],"(",["T_CONSTANT_ENCAPSED_STRING","'selection.position asc'",152],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","order",152],"(",["T_CONSTANT_ENCAPSED_STRING","'selection.selection_id asc'",152],")",";",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Add filtering of product then havent enoght stock\n     *\n     * @return $this\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","addQuantityFilter",161],"(",")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getSelect",163],"(",")",["T_WHITESPACE","\n            ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","joinInner",164],"(",["T_WHITESPACE","\n                ",164],"[",["T_CONSTANT_ENCAPSED_STRING","'stock'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getTable",165],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_status'",165],")","]",",",["T_WHITESPACE","\n                ",165],["T_CONSTANT_ENCAPSED_STRING","'selection.product_id = stock.product_id'",166],",",["T_WHITESPACE","\n                ",166],"[","]",["T_WHITESPACE","\n            ",167],")",["T_WHITESPACE","\n            ",168],["T_OBJECT_OPERATOR","->",169],["T_STRING","where",169],"(",["T_WHITESPACE","\n                ",169],["T_CONSTANT_ENCAPSED_STRING","'(selection.selection_can_change_qty or selection.selection_qty <= stock.qty) and stock.stock_status'",170],["T_WHITESPACE","\n            ",170],")",";",["T_WHITESPACE","\n        ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * @inheritDoc\n     *\/",175],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","getNewEmptyItem",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","null",180],["T_WHITESPACE"," ",180],["T_IS_IDENTICAL","===",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","itemPrototype",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","itemPrototype",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","parent",181],["T_DOUBLE_COLON","::",181],["T_STRING","getNewEmptyItem",181],"(",")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n        ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_CLONE","clone",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","itemPrototype",183],";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Add filter by price\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param bool $searchMin\n     * @param bool $useRegularPrice\n     *\n     * @return $this\n     *\/",186],["T_WHITESPACE","\n    ",194],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","addPriceFilter",195],"(",["T_VARIABLE","$product",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$searchMin",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$useRegularPrice",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","false",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$product",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getPriceType",197],"(",")",["T_WHITESPACE"," ",197],["T_IS_EQUAL","==",197],["T_WHITESPACE"," ",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Magento",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Bundle",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Model",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Product",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Price",197],["T_DOUBLE_COLON","::",197],["T_STRING","PRICE_TYPE_DYNAMIC",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","addPriceData",198],"(",")",";",["T_WHITESPACE","\n            ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$useRegularPrice",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$minimalPriceExpression",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'price'",200],";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE"," ",201],["T_ELSE","else",201],["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getCatalogRuleProcessor",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","addPriceData",202],"(",["T_VARIABLE","$this",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'selection.product_id'",202],")",";",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$minimalPriceExpression",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'LEAST(minimal_price, IFNULL(catalog_rule_price, minimal_price))'",203],";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$orderByValue",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_NEW","new",205],["T_WHITESPACE"," ",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Zend_Db_Expr",205],"(",["T_WHITESPACE","\n                ",205],["T_CONSTANT_ENCAPSED_STRING","'('",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE","\n                ",206],["T_VARIABLE","$minimalPriceExpression",207],["T_WHITESPACE"," ",207],".",["T_WHITESPACE","\n                ",207],["T_CONSTANT_ENCAPSED_STRING","' * selection.selection_qty'",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE","\n                ",208],["T_CONSTANT_ENCAPSED_STRING","')'",209],["T_WHITESPACE","\n            ",209],")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE"," ",211],["T_ELSE","else",211],["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$connection",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getConnection",212],"(",")",";",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$priceType",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$connection",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getIfNullSql",213],"(",["T_WHITESPACE","\n                ",213],["T_CONSTANT_ENCAPSED_STRING","'price.selection_price_type'",214],",",["T_WHITESPACE","\n                ",214],["T_CONSTANT_ENCAPSED_STRING","'selection.selection_price_type'",215],["T_WHITESPACE","\n            ",215],")",";",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$priceValue",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$connection",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getIfNullSql",217],"(",["T_WHITESPACE","\n                ",217],["T_CONSTANT_ENCAPSED_STRING","'price.selection_price_value'",218],",",["T_WHITESPACE","\n                ",218],["T_CONSTANT_ENCAPSED_STRING","'selection.selection_price_value'",219],["T_WHITESPACE","\n            ",219],")",";",["T_WHITESPACE","\n            ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(","!",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","websiteScopePriceJoined",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n                ",221],["T_VARIABLE","$websiteId",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_storeManager",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getStore",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","getWebsiteId",222],"(",")",";",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getSelect",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","joinLeft",223],"(",["T_WHITESPACE","\n                    ",223],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getTable",224],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_bundle_selection_price'",224],")","]",",",["T_WHITESPACE","\n                    ",224],["T_CONSTANT_ENCAPSED_STRING","'selection.selection_id = price.selection_id AND price.website_id = '",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_INT_CAST","(int)",225],["T_VARIABLE","$websiteId",225],",",["T_WHITESPACE","\n                    ",225],"[","]",["T_WHITESPACE","\n                ",226],")",";",["T_WHITESPACE","\n            ",227],"}",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$price",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$connection",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getCheckSql",229],"(",["T_WHITESPACE","\n                ",229],["T_VARIABLE","$priceType",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","' = 1'",230],",",["T_WHITESPACE","\n                ",230],["T_DOUBLE_CAST","(float)",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$product",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getPrice",231],"(",")",["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","' * '",231],".",["T_WHITESPACE"," ",231],["T_VARIABLE","$priceValue",231],["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","' \/ 100'",231],",",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$priceValue",232],["T_WHITESPACE","\n            ",232],")",";",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$orderByValue",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_NEW","new",234],["T_WHITESPACE"," ",234],["T_NS_SEPARATOR","\\",234],["T_STRING","Zend_Db_Expr",234],"(",["T_CONSTANT_ENCAPSED_STRING","'('",234],".",["T_WHITESPACE"," ",234],["T_VARIABLE","$price",234],".",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","' * '",234],".",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'selection.selection_qty)'",234],")",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n\n        ",235],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getSelect",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","reset",237],"(",["T_STRING","Select",237],["T_DOUBLE_COLON","::",237],["T_STRING","ORDER",237],")",";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getSelect",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","order",238],"(",["T_VARIABLE","$orderByValue",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$searchMin",238],["T_WHITESPACE"," ",238],"?",["T_WHITESPACE"," ",238],["T_STRING","Select",238],["T_DOUBLE_COLON","::",238],["T_STRING","SQL_ASC",238],["T_WHITESPACE"," ",238],":",["T_WHITESPACE"," ",238],["T_STRING","Select",238],["T_DOUBLE_COLON","::",238],["T_STRING","SQL_DESC",238],")",")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getSelect",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","limit",239],"(",["T_LNUMBER","1",239],")",";",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\CatalogRule\\Model\\ResourceModel\\Product\\CollectionProcessor\n     * @deprecated\n     *\/",243],["T_WHITESPACE","\n    ",246],["T_PRIVATE","private",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","getCatalogRuleProcessor",247],"(",")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_STRING","null",249],["T_WHITESPACE"," ",249],["T_IS_IDENTICAL","===",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","catalogRuleProcessor",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","catalogRuleProcessor",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_NS_SEPARATOR","\\",250],["T_STRING","Magento",250],["T_NS_SEPARATOR","\\",250],["T_STRING","Framework",250],["T_NS_SEPARATOR","\\",250],["T_STRING","App",250],["T_NS_SEPARATOR","\\",250],["T_STRING","ObjectManager",250],["T_DOUBLE_COLON","::",250],["T_STRING","getInstance",250],"(",")",["T_WHITESPACE","\n                ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","get",251],"(",["T_NS_SEPARATOR","\\",251],["T_STRING","Magento",251],["T_NS_SEPARATOR","\\",251],["T_STRING","CatalogRule",251],["T_NS_SEPARATOR","\\",251],["T_STRING","Model",251],["T_NS_SEPARATOR","\\",251],["T_STRING","ResourceModel",251],["T_NS_SEPARATOR","\\",251],["T_STRING","Product",251],["T_NS_SEPARATOR","\\",251],["T_STRING","CollectionProcessor",251],["T_DOUBLE_COLON","::",251],["T_CLASS","class",251],")",";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n\n        ",252],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","catalogRuleProcessor",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n",255],"}",["T_WHITESPACE","\n",256]]
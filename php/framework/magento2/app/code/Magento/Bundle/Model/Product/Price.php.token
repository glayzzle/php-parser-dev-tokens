[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Bundle",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","GroupManagementInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Pricing",10],["T_NS_SEPARATOR","\\",10],["T_STRING","PriceCurrencyInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Bundle Price Model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Price",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Catalog",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Product",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Type",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Price",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Fixed bundle price type\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_CONST","const",21],["T_WHITESPACE"," ",21],["T_STRING","PRICE_TYPE_FIXED",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_LNUMBER","1",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Dynamic bundle price type\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","PRICE_TYPE_DYNAMIC",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_LNUMBER","0",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Flag which indicates - is min\/max prices have been calculated by index\n     *\n     * @var bool\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_isPricesCalculatedByIndex",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Catalog data\n     *\n     * @var \\Magento\\Catalog\\Helper\\Data\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_catalogData",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","null",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Serializer interface instance.\n     *\n     * @var \\Magento\\Framework\\Serialize\\Serializer\\Json\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PRIVATE","private",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$serializer",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Price constructor.\n     *\n     * @param \\Magento\\CatalogRule\\Model\\ResourceModel\\RuleFactory $ruleFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param PriceCurrencyInterface $priceCurrency\n     * @param GroupManagementInterface $groupManagement\n     * @param \\Magento\\Catalog\\Api\\Data\\ProductTierPriceInterfaceFactory $tierPriceFactory\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $config\n     * @param \\Magento\\Catalog\\Helper\\Data $catalogData\n     * @param \\Magento\\Framework\\Serialize\\Serializer\\Json|null $serializer\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",49],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","__construct",65],"(",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","CatalogRule",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Model",66],["T_NS_SEPARATOR","\\",66],["T_STRING","ResourceModel",66],["T_NS_SEPARATOR","\\",66],["T_STRING","RuleFactory",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$ruleFactory",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Store",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","StoreManagerInterface",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$storeManager",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Framework",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Stdlib",68],["T_NS_SEPARATOR","\\",68],["T_STRING","DateTime",68],["T_NS_SEPARATOR","\\",68],["T_STRING","TimezoneInterface",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$localeDate",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Customer",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Model",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Session",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$customerSession",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Event",70],["T_NS_SEPARATOR","\\",70],["T_STRING","ManagerInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$eventManager",70],",",["T_WHITESPACE","\n        ",70],["T_STRING","PriceCurrencyInterface",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$priceCurrency",71],",",["T_WHITESPACE","\n        ",71],["T_STRING","GroupManagementInterface",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$groupManagement",72],",",["T_WHITESPACE","\n        ",72],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Catalog",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Api",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Data",73],["T_NS_SEPARATOR","\\",73],["T_STRING","ProductTierPriceInterfaceFactory",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$tierPriceFactory",73],",",["T_WHITESPACE","\n        ",73],["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Framework",74],["T_NS_SEPARATOR","\\",74],["T_STRING","App",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Config",74],["T_NS_SEPARATOR","\\",74],["T_STRING","ScopeConfigInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$config",74],",",["T_WHITESPACE","\n        ",74],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Catalog",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Helper",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Data",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$catalogData",75],",",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Framework",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Serialize",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Serializer",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Json",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$serializer",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","null",76],["T_WHITESPACE","\n    ",76],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_catalogData",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$catalogData",78],";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","serializer",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$serializer",79],["T_WHITESPACE"," ",79],"?",":",["T_WHITESPACE"," ",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Framework",79],["T_NS_SEPARATOR","\\",79],["T_STRING","App",79],["T_NS_SEPARATOR","\\",79],["T_STRING","ObjectManager",79],["T_DOUBLE_COLON","::",79],["T_STRING","getInstance",79],"(",")",["T_WHITESPACE","\n            ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","get",80],"(",["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Framework",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Serialize",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Serializer",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Json",80],["T_DOUBLE_COLON","::",80],["T_CLASS","class",80],")",";",["T_WHITESPACE","\n        ",80],["T_STRING","parent",81],["T_DOUBLE_COLON","::",81],["T_STRING","__construct",81],"(",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$ruleFactory",82],",",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$storeManager",83],",",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$localeDate",84],",",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$customerSession",85],",",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$eventManager",86],",",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$priceCurrency",87],",",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$groupManagement",88],",",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$tierPriceFactory",89],",",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$config",90],["T_WHITESPACE","\n        ",90],")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Is min\/max prices have been calculated by index\n     *\n     * @return bool\n     * @SuppressWarnings(PHPMD.BooleanGetMethodName)\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","getIsPricesCalculatedByIndex",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_isPricesCalculatedByIndex",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Return product base price\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return float\n     *\/",105],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getPrice",111],"(",["T_VARIABLE","$product",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$product",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getPriceType",113],"(",")",["T_WHITESPACE"," ",113],["T_IS_EQUAL","==",113],["T_WHITESPACE"," ",113],["T_STRING","self",113],["T_DOUBLE_COLON","::",113],["T_STRING","PRICE_TYPE_FIXED",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$product",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getData",114],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",114],")",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE"," ",115],["T_ELSE","else",115],["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_LNUMBER","0",116],";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Get Total price  for Bundle items\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param null|float $qty\n     * @return float\n     *\/",120],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","getTotalBundleItemsPrice",127],"(",["T_VARIABLE","$product",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$qty",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","null",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$price",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_DNUMBER","0.0",129],";",["T_WHITESPACE","\n        ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$product",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","hasCustomOptions",130],"(",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$selectionIds",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getBundleSelectionIds",131],"(",["T_VARIABLE","$product",131],")",";",["T_WHITESPACE","\n            ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$selectionIds",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_VARIABLE","$selections",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$product",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getTypeInstance",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getSelectionsByIds",133],"(",["T_VARIABLE","$selectionIds",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$product",133],")",";",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$selections",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","addTierPriceData",134],"(",")",";",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_eventManager",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","dispatch",135],"(",["T_WHITESPACE","\n                    ",135],["T_CONSTANT_ENCAPSED_STRING","'prepare_catalog_product_collection_prices'",136],",",["T_WHITESPACE","\n                    ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$selections",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'store_id'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$product",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getStoreId",137],"(",")","]",["T_WHITESPACE","\n                ",137],")",";",["T_WHITESPACE","\n                ",138],["T_FOREACH","foreach",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$selections",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getItems",139],"(",")",["T_WHITESPACE"," ",139],["T_AS","as",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$selection",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                    ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$selection",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","isSalable",140],"(",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                        ",140],["T_VARIABLE","$selectionQty",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$product",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getCustomOption",141],"(",["T_CONSTANT_ENCAPSED_STRING","'selection_qty_'",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$selection",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getSelectionId",141],"(",")",")",";",["T_WHITESPACE","\n                        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$selectionQty",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                            ",142],["T_VARIABLE","$price",143],["T_WHITESPACE"," ",143],["T_PLUS_EQUAL","+=",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getSelectionFinalTotalPrice",143],"(",["T_WHITESPACE","\n                                ",143],["T_VARIABLE","$product",144],",",["T_WHITESPACE","\n                                ",144],["T_VARIABLE","$selection",145],",",["T_WHITESPACE","\n                                ",145],["T_VARIABLE","$qty",146],",",["T_WHITESPACE","\n                                ",146],["T_VARIABLE","$selectionQty",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getValue",147],"(",")",["T_WHITESPACE","\n                            ",147],")",";",["T_WHITESPACE","\n                        ",148],"}",["T_WHITESPACE","\n                    ",149],"}",["T_WHITESPACE","\n                ",150],"}",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$price",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Retrieve array of bundle selection IDs\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",157],["T_WHITESPACE","\n    ",162],["T_PROTECTED","protected",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","getBundleSelectionIds",163],"(",["T_NS_SEPARATOR","\\",163],["T_STRING","Magento",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Catalog",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Model",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Product",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$product",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$customOption",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$product",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getCustomOption",165],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle_selection_ids'",165],")",";",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$customOption",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$selectionIds",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","serializer",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","unserialize",167],"(",["T_VARIABLE","$customOption",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getValue",167],"(",")",")",";",["T_WHITESPACE","\n            ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(","!",["T_EMPTY","empty",168],"(",["T_VARIABLE","$selectionIds",168],")",["T_WHITESPACE"," ",168],["T_BOOLEAN_AND","&&",168],["T_WHITESPACE"," ",168],["T_STRING","is_array",168],"(",["T_VARIABLE","$selectionIds",168],")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$selectionIds",169],";",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n        ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],"[","]",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Get product final price\n     *\n     * @param   float                     $qty\n     * @param   \\Magento\\Catalog\\Model\\Product $product\n     * @return  float\n     *\/",175],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","getFinalPrice",182],"(",["T_VARIABLE","$qty",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$product",182],")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$qty",184],["T_WHITESPACE"," ",184],["T_IS_IDENTICAL","===",184],["T_WHITESPACE"," ",184],["T_STRING","null",184],["T_WHITESPACE"," ",184],["T_BOOLEAN_AND","&&",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$product",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getCalculatedFinalPrice",184],"(",")",["T_WHITESPACE"," ",184],["T_IS_NOT_IDENTICAL","!==",184],["T_WHITESPACE"," ",184],["T_STRING","null",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$product",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getCalculatedFinalPrice",185],"(",")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_VARIABLE","$finalPrice",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getBasePrice",188],"(",["T_VARIABLE","$product",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$qty",188],")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$product",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","setFinalPrice",189],"(",["T_VARIABLE","$finalPrice",189],")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_eventManager",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","dispatch",190],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_get_final_price'",190],",",["T_WHITESPACE"," ",190],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$product",190],",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'qty'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$qty",190],"]",")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$finalPrice",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$product",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getData",191],"(",["T_CONSTANT_ENCAPSED_STRING","'final_price'",191],")",";",["T_WHITESPACE","\n\n        ",191],["T_VARIABLE","$finalPrice",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_applyOptionsPrice",193],"(",["T_VARIABLE","$product",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$qty",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$finalPrice",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$finalPrice",194],["T_WHITESPACE"," ",194],["T_PLUS_EQUAL","+=",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getTotalBundleItemsPrice",194],"(",["T_VARIABLE","$product",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$qty",194],")",";",["T_WHITESPACE","\n\n        ",194],["T_VARIABLE","$finalPrice",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","max",196],"(",["T_LNUMBER","0",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$finalPrice",196],")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$product",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","setFinalPrice",197],"(",["T_VARIABLE","$finalPrice",197],")",";",["T_WHITESPACE","\n        ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$finalPrice",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Returns final price of a child product\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param float                      $productQty\n     * @param \\Magento\\Catalog\\Model\\Product $childProduct\n     * @param float                      $childProductQty\n     * @return float\n     *\/",201],["T_WHITESPACE","\n    ",209],["T_PUBLIC","public",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","getChildFinalPrice",210],"(",["T_VARIABLE","$product",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$productQty",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$childProduct",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$childProductQty",210],")",["T_WHITESPACE","\n    ",210],"{",["T_WHITESPACE","\n        ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getSelectionFinalTotalPrice",212],"(",["T_VARIABLE","$product",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$childProduct",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$productQty",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$childProductQty",212],",",["T_WHITESPACE"," ",212],["T_STRING","false",212],")",";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * Retrieve Price considering tier price\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @param  string|null                $which\n     * @param  bool|null                  $includeTax\n     * @param  bool                       $takeTierPrice\n     * @return float|array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",215],["T_WHITESPACE","\n    ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","getTotalPrices",227],"(",["T_VARIABLE","$product",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$which",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","null",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$includeTax",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","null",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$takeTierPrice",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","true",227],")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_COMMENT","\/\/ check calculated price index\n",229],["T_WHITESPACE","        ",230],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$product",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getData",230],"(",["T_CONSTANT_ENCAPSED_STRING","'min_price'",230],")",["T_WHITESPACE"," ",230],["T_BOOLEAN_AND","&&",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$product",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getData",230],"(",["T_CONSTANT_ENCAPSED_STRING","'max_price'",230],")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$minimalPrice",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_catalogData",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getTaxPrice",231],"(",["T_VARIABLE","$product",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$product",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getData",231],"(",["T_CONSTANT_ENCAPSED_STRING","'min_price'",231],")",",",["T_WHITESPACE"," ",231],["T_VARIABLE","$includeTax",231],")",";",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$maximalPrice",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_catalogData",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getTaxPrice",232],"(",["T_VARIABLE","$product",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$product",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getData",232],"(",["T_CONSTANT_ENCAPSED_STRING","'max_price'",232],")",",",["T_WHITESPACE"," ",232],["T_VARIABLE","$includeTax",232],")",";",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_isPricesCalculatedByIndex",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","true",233],";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE"," ",234],["T_ELSE","else",234],["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_DOC_COMMENT","\/**\n             * Check if product price is fixed\n             *\/",235],["T_WHITESPACE","\n            ",237],["T_VARIABLE","$finalPrice",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$product",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getFinalPrice",238],"(",")",";",["T_WHITESPACE","\n            ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$product",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getPriceType",239],"(",")",["T_WHITESPACE"," ",239],["T_IS_EQUAL","==",239],["T_WHITESPACE"," ",239],["T_STRING","self",239],["T_DOUBLE_COLON","::",239],["T_STRING","PRICE_TYPE_FIXED",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n                ",239],["T_VARIABLE","$minimalPrice",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$maximalPrice",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_catalogData",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getTaxPrice",240],"(",["T_VARIABLE","$product",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$finalPrice",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$includeTax",240],")",";",["T_WHITESPACE","\n            ",240],"}",["T_WHITESPACE"," ",241],["T_ELSE","else",241],["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_COMMENT","\/\/ PRICE_TYPE_DYNAMIC\n",242],["T_WHITESPACE","                ",243],["T_VARIABLE","$minimalPrice",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$maximalPrice",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_LNUMBER","0",243],";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n\n            ",244],["T_VARIABLE","$options",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getOptions",246],"(",["T_VARIABLE","$product",246],")",";",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$minPriceFounded",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","false",247],";",["T_WHITESPACE","\n\n            ",247],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$options",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                ",249],["T_FOREACH","foreach",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$options",250],["T_WHITESPACE"," ",250],["T_AS","as",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$option",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                    ",250],["T_COMMENT","\/* @var $option \\Magento\\Bundle\\Model\\Option *\/",251],["T_WHITESPACE","\n                    ",251],["T_VARIABLE","$selections",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$option",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getSelections",252],"(",")",";",["T_WHITESPACE","\n                    ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$selections",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                        ",253],["T_VARIABLE","$selectionMinimalPrices",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],"[","]",";",["T_WHITESPACE","\n                        ",254],["T_VARIABLE","$selectionMaximalPrices",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],"[","]",";",["T_WHITESPACE","\n\n                        ",255],["T_FOREACH","foreach",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$option",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getSelections",257],"(",")",["T_WHITESPACE"," ",257],["T_AS","as",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$selection",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                            ",257],["T_COMMENT","\/* @var $selection \\Magento\\Bundle\\Model\\Selection *\/",258],["T_WHITESPACE","\n                            ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(","!",["T_VARIABLE","$selection",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","isSalable",259],"(",")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                                ",259],["T_DOC_COMMENT","\/**\n                                 * @todo CatalogInventory Show out of stock Products\n                                 *\/",260],["T_WHITESPACE","\n                                ",262],["T_CONTINUE","continue",263],";",["T_WHITESPACE","\n                            ",263],"}",["T_WHITESPACE","\n\n                            ",264],["T_VARIABLE","$qty",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$selection",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getSelectionQty",266],"(",")",";",["T_WHITESPACE","\n\n                            ",266],["T_VARIABLE","$item",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$product",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getPriceType",268],"(",")",["T_WHITESPACE"," ",268],["T_IS_EQUAL","==",268],["T_WHITESPACE"," ",268],["T_STRING","self",268],["T_DOUBLE_COLON","::",268],["T_STRING","PRICE_TYPE_FIXED",268],["T_WHITESPACE"," ",268],"?",["T_WHITESPACE"," ",268],["T_VARIABLE","$product",268],["T_WHITESPACE"," ",268],":",["T_WHITESPACE"," ",268],["T_VARIABLE","$selection",268],";",["T_WHITESPACE","\n\n                            ",268],["T_VARIABLE","$selectionMinimalPrices",270],"[","]",["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_catalogData",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getTaxPrice",270],"(",["T_WHITESPACE","\n                                ",270],["T_VARIABLE","$item",271],",",["T_WHITESPACE","\n                                ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getSelectionFinalTotalPrice",272],"(",["T_WHITESPACE","\n                                    ",272],["T_VARIABLE","$product",273],",",["T_WHITESPACE","\n                                    ",273],["T_VARIABLE","$selection",274],",",["T_WHITESPACE","\n                                    ",274],["T_LNUMBER","1",275],",",["T_WHITESPACE","\n                                    ",275],["T_VARIABLE","$qty",276],",",["T_WHITESPACE","\n                                    ",276],["T_STRING","true",277],",",["T_WHITESPACE","\n                                    ",277],["T_VARIABLE","$takeTierPrice",278],["T_WHITESPACE","\n                                ",278],")",",",["T_WHITESPACE","\n                                ",279],["T_VARIABLE","$includeTax",280],["T_WHITESPACE","\n                            ",280],")",";",["T_WHITESPACE","\n                            ",281],["T_VARIABLE","$selectionMaximalPrices",282],"[","]",["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_catalogData",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getTaxPrice",282],"(",["T_WHITESPACE","\n                                ",282],["T_VARIABLE","$item",283],",",["T_WHITESPACE","\n                                ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getSelectionFinalTotalPrice",284],"(",["T_WHITESPACE","\n                                    ",284],["T_VARIABLE","$product",285],",",["T_WHITESPACE","\n                                    ",285],["T_VARIABLE","$selection",286],",",["T_WHITESPACE","\n                                    ",286],["T_LNUMBER","1",287],",",["T_WHITESPACE","\n                                    ",287],["T_STRING","null",288],",",["T_WHITESPACE","\n                                    ",288],["T_STRING","true",289],",",["T_WHITESPACE","\n                                    ",289],["T_VARIABLE","$takeTierPrice",290],["T_WHITESPACE","\n                                ",290],")",",",["T_WHITESPACE","\n                                ",291],["T_VARIABLE","$includeTax",292],["T_WHITESPACE","\n                            ",292],")",";",["T_WHITESPACE","\n                        ",293],"}",["T_WHITESPACE","\n\n                        ",294],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_STRING","count",296],"(",["T_VARIABLE","$selectionMinimalPrices",296],")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                            ",296],["T_VARIABLE","$selMinPrice",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","min",297],"(",["T_VARIABLE","$selectionMinimalPrices",297],")",";",["T_WHITESPACE","\n                            ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$option",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getRequired",298],"(",")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                                ",298],["T_VARIABLE","$minimalPrice",299],["T_WHITESPACE"," ",299],["T_PLUS_EQUAL","+=",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$selMinPrice",299],";",["T_WHITESPACE","\n                                ",299],["T_VARIABLE","$minPriceFounded",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","true",300],";",["T_WHITESPACE","\n                            ",300],"}",["T_WHITESPACE"," ",301],["T_ELSEIF","elseif",301],["T_WHITESPACE"," ",301],"(",["T_STRING","true",301],["T_WHITESPACE"," ",301],["T_IS_NOT_IDENTICAL","!==",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$minPriceFounded",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                                ",301],["T_VARIABLE","$selMinPrice",302],["T_WHITESPACE"," ",302],["T_PLUS_EQUAL","+=",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$minimalPrice",302],";",["T_WHITESPACE","\n                                ",302],["T_VARIABLE","$minPriceFounded",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","false",303],["T_WHITESPACE"," ",303],["T_IS_IDENTICAL","===",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$minPriceFounded",303],["T_WHITESPACE"," ",303],"?",["T_WHITESPACE"," ",303],["T_VARIABLE","$selMinPrice",303],["T_WHITESPACE"," ",303],":",["T_WHITESPACE"," ",303],["T_STRING","min",303],"(",["T_WHITESPACE","\n                                    ",303],["T_VARIABLE","$minPriceFounded",304],",",["T_WHITESPACE","\n                                    ",304],["T_VARIABLE","$selMinPrice",305],["T_WHITESPACE","\n                                ",305],")",";",["T_WHITESPACE","\n                            ",306],"}",["T_WHITESPACE","\n\n                            ",307],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$option",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","isMultiSelection",309],"(",")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                                ",309],["T_VARIABLE","$maximalPrice",310],["T_WHITESPACE"," ",310],["T_PLUS_EQUAL","+=",310],["T_WHITESPACE"," ",310],["T_STRING","array_sum",310],"(",["T_VARIABLE","$selectionMaximalPrices",310],")",";",["T_WHITESPACE","\n                            ",310],"}",["T_WHITESPACE"," ",311],["T_ELSE","else",311],["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                                ",311],["T_VARIABLE","$maximalPrice",312],["T_WHITESPACE"," ",312],["T_PLUS_EQUAL","+=",312],["T_WHITESPACE"," ",312],["T_STRING","max",312],"(",["T_VARIABLE","$selectionMaximalPrices",312],")",";",["T_WHITESPACE","\n                            ",312],"}",["T_WHITESPACE","\n                        ",313],"}",["T_WHITESPACE","\n                    ",314],"}",["T_WHITESPACE","\n                ",315],"}",["T_WHITESPACE","\n            ",316],"}",["T_WHITESPACE","\n            ",317],["T_COMMENT","\/\/ condition is TRUE when all product options are NOT required\n",318],["T_WHITESPACE","            ",319],["T_IF","if",319],["T_WHITESPACE"," ",319],"(","!",["T_STRING","is_bool",319],"(",["T_VARIABLE","$minPriceFounded",319],")",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                ",319],["T_VARIABLE","$minimalPrice",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$minPriceFounded",320],";",["T_WHITESPACE","\n            ",320],"}",["T_WHITESPACE","\n\n            ",321],["T_VARIABLE","$customOptions",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$product",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getOptions",323],"(",")",";",["T_WHITESPACE","\n            ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$product",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getPriceType",324],"(",")",["T_WHITESPACE"," ",324],["T_IS_EQUAL","==",324],["T_WHITESPACE"," ",324],["T_STRING","self",324],["T_DOUBLE_COLON","::",324],["T_STRING","PRICE_TYPE_FIXED",324],["T_WHITESPACE"," ",324],["T_BOOLEAN_AND","&&",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$customOptions",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                ",324],["T_FOREACH","foreach",325],["T_WHITESPACE"," ",325],"(",["T_VARIABLE","$customOptions",325],["T_WHITESPACE"," ",325],["T_AS","as",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$customOption",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                    ",325],["T_COMMENT","\/* @var $customOption \\Magento\\Catalog\\Model\\Product\\Option *\/",326],["T_WHITESPACE","\n                    ",326],["T_VARIABLE","$values",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$customOption",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getValues",327],"(",")",";",["T_WHITESPACE","\n                    ",327],["T_IF","if",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$values",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n                        ",328],["T_VARIABLE","$prices",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],"[","]",";",["T_WHITESPACE","\n                        ",329],["T_FOREACH","foreach",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$values",330],["T_WHITESPACE"," ",330],["T_AS","as",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$value",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n                            ",330],["T_COMMENT","\/* @var $value \\Magento\\Catalog\\Model\\Product\\Option\\Value *\/",331],["T_WHITESPACE","\n                            ",331],["T_VARIABLE","$valuePrice",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$value",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getPrice",332],"(",["T_STRING","true",332],")",";",["T_WHITESPACE","\n\n                            ",332],["T_VARIABLE","$prices",334],"[","]",["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$valuePrice",334],";",["T_WHITESPACE","\n                        ",334],"}",["T_WHITESPACE","\n                        ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(",["T_STRING","count",336],"(",["T_VARIABLE","$prices",336],")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n                            ",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(",["T_VARIABLE","$customOption",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getIsRequire",337],"(",")",")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n                                ",337],["T_VARIABLE","$minimalPrice",338],["T_WHITESPACE"," ",338],["T_PLUS_EQUAL","+=",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","_catalogData",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getTaxPrice",338],"(",["T_VARIABLE","$product",338],",",["T_WHITESPACE"," ",338],["T_STRING","min",338],"(",["T_VARIABLE","$prices",338],")",",",["T_WHITESPACE"," ",338],["T_VARIABLE","$includeTax",338],")",";",["T_WHITESPACE","\n                            ",338],"}",["T_WHITESPACE","\n\n                            ",339],["T_VARIABLE","$multiTypes",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],"[",["T_WHITESPACE","\n                                ",341],["T_NS_SEPARATOR","\\",342],["T_STRING","Magento",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Catalog",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Model",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Product",342],["T_NS_SEPARATOR","\\",342],["T_STRING","Option",342],["T_DOUBLE_COLON","::",342],["T_STRING","OPTION_TYPE_CHECKBOX",342],",",["T_WHITESPACE","\n                                ",342],["T_NS_SEPARATOR","\\",343],["T_STRING","Magento",343],["T_NS_SEPARATOR","\\",343],["T_STRING","Catalog",343],["T_NS_SEPARATOR","\\",343],["T_STRING","Model",343],["T_NS_SEPARATOR","\\",343],["T_STRING","Product",343],["T_NS_SEPARATOR","\\",343],["T_STRING","Option",343],["T_DOUBLE_COLON","::",343],["T_STRING","OPTION_TYPE_MULTIPLE",343],",",["T_WHITESPACE","\n                            ",343],"]",";",["T_WHITESPACE","\n\n                            ",344],["T_IF","if",346],["T_WHITESPACE"," ",346],"(",["T_STRING","in_array",346],"(",["T_VARIABLE","$customOption",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getType",346],"(",")",",",["T_WHITESPACE"," ",346],["T_VARIABLE","$multiTypes",346],")",")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n                                ",346],["T_VARIABLE","$maximalValue",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_STRING","array_sum",347],"(",["T_VARIABLE","$prices",347],")",";",["T_WHITESPACE","\n                            ",347],"}",["T_WHITESPACE"," ",348],["T_ELSE","else",348],["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n                                ",348],["T_VARIABLE","$maximalValue",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","max",349],"(",["T_VARIABLE","$prices",349],")",";",["T_WHITESPACE","\n                            ",349],"}",["T_WHITESPACE","\n                            ",350],["T_VARIABLE","$maximalPrice",351],["T_WHITESPACE"," ",351],["T_PLUS_EQUAL","+=",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_catalogData",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getTaxPrice",351],"(",["T_VARIABLE","$product",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$maximalValue",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$includeTax",351],")",";",["T_WHITESPACE","\n                        ",351],"}",["T_WHITESPACE","\n                    ",352],"}",["T_WHITESPACE"," ",353],["T_ELSE","else",353],["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                        ",353],["T_VARIABLE","$valuePrice",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$customOption",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getPrice",354],"(",["T_STRING","true",354],")",";",["T_WHITESPACE","\n\n                        ",354],["T_IF","if",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$customOption",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getIsRequire",356],"(",")",")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n                            ",356],["T_VARIABLE","$minimalPrice",357],["T_WHITESPACE"," ",357],["T_PLUS_EQUAL","+=",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_catalogData",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getTaxPrice",357],"(",["T_VARIABLE","$product",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$valuePrice",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$includeTax",357],")",";",["T_WHITESPACE","\n                        ",357],"}",["T_WHITESPACE","\n                        ",358],["T_VARIABLE","$maximalPrice",359],["T_WHITESPACE"," ",359],["T_PLUS_EQUAL","+=",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","_catalogData",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getTaxPrice",359],"(",["T_VARIABLE","$product",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$valuePrice",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$includeTax",359],")",";",["T_WHITESPACE","\n                    ",359],"}",["T_WHITESPACE","\n                ",360],"}",["T_WHITESPACE","\n            ",361],"}",["T_WHITESPACE","\n            ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_isPricesCalculatedByIndex",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_STRING","false",363],";",["T_WHITESPACE","\n        ",363],"}",["T_WHITESPACE","\n\n        ",364],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$which",366],["T_WHITESPACE"," ",366],["T_IS_EQUAL","==",366],["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'max'",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$maximalPrice",367],";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE"," ",368],["T_ELSEIF","elseif",368],["T_WHITESPACE"," ",368],"(",["T_VARIABLE","$which",368],["T_WHITESPACE"," ",368],["T_IS_EQUAL","==",368],["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'min'",368],")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$minimalPrice",369],";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n\n        ",370],["T_RETURN","return",372],["T_WHITESPACE"," ",372],"[",["T_VARIABLE","$minimalPrice",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$maximalPrice",372],"]",";",["T_WHITESPACE","\n    ",372],"}",["T_WHITESPACE","\n\n    ",373],["T_DOC_COMMENT","\/**\n     * Get Options with attached Selections collection\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Bundle\\Model\\ResourceModel\\Option\\Collection\n     *\/",375],["T_WHITESPACE","\n    ",380],["T_PUBLIC","public",381],["T_WHITESPACE"," ",381],["T_FUNCTION","function",381],["T_WHITESPACE"," ",381],["T_STRING","getOptions",381],"(",["T_VARIABLE","$product",381],")",["T_WHITESPACE","\n    ",381],"{",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$product",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getTypeInstance",383],"(",")",["T_OBJECT_OPERATOR","->",383],["T_STRING","setStoreFilter",383],"(",["T_VARIABLE","$product",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getStoreId",383],"(",")",",",["T_WHITESPACE"," ",383],["T_VARIABLE","$product",383],")",";",["T_WHITESPACE","\n\n        ",383],["T_VARIABLE","$optionCollection",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$product",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getTypeInstance",385],"(",")",["T_OBJECT_OPERATOR","->",385],["T_STRING","getOptionsCollection",385],"(",["T_VARIABLE","$product",385],")",";",["T_WHITESPACE","\n\n        ",385],["T_VARIABLE","$selectionCollection",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$product",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getTypeInstance",387],"(",")",["T_OBJECT_OPERATOR","->",387],["T_STRING","getSelectionsCollection",387],"(",["T_WHITESPACE","\n            ",387],["T_VARIABLE","$product",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getTypeInstance",388],"(",")",["T_OBJECT_OPERATOR","->",388],["T_STRING","getOptionsIds",388],"(",["T_VARIABLE","$product",388],")",",",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$product",389],["T_WHITESPACE","\n        ",389],")",";",["T_WHITESPACE","\n\n        ",390],["T_RETURN","return",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$optionCollection",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","appendSelections",392],"(",["T_VARIABLE","$selectionCollection",392],",",["T_WHITESPACE"," ",392],["T_STRING","false",392],",",["T_WHITESPACE"," ",392],["T_STRING","false",392],")",";",["T_WHITESPACE","\n    ",392],"}",["T_WHITESPACE","\n\n    ",393],["T_DOC_COMMENT","\/**\n     * Calculate price of selection\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $bundleProduct\n     * @param \\Magento\\Catalog\\Model\\Product $selectionProduct\n     * @param float|null                 $selectionQty\n     * @param null|bool                  $multiplyQty      Whether to multiply selection's price by its quantity\n     * @return float\n     *\n     * @see \\Magento\\Bundle\\Model\\Product\\Price::getSelectionFinalTotalPrice()\n     *\/",395],["T_WHITESPACE","\n    ",405],["T_PUBLIC","public",406],["T_WHITESPACE"," ",406],["T_FUNCTION","function",406],["T_WHITESPACE"," ",406],["T_STRING","getSelectionPrice",406],"(",["T_VARIABLE","$bundleProduct",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$selectionProduct",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$selectionQty",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_STRING","null",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$multiplyQty",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_STRING","true",406],")",["T_WHITESPACE","\n    ",406],"{",["T_WHITESPACE","\n        ",407],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","getSelectionFinalTotalPrice",408],"(",["T_VARIABLE","$bundleProduct",408],",",["T_WHITESPACE"," ",408],["T_VARIABLE","$selectionProduct",408],",",["T_WHITESPACE"," ",408],["T_LNUMBER","0",408],",",["T_WHITESPACE"," ",408],["T_VARIABLE","$selectionQty",408],",",["T_WHITESPACE"," ",408],["T_VARIABLE","$multiplyQty",408],")",";",["T_WHITESPACE","\n    ",408],"}",["T_WHITESPACE","\n\n    ",409],["T_DOC_COMMENT","\/**\n     * Calculate selection price for front view (with applied special of bundle)\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $bundleProduct\n     * @param \\Magento\\Catalog\\Model\\Product $selectionProduct\n     * @param float                    $qty\n     * @return float\n     *\/",411],["T_WHITESPACE","\n    ",418],["T_PUBLIC","public",419],["T_WHITESPACE"," ",419],["T_FUNCTION","function",419],["T_WHITESPACE"," ",419],["T_STRING","getSelectionPreFinalPrice",419],"(",["T_VARIABLE","$bundleProduct",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$selectionProduct",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$qty",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","null",419],")",["T_WHITESPACE","\n    ",419],"{",["T_WHITESPACE","\n        ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getSelectionPrice",421],"(",["T_VARIABLE","$bundleProduct",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$selectionProduct",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$qty",421],")",";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n\n    ",422],["T_DOC_COMMENT","\/**\n     * Calculate final price of selection\n     * with take into account tier price\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $bundleProduct\n     * @param  \\Magento\\Catalog\\Model\\Product $selectionProduct\n     * @param  float                    $bundleQty\n     * @param  float                    $selectionQty\n     * @param  bool                       $multiplyQty\n     * @param  bool                       $takeTierPrice\n     * @return float\n     *\/",424],["T_WHITESPACE","\n    ",435],["T_PUBLIC","public",436],["T_WHITESPACE"," ",436],["T_FUNCTION","function",436],["T_WHITESPACE"," ",436],["T_STRING","getSelectionFinalTotalPrice",436],"(",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$bundleProduct",437],",",["T_WHITESPACE","\n        ",437],["T_VARIABLE","$selectionProduct",438],",",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$bundleQty",439],",",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$selectionQty",440],",",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$multiplyQty",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","true",441],",",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$takeTierPrice",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_STRING","true",442],["T_WHITESPACE","\n    ",442],")",["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n        ",443],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_STRING","null",444],["T_WHITESPACE"," ",444],["T_IS_IDENTICAL","===",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$bundleQty",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$bundleQty",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_DNUMBER","1.",445],";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n        ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_VARIABLE","$selectionQty",447],["T_WHITESPACE"," ",447],["T_IS_IDENTICAL","===",447],["T_WHITESPACE"," ",447],["T_STRING","null",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n            ",447],["T_VARIABLE","$selectionQty",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$selectionProduct",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","getSelectionQty",448],"(",")",";",["T_WHITESPACE","\n        ",448],"}",["T_WHITESPACE","\n\n        ",449],["T_IF","if",451],["T_WHITESPACE"," ",451],"(",["T_VARIABLE","$bundleProduct",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getPriceType",451],"(",")",["T_WHITESPACE"," ",451],["T_IS_EQUAL","==",451],["T_WHITESPACE"," ",451],["T_STRING","self",451],["T_DOUBLE_COLON","::",451],["T_STRING","PRICE_TYPE_DYNAMIC",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n            ",451],["T_VARIABLE","$price",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_VARIABLE","$selectionProduct",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getFinalPrice",452],"(",["T_VARIABLE","$takeTierPrice",452],["T_WHITESPACE"," ",452],"?",["T_WHITESPACE"," ",452],["T_VARIABLE","$selectionQty",452],["T_WHITESPACE"," ",452],":",["T_WHITESPACE"," ",452],["T_LNUMBER","1",452],")",";",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE"," ",453],["T_ELSE","else",453],["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n            ",453],["T_IF","if",454],["T_WHITESPACE"," ",454],"(",["T_VARIABLE","$selectionProduct",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getSelectionPriceType",454],"(",")",")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n                ",454],["T_COMMENT","\/\/ percent\n",455],["T_WHITESPACE","                ",456],["T_VARIABLE","$product",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_CLONE","clone",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$bundleProduct",456],";",["T_WHITESPACE","\n                ",456],["T_VARIABLE","$product",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","setFinalPrice",457],"(",["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getPrice",457],"(",["T_VARIABLE","$product",457],")",")",";",["T_WHITESPACE","\n                ",457],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","_eventManager",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","dispatch",458],"(",["T_WHITESPACE","\n                    ",458],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_get_final_price'",459],",",["T_WHITESPACE","\n                    ",459],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$product",460],",",["T_WHITESPACE"," ",460],["T_CONSTANT_ENCAPSED_STRING","'qty'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$bundleQty",460],"]",["T_WHITESPACE","\n                ",460],")",";",["T_WHITESPACE","\n                ",461],["T_VARIABLE","$price",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$product",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getData",462],"(",["T_CONSTANT_ENCAPSED_STRING","'final_price'",462],")",["T_WHITESPACE"," ",462],"*",["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$selectionProduct",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getSelectionPriceValue",462],"(",")",["T_WHITESPACE"," ",462],"\/",["T_WHITESPACE"," ",462],["T_LNUMBER","100",462],")",";",["T_WHITESPACE","\n            ",462],"}",["T_WHITESPACE"," ",463],["T_ELSE","else",463],["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                ",463],["T_COMMENT","\/\/ fixed\n",464],["T_WHITESPACE","                ",465],["T_VARIABLE","$price",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$selectionProduct",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","getSelectionPriceValue",465],"(",")",";",["T_WHITESPACE","\n            ",465],"}",["T_WHITESPACE","\n        ",466],"}",["T_WHITESPACE","\n\n        ",467],["T_IF","if",469],["T_WHITESPACE"," ",469],"(",["T_VARIABLE","$multiplyQty",469],")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n            ",469],["T_VARIABLE","$price",470],["T_WHITESPACE"," ",470],["T_MUL_EQUAL","*=",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$selectionQty",470],";",["T_WHITESPACE","\n        ",470],"}",["T_WHITESPACE","\n\n        ",471],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_STRING","min",473],"(",["T_WHITESPACE","\n            ",473],["T_VARIABLE","$price",474],",",["T_WHITESPACE","\n            ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_applyTierPrice",475],"(",["T_VARIABLE","$bundleProduct",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$bundleQty",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$price",475],")",",",["T_WHITESPACE","\n            ",475],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_applySpecialPrice",476],"(",["T_VARIABLE","$bundleProduct",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$price",476],")",["T_WHITESPACE","\n        ",476],")",";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Apply tier price for bundle\n     *\n     * @param   \\Magento\\Catalog\\Model\\Product $product\n     * @param   float                    $qty\n     * @param   float                    $finalPrice\n     * @return  float\n     *\/",480],["T_WHITESPACE","\n    ",487],["T_PROTECTED","protected",488],["T_WHITESPACE"," ",488],["T_FUNCTION","function",488],["T_WHITESPACE"," ",488],["T_STRING","_applyTierPrice",488],"(",["T_VARIABLE","$product",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$qty",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$finalPrice",488],")",["T_WHITESPACE","\n    ",488],"{",["T_WHITESPACE","\n        ",489],["T_IF","if",490],["T_WHITESPACE"," ",490],"(",["T_VARIABLE","$qty",490],["T_WHITESPACE"," ",490],["T_IS_IDENTICAL","===",490],["T_WHITESPACE"," ",490],["T_STRING","null",490],")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n            ",490],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$finalPrice",491],";",["T_WHITESPACE","\n        ",491],"}",["T_WHITESPACE","\n\n        ",492],["T_VARIABLE","$tierPrice",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$product",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getTierPrice",494],"(",["T_VARIABLE","$qty",494],")",";",["T_WHITESPACE","\n\n        ",494],["T_IF","if",496],["T_WHITESPACE"," ",496],"(",["T_STRING","is_numeric",496],"(",["T_VARIABLE","$tierPrice",496],")",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n            ",496],["T_VARIABLE","$tierPrice",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$finalPrice",497],["T_WHITESPACE"," ",497],"-",["T_WHITESPACE"," ",497],["T_VARIABLE","$finalPrice",497],["T_WHITESPACE"," ",497],"*",["T_WHITESPACE"," ",497],"(",["T_VARIABLE","$tierPrice",497],["T_WHITESPACE"," ",497],"\/",["T_WHITESPACE"," ",497],["T_LNUMBER","100",497],")",";",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$finalPrice",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_STRING","min",498],"(",["T_VARIABLE","$finalPrice",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$tierPrice",498],")",";",["T_WHITESPACE","\n        ",498],"}",["T_WHITESPACE","\n\n        ",499],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$finalPrice",501],";",["T_WHITESPACE","\n    ",501],"}",["T_WHITESPACE","\n\n    ",502],["T_DOC_COMMENT","\/**\n     * Get product tier price by qty\n     *\n     * @param   float                    $qty\n     * @param   \\Magento\\Catalog\\Model\\Product $product\n     * @return  float|array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",504],["T_WHITESPACE","\n    ",512],["T_PUBLIC","public",513],["T_WHITESPACE"," ",513],["T_FUNCTION","function",513],["T_WHITESPACE"," ",513],["T_STRING","getTierPrice",513],"(",["T_VARIABLE","$qty",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$product",513],")",["T_WHITESPACE","\n    ",513],"{",["T_WHITESPACE","\n        ",514],["T_VARIABLE","$allCustomersGroupId",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_groupManagement",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","getAllCustomersGroup",515],"(",")",["T_OBJECT_OPERATOR","->",515],["T_STRING","getId",515],"(",")",";",["T_WHITESPACE","\n        ",515],["T_VARIABLE","$prices",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_VARIABLE","$product",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","getData",516],"(",["T_CONSTANT_ENCAPSED_STRING","'tier_price'",516],")",";",["T_WHITESPACE","\n\n        ",516],["T_IF","if",518],["T_WHITESPACE"," ",518],"(",["T_VARIABLE","$prices",518],["T_WHITESPACE"," ",518],["T_IS_IDENTICAL","===",518],["T_WHITESPACE"," ",518],["T_STRING","null",518],")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n            ",518],["T_IF","if",519],["T_WHITESPACE"," ",519],"(",["T_VARIABLE","$attribute",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$product",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","getResource",519],"(",")",["T_OBJECT_OPERATOR","->",519],["T_STRING","getAttribute",519],"(",["T_CONSTANT_ENCAPSED_STRING","'tier_price'",519],")",")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n                ",519],["T_VARIABLE","$attribute",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","getBackend",520],"(",")",["T_OBJECT_OPERATOR","->",520],["T_STRING","afterLoad",520],"(",["T_VARIABLE","$product",520],")",";",["T_WHITESPACE","\n                ",520],["T_VARIABLE","$prices",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$product",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getData",521],"(",["T_CONSTANT_ENCAPSED_STRING","'tier_price'",521],")",";",["T_WHITESPACE","\n            ",521],"}",["T_WHITESPACE","\n        ",522],"}",["T_WHITESPACE","\n\n        ",523],["T_IF","if",525],["T_WHITESPACE"," ",525],"(",["T_VARIABLE","$prices",525],["T_WHITESPACE"," ",525],["T_IS_IDENTICAL","===",525],["T_WHITESPACE"," ",525],["T_STRING","null",525],["T_WHITESPACE"," ",525],["T_BOOLEAN_OR","||",525],["T_WHITESPACE"," ",525],"!",["T_STRING","is_array",525],"(",["T_VARIABLE","$prices",525],")",")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n            ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_VARIABLE","$qty",526],["T_WHITESPACE"," ",526],["T_IS_NOT_IDENTICAL","!==",526],["T_WHITESPACE"," ",526],["T_STRING","null",526],")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n                ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$product",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getPrice",527],"(",")",";",["T_WHITESPACE","\n            ",527],"}",["T_WHITESPACE","\n            ",528],["T_RETURN","return",529],["T_WHITESPACE"," ",529],"[",["T_WHITESPACE","\n                ",529],"[",["T_WHITESPACE","\n                    ",530],["T_CONSTANT_ENCAPSED_STRING","'price'",531],["T_WHITESPACE"," ",531],["T_DOUBLE_ARROW","=>",531],["T_WHITESPACE"," ",531],["T_VARIABLE","$product",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","getPrice",531],"(",")",",",["T_WHITESPACE","\n                    ",531],["T_CONSTANT_ENCAPSED_STRING","'website_price'",532],["T_WHITESPACE"," ",532],["T_DOUBLE_ARROW","=>",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$product",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","getPrice",532],"(",")",",",["T_WHITESPACE","\n                    ",532],["T_CONSTANT_ENCAPSED_STRING","'price_qty'",533],["T_WHITESPACE"," ",533],["T_DOUBLE_ARROW","=>",533],["T_WHITESPACE"," ",533],["T_LNUMBER","1",533],",",["T_WHITESPACE","\n                    ",533],["T_CONSTANT_ENCAPSED_STRING","'cust_group'",534],["T_WHITESPACE"," ",534],["T_DOUBLE_ARROW","=>",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$allCustomersGroupId",534],",",["T_WHITESPACE","\n                ",534],"]",["T_WHITESPACE","\n            ",535],"]",";",["T_WHITESPACE","\n        ",536],"}",["T_WHITESPACE","\n\n        ",537],["T_VARIABLE","$custGroup",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","_getCustomerGroupId",539],"(",["T_VARIABLE","$product",539],")",";",["T_WHITESPACE","\n        ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$qty",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n            ",540],["T_VARIABLE","$prevQty",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_LNUMBER","1",541],";",["T_WHITESPACE","\n            ",541],["T_VARIABLE","$prevPrice",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_LNUMBER","0",542],";",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$prevGroup",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_VARIABLE","$allCustomersGroupId",543],";",["T_WHITESPACE","\n\n            ",543],["T_FOREACH","foreach",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$prices",545],["T_WHITESPACE"," ",545],["T_AS","as",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$price",545],")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n                ",545],["T_IF","if",546],["T_WHITESPACE"," ",546],"(",["T_EMPTY","empty",546],"(",["T_VARIABLE","$price",546],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",546],"]",")",")",["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n                    ",546],["T_COMMENT","\/\/ can use only percentage tier price\n",547],["T_WHITESPACE","                    ",548],["T_CONTINUE","continue",548],";",["T_WHITESPACE","\n                ",548],"}",["T_WHITESPACE","\n                ",549],["T_IF","if",550],["T_WHITESPACE"," ",550],"(",["T_VARIABLE","$price",550],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",550],"]",["T_WHITESPACE"," ",550],["T_IS_NOT_EQUAL","!=",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$custGroup",550],["T_WHITESPACE"," ",550],["T_BOOLEAN_AND","&&",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$price",550],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",550],"]",["T_WHITESPACE"," ",550],["T_IS_NOT_EQUAL","!=",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$allCustomersGroupId",550],")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n                    ",550],["T_COMMENT","\/\/ tier not for current customer group nor is for all groups\n",551],["T_WHITESPACE","                    ",552],["T_CONTINUE","continue",552],";",["T_WHITESPACE","\n                ",552],"}",["T_WHITESPACE","\n                ",553],["T_IF","if",554],["T_WHITESPACE"," ",554],"(",["T_VARIABLE","$qty",554],["T_WHITESPACE"," ",554],"<",["T_WHITESPACE"," ",554],["T_VARIABLE","$price",554],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",554],"]",")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n                    ",554],["T_COMMENT","\/\/ tier is higher than product qty\n",555],["T_WHITESPACE","                    ",556],["T_CONTINUE","continue",556],";",["T_WHITESPACE","\n                ",556],"}",["T_WHITESPACE","\n                ",557],["T_IF","if",558],["T_WHITESPACE"," ",558],"(",["T_VARIABLE","$price",558],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",558],"]",["T_WHITESPACE"," ",558],"<",["T_WHITESPACE"," ",558],["T_VARIABLE","$prevQty",558],")",["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n                    ",558],["T_COMMENT","\/\/ higher tier qty already found\n",559],["T_WHITESPACE","                    ",560],["T_CONTINUE","continue",560],";",["T_WHITESPACE","\n                ",560],"}",["T_WHITESPACE","\n                ",561],["T_IF","if",562],["T_WHITESPACE"," ",562],"(",["T_VARIABLE","$price",562],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",562],"]",["T_WHITESPACE"," ",562],["T_IS_EQUAL","==",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$prevQty",562],["T_WHITESPACE","\n                    ",562],["T_BOOLEAN_AND","&&",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$prevGroup",563],["T_WHITESPACE"," ",563],["T_IS_NOT_EQUAL","!=",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$allCustomersGroupId",563],["T_WHITESPACE","\n                    ",563],["T_BOOLEAN_AND","&&",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$price",564],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",564],"]",["T_WHITESPACE"," ",564],["T_IS_EQUAL","==",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$allCustomersGroupId",564],["T_WHITESPACE","\n                ",564],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n                    ",565],["T_COMMENT","\/\/ found tier qty is same as current tier qty but current tier group is ALL_GROUPS\n",566],["T_WHITESPACE","                    ",567],["T_CONTINUE","continue",567],";",["T_WHITESPACE","\n                ",567],"}",["T_WHITESPACE","\n\n                ",568],["T_IF","if",570],["T_WHITESPACE"," ",570],"(",["T_VARIABLE","$price",570],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",570],"]",["T_WHITESPACE"," ",570],">",["T_WHITESPACE"," ",570],["T_VARIABLE","$prevPrice",570],")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n                    ",570],["T_VARIABLE","$prevPrice",571],["T_WHITESPACE"," ",571],"=",["T_WHITESPACE"," ",571],["T_VARIABLE","$price",571],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",571],"]",";",["T_WHITESPACE","\n                    ",571],["T_VARIABLE","$prevQty",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_VARIABLE","$price",572],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",572],"]",";",["T_WHITESPACE","\n                    ",572],["T_VARIABLE","$prevGroup",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_VARIABLE","$price",573],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",573],"]",";",["T_WHITESPACE","\n                ",573],"}",["T_WHITESPACE","\n            ",574],"}",["T_WHITESPACE","\n\n            ",575],["T_RETURN","return",577],["T_WHITESPACE"," ",577],["T_VARIABLE","$prevPrice",577],";",["T_WHITESPACE","\n        ",577],"}",["T_WHITESPACE"," ",578],["T_ELSE","else",578],["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n            ",578],["T_VARIABLE","$qtyCache",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],"[","]",";",["T_WHITESPACE","\n            ",579],["T_FOREACH","foreach",580],["T_WHITESPACE"," ",580],"(",["T_VARIABLE","$prices",580],["T_WHITESPACE"," ",580],["T_AS","as",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$i",580],["T_WHITESPACE"," ",580],["T_DOUBLE_ARROW","=>",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$price",580],")",["T_WHITESPACE"," ",580],"{",["T_WHITESPACE","\n                ",580],["T_IF","if",581],["T_WHITESPACE"," ",581],"(",["T_VARIABLE","$price",581],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",581],"]",["T_WHITESPACE"," ",581],["T_IS_NOT_EQUAL","!=",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$custGroup",581],["T_WHITESPACE"," ",581],["T_BOOLEAN_AND","&&",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$price",581],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",581],"]",["T_WHITESPACE"," ",581],["T_IS_NOT_EQUAL","!=",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$allCustomersGroupId",581],")",["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n                    ",581],["T_UNSET","unset",582],"(",["T_VARIABLE","$prices",582],"[",["T_VARIABLE","$i",582],"]",")",";",["T_WHITESPACE","\n                ",582],"}",["T_WHITESPACE"," ",583],["T_ELSEIF","elseif",583],["T_WHITESPACE"," ",583],"(",["T_ISSET","isset",583],"(",["T_VARIABLE","$qtyCache",583],"[",["T_VARIABLE","$price",583],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",583],"]","]",")",")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n                    ",583],["T_VARIABLE","$j",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_VARIABLE","$qtyCache",584],"[",["T_VARIABLE","$price",584],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",584],"]","]",";",["T_WHITESPACE","\n                    ",584],["T_IF","if",585],["T_WHITESPACE"," ",585],"(",["T_VARIABLE","$prices",585],"[",["T_VARIABLE","$j",585],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_price'",585],"]",["T_WHITESPACE"," ",585],"<",["T_WHITESPACE"," ",585],["T_VARIABLE","$price",585],"[",["T_CONSTANT_ENCAPSED_STRING","'website_price'",585],"]",")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n                        ",585],["T_UNSET","unset",586],"(",["T_VARIABLE","$prices",586],"[",["T_VARIABLE","$j",586],"]",")",";",["T_WHITESPACE","\n                        ",586],["T_VARIABLE","$qtyCache",587],"[",["T_VARIABLE","$price",587],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",587],"]","]",["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$i",587],";",["T_WHITESPACE","\n                    ",587],"}",["T_WHITESPACE"," ",588],["T_ELSE","else",588],["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n                        ",588],["T_UNSET","unset",589],"(",["T_VARIABLE","$prices",589],"[",["T_VARIABLE","$i",589],"]",")",";",["T_WHITESPACE","\n                    ",589],"}",["T_WHITESPACE","\n                ",590],"}",["T_WHITESPACE"," ",591],["T_ELSE","else",591],["T_WHITESPACE"," ",591],"{",["T_WHITESPACE","\n                    ",591],["T_VARIABLE","$qtyCache",592],"[",["T_VARIABLE","$price",592],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",592],"]","]",["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_VARIABLE","$i",592],";",["T_WHITESPACE","\n                ",592],"}",["T_WHITESPACE","\n            ",593],"}",["T_WHITESPACE","\n        ",594],"}",["T_WHITESPACE","\n\n        ",595],["T_RETURN","return",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$prices",597],["T_WHITESPACE"," ",597],"?",["T_WHITESPACE"," ",597],["T_VARIABLE","$prices",597],["T_WHITESPACE"," ",597],":",["T_WHITESPACE"," ",597],"[","]",";",["T_WHITESPACE","\n    ",597],"}",["T_WHITESPACE","\n\n    ",598],["T_DOC_COMMENT","\/**\n     * Calculate and apply special price\n     *\n     * @param float  $finalPrice\n     * @param float  $specialPrice\n     * @param string $specialPriceFrom\n     * @param string $specialPriceTo\n     * @param mixed  $store\n     * @return float\n     *\/",600],["T_WHITESPACE","\n    ",609],["T_PUBLIC","public",610],["T_WHITESPACE"," ",610],["T_FUNCTION","function",610],["T_WHITESPACE"," ",610],["T_STRING","calculateSpecialPrice",610],"(",["T_WHITESPACE","\n        ",610],["T_VARIABLE","$finalPrice",611],",",["T_WHITESPACE","\n        ",611],["T_VARIABLE","$specialPrice",612],",",["T_WHITESPACE","\n        ",612],["T_VARIABLE","$specialPriceFrom",613],",",["T_WHITESPACE","\n        ",613],["T_VARIABLE","$specialPriceTo",614],",",["T_WHITESPACE","\n        ",614],["T_VARIABLE","$store",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","null",615],["T_WHITESPACE","\n    ",615],")",["T_WHITESPACE"," ",616],"{",["T_WHITESPACE","\n        ",616],["T_IF","if",617],["T_WHITESPACE"," ",617],"(",["T_VARIABLE","$specialPrice",617],["T_WHITESPACE"," ",617],["T_IS_NOT_IDENTICAL","!==",617],["T_WHITESPACE"," ",617],["T_STRING","null",617],["T_WHITESPACE"," ",617],["T_BOOLEAN_AND","&&",617],["T_WHITESPACE"," ",617],["T_VARIABLE","$specialPrice",617],["T_WHITESPACE"," ",617],["T_IS_NOT_EQUAL","!=",617],["T_WHITESPACE"," ",617],["T_STRING","false",617],")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n            ",617],["T_IF","if",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_localeDate",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","isScopeDateInInterval",618],"(",["T_VARIABLE","$store",618],",",["T_WHITESPACE"," ",618],["T_VARIABLE","$specialPriceFrom",618],",",["T_WHITESPACE"," ",618],["T_VARIABLE","$specialPriceTo",618],")",")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n                ",618],["T_VARIABLE","$specialPrice",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_VARIABLE","$finalPrice",619],["T_WHITESPACE"," ",619],"*",["T_WHITESPACE"," ",619],"(",["T_VARIABLE","$specialPrice",619],["T_WHITESPACE"," ",619],"\/",["T_WHITESPACE"," ",619],["T_LNUMBER","100",619],")",";",["T_WHITESPACE","\n                ",619],["T_VARIABLE","$finalPrice",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_STRING","min",620],"(",["T_VARIABLE","$finalPrice",620],",",["T_WHITESPACE"," ",620],["T_VARIABLE","$specialPrice",620],")",";",["T_WHITESPACE","\n            ",620],"}",["T_WHITESPACE","\n        ",621],"}",["T_WHITESPACE","\n\n        ",622],["T_RETURN","return",624],["T_WHITESPACE"," ",624],["T_VARIABLE","$finalPrice",624],";",["T_WHITESPACE","\n    ",624],"}",["T_WHITESPACE","\n\n    ",625],["T_DOC_COMMENT","\/**\n     * Returns the lowest price after applying any applicable bundle discounts\n     *\n     * @param \/Magento\/Catalog\/Model\/Product $bundleProduct\n     * @param float|string $price\n     * @param int          $bundleQty\n     * @return float\n     *\/",627],["T_WHITESPACE","\n    ",634],["T_PUBLIC","public",635],["T_WHITESPACE"," ",635],["T_FUNCTION","function",635],["T_WHITESPACE"," ",635],["T_STRING","getLowestPrice",635],"(",["T_VARIABLE","$bundleProduct",635],",",["T_WHITESPACE"," ",635],["T_VARIABLE","$price",635],",",["T_WHITESPACE"," ",635],["T_VARIABLE","$bundleQty",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_LNUMBER","1",635],")",["T_WHITESPACE","\n    ",635],"{",["T_WHITESPACE","\n        ",636],["T_VARIABLE","$price",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_DOUBLE_CAST","(float)",637],["T_VARIABLE","$price",637],";",["T_WHITESPACE","\n        ",637],["T_RETURN","return",638],["T_WHITESPACE"," ",638],["T_STRING","min",638],"(",["T_WHITESPACE","\n            ",638],["T_VARIABLE","$price",639],",",["T_WHITESPACE","\n            ",639],["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","_applyTierPrice",640],"(",["T_VARIABLE","$bundleProduct",640],",",["T_WHITESPACE"," ",640],["T_VARIABLE","$bundleQty",640],",",["T_WHITESPACE"," ",640],["T_VARIABLE","$price",640],")",",",["T_WHITESPACE","\n            ",640],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","_applySpecialPrice",641],"(",["T_VARIABLE","$bundleProduct",641],",",["T_WHITESPACE"," ",641],["T_VARIABLE","$price",641],")",["T_WHITESPACE","\n        ",641],")",";",["T_WHITESPACE","\n    ",642],"}",["T_WHITESPACE","\n",643],"}",["T_WHITESPACE","\n",644]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Bundle",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Block",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","View",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Type",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Bundle",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Option",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Catalog bundle product info block\n *\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Bundle",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Catalog",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Block",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Product",16],["T_NS_SEPARATOR","\\",16],["T_STRING","View",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractView",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$options",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Catalog product\n     *\n     * @var \\Magento\\Catalog\\Helper\\Product\n     *\/",24],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$catalogProduct",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Bundle\\Model\\Product\\PriceFactory\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$productPriceFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Json\\EncoderInterface\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$jsonEncoder",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Locale\\FormatInterface\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$localeFormat",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PRIVATE","private",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$selectedOptions",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[","]",";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogRule\\Model\\ResourceModel\\Product\\CollectionProcessor\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PRIVATE","private",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$catalogRuleProcessor",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Block\\Product\\Context $context\n     * @param \\Magento\\Framework\\Stdlib\\ArrayUtils $arrayUtils\n     * @param \\Magento\\Catalog\\Helper\\Product $catalogProduct\n     * @param \\Magento\\Bundle\\Model\\Product\\PriceFactory $productPrice\n     * @param \\Magento\\Framework\\Json\\EncoderInterface $jsonEncoder\n     * @param \\Magento\\Framework\\Locale\\FormatInterface $localeFormat\n     * @param array $data\n     *\/",56],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","__construct",65],"(",["T_WHITESPACE","\n        ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Magento",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Catalog",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Block",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Product",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Context",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$context",66],",",["T_WHITESPACE","\n        ",66],["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Framework",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Stdlib",67],["T_NS_SEPARATOR","\\",67],["T_STRING","ArrayUtils",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$arrayUtils",67],",",["T_WHITESPACE","\n        ",67],["T_NS_SEPARATOR","\\",68],["T_STRING","Magento",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Catalog",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Helper",68],["T_NS_SEPARATOR","\\",68],["T_STRING","Product",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$catalogProduct",68],",",["T_WHITESPACE","\n        ",68],["T_NS_SEPARATOR","\\",69],["T_STRING","Magento",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Bundle",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Model",69],["T_NS_SEPARATOR","\\",69],["T_STRING","Product",69],["T_NS_SEPARATOR","\\",69],["T_STRING","PriceFactory",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$productPrice",69],",",["T_WHITESPACE","\n        ",69],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Framework",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Json",70],["T_NS_SEPARATOR","\\",70],["T_STRING","EncoderInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$jsonEncoder",70],",",["T_WHITESPACE","\n        ",70],["T_NS_SEPARATOR","\\",71],["T_STRING","Magento",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Framework",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Locale",71],["T_NS_SEPARATOR","\\",71],["T_STRING","FormatInterface",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$localeFormat",71],",",["T_WHITESPACE","\n        ",71],["T_ARRAY","array",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$data",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[","]",["T_WHITESPACE","\n    ",72],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","catalogProduct",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$catalogProduct",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","productPriceFactory",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$productPrice",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","jsonEncoder",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$jsonEncoder",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","localeFormat",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$localeFormat",77],";",["T_WHITESPACE","\n        ",77],["T_STRING","parent",78],["T_DOUBLE_COLON","::",78],["T_STRING","__construct",78],"(",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$context",79],",",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$arrayUtils",80],",",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$data",81],["T_WHITESPACE","\n        ",81],")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @deprecated\n     * @return \\Magento\\CatalogRule\\Model\\ResourceModel\\Product\\CollectionProcessor\n     *\/",85],["T_WHITESPACE","\n    ",88],["T_PRIVATE","private",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","getCatalogRuleProcessor",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","catalogRuleProcessor",91],["T_WHITESPACE"," ",91],["T_IS_IDENTICAL","===",91],["T_WHITESPACE"," ",91],["T_STRING","null",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","catalogRuleProcessor",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","App",92],["T_NS_SEPARATOR","\\",92],["T_STRING","ObjectManager",92],["T_DOUBLE_COLON","::",92],["T_STRING","getInstance",92],"(",")",["T_WHITESPACE","\n                ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","get",93],"(",["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","CatalogRule",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Model",93],["T_NS_SEPARATOR","\\",93],["T_STRING","ResourceModel",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Product",93],["T_NS_SEPARATOR","\\",93],["T_STRING","CollectionProcessor",93],["T_DOUBLE_COLON","::",93],["T_CLASS","class",93],")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","catalogRuleProcessor",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Returns the bundle product options\n     * Will return cached options data if the product options are already initialized\n     * In a case when $stripSelection parameter is true will reload stored bundle selections collection from DB\n     *\n     * @param bool $stripSelection\n     * @return array\n     *\/",99],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getOptions",107],"(",["T_VARIABLE","$stripSelection",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","false",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(","!",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","options",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$product",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getProduct",110],"(",")",";",["T_WHITESPACE","\n            ",110],["T_DOC_COMMENT","\/** @var \\Magento\\Bundle\\Model\\Product\\Type $typeInstance *\/",111],["T_WHITESPACE","\n            ",111],["T_VARIABLE","$typeInstance",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$product",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getTypeInstance",112],"(",")",";",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$typeInstance",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setStoreFilter",113],"(",["T_VARIABLE","$product",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getStoreId",113],"(",")",",",["T_WHITESPACE"," ",113],["T_VARIABLE","$product",113],")",";",["T_WHITESPACE","\n\n            ",113],["T_VARIABLE","$optionCollection",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$typeInstance",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getOptionsCollection",115],"(",["T_VARIABLE","$product",115],")",";",["T_WHITESPACE","\n\n            ",115],["T_VARIABLE","$selectionCollection",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$typeInstance",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getSelectionsCollection",117],"(",["T_WHITESPACE","\n                ",117],["T_VARIABLE","$typeInstance",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getOptionsIds",118],"(",["T_VARIABLE","$product",118],")",",",["T_WHITESPACE","\n                ",118],["T_VARIABLE","$product",119],["T_WHITESPACE","\n            ",119],")",";",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getCatalogRuleProcessor",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","addPriceData",121],"(",["T_VARIABLE","$selectionCollection",121],")",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$selectionCollection",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","addTierPriceData",122],"(",")",";",["T_WHITESPACE","\n\n            ",122],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","options",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$optionCollection",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","appendSelections",124],"(",["T_WHITESPACE","\n                ",124],["T_VARIABLE","$selectionCollection",125],",",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$stripSelection",126],",",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","catalogProduct",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getSkipSaleableCheck",127],"(",")",["T_WHITESPACE","\n            ",127],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","options",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * @return bool\n     *\/",134],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","hasOptions",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getOptions",139],"(",")",";",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_EMPTY","empty",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","options",140],")",["T_WHITESPACE"," ",140],["T_BOOLEAN_OR","||",140],["T_WHITESPACE"," ",140],"!",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getProduct",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","isSalable",140],"(",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_STRING","false",141],";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n        ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_STRING","true",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Returns JSON encoded config to be used in JS scripts\n     *\n     * @return string\n     *\n     *\/",146],["T_WHITESPACE","\n    ",151],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","getJsonConfig",152],"(",")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_DOC_COMMENT","\/** @var Option[] $optionsArray *\/",154],["T_WHITESPACE","\n        ",154],["T_VARIABLE","$optionsArray",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getOptions",155],"(",")",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$options",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],"[","]",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$currentProduct",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getProduct",157],"(",")",";",["T_WHITESPACE","\n\n        ",157],["T_VARIABLE","$defaultValues",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[","]",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$preConfiguredFlag",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$currentProduct",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","hasPreconfiguredValues",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\DataObject|null $preConfiguredValues *\/",161],["T_WHITESPACE","\n        ",161],["T_VARIABLE","$preConfiguredValues",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$preConfiguredFlag",162],["T_WHITESPACE"," ",162],"?",["T_WHITESPACE"," ",162],["T_VARIABLE","$currentProduct",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getPreconfiguredValues",162],"(",")",["T_WHITESPACE"," ",162],":",["T_WHITESPACE"," ",162],["T_STRING","null",162],";",["T_WHITESPACE","\n\n        ",162],["T_VARIABLE","$position",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_LNUMBER","0",164],";",["T_WHITESPACE","\n        ",164],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$optionsArray",165],["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$optionItem",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_COMMENT","\/* @var $optionItem Option *\/",166],["T_WHITESPACE","\n            ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_VARIABLE","$optionItem",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getSelections",167],"(",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                ",167],["T_CONTINUE","continue",168],";",["T_WHITESPACE","\n            ",168],"}",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$optionId",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$optionItem",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getId",170],"(",")",";",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$options",171],"[",["T_VARIABLE","$optionId",171],"]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getOptionItemData",171],"(",["T_VARIABLE","$optionItem",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$currentProduct",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$position",171],")",";",["T_WHITESPACE","\n\n            ",171],["T_COMMENT","\/\/ Add attribute default value (if set)\n",173],["T_WHITESPACE","            ",174],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$preConfiguredFlag",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$configValue",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$preConfiguredValues",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getData",175],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle_option\/'",175],["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_VARIABLE","$optionId",175],")",";",["T_WHITESPACE","\n                ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$configValue",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                    ",176],["T_VARIABLE","$defaultValues",177],"[",["T_VARIABLE","$optionId",177],"]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$configValue",177],";",["T_WHITESPACE","\n                ",177],"}",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$position",180],["T_INC","++",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$config",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getConfigData",182],"(",["T_VARIABLE","$currentProduct",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$options",182],")",";",["T_WHITESPACE","\n\n        ",182],["T_VARIABLE","$configObj",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_NEW","new",184],["T_WHITESPACE"," ",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Magento",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Framework",184],["T_NS_SEPARATOR","\\",184],["T_STRING","DataObject",184],"(",["T_WHITESPACE","\n            ",184],"[",["T_WHITESPACE","\n                ",185],["T_CONSTANT_ENCAPSED_STRING","'config'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$config",186],",",["T_WHITESPACE","\n            ",186],"]",["T_WHITESPACE","\n        ",187],")",";",["T_WHITESPACE","\n\n        ",188],["T_COMMENT","\/\/pass the return array encapsulated in an object for the other modules to be able to alter it eg: weee\n",190],["T_WHITESPACE","        ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_eventManager",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","dispatch",191],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_option_price_configuration_after'",191],",",["T_WHITESPACE"," ",191],"[",["T_CONSTANT_ENCAPSED_STRING","'configObj'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$configObj",191],"]",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$config",192],"=",["T_VARIABLE","$configObj",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getConfig",192],"(",")",";",["T_WHITESPACE","\n\n        ",192],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$preConfiguredFlag",194],["T_WHITESPACE"," ",194],["T_BOOLEAN_AND","&&",194],["T_WHITESPACE"," ",194],"!",["T_EMPTY","empty",194],"(",["T_VARIABLE","$defaultValues",194],")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$config",195],"[",["T_CONSTANT_ENCAPSED_STRING","'defaultValues'",195],"]",["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$defaultValues",195],";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","jsonEncoder",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","encode",198],"(",["T_VARIABLE","$config",198],")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Get html for option\n     *\n     * @param Option $option\n     * @return string\n     *\/",201],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","getOptionHtml",207],"(",["T_STRING","Option",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$option",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$optionBlock",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getChildBlock",209],"(",["T_VARIABLE","$option",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getType",209],"(",")",")",";",["T_WHITESPACE","\n        ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(","!",["T_VARIABLE","$optionBlock",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_STRING","__",211],"(",["T_CONSTANT_ENCAPSED_STRING","'There is no defined renderer for \"%1\" option type.'",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$option",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getType",211],"(",")",")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n        ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$optionBlock",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","setOption",213],"(",["T_VARIABLE","$option",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","toHtml",213],"(",")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Get formed data from option selection item\n     *\n     * @param Product $product\n     * @param Product $selection\n     * @return array\n     *\/",216],["T_WHITESPACE","\n    ",222],["T_PRIVATE","private",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","getSelectionItemData",223],"(",["T_STRING","Product",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$product",223],",",["T_WHITESPACE"," ",223],["T_STRING","Product",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$selection",223],")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$qty",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$selection",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getSelectionQty",225],"(",")",["T_WHITESPACE"," ",225],"*",["T_WHITESPACE"," ",225],["T_LNUMBER","1",225],")",["T_WHITESPACE"," ",225],"?",":",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'1'",225],";",["T_WHITESPACE","\n\n        ",225],["T_VARIABLE","$optionPriceAmount",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$product",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getPriceInfo",227],"(",")",["T_WHITESPACE","\n            ",227],["T_OBJECT_OPERATOR","->",228],["T_STRING","getPrice",228],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle_option'",228],")",["T_WHITESPACE","\n            ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","getOptionSelectionAmount",229],"(",["T_VARIABLE","$selection",229],")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$finalPrice",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$optionPriceAmount",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getValue",230],"(",")",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$basePrice",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$optionPriceAmount",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getBaseAmount",231],"(",")",";",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$selection",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],"[",["T_WHITESPACE","\n            ",233],["T_CONSTANT_ENCAPSED_STRING","'qty'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$qty",234],",",["T_WHITESPACE","\n            ",234],["T_CONSTANT_ENCAPSED_STRING","'customQty'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$selection",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getSelectionCanChangeQty",235],"(",")",",",["T_WHITESPACE","\n            ",235],["T_CONSTANT_ENCAPSED_STRING","'optionId'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$selection",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getId",236],"(",")",",",["T_WHITESPACE","\n            ",236],["T_CONSTANT_ENCAPSED_STRING","'prices'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],"[",["T_WHITESPACE","\n                ",237],["T_CONSTANT_ENCAPSED_STRING","'oldPrice'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],"[",["T_WHITESPACE","\n                    ",238],["T_CONSTANT_ENCAPSED_STRING","'amount'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$basePrice",239],["T_WHITESPACE","\n                ",239],"]",",",["T_WHITESPACE","\n                ",240],["T_CONSTANT_ENCAPSED_STRING","'basePrice'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],"[",["T_WHITESPACE","\n                    ",241],["T_CONSTANT_ENCAPSED_STRING","'amount'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$basePrice",242],["T_WHITESPACE","\n                ",242],"]",",",["T_WHITESPACE","\n                ",243],["T_CONSTANT_ENCAPSED_STRING","'finalPrice'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],"[",["T_WHITESPACE","\n                    ",244],["T_CONSTANT_ENCAPSED_STRING","'amount'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$finalPrice",245],["T_WHITESPACE","\n                ",245],"]",["T_WHITESPACE","\n            ",246],"]",",",["T_WHITESPACE","\n            ",247],["T_CONSTANT_ENCAPSED_STRING","'priceType'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$selection",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getSelectionPriceType",248],"(",")",",",["T_WHITESPACE","\n            ",248],["T_CONSTANT_ENCAPSED_STRING","'tierPrice'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getTierPrices",249],"(",["T_VARIABLE","$product",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$selection",249],")",",",["T_WHITESPACE","\n            ",249],["T_CONSTANT_ENCAPSED_STRING","'name'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$selection",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getName",250],"(",")",",",["T_WHITESPACE","\n            ",250],["T_CONSTANT_ENCAPSED_STRING","'canApplyMsrp'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_STRING","false",251],["T_WHITESPACE","\n        ",251],"]",";",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$selection",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Get tier prices from option selection item\n     *\n     * @param Product $product\n     * @param Product $selection\n     * @return array\n     *\/",256],["T_WHITESPACE","\n    ",262],["T_PRIVATE","private",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","getTierPrices",263],"(",["T_STRING","Product",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$product",263],",",["T_WHITESPACE"," ",263],["T_STRING","Product",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$selection",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_COMMENT","\/\/ recalculate currency\n",265],["T_WHITESPACE","        ",266],["T_VARIABLE","$tierPrices",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$selection",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getPriceInfo",266],"(",")",["T_WHITESPACE","\n            ",266],["T_OBJECT_OPERATOR","->",267],["T_STRING","getPrice",267],"(",["T_NS_SEPARATOR","\\",267],["T_STRING","Magento",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Catalog",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Pricing",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Price",267],["T_NS_SEPARATOR","\\",267],["T_STRING","TierPrice",267],["T_DOUBLE_COLON","::",267],["T_STRING","PRICE_CODE",267],")",["T_WHITESPACE","\n            ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","getTierPriceList",268],"(",")",";",["T_WHITESPACE","\n\n        ",268],["T_FOREACH","foreach",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$tierPrices",270],["T_WHITESPACE"," ",270],["T_AS","as",270],["T_WHITESPACE"," ",270],"&",["T_VARIABLE","$tierPriceInfo",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Pricing\\Amount\\Base $price *\/",271],["T_WHITESPACE","\n            ",271],["T_VARIABLE","$price",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$tierPriceInfo",272],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",272],"]",";",["T_WHITESPACE","\n\n            ",272],["T_VARIABLE","$priceBaseAmount",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$price",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getBaseAmount",274],"(",")",";",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$priceValue",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$price",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getValue",275],"(",")",";",["T_WHITESPACE","\n\n            ",275],["T_VARIABLE","$bundleProductPrice",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","productPriceFactory",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","create",277],"(",")",";",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$priceBaseAmount",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$bundleProductPrice",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getLowestPrice",278],"(",["T_VARIABLE","$product",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$priceBaseAmount",278],")",";",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$priceValue",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$bundleProductPrice",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getLowestPrice",279],"(",["T_VARIABLE","$product",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$priceValue",279],")",";",["T_WHITESPACE","\n\n            ",279],["T_VARIABLE","$tierPriceInfo",281],"[",["T_CONSTANT_ENCAPSED_STRING","'prices'",281],"]",["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],"[",["T_WHITESPACE","\n                ",281],["T_CONSTANT_ENCAPSED_STRING","'oldPrice'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],"[",["T_WHITESPACE","\n                    ",282],["T_CONSTANT_ENCAPSED_STRING","'amount'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$priceBaseAmount",283],["T_WHITESPACE","\n                ",283],"]",",",["T_WHITESPACE","\n                ",284],["T_CONSTANT_ENCAPSED_STRING","'basePrice'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],"[",["T_WHITESPACE","\n                    ",285],["T_CONSTANT_ENCAPSED_STRING","'amount'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$priceBaseAmount",286],["T_WHITESPACE","\n                ",286],"]",",",["T_WHITESPACE","\n                ",287],["T_CONSTANT_ENCAPSED_STRING","'finalPrice'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],"[",["T_WHITESPACE","\n                    ",288],["T_CONSTANT_ENCAPSED_STRING","'amount'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$priceValue",289],["T_WHITESPACE","\n                ",289],"]",["T_WHITESPACE","\n            ",290],"]",";",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$tierPrices",293],";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * Get formed data from selections of option\n     *\n     * @param Option $option\n     * @param Product $product\n     * @return array\n     *\/",296],["T_WHITESPACE","\n    ",302],["T_PRIVATE","private",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","getSelections",303],"(",["T_STRING","Option",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$option",303],",",["T_WHITESPACE"," ",303],["T_STRING","Product",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$product",303],")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$selections",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],"[","]",";",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$selectionCount",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","count",306],"(",["T_VARIABLE","$option",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getSelections",306],"(",")",")",";",["T_WHITESPACE","\n        ",306],["T_FOREACH","foreach",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$option",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getSelections",307],"(",")",["T_WHITESPACE"," ",307],["T_AS","as",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$selectionItem",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_COMMENT","\/* @var $selectionItem Product *\/",308],["T_WHITESPACE","\n            ",308],["T_VARIABLE","$selectionId",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$selectionItem",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getSelectionId",309],"(",")",";",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$selections",310],"[",["T_VARIABLE","$selectionId",310],"]",["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getSelectionItemData",310],"(",["T_VARIABLE","$product",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$selectionItem",310],")",";",["T_WHITESPACE","\n\n            ",310],["T_IF","if",312],["T_WHITESPACE"," ",312],"(","(",["T_VARIABLE","$selectionItem",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getIsDefault",312],"(",")",["T_WHITESPACE"," ",312],["T_BOOLEAN_OR","||",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$selectionCount",312],["T_WHITESPACE"," ",312],["T_IS_EQUAL","==",312],["T_WHITESPACE"," ",312],["T_LNUMBER","1",312],["T_WHITESPACE"," ",312],["T_BOOLEAN_AND","&&",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$option",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getRequired",312],"(",")",")",["T_WHITESPACE","\n                ",312],["T_BOOLEAN_AND","&&",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$selectionItem",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","isSalable",313],"(",")",["T_WHITESPACE","\n            ",313],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n                ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","selectedOptions",315],"[",["T_VARIABLE","$option",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getId",315],"(",")","]","[","]",["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$selectionId",315],";",["T_WHITESPACE","\n            ",315],"}",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE","\n        ",317],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$selections",318],";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_DOC_COMMENT","\/**\n     * Get formed data from option\n     *\n     * @param Option $option\n     * @param Product $product\n     * @param int $position\n     * @return array\n     *\/",321],["T_WHITESPACE","\n    ",328],["T_PRIVATE","private",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getOptionItemData",329],"(",["T_STRING","Option",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$option",329],",",["T_WHITESPACE"," ",329],["T_STRING","Product",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$product",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$position",329],")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_RETURN","return",331],["T_WHITESPACE"," ",331],"[",["T_WHITESPACE","\n            ",331],["T_CONSTANT_ENCAPSED_STRING","'selections'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getSelections",332],"(",["T_VARIABLE","$option",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$product",332],")",",",["T_WHITESPACE","\n            ",332],["T_CONSTANT_ENCAPSED_STRING","'title'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$option",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getTitle",333],"(",")",",",["T_WHITESPACE","\n            ",333],["T_CONSTANT_ENCAPSED_STRING","'isMulti'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_STRING","in_array",334],"(",["T_VARIABLE","$option",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getType",334],"(",")",",",["T_WHITESPACE"," ",334],"[",["T_CONSTANT_ENCAPSED_STRING","'multi'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",334],"]",")",",",["T_WHITESPACE","\n            ",334],["T_CONSTANT_ENCAPSED_STRING","'position'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$position",335],["T_WHITESPACE","\n        ",335],"]",";",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n\n    ",337],["T_DOC_COMMENT","\/**\n     * Get formed config data from calculated options data\n     *\n     * @param Product $product\n     * @param array $options\n     * @return array\n     *\/",339],["T_WHITESPACE","\n    ",345],["T_PRIVATE","private",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","getConfigData",346],"(",["T_STRING","Product",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$product",346],",",["T_WHITESPACE"," ",346],["T_ARRAY","array",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$options",346],")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$isFixedPrice",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getProduct",348],"(",")",["T_OBJECT_OPERATOR","->",348],["T_STRING","getPriceType",348],"(",")",["T_WHITESPACE"," ",348],["T_IS_EQUAL","==",348],["T_WHITESPACE"," ",348],["T_NS_SEPARATOR","\\",348],["T_STRING","Magento",348],["T_NS_SEPARATOR","\\",348],["T_STRING","Bundle",348],["T_NS_SEPARATOR","\\",348],["T_STRING","Model",348],["T_NS_SEPARATOR","\\",348],["T_STRING","Product",348],["T_NS_SEPARATOR","\\",348],["T_STRING","Price",348],["T_DOUBLE_COLON","::",348],["T_STRING","PRICE_TYPE_FIXED",348],";",["T_WHITESPACE","\n\n        ",348],["T_VARIABLE","$productAmount",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$product",350],["T_WHITESPACE","\n            ",350],["T_OBJECT_OPERATOR","->",351],["T_STRING","getPriceInfo",351],"(",")",["T_WHITESPACE","\n            ",351],["T_OBJECT_OPERATOR","->",352],["T_STRING","getPrice",352],"(",["T_NS_SEPARATOR","\\",352],["T_STRING","Magento",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Catalog",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Pricing",352],["T_NS_SEPARATOR","\\",352],["T_STRING","Price",352],["T_NS_SEPARATOR","\\",352],["T_STRING","FinalPrice",352],["T_DOUBLE_COLON","::",352],["T_STRING","PRICE_CODE",352],")",["T_WHITESPACE","\n            ",352],["T_OBJECT_OPERATOR","->",353],["T_STRING","getPriceWithoutOption",353],"(",")",";",["T_WHITESPACE","\n\n        ",353],["T_VARIABLE","$baseProductAmount",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$product",355],["T_WHITESPACE","\n            ",355],["T_OBJECT_OPERATOR","->",356],["T_STRING","getPriceInfo",356],"(",")",["T_WHITESPACE","\n            ",356],["T_OBJECT_OPERATOR","->",357],["T_STRING","getPrice",357],"(",["T_NS_SEPARATOR","\\",357],["T_STRING","Magento",357],["T_NS_SEPARATOR","\\",357],["T_STRING","Catalog",357],["T_NS_SEPARATOR","\\",357],["T_STRING","Pricing",357],["T_NS_SEPARATOR","\\",357],["T_STRING","Price",357],["T_NS_SEPARATOR","\\",357],["T_STRING","RegularPrice",357],["T_DOUBLE_COLON","::",357],["T_STRING","PRICE_CODE",357],")",["T_WHITESPACE","\n            ",357],["T_OBJECT_OPERATOR","->",358],["T_STRING","getAmount",358],"(",")",";",["T_WHITESPACE","\n\n        ",358],["T_VARIABLE","$config",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],"[",["T_WHITESPACE","\n            ",360],["T_CONSTANT_ENCAPSED_STRING","'options'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$options",361],",",["T_WHITESPACE","\n            ",361],["T_CONSTANT_ENCAPSED_STRING","'selected'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","selectedOptions",362],",",["T_WHITESPACE","\n            ",362],["T_CONSTANT_ENCAPSED_STRING","'bundleId'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$product",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getId",363],"(",")",",",["T_WHITESPACE","\n            ",363],["T_CONSTANT_ENCAPSED_STRING","'priceFormat'",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","localeFormat",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getPriceFormat",364],"(",")",",",["T_WHITESPACE","\n            ",364],["T_CONSTANT_ENCAPSED_STRING","'prices'",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],"[",["T_WHITESPACE","\n                ",365],["T_CONSTANT_ENCAPSED_STRING","'oldPrice'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],"[",["T_WHITESPACE","\n                    ",366],["T_CONSTANT_ENCAPSED_STRING","'amount'",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$isFixedPrice",367],["T_WHITESPACE"," ",367],"?",["T_WHITESPACE"," ",367],["T_VARIABLE","$baseProductAmount",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getValue",367],"(",")",["T_WHITESPACE"," ",367],":",["T_WHITESPACE"," ",367],["T_LNUMBER","0",367],["T_WHITESPACE","\n                ",367],"]",",",["T_WHITESPACE","\n                ",368],["T_CONSTANT_ENCAPSED_STRING","'basePrice'",369],["T_WHITESPACE"," ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],"[",["T_WHITESPACE","\n                    ",369],["T_CONSTANT_ENCAPSED_STRING","'amount'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$isFixedPrice",370],["T_WHITESPACE"," ",370],"?",["T_WHITESPACE"," ",370],["T_VARIABLE","$productAmount",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getBaseAmount",370],"(",")",["T_WHITESPACE"," ",370],":",["T_WHITESPACE"," ",370],["T_LNUMBER","0",370],["T_WHITESPACE","\n                ",370],"]",",",["T_WHITESPACE","\n                ",371],["T_CONSTANT_ENCAPSED_STRING","'finalPrice'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],"[",["T_WHITESPACE","\n                    ",372],["T_CONSTANT_ENCAPSED_STRING","'amount'",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$isFixedPrice",373],["T_WHITESPACE"," ",373],"?",["T_WHITESPACE"," ",373],["T_VARIABLE","$productAmount",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getValue",373],"(",")",["T_WHITESPACE"," ",373],":",["T_WHITESPACE"," ",373],["T_LNUMBER","0",373],["T_WHITESPACE","\n                ",373],"]",["T_WHITESPACE","\n            ",374],"]",",",["T_WHITESPACE","\n            ",375],["T_CONSTANT_ENCAPSED_STRING","'priceType'",376],["T_WHITESPACE"," ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$product",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getPriceType",376],"(",")",",",["T_WHITESPACE","\n            ",376],["T_CONSTANT_ENCAPSED_STRING","'isFixedPrice'",377],["T_WHITESPACE"," ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$isFixedPrice",377],",",["T_WHITESPACE","\n        ",377],"]",";",["T_WHITESPACE","\n        ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$config",379],";",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n",380],"}",["T_WHITESPACE","\n",381]]
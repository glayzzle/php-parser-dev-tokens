[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Bundle",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Pricing",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adjustment",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Bundle",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Price",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Bundle",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Pricing",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Price",10],["T_NS_SEPARATOR","\\",10],["T_STRING","BundleSelectionFactory",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Pricing",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Adjustment",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Calculator",12],["T_WHITESPACE"," ",12],["T_AS","as",12],["T_WHITESPACE"," ",12],["T_STRING","CalculatorBase",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Pricing",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Amount",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AmountFactory",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Pricing",14],["T_NS_SEPARATOR","\\",14],["T_STRING","SaleableInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Pricing",15],["T_NS_SEPARATOR","\\",15],["T_STRING","PriceCurrencyInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Store",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Store",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Tax",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Api",17],["T_NS_SEPARATOR","\\",17],["T_STRING","TaxCalculationInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Tax",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Helper",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Data",18],["T_WHITESPACE"," ",18],["T_AS","as",18],["T_WHITESPACE"," ",18],["T_STRING","TaxHelper",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * Bundle price calculator\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",20],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","Calculator",24],["T_WHITESPACE"," ",24],["T_IMPLEMENTS","implements",24],["T_WHITESPACE"," ",24],["T_STRING","BundleCalculatorInterface",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * @var CalculatorBase\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$calculator",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var AmountFactory\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$amountFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var BundleSelectionFactory\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$selectionFactory",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Tax helper, needed to get rounding setting\n     *\n     * @var TaxHelper\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$taxHelper",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @var PriceCurrencyInterface\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$priceCurrency",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Pricing\\Amount\\AmountInterface[]\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_PRIVATE","private",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$optionAmount",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[","]",";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * @var SelectionPriceListProviderInterface\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PRIVATE","private",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$selectionPriceListProvider",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @param CalculatorBase $calculator\n     * @param AmountFactory $amountFactory\n     * @param BundleSelectionFactory $bundleSelectionFactory\n     * @param TaxHelper $taxHelper\n     * @param PriceCurrencyInterface $priceCurrency\n     * @param SelectionPriceListProviderInterface|null $selectionPriceListProvider\n     *\/",63],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","__construct",71],"(",["T_WHITESPACE","\n        ",71],["T_STRING","CalculatorBase",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$calculator",72],",",["T_WHITESPACE","\n        ",72],["T_STRING","AmountFactory",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$amountFactory",73],",",["T_WHITESPACE","\n        ",73],["T_STRING","BundleSelectionFactory",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$bundleSelectionFactory",74],",",["T_WHITESPACE","\n        ",74],["T_STRING","TaxHelper",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$taxHelper",75],",",["T_WHITESPACE","\n        ",75],["T_STRING","PriceCurrencyInterface",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$priceCurrency",76],",",["T_WHITESPACE","\n        ",76],["T_STRING","SelectionPriceListProviderInterface",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$selectionPriceListProvider",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],["T_WHITESPACE","\n    ",77],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","calculator",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$calculator",79],";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","amountFactory",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$amountFactory",80],";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","selectionFactory",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$bundleSelectionFactory",81],";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","taxHelper",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$taxHelper",82],";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","priceCurrency",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$priceCurrency",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","selectionPriceListProvider",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$selectionPriceListProvider",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Get amount for current product which is included price of existing options with minimal price\n     *\n     * @param float|string $amount\n     * @param SaleableInterface $saleableItem\n     * @param null|bool|string|array $exclude\n     * @param null|array $context\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",87],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getAmount",97],"(",["T_VARIABLE","$amount",97],",",["T_WHITESPACE"," ",97],["T_STRING","SaleableInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$saleableItem",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$exclude",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","null",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$context",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],"[","]",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getOptionsAmount",99],"(",["T_VARIABLE","$saleableItem",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$exclude",99],",",["T_WHITESPACE"," ",99],["T_STRING","true",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$amount",99],")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Get amount for current product which is included price of existing options with maximal price\n     *\n     * @param float $amount\n     * @param Product $saleableItem\n     * @param null|bool|string|array $exclude\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     *\/",102],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","getMinRegularAmount",110],"(",["T_VARIABLE","$amount",110],",",["T_WHITESPACE"," ",110],["T_STRING","Product",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$saleableItem",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$exclude",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","null",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getOptionsAmount",112],"(",["T_VARIABLE","$saleableItem",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$exclude",112],",",["T_WHITESPACE"," ",112],["T_STRING","true",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$amount",112],",",["T_WHITESPACE"," ",112],["T_STRING","true",112],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Get amount for current product which is included price of existing options with maximal price\n     *\n     * @param float $amount\n     * @param Product $saleableItem\n     * @param null|bool|string|array $exclude\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     *\/",115],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getMaxAmount",123],"(",["T_VARIABLE","$amount",123],",",["T_WHITESPACE"," ",123],["T_STRING","Product",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$saleableItem",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$exclude",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","null",123],")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getOptionsAmount",125],"(",["T_VARIABLE","$saleableItem",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$exclude",125],",",["T_WHITESPACE"," ",125],["T_STRING","false",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$amount",125],")",";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Get amount for current product which is included price of existing options with maximal price\n     *\n     * @param float $amount\n     * @param Product $saleableItem\n     * @param null|bool|string|array $exclude\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     *\/",128],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","getMaxRegularAmount",136],"(",["T_VARIABLE","$amount",136],",",["T_WHITESPACE"," ",136],["T_STRING","Product",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$saleableItem",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$exclude",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","null",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getOptionsAmount",138],"(",["T_VARIABLE","$saleableItem",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$exclude",138],",",["T_WHITESPACE"," ",138],["T_STRING","false",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$amount",138],",",["T_WHITESPACE"," ",138],["T_STRING","true",138],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Option amount calculation for bundle product\n     *\n     * @param Product $saleableItem\n     * @param null|bool|string|array $exclude\n     * @param bool $searchMin\n     * @param float $baseAmount\n     * @param bool $useRegularPrice\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     *\/",141],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","getOptionsAmount",151],"(",["T_WHITESPACE","\n        ",151],["T_STRING","Product",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$saleableItem",152],",",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$exclude",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","null",153],",",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$searchMin",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","true",154],",",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$baseAmount",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_DNUMBER","0.",155],",",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$useRegularPrice",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","false",156],["T_WHITESPACE","\n    ",156],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$cacheKey",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","implode",158],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",158],",",["T_WHITESPACE"," ",158],"[",["T_VARIABLE","$saleableItem",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getId",158],"(",")",",",["T_WHITESPACE"," ",158],["T_VARIABLE","$exclude",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$searchMin",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$baseAmount",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$useRegularPrice",158],"]",")",";",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_ISSET","isset",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","optionAmount",159],"[",["T_VARIABLE","$cacheKey",159],"]",")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","optionAmount",160],"[",["T_VARIABLE","$cacheKey",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","calculateBundleAmount",160],"(",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$baseAmount",161],",",["T_WHITESPACE","\n                ",161],["T_VARIABLE","$saleableItem",162],",",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getSelectionAmounts",163],"(",["T_VARIABLE","$saleableItem",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$searchMin",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$useRegularPrice",163],")",",",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$exclude",164],["T_WHITESPACE","\n            ",164],")",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n\n        ",166],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","optionAmount",168],"[",["T_VARIABLE","$cacheKey",168],"]",";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Get base amount without option\n     *\n     * @param float $amount\n     * @param Product $saleableItem\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface|void\n     *\/",171],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","getAmountWithoutOption",178],"(",["T_VARIABLE","$amount",178],",",["T_WHITESPACE"," ",178],["T_STRING","Product",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$saleableItem",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","calculateBundleAmount",180],"(",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$amount",181],",",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$saleableItem",182],",",["T_WHITESPACE","\n            ",182],"[","]",["T_WHITESPACE","\n        ",183],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Filter all options for bundle product\n     *\n     * @param Product $bundleProduct\n     * @param bool $searchMin\n     * @param bool $useRegularPrice\n     * @return array\n     *\/",187],["T_WHITESPACE","\n    ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","getSelectionAmounts",195],"(",["T_STRING","Product",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$bundleProduct",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$searchMin",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$useRegularPrice",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","false",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getSelectionPriceListProvider",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","getPriceList",197],"(",["T_VARIABLE","$bundleProduct",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$searchMin",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$useRegularPrice",197],")",";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * @return SelectionPriceListProviderInterface\n     * @deprecated\n     *\/",200],["T_WHITESPACE","\n    ",203],["T_PRIVATE","private",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","getSelectionPriceListProvider",204],"(",")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_STRING","null",206],["T_WHITESPACE"," ",206],["T_IS_IDENTICAL","===",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","selectionPriceListProvider",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","selectionPriceListProvider",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Magento",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Framework",207],["T_NS_SEPARATOR","\\",207],["T_STRING","App",207],["T_NS_SEPARATOR","\\",207],["T_STRING","ObjectManager",207],["T_DOUBLE_COLON","::",207],["T_STRING","getInstance",207],"(",")",["T_WHITESPACE","\n                ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","get",208],"(",["T_STRING","SelectionPriceListProviderInterface",208],["T_DOUBLE_COLON","::",208],["T_CLASS","class",208],")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n\n        ",209],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","selectionPriceListProvider",211],";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Check this option if it should be skipped\n     *\n     * @param \\Magento\\Bundle\\Model\\Option $option\n     * @param bool $canSkipRequiredOption\n     * @return bool\n     * @deprecated\n     *\/",214],["T_WHITESPACE","\n    ",221],["T_PROTECTED","protected",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","canSkipOption",222],"(",["T_VARIABLE","$option",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$canSkipRequiredOption",222],")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],"!",["T_VARIABLE","$option",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getSelections",224],"(",")",["T_WHITESPACE"," ",224],["T_BOOLEAN_OR","||",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$canSkipRequiredOption",224],["T_WHITESPACE"," ",224],["T_BOOLEAN_AND","&&",224],["T_WHITESPACE"," ",224],"!",["T_VARIABLE","$option",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getRequired",224],"(",")",")",";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Check the bundle product for availability of required options\n     *\n     * @param Product $bundleProduct\n     * @return bool\n     * @deprecated\n     *\/",227],["T_WHITESPACE","\n    ",233],["T_PROTECTED","protected",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","hasRequiredOption",234],"(",["T_VARIABLE","$bundleProduct",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$options",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","array_filter",236],"(",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getBundleOptions",237],"(",["T_VARIABLE","$bundleProduct",237],")",",",["T_WHITESPACE","\n            ",237],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$item",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$item",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getRequired",239],"(",")",";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n        ",240],")",";",["T_WHITESPACE","\n        ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],"!",["T_EMPTY","empty",242],"(",["T_VARIABLE","$options",242],")",";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * Get bundle options\n     *\n     * @param Product $saleableItem\n     * @return \\Magento\\Bundle\\Model\\ResourceModel\\Option\\Collection\n     * @deprecated\n     *\/",245],["T_WHITESPACE","\n    ",251],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","getBundleOptions",252],"(",["T_STRING","Product",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$saleableItem",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_DOC_COMMENT","\/** @var \\Magento\\Bundle\\Pricing\\Price\\BundleOptionPrice $bundlePrice *\/",254],["T_WHITESPACE","\n        ",254],["T_VARIABLE","$bundlePrice",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$saleableItem",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getPriceInfo",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getPrice",255],"(",["T_WHITESPACE","\n            ",255],["T_NS_SEPARATOR","\\",256],["T_STRING","Magento",256],["T_NS_SEPARATOR","\\",256],["T_STRING","Bundle",256],["T_NS_SEPARATOR","\\",256],["T_STRING","Pricing",256],["T_NS_SEPARATOR","\\",256],["T_STRING","Price",256],["T_NS_SEPARATOR","\\",256],["T_STRING","BundleOptionPrice",256],["T_DOUBLE_COLON","::",256],["T_STRING","PRICE_CODE",256],["T_WHITESPACE","\n        ",256],")",";",["T_WHITESPACE","\n        ",257],["T_RETURN","return",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$bundlePrice",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getOptions",258],"(",")",";",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n\n    ",259],["T_DOC_COMMENT","\/**\n     * Calculate amount for bundle product with all selection prices\n     *\n     * @param float $basePriceValue\n     * @param Product $bundleProduct\n     * @param \\Magento\\Bundle\\Pricing\\Price\\BundleSelectionPrice[] $selectionPriceList\n     * @param null|bool|string|array $exclude\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     *\/",261],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","calculateBundleAmount",270],"(",["T_VARIABLE","$basePriceValue",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$bundleProduct",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$selectionPriceList",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$exclude",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","null",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$bundleProduct",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getPriceType",272],"(",")",["T_WHITESPACE"," ",272],["T_IS_EQUAL","==",272],["T_WHITESPACE"," ",272],["T_STRING","Price",272],["T_DOUBLE_COLON","::",272],["T_STRING","PRICE_TYPE_FIXED",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","calculateFixedBundleAmount",273],"(",["T_VARIABLE","$basePriceValue",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$bundleProduct",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$selectionPriceList",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$exclude",273],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE"," ",274],["T_ELSE","else",274],["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","calculateDynamicBundleAmount",275],"(",["T_VARIABLE","$basePriceValue",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$bundleProduct",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$selectionPriceList",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$exclude",275],")",";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Calculate amount for fixed bundle product\n     *\n     * @param float $basePriceValue\n     * @param Product $bundleProduct\n     * @param \\Magento\\Bundle\\Pricing\\Price\\BundleSelectionPrice[] $selectionPriceList\n     * @param null|bool|string|arrayy $exclude\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     *\/",279],["T_WHITESPACE","\n    ",287],["T_PROTECTED","protected",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","calculateFixedBundleAmount",288],"(",["T_VARIABLE","$basePriceValue",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$bundleProduct",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$selectionPriceList",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$exclude",288],")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$fullAmount",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$basePriceValue",290],";",["T_WHITESPACE","\n        ",290],["T_DOC_COMMENT","\/** @var $option \\Magento\\Bundle\\Model\\Option *\/",291],["T_WHITESPACE","\n        ",291],["T_FOREACH","foreach",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$selectionPriceList",292],["T_WHITESPACE"," ",292],["T_AS","as",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$selectionPrice",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$fullAmount",293],["T_WHITESPACE"," ",293],["T_PLUS_EQUAL","+=",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$selectionPrice",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getValue",293],"(",")",["T_WHITESPACE"," ",293],"*",["T_WHITESPACE"," ",293],["T_VARIABLE","$selectionPrice",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getQuantity",293],"(",")",")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n        ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","calculator",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getAmount",295],"(",["T_VARIABLE","$fullAmount",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$bundleProduct",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$exclude",295],")",";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_DOC_COMMENT","\/**\n     * Calculate amount for dynamic bundle product\n     *\n     * @param float $basePriceValue\n     * @param Product $bundleProduct\n     * @param \\Magento\\Bundle\\Pricing\\Price\\BundleSelectionPrice[] $selectionPriceList\n     * @param null|bool|string|array $exclude\n     * @return \\Magento\\Framework\\Pricing\\Amount\\AmountInterface\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",298],["T_WHITESPACE","\n    ",307],["T_PROTECTED","protected",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","calculateDynamicBundleAmount",308],"(",["T_VARIABLE","$basePriceValue",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$bundleProduct",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$selectionPriceList",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$exclude",308],")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$fullAmount",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_DNUMBER","0.",310],";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$adjustments",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],"[","]",";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$i",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_LNUMBER","0",312],";",["T_WHITESPACE","\n\n        ",312],["T_VARIABLE","$amountList",314],"[",["T_VARIABLE","$i",314],"]","[",["T_CONSTANT_ENCAPSED_STRING","'amount'",314],"]",["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","calculator",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getAmount",314],"(",["T_VARIABLE","$basePriceValue",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$bundleProduct",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$exclude",314],")",";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$amountList",315],"[",["T_VARIABLE","$i",315],"]","[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",315],"]",["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_LNUMBER","1",315],";",["T_WHITESPACE","\n\n        ",315],["T_FOREACH","foreach",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$selectionPriceList",317],["T_WHITESPACE"," ",317],["T_AS","as",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$selectionPrice",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_INC","++",318],["T_VARIABLE","$i",318],";",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$amountList",319],"[",["T_VARIABLE","$i",319],"]","[",["T_CONSTANT_ENCAPSED_STRING","'amount'",319],"]",["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$selectionPrice",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getAmount",319],"(",")",";",["T_WHITESPACE","\n            ",319],["T_COMMENT","\/\/ always honor the quantity given\n",320],["T_WHITESPACE","            ",321],["T_VARIABLE","$amountList",321],"[",["T_VARIABLE","$i",321],"]","[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",321],"]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$selectionPrice",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getQuantity",321],"(",")",";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n\n        ",322],["T_DOC_COMMENT","\/** @var  Store $store *\/",324],["T_WHITESPACE","\n        ",324],["T_VARIABLE","$store",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$bundleProduct",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getStore",325],"(",")",";",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$roundingMethod",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","taxHelper",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getCalculationAlgorithm",326],"(",["T_VARIABLE","$store",326],")",";",["T_WHITESPACE","\n        ",326],["T_FOREACH","foreach",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$amountList",327],["T_WHITESPACE"," ",327],["T_AS","as",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$amountInfo",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Pricing\\Amount\\AmountInterface $itemAmount *\/",328],["T_WHITESPACE","\n            ",328],["T_VARIABLE","$itemAmount",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$amountInfo",329],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",329],"]",";",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$qty",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$amountInfo",330],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",330],"]",";",["T_WHITESPACE","\n\n            ",330],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$roundingMethod",332],["T_WHITESPACE"," ",332],["T_IS_NOT_EQUAL","!=",332],["T_WHITESPACE"," ",332],["T_STRING","TaxCalculationInterface",332],["T_DOUBLE_COLON","::",332],["T_STRING","CALC_TOTAL_BASE",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                ",332],["T_COMMENT","\/\/We need to round the individual selection first\n",333],["T_WHITESPACE","                ",334],["T_VARIABLE","$fullAmount",334],["T_WHITESPACE"," ",334],["T_PLUS_EQUAL","+=",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","priceCurrency",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","round",334],"(",["T_VARIABLE","$itemAmount",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getValue",334],"(",")",")",["T_WHITESPACE"," ",334],"*",["T_WHITESPACE"," ",334],["T_VARIABLE","$qty",334],")",";",["T_WHITESPACE","\n                ",334],["T_FOREACH","foreach",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$itemAmount",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getAdjustmentAmounts",335],"(",")",["T_WHITESPACE"," ",335],["T_AS","as",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$code",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$adjustment",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n                    ",335],["T_VARIABLE","$adjustment",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","priceCurrency",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","round",336],"(",["T_VARIABLE","$adjustment",336],")",["T_WHITESPACE"," ",336],"*",["T_WHITESPACE"," ",336],["T_VARIABLE","$qty",336],";",["T_WHITESPACE","\n                    ",336],["T_VARIABLE","$adjustments",337],"[",["T_VARIABLE","$code",337],"]",["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_ISSET","isset",337],"(",["T_VARIABLE","$adjustments",337],"[",["T_VARIABLE","$code",337],"]",")",["T_WHITESPACE"," ",337],"?",["T_WHITESPACE"," ",337],["T_VARIABLE","$adjustments",337],"[",["T_VARIABLE","$code",337],"]",["T_WHITESPACE"," ",337],"+",["T_WHITESPACE"," ",337],["T_VARIABLE","$adjustment",337],["T_WHITESPACE"," ",337],":",["T_WHITESPACE"," ",337],["T_VARIABLE","$adjustment",337],";",["T_WHITESPACE","\n                ",337],"}",["T_WHITESPACE","\n            ",338],"}",["T_WHITESPACE"," ",339],["T_ELSE","else",339],["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n                ",339],["T_VARIABLE","$fullAmount",340],["T_WHITESPACE"," ",340],["T_PLUS_EQUAL","+=",340],["T_WHITESPACE"," ",340],"(",["T_VARIABLE","$itemAmount",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getValue",340],"(",")",["T_WHITESPACE"," ",340],"*",["T_WHITESPACE"," ",340],["T_VARIABLE","$qty",340],")",";",["T_WHITESPACE","\n                ",340],["T_FOREACH","foreach",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$itemAmount",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getAdjustmentAmounts",341],"(",")",["T_WHITESPACE"," ",341],["T_AS","as",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$code",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$adjustment",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n                    ",341],["T_VARIABLE","$adjustment",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$adjustment",342],["T_WHITESPACE"," ",342],"*",["T_WHITESPACE"," ",342],["T_VARIABLE","$qty",342],";",["T_WHITESPACE","\n                    ",342],["T_VARIABLE","$adjustments",343],"[",["T_VARIABLE","$code",343],"]",["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_ISSET","isset",343],"(",["T_VARIABLE","$adjustments",343],"[",["T_VARIABLE","$code",343],"]",")",["T_WHITESPACE"," ",343],"?",["T_WHITESPACE"," ",343],["T_VARIABLE","$adjustments",343],"[",["T_VARIABLE","$code",343],"]",["T_WHITESPACE"," ",343],"+",["T_WHITESPACE"," ",343],["T_VARIABLE","$adjustment",343],["T_WHITESPACE"," ",343],":",["T_WHITESPACE"," ",343],["T_VARIABLE","$adjustment",343],";",["T_WHITESPACE","\n                ",343],"}",["T_WHITESPACE","\n            ",344],"}",["T_WHITESPACE","\n        ",345],"}",["T_WHITESPACE","\n        ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_STRING","is_array",347],"(",["T_VARIABLE","$exclude",347],")",["T_WHITESPACE"," ",347],["T_IS_EQUAL","==",347],["T_WHITESPACE"," ",347],["T_STRING","false",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n            ",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$exclude",348],["T_WHITESPACE"," ",348],["T_BOOLEAN_AND","&&",348],["T_WHITESPACE"," ",348],["T_ISSET","isset",348],"(",["T_VARIABLE","$adjustments",348],"[",["T_VARIABLE","$exclude",348],"]",")",")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n                ",348],["T_VARIABLE","$fullAmount",349],["T_WHITESPACE"," ",349],["T_MINUS_EQUAL","-=",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$adjustments",349],"[",["T_VARIABLE","$exclude",349],"]",";",["T_WHITESPACE","\n                ",349],["T_UNSET","unset",350],"(",["T_VARIABLE","$adjustments",350],"[",["T_VARIABLE","$exclude",350],"]",")",";",["T_WHITESPACE","\n            ",350],"}",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE"," ",352],["T_ELSE","else",352],["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_FOREACH","foreach",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$exclude",353],["T_WHITESPACE"," ",353],["T_AS","as",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$oneExclusion",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(",["T_VARIABLE","$oneExclusion",354],["T_WHITESPACE"," ",354],["T_BOOLEAN_AND","&&",354],["T_WHITESPACE"," ",354],["T_ISSET","isset",354],"(",["T_VARIABLE","$adjustments",354],"[",["T_VARIABLE","$oneExclusion",354],"]",")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n                    ",354],["T_VARIABLE","$fullAmount",355],["T_WHITESPACE"," ",355],["T_MINUS_EQUAL","-=",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$adjustments",355],"[",["T_VARIABLE","$oneExclusion",355],"]",";",["T_WHITESPACE","\n                    ",355],["T_UNSET","unset",356],"(",["T_VARIABLE","$adjustments",356],"[",["T_VARIABLE","$oneExclusion",356],"]",")",";",["T_WHITESPACE","\n                ",356],"}",["T_WHITESPACE","\n            ",357],"}",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE","\n        ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","amountFactory",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","create",360],"(",["T_VARIABLE","$fullAmount",360],",",["T_WHITESPACE"," ",360],["T_VARIABLE","$adjustments",360],")",";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * Create selection price list for the retrieved options\n     *\n     * @param \\Magento\\Bundle\\Model\\Option $option\n     * @param Product $bundleProduct\n     * @param bool $useRegularPrice\n     * @return \\Magento\\Bundle\\Pricing\\Price\\BundleSelectionPrice[]\n     *\/",363],["T_WHITESPACE","\n    ",370],["T_PUBLIC","public",371],["T_WHITESPACE"," ",371],["T_FUNCTION","function",371],["T_WHITESPACE"," ",371],["T_STRING","createSelectionPriceList",371],"(",["T_VARIABLE","$option",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$bundleProduct",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$useRegularPrice",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","false",371],")",["T_WHITESPACE","\n    ",371],"{",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$priceList",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],"[","]",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$selections",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$option",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getSelections",374],"(",")",";",["T_WHITESPACE","\n        ",374],["T_IF","if",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$selections",375],["T_WHITESPACE"," ",375],["T_IS_IDENTICAL","===",375],["T_WHITESPACE"," ",375],["T_STRING","null",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n            ",375],["T_RETURN","return",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$priceList",376],";",["T_WHITESPACE","\n        ",376],"}",["T_WHITESPACE","\n        ",377],["T_COMMENT","\/* @var $selection \\Magento\\Bundle\\Model\\Selection|\\Magento\\Catalog\\Model\\Product *\/",378],["T_WHITESPACE","\n        ",378],["T_FOREACH","foreach",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$selections",379],["T_WHITESPACE"," ",379],["T_AS","as",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$selection",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_IF","if",380],["T_WHITESPACE"," ",380],"(","!",["T_VARIABLE","$selection",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","isSalable",380],"(",")",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n                ",380],["T_COMMENT","\/\/ @todo CatalogInventory Show out of stock Products\n",381],["T_WHITESPACE","                ",382],["T_CONTINUE","continue",382],";",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE","\n            ",383],["T_VARIABLE","$priceList",384],"[","]",["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","selectionFactory",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","create",384],"(",["T_WHITESPACE","\n                ",384],["T_VARIABLE","$bundleProduct",385],",",["T_WHITESPACE","\n                ",385],["T_VARIABLE","$selection",386],",",["T_WHITESPACE","\n                ",386],["T_VARIABLE","$selection",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getSelectionQty",387],"(",")",",",["T_WHITESPACE","\n                ",387],"[",["T_WHITESPACE","\n                    ",388],["T_CONSTANT_ENCAPSED_STRING","'useRegularPrice'",389],["T_WHITESPACE"," ",389],["T_DOUBLE_ARROW","=>",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$useRegularPrice",389],",",["T_WHITESPACE","\n                ",389],"]",["T_WHITESPACE","\n            ",390],")",";",["T_WHITESPACE","\n        ",391],"}",["T_WHITESPACE","\n        ",392],["T_RETURN","return",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$priceList",393],";",["T_WHITESPACE","\n    ",393],"}",["T_WHITESPACE","\n\n    ",394],["T_DOC_COMMENT","\/**\n     * Find minimal or maximal price for existing options\n     *\n     * @param \\Magento\\Bundle\\Model\\Option $option\n     * @param \\Magento\\Bundle\\Pricing\\Price\\BundleSelectionPrice[] $selectionPriceList\n     * @param bool $searchMin\n     * @return \\Magento\\Bundle\\Pricing\\Price\\BundleSelectionPrice[]\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",396],["T_WHITESPACE","\n    ",404],["T_PUBLIC","public",405],["T_WHITESPACE"," ",405],["T_FUNCTION","function",405],["T_WHITESPACE"," ",405],["T_STRING","processOptions",405],"(",["T_VARIABLE","$option",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$selectionPriceList",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$searchMin",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","true",405],")",["T_WHITESPACE","\n    ",405],"{",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$result",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],"[","]",";",["T_WHITESPACE","\n        ",407],["T_FOREACH","foreach",408],["T_WHITESPACE"," ",408],"(",["T_VARIABLE","$selectionPriceList",408],["T_WHITESPACE"," ",408],["T_AS","as",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$current",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n            ",408],["T_VARIABLE","$qty",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$current",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getQuantity",409],"(",")",";",["T_WHITESPACE","\n            ",409],["T_VARIABLE","$currentValue",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$current",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getAmount",410],"(",")",["T_OBJECT_OPERATOR","->",410],["T_STRING","getValue",410],"(",")",["T_WHITESPACE"," ",410],"*",["T_WHITESPACE"," ",410],["T_VARIABLE","$qty",410],";",["T_WHITESPACE","\n            ",410],["T_IF","if",411],["T_WHITESPACE"," ",411],"(",["T_EMPTY","empty",411],"(",["T_VARIABLE","$result",411],")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n                ",411],["T_VARIABLE","$result",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],"[",["T_VARIABLE","$current",412],"]",";",["T_WHITESPACE","\n            ",412],"}",["T_WHITESPACE"," ",413],["T_ELSE","else",413],["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n                ",413],["T_VARIABLE","$lastSelectionPrice",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_STRING","end",414],"(",["T_VARIABLE","$result",414],")",";",["T_WHITESPACE","\n                ",414],["T_VARIABLE","$lastValue",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$lastSelectionPrice",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getAmount",415],"(",")",["T_OBJECT_OPERATOR","->",415],["T_STRING","getValue",415],"(",")",["T_WHITESPACE"," ",415],"*",["T_WHITESPACE"," ",415],["T_VARIABLE","$lastSelectionPrice",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getQuantity",415],"(",")",";",["T_WHITESPACE","\n                ",415],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$searchMin",416],["T_WHITESPACE"," ",416],["T_BOOLEAN_AND","&&",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$lastValue",416],["T_WHITESPACE"," ",416],">",["T_WHITESPACE"," ",416],["T_VARIABLE","$currentValue",416],")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n                    ",416],["T_VARIABLE","$result",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],"[",["T_VARIABLE","$current",417],"]",";",["T_WHITESPACE","\n                ",417],"}",["T_WHITESPACE"," ",418],["T_ELSEIF","elseif",418],["T_WHITESPACE"," ",418],"(","!",["T_VARIABLE","$searchMin",418],["T_WHITESPACE"," ",418],["T_BOOLEAN_AND","&&",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$option",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","isMultiSelection",418],"(",")",")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n                    ",418],["T_VARIABLE","$result",419],"[","]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$current",419],";",["T_WHITESPACE","\n                ",419],"}",["T_WHITESPACE"," ",420],["T_ELSEIF","elseif",420],["T_WHITESPACE"," ",420],"(","!",["T_VARIABLE","$searchMin",420],["T_WHITESPACE","\n                    ",420],["T_BOOLEAN_AND","&&",421],["T_WHITESPACE"," ",421],"!",["T_VARIABLE","$option",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","isMultiSelection",421],"(",")",["T_WHITESPACE","\n                    ",421],["T_BOOLEAN_AND","&&",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$lastValue",422],["T_WHITESPACE"," ",422],"<",["T_WHITESPACE"," ",422],["T_VARIABLE","$currentValue",422],["T_WHITESPACE","\n                ",422],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n                    ",423],["T_VARIABLE","$result",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],"[",["T_VARIABLE","$current",424],"]",";",["T_WHITESPACE","\n                ",424],"}",["T_WHITESPACE","\n            ",425],"}",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE","\n        ",427],["T_RETURN","return",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$result",428],";",["T_WHITESPACE","\n    ",428],"}",["T_WHITESPACE","\n",429],"}",["T_WHITESPACE","\n",430]]
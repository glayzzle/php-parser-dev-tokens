[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Paypal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Express",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Checkout",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Controller",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Express",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RedirectLoginInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Action",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Action",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","AppAction",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Abstract Express Checkout Controller\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",14],["T_ABSTRACT","abstract",15],["T_WHITESPACE"," ",15],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","AbstractExpress",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","AppAction",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","RedirectLoginInterface",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Express\\Checkout\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_checkout",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Internal cache of checkout models\n     *\n     * @var array\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_checkoutTypes",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[","]",";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Config\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_config",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_quote",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","false",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Config mode type\n     *\n     * @var string\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_configType",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Config method type\n     *\n     * @var string\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_configMethod",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Checkout mode type\n     *\n     * @var string\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_checkoutType",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_customerSession",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\Session\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_checkoutSession",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\OrderFactory\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_orderFactory",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Express\\Checkout\\Factory\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_checkoutFactory",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Session\\Generic\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$_paypalSession",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Url\\Helper\n     *\/",85],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_urlHelper",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Url\n     *\/",90],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$_customerUrl",93],";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Action\\Context $context\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Checkout\\Model\\Session $checkoutSession\n     * @param \\Magento\\Sales\\Model\\OrderFactory $orderFactory\n     * @param \\Magento\\Paypal\\Model\\Express\\Checkout\\Factory $checkoutFactory\n     * @param \\Magento\\Framework\\Session\\Generic $paypalSession\n     * @param \\Magento\\Framework\\Url\\Helper\\Data $urlHelper\n     * @param \\Magento\\Customer\\Model\\Url $customerUrl\n     *\/",95],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","__construct",105],"(",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Framework",106],["T_NS_SEPARATOR","\\",106],["T_STRING","App",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Action",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Context",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$context",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Customer",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Model",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Session",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$customerSession",107],",",["T_WHITESPACE","\n        ",107],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Checkout",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Model",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Session",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$checkoutSession",108],",",["T_WHITESPACE","\n        ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Sales",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Model",109],["T_NS_SEPARATOR","\\",109],["T_STRING","OrderFactory",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$orderFactory",109],",",["T_WHITESPACE","\n        ",109],["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Paypal",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Model",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Express",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Checkout",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Factory",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$checkoutFactory",110],",",["T_WHITESPACE","\n        ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Session",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Generic",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$paypalSession",111],",",["T_WHITESPACE","\n        ",111],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Framework",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Url",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Helper",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Data",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$urlHelper",112],",",["T_WHITESPACE","\n        ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Customer",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Model",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Url",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$customerUrl",113],["T_WHITESPACE","\n    ",113],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_customerSession",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$customerSession",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_checkoutSession",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$checkoutSession",116],";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_orderFactory",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$orderFactory",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_checkoutFactory",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$checkoutFactory",118],";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_paypalSession",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$paypalSession",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_urlHelper",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$urlHelper",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_customerUrl",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$customerUrl",121],";",["T_WHITESPACE","\n        ",121],["T_STRING","parent",122],["T_DOUBLE_COLON","::",122],["T_STRING","__construct",122],"(",["T_VARIABLE","$context",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$parameters",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],"[",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_configMethod",123],"]","]",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_config",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_objectManager",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","create",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_configType",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$parameters",124],")",";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Instantiate quote and checkout\n     *\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",127],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","_initCheckout",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$quote",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getQuote",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_VARIABLE","$quote",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","hasItems",136],"(",")",["T_WHITESPACE"," ",136],["T_BOOLEAN_OR","||",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$quote",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getHasError",136],"(",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getResponse",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","setStatusHeader",137],"(",["T_LNUMBER","403",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'1.1'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'Forbidden'",137],")",";",["T_WHITESPACE","\n            ",137],["T_THROW","throw",138],["T_WHITESPACE"," ",138],["T_NEW","new",138],["T_WHITESPACE"," ",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Magento",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Framework",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Exception",138],["T_NS_SEPARATOR","\\",138],["T_STRING","LocalizedException",138],"(",["T_STRING","__",138],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t initialize Express Checkout.'",138],")",")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_ISSET","isset",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_checkoutTypes",140],"[",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_checkoutType",140],"]",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$parameters",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],"[",["T_WHITESPACE","\n                ",141],["T_CONSTANT_ENCAPSED_STRING","'params'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],"[",["T_WHITESPACE","\n                    ",142],["T_CONSTANT_ENCAPSED_STRING","'quote'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$quote",143],",",["T_WHITESPACE","\n                    ",143],["T_CONSTANT_ENCAPSED_STRING","'config'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_config",144],",",["T_WHITESPACE","\n                ",144],"]",",",["T_WHITESPACE","\n            ",145],"]",";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_checkoutTypes",147],"[",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_checkoutType",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_checkoutFactory",147],["T_WHITESPACE","\n                ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","create",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_checkoutType",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$parameters",148],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_checkout",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_checkoutTypes",150],"[",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_checkoutType",150],"]",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Search for proper checkout token in request or session or (un)set specified one\n     * Combined getter\/setter\n     *\n     * @param string|null $setToken\n     * @return $this|string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",153],["T_WHITESPACE","\n    ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","_initToken",161],"(",["T_VARIABLE","$setToken",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","null",161],")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_STRING","null",163],["T_WHITESPACE"," ",163],["T_IS_NOT_IDENTICAL","!==",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$setToken",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_STRING","false",164],["T_WHITESPACE"," ",164],["T_IS_IDENTICAL","===",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$setToken",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                ",164],["T_COMMENT","\/\/ security measure for avoid unsetting token twice\n",165],["T_WHITESPACE","                ",166],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_getSession",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","getExpressCheckoutToken",166],"(",")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                    ",166],["T_THROW","throw",167],["T_WHITESPACE"," ",167],["T_NEW","new",167],["T_WHITESPACE"," ",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Magento",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Framework",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Exception",167],["T_NS_SEPARATOR","\\",167],["T_STRING","LocalizedException",167],"(",["T_WHITESPACE","\n                        ",167],["T_STRING","__",168],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal Express Checkout Token does not exist.'",168],")",["T_WHITESPACE","\n                    ",168],")",";",["T_WHITESPACE","\n                ",169],"}",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_getSession",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","unsExpressCheckoutToken",171],"(",")",";",["T_WHITESPACE","\n            ",171],"}",["T_WHITESPACE"," ",172],["T_ELSE","else",172],["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_getSession",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","setExpressCheckoutToken",173],"(",["T_VARIABLE","$setToken",173],")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n            ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$setToken",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getRequest",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getParam",177],"(",["T_CONSTANT_ENCAPSED_STRING","'token'",177],")",";",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$setToken",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$setToken",179],["T_WHITESPACE"," ",179],["T_IS_NOT_IDENTICAL","!==",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_getSession",179],"(",")",["T_OBJECT_OPERATOR","->",179],["T_STRING","getExpressCheckoutToken",179],"(",")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_THROW","throw",180],["T_WHITESPACE"," ",180],["T_NEW","new",180],["T_WHITESPACE"," ",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Magento",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Framework",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Exception",180],["T_NS_SEPARATOR","\\",180],["T_STRING","LocalizedException",180],"(",["T_WHITESPACE","\n                    ",180],["T_STRING","__",181],"(",["T_CONSTANT_ENCAPSED_STRING","'A wrong PayPal Express Checkout Token is specified.'",181],")",["T_WHITESPACE","\n                ",181],")",";",["T_WHITESPACE","\n            ",182],"}",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE"," ",184],["T_ELSE","else",184],["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$setToken",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_getSession",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","getExpressCheckoutToken",185],"(",")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n        ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$setToken",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * PayPal session instance getter\n     *\n     * @return \\Magento\\Framework\\Session\\Generic\n     *\/",190],["T_WHITESPACE","\n    ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","_getSession",195],"(",")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_paypalSession",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Return checkout session object\n     *\n     * @return \\Magento\\Checkout\\Model\\Session\n     *\/",200],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","_getCheckoutSession",205],"(",")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_checkoutSession",207],";",["T_WHITESPACE","\n    ",207],"}",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Return checkout quote object\n     *\n     * @return \\Magento\\Quote\\Model\\Quote\n     *\/",210],["T_WHITESPACE","\n    ",214],["T_PROTECTED","protected",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","_getQuote",215],"(",")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_IF","if",217],["T_WHITESPACE"," ",217],"(","!",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_quote",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_quote",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_getCheckoutSession",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getQuote",218],"(",")",";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_quote",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Returns before_auth_url redirect parameter for customer session\n     * @return null\n     *\/",223],["T_WHITESPACE","\n    ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","getCustomerBeforeAuthUrl",227],"(",")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_RETURN","return",229],";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Returns a list of action flags [flag_key] => boolean\n     * @return array\n     *\/",232],["T_WHITESPACE","\n    ",235],["T_PUBLIC","public",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","getActionFlagList",236],"(",")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],"[","]",";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Returns login url parameter for redirect\n     * @return string\n     *\/",241],["T_WHITESPACE","\n    ",244],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","getLoginUrl",245],"(",")",["T_WHITESPACE","\n    ",245],"{",["T_WHITESPACE","\n        ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_customerUrl",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getLoginUrl",247],"(",")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Returns action name which requires redirect\n     * @return string\n     *\/",250],["T_WHITESPACE","\n    ",253],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","getRedirectActionName",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'start'",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Redirect to login page\n     *\n     * @return void\n     *\/",259],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","redirectLogin",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_actionFlag",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","set",266],"(",["T_CONSTANT_ENCAPSED_STRING","''",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'no-dispatch'",266],",",["T_WHITESPACE"," ",266],["T_STRING","true",266],")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_customerSession",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","setBeforeAuthUrl",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_redirect",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getRefererUrl",267],"(",")",")",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getResponse",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","setRedirect",268],"(",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_urlHelper",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","addRequestParam",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_customerUrl",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getLoginUrl",269],"(",")",",",["T_WHITESPACE"," ",269],"[",["T_CONSTANT_ENCAPSED_STRING","'context'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'checkout'",269],"]",")",["T_WHITESPACE","\n        ",269],")",";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n",271],"}",["T_WHITESPACE","\n",272]]
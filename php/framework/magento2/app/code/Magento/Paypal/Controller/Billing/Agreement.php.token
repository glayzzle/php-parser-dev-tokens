[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Paypal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Billing",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RequestInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Billing agreements controller\n *\/",10],["T_WHITESPACE","\n",12],["T_ABSTRACT","abstract",13],["T_WHITESPACE"," ",13],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Agreement",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","App",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Action",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Action",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$_coreRegistry",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_STRING","null",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Action\\Context $context\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     *\/",22],["T_WHITESPACE","\n    ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","__construct",26],"(",["T_WHITESPACE","\n        ",26],["T_NS_SEPARATOR","\\",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Framework",27],["T_NS_SEPARATOR","\\",27],["T_STRING","App",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Action",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Context",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$context",27],",",["T_WHITESPACE","\n        ",27],["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Framework",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Registry",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$coreRegistry",28],["T_WHITESPACE","\n    ",28],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","_coreRegistry",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$coreRegistry",30],";",["T_WHITESPACE","\n        ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","__construct",31],"(",["T_VARIABLE","$context",31],")",";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Check customer authentication\n     *\n     * @param RequestInterface $request\n     * @return \\Magento\\Framework\\App\\ResponseInterface\n     *\/",34],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","dispatch",40],"(",["T_STRING","RequestInterface",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$request",40],")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(","!",["T_VARIABLE","$request",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","isDispatched",42],"(",")",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n            ",42],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_STRING","parent",43],["T_DOUBLE_COLON","::",43],["T_STRING","dispatch",43],"(",["T_VARIABLE","$request",43],")",";",["T_WHITESPACE","\n        ",43],"}",["T_WHITESPACE","\n        ",44],["T_IF","if",45],["T_WHITESPACE"," ",45],"(","!",["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_getSession",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","authenticate",45],"(",")",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_actionFlag",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","set",46],"(",["T_CONSTANT_ENCAPSED_STRING","''",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'no-dispatch'",46],",",["T_WHITESPACE"," ",46],["T_STRING","true",46],")",";",["T_WHITESPACE","\n        ",46],"}",["T_WHITESPACE","\n        ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_STRING","parent",48],["T_DOUBLE_COLON","::",48],["T_STRING","dispatch",48],"(",["T_VARIABLE","$request",48],")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Init billing agreement model from request\n     *\n     * @return \\Magento\\Paypal\\Model\\Billing\\Agreement|false\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","_initAgreement",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$agreementId",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getRequest",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","getParam",58],"(",["T_CONSTANT_ENCAPSED_STRING","'agreement'",58],")",";",["T_WHITESPACE","\n        ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$agreementId",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_DOC_COMMENT","\/** @var \\Magento\\Paypal\\Model\\Billing\\Agreement $billingAgreement *\/",60],["T_WHITESPACE","\n            ",60],["T_VARIABLE","$billingAgreement",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_objectManager",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","create",61],"(",["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Paypal",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Model",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Billing",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Agreement",61],["T_DOUBLE_COLON","::",61],["T_CLASS","class",61],")",["T_WHITESPACE","\n                ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","load",62],"(",["T_VARIABLE","$agreementId",62],")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$currentCustomerId",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_getSession",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getCustomerId",63],"(",")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$agreementCustomerId",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$billingAgreement",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getCustomerId",64],"(",")",";",["T_WHITESPACE","\n            ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$billingAgreement",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getId",65],"(",")",["T_WHITESPACE"," ",65],["T_BOOLEAN_AND","&&",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$agreementCustomerId",65],["T_WHITESPACE"," ",65],["T_IS_EQUAL","==",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$currentCustomerId",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_coreRegistry",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","register",66],"(",["T_CONSTANT_ENCAPSED_STRING","'current_billing_agreement'",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$billingAgreement",66],")",";",["T_WHITESPACE","\n                ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$billingAgreement",67],";",["T_WHITESPACE","\n            ",67],"}",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","messageManager",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","addErrorMessage",70],"(",["T_WHITESPACE","\n            ",70],["T_STRING","__",71],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify the correct billing agreement ID and try again.'",71],")",["T_WHITESPACE","\n        ",71],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_redirect",73],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",73],")",";",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_STRING","false",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Retrieve customer session model\n     *\n     * @return \\Magento\\Customer\\Model\\Session\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","_getSession",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_objectManager",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","get",84],"(",["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Customer",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Model",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Session",84],["T_DOUBLE_COLON","::",84],["T_CLASS","class",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n",85],"}",["T_WHITESPACE","\n",86]]
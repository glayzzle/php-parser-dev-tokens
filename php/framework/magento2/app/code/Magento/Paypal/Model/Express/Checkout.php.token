[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Paypal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Express",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CustomerInterface",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","CustomerDataObject",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Customer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AccountManagement",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ObjectManager",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Paypal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Config",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","PaypalConfig",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","OrderRepositoryInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Order",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Email",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sender",13],["T_NS_SEPARATOR","\\",13],["T_STRING","OrderSender",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Quote",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Quote",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Address",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","DataObject",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Paypal",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Cart",16],["T_WHITESPACE"," ",16],["T_AS","as",16],["T_WHITESPACE"," ",16],["T_STRING","PaypalCart",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Wrapper that performs Paypal Express and Checkout communication\n * Use current Paypal Express method instance\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",18],["T_WHITESPACE","\n",24],["T_CLASS","class",25],["T_WHITESPACE"," ",25],["T_STRING","Checkout",25],["T_WHITESPACE","\n",25],"{",["T_WHITESPACE","\n    ",26],["T_DOC_COMMENT","\/**\n     * Cache ID prefix for \"pal\" lookup\n     * @var string\n     *\/",27],["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","PAL_CACHE_ID",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'paypal_express_checkout_pal'",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Keys for passthrough variables in sales\/quote_payment and sales\/order_payment\n     * Uses additional_information as storage\n     *\/",33],["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","PAYMENT_INFO_TRANSPORT_TOKEN",37],["T_WHITESPACE","    ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'paypal_express_checkout_token'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","PAYMENT_INFO_TRANSPORT_SHIPPING_OVERRIDDEN",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'paypal_express_checkout_shipping_overridden'",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","PAYMENT_INFO_TRANSPORT_SHIPPING_METHOD",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'paypal_express_checkout_shipping_method'",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","PAYMENT_INFO_TRANSPORT_PAYER_ID",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'paypal_express_checkout_payer_id'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","PAYMENT_INFO_TRANSPORT_REDIRECT",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'paypal_express_checkout_redirect_required'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","PAYMENT_INFO_TRANSPORT_BILLING_AGREEMENT",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'paypal_ec_create_ba'",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Flag which says that was used PayPal Express Checkout button for checkout\n     * Uses additional_information as storage\n     * @var string\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","PAYMENT_INFO_BUTTON",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'button'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_quote",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Config instance\n     *\n     * @var PaypalConfig\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_config",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * API instance\n     *\n     * @var \\Magento\\Paypal\\Model\\Api\\Nvp\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_api",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Api Model Type\n     *\n     * @var string\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_apiType",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Paypal",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Model",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Api",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Nvp",75],["T_DOUBLE_COLON","::",75],["T_CLASS","class",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Payment method type\n     *\n     * @var string\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_methodType",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","PaypalConfig",82],["T_DOUBLE_COLON","::",82],["T_STRING","METHOD_WPP_EXPRESS",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * State helper variable\n     *\n     * @var string\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_redirectUrl",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","''",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * State helper variable\n     *\n     * @var string\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$_pendingPaymentMessage",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * State helper variable\n     *\n     * @var string\n     *\/",98],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_checkoutRedirectUrl",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","''",103],";",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",105],["T_WHITESPACE","\n    ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_customerSession",108],";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Redirect urls supposed to be set to support giropay\n     *\n     * @var array\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$_giropayUrls",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],"[","]",";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Create Billing Agreement flag\n     *\n     * @var bool\n     *\/",117],["T_WHITESPACE","\n    ",121],["T_PROTECTED","protected",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$_isBARequested",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","false",122],";",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Flag for Bill Me Later mode\n     *\n     * @var bool\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$_isBml",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","false",129],";",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Customer ID\n     *\n     * @var int\n     *\/",131],["T_WHITESPACE","\n    ",135],["T_PROTECTED","protected",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$_customerId",136],";",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Billing agreement that might be created during order placing\n     *\n     * @var \\Magento\\Paypal\\Model\\Billing\\Agreement\n     *\/",138],["T_WHITESPACE","\n    ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$_billingAgreement",143],";",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Order\n     *\n     * @var \\Magento\\Sales\\Model\\Order\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$_order",150],";",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Cache\\Type\\Config\n     *\/",152],["T_WHITESPACE","\n    ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$_configCacheType",155],";",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Checkout data\n     *\n     * @var \\Magento\\Checkout\\Helper\\Data\n     *\/",157],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$_checkoutData",162],";",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Tax data\n     *\n     * @var \\Magento\\Tax\\Helper\\Data\n     *\/",164],["T_WHITESPACE","\n    ",168],["T_PROTECTED","protected",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$_taxData",169],";",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Customer data\n     *\n     * @var \\Magento\\Customer\\Model\\Url\n     *\/",171],["T_WHITESPACE","\n    ",175],["T_PROTECTED","protected",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$_customerUrl",176],";",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",178],["T_WHITESPACE","\n    ",180],["T_PROTECTED","protected",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$_logger",181],";",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Locale\\ResolverInterface\n     *\/",183],["T_WHITESPACE","\n    ",185],["T_PROTECTED","protected",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$_localeResolver",186],";",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Info\n     *\/",188],["T_WHITESPACE","\n    ",190],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$_paypalInfo",191],";",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",193],["T_WHITESPACE","\n    ",195],["T_PROTECTED","protected",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$_storeManager",196],";",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\UrlInterface\n     *\/",198],["T_WHITESPACE","\n    ",200],["T_PROTECTED","protected",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$_coreUrl",201],";",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\CartFactory\n     *\/",203],["T_WHITESPACE","\n    ",205],["T_PROTECTED","protected",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$_cartFactory",206],";",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\Type\\OnepageFactory\n     *\/",208],["T_WHITESPACE","\n    ",210],["T_PROTECTED","protected",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$_checkoutOnepageFactory",211],";",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Billing\\AgreementFactory\n     *\/",213],["T_WHITESPACE","\n    ",215],["T_PROTECTED","protected",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$_agreementFactory",216],";",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Api\\Type\\Factory\n     *\/",218],["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$_apiTypeFactory",221],";",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DataObject\\Copy\n     *\/",223],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$_objectCopyService",226],";",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\Session\n     *\/",228],["T_WHITESPACE","\n    ",230],["T_PROTECTED","protected",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$_checkoutSession",231],";",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\CustomerRepositoryInterface\n     *\/",233],["T_WHITESPACE","\n    ",235],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$_customerRepository",236],";",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\AccountManagement\n     *\/",238],["T_WHITESPACE","\n    ",240],["T_PROTECTED","protected",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$_accountManagement",241],";",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Encryption\\EncryptorInterface\n     *\/",243],["T_WHITESPACE","\n    ",245],["T_PROTECTED","protected",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$_encryptor",246],";",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Message\\ManagerInterface\n     *\/",248],["T_WHITESPACE","\n    ",250],["T_PROTECTED","protected",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$_messageManager",251],";",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * @var OrderSender\n     *\/",253],["T_WHITESPACE","\n    ",255],["T_PROTECTED","protected",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$orderSender",256],";",["T_WHITESPACE","\n\n    ",256],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Api\\CartRepositoryInterface\n     *\/",258],["T_WHITESPACE","\n    ",260],["T_PROTECTED","protected",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$quoteRepository",261],";",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Api\\CartManagementInterface\n     *\/",263],["T_WHITESPACE","\n    ",265],["T_PROTECTED","protected",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$quoteManagement",266],";",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\TotalsCollector\n     *\/",268],["T_WHITESPACE","\n    ",270],["T_PROTECTED","protected",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$totalsCollector",271],";",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * @var OrderRepositoryInterface\n     *\/",273],["T_WHITESPACE","\n    ",275],["T_PRIVATE","private",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$orderRepository",276],";",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Customer\\Model\\Url $customerUrl\n     * @param \\Magento\\Tax\\Helper\\Data $taxData\n     * @param \\Magento\\Checkout\\Helper\\Data $checkoutData\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\Framework\\App\\Cache\\Type\\Config $configCacheType\n     * @param \\Magento\\Framework\\Locale\\ResolverInterface $localeResolver\n     * @param \\Magento\\Paypal\\Model\\Info $paypalInfo\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\UrlInterface $coreUrl\n     * @param \\Magento\\Paypal\\Model\\CartFactory $cartFactory\n     * @param \\Magento\\Checkout\\Model\\Type\\OnepageFactory $onepageFactory\n     * @param \\Magento\\Quote\\Api\\CartManagementInterface $quoteManagement\n     * @param \\Magento\\Paypal\\Model\\Billing\\AgreementFactory $agreementFactory\n     * @param \\Magento\\Paypal\\Model\\Api\\Type\\Factory $apiTypeFactory\n     * @param DataObject\\Copy $objectCopyService\n     * @param \\Magento\\Checkout\\Model\\Session $checkoutSession\n     * @param \\Magento\\Framework\\Encryption\\EncryptorInterface $encryptor\n     * @param \\Magento\\Framework\\Message\\ManagerInterface $messageManager\n     * @param \\Magento\\Customer\\Api\\CustomerRepositoryInterface $customerRepository\n     * @param AccountManagement $accountManagement\n     * @param OrderSender $orderSender\n     * @param \\Magento\\Quote\\Api\\CartRepositoryInterface $quoteRepository\n     * @param \\Magento\\Quote\\Model\\Quote\\TotalsCollector $totalsCollector\n     * @param array $params\n     * @throws \\Exception\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",278],["T_WHITESPACE","\n    ",306],["T_PUBLIC","public",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","__construct",307],"(",["T_WHITESPACE","\n        ",307],["T_NS_SEPARATOR","\\",308],["T_STRING","Psr",308],["T_NS_SEPARATOR","\\",308],["T_STRING","Log",308],["T_NS_SEPARATOR","\\",308],["T_STRING","LoggerInterface",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$logger",308],",",["T_WHITESPACE","\n        ",308],["T_NS_SEPARATOR","\\",309],["T_STRING","Magento",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Customer",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Model",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Url",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$customerUrl",309],",",["T_WHITESPACE","\n        ",309],["T_NS_SEPARATOR","\\",310],["T_STRING","Magento",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Tax",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Helper",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Data",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$taxData",310],",",["T_WHITESPACE","\n        ",310],["T_NS_SEPARATOR","\\",311],["T_STRING","Magento",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Checkout",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Helper",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Data",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$checkoutData",311],",",["T_WHITESPACE","\n        ",311],["T_NS_SEPARATOR","\\",312],["T_STRING","Magento",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Customer",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Model",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Session",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$customerSession",312],",",["T_WHITESPACE","\n        ",312],["T_NS_SEPARATOR","\\",313],["T_STRING","Magento",313],["T_NS_SEPARATOR","\\",313],["T_STRING","Framework",313],["T_NS_SEPARATOR","\\",313],["T_STRING","App",313],["T_NS_SEPARATOR","\\",313],["T_STRING","Cache",313],["T_NS_SEPARATOR","\\",313],["T_STRING","Type",313],["T_NS_SEPARATOR","\\",313],["T_STRING","Config",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$configCacheType",313],",",["T_WHITESPACE","\n        ",313],["T_NS_SEPARATOR","\\",314],["T_STRING","Magento",314],["T_NS_SEPARATOR","\\",314],["T_STRING","Framework",314],["T_NS_SEPARATOR","\\",314],["T_STRING","Locale",314],["T_NS_SEPARATOR","\\",314],["T_STRING","ResolverInterface",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$localeResolver",314],",",["T_WHITESPACE","\n        ",314],["T_NS_SEPARATOR","\\",315],["T_STRING","Magento",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Paypal",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Model",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Info",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$paypalInfo",315],",",["T_WHITESPACE","\n        ",315],["T_NS_SEPARATOR","\\",316],["T_STRING","Magento",316],["T_NS_SEPARATOR","\\",316],["T_STRING","Store",316],["T_NS_SEPARATOR","\\",316],["T_STRING","Model",316],["T_NS_SEPARATOR","\\",316],["T_STRING","StoreManagerInterface",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$storeManager",316],",",["T_WHITESPACE","\n        ",316],["T_NS_SEPARATOR","\\",317],["T_STRING","Magento",317],["T_NS_SEPARATOR","\\",317],["T_STRING","Framework",317],["T_NS_SEPARATOR","\\",317],["T_STRING","UrlInterface",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$coreUrl",317],",",["T_WHITESPACE","\n        ",317],["T_NS_SEPARATOR","\\",318],["T_STRING","Magento",318],["T_NS_SEPARATOR","\\",318],["T_STRING","Paypal",318],["T_NS_SEPARATOR","\\",318],["T_STRING","Model",318],["T_NS_SEPARATOR","\\",318],["T_STRING","CartFactory",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$cartFactory",318],",",["T_WHITESPACE","\n        ",318],["T_NS_SEPARATOR","\\",319],["T_STRING","Magento",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Checkout",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Model",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Type",319],["T_NS_SEPARATOR","\\",319],["T_STRING","OnepageFactory",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$onepageFactory",319],",",["T_WHITESPACE","\n        ",319],["T_NS_SEPARATOR","\\",320],["T_STRING","Magento",320],["T_NS_SEPARATOR","\\",320],["T_STRING","Quote",320],["T_NS_SEPARATOR","\\",320],["T_STRING","Api",320],["T_NS_SEPARATOR","\\",320],["T_STRING","CartManagementInterface",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$quoteManagement",320],",",["T_WHITESPACE","\n        ",320],["T_NS_SEPARATOR","\\",321],["T_STRING","Magento",321],["T_NS_SEPARATOR","\\",321],["T_STRING","Paypal",321],["T_NS_SEPARATOR","\\",321],["T_STRING","Model",321],["T_NS_SEPARATOR","\\",321],["T_STRING","Billing",321],["T_NS_SEPARATOR","\\",321],["T_STRING","AgreementFactory",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$agreementFactory",321],",",["T_WHITESPACE","\n        ",321],["T_NS_SEPARATOR","\\",322],["T_STRING","Magento",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Paypal",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Model",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Api",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Type",322],["T_NS_SEPARATOR","\\",322],["T_STRING","Factory",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$apiTypeFactory",322],",",["T_WHITESPACE","\n        ",322],["T_NS_SEPARATOR","\\",323],["T_STRING","Magento",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Framework",323],["T_NS_SEPARATOR","\\",323],["T_STRING","DataObject",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Copy",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$objectCopyService",323],",",["T_WHITESPACE","\n        ",323],["T_NS_SEPARATOR","\\",324],["T_STRING","Magento",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Checkout",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Model",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Session",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$checkoutSession",324],",",["T_WHITESPACE","\n        ",324],["T_NS_SEPARATOR","\\",325],["T_STRING","Magento",325],["T_NS_SEPARATOR","\\",325],["T_STRING","Framework",325],["T_NS_SEPARATOR","\\",325],["T_STRING","Encryption",325],["T_NS_SEPARATOR","\\",325],["T_STRING","EncryptorInterface",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$encryptor",325],",",["T_WHITESPACE","\n        ",325],["T_NS_SEPARATOR","\\",326],["T_STRING","Magento",326],["T_NS_SEPARATOR","\\",326],["T_STRING","Framework",326],["T_NS_SEPARATOR","\\",326],["T_STRING","Message",326],["T_NS_SEPARATOR","\\",326],["T_STRING","ManagerInterface",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$messageManager",326],",",["T_WHITESPACE","\n        ",326],["T_NS_SEPARATOR","\\",327],["T_STRING","Magento",327],["T_NS_SEPARATOR","\\",327],["T_STRING","Customer",327],["T_NS_SEPARATOR","\\",327],["T_STRING","Api",327],["T_NS_SEPARATOR","\\",327],["T_STRING","CustomerRepositoryInterface",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$customerRepository",327],",",["T_WHITESPACE","\n        ",327],["T_STRING","AccountManagement",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$accountManagement",328],",",["T_WHITESPACE","\n        ",328],["T_STRING","OrderSender",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$orderSender",329],",",["T_WHITESPACE","\n        ",329],["T_NS_SEPARATOR","\\",330],["T_STRING","Magento",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Quote",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Api",330],["T_NS_SEPARATOR","\\",330],["T_STRING","CartRepositoryInterface",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$quoteRepository",330],",",["T_WHITESPACE","\n        ",330],["T_NS_SEPARATOR","\\",331],["T_STRING","Magento",331],["T_NS_SEPARATOR","\\",331],["T_STRING","Quote",331],["T_NS_SEPARATOR","\\",331],["T_STRING","Model",331],["T_NS_SEPARATOR","\\",331],["T_STRING","Quote",331],["T_NS_SEPARATOR","\\",331],["T_STRING","TotalsCollector",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$totalsCollector",331],",",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$params",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],"[","]",["T_WHITESPACE","\n    ",332],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","quoteManagement",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$quoteManagement",334],";",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_customerUrl",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$customerUrl",335],";",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","_taxData",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$taxData",336],";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_checkoutData",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$checkoutData",337],";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","_configCacheType",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$configCacheType",338],";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","_logger",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$logger",339],";",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_localeResolver",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$localeResolver",340],";",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_paypalInfo",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$paypalInfo",341],";",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_storeManager",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$storeManager",342],";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_coreUrl",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$coreUrl",343],";",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_cartFactory",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$cartFactory",344],";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_checkoutOnepageFactory",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$onepageFactory",345],";",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_agreementFactory",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$agreementFactory",346],";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","_apiTypeFactory",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$apiTypeFactory",347],";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_objectCopyService",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$objectCopyService",348],";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_checkoutSession",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$checkoutSession",349],";",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_customerRepository",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$customerRepository",350],";",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_encryptor",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$encryptor",351],";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_messageManager",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$messageManager",352],";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","orderSender",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$orderSender",353],";",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_accountManagement",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$accountManagement",354],";",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","quoteRepository",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$quoteRepository",355],";",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","totalsCollector",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$totalsCollector",356],";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_customerSession",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_ISSET","isset",357],"(",["T_VARIABLE","$params",357],"[",["T_CONSTANT_ENCAPSED_STRING","'session'",357],"]",")",["T_WHITESPACE","\n            ",357],["T_BOOLEAN_AND","&&",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$params",358],"[",["T_CONSTANT_ENCAPSED_STRING","'session'",358],"]",["T_WHITESPACE"," ",358],["T_INSTANCEOF","instanceof",358],["T_WHITESPACE"," ",358],["T_NS_SEPARATOR","\\",358],["T_STRING","Magento",358],["T_NS_SEPARATOR","\\",358],["T_STRING","Customer",358],["T_NS_SEPARATOR","\\",358],["T_STRING","Model",358],["T_NS_SEPARATOR","\\",358],["T_STRING","Session",358],["T_WHITESPACE"," ",358],"?",["T_WHITESPACE"," ",358],["T_VARIABLE","$params",358],"[",["T_CONSTANT_ENCAPSED_STRING","'session'",358],"]",["T_WHITESPACE"," ",358],":",["T_WHITESPACE"," ",358],["T_VARIABLE","$customerSession",358],";",["T_WHITESPACE","\n\n        ",358],["T_IF","if",360],["T_WHITESPACE"," ",360],"(",["T_ISSET","isset",360],"(",["T_VARIABLE","$params",360],"[",["T_CONSTANT_ENCAPSED_STRING","'config'",360],"]",")",["T_WHITESPACE"," ",360],["T_BOOLEAN_AND","&&",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$params",360],"[",["T_CONSTANT_ENCAPSED_STRING","'config'",360],"]",["T_WHITESPACE"," ",360],["T_INSTANCEOF","instanceof",360],["T_WHITESPACE"," ",360],["T_STRING","PaypalConfig",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n            ",360],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_config",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$params",361],"[",["T_CONSTANT_ENCAPSED_STRING","'config'",361],"]",";",["T_WHITESPACE","\n        ",361],"}",["T_WHITESPACE"," ",362],["T_ELSE","else",362],["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_THROW","throw",363],["T_WHITESPACE"," ",363],["T_NEW","new",363],["T_WHITESPACE"," ",363],["T_NS_SEPARATOR","\\",363],["T_STRING","Exception",363],"(",["T_CONSTANT_ENCAPSED_STRING","'Config instance is required.'",363],")",";",["T_WHITESPACE","\n        ",363],"}",["T_WHITESPACE","\n\n        ",364],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_ISSET","isset",366],"(",["T_VARIABLE","$params",366],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",366],"]",")",["T_WHITESPACE"," ",366],["T_BOOLEAN_AND","&&",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$params",366],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",366],"]",["T_WHITESPACE"," ",366],["T_INSTANCEOF","instanceof",366],["T_WHITESPACE"," ",366],["T_NS_SEPARATOR","\\",366],["T_STRING","Magento",366],["T_NS_SEPARATOR","\\",366],["T_STRING","Quote",366],["T_NS_SEPARATOR","\\",366],["T_STRING","Model",366],["T_NS_SEPARATOR","\\",366],["T_STRING","Quote",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_quote",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$params",367],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",367],"]",";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE"," ",368],["T_ELSE","else",368],["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_THROW","throw",369],["T_WHITESPACE"," ",369],["T_NEW","new",369],["T_WHITESPACE"," ",369],["T_NS_SEPARATOR","\\",369],["T_STRING","Exception",369],"(",["T_CONSTANT_ENCAPSED_STRING","'Quote instance is required.'",369],")",";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Checkout with PayPal image URL getter\n     * Spares API calls of getting \"pal\" variable, by putting it into cache per store view\n     *\n     * @return string\n     *\/",373],["T_WHITESPACE","\n    ",378],["T_PUBLIC","public",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","getCheckoutShortcutImageUrl",379],"(",")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_COMMENT","\/\/ get \"pal\" thing from cache or lookup it via API\n",381],["T_WHITESPACE","        ",382],["T_VARIABLE","$pal",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","null",382],";",["T_WHITESPACE","\n        ",382],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_config",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","areButtonsDynamic",383],"(",")",")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n            ",383],["T_VARIABLE","$cacheId",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","self",384],["T_DOUBLE_COLON","::",384],["T_STRING","PAL_CACHE_ID",384],["T_WHITESPACE"," ",384],".",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","_storeManager",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getStore",384],"(",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","getId",384],"(",")",";",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$pal",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","_configCacheType",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","load",385],"(",["T_VARIABLE","$cacheId",385],")",";",["T_WHITESPACE","\n            ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(",["T_STRING","self",386],["T_DOUBLE_COLON","::",386],["T_STRING","PAL_CACHE_ID",386],["T_WHITESPACE"," ",386],["T_IS_EQUAL","==",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$pal",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n                ",386],["T_VARIABLE","$pal",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","null",387],";",["T_WHITESPACE","\n            ",387],"}",["T_WHITESPACE"," ",388],["T_ELSEIF","elseif",388],["T_WHITESPACE"," ",388],"(","!",["T_VARIABLE","$pal",388],")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n                ",388],["T_VARIABLE","$pal",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","null",389],";",["T_WHITESPACE","\n                ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_getApi",390],"(",")",";",["T_WHITESPACE","\n                ",390],["T_TRY","try",391],["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n                    ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_api",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","callGetPalDetails",392],"(",")",";",["T_WHITESPACE","\n                    ",392],["T_VARIABLE","$pal",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_api",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getPal",393],"(",")",";",["T_WHITESPACE","\n                    ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","_configCacheType",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","save",394],"(",["T_VARIABLE","$pal",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$cacheId",394],")",";",["T_WHITESPACE","\n                ",394],"}",["T_WHITESPACE"," ",395],["T_CATCH","catch",395],["T_WHITESPACE"," ",395],"(",["T_NS_SEPARATOR","\\",395],["T_STRING","Exception",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$e",395],")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n                    ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_configCacheType",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","save",396],"(",["T_STRING","self",396],["T_DOUBLE_COLON","::",396],["T_STRING","PAL_CACHE_ID",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$cacheId",396],")",";",["T_WHITESPACE","\n                    ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_logger",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","critical",397],"(",["T_VARIABLE","$e",397],")",";",["T_WHITESPACE","\n                ",397],"}",["T_WHITESPACE","\n            ",398],"}",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n\n        ",400],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","_config",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getExpressCheckoutShortcutImageUrl",402],"(",["T_WHITESPACE","\n            ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_localeResolver",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getLocale",403],"(",")",",",["T_WHITESPACE","\n            ",403],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_quote",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getBaseGrandTotal",404],"(",")",",",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$pal",405],["T_WHITESPACE","\n        ",405],")",";",["T_WHITESPACE","\n    ",406],"}",["T_WHITESPACE","\n\n    ",407],["T_DOC_COMMENT","\/**\n     * Setter that enables giropay redirects flow\n     *\n     * @param string $successUrl - payment success result\n     * @param string $cancelUrl  - payment cancellation result\n     * @param string $pendingUrl - pending payment result\n     * @return $this\n     *\/",409],["T_WHITESPACE","\n    ",416],["T_PUBLIC","public",417],["T_WHITESPACE"," ",417],["T_FUNCTION","function",417],["T_WHITESPACE"," ",417],["T_STRING","prepareGiropayUrls",417],"(",["T_VARIABLE","$successUrl",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$cancelUrl",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$pendingUrl",417],")",["T_WHITESPACE","\n    ",417],"{",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","_giropayUrls",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],"[",["T_VARIABLE","$successUrl",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$cancelUrl",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$pendingUrl",419],"]",";",["T_WHITESPACE","\n        ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n\n    ",421],["T_DOC_COMMENT","\/**\n     * Set create billing agreement flag\n     *\n     * @param bool $flag\n     * @return $this\n     *\/",423],["T_WHITESPACE","\n    ",428],["T_PUBLIC","public",429],["T_WHITESPACE"," ",429],["T_FUNCTION","function",429],["T_WHITESPACE"," ",429],["T_STRING","setIsBillingAgreementRequested",429],"(",["T_VARIABLE","$flag",429],")",["T_WHITESPACE","\n    ",429],"{",["T_WHITESPACE","\n        ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","_isBARequested",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$flag",431],";",["T_WHITESPACE","\n        ",431],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],";",["T_WHITESPACE","\n    ",432],"}",["T_WHITESPACE","\n\n    ",433],["T_DOC_COMMENT","\/**\n     * Set flag that forces to use BillMeLater\n     *\n     * @param bool $isBml\n     * @return $this\n     *\/",435],["T_WHITESPACE","\n    ",440],["T_PUBLIC","public",441],["T_WHITESPACE"," ",441],["T_FUNCTION","function",441],["T_WHITESPACE"," ",441],["T_STRING","setIsBml",441],"(",["T_VARIABLE","$isBml",441],")",["T_WHITESPACE","\n    ",441],"{",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","_isBml",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$isBml",443],";",["T_WHITESPACE","\n        ",443],["T_RETURN","return",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],";",["T_WHITESPACE","\n    ",444],"}",["T_WHITESPACE","\n\n    ",445],["T_DOC_COMMENT","\/**\n     * Setter for customer\n     *\n     * @param CustomerDataObject $customerData\n     * @return $this\n     *\/",447],["T_WHITESPACE","\n    ",452],["T_PUBLIC","public",453],["T_WHITESPACE"," ",453],["T_FUNCTION","function",453],["T_WHITESPACE"," ",453],["T_STRING","setCustomerData",453],"(",["T_STRING","CustomerDataObject",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$customerData",453],")",["T_WHITESPACE","\n    ",453],"{",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","_quote",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","assignCustomer",455],"(",["T_VARIABLE","$customerData",455],")",";",["T_WHITESPACE","\n        ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","_customerId",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$customerData",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getId",456],"(",")",";",["T_WHITESPACE","\n        ",456],["T_RETURN","return",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],";",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n\n    ",458],["T_DOC_COMMENT","\/**\n     * Setter for customer with billing and shipping address changing ability\n     *\n     * @param CustomerDataObject $customerData\n     * @param Address|null $billingAddress\n     * @param Address|null $shippingAddress\n     * @return $this\n     *\/",460],["T_WHITESPACE","\n    ",467],["T_PUBLIC","public",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","setCustomerWithAddressChange",468],"(",["T_WHITESPACE","\n        ",468],["T_STRING","CustomerDataObject",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$customerData",469],",",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$billingAddress",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_STRING","null",470],",",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$shippingAddress",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_STRING","null",471],["T_WHITESPACE","\n    ",471],")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n        ",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","_quote",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","assignCustomerWithAddressChange",473],"(",["T_VARIABLE","$customerData",473],",",["T_WHITESPACE"," ",473],["T_VARIABLE","$billingAddress",473],",",["T_WHITESPACE"," ",473],["T_VARIABLE","$shippingAddress",473],")",";",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","_customerId",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$customerData",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","getId",474],"(",")",";",["T_WHITESPACE","\n        ",474],["T_RETURN","return",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],";",["T_WHITESPACE","\n    ",475],"}",["T_WHITESPACE","\n\n    ",476],["T_DOC_COMMENT","\/**\n     * Reserve order ID for specified quote and start checkout on PayPal\n     *\n     * @param string $returnUrl\n     * @param string $cancelUrl\n     * @param bool|null $button\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",478],["T_WHITESPACE","\n    ",489],["T_PUBLIC","public",490],["T_WHITESPACE"," ",490],["T_FUNCTION","function",490],["T_WHITESPACE"," ",490],["T_STRING","start",490],"(",["T_VARIABLE","$returnUrl",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$cancelUrl",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$button",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","null",490],")",["T_WHITESPACE","\n    ",490],"{",["T_WHITESPACE","\n        ",491],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","_quote",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","collectTotals",492],"(",")",";",["T_WHITESPACE","\n\n        ",492],["T_IF","if",494],["T_WHITESPACE"," ",494],"(","!",["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","_quote",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getGrandTotal",494],"(",")",")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n            ",494],["T_THROW","throw",495],["T_WHITESPACE"," ",495],["T_NEW","new",495],["T_WHITESPACE"," ",495],["T_NS_SEPARATOR","\\",495],["T_STRING","Magento",495],["T_NS_SEPARATOR","\\",495],["T_STRING","Framework",495],["T_NS_SEPARATOR","\\",495],["T_STRING","Exception",495],["T_NS_SEPARATOR","\\",495],["T_STRING","LocalizedException",495],"(",["T_WHITESPACE","\n                ",495],["T_STRING","__",496],"(",["T_WHITESPACE","\n                    ",496],["T_CONSTANT_ENCAPSED_STRING","'PayPal can\\'t process orders with a zero balance due. '",497],["T_WHITESPACE","\n                    ",497],".",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'To finish your purchase, please go through the standard checkout process.'",498],["T_WHITESPACE","\n                ",498],")",["T_WHITESPACE","\n            ",499],")",";",["T_WHITESPACE","\n        ",500],"}",["T_WHITESPACE","\n\n        ",501],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","_quote",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","reserveOrderId",503],"(",")",";",["T_WHITESPACE","\n        ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","quoteRepository",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","save",504],"(",["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","_quote",504],")",";",["T_WHITESPACE","\n        ",504],["T_COMMENT","\/\/ prepare API\n",505],["T_WHITESPACE","        ",506],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","_getApi",506],"(",")",";",["T_WHITESPACE","\n        ",506],["T_VARIABLE","$solutionType",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","_config",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","getMerchantCountry",507],"(",")",["T_WHITESPACE"," ",507],["T_IS_EQUAL","==",507],["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'DE'",507],["T_WHITESPACE","\n            ",507],"?",["T_WHITESPACE"," ",508],["T_NS_SEPARATOR","\\",508],["T_STRING","Magento",508],["T_NS_SEPARATOR","\\",508],["T_STRING","Paypal",508],["T_NS_SEPARATOR","\\",508],["T_STRING","Model",508],["T_NS_SEPARATOR","\\",508],["T_STRING","Config",508],["T_DOUBLE_COLON","::",508],["T_STRING","EC_SOLUTION_TYPE_MARK",508],["T_WHITESPACE","\n            ",508],":",["T_WHITESPACE"," ",509],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","_config",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","getValue",509],"(",["T_CONSTANT_ENCAPSED_STRING","'solutionType'",509],")",";",["T_WHITESPACE","\n        ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","_api",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","setAmount",510],"(",["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","_quote",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","getBaseGrandTotal",510],"(",")",")",["T_WHITESPACE","\n            ",510],["T_OBJECT_OPERATOR","->",511],["T_STRING","setCurrencyCode",511],"(",["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","_quote",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","getBaseCurrencyCode",511],"(",")",")",["T_WHITESPACE","\n            ",511],["T_OBJECT_OPERATOR","->",512],["T_STRING","setInvNum",512],"(",["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","_quote",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getReservedOrderId",512],"(",")",")",["T_WHITESPACE","\n            ",512],["T_OBJECT_OPERATOR","->",513],["T_STRING","setReturnUrl",513],"(",["T_VARIABLE","$returnUrl",513],")",["T_WHITESPACE","\n            ",513],["T_OBJECT_OPERATOR","->",514],["T_STRING","setCancelUrl",514],"(",["T_VARIABLE","$cancelUrl",514],")",["T_WHITESPACE","\n            ",514],["T_OBJECT_OPERATOR","->",515],["T_STRING","setSolutionType",515],"(",["T_VARIABLE","$solutionType",515],")",["T_WHITESPACE","\n            ",515],["T_OBJECT_OPERATOR","->",516],["T_STRING","setPaymentAction",516],"(",["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_config",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","getValue",516],"(",["T_CONSTANT_ENCAPSED_STRING","'paymentAction'",516],")",")",";",["T_WHITESPACE","\n        ",516],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","_giropayUrls",517],")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n            ",517],["T_LIST","list",518],"(",["T_VARIABLE","$successUrl",518],",",["T_WHITESPACE"," ",518],["T_VARIABLE","$cancelUrl",518],",",["T_WHITESPACE"," ",518],["T_VARIABLE","$pendingUrl",518],")",["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_giropayUrls",518],";",["T_WHITESPACE","\n            ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","_api",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","addData",519],"(",["T_WHITESPACE","\n                ",519],"[",["T_WHITESPACE","\n                    ",520],["T_CONSTANT_ENCAPSED_STRING","'giropay_cancel_url'",521],["T_WHITESPACE"," ",521],["T_DOUBLE_ARROW","=>",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$cancelUrl",521],",",["T_WHITESPACE","\n                    ",521],["T_CONSTANT_ENCAPSED_STRING","'giropay_success_url'",522],["T_WHITESPACE"," ",522],["T_DOUBLE_ARROW","=>",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$successUrl",522],",",["T_WHITESPACE","\n                    ",522],["T_CONSTANT_ENCAPSED_STRING","'giropay_bank_txn_pending_url'",523],["T_WHITESPACE"," ",523],["T_DOUBLE_ARROW","=>",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$pendingUrl",523],",",["T_WHITESPACE","\n                ",523],"]",["T_WHITESPACE","\n            ",524],")",";",["T_WHITESPACE","\n        ",525],"}",["T_WHITESPACE","\n\n        ",526],["T_IF","if",528],["T_WHITESPACE"," ",528],"(",["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","_isBml",528],")",["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n            ",528],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","_api",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","setFundingSource",529],"(",["T_CONSTANT_ENCAPSED_STRING","'BML'",529],")",";",["T_WHITESPACE","\n        ",529],"}",["T_WHITESPACE","\n\n        ",530],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_setBillingAgreementRequest",532],"(",")",";",["T_WHITESPACE","\n\n        ",532],["T_IF","if",534],["T_WHITESPACE"," ",534],"(",["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","_config",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getValue",534],"(",["T_CONSTANT_ENCAPSED_STRING","'requireBillingAddress'",534],")",["T_WHITESPACE"," ",534],["T_IS_EQUAL","==",534],["T_WHITESPACE"," ",534],["T_STRING","PaypalConfig",534],["T_DOUBLE_COLON","::",534],["T_STRING","REQUIRE_BILLING_ADDRESS_ALL",534],")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n            ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","_api",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","setRequireBillingAddress",535],"(",["T_LNUMBER","1",535],")",";",["T_WHITESPACE","\n        ",535],"}",["T_WHITESPACE","\n\n        ",536],["T_COMMENT","\/\/ suppress or export shipping address\n",538],["T_WHITESPACE","        ",539],["T_VARIABLE","$address",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_STRING","null",539],";",["T_WHITESPACE","\n        ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_quote",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getIsVirtual",540],"(",")",")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n            ",540],["T_IF","if",541],["T_WHITESPACE"," ",541],"(",["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","_config",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getValue",541],"(",["T_CONSTANT_ENCAPSED_STRING","'requireBillingAddress'",541],")",["T_WHITESPACE","\n                ",541],["T_IS_EQUAL","==",542],["T_WHITESPACE"," ",542],["T_STRING","PaypalConfig",542],["T_DOUBLE_COLON","::",542],["T_STRING","REQUIRE_BILLING_ADDRESS_VIRTUAL",542],["T_WHITESPACE","\n            ",542],")",["T_WHITESPACE"," ",543],"{",["T_WHITESPACE","\n                ",543],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","_api",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","setRequireBillingAddress",544],"(",["T_LNUMBER","1",544],")",";",["T_WHITESPACE","\n            ",544],"}",["T_WHITESPACE","\n            ",545],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","_api",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","setSuppressShipping",546],"(",["T_STRING","true",546],")",";",["T_WHITESPACE","\n        ",546],"}",["T_WHITESPACE"," ",547],["T_ELSE","else",547],["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n            ",547],["T_VARIABLE","$address",548],["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_quote",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","getShippingAddress",548],"(",")",";",["T_WHITESPACE","\n            ",548],["T_VARIABLE","$isOverridden",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_LNUMBER","0",549],";",["T_WHITESPACE","\n            ",549],["T_IF","if",550],["T_WHITESPACE"," ",550],"(",["T_STRING","true",550],["T_WHITESPACE"," ",550],["T_IS_IDENTICAL","===",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$address",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","validate",550],"(",")",")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n                ",550],["T_VARIABLE","$isOverridden",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_LNUMBER","1",551],";",["T_WHITESPACE","\n                ",551],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_api",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","setAddress",552],"(",["T_VARIABLE","$address",552],")",";",["T_WHITESPACE","\n            ",552],"}",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_quote",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getPayment",554],"(",")",["T_OBJECT_OPERATOR","->",554],["T_STRING","setAdditionalInformation",554],"(",["T_WHITESPACE","\n                ",554],["T_STRING","self",555],["T_DOUBLE_COLON","::",555],["T_STRING","PAYMENT_INFO_TRANSPORT_SHIPPING_OVERRIDDEN",555],",",["T_WHITESPACE","\n                ",555],["T_VARIABLE","$isOverridden",556],["T_WHITESPACE","\n            ",556],")",";",["T_WHITESPACE","\n            ",557],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","_quote",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","getPayment",558],"(",")",["T_OBJECT_OPERATOR","->",558],["T_STRING","save",558],"(",")",";",["T_WHITESPACE","\n        ",558],"}",["T_WHITESPACE","\n\n        ",559],["T_DOC_COMMENT","\/** @var $cart \\Magento\\Payment\\Model\\Cart *\/",561],["T_WHITESPACE","\n        ",561],["T_VARIABLE","$cart",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","_cartFactory",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","create",562],"(","[",["T_CONSTANT_ENCAPSED_STRING","'salesModel'",562],["T_WHITESPACE"," ",562],["T_DOUBLE_ARROW","=>",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","_quote",562],"]",")",";",["T_WHITESPACE","\n\n        ",562],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","_api",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","setPaypalCart",564],"(",["T_VARIABLE","$cart",564],")",";",["T_WHITESPACE","\n\n        ",564],["T_IF","if",566],["T_WHITESPACE"," ",566],"(","!",["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","_taxData",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","getConfig",566],"(",")",["T_OBJECT_OPERATOR","->",566],["T_STRING","priceIncludesTax",566],"(",")",")",["T_WHITESPACE"," ",566],"{",["T_WHITESPACE","\n            ",566],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","setShippingOptions",567],"(",["T_VARIABLE","$cart",567],",",["T_WHITESPACE"," ",567],["T_VARIABLE","$address",567],")",";",["T_WHITESPACE","\n        ",567],"}",["T_WHITESPACE","\n\n        ",568],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_config",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","exportExpressCheckoutStyleSettings",570],"(",["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_api",570],")",";",["T_WHITESPACE","\n\n        ",570],["T_COMMENT","\/* Temporary solution. @TODO: do not pass quote into Nvp model *\/",572],["T_WHITESPACE","\n        ",572],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","_api",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","setQuote",573],"(",["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","_quote",573],")",";",["T_WHITESPACE","\n        ",573],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","_api",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","callSetExpressCheckout",574],"(",")",";",["T_WHITESPACE","\n\n        ",574],["T_VARIABLE","$token",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_api",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getToken",576],"(",")",";",["T_WHITESPACE","\n\n        ",576],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","_setRedirectUrl",578],"(",["T_VARIABLE","$button",578],",",["T_WHITESPACE"," ",578],["T_VARIABLE","$token",578],")",";",["T_WHITESPACE","\n\n        ",578],["T_VARIABLE","$payment",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","_quote",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getPayment",580],"(",")",";",["T_WHITESPACE","\n        ",580],["T_VARIABLE","$payment",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","unsAdditionalInformation",581],"(",["T_STRING","self",581],["T_DOUBLE_COLON","::",581],["T_STRING","PAYMENT_INFO_TRANSPORT_BILLING_AGREEMENT",581],")",";",["T_WHITESPACE","\n        ",581],["T_COMMENT","\/\/ Set flag that we came from Express Checkout button\n",582],["T_WHITESPACE","        ",583],["T_IF","if",583],["T_WHITESPACE"," ",583],"(","!",["T_EMPTY","empty",583],"(",["T_VARIABLE","$button",583],")",")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n            ",583],["T_VARIABLE","$payment",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","setAdditionalInformation",584],"(",["T_STRING","self",584],["T_DOUBLE_COLON","::",584],["T_STRING","PAYMENT_INFO_BUTTON",584],",",["T_WHITESPACE"," ",584],["T_LNUMBER","1",584],")",";",["T_WHITESPACE","\n        ",584],"}",["T_WHITESPACE"," ",585],["T_ELSEIF","elseif",585],["T_WHITESPACE"," ",585],"(",["T_VARIABLE","$payment",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","hasAdditionalInformation",585],"(",["T_STRING","self",585],["T_DOUBLE_COLON","::",585],["T_STRING","PAYMENT_INFO_BUTTON",585],")",")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n            ",585],["T_VARIABLE","$payment",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","unsAdditionalInformation",586],"(",["T_STRING","self",586],["T_DOUBLE_COLON","::",586],["T_STRING","PAYMENT_INFO_BUTTON",586],")",";",["T_WHITESPACE","\n        ",586],"}",["T_WHITESPACE","\n        ",587],["T_VARIABLE","$payment",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","save",588],"(",")",";",["T_WHITESPACE","\n\n        ",588],["T_RETURN","return",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$token",590],";",["T_WHITESPACE","\n    ",590],"}",["T_WHITESPACE","\n\n    ",591],["T_DOC_COMMENT","\/**\n     * Check whether system can skip order review page before placing order\n     *\n     * @return bool\n     *\/",593],["T_WHITESPACE","\n    ",597],["T_PUBLIC","public",598],["T_WHITESPACE"," ",598],["T_FUNCTION","function",598],["T_WHITESPACE"," ",598],["T_STRING","canSkipOrderReviewStep",598],"(",")",["T_WHITESPACE","\n    ",598],"{",["T_WHITESPACE","\n        ",599],["T_VARIABLE","$isOnepageCheckout",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],"!",["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_quote",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","getPayment",600],"(",")",["T_OBJECT_OPERATOR","->",600],["T_STRING","getAdditionalInformation",600],"(",["T_STRING","self",600],["T_DOUBLE_COLON","::",600],["T_STRING","PAYMENT_INFO_BUTTON",600],")",";",["T_WHITESPACE","\n        ",600],["T_RETURN","return",601],["T_WHITESPACE"," ",601],["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","_config",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","isOrderReviewStepDisabled",601],"(",")",["T_WHITESPACE"," ",601],["T_BOOLEAN_AND","&&",601],["T_WHITESPACE"," ",601],["T_VARIABLE","$isOnepageCheckout",601],";",["T_WHITESPACE","\n    ",601],"}",["T_WHITESPACE","\n\n    ",602],["T_DOC_COMMENT","\/**\n     * Update quote when returned from PayPal\n     * rewrite billing address by paypal\n     * save old billing address for new customer\n     * export shipping address in case address absence\n     *\n     * @param string $token\n     * @return void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",604],["T_WHITESPACE","\n    ",613],["T_PUBLIC","public",614],["T_WHITESPACE"," ",614],["T_FUNCTION","function",614],["T_WHITESPACE"," ",614],["T_STRING","returnFromPaypal",614],"(",["T_VARIABLE","$token",614],")",["T_WHITESPACE","\n    ",614],"{",["T_WHITESPACE","\n        ",615],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","_getApi",616],"(",")",";",["T_WHITESPACE","\n        ",616],["T_VARIABLE","$this",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","_api",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","setToken",617],"(",["T_VARIABLE","$token",617],")",["T_WHITESPACE","\n            ",617],["T_OBJECT_OPERATOR","->",618],["T_STRING","callGetExpressCheckoutDetails",618],"(",")",";",["T_WHITESPACE","\n        ",618],["T_VARIABLE","$quote",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","_quote",619],";",["T_WHITESPACE","\n\n        ",619],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","ignoreAddressValidation",621],"(",")",";",["T_WHITESPACE","\n\n        ",621],["T_COMMENT","\/\/ import shipping address\n",623],["T_WHITESPACE","        ",624],["T_VARIABLE","$exportedShippingAddress",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","_api",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","getExportedShippingAddress",624],"(",")",";",["T_WHITESPACE","\n        ",624],["T_IF","if",625],["T_WHITESPACE"," ",625],"(","!",["T_VARIABLE","$quote",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","getIsVirtual",625],"(",")",")",["T_WHITESPACE"," ",625],"{",["T_WHITESPACE","\n            ",625],["T_VARIABLE","$shippingAddress",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_VARIABLE","$quote",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","getShippingAddress",626],"(",")",";",["T_WHITESPACE","\n            ",626],["T_IF","if",627],["T_WHITESPACE"," ",627],"(",["T_VARIABLE","$shippingAddress",627],")",["T_WHITESPACE"," ",627],"{",["T_WHITESPACE","\n                ",627],["T_IF","if",628],["T_WHITESPACE"," ",628],"(",["T_VARIABLE","$exportedShippingAddress",628],["T_WHITESPACE","\n                    ",628],["T_BOOLEAN_AND","&&",629],["T_WHITESPACE"," ",629],["T_VARIABLE","$quote",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","getPayment",629],"(",")",["T_OBJECT_OPERATOR","->",629],["T_STRING","getAdditionalInformation",629],"(",["T_STRING","self",629],["T_DOUBLE_COLON","::",629],["T_STRING","PAYMENT_INFO_BUTTON",629],")",["T_WHITESPACE"," ",629],["T_IS_EQUAL","==",629],["T_WHITESPACE"," ",629],["T_LNUMBER","1",629],["T_WHITESPACE","\n                ",629],")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n                    ",630],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_setExportedAddressData",631],"(",["T_VARIABLE","$shippingAddress",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$exportedShippingAddress",631],")",";",["T_WHITESPACE","\n                    ",631],["T_COMMENT","\/\/ PayPal doesn't provide detailed shipping info: prefix, middlename, lastname, suffix\n",632],["T_WHITESPACE","                    ",633],["T_VARIABLE","$shippingAddress",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","setPrefix",633],"(",["T_STRING","null",633],")",";",["T_WHITESPACE","\n                    ",633],["T_VARIABLE","$shippingAddress",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","setMiddlename",634],"(",["T_STRING","null",634],")",";",["T_WHITESPACE","\n                    ",634],["T_VARIABLE","$shippingAddress",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","setLastname",635],"(",["T_STRING","null",635],")",";",["T_WHITESPACE","\n                    ",635],["T_VARIABLE","$shippingAddress",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","setSuffix",636],"(",["T_STRING","null",636],")",";",["T_WHITESPACE","\n                    ",636],["T_VARIABLE","$shippingAddress",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","setCollectShippingRates",637],"(",["T_STRING","true",637],")",";",["T_WHITESPACE","\n                    ",637],["T_VARIABLE","$shippingAddress",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","setSameAsBilling",638],"(",["T_LNUMBER","0",638],")",";",["T_WHITESPACE","\n                ",638],"}",["T_WHITESPACE","\n\n                ",639],["T_COMMENT","\/\/ import shipping method\n",641],["T_WHITESPACE","                ",642],["T_VARIABLE","$code",642],["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_CONSTANT_ENCAPSED_STRING","''",642],";",["T_WHITESPACE","\n                ",642],["T_IF","if",643],["T_WHITESPACE"," ",643],"(",["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","_api",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","getShippingRateCode",643],"(",")",")",["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n                    ",643],["T_VARIABLE","$code",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","_matchShippingMethodCode",644],"(",["T_VARIABLE","$shippingAddress",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","_api",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","getShippingRateCode",644],"(",")",")",";",["T_WHITESPACE","\n                    ",644],["T_IF","if",645],["T_WHITESPACE"," ",645],"(",["T_VARIABLE","$code",645],")",["T_WHITESPACE"," ",645],"{",["T_WHITESPACE","\n                        ",645],["T_COMMENT","\/\/ possible bug of double collecting rates :-\/\n",646],["T_WHITESPACE","                        ",647],["T_VARIABLE","$shippingAddress",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","setShippingMethod",647],"(",["T_VARIABLE","$code",647],")",["T_OBJECT_OPERATOR","->",647],["T_STRING","setCollectShippingRates",647],"(",["T_STRING","true",647],")",";",["T_WHITESPACE","\n                    ",647],"}",["T_WHITESPACE","\n                ",648],"}",["T_WHITESPACE","\n                ",649],["T_VARIABLE","$quote",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","getPayment",650],"(",")",["T_OBJECT_OPERATOR","->",650],["T_STRING","setAdditionalInformation",650],"(",["T_WHITESPACE","\n                    ",650],["T_STRING","self",651],["T_DOUBLE_COLON","::",651],["T_STRING","PAYMENT_INFO_TRANSPORT_SHIPPING_METHOD",651],",",["T_WHITESPACE","\n                    ",651],["T_VARIABLE","$code",652],["T_WHITESPACE","\n                ",652],")",";",["T_WHITESPACE","\n            ",653],"}",["T_WHITESPACE","\n        ",654],"}",["T_WHITESPACE","\n\n        ",655],["T_COMMENT","\/\/ import billing address\n",657],["T_WHITESPACE","        ",658],["T_VARIABLE","$portBillingFromShipping",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_VARIABLE","$quote",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","getPayment",658],"(",")",["T_OBJECT_OPERATOR","->",658],["T_STRING","getAdditionalInformation",658],"(",["T_STRING","self",658],["T_DOUBLE_COLON","::",658],["T_STRING","PAYMENT_INFO_BUTTON",658],")",["T_WHITESPACE"," ",658],["T_IS_EQUAL","==",658],["T_WHITESPACE"," ",658],["T_LNUMBER","1",658],["T_WHITESPACE","\n            ",658],["T_BOOLEAN_AND","&&",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","_config",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","getValue",659],"(",["T_WHITESPACE","\n                ",659],["T_CONSTANT_ENCAPSED_STRING","'requireBillingAddress'",660],["T_WHITESPACE","\n            ",660],")",["T_WHITESPACE"," ",661],["T_IS_NOT_EQUAL","!=",661],["T_WHITESPACE"," ",661],["T_NS_SEPARATOR","\\",661],["T_STRING","Magento",661],["T_NS_SEPARATOR","\\",661],["T_STRING","Paypal",661],["T_NS_SEPARATOR","\\",661],["T_STRING","Model",661],["T_NS_SEPARATOR","\\",661],["T_STRING","Config",661],["T_DOUBLE_COLON","::",661],["T_STRING","REQUIRE_BILLING_ADDRESS_ALL",661],["T_WHITESPACE","\n            ",661],["T_BOOLEAN_AND","&&",662],["T_WHITESPACE"," ",662],"!",["T_VARIABLE","$quote",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","isVirtual",662],"(",")",";",["T_WHITESPACE","\n        ",662],["T_IF","if",663],["T_WHITESPACE"," ",663],"(",["T_VARIABLE","$portBillingFromShipping",663],")",["T_WHITESPACE"," ",663],"{",["T_WHITESPACE","\n            ",663],["T_VARIABLE","$billingAddress",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_CLONE","clone",664],["T_WHITESPACE"," ",664],["T_VARIABLE","$shippingAddress",664],";",["T_WHITESPACE","\n            ",664],["T_VARIABLE","$billingAddress",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","unsAddressId",665],"(",")",["T_OBJECT_OPERATOR","->",665],["T_STRING","unsAddressType",665],"(",")",["T_OBJECT_OPERATOR","->",665],["T_STRING","setCustomerAddressId",665],"(",["T_STRING","null",665],")",";",["T_WHITESPACE","\n            ",665],["T_VARIABLE","$data",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_VARIABLE","$billingAddress",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","getData",666],"(",")",";",["T_WHITESPACE","\n            ",666],["T_VARIABLE","$data",667],"[",["T_CONSTANT_ENCAPSED_STRING","'save_in_address_book'",667],"]",["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_LNUMBER","0",667],";",["T_WHITESPACE","\n            ",667],["T_VARIABLE","$quote",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","getBillingAddress",668],"(",")",["T_OBJECT_OPERATOR","->",668],["T_STRING","addData",668],"(",["T_VARIABLE","$data",668],")",";",["T_WHITESPACE","\n            ",668],["T_VARIABLE","$quote",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","getShippingAddress",669],"(",")",["T_OBJECT_OPERATOR","->",669],["T_STRING","setSameAsBilling",669],"(",["T_LNUMBER","1",669],")",";",["T_WHITESPACE","\n        ",669],"}",["T_WHITESPACE"," ",670],["T_ELSE","else",670],["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n            ",670],["T_VARIABLE","$billingAddress",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_VARIABLE","$quote",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","getBillingAddress",671],"(",")",";",["T_WHITESPACE","\n        ",671],"}",["T_WHITESPACE","\n        ",672],["T_VARIABLE","$exportedBillingAddress",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_api",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","getExportedBillingAddress",673],"(",")",";",["T_WHITESPACE","\n\n        ",673],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","_setExportedAddressData",675],"(",["T_VARIABLE","$billingAddress",675],",",["T_WHITESPACE"," ",675],["T_VARIABLE","$exportedBillingAddress",675],")",";",["T_WHITESPACE","\n        ",675],["T_VARIABLE","$billingAddress",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","setCustomerNote",676],"(",["T_VARIABLE","$exportedBillingAddress",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","getData",676],"(",["T_CONSTANT_ENCAPSED_STRING","'note'",676],")",")",";",["T_WHITESPACE","\n        ",676],["T_VARIABLE","$quote",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","setBillingAddress",677],"(",["T_VARIABLE","$billingAddress",677],")",";",["T_WHITESPACE","\n\n        ",677],["T_COMMENT","\/\/ import payment info\n",679],["T_WHITESPACE","        ",680],["T_VARIABLE","$payment",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_VARIABLE","$quote",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","getPayment",680],"(",")",";",["T_WHITESPACE","\n        ",680],["T_VARIABLE","$payment",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","setMethod",681],"(",["T_VARIABLE","$this",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","_methodType",681],")",";",["T_WHITESPACE","\n        ",681],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","_paypalInfo",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","importToPayment",682],"(",["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","_api",682],",",["T_WHITESPACE"," ",682],["T_VARIABLE","$payment",682],")",";",["T_WHITESPACE","\n        ",682],["T_VARIABLE","$payment",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","setAdditionalInformation",683],"(",["T_STRING","self",683],["T_DOUBLE_COLON","::",683],["T_STRING","PAYMENT_INFO_TRANSPORT_PAYER_ID",683],",",["T_WHITESPACE"," ",683],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","_api",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","getPayerId",683],"(",")",")",["T_WHITESPACE","\n            ",683],["T_OBJECT_OPERATOR","->",684],["T_STRING","setAdditionalInformation",684],"(",["T_STRING","self",684],["T_DOUBLE_COLON","::",684],["T_STRING","PAYMENT_INFO_TRANSPORT_TOKEN",684],",",["T_WHITESPACE"," ",684],["T_VARIABLE","$token",684],")",";",["T_WHITESPACE","\n        ",684],["T_VARIABLE","$quote",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","collectTotals",685],"(",")",";",["T_WHITESPACE","\n        ",685],["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","quoteRepository",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","save",686],"(",["T_VARIABLE","$quote",686],")",";",["T_WHITESPACE","\n    ",686],"}",["T_WHITESPACE","\n\n    ",687],["T_DOC_COMMENT","\/**\n     * Check whether order review has enough data to initialize\n     *\n     * @param string|null $token\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",689],["T_WHITESPACE","\n    ",696],["T_PUBLIC","public",697],["T_WHITESPACE"," ",697],["T_FUNCTION","function",697],["T_WHITESPACE"," ",697],["T_STRING","prepareOrderReview",697],"(",["T_VARIABLE","$token",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","null",697],")",["T_WHITESPACE","\n    ",697],"{",["T_WHITESPACE","\n        ",698],["T_VARIABLE","$payment",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","_quote",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","getPayment",699],"(",")",";",["T_WHITESPACE","\n        ",699],["T_IF","if",700],["T_WHITESPACE"," ",700],"(","!",["T_VARIABLE","$payment",700],["T_WHITESPACE"," ",700],["T_BOOLEAN_OR","||",700],["T_WHITESPACE"," ",700],"!",["T_VARIABLE","$payment",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","getAdditionalInformation",700],"(",["T_STRING","self",700],["T_DOUBLE_COLON","::",700],["T_STRING","PAYMENT_INFO_TRANSPORT_PAYER_ID",700],")",")",["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n            ",700],["T_THROW","throw",701],["T_WHITESPACE"," ",701],["T_NEW","new",701],["T_WHITESPACE"," ",701],["T_NS_SEPARATOR","\\",701],["T_STRING","Magento",701],["T_NS_SEPARATOR","\\",701],["T_STRING","Framework",701],["T_NS_SEPARATOR","\\",701],["T_STRING","Exception",701],["T_NS_SEPARATOR","\\",701],["T_STRING","LocalizedException",701],"(",["T_STRING","__",701],"(",["T_CONSTANT_ENCAPSED_STRING","'A payer is not identified.'",701],")",")",";",["T_WHITESPACE","\n        ",701],"}",["T_WHITESPACE","\n        ",702],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","_quote",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","setMayEditShippingAddress",703],"(",["T_WHITESPACE","\n            ",703],["T_LNUMBER","1",704],["T_WHITESPACE"," ",704],["T_IS_NOT_EQUAL","!=",704],["T_WHITESPACE"," ",704],["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","_quote",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","getPayment",704],"(",")",["T_OBJECT_OPERATOR","->",704],["T_STRING","getAdditionalInformation",704],"(",["T_STRING","self",704],["T_DOUBLE_COLON","::",704],["T_STRING","PAYMENT_INFO_TRANSPORT_SHIPPING_OVERRIDDEN",704],")",["T_WHITESPACE","\n        ",704],")",";",["T_WHITESPACE","\n        ",705],["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","_quote",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","setMayEditShippingMethod",706],"(",["T_WHITESPACE","\n            ",706],["T_CONSTANT_ENCAPSED_STRING","''",707],["T_WHITESPACE"," ",707],["T_IS_EQUAL","==",707],["T_WHITESPACE"," ",707],["T_VARIABLE","$this",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","_quote",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","getPayment",707],"(",")",["T_OBJECT_OPERATOR","->",707],["T_STRING","getAdditionalInformation",707],"(",["T_STRING","self",707],["T_DOUBLE_COLON","::",707],["T_STRING","PAYMENT_INFO_TRANSPORT_SHIPPING_METHOD",707],")",["T_WHITESPACE","\n        ",707],")",";",["T_WHITESPACE","\n        ",708],["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","ignoreAddressValidation",709],"(",")",";",["T_WHITESPACE","\n        ",709],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","_quote",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","collectTotals",710],"(",")",";",["T_WHITESPACE","\n        ",710],["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","quoteRepository",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","save",711],"(",["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","_quote",711],")",";",["T_WHITESPACE","\n    ",711],"}",["T_WHITESPACE","\n\n    ",712],["T_DOC_COMMENT","\/**\n     * Return callback response with shipping options\n     *\n     * @param array $request\n     * @return string\n     * @throws \\Exception\n     *\/",714],["T_WHITESPACE","\n    ",720],["T_PUBLIC","public",721],["T_WHITESPACE"," ",721],["T_FUNCTION","function",721],["T_WHITESPACE"," ",721],["T_STRING","getShippingOptionsCallbackResponse",721],"(",["T_ARRAY","array",721],["T_WHITESPACE"," ",721],["T_VARIABLE","$request",721],")",["T_WHITESPACE","\n    ",721],"{",["T_WHITESPACE","\n        ",722],["T_VARIABLE","$debugData",723],["T_WHITESPACE"," ",723],"=",["T_WHITESPACE"," ",723],"[",["T_CONSTANT_ENCAPSED_STRING","'request'",723],["T_WHITESPACE"," ",723],["T_DOUBLE_ARROW","=>",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$request",723],",",["T_WHITESPACE"," ",723],["T_CONSTANT_ENCAPSED_STRING","'response'",723],["T_WHITESPACE"," ",723],["T_DOUBLE_ARROW","=>",723],["T_WHITESPACE"," ",723],"[","]","]",";",["T_WHITESPACE","\n\n        ",723],["T_TRY","try",725],["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n            ",725],["T_COMMENT","\/\/ obtain addresses\n",726],["T_WHITESPACE","            ",727],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","_getApi",727],"(",")",";",["T_WHITESPACE","\n            ",727],["T_VARIABLE","$address",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_VARIABLE","$this",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","_api",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","prepareShippingOptionsCallbackAddress",728],"(",["T_VARIABLE","$request",728],")",";",["T_WHITESPACE","\n            ",728],["T_VARIABLE","$quoteAddress",729],["T_WHITESPACE"," ",729],"=",["T_WHITESPACE"," ",729],["T_VARIABLE","$this",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","_quote",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","getShippingAddress",729],"(",")",";",["T_WHITESPACE","\n\n            ",729],["T_COMMENT","\/\/ compare addresses, calculate shipping rates and prepare response\n",731],["T_WHITESPACE","            ",732],["T_VARIABLE","$options",732],["T_WHITESPACE"," ",732],"=",["T_WHITESPACE"," ",732],"[","]",";",["T_WHITESPACE","\n            ",732],["T_IF","if",733],["T_WHITESPACE"," ",733],"(",["T_VARIABLE","$address",733],["T_WHITESPACE"," ",733],["T_BOOLEAN_AND","&&",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$quoteAddress",733],["T_WHITESPACE"," ",733],["T_BOOLEAN_AND","&&",733],["T_WHITESPACE"," ",733],"!",["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","_quote",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","getIsVirtual",733],"(",")",")",["T_WHITESPACE"," ",733],"{",["T_WHITESPACE","\n                ",733],["T_FOREACH","foreach",734],["T_WHITESPACE"," ",734],"(",["T_VARIABLE","$address",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","getExportedKeys",734],"(",")",["T_WHITESPACE"," ",734],["T_AS","as",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$key",734],")",["T_WHITESPACE"," ",734],"{",["T_WHITESPACE","\n                    ",734],["T_VARIABLE","$quoteAddress",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","setDataUsingMethod",735],"(",["T_VARIABLE","$key",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$address",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","getData",735],"(",["T_VARIABLE","$key",735],")",")",";",["T_WHITESPACE","\n                ",735],"}",["T_WHITESPACE","\n                ",736],["T_VARIABLE","$quoteAddress",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","setCollectShippingRates",737],"(",["T_STRING","true",737],")",";",["T_WHITESPACE","\n                ",737],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","totalsCollector",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","collectAddressTotals",738],"(",["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","_quote",738],",",["T_WHITESPACE"," ",738],["T_VARIABLE","$quoteAddress",738],")",";",["T_WHITESPACE","\n                ",738],["T_VARIABLE","$options",739],["T_WHITESPACE"," ",739],"=",["T_WHITESPACE"," ",739],["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","_prepareShippingOptions",739],"(",["T_VARIABLE","$quoteAddress",739],",",["T_WHITESPACE"," ",739],["T_STRING","false",739],",",["T_WHITESPACE"," ",739],["T_STRING","true",739],")",";",["T_WHITESPACE","\n            ",739],"}",["T_WHITESPACE","\n            ",740],["T_VARIABLE","$response",741],["T_WHITESPACE"," ",741],"=",["T_WHITESPACE"," ",741],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","_api",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","setShippingOptions",741],"(",["T_VARIABLE","$options",741],")",["T_OBJECT_OPERATOR","->",741],["T_STRING","formatShippingOptionsCallback",741],"(",")",";",["T_WHITESPACE","\n\n            ",741],["T_COMMENT","\/\/ log request and response\n",743],["T_WHITESPACE","            ",744],["T_VARIABLE","$debugData",744],"[",["T_CONSTANT_ENCAPSED_STRING","'response'",744],"]",["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],["T_VARIABLE","$response",744],";",["T_WHITESPACE","\n            ",744],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","_logger",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","debug",745],"(",["T_STRING","var_export",745],"(",["T_VARIABLE","$debugData",745],",",["T_WHITESPACE"," ",745],["T_STRING","true",745],")",")",";",["T_WHITESPACE","\n            ",745],["T_RETURN","return",746],["T_WHITESPACE"," ",746],["T_VARIABLE","$response",746],";",["T_WHITESPACE","\n        ",746],"}",["T_WHITESPACE"," ",747],["T_CATCH","catch",747],["T_WHITESPACE"," ",747],"(",["T_NS_SEPARATOR","\\",747],["T_STRING","Exception",747],["T_WHITESPACE"," ",747],["T_VARIABLE","$e",747],")",["T_WHITESPACE"," ",747],"{",["T_WHITESPACE","\n            ",747],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","_logger",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","debug",748],"(",["T_STRING","var_export",748],"(",["T_VARIABLE","$debugData",748],",",["T_WHITESPACE"," ",748],["T_STRING","true",748],")",")",";",["T_WHITESPACE","\n            ",748],["T_THROW","throw",749],["T_WHITESPACE"," ",749],["T_VARIABLE","$e",749],";",["T_WHITESPACE","\n        ",749],"}",["T_WHITESPACE","\n    ",750],"}",["T_WHITESPACE","\n\n    ",751],["T_DOC_COMMENT","\/**\n     * Set shipping method to quote, if needed\n     *\n     * @param string $methodCode\n     * @return void\n     *\/",753],["T_WHITESPACE","\n    ",758],["T_PUBLIC","public",759],["T_WHITESPACE"," ",759],["T_FUNCTION","function",759],["T_WHITESPACE"," ",759],["T_STRING","updateShippingMethod",759],"(",["T_VARIABLE","$methodCode",759],")",["T_WHITESPACE","\n    ",759],"{",["T_WHITESPACE","\n        ",760],["T_VARIABLE","$shippingAddress",761],["T_WHITESPACE"," ",761],"=",["T_WHITESPACE"," ",761],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","_quote",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","getShippingAddress",761],"(",")",";",["T_WHITESPACE","\n        ",761],["T_IF","if",762],["T_WHITESPACE"," ",762],"(","!",["T_VARIABLE","$this",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","_quote",762],["T_OBJECT_OPERATOR","->",762],["T_STRING","getIsVirtual",762],"(",")",["T_WHITESPACE"," ",762],["T_BOOLEAN_AND","&&",762],["T_WHITESPACE"," ",762],["T_VARIABLE","$shippingAddress",762],")",["T_WHITESPACE"," ",762],"{",["T_WHITESPACE","\n            ",762],["T_IF","if",763],["T_WHITESPACE"," ",763],"(",["T_VARIABLE","$methodCode",763],["T_WHITESPACE"," ",763],["T_IS_NOT_EQUAL","!=",763],["T_WHITESPACE"," ",763],["T_VARIABLE","$shippingAddress",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","getShippingMethod",763],"(",")",")",["T_WHITESPACE"," ",763],"{",["T_WHITESPACE","\n                ",763],["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","ignoreAddressValidation",764],"(",")",";",["T_WHITESPACE","\n                ",764],["T_VARIABLE","$shippingAddress",765],["T_OBJECT_OPERATOR","->",765],["T_STRING","setShippingMethod",765],"(",["T_VARIABLE","$methodCode",765],")",["T_OBJECT_OPERATOR","->",765],["T_STRING","setCollectShippingRates",765],"(",["T_STRING","true",765],")",";",["T_WHITESPACE","\n                ",765],["T_VARIABLE","$cartExtension",766],["T_WHITESPACE"," ",766],"=",["T_WHITESPACE"," ",766],["T_VARIABLE","$this",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","_quote",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","getExtensionAttributes",766],"(",")",";",["T_WHITESPACE","\n                ",766],["T_IF","if",767],["T_WHITESPACE"," ",767],"(",["T_VARIABLE","$cartExtension",767],["T_WHITESPACE"," ",767],["T_BOOLEAN_AND","&&",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$cartExtension",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","getShippingAssignments",767],"(",")",")",["T_WHITESPACE"," ",767],"{",["T_WHITESPACE","\n                    ",767],["T_VARIABLE","$cartExtension",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","getShippingAssignments",768],"(",")","[",["T_LNUMBER","0",768],"]",["T_WHITESPACE","\n                        ",768],["T_OBJECT_OPERATOR","->",769],["T_STRING","getShipping",769],"(",")",["T_WHITESPACE","\n                        ",769],["T_OBJECT_OPERATOR","->",770],["T_STRING","setMethod",770],"(",["T_VARIABLE","$methodCode",770],")",";",["T_WHITESPACE","\n                ",770],"}",["T_WHITESPACE","\n                ",771],["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","_quote",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","collectTotals",772],"(",")",";",["T_WHITESPACE","\n                ",772],["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","quoteRepository",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","save",773],"(",["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","_quote",773],")",";",["T_WHITESPACE","\n            ",773],"}",["T_WHITESPACE","\n        ",774],"}",["T_WHITESPACE","\n    ",775],"}",["T_WHITESPACE","\n\n    ",776],["T_DOC_COMMENT","\/**\n     * Place the order when customer returned from PayPal until this moment all quote data must be valid.\n     *\n     * @param string $token\n     * @param string|null $shippingMethodCode\n     * @return void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",778],["T_WHITESPACE","\n    ",786],["T_PUBLIC","public",787],["T_WHITESPACE"," ",787],["T_FUNCTION","function",787],["T_WHITESPACE"," ",787],["T_STRING","place",787],"(",["T_VARIABLE","$token",787],",",["T_WHITESPACE"," ",787],["T_VARIABLE","$shippingMethodCode",787],["T_WHITESPACE"," ",787],"=",["T_WHITESPACE"," ",787],["T_STRING","null",787],")",["T_WHITESPACE","\n    ",787],"{",["T_WHITESPACE","\n        ",788],["T_IF","if",789],["T_WHITESPACE"," ",789],"(",["T_VARIABLE","$shippingMethodCode",789],")",["T_WHITESPACE"," ",789],"{",["T_WHITESPACE","\n            ",789],["T_VARIABLE","$this",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","updateShippingMethod",790],"(",["T_VARIABLE","$shippingMethodCode",790],")",";",["T_WHITESPACE","\n        ",790],"}",["T_WHITESPACE","\n\n        ",791],["T_IF","if",793],["T_WHITESPACE"," ",793],"(",["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","getCheckoutMethod",793],"(",")",["T_WHITESPACE"," ",793],["T_IS_EQUAL","==",793],["T_WHITESPACE"," ",793],["T_NS_SEPARATOR","\\",793],["T_STRING","Magento",793],["T_NS_SEPARATOR","\\",793],["T_STRING","Checkout",793],["T_NS_SEPARATOR","\\",793],["T_STRING","Model",793],["T_NS_SEPARATOR","\\",793],["T_STRING","Type",793],["T_NS_SEPARATOR","\\",793],["T_STRING","Onepage",793],["T_DOUBLE_COLON","::",793],["T_STRING","METHOD_GUEST",793],")",["T_WHITESPACE"," ",793],"{",["T_WHITESPACE","\n            ",793],["T_VARIABLE","$this",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","prepareGuestQuote",794],"(",")",";",["T_WHITESPACE","\n        ",794],"}",["T_WHITESPACE","\n\n        ",795],["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","ignoreAddressValidation",797],"(",")",";",["T_WHITESPACE","\n        ",797],["T_VARIABLE","$this",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","_quote",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","collectTotals",798],"(",")",";",["T_WHITESPACE","\n        ",798],["T_VARIABLE","$orderId",799],["T_WHITESPACE"," ",799],"=",["T_WHITESPACE"," ",799],["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","quoteManagement",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","placeOrder",799],"(",["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","_quote",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","getId",799],"(",")",")",";",["T_WHITESPACE","\n        ",799],["T_VARIABLE","$order",800],["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_VARIABLE","$this",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","getOrderRepository",800],"(",")",["T_OBJECT_OPERATOR","->",800],["T_STRING","get",800],"(",["T_VARIABLE","$orderId",800],")",";",["T_WHITESPACE","\n\n        ",800],["T_IF","if",802],["T_WHITESPACE"," ",802],"(","!",["T_VARIABLE","$order",802],")",["T_WHITESPACE"," ",802],"{",["T_WHITESPACE","\n            ",802],["T_RETURN","return",803],";",["T_WHITESPACE","\n        ",803],"}",["T_WHITESPACE","\n\n        ",804],["T_COMMENT","\/\/ commence redirecting to finish payment, if paypal requires it\n",806],["T_WHITESPACE","        ",807],["T_IF","if",807],["T_WHITESPACE"," ",807],"(",["T_VARIABLE","$order",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","getPayment",807],"(",")",["T_OBJECT_OPERATOR","->",807],["T_STRING","getAdditionalInformation",807],"(",["T_STRING","self",807],["T_DOUBLE_COLON","::",807],["T_STRING","PAYMENT_INFO_TRANSPORT_REDIRECT",807],")",")",["T_WHITESPACE"," ",807],"{",["T_WHITESPACE","\n            ",807],["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","_redirectUrl",808],["T_WHITESPACE"," ",808],"=",["T_WHITESPACE"," ",808],["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","_config",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","getExpressCheckoutCompleteUrl",808],"(",["T_VARIABLE","$token",808],")",";",["T_WHITESPACE","\n        ",808],"}",["T_WHITESPACE","\n\n        ",809],["T_SWITCH","switch",811],["T_WHITESPACE"," ",811],"(",["T_VARIABLE","$order",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","getState",811],"(",")",")",["T_WHITESPACE"," ",811],"{",["T_WHITESPACE","\n            ",811],["T_COMMENT","\/\/ even after placement paypal can disallow to authorize\/capture, but will wait until bank transfers money\n",812],["T_WHITESPACE","            ",813],["T_CASE","case",813],["T_WHITESPACE"," ",813],["T_NS_SEPARATOR","\\",813],["T_STRING","Magento",813],["T_NS_SEPARATOR","\\",813],["T_STRING","Sales",813],["T_NS_SEPARATOR","\\",813],["T_STRING","Model",813],["T_NS_SEPARATOR","\\",813],["T_STRING","Order",813],["T_DOUBLE_COLON","::",813],["T_STRING","STATE_PENDING_PAYMENT",813],":",["T_WHITESPACE","\n                ",813],["T_COMMENT","\/\/ TODO\n",814],["T_WHITESPACE","                ",815],["T_BREAK","break",815],";",["T_WHITESPACE","\n                ",815],["T_COMMENT","\/\/ regular placement, when everything is ok\n",816],["T_WHITESPACE","            ",817],["T_CASE","case",817],["T_WHITESPACE"," ",817],["T_NS_SEPARATOR","\\",817],["T_STRING","Magento",817],["T_NS_SEPARATOR","\\",817],["T_STRING","Sales",817],["T_NS_SEPARATOR","\\",817],["T_STRING","Model",817],["T_NS_SEPARATOR","\\",817],["T_STRING","Order",817],["T_DOUBLE_COLON","::",817],["T_STRING","STATE_PROCESSING",817],":",["T_WHITESPACE","\n            ",817],["T_CASE","case",818],["T_WHITESPACE"," ",818],["T_NS_SEPARATOR","\\",818],["T_STRING","Magento",818],["T_NS_SEPARATOR","\\",818],["T_STRING","Sales",818],["T_NS_SEPARATOR","\\",818],["T_STRING","Model",818],["T_NS_SEPARATOR","\\",818],["T_STRING","Order",818],["T_DOUBLE_COLON","::",818],["T_STRING","STATE_COMPLETE",818],":",["T_WHITESPACE","\n            ",818],["T_CASE","case",819],["T_WHITESPACE"," ",819],["T_NS_SEPARATOR","\\",819],["T_STRING","Magento",819],["T_NS_SEPARATOR","\\",819],["T_STRING","Sales",819],["T_NS_SEPARATOR","\\",819],["T_STRING","Model",819],["T_NS_SEPARATOR","\\",819],["T_STRING","Order",819],["T_DOUBLE_COLON","::",819],["T_STRING","STATE_PAYMENT_REVIEW",819],":",["T_WHITESPACE","\n                ",819],["T_VARIABLE","$this",820],["T_OBJECT_OPERATOR","->",820],["T_STRING","orderSender",820],["T_OBJECT_OPERATOR","->",820],["T_STRING","send",820],"(",["T_VARIABLE","$order",820],")",";",["T_WHITESPACE","\n                ",820],["T_VARIABLE","$this",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","_checkoutSession",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","start",821],"(",")",";",["T_WHITESPACE","\n                ",821],["T_BREAK","break",822],";",["T_WHITESPACE","\n            ",822],["T_DEFAULT","default",823],":",["T_WHITESPACE","\n                ",823],["T_BREAK","break",824],";",["T_WHITESPACE","\n        ",824],"}",["T_WHITESPACE","\n        ",825],["T_VARIABLE","$this",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","_order",826],["T_WHITESPACE"," ",826],"=",["T_WHITESPACE"," ",826],["T_VARIABLE","$order",826],";",["T_WHITESPACE","\n    ",826],"}",["T_WHITESPACE","\n\n    ",827],["T_DOC_COMMENT","\/**\n     * Make sure addresses will be saved without validation errors\n     *\n     * @return void\n     *\/",829],["T_WHITESPACE","\n    ",833],["T_PRIVATE","private",834],["T_WHITESPACE"," ",834],["T_FUNCTION","function",834],["T_WHITESPACE"," ",834],["T_STRING","ignoreAddressValidation",834],"(",")",["T_WHITESPACE","\n    ",834],"{",["T_WHITESPACE","\n        ",835],["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","_quote",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","getBillingAddress",836],"(",")",["T_OBJECT_OPERATOR","->",836],["T_STRING","setShouldIgnoreValidation",836],"(",["T_STRING","true",836],")",";",["T_WHITESPACE","\n        ",836],["T_IF","if",837],["T_WHITESPACE"," ",837],"(","!",["T_VARIABLE","$this",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","_quote",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","getIsVirtual",837],"(",")",")",["T_WHITESPACE"," ",837],"{",["T_WHITESPACE","\n            ",837],["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","_quote",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","getShippingAddress",838],"(",")",["T_OBJECT_OPERATOR","->",838],["T_STRING","setShouldIgnoreValidation",838],"(",["T_STRING","true",838],")",";",["T_WHITESPACE","\n            ",838],["T_IF","if",839],["T_WHITESPACE"," ",839],"(","!",["T_VARIABLE","$this",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","_config",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","getValue",839],"(",["T_CONSTANT_ENCAPSED_STRING","'requireBillingAddress'",839],")",["T_WHITESPACE","\n                ",839],["T_BOOLEAN_AND","&&",840],["T_WHITESPACE"," ",840],"!",["T_VARIABLE","$this",840],["T_OBJECT_OPERATOR","->",840],["T_STRING","_quote",840],["T_OBJECT_OPERATOR","->",840],["T_STRING","getBillingAddress",840],"(",")",["T_OBJECT_OPERATOR","->",840],["T_STRING","getEmail",840],"(",")",["T_WHITESPACE","\n            ",840],")",["T_WHITESPACE"," ",841],"{",["T_WHITESPACE","\n                ",841],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","_quote",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","getBillingAddress",842],"(",")",["T_OBJECT_OPERATOR","->",842],["T_STRING","setSameAsBilling",842],"(",["T_LNUMBER","1",842],")",";",["T_WHITESPACE","\n            ",842],"}",["T_WHITESPACE","\n        ",843],"}",["T_WHITESPACE","\n    ",844],"}",["T_WHITESPACE","\n\n    ",845],["T_DOC_COMMENT","\/**\n     * Determine whether redirect somewhere specifically is required\n     *\n     * @return string\n     *\/",847],["T_WHITESPACE","\n    ",851],["T_PUBLIC","public",852],["T_WHITESPACE"," ",852],["T_FUNCTION","function",852],["T_WHITESPACE"," ",852],["T_STRING","getRedirectUrl",852],"(",")",["T_WHITESPACE","\n    ",852],"{",["T_WHITESPACE","\n        ",853],["T_RETURN","return",854],["T_WHITESPACE"," ",854],["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","_redirectUrl",854],";",["T_WHITESPACE","\n    ",854],"}",["T_WHITESPACE","\n\n    ",855],["T_DOC_COMMENT","\/**\n     * Get created billing agreement\n     *\n     * @return \\Magento\\Paypal\\Model\\Billing\\Agreement|null\n     *\/",857],["T_WHITESPACE","\n    ",861],["T_PUBLIC","public",862],["T_WHITESPACE"," ",862],["T_FUNCTION","function",862],["T_WHITESPACE"," ",862],["T_STRING","getBillingAgreement",862],"(",")",["T_WHITESPACE","\n    ",862],"{",["T_WHITESPACE","\n        ",863],["T_RETURN","return",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$this",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","_billingAgreement",864],";",["T_WHITESPACE","\n    ",864],"}",["T_WHITESPACE","\n\n    ",865],["T_DOC_COMMENT","\/**\n     * Return order\n     *\n     * @return \\Magento\\Sales\\Model\\Order\n     *\/",867],["T_WHITESPACE","\n    ",871],["T_PUBLIC","public",872],["T_WHITESPACE"," ",872],["T_FUNCTION","function",872],["T_WHITESPACE"," ",872],["T_STRING","getOrder",872],"(",")",["T_WHITESPACE","\n    ",872],"{",["T_WHITESPACE","\n        ",873],["T_RETURN","return",874],["T_WHITESPACE"," ",874],["T_VARIABLE","$this",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","_order",874],";",["T_WHITESPACE","\n    ",874],"}",["T_WHITESPACE","\n\n    ",875],["T_DOC_COMMENT","\/**\n     * Get checkout method\n     *\n     * @return string\n     *\/",877],["T_WHITESPACE","\n    ",881],["T_PUBLIC","public",882],["T_WHITESPACE"," ",882],["T_FUNCTION","function",882],["T_WHITESPACE"," ",882],["T_STRING","getCheckoutMethod",882],"(",")",["T_WHITESPACE","\n    ",882],"{",["T_WHITESPACE","\n        ",883],["T_IF","if",884],["T_WHITESPACE"," ",884],"(",["T_VARIABLE","$this",884],["T_OBJECT_OPERATOR","->",884],["T_STRING","getCustomerSession",884],"(",")",["T_OBJECT_OPERATOR","->",884],["T_STRING","isLoggedIn",884],"(",")",")",["T_WHITESPACE"," ",884],"{",["T_WHITESPACE","\n            ",884],["T_RETURN","return",885],["T_WHITESPACE"," ",885],["T_NS_SEPARATOR","\\",885],["T_STRING","Magento",885],["T_NS_SEPARATOR","\\",885],["T_STRING","Checkout",885],["T_NS_SEPARATOR","\\",885],["T_STRING","Model",885],["T_NS_SEPARATOR","\\",885],["T_STRING","Type",885],["T_NS_SEPARATOR","\\",885],["T_STRING","Onepage",885],["T_DOUBLE_COLON","::",885],["T_STRING","METHOD_CUSTOMER",885],";",["T_WHITESPACE","\n        ",885],"}",["T_WHITESPACE","\n        ",886],["T_IF","if",887],["T_WHITESPACE"," ",887],"(","!",["T_VARIABLE","$this",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","_quote",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","getCheckoutMethod",887],"(",")",")",["T_WHITESPACE"," ",887],"{",["T_WHITESPACE","\n            ",887],["T_IF","if",888],["T_WHITESPACE"," ",888],"(",["T_VARIABLE","$this",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","_checkoutData",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","isAllowedGuestCheckout",888],"(",["T_VARIABLE","$this",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","_quote",888],")",")",["T_WHITESPACE"," ",888],"{",["T_WHITESPACE","\n                ",888],["T_VARIABLE","$this",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","_quote",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","setCheckoutMethod",889],"(",["T_NS_SEPARATOR","\\",889],["T_STRING","Magento",889],["T_NS_SEPARATOR","\\",889],["T_STRING","Checkout",889],["T_NS_SEPARATOR","\\",889],["T_STRING","Model",889],["T_NS_SEPARATOR","\\",889],["T_STRING","Type",889],["T_NS_SEPARATOR","\\",889],["T_STRING","Onepage",889],["T_DOUBLE_COLON","::",889],["T_STRING","METHOD_GUEST",889],")",";",["T_WHITESPACE","\n            ",889],"}",["T_WHITESPACE"," ",890],["T_ELSE","else",890],["T_WHITESPACE"," ",890],"{",["T_WHITESPACE","\n                ",890],["T_VARIABLE","$this",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","_quote",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","setCheckoutMethod",891],"(",["T_NS_SEPARATOR","\\",891],["T_STRING","Magento",891],["T_NS_SEPARATOR","\\",891],["T_STRING","Checkout",891],["T_NS_SEPARATOR","\\",891],["T_STRING","Model",891],["T_NS_SEPARATOR","\\",891],["T_STRING","Type",891],["T_NS_SEPARATOR","\\",891],["T_STRING","Onepage",891],["T_DOUBLE_COLON","::",891],["T_STRING","METHOD_REGISTER",891],")",";",["T_WHITESPACE","\n            ",891],"}",["T_WHITESPACE","\n        ",892],"}",["T_WHITESPACE","\n        ",893],["T_RETURN","return",894],["T_WHITESPACE"," ",894],["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","_quote",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","getCheckoutMethod",894],"(",")",";",["T_WHITESPACE","\n    ",894],"}",["T_WHITESPACE","\n\n    ",895],["T_DOC_COMMENT","\/**\n     * Sets address data from exported address\n     *\n     * @param Address $address\n     * @param array $exportedAddress\n     * @return void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",897],["T_WHITESPACE","\n    ",904],["T_PROTECTED","protected",905],["T_WHITESPACE"," ",905],["T_FUNCTION","function",905],["T_WHITESPACE"," ",905],["T_STRING","_setExportedAddressData",905],"(",["T_VARIABLE","$address",905],",",["T_WHITESPACE"," ",905],["T_VARIABLE","$exportedAddress",905],")",["T_WHITESPACE","\n    ",905],"{",["T_WHITESPACE","\n        ",906],["T_COMMENT","\/\/ Exported data is more priority if we came from Express Checkout button\n",907],["T_WHITESPACE","        ",908],["T_VARIABLE","$isButton",908],["T_WHITESPACE","  ",908],"=",["T_WHITESPACE"," ",908],["T_BOOL_CAST","(bool)",908],["T_VARIABLE","$this",908],["T_OBJECT_OPERATOR","->",908],["T_STRING","_quote",908],["T_OBJECT_OPERATOR","->",908],["T_STRING","getPayment",908],"(",")",["T_OBJECT_OPERATOR","->",908],["T_STRING","getAdditionalInformation",908],"(",["T_STRING","self",908],["T_DOUBLE_COLON","::",908],["T_STRING","PAYMENT_INFO_BUTTON",908],")",";",["T_WHITESPACE","\n        ",908],["T_IF","if",909],["T_WHITESPACE"," ",909],"(","!",["T_VARIABLE","$isButton",909],")",["T_WHITESPACE"," ",909],"{",["T_WHITESPACE","\n            ",909],["T_FOREACH","foreach",910],["T_WHITESPACE"," ",910],"(",["T_VARIABLE","$exportedAddress",910],["T_OBJECT_OPERATOR","->",910],["T_STRING","getExportedKeys",910],"(",")",["T_WHITESPACE"," ",910],["T_AS","as",910],["T_WHITESPACE"," ",910],["T_VARIABLE","$key",910],")",["T_WHITESPACE"," ",910],"{",["T_WHITESPACE","\n                ",910],["T_VARIABLE","$oldData",911],["T_WHITESPACE"," ",911],"=",["T_WHITESPACE"," ",911],["T_VARIABLE","$address",911],["T_OBJECT_OPERATOR","->",911],["T_STRING","getDataUsingMethod",911],"(",["T_VARIABLE","$key",911],")",";",["T_WHITESPACE","\n                ",911],["T_VARIABLE","$isEmpty",912],["T_WHITESPACE"," ",912],"=",["T_WHITESPACE"," ",912],["T_STRING","null",912],";",["T_WHITESPACE","\n                ",912],["T_IF","if",913],["T_WHITESPACE"," ",913],"(",["T_STRING","is_array",913],"(",["T_VARIABLE","$oldData",913],")",")",["T_WHITESPACE"," ",913],"{",["T_WHITESPACE","\n                    ",913],["T_FOREACH","foreach",914],["T_WHITESPACE"," ",914],"(",["T_VARIABLE","$oldData",914],["T_WHITESPACE"," ",914],["T_AS","as",914],["T_WHITESPACE"," ",914],["T_VARIABLE","$val",914],")",["T_WHITESPACE"," ",914],"{",["T_WHITESPACE","\n                        ",914],["T_IF","if",915],["T_WHITESPACE"," ",915],"(","!",["T_EMPTY","empty",915],"(",["T_VARIABLE","$val",915],")",")",["T_WHITESPACE"," ",915],"{",["T_WHITESPACE","\n                            ",915],["T_VARIABLE","$isEmpty",916],["T_WHITESPACE"," ",916],"=",["T_WHITESPACE"," ",916],["T_STRING","false",916],";",["T_WHITESPACE","\n                            ",916],["T_BREAK","break",917],";",["T_WHITESPACE","\n                        ",917],"}",["T_WHITESPACE","\n                        ",918],["T_VARIABLE","$isEmpty",919],["T_WHITESPACE"," ",919],"=",["T_WHITESPACE"," ",919],["T_STRING","true",919],";",["T_WHITESPACE","\n                    ",919],"}",["T_WHITESPACE","\n                ",920],"}",["T_WHITESPACE","\n                ",921],["T_IF","if",922],["T_WHITESPACE"," ",922],"(",["T_EMPTY","empty",922],"(",["T_VARIABLE","$oldData",922],")",["T_WHITESPACE"," ",922],["T_BOOLEAN_OR","||",922],["T_WHITESPACE"," ",922],["T_VARIABLE","$isEmpty",922],["T_WHITESPACE"," ",922],["T_IS_IDENTICAL","===",922],["T_WHITESPACE"," ",922],["T_STRING","true",922],")",["T_WHITESPACE"," ",922],"{",["T_WHITESPACE","\n                    ",922],["T_VARIABLE","$address",923],["T_OBJECT_OPERATOR","->",923],["T_STRING","setDataUsingMethod",923],"(",["T_VARIABLE","$key",923],",",["T_WHITESPACE"," ",923],["T_VARIABLE","$exportedAddress",923],["T_OBJECT_OPERATOR","->",923],["T_STRING","getData",923],"(",["T_VARIABLE","$key",923],")",")",";",["T_WHITESPACE","\n                ",923],"}",["T_WHITESPACE","\n            ",924],"}",["T_WHITESPACE","\n        ",925],"}",["T_WHITESPACE"," ",926],["T_ELSE","else",926],["T_WHITESPACE"," ",926],"{",["T_WHITESPACE","\n            ",926],["T_FOREACH","foreach",927],["T_WHITESPACE"," ",927],"(",["T_VARIABLE","$exportedAddress",927],["T_OBJECT_OPERATOR","->",927],["T_STRING","getExportedKeys",927],"(",")",["T_WHITESPACE"," ",927],["T_AS","as",927],["T_WHITESPACE"," ",927],["T_VARIABLE","$key",927],")",["T_WHITESPACE"," ",927],"{",["T_WHITESPACE","\n                ",927],["T_VARIABLE","$data",928],["T_WHITESPACE"," ",928],"=",["T_WHITESPACE"," ",928],["T_VARIABLE","$exportedAddress",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","getData",928],"(",["T_VARIABLE","$key",928],")",";",["T_WHITESPACE","\n                ",928],["T_IF","if",929],["T_WHITESPACE"," ",929],"(","!",["T_EMPTY","empty",929],"(",["T_VARIABLE","$data",929],")",")",["T_WHITESPACE"," ",929],"{",["T_WHITESPACE","\n                    ",929],["T_VARIABLE","$address",930],["T_OBJECT_OPERATOR","->",930],["T_STRING","setDataUsingMethod",930],"(",["T_VARIABLE","$key",930],",",["T_WHITESPACE"," ",930],["T_VARIABLE","$data",930],")",";",["T_WHITESPACE","\n                ",930],"}",["T_WHITESPACE","\n            ",931],"}",["T_WHITESPACE","\n        ",932],"}",["T_WHITESPACE","\n    ",933],"}",["T_WHITESPACE","\n\n    ",934],["T_DOC_COMMENT","\/**\n     * Set create billing agreement flag to api call\n     *\n     * @return $this\n     *\/",936],["T_WHITESPACE","\n    ",940],["T_PROTECTED","protected",941],["T_WHITESPACE"," ",941],["T_FUNCTION","function",941],["T_WHITESPACE"," ",941],["T_STRING","_setBillingAgreementRequest",941],"(",")",["T_WHITESPACE","\n    ",941],"{",["T_WHITESPACE","\n        ",942],["T_IF","if",943],["T_WHITESPACE"," ",943],"(","!",["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","_customerId",943],")",["T_WHITESPACE"," ",943],"{",["T_WHITESPACE","\n            ",943],["T_RETURN","return",944],["T_WHITESPACE"," ",944],["T_VARIABLE","$this",944],";",["T_WHITESPACE","\n        ",944],"}",["T_WHITESPACE","\n\n        ",945],["T_VARIABLE","$isRequested",947],["T_WHITESPACE"," ",947],"=",["T_WHITESPACE"," ",947],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","_isBARequested",947],["T_WHITESPACE"," ",947],["T_BOOLEAN_OR","||",947],["T_WHITESPACE"," ",947],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","_quote",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","getPayment",947],"(",")",["T_WHITESPACE","\n            ",947],["T_OBJECT_OPERATOR","->",948],["T_STRING","getAdditionalInformation",948],"(",["T_STRING","self",948],["T_DOUBLE_COLON","::",948],["T_STRING","PAYMENT_INFO_TRANSPORT_BILLING_AGREEMENT",948],")",";",["T_WHITESPACE","\n\n        ",948],["T_IF","if",950],["T_WHITESPACE"," ",950],"(","!","(",["T_VARIABLE","$this",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","_config",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","getValue",950],"(",["T_CONSTANT_ENCAPSED_STRING","'allow_ba_signup'",950],")",["T_WHITESPACE"," ",950],["T_IS_EQUAL","==",950],["T_WHITESPACE"," ",950],["T_STRING","PaypalConfig",950],["T_DOUBLE_COLON","::",950],["T_STRING","EC_BA_SIGNUP_AUTO",950],["T_WHITESPACE","\n            ",950],["T_BOOLEAN_OR","||",951],["T_WHITESPACE"," ",951],["T_VARIABLE","$isRequested",951],["T_WHITESPACE"," ",951],["T_BOOLEAN_AND","&&",951],["T_WHITESPACE"," ",951],["T_VARIABLE","$this",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","_config",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","shouldAskToCreateBillingAgreement",951],"(",")",")",["T_WHITESPACE","\n        ",951],")",["T_WHITESPACE"," ",952],"{",["T_WHITESPACE","\n            ",952],["T_RETURN","return",953],["T_WHITESPACE"," ",953],["T_VARIABLE","$this",953],";",["T_WHITESPACE","\n        ",953],"}",["T_WHITESPACE","\n\n        ",954],["T_IF","if",956],["T_WHITESPACE"," ",956],"(","!",["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","_agreementFactory",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","create",956],"(",")",["T_OBJECT_OPERATOR","->",956],["T_STRING","needToCreateForCustomer",956],"(",["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","_customerId",956],")",")",["T_WHITESPACE"," ",956],"{",["T_WHITESPACE","\n            ",956],["T_RETURN","return",957],["T_WHITESPACE"," ",957],["T_VARIABLE","$this",957],";",["T_WHITESPACE","\n        ",957],"}",["T_WHITESPACE","\n        ",958],["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","_api",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","setBillingType",959],"(",["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","_api",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","getBillingAgreementType",959],"(",")",")",";",["T_WHITESPACE","\n        ",959],["T_RETURN","return",960],["T_WHITESPACE"," ",960],["T_VARIABLE","$this",960],";",["T_WHITESPACE","\n    ",960],"}",["T_WHITESPACE","\n\n    ",961],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Paypal\\Model\\Api\\Nvp\n     *\/",963],["T_WHITESPACE","\n    ",965],["T_PROTECTED","protected",966],["T_WHITESPACE"," ",966],["T_FUNCTION","function",966],["T_WHITESPACE"," ",966],["T_STRING","_getApi",966],"(",")",["T_WHITESPACE","\n    ",966],"{",["T_WHITESPACE","\n        ",967],["T_IF","if",968],["T_WHITESPACE"," ",968],"(",["T_STRING","null",968],["T_WHITESPACE"," ",968],["T_IS_IDENTICAL","===",968],["T_WHITESPACE"," ",968],["T_VARIABLE","$this",968],["T_OBJECT_OPERATOR","->",968],["T_STRING","_api",968],")",["T_WHITESPACE"," ",968],"{",["T_WHITESPACE","\n            ",968],["T_VARIABLE","$this",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","_api",969],["T_WHITESPACE"," ",969],"=",["T_WHITESPACE"," ",969],["T_VARIABLE","$this",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","_apiTypeFactory",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","create",969],"(",["T_VARIABLE","$this",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","_apiType",969],")",["T_OBJECT_OPERATOR","->",969],["T_STRING","setConfigObject",969],"(",["T_VARIABLE","$this",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","_config",969],")",";",["T_WHITESPACE","\n        ",969],"}",["T_WHITESPACE","\n        ",970],["T_RETURN","return",971],["T_WHITESPACE"," ",971],["T_VARIABLE","$this",971],["T_OBJECT_OPERATOR","->",971],["T_STRING","_api",971],";",["T_WHITESPACE","\n    ",971],"}",["T_WHITESPACE","\n\n    ",972],["T_DOC_COMMENT","\/**\n     * Attempt to collect address shipping rates and return them for further usage in instant update API\n     * Returns empty array if it was impossible to obtain any shipping rate\n     * If there are shipping rates obtained, the method must return one of them as default.\n     *\n     * @param Address $address\n     * @param bool $mayReturnEmpty\n     * @param bool $calculateTax\n     * @return array|false\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",974],["T_WHITESPACE","\n    ",985],["T_PROTECTED","protected",986],["T_WHITESPACE"," ",986],["T_FUNCTION","function",986],["T_WHITESPACE"," ",986],["T_STRING","_prepareShippingOptions",986],"(",["T_STRING","Address",986],["T_WHITESPACE"," ",986],["T_VARIABLE","$address",986],",",["T_WHITESPACE"," ",986],["T_VARIABLE","$mayReturnEmpty",986],["T_WHITESPACE"," ",986],"=",["T_WHITESPACE"," ",986],["T_STRING","false",986],",",["T_WHITESPACE"," ",986],["T_VARIABLE","$calculateTax",986],["T_WHITESPACE"," ",986],"=",["T_WHITESPACE"," ",986],["T_STRING","false",986],")",["T_WHITESPACE","\n    ",986],"{",["T_WHITESPACE","\n        ",987],["T_VARIABLE","$options",988],["T_WHITESPACE"," ",988],"=",["T_WHITESPACE"," ",988],"[","]",";",["T_WHITESPACE","\n        ",988],["T_VARIABLE","$i",989],["T_WHITESPACE"," ",989],"=",["T_WHITESPACE"," ",989],["T_LNUMBER","0",989],";",["T_WHITESPACE","\n        ",989],["T_VARIABLE","$iMin",990],["T_WHITESPACE"," ",990],"=",["T_WHITESPACE"," ",990],["T_STRING","false",990],";",["T_WHITESPACE","\n        ",990],["T_VARIABLE","$min",991],["T_WHITESPACE"," ",991],"=",["T_WHITESPACE"," ",991],["T_STRING","false",991],";",["T_WHITESPACE","\n        ",991],["T_VARIABLE","$userSelectedOption",992],["T_WHITESPACE"," ",992],"=",["T_WHITESPACE"," ",992],["T_STRING","null",992],";",["T_WHITESPACE","\n\n        ",992],["T_FOREACH","foreach",994],["T_WHITESPACE"," ",994],"(",["T_VARIABLE","$address",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","getGroupedAllShippingRates",994],"(",")",["T_WHITESPACE"," ",994],["T_AS","as",994],["T_WHITESPACE"," ",994],["T_VARIABLE","$group",994],")",["T_WHITESPACE"," ",994],"{",["T_WHITESPACE","\n            ",994],["T_FOREACH","foreach",995],["T_WHITESPACE"," ",995],"(",["T_VARIABLE","$group",995],["T_WHITESPACE"," ",995],["T_AS","as",995],["T_WHITESPACE"," ",995],["T_VARIABLE","$rate",995],")",["T_WHITESPACE"," ",995],"{",["T_WHITESPACE","\n                ",995],["T_VARIABLE","$amount",996],["T_WHITESPACE"," ",996],"=",["T_WHITESPACE"," ",996],["T_DOUBLE_CAST","(double)",996],["T_VARIABLE","$rate",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","getPrice",996],"(",")",";",["T_WHITESPACE","\n                ",996],["T_IF","if",997],["T_WHITESPACE"," ",997],"(",["T_VARIABLE","$rate",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","getErrorMessage",997],"(",")",")",["T_WHITESPACE"," ",997],"{",["T_WHITESPACE","\n                    ",997],["T_CONTINUE","continue",998],";",["T_WHITESPACE","\n                ",998],"}",["T_WHITESPACE","\n                ",999],["T_VARIABLE","$isDefault",1000],["T_WHITESPACE"," ",1000],"=",["T_WHITESPACE"," ",1000],["T_VARIABLE","$address",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","getShippingMethod",1000],"(",")",["T_WHITESPACE"," ",1000],["T_IS_IDENTICAL","===",1000],["T_WHITESPACE"," ",1000],["T_VARIABLE","$rate",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","getCode",1000],"(",")",";",["T_WHITESPACE","\n                ",1000],["T_VARIABLE","$amountExclTax",1001],["T_WHITESPACE"," ",1001],"=",["T_WHITESPACE"," ",1001],["T_VARIABLE","$this",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","_taxData",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","getShippingPrice",1001],"(",["T_VARIABLE","$amount",1001],",",["T_WHITESPACE"," ",1001],["T_STRING","false",1001],",",["T_WHITESPACE"," ",1001],["T_VARIABLE","$address",1001],")",";",["T_WHITESPACE","\n                ",1001],["T_VARIABLE","$amountInclTax",1002],["T_WHITESPACE"," ",1002],"=",["T_WHITESPACE"," ",1002],["T_VARIABLE","$this",1002],["T_OBJECT_OPERATOR","->",1002],["T_STRING","_taxData",1002],["T_OBJECT_OPERATOR","->",1002],["T_STRING","getShippingPrice",1002],"(",["T_VARIABLE","$amount",1002],",",["T_WHITESPACE"," ",1002],["T_STRING","true",1002],",",["T_WHITESPACE"," ",1002],["T_VARIABLE","$address",1002],")",";",["T_WHITESPACE","\n\n                ",1002],["T_VARIABLE","$options",1004],"[",["T_VARIABLE","$i",1004],"]",["T_WHITESPACE"," ",1004],"=",["T_WHITESPACE"," ",1004],["T_NEW","new",1004],["T_WHITESPACE"," ",1004],["T_NS_SEPARATOR","\\",1004],["T_STRING","Magento",1004],["T_NS_SEPARATOR","\\",1004],["T_STRING","Framework",1004],["T_NS_SEPARATOR","\\",1004],["T_STRING","DataObject",1004],"(",["T_WHITESPACE","\n                    ",1004],"[",["T_WHITESPACE","\n                        ",1005],["T_CONSTANT_ENCAPSED_STRING","'is_default'",1006],["T_WHITESPACE"," ",1006],["T_DOUBLE_ARROW","=>",1006],["T_WHITESPACE"," ",1006],["T_VARIABLE","$isDefault",1006],",",["T_WHITESPACE","\n                        ",1006],["T_CONSTANT_ENCAPSED_STRING","'name'",1007],["T_WHITESPACE"," ",1007],["T_DOUBLE_ARROW","=>",1007],["T_WHITESPACE"," ",1007],["T_STRING","trim",1007],"(","\"",["T_CURLY_OPEN","{",1007],["T_VARIABLE","$rate",1007],["T_OBJECT_OPERATOR","->",1007],["T_STRING","getCarrierTitle",1007],"(",")","}",["T_ENCAPSED_AND_WHITESPACE"," - ",1007],["T_CURLY_OPEN","{",1007],["T_VARIABLE","$rate",1007],["T_OBJECT_OPERATOR","->",1007],["T_STRING","getMethodTitle",1007],"(",")","}","\"",",",["T_WHITESPACE"," ",1007],["T_CONSTANT_ENCAPSED_STRING","' -'",1007],")",",",["T_WHITESPACE","\n                        ",1007],["T_CONSTANT_ENCAPSED_STRING","'code'",1008],["T_WHITESPACE"," ",1008],["T_DOUBLE_ARROW","=>",1008],["T_WHITESPACE"," ",1008],["T_VARIABLE","$rate",1008],["T_OBJECT_OPERATOR","->",1008],["T_STRING","getCode",1008],"(",")",",",["T_WHITESPACE","\n                        ",1008],["T_CONSTANT_ENCAPSED_STRING","'amount'",1009],["T_WHITESPACE"," ",1009],["T_DOUBLE_ARROW","=>",1009],["T_WHITESPACE"," ",1009],["T_VARIABLE","$amountExclTax",1009],",",["T_WHITESPACE","\n                    ",1009],"]",["T_WHITESPACE","\n                ",1010],")",";",["T_WHITESPACE","\n                ",1011],["T_IF","if",1012],["T_WHITESPACE"," ",1012],"(",["T_VARIABLE","$calculateTax",1012],")",["T_WHITESPACE"," ",1012],"{",["T_WHITESPACE","\n                    ",1012],["T_VARIABLE","$options",1013],"[",["T_VARIABLE","$i",1013],"]",["T_OBJECT_OPERATOR","->",1013],["T_STRING","setTaxAmount",1013],"(",["T_WHITESPACE","\n                        ",1013],["T_VARIABLE","$amountInclTax",1014],["T_WHITESPACE"," ",1014],"-",["T_WHITESPACE"," ",1014],["T_VARIABLE","$amountExclTax",1014],["T_WHITESPACE"," ",1014],"+",["T_WHITESPACE"," ",1014],["T_VARIABLE","$address",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","getTaxAmount",1014],"(",")",["T_WHITESPACE"," ",1014],"-",["T_WHITESPACE"," ",1014],["T_VARIABLE","$address",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","getShippingTaxAmount",1014],"(",")",["T_WHITESPACE","\n                    ",1014],")",";",["T_WHITESPACE","\n                ",1015],"}",["T_WHITESPACE","\n                ",1016],["T_IF","if",1017],["T_WHITESPACE"," ",1017],"(",["T_VARIABLE","$isDefault",1017],")",["T_WHITESPACE"," ",1017],"{",["T_WHITESPACE","\n                    ",1017],["T_VARIABLE","$userSelectedOption",1018],["T_WHITESPACE"," ",1018],"=",["T_WHITESPACE"," ",1018],["T_VARIABLE","$options",1018],"[",["T_VARIABLE","$i",1018],"]",";",["T_WHITESPACE","\n                ",1018],"}",["T_WHITESPACE","\n                ",1019],["T_IF","if",1020],["T_WHITESPACE"," ",1020],"(",["T_STRING","false",1020],["T_WHITESPACE"," ",1020],["T_IS_IDENTICAL","===",1020],["T_WHITESPACE"," ",1020],["T_VARIABLE","$min",1020],["T_WHITESPACE"," ",1020],["T_BOOLEAN_OR","||",1020],["T_WHITESPACE"," ",1020],["T_VARIABLE","$amountInclTax",1020],["T_WHITESPACE"," ",1020],"<",["T_WHITESPACE"," ",1020],["T_VARIABLE","$min",1020],")",["T_WHITESPACE"," ",1020],"{",["T_WHITESPACE","\n                    ",1020],["T_VARIABLE","$min",1021],["T_WHITESPACE"," ",1021],"=",["T_WHITESPACE"," ",1021],["T_VARIABLE","$amountInclTax",1021],";",["T_WHITESPACE","\n                    ",1021],["T_VARIABLE","$iMin",1022],["T_WHITESPACE"," ",1022],"=",["T_WHITESPACE"," ",1022],["T_VARIABLE","$i",1022],";",["T_WHITESPACE","\n                ",1022],"}",["T_WHITESPACE","\n                ",1023],["T_VARIABLE","$i",1024],["T_INC","++",1024],";",["T_WHITESPACE","\n            ",1024],"}",["T_WHITESPACE","\n        ",1025],"}",["T_WHITESPACE","\n\n        ",1026],["T_IF","if",1028],["T_WHITESPACE"," ",1028],"(",["T_VARIABLE","$mayReturnEmpty",1028],["T_WHITESPACE"," ",1028],["T_BOOLEAN_AND","&&",1028],["T_WHITESPACE"," ",1028],["T_VARIABLE","$userSelectedOption",1028],["T_WHITESPACE"," ",1028],["T_IS_IDENTICAL","===",1028],["T_WHITESPACE"," ",1028],["T_STRING","null",1028],")",["T_WHITESPACE"," ",1028],"{",["T_WHITESPACE","\n            ",1028],["T_VARIABLE","$options",1029],"[","]",["T_WHITESPACE"," ",1029],"=",["T_WHITESPACE"," ",1029],["T_NEW","new",1029],["T_WHITESPACE"," ",1029],["T_NS_SEPARATOR","\\",1029],["T_STRING","Magento",1029],["T_NS_SEPARATOR","\\",1029],["T_STRING","Framework",1029],["T_NS_SEPARATOR","\\",1029],["T_STRING","DataObject",1029],"(",["T_WHITESPACE","\n                ",1029],"[",["T_WHITESPACE","\n                    ",1030],["T_CONSTANT_ENCAPSED_STRING","'is_default'",1031],["T_WHITESPACE"," ",1031],["T_DOUBLE_ARROW","=>",1031],["T_WHITESPACE"," ",1031],["T_STRING","true",1031],",",["T_WHITESPACE","\n                    ",1031],["T_CONSTANT_ENCAPSED_STRING","'name'",1032],["T_WHITESPACE","       ",1032],["T_DOUBLE_ARROW","=>",1032],["T_WHITESPACE"," ",1032],["T_STRING","__",1032],"(",["T_CONSTANT_ENCAPSED_STRING","'N\/A'",1032],")",",",["T_WHITESPACE","\n                    ",1032],["T_CONSTANT_ENCAPSED_STRING","'code'",1033],["T_WHITESPACE","       ",1033],["T_DOUBLE_ARROW","=>",1033],["T_WHITESPACE"," ",1033],["T_CONSTANT_ENCAPSED_STRING","'no_rate'",1033],",",["T_WHITESPACE","\n                    ",1033],["T_CONSTANT_ENCAPSED_STRING","'amount'",1034],["T_WHITESPACE","     ",1034],["T_DOUBLE_ARROW","=>",1034],["T_WHITESPACE"," ",1034],["T_DNUMBER","0.00",1034],",",["T_WHITESPACE","\n                ",1034],"]",["T_WHITESPACE","\n            ",1035],")",";",["T_WHITESPACE","\n            ",1036],["T_IF","if",1037],["T_WHITESPACE"," ",1037],"(",["T_VARIABLE","$calculateTax",1037],")",["T_WHITESPACE"," ",1037],"{",["T_WHITESPACE","\n                ",1037],["T_VARIABLE","$options",1038],"[",["T_VARIABLE","$i",1038],"]",["T_OBJECT_OPERATOR","->",1038],["T_STRING","setTaxAmount",1038],"(",["T_VARIABLE","$address",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","getTaxAmount",1038],"(",")",")",";",["T_WHITESPACE","\n            ",1038],"}",["T_WHITESPACE","\n        ",1039],"}",["T_WHITESPACE"," ",1040],["T_ELSEIF","elseif",1040],["T_WHITESPACE"," ",1040],"(",["T_VARIABLE","$userSelectedOption",1040],["T_WHITESPACE"," ",1040],["T_IS_IDENTICAL","===",1040],["T_WHITESPACE"," ",1040],["T_STRING","null",1040],["T_WHITESPACE"," ",1040],["T_BOOLEAN_AND","&&",1040],["T_WHITESPACE"," ",1040],["T_ISSET","isset",1040],"(",["T_VARIABLE","$options",1040],"[",["T_VARIABLE","$iMin",1040],"]",")",")",["T_WHITESPACE"," ",1040],"{",["T_WHITESPACE","\n            ",1040],["T_VARIABLE","$options",1041],"[",["T_VARIABLE","$iMin",1041],"]",["T_OBJECT_OPERATOR","->",1041],["T_STRING","setIsDefault",1041],"(",["T_STRING","true",1041],")",";",["T_WHITESPACE","\n        ",1041],"}",["T_WHITESPACE","\n\n        ",1042],["T_COMMENT","\/\/ Magento will transfer only first 10 cheapest shipping options if there are more than 10 available.\n",1044],["T_WHITESPACE","        ",1045],["T_IF","if",1045],["T_WHITESPACE"," ",1045],"(",["T_STRING","count",1045],"(",["T_VARIABLE","$options",1045],")",["T_WHITESPACE"," ",1045],">",["T_WHITESPACE"," ",1045],["T_LNUMBER","10",1045],")",["T_WHITESPACE"," ",1045],"{",["T_WHITESPACE","\n            ",1045],["T_STRING","usort",1046],"(",["T_VARIABLE","$options",1046],",",["T_WHITESPACE"," ",1046],"[",["T_STRING","get_class",1046],"(",["T_VARIABLE","$this",1046],")",",",["T_WHITESPACE"," ",1046],["T_CONSTANT_ENCAPSED_STRING","'cmpShippingOptions'",1046],"]",")",";",["T_WHITESPACE","\n            ",1046],["T_STRING","array_splice",1047],"(",["T_VARIABLE","$options",1047],",",["T_WHITESPACE"," ",1047],["T_LNUMBER","10",1047],")",";",["T_WHITESPACE","\n            ",1047],["T_COMMENT","\/\/ User selected option will be always included in options list\n",1048],["T_WHITESPACE","            ",1049],["T_IF","if",1049],["T_WHITESPACE"," ",1049],"(",["T_VARIABLE","$userSelectedOption",1049],["T_WHITESPACE"," ",1049],["T_IS_NOT_IDENTICAL","!==",1049],["T_WHITESPACE"," ",1049],["T_STRING","null",1049],["T_WHITESPACE"," ",1049],["T_BOOLEAN_AND","&&",1049],["T_WHITESPACE"," ",1049],"!",["T_STRING","in_array",1049],"(",["T_VARIABLE","$userSelectedOption",1049],",",["T_WHITESPACE"," ",1049],["T_VARIABLE","$options",1049],")",")",["T_WHITESPACE"," ",1049],"{",["T_WHITESPACE","\n                ",1049],["T_VARIABLE","$options",1050],"[",["T_LNUMBER","9",1050],"]",["T_WHITESPACE"," ",1050],"=",["T_WHITESPACE"," ",1050],["T_VARIABLE","$userSelectedOption",1050],";",["T_WHITESPACE","\n            ",1050],"}",["T_WHITESPACE","\n        ",1051],"}",["T_WHITESPACE","\n\n        ",1052],["T_RETURN","return",1054],["T_WHITESPACE"," ",1054],["T_VARIABLE","$options",1054],";",["T_WHITESPACE","\n    ",1054],"}",["T_WHITESPACE","\n\n    ",1055],["T_DOC_COMMENT","\/**\n     * Compare two shipping options based on their amounts\n     *\n     * This function is used as a callback comparison function in shipping options sorting process\n     * @see self::_prepareShippingOptions()\n     *\n     * @param \\Magento\\Framework\\DataObject $option1\n     * @param \\Magento\\Framework\\DataObject $option2\n     * @return int\n     *\/",1057],["T_WHITESPACE","\n    ",1066],["T_PROTECTED","protected",1067],["T_WHITESPACE"," ",1067],["T_STATIC","static",1067],["T_WHITESPACE"," ",1067],["T_FUNCTION","function",1067],["T_WHITESPACE"," ",1067],["T_STRING","cmpShippingOptions",1067],"(",["T_STRING","DataObject",1067],["T_WHITESPACE"," ",1067],["T_VARIABLE","$option1",1067],",",["T_WHITESPACE"," ",1067],["T_STRING","DataObject",1067],["T_WHITESPACE"," ",1067],["T_VARIABLE","$option2",1067],")",["T_WHITESPACE","\n    ",1067],"{",["T_WHITESPACE","\n        ",1068],["T_IF","if",1069],["T_WHITESPACE"," ",1069],"(",["T_VARIABLE","$option1",1069],["T_OBJECT_OPERATOR","->",1069],["T_STRING","getAmount",1069],"(",")",["T_WHITESPACE"," ",1069],["T_IS_EQUAL","==",1069],["T_WHITESPACE"," ",1069],["T_VARIABLE","$option2",1069],["T_OBJECT_OPERATOR","->",1069],["T_STRING","getAmount",1069],"(",")",")",["T_WHITESPACE"," ",1069],"{",["T_WHITESPACE","\n            ",1069],["T_RETURN","return",1070],["T_WHITESPACE"," ",1070],["T_LNUMBER","0",1070],";",["T_WHITESPACE","\n        ",1070],"}",["T_WHITESPACE","\n        ",1071],["T_RETURN","return",1072],["T_WHITESPACE"," ",1072],"(",["T_VARIABLE","$option1",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","getAmount",1072],"(",")",["T_WHITESPACE"," ",1072],"<",["T_WHITESPACE"," ",1072],["T_VARIABLE","$option2",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","getAmount",1072],"(",")",")",["T_WHITESPACE"," ",1072],"?",["T_WHITESPACE"," ",1072],"-",["T_LNUMBER","1",1072],["T_WHITESPACE"," ",1072],":",["T_WHITESPACE"," ",1072],["T_LNUMBER","1",1072],";",["T_WHITESPACE","\n    ",1072],"}",["T_WHITESPACE","\n\n    ",1073],["T_DOC_COMMENT","\/**\n     * Try to find whether the code provided by PayPal corresponds to any of possible shipping rates\n     * This method was created only because PayPal has issues with returning the selected code.\n     * If in future the issue is fixed, we don't need to attempt to match it. It would be enough to set the method code\n     * before collecting shipping rates\n     *\n     * @param Address $address\n     * @param string $selectedCode\n     * @return string\n     *\/",1075],["T_WHITESPACE","\n    ",1084],["T_PROTECTED","protected",1085],["T_WHITESPACE"," ",1085],["T_FUNCTION","function",1085],["T_WHITESPACE"," ",1085],["T_STRING","_matchShippingMethodCode",1085],"(",["T_STRING","Address",1085],["T_WHITESPACE"," ",1085],["T_VARIABLE","$address",1085],",",["T_WHITESPACE"," ",1085],["T_VARIABLE","$selectedCode",1085],")",["T_WHITESPACE","\n    ",1085],"{",["T_WHITESPACE","\n        ",1086],["T_VARIABLE","$options",1087],["T_WHITESPACE"," ",1087],"=",["T_WHITESPACE"," ",1087],["T_VARIABLE","$this",1087],["T_OBJECT_OPERATOR","->",1087],["T_STRING","_prepareShippingOptions",1087],"(",["T_VARIABLE","$address",1087],",",["T_WHITESPACE"," ",1087],["T_STRING","false",1087],")",";",["T_WHITESPACE","\n        ",1087],["T_FOREACH","foreach",1088],["T_WHITESPACE"," ",1088],"(",["T_VARIABLE","$options",1088],["T_WHITESPACE"," ",1088],["T_AS","as",1088],["T_WHITESPACE"," ",1088],["T_VARIABLE","$option",1088],")",["T_WHITESPACE"," ",1088],"{",["T_WHITESPACE","\n            ",1088],["T_IF","if",1089],["T_WHITESPACE"," ",1089],"(",["T_VARIABLE","$selectedCode",1089],["T_WHITESPACE"," ",1089],["T_IS_IDENTICAL","===",1089],["T_WHITESPACE"," ",1089],["T_VARIABLE","$option",1089],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",1089],"]",["T_WHITESPACE"," ",1089],["T_COMMENT","\/\/ the proper case as outlined in documentation\n",1089],["T_WHITESPACE","                ",1090],["T_BOOLEAN_OR","||",1090],["T_WHITESPACE"," ",1090],["T_VARIABLE","$selectedCode",1090],["T_WHITESPACE"," ",1090],["T_IS_IDENTICAL","===",1090],["T_WHITESPACE"," ",1090],["T_VARIABLE","$option",1090],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",1090],"]",["T_WHITESPACE"," ",1090],["T_COMMENT","\/\/ workaround: PayPal may return name instead of the code\n",1090],["T_WHITESPACE","                ",1091],["T_COMMENT","\/\/ workaround: PayPal may concatenate code and name, and return it instead of the code:\n",1091],["T_WHITESPACE","                ",1092],["T_BOOLEAN_OR","||",1092],["T_WHITESPACE"," ",1092],["T_VARIABLE","$selectedCode",1092],["T_WHITESPACE"," ",1092],["T_IS_IDENTICAL","===",1092],["T_WHITESPACE"," ",1092],"\"",["T_CURLY_OPEN","{",1092],["T_VARIABLE","$option",1092],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",1092],"]","}",["T_ENCAPSED_AND_WHITESPACE"," ",1092],["T_CURLY_OPEN","{",1092],["T_VARIABLE","$option",1092],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",1092],"]","}","\"",["T_WHITESPACE","\n            ",1092],")",["T_WHITESPACE"," ",1093],"{",["T_WHITESPACE","\n                ",1093],["T_RETURN","return",1094],["T_WHITESPACE"," ",1094],["T_VARIABLE","$option",1094],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",1094],"]",";",["T_WHITESPACE","\n            ",1094],"}",["T_WHITESPACE","\n        ",1095],"}",["T_WHITESPACE","\n        ",1096],["T_RETURN","return",1097],["T_WHITESPACE"," ",1097],["T_CONSTANT_ENCAPSED_STRING","''",1097],";",["T_WHITESPACE","\n    ",1097],"}",["T_WHITESPACE","\n\n    ",1098],["T_DOC_COMMENT","\/**\n     * Create payment redirect url\n     * @param bool|null $button\n     * @param string $token\n     * @return void\n     *\/",1100],["T_WHITESPACE","\n    ",1105],["T_PROTECTED","protected",1106],["T_WHITESPACE"," ",1106],["T_FUNCTION","function",1106],["T_WHITESPACE"," ",1106],["T_STRING","_setRedirectUrl",1106],"(",["T_VARIABLE","$button",1106],",",["T_WHITESPACE"," ",1106],["T_VARIABLE","$token",1106],")",["T_WHITESPACE","\n    ",1106],"{",["T_WHITESPACE","\n        ",1107],["T_VARIABLE","$this",1108],["T_OBJECT_OPERATOR","->",1108],["T_STRING","_redirectUrl",1108],["T_WHITESPACE"," ",1108],"=",["T_WHITESPACE"," ",1108],"(",["T_VARIABLE","$button",1108],["T_WHITESPACE"," ",1108],["T_BOOLEAN_AND","&&",1108],["T_WHITESPACE"," ",1108],"!",["T_VARIABLE","$this",1108],["T_OBJECT_OPERATOR","->",1108],["T_STRING","_taxData",1108],["T_OBJECT_OPERATOR","->",1108],["T_STRING","getConfig",1108],"(",")",["T_OBJECT_OPERATOR","->",1108],["T_STRING","priceIncludesTax",1108],"(",")",")",["T_WHITESPACE","\n            ",1108],"?",["T_WHITESPACE"," ",1109],["T_VARIABLE","$this",1109],["T_OBJECT_OPERATOR","->",1109],["T_STRING","_config",1109],["T_OBJECT_OPERATOR","->",1109],["T_STRING","getExpressCheckoutStartUrl",1109],"(",["T_VARIABLE","$token",1109],")",["T_WHITESPACE","\n            ",1109],":",["T_WHITESPACE"," ",1110],["T_VARIABLE","$this",1110],["T_OBJECT_OPERATOR","->",1110],["T_STRING","_config",1110],["T_OBJECT_OPERATOR","->",1110],["T_STRING","getPayPalBasicStartUrl",1110],"(",["T_VARIABLE","$token",1110],")",";",["T_WHITESPACE","\n    ",1110],"}",["T_WHITESPACE","\n\n    ",1111],["T_DOC_COMMENT","\/**\n     * Get customer session object\n     *\n     * @return \\Magento\\Customer\\Model\\Session\n     *\/",1113],["T_WHITESPACE","\n    ",1117],["T_PUBLIC","public",1118],["T_WHITESPACE"," ",1118],["T_FUNCTION","function",1118],["T_WHITESPACE"," ",1118],["T_STRING","getCustomerSession",1118],"(",")",["T_WHITESPACE","\n    ",1118],"{",["T_WHITESPACE","\n        ",1119],["T_RETURN","return",1120],["T_WHITESPACE"," ",1120],["T_VARIABLE","$this",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","_customerSession",1120],";",["T_WHITESPACE","\n    ",1120],"}",["T_WHITESPACE","\n\n    ",1121],["T_DOC_COMMENT","\/**\n     * Set shipping options to api\n     * @param \\Magento\\Paypal\\Model\\Cart $cart\n     * @param \\Magento\\Quote\\Model\\Quote\\Address|null $address\n     * @return void\n     *\/",1123],["T_WHITESPACE","\n    ",1128],["T_PRIVATE","private",1129],["T_WHITESPACE"," ",1129],["T_FUNCTION","function",1129],["T_WHITESPACE"," ",1129],["T_STRING","setShippingOptions",1129],"(",["T_STRING","PaypalCart",1129],["T_WHITESPACE"," ",1129],["T_VARIABLE","$cart",1129],",",["T_WHITESPACE"," ",1129],["T_STRING","Address",1129],["T_WHITESPACE"," ",1129],["T_VARIABLE","$address",1129],["T_WHITESPACE"," ",1129],"=",["T_WHITESPACE"," ",1129],["T_STRING","null",1129],")",["T_WHITESPACE","\n    ",1129],"{",["T_WHITESPACE","\n        ",1130],["T_COMMENT","\/\/ for included tax always disable line items (related to paypal amount rounding problem)\n",1131],["T_WHITESPACE","        ",1132],["T_VARIABLE","$this",1132],["T_OBJECT_OPERATOR","->",1132],["T_STRING","_api",1132],["T_OBJECT_OPERATOR","->",1132],["T_STRING","setIsLineItemsEnabled",1132],"(",["T_VARIABLE","$this",1132],["T_OBJECT_OPERATOR","->",1132],["T_STRING","_config",1132],["T_OBJECT_OPERATOR","->",1132],["T_STRING","getValue",1132],"(",["T_STRING","PaypalConfig",1132],["T_DOUBLE_COLON","::",1132],["T_STRING","TRANSFER_CART_LINE_ITEMS",1132],")",")",";",["T_WHITESPACE","\n\n        ",1132],["T_COMMENT","\/\/ add shipping options if needed and line items are available\n",1134],["T_WHITESPACE","        ",1135],["T_VARIABLE","$cartItems",1135],["T_WHITESPACE"," ",1135],"=",["T_WHITESPACE"," ",1135],["T_VARIABLE","$cart",1135],["T_OBJECT_OPERATOR","->",1135],["T_STRING","getAllItems",1135],"(",")",";",["T_WHITESPACE","\n        ",1135],["T_IF","if",1136],["T_WHITESPACE"," ",1136],"(",["T_VARIABLE","$this",1136],["T_OBJECT_OPERATOR","->",1136],["T_STRING","_config",1136],["T_OBJECT_OPERATOR","->",1136],["T_STRING","getValue",1136],"(",["T_STRING","PaypalConfig",1136],["T_DOUBLE_COLON","::",1136],["T_STRING","TRANSFER_CART_LINE_ITEMS",1136],")",["T_WHITESPACE","\n            ",1136],["T_BOOLEAN_AND","&&",1137],["T_WHITESPACE"," ",1137],["T_VARIABLE","$this",1137],["T_OBJECT_OPERATOR","->",1137],["T_STRING","_config",1137],["T_OBJECT_OPERATOR","->",1137],["T_STRING","getValue",1137],"(",["T_STRING","PaypalConfig",1137],["T_DOUBLE_COLON","::",1137],["T_STRING","TRANSFER_SHIPPING_OPTIONS",1137],")",["T_WHITESPACE","\n            ",1137],["T_BOOLEAN_AND","&&",1138],["T_WHITESPACE"," ",1138],"!",["T_EMPTY","empty",1138],"(",["T_VARIABLE","$cartItems",1138],")",["T_WHITESPACE","\n        ",1138],")",["T_WHITESPACE"," ",1139],"{",["T_WHITESPACE","\n            ",1139],["T_IF","if",1140],["T_WHITESPACE"," ",1140],"(","!",["T_VARIABLE","$this",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","_quote",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","getIsVirtual",1140],"(",")",")",["T_WHITESPACE"," ",1140],"{",["T_WHITESPACE","\n                ",1140],["T_VARIABLE","$options",1141],["T_WHITESPACE"," ",1141],"=",["T_WHITESPACE"," ",1141],["T_VARIABLE","$this",1141],["T_OBJECT_OPERATOR","->",1141],["T_STRING","_prepareShippingOptions",1141],"(",["T_VARIABLE","$address",1141],",",["T_WHITESPACE"," ",1141],["T_STRING","true",1141],")",";",["T_WHITESPACE","\n                ",1141],["T_IF","if",1142],["T_WHITESPACE"," ",1142],"(",["T_VARIABLE","$options",1142],")",["T_WHITESPACE"," ",1142],"{",["T_WHITESPACE","\n                    ",1142],["T_VARIABLE","$this",1143],["T_OBJECT_OPERATOR","->",1143],["T_STRING","_api",1143],["T_OBJECT_OPERATOR","->",1143],["T_STRING","setShippingOptionsCallbackUrl",1143],"(",["T_WHITESPACE","\n                        ",1143],["T_VARIABLE","$this",1144],["T_OBJECT_OPERATOR","->",1144],["T_STRING","_coreUrl",1144],["T_OBJECT_OPERATOR","->",1144],["T_STRING","getUrl",1144],"(",["T_WHITESPACE","\n                            ",1144],["T_CONSTANT_ENCAPSED_STRING","'*\/*\/shippingOptionsCallback'",1145],",",["T_WHITESPACE","\n                            ",1145],"[",["T_CONSTANT_ENCAPSED_STRING","'quote_id'",1146],["T_WHITESPACE"," ",1146],["T_DOUBLE_ARROW","=>",1146],["T_WHITESPACE"," ",1146],["T_VARIABLE","$this",1146],["T_OBJECT_OPERATOR","->",1146],["T_STRING","_quote",1146],["T_OBJECT_OPERATOR","->",1146],["T_STRING","getId",1146],"(",")","]",["T_WHITESPACE","\n                        ",1146],")",["T_WHITESPACE","\n                    ",1147],")",["T_OBJECT_OPERATOR","->",1148],["T_STRING","setShippingOptions",1148],"(",["T_VARIABLE","$options",1148],")",";",["T_WHITESPACE","\n                ",1148],"}",["T_WHITESPACE","\n            ",1149],"}",["T_WHITESPACE","\n        ",1150],"}",["T_WHITESPACE","\n    ",1151],"}",["T_WHITESPACE","\n\n    ",1152],["T_DOC_COMMENT","\/**\n     * Prepare quote for guest checkout order submit\n     *\n     * @return $this\n     *\/",1154],["T_WHITESPACE","\n    ",1158],["T_PROTECTED","protected",1159],["T_WHITESPACE"," ",1159],["T_FUNCTION","function",1159],["T_WHITESPACE"," ",1159],["T_STRING","prepareGuestQuote",1159],"(",")",["T_WHITESPACE","\n    ",1159],"{",["T_WHITESPACE","\n        ",1160],["T_VARIABLE","$quote",1161],["T_WHITESPACE"," ",1161],"=",["T_WHITESPACE"," ",1161],["T_VARIABLE","$this",1161],["T_OBJECT_OPERATOR","->",1161],["T_STRING","_quote",1161],";",["T_WHITESPACE","\n        ",1161],["T_VARIABLE","$quote",1162],["T_OBJECT_OPERATOR","->",1162],["T_STRING","setCustomerId",1162],"(",["T_STRING","null",1162],")",["T_WHITESPACE","\n            ",1162],["T_OBJECT_OPERATOR","->",1163],["T_STRING","setCustomerEmail",1163],"(",["T_VARIABLE","$quote",1163],["T_OBJECT_OPERATOR","->",1163],["T_STRING","getBillingAddress",1163],"(",")",["T_OBJECT_OPERATOR","->",1163],["T_STRING","getEmail",1163],"(",")",")",["T_WHITESPACE","\n            ",1163],["T_OBJECT_OPERATOR","->",1164],["T_STRING","setCustomerIsGuest",1164],"(",["T_STRING","true",1164],")",["T_WHITESPACE","\n            ",1164],["T_OBJECT_OPERATOR","->",1165],["T_STRING","setCustomerGroupId",1165],"(",["T_NS_SEPARATOR","\\",1165],["T_STRING","Magento",1165],["T_NS_SEPARATOR","\\",1165],["T_STRING","Customer",1165],["T_NS_SEPARATOR","\\",1165],["T_STRING","Model",1165],["T_NS_SEPARATOR","\\",1165],["T_STRING","Group",1165],["T_DOUBLE_COLON","::",1165],["T_STRING","NOT_LOGGED_IN_ID",1165],")",";",["T_WHITESPACE","\n        ",1165],["T_RETURN","return",1166],["T_WHITESPACE"," ",1166],["T_VARIABLE","$this",1166],";",["T_WHITESPACE","\n    ",1166],"}",["T_WHITESPACE","\n\n    ",1167],["T_DOC_COMMENT","\/**\n     * Returns order repository instance\n     *\n     * @return OrderRepositoryInterface\n     * @deprecated\n     *\/",1169],["T_WHITESPACE","\n    ",1174],["T_PRIVATE","private",1175],["T_WHITESPACE"," ",1175],["T_FUNCTION","function",1175],["T_WHITESPACE"," ",1175],["T_STRING","getOrderRepository",1175],"(",")",["T_WHITESPACE","\n    ",1175],"{",["T_WHITESPACE","\n        ",1176],["T_IF","if",1177],["T_WHITESPACE"," ",1177],"(",["T_VARIABLE","$this",1177],["T_OBJECT_OPERATOR","->",1177],["T_STRING","orderRepository",1177],["T_WHITESPACE"," ",1177],["T_IS_IDENTICAL","===",1177],["T_WHITESPACE"," ",1177],["T_STRING","null",1177],")",["T_WHITESPACE"," ",1177],"{",["T_WHITESPACE","\n            ",1177],["T_VARIABLE","$this",1178],["T_OBJECT_OPERATOR","->",1178],["T_STRING","orderRepository",1178],["T_WHITESPACE"," ",1178],"=",["T_WHITESPACE"," ",1178],["T_STRING","ObjectManager",1178],["T_DOUBLE_COLON","::",1178],["T_STRING","getInstance",1178],"(",")",["T_WHITESPACE","\n                ",1178],["T_OBJECT_OPERATOR","->",1179],["T_STRING","get",1179],"(",["T_STRING","OrderRepositoryInterface",1179],["T_DOUBLE_COLON","::",1179],["T_CLASS","class",1179],")",";",["T_WHITESPACE","\n        ",1179],"}",["T_WHITESPACE","\n\n        ",1180],["T_RETURN","return",1182],["T_WHITESPACE"," ",1182],["T_VARIABLE","$this",1182],["T_OBJECT_OPERATOR","->",1182],["T_STRING","orderRepository",1182],";",["T_WHITESPACE","\n    ",1182],"}",["T_WHITESPACE","\n",1183],"}",["T_WHITESPACE","\n",1184]]
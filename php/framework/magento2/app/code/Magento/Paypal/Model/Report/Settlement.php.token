[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Paypal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Report",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","DateTime",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Filesystem",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Filesystem",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DirectoryList",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Paypal Settlement Report model\n *\n * Perform fetching reports from remote servers with following saving them to database\n * Prepare report rows for \\Magento\\Paypal\\Model\\Report\\Settlement\\Row model\n *\n * @method \\Magento\\Paypal\\Model\\ResourceModel\\Report\\Settlement _getResource()\n * @method \\Magento\\Paypal\\Model\\ResourceModel\\Report\\Settlement getResource()\n * @method string getReportDate()\n * @method \\Magento\\Paypal\\Model\\Report\\Settlement setReportDate(string $value)\n * @method string getAccountId()\n * @method \\Magento\\Paypal\\Model\\Report\\Settlement setAccountId(string $value)\n * @method string getFilename()\n * @method \\Magento\\Paypal\\Model\\Report\\Settlement setFilename(string $value)\n * @method string getLastModified()\n * @method \\Magento\\Paypal\\Model\\Report\\Settlement setLastModified(string $value)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",32],["T_CLASS","class",33],["T_WHITESPACE"," ",33],["T_STRING","Settlement",33],["T_WHITESPACE"," ",33],["T_EXTENDS","extends",33],["T_WHITESPACE"," ",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Framework",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Model",33],["T_NS_SEPARATOR","\\",33],["T_STRING","AbstractModel",33],["T_WHITESPACE","\n",33],"{",["T_WHITESPACE","\n    ",34],["T_DOC_COMMENT","\/**\n     * Default PayPal SFTP host\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","REPORTS_HOSTNAME",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","\"reports.paypal.com\"",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Default PayPal SFTP host for sandbox mode\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","SANDBOX_REPORTS_HOSTNAME",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","\"reports.sandbox.paypal.com\"",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * PayPal SFTP path\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","REPORTS_PATH",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","\"\/ppreports\/outgoing\"",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Original charset of old report files\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","FILES_IN_CHARSET",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","\"UTF-16\"",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Target charset of report files to be parsed\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","FILES_OUT_CHARSET",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","\"UTF-8\"",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Reports rows storage\n     *\n     * @var array\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_rows",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"[","]",";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_csvColumns",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"[",["T_WHITESPACE","\n        ",70],["T_CONSTANT_ENCAPSED_STRING","'old'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],"[",["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'section_columns'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],"[",["T_WHITESPACE","\n                ",72],["T_CONSTANT_ENCAPSED_STRING","''",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_LNUMBER","0",73],",",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","'TransactionID'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_LNUMBER","1",74],",",["T_WHITESPACE","\n                ",74],["T_CONSTANT_ENCAPSED_STRING","'InvoiceID'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_LNUMBER","2",75],",",["T_WHITESPACE","\n                ",75],["T_CONSTANT_ENCAPSED_STRING","'PayPalReferenceID'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_LNUMBER","3",76],",",["T_WHITESPACE","\n                ",76],["T_CONSTANT_ENCAPSED_STRING","'PayPalReferenceIDType'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_LNUMBER","4",77],",",["T_WHITESPACE","\n                ",77],["T_CONSTANT_ENCAPSED_STRING","'TransactionEventCode'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_LNUMBER","5",78],",",["T_WHITESPACE","\n                ",78],["T_CONSTANT_ENCAPSED_STRING","'TransactionInitiationDate'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_LNUMBER","6",79],",",["T_WHITESPACE","\n                ",79],["T_CONSTANT_ENCAPSED_STRING","'TransactionCompletionDate'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_LNUMBER","7",80],",",["T_WHITESPACE","\n                ",80],["T_CONSTANT_ENCAPSED_STRING","'TransactionDebitOrCredit'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","8",81],",",["T_WHITESPACE","\n                ",81],["T_CONSTANT_ENCAPSED_STRING","'GrossTransactionAmount'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_LNUMBER","9",82],",",["T_WHITESPACE","\n                ",82],["T_CONSTANT_ENCAPSED_STRING","'GrossTransactionCurrency'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_LNUMBER","10",83],",",["T_WHITESPACE","\n                ",83],["T_CONSTANT_ENCAPSED_STRING","'FeeDebitOrCredit'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_LNUMBER","11",84],",",["T_WHITESPACE","\n                ",84],["T_CONSTANT_ENCAPSED_STRING","'FeeAmount'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_LNUMBER","12",85],",",["T_WHITESPACE","\n                ",85],["T_CONSTANT_ENCAPSED_STRING","'FeeCurrency'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_LNUMBER","13",86],",",["T_WHITESPACE","\n                ",86],["T_CONSTANT_ENCAPSED_STRING","'CustomField'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_LNUMBER","14",87],",",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'ConsumerID'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_LNUMBER","15",88],",",["T_WHITESPACE","\n            ",88],"]",",",["T_WHITESPACE","\n            ",89],["T_CONSTANT_ENCAPSED_STRING","'rowmap'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],"[",["T_WHITESPACE","\n                ",90],["T_CONSTANT_ENCAPSED_STRING","'TransactionID'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",91],",",["T_WHITESPACE","\n                ",91],["T_CONSTANT_ENCAPSED_STRING","'InvoiceID'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'invoice_id'",92],",",["T_WHITESPACE","\n                ",92],["T_CONSTANT_ENCAPSED_STRING","'PayPalReferenceID'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id'",93],",",["T_WHITESPACE","\n                ",93],["T_CONSTANT_ENCAPSED_STRING","'PayPalReferenceIDType'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id_type'",94],",",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'TransactionEventCode'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'transaction_event_code'",95],",",["T_WHITESPACE","\n                ",95],["T_CONSTANT_ENCAPSED_STRING","'TransactionInitiationDate'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'transaction_initiation_date'",96],",",["T_WHITESPACE","\n                ",96],["T_CONSTANT_ENCAPSED_STRING","'TransactionCompletionDate'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'transaction_completion_date'",97],",",["T_WHITESPACE","\n                ",97],["T_CONSTANT_ENCAPSED_STRING","'TransactionDebitOrCredit'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'transaction_debit_or_credit'",98],",",["T_WHITESPACE","\n                ",98],["T_CONSTANT_ENCAPSED_STRING","'GrossTransactionAmount'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_amount'",99],",",["T_WHITESPACE","\n                ",99],["T_CONSTANT_ENCAPSED_STRING","'GrossTransactionCurrency'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_currency'",100],",",["T_WHITESPACE","\n                ",100],["T_CONSTANT_ENCAPSED_STRING","'FeeDebitOrCredit'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'fee_debit_or_credit'",101],",",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'FeeAmount'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'fee_amount'",102],",",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'FeeCurrency'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'fee_currency'",103],",",["T_WHITESPACE","\n                ",103],["T_CONSTANT_ENCAPSED_STRING","'CustomField'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'custom_field'",104],",",["T_WHITESPACE","\n                ",104],["T_CONSTANT_ENCAPSED_STRING","'ConsumerID'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'consumer_id'",105],",",["T_WHITESPACE","\n            ",105],"]",",",["T_WHITESPACE","\n        ",106],"]",",",["T_WHITESPACE","\n        ",107],["T_CONSTANT_ENCAPSED_STRING","'new'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],"[",["T_WHITESPACE","\n            ",108],["T_CONSTANT_ENCAPSED_STRING","'section_columns'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],"[",["T_WHITESPACE","\n                ",109],["T_CONSTANT_ENCAPSED_STRING","''",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_LNUMBER","0",110],",",["T_WHITESPACE","\n                ",110],["T_CONSTANT_ENCAPSED_STRING","'Transaction ID'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_LNUMBER","1",111],",",["T_WHITESPACE","\n                ",111],["T_CONSTANT_ENCAPSED_STRING","'Invoice ID'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_LNUMBER","2",112],",",["T_WHITESPACE","\n                ",112],["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_LNUMBER","3",113],",",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID Type'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_LNUMBER","4",114],",",["T_WHITESPACE","\n                ",114],["T_CONSTANT_ENCAPSED_STRING","'Transaction Event Code'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_LNUMBER","5",115],",",["T_WHITESPACE","\n                ",115],["T_CONSTANT_ENCAPSED_STRING","'Transaction Initiation Date'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_LNUMBER","6",116],",",["T_WHITESPACE","\n                ",116],["T_CONSTANT_ENCAPSED_STRING","'Transaction Completion Date'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_LNUMBER","7",117],",",["T_WHITESPACE","\n                ",117],["T_CONSTANT_ENCAPSED_STRING","'Transaction  Debit or Credit'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_LNUMBER","8",118],",",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'Gross Transaction Amount'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_LNUMBER","9",119],",",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'Gross Transaction Currency'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_LNUMBER","10",120],",",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'Fee Debit or Credit'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_LNUMBER","11",121],",",["T_WHITESPACE","\n                ",121],["T_CONSTANT_ENCAPSED_STRING","'Fee Amount'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_LNUMBER","12",122],",",["T_WHITESPACE","\n                ",122],["T_CONSTANT_ENCAPSED_STRING","'Fee Currency'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_LNUMBER","13",123],",",["T_WHITESPACE","\n                ",123],["T_CONSTANT_ENCAPSED_STRING","'Custom Field'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_LNUMBER","14",124],",",["T_WHITESPACE","\n                ",124],["T_CONSTANT_ENCAPSED_STRING","'Consumer ID'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_LNUMBER","15",125],",",["T_WHITESPACE","\n                ",125],["T_CONSTANT_ENCAPSED_STRING","'Payment Tracking ID'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_LNUMBER","16",126],",",["T_WHITESPACE","\n                ",126],["T_CONSTANT_ENCAPSED_STRING","'Store ID'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_LNUMBER","17",127],",",["T_WHITESPACE","\n            ",127],"]",",",["T_WHITESPACE","\n            ",128],["T_CONSTANT_ENCAPSED_STRING","'rowmap'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],"[",["T_WHITESPACE","\n                ",129],["T_CONSTANT_ENCAPSED_STRING","'Transaction ID'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",130],",",["T_WHITESPACE","\n                ",130],["T_CONSTANT_ENCAPSED_STRING","'Invoice ID'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'invoice_id'",131],",",["T_WHITESPACE","\n                ",131],["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id'",132],",",["T_WHITESPACE","\n                ",132],["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID Type'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id_type'",133],",",["T_WHITESPACE","\n                ",133],["T_CONSTANT_ENCAPSED_STRING","'Transaction Event Code'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'transaction_event_code'",134],",",["T_WHITESPACE","\n                ",134],["T_CONSTANT_ENCAPSED_STRING","'Transaction Initiation Date'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'transaction_initiation_date'",135],",",["T_WHITESPACE","\n                ",135],["T_CONSTANT_ENCAPSED_STRING","'Transaction Completion Date'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'transaction_completion_date'",136],",",["T_WHITESPACE","\n                ",136],["T_CONSTANT_ENCAPSED_STRING","'Transaction  Debit or Credit'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'transaction_debit_or_credit'",137],",",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'Gross Transaction Amount'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_amount'",138],",",["T_WHITESPACE","\n                ",138],["T_CONSTANT_ENCAPSED_STRING","'Gross Transaction Currency'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_currency'",139],",",["T_WHITESPACE","\n                ",139],["T_CONSTANT_ENCAPSED_STRING","'Fee Debit or Credit'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'fee_debit_or_credit'",140],",",["T_WHITESPACE","\n                ",140],["T_CONSTANT_ENCAPSED_STRING","'Fee Amount'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'fee_amount'",141],",",["T_WHITESPACE","\n                ",141],["T_CONSTANT_ENCAPSED_STRING","'Fee Currency'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'fee_currency'",142],",",["T_WHITESPACE","\n                ",142],["T_CONSTANT_ENCAPSED_STRING","'Custom Field'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'custom_field'",143],",",["T_WHITESPACE","\n                ",143],["T_CONSTANT_ENCAPSED_STRING","'Consumer ID'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'consumer_id'",144],",",["T_WHITESPACE","\n                ",144],["T_CONSTANT_ENCAPSED_STRING","'Payment Tracking ID'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'payment_tracking_id'",145],",",["T_WHITESPACE","\n                ",145],["T_CONSTANT_ENCAPSED_STRING","'Store ID'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'store_id'",146],",",["T_WHITESPACE","\n            ",146],"]",",",["T_WHITESPACE","\n        ",147],"]",",",["T_WHITESPACE","\n    ",148],"]",";",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\\Directory\\WriteInterface\n     *\/",151],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$_tmpDirectory",154],";",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",156],["T_WHITESPACE","\n    ",158],["T_PROTECTED","protected",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$_storeManager",159],";",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",161],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$_scopeConfig",164],";",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Columns with DateTime data type\n     * \n     * @var array\n     *\/",166],["T_WHITESPACE","\n    ",170],["T_PRIVATE","private",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$dateTimeColumns",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_initiation_date'",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'transaction_completion_date'",171],"]",";",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Columns with amount type\n     *\n     * @var array\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PRIVATE","private",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$amountColumns",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],"[",["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_amount'",178],",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'fee_amount'",178],"]",";",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n    * @param \\Magento\\Framework\\Model\\Context $context\n    * @param \\Magento\\Framework\\Registry $registry\n    * @param \\Magento\\Framework\\Filesystem $filesystem\n    * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n    * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n    * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n    * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n    * @param array $data\n    *\/",180],["T_WHITESPACE","\n    ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","__construct",190],"(",["T_WHITESPACE","\n        ",190],["T_NS_SEPARATOR","\\",191],["T_STRING","Magento",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Framework",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Model",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Context",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$context",191],",",["T_WHITESPACE","\n        ",191],["T_NS_SEPARATOR","\\",192],["T_STRING","Magento",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Framework",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Registry",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$registry",192],",",["T_WHITESPACE","\n        ",192],["T_NS_SEPARATOR","\\",193],["T_STRING","Magento",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Framework",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Filesystem",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$filesystem",193],",",["T_WHITESPACE","\n        ",193],["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Store",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Model",194],["T_NS_SEPARATOR","\\",194],["T_STRING","StoreManagerInterface",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$storeManager",194],",",["T_WHITESPACE","\n        ",194],["T_NS_SEPARATOR","\\",195],["T_STRING","Magento",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Framework",195],["T_NS_SEPARATOR","\\",195],["T_STRING","App",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Config",195],["T_NS_SEPARATOR","\\",195],["T_STRING","ScopeConfigInterface",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$scopeConfig",195],",",["T_WHITESPACE","\n        ",195],["T_NS_SEPARATOR","\\",196],["T_STRING","Magento",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Framework",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Model",196],["T_NS_SEPARATOR","\\",196],["T_STRING","ResourceModel",196],["T_NS_SEPARATOR","\\",196],["T_STRING","AbstractResource",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$resource",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","null",196],",",["T_WHITESPACE","\n        ",196],["T_NS_SEPARATOR","\\",197],["T_STRING","Magento",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Framework",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Data",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Collection",197],["T_NS_SEPARATOR","\\",197],["T_STRING","AbstractDb",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$resourceCollection",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","null",197],",",["T_WHITESPACE","\n        ",197],["T_ARRAY","array",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$data",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],"[","]",["T_WHITESPACE","\n    ",198],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_tmpDirectory",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$filesystem",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getDirectoryWrite",200],"(",["T_STRING","DirectoryList",200],["T_DOUBLE_COLON","::",200],["T_STRING","SYS_TMP",200],")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_storeManager",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$storeManager",201],";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_scopeConfig",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$scopeConfig",202],";",["T_WHITESPACE","\n        ",202],["T_STRING","parent",203],["T_DOUBLE_COLON","::",203],["T_STRING","__construct",203],"(",["T_VARIABLE","$context",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$registry",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$resource",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$resourceCollection",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$data",203],")",";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     * @return void\n     *\/",206],["T_WHITESPACE","\n    ",210],["T_PROTECTED","protected",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","_construct",211],"(",")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_init",213],"(",["T_NS_SEPARATOR","\\",213],["T_STRING","Magento",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Paypal",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Model",213],["T_NS_SEPARATOR","\\",213],["T_STRING","ResourceModel",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Report",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Settlement",213],["T_DOUBLE_COLON","::",213],["T_CLASS","class",213],")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Stop saving process if file with same report date, account ID and last modified date was already ferched\n     *\n     * @return \\Magento\\Framework\\Model\\AbstractModel\n     *\/",216],["T_WHITESPACE","\n    ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","beforeSave",221],"(",")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_dataSaveAllowed",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_STRING","true",223],";",["T_WHITESPACE","\n        ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getId",224],"(",")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n            ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getLastModified",225],"(",")",["T_WHITESPACE"," ",225],["T_IS_EQUAL","==",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getReportLastModified",225],"(",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_dataSaveAllowed",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","false",226],";",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","setLastModified",229],"(",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getReportLastModified",229],"(",")",")",";",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_STRING","parent",230],["T_DOUBLE_COLON","::",230],["T_STRING","beforeSave",230],"(",")",";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Goes to specified host\/path and fetches reports from there.\n     * Save reports to database.\n     *\n     * @param \\Magento\\Framework\\Filesystem\\Io\\Sftp $connection\n     * @return int Number of report rows that were fetched and saved successfully\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",233],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","fetchAndSave",241],"(",["T_NS_SEPARATOR","\\",241],["T_STRING","Magento",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Framework",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Filesystem",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Io",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Sftp",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$connection",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$fetched",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_LNUMBER","0",243],";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$listing",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_filterReportsList",244],"(",["T_VARIABLE","$connection",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","rawls",244],"(",")",")",";",["T_WHITESPACE","\n        ",244],["T_FOREACH","foreach",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$listing",245],["T_WHITESPACE"," ",245],["T_AS","as",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$filename",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$attributes",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$localCsv",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'PayPal_STL_'",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_STRING","uniqid",246],"(",["T_NS_SEPARATOR","\\",246],["T_STRING","Magento",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Framework",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Math",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Random",246],["T_DOUBLE_COLON","::",246],["T_STRING","getRandomNumber",246],"(",")",")",["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_STRING","time",246],"(",")",["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'.csv'",246],";",["T_WHITESPACE","\n            ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$connection",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","read",247],"(",["T_VARIABLE","$filename",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_tmpDirectory",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getAbsolutePath",247],"(",["T_VARIABLE","$localCsv",247],")",")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(","!",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_tmpDirectory",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","isWritable",248],"(",["T_VARIABLE","$localCsv",248],")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                    ",248],["T_THROW","throw",249],["T_WHITESPACE"," ",249],["T_NEW","new",249],["T_WHITESPACE"," ",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Magento",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Framework",249],["T_NS_SEPARATOR","\\",249],["T_STRING","Exception",249],["T_NS_SEPARATOR","\\",249],["T_STRING","LocalizedException",249],"(",["T_WHITESPACE","\n                        ",249],["T_STRING","__",250],"(",["T_CONSTANT_ENCAPSED_STRING","'We cannot create a target file for reading reports.'",250],")",["T_WHITESPACE","\n                    ",250],")",";",["T_WHITESPACE","\n                ",251],"}",["T_WHITESPACE","\n\n                ",252],["T_VARIABLE","$encoded",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_tmpDirectory",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","readFile",254],"(",["T_VARIABLE","$localCsv",254],")",";",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$csvFormat",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'new'",255],";",["T_WHITESPACE","\n\n                ",255],["T_VARIABLE","$fileEncoding",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","mb_detect_encoding",257],"(",["T_VARIABLE","$encoded",257],")",";",["T_WHITESPACE","\n\n                ",257],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_STRING","self",259],["T_DOUBLE_COLON","::",259],["T_STRING","FILES_OUT_CHARSET",259],["T_WHITESPACE"," ",259],["T_IS_NOT_EQUAL","!=",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$fileEncoding",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                    ",259],["T_VARIABLE","$decoded",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],"@",["T_STRING","iconv",260],"(",["T_VARIABLE","$fileEncoding",260],",",["T_WHITESPACE"," ",260],["T_STRING","self",260],["T_DOUBLE_COLON","::",260],["T_STRING","FILES_OUT_CHARSET",260],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'\/\/IGNORE'",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$encoded",260],")",";",["T_WHITESPACE","\n                    ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_tmpDirectory",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","writeFile",261],"(",["T_VARIABLE","$localCsv",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$decoded",261],")",";",["T_WHITESPACE","\n                    ",261],["T_VARIABLE","$csvFormat",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'old'",262],";",["T_WHITESPACE","\n                ",262],"}",["T_WHITESPACE","\n\n                ",263],["T_COMMENT","\/\/ Set last modified date, this value will be overwritten during parsing\n",265],["T_WHITESPACE","                ",266],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_ISSET","isset",266],"(",["T_VARIABLE","$attributes",266],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",266],"]",")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                    ",266],["T_VARIABLE","$date",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_NEW","new",267],["T_WHITESPACE"," ",267],["T_NS_SEPARATOR","\\",267],["T_STRING","DateTime",267],"(",")",";",["T_WHITESPACE","\n                    ",267],["T_VARIABLE","$lastModified",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$date",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","setTimestamp",268],"(",["T_VARIABLE","$attributes",268],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",268],"]",")",";",["T_WHITESPACE","\n                    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","setReportLastModified",269],"(",["T_WHITESPACE","\n                        ",269],["T_VARIABLE","$lastModified",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","format",270],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",270],")",["T_WHITESPACE","\n                    ",270],")",";",["T_WHITESPACE","\n                ",271],"}",["T_WHITESPACE","\n\n                ",272],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","setReportDate",274],"(",["T_WHITESPACE","\n                    ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_fileNameToDate",275],"(",["T_VARIABLE","$filename",275],")",["T_WHITESPACE","\n                ",275],")",["T_OBJECT_OPERATOR","->",276],["T_STRING","setFilename",276],"(",["T_WHITESPACE","\n                    ",276],["T_VARIABLE","$filename",277],["T_WHITESPACE","\n                ",277],")",["T_OBJECT_OPERATOR","->",278],["T_STRING","parseCsv",278],"(",["T_WHITESPACE","\n                    ",278],["T_VARIABLE","$localCsv",279],",",["T_WHITESPACE","\n                    ",279],["T_VARIABLE","$csvFormat",280],["T_WHITESPACE","\n                ",280],")",";",["T_WHITESPACE","\n\n                ",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getAccountId",283],"(",")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                    ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","save",284],"(",")",";",["T_WHITESPACE","\n                ",284],"}",["T_WHITESPACE","\n\n                ",285],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_dataSaveAllowed",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                    ",287],["T_VARIABLE","$fetched",288],["T_WHITESPACE"," ",288],["T_PLUS_EQUAL","+=",288],["T_WHITESPACE"," ",288],["T_STRING","count",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_rows",288],")",";",["T_WHITESPACE","\n                ",288],"}",["T_WHITESPACE","\n                ",289],["T_COMMENT","\/\/ clean object and remove parsed file\n",290],["T_WHITESPACE","                ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","unsetData",291],"(",")",";",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_tmpDirectory",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","delete",292],"(",["T_VARIABLE","$localCsv",292],")",";",["T_WHITESPACE","\n            ",292],"}",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n        ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$fetched",295],";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_DOC_COMMENT","\/**\n     * Connect to an SFTP server using specified configuration\n     *\n     * @param array $config\n     * @return \\Magento\\Framework\\Filesystem\\Io\\Sftp\n     * @throws \\InvalidArgumentException\n     *\/",298],["T_WHITESPACE","\n    ",304],["T_PUBLIC","public",305],["T_WHITESPACE"," ",305],["T_STATIC","static",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","createConnection",305],"(",["T_ARRAY","array",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$config",305],")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_IF","if",307],["T_WHITESPACE"," ",307],"(","!",["T_ISSET","isset",307],"(",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$config",308],"[",["T_CONSTANT_ENCAPSED_STRING","'hostname'",308],"]",["T_WHITESPACE","\n        ",308],")",["T_WHITESPACE"," ",309],["T_BOOLEAN_OR","||",309],["T_WHITESPACE"," ",309],"!",["T_ISSET","isset",309],"(",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$config",310],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",310],"]",["T_WHITESPACE","\n        ",310],")",["T_WHITESPACE"," ",311],["T_BOOLEAN_OR","||",311],["T_WHITESPACE"," ",311],"!",["T_ISSET","isset",311],"(",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$config",312],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",312],"]",["T_WHITESPACE","\n        ",312],")",["T_WHITESPACE"," ",313],["T_BOOLEAN_OR","||",313],["T_WHITESPACE"," ",313],"!",["T_ISSET","isset",313],"(",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$config",314],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",314],"]",["T_WHITESPACE","\n        ",314],")",["T_WHITESPACE","\n        ",315],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n            ",316],["T_THROW","throw",317],["T_WHITESPACE"," ",317],["T_NEW","new",317],["T_WHITESPACE"," ",317],["T_NS_SEPARATOR","\\",317],["T_STRING","InvalidArgumentException",317],"(",["T_CONSTANT_ENCAPSED_STRING","'Required config elements: hostname, username, password, path'",317],")",";",["T_WHITESPACE","\n        ",317],"}",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$connection",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_NEW","new",319],["T_WHITESPACE"," ",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Magento",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Framework",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Filesystem",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Io",319],["T_NS_SEPARATOR","\\",319],["T_STRING","Sftp",319],"(",")",";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$connection",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","open",320],"(",["T_WHITESPACE","\n            ",320],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$config",321],"[",["T_CONSTANT_ENCAPSED_STRING","'hostname'",321],"]",",",["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","'username'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$config",321],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",321],"]",",",["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","'password'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$config",321],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",321],"]","]",["T_WHITESPACE","\n        ",321],")",";",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$connection",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","cd",323],"(",["T_VARIABLE","$config",323],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",323],"]",")",";",["T_WHITESPACE","\n        ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$connection",324],";",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Parse CSV file and collect report rows\n     *\n     * @param string $localCsv Path to CSV file\n     * @param string $format CSV format(column names)\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",327],["T_WHITESPACE","\n    ",334],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","parseCsv",335],"(",["T_VARIABLE","$localCsv",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$format",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'new'",335],")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_rows",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],"[","]",";",["T_WHITESPACE","\n\n        ",337],["T_VARIABLE","$sectionColumns",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","_csvColumns",339],"[",["T_VARIABLE","$format",339],"]","[",["T_CONSTANT_ENCAPSED_STRING","'section_columns'",339],"]",";",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$rowMap",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_csvColumns",340],"[",["T_VARIABLE","$format",340],"]","[",["T_CONSTANT_ENCAPSED_STRING","'rowmap'",340],"]",";",["T_WHITESPACE","\n\n        ",340],["T_VARIABLE","$flippedSectionColumns",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","array_flip",342],"(",["T_VARIABLE","$sectionColumns",342],")",";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$stream",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_tmpDirectory",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","openFile",343],"(",["T_VARIABLE","$localCsv",343],",",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'r'",343],")",";",["T_WHITESPACE","\n        ",343],["T_WHILE","while",344],["T_WHITESPACE"," ",344],"(",["T_VARIABLE","$line",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$stream",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","readCsv",344],"(",")",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n            ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_EMPTY","empty",345],"(",["T_VARIABLE","$line",345],")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n                ",345],["T_COMMENT","\/\/ The line was empty, so skip it.\n",346],["T_WHITESPACE","                ",347],["T_CONTINUE","continue",347],";",["T_WHITESPACE","\n            ",347],"}",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$lineType",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$line",349],"[",["T_LNUMBER","0",349],"]",";",["T_WHITESPACE","\n            ",349],["T_SWITCH","switch",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$lineType",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n                ",350],["T_CASE","case",351],["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'RH'",351],":",["T_WHITESPACE","\n                    ",351],["T_COMMENT","\/\/ Report header.\n",352],["T_WHITESPACE","                    ",353],["T_VARIABLE","$lastModified",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_NEW","new",353],["T_WHITESPACE"," ",353],["T_NS_SEPARATOR","\\",353],["T_STRING","DateTime",353],"(",["T_VARIABLE","$line",353],"[",["T_LNUMBER","1",353],"]",")",";",["T_WHITESPACE","\n                    ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","setReportLastModified",354],"(",["T_WHITESPACE","\n                        ",354],["T_VARIABLE","$lastModified",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","format",355],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",355],")",["T_WHITESPACE","\n                    ",355],")",";",["T_WHITESPACE","\n                    ",356],["T_COMMENT","\/\/$this->setAccountId($columns[2]); -- probably we'll just take that from the section header...\n",357],["T_WHITESPACE","                    ",358],["T_BREAK","break",358],";",["T_WHITESPACE","\n                ",358],["T_CASE","case",359],["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'FH'",359],":",["T_WHITESPACE","\n                    ",359],["T_COMMENT","\/\/ File header.\n",360],["T_WHITESPACE","                    ",361],["T_COMMENT","\/\/ Nothing interesting here, move along\n",361],["T_WHITESPACE","                    ",362],["T_BREAK","break",362],";",["T_WHITESPACE","\n                ",362],["T_CASE","case",363],["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'SH'",363],":",["T_WHITESPACE","\n                    ",363],["T_COMMENT","\/\/ Section header.\n",364],["T_WHITESPACE","                    ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","setAccountId",365],"(",["T_VARIABLE","$line",365],"[",["T_LNUMBER","3",365],"]",")",";",["T_WHITESPACE","\n                    ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","loadByAccountAndDate",366],"(",")",";",["T_WHITESPACE","\n                    ",366],["T_BREAK","break",367],";",["T_WHITESPACE","\n                ",367],["T_CASE","case",368],["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'CH'",368],":",["T_WHITESPACE","\n                    ",368],["T_COMMENT","\/\/ Section columns.\n",369],["T_WHITESPACE","                    ",370],["T_COMMENT","\/\/ In case ever the column order is changed, we will have the items recorded properly\n",370],["T_WHITESPACE","                    ",371],["T_COMMENT","\/\/ anyway. We have named, not numbered columns.\n",371],["T_WHITESPACE","                    ",372],["T_FOR","for",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$i",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_LNUMBER","1",372],";",["T_WHITESPACE"," ",372],["T_VARIABLE","$i",372],["T_WHITESPACE"," ",372],"<",["T_WHITESPACE"," ",372],["T_STRING","count",372],"(",["T_VARIABLE","$line",372],")",";",["T_WHITESPACE"," ",372],["T_VARIABLE","$i",372],["T_INC","++",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                        ",372],["T_VARIABLE","$sectionColumns",373],"[",["T_VARIABLE","$line",373],"[",["T_VARIABLE","$i",373],"]","]",["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$i",373],";",["T_WHITESPACE","\n                    ",373],"}",["T_WHITESPACE","\n                    ",374],["T_VARIABLE","$flippedSectionColumns",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","array_flip",375],"(",["T_VARIABLE","$sectionColumns",375],")",";",["T_WHITESPACE","\n                    ",375],["T_BREAK","break",376],";",["T_WHITESPACE","\n                ",376],["T_CASE","case",377],["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'SB'",377],":",["T_WHITESPACE","\n                    ",377],["T_COMMENT","\/\/ Section body.\n",378],["T_WHITESPACE","                    ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_rows",379],"[","]",["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getBodyItems",379],"(",["T_VARIABLE","$line",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$flippedSectionColumns",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$rowMap",379],")",";",["T_WHITESPACE","\n                    ",379],["T_BREAK","break",380],";",["T_WHITESPACE","\n                ",380],["T_CASE","case",381],["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","'SC'",381],":",["T_WHITESPACE","\n                    ",381],["T_COMMENT","\/\/ Section records count.\n",382],["T_WHITESPACE","                ",383],["T_CASE","case",383],["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'RC'",383],":",["T_WHITESPACE","\n                    ",383],["T_COMMENT","\/\/ Report records count.\n",384],["T_WHITESPACE","                ",385],["T_CASE","case",385],["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'SF'",385],":",["T_WHITESPACE","\n                    ",385],["T_COMMENT","\/\/ Section footer.\n",386],["T_WHITESPACE","                ",387],["T_CASE","case",387],["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'FF'",387],":",["T_WHITESPACE","\n                    ",387],["T_COMMENT","\/\/ File footer.\n",388],["T_WHITESPACE","                ",389],["T_CASE","case",389],["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'RF'",389],":",["T_WHITESPACE","\n                    ",389],["T_COMMENT","\/\/ Report footer.\n",390],["T_WHITESPACE","                    ",391],["T_COMMENT","\/\/ Nothing to see here, move along\n",391],["T_WHITESPACE","                    ",392],["T_BREAK","break",392],";",["T_WHITESPACE","\n                ",392],["T_DEFAULT","default",393],":",["T_WHITESPACE","\n                    ",393],["T_BREAK","break",394],";",["T_WHITESPACE","\n            ",394],"}",["T_WHITESPACE","\n        ",395],"}",["T_WHITESPACE","\n        ",396],["T_RETURN","return",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],";",["T_WHITESPACE","\n    ",397],"}",["T_WHITESPACE","\n\n    ",398],["T_DOC_COMMENT","\/**\n     * Parse columns from line of csv file\n     *\n     * @param array $line\n     * @param array $sectionColumns\n     * @param array $rowMap\n     * @return array\n     *\/",400],["T_WHITESPACE","\n    ",407],["T_PRIVATE","private",408],["T_WHITESPACE"," ",408],["T_FUNCTION","function",408],["T_WHITESPACE"," ",408],["T_STRING","getBodyItems",408],"(",["T_ARRAY","array",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$line",408],",",["T_WHITESPACE"," ",408],["T_ARRAY","array",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$sectionColumns",408],",",["T_WHITESPACE"," ",408],["T_ARRAY","array",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$rowMap",408],")",["T_WHITESPACE","\n    ",408],"{",["T_WHITESPACE","\n        ",409],["T_VARIABLE","$bodyItem",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],"[","]",";",["T_WHITESPACE","\n        ",410],["T_FOR","for",411],["T_WHITESPACE"," ",411],"(",["T_VARIABLE","$i",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_LNUMBER","1",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$count",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","count",411],"(",["T_VARIABLE","$line",411],")",";",["T_WHITESPACE"," ",411],["T_VARIABLE","$i",411],["T_WHITESPACE"," ",411],"<",["T_WHITESPACE"," ",411],["T_VARIABLE","$count",411],";",["T_WHITESPACE"," ",411],["T_VARIABLE","$i",411],["T_INC","++",411],")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n            ",411],["T_IF","if",412],"(",["T_ISSET","isset",412],"(",["T_VARIABLE","$rowMap",412],"[",["T_VARIABLE","$sectionColumns",412],"[",["T_VARIABLE","$i",412],"]","]",")",")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                ",412],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_STRING","in_array",413],"(",["T_VARIABLE","$rowMap",413],"[",["T_VARIABLE","$sectionColumns",413],"[",["T_VARIABLE","$i",413],"]","]",",",["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","dateTimeColumns",413],")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n                    ",413],["T_VARIABLE","$line",414],"[",["T_VARIABLE","$i",414],"]",["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","formatDateTimeColumns",414],"(",["T_VARIABLE","$line",414],"[",["T_VARIABLE","$i",414],"]",")",";",["T_WHITESPACE","\n                ",414],"}",["T_WHITESPACE","\n                ",415],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_STRING","in_array",416],"(",["T_VARIABLE","$rowMap",416],"[",["T_VARIABLE","$sectionColumns",416],"[",["T_VARIABLE","$i",416],"]","]",",",["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","amountColumns",416],")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n                    ",416],["T_VARIABLE","$line",417],"[",["T_VARIABLE","$i",417],"]",["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","formatAmountColumn",417],"(",["T_VARIABLE","$line",417],"[",["T_VARIABLE","$i",417],"]",")",";",["T_WHITESPACE","\n                ",417],"}",["T_WHITESPACE","\n                ",418],["T_VARIABLE","$bodyItem",419],"[",["T_VARIABLE","$rowMap",419],"[",["T_VARIABLE","$sectionColumns",419],"[",["T_VARIABLE","$i",419],"]","]","]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$line",419],"[",["T_VARIABLE","$i",419],"]",";",["T_WHITESPACE","\n            ",419],"}",["T_WHITESPACE","\n        ",420],"}",["T_WHITESPACE","\n        ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$bodyItem",422],";",["T_WHITESPACE","\n    ",422],"}",["T_WHITESPACE","\n\n    ",423],["T_DOC_COMMENT","\/**\n     * Format date columns in UTC\n     * \n     * @param string $lineItem\n     * @return string\n     *\/",425],["T_WHITESPACE","\n    ",430],["T_PRIVATE","private",431],["T_WHITESPACE"," ",431],["T_FUNCTION","function",431],["T_WHITESPACE"," ",431],["T_STRING","formatDateTimeColumns",431],"(",["T_VARIABLE","$lineItem",431],")",["T_WHITESPACE","\n    ",431],"{",["T_WHITESPACE","\n        ",432],["T_DOC_COMMENT","\/** @var DateTime $date *\/",433],["T_WHITESPACE","\n        ",433],["T_VARIABLE","$date",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_NEW","new",434],["T_WHITESPACE"," ",434],["T_STRING","DateTime",434],"(",["T_VARIABLE","$lineItem",434],",",["T_WHITESPACE"," ",434],["T_NEW","new",434],["T_WHITESPACE"," ",434],["T_NS_SEPARATOR","\\",434],["T_STRING","DateTimeZone",434],"(",["T_CONSTANT_ENCAPSED_STRING","'UTC'",434],")",")",";",["T_WHITESPACE","\n        ",434],["T_RETURN","return",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$date",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","format",435],"(",["T_NS_SEPARATOR","\\",435],["T_STRING","Magento",435],["T_NS_SEPARATOR","\\",435],["T_STRING","Framework",435],["T_NS_SEPARATOR","\\",435],["T_STRING","Stdlib",435],["T_NS_SEPARATOR","\\",435],["T_STRING","DateTime",435],["T_DOUBLE_COLON","::",435],["T_STRING","DATETIME_PHP_FORMAT",435],")",";",["T_WHITESPACE","\n    ",435],"}",["T_WHITESPACE","\n\n    ",436],["T_DOC_COMMENT","\/**\n     * Format amount columns\n     *\n     * PayPal api returns amounts in cents, hence the values need to be divided by 100\n     *\n     * @param string $lineItem\n     * @return float\n     *\/",438],["T_WHITESPACE","\n    ",445],["T_PRIVATE","private",446],["T_WHITESPACE"," ",446],["T_FUNCTION","function",446],["T_WHITESPACE"," ",446],["T_STRING","formatAmountColumn",446],"(",["T_VARIABLE","$lineItem",446],")",["T_WHITESPACE","\n    ",446],"{",["T_WHITESPACE","\n        ",447],["T_RETURN","return",448],["T_WHITESPACE"," ",448],["T_STRING","intval",448],"(",["T_VARIABLE","$lineItem",448],")",["T_WHITESPACE"," ",448],"\/",["T_WHITESPACE"," ",448],["T_LNUMBER","100",448],";",["T_WHITESPACE","\n    ",448],"}",["T_WHITESPACE","\n\n    ",449],["T_DOC_COMMENT","\/**\n     * Load report by unique key (accoutn + report date)\n     *\n     * @return $this\n     *\/",451],["T_WHITESPACE","\n    ",455],["T_PUBLIC","public",456],["T_WHITESPACE"," ",456],["T_FUNCTION","function",456],["T_WHITESPACE"," ",456],["T_STRING","loadByAccountAndDate",456],"(",")",["T_WHITESPACE","\n    ",456],"{",["T_WHITESPACE","\n        ",457],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getResource",458],"(",")",["T_OBJECT_OPERATOR","->",458],["T_STRING","loadByAccountAndDate",458],"(",["T_VARIABLE","$this",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getAccountId",458],"(",")",",",["T_WHITESPACE"," ",458],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getReportDate",458],"(",")",")",";",["T_WHITESPACE","\n        ",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n\n    ",460],["T_DOC_COMMENT","\/**\n     * Return collected rows for further processing.\n     *\n     * @return array\n     *\/",462],["T_WHITESPACE","\n    ",466],["T_PUBLIC","public",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","getRows",467],"(",")",["T_WHITESPACE","\n    ",467],"{",["T_WHITESPACE","\n        ",468],["T_RETURN","return",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_rows",469],";",["T_WHITESPACE","\n    ",469],"}",["T_WHITESPACE","\n\n    ",470],["T_DOC_COMMENT","\/**\n     * Return name for row column\n     *\n     * @param string $field Field name in row model\n     * @return \\Magento\\Framework\\Phrase|string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",472],["T_WHITESPACE","\n    ",478],["T_PUBLIC","public",479],["T_WHITESPACE"," ",479],["T_FUNCTION","function",479],["T_WHITESPACE"," ",479],["T_STRING","getFieldLabel",479],"(",["T_VARIABLE","$field",479],")",["T_WHITESPACE","\n    ",479],"{",["T_WHITESPACE","\n        ",480],["T_SWITCH","switch",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$field",481],")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n            ",481],["T_CASE","case",482],["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'report_date'",482],":",["T_WHITESPACE","\n                ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_STRING","__",483],"(",["T_CONSTANT_ENCAPSED_STRING","'Report Date'",483],")",";",["T_WHITESPACE","\n            ",483],["T_CASE","case",484],["T_WHITESPACE"," ",484],["T_CONSTANT_ENCAPSED_STRING","'account_id'",484],":",["T_WHITESPACE","\n                ",484],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_STRING","__",485],"(",["T_CONSTANT_ENCAPSED_STRING","'Merchant Account'",485],")",";",["T_WHITESPACE","\n            ",485],["T_CASE","case",486],["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",486],":",["T_WHITESPACE","\n                ",486],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_STRING","__",487],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction ID'",487],")",";",["T_WHITESPACE","\n            ",487],["T_CASE","case",488],["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'invoice_id'",488],":",["T_WHITESPACE","\n                ",488],["T_RETURN","return",489],["T_WHITESPACE"," ",489],["T_STRING","__",489],"(",["T_CONSTANT_ENCAPSED_STRING","'Invoice ID'",489],")",";",["T_WHITESPACE","\n            ",489],["T_CASE","case",490],["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id'",490],":",["T_WHITESPACE","\n                ",490],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_STRING","__",491],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID'",491],")",";",["T_WHITESPACE","\n            ",491],["T_CASE","case",492],["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id_type'",492],":",["T_WHITESPACE","\n                ",492],["T_RETURN","return",493],["T_WHITESPACE"," ",493],["T_STRING","__",493],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID Type'",493],")",";",["T_WHITESPACE","\n            ",493],["T_CASE","case",494],["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'transaction_event_code'",494],":",["T_WHITESPACE","\n                ",494],["T_RETURN","return",495],["T_WHITESPACE"," ",495],["T_STRING","__",495],"(",["T_CONSTANT_ENCAPSED_STRING","'Event Code'",495],")",";",["T_WHITESPACE","\n            ",495],["T_CASE","case",496],["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'transaction_event'",496],":",["T_WHITESPACE","\n                ",496],["T_RETURN","return",497],["T_WHITESPACE"," ",497],["T_STRING","__",497],"(",["T_CONSTANT_ENCAPSED_STRING","'Event'",497],")",";",["T_WHITESPACE","\n            ",497],["T_CASE","case",498],["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'transaction_initiation_date'",498],":",["T_WHITESPACE","\n                ",498],["T_RETURN","return",499],["T_WHITESPACE"," ",499],["T_STRING","__",499],"(",["T_CONSTANT_ENCAPSED_STRING","'Start Date'",499],")",";",["T_WHITESPACE","\n            ",499],["T_CASE","case",500],["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","'transaction_completion_date'",500],":",["T_WHITESPACE","\n                ",500],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_STRING","__",501],"(",["T_CONSTANT_ENCAPSED_STRING","'Finish Date'",501],")",";",["T_WHITESPACE","\n            ",501],["T_CASE","case",502],["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'transaction_debit_or_credit'",502],":",["T_WHITESPACE","\n                ",502],["T_RETURN","return",503],["T_WHITESPACE"," ",503],["T_STRING","__",503],"(",["T_CONSTANT_ENCAPSED_STRING","'Debit or Credit'",503],")",";",["T_WHITESPACE","\n            ",503],["T_CASE","case",504],["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_amount'",504],":",["T_WHITESPACE","\n                ",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_STRING","__",505],"(",["T_CONSTANT_ENCAPSED_STRING","'Gross Amount'",505],")",";",["T_WHITESPACE","\n            ",505],["T_CASE","case",506],["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'fee_debit_or_credit'",506],":",["T_WHITESPACE","\n                ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_STRING","__",507],"(",["T_CONSTANT_ENCAPSED_STRING","'Fee Debit or Credit'",507],")",";",["T_WHITESPACE","\n            ",507],["T_CASE","case",508],["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'fee_amount'",508],":",["T_WHITESPACE","\n                ",508],["T_RETURN","return",509],["T_WHITESPACE"," ",509],["T_STRING","__",509],"(",["T_CONSTANT_ENCAPSED_STRING","'Fee Amount'",509],")",";",["T_WHITESPACE","\n            ",509],["T_CASE","case",510],["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'custom_field'",510],":",["T_WHITESPACE","\n                ",510],["T_RETURN","return",511],["T_WHITESPACE"," ",511],["T_STRING","__",511],"(",["T_CONSTANT_ENCAPSED_STRING","'Custom'",511],")",";",["T_WHITESPACE","\n            ",511],["T_DEFAULT","default",512],":",["T_WHITESPACE","\n                ",512],["T_RETURN","return",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$field",513],";",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE","\n    ",514],"}",["T_WHITESPACE","\n\n    ",515],["T_DOC_COMMENT","\/**\n     * Iterate through website configurations and collect all SFTP configurations\n     * Filter config values if necessary\n     *\n     * @param bool $automaticMode Whether to skip settings with disabled Automatic Fetching or not\n     * @return array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",517],["T_WHITESPACE","\n    ",525],["T_PUBLIC","public",526],["T_WHITESPACE"," ",526],["T_FUNCTION","function",526],["T_WHITESPACE"," ",526],["T_STRING","getSftpCredentials",526],"(",["T_VARIABLE","$automaticMode",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_STRING","false",526],")",["T_WHITESPACE","\n    ",526],"{",["T_WHITESPACE","\n        ",527],["T_VARIABLE","$configs",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],"[","]",";",["T_WHITESPACE","\n        ",528],["T_VARIABLE","$uniques",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],"[","]",";",["T_WHITESPACE","\n        ",529],["T_FOREACH","foreach",530],["T_WHITESPACE"," ",530],"(",["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","_storeManager",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getStores",530],"(",")",["T_WHITESPACE"," ",530],["T_AS","as",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$store",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n            ",530],["T_COMMENT","\/*@var $store \\Magento\\Store\\Model\\Store *\/",531],["T_WHITESPACE","\n            ",531],["T_VARIABLE","$active",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_scopeConfig",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","isSetFlag",532],"(",["T_WHITESPACE","\n                ",532],["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/active'",533],",",["T_WHITESPACE","\n                ",533],["T_NS_SEPARATOR","\\",534],["T_STRING","Magento",534],["T_NS_SEPARATOR","\\",534],["T_STRING","Store",534],["T_NS_SEPARATOR","\\",534],["T_STRING","Model",534],["T_NS_SEPARATOR","\\",534],["T_STRING","ScopeInterface",534],["T_DOUBLE_COLON","::",534],["T_STRING","SCOPE_STORE",534],",",["T_WHITESPACE","\n                ",534],["T_VARIABLE","$store",535],["T_WHITESPACE","\n            ",535],")",";",["T_WHITESPACE","\n            ",536],["T_IF","if",537],["T_WHITESPACE"," ",537],"(","!",["T_VARIABLE","$active",537],["T_WHITESPACE"," ",537],["T_BOOLEAN_AND","&&",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$automaticMode",537],")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n                ",537],["T_CONTINUE","continue",538],";",["T_WHITESPACE","\n            ",538],"}",["T_WHITESPACE","\n            ",539],["T_VARIABLE","$cfg",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],"[",["T_WHITESPACE","\n                ",540],["T_CONSTANT_ENCAPSED_STRING","'hostname'",541],["T_WHITESPACE"," ",541],["T_DOUBLE_ARROW","=>",541],["T_WHITESPACE"," ",541],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","_scopeConfig",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getValue",541],"(",["T_WHITESPACE","\n                    ",541],["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_ip'",542],",",["T_WHITESPACE","\n                    ",542],["T_NS_SEPARATOR","\\",543],["T_STRING","Magento",543],["T_NS_SEPARATOR","\\",543],["T_STRING","Store",543],["T_NS_SEPARATOR","\\",543],["T_STRING","Model",543],["T_NS_SEPARATOR","\\",543],["T_STRING","ScopeInterface",543],["T_DOUBLE_COLON","::",543],["T_STRING","SCOPE_STORE",543],",",["T_WHITESPACE","\n                    ",543],["T_VARIABLE","$store",544],["T_WHITESPACE","\n                ",544],")",",",["T_WHITESPACE","\n                ",545],["T_CONSTANT_ENCAPSED_STRING","'path'",546],["T_WHITESPACE"," ",546],["T_DOUBLE_ARROW","=>",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","_scopeConfig",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","getValue",546],"(",["T_WHITESPACE","\n                    ",546],["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_path'",547],",",["T_WHITESPACE","\n                    ",547],["T_NS_SEPARATOR","\\",548],["T_STRING","Magento",548],["T_NS_SEPARATOR","\\",548],["T_STRING","Store",548],["T_NS_SEPARATOR","\\",548],["T_STRING","Model",548],["T_NS_SEPARATOR","\\",548],["T_STRING","ScopeInterface",548],["T_DOUBLE_COLON","::",548],["T_STRING","SCOPE_STORE",548],",",["T_WHITESPACE","\n                    ",548],["T_VARIABLE","$store",549],["T_WHITESPACE","\n                ",549],")",",",["T_WHITESPACE","\n                ",550],["T_CONSTANT_ENCAPSED_STRING","'username'",551],["T_WHITESPACE"," ",551],["T_DOUBLE_ARROW","=>",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","_scopeConfig",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getValue",551],"(",["T_WHITESPACE","\n                    ",551],["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_login'",552],",",["T_WHITESPACE","\n                    ",552],["T_NS_SEPARATOR","\\",553],["T_STRING","Magento",553],["T_NS_SEPARATOR","\\",553],["T_STRING","Store",553],["T_NS_SEPARATOR","\\",553],["T_STRING","Model",553],["T_NS_SEPARATOR","\\",553],["T_STRING","ScopeInterface",553],["T_DOUBLE_COLON","::",553],["T_STRING","SCOPE_STORE",553],",",["T_WHITESPACE","\n                    ",553],["T_VARIABLE","$store",554],["T_WHITESPACE","\n                ",554],")",",",["T_WHITESPACE","\n                ",555],["T_CONSTANT_ENCAPSED_STRING","'password'",556],["T_WHITESPACE"," ",556],["T_DOUBLE_ARROW","=>",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","_scopeConfig",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getValue",556],"(",["T_WHITESPACE","\n                    ",556],["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_password'",557],",",["T_WHITESPACE","\n                    ",557],["T_NS_SEPARATOR","\\",558],["T_STRING","Magento",558],["T_NS_SEPARATOR","\\",558],["T_STRING","Store",558],["T_NS_SEPARATOR","\\",558],["T_STRING","Model",558],["T_NS_SEPARATOR","\\",558],["T_STRING","ScopeInterface",558],["T_DOUBLE_COLON","::",558],["T_STRING","SCOPE_STORE",558],",",["T_WHITESPACE","\n                    ",558],["T_VARIABLE","$store",559],["T_WHITESPACE","\n                ",559],")",",",["T_WHITESPACE","\n                ",560],["T_CONSTANT_ENCAPSED_STRING","'sandbox'",561],["T_WHITESPACE"," ",561],["T_DOUBLE_ARROW","=>",561],["T_WHITESPACE"," ",561],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","_scopeConfig",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","getValue",561],"(",["T_WHITESPACE","\n                    ",561],["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_sandbox'",562],",",["T_WHITESPACE","\n                    ",562],["T_NS_SEPARATOR","\\",563],["T_STRING","Magento",563],["T_NS_SEPARATOR","\\",563],["T_STRING","Store",563],["T_NS_SEPARATOR","\\",563],["T_STRING","Model",563],["T_NS_SEPARATOR","\\",563],["T_STRING","ScopeInterface",563],["T_DOUBLE_COLON","::",563],["T_STRING","SCOPE_STORE",563],",",["T_WHITESPACE","\n                    ",563],["T_VARIABLE","$store",564],["T_WHITESPACE","\n                ",564],")",",",["T_WHITESPACE","\n            ",565],"]",";",["T_WHITESPACE","\n            ",566],["T_IF","if",567],["T_WHITESPACE"," ",567],"(",["T_EMPTY","empty",567],"(",["T_VARIABLE","$cfg",567],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",567],"]",")",["T_WHITESPACE"," ",567],["T_BOOLEAN_OR","||",567],["T_WHITESPACE"," ",567],["T_EMPTY","empty",567],"(",["T_VARIABLE","$cfg",567],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",567],"]",")",")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n                ",567],["T_CONTINUE","continue",568],";",["T_WHITESPACE","\n            ",568],"}",["T_WHITESPACE","\n            ",569],["T_IF","if",570],["T_WHITESPACE"," ",570],"(",["T_EMPTY","empty",570],"(",["T_VARIABLE","$cfg",570],"[",["T_CONSTANT_ENCAPSED_STRING","'hostname'",570],"]",")",["T_WHITESPACE"," ",570],["T_BOOLEAN_OR","||",570],["T_WHITESPACE"," ",570],["T_VARIABLE","$cfg",570],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",570],"]",")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n                ",570],["T_VARIABLE","$cfg",571],"[",["T_CONSTANT_ENCAPSED_STRING","'hostname'",571],"]",["T_WHITESPACE"," ",571],"=",["T_WHITESPACE"," ",571],["T_VARIABLE","$cfg",571],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",571],"]",["T_WHITESPACE"," ",571],"?",["T_WHITESPACE"," ",571],["T_STRING","self",571],["T_DOUBLE_COLON","::",571],["T_STRING","SANDBOX_REPORTS_HOSTNAME",571],["T_WHITESPACE"," ",571],":",["T_WHITESPACE"," ",571],["T_STRING","self",571],["T_DOUBLE_COLON","::",571],["T_STRING","REPORTS_HOSTNAME",571],";",["T_WHITESPACE","\n            ",571],"}",["T_WHITESPACE","\n            ",572],["T_IF","if",573],["T_WHITESPACE"," ",573],"(",["T_EMPTY","empty",573],"(",["T_VARIABLE","$cfg",573],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",573],"]",")",["T_WHITESPACE"," ",573],["T_BOOLEAN_OR","||",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$cfg",573],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",573],"]",")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n                ",573],["T_VARIABLE","$cfg",574],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",574],"]",["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_STRING","self",574],["T_DOUBLE_COLON","::",574],["T_STRING","REPORTS_PATH",574],";",["T_WHITESPACE","\n            ",574],"}",["T_WHITESPACE","\n            ",575],["T_COMMENT","\/\/ avoid duplicates\n",576],["T_WHITESPACE","            ",577],["T_IF","if",577],["T_WHITESPACE"," ",577],"(",["T_STRING","in_array",577],"(",["T_STRING","serialize",577],"(",["T_VARIABLE","$cfg",577],")",",",["T_WHITESPACE"," ",577],["T_VARIABLE","$uniques",577],")",")",["T_WHITESPACE"," ",577],"{",["T_WHITESPACE","\n                ",577],["T_CONTINUE","continue",578],";",["T_WHITESPACE","\n            ",578],"}",["T_WHITESPACE","\n            ",579],["T_VARIABLE","$uniques",580],"[","]",["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_STRING","serialize",580],"(",["T_VARIABLE","$cfg",580],")",";",["T_WHITESPACE","\n            ",580],["T_VARIABLE","$configs",581],"[","]",["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_VARIABLE","$cfg",581],";",["T_WHITESPACE","\n        ",581],"}",["T_WHITESPACE","\n        ",582],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_VARIABLE","$configs",583],";",["T_WHITESPACE","\n    ",583],"}",["T_WHITESPACE","\n\n    ",584],["T_DOC_COMMENT","\/**\n     * Converts a filename to date of report.\n     *\n     * @param string $filename\n     * @return string\n     *\/",586],["T_WHITESPACE","\n    ",591],["T_PROTECTED","protected",592],["T_WHITESPACE"," ",592],["T_FUNCTION","function",592],["T_WHITESPACE"," ",592],["T_STRING","_fileNameToDate",592],"(",["T_VARIABLE","$filename",592],")",["T_WHITESPACE","\n    ",592],"{",["T_WHITESPACE","\n        ",593],["T_COMMENT","\/\/ Currently filenames look like STL-YYYYMMDD, so that is what we care about.\n",594],["T_WHITESPACE","        ",595],["T_VARIABLE","$dateSnippet",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_STRING","substr",595],"(",["T_STRING","basename",595],"(",["T_VARIABLE","$filename",595],")",",",["T_WHITESPACE"," ",595],["T_LNUMBER","4",595],",",["T_WHITESPACE"," ",595],["T_LNUMBER","8",595],")",";",["T_WHITESPACE","\n        ",595],["T_VARIABLE","$result",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","substr",596],"(",["T_VARIABLE","$dateSnippet",596],",",["T_WHITESPACE"," ",596],["T_LNUMBER","0",596],",",["T_WHITESPACE"," ",596],["T_LNUMBER","4",596],")",["T_WHITESPACE"," ",596],".",["T_WHITESPACE"," ",596],["T_CONSTANT_ENCAPSED_STRING","'-'",596],["T_WHITESPACE"," ",596],".",["T_WHITESPACE"," ",596],["T_STRING","substr",596],"(",["T_VARIABLE","$dateSnippet",596],",",["T_WHITESPACE"," ",596],["T_LNUMBER","4",596],",",["T_WHITESPACE"," ",596],["T_LNUMBER","2",596],")",["T_WHITESPACE"," ",596],".",["T_WHITESPACE"," ",596],["T_CONSTANT_ENCAPSED_STRING","'-'",596],["T_WHITESPACE"," ",596],".",["T_WHITESPACE"," ",596],["T_STRING","substr",596],"(",["T_VARIABLE","$dateSnippet",596],",",["T_WHITESPACE"," ",596],["T_LNUMBER","6",596],",",["T_WHITESPACE"," ",596],["T_LNUMBER","2",596],")",";",["T_WHITESPACE","\n        ",596],["T_RETURN","return",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$result",597],";",["T_WHITESPACE","\n    ",597],"}",["T_WHITESPACE","\n\n    ",598],["T_DOC_COMMENT","\/**\n     * Filter SFTP file list by filename format\n     *\n     * @param array $list List of files as per $connection->rawls()\n     * @return array Trimmed down list of files\n     *\/",600],["T_WHITESPACE","\n    ",605],["T_PROTECTED","protected",606],["T_WHITESPACE"," ",606],["T_FUNCTION","function",606],["T_WHITESPACE"," ",606],["T_STRING","_filterReportsList",606],"(",["T_VARIABLE","$list",606],")",["T_WHITESPACE","\n    ",606],"{",["T_WHITESPACE","\n        ",607],["T_VARIABLE","$result",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],"[","]",";",["T_WHITESPACE","\n        ",608],["T_VARIABLE","$pattern",609],["T_WHITESPACE"," ",609],"=",["T_WHITESPACE"," ",609],["T_CONSTANT_ENCAPSED_STRING","'\/^STL-(\\d{8,8})\\.(\\d{2,2})\\.(.{3,3})\\.CSV$\/'",609],";",["T_WHITESPACE","\n        ",609],["T_FOREACH","foreach",610],["T_WHITESPACE"," ",610],"(",["T_VARIABLE","$list",610],["T_WHITESPACE"," ",610],["T_AS","as",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$filename",610],["T_WHITESPACE"," ",610],["T_DOUBLE_ARROW","=>",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$data",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_IF","if",611],["T_WHITESPACE"," ",611],"(",["T_STRING","preg_match",611],"(",["T_VARIABLE","$pattern",611],",",["T_WHITESPACE"," ",611],["T_VARIABLE","$filename",611],")",")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n                ",611],["T_VARIABLE","$result",612],"[",["T_VARIABLE","$filename",612],"]",["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$data",612],";",["T_WHITESPACE","\n            ",612],"}",["T_WHITESPACE","\n        ",613],"}",["T_WHITESPACE","\n        ",614],["T_RETURN","return",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$result",615],";",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n",616],"}",["T_WHITESPACE","\n",617]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Paypal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","LocalizedException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Payment",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","InfoInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Paypal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Config",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Paypal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Hostedpro",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Request",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Order",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Website Payments Pro Hosted Solution payment gateway model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",14],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","Hostedpro",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","Direct",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Button code\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","BM_BUTTON_CODE",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Button type\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","BM_BUTTON_TYPE",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'PAYMENT'",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Paypal API method name for button creation\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","BM_BUTTON_METHOD",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'BMCreateButton'",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Payment method code\n     *\n     * @var string\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_code",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","Config",40],["T_DOUBLE_COLON","::",40],["T_STRING","METHOD_HOSTEDPRO",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_formBlockType",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Paypal",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Block",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Hosted",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Pro",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Form",45],["T_DOUBLE_COLON","::",45],["T_CLASS","class",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_infoBlockType",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Paypal",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Block",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Hosted",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Pro",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Info",50],["T_DOUBLE_COLON","::",50],["T_CLASS","class",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_canUseInternal",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","false",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_canSaveCc",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","false",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_isInitializeNeeded",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","true",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Hostedpro\\RequestFactory\n     *\/",73],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$hostedproRequestFactory",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Api\\ExtensionAttributesFactory $extensionFactory\n     * @param \\Magento\\Framework\\Api\\AttributeValueFactory $customAttributeFactory\n     * @param \\Magento\\Payment\\Helper\\Data $paymentData\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Payment\\Model\\Method\\Logger $logger\n     * @param \\Magento\\Framework\\Module\\ModuleListInterface $moduleList\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param ProFactory $proFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\UrlInterface $urlBuilder\n     * @param \\Magento\\Framework\\App\\RequestInterface $requestHttp\n     * @param CartFactory $cartFactory\n     * @param Hostedpro\\RequestFactory $hostedproRequestFactory\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",78],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","__construct",99],"(",["T_WHITESPACE","\n        ",99],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Framework",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Context",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$context",100],",",["T_WHITESPACE","\n        ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Framework",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Registry",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$registry",101],",",["T_WHITESPACE","\n        ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Framework",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Api",102],["T_NS_SEPARATOR","\\",102],["T_STRING","ExtensionAttributesFactory",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$extensionFactory",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Framework",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Api",103],["T_NS_SEPARATOR","\\",103],["T_STRING","AttributeValueFactory",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$customAttributeFactory",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Payment",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Helper",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Data",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$paymentData",104],",",["T_WHITESPACE","\n        ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","Magento",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Framework",105],["T_NS_SEPARATOR","\\",105],["T_STRING","App",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Config",105],["T_NS_SEPARATOR","\\",105],["T_STRING","ScopeConfigInterface",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$scopeConfig",105],",",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Payment",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Model",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Method",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Logger",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$logger",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Framework",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Module",107],["T_NS_SEPARATOR","\\",107],["T_STRING","ModuleListInterface",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$moduleList",107],",",["T_WHITESPACE","\n        ",107],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Framework",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Stdlib",108],["T_NS_SEPARATOR","\\",108],["T_STRING","DateTime",108],["T_NS_SEPARATOR","\\",108],["T_STRING","TimezoneInterface",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$localeDate",108],",",["T_WHITESPACE","\n        ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Paypal",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Model",109],["T_NS_SEPARATOR","\\",109],["T_STRING","ProFactory",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$proFactory",109],",",["T_WHITESPACE","\n        ",109],["T_NS_SEPARATOR","\\",110],["T_STRING","Magento",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Store",110],["T_NS_SEPARATOR","\\",110],["T_STRING","Model",110],["T_NS_SEPARATOR","\\",110],["T_STRING","StoreManagerInterface",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$storeManager",110],",",["T_WHITESPACE","\n        ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","UrlInterface",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$urlBuilder",111],",",["T_WHITESPACE","\n        ",111],["T_NS_SEPARATOR","\\",112],["T_STRING","Magento",112],["T_NS_SEPARATOR","\\",112],["T_STRING","Framework",112],["T_NS_SEPARATOR","\\",112],["T_STRING","App",112],["T_NS_SEPARATOR","\\",112],["T_STRING","RequestInterface",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$requestHttp",112],",",["T_WHITESPACE","\n        ",112],["T_NS_SEPARATOR","\\",113],["T_STRING","Magento",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Paypal",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Model",113],["T_NS_SEPARATOR","\\",113],["T_STRING","CartFactory",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$cartFactory",113],",",["T_WHITESPACE","\n        ",113],["T_NS_SEPARATOR","\\",114],["T_STRING","Magento",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Paypal",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Model",114],["T_NS_SEPARATOR","\\",114],["T_STRING","Hostedpro",114],["T_NS_SEPARATOR","\\",114],["T_STRING","RequestFactory",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$hostedproRequestFactory",114],",",["T_WHITESPACE","\n        ",114],["T_NS_SEPARATOR","\\",115],["T_STRING","Magento",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Framework",115],["T_NS_SEPARATOR","\\",115],["T_STRING","Model",115],["T_NS_SEPARATOR","\\",115],["T_STRING","ResourceModel",115],["T_NS_SEPARATOR","\\",115],["T_STRING","AbstractResource",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$resource",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","null",115],",",["T_WHITESPACE","\n        ",115],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Framework",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Data",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Collection",116],["T_NS_SEPARATOR","\\",116],["T_STRING","AbstractDb",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$resourceCollection",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","null",116],",",["T_WHITESPACE","\n        ",116],["T_ARRAY","array",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$data",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],"[","]",["T_WHITESPACE","\n    ",117],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","hostedproRequestFactory",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$hostedproRequestFactory",119],";",["T_WHITESPACE","\n        ",119],["T_STRING","parent",120],["T_DOUBLE_COLON","::",120],["T_STRING","__construct",120],"(",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$context",121],",",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$registry",122],",",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$extensionFactory",123],",",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$customAttributeFactory",124],",",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$paymentData",125],",",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$scopeConfig",126],",",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$logger",127],",",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$moduleList",128],",",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$localeDate",129],",",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$proFactory",130],",",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$storeManager",131],",",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$urlBuilder",132],",",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$requestHttp",133],",",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$cartFactory",134],",",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$resource",135],",",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$resourceCollection",136],",",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$data",137],["T_WHITESPACE","\n        ",137],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Return available CC types for gateway based on merchant country.\n     * We do not have to check the availability of card types.\n     *\n     * @return true\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getAllowedCcTypes",147],"(",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_STRING","true",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Return merchant country code from config,\n     * use default country if it not specified in General settings\n     *\n     * @return string\n     *\/",152],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getMerchantCountry",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_pro",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getConfig",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","getMerchantCountry",160],"(",")",";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Do not validate payment form using server methods\n     *\n     * @return true\n     *\/",163],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","validate",168],"(",")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_STRING","true",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Instantiate state and set it to state object\n     *\n     * @param string $paymentAction\n     * @param \\Magento\\Framework\\DataObject $stateObject\n     * @return void\n     *\/",173],["T_WHITESPACE","\n    ",179],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","initialize",180],"(",["T_VARIABLE","$paymentAction",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$stateObject",180],")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_SWITCH","switch",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$paymentAction",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_CASE","case",183],["T_WHITESPACE"," ",183],["T_STRING","Config",183],["T_DOUBLE_COLON","::",183],["T_STRING","PAYMENT_ACTION_AUTH",183],":",["T_WHITESPACE","\n            ",183],["T_CASE","case",184],["T_WHITESPACE"," ",184],["T_STRING","Config",184],["T_DOUBLE_COLON","::",184],["T_STRING","PAYMENT_ACTION_SALE",184],":",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$payment",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getInfoInstance",185],"(",")",";",["T_WHITESPACE","\n                ",185],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order $order *\/",186],["T_WHITESPACE","\n                ",186],["T_VARIABLE","$order",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$payment",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getOrder",187],"(",")",";",["T_WHITESPACE","\n                ",187],["T_VARIABLE","$order",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","setCanSendNewEmailFlag",188],"(",["T_STRING","false",188],")",";",["T_WHITESPACE","\n                ",188],["T_VARIABLE","$payment",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","setAmountAuthorized",189],"(",["T_VARIABLE","$order",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getTotalDue",189],"(",")",")",";",["T_WHITESPACE","\n                ",189],["T_VARIABLE","$payment",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","setBaseAmountAuthorized",190],"(",["T_VARIABLE","$order",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getBaseTotalDue",190],"(",")",")",";",["T_WHITESPACE","\n\n                ",190],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","setPaymentFormUrl",192],"(",["T_VARIABLE","$payment",192],")",";",["T_WHITESPACE","\n\n                ",192],["T_VARIABLE","$stateObject",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","setState",194],"(",["T_STRING","Order",194],["T_DOUBLE_COLON","::",194],["T_STRING","STATE_PENDING_PAYMENT",194],")",";",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$stateObject",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","setStatus",195],"(",["T_STRING","Order",195],["T_DOUBLE_COLON","::",195],["T_STRING","STATE_PENDING_PAYMENT",195],")",";",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$stateObject",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setIsNotified",196],"(",["T_STRING","false",196],")",";",["T_WHITESPACE","\n                ",196],["T_BREAK","break",197],";",["T_WHITESPACE","\n            ",197],["T_DEFAULT","default",198],":",["T_WHITESPACE","\n                ",198],["T_BREAK","break",199],";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Sends API request to PayPal to get form URL, then sets this URL to $payment object.\n     *\n     * @param \\Magento\\Payment\\Model\\InfoInterface $payment\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",203],["T_WHITESPACE","\n    ",209],["T_PROTECTED","protected",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","setPaymentFormUrl",210],"(",["T_STRING","InfoInterface",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$payment",210],")",["T_WHITESPACE","\n    ",210],"{",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$request",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","buildFormUrlRequest",212],"(",["T_VARIABLE","$payment",212],")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$response",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","sendFormUrlRequest",213],"(",["T_VARIABLE","$request",213],")",";",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$response",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$payment",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setAdditionalInformation",215],"(",["T_CONSTANT_ENCAPSED_STRING","'secure_form_url'",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$response",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE"," ",216],["T_ELSE","else",216],["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_THROW","throw",217],["T_WHITESPACE"," ",217],["T_NEW","new",217],["T_WHITESPACE"," ",217],["T_STRING","LocalizedException",217],"(",["T_STRING","__",217],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot get secure form URL from PayPal'",217],")",")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Returns request object with needed data for API request to PayPal to get form URL.\n     *\n     * @param \\Magento\\Payment\\Model\\InfoInterface $payment\n     * @return \\Magento\\Paypal\\Model\\Hostedpro\\Request\n     *\/",221],["T_WHITESPACE","\n    ",226],["T_PROTECTED","protected",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","buildFormUrlRequest",227],"(",["T_STRING","InfoInterface",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$payment",227],")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$order",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$payment",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getOrder",229],"(",")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$request",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","buildBasicRequest",230],"(",")",["T_OBJECT_OPERATOR","->",230],["T_STRING","setOrder",230],"(",["T_VARIABLE","$order",230],")",["T_OBJECT_OPERATOR","->",230],["T_STRING","setPaymentMethod",230],"(",["T_VARIABLE","$this",230],")",["T_OBJECT_OPERATOR","->",230],["T_STRING","setAmount",230],"(",["T_VARIABLE","$order",230],")",";",["T_WHITESPACE","\n\n        ",230],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$request",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Returns form URL from request to PayPal.\n     *\n     * @param \\Magento\\Paypal\\Model\\Hostedpro\\Request $request\n     * @return string|false\n     *\/",235],["T_WHITESPACE","\n    ",240],["T_PROTECTED","protected",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","sendFormUrlRequest",241],"(",["T_STRING","Request",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$request",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$api",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_pro",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getApi",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$response",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$api",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","call",244],"(",["T_STRING","self",244],["T_DOUBLE_COLON","::",244],["T_STRING","BM_BUTTON_METHOD",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$request",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getRequestData",244],"(",")",")",";",["T_WHITESPACE","\n\n        ",244],["T_IF","if",246],["T_WHITESPACE"," ",246],"(","!",["T_ISSET","isset",246],"(",["T_VARIABLE","$response",246],"[",["T_CONSTANT_ENCAPSED_STRING","'EMAILLINK'",246],"]",")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_STRING","false",247],";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n        ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$response",249],"[",["T_CONSTANT_ENCAPSED_STRING","'EMAILLINK'",249],"]",";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Return request object with basic information\n     *\n     * @return \\Magento\\Paypal\\Model\\Hostedpro\\Request\n     *\/",252],["T_WHITESPACE","\n    ",256],["T_PROTECTED","protected",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","buildBasicRequest",257],"(",")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$request",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","hostedproRequestFactory",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","create",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","setData",259],"(",["T_WHITESPACE","\n            ",259],"[",["T_WHITESPACE","\n                ",260],["T_CONSTANT_ENCAPSED_STRING","'METHOD'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_STRING","self",261],["T_DOUBLE_COLON","::",261],["T_STRING","BM_BUTTON_METHOD",261],",",["T_WHITESPACE","\n                ",261],["T_CONSTANT_ENCAPSED_STRING","'BUTTONCODE'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_STRING","self",262],["T_DOUBLE_COLON","::",262],["T_STRING","BM_BUTTON_CODE",262],",",["T_WHITESPACE","\n                ",262],["T_CONSTANT_ENCAPSED_STRING","'BUTTONTYPE'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_STRING","self",263],["T_DOUBLE_COLON","::",263],["T_STRING","BM_BUTTON_TYPE",263],",",["T_WHITESPACE","\n            ",263],"]",["T_WHITESPACE","\n        ",264],")",";",["T_WHITESPACE","\n        ",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$request",266],";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n    ",267],["T_DOC_COMMENT","\/**\n     * Get return URL\n     *\n     * @param int|null $storeId\n     * @return string\n     *\/",269],["T_WHITESPACE","\n    ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","getReturnUrl",275],"(",["T_VARIABLE","$storeId",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","null",275],")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getUrl",277],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/hostedpro\/return'",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$storeId",277],")",";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n    ",278],["T_DOC_COMMENT","\/**\n     * Get notify (IPN) URL\n     *\n     * @param int|null $storeId\n     * @return string\n     *\/",280],["T_WHITESPACE","\n    ",285],["T_PUBLIC","public",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","getNotifyUrl",286],"(",["T_VARIABLE","$storeId",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","null",286],")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getUrl",288],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/ipn'",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$storeId",288],",",["T_WHITESPACE"," ",288],["T_STRING","false",288],")",";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n\n    ",289],["T_DOC_COMMENT","\/**\n     * Get cancel URL\n     *\n     * @param int|null $storeId\n     * @return string\n     *\/",291],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","getCancelUrl",297],"(",["T_VARIABLE","$storeId",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","null",297],")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getUrl",299],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/hostedpro\/cancel'",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$storeId",299],")",";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n\n    ",300],["T_DOC_COMMENT","\/**\n     * Build URL for store\n     *\n     * @param string $path\n     * @param int $storeId\n     * @param bool|null $secure\n     * @return string\n     *\/",302],["T_WHITESPACE","\n    ",309],["T_PROTECTED","protected",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","getUrl",310],"(",["T_VARIABLE","$path",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$storeId",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$secure",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","null",310],")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$store",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_storeManager",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getStore",312],"(",["T_VARIABLE","$storeId",312],")",";",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_urlBuilder",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getUrl",313],"(",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$path",314],",",["T_WHITESPACE","\n            ",314],"[",["T_CONSTANT_ENCAPSED_STRING","\"_secure\"",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$secure",315],["T_WHITESPACE"," ",315],["T_IS_IDENTICAL","===",315],["T_WHITESPACE"," ",315],["T_STRING","null",315],["T_WHITESPACE"," ",315],"?",["T_WHITESPACE"," ",315],["T_VARIABLE","$store",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","isCurrentlySecure",315],"(",")",["T_WHITESPACE"," ",315],":",["T_WHITESPACE"," ",315],["T_VARIABLE","$secure",315],"]",["T_WHITESPACE","\n        ",315],")",";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n",317],"}",["T_WHITESPACE","\n",318]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Paypal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Method",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Payment",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","InfoInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Order",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Payment",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Store",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Store",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Paypal Billing Agreement method\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Agreement",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Paypal",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Payment",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Method",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Billing",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractAgreement",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE","\n    ",16],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Paypal",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Model",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Billing",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Agreement",17],["T_NS_SEPARATOR","\\",17],["T_STRING","MethodInterface",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * Method code\n     *\n     * @var string\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_code",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Paypal",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Model",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Config",24],["T_DOUBLE_COLON","::",24],["T_STRING","METHOD_BILLING_AGREEMENT",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_canAuthorize",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","true",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_canCapture",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","true",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_canCapturePartial",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","true",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_canRefund",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","true",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_canRefundInvoicePartial",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","true",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_canVoid",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","true",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_canUseCheckout",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","true",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_canUseInternal",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","true",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_canFetchTransactionInfo",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","true",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Method instance setting\n     *\n     * @var bool\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_canReviewPayment",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","true",94],";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Website Payments Pro instance\n     *\n     * @var \\Magento\\Paypal\\Model\\Pro\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$_pro",101],";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",103],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_storeManager",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\UrlInterface\n     *\/",108],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$_urlBuilder",111],";",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\CartFactory\n     *\/",113],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_cartFactory",116],";",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Api\\ExtensionAttributesFactory $extensionFactory\n     * @param \\Magento\\Framework\\Api\\AttributeValueFactory $customAttributeFactory\n     * @param \\Magento\\Payment\\Helper\\Data $paymentData\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Payment\\Model\\Method\\Logger $logger\n     * @param \\Magento\\Paypal\\Model\\Billing\\AgreementFactory $agreementFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Paypal\\Model\\ProFactory $proFactory\n     * @param \\Magento\\Framework\\UrlInterface $urlBuilder\n     * @param \\Magento\\Paypal\\Model\\CartFactory $cartFactory\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",118],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","__construct",136],"(",["T_WHITESPACE","\n        ",136],["T_NS_SEPARATOR","\\",137],["T_STRING","Magento",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Framework",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Model",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Context",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$context",137],",",["T_WHITESPACE","\n        ",137],["T_NS_SEPARATOR","\\",138],["T_STRING","Magento",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Framework",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Registry",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$registry",138],",",["T_WHITESPACE","\n        ",138],["T_NS_SEPARATOR","\\",139],["T_STRING","Magento",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Framework",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Api",139],["T_NS_SEPARATOR","\\",139],["T_STRING","ExtensionAttributesFactory",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$extensionFactory",139],",",["T_WHITESPACE","\n        ",139],["T_NS_SEPARATOR","\\",140],["T_STRING","Magento",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Framework",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Api",140],["T_NS_SEPARATOR","\\",140],["T_STRING","AttributeValueFactory",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$customAttributeFactory",140],",",["T_WHITESPACE","\n        ",140],["T_NS_SEPARATOR","\\",141],["T_STRING","Magento",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Payment",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Helper",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Data",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$paymentData",141],",",["T_WHITESPACE","\n        ",141],["T_NS_SEPARATOR","\\",142],["T_STRING","Magento",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Framework",142],["T_NS_SEPARATOR","\\",142],["T_STRING","App",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Config",142],["T_NS_SEPARATOR","\\",142],["T_STRING","ScopeConfigInterface",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$scopeConfig",142],",",["T_WHITESPACE","\n        ",142],["T_NS_SEPARATOR","\\",143],["T_STRING","Magento",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Payment",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Model",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Method",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Logger",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$logger",143],",",["T_WHITESPACE","\n        ",143],["T_NS_SEPARATOR","\\",144],["T_STRING","Magento",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Paypal",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Model",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Billing",144],["T_NS_SEPARATOR","\\",144],["T_STRING","AgreementFactory",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$agreementFactory",144],",",["T_WHITESPACE","\n        ",144],["T_NS_SEPARATOR","\\",145],["T_STRING","Magento",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Store",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Model",145],["T_NS_SEPARATOR","\\",145],["T_STRING","StoreManagerInterface",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$storeManager",145],",",["T_WHITESPACE","\n        ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Paypal",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Model",146],["T_NS_SEPARATOR","\\",146],["T_STRING","ProFactory",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$proFactory",146],",",["T_WHITESPACE","\n        ",146],["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Framework",147],["T_NS_SEPARATOR","\\",147],["T_STRING","UrlInterface",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$urlBuilder",147],",",["T_WHITESPACE","\n        ",147],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Paypal",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Model",148],["T_NS_SEPARATOR","\\",148],["T_STRING","CartFactory",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$cartFactory",148],",",["T_WHITESPACE","\n        ",148],["T_NS_SEPARATOR","\\",149],["T_STRING","Magento",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Framework",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Model",149],["T_NS_SEPARATOR","\\",149],["T_STRING","ResourceModel",149],["T_NS_SEPARATOR","\\",149],["T_STRING","AbstractResource",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$resource",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","null",149],",",["T_WHITESPACE","\n        ",149],["T_NS_SEPARATOR","\\",150],["T_STRING","Magento",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Framework",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Data",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Collection",150],["T_NS_SEPARATOR","\\",150],["T_STRING","AbstractDb",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$resourceCollection",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","null",150],",",["T_WHITESPACE","\n        ",150],["T_ARRAY","array",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$data",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],"[","]",["T_WHITESPACE","\n    ",151],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_storeManager",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$storeManager",153],";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_urlBuilder",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$urlBuilder",154],";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_cartFactory",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$cartFactory",155],";",["T_WHITESPACE","\n        ",155],["T_STRING","parent",156],["T_DOUBLE_COLON","::",156],["T_STRING","__construct",156],"(",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$context",157],",",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$registry",158],",",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$extensionFactory",159],",",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$customAttributeFactory",160],",",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$paymentData",161],",",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$scopeConfig",162],",",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$logger",163],",",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$agreementFactory",164],",",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$resource",165],",",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$resourceCollection",166],",",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$data",167],["T_WHITESPACE","\n        ",167],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$proInstance",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","array_shift",169],"(",["T_VARIABLE","$data",169],")",";",["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$proInstance",170],["T_WHITESPACE"," ",170],["T_BOOLEAN_AND","&&",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$proInstance",170],["T_WHITESPACE"," ",170],["T_INSTANCEOF","instanceof",170],["T_WHITESPACE"," ",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Magento",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Paypal",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Model",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Pro",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_pro",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$proInstance",171],";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE"," ",172],["T_ELSE","else",172],["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_pro",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$proFactory",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","create",173],"(",")",";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_pro",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","setMethod",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_code",175],")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Store setter\n     * Also updates store ID in config object\n     *\n     * @param Store|int $store\n     * @return $this\n     *\/",178],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","setStore",185],"(",["T_VARIABLE","$store",185],")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","setData",187],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$store",187],")",";",["T_WHITESPACE","\n        ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_STRING","null",188],["T_WHITESPACE"," ",188],["T_IS_IDENTICAL","===",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$store",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$store",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_storeManager",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getStore",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getId",189],"(",")",";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_pro",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getConfig",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","setStoreId",191],"(",["T_STRING","is_object",191],"(",["T_VARIABLE","$store",191],")",["T_WHITESPACE"," ",191],"?",["T_WHITESPACE"," ",191],["T_VARIABLE","$store",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getId",191],"(",")",["T_WHITESPACE"," ",191],":",["T_WHITESPACE"," ",191],["T_VARIABLE","$store",191],")",";",["T_WHITESPACE","\n        ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Init billing agreement\n     *\n     * @param \\Magento\\Paypal\\Model\\Billing\\AbstractAgreement $agreement\n     * @return $this\n     *\/",195],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","initBillingAgreementToken",201],"(",["T_NS_SEPARATOR","\\",201],["T_STRING","Magento",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Paypal",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Model",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Billing",201],["T_NS_SEPARATOR","\\",201],["T_STRING","AbstractAgreement",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$agreement",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$api",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_pro",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getApi",203],"(",")",["T_OBJECT_OPERATOR","->",203],["T_STRING","setReturnUrl",203],"(",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$agreement",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getReturnUrl",204],"(",")",["T_WHITESPACE","\n        ",204],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","setCancelUrl",205],"(",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$agreement",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getCancelUrl",206],"(",")",["T_WHITESPACE","\n        ",206],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","setBillingType",207],"(",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_pro",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getApi",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","getBillingAgreementType",208],"(",")",["T_WHITESPACE","\n        ",208],")",";",["T_WHITESPACE","\n\n        ",209],["T_VARIABLE","$api",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","callSetCustomerBillingAgreement",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$agreement",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","setRedirectUrl",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_pro",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getConfig",212],"(",")",["T_OBJECT_OPERATOR","->",212],["T_STRING","getStartBillingAgreementUrl",212],"(",["T_VARIABLE","$api",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getToken",212],"(",")",")",")",";",["T_WHITESPACE","\n        ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Retrieve billing agreement customer details by token\n     *\n     * @param \\Magento\\Paypal\\Model\\Billing\\AbstractAgreement $agreement\n     * @return array\n     *\/",216],["T_WHITESPACE","\n    ",221],["T_PUBLIC","public",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","getBillingAgreementTokenInfo",222],"(",["T_NS_SEPARATOR","\\",222],["T_STRING","Magento",222],["T_NS_SEPARATOR","\\",222],["T_STRING","Paypal",222],["T_NS_SEPARATOR","\\",222],["T_STRING","Model",222],["T_NS_SEPARATOR","\\",222],["T_STRING","Billing",222],["T_NS_SEPARATOR","\\",222],["T_STRING","AbstractAgreement",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$agreement",222],")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$api",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_pro",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getApi",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","setToken",224],"(",["T_VARIABLE","$agreement",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getToken",224],"(",")",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$api",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","callGetBillingAgreementCustomerDetails",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$responseData",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],"[",["T_WHITESPACE","\n            ",226],["T_CONSTANT_ENCAPSED_STRING","'token'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$api",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getData",227],"(",["T_CONSTANT_ENCAPSED_STRING","'token'",227],")",",",["T_WHITESPACE","\n            ",227],["T_CONSTANT_ENCAPSED_STRING","'email'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$api",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getData",228],"(",["T_CONSTANT_ENCAPSED_STRING","'email'",228],")",",",["T_WHITESPACE","\n            ",228],["T_CONSTANT_ENCAPSED_STRING","'payer_id'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$api",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getData",229],"(",["T_CONSTANT_ENCAPSED_STRING","'payer_id'",229],")",",",["T_WHITESPACE","\n            ",229],["T_CONSTANT_ENCAPSED_STRING","'payer_status'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$api",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getData",230],"(",["T_CONSTANT_ENCAPSED_STRING","'payer_status'",230],")",",",["T_WHITESPACE","\n        ",230],"]",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$agreement",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","addData",232],"(",["T_VARIABLE","$responseData",232],")",";",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$responseData",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Create billing agreement by token specified in request\n     *\n     * @param \\Magento\\Paypal\\Model\\Billing\\AbstractAgreement $agreement\n     * @return $this\n     *\/",236],["T_WHITESPACE","\n    ",241],["T_PUBLIC","public",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","placeBillingAgreement",242],"(",["T_NS_SEPARATOR","\\",242],["T_STRING","Magento",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Paypal",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Model",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Billing",242],["T_NS_SEPARATOR","\\",242],["T_STRING","AbstractAgreement",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$agreement",242],")",["T_WHITESPACE","\n    ",242],"{",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$api",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_pro",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getApi",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","setToken",244],"(",["T_VARIABLE","$agreement",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getToken",244],"(",")",")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$api",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","callCreateBillingAgreement",245],"(",")",";",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$agreement",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","setBillingAgreementId",246],"(",["T_VARIABLE","$api",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getData",246],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_agreement_id'",246],")",")",";",["T_WHITESPACE","\n        ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Update billing agreement status\n     *\n     * @param \\Magento\\Paypal\\Model\\Billing\\AbstractAgreement $agreement\n     * @return $this\n     * @throws \\Exception|\\Magento\\Framework\\Exception\\LocalizedException\n     *\/",250],["T_WHITESPACE","\n    ",256],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","updateBillingAgreementStatus",257],"(",["T_NS_SEPARATOR","\\",257],["T_STRING","Magento",257],["T_NS_SEPARATOR","\\",257],["T_STRING","Paypal",257],["T_NS_SEPARATOR","\\",257],["T_STRING","Model",257],["T_NS_SEPARATOR","\\",257],["T_STRING","Billing",257],["T_NS_SEPARATOR","\\",257],["T_STRING","AbstractAgreement",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$agreement",257],")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$targetStatus",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$agreement",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getStatus",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$api",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_pro",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getApi",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","setReferenceId",260],"(",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$agreement",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getReferenceId",261],"(",")",["T_WHITESPACE","\n        ",261],")",["T_OBJECT_OPERATOR","->",262],["T_STRING","setBillingAgreementStatus",262],"(",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$targetStatus",263],["T_WHITESPACE","\n        ",263],")",";",["T_WHITESPACE","\n        ",264],["T_TRY","try",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$api",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","callUpdateBillingAgreement",266],"(",")",";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE"," ",267],["T_CATCH","catch",267],["T_WHITESPACE"," ",267],"(",["T_NS_SEPARATOR","\\",267],["T_STRING","Magento",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Framework",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Exception",267],["T_NS_SEPARATOR","\\",267],["T_STRING","LocalizedException",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$e",267],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_COMMENT","\/\/ when BA was already canceled, just pretend that the operation succeeded\n",268],["T_WHITESPACE","            ",269],["T_IF","if",269],["T_WHITESPACE"," ",269],"(","!","(",["T_NS_SEPARATOR","\\",269],["T_STRING","Magento",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Paypal",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Model",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Billing",269],["T_NS_SEPARATOR","\\",269],["T_STRING","Agreement",269],["T_DOUBLE_COLON","::",269],["T_STRING","STATUS_CANCELED",269],["T_WHITESPACE"," ",269],["T_IS_EQUAL","==",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$targetStatus",269],["T_WHITESPACE"," ",269],["T_BOOLEAN_AND","&&",269],["T_WHITESPACE","\n                ",269],["T_VARIABLE","$api",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getIsBillingAgreementAlreadyCancelled",270],"(",")",")",["T_WHITESPACE","\n            ",270],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n                ",271],["T_THROW","throw",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$e",272],";",["T_WHITESPACE","\n            ",272],"}",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Authorize payment\n     *\n     * @param \\Magento\\Framework\\DataObject|InfoInterface $payment\n     * @param float $amount\n     * @return $this\n     *\/",278],["T_WHITESPACE","\n    ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","authorize",285],"(",["T_NS_SEPARATOR","\\",285],["T_STRING","Magento",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Payment",285],["T_NS_SEPARATOR","\\",285],["T_STRING","Model",285],["T_NS_SEPARATOR","\\",285],["T_STRING","InfoInterface",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$payment",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$amount",285],")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_placeOrder",287],"(",["T_VARIABLE","$payment",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$amount",287],")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Void payment\n     *\n     * @param \\Magento\\Framework\\DataObject|InfoInterface|Payment $payment\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",290],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","void",297],"(",["T_NS_SEPARATOR","\\",297],["T_STRING","Magento",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Payment",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Model",297],["T_NS_SEPARATOR","\\",297],["T_STRING","InfoInterface",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$payment",297],")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_pro",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","void",299],"(",["T_VARIABLE","$payment",299],")",";",["T_WHITESPACE","\n        ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],";",["T_WHITESPACE","\n    ",300],"}",["T_WHITESPACE","\n\n    ",301],["T_DOC_COMMENT","\/**\n     * Capture payment\n     *\n     * @param \\Magento\\Framework\\DataObject|InfoInterface|Payment $payment\n     * @param float $amount\n     * @return $this\n     *\/",303],["T_WHITESPACE","\n    ",309],["T_PUBLIC","public",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","capture",310],"(",["T_NS_SEPARATOR","\\",310],["T_STRING","Magento",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Payment",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Model",310],["T_NS_SEPARATOR","\\",310],["T_STRING","InfoInterface",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$payment",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$amount",310],")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_STRING","false",312],["T_WHITESPACE"," ",312],["T_IS_IDENTICAL","===",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_pro",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","capture",312],"(",["T_VARIABLE","$payment",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$amount",312],")",")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_placeOrder",313],"(",["T_VARIABLE","$payment",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$amount",313],")",";",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n        ",314],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Refund capture\n     *\n     * @param \\Magento\\Framework\\DataObject|InfoInterface|Payment $payment\n     * @param float $amount\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",318],["T_WHITESPACE","\n    ",325],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","refund",326],"(",["T_NS_SEPARATOR","\\",326],["T_STRING","Magento",326],["T_NS_SEPARATOR","\\",326],["T_STRING","Payment",326],["T_NS_SEPARATOR","\\",326],["T_STRING","Model",326],["T_NS_SEPARATOR","\\",326],["T_STRING","InfoInterface",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$payment",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$amount",326],")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_pro",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","refund",328],"(",["T_VARIABLE","$payment",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$amount",328],")",";",["T_WHITESPACE","\n        ",328],["T_RETURN","return",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n\n    ",330],["T_DOC_COMMENT","\/**\n     * Cancel payment\n     *\n     * @param \\Magento\\Framework\\DataObject|InfoInterface|Payment $payment\n     * @return $this\n     *\/",332],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","cancel",338],"(",["T_NS_SEPARATOR","\\",338],["T_STRING","Magento",338],["T_NS_SEPARATOR","\\",338],["T_STRING","Payment",338],["T_NS_SEPARATOR","\\",338],["T_STRING","Model",338],["T_NS_SEPARATOR","\\",338],["T_STRING","InfoInterface",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$payment",338],")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_pro",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","cancel",340],"(",["T_VARIABLE","$payment",340],")",";",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Whether payment can be reviewed\n     * @return bool\n     * @internal param InfoInterface|Payment $payment\n     *\/",344],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","canReviewPayment",349],"(",")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_STRING","parent",351],["T_DOUBLE_COLON","::",351],["T_STRING","canReviewPayment",351],"(",")",["T_WHITESPACE"," ",351],["T_BOOLEAN_AND","&&",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_pro",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","canReviewPayment",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getInfoInstance",351],"(",")",")",";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Attempt to accept a pending payment\n     *\n     * @param InfoInterface|Payment $payment\n     * @return bool\n     *\/",354],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","acceptPayment",360],"(",["T_STRING","InfoInterface",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$payment",360],")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_STRING","parent",362],["T_DOUBLE_COLON","::",362],["T_STRING","acceptPayment",362],"(",["T_VARIABLE","$payment",362],")",";",["T_WHITESPACE","\n        ",362],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_pro",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","reviewPayment",363],"(",["T_VARIABLE","$payment",363],",",["T_WHITESPACE"," ",363],["T_NS_SEPARATOR","\\",363],["T_STRING","Magento",363],["T_NS_SEPARATOR","\\",363],["T_STRING","Paypal",363],["T_NS_SEPARATOR","\\",363],["T_STRING","Model",363],["T_NS_SEPARATOR","\\",363],["T_STRING","Pro",363],["T_DOUBLE_COLON","::",363],["T_STRING","PAYMENT_REVIEW_ACCEPT",363],")",";",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n\n    ",364],["T_DOC_COMMENT","\/**\n     * Attempt to deny a pending payment\n     *\n     * @param InfoInterface|Payment $payment\n     * @return bool\n     *\/",366],["T_WHITESPACE","\n    ",371],["T_PUBLIC","public",372],["T_WHITESPACE"," ",372],["T_FUNCTION","function",372],["T_WHITESPACE"," ",372],["T_STRING","denyPayment",372],"(",["T_STRING","InfoInterface",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$payment",372],")",["T_WHITESPACE","\n    ",372],"{",["T_WHITESPACE","\n        ",373],["T_STRING","parent",374],["T_DOUBLE_COLON","::",374],["T_STRING","denyPayment",374],"(",["T_VARIABLE","$payment",374],")",";",["T_WHITESPACE","\n        ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_pro",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","reviewPayment",375],"(",["T_VARIABLE","$payment",375],",",["T_WHITESPACE"," ",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Magento",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Paypal",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Model",375],["T_NS_SEPARATOR","\\",375],["T_STRING","Pro",375],["T_DOUBLE_COLON","::",375],["T_STRING","PAYMENT_REVIEW_DENY",375],")",";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Fetch transaction details info\n     *\n     * @param InfoInterface $payment\n     * @param string $transactionId\n     * @return array\n     *\/",378],["T_WHITESPACE","\n    ",384],["T_PUBLIC","public",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","fetchTransactionInfo",385],"(",["T_STRING","InfoInterface",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$payment",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$transactionId",385],")",["T_WHITESPACE","\n    ",385],"{",["T_WHITESPACE","\n        ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","_pro",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","fetchTransactionInfo",387],"(",["T_VARIABLE","$payment",387],",",["T_WHITESPACE"," ",387],["T_VARIABLE","$transactionId",387],")",";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_DOC_COMMENT","\/**\n     * Place an order with authorization or capture action\n     *\n     * @param Payment $payment\n     * @param float $amount\n     * @return $this\n     *\/",390],["T_WHITESPACE","\n    ",396],["T_PROTECTED","protected",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","_placeOrder",397],"(",["T_STRING","Payment",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$payment",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$amount",397],")",["T_WHITESPACE","\n    ",397],"{",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$order",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$payment",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getOrder",399],"(",")",";",["T_WHITESPACE","\n        ",399],["T_DOC_COMMENT","\/** @var \\Magento\\Paypal\\Model\\Billing\\Agreement $billingAgreement *\/",400],["T_WHITESPACE","\n        ",400],["T_VARIABLE","$billingAgreement",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_agreementFactory",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","create",401],"(",")",["T_OBJECT_OPERATOR","->",401],["T_STRING","load",401],"(",["T_WHITESPACE","\n            ",401],["T_VARIABLE","$payment",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getAdditionalInformation",402],"(",["T_WHITESPACE","\n                ",402],["T_NS_SEPARATOR","\\",403],["T_STRING","Magento",403],["T_NS_SEPARATOR","\\",403],["T_STRING","Paypal",403],["T_NS_SEPARATOR","\\",403],["T_STRING","Model",403],["T_NS_SEPARATOR","\\",403],["T_STRING","Payment",403],["T_NS_SEPARATOR","\\",403],["T_STRING","Method",403],["T_NS_SEPARATOR","\\",403],["T_STRING","Billing",403],["T_NS_SEPARATOR","\\",403],["T_STRING","AbstractAgreement",403],["T_DOUBLE_COLON","::",403],["T_STRING","TRANSPORT_BILLING_AGREEMENT_ID",403],["T_WHITESPACE","\n            ",403],")",["T_WHITESPACE","\n        ",404],")",";",["T_WHITESPACE","\n\n        ",405],["T_VARIABLE","$cart",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","_cartFactory",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","create",407],"(","[",["T_CONSTANT_ENCAPSED_STRING","'salesModel'",407],["T_WHITESPACE"," ",407],["T_DOUBLE_ARROW","=>",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$order",407],"]",")",";",["T_WHITESPACE","\n\n        ",407],["T_VARIABLE","$proConfig",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","_pro",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getConfig",409],"(",")",";",["T_WHITESPACE","\n        ",409],["T_VARIABLE","$api",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","_pro",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getApi",410],"(",")",["T_OBJECT_OPERATOR","->",410],["T_STRING","setReferenceId",410],"(",["T_WHITESPACE","\n            ",410],["T_VARIABLE","$billingAgreement",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getReferenceId",411],"(",")",["T_WHITESPACE","\n        ",411],")",["T_OBJECT_OPERATOR","->",412],["T_STRING","setPaymentAction",412],"(",["T_WHITESPACE","\n            ",412],["T_VARIABLE","$proConfig",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getValue",413],"(",["T_CONSTANT_ENCAPSED_STRING","'paymentAction'",413],")",["T_WHITESPACE","\n        ",413],")",["T_OBJECT_OPERATOR","->",414],["T_STRING","setAmount",414],"(",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$amount",415],["T_WHITESPACE","\n        ",415],")",["T_OBJECT_OPERATOR","->",416],["T_STRING","setCurrencyCode",416],"(",["T_WHITESPACE","\n            ",416],["T_VARIABLE","$payment",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","getOrder",417],"(",")",["T_OBJECT_OPERATOR","->",417],["T_STRING","getBaseCurrencyCode",417],"(",")",["T_WHITESPACE","\n        ",417],")",["T_OBJECT_OPERATOR","->",418],["T_STRING","setNotifyUrl",418],"(",["T_WHITESPACE","\n            ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","_urlBuilder",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","getUrl",419],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/ipn\/'",419],")",["T_WHITESPACE","\n        ",419],")",["T_OBJECT_OPERATOR","->",420],["T_STRING","setPaypalCart",420],"(",["T_WHITESPACE","\n            ",420],["T_VARIABLE","$cart",421],["T_WHITESPACE","\n        ",421],")",["T_OBJECT_OPERATOR","->",422],["T_STRING","setIsLineItemsEnabled",422],"(",["T_WHITESPACE","\n            ",422],["T_VARIABLE","$proConfig",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","getValue",423],"(",["T_CONSTANT_ENCAPSED_STRING","'lineItemsEnabled'",423],")",["T_WHITESPACE","\n        ",423],")",["T_OBJECT_OPERATOR","->",424],["T_STRING","setInvNum",424],"(",["T_WHITESPACE","\n            ",424],["T_VARIABLE","$order",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getIncrementId",425],"(",")",["T_WHITESPACE","\n        ",425],")",";",["T_WHITESPACE","\n\n        ",426],["T_COMMENT","\/\/ call api and import transaction and other payment information\n",428],["T_WHITESPACE","        ",429],["T_VARIABLE","$api",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","callDoReferenceTransaction",429],"(",")",";",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_pro",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","importPaymentInfo",430],"(",["T_VARIABLE","$api",430],",",["T_WHITESPACE"," ",430],["T_VARIABLE","$payment",430],")",";",["T_WHITESPACE","\n        ",430],["T_VARIABLE","$api",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","callGetTransactionDetails",431],"(",")",";",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_pro",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","importPaymentInfo",432],"(",["T_VARIABLE","$api",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$payment",432],")",";",["T_WHITESPACE","\n\n        ",432],["T_VARIABLE","$payment",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","setTransactionId",434],"(",["T_VARIABLE","$api",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getTransactionId",434],"(",")",")",["T_OBJECT_OPERATOR","->",434],["T_STRING","setIsTransactionClosed",434],"(",["T_LNUMBER","0",434],")",";",["T_WHITESPACE","\n\n        ",434],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$api",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getBillingAgreementId",436],"(",")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_VARIABLE","$order",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","addRelatedObject",437],"(",["T_VARIABLE","$billingAgreement",437],")",";",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$billingAgreement",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","setIsObjectChanged",438],"(",["T_STRING","true",438],")",";",["T_WHITESPACE","\n            ",438],["T_VARIABLE","$billingAgreement",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","addOrderRelation",439],"(",["T_VARIABLE","$order",439],")",";",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE","\n\n        ",440],["T_RETURN","return",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],";",["T_WHITESPACE","\n    ",442],"}",["T_WHITESPACE","\n\n    ",443],["T_DOC_COMMENT","\/**\n     * @param object $quote\n     * @return bool\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",445],["T_WHITESPACE","\n    ",449],["T_PROTECTED","protected",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","_isAvailable",450],"(",["T_VARIABLE","$quote",450],")",["T_WHITESPACE","\n    ",450],"{",["T_WHITESPACE","\n        ",451],["T_RETURN","return",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_pro",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getConfig",452],"(",")",["T_OBJECT_OPERATOR","->",452],["T_STRING","isMethodAvailable",452],"(",["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_code",452],")",";",["T_WHITESPACE","\n    ",452],"}",["T_WHITESPACE","\n\n    ",453],["T_DOC_COMMENT","\/**\n     * Payment action getter compatible with payment model\n     *\n     * @see \\Magento\\Sales\\Model\\Payment::place()\n     * @return string\n     *\/",455],["T_WHITESPACE","\n    ",460],["T_PUBLIC","public",461],["T_WHITESPACE"," ",461],["T_FUNCTION","function",461],["T_WHITESPACE"," ",461],["T_STRING","getConfigPaymentAction",461],"(",")",["T_WHITESPACE","\n    ",461],"{",["T_WHITESPACE","\n        ",462],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_pro",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getConfig",463],"(",")",["T_OBJECT_OPERATOR","->",463],["T_STRING","getPaymentAction",463],"(",")",";",["T_WHITESPACE","\n    ",463],"}",["T_WHITESPACE","\n",464],"}",["T_WHITESPACE","\n",465]]
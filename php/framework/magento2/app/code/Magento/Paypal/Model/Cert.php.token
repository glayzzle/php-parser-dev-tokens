[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Paypal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DirectoryList",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Directory",9],["T_NS_SEPARATOR","\\",9],["T_STRING","WriteInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * PayPal specific model for certificate based authentication\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Cert",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AbstractModel",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Certificate base path\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","BASEPATH_PAYPAL_CERT",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'cert\/paypal\/'",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var WriteInterface\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$varDirectory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Encryption\\EncryptorInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$encryptor",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\Encryption\\EncryptorInterface $encryptor\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     *\/",31],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",["T_WHITESPACE","\n        ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Framework",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Model",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Context",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$context",41],",",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Registry",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$registry",42],",",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Framework",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Filesystem",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$filesystem",43],",",["T_WHITESPACE","\n        ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Encryption",44],["T_NS_SEPARATOR","\\",44],["T_STRING","EncryptorInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$encryptor",44],",",["T_WHITESPACE","\n        ",44],["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Framework",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Model",45],["T_NS_SEPARATOR","\\",45],["T_STRING","ResourceModel",45],["T_NS_SEPARATOR","\\",45],["T_STRING","AbstractResource",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$resource",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],",",["T_WHITESPACE","\n        ",45],["T_NS_SEPARATOR","\\",46],["T_STRING","Magento",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Framework",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Data",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Collection",46],["T_NS_SEPARATOR","\\",46],["T_STRING","AbstractDb",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$resourceCollection",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],",",["T_WHITESPACE","\n        ",46],["T_ARRAY","array",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],"[","]",["T_WHITESPACE","\n    ",47],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","varDirectory",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$filesystem",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getDirectoryWrite",49],"(",["T_STRING","DirectoryList",49],["T_DOUBLE_COLON","::",49],["T_STRING","VAR_DIR",49],")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","encryptor",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$encryptor",50],";",["T_WHITESPACE","\n        ",50],["T_STRING","parent",51],["T_DOUBLE_COLON","::",51],["T_STRING","__construct",51],"(",["T_VARIABLE","$context",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$registry",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$resource",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$resourceCollection",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$data",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     * @return void\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","_construct",59],"(",")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_init",61],"(",["T_NS_SEPARATOR","\\",61],["T_STRING","Magento",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Paypal",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Model",61],["T_NS_SEPARATOR","\\",61],["T_STRING","ResourceModel",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Cert",61],["T_DOUBLE_COLON","::",61],["T_CLASS","class",61],")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Load model by website id\n     *\n     * @param int $websiteId\n     * @param bool $strictLoad\n     * @return $this\n     *\/",64],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","loadByWebsite",71],"(",["T_VARIABLE","$websiteId",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$strictLoad",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","true",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","setWebsiteId",73],"(",["T_VARIABLE","$websiteId",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_getResource",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","loadByWebsite",74],"(",["T_VARIABLE","$this",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$strictLoad",74],")",";",["T_WHITESPACE","\n        ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Get path to PayPal certificate file, if file does not exist try to create it\n     *\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",78],["T_WHITESPACE","\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","getCertPath",84],"(",")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(","!",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getContent",86],"(",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_THROW","throw",87],["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Framework",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Exception",87],["T_NS_SEPARATOR","\\",87],["T_STRING","LocalizedException",87],"(",["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'The PayPal certificate does not exist.'",87],")",")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n\n        ",88],["T_VARIABLE","$certFileName",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","sprintf",90],"(",["T_CONSTANT_ENCAPSED_STRING","'cert_%s_%s.pem'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getWebsiteId",90],"(",")",",",["T_WHITESPACE"," ",90],["T_STRING","strtotime",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getUpdatedAt",90],"(",")",")",")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$certFile",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","BASEPATH_PAYPAL_CERT",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_VARIABLE","$certFileName",91],";",["T_WHITESPACE","\n\n        ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","varDirectory",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","isExist",93],"(",["T_VARIABLE","$certFile",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_createCertFile",94],"(",["T_VARIABLE","$certFile",94],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","varDirectory",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getAbsolutePath",96],"(",["T_VARIABLE","$certFile",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Create physical certificate file based on DB data\n     *\n     * @param string $file\n     * @return void\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","_createCertFile",105],"(",["T_VARIABLE","$file",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","varDirectory",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","isDirectory",107],"(",["T_STRING","self",107],["T_DOUBLE_COLON","::",107],["T_STRING","BASEPATH_PAYPAL_CERT",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_removeOutdatedCertFile",108],"(",")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","varDirectory",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","writeFile",110],"(",["T_VARIABLE","$file",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","encryptor",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","decrypt",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getContent",110],"(",")",")",")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Check and remove outdated certificate file by website\n     *\n     * @return void\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","_removeOutdatedCertFile",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$pattern",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","sprintf",120],"(",["T_CONSTANT_ENCAPSED_STRING","'cert_%s*'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getWebsiteId",120],"(",")",")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$entries",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","varDirectory",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","search",121],"(",["T_VARIABLE","$pattern",121],",",["T_WHITESPACE"," ",121],["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","BASEPATH_PAYPAL_CERT",121],")",";",["T_WHITESPACE","\n        ",121],["T_FOREACH","foreach",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$entries",122],["T_WHITESPACE"," ",122],["T_AS","as",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$entry",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","varDirectory",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","delete",123],"(",["T_VARIABLE","$entry",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Delete assigned certificate file after delete object\n     *\n     * @return $this\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","afterDelete",132],"(",")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_removeOutdatedCertFile",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n",136],"}",["T_WHITESPACE","\n",137]]
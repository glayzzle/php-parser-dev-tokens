[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Paypal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Sales",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Order",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Payment",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Transaction",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","PayflowExpress",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Paypal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Express",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$_code",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","Config",19],["T_DOUBLE_COLON","::",19],["T_STRING","METHOD_WPP_PE_EXPRESS",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_formBlockType",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Paypal",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Block",24],["T_NS_SEPARATOR","\\",24],["T_STRING","PayflowExpress",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Form",24],["T_DOUBLE_COLON","::",24],["T_CLASS","class",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Express Checkout payment method instance\n     *\n     * @var Express\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_ecInstance",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","null",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var InfoFactory\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$_paypalInfoFactory",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_canFetchTransactionInfo",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","false",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Payment Method feature\n     *\n     * @var bool\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_canReviewPayment",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","false",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Api\\ExtensionAttributesFactory $extensionFactory\n     * @param \\Magento\\Framework\\Api\\AttributeValueFactory $customAttributeFactory\n     * @param \\Magento\\Payment\\Helper\\Data $paymentData\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Payment\\Model\\Method\\Logger $logger\n     * @param ProFactory $proFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\UrlInterface $urlBuilder\n     * @param CartFactory $cartFactory\n     * @param \\Magento\\Checkout\\Model\\Session $checkoutSession\n     * @param \\Magento\\Framework\\Exception\\LocalizedExceptionFactory $exception\n     * @param \\Magento\\Sales\\Api\\TransactionRepositoryInterface $transactionRepository\n     * @param Transaction\\BuilderInterface $transactionBuilder\n     * @param InfoFactory $paypalInfoFactory\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",52],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","__construct",74],"(",["T_WHITESPACE","\n        ",74],["T_NS_SEPARATOR","\\",75],["T_STRING","Magento",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Framework",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Model",75],["T_NS_SEPARATOR","\\",75],["T_STRING","Context",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$context",75],",",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Framework",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Registry",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$registry",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Framework",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Api",77],["T_NS_SEPARATOR","\\",77],["T_STRING","ExtensionAttributesFactory",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$extensionFactory",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Framework",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Api",78],["T_NS_SEPARATOR","\\",78],["T_STRING","AttributeValueFactory",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$customAttributeFactory",78],",",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Payment",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Helper",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Data",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$paymentData",79],",",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Framework",80],["T_NS_SEPARATOR","\\",80],["T_STRING","App",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Config",80],["T_NS_SEPARATOR","\\",80],["T_STRING","ScopeConfigInterface",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$scopeConfig",80],",",["T_WHITESPACE","\n        ",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Payment",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Model",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Method",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Logger",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$logger",81],",",["T_WHITESPACE","\n        ",81],["T_STRING","ProFactory",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$proFactory",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Store",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Model",83],["T_NS_SEPARATOR","\\",83],["T_STRING","StoreManagerInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$storeManager",83],",",["T_WHITESPACE","\n        ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Framework",84],["T_NS_SEPARATOR","\\",84],["T_STRING","UrlInterface",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$urlBuilder",84],",",["T_WHITESPACE","\n        ",84],["T_STRING","CartFactory",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$cartFactory",85],",",["T_WHITESPACE","\n        ",85],["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Checkout",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Model",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Session",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$checkoutSession",86],",",["T_WHITESPACE","\n        ",86],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Framework",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Exception",87],["T_NS_SEPARATOR","\\",87],["T_STRING","LocalizedExceptionFactory",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$exception",87],",",["T_WHITESPACE","\n        ",87],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Sales",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Api",88],["T_NS_SEPARATOR","\\",88],["T_STRING","TransactionRepositoryInterface",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$transactionRepository",88],",",["T_WHITESPACE","\n        ",88],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Sales",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Model",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Order",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Payment",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Transaction",89],["T_NS_SEPARATOR","\\",89],["T_STRING","BuilderInterface",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$transactionBuilder",89],",",["T_WHITESPACE","\n        ",89],["T_STRING","InfoFactory",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$paypalInfoFactory",90],",",["T_WHITESPACE","\n        ",90],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Framework",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Model",91],["T_NS_SEPARATOR","\\",91],["T_STRING","ResourceModel",91],["T_NS_SEPARATOR","\\",91],["T_STRING","AbstractResource",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$resource",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","null",91],",",["T_WHITESPACE","\n        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Data",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Collection",92],["T_NS_SEPARATOR","\\",92],["T_STRING","AbstractDb",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$resourceCollection",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","null",92],",",["T_WHITESPACE","\n        ",92],["T_ARRAY","array",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$data",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],"[","]",["T_WHITESPACE","\n    ",93],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n        ",94],["T_STRING","parent",95],["T_DOUBLE_COLON","::",95],["T_STRING","__construct",95],"(",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$context",96],",",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$registry",97],",",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$extensionFactory",98],",",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$customAttributeFactory",99],",",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$paymentData",100],",",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$scopeConfig",101],",",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$logger",102],",",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$proFactory",103],",",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$storeManager",104],",",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$urlBuilder",105],",",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$cartFactory",106],",",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$checkoutSession",107],",",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$exception",108],",",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$transactionRepository",109],",",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$transactionBuilder",110],",",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$resource",111],",",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$resourceCollection",112],",",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$data",113],["T_WHITESPACE","\n        ",113],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_paypalInfoFactory",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$paypalInfoFactory",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * EC PE won't be available if the EC is available\n     *\n     * @param \\Magento\\Quote\\Api\\Data\\CartInterface|\\Magento\\Quote\\Model\\Quote|null $quote\n     * @return bool\n     *\/",118],["T_WHITESPACE","\n    ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","isAvailable",124],"(",["T_NS_SEPARATOR","\\",124],["T_STRING","Magento",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Quote",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Api",124],["T_NS_SEPARATOR","\\",124],["T_STRING","Data",124],["T_NS_SEPARATOR","\\",124],["T_STRING","CartInterface",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$quote",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","null",124],")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_STRING","parent",126],["T_DOUBLE_COLON","::",126],["T_STRING","isAvailable",126],"(",["T_VARIABLE","$quote",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_STRING","false",127],";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_ecInstance",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_ecInstance",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_paymentData",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getMethodInstance",130],"(",["T_WHITESPACE","\n                ",130],["T_STRING","Config",131],["T_DOUBLE_COLON","::",131],["T_STRING","METHOD_WPP_EXPRESS",131],["T_WHITESPACE","\n            ",131],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n        ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$quote",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_ecInstance",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","setStore",135],"(",["T_VARIABLE","$quote",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getStoreId",135],"(",")",")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],"!",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_ecInstance",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","isAvailable",137],"(",")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Import payment info to payment\n     *\n     * @param Api\\Nvp $api\n     * @param \\Magento\\Sales\\Model\\Order\\Payment $payment\n     * @return void\n     *\/",140],["T_WHITESPACE","\n    ",146],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","_importToPayment",147],"(",["T_VARIABLE","$api",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$payment",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$payment",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","setTransactionId",149],"(",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$api",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getPaypalTransactionId",150],"(",")",["T_WHITESPACE","\n        ",150],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","setIsTransactionClosed",151],"(",["T_WHITESPACE","\n            ",151],["T_LNUMBER","0",152],["T_WHITESPACE","\n        ",152],")",["T_OBJECT_OPERATOR","->",153],["T_STRING","setAdditionalInformation",153],"(",["T_WHITESPACE","\n            ",153],["T_STRING","Express",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Checkout",154],["T_DOUBLE_COLON","::",154],["T_STRING","PAYMENT_INFO_TRANSPORT_REDIRECT",154],",",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$api",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getRedirectRequired",155],"(",")",["T_WHITESPACE"," ",155],["T_BOOLEAN_OR","||",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$api",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getRedirectRequested",155],"(",")",["T_WHITESPACE","\n        ",155],")",["T_OBJECT_OPERATOR","->",156],["T_STRING","setIsTransactionPending",156],"(",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$api",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getIsPaymentPending",157],"(",")",["T_WHITESPACE","\n        ",157],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","setTransactionAdditionalInfo",158],"(",["T_WHITESPACE","\n            ",158],["T_STRING","Payflow",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Pro",159],["T_DOUBLE_COLON","::",159],["T_STRING","TRANSPORT_PAYFLOW_TXN_ID",159],",",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$api",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getTransactionId",160],"(",")",["T_WHITESPACE","\n        ",160],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$payment",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","setPreparedMessage",162],"(",["T_STRING","__",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Payflow PNREF: #%1.'",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$api",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getTransactionId",162],"(",")",")",")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_paypalInfoFactory",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","create",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","importToPayment",163],"(",["T_VARIABLE","$api",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$payment",163],")",";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Checkout redirect URL getter for onepage checkout (hardcode)\n     *\n     * @see \\Magento\\Checkout\\Controller\\Onepage::savePaymentAction()\n     * @see \\Magento\\Quote\\Model\\Quote\\Payment::getCheckoutRedirectUrl()\n     * @return string\n     *\/",166],["T_WHITESPACE","\n    ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","getCheckoutRedirectUrl",173],"(",")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_urlBuilder",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getUrl",175],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/payflowexpress\/start'",175],")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Check refund availability.\n     * The main factor is that the last capture transaction exists and has an Payflow\\Pro::TRANSPORT_PAYFLOW_TXN_ID in\n     * additional information(needed to perform online refund. Requirement of the Payflow gateway)\n     *\n     * @return bool\n     *\/",178],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","canRefund",185],"(",")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_DOC_COMMENT","\/** @var \\Magento\\Sales\\Model\\Order\\Payment $payment *\/",187],["T_WHITESPACE","\n        ",187],["T_VARIABLE","$payment",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getInfoInstance",188],"(",")",";",["T_WHITESPACE","\n        ",188],["T_COMMENT","\/\/ we need the last capture transaction was made\n",189],["T_WHITESPACE","        ",190],["T_VARIABLE","$captureTransaction",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","transactionRepository",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getByTransactionType",190],"(",["T_WHITESPACE","\n            ",190],["T_STRING","Transaction",191],["T_DOUBLE_COLON","::",191],["T_STRING","TYPE_CAPTURE",191],",",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$payment",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getId",192],"(",")",",",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$payment",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getOrder",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","getId",193],"(",")",["T_WHITESPACE","\n        ",193],")",";",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$captureTransaction",195],["T_WHITESPACE"," ",195],["T_BOOLEAN_AND","&&",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$captureTransaction",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getAdditionalInformation",195],"(",["T_WHITESPACE","\n            ",195],["T_STRING","Payflow",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Pro",196],["T_DOUBLE_COLON","::",196],["T_STRING","TRANSPORT_PAYFLOW_TXN_ID",196],["T_WHITESPACE","\n        ",196],")",["T_WHITESPACE"," ",197],["T_BOOLEAN_AND","&&",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_canRefund",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n",198],"}",["T_WHITESPACE","\n",199]]
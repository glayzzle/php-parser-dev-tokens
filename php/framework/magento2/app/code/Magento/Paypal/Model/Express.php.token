[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Paypal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Paypal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Nvp",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Paypal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProcessableException",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","ApiProcessableException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Paypal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Express",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Checkout",10],["T_WHITESPACE"," ",10],["T_AS","as",10],["T_WHITESPACE"," ",10],["T_STRING","ExpressCheckout",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Quote",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PaymentInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Data",12],["T_NS_SEPARATOR","\\",12],["T_STRING","OrderPaymentInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Sales",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Order",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Payment",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Sales",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Order",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Payment",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Transaction",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Quote",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Quote",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Store",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ScopeInterface",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * PayPal Express Module\n * @method \\Magento\\Quote\\Api\\Data\\PaymentMethodExtensionInterface getExtensionAttributes()\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",18],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","Express",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Magento",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Payment",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Model",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Method",24],["T_NS_SEPARATOR","\\",24],["T_STRING","AbstractMethod",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_code",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Paypal",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Model",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Config",29],["T_DOUBLE_COLON","::",29],["T_STRING","METHOD_WPP_EXPRESS",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_formBlockType",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Paypal",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Block",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Express",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Form",34],["T_DOUBLE_COLON","::",34],["T_CLASS","class",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_infoBlockType",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Paypal",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Block",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Payment",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Info",39],["T_DOUBLE_COLON","::",39],["T_CLASS","class",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_isGateway",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","false",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_canOrder",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","true",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_canAuthorize",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","true",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_canCapture",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","true",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$_canCapturePartial",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","true",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_canRefund",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","true",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_canRefundInvoicePartial",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","true",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$_canVoid",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","true",95],";",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",97],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$_canUseInternal",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","false",102],";",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",104],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$_canUseCheckout",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","true",109],";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_canFetchTransactionInfo",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","true",116],";",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$_canReviewPayment",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","true",123],";",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Website Payments Pro instance\n     *\n     * @var \\Magento\\Paypal\\Model\\Pro\n     *\/",125],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$_pro",130],";",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Payment additional information key for payment action\n     *\n     * @var string\n     *\/",132],["T_WHITESPACE","\n    ",136],["T_PROTECTED","protected",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$_isOrderPaymentActionKey",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'is_order_action'",137],";",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Payment additional information key for number of used authorizations\n     *\n     * @var string\n     *\/",139],["T_WHITESPACE","\n    ",143],["T_PROTECTED","protected",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$_authorizationCountKey",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'authorization_count'",144],";",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",146],["T_WHITESPACE","\n    ",148],["T_PROTECTED","protected",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$_storeManager",149],";",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\UrlInterface\n     *\/",151],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$_urlBuilder",154],";",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\CartFactory\n     *\/",156],["T_WHITESPACE","\n    ",158],["T_PROTECTED","protected",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$_cartFactory",159],";",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\Session\n     *\/",161],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$_checkoutSession",164],";",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Exception\\LocalizedExceptionFactory\n     *\/",166],["T_WHITESPACE","\n    ",168],["T_PROTECTED","protected",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$_exception",169],";",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Api\\TransactionRepositoryInterface\n     *\/",171],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$transactionRepository",174],";",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * @var Transaction\\BuilderInterface\n     *\/",176],["T_WHITESPACE","\n    ",178],["T_PROTECTED","protected",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$transactionBuilder",179],";",["T_WHITESPACE","\n\n    ",179],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Api\\ExtensionAttributesFactory $extensionFactory\n     * @param \\Magento\\Framework\\Api\\AttributeValueFactory $customAttributeFactory\n     * @param \\Magento\\Payment\\Helper\\Data $paymentData\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Payment\\Model\\Method\\Logger $logger\n     * @param ProFactory $proFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\UrlInterface $urlBuilder\n     * @param CartFactory $cartFactory\n     * @param \\Magento\\Checkout\\Model\\Session $checkoutSession\n     * @param \\Magento\\Framework\\Exception\\LocalizedExceptionFactory $exception\n     * @param \\Magento\\Sales\\Api\\TransactionRepositoryInterface $transactionRepository\n     * @param Transaction\\BuilderInterface $transactionBuilder\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",181],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","__construct",202],"(",["T_WHITESPACE","\n        ",202],["T_NS_SEPARATOR","\\",203],["T_STRING","Magento",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Framework",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Model",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Context",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$context",203],",",["T_WHITESPACE","\n        ",203],["T_NS_SEPARATOR","\\",204],["T_STRING","Magento",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Framework",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Registry",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$registry",204],",",["T_WHITESPACE","\n        ",204],["T_NS_SEPARATOR","\\",205],["T_STRING","Magento",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Framework",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Api",205],["T_NS_SEPARATOR","\\",205],["T_STRING","ExtensionAttributesFactory",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$extensionFactory",205],",",["T_WHITESPACE","\n        ",205],["T_NS_SEPARATOR","\\",206],["T_STRING","Magento",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Framework",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Api",206],["T_NS_SEPARATOR","\\",206],["T_STRING","AttributeValueFactory",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$customAttributeFactory",206],",",["T_WHITESPACE","\n        ",206],["T_NS_SEPARATOR","\\",207],["T_STRING","Magento",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Payment",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Helper",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Data",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$paymentData",207],",",["T_WHITESPACE","\n        ",207],["T_NS_SEPARATOR","\\",208],["T_STRING","Magento",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Framework",208],["T_NS_SEPARATOR","\\",208],["T_STRING","App",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Config",208],["T_NS_SEPARATOR","\\",208],["T_STRING","ScopeConfigInterface",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$scopeConfig",208],",",["T_WHITESPACE","\n        ",208],["T_NS_SEPARATOR","\\",209],["T_STRING","Magento",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Payment",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Model",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Method",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Logger",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$logger",209],",",["T_WHITESPACE","\n        ",209],["T_STRING","ProFactory",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$proFactory",210],",",["T_WHITESPACE","\n        ",210],["T_NS_SEPARATOR","\\",211],["T_STRING","Magento",211],["T_NS_SEPARATOR","\\",211],["T_STRING","Store",211],["T_NS_SEPARATOR","\\",211],["T_STRING","Model",211],["T_NS_SEPARATOR","\\",211],["T_STRING","StoreManagerInterface",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$storeManager",211],",",["T_WHITESPACE","\n        ",211],["T_NS_SEPARATOR","\\",212],["T_STRING","Magento",212],["T_NS_SEPARATOR","\\",212],["T_STRING","Framework",212],["T_NS_SEPARATOR","\\",212],["T_STRING","UrlInterface",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$urlBuilder",212],",",["T_WHITESPACE","\n        ",212],["T_NS_SEPARATOR","\\",213],["T_STRING","Magento",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Paypal",213],["T_NS_SEPARATOR","\\",213],["T_STRING","Model",213],["T_NS_SEPARATOR","\\",213],["T_STRING","CartFactory",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$cartFactory",213],",",["T_WHITESPACE","\n        ",213],["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Checkout",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Model",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Session",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$checkoutSession",214],",",["T_WHITESPACE","\n        ",214],["T_NS_SEPARATOR","\\",215],["T_STRING","Magento",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Framework",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Exception",215],["T_NS_SEPARATOR","\\",215],["T_STRING","LocalizedExceptionFactory",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$exception",215],",",["T_WHITESPACE","\n        ",215],["T_NS_SEPARATOR","\\",216],["T_STRING","Magento",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Sales",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Api",216],["T_NS_SEPARATOR","\\",216],["T_STRING","TransactionRepositoryInterface",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$transactionRepository",216],",",["T_WHITESPACE","\n        ",216],["T_NS_SEPARATOR","\\",217],["T_STRING","Magento",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Sales",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Model",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Order",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Payment",217],["T_NS_SEPARATOR","\\",217],["T_STRING","Transaction",217],["T_NS_SEPARATOR","\\",217],["T_STRING","BuilderInterface",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$transactionBuilder",217],",",["T_WHITESPACE","\n        ",217],["T_NS_SEPARATOR","\\",218],["T_STRING","Magento",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Framework",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Model",218],["T_NS_SEPARATOR","\\",218],["T_STRING","ResourceModel",218],["T_NS_SEPARATOR","\\",218],["T_STRING","AbstractResource",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$resource",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","null",218],",",["T_WHITESPACE","\n        ",218],["T_NS_SEPARATOR","\\",219],["T_STRING","Magento",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Framework",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Data",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Collection",219],["T_NS_SEPARATOR","\\",219],["T_STRING","AbstractDb",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$resourceCollection",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","null",219],",",["T_WHITESPACE","\n        ",219],["T_ARRAY","array",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$data",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],"[","]",["T_WHITESPACE","\n    ",220],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n        ",221],["T_STRING","parent",222],["T_DOUBLE_COLON","::",222],["T_STRING","__construct",222],"(",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$context",223],",",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$registry",224],",",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$extensionFactory",225],",",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$customAttributeFactory",226],",",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$paymentData",227],",",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$scopeConfig",228],",",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$logger",229],",",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$resource",230],",",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$resourceCollection",231],",",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$data",232],["T_WHITESPACE","\n        ",232],")",";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_storeManager",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$storeManager",234],";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_urlBuilder",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$urlBuilder",235],";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_cartFactory",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$cartFactory",236],";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_checkoutSession",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$checkoutSession",237],";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_exception",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$exception",238],";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","transactionRepository",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$transactionRepository",239],";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","transactionBuilder",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$transactionBuilder",240],";",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$proInstance",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","array_shift",242],"(",["T_VARIABLE","$data",242],")",";",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$proInstance",243],["T_WHITESPACE"," ",243],["T_BOOLEAN_AND","&&",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$proInstance",243],["T_WHITESPACE"," ",243],["T_INSTANCEOF","instanceof",243],["T_WHITESPACE"," ",243],["T_NS_SEPARATOR","\\",243],["T_STRING","Magento",243],["T_NS_SEPARATOR","\\",243],["T_STRING","Paypal",243],["T_NS_SEPARATOR","\\",243],["T_STRING","Model",243],["T_NS_SEPARATOR","\\",243],["T_STRING","Pro",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_pro",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$proInstance",244],";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE"," ",245],["T_ELSE","else",245],["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_pro",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$proFactory",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","create",246],"(",")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_pro",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","setMethod",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_code",248],")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_setApiProcessableErrors",249],"(",")",";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Set processable error codes to API model\n     *\n     * @return \\Magento\\Paypal\\Model\\Api\\Nvp\n     *\/",252],["T_WHITESPACE","\n    ",256],["T_PROTECTED","protected",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","_setApiProcessableErrors",257],"(",")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_pro",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getApi",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","setProcessableErrors",259],"(",["T_WHITESPACE","\n            ",259],"[",["T_WHITESPACE","\n                ",260],["T_STRING","ApiProcessableException",261],["T_DOUBLE_COLON","::",261],["T_STRING","API_INTERNAL_ERROR",261],",",["T_WHITESPACE","\n                ",261],["T_STRING","ApiProcessableException",262],["T_DOUBLE_COLON","::",262],["T_STRING","API_UNABLE_PROCESS_PAYMENT_ERROR_CODE",262],",",["T_WHITESPACE","\n                ",262],["T_STRING","ApiProcessableException",263],["T_DOUBLE_COLON","::",263],["T_STRING","API_DO_EXPRESS_CHECKOUT_FAIL",263],",",["T_WHITESPACE","\n                ",263],["T_STRING","ApiProcessableException",264],["T_DOUBLE_COLON","::",264],["T_STRING","API_UNABLE_TRANSACTION_COMPLETE",264],",",["T_WHITESPACE","\n                ",264],["T_STRING","ApiProcessableException",265],["T_DOUBLE_COLON","::",265],["T_STRING","API_TRANSACTION_EXPIRED",265],",",["T_WHITESPACE","\n                ",265],["T_STRING","ApiProcessableException",266],["T_DOUBLE_COLON","::",266],["T_STRING","API_MAX_PAYMENT_ATTEMPTS_EXCEEDED",266],",",["T_WHITESPACE","\n                ",266],["T_STRING","ApiProcessableException",267],["T_DOUBLE_COLON","::",267],["T_STRING","API_COUNTRY_FILTER_DECLINE",267],",",["T_WHITESPACE","\n                ",267],["T_STRING","ApiProcessableException",268],["T_DOUBLE_COLON","::",268],["T_STRING","API_MAXIMUM_AMOUNT_FILTER_DECLINE",268],",",["T_WHITESPACE","\n                ",268],["T_STRING","ApiProcessableException",269],["T_DOUBLE_COLON","::",269],["T_STRING","API_OTHER_FILTER_DECLINE",269],",",["T_WHITESPACE","\n                ",269],["T_STRING","ApiProcessableException",270],["T_DOUBLE_COLON","::",270],["T_STRING","API_ADDRESS_MATCH_FAIL",270],",",["T_WHITESPACE","\n            ",270],"]",["T_WHITESPACE","\n        ",271],")",";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Store setter\n     * Also updates store ID in config object\n     *\n     * @param \\Magento\\Store\\Model\\Store|int $store\n     * @return $this\n     *\/",275],["T_WHITESPACE","\n    ",281],["T_PUBLIC","public",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","setStore",282],"(",["T_VARIABLE","$store",282],")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","setData",284],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$store",284],")",";",["T_WHITESPACE","\n        ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_STRING","null",285],["T_WHITESPACE"," ",285],["T_IS_IDENTICAL","===",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$store",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$store",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_storeManager",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getStore",286],"(",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","getId",286],"(",")",";",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_pro",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getConfig",288],"(",")",["T_OBJECT_OPERATOR","->",288],["T_STRING","setStoreId",288],"(",["T_STRING","is_object",288],"(",["T_VARIABLE","$store",288],")",["T_WHITESPACE"," ",288],"?",["T_WHITESPACE"," ",288],["T_VARIABLE","$store",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getId",288],"(",")",["T_WHITESPACE"," ",288],":",["T_WHITESPACE"," ",288],["T_VARIABLE","$store",288],")",";",["T_WHITESPACE","\n        ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_DOC_COMMENT","\/**\n     * Can be used in regular checkout\n     *\n     * @return bool\n     *\/",292],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","canUseCheckout",297],"(",")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_scopeConfig",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","isSetFlag",299],"(",["T_WHITESPACE","\n            ",299],["T_CONSTANT_ENCAPSED_STRING","'payment\/hosted_pro\/active'",300],",",["T_WHITESPACE","\n            ",300],["T_NS_SEPARATOR","\\",301],["T_STRING","Magento",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Store",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Model",301],["T_NS_SEPARATOR","\\",301],["T_STRING","ScopeInterface",301],["T_DOUBLE_COLON","::",301],["T_STRING","SCOPE_STORE",301],["T_WHITESPACE","\n        ",301],")",["T_WHITESPACE"," ",302],["T_BOOLEAN_AND","&&",302],["T_WHITESPACE"," ",302],"!",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_scopeConfig",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","isSetFlag",302],"(",["T_WHITESPACE","\n            ",302],["T_CONSTANT_ENCAPSED_STRING","'payment\/hosted_pro\/display_ec'",303],",",["T_WHITESPACE","\n            ",303],["T_NS_SEPARATOR","\\",304],["T_STRING","Magento",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Store",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Model",304],["T_NS_SEPARATOR","\\",304],["T_STRING","ScopeInterface",304],["T_DOUBLE_COLON","::",304],["T_STRING","SCOPE_STORE",304],["T_WHITESPACE","\n        ",304],")",["T_WHITESPACE","\n        ",305],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_STRING","false",307],";",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n        ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_STRING","parent",309],["T_DOUBLE_COLON","::",309],["T_STRING","canUseCheckout",309],"(",")",";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_DOC_COMMENT","\/**\n     * Whether method is available for specified currency\n     *\n     * @param string $currencyCode\n     * @return bool\n     *\/",312],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","canUseForCurrency",318],"(",["T_VARIABLE","$currencyCode",318],")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_pro",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getConfig",320],"(",")",["T_OBJECT_OPERATOR","->",320],["T_STRING","isCurrencyCodeSupported",320],"(",["T_VARIABLE","$currencyCode",320],")",";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Payment action getter compatible with payment model\n     *\n     * @see \\Magento\\Sales\\Model\\Payment::place()\n     * @return string\n     *\/",323],["T_WHITESPACE","\n    ",328],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getConfigPaymentAction",329],"(",")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_RETURN","return",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_pro",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getConfig",331],"(",")",["T_OBJECT_OPERATOR","->",331],["T_STRING","getPaymentAction",331],"(",")",";",["T_WHITESPACE","\n    ",331],"}",["T_WHITESPACE","\n\n    ",332],["T_DOC_COMMENT","\/**\n     * Check whether payment method can be used\n     * @param \\Magento\\Quote\\Api\\Data\\CartInterface|Quote|null $quote\n     * @return bool\n     *\/",334],["T_WHITESPACE","\n    ",338],["T_PUBLIC","public",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","isAvailable",339],"(",["T_NS_SEPARATOR","\\",339],["T_STRING","Magento",339],["T_NS_SEPARATOR","\\",339],["T_STRING","Quote",339],["T_NS_SEPARATOR","\\",339],["T_STRING","Api",339],["T_NS_SEPARATOR","\\",339],["T_STRING","Data",339],["T_NS_SEPARATOR","\\",339],["T_STRING","CartInterface",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$quote",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_STRING","null",339],")",["T_WHITESPACE","\n    ",339],"{",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_STRING","parent",341],["T_DOUBLE_COLON","::",341],["T_STRING","isAvailable",341],"(",["T_VARIABLE","$quote",341],")",["T_WHITESPACE"," ",341],["T_BOOLEAN_AND","&&",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_pro",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getConfig",341],"(",")",["T_OBJECT_OPERATOR","->",341],["T_STRING","isMethodAvailable",341],"(",")",";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Custom getter for payment configuration\n     *\n     * @param string $field\n     * @param int|null $storeId\n     * @return mixed\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",344],["T_WHITESPACE","\n    ",351],["T_PUBLIC","public",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","getConfigData",352],"(",["T_VARIABLE","$field",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$storeId",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","null",352],")",["T_WHITESPACE","\n    ",352],"{",["T_WHITESPACE","\n        ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(",["T_CONSTANT_ENCAPSED_STRING","'order_place_redirect_url'",354],["T_WHITESPACE"," ",354],["T_IS_IDENTICAL","===",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$field",354],")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n            ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getOrderPlaceRedirectUrl",355],"(",")",";",["T_WHITESPACE","\n        ",355],"}",["T_WHITESPACE","\n        ",356],["T_RETURN","return",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_pro",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getConfig",357],"(",")",["T_OBJECT_OPERATOR","->",357],["T_STRING","getValue",357],"(",["T_VARIABLE","$field",357],")",";",["T_WHITESPACE","\n    ",357],"}",["T_WHITESPACE","\n\n    ",358],["T_DOC_COMMENT","\/**\n     * Order payment\n     *\n     * @param \\Magento\\Framework\\DataObject|\\Magento\\Payment\\Model\\InfoInterface|Payment $payment\n     * @param float $amount\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",360],["T_WHITESPACE","\n    ",367],["T_PUBLIC","public",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","order",368],"(",["T_NS_SEPARATOR","\\",368],["T_STRING","Magento",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Payment",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Model",368],["T_NS_SEPARATOR","\\",368],["T_STRING","InfoInterface",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$payment",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$amount",368],")",["T_WHITESPACE","\n    ",368],"{",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$paypalTransactionData",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_checkoutSession",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getPaypalTransactionData",370],"(",")",";",["T_WHITESPACE","\n        ",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(","!",["T_STRING","is_array",371],"(",["T_VARIABLE","$paypalTransactionData",371],")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_placeOrder",372],"(",["T_VARIABLE","$payment",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$amount",372],")",";",["T_WHITESPACE","\n        ",372],"}",["T_WHITESPACE"," ",373],["T_ELSE","else",373],["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_importToPayment",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_pro",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getApi",374],"(",")",["T_OBJECT_OPERATOR","->",374],["T_STRING","setData",374],"(",["T_VARIABLE","$paypalTransactionData",374],")",",",["T_WHITESPACE"," ",374],["T_VARIABLE","$payment",374],")",";",["T_WHITESPACE","\n        ",374],"}",["T_WHITESPACE","\n\n        ",375],["T_VARIABLE","$payment",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","setAdditionalInformation",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_isOrderPaymentActionKey",377],",",["T_WHITESPACE"," ",377],["T_STRING","true",377],")",";",["T_WHITESPACE","\n\n        ",377],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$payment",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getIsFraudDetected",379],"(",")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],";",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n\n        ",381],["T_VARIABLE","$order",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$payment",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getOrder",383],"(",")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$orderTransactionId",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$payment",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getTransactionId",384],"(",")",";",["T_WHITESPACE","\n\n        ",384],["T_VARIABLE","$api",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_callDoAuthorize",386],"(",["T_VARIABLE","$amount",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$payment",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$orderTransactionId",386],")",";",["T_WHITESPACE","\n\n        ",386],["T_VARIABLE","$state",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_NS_SEPARATOR","\\",388],["T_STRING","Magento",388],["T_NS_SEPARATOR","\\",388],["T_STRING","Sales",388],["T_NS_SEPARATOR","\\",388],["T_STRING","Model",388],["T_NS_SEPARATOR","\\",388],["T_STRING","Order",388],["T_DOUBLE_COLON","::",388],["T_STRING","STATE_PROCESSING",388],";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$status",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","true",389],";",["T_WHITESPACE","\n\n        ",389],["T_VARIABLE","$formattedPrice",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$order",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getBaseCurrency",391],"(",")",["T_OBJECT_OPERATOR","->",391],["T_STRING","formatTxt",391],"(",["T_VARIABLE","$amount",391],")",";",["T_WHITESPACE","\n        ",391],["T_IF","if",392],["T_WHITESPACE"," ",392],"(",["T_VARIABLE","$payment",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getIsTransactionPending",392],"(",")",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n            ",392],["T_VARIABLE","$message",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_STRING","__",393],"(",["T_CONSTANT_ENCAPSED_STRING","'The ordering amount of %1 is pending approval on the payment gateway.'",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$formattedPrice",393],")",";",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$state",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_NS_SEPARATOR","\\",394],["T_STRING","Magento",394],["T_NS_SEPARATOR","\\",394],["T_STRING","Sales",394],["T_NS_SEPARATOR","\\",394],["T_STRING","Model",394],["T_NS_SEPARATOR","\\",394],["T_STRING","Order",394],["T_DOUBLE_COLON","::",394],["T_STRING","STATE_PAYMENT_REVIEW",394],";",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE"," ",395],["T_ELSE","else",395],["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n            ",395],["T_VARIABLE","$message",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_STRING","__",396],"(",["T_CONSTANT_ENCAPSED_STRING","'Ordered amount of %1'",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$formattedPrice",396],")",";",["T_WHITESPACE","\n        ",396],"}",["T_WHITESPACE","\n\n        ",397],["T_VARIABLE","$transaction",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","transactionBuilder",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","setPayment",399],"(",["T_VARIABLE","$payment",399],")",["T_WHITESPACE","\n            ",399],["T_OBJECT_OPERATOR","->",400],["T_STRING","setOrder",400],"(",["T_VARIABLE","$order",400],")",["T_WHITESPACE","\n            ",400],["T_OBJECT_OPERATOR","->",401],["T_STRING","setTransactionId",401],"(",["T_VARIABLE","$payment",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getTransactionId",401],"(",")",")",["T_WHITESPACE","\n            ",401],["T_OBJECT_OPERATOR","->",402],["T_STRING","build",402],"(",["T_STRING","Transaction",402],["T_DOUBLE_COLON","::",402],["T_STRING","TYPE_ORDER",402],")",";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$payment",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","addTransactionCommentsToOrder",403],"(",["T_VARIABLE","$transaction",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$message",403],")",";",["T_WHITESPACE","\n\n        ",403],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_pro",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","importPaymentInfo",405],"(",["T_VARIABLE","$api",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$payment",405],")",";",["T_WHITESPACE","\n\n        ",405],["T_IF","if",407],["T_WHITESPACE"," ",407],"(",["T_VARIABLE","$payment",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","getIsTransactionPending",407],"(",")",")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n            ",407],["T_VARIABLE","$message",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_STRING","__",408],"(",["T_WHITESPACE","\n                ",408],["T_CONSTANT_ENCAPSED_STRING","'We\\'ll authorize the amount of %1 as soon as the payment gateway approves it.'",409],",",["T_WHITESPACE","\n                ",409],["T_VARIABLE","$formattedPrice",410],["T_WHITESPACE","\n            ",410],")",";",["T_WHITESPACE","\n            ",411],["T_VARIABLE","$state",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_NS_SEPARATOR","\\",412],["T_STRING","Magento",412],["T_NS_SEPARATOR","\\",412],["T_STRING","Sales",412],["T_NS_SEPARATOR","\\",412],["T_STRING","Model",412],["T_NS_SEPARATOR","\\",412],["T_STRING","Order",412],["T_DOUBLE_COLON","::",412],["T_STRING","STATE_PAYMENT_REVIEW",412],";",["T_WHITESPACE","\n            ",412],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$payment",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getIsFraudDetected",413],"(",")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n                ",413],["T_VARIABLE","$status",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Magento",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Sales",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Model",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Order",414],["T_DOUBLE_COLON","::",414],["T_STRING","STATUS_FRAUD",414],";",["T_WHITESPACE","\n            ",414],"}",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE"," ",416],["T_ELSE","else",416],["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n            ",416],["T_VARIABLE","$message",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_STRING","__",417],"(",["T_CONSTANT_ENCAPSED_STRING","'The authorized amount is %1.'",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$formattedPrice",417],")",";",["T_WHITESPACE","\n        ",417],"}",["T_WHITESPACE","\n\n        ",418],["T_VARIABLE","$payment",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","resetTransactionAdditionalInfo",420],"(",")",";",["T_WHITESPACE","\n\n        ",420],["T_VARIABLE","$payment",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","setTransactionId",422],"(",["T_VARIABLE","$api",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getTransactionId",422],"(",")",")",";",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$payment",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","setParentTransactionId",423],"(",["T_VARIABLE","$orderTransactionId",423],")",";",["T_WHITESPACE","\n\n        ",423],["T_VARIABLE","$transaction",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","transactionBuilder",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","setPayment",425],"(",["T_VARIABLE","$payment",425],")",["T_WHITESPACE","\n            ",425],["T_OBJECT_OPERATOR","->",426],["T_STRING","setOrder",426],"(",["T_VARIABLE","$order",426],")",["T_WHITESPACE","\n            ",426],["T_OBJECT_OPERATOR","->",427],["T_STRING","setTransactionId",427],"(",["T_VARIABLE","$payment",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getTransactionId",427],"(",")",")",["T_WHITESPACE","\n            ",427],["T_OBJECT_OPERATOR","->",428],["T_STRING","build",428],"(",["T_STRING","Transaction",428],["T_DOUBLE_COLON","::",428],["T_STRING","TYPE_AUTH",428],")",";",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$payment",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","addTransactionCommentsToOrder",429],"(",["T_VARIABLE","$transaction",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$message",429],")",";",["T_WHITESPACE","\n\n        ",429],["T_VARIABLE","$order",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","setState",431],"(",["T_VARIABLE","$state",431],")",["T_WHITESPACE","\n            ",431],["T_OBJECT_OPERATOR","->",432],["T_STRING","setStatus",432],"(",["T_VARIABLE","$status",432],")",";",["T_WHITESPACE","\n\n        ",432],["T_VARIABLE","$payment",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","setSkipOrderProcessing",434],"(",["T_STRING","true",434],")",";",["T_WHITESPACE","\n        ",434],["T_RETURN","return",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$this",435],";",["T_WHITESPACE","\n    ",435],"}",["T_WHITESPACE","\n\n    ",436],["T_DOC_COMMENT","\/**\n     * Authorize payment\n     *\n     * @param \\Magento\\Framework\\DataObject|\\Magento\\Payment\\Model\\InfoInterface|Payment $payment\n     * @param float $amount\n     * @return $this\n     *\/",438],["T_WHITESPACE","\n    ",444],["T_PUBLIC","public",445],["T_WHITESPACE"," ",445],["T_FUNCTION","function",445],["T_WHITESPACE"," ",445],["T_STRING","authorize",445],"(",["T_NS_SEPARATOR","\\",445],["T_STRING","Magento",445],["T_NS_SEPARATOR","\\",445],["T_STRING","Payment",445],["T_NS_SEPARATOR","\\",445],["T_STRING","Model",445],["T_NS_SEPARATOR","\\",445],["T_STRING","InfoInterface",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$payment",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$amount",445],")",["T_WHITESPACE","\n    ",445],"{",["T_WHITESPACE","\n        ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_placeOrder",447],"(",["T_VARIABLE","$payment",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$amount",447],")",";",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n\n    ",448],["T_DOC_COMMENT","\/**\n     * Void payment\n     *\n     * @param \\Magento\\Framework\\DataObject|\\Magento\\Payment\\Model\\InfoInterface|Payment $payment\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",450],["T_WHITESPACE","\n    ",456],["T_PUBLIC","public",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","void",457],"(",["T_NS_SEPARATOR","\\",457],["T_STRING","Magento",457],["T_NS_SEPARATOR","\\",457],["T_STRING","Payment",457],["T_NS_SEPARATOR","\\",457],["T_STRING","Model",457],["T_NS_SEPARATOR","\\",457],["T_STRING","InfoInterface",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$payment",457],")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_COMMENT","\/\/Switching to order transaction if needed\n",459],["T_WHITESPACE","        ",460],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_VARIABLE","$payment",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getAdditionalInformation",460],"(",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_isOrderPaymentActionKey",461],["T_WHITESPACE","\n        ",461],")",["T_WHITESPACE"," ",462],["T_BOOLEAN_AND","&&",462],["T_WHITESPACE"," ",462],"!",["T_VARIABLE","$payment",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getVoidOnlyAuthorization",462],"(",")",["T_WHITESPACE","\n        ",462],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n            ",463],["T_VARIABLE","$orderTransaction",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getOrderTransaction",464],"(",["T_VARIABLE","$payment",464],")",";",["T_WHITESPACE","\n            ",464],["T_IF","if",465],["T_WHITESPACE"," ",465],"(",["T_VARIABLE","$orderTransaction",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n                ",465],["T_VARIABLE","$payment",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","setParentTransactionId",466],"(",["T_VARIABLE","$orderTransaction",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getTxnId",466],"(",")",")",";",["T_WHITESPACE","\n                ",466],["T_VARIABLE","$payment",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","setTransactionId",467],"(",["T_VARIABLE","$orderTransaction",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getTxnId",467],"(",")",["T_WHITESPACE"," ",467],".",["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","'-void'",467],")",";",["T_WHITESPACE","\n            ",467],"}",["T_WHITESPACE","\n        ",468],"}",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","_pro",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","void",470],"(",["T_VARIABLE","$payment",470],")",";",["T_WHITESPACE","\n        ",470],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],";",["T_WHITESPACE","\n    ",471],"}",["T_WHITESPACE","\n\n    ",472],["T_DOC_COMMENT","\/**\n     * Capture payment\n     *\n     * @param \\Magento\\Framework\\DataObject|\\Magento\\Payment\\Model\\InfoInterface|Payment $payment\n     * @param float $amount\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",474],["T_WHITESPACE","\n    ",482],["T_PUBLIC","public",483],["T_WHITESPACE"," ",483],["T_FUNCTION","function",483],["T_WHITESPACE"," ",483],["T_STRING","capture",483],"(",["T_NS_SEPARATOR","\\",483],["T_STRING","Magento",483],["T_NS_SEPARATOR","\\",483],["T_STRING","Payment",483],["T_NS_SEPARATOR","\\",483],["T_STRING","Model",483],["T_NS_SEPARATOR","\\",483],["T_STRING","InfoInterface",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$payment",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$amount",483],")",["T_WHITESPACE","\n    ",483],"{",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$authorizationTransaction",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$payment",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getAuthorizationTransaction",485],"(",")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$authorizationPeriod",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_STRING","abs",486],"(",["T_STRING","intval",486],"(",["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getConfigData",486],"(",["T_CONSTANT_ENCAPSED_STRING","'authorization_honor_period'",486],")",")",")",";",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$maxAuthorizationNumber",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_STRING","abs",487],"(",["T_STRING","intval",487],"(",["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getConfigData",487],"(",["T_CONSTANT_ENCAPSED_STRING","'child_authorization_number'",487],")",")",")",";",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$order",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_VARIABLE","$payment",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getOrder",488],"(",")",";",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$isAuthorizationCreated",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_STRING","false",489],";",["T_WHITESPACE","\n\n        ",489],["T_IF","if",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$payment",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","getAdditionalInformation",491],"(",["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","_isOrderPaymentActionKey",491],")",")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n            ",491],["T_VARIABLE","$voided",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_STRING","false",492],";",["T_WHITESPACE","\n            ",492],["T_IF","if",493],["T_WHITESPACE"," ",493],"(","!",["T_VARIABLE","$authorizationTransaction",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getIsClosed",493],"(",")",["T_WHITESPACE"," ",493],["T_BOOLEAN_AND","&&",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_isTransactionExpired",493],"(",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$authorizationTransaction",494],",",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$authorizationPeriod",495],["T_WHITESPACE","\n            ",495],")",["T_WHITESPACE","\n            ",496],")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n                ",497],["T_COMMENT","\/\/Save payment state and configure payment object for voiding\n",498],["T_WHITESPACE","                ",499],["T_VARIABLE","$isCaptureFinal",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$payment",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getShouldCloseParentTransaction",499],"(",")",";",["T_WHITESPACE","\n                ",499],["T_VARIABLE","$payment",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","setShouldCloseParentTransaction",500],"(",["T_STRING","false",500],")",";",["T_WHITESPACE","\n                ",500],["T_VARIABLE","$payment",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","setParentTransactionId",501],"(",["T_VARIABLE","$authorizationTransaction",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getTxnId",501],"(",")",")",";",["T_WHITESPACE","\n                ",501],["T_VARIABLE","$payment",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","unsTransactionId",502],"(",")",";",["T_WHITESPACE","\n                ",502],["T_VARIABLE","$payment",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","setVoidOnlyAuthorization",503],"(",["T_STRING","true",503],")",";",["T_WHITESPACE","\n                ",503],["T_VARIABLE","$payment",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","void",504],"(",["T_NEW","new",504],["T_WHITESPACE"," ",504],["T_NS_SEPARATOR","\\",504],["T_STRING","Magento",504],["T_NS_SEPARATOR","\\",504],["T_STRING","Framework",504],["T_NS_SEPARATOR","\\",504],["T_STRING","DataObject",504],"(",")",")",";",["T_WHITESPACE","\n\n                ",504],["T_COMMENT","\/\/Revert payment state after voiding\n",506],["T_WHITESPACE","                ",507],["T_VARIABLE","$payment",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","unsAuthorizationTransaction",507],"(",")",";",["T_WHITESPACE","\n                ",507],["T_VARIABLE","$payment",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","unsTransactionId",508],"(",")",";",["T_WHITESPACE","\n                ",508],["T_VARIABLE","$payment",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","setShouldCloseParentTransaction",509],"(",["T_VARIABLE","$isCaptureFinal",509],")",";",["T_WHITESPACE","\n                ",509],["T_VARIABLE","$voided",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_STRING","true",510],";",["T_WHITESPACE","\n            ",510],"}",["T_WHITESPACE","\n\n            ",511],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_VARIABLE","$authorizationTransaction",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getIsClosed",513],"(",")",["T_WHITESPACE"," ",513],["T_BOOLEAN_OR","||",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$voided",513],")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n                ",513],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$payment",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getAdditionalInformation",514],"(",["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","_authorizationCountKey",514],")",["T_WHITESPACE"," ",514],">",["T_WHITESPACE"," ",514],["T_VARIABLE","$maxAuthorizationNumber",514],["T_WHITESPACE"," ",514],"-",["T_WHITESPACE"," ",514],["T_LNUMBER","1",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n                    ",514],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_exception",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","create",515],"(",["T_WHITESPACE","\n                        ",515],"[",["T_CONSTANT_ENCAPSED_STRING","'phrase'",516],["T_WHITESPACE"," ",516],["T_DOUBLE_ARROW","=>",516],["T_WHITESPACE"," ",516],["T_STRING","__",516],"(",["T_CONSTANT_ENCAPSED_STRING","'The maximum number of child authorizations is reached.'",516],")","]",["T_WHITESPACE","\n                    ",516],")",";",["T_WHITESPACE","\n                ",517],"}",["T_WHITESPACE","\n                ",518],["T_VARIABLE","$api",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","_callDoAuthorize",519],"(",["T_VARIABLE","$amount",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$payment",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$authorizationTransaction",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","getParentTxnId",519],"(",")",")",";",["T_WHITESPACE","\n\n                ",519],["T_COMMENT","\/\/Adding authorization transaction\n",521],["T_WHITESPACE","                ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_pro",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","importPaymentInfo",522],"(",["T_VARIABLE","$api",522],",",["T_WHITESPACE"," ",522],["T_VARIABLE","$payment",522],")",";",["T_WHITESPACE","\n                ",522],["T_VARIABLE","$payment",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","setTransactionId",523],"(",["T_VARIABLE","$api",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getTransactionId",523],"(",")",")",";",["T_WHITESPACE","\n                ",523],["T_VARIABLE","$payment",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","setParentTransactionId",524],"(",["T_VARIABLE","$authorizationTransaction",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","getParentTxnId",524],"(",")",")",";",["T_WHITESPACE","\n                ",524],["T_VARIABLE","$payment",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","setIsTransactionClosed",525],"(",["T_STRING","false",525],")",";",["T_WHITESPACE","\n\n                ",525],["T_VARIABLE","$formatedPrice",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$order",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getBaseCurrency",527],"(",")",["T_OBJECT_OPERATOR","->",527],["T_STRING","formatTxt",527],"(",["T_VARIABLE","$amount",527],")",";",["T_WHITESPACE","\n\n                ",527],["T_IF","if",529],["T_WHITESPACE"," ",529],"(",["T_VARIABLE","$payment",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","getIsTransactionPending",529],"(",")",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n                    ",529],["T_VARIABLE","$message",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_STRING","__",530],"(",["T_WHITESPACE","\n                        ",530],["T_CONSTANT_ENCAPSED_STRING","'We\\'ll authorize the amount of %1 as soon as the payment gateway approves it.'",531],",",["T_WHITESPACE","\n                        ",531],["T_VARIABLE","$formatedPrice",532],["T_WHITESPACE","\n                    ",532],")",";",["T_WHITESPACE","\n                ",533],"}",["T_WHITESPACE"," ",534],["T_ELSE","else",534],["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n                    ",534],["T_VARIABLE","$message",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_STRING","__",535],"(",["T_CONSTANT_ENCAPSED_STRING","'The authorized amount is %1.'",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$formatedPrice",535],")",";",["T_WHITESPACE","\n                ",535],"}",["T_WHITESPACE","\n\n                ",536],["T_VARIABLE","$transaction",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","transactionBuilder",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","setPayment",538],"(",["T_VARIABLE","$payment",538],")",["T_WHITESPACE","\n                    ",538],["T_OBJECT_OPERATOR","->",539],["T_STRING","setOrder",539],"(",["T_VARIABLE","$order",539],")",["T_WHITESPACE","\n                    ",539],["T_OBJECT_OPERATOR","->",540],["T_STRING","setTransactionId",540],"(",["T_VARIABLE","$payment",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getTransactionId",540],"(",")",")",["T_WHITESPACE","\n                    ",540],["T_OBJECT_OPERATOR","->",541],["T_STRING","setFailSafe",541],"(",["T_STRING","true",541],")",["T_WHITESPACE","\n                    ",541],["T_OBJECT_OPERATOR","->",542],["T_STRING","build",542],"(",["T_STRING","Transaction",542],["T_DOUBLE_COLON","::",542],["T_STRING","TYPE_AUTH",542],")",";",["T_WHITESPACE","\n                ",542],["T_VARIABLE","$payment",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","addTransactionCommentsToOrder",543],"(",["T_VARIABLE","$transaction",543],",",["T_WHITESPACE"," ",543],["T_VARIABLE","$message",543],")",";",["T_WHITESPACE","\n\n                ",543],["T_VARIABLE","$payment",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","setParentTransactionId",545],"(",["T_VARIABLE","$api",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","getTransactionId",545],"(",")",")",";",["T_WHITESPACE","\n                ",545],["T_VARIABLE","$isAuthorizationCreated",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_STRING","true",546],";",["T_WHITESPACE","\n            ",546],"}",["T_WHITESPACE","\n            ",547],["T_COMMENT","\/\/close order transaction if needed\n",548],["T_WHITESPACE","            ",549],["T_IF","if",549],["T_WHITESPACE"," ",549],"(",["T_VARIABLE","$payment",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getShouldCloseParentTransaction",549],"(",")",")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n                ",549],["T_VARIABLE","$orderTransaction",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getOrderTransaction",550],"(",["T_VARIABLE","$payment",550],")",";",["T_WHITESPACE","\n\n                ",550],["T_IF","if",552],["T_WHITESPACE"," ",552],"(",["T_VARIABLE","$orderTransaction",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n                    ",552],["T_VARIABLE","$orderTransaction",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","setIsClosed",553],"(",["T_STRING","true",553],")",";",["T_WHITESPACE","\n                    ",553],["T_VARIABLE","$order",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","addRelatedObject",554],"(",["T_VARIABLE","$orderTransaction",554],")",";",["T_WHITESPACE","\n                ",554],"}",["T_WHITESPACE","\n            ",555],"}",["T_WHITESPACE","\n        ",556],"}",["T_WHITESPACE","\n\n        ",557],["T_IF","if",559],["T_WHITESPACE"," ",559],"(",["T_STRING","false",559],["T_WHITESPACE"," ",559],["T_IS_IDENTICAL","===",559],["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_pro",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","capture",559],"(",["T_VARIABLE","$payment",559],",",["T_WHITESPACE"," ",559],["T_VARIABLE","$amount",559],")",")",["T_WHITESPACE"," ",559],"{",["T_WHITESPACE","\n            ",559],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","_placeOrder",560],"(",["T_VARIABLE","$payment",560],",",["T_WHITESPACE"," ",560],["T_VARIABLE","$amount",560],")",";",["T_WHITESPACE","\n        ",560],"}",["T_WHITESPACE","\n\n        ",561],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_VARIABLE","$isAuthorizationCreated",563],["T_WHITESPACE"," ",563],["T_BOOLEAN_AND","&&",563],["T_WHITESPACE"," ",563],["T_ISSET","isset",563],"(",["T_VARIABLE","$transaction",563],")",")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n            ",563],["T_VARIABLE","$transaction",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","setIsClosed",564],"(",["T_STRING","true",564],")",";",["T_WHITESPACE","\n        ",564],"}",["T_WHITESPACE","\n\n        ",565],["T_RETURN","return",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$this",567],";",["T_WHITESPACE","\n    ",567],"}",["T_WHITESPACE","\n\n    ",568],["T_DOC_COMMENT","\/**\n     * Refund capture\n     *\n     * @param \\Magento\\Framework\\DataObject|\\Magento\\Payment\\Model\\InfoInterface|Payment $payment\n     * @param float $amount\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",570],["T_WHITESPACE","\n    ",577],["T_PUBLIC","public",578],["T_WHITESPACE"," ",578],["T_FUNCTION","function",578],["T_WHITESPACE"," ",578],["T_STRING","refund",578],"(",["T_NS_SEPARATOR","\\",578],["T_STRING","Magento",578],["T_NS_SEPARATOR","\\",578],["T_STRING","Payment",578],["T_NS_SEPARATOR","\\",578],["T_STRING","Model",578],["T_NS_SEPARATOR","\\",578],["T_STRING","InfoInterface",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$payment",578],",",["T_WHITESPACE"," ",578],["T_VARIABLE","$amount",578],")",["T_WHITESPACE","\n    ",578],"{",["T_WHITESPACE","\n        ",579],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","_pro",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","refund",580],"(",["T_VARIABLE","$payment",580],",",["T_WHITESPACE"," ",580],["T_VARIABLE","$amount",580],")",";",["T_WHITESPACE","\n        ",580],["T_RETURN","return",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$this",581],";",["T_WHITESPACE","\n    ",581],"}",["T_WHITESPACE","\n\n    ",582],["T_DOC_COMMENT","\/**\n     * Cancel payment\n     *\n     * @param \\Magento\\Framework\\DataObject|\\Magento\\Payment\\Model\\InfoInterface|Payment $payment\n     * @return $this\n     *\/",584],["T_WHITESPACE","\n    ",589],["T_PUBLIC","public",590],["T_WHITESPACE"," ",590],["T_FUNCTION","function",590],["T_WHITESPACE"," ",590],["T_STRING","cancel",590],"(",["T_NS_SEPARATOR","\\",590],["T_STRING","Magento",590],["T_NS_SEPARATOR","\\",590],["T_STRING","Payment",590],["T_NS_SEPARATOR","\\",590],["T_STRING","Model",590],["T_NS_SEPARATOR","\\",590],["T_STRING","InfoInterface",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$payment",590],")",["T_WHITESPACE","\n    ",590],"{",["T_WHITESPACE","\n        ",591],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","void",592],"(",["T_VARIABLE","$payment",592],")",";",["T_WHITESPACE","\n\n        ",592],["T_RETURN","return",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$this",594],";",["T_WHITESPACE","\n    ",594],"}",["T_WHITESPACE","\n\n    ",595],["T_DOC_COMMENT","\/**\n     * Whether payment can be reviewed\n     * @return bool\n     *\/",597],["T_WHITESPACE","\n    ",600],["T_PUBLIC","public",601],["T_WHITESPACE"," ",601],["T_FUNCTION","function",601],["T_WHITESPACE"," ",601],["T_STRING","canReviewPayment",601],"(",")",["T_WHITESPACE","\n    ",601],"{",["T_WHITESPACE","\n        ",602],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_STRING","parent",603],["T_DOUBLE_COLON","::",603],["T_STRING","canReviewPayment",603],"(",")",["T_WHITESPACE"," ",603],["T_BOOLEAN_AND","&&",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","_pro",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","canReviewPayment",603],"(",["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","getInfoInstance",603],"(",")",")",";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * Attempt to accept a pending payment\n     *\n     * @param \\Magento\\Payment\\Model\\Info|Payment $payment\n     * @return bool\n     *\/",606],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","acceptPayment",612],"(",["T_NS_SEPARATOR","\\",612],["T_STRING","Magento",612],["T_NS_SEPARATOR","\\",612],["T_STRING","Payment",612],["T_NS_SEPARATOR","\\",612],["T_STRING","Model",612],["T_NS_SEPARATOR","\\",612],["T_STRING","InfoInterface",612],["T_WHITESPACE"," ",612],["T_VARIABLE","$payment",612],")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_STRING","parent",614],["T_DOUBLE_COLON","::",614],["T_STRING","acceptPayment",614],"(",["T_VARIABLE","$payment",614],")",";",["T_WHITESPACE","\n        ",614],["T_RETURN","return",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","_pro",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","reviewPayment",615],"(",["T_VARIABLE","$payment",615],",",["T_WHITESPACE"," ",615],["T_NS_SEPARATOR","\\",615],["T_STRING","Magento",615],["T_NS_SEPARATOR","\\",615],["T_STRING","Paypal",615],["T_NS_SEPARATOR","\\",615],["T_STRING","Model",615],["T_NS_SEPARATOR","\\",615],["T_STRING","Pro",615],["T_DOUBLE_COLON","::",615],["T_STRING","PAYMENT_REVIEW_ACCEPT",615],")",";",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n\n    ",616],["T_DOC_COMMENT","\/**\n     * Attempt to deny a pending payment\n     *\n     * @param \\Magento\\Payment\\Model\\InfoInterface|Payment $payment\n     * @return bool\n     *\/",618],["T_WHITESPACE","\n    ",623],["T_PUBLIC","public",624],["T_WHITESPACE"," ",624],["T_FUNCTION","function",624],["T_WHITESPACE"," ",624],["T_STRING","denyPayment",624],"(",["T_NS_SEPARATOR","\\",624],["T_STRING","Magento",624],["T_NS_SEPARATOR","\\",624],["T_STRING","Payment",624],["T_NS_SEPARATOR","\\",624],["T_STRING","Model",624],["T_NS_SEPARATOR","\\",624],["T_STRING","InfoInterface",624],["T_WHITESPACE"," ",624],["T_VARIABLE","$payment",624],")",["T_WHITESPACE","\n    ",624],"{",["T_WHITESPACE","\n        ",625],["T_STRING","parent",626],["T_DOUBLE_COLON","::",626],["T_STRING","denyPayment",626],"(",["T_VARIABLE","$payment",626],")",";",["T_WHITESPACE","\n        ",626],["T_RETURN","return",627],["T_WHITESPACE"," ",627],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","_pro",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","reviewPayment",627],"(",["T_VARIABLE","$payment",627],",",["T_WHITESPACE"," ",627],["T_NS_SEPARATOR","\\",627],["T_STRING","Magento",627],["T_NS_SEPARATOR","\\",627],["T_STRING","Paypal",627],["T_NS_SEPARATOR","\\",627],["T_STRING","Model",627],["T_NS_SEPARATOR","\\",627],["T_STRING","Pro",627],["T_DOUBLE_COLON","::",627],["T_STRING","PAYMENT_REVIEW_DENY",627],")",";",["T_WHITESPACE","\n    ",627],"}",["T_WHITESPACE","\n\n    ",628],["T_DOC_COMMENT","\/**\n     * Checkout redirect URL getter for onepage checkout (hardcode)\n     *\n     * @see \\Magento\\Checkout\\Controller\\Onepage::savePaymentAction()\n     * @see Quote\\Payment::getCheckoutRedirectUrl()\n     * @return string\n     *\/",630],["T_WHITESPACE","\n    ",636],["T_PUBLIC","public",637],["T_WHITESPACE"," ",637],["T_FUNCTION","function",637],["T_WHITESPACE"," ",637],["T_STRING","getCheckoutRedirectUrl",637],"(",")",["T_WHITESPACE","\n    ",637],"{",["T_WHITESPACE","\n        ",638],["T_RETURN","return",639],["T_WHITESPACE"," ",639],["T_VARIABLE","$this",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","_urlBuilder",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","getUrl",639],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/express\/start'",639],")",";",["T_WHITESPACE","\n    ",639],"}",["T_WHITESPACE","\n\n    ",640],["T_DOC_COMMENT","\/**\n     * Fetch transaction details info\n     *\n     * @param \\Magento\\Payment\\Model\\InfoInterface $payment\n     * @param string $transactionId\n     * @return array\n     *\/",642],["T_WHITESPACE","\n    ",648],["T_PUBLIC","public",649],["T_WHITESPACE"," ",649],["T_FUNCTION","function",649],["T_WHITESPACE"," ",649],["T_STRING","fetchTransactionInfo",649],"(",["T_NS_SEPARATOR","\\",649],["T_STRING","Magento",649],["T_NS_SEPARATOR","\\",649],["T_STRING","Payment",649],["T_NS_SEPARATOR","\\",649],["T_STRING","Model",649],["T_NS_SEPARATOR","\\",649],["T_STRING","InfoInterface",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$payment",649],",",["T_WHITESPACE"," ",649],["T_VARIABLE","$transactionId",649],")",["T_WHITESPACE","\n    ",649],"{",["T_WHITESPACE","\n        ",650],["T_RETURN","return",651],["T_WHITESPACE"," ",651],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","_pro",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","fetchTransactionInfo",651],"(",["T_VARIABLE","$payment",651],",",["T_WHITESPACE"," ",651],["T_VARIABLE","$transactionId",651],")",";",["T_WHITESPACE","\n    ",651],"}",["T_WHITESPACE","\n\n    ",652],["T_DOC_COMMENT","\/**\n     * @return Api\\Nvp\n     *\/",654],["T_WHITESPACE","\n    ",656],["T_PUBLIC","public",657],["T_WHITESPACE"," ",657],["T_FUNCTION","function",657],["T_WHITESPACE"," ",657],["T_STRING","getApi",657],"(",")",["T_WHITESPACE","\n    ",657],"{",["T_WHITESPACE","\n        ",658],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","_pro",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","getApi",659],"(",")",";",["T_WHITESPACE","\n    ",659],"}",["T_WHITESPACE","\n\n    ",660],["T_DOC_COMMENT","\/**\n     * Assign data to info model instance\n     *\n     * @param array|\\Magento\\Framework\\DataObject $data\n     * @return \\Magento\\Payment\\Model\\Info\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",662],["T_WHITESPACE","\n    ",668],["T_PUBLIC","public",669],["T_WHITESPACE"," ",669],["T_FUNCTION","function",669],["T_WHITESPACE"," ",669],["T_STRING","assignData",669],"(",["T_NS_SEPARATOR","\\",669],["T_STRING","Magento",669],["T_NS_SEPARATOR","\\",669],["T_STRING","Framework",669],["T_NS_SEPARATOR","\\",669],["T_STRING","DataObject",669],["T_WHITESPACE"," ",669],["T_VARIABLE","$data",669],")",["T_WHITESPACE","\n    ",669],"{",["T_WHITESPACE","\n        ",670],["T_STRING","parent",671],["T_DOUBLE_COLON","::",671],["T_STRING","assignData",671],"(",["T_VARIABLE","$data",671],")",";",["T_WHITESPACE","\n        \n        ",671],["T_VARIABLE","$additionalData",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$data",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","getData",673],"(",["T_STRING","PaymentInterface",673],["T_DOUBLE_COLON","::",673],["T_STRING","KEY_ADDITIONAL_DATA",673],")",";",["T_WHITESPACE","\n\n        ",673],["T_IF","if",675],["T_WHITESPACE"," ",675],"(","!",["T_STRING","is_array",675],"(",["T_VARIABLE","$additionalData",675],")",")",["T_WHITESPACE"," ",675],"{",["T_WHITESPACE","\n            ",675],["T_RETURN","return",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$this",676],";",["T_WHITESPACE","\n        ",676],"}",["T_WHITESPACE","\n\n        ",677],["T_FOREACH","foreach",679],["T_WHITESPACE"," ",679],"(",["T_VARIABLE","$additionalData",679],["T_WHITESPACE"," ",679],["T_AS","as",679],["T_WHITESPACE"," ",679],["T_VARIABLE","$key",679],["T_WHITESPACE"," ",679],["T_DOUBLE_ARROW","=>",679],["T_WHITESPACE"," ",679],["T_VARIABLE","$value",679],")",["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n            ",679],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","getInfoInstance",680],"(",")",["T_OBJECT_OPERATOR","->",680],["T_STRING","setAdditionalInformation",680],"(",["T_VARIABLE","$key",680],",",["T_WHITESPACE"," ",680],["T_VARIABLE","$value",680],")",";",["T_WHITESPACE","\n        ",680],"}",["T_WHITESPACE","\n        ",681],["T_RETURN","return",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$this",682],";",["T_WHITESPACE","\n    ",682],"}",["T_WHITESPACE","\n\n    ",683],["T_DOC_COMMENT","\/**\n     * Place an order with authorization or capture action\n     *\n     * @param Payment $payment\n     * @param float $amount\n     * @return $this\n     *\/",685],["T_WHITESPACE","\n    ",691],["T_PROTECTED","protected",692],["T_WHITESPACE"," ",692],["T_FUNCTION","function",692],["T_WHITESPACE"," ",692],["T_STRING","_placeOrder",692],"(",["T_STRING","Payment",692],["T_WHITESPACE"," ",692],["T_VARIABLE","$payment",692],",",["T_WHITESPACE"," ",692],["T_VARIABLE","$amount",692],")",["T_WHITESPACE","\n    ",692],"{",["T_WHITESPACE","\n        ",693],["T_VARIABLE","$order",694],["T_WHITESPACE"," ",694],"=",["T_WHITESPACE"," ",694],["T_VARIABLE","$payment",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","getOrder",694],"(",")",";",["T_WHITESPACE","\n\n        ",694],["T_COMMENT","\/\/ prepare api call\n",696],["T_WHITESPACE","        ",697],["T_VARIABLE","$token",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_VARIABLE","$payment",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","getAdditionalInformation",697],"(",["T_STRING","ExpressCheckout",697],["T_DOUBLE_COLON","::",697],["T_STRING","PAYMENT_INFO_TRANSPORT_TOKEN",697],")",";",["T_WHITESPACE","\n\n        ",697],["T_VARIABLE","$cart",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","_cartFactory",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","create",699],"(","[",["T_CONSTANT_ENCAPSED_STRING","'salesModel'",699],["T_WHITESPACE"," ",699],["T_DOUBLE_ARROW","=>",699],["T_WHITESPACE"," ",699],["T_VARIABLE","$order",699],"]",")",";",["T_WHITESPACE","\n\n        ",699],["T_VARIABLE","$api",701],["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","getApi",701],"(",")",["T_OBJECT_OPERATOR","->",701],["T_STRING","setToken",701],"(",["T_WHITESPACE","\n            ",701],["T_VARIABLE","$token",702],["T_WHITESPACE","\n        ",702],")",["T_OBJECT_OPERATOR","->",703],["T_STRING","setPayerId",703],"(",["T_WHITESPACE","\n            ",703],["T_VARIABLE","$payment",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","getAdditionalInformation",704],"(",["T_STRING","ExpressCheckout",704],["T_DOUBLE_COLON","::",704],["T_STRING","PAYMENT_INFO_TRANSPORT_PAYER_ID",704],")",["T_WHITESPACE","\n        ",704],")",["T_OBJECT_OPERATOR","->",705],["T_STRING","setAmount",705],"(",["T_WHITESPACE","\n            ",705],["T_VARIABLE","$amount",706],["T_WHITESPACE","\n        ",706],")",["T_OBJECT_OPERATOR","->",707],["T_STRING","setPaymentAction",707],"(",["T_WHITESPACE","\n            ",707],["T_VARIABLE","$this",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","_pro",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","getConfig",708],"(",")",["T_OBJECT_OPERATOR","->",708],["T_STRING","getValue",708],"(",["T_CONSTANT_ENCAPSED_STRING","'paymentAction'",708],")",["T_WHITESPACE","\n        ",708],")",["T_OBJECT_OPERATOR","->",709],["T_STRING","setNotifyUrl",709],"(",["T_WHITESPACE","\n            ",709],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","_urlBuilder",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","getUrl",710],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/ipn\/'",710],")",["T_WHITESPACE","\n        ",710],")",["T_OBJECT_OPERATOR","->",711],["T_STRING","setInvNum",711],"(",["T_WHITESPACE","\n            ",711],["T_VARIABLE","$order",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","getIncrementId",712],"(",")",["T_WHITESPACE","\n        ",712],")",["T_OBJECT_OPERATOR","->",713],["T_STRING","setCurrencyCode",713],"(",["T_WHITESPACE","\n            ",713],["T_VARIABLE","$order",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","getBaseCurrencyCode",714],"(",")",["T_WHITESPACE","\n        ",714],")",["T_OBJECT_OPERATOR","->",715],["T_STRING","setPaypalCart",715],"(",["T_WHITESPACE","\n            ",715],["T_VARIABLE","$cart",716],["T_WHITESPACE","\n        ",716],")",["T_OBJECT_OPERATOR","->",717],["T_STRING","setIsLineItemsEnabled",717],"(",["T_WHITESPACE","\n            ",717],["T_VARIABLE","$this",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","_pro",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","getConfig",718],"(",")",["T_OBJECT_OPERATOR","->",718],["T_STRING","getValue",718],"(",["T_CONSTANT_ENCAPSED_STRING","'lineItemsEnabled'",718],")",["T_WHITESPACE","\n        ",718],")",";",["T_WHITESPACE","\n        ",719],["T_IF","if",720],["T_WHITESPACE"," ",720],"(",["T_VARIABLE","$order",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","getIsVirtual",720],"(",")",")",["T_WHITESPACE"," ",720],"{",["T_WHITESPACE","\n            ",720],["T_VARIABLE","$api",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","setAddress",721],"(",["T_VARIABLE","$order",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","getBillingAddress",721],"(",")",")",["T_OBJECT_OPERATOR","->",721],["T_STRING","setSuppressShipping",721],"(",["T_STRING","true",721],")",";",["T_WHITESPACE","\n        ",721],"}",["T_WHITESPACE"," ",722],["T_ELSE","else",722],["T_WHITESPACE"," ",722],"{",["T_WHITESPACE","\n            ",722],["T_VARIABLE","$api",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","setAddress",723],"(",["T_VARIABLE","$order",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","getShippingAddress",723],"(",")",")",";",["T_WHITESPACE","\n            ",723],["T_VARIABLE","$api",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","setBillingAddress",724],"(",["T_VARIABLE","$order",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","getBillingAddress",724],"(",")",")",";",["T_WHITESPACE","\n        ",724],"}",["T_WHITESPACE","\n\n        ",725],["T_COMMENT","\/\/ call api and get details from it\n",727],["T_WHITESPACE","        ",728],["T_VARIABLE","$api",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","callDoExpressCheckoutPayment",728],"(",")",";",["T_WHITESPACE","\n\n        ",728],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_importToPayment",730],"(",["T_VARIABLE","$api",730],",",["T_WHITESPACE"," ",730],["T_VARIABLE","$payment",730],")",";",["T_WHITESPACE","\n        ",730],["T_RETURN","return",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$this",731],";",["T_WHITESPACE","\n    ",731],"}",["T_WHITESPACE","\n\n    ",732],["T_DOC_COMMENT","\/**\n     * Import payment info to payment\n     *\n     * @param Nvp $api\n     * @param Payment $payment\n     * @return void\n     *\/",734],["T_WHITESPACE","\n    ",740],["T_PROTECTED","protected",741],["T_WHITESPACE"," ",741],["T_FUNCTION","function",741],["T_WHITESPACE"," ",741],["T_STRING","_importToPayment",741],"(",["T_VARIABLE","$api",741],",",["T_WHITESPACE"," ",741],["T_VARIABLE","$payment",741],")",["T_WHITESPACE","\n    ",741],"{",["T_WHITESPACE","\n        ",742],["T_VARIABLE","$payment",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","setTransactionId",743],"(",["T_WHITESPACE","\n            ",743],["T_VARIABLE","$api",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","getTransactionId",744],"(",")",["T_WHITESPACE","\n        ",744],")",["T_OBJECT_OPERATOR","->",745],["T_STRING","setIsTransactionClosed",745],"(",["T_WHITESPACE","\n            ",745],["T_LNUMBER","0",746],["T_WHITESPACE","\n        ",746],")",["T_OBJECT_OPERATOR","->",747],["T_STRING","setAdditionalInformation",747],"(",["T_WHITESPACE","\n            ",747],["T_STRING","ExpressCheckout",748],["T_DOUBLE_COLON","::",748],["T_STRING","PAYMENT_INFO_TRANSPORT_REDIRECT",748],",",["T_WHITESPACE","\n            ",748],["T_VARIABLE","$api",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","getRedirectRequired",749],"(",")",["T_WHITESPACE","\n        ",749],")",";",["T_WHITESPACE","\n\n        ",750],["T_IF","if",752],["T_WHITESPACE"," ",752],"(",["T_VARIABLE","$api",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","getBillingAgreementId",752],"(",")",")",["T_WHITESPACE"," ",752],"{",["T_WHITESPACE","\n            ",752],["T_VARIABLE","$payment",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","setBillingAgreementData",753],"(",["T_WHITESPACE","\n                ",753],"[",["T_WHITESPACE","\n                    ",754],["T_CONSTANT_ENCAPSED_STRING","'billing_agreement_id'",755],["T_WHITESPACE"," ",755],["T_DOUBLE_ARROW","=>",755],["T_WHITESPACE"," ",755],["T_VARIABLE","$api",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","getBillingAgreementId",755],"(",")",",",["T_WHITESPACE","\n                    ",755],["T_CONSTANT_ENCAPSED_STRING","'method_code'",756],["T_WHITESPACE"," ",756],["T_DOUBLE_ARROW","=>",756],["T_WHITESPACE"," ",756],["T_NS_SEPARATOR","\\",756],["T_STRING","Magento",756],["T_NS_SEPARATOR","\\",756],["T_STRING","Paypal",756],["T_NS_SEPARATOR","\\",756],["T_STRING","Model",756],["T_NS_SEPARATOR","\\",756],["T_STRING","Config",756],["T_DOUBLE_COLON","::",756],["T_STRING","METHOD_BILLING_AGREEMENT",756],",",["T_WHITESPACE","\n                ",756],"]",["T_WHITESPACE","\n            ",757],")",";",["T_WHITESPACE","\n        ",758],"}",["T_WHITESPACE","\n\n        ",759],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","_pro",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","importPaymentInfo",761],"(",["T_VARIABLE","$api",761],",",["T_WHITESPACE"," ",761],["T_VARIABLE","$payment",761],")",";",["T_WHITESPACE","\n    ",761],"}",["T_WHITESPACE","\n\n    ",762],["T_DOC_COMMENT","\/**\n     * Check void availability\n     * @return bool\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @internal param \\Magento\\Framework\\DataObject $payment\n     *\/",764],["T_WHITESPACE","\n    ",769],["T_PUBLIC","public",770],["T_WHITESPACE"," ",770],["T_FUNCTION","function",770],["T_WHITESPACE"," ",770],["T_STRING","canVoid",770],"(",")",["T_WHITESPACE","\n    ",770],"{",["T_WHITESPACE","\n        ",771],["T_VARIABLE","$info",772],["T_WHITESPACE"," ",772],"=",["T_WHITESPACE"," ",772],["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","getInfoInstance",772],"(",")",";",["T_WHITESPACE","\n        ",772],["T_IF","if",773],["T_WHITESPACE"," ",773],"(",["T_VARIABLE","$info",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","getAdditionalInformation",773],"(",["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","_isOrderPaymentActionKey",773],")",")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n            ",773],["T_VARIABLE","$orderTransaction",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getOrderTransaction",774],"(",["T_VARIABLE","$info",774],")",";",["T_WHITESPACE","\n            ",774],["T_IF","if",775],["T_WHITESPACE"," ",775],"(",["T_VARIABLE","$orderTransaction",775],")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n                ",775],["T_VARIABLE","$info",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","setParentTransactionId",776],"(",["T_VARIABLE","$orderTransaction",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","getTxnId",776],"(",")",")",";",["T_WHITESPACE","\n            ",776],"}",["T_WHITESPACE","\n        ",777],"}",["T_WHITESPACE","\n\n        ",778],["T_RETURN","return",780],["T_WHITESPACE"," ",780],["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","_canVoid",780],";",["T_WHITESPACE","\n    ",780],"}",["T_WHITESPACE","\n\n    ",781],["T_DOC_COMMENT","\/**\n     * Check capture availability\n     *\n     * @return bool\n     *\/",783],["T_WHITESPACE","\n    ",787],["T_PUBLIC","public",788],["T_WHITESPACE"," ",788],["T_FUNCTION","function",788],["T_WHITESPACE"," ",788],["T_STRING","canCapture",788],"(",")",["T_WHITESPACE","\n    ",788],"{",["T_WHITESPACE","\n        ",789],["T_VARIABLE","$payment",790],["T_WHITESPACE"," ",790],"=",["T_WHITESPACE"," ",790],["T_VARIABLE","$this",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","getInfoInstance",790],"(",")",";",["T_WHITESPACE","\n        ",790],["T_VARIABLE","$this",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","_pro",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","getConfig",791],"(",")",["T_OBJECT_OPERATOR","->",791],["T_STRING","setStoreId",791],"(",["T_VARIABLE","$payment",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","getOrder",791],"(",")",["T_OBJECT_OPERATOR","->",791],["T_STRING","getStore",791],"(",")",["T_OBJECT_OPERATOR","->",791],["T_STRING","getId",791],"(",")",")",";",["T_WHITESPACE","\n\n        ",791],["T_IF","if",793],["T_WHITESPACE"," ",793],"(",["T_VARIABLE","$payment",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","getAdditionalInformation",793],"(",["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","_isOrderPaymentActionKey",793],")",")",["T_WHITESPACE"," ",793],"{",["T_WHITESPACE","\n            ",793],["T_VARIABLE","$orderTransaction",794],["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],["T_VARIABLE","$this",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","getOrderTransaction",794],"(",["T_VARIABLE","$payment",794],")",";",["T_WHITESPACE","\n            ",794],["T_IF","if",795],["T_WHITESPACE"," ",795],"(",["T_VARIABLE","$orderTransaction",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","getIsClosed",795],"(",")",")",["T_WHITESPACE"," ",795],"{",["T_WHITESPACE","\n                ",795],["T_RETURN","return",796],["T_WHITESPACE"," ",796],["T_STRING","false",796],";",["T_WHITESPACE","\n            ",796],"}",["T_WHITESPACE","\n\n            ",797],["T_VARIABLE","$orderValidPeriod",799],["T_WHITESPACE"," ",799],"=",["T_WHITESPACE"," ",799],["T_STRING","abs",799],"(",["T_STRING","intval",799],"(",["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","getConfigData",799],"(",["T_CONSTANT_ENCAPSED_STRING","'order_valid_period'",799],")",")",")",";",["T_WHITESPACE","\n\n            ",799],["T_VARIABLE","$dateCompass",801],["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_NEW","new",801],["T_WHITESPACE"," ",801],["T_NS_SEPARATOR","\\",801],["T_STRING","DateTime",801],"(",["T_VARIABLE","$orderTransaction",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","getCreatedAt",801],"(",")",")",";",["T_WHITESPACE","\n            ",801],["T_VARIABLE","$dateCompass",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","modify",802],"(",["T_CONSTANT_ENCAPSED_STRING","'+'",802],["T_WHITESPACE"," ",802],".",["T_WHITESPACE"," ",802],["T_VARIABLE","$orderValidPeriod",802],["T_WHITESPACE"," ",802],".",["T_WHITESPACE"," ",802],["T_CONSTANT_ENCAPSED_STRING","' days'",802],")",";",["T_WHITESPACE","\n            ",802],["T_VARIABLE","$currentDate",803],["T_WHITESPACE"," ",803],"=",["T_WHITESPACE"," ",803],["T_NEW","new",803],["T_WHITESPACE"," ",803],["T_NS_SEPARATOR","\\",803],["T_STRING","DateTime",803],"(",")",";",["T_WHITESPACE","\n\n            ",803],["T_IF","if",805],["T_WHITESPACE"," ",805],"(",["T_VARIABLE","$currentDate",805],["T_WHITESPACE"," ",805],">",["T_WHITESPACE"," ",805],["T_VARIABLE","$dateCompass",805],["T_WHITESPACE"," ",805],["T_BOOLEAN_OR","||",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$orderValidPeriod",805],["T_WHITESPACE"," ",805],["T_IS_EQUAL","==",805],["T_WHITESPACE"," ",805],["T_LNUMBER","0",805],")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n                ",805],["T_RETURN","return",806],["T_WHITESPACE"," ",806],["T_STRING","false",806],";",["T_WHITESPACE","\n            ",806],"}",["T_WHITESPACE","\n        ",807],"}",["T_WHITESPACE","\n\n        ",808],["T_RETURN","return",810],["T_WHITESPACE"," ",810],["T_VARIABLE","$this",810],["T_OBJECT_OPERATOR","->",810],["T_STRING","_canCapture",810],";",["T_WHITESPACE","\n    ",810],"}",["T_WHITESPACE","\n\n    ",811],["T_DOC_COMMENT","\/**\n     * Call DoAuthorize\n     *\n     * @param int $amount\n     * @param \\Magento\\Framework\\DataObject $payment\n     * @param string $parentTransactionId\n     * @return \\Magento\\Paypal\\Model\\Api\\AbstractApi\n     *\/",813],["T_WHITESPACE","\n    ",820],["T_PROTECTED","protected",821],["T_WHITESPACE"," ",821],["T_FUNCTION","function",821],["T_WHITESPACE"," ",821],["T_STRING","_callDoAuthorize",821],"(",["T_VARIABLE","$amount",821],",",["T_WHITESPACE"," ",821],["T_VARIABLE","$payment",821],",",["T_WHITESPACE"," ",821],["T_VARIABLE","$parentTransactionId",821],")",["T_WHITESPACE","\n    ",821],"{",["T_WHITESPACE","\n        ",822],["T_VARIABLE","$apiData",823],["T_WHITESPACE"," ",823],"=",["T_WHITESPACE"," ",823],["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","_pro",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","getApi",823],"(",")",["T_OBJECT_OPERATOR","->",823],["T_STRING","getData",823],"(",")",";",["T_WHITESPACE","\n        ",823],["T_FOREACH","foreach",824],["T_WHITESPACE"," ",824],"(",["T_VARIABLE","$apiData",824],["T_WHITESPACE"," ",824],["T_AS","as",824],["T_WHITESPACE"," ",824],["T_VARIABLE","$k",824],["T_WHITESPACE"," ",824],["T_DOUBLE_ARROW","=>",824],["T_WHITESPACE"," ",824],["T_VARIABLE","$v",824],")",["T_WHITESPACE"," ",824],"{",["T_WHITESPACE","\n            ",824],["T_IF","if",825],["T_WHITESPACE"," ",825],"(",["T_STRING","is_object",825],"(",["T_VARIABLE","$v",825],")",")",["T_WHITESPACE"," ",825],"{",["T_WHITESPACE","\n                ",825],["T_UNSET","unset",826],"(",["T_VARIABLE","$apiData",826],"[",["T_VARIABLE","$k",826],"]",")",";",["T_WHITESPACE","\n            ",826],"}",["T_WHITESPACE","\n        ",827],"}",["T_WHITESPACE","\n        ",828],["T_VARIABLE","$this",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","_checkoutSession",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","setPaypalTransactionData",829],"(",["T_VARIABLE","$apiData",829],")",";",["T_WHITESPACE","\n        ",829],["T_VARIABLE","$this",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","_pro",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","resetApi",830],"(",")",";",["T_WHITESPACE","\n        ",830],["T_VARIABLE","$api",831],["T_WHITESPACE"," ",831],"=",["T_WHITESPACE"," ",831],["T_VARIABLE","$this",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","_setApiProcessableErrors",831],"(",")",["T_WHITESPACE","\n            ",831],["T_OBJECT_OPERATOR","->",832],["T_STRING","setAmount",832],"(",["T_VARIABLE","$amount",832],")",["T_WHITESPACE","\n            ",832],["T_OBJECT_OPERATOR","->",833],["T_STRING","setCurrencyCode",833],"(",["T_VARIABLE","$payment",833],["T_OBJECT_OPERATOR","->",833],["T_STRING","getOrder",833],"(",")",["T_OBJECT_OPERATOR","->",833],["T_STRING","getBaseCurrencyCode",833],"(",")",")",["T_WHITESPACE","\n            ",833],["T_OBJECT_OPERATOR","->",834],["T_STRING","setTransactionId",834],"(",["T_VARIABLE","$parentTransactionId",834],")",["T_WHITESPACE","\n            ",834],["T_OBJECT_OPERATOR","->",835],["T_STRING","callDoAuthorization",835],"(",")",";",["T_WHITESPACE","\n\n        ",835],["T_VARIABLE","$payment",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","setAdditionalInformation",837],"(",["T_WHITESPACE","\n            ",837],["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","_authorizationCountKey",838],",",["T_WHITESPACE","\n            ",838],["T_VARIABLE","$payment",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","getAdditionalInformation",839],"(",["T_VARIABLE","$this",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","_authorizationCountKey",839],")",["T_WHITESPACE"," ",839],"+",["T_WHITESPACE"," ",839],["T_LNUMBER","1",839],["T_WHITESPACE","\n        ",839],")",";",["T_WHITESPACE","\n\n        ",840],["T_RETURN","return",842],["T_WHITESPACE"," ",842],["T_VARIABLE","$api",842],";",["T_WHITESPACE","\n    ",842],"}",["T_WHITESPACE","\n\n    ",843],["T_DOC_COMMENT","\/**\n     * Check transaction for expiration in PST\n     *\n     * @param Transaction $transaction\n     * @param int $period\n     * @return bool\n     *\/",845],["T_WHITESPACE","\n    ",851],["T_PROTECTED","protected",852],["T_WHITESPACE"," ",852],["T_FUNCTION","function",852],["T_WHITESPACE"," ",852],["T_STRING","_isTransactionExpired",852],"(",["T_STRING","Transaction",852],["T_WHITESPACE"," ",852],["T_VARIABLE","$transaction",852],",",["T_WHITESPACE"," ",852],["T_VARIABLE","$period",852],")",["T_WHITESPACE","\n    ",852],"{",["T_WHITESPACE","\n        ",853],["T_VARIABLE","$period",854],["T_WHITESPACE"," ",854],"=",["T_WHITESPACE"," ",854],["T_STRING","intval",854],"(",["T_VARIABLE","$period",854],")",";",["T_WHITESPACE","\n        ",854],["T_IF","if",855],["T_WHITESPACE"," ",855],"(",["T_LNUMBER","0",855],["T_WHITESPACE"," ",855],["T_IS_EQUAL","==",855],["T_WHITESPACE"," ",855],["T_VARIABLE","$period",855],")",["T_WHITESPACE"," ",855],"{",["T_WHITESPACE","\n            ",855],["T_RETURN","return",856],["T_WHITESPACE"," ",856],["T_STRING","true",856],";",["T_WHITESPACE","\n        ",856],"}",["T_WHITESPACE","\n\n        ",857],["T_VARIABLE","$transactionClosingDate",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_NEW","new",859],["T_WHITESPACE"," ",859],["T_NS_SEPARATOR","\\",859],["T_STRING","DateTime",859],"(",["T_VARIABLE","$transaction",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","getCreatedAt",859],"(",")",",",["T_WHITESPACE"," ",859],["T_NEW","new",859],["T_WHITESPACE"," ",859],["T_NS_SEPARATOR","\\",859],["T_STRING","DateTimeZone",859],"(",["T_CONSTANT_ENCAPSED_STRING","'GMT'",859],")",")",";",["T_WHITESPACE","\n        ",859],["T_VARIABLE","$transactionClosingDate",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","setTimezone",860],"(",["T_NEW","new",860],["T_WHITESPACE"," ",860],["T_NS_SEPARATOR","\\",860],["T_STRING","DateTimeZone",860],"(",["T_CONSTANT_ENCAPSED_STRING","'US\/Pacific'",860],")",")",";",["T_WHITESPACE","\n        ",860],["T_DOC_COMMENT","\/**\n         * 11:49:00 PayPal transactions closing time\n         *\/",861],["T_WHITESPACE","\n        ",863],["T_VARIABLE","$transactionClosingDate",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","setTime",864],"(",["T_LNUMBER","11",864],",",["T_WHITESPACE"," ",864],["T_LNUMBER","49",864],",",["T_WHITESPACE"," ",864],["T_LNUMBER","00",864],")",";",["T_WHITESPACE","\n        ",864],["T_VARIABLE","$transactionClosingDate",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","modify",865],"(",["T_CONSTANT_ENCAPSED_STRING","'+'",865],["T_WHITESPACE"," ",865],".",["T_WHITESPACE"," ",865],["T_VARIABLE","$period",865],["T_WHITESPACE"," ",865],".",["T_WHITESPACE"," ",865],["T_CONSTANT_ENCAPSED_STRING","' days'",865],")",";",["T_WHITESPACE","\n\n        ",865],["T_VARIABLE","$currentTime",867],["T_WHITESPACE"," ",867],"=",["T_WHITESPACE"," ",867],["T_NEW","new",867],["T_WHITESPACE"," ",867],["T_NS_SEPARATOR","\\",867],["T_STRING","DateTime",867],"(",["T_STRING","null",867],",",["T_WHITESPACE"," ",867],["T_NEW","new",867],["T_WHITESPACE"," ",867],["T_NS_SEPARATOR","\\",867],["T_STRING","DateTimeZone",867],"(",["T_CONSTANT_ENCAPSED_STRING","'US\/Pacific'",867],")",")",";",["T_WHITESPACE","\n\n        ",867],["T_IF","if",869],["T_WHITESPACE"," ",869],"(",["T_VARIABLE","$currentTime",869],["T_WHITESPACE"," ",869],">",["T_WHITESPACE"," ",869],["T_VARIABLE","$transactionClosingDate",869],")",["T_WHITESPACE"," ",869],"{",["T_WHITESPACE","\n            ",869],["T_RETURN","return",870],["T_WHITESPACE"," ",870],["T_STRING","true",870],";",["T_WHITESPACE","\n        ",870],"}",["T_WHITESPACE","\n\n        ",871],["T_RETURN","return",873],["T_WHITESPACE"," ",873],["T_STRING","false",873],";",["T_WHITESPACE","\n    ",873],"}",["T_WHITESPACE","\n\n    ",874],["T_DOC_COMMENT","\/**\n     * Is active\n     *\n     * @param int|null $storeId\n     * @return bool\n     *\/",876],["T_WHITESPACE","\n    ",881],["T_PUBLIC","public",882],["T_WHITESPACE"," ",882],["T_FUNCTION","function",882],["T_WHITESPACE"," ",882],["T_STRING","isActive",882],"(",["T_VARIABLE","$storeId",882],["T_WHITESPACE"," ",882],"=",["T_WHITESPACE"," ",882],["T_STRING","null",882],")",["T_WHITESPACE","\n    ",882],"{",["T_WHITESPACE","\n        ",883],["T_VARIABLE","$pathStandardExpress",884],["T_WHITESPACE"," ",884],"=",["T_WHITESPACE"," ",884],["T_CONSTANT_ENCAPSED_STRING","'payment\/'",884],["T_WHITESPACE"," ",884],".",["T_WHITESPACE"," ",884],["T_STRING","Config",884],["T_DOUBLE_COLON","::",884],["T_STRING","METHOD_WPS_EXPRESS",884],["T_WHITESPACE"," ",884],".",["T_WHITESPACE"," ",884],["T_CONSTANT_ENCAPSED_STRING","'\/active'",884],";",["T_WHITESPACE","\n        ",884],["T_VARIABLE","$pathPaypalExpress",885],["T_WHITESPACE"," ",885],"=",["T_WHITESPACE"," ",885],["T_CONSTANT_ENCAPSED_STRING","'payment\/'",885],["T_WHITESPACE"," ",885],".",["T_WHITESPACE"," ",885],["T_STRING","Config",885],["T_DOUBLE_COLON","::",885],["T_STRING","METHOD_WPP_EXPRESS",885],["T_WHITESPACE"," ",885],".",["T_WHITESPACE"," ",885],["T_CONSTANT_ENCAPSED_STRING","'\/active'",885],";",["T_WHITESPACE","\n\n        ",885],["T_RETURN","return",887],["T_WHITESPACE"," ",887],["T_STRING","parent",887],["T_DOUBLE_COLON","::",887],["T_STRING","isActive",887],"(",["T_VARIABLE","$storeId",887],")",["T_WHITESPACE","\n        ",887],["T_BOOLEAN_OR","||",888],["T_WHITESPACE"," ",888],["T_BOOL_CAST","(bool)",888],["T_INT_CAST","(int)",888],["T_VARIABLE","$this",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","_scopeConfig",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","getValue",888],"(",["T_VARIABLE","$pathStandardExpress",888],",",["T_WHITESPACE"," ",888],["T_STRING","ScopeInterface",888],["T_DOUBLE_COLON","::",888],["T_STRING","SCOPE_STORE",888],",",["T_WHITESPACE"," ",888],["T_VARIABLE","$storeId",888],")",["T_WHITESPACE","\n        ",888],["T_BOOLEAN_OR","||",889],["T_WHITESPACE"," ",889],["T_BOOL_CAST","(bool)",889],["T_INT_CAST","(int)",889],["T_VARIABLE","$this",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","_scopeConfig",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","getValue",889],"(",["T_VARIABLE","$pathPaypalExpress",889],",",["T_WHITESPACE"," ",889],["T_STRING","ScopeInterface",889],["T_DOUBLE_COLON","::",889],["T_STRING","SCOPE_STORE",889],",",["T_WHITESPACE"," ",889],["T_VARIABLE","$storeId",889],")",";",["T_WHITESPACE","\n    ",889],"}",["T_WHITESPACE","\n\n    ",890],["T_DOC_COMMENT","\/**\n     * Get transaction with type order\n     *\n     * @param OrderPaymentInterface $payment\n     * @return false|\\Magento\\Sales\\Api\\Data\\TransactionInterface\n     *\/",892],["T_WHITESPACE","\n    ",897],["T_PROTECTED","protected",898],["T_WHITESPACE"," ",898],["T_FUNCTION","function",898],["T_WHITESPACE"," ",898],["T_STRING","getOrderTransaction",898],"(",["T_VARIABLE","$payment",898],")",["T_WHITESPACE","\n    ",898],"{",["T_WHITESPACE","\n        ",899],["T_RETURN","return",900],["T_WHITESPACE"," ",900],["T_VARIABLE","$this",900],["T_OBJECT_OPERATOR","->",900],["T_STRING","transactionRepository",900],["T_OBJECT_OPERATOR","->",900],["T_STRING","getByTransactionType",900],"(",["T_WHITESPACE","\n            ",900],["T_STRING","Transaction",901],["T_DOUBLE_COLON","::",901],["T_STRING","TYPE_ORDER",901],",",["T_WHITESPACE","\n            ",901],["T_VARIABLE","$payment",902],["T_OBJECT_OPERATOR","->",902],["T_STRING","getId",902],"(",")",",",["T_WHITESPACE","\n            ",902],["T_VARIABLE","$payment",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","getOrder",903],"(",")",["T_OBJECT_OPERATOR","->",903],["T_STRING","getId",903],"(",")",["T_WHITESPACE","\n        ",903],")",";",["T_WHITESPACE","\n    ",904],"}",["T_WHITESPACE","\n",905],"}",["T_WHITESPACE","\n",906]]
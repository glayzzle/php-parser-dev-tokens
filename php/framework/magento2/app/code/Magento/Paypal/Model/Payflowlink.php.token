[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Paypal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Payment",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Method",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AbstractMethod",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Payment",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Method",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ConfigInterfaceFactory",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Paypal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Payflow",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Service",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Response",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Handler",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HandlerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Sales",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Order",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Email",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Sender",14],["T_NS_SEPARATOR","\\",14],["T_STRING","OrderSender",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Payflow Link payment gateway model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",16],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Payflowlink",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Magento",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Paypal",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Model",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Payflowpro",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * Default layout template\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","LAYOUT_TEMPLATE",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'mobile'",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * Controller for callback urls\n     *\n     * @var string\n     *\/",27],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$_callbackController",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'payflow'",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Payment method code\n     *\n     * @var string\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_code",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Paypal",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Model",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Config",39],["T_DOUBLE_COLON","::",39],["T_STRING","METHOD_PAYFLOWLINK",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_formBlockType",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Paypal",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Block",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Payflow",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Link",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Form",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_infoBlockType",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Paypal",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Block",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Payflow",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Link",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Info",49],["T_DOUBLE_COLON","::",49],["T_CLASS","class",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_canUseInternal",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","false",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Availability option\n     *\n     * @var bool\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_isInitializeNeeded",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","true",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Request & response model\n     *\n     * @var \\Magento\\Paypal\\Model\\Payflow\\Request\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_response",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Gateway request URL\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_CONST","const",75],["T_WHITESPACE"," ",75],["T_STRING","TRANSACTION_PAYFLOW_URL",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/payflowlink.paypal.com\/'",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Error message\n     *\/",77],["T_WHITESPACE","\n    ",79],["T_CONST","const",80],["T_WHITESPACE"," ",80],["T_STRING","RESPONSE_ERROR_MSG",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'Payment error. %s was not found.'",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Key for storing secure hash in additional information of payment model\n     *\n     * @var string\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_secureSilentPostHashKey",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'secure_silent_post_hash'",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Payflow\\RequestFactory\n     *\/",89],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$_requestFactory",92],";",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Api\\CartRepositoryInterface\n     *\/",94],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$quoteRepository",97],";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Sales\\Model\\OrderFactory\n     *\/",99],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$_orderFactory",102],";",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\WebsiteFactory\n     *\/",104],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$_websiteFactory",107],";",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * @var OrderSender\n     *\/",109],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$orderSender",112],";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Math\\Random\n     *\/",114],["T_WHITESPACE","\n    ",116],["T_PRIVATE","private",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$mathRandom",117],";",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Framework\\Api\\ExtensionAttributesFactory $extensionFactory\n     * @param \\Magento\\Framework\\Api\\AttributeValueFactory $customAttributeFactory\n     * @param \\Magento\\Payment\\Helper\\Data $paymentData\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Payment\\Model\\Method\\Logger $logger\n     * @param \\Magento\\Framework\\Module\\ModuleListInterface $moduleList\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\TimezoneInterface $localeDate\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param ConfigInterfaceFactory $configFactory\n     * @param Payflow\\Service\\Gateway $gateway\n     * @param HandlerInterface $errorHandler\n     * @param \\Magento\\Framework\\Math\\Random $mathRandom\n     * @param Payflow\\RequestFactory $requestFactory\n     * @param \\Magento\\Quote\\Api\\CartRepositoryInterface $quoteRepository\n     * @param \\Magento\\Sales\\Model\\OrderFactory $orderFactory\n     * @param \\Magento\\Framework\\App\\RequestInterface $requestHttp\n     * @param \\Magento\\Store\\Model\\WebsiteFactory $websiteFactory\n     * @param OrderSender $orderSender\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",119],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","__construct",145],"(",["T_WHITESPACE","\n        ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Framework",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Model",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Context",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$context",146],",",["T_WHITESPACE","\n        ",146],["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Framework",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Registry",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$registry",147],",",["T_WHITESPACE","\n        ",147],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Framework",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Api",148],["T_NS_SEPARATOR","\\",148],["T_STRING","ExtensionAttributesFactory",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$extensionFactory",148],",",["T_WHITESPACE","\n        ",148],["T_NS_SEPARATOR","\\",149],["T_STRING","Magento",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Framework",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Api",149],["T_NS_SEPARATOR","\\",149],["T_STRING","AttributeValueFactory",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$customAttributeFactory",149],",",["T_WHITESPACE","\n        ",149],["T_NS_SEPARATOR","\\",150],["T_STRING","Magento",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Payment",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Helper",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Data",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$paymentData",150],",",["T_WHITESPACE","\n        ",150],["T_NS_SEPARATOR","\\",151],["T_STRING","Magento",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Framework",151],["T_NS_SEPARATOR","\\",151],["T_STRING","App",151],["T_NS_SEPARATOR","\\",151],["T_STRING","Config",151],["T_NS_SEPARATOR","\\",151],["T_STRING","ScopeConfigInterface",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$scopeConfig",151],",",["T_WHITESPACE","\n        ",151],["T_NS_SEPARATOR","\\",152],["T_STRING","Magento",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Payment",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Model",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Method",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Logger",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$logger",152],",",["T_WHITESPACE","\n        ",152],["T_NS_SEPARATOR","\\",153],["T_STRING","Magento",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Framework",153],["T_NS_SEPARATOR","\\",153],["T_STRING","Module",153],["T_NS_SEPARATOR","\\",153],["T_STRING","ModuleListInterface",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$moduleList",153],",",["T_WHITESPACE","\n        ",153],["T_NS_SEPARATOR","\\",154],["T_STRING","Magento",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Framework",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Stdlib",154],["T_NS_SEPARATOR","\\",154],["T_STRING","DateTime",154],["T_NS_SEPARATOR","\\",154],["T_STRING","TimezoneInterface",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$localeDate",154],",",["T_WHITESPACE","\n        ",154],["T_NS_SEPARATOR","\\",155],["T_STRING","Magento",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Store",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Model",155],["T_NS_SEPARATOR","\\",155],["T_STRING","StoreManagerInterface",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$storeManager",155],",",["T_WHITESPACE","\n        ",155],["T_STRING","ConfigInterfaceFactory",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$configFactory",156],",",["T_WHITESPACE","\n        ",156],["T_NS_SEPARATOR","\\",157],["T_STRING","Magento",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Paypal",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Model",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Payflow",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Service",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Gateway",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$gateway",157],",",["T_WHITESPACE","\n        ",157],["T_STRING","HandlerInterface",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$errorHandler",158],",",["T_WHITESPACE","\n        ",158],["T_NS_SEPARATOR","\\",159],["T_STRING","Magento",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Framework",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Math",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Random",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$mathRandom",159],",",["T_WHITESPACE","\n        ",159],["T_NS_SEPARATOR","\\",160],["T_STRING","Magento",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Paypal",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Model",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Payflow",160],["T_NS_SEPARATOR","\\",160],["T_STRING","RequestFactory",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$requestFactory",160],",",["T_WHITESPACE","\n        ",160],["T_NS_SEPARATOR","\\",161],["T_STRING","Magento",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Quote",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Api",161],["T_NS_SEPARATOR","\\",161],["T_STRING","CartRepositoryInterface",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$quoteRepository",161],",",["T_WHITESPACE","\n        ",161],["T_NS_SEPARATOR","\\",162],["T_STRING","Magento",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Sales",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Model",162],["T_NS_SEPARATOR","\\",162],["T_STRING","OrderFactory",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$orderFactory",162],",",["T_WHITESPACE","\n        ",162],["T_NS_SEPARATOR","\\",163],["T_STRING","Magento",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Framework",163],["T_NS_SEPARATOR","\\",163],["T_STRING","App",163],["T_NS_SEPARATOR","\\",163],["T_STRING","RequestInterface",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$requestHttp",163],",",["T_WHITESPACE","\n        ",163],["T_NS_SEPARATOR","\\",164],["T_STRING","Magento",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Store",164],["T_NS_SEPARATOR","\\",164],["T_STRING","Model",164],["T_NS_SEPARATOR","\\",164],["T_STRING","WebsiteFactory",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$websiteFactory",164],",",["T_WHITESPACE","\n        ",164],["T_STRING","OrderSender",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$orderSender",165],",",["T_WHITESPACE","\n        ",165],["T_NS_SEPARATOR","\\",166],["T_STRING","Magento",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Framework",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Model",166],["T_NS_SEPARATOR","\\",166],["T_STRING","ResourceModel",166],["T_NS_SEPARATOR","\\",166],["T_STRING","AbstractResource",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$resource",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","null",166],",",["T_WHITESPACE","\n        ",166],["T_NS_SEPARATOR","\\",167],["T_STRING","Magento",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Framework",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Data",167],["T_NS_SEPARATOR","\\",167],["T_STRING","Collection",167],["T_NS_SEPARATOR","\\",167],["T_STRING","AbstractDb",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$resourceCollection",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","null",167],",",["T_WHITESPACE","\n        ",167],["T_ARRAY","array",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$data",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],"[","]",["T_WHITESPACE","\n    ",168],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_requestFactory",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$requestFactory",170],";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","quoteRepository",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$quoteRepository",171],";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_orderFactory",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$orderFactory",172],";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_requestHttp",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$requestHttp",173],";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_websiteFactory",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$websiteFactory",174],";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","orderSender",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$orderSender",175],";",["T_WHITESPACE","\n        ",175],["T_STRING","parent",176],["T_DOUBLE_COLON","::",176],["T_STRING","__construct",176],"(",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$context",177],",",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$registry",178],",",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$extensionFactory",179],",",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$customAttributeFactory",180],",",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$paymentData",181],",",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$scopeConfig",182],",",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$logger",183],",",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$moduleList",184],",",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$localeDate",185],",",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$storeManager",186],",",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$configFactory",187],",",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$gateway",188],",",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$errorHandler",189],",",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$resource",190],",",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$resourceCollection",191],",",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$data",192],["T_WHITESPACE","\n        ",192],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","mathRandom",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$mathRandom",194],";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Do not validate payment form using server methods\n     *\n     * @return true\n     *\/",197],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","validate",202],"(",")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_STRING","true",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Check whether payment method can be used\n     *\n     * @param \\Magento\\Quote\\Api\\Data\\CartInterface|\\Magento\\Quote\\Model\\Quote|null $quote\n     * @return bool\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",207],["T_WHITESPACE","\n    ",213],["T_PUBLIC","public",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","isAvailable",214],"(",["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Quote",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Api",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Data",214],["T_NS_SEPARATOR","\\",214],["T_STRING","CartInterface",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$quote",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","null",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_STRING","AbstractMethod",216],["T_DOUBLE_COLON","::",216],["T_STRING","isAvailable",216],"(",["T_VARIABLE","$quote",216],")",["T_WHITESPACE"," ",216],["T_BOOLEAN_AND","&&",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getConfig",216],"(",")",["T_OBJECT_OPERATOR","->",216],["T_STRING","isMethodAvailable",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getCode",216],"(",")",")",";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Is active\n     *\n     * @param int|null $storeId\n     * @return bool\n     *\/",219],["T_WHITESPACE","\n    ",224],["T_PUBLIC","public",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","isActive",225],"(",["T_VARIABLE","$storeId",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_STRING","null",225],")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_BOOL_CAST","(bool)",227],["T_INT_CAST","(int)",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getConfigData",227],"(",["T_CONSTANT_ENCAPSED_STRING","'active'",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$storeId",227],")",";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * Instantiate state and set it to state object\n     *\n     * @param string $paymentAction\n     * @param \\Magento\\Framework\\DataObject $stateObject\n     * @return void\n     *\/",230],["T_WHITESPACE","\n    ",236],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","initialize",237],"(",["T_VARIABLE","$paymentAction",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$stateObject",237],")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_SWITCH","switch",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$paymentAction",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_CASE","case",240],["T_WHITESPACE"," ",240],["T_NS_SEPARATOR","\\",240],["T_STRING","Magento",240],["T_NS_SEPARATOR","\\",240],["T_STRING","Paypal",240],["T_NS_SEPARATOR","\\",240],["T_STRING","Model",240],["T_NS_SEPARATOR","\\",240],["T_STRING","Config",240],["T_DOUBLE_COLON","::",240],["T_STRING","PAYMENT_ACTION_AUTH",240],":",["T_WHITESPACE","\n            ",240],["T_CASE","case",241],["T_WHITESPACE"," ",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Magento",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Paypal",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Model",241],["T_NS_SEPARATOR","\\",241],["T_STRING","Config",241],["T_DOUBLE_COLON","::",241],["T_STRING","PAYMENT_ACTION_SALE",241],":",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$payment",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getInfoInstance",242],"(",")",";",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$order",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$payment",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getOrder",243],"(",")",";",["T_WHITESPACE","\n                ",243],["T_VARIABLE","$order",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setCanSendNewEmailFlag",244],"(",["T_STRING","false",244],")",";",["T_WHITESPACE","\n                ",244],["T_VARIABLE","$payment",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setAmountAuthorized",245],"(",["T_VARIABLE","$order",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getTotalDue",245],"(",")",")",";",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$payment",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","setBaseAmountAuthorized",246],"(",["T_VARIABLE","$order",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getBaseTotalDue",246],"(",")",")",";",["T_WHITESPACE","\n                ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_generateSecureSilentPostHash",247],"(",["T_VARIABLE","$payment",247],")",";",["T_WHITESPACE","\n                ",247],["T_VARIABLE","$request",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_buildTokenRequest",248],"(",["T_VARIABLE","$payment",248],")",";",["T_WHITESPACE","\n                ",248],["T_VARIABLE","$response",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","postRequest",249],"(",["T_VARIABLE","$request",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getConfig",249],"(",")",")",";",["T_WHITESPACE","\n                ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_processTokenErrors",250],"(",["T_VARIABLE","$response",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$payment",250],")",";",["T_WHITESPACE","\n\n                ",250],["T_VARIABLE","$order",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$payment",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getOrder",252],"(",")",";",["T_WHITESPACE","\n                ",252],["T_VARIABLE","$order",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","setCanSendNewEmailFlag",253],"(",["T_STRING","false",253],")",";",["T_WHITESPACE","\n\n                ",253],["T_VARIABLE","$stateObject",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setState",255],"(",["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Sales",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Model",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Order",255],["T_DOUBLE_COLON","::",255],["T_STRING","STATE_PENDING_PAYMENT",255],")",";",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$stateObject",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","setStatus",256],"(",["T_CONSTANT_ENCAPSED_STRING","'pending_payment'",256],")",";",["T_WHITESPACE","\n                ",256],["T_VARIABLE","$stateObject",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","setIsNotified",257],"(",["T_STRING","false",257],")",";",["T_WHITESPACE","\n                ",257],["T_BREAK","break",258],";",["T_WHITESPACE","\n            ",258],["T_DEFAULT","default",259],":",["T_WHITESPACE","\n                ",259],["T_BREAK","break",260],";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Return response model.\n     *\n     * @return \\Magento\\Paypal\\Model\\Payflow\\Request\n     *\/",264],["T_WHITESPACE","\n    ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","getResponse",269],"(",")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_IF","if",271],["T_WHITESPACE"," ",271],"(","!",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_response",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_response",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_requestFactory",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","create",272],"(",")",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n\n        ",273],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_response",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Operate with order using data from $_POST which came from Silent Post Url.\n     *\n     * @param array $responseData\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException In case of validation error or order creation error\n     *\/",278],["T_WHITESPACE","\n    ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","process",285],"(",["T_VARIABLE","$responseData",285],")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$debugData",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],"[",["T_CONSTANT_ENCAPSED_STRING","'response'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$responseData",287],"]",";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_debug",288],"(",["T_VARIABLE","$debugData",288],")",";",["T_WHITESPACE","\n\n        ",288],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","mapGatewayResponse",290],"(",["T_VARIABLE","$responseData",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getResponse",290],"(",")",")",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$order",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_getOrderFromResponse",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$order",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_processOrder",293],"(",["T_VARIABLE","$order",293],")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_DOC_COMMENT","\/**\n     * Operate with order using information from silent post\n     *\n     * @param \\Magento\\Sales\\Model\\Order $order\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",297],["T_WHITESPACE","\n    ",305],["T_PROTECTED","protected",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","_processOrder",306],"(",["T_NS_SEPARATOR","\\",306],["T_STRING","Magento",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Sales",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Model",306],["T_NS_SEPARATOR","\\",306],["T_STRING","Order",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$order",306],")",["T_WHITESPACE","\n    ",306],"{",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$response",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getResponse",308],"(",")",";",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$payment",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$order",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getPayment",309],"(",")",";",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$payment",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","setTransactionId",310],"(",["T_VARIABLE","$response",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getPnref",310],"(",")",")",["T_OBJECT_OPERATOR","->",310],["T_STRING","setIsTransactionClosed",310],"(",["T_LNUMBER","0",310],")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$canSendNewOrderEmail",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","true",311],";",["T_WHITESPACE","\n\n        ",311],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$response",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getResult",313],"(",")",["T_WHITESPACE"," ",313],["T_IS_EQUAL","==",313],["T_WHITESPACE"," ",313],["T_STRING","self",313],["T_DOUBLE_COLON","::",313],["T_STRING","RESPONSE_CODE_FRAUDSERVICE_FILTER",313],["T_WHITESPACE"," ",313],["T_BOOLEAN_OR","||",313],["T_WHITESPACE","\n            ",313],["T_VARIABLE","$response",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getResult",314],"(",")",["T_WHITESPACE"," ",314],["T_IS_EQUAL","==",314],["T_WHITESPACE"," ",314],["T_STRING","self",314],["T_DOUBLE_COLON","::",314],["T_STRING","RESPONSE_CODE_DECLINED_BY_FILTER",314],["T_WHITESPACE","\n        ",314],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n            ",315],["T_VARIABLE","$canSendNewOrderEmail",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","false",316],";",["T_WHITESPACE","\n\n            ",316],["T_VARIABLE","$payment",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","setIsTransactionPending",318],"(",["T_WHITESPACE","\n                ",318],["T_STRING","true",319],["T_WHITESPACE","\n            ",319],")",["T_OBJECT_OPERATOR","->",320],["T_STRING","setIsFraudDetected",320],"(",["T_WHITESPACE","\n                ",320],["T_STRING","true",321],["T_WHITESPACE","\n            ",321],")",";",["T_WHITESPACE","\n\n            ",322],["T_VARIABLE","$fraudMessage",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$response",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getData",324],"(",["T_CONSTANT_ENCAPSED_STRING","'respmsg'",324],")",";",["T_WHITESPACE","\n            ",324],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_VARIABLE","$response",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getData",325],"(",["T_CONSTANT_ENCAPSED_STRING","'fps_prexmldata'",325],")",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                ",325],["T_VARIABLE","$xml",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_NEW","new",326],["T_WHITESPACE"," ",326],["T_NS_SEPARATOR","\\",326],["T_STRING","SimpleXMLElement",326],"(",["T_VARIABLE","$response",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getData",326],"(",["T_CONSTANT_ENCAPSED_STRING","'fps_prexmldata'",326],")",")",";",["T_WHITESPACE","\n                ",326],["T_VARIABLE","$fraudMessage",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_STRING_CAST","(string)",327],["T_VARIABLE","$xml",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","rule",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","triggeredMessage",327],";",["T_WHITESPACE","\n            ",327],"}",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$payment",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","setAdditionalInformation",329],"(",["T_WHITESPACE","\n                ",329],["T_STRING","Info",330],["T_DOUBLE_COLON","::",330],["T_STRING","PAYPAL_FRAUD_FILTERS",330],",",["T_WHITESPACE","\n                ",330],["T_VARIABLE","$fraudMessage",331],["T_WHITESPACE","\n            ",331],")",";",["T_WHITESPACE","\n        ",332],"}",["T_WHITESPACE","\n\n        ",333],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$response",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getData",335],"(",["T_CONSTANT_ENCAPSED_STRING","'avsdata'",335],")",["T_WHITESPACE"," ",335],["T_BOOLEAN_AND","&&",335],["T_WHITESPACE"," ",335],["T_STRING","strstr",335],"(",["T_STRING","substr",335],"(",["T_VARIABLE","$response",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getData",335],"(",["T_CONSTANT_ENCAPSED_STRING","'avsdata'",335],")",",",["T_WHITESPACE"," ",335],["T_LNUMBER","0",335],",",["T_WHITESPACE"," ",335],["T_LNUMBER","2",335],")",",",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'N'",335],")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$payment",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","setAdditionalInformation",336],"(",["T_STRING","Info",336],["T_DOUBLE_COLON","::",336],["T_STRING","PAYPAL_AVS_CODE",336],",",["T_WHITESPACE"," ",336],["T_STRING","substr",336],"(",["T_VARIABLE","$response",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getData",336],"(",["T_CONSTANT_ENCAPSED_STRING","'avsdata'",336],")",",",["T_WHITESPACE"," ",336],["T_LNUMBER","0",336],",",["T_WHITESPACE"," ",336],["T_LNUMBER","2",336],")",")",";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n\n        ",337],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$response",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getData",339],"(",["T_CONSTANT_ENCAPSED_STRING","'cvv2match'",339],")",["T_WHITESPACE"," ",339],["T_BOOLEAN_AND","&&",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$response",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getData",339],"(",["T_CONSTANT_ENCAPSED_STRING","'cvv2match'",339],")",["T_WHITESPACE"," ",339],["T_IS_NOT_EQUAL","!=",339],["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","'Y'",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$payment",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","setAdditionalInformation",340],"(",["T_STRING","Info",340],["T_DOUBLE_COLON","::",340],["T_STRING","PAYPAL_CVV_2_MATCH",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$response",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getData",340],"(",["T_CONSTANT_ENCAPSED_STRING","'cvv2match'",340],")",")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n\n        ",341],["T_SWITCH","switch",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$response",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getType",343],"(",")",")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n            ",343],["T_CASE","case",344],["T_WHITESPACE"," ",344],["T_STRING","self",344],["T_DOUBLE_COLON","::",344],["T_STRING","TRXTYPE_AUTH_ONLY",344],":",["T_WHITESPACE","\n                ",344],["T_VARIABLE","$payment",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","registerAuthorizationNotification",345],"(",["T_VARIABLE","$payment",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getBaseAmountAuthorized",345],"(",")",")",";",["T_WHITESPACE","\n                ",345],["T_BREAK","break",346],";",["T_WHITESPACE","\n            ",346],["T_CASE","case",347],["T_WHITESPACE"," ",347],["T_STRING","self",347],["T_DOUBLE_COLON","::",347],["T_STRING","TRXTYPE_SALE",347],":",["T_WHITESPACE","\n                ",347],["T_VARIABLE","$payment",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","registerCaptureNotification",348],"(",["T_VARIABLE","$payment",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getBaseAmountAuthorized",348],"(",")",")",";",["T_WHITESPACE","\n                ",348],["T_BREAK","break",349],";",["T_WHITESPACE","\n            ",349],["T_DEFAULT","default",350],":",["T_WHITESPACE","\n                ",350],["T_BREAK","break",351],";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$order",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","save",353],"(",")",";",["T_WHITESPACE","\n\n        ",353],["T_TRY","try",355],["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_IF","if",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$canSendNewOrderEmail",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n                ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","orderSender",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","send",357],"(",["T_VARIABLE","$order",357],")",";",["T_WHITESPACE","\n            ",357],"}",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$quote",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","quoteRepository",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","get",359],"(",["T_VARIABLE","$order",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getQuoteId",359],"(",")",")",["T_OBJECT_OPERATOR","->",359],["T_STRING","setIsActive",359],"(",["T_STRING","false",359],")",";",["T_WHITESPACE","\n            ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","quoteRepository",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","save",360],"(",["T_VARIABLE","$quote",360],")",";",["T_WHITESPACE","\n        ",360],"}",["T_WHITESPACE"," ",361],["T_CATCH","catch",361],["T_WHITESPACE"," ",361],"(",["T_NS_SEPARATOR","\\",361],["T_STRING","Exception",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$e",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_THROW","throw",362],["T_WHITESPACE"," ",362],["T_NEW","new",362],["T_WHITESPACE"," ",362],["T_NS_SEPARATOR","\\",362],["T_STRING","Magento",362],["T_NS_SEPARATOR","\\",362],["T_STRING","Framework",362],["T_NS_SEPARATOR","\\",362],["T_STRING","Exception",362],["T_NS_SEPARATOR","\\",362],["T_STRING","LocalizedException",362],"(",["T_STRING","__",362],"(",["T_CONSTANT_ENCAPSED_STRING","'We cannot send the new order email.'",362],")",")",";",["T_WHITESPACE","\n        ",362],"}",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n\n    ",364],["T_DOC_COMMENT","\/**\n     * Check response from Payflow gateway.\n     *\n     * @return false|\\Magento\\Sales\\Model\\Order in case of validation passed\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException In other cases\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",366],["T_WHITESPACE","\n    ",373],["T_PROTECTED","protected",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","_getOrderFromResponse",374],"(",")",["T_WHITESPACE","\n    ",374],"{",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$response",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getResponse",376],"(",")",";",["T_WHITESPACE","\n        ",376],["T_VARIABLE","$order",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_orderFactory",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","create",377],"(",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","loadByIncrementId",377],"(",["T_VARIABLE","$response",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getInvnum",377],"(",")",")",";",["T_WHITESPACE","\n\n        ",377],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_getSecureSilentPostHash",379],"(",["T_WHITESPACE","\n            ",379],["T_VARIABLE","$order",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getPayment",380],"(",")",["T_WHITESPACE","\n        ",380],")",["T_WHITESPACE"," ",381],["T_IS_NOT_EQUAL","!=",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$response",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getData",381],"(",["T_CONSTANT_ENCAPSED_STRING","'user2'",381],")",["T_WHITESPACE"," ",381],["T_BOOLEAN_OR","||",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_code",381],["T_WHITESPACE"," ",381],["T_IS_NOT_EQUAL","!=",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$order",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getPayment",381],"(",")",["T_OBJECT_OPERATOR","->",381],["T_STRING","getMethodInstance",381],"(",")",["T_OBJECT_OPERATOR","->",381],["T_STRING","getCode",381],"(",")",["T_WHITESPACE","\n        ",381],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_RETURN","return",383],["T_WHITESPACE"," ",383],["T_STRING","false",383],";",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n\n        ",384],["T_IF","if",386],["T_WHITESPACE"," ",386],"(",["T_VARIABLE","$response",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getResult",386],"(",")",["T_WHITESPACE"," ",386],["T_IS_NOT_EQUAL","!=",386],["T_WHITESPACE"," ",386],["T_STRING","self",386],["T_DOUBLE_COLON","::",386],["T_STRING","RESPONSE_CODE_FRAUDSERVICE_FILTER",386],["T_WHITESPACE"," ",386],["T_BOOLEAN_AND","&&",386],["T_WHITESPACE","\n            ",386],["T_VARIABLE","$response",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getResult",387],"(",")",["T_WHITESPACE"," ",387],["T_IS_NOT_EQUAL","!=",387],["T_WHITESPACE"," ",387],["T_STRING","self",387],["T_DOUBLE_COLON","::",387],["T_STRING","RESPONSE_CODE_DECLINED_BY_FILTER",387],["T_WHITESPACE"," ",387],["T_BOOLEAN_AND","&&",387],["T_WHITESPACE","\n            ",387],["T_VARIABLE","$response",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getResult",388],"(",")",["T_WHITESPACE"," ",388],["T_IS_NOT_EQUAL","!=",388],["T_WHITESPACE"," ",388],["T_STRING","self",388],["T_DOUBLE_COLON","::",388],["T_STRING","RESPONSE_CODE_APPROVED",388],["T_WHITESPACE","\n        ",388],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n            ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$order",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getState",390],"(",")",["T_WHITESPACE"," ",390],["T_IS_NOT_EQUAL","!=",390],["T_WHITESPACE"," ",390],["T_NS_SEPARATOR","\\",390],["T_STRING","Magento",390],["T_NS_SEPARATOR","\\",390],["T_STRING","Sales",390],["T_NS_SEPARATOR","\\",390],["T_STRING","Model",390],["T_NS_SEPARATOR","\\",390],["T_STRING","Order",390],["T_DOUBLE_COLON","::",390],["T_STRING","STATE_CANCELED",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                ",390],["T_VARIABLE","$order",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","registerCancellation",391],"(",["T_VARIABLE","$response",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getRespmsg",391],"(",")",")",["T_OBJECT_OPERATOR","->",391],["T_STRING","save",391],"(",")",";",["T_WHITESPACE","\n            ",391],"}",["T_WHITESPACE","\n            ",392],["T_THROW","throw",393],["T_WHITESPACE"," ",393],["T_NEW","new",393],["T_WHITESPACE"," ",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Magento",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Framework",393],["T_NS_SEPARATOR","\\",393],["T_STRING","Exception",393],["T_NS_SEPARATOR","\\",393],["T_STRING","LocalizedException",393],"(",["T_STRING","__",393],"(",["T_VARIABLE","$response",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getRespmsg",393],"(",")",")",")",";",["T_WHITESPACE","\n        ",393],"}",["T_WHITESPACE","\n\n        ",394],["T_VARIABLE","$amountCompared",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$response",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getAmt",396],"(",")",["T_WHITESPACE"," ",396],["T_IS_EQUAL","==",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$order",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getPayment",396],"(",")",["T_OBJECT_OPERATOR","->",396],["T_STRING","getBaseAmountAuthorized",396],"(",")",["T_WHITESPACE"," ",396],"?",["T_WHITESPACE"," ",396],["T_STRING","true",396],["T_WHITESPACE"," ",396],":",["T_WHITESPACE"," ",396],["T_STRING","false",396],";",["T_WHITESPACE","\n        ",396],["T_IF","if",397],["T_WHITESPACE"," ",397],"(","!",["T_VARIABLE","$order",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getId",397],"(",")",["T_WHITESPACE"," ",397],["T_BOOLEAN_OR","||",397],["T_WHITESPACE","\n            ",397],["T_VARIABLE","$order",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getState",398],"(",")",["T_WHITESPACE"," ",398],["T_IS_NOT_EQUAL","!=",398],["T_WHITESPACE"," ",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Magento",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Sales",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Model",398],["T_NS_SEPARATOR","\\",398],["T_STRING","Order",398],["T_DOUBLE_COLON","::",398],["T_STRING","STATE_PENDING_PAYMENT",398],["T_WHITESPACE"," ",398],["T_BOOLEAN_OR","||",398],["T_WHITESPACE","\n            ",398],"!",["T_VARIABLE","$amountCompared",399],["T_WHITESPACE","\n        ",399],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_THROW","throw",401],["T_WHITESPACE"," ",401],["T_NEW","new",401],["T_WHITESPACE"," ",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Magento",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Framework",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Exception",401],["T_NS_SEPARATOR","\\",401],["T_STRING","LocalizedException",401],"(",["T_WHITESPACE","\n                ",401],["T_STRING","__",402],"(",["T_CONSTANT_ENCAPSED_STRING","'Payment error. %value was not found.'",402],",",["T_WHITESPACE"," ",402],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",402],["T_WHITESPACE"," ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'Order'",402],"]",")",["T_WHITESPACE","\n            ",402],")",";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n\n        ",404],["T_VARIABLE","$fetchData",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","fetchTransactionInfo",406],"(",["T_VARIABLE","$order",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getPayment",406],"(",")",",",["T_WHITESPACE"," ",406],["T_VARIABLE","$response",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getPnref",406],"(",")",")",";",["T_WHITESPACE","\n        ",406],["T_IF","if",407],["T_WHITESPACE"," ",407],"(","!",["T_ISSET","isset",407],"(",["T_VARIABLE","$fetchData",407],"[",["T_CONSTANT_ENCAPSED_STRING","'custref'",407],"]",")",["T_WHITESPACE"," ",407],["T_BOOLEAN_OR","||",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$fetchData",407],"[",["T_CONSTANT_ENCAPSED_STRING","'custref'",407],"]",["T_WHITESPACE"," ",407],["T_IS_NOT_EQUAL","!=",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$order",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","getIncrementId",407],"(",")",")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n            ",407],["T_THROW","throw",408],["T_WHITESPACE"," ",408],["T_NEW","new",408],["T_WHITESPACE"," ",408],["T_NS_SEPARATOR","\\",408],["T_STRING","Magento",408],["T_NS_SEPARATOR","\\",408],["T_STRING","Framework",408],["T_NS_SEPARATOR","\\",408],["T_STRING","Exception",408],["T_NS_SEPARATOR","\\",408],["T_STRING","LocalizedException",408],"(",["T_WHITESPACE","\n                ",408],["T_STRING","__",409],"(",["T_CONSTANT_ENCAPSED_STRING","'Payment error. %value was not found.'",409],",",["T_WHITESPACE"," ",409],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",409],["T_WHITESPACE"," ",409],["T_DOUBLE_ARROW","=>",409],["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'Transaction'",409],"]",")",["T_WHITESPACE","\n            ",409],")",";",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE","\n\n        ",411],["T_RETURN","return",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$order",413],";",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Build request for getting token\n     *\n     * @param \\Magento\\Sales\\Model\\Order\\Payment $payment\n     * @return \\Magento\\Framework\\DataObject\n     *\/",416],["T_WHITESPACE","\n    ",421],["T_PROTECTED","protected",422],["T_WHITESPACE"," ",422],["T_FUNCTION","function",422],["T_WHITESPACE"," ",422],["T_STRING","_buildTokenRequest",422],"(",["T_NS_SEPARATOR","\\",422],["T_STRING","Magento",422],["T_NS_SEPARATOR","\\",422],["T_STRING","Sales",422],["T_NS_SEPARATOR","\\",422],["T_STRING","Model",422],["T_NS_SEPARATOR","\\",422],["T_STRING","Order",422],["T_NS_SEPARATOR","\\",422],["T_STRING","Payment",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$payment",422],")",["T_WHITESPACE","\n    ",422],"{",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$request",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","buildBasicRequest",424],"(",")",";",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$request",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","setCreatesecuretoken",425],"(",["T_CONSTANT_ENCAPSED_STRING","'Y'",425],")",["T_WHITESPACE","\n            ",425],["T_OBJECT_OPERATOR","->",426],["T_STRING","setSecuretokenid",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","mathRandom",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getUniqueHash",426],"(",")",")",["T_WHITESPACE","\n            ",426],["T_OBJECT_OPERATOR","->",427],["T_STRING","setTrxtype",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","_getTrxTokenType",427],"(",")",")",";",["T_WHITESPACE","\n\n        ",427],["T_VARIABLE","$order",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$payment",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getOrder",429],"(",")",";",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$request",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","setAmt",430],"(",["T_STRING","sprintf",430],"(",["T_CONSTANT_ENCAPSED_STRING","'%.2F'",430],",",["T_WHITESPACE"," ",430],["T_VARIABLE","$order",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","getBaseTotalDue",430],"(",")",")",")",["T_WHITESPACE","\n            ",430],["T_OBJECT_OPERATOR","->",431],["T_STRING","setCurrency",431],"(",["T_VARIABLE","$order",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","getBaseCurrencyCode",431],"(",")",")",";",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","addRequestOrderInfo",432],"(",["T_VARIABLE","$request",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$order",432],")",";",["T_WHITESPACE","\n\n        ",432],["T_VARIABLE","$request",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","fillCustomerContacts",434],"(",["T_VARIABLE","$order",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$request",434],")",";",["T_WHITESPACE","\n        ",434],["T_COMMENT","\/\/pass store Id to request\n",435],["T_WHITESPACE","        ",436],["T_VARIABLE","$request",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","setData",436],"(",["T_CONSTANT_ENCAPSED_STRING","'USER1'",436],",",["T_WHITESPACE"," ",436],["T_VARIABLE","$order",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getStoreId",436],"(",")",")",";",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$request",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","setData",437],"(",["T_CONSTANT_ENCAPSED_STRING","'USER2'",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_getSecureSilentPostHash",437],"(",["T_VARIABLE","$payment",437],")",")",";",["T_WHITESPACE","\n\n        ",437],["T_RETURN","return",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$request",439],";",["T_WHITESPACE","\n    ",439],"}",["T_WHITESPACE","\n\n    ",440],["T_DOC_COMMENT","\/**\n     * Get store id from response if exists\n     * or default\n     *\n     * @return int\n     *\/",442],["T_WHITESPACE","\n    ",447],["T_PROTECTED","protected",448],["T_WHITESPACE"," ",448],["T_FUNCTION","function",448],["T_WHITESPACE"," ",448],["T_STRING","_getStoreId",448],"(",")",["T_WHITESPACE","\n    ",448],"{",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$response",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getResponse",450],"(",")",";",["T_WHITESPACE","\n        ",450],["T_IF","if",451],["T_WHITESPACE"," ",451],"(",["T_VARIABLE","$response",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getData",451],"(",["T_CONSTANT_ENCAPSED_STRING","'user1'",451],")",")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n            ",451],["T_RETURN","return",452],["T_WHITESPACE"," ",452],["T_INT_CAST","(int)",452],["T_VARIABLE","$response",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getData",452],"(",["T_CONSTANT_ENCAPSED_STRING","'user1'",452],")",";",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE","\n        ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","storeManager",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getStore",454],"(",["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getStore",454],"(",")",")",["T_OBJECT_OPERATOR","->",454],["T_STRING","getId",454],"(",")",";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_DOC_COMMENT","\/**\n     * Return request object with basic information for gateway request\n     *\n     * @return \\Magento\\Paypal\\Model\\Payflow\\Request\n     *\/",457],["T_WHITESPACE","\n    ",461],["T_PUBLIC","public",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","buildBasicRequest",462],"(",")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_DOC_COMMENT","\/** @var \\Magento\\Paypal\\Model\\Payflow\\Request $request *\/",464],["T_WHITESPACE","\n        ",464],["T_VARIABLE","$request",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_requestFactory",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","create",465],"(",")",";",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$cscEditable",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getConfigData",466],"(",["T_CONSTANT_ENCAPSED_STRING","'csc_editable'",466],")",";",["T_WHITESPACE","\n\n        ",466],["T_VARIABLE","$data",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_STRING","parent",468],["T_DOUBLE_COLON","::",468],["T_STRING","buildBasicRequest",468],"(",")",";",["T_WHITESPACE","\n\n        ",468],["T_VARIABLE","$request",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","setData",470],"(",["T_VARIABLE","$data",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getData",470],"(",")",")",";",["T_WHITESPACE","\n\n        ",470],["T_VARIABLE","$request",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","setCancelurl",472],"(",["T_WHITESPACE","\n            ",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","_getCallbackUrl",473],"(",["T_CONSTANT_ENCAPSED_STRING","'cancelPayment'",473],")",["T_WHITESPACE","\n        ",473],")",["T_OBJECT_OPERATOR","->",474],["T_STRING","setErrorurl",474],"(",["T_WHITESPACE","\n            ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_getCallbackUrl",475],"(",["T_CONSTANT_ENCAPSED_STRING","'returnUrl'",475],")",["T_WHITESPACE","\n        ",475],")",["T_OBJECT_OPERATOR","->",476],["T_STRING","setSilentpost",476],"(",["T_WHITESPACE","\n            ",476],["T_CONSTANT_ENCAPSED_STRING","'TRUE'",477],["T_WHITESPACE","\n        ",477],")",["T_OBJECT_OPERATOR","->",478],["T_STRING","setSilentposturl",478],"(",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","_getCallbackUrl",479],"(",["T_CONSTANT_ENCAPSED_STRING","'silentPost'",479],")",["T_WHITESPACE","\n        ",479],")",["T_OBJECT_OPERATOR","->",480],["T_STRING","setReturnurl",480],"(",["T_WHITESPACE","\n            ",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_getCallbackUrl",481],"(",["T_CONSTANT_ENCAPSED_STRING","'returnUrl'",481],")",["T_WHITESPACE","\n        ",481],")",["T_OBJECT_OPERATOR","->",482],["T_STRING","setTemplate",482],"(",["T_WHITESPACE","\n            ",482],["T_STRING","self",483],["T_DOUBLE_COLON","::",483],["T_STRING","LAYOUT_TEMPLATE",483],["T_WHITESPACE","\n        ",483],")",["T_OBJECT_OPERATOR","->",484],["T_STRING","setDisablereceipt",484],"(",["T_WHITESPACE","\n            ",484],["T_CONSTANT_ENCAPSED_STRING","'TRUE'",485],["T_WHITESPACE","\n        ",485],")",["T_OBJECT_OPERATOR","->",486],["T_STRING","setCscrequired",486],"(",["T_WHITESPACE","\n            ",486],["T_VARIABLE","$cscEditable",487],["T_WHITESPACE"," ",487],["T_BOOLEAN_AND","&&",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getConfigData",487],"(",["T_CONSTANT_ENCAPSED_STRING","'csc_required'",487],")",["T_WHITESPACE"," ",487],"?",["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","'TRUE'",487],["T_WHITESPACE"," ",487],":",["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","'FALSE'",487],["T_WHITESPACE","\n        ",487],")",["T_OBJECT_OPERATOR","->",488],["T_STRING","setCscedit",488],"(",["T_WHITESPACE","\n            ",488],["T_VARIABLE","$cscEditable",489],["T_WHITESPACE"," ",489],"?",["T_WHITESPACE"," ",489],["T_CONSTANT_ENCAPSED_STRING","'TRUE'",489],["T_WHITESPACE"," ",489],":",["T_WHITESPACE"," ",489],["T_CONSTANT_ENCAPSED_STRING","'FALSE'",489],["T_WHITESPACE","\n        ",489],")",["T_OBJECT_OPERATOR","->",490],["T_STRING","setEmailcustomer",490],"(",["T_WHITESPACE","\n            ",490],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","getConfigData",491],"(",["T_CONSTANT_ENCAPSED_STRING","'email_confirmation'",491],")",["T_WHITESPACE"," ",491],"?",["T_WHITESPACE"," ",491],["T_CONSTANT_ENCAPSED_STRING","'TRUE'",491],["T_WHITESPACE"," ",491],":",["T_WHITESPACE"," ",491],["T_CONSTANT_ENCAPSED_STRING","'FALSE'",491],["T_WHITESPACE","\n        ",491],")",["T_OBJECT_OPERATOR","->",492],["T_STRING","setUrlmethod",492],"(",["T_WHITESPACE","\n            ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getConfigData",493],"(",["T_CONSTANT_ENCAPSED_STRING","'url_method'",493],")",["T_WHITESPACE","\n        ",493],")",";",["T_WHITESPACE","\n        ",494],["T_RETURN","return",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$request",495],";",["T_WHITESPACE","\n    ",495],"}",["T_WHITESPACE","\n\n    ",496],["T_DOC_COMMENT","\/**\n     * Get payment action code\n     *\n     * @return string\n     *\/",498],["T_WHITESPACE","\n    ",502],["T_PROTECTED","protected",503],["T_WHITESPACE"," ",503],["T_FUNCTION","function",503],["T_WHITESPACE"," ",503],["T_STRING","_getTrxTokenType",503],"(",")",["T_WHITESPACE","\n    ",503],"{",["T_WHITESPACE","\n        ",504],["T_SWITCH","switch",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getConfigData",505],"(",["T_CONSTANT_ENCAPSED_STRING","'payment_action'",505],")",")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n            ",505],["T_CASE","case",506],["T_WHITESPACE"," ",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Magento",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Paypal",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Model",506],["T_NS_SEPARATOR","\\",506],["T_STRING","Config",506],["T_DOUBLE_COLON","::",506],["T_STRING","PAYMENT_ACTION_AUTH",506],":",["T_WHITESPACE","\n                ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_STRING","self",507],["T_DOUBLE_COLON","::",507],["T_STRING","TRXTYPE_AUTH_ONLY",507],";",["T_WHITESPACE","\n            ",507],["T_CASE","case",508],["T_WHITESPACE"," ",508],["T_NS_SEPARATOR","\\",508],["T_STRING","Magento",508],["T_NS_SEPARATOR","\\",508],["T_STRING","Paypal",508],["T_NS_SEPARATOR","\\",508],["T_STRING","Model",508],["T_NS_SEPARATOR","\\",508],["T_STRING","Config",508],["T_DOUBLE_COLON","::",508],["T_STRING","PAYMENT_ACTION_SALE",508],":",["T_WHITESPACE","\n                ",508],["T_RETURN","return",509],["T_WHITESPACE"," ",509],["T_STRING","self",509],["T_DOUBLE_COLON","::",509],["T_STRING","TRXTYPE_SALE",509],";",["T_WHITESPACE","\n            ",509],["T_DEFAULT","default",510],":",["T_WHITESPACE","\n                ",510],["T_BREAK","break",511],";",["T_WHITESPACE","\n        ",511],"}",["T_WHITESPACE","\n    ",512],"}",["T_WHITESPACE","\n\n    ",513],["T_DOC_COMMENT","\/**\n     * If response is failed throw exception\n     * Set token data in payment object\n     *\n     * @param \\Magento\\Framework\\DataObject $response\n     * @param \\Magento\\Sales\\Model\\Order\\Payment $payment\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",515],["T_WHITESPACE","\n    ",523],["T_PROTECTED","protected",524],["T_WHITESPACE"," ",524],["T_FUNCTION","function",524],["T_WHITESPACE"," ",524],["T_STRING","_processTokenErrors",524],"(",["T_VARIABLE","$response",524],",",["T_WHITESPACE"," ",524],["T_VARIABLE","$payment",524],")",["T_WHITESPACE","\n    ",524],"{",["T_WHITESPACE","\n        ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(","!",["T_VARIABLE","$response",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getSecuretoken",526],"(",")",["T_WHITESPACE"," ",526],["T_BOOLEAN_AND","&&",526],["T_WHITESPACE","\n            ",526],["T_VARIABLE","$response",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getResult",527],"(",")",["T_WHITESPACE"," ",527],["T_IS_NOT_EQUAL","!=",527],["T_WHITESPACE"," ",527],["T_STRING","self",527],["T_DOUBLE_COLON","::",527],["T_STRING","RESPONSE_CODE_APPROVED",527],["T_WHITESPACE"," ",527],["T_BOOLEAN_AND","&&",527],["T_WHITESPACE","\n            ",527],["T_VARIABLE","$response",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","getResult",528],"(",")",["T_WHITESPACE"," ",528],["T_IS_NOT_EQUAL","!=",528],["T_WHITESPACE"," ",528],["T_STRING","self",528],["T_DOUBLE_COLON","::",528],["T_STRING","RESPONSE_CODE_FRAUDSERVICE_FILTER",528],["T_WHITESPACE","\n        ",528],")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n            ",529],["T_THROW","throw",530],["T_WHITESPACE"," ",530],["T_NEW","new",530],["T_WHITESPACE"," ",530],["T_NS_SEPARATOR","\\",530],["T_STRING","Magento",530],["T_NS_SEPARATOR","\\",530],["T_STRING","Framework",530],["T_NS_SEPARATOR","\\",530],["T_STRING","Exception",530],["T_NS_SEPARATOR","\\",530],["T_STRING","LocalizedException",530],"(",["T_STRING","__",530],"(",["T_VARIABLE","$response",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getRespmsg",530],"(",")",")",")",";",["T_WHITESPACE","\n        ",530],"}",["T_WHITESPACE"," ",531],["T_ELSE","else",531],["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_VARIABLE","$payment",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","setAdditionalInformation",532],"(",["T_WHITESPACE","\n                ",532],["T_CONSTANT_ENCAPSED_STRING","'secure_token_id'",533],",",["T_WHITESPACE","\n                ",533],["T_VARIABLE","$response",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getSecuretokenid",534],"(",")",["T_WHITESPACE","\n            ",534],")",["T_OBJECT_OPERATOR","->",535],["T_STRING","setAdditionalInformation",535],"(",["T_WHITESPACE","\n                ",535],["T_CONSTANT_ENCAPSED_STRING","'secure_token'",536],",",["T_WHITESPACE","\n                ",536],["T_VARIABLE","$response",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getSecuretoken",537],"(",")",["T_WHITESPACE","\n            ",537],")",";",["T_WHITESPACE","\n        ",538],"}",["T_WHITESPACE","\n    ",539],"}",["T_WHITESPACE","\n\n    ",540],["T_DOC_COMMENT","\/**\n     * Return secure hash value for silent post request\n     *\n     * @param \\Magento\\Sales\\Model\\Order\\Payment $payment\n     * @return string\n     *\/",542],["T_WHITESPACE","\n    ",547],["T_PROTECTED","protected",548],["T_WHITESPACE"," ",548],["T_FUNCTION","function",548],["T_WHITESPACE"," ",548],["T_STRING","_getSecureSilentPostHash",548],"(",["T_VARIABLE","$payment",548],")",["T_WHITESPACE","\n    ",548],"{",["T_WHITESPACE","\n        ",549],["T_RETURN","return",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$payment",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getAdditionalInformation",550],"(",["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","_secureSilentPostHashKey",550],")",";",["T_WHITESPACE","\n    ",550],"}",["T_WHITESPACE","\n\n    ",551],["T_DOC_COMMENT","\/**\n     * Generate end return new secure hash value\n     *\n     * @param \\Magento\\Sales\\Model\\Order\\Payment $payment\n     * @return string\n     *\/",553],["T_WHITESPACE","\n    ",558],["T_PROTECTED","protected",559],["T_WHITESPACE"," ",559],["T_FUNCTION","function",559],["T_WHITESPACE"," ",559],["T_STRING","_generateSecureSilentPostHash",559],"(",["T_VARIABLE","$payment",559],")",["T_WHITESPACE","\n    ",559],"{",["T_WHITESPACE","\n        ",560],["T_VARIABLE","$secureHash",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_STRING","md5",561],"(",["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","mathRandom",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","getRandomString",561],"(",["T_LNUMBER","10",561],")",")",";",["T_WHITESPACE","\n        ",561],["T_VARIABLE","$payment",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","setAdditionalInformation",562],"(",["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","_secureSilentPostHashKey",562],",",["T_WHITESPACE"," ",562],["T_VARIABLE","$secureHash",562],")",";",["T_WHITESPACE","\n        ",562],["T_RETURN","return",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$secureHash",563],";",["T_WHITESPACE","\n    ",563],"}",["T_WHITESPACE","\n\n    ",564],["T_DOC_COMMENT","\/**\n     * Get callback url\n     *\n     * @param string $actionName\n     * @return string\n     *\/",566],["T_WHITESPACE","\n    ",571],["T_PROTECTED","protected",572],["T_WHITESPACE"," ",572],["T_FUNCTION","function",572],["T_WHITESPACE"," ",572],["T_STRING","_getCallbackUrl",572],"(",["T_VARIABLE","$actionName",572],")",["T_WHITESPACE","\n    ",572],"{",["T_WHITESPACE","\n        ",573],["T_IF","if",574],["T_WHITESPACE"," ",574],"(",["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","_requestHttp",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","getParam",574],"(",["T_CONSTANT_ENCAPSED_STRING","'website'",574],")",")",["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n            ",574],["T_DOC_COMMENT","\/** @var $website \\Magento\\Store\\Model\\Website *\/",575],["T_WHITESPACE","\n            ",575],["T_VARIABLE","$website",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_websiteFactory",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","create",576],"(",")",["T_OBJECT_OPERATOR","->",576],["T_STRING","load",576],"(",["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_requestHttp",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getParam",576],"(",["T_CONSTANT_ENCAPSED_STRING","'website'",576],")",")",";",["T_WHITESPACE","\n            ",576],["T_VARIABLE","$secure",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_scopeConfig",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","isSetFlag",577],"(",["T_WHITESPACE","\n                ",577],["T_NS_SEPARATOR","\\",578],["T_STRING","Magento",578],["T_NS_SEPARATOR","\\",578],["T_STRING","Store",578],["T_NS_SEPARATOR","\\",578],["T_STRING","Model",578],["T_NS_SEPARATOR","\\",578],["T_STRING","Store",578],["T_DOUBLE_COLON","::",578],["T_STRING","XML_PATH_SECURE_IN_FRONTEND",578],",",["T_WHITESPACE","\n                ",578],["T_NS_SEPARATOR","\\",579],["T_STRING","Magento",579],["T_NS_SEPARATOR","\\",579],["T_STRING","Store",579],["T_NS_SEPARATOR","\\",579],["T_STRING","Model",579],["T_NS_SEPARATOR","\\",579],["T_STRING","ScopeInterface",579],["T_DOUBLE_COLON","::",579],["T_STRING","SCOPE_STORE",579],",",["T_WHITESPACE","\n                ",579],["T_VARIABLE","$website",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getDefaultStore",580],"(",")",["T_WHITESPACE","\n            ",580],")",";",["T_WHITESPACE","\n            ",581],["T_VARIABLE","$path",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_VARIABLE","$secure",582],["T_WHITESPACE"," ",582],"?",["T_WHITESPACE"," ",582],["T_NS_SEPARATOR","\\",582],["T_STRING","Magento",582],["T_NS_SEPARATOR","\\",582],["T_STRING","Store",582],["T_NS_SEPARATOR","\\",582],["T_STRING","Model",582],["T_NS_SEPARATOR","\\",582],["T_STRING","Store",582],["T_DOUBLE_COLON","::",582],["T_STRING","XML_PATH_SECURE_BASE_LINK_URL",582],["T_WHITESPACE"," ",582],":",["T_WHITESPACE"," ",582],["T_NS_SEPARATOR","\\",582],["T_STRING","Magento",582],["T_NS_SEPARATOR","\\",582],["T_STRING","Store",582],["T_NS_SEPARATOR","\\",582],["T_STRING","Model",582],["T_NS_SEPARATOR","\\",582],["T_STRING","Store",582],["T_DOUBLE_COLON","::",582],["T_STRING","XML_PATH_UNSECURE_BASE_LINK_URL",582],";",["T_WHITESPACE","\n            ",582],["T_VARIABLE","$websiteUrl",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","_scopeConfig",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getValue",583],"(",["T_WHITESPACE","\n                ",583],["T_VARIABLE","$path",584],",",["T_WHITESPACE","\n                ",584],["T_NS_SEPARATOR","\\",585],["T_STRING","Magento",585],["T_NS_SEPARATOR","\\",585],["T_STRING","Store",585],["T_NS_SEPARATOR","\\",585],["T_STRING","Model",585],["T_NS_SEPARATOR","\\",585],["T_STRING","ScopeInterface",585],["T_DOUBLE_COLON","::",585],["T_STRING","SCOPE_STORE",585],",",["T_WHITESPACE","\n                ",585],["T_VARIABLE","$website",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getDefaultStore",586],"(",")",["T_WHITESPACE","\n            ",586],")",";",["T_WHITESPACE","\n        ",587],"}",["T_WHITESPACE"," ",588],["T_ELSE","else",588],["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n            ",588],["T_VARIABLE","$secure",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","_scopeConfig",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","isSetFlag",589],"(",["T_WHITESPACE","\n                ",589],["T_NS_SEPARATOR","\\",590],["T_STRING","Magento",590],["T_NS_SEPARATOR","\\",590],["T_STRING","Store",590],["T_NS_SEPARATOR","\\",590],["T_STRING","Model",590],["T_NS_SEPARATOR","\\",590],["T_STRING","Store",590],["T_DOUBLE_COLON","::",590],["T_STRING","XML_PATH_SECURE_IN_FRONTEND",590],",",["T_WHITESPACE","\n                ",590],["T_NS_SEPARATOR","\\",591],["T_STRING","Magento",591],["T_NS_SEPARATOR","\\",591],["T_STRING","Store",591],["T_NS_SEPARATOR","\\",591],["T_STRING","Model",591],["T_NS_SEPARATOR","\\",591],["T_STRING","ScopeInterface",591],["T_DOUBLE_COLON","::",591],["T_STRING","SCOPE_STORE",591],["T_WHITESPACE","\n            ",591],")",";",["T_WHITESPACE","\n            ",592],["T_VARIABLE","$websiteUrl",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","storeManager",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","getStore",593],"(",")",["T_OBJECT_OPERATOR","->",593],["T_STRING","getBaseUrl",593],"(",["T_NS_SEPARATOR","\\",593],["T_STRING","Magento",593],["T_NS_SEPARATOR","\\",593],["T_STRING","Framework",593],["T_NS_SEPARATOR","\\",593],["T_STRING","UrlInterface",593],["T_DOUBLE_COLON","::",593],["T_STRING","URL_TYPE_LINK",593],",",["T_WHITESPACE"," ",593],["T_VARIABLE","$secure",593],")",";",["T_WHITESPACE","\n        ",593],"}",["T_WHITESPACE","\n\n        ",594],["T_RETURN","return",596],["T_WHITESPACE"," ",596],["T_VARIABLE","$websiteUrl",596],["T_WHITESPACE"," ",596],".",["T_WHITESPACE"," ",596],["T_CONSTANT_ENCAPSED_STRING","'paypal\/'",596],["T_WHITESPACE"," ",596],".",["T_WHITESPACE"," ",596],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_callbackController",596],["T_WHITESPACE"," ",596],".",["T_WHITESPACE"," ",596],["T_CONSTANT_ENCAPSED_STRING","'\/'",596],["T_WHITESPACE"," ",596],".",["T_WHITESPACE"," ",596],["T_VARIABLE","$actionName",596],";",["T_WHITESPACE","\n    ",596],"}",["T_WHITESPACE","\n",597],"}",["T_WHITESPACE","\n",598]]
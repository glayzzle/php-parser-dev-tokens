[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Paypal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Observer",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Unit",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Matcher",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MethodInvokedAtIndex",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Class AddBillingAgreementToSessionObserverTest\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","AddBillingAgreementToSessionObserverTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PHPUnit_Framework_TestCase",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Observer\\AddBillingAgreementToSessionObserver\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$_model",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Event\\Observer\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_observer",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DataObject\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$_event",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Paypal\\Model\\Billing\\Agreement Factory|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_agreementFactory",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\Session|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_checkoutSession",38],";",["T_WHITESPACE","\n\n    ",38],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","setUp",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_event",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_NEW","new",42],["T_WHITESPACE"," ",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","DataObject",42],"(",")",";",["T_WHITESPACE","\n\n        ",42],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_observer",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_NEW","new",44],["T_WHITESPACE"," ",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Event",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Observer",44],"(",")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_observer",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","setEvent",45],"(",["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_event",45],")",";",["T_WHITESPACE","\n\n        ",45],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_agreementFactory",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getMock",47],"(",["T_WHITESPACE","\n            ",47],["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Paypal",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Model",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Billing",48],["T_NS_SEPARATOR","\\",48],["T_STRING","AgreementFactory",48],["T_DOUBLE_COLON","::",48],["T_CLASS","class",48],",",["T_WHITESPACE","\n            ",48],"[",["T_CONSTANT_ENCAPSED_STRING","'create'",49],"]",",",["T_WHITESPACE","\n            ",49],"[","]",",",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","''",51],",",["T_WHITESPACE","\n            ",51],["T_STRING","false",52],["T_WHITESPACE","\n        ",52],")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_checkoutSession",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getMock",54],"(",["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Checkout",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Session",54],["T_DOUBLE_COLON","::",54],["T_CLASS","class",54],",",["T_WHITESPACE"," ",54],"[","]",",",["T_WHITESPACE"," ",54],"[","]",",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","''",54],",",["T_WHITESPACE"," ",54],["T_STRING","false",54],")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$objectManagerHelper",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_NEW","new",55],["T_WHITESPACE"," ",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","TestFramework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Unit",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Helper",55],["T_NS_SEPARATOR","\\",55],["T_STRING","ObjectManager",55],"(",["T_VARIABLE","$this",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_model",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$objectManagerHelper",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getObject",56],"(",["T_WHITESPACE","\n            ",56],["T_NS_SEPARATOR","\\",57],["T_STRING","Magento",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Paypal",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Observer",57],["T_NS_SEPARATOR","\\",57],["T_STRING","AddBillingAgreementToSessionObserver",57],["T_DOUBLE_COLON","::",57],["T_CLASS","class",57],",",["T_WHITESPACE","\n            ",57],"[",["T_WHITESPACE","\n                ",58],["T_CONSTANT_ENCAPSED_STRING","'agreementFactory'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_agreementFactory",59],",",["T_WHITESPACE","\n                ",59],["T_CONSTANT_ENCAPSED_STRING","'checkoutSession'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_checkoutSession",60],",",["T_WHITESPACE","\n            ",60],"]",["T_WHITESPACE","\n        ",61],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","testAddBillingAgreementToSessionNoData",65],"(",")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$payment",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getMock",67],"(",["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Sales",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Order",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Payment",67],["T_DOUBLE_COLON","::",67],["T_CLASS","class",67],",",["T_WHITESPACE"," ",67],"[","]",",",["T_WHITESPACE"," ",67],"[","]",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","''",67],",",["T_WHITESPACE"," ",67],["T_STRING","false",67],")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$payment",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","expects",68],"(",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","once",69],"(",")",["T_WHITESPACE","\n        ",69],")",["T_OBJECT_OPERATOR","->",70],["T_STRING","method",70],"(",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'__call'",71],["T_WHITESPACE","\n        ",71],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","with",72],"(",["T_WHITESPACE","\n            ",72],["T_CONSTANT_ENCAPSED_STRING","'getBillingAgreementData'",73],["T_WHITESPACE","\n        ",73],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","will",74],"(",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","returnValue",75],"(",["T_STRING","null",75],")",["T_WHITESPACE","\n        ",75],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_event",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setPayment",77],"(",["T_VARIABLE","$payment",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_agreementFactory",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","expects",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","never",78],"(",")",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","method",78],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",78],")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_checkoutSession",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","expects",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","once",79],"(",")",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","method",79],"(",["T_CONSTANT_ENCAPSED_STRING","'__call'",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","with",79],"(",["T_CONSTANT_ENCAPSED_STRING","'unsLastBillingAgreementReferenceId'",79],")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_model",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","execute",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_observer",80],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @param bool $isValid\n     * @dataProvider addBillingAgreementToSessionDataProvider\n     *\/",83],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","testAddBillingAgreementToSession",87],"(",["T_VARIABLE","$isValid",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$agreement",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMock",89],"(",["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Paypal",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Model",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Billing",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Agreement",89],["T_DOUBLE_COLON","::",89],["T_CLASS","class",89],",",["T_WHITESPACE"," ",89],"[","]",",",["T_WHITESPACE"," ",89],"[","]",",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","''",89],",",["T_WHITESPACE"," ",89],["T_STRING","false",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$agreement",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","expects",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","once",90],"(",")",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","method",90],"(",["T_CONSTANT_ENCAPSED_STRING","'isValid'",90],")",["T_OBJECT_OPERATOR","->",90],["T_STRING","will",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","returnValue",90],"(",["T_VARIABLE","$isValid",90],")",")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$comment",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getMockForAbstractClass",91],"(",["T_WHITESPACE","\n            ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Model",92],["T_NS_SEPARATOR","\\",92],["T_STRING","AbstractModel",92],["T_DOUBLE_COLON","::",92],["T_CLASS","class",92],",",["T_WHITESPACE","\n            ",92],"[","]",",",["T_WHITESPACE","\n            ",93],["T_CONSTANT_ENCAPSED_STRING","''",94],",",["T_WHITESPACE","\n            ",94],["T_STRING","false",95],",",["T_WHITESPACE","\n            ",95],["T_STRING","true",96],",",["T_WHITESPACE","\n            ",96],["T_STRING","true",97],",",["T_WHITESPACE","\n            ",97],"[",["T_CONSTANT_ENCAPSED_STRING","'__wakeup'",98],"]",["T_WHITESPACE","\n        ",98],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$order",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getMock",100],"(",["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Sales",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Model",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Order",100],["T_DOUBLE_COLON","::",100],["T_CLASS","class",100],",",["T_WHITESPACE"," ",100],"[","]",",",["T_WHITESPACE"," ",100],"[","]",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","''",100],",",["T_WHITESPACE"," ",100],["T_STRING","false",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$order",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","expects",101],"(",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","once",102],"(",")",["T_WHITESPACE","\n        ",102],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","method",103],"(",["T_WHITESPACE","\n            ",103],["T_CONSTANT_ENCAPSED_STRING","'addStatusHistoryComment'",104],["T_WHITESPACE","\n        ",104],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","with",105],"(",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$isValid",106],["T_WHITESPACE"," ",106],"?",["T_WHITESPACE"," ",106],["T_STRING","__",106],"(",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'Created billing agreement #%1.'",107],",",["T_WHITESPACE","\n                ",107],["T_CONSTANT_ENCAPSED_STRING","'agreement reference id'",108],["T_WHITESPACE","\n            ",108],")",["T_WHITESPACE"," ",109],":",["T_WHITESPACE"," ",109],["T_STRING","__",109],"(",["T_WHITESPACE","\n                ",109],["T_CONSTANT_ENCAPSED_STRING","'We can\\'t create a billing agreement for this order.'",110],["T_WHITESPACE","\n            ",110],")",["T_WHITESPACE","\n        ",111],")",["T_OBJECT_OPERATOR","->",112],["T_STRING","will",112],"(",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","returnValue",113],"(",["T_VARIABLE","$comment",113],")",["T_WHITESPACE","\n        ",113],")",";",["T_WHITESPACE","\n        ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$isValid",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$agreement",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","expects",116],"(",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","any",117],"(",")",["T_WHITESPACE","\n            ",117],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","method",118],"(",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'__call'",119],["T_WHITESPACE","\n            ",119],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","with",120],"(",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'getReferenceId'",121],["T_WHITESPACE","\n            ",121],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","will",122],"(",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","returnValue",123],"(",["T_CONSTANT_ENCAPSED_STRING","'agreement reference id'",123],")",["T_WHITESPACE","\n            ",123],")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$agreement",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","expects",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","once",125],"(",")",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","method",125],"(",["T_CONSTANT_ENCAPSED_STRING","'addOrderRelation'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","with",125],"(",["T_VARIABLE","$order",125],")",";",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$order",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","expects",126],"(",["T_NEW","new",126],["T_WHITESPACE"," ",126],["T_STRING","MethodInvokedAtIndex",126],"(",["T_LNUMBER","0",126],")",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","method",126],"(",["T_CONSTANT_ENCAPSED_STRING","'addRelatedObject'",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","with",126],"(",["T_VARIABLE","$agreement",126],")",";",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_checkoutSession",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","expects",127],"(",["T_WHITESPACE","\n                ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","once",128],"(",")",["T_WHITESPACE","\n            ",128],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","method",129],"(",["T_WHITESPACE","\n                ",129],["T_CONSTANT_ENCAPSED_STRING","'__call'",130],["T_WHITESPACE","\n            ",130],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","with",131],"(",["T_WHITESPACE","\n                ",131],["T_CONSTANT_ENCAPSED_STRING","'setLastBillingAgreementReferenceId'",132],",",["T_WHITESPACE","\n                ",132],"[",["T_CONSTANT_ENCAPSED_STRING","'agreement reference id'",133],"]",["T_WHITESPACE","\n            ",133],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE"," ",135],["T_ELSE","else",135],["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_checkoutSession",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","expects",136],"(",["T_WHITESPACE","\n                ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","once",137],"(",")",["T_WHITESPACE","\n            ",137],")",["T_OBJECT_OPERATOR","->",138],["T_STRING","method",138],"(",["T_WHITESPACE","\n                ",138],["T_CONSTANT_ENCAPSED_STRING","'__call'",139],["T_WHITESPACE","\n            ",139],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","with",140],"(",["T_WHITESPACE","\n                ",140],["T_CONSTANT_ENCAPSED_STRING","'unsLastBillingAgreementReferenceId'",141],["T_WHITESPACE","\n            ",141],")",";",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$agreement",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","expects",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","never",143],"(",")",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","method",143],"(",["T_CONSTANT_ENCAPSED_STRING","'__call'",143],")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$order",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","expects",145],"(",["T_NEW","new",145],["T_WHITESPACE"," ",145],["T_STRING","MethodInvokedAtIndex",145],"(",["T_VARIABLE","$isValid",145],["T_WHITESPACE"," ",145],"?",["T_WHITESPACE"," ",145],["T_LNUMBER","1",145],["T_WHITESPACE"," ",145],":",["T_WHITESPACE"," ",145],["T_LNUMBER","0",145],")",")",["T_OBJECT_OPERATOR","->",145],["T_STRING","method",145],"(",["T_CONSTANT_ENCAPSED_STRING","'addRelatedObject'",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","with",145],"(",["T_VARIABLE","$comment",145],")",";",["T_WHITESPACE","\n\n        ",145],["T_VARIABLE","$payment",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getMock",147],"(",["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Sales",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Model",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Order",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Payment",147],["T_DOUBLE_COLON","::",147],["T_CLASS","class",147],",",["T_WHITESPACE"," ",147],"[","]",",",["T_WHITESPACE"," ",147],"[","]",",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","''",147],",",["T_WHITESPACE"," ",147],["T_STRING","false",147],")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$payment",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","expects",148],"(",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","once",149],"(",")",["T_WHITESPACE","\n        ",149],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","method",150],"(",["T_WHITESPACE","\n            ",150],["T_CONSTANT_ENCAPSED_STRING","'__call'",151],["T_WHITESPACE","\n        ",151],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","with",152],"(",["T_WHITESPACE","\n            ",152],["T_CONSTANT_ENCAPSED_STRING","'getBillingAgreementData'",153],["T_WHITESPACE","\n        ",153],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","will",154],"(",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","returnValue",155],"(",["T_CONSTANT_ENCAPSED_STRING","'not empty'",155],")",["T_WHITESPACE","\n        ",155],")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$payment",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","expects",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","once",157],"(",")",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","method",157],"(",["T_CONSTANT_ENCAPSED_STRING","'getOrder'",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","will",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","returnValue",157],"(",["T_VARIABLE","$order",157],")",")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$agreement",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","expects",158],"(",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","once",159],"(",")",["T_WHITESPACE","\n        ",159],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","method",160],"(",["T_WHITESPACE","\n            ",160],["T_CONSTANT_ENCAPSED_STRING","'importOrderPayment'",161],["T_WHITESPACE","\n        ",161],")",["T_OBJECT_OPERATOR","->",162],["T_STRING","with",162],"(",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$payment",163],["T_WHITESPACE","\n        ",163],")",["T_OBJECT_OPERATOR","->",164],["T_STRING","will",164],"(",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","returnValue",165],"(",["T_VARIABLE","$agreement",165],")",["T_WHITESPACE","\n        ",165],")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_event",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","setPayment",167],"(",["T_VARIABLE","$payment",167],")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_agreementFactory",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","expects",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","once",168],"(",")",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","method",168],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",168],")",["T_OBJECT_OPERATOR","->",168],["T_STRING","will",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","returnValue",168],"(",["T_VARIABLE","$agreement",168],")",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_model",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","execute",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_observer",169],")",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","addBillingAgreementToSessionDataProvider",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],"[","[",["T_STRING","true",174],"]",",",["T_WHITESPACE"," ",174],"[",["T_STRING","false",174],"]","]",";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n",175],"}",["T_WHITESPACE","\n",176]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CatalogRuleConfigurable",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CatalogRule",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Indexer",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ConfigurableProduct",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Type",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Configurable",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogRuleConfigurable",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Plugin",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogRule",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigurableProductsProvider",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Class ReindexProduct. Add configurable sub-products to reindex\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ProductRuleReindex",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/** @var Configurable *\/",17],["T_WHITESPACE","\n    ",17],["T_PRIVATE","private",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$configurable",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/** @var ConfigurableProductsProvider *\/",20],["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$configurableProductsProvider",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @param Configurable $configurable\n     * @param ConfigurableProductsProvider $configurableProductsProvider\n     *\/",23],["T_WHITESPACE","\n    ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","__construct",27],"(",["T_WHITESPACE","\n        ",27],["T_STRING","Configurable",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$configurable",28],",",["T_WHITESPACE","\n        ",28],["T_STRING","ConfigurableProductsProvider",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$configurableProductsProvider",29],["T_WHITESPACE","\n    ",29],")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","configurable",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$configurable",31],";",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","configurableProductsProvider",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$configurableProductsProvider",32],";",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\CatalogRule\\Model\\Indexer\\Product\\ProductRuleIndexer $subject\n     * @param \\Closure $proceed\n     * @param int $id\n     *\n     * @return void\n     *\/",35],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","aroundExecuteRow",42],"(",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","CatalogRule",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Model",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Indexer",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Product",43],["T_NS_SEPARATOR","\\",43],["T_STRING","ProductRuleIndexer",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$subject",43],",",["T_WHITESPACE","\n        ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Closure",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$proceed",44],",",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$id",45],["T_WHITESPACE","\n    ",45],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$configurableProductIds",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","configurableProductsProvider",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getIds",47],"(","[",["T_VARIABLE","$id",47],"]",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","reindexSubProducts",48],"(",["T_VARIABLE","$configurableProductIds",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$subject",48],")",";",["T_WHITESPACE","\n        ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(","!",["T_VARIABLE","$configurableProductIds",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$proceed",50],"(",["T_VARIABLE","$id",50],")",";",["T_WHITESPACE","\n        ",50],"}",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\CatalogRule\\Model\\Indexer\\Product\\ProductRuleIndexer $subject\n     * @param \\Closure $proceed\n     * @param array $ids\n     *\n     * @return void\n     *\/",54],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","aroundExecuteList",61],"(",["T_WHITESPACE","\n        ",61],["T_NS_SEPARATOR","\\",62],["T_STRING","Magento",62],["T_NS_SEPARATOR","\\",62],["T_STRING","CatalogRule",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Model",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Indexer",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Product",62],["T_NS_SEPARATOR","\\",62],["T_STRING","ProductRuleIndexer",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$subject",62],",",["T_WHITESPACE","\n        ",62],["T_NS_SEPARATOR","\\",63],["T_STRING","Closure",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$proceed",63],",",["T_WHITESPACE","\n        ",63],["T_ARRAY","array",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$ids",64],["T_WHITESPACE","\n    ",64],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$configurableProductIds",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","configurableProductsProvider",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getIds",66],"(",["T_VARIABLE","$ids",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$subProducts",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","reindexSubProducts",67],"(",["T_VARIABLE","$configurableProductIds",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$subject",67],")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$ids",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","array_diff",68],"(",["T_VARIABLE","$ids",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$configurableProductIds",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$subProducts",68],")",";",["T_WHITESPACE","\n        ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$ids",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$proceed",70],"(",["T_VARIABLE","$ids",70],")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * @param array $configurableIds\n     * @param \\Magento\\CatalogRule\\Model\\Indexer\\Product\\ProductRuleIndexer $subject\n     *\n     * @return array\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PRIVATE","private",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","reindexSubProducts",80],"(",["T_WHITESPACE","\n        ",80],["T_ARRAY","array",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$configurableIds",81],",",["T_WHITESPACE","\n        ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","CatalogRule",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Model",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Indexer",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Product",82],["T_NS_SEPARATOR","\\",82],["T_STRING","ProductRuleIndexer",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$subject",82],["T_WHITESPACE","\n    ",82],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$subProducts",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[","]",";",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$configurableIds",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$subProducts",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","array_values",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","configurable",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getChildrenIds",86],"(",["T_VARIABLE","$configurableIds",86],")","[",["T_LNUMBER","0",86],"]",")",";",["T_WHITESPACE","\n            ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$subProducts",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                ",87],["T_VARIABLE","$subject",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","executeList",88],"(",["T_VARIABLE","$subProducts",88],")",";",["T_WHITESPACE","\n            ",88],"}",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$subProducts",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n",92],"}",["T_WHITESPACE","\n",93]]
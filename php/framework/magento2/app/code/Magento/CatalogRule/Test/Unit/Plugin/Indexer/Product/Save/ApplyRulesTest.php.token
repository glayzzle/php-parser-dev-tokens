[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Test",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unit",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Save",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","TestFramework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Unit",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ObjectManager",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","ApplyRulesTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_NS_SEPARATOR","\\",10],["T_STRING","PHPUnit_Framework_TestCase",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogRule\\Model\\Indexer\\Product\\ProductRuleProcessor|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_PRIVATE","private",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$productRuleProcessor",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Product|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PRIVATE","private",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$subject",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Model\\AbstractModel|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$model",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogRule\\Plugin\\Indexer\\Product\\Save\\ApplyRules\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$plugin",30],";",["T_WHITESPACE","\n\n    ",30],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","setUp",32],"(",")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","productRuleProcessor",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_WHITESPACE","\n            ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","getMockBuilder",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","CatalogRule",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Model",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Indexer",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Product",35],["T_NS_SEPARATOR","\\",35],["T_STRING","ProductRuleProcessor",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],")",["T_WHITESPACE","\n            ",35],["T_OBJECT_OPERATOR","->",36],["T_STRING","disableOriginalConstructor",36],"(",")",["T_WHITESPACE","\n            ",36],["T_OBJECT_OPERATOR","->",37],["T_STRING","getMock",37],"(",")",";",["T_WHITESPACE","\n\n        ",37],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","subject",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getMockBuilder",39],"(",["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Catalog",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Model",39],["T_NS_SEPARATOR","\\",39],["T_STRING","ResourceModel",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Product",39],["T_DOUBLE_COLON","::",39],["T_CLASS","class",39],")",["T_WHITESPACE","\n            ",39],["T_OBJECT_OPERATOR","->",40],["T_STRING","disableOriginalConstructor",40],"(",")",["T_WHITESPACE","\n            ",40],["T_OBJECT_OPERATOR","->",41],["T_STRING","getMock",41],"(",")",";",["T_WHITESPACE","\n\n        ",41],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","model",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getMockForAbstractClass",43],"(",["T_WHITESPACE","\n            ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Framework",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Model",44],["T_NS_SEPARATOR","\\",44],["T_STRING","AbstractModel",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],",",["T_WHITESPACE","\n            ",44],"[","]",",",["T_WHITESPACE","\n            ",45],["T_CONSTANT_ENCAPSED_STRING","''",46],",",["T_WHITESPACE","\n            ",46],["T_STRING","false",47],",",["T_WHITESPACE","\n            ",47],["T_STRING","true",48],",",["T_WHITESPACE","\n            ",48],["T_STRING","true",49],",",["T_WHITESPACE","\n            ",49],"[",["T_CONSTANT_ENCAPSED_STRING","'getIsMassupdate'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'getId'",50],"]",["T_WHITESPACE","\n        ",50],")",";",["T_WHITESPACE","\n\n        ",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","plugin",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],"(",["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_STRING","ObjectManager",53],"(",["T_VARIABLE","$this",53],")",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","getObject",53],"(",["T_WHITESPACE","\n            ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","CatalogRule",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Plugin",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Indexer",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Product",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Save",54],["T_NS_SEPARATOR","\\",54],["T_STRING","ApplyRules",54],["T_DOUBLE_COLON","::",54],["T_CLASS","class",54],",",["T_WHITESPACE","\n            ",54],"[",["T_WHITESPACE","\n                ",55],["T_CONSTANT_ENCAPSED_STRING","'productRuleProcessor'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","productRuleProcessor",56],",",["T_WHITESPACE","\n            ",56],"]",["T_WHITESPACE","\n        ",57],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testAfterSave",61],"(",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","model",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","expects",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","once",63],"(",")",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","method",63],"(",["T_CONSTANT_ENCAPSED_STRING","'getIsMassupdate'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","willReturn",63],"(",["T_STRING","null",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","model",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","expects",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","once",64],"(",")",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","method",64],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",64],")",["T_OBJECT_OPERATOR","->",64],["T_STRING","willReturn",64],"(",["T_LNUMBER","1",64],")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","productRuleProcessor",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","expects",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","once",66],"(",")",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","method",66],"(",["T_CONSTANT_ENCAPSED_STRING","'reindexRow'",66],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","willReturnSelf",66],"(",")",";",["T_WHITESPACE","\n\n        ",66],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertSame",68],"(",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","subject",69],",",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","plugin",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","afterSave",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","subject",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","subject",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","model",70],")",["T_WHITESPACE","\n        ",70],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n",72],"}",["T_WHITESPACE","\n",73]]
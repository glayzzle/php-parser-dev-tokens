[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CatalogRule",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unit",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Indexer",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogRule",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Indexer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AbstractIndexer",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","AbstractIndexerTest",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PHPUnit_Framework_TestCase",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogRule\\Model\\Indexer\\IndexBuilder|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$indexBuilder",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var AbstractIndexer|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$indexer",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Event\\ManagerInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_eventManagerMock",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Set up test\n     *\n     * @return void\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","_eventManagerMock",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getMock",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Framework",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Event",35],["T_NS_SEPARATOR","\\",35],["T_STRING","ManagerInterface",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","indexBuilder",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getMock",36],"(",["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","CatalogRule",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Indexer",36],["T_NS_SEPARATOR","\\",36],["T_STRING","IndexBuilder",36],["T_DOUBLE_COLON","::",36],["T_CLASS","class",36],",",["T_WHITESPACE"," ",36],"[","]",",",["T_WHITESPACE"," ",36],"[","]",",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","''",36],",",["T_WHITESPACE"," ",36],["T_STRING","false",36],")",";",["T_WHITESPACE","\n\n        ",36],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","indexer",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getMockForAbstractClass",38],"(",["T_WHITESPACE","\n            ",38],["T_STRING","AbstractIndexer",39],["T_DOUBLE_COLON","::",39],["T_CLASS","class",39],",",["T_WHITESPACE","\n            ",39],"[",["T_WHITESPACE","\n                ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","indexBuilder",41],",",["T_WHITESPACE","\n                ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_eventManagerMock",42],["T_WHITESPACE","\n            ",42],"]",["T_WHITESPACE","\n        ",43],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$cacheMock",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getMock",45],"(",["T_NS_SEPARATOR","\\",45],["T_STRING","Magento",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Framework",45],["T_NS_SEPARATOR","\\",45],["T_STRING","App",45],["T_NS_SEPARATOR","\\",45],["T_STRING","CacheInterface",45],["T_DOUBLE_COLON","::",45],["T_CLASS","class",45],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$reflection",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_NEW","new",46],["T_WHITESPACE"," ",46],["T_NS_SEPARATOR","\\",46],["T_STRING","ReflectionClass",46],"(",["T_STRING","AbstractIndexer",46],["T_DOUBLE_COLON","::",46],["T_CLASS","class",46],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$reflectionProperty",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$reflection",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getProperty",47],"(",["T_CONSTANT_ENCAPSED_STRING","'cacheManager'",47],")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$reflectionProperty",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setAccessible",48],"(",["T_STRING","true",48],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$reflectionProperty",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setValue",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","indexer",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$cacheMock",49],")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Test execute\n     *\n     * @return void\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","testExecute",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$ids",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[",["T_LNUMBER","1",59],",",["T_WHITESPACE"," ",59],["T_LNUMBER","2",59],",",["T_WHITESPACE"," ",59],["T_LNUMBER","5",59],"]",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","indexer",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","expects",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","once",60],"(",")",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","method",60],"(",["T_CONSTANT_ENCAPSED_STRING","'doExecuteList'",60],")",["T_OBJECT_OPERATOR","->",60],["T_STRING","with",60],"(",["T_VARIABLE","$ids",60],")",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","indexer",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","execute",62],"(",["T_VARIABLE","$ids",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Test execute full reindex action\n     *\n     * @return void\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testExecuteFull",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","indexBuilder",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","expects",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","once",72],"(",")",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","method",72],"(",["T_CONSTANT_ENCAPSED_STRING","'reindexFull'",72],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_eventManagerMock",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","expects",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","once",73],"(",")",")",["T_WHITESPACE","\n            ",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","method",74],"(",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",74],")",["T_WHITESPACE","\n            ",74],["T_OBJECT_OPERATOR","->",75],["T_STRING","with",75],"(",["T_WHITESPACE","\n                ",75],["T_CONSTANT_ENCAPSED_STRING","'clean_cache_by_tags'",76],",",["T_WHITESPACE","\n                ",76],"[",["T_CONSTANT_ENCAPSED_STRING","'object'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","indexer",77],"]",["T_WHITESPACE","\n            ",77],")",";",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","indexer",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","executeFull",80],"(",")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @expectedException \\Magento\\Framework\\Exception\\LocalizedException\n     * @expectedExceptionMessage Could not rebuild index for empty products array\n     *\n     * @return void\n     *\/",83],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","testExecuteListWithEmptyIds",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","indexer",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","executeList",91],"(","[","]",")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\n     * @return void\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","testExecuteList",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$ids",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],"[",["T_LNUMBER","1",101],",",["T_WHITESPACE"," ",101],["T_LNUMBER","2",101],",",["T_WHITESPACE"," ",101],["T_LNUMBER","5",101],"]",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","indexer",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","expects",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","once",102],"(",")",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","method",102],"(",["T_CONSTANT_ENCAPSED_STRING","'doExecuteList'",102],")",["T_OBJECT_OPERATOR","->",102],["T_STRING","with",102],"(",["T_VARIABLE","$ids",102],")",";",["T_WHITESPACE","\n\n        ",102],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","indexer",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","executeList",104],"(",["T_VARIABLE","$ids",104],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * @expectedException \\Magento\\Framework\\Exception\\LocalizedException\n     * @expectedExceptionMessage We can't rebuild the index for an undefined product.\n     *\n     * @return void\n     *\/",107],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","testExecuteRowWithEmptyId",113],"(",")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","indexer",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","executeRow",115],"(",["T_STRING","null",115],")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\n     * @return void\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","testExecuteRow",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$id",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_LNUMBER","5",125],";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","indexer",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","expects",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","once",126],"(",")",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","method",126],"(",["T_CONSTANT_ENCAPSED_STRING","'doExecuteRow'",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","with",126],"(",["T_VARIABLE","$id",126],")",";",["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","indexer",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","executeRow",128],"(",["T_VARIABLE","$id",128],")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n",129],"}",["T_WHITESPACE","\n",130]]
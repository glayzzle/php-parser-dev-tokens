[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CatalogRule",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_NS_SEPARATOR","\\",9],["T_STRING","NoSuchEntityException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CouldNotDeleteException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CouldNotSaveException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ValidatorException",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","CatalogRuleRepository",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CatalogRule",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CatalogRuleRepositoryInterface",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * @var ResourceModel\\Rule\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$ruleResource",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var RuleFactory\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$ruleFactory",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$rules",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],"[","]",";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @param ResourceModel\\Rule $ruleResource\n     * @param RuleFactory $ruleFactory\n     *\/",31],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","__construct",35],"(",["T_WHITESPACE","\n        ",35],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","CatalogRule",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Model",36],["T_NS_SEPARATOR","\\",36],["T_STRING","ResourceModel",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Rule",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$ruleResource",36],",",["T_WHITESPACE","\n        ",36],["T_NS_SEPARATOR","\\",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","CatalogRule",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Model",37],["T_NS_SEPARATOR","\\",37],["T_STRING","RuleFactory",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$ruleFactory",37],["T_WHITESPACE","\n    ",37],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","ruleResource",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$ruleResource",39],";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","ruleFactory",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$ruleFactory",40],";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","save",46],"(",["T_STRING","Data",46],["T_NS_SEPARATOR","\\",46],["T_STRING","RuleInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$rule",46],")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$rule",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getRuleId",48],"(",")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$rule",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_VARIABLE","$rule",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getRuleId",49],"(",")",")",["T_OBJECT_OPERATOR","->",49],["T_STRING","addData",49],"(",["T_VARIABLE","$rule",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getData",49],"(",")",")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_TRY","try",52],["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","ruleResource",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","save",53],"(",["T_VARIABLE","$rule",53],")",";",["T_WHITESPACE","\n            ",53],["T_UNSET","unset",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","rules",54],"[",["T_VARIABLE","$rule",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getId",54],"(",")","]",")",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE"," ",55],["T_CATCH","catch",55],["T_WHITESPACE"," ",55],"(",["T_STRING","ValidatorException",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$e",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_THROW","throw",56],["T_WHITESPACE"," ",56],["T_NEW","new",56],["T_WHITESPACE"," ",56],["T_STRING","CouldNotSaveException",56],"(",["T_STRING","__",56],"(",["T_VARIABLE","$e",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getMessage",56],"(",")",")",")",";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE","\n        ",57],["T_CATCH","catch",58],["T_WHITESPACE"," ",58],"(",["T_NS_SEPARATOR","\\",58],["T_STRING","Exception",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$e",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_THROW","throw",59],["T_WHITESPACE"," ",59],["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_STRING","CouldNotSaveException",59],"(",["T_STRING","__",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to save rule %1'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$rule",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getRuleId",59],"(",")",")",")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$rule",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","get",67],"(",["T_VARIABLE","$ruleId",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(","!",["T_ISSET","isset",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","rules",69],"[",["T_VARIABLE","$ruleId",69],"]",")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogRule\\Model\\Rule $rule *\/",70],["T_WHITESPACE","\n            ",70],["T_VARIABLE","$rule",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","ruleFactory",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","create",71],"(",")",";",["T_WHITESPACE","\n\n            ",71],["T_COMMENT","\/* TODO: change to resource model after entity manager will be fixed *\/",73],["T_WHITESPACE","\n            ",73],["T_VARIABLE","$rule",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","load",74],"(",["T_VARIABLE","$ruleId",74],")",";",["T_WHITESPACE","\n            ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_VARIABLE","$rule",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getRuleId",75],"(",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_THROW","throw",76],["T_WHITESPACE"," ",76],["T_NEW","new",76],["T_WHITESPACE"," ",76],["T_STRING","NoSuchEntityException",76],"(",["T_STRING","__",76],"(",["T_CONSTANT_ENCAPSED_STRING","'Rule with specified ID \"%1\" not found.'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$ruleId",76],")",")",";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","rules",78],"[",["T_VARIABLE","$ruleId",78],"]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$rule",78],";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","rules",80],"[",["T_VARIABLE","$ruleId",80],"]",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",83],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","delete",86],"(",["T_STRING","Data",86],["T_NS_SEPARATOR","\\",86],["T_STRING","RuleInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$rule",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_TRY","try",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","ruleResource",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","delete",89],"(",["T_VARIABLE","$rule",89],")",";",["T_WHITESPACE","\n            ",89],["T_UNSET","unset",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","rules",90],"[",["T_VARIABLE","$rule",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getId",90],"(",")","]",")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE"," ",91],["T_CATCH","catch",91],["T_WHITESPACE"," ",91],"(",["T_STRING","ValidatorException",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$e",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_THROW","throw",92],["T_WHITESPACE"," ",92],["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_STRING","CouldNotSaveException",92],"(",["T_STRING","__",92],"(",["T_VARIABLE","$e",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getMessage",92],"(",")",")",")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE"," ",93],["T_CATCH","catch",93],["T_WHITESPACE"," ",93],"(",["T_NS_SEPARATOR","\\",93],["T_STRING","Exception",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$e",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_THROW","throw",94],["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_STRING","CouldNotDeleteException",94],"(",["T_STRING","__",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to remove rule %1'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$rule",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getRuleId",94],"(",")",")",")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_STRING","true",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",99],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","deleteById",102],"(",["T_VARIABLE","$ruleId",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$model",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","get",104],"(",["T_VARIABLE","$ruleId",104],")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","delete",105],"(",["T_VARIABLE","$model",105],")",";",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_STRING","true",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n",107],"}",["T_WHITESPACE","\n",108]]
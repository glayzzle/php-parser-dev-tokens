[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogRule",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Indexer",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Mview",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ActionInterface",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","MviewActionInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Indexer",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ActionInterface",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","IndexerActionInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DataObject",10],["T_NS_SEPARATOR","\\",10],["T_STRING","IdentityInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Indexer",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CacheContext",11],";",["T_WHITESPACE","\n\n",11],["T_ABSTRACT","abstract",13],["T_WHITESPACE"," ",13],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","AbstractIndexer",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_STRING","IndexerActionInterface",13],",",["T_WHITESPACE"," ",13],["T_STRING","MviewActionInterface",13],",",["T_WHITESPACE"," ",13],["T_STRING","IdentityInterface",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var IndexBuilder\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$indexBuilder",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * Application Event Dispatcher\n     *\n     * @var \\Magento\\Framework\\Event\\ManagerInterface\n     *\/",20],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$_eventManager",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\CacheInterface\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$cacheManager",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Indexer\\CacheContext\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$cacheContext",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @param IndexBuilder $indexBuilder\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","__construct",41],"(",["T_WHITESPACE","\n        ",41],["T_STRING","IndexBuilder",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$indexBuilder",42],",",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Framework",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Event",43],["T_NS_SEPARATOR","\\",43],["T_STRING","ManagerInterface",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$eventManager",43],["T_WHITESPACE","\n    ",43],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","indexBuilder",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$indexBuilder",45],";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_eventManager",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$eventManager",46],";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Execute materialization on ids entities\n     *\n     * @param int[] $ids\n     * @return void\n     *\/",49],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","execute",55],"(",["T_VARIABLE","$ids",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","executeList",57],"(",["T_VARIABLE","$ids",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Execute full indexation\n     *\n     * @return void\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","executeFull",65],"(",")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","indexBuilder",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","reindexFull",67],"(",")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_eventManager",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","dispatch",68],"(",["T_CONSTANT_ENCAPSED_STRING","'clean_cache_by_tags'",68],",",["T_WHITESPACE"," ",68],"[",["T_CONSTANT_ENCAPSED_STRING","'object'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],"]",")",";",["T_WHITESPACE","\n        ",68],["T_COMMENT","\/\/TODO: remove after fix fpc. MAGETWO-50668\n",69],["T_WHITESPACE","        ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getCacheManager",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","clean",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getIdentities",70],"(",")",")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Get affected cache tags\n     *\n     * @return array\n     * @codeCoverageIgnore\n     *\/",73],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","getIdentities",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],"[",["T_WHITESPACE","\n            ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Catalog",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Model",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Category",82],["T_DOUBLE_COLON","::",82],["T_STRING","CACHE_TAG",82],",",["T_WHITESPACE","\n            ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Catalog",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Model",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Product",83],["T_DOUBLE_COLON","::",83],["T_STRING","CACHE_TAG",83],",",["T_WHITESPACE","\n            ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Framework",84],["T_NS_SEPARATOR","\\",84],["T_STRING","App",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Cache",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Type",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Block",84],["T_DOUBLE_COLON","::",84],["T_STRING","CACHE_TAG",84],["T_WHITESPACE","\n        ",84],"]",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Execute partial indexation by ID list\n     *\n     * @param int[] $ids\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return void\n     *\/",88],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","executeList",95],"(",["T_ARRAY","array",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$ids",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_VARIABLE","$ids",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_THROW","throw",98],["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Magento",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Framework",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Exception",98],["T_NS_SEPARATOR","\\",98],["T_STRING","LocalizedException",98],"(",["T_WHITESPACE","\n                ",98],["T_STRING","__",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not rebuild index for empty products array'",99],")",["T_WHITESPACE","\n            ",99],")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","doExecuteList",102],"(",["T_VARIABLE","$ids",102],")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Execute partial indexation by ID list. Template method\n     *\n     * @param int[] $ids\n     * @return void\n     *\/",105],["T_WHITESPACE","\n    ",110],["T_ABSTRACT","abstract",111],["T_WHITESPACE"," ",111],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","doExecuteList",111],"(",["T_VARIABLE","$ids",111],")",";",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Execute partial indexation by ID\n     *\n     * @param int $id\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return void\n     *\/",113],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","executeRow",120],"(",["T_VARIABLE","$id",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_VARIABLE","$id",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_THROW","throw",123],["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Magento",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Framework",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Exception",123],["T_NS_SEPARATOR","\\",123],["T_STRING","LocalizedException",123],"(",["T_WHITESPACE","\n                ",123],["T_STRING","__",124],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t rebuild the index for an undefined product.'",124],")",["T_WHITESPACE","\n            ",124],")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","doExecuteRow",127],"(",["T_VARIABLE","$id",127],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Execute partial indexation by ID. Template method\n     *\n     * @param int $id\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return void\n     *\/",130],["T_WHITESPACE","\n    ",136],["T_ABSTRACT","abstract",137],["T_WHITESPACE"," ",137],["T_PROTECTED","protected",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","doExecuteRow",137],"(",["T_VARIABLE","$id",137],")",";",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\App\\CacheInterface|mixed\n     *\n     * @deprecated\n     *\/",139],["T_WHITESPACE","\n    ",143],["T_PRIVATE","private",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","getCacheManager",144],"(",")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","cacheManager",146],["T_WHITESPACE"," ",146],["T_IS_IDENTICAL","===",146],["T_WHITESPACE"," ",146],["T_STRING","null",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","cacheManager",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Framework",147],["T_NS_SEPARATOR","\\",147],["T_STRING","App",147],["T_NS_SEPARATOR","\\",147],["T_STRING","ObjectManager",147],["T_DOUBLE_COLON","::",147],["T_STRING","getInstance",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","get",147],"(",["T_WHITESPACE","\n                ",147],["T_NS_SEPARATOR","\\",148],["T_STRING","Magento",148],["T_NS_SEPARATOR","\\",148],["T_STRING","Framework",148],["T_NS_SEPARATOR","\\",148],["T_STRING","App",148],["T_NS_SEPARATOR","\\",148],["T_STRING","CacheInterface",148],["T_DOUBLE_COLON","::",148],["T_CLASS","class",148],["T_WHITESPACE","\n            ",148],")",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","cacheManager",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Get cache context\n     *\n     * @return \\Magento\\Framework\\Indexer\\CacheContext\n     * @deprecated\n     *\/",154],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getCacheContext",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(","!","(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","cacheContext",162],["T_WHITESPACE"," ",162],["T_INSTANCEOF","instanceof",162],["T_WHITESPACE"," ",162],["T_STRING","CacheContext",162],")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Magento",163],["T_NS_SEPARATOR","\\",163],["T_STRING","Framework",163],["T_NS_SEPARATOR","\\",163],["T_STRING","App",163],["T_NS_SEPARATOR","\\",163],["T_STRING","ObjectManager",163],["T_DOUBLE_COLON","::",163],["T_STRING","getInstance",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","get",163],"(",["T_STRING","CacheContext",163],["T_DOUBLE_COLON","::",163],["T_CLASS","class",163],")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE"," ",164],["T_ELSE","else",164],["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","cacheContext",165],";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n",167],"}",["T_WHITESPACE","\n",168]]
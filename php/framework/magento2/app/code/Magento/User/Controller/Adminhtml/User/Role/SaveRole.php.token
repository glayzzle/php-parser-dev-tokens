[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","User",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adminhtml",7],["T_NS_SEPARATOR","\\",7],["T_STRING","User",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Role",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Authorization",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Acl",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Role",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Group",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","RoleGroup",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Authorization",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","UserContextInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Controller",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResultFactory",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","State",12],["T_NS_SEPARATOR","\\",12],["T_STRING","UserLockedException",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Security",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","SecurityCookie",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",15],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","SaveRole",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","User",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Controller",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Adminhtml",18],["T_NS_SEPARATOR","\\",18],["T_STRING","User",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Role",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/**\n     * Session keys for Info form data\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","ROLE_EDIT_FORM_DATA_SESSION_KEY",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'role_edit_form_data'",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Session keys for Users form data\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","IN_ROLE_USER_FORM_DATA_SESSION_KEY",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'in_role_user_form_data'",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Session keys for original Users form data\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","IN_ROLE_OLD_USER_FORM_DATA_SESSION_KEY",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'in_role_old_user_form_data'",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Session keys for Use all resources flag form data\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","RESOURCE_ALL_FORM_DATA_SESSION_KEY",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'resource_all_form_data'",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Session keys for Resource form data\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","RESOURCE_FORM_DATA_SESSION_KEY",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'resource_form_data'",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @var SecurityCookie\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PRIVATE","private",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$securityCookie",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Get security cookie\n     *\n     * @return SecurityCookie\n     * @deprecated\n     *\/",50],["T_WHITESPACE","\n    ",55],["T_PRIVATE","private",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","getSecurityCookie",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(","!","(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","securityCookie",58],["T_WHITESPACE"," ",58],["T_INSTANCEOF","instanceof",58],["T_WHITESPACE"," ",58],["T_STRING","SecurityCookie",58],")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Framework",59],["T_NS_SEPARATOR","\\",59],["T_STRING","App",59],["T_NS_SEPARATOR","\\",59],["T_STRING","ObjectManager",59],["T_DOUBLE_COLON","::",59],["T_STRING","getInstance",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"(",["T_STRING","SecurityCookie",59],["T_DOUBLE_COLON","::",59],["T_CLASS","class",59],")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE"," ",60],["T_ELSE","else",60],["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","securityCookie",61],";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Role form submit action to save or create new role\n     *\n     * @return \\Magento\\Backend\\Model\\View\\Result\\Redirect\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","execute",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_DOC_COMMENT","\/** @var \\Magento\\Backend\\Model\\View\\Result\\Redirect $resultRedirect *\/",72],["T_WHITESPACE","\n        ",72],["T_VARIABLE","$resultRedirect",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","resultFactory",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","create",73],"(",["T_STRING","ResultFactory",73],["T_DOUBLE_COLON","::",73],["T_STRING","TYPE_REDIRECT",73],")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$rid",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getRequest",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getParam",75],"(",["T_CONSTANT_ENCAPSED_STRING","'role_id'",75],",",["T_WHITESPACE"," ",75],["T_STRING","false",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$resource",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getRequest",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getParam",76],"(",["T_CONSTANT_ENCAPSED_STRING","'resource'",76],",",["T_WHITESPACE"," ",76],["T_STRING","false",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$roleUsers",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getRequest",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","getParam",77],"(",["T_CONSTANT_ENCAPSED_STRING","'in_role_user'",77],",",["T_WHITESPACE"," ",77],["T_STRING","null",77],")",";",["T_WHITESPACE","\n        ",77],["T_STRING","parse_str",78],"(",["T_VARIABLE","$roleUsers",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$roleUsers",78],")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$roleUsers",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","array_keys",79],"(",["T_VARIABLE","$roleUsers",79],")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$isAll",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getRequest",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getParam",81],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",81],")",";",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$isAll",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$resource",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_objectManager",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","get",83],"(",["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Framework",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Acl",83],["T_NS_SEPARATOR","\\",83],["T_STRING","RootResource",83],["T_DOUBLE_COLON","::",83],["T_CLASS","class",83],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getId",83],"(",")","]",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$role",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_initRole",86],"(",["T_CONSTANT_ENCAPSED_STRING","'role_id'",86],")",";",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_VARIABLE","$role",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getId",87],"(",")",["T_WHITESPACE"," ",87],["T_BOOLEAN_AND","&&",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$rid",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","messageManager",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","addError",88],"(",["T_STRING","__",88],"(",["T_CONSTANT_ENCAPSED_STRING","'This role no longer exists.'",88],")",")",";",["T_WHITESPACE","\n            ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$resultRedirect",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","setPath",89],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/*\/'",89],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n\n        ",90],["T_TRY","try",92],["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","validateUser",93],"(",")",";",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$roleName",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_filterManager",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","removeTags",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getRequest",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","getParam",94],"(",["T_CONSTANT_ENCAPSED_STRING","'rolename'",94],",",["T_WHITESPACE"," ",94],["T_STRING","false",94],")",")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$role",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","setName",95],"(",["T_VARIABLE","$roleName",95],")",["T_WHITESPACE","\n                ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","setPid",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getRequest",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getParam",96],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",96],",",["T_WHITESPACE"," ",96],["T_STRING","false",96],")",")",["T_WHITESPACE","\n                ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","setRoleType",97],"(",["T_STRING","RoleGroup",97],["T_DOUBLE_COLON","::",97],["T_STRING","ROLE_TYPE",97],")",["T_WHITESPACE","\n                ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","setUserType",98],"(",["T_STRING","UserContextInterface",98],["T_DOUBLE_COLON","::",98],["T_STRING","USER_TYPE_ADMIN",98],")",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_eventManager",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","dispatch",99],"(",["T_WHITESPACE","\n                ",99],["T_CONSTANT_ENCAPSED_STRING","'admin_permissions_role_prepare_save'",100],",",["T_WHITESPACE","\n                ",100],"[",["T_CONSTANT_ENCAPSED_STRING","'object'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$role",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'request'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getRequest",101],"(",")","]",["T_WHITESPACE","\n            ",101],")",";",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$role",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","save",103],"(",")",";",["T_WHITESPACE","\n\n            ",103],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_rulesFactory",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","create",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","setRoleId",105],"(",["T_VARIABLE","$role",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getId",105],"(",")",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","setResources",105],"(",["T_VARIABLE","$resource",105],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","saveRel",105],"(",")",";",["T_WHITESPACE","\n\n            ",105],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","processPreviousUsers",107],"(",["T_VARIABLE","$role",107],")",";",["T_WHITESPACE","\n\n            ",107],["T_FOREACH","foreach",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$roleUsers",109],["T_WHITESPACE"," ",109],["T_AS","as",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$nRuid",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_addUserToRole",110],"(",["T_VARIABLE","$nRuid",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$role",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getId",110],"(",")",")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","messageManager",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","addSuccess",112],"(",["T_STRING","__",112],"(",["T_CONSTANT_ENCAPSED_STRING","'You saved the role.'",112],")",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE"," ",113],["T_CATCH","catch",113],["T_WHITESPACE"," ",113],"(",["T_STRING","UserLockedException",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$e",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_auth",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","logout",114],"(",")",";",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getSecurityCookie",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","setLogoutReasonCookie",115],"(",["T_WHITESPACE","\n                ",115],["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Security",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Model",116],["T_NS_SEPARATOR","\\",116],["T_STRING","AdminSessionsManager",116],["T_DOUBLE_COLON","::",116],["T_STRING","LOGOUT_REASON_USER_LOCKED",116],["T_WHITESPACE","\n            ",116],")",";",["T_WHITESPACE","\n            ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$resultRedirect",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setPath",118],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE"," ",119],["T_CATCH","catch",119],["T_WHITESPACE"," ",119],"(",["T_NS_SEPARATOR","\\",119],["T_STRING","Magento",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Framework",119],["T_NS_SEPARATOR","\\",119],["T_STRING","Exception",119],["T_NS_SEPARATOR","\\",119],["T_STRING","AuthenticationException",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$e",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","messageManager",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","addError",120],"(",["T_STRING","__",120],"(",["T_CONSTANT_ENCAPSED_STRING","'You have entered an invalid password for current user.'",120],")",")",";",["T_WHITESPACE","\n            ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","saveDataToSessionAndRedirect",121],"(",["T_VARIABLE","$role",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getRequest",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","getPostValue",121],"(",")",",",["T_WHITESPACE"," ",121],["T_VARIABLE","$resultRedirect",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE"," ",122],["T_CATCH","catch",122],["T_WHITESPACE"," ",122],"(",["T_NS_SEPARATOR","\\",122],["T_STRING","Magento",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Framework",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Exception",122],["T_NS_SEPARATOR","\\",122],["T_STRING","LocalizedException",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$e",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","messageManager",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","addError",123],"(",["T_VARIABLE","$e",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getMessage",123],"(",")",")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE"," ",124],["T_CATCH","catch",124],["T_WHITESPACE"," ",124],"(",["T_NS_SEPARATOR","\\",124],["T_STRING","Exception",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$e",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","messageManager",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","addError",125],"(",["T_STRING","__",125],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving this role.'",125],")",")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$resultRedirect",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setPath",128],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",128],")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Validate current user password\n     *\n     * @return $this\n     * @throws UserLockedException\n     * @throws \\Magento\\Framework\\Exception\\AuthenticationException\n     *\/",131],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","validateUser",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$password",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getRequest",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","getParam",140],"(",["T_WHITESPACE","\n            ",140],["T_NS_SEPARATOR","\\",141],["T_STRING","Magento",141],["T_NS_SEPARATOR","\\",141],["T_STRING","User",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Block",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Role",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Tab",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Info",141],["T_DOUBLE_COLON","::",141],["T_STRING","IDENTITY_VERIFICATION_PASSWORD_FIELD",141],["T_WHITESPACE","\n        ",141],")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$user",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_authSession",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getUser",143],"(",")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$user",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","performIdentityCheck",144],"(",["T_VARIABLE","$password",144],")",";",["T_WHITESPACE","\n\n        ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Authorization\\Model\\Role $role\n     * @return $this\n     * @throws \\Exception\n     *\/",149],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","processPreviousUsers",154],"(",["T_NS_SEPARATOR","\\",154],["T_STRING","Magento",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Authorization",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Model",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Role",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$role",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$oldRoleUsers",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getRequest",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","getParam",156],"(",["T_CONSTANT_ENCAPSED_STRING","'in_role_user_old'",156],")",";",["T_WHITESPACE","\n        ",156],["T_STRING","parse_str",157],"(",["T_VARIABLE","$oldRoleUsers",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$oldRoleUsers",157],")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$oldRoleUsers",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","array_keys",158],"(",["T_VARIABLE","$oldRoleUsers",158],")",";",["T_WHITESPACE","\n\n        ",158],["T_FOREACH","foreach",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$oldRoleUsers",160],["T_WHITESPACE"," ",160],["T_AS","as",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$oUid",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_deleteUserFromRole",161],"(",["T_VARIABLE","$oUid",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$role",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getId",161],"(",")",")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Assign user to role\n     *\n     * @param int $userId\n     * @param int $roleId\n     * @return bool\n     *\/",167],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","_addUserToRole",174],"(",["T_VARIABLE","$userId",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$roleId",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$user",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_userFactory",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","create",176],"(",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","load",176],"(",["T_VARIABLE","$userId",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$user",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","setRoleId",177],"(",["T_VARIABLE","$roleId",177],")",";",["T_WHITESPACE","\n\n        ",177],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$user",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","roleUserExists",179],"(",")",["T_WHITESPACE"," ",179],["T_IS_IDENTICAL","===",179],["T_WHITESPACE"," ",179],["T_STRING","true",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_STRING","false",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE"," ",181],["T_ELSE","else",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$user",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","save",182],"(",")",";",["T_WHITESPACE","\n            ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_STRING","true",183],";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Remove user from role\n     *\n     * @param int $userId\n     * @param int $roleId\n     * @return bool\n     * @throws \\Exception\n     *\/",187],["T_WHITESPACE","\n    ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","_deleteUserFromRole",195],"(",["T_VARIABLE","$userId",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$roleId",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_TRY","try",197],["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_userFactory",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","create",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","setRoleId",198],"(",["T_VARIABLE","$roleId",198],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","setUserId",198],"(",["T_VARIABLE","$userId",198],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","deleteFromRole",198],"(",")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE"," ",199],["T_CATCH","catch",199],["T_WHITESPACE"," ",199],"(",["T_NS_SEPARATOR","\\",199],["T_STRING","Exception",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$e",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_THROW","throw",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$e",200],";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n        ",201],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_STRING","true",202],";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Authorization\\Model\\Role $role\n     * @param array $data\n     * @param \\Magento\\Backend\\Model\\View\\Result\\Redirect $resultRedirect\n     * @return \\Magento\\Backend\\Model\\View\\Result\\Redirect\n     *\/",205],["T_WHITESPACE","\n    ",210],["T_PROTECTED","protected",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","saveDataToSessionAndRedirect",211],"(",["T_VARIABLE","$role",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$data",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$resultRedirect",211],")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_getSession",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","setData",213],"(",["T_STRING","self",213],["T_DOUBLE_COLON","::",213],["T_STRING","ROLE_EDIT_FORM_DATA_SESSION_KEY",213],",",["T_WHITESPACE"," ",213],"[",["T_CONSTANT_ENCAPSED_STRING","'rolename'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$data",213],"[",["T_CONSTANT_ENCAPSED_STRING","'rolename'",213],"]","]",")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_getSession",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","setData",214],"(",["T_STRING","self",214],["T_DOUBLE_COLON","::",214],["T_STRING","IN_ROLE_USER_FORM_DATA_SESSION_KEY",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$data",214],"[",["T_CONSTANT_ENCAPSED_STRING","'in_role_user'",214],"]",")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_getSession",215],"(",")",["T_OBJECT_OPERATOR","->",215],["T_STRING","setData",215],"(",["T_STRING","self",215],["T_DOUBLE_COLON","::",215],["T_STRING","IN_ROLE_OLD_USER_FORM_DATA_SESSION_KEY",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$data",215],"[",["T_CONSTANT_ENCAPSED_STRING","'in_role_user_old'",215],"]",")",";",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$data",216],"[",["T_CONSTANT_ENCAPSED_STRING","'all'",216],"]",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_getSession",217],"(",")",["T_OBJECT_OPERATOR","->",217],["T_STRING","setData",217],"(",["T_STRING","self",217],["T_DOUBLE_COLON","::",217],["T_STRING","RESOURCE_ALL_FORM_DATA_SESSION_KEY",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$data",217],"[",["T_CONSTANT_ENCAPSED_STRING","'all'",217],"]",")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE"," ",218],["T_ELSE","else",218],["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$resource",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_ISSET","isset",219],"(",["T_VARIABLE","$data",219],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",219],"]",")",["T_WHITESPACE"," ",219],"?",["T_WHITESPACE"," ",219],["T_VARIABLE","$data",219],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",219],"]",["T_WHITESPACE"," ",219],":",["T_WHITESPACE"," ",219],"[","]",";",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_getSession",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","setData",220],"(",["T_STRING","self",220],["T_DOUBLE_COLON","::",220],["T_STRING","RESOURCE_FORM_DATA_SESSION_KEY",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$resource",220],")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$arguments",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$role",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getId",222],"(",")",["T_WHITESPACE"," ",222],"?",["T_WHITESPACE"," ",222],"[",["T_CONSTANT_ENCAPSED_STRING","'rid'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$role",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getId",222],"(",")","]",["T_WHITESPACE"," ",222],":",["T_WHITESPACE"," ",222],"[","]",";",["T_WHITESPACE","\n        ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$resultRedirect",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setPath",223],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/editrole'",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$arguments",223],")",";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n",224],"}",["T_WHITESPACE","\n",225]]
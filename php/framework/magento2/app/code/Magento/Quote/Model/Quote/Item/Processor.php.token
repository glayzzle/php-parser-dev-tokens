[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Quote",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Quote",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Item",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ItemFactory",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Quote",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Quote",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Item",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Store",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","StoreManagerInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","State",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","DataObject",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Quote",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Data",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CartItemInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Class Processor\n *  - initializes quote item with store_id and qty data\n *  - updates quote item qty and custom price data\n *\/",16],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","Processor",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote\\ItemFactory\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$quoteItemFactory",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$storeManager",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\State\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$appState",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @param ItemFactory $quoteItemFactory\n     * @param StoreManagerInterface $storeManager\n     * @param State $appState\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","__construct",43],"(",["T_WHITESPACE","\n        ",43],["T_STRING","ItemFactory",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$quoteItemFactory",44],",",["T_WHITESPACE","\n        ",44],["T_STRING","StoreManagerInterface",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$storeManager",45],",",["T_WHITESPACE","\n        ",45],["T_STRING","State",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$appState",46],["T_WHITESPACE","\n    ",46],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","quoteItemFactory",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$quoteItemFactory",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","storeManager",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$storeManager",49],";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","appState",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$appState",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Initialize quote item object\n     *\n     * @param \\Magento\\Framework\\DataObject $request\n     * @param Product $product\n     *\n     * @return \\Magento\\Quote\\Model\\Quote\\Item\n     *\/",53],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","init",61],"(",["T_STRING","Product",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$product",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$request",61],")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$item",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","quoteItemFactory",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","create",63],"(",")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setItemStoreId",65],"(",["T_VARIABLE","$item",65],")",";",["T_WHITESPACE","\n\n        ",65],["T_DOC_COMMENT","\/**\n         * We can't modify existing child items\n         *\/",67],["T_WHITESPACE","\n        ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$item",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getId",70],"(",")",["T_WHITESPACE"," ",70],["T_BOOLEAN_AND","&&",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$product",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getParentProductId",70],"(",")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$item",71],";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$item",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","setOptions",74],"(",["T_VARIABLE","$product",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getCustomOptions",74],"(",")",")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$item",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","setProduct",75],"(",["T_VARIABLE","$product",75],")",";",["T_WHITESPACE","\n\n        ",75],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$request",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getResetCount",77],"(",")",["T_WHITESPACE"," ",77],["T_BOOLEAN_AND","&&",77],["T_WHITESPACE"," ",77],"!",["T_VARIABLE","$product",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getStickWithinParent",77],"(",")",["T_WHITESPACE"," ",77],["T_BOOLEAN_AND","&&",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$item",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getId",77],"(",")",["T_WHITESPACE"," ",77],["T_IS_IDENTICAL","===",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$request",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getId",77],"(",")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$item",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setData",78],"(",["T_STRING","CartItemInterface",78],["T_DOUBLE_COLON","::",78],["T_STRING","KEY_QTY",78],",",["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n\n        ",79],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$item",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Set qty and custom price for quote item\n     *\n     * @param Item $item\n     * @param \\Magento\\Framework\\DataObject $request\n     * @param Product $candidate\n     * @return void\n     *\/",84],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","prepare",92],"(",["T_STRING","Item",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$item",92],",",["T_WHITESPACE"," ",92],["T_STRING","DataObject",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$request",92],",",["T_WHITESPACE"," ",92],["T_STRING","Product",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$candidate",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_DOC_COMMENT","\/**\n         * We specify qty after we know about parent (for stock)\n         *\/",94],["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$request",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getResetCount",97],"(",")",["T_WHITESPACE"," ",97],["T_BOOLEAN_AND","&&",97],["T_WHITESPACE"," ",97],"!",["T_VARIABLE","$candidate",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getStickWithinParent",97],"(",")",["T_WHITESPACE"," ",97],["T_BOOLEAN_AND","&&",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$item",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getId",97],"(",")",["T_WHITESPACE"," ",97],["T_IS_EQUAL","==",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$request",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getId",97],"(",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$item",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","setData",98],"(",["T_STRING","CartItemInterface",98],["T_DOUBLE_COLON","::",98],["T_STRING","KEY_QTY",98],",",["T_WHITESPACE"," ",98],["T_LNUMBER","0",98],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$item",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","addQty",100],"(",["T_VARIABLE","$candidate",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getCartQty",100],"(",")",")",";",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$customPrice",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$request",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getCustomPrice",102],"(",")",";",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_EMPTY","empty",103],"(",["T_VARIABLE","$customPrice",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$item",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setCustomPrice",104],"(",["T_VARIABLE","$customPrice",104],")",";",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$item",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","setOriginalCustomPrice",105],"(",["T_VARIABLE","$customPrice",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Set store_id value to quote item\n     *\n     * @param Item $item\n     * @return void\n     *\/",109],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","setItemStoreId",115],"(",["T_STRING","Item",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$item",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","appState",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getAreaCode",117],"(",")",["T_WHITESPACE"," ",117],["T_IS_IDENTICAL","===",117],["T_WHITESPACE"," ",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Magento",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Backend",117],["T_NS_SEPARATOR","\\",117],["T_STRING","App",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Area",117],["T_NS_SEPARATOR","\\",117],["T_STRING","FrontNameResolver",117],["T_DOUBLE_COLON","::",117],["T_STRING","AREA_CODE",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$storeId",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","storeManager",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getStore",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","storeManager",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getStore",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getId",118],"(",")",")",["T_WHITESPACE","\n                ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","getId",119],"(",")",";",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$item",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setStoreId",120],"(",["T_VARIABLE","$storeId",120],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE"," ",121],["T_ELSE","else",121],["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$item",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setStoreId",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","storeManager",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getStore",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","getId",122],"(",")",")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n",124],"}",["T_WHITESPACE","\n",125]]
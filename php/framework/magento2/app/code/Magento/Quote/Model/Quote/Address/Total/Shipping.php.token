[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Quote",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Quote",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Address",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Total",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Pricing",8],["T_NS_SEPARATOR","\\",8],["T_STRING","PriceCurrencyInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Address",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FreeShippingInterface",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Shipping",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Quote",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Quote",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Address",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Total",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AbstractTotal",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * @var PriceCurrencyInterface\n     *\/",13],["T_WHITESPACE","\n    ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$priceCurrency",16],";",["T_WHITESPACE","\n\n    ",16],["T_DOC_COMMENT","\/**\n     * @var FreeShippingInterface\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$freeShipping",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @param PriceCurrencyInterface $priceCurrency\n     * @param FreeShippingInterface $freeShipping\n     *\/",23],["T_WHITESPACE","\n    ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","__construct",27],"(",["T_WHITESPACE","\n        ",27],["T_STRING","PriceCurrencyInterface",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$priceCurrency",28],",",["T_WHITESPACE","\n        ",28],["T_STRING","FreeShippingInterface",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$freeShipping",29],["T_WHITESPACE","\n    ",29],")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","priceCurrency",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$priceCurrency",31],";",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","freeShipping",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$freeShipping",32],";",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","setCode",33],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",33],")",";",["T_WHITESPACE","\n    ",33],"}",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Collect totals information about shipping\n     *\n     * @param \\Magento\\Quote\\Model\\Quote $quote\n     * @param \\Magento\\Quote\\Api\\Data\\ShippingAssignmentInterface $shippingAssignment\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\Total $total\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",36],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","collect",47],"(",["T_WHITESPACE","\n        ",47],["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Quote",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Model",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Quote",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$quote",48],",",["T_WHITESPACE","\n        ",48],["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Quote",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Api",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Data",49],["T_NS_SEPARATOR","\\",49],["T_STRING","ShippingAssignmentInterface",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$shippingAssignment",49],",",["T_WHITESPACE","\n        ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Quote",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Model",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Quote",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Address",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Total",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$total",50],["T_WHITESPACE","\n    ",50],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n        ",51],["T_STRING","parent",52],["T_DOUBLE_COLON","::",52],["T_STRING","collect",52],"(",["T_VARIABLE","$quote",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$shippingAssignment",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$total",52],")",";",["T_WHITESPACE","\n\n        ",52],["T_VARIABLE","$address",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$shippingAssignment",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getShipping",54],"(",")",["T_OBJECT_OPERATOR","->",54],["T_STRING","getAddress",54],"(",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$method",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$shippingAssignment",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getShipping",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getMethod",55],"(",")",";",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$address",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","setWeight",57],"(",["T_LNUMBER","0",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$address",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","setFreeMethodWeight",58],"(",["T_LNUMBER","0",58],")",";",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$addressWeight",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$address",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getWeight",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$freeMethodWeight",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$address",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getFreeMethodWeight",61],"(",")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$addressFreeShipping",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$address",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getFreeShipping",62],"(",")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$total",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setTotalAmount",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getCode",64],"(",")",",",["T_WHITESPACE"," ",64],["T_LNUMBER","0",64],")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$total",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setBaseTotalAmount",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getCode",65],"(",")",",",["T_WHITESPACE"," ",65],["T_LNUMBER","0",65],")",";",["T_WHITESPACE","\n\n        ",65],["T_IF","if",67],["T_WHITESPACE"," ",67],"(","!",["T_STRING","count",67],"(",["T_VARIABLE","$shippingAssignment",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getItems",67],"(",")",")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$addressQty",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_LNUMBER","0",71],";",["T_WHITESPACE","\n        ",71],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$shippingAssignment",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getItems",72],"(",")",["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$item",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_DOC_COMMENT","\/**\n             * Skip if this item is virtual\n             *\/",73],["T_WHITESPACE","\n            ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$item",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getProduct",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","isVirtual",76],"(",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                ",76],["T_CONTINUE","continue",77],";",["T_WHITESPACE","\n            ",77],"}",["T_WHITESPACE","\n\n            ",78],["T_DOC_COMMENT","\/**\n             * Children weight we calculate for parent\n             *\/",80],["T_WHITESPACE","\n            ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$item",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getParentItem",83],"(",")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                ",83],["T_CONTINUE","continue",84],";",["T_WHITESPACE","\n            ",84],"}",["T_WHITESPACE","\n\n            ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$item",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getHasChildren",87],"(",")",["T_WHITESPACE"," ",87],["T_BOOLEAN_AND","&&",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$item",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","isShipSeparately",87],"(",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                ",87],["T_FOREACH","foreach",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$item",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getChildren",88],"(",")",["T_WHITESPACE"," ",88],["T_AS","as",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$child",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                    ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$child",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getProduct",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","isVirtual",89],"(",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                        ",89],["T_CONTINUE","continue",90],";",["T_WHITESPACE","\n                    ",90],"}",["T_WHITESPACE","\n                    ",91],["T_VARIABLE","$addressQty",92],["T_WHITESPACE"," ",92],["T_PLUS_EQUAL","+=",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$child",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getTotalQty",92],"(",")",";",["T_WHITESPACE","\n\n                    ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(","!",["T_VARIABLE","$item",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getProduct",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","getWeightType",94],"(",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                        ",94],["T_VARIABLE","$itemWeight",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$child",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getWeight",95],"(",")",";",["T_WHITESPACE","\n                        ",95],["T_VARIABLE","$itemQty",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$child",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getTotalQty",96],"(",")",";",["T_WHITESPACE","\n                        ",96],["T_VARIABLE","$rowWeight",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$itemWeight",97],["T_WHITESPACE"," ",97],"*",["T_WHITESPACE"," ",97],["T_VARIABLE","$itemQty",97],";",["T_WHITESPACE","\n                        ",97],["T_VARIABLE","$addressWeight",98],["T_WHITESPACE"," ",98],["T_PLUS_EQUAL","+=",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$rowWeight",98],";",["T_WHITESPACE","\n                        ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$addressFreeShipping",99],["T_WHITESPACE"," ",99],["T_BOOLEAN_OR","||",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$child",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getFreeShipping",99],"(",")",["T_WHITESPACE"," ",99],["T_IS_IDENTICAL","===",99],["T_WHITESPACE"," ",99],["T_STRING","true",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                            ",99],["T_VARIABLE","$rowWeight",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_LNUMBER","0",100],";",["T_WHITESPACE","\n                        ",100],"}",["T_WHITESPACE"," ",101],["T_ELSEIF","elseif",101],["T_WHITESPACE"," ",101],"(",["T_STRING","is_numeric",101],"(",["T_VARIABLE","$child",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getFreeShipping",101],"(",")",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                            ",101],["T_VARIABLE","$freeQty",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$child",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getFreeShipping",102],"(",")",";",["T_WHITESPACE","\n                            ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$itemQty",103],["T_WHITESPACE"," ",103],">",["T_WHITESPACE"," ",103],["T_VARIABLE","$freeQty",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                                ",103],["T_VARIABLE","$rowWeight",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$itemWeight",104],["T_WHITESPACE"," ",104],"*",["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$itemQty",104],["T_WHITESPACE"," ",104],"-",["T_WHITESPACE"," ",104],["T_VARIABLE","$freeQty",104],")",";",["T_WHITESPACE","\n                            ",104],"}",["T_WHITESPACE"," ",105],["T_ELSE","else",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                                ",105],["T_VARIABLE","$rowWeight",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_LNUMBER","0",106],";",["T_WHITESPACE","\n                            ",106],"}",["T_WHITESPACE","\n                        ",107],"}",["T_WHITESPACE","\n                        ",108],["T_VARIABLE","$freeMethodWeight",109],["T_WHITESPACE"," ",109],["T_PLUS_EQUAL","+=",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$rowWeight",109],";",["T_WHITESPACE","\n                        ",109],["T_VARIABLE","$item",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","setRowWeight",110],"(",["T_VARIABLE","$rowWeight",110],")",";",["T_WHITESPACE","\n                    ",110],"}",["T_WHITESPACE","\n                ",111],"}",["T_WHITESPACE","\n                ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$item",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getProduct",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getWeightType",113],"(",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$itemWeight",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$item",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getWeight",114],"(",")",";",["T_WHITESPACE","\n                    ",114],["T_VARIABLE","$rowWeight",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$itemWeight",115],["T_WHITESPACE"," ",115],"*",["T_WHITESPACE"," ",115],["T_VARIABLE","$item",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getQty",115],"(",")",";",["T_WHITESPACE","\n                    ",115],["T_VARIABLE","$addressWeight",116],["T_WHITESPACE"," ",116],["T_PLUS_EQUAL","+=",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$rowWeight",116],";",["T_WHITESPACE","\n                    ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$addressFreeShipping",117],["T_WHITESPACE"," ",117],["T_BOOLEAN_OR","||",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$item",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getFreeShipping",117],"(",")",["T_WHITESPACE"," ",117],["T_IS_IDENTICAL","===",117],["T_WHITESPACE"," ",117],["T_STRING","true",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                        ",117],["T_VARIABLE","$rowWeight",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_LNUMBER","0",118],";",["T_WHITESPACE","\n                    ",118],"}",["T_WHITESPACE"," ",119],["T_ELSEIF","elseif",119],["T_WHITESPACE"," ",119],"(",["T_STRING","is_numeric",119],"(",["T_VARIABLE","$item",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getFreeShipping",119],"(",")",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                        ",119],["T_VARIABLE","$freeQty",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$item",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getFreeShipping",120],"(",")",";",["T_WHITESPACE","\n                        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$item",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getQty",121],"(",")",["T_WHITESPACE"," ",121],">",["T_WHITESPACE"," ",121],["T_VARIABLE","$freeQty",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                            ",121],["T_VARIABLE","$rowWeight",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$itemWeight",122],["T_WHITESPACE"," ",122],"*",["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$item",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getQty",122],"(",")",["T_WHITESPACE"," ",122],"-",["T_WHITESPACE"," ",122],["T_VARIABLE","$freeQty",122],")",";",["T_WHITESPACE","\n                        ",122],"}",["T_WHITESPACE"," ",123],["T_ELSE","else",123],["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                            ",123],["T_VARIABLE","$rowWeight",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_LNUMBER","0",124],";",["T_WHITESPACE","\n                        ",124],"}",["T_WHITESPACE","\n                    ",125],"}",["T_WHITESPACE","\n                    ",126],["T_VARIABLE","$freeMethodWeight",127],["T_WHITESPACE"," ",127],["T_PLUS_EQUAL","+=",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$rowWeight",127],";",["T_WHITESPACE","\n                    ",127],["T_VARIABLE","$item",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setRowWeight",128],"(",["T_VARIABLE","$rowWeight",128],")",";",["T_WHITESPACE","\n                ",128],"}",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE"," ",130],["T_ELSE","else",130],["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(","!",["T_VARIABLE","$item",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getProduct",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","isVirtual",131],"(",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                    ",131],["T_VARIABLE","$addressQty",132],["T_WHITESPACE"," ",132],["T_PLUS_EQUAL","+=",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$item",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getQty",132],"(",")",";",["T_WHITESPACE","\n                ",132],"}",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$itemWeight",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$item",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getWeight",134],"(",")",";",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$rowWeight",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$itemWeight",135],["T_WHITESPACE"," ",135],"*",["T_WHITESPACE"," ",135],["T_VARIABLE","$item",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getQty",135],"(",")",";",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$addressWeight",136],["T_WHITESPACE"," ",136],["T_PLUS_EQUAL","+=",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$rowWeight",136],";",["T_WHITESPACE","\n                ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$addressFreeShipping",137],["T_WHITESPACE"," ",137],["T_BOOLEAN_OR","||",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$item",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getFreeShipping",137],"(",")",["T_WHITESPACE"," ",137],["T_IS_IDENTICAL","===",137],["T_WHITESPACE"," ",137],["T_STRING","true",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$rowWeight",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],";",["T_WHITESPACE","\n                ",138],"}",["T_WHITESPACE"," ",139],["T_ELSEIF","elseif",139],["T_WHITESPACE"," ",139],"(",["T_STRING","is_numeric",139],"(",["T_VARIABLE","$item",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getFreeShipping",139],"(",")",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                    ",139],["T_VARIABLE","$freeQty",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$item",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getFreeShipping",140],"(",")",";",["T_WHITESPACE","\n                    ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$item",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getQty",141],"(",")",["T_WHITESPACE"," ",141],">",["T_WHITESPACE"," ",141],["T_VARIABLE","$freeQty",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                        ",141],["T_VARIABLE","$rowWeight",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$itemWeight",142],["T_WHITESPACE"," ",142],"*",["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$item",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getQty",142],"(",")",["T_WHITESPACE"," ",142],"-",["T_WHITESPACE"," ",142],["T_VARIABLE","$freeQty",142],")",";",["T_WHITESPACE","\n                    ",142],"}",["T_WHITESPACE"," ",143],["T_ELSE","else",143],["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                        ",143],["T_VARIABLE","$rowWeight",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],";",["T_WHITESPACE","\n                    ",144],"}",["T_WHITESPACE","\n                ",145],"}",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$freeMethodWeight",147],["T_WHITESPACE"," ",147],["T_PLUS_EQUAL","+=",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$rowWeight",147],";",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$item",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","setRowWeight",148],"(",["T_VARIABLE","$rowWeight",148],")",";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n\n        ",150],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_ISSET","isset",152],"(",["T_VARIABLE","$addressQty",152],")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$address",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setItemQty",153],"(",["T_VARIABLE","$addressQty",153],")",";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n\n        ",154],["T_VARIABLE","$address",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","setWeight",156],"(",["T_VARIABLE","$addressWeight",156],")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$address",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setFreeMethodWeight",157],"(",["T_VARIABLE","$freeMethodWeight",157],")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$address",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setFreeShipping",158],"(",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","freeShipping",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","isFreeShipping",159],"(",["T_VARIABLE","$quote",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$shippingAssignment",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getItems",159],"(",")",")",["T_WHITESPACE","\n        ",159],")",";",["T_WHITESPACE","\n\n        ",160],["T_VARIABLE","$address",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","collectShippingRates",162],"(",")",";",["T_WHITESPACE","\n\n        ",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$method",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$address",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getAllShippingRates",165],"(",")",["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$rate",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$rate",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getCode",166],"(",")",["T_WHITESPACE"," ",166],["T_IS_EQUAL","==",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$method",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                    ",166],["T_VARIABLE","$store",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$quote",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getStore",167],"(",")",";",["T_WHITESPACE","\n                    ",167],["T_VARIABLE","$amountPrice",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","priceCurrency",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","convert",168],"(",["T_WHITESPACE","\n                        ",168],["T_VARIABLE","$rate",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getPrice",169],"(",")",",",["T_WHITESPACE","\n                        ",169],["T_VARIABLE","$store",170],["T_WHITESPACE","\n                    ",170],")",";",["T_WHITESPACE","\n                    ",171],["T_VARIABLE","$total",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","setTotalAmount",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getCode",172],"(",")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$amountPrice",172],")",";",["T_WHITESPACE","\n                    ",172],["T_VARIABLE","$total",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","setBaseTotalAmount",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getCode",173],"(",")",",",["T_WHITESPACE"," ",173],["T_VARIABLE","$rate",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getPrice",173],"(",")",")",";",["T_WHITESPACE","\n                    ",173],["T_VARIABLE","$shippingDescription",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$rate",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getCarrierTitle",174],"(",")",["T_WHITESPACE"," ",174],".",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","' - '",174],["T_WHITESPACE"," ",174],".",["T_WHITESPACE"," ",174],["T_VARIABLE","$rate",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getMethodTitle",174],"(",")",";",["T_WHITESPACE","\n                    ",174],["T_VARIABLE","$address",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","setShippingDescription",175],"(",["T_STRING","trim",175],"(",["T_VARIABLE","$shippingDescription",175],",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","' -'",175],")",")",";",["T_WHITESPACE","\n                    ",175],["T_VARIABLE","$total",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","setBaseShippingAmount",176],"(",["T_VARIABLE","$rate",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getPrice",176],"(",")",")",";",["T_WHITESPACE","\n                    ",176],["T_VARIABLE","$total",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","setShippingAmount",177],"(",["T_VARIABLE","$amountPrice",177],")",";",["T_WHITESPACE","\n                    ",177],["T_VARIABLE","$total",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","setShippingDescription",178],"(",["T_VARIABLE","$address",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getShippingDescription",178],"(",")",")",";",["T_WHITESPACE","\n                    ",178],["T_BREAK","break",179],";",["T_WHITESPACE","\n                ",179],"}",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n        ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Add shipping totals information to address object\n     *\n     * @param \\Magento\\Quote\\Model\\Quote $quote\n     * @param \\Magento\\Quote\\Model\\Quote\\Address\\Total $total\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",186],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","fetch",194],"(",["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Quote",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Model",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Quote",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$quote",194],",",["T_WHITESPACE"," ",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Quote",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Model",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Quote",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Address",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Total",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$total",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$amount",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$total",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getShippingAmount",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$shippingDescription",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$total",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getShippingDescription",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$title",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$amount",198],["T_WHITESPACE"," ",198],["T_IS_NOT_EQUAL","!=",198],["T_WHITESPACE"," ",198],["T_LNUMBER","0",198],["T_WHITESPACE"," ",198],["T_BOOLEAN_AND","&&",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$shippingDescription",198],")",["T_WHITESPACE","\n            ",198],"?",["T_WHITESPACE"," ",199],["T_STRING","__",199],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipping & Handling (%1)'",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$shippingDescription",199],")",["T_WHITESPACE","\n            ",199],":",["T_WHITESPACE"," ",200],["T_STRING","__",200],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipping & Handling'",200],")",";",["T_WHITESPACE","\n\n        ",200],["T_RETURN","return",202],["T_WHITESPACE"," ",202],"[",["T_WHITESPACE","\n            ",202],["T_CONSTANT_ENCAPSED_STRING","'code'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getCode",203],"(",")",",",["T_WHITESPACE","\n            ",203],["T_CONSTANT_ENCAPSED_STRING","'title'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$title",204],",",["T_WHITESPACE","\n            ",204],["T_CONSTANT_ENCAPSED_STRING","'value'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$amount",205],["T_WHITESPACE","\n        ",205],"]",";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * Get Shipping label\n     *\n     * @return \\Magento\\Framework\\Phrase\n     *\/",209],["T_WHITESPACE","\n    ",213],["T_PUBLIC","public",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","getLabel",214],"(",")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_STRING","__",216],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipping'",216],")",";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n",217],"}",["T_WHITESPACE","\n",218]]
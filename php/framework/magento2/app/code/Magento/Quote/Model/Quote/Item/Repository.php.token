[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Quote",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Quote",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Item",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ObjectManager",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CouldNotSaveException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","NoSuchEntityException",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Repository",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Quote",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Api",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CartItemRepositoryInterface",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Quote repository.\n     *\n     * @var \\Magento\\Quote\\Api\\CartRepositoryInterface\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$quoteRepository",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Product repository.\n     *\n     * @var \\Magento\\Catalog\\Api\\ProductRepositoryInterface\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$productRepository",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Api\\Data\\CartItemInterfaceFactory\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$itemDataFactory",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var CartItemProcessorInterface[]\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$cartItemProcessors",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var CartItemOptionsProcessor\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$cartItemOptionsProcessor",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Quote\\Api\\CartRepositoryInterface $quoteRepository\n     * @param \\Magento\\Catalog\\Api\\ProductRepositoryInterface $productRepository\n     * @param \\Magento\\Quote\\Api\\Data\\CartItemInterfaceFactory $itemDataFactory\n     * @param CartItemProcessorInterface[] $cartItemProcessors\n     *\/",44],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","__construct",50],"(",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Quote",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Api",51],["T_NS_SEPARATOR","\\",51],["T_STRING","CartRepositoryInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$quoteRepository",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Catalog",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Api",52],["T_NS_SEPARATOR","\\",52],["T_STRING","ProductRepositoryInterface",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$productRepository",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Quote",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Api",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Data",53],["T_NS_SEPARATOR","\\",53],["T_STRING","CartItemInterfaceFactory",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$itemDataFactory",53],",",["T_WHITESPACE","\n        ",53],["T_ARRAY","array",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$cartItemProcessors",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",["T_WHITESPACE","\n    ",54],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","quoteRepository",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$quoteRepository",56],";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","productRepository",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$productRepository",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","itemDataFactory",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$itemDataFactory",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","cartItemProcessors",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$cartItemProcessors",59],";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","getList",65],"(",["T_VARIABLE","$cartId",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$output",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],"[","]",";",["T_WHITESPACE","\n        ",67],["T_DOC_COMMENT","\/** @var  \\Magento\\Quote\\Model\\Quote $quote *\/",68],["T_WHITESPACE","\n        ",68],["T_VARIABLE","$quote",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","quoteRepository",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getActive",69],"(",["T_VARIABLE","$cartId",69],")",";",["T_WHITESPACE","\n\n        ",69],["T_DOC_COMMENT","\/** @var  \\Magento\\Quote\\Model\\Quote\\Item  $item *\/",71],["T_WHITESPACE","\n        ",71],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$quote",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getAllVisibleItems",72],"(",")",["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$item",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$item",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getCartItemOptionsProcessor",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","addProductOptions",73],"(",["T_VARIABLE","$item",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getProductType",73],"(",")",",",["T_WHITESPACE"," ",73],["T_VARIABLE","$item",73],")",";",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$output",74],"[","]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getCartItemOptionsProcessor",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","applyCustomOptions",74],"(",["T_VARIABLE","$item",74],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$output",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",79],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","save",82],"(",["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Quote",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Api",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Data",82],["T_NS_SEPARATOR","\\",82],["T_STRING","CartItemInterface",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$cartItem",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote $quote *\/",84],["T_WHITESPACE","\n        ",84],["T_VARIABLE","$cartId",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$cartItem",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getQuoteId",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$quote",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","quoteRepository",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getActive",86],"(",["T_VARIABLE","$cartId",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$quoteItems",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$quote",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getItems",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$quoteItems",89],"[","]",["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$cartItem",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$quote",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","setItems",90],"(",["T_VARIABLE","$quoteItems",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","quoteRepository",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","save",91],"(",["T_VARIABLE","$quote",91],")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$quote",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","collectTotals",92],"(",")",";",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$quote",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getLastAddedItem",93],"(",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","deleteById",99],"(",["T_VARIABLE","$cartId",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$itemId",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote $quote *\/",101],["T_WHITESPACE","\n        ",101],["T_VARIABLE","$quote",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","quoteRepository",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getActive",102],"(",["T_VARIABLE","$cartId",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$quoteItem",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$quote",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getItemById",103],"(",["T_VARIABLE","$itemId",103],")",";",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_VARIABLE","$quoteItem",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_THROW","throw",105],["T_WHITESPACE"," ",105],["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","NoSuchEntityException",105],"(",["T_WHITESPACE","\n                ",105],["T_STRING","__",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Cart %1 doesn\\'t contain item  %2'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$cartId",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$itemId",106],")",["T_WHITESPACE","\n            ",106],")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n        ",108],["T_TRY","try",109],["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$quote",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","removeItem",110],"(",["T_VARIABLE","$itemId",110],")",";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","quoteRepository",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","save",111],"(",["T_VARIABLE","$quote",111],")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE"," ",112],["T_CATCH","catch",112],["T_WHITESPACE"," ",112],"(",["T_NS_SEPARATOR","\\",112],["T_STRING","Exception",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$e",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_THROW","throw",113],["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","CouldNotSaveException",113],"(",["T_STRING","__",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not remove item from quote'",113],")",")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n\n        ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_STRING","true",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * @return CartItemOptionsProcessor\n     * @deprecated\n     *\/",119],["T_WHITESPACE","\n    ",122],["T_PRIVATE","private",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getCartItemOptionsProcessor",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","cartItemOptionsProcessor",125],["T_WHITESPACE"," ",125],["T_INSTANCEOF","instanceof",125],["T_WHITESPACE"," ",125],["T_STRING","CartItemOptionsProcessor",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","cartItemOptionsProcessor",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","ObjectManager",126],["T_DOUBLE_COLON","::",126],["T_STRING","getInstance",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","get",126],"(",["T_STRING","CartItemOptionsProcessor",126],["T_DOUBLE_COLON","::",126],["T_CLASS","class",126],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","cartItemOptionsProcessor",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
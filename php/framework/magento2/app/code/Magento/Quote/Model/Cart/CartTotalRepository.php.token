[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Quote",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cart",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Quote",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Quote",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CartRepositoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Quote",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CartTotalRepositoryInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Helper",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ConfigurationPool",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DataObjectHelper",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Quote",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Cart",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Totals",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ItemConverter",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Quote",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CouponManagementInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Cart totals data object.\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",16],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","CartTotalRepository",20],["T_WHITESPACE"," ",20],["T_IMPLEMENTS","implements",20],["T_WHITESPACE"," ",20],["T_STRING","CartTotalRepositoryInterface",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * Cart totals factory.\n     *\n     * @var Api\\Data\\TotalsInterfaceFactory\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$totalsFactory",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Quote repository.\n     *\n     * @var \\Magento\\Quote\\Api\\CartRepositoryInterface\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$quoteRepository",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\DataObjectHelper\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$dataObjectHelper",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var ConfigurationPool\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$itemConverter",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var CouponManagementInterface\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$couponService",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var TotalsConverter\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$totalsConverter",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @param Api\\Data\\TotalsInterfaceFactory $totalsFactory\n     * @param CartRepositoryInterface $quoteRepository\n     * @param DataObjectHelper $dataObjectHelper\n     * @param CouponManagementInterface $couponService\n     * @param TotalsConverter $totalsConverter\n     * @param ItemConverter $converter\n     *\/",56],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","__construct",64],"(",["T_WHITESPACE","\n        ",64],["T_STRING","Api",65],["T_NS_SEPARATOR","\\",65],["T_STRING","Data",65],["T_NS_SEPARATOR","\\",65],["T_STRING","TotalsInterfaceFactory",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$totalsFactory",65],",",["T_WHITESPACE","\n        ",65],["T_STRING","CartRepositoryInterface",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$quoteRepository",66],",",["T_WHITESPACE","\n        ",66],["T_STRING","DataObjectHelper",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$dataObjectHelper",67],",",["T_WHITESPACE","\n        ",67],["T_STRING","CouponManagementInterface",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$couponService",68],",",["T_WHITESPACE","\n        ",68],["T_STRING","TotalsConverter",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$totalsConverter",69],",",["T_WHITESPACE","\n        ",69],["T_STRING","ItemConverter",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$converter",70],["T_WHITESPACE","\n    ",70],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","totalsFactory",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$totalsFactory",72],";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","quoteRepository",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$quoteRepository",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","dataObjectHelper",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$dataObjectHelper",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","couponService",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$couponService",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","totalsConverter",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$totalsConverter",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","itemConverter",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$converter",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * {@inheritDoc}\n     *\n     * @param int $cartId The cart ID.\n     * @return Totals Quote totals data.\n     *\/",80],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","get",86],"(",["T_VARIABLE","$cartId",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Model\\Quote $quote *\/",88],["T_WHITESPACE","\n        ",88],["T_VARIABLE","$quote",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","quoteRepository",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getActive",89],"(",["T_VARIABLE","$cartId",89],")",";",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$quote",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","isVirtual",90],"(",")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$addressTotalsData",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$quote",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getBillingAddress",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","getData",91],"(",")",";",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$addressTotals",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$quote",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getBillingAddress",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","getTotals",92],"(",")",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE"," ",93],["T_ELSE","else",93],["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$addressTotalsData",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$quote",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getShippingAddress",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","getData",94],"(",")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$addressTotals",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$quote",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getShippingAddress",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","getTotals",95],"(",")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n\n        ",96],["T_DOC_COMMENT","\/** @var \\Magento\\Quote\\Api\\Data\\TotalsInterface $quoteTotals *\/",98],["T_WHITESPACE","\n        ",98],["T_VARIABLE","$quoteTotals",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","totalsFactory",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","create",99],"(",")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","dataObjectHelper",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","populateWithArray",100],"(",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$quoteTotals",101],",",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$addressTotalsData",102],",",["T_WHITESPACE","\n            ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Quote",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Api",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Data",103],["T_NS_SEPARATOR","\\",103],["T_STRING","TotalsInterface",103],["T_DOUBLE_COLON","::",103],["T_CLASS","class",103],["T_WHITESPACE","\n        ",103],")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$items",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],"[","]",";",["T_WHITESPACE","\n        ",105],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$quote",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getAllVisibleItems",106],"(",")",["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$index",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$item",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$items",107],"[",["T_VARIABLE","$index",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","itemConverter",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","modelToDataObject",107],"(",["T_VARIABLE","$item",107],")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$calculatedTotals",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","totalsConverter",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","process",109],"(",["T_VARIABLE","$addressTotals",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$quoteTotals",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","setTotalSegments",110],"(",["T_VARIABLE","$calculatedTotals",110],")",";",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$amount",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$quoteTotals",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getGrandTotal",112],"(",")",["T_WHITESPACE"," ",112],"-",["T_WHITESPACE"," ",112],["T_VARIABLE","$quoteTotals",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getTaxAmount",112],"(",")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$amount",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$amount",113],["T_WHITESPACE"," ",113],">",["T_WHITESPACE"," ",113],["T_LNUMBER","0",113],["T_WHITESPACE"," ",113],"?",["T_WHITESPACE"," ",113],["T_VARIABLE","$amount",113],["T_WHITESPACE"," ",113],":",["T_WHITESPACE"," ",113],["T_LNUMBER","0",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$quoteTotals",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","setCouponCode",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","couponService",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","get",114],"(",["T_VARIABLE","$cartId",114],")",")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$quoteTotals",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setGrandTotal",115],"(",["T_VARIABLE","$amount",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$quoteTotals",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","setItems",116],"(",["T_VARIABLE","$items",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$quoteTotals",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","setItemsQty",117],"(",["T_VARIABLE","$quote",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getItemsQty",117],"(",")",")",";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$quoteTotals",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setBaseCurrencyCode",118],"(",["T_VARIABLE","$quote",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getBaseCurrencyCode",118],"(",")",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$quoteTotals",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","setQuoteCurrencyCode",119],"(",["T_VARIABLE","$quote",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getQuoteCurrencyCode",119],"(",")",")",";",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$quoteTotals",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n",121],"}",["T_WHITESPACE","\n",122]]
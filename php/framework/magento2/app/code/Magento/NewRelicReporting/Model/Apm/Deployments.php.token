[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","NewRelicReporting",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Apm",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HTTP",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ZendClient",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","Deployments",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * API URL for New Relic deployments\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_CONST","const",15],["T_WHITESPACE"," ",15],["T_STRING","API_URL",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.newrelic.com\/deployments.xml'",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\NewRelicReporting\\Model\\Config\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$config",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$logger",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\ZendClientFactory $clientFactory\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$clientFactory",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\NewRelicReporting\\Model\\Config $config\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\HTTP\\ZendClientFactory $clientFactory\n     *\/",32],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","__construct",39],"(",["T_WHITESPACE","\n        ",39],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","NewRelicReporting",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Model",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Config",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$config",40],",",["T_WHITESPACE","\n        ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Psr",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Log",41],["T_NS_SEPARATOR","\\",41],["T_STRING","LoggerInterface",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$logger",41],",",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","HTTP",42],["T_NS_SEPARATOR","\\",42],["T_STRING","ZendClientFactory",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$clientFactory",42],["T_WHITESPACE","\n    ",42],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","config",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$config",44],";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","logger",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$logger",45],";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","clientFactory",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$clientFactory",46],";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Performs the request to make the deployment\n     *\n     * @param string $description\n     * @param bool $change\n     * @param bool $user\n     *\n     * @return bool|string\n     *\/",49],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","setDeployment",58],"(",["T_VARIABLE","$description",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$change",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","false",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$user",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","false",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$apiUrl",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","config",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getNewRelicApiUrl",60],"(",")",";",["T_WHITESPACE","\n\n        ",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_EMPTY","empty",62],"(",["T_VARIABLE","$apiUrl",62],")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","logger",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","notice",63],"(",["T_CONSTANT_ENCAPSED_STRING","'New Relic API URL is blank, using fallback URL'",63],")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$apiUrl",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","self",64],["T_DOUBLE_COLON","::",64],["T_STRING","API_URL",64],";",["T_WHITESPACE","\n        ",64],"}",["T_WHITESPACE","\n\n        ",65],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\HTTP\\ZendClient $client *\/",67],["T_WHITESPACE","\n        ",67],["T_VARIABLE","$client",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","clientFactory",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","create",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$client",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setUri",69],"(",["T_VARIABLE","$apiUrl",69],")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$client",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","setMethod",70],"(",["T_STRING","ZendClient",70],["T_DOUBLE_COLON","::",70],["T_STRING","POST",70],")",";",["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$client",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setHeaders",72],"(","[",["T_CONSTANT_ENCAPSED_STRING","'x-api-key'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","config",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getNewRelicApiKey",72],"(",")","]",")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$params",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],"[",["T_WHITESPACE","\n            ",74],["T_CONSTANT_ENCAPSED_STRING","'deployment[app_name]'",75],["T_WHITESPACE","       ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","config",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getNewRelicAppName",75],"(",")",",",["T_WHITESPACE","\n            ",75],["T_CONSTANT_ENCAPSED_STRING","'deployment[application_id]'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","config",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getNewRelicAppId",76],"(",")",",",["T_WHITESPACE","\n            ",76],["T_CONSTANT_ENCAPSED_STRING","'deployment[description]'",77],["T_WHITESPACE","    ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$description",77],",",["T_WHITESPACE","\n            ",77],["T_CONSTANT_ENCAPSED_STRING","'deployment[changelog]'",78],["T_WHITESPACE","      ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$change",78],",",["T_WHITESPACE","\n            ",78],["T_CONSTANT_ENCAPSED_STRING","'deployment[user]'",79],["T_WHITESPACE","           ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$user",79],["T_WHITESPACE","\n        ",79],"]",";",["T_WHITESPACE","\n\n        ",80],["T_VARIABLE","$client",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","setParameterPost",82],"(",["T_VARIABLE","$params",82],")",";",["T_WHITESPACE","\n\n        ",82],["T_TRY","try",84],["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$response",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$client",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","request",85],"(",")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE"," ",86],["T_CATCH","catch",86],["T_WHITESPACE"," ",86],"(",["T_NS_SEPARATOR","\\",86],["T_STRING","Zend_Http_Client_Exception",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$e",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","logger",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","critical",87],"(",["T_VARIABLE","$e",87],")",";",["T_WHITESPACE","\n            ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_STRING","false",88],";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","(",["T_VARIABLE","$response",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getStatus",91],"(",")",["T_WHITESPACE"," ",91],"<",["T_WHITESPACE"," ",91],["T_LNUMBER","200",91],["T_WHITESPACE"," ",91],["T_BOOLEAN_OR","||",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$response",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getStatus",91],"(",")",["T_WHITESPACE"," ",91],">",["T_WHITESPACE"," ",91],["T_LNUMBER","210",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","logger",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","warning",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Deployment marker request did not send a 200 status code.'",92],")",";",["T_WHITESPACE","\n            ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_STRING","false",93],";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$response",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getBody",96],"(",")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n",97],"}",["T_WHITESPACE","\n",98]]
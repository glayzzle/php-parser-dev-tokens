[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","NewRelicReporting",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HTTP",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ZendClient",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","CronEvent",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\ZendClient\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$request",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * URL for Insights API, generated via method getEventsUrl\n     *\n     * @var string\n     *\/",17],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$eventsUrl",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","''",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * Parameters to be sent to New Relic for a job run\n     *\n     * @var array\n     *\/",24],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$customParameters",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],"[","]",";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\NewRelicReporting\\Model\\Config\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$config",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Json\\Helper\\Data\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$jsonEncoder",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\ZendClientFactory $clientFactory\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$clientFactory",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\NewRelicReporting\\Model\\Config $config\n     * @param \\Magento\\Framework\\Json\\EncoderInterface $jsonEncoder\n     * @param \\Magento\\Framework\\HTTP\\ZendClientFactory $clientFactory\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","__construct",53],"(",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","NewRelicReporting",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Config",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$config",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Json",55],["T_NS_SEPARATOR","\\",55],["T_STRING","EncoderInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$jsonEncoder",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Framework",56],["T_NS_SEPARATOR","\\",56],["T_STRING","HTTP",56],["T_NS_SEPARATOR","\\",56],["T_STRING","ZendClientFactory",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$clientFactory",56],["T_WHITESPACE","\n    ",56],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","config",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$config",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","jsonEncoder",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$jsonEncoder",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","clientFactory",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$clientFactory",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Returns Insights API url with account id\n     *\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",63],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","getEventsUrl",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_EMPTY","empty",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","eventsUrl",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$accountId",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","config",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getNewRelicAccountId",72],"(",")",";",["T_WHITESPACE","\n            ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_EMPTY","empty",73],"(",["T_VARIABLE","$accountId",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                ",73],["T_THROW","throw",74],["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Magento",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Framework",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Exception",74],["T_NS_SEPARATOR","\\",74],["T_STRING","LocalizedException",74],"(",["T_STRING","__",74],"(",["T_WHITESPACE","\n                    ",74],["T_CONSTANT_ENCAPSED_STRING","'No New Relic Application ID configured, cannot continue with Cron Event reporting'",75],["T_WHITESPACE","\n                ",75],")",")",";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","eventsUrl",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","sprintf",78],"(",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","config",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getInsightsApiUrl",79],"(",")",",",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$accountId",80],["T_WHITESPACE","\n            ",80],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","eventsUrl",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Returns HTTP request to events url\n     *\n     * @return \\Magento\\Framework\\HTTP\\ZendClient\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getRequest",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_ISSET","isset",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","request",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","request",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","clientFactory",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","create",94],"(",")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","request",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","setUri",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getEventsUrl",95],"(",")",")",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$insertKey",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","config",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getInsightsInsertKey",96],"(",")",";",["T_WHITESPACE","\n\n            ",96],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","request",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","setMethod",98],"(",["T_STRING","ZendClient",98],["T_DOUBLE_COLON","::",98],["T_STRING","POST",98],")",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","request",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setHeaders",99],"(",["T_WHITESPACE","\n                ",99],"[",["T_WHITESPACE","\n                    ",100],["T_CONSTANT_ENCAPSED_STRING","'X-Insert-Key'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$insertKey",101],",",["T_WHITESPACE","\n                    ",101],["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'application\/json'",102],",",["T_WHITESPACE","\n                ",102],"]",["T_WHITESPACE","\n            ",103],")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","request",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Returns all set custom parameters as JSON string\n     *\n     * @return string\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getJsonForResponse",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$json",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],"[",["T_WHITESPACE","\n            ",116],["T_CONSTANT_ENCAPSED_STRING","'eventType'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'Cron'",117],",",["T_WHITESPACE","\n            ",117],["T_CONSTANT_ENCAPSED_STRING","'appName'",118],["T_WHITESPACE","   ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","config",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getNewRelicAppName",118],"(",")",",",["T_WHITESPACE","\n            ",118],["T_CONSTANT_ENCAPSED_STRING","'appId'",119],["T_WHITESPACE","     ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","config",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getNewRelicAppId",119],"(",")",",",["T_WHITESPACE","\n        ",119],"]",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$jsonArrayKeys",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","array_keys",121],"(",["T_VARIABLE","$json",121],")",";",["T_WHITESPACE","\n\n        ",121],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$jsonArrayKeys",123],["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$jsonKey",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_STRING","array_key_exists",124],"(",["T_VARIABLE","$jsonKey",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","customParameters",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_UNSET","unset",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","customParameters",125],"[",["T_VARIABLE","$jsonKey",125],"]",")",";",["T_WHITESPACE","\n            ",125],"}",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$json",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","array_merge",129],"(",["T_VARIABLE","$json",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","customParameters",129],")",";",["T_WHITESPACE","\n\n        ",129],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","jsonEncoder",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","encode",131],"(",["T_VARIABLE","$json",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Add custom parameters to send with API request\n     *\n     * @param array $data\n     * @return \\Magento\\NewRelicReporting\\Model\\CronEvent $this\n     *\/",134],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","addData",140],"(",["T_ARRAY","array",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$data",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","customParameters",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","array_merge",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","customParameters",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$data",142],")",";",["T_WHITESPACE","\n        ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Instantiates request if necessary and sends off with collected data\n     *\n     * @return bool\n     *\/",146],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","sendRequest",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$response",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getRequest",153],"(",")",["T_WHITESPACE","\n            ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","setRawData",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getJsonForResponse",154],"(",")",")",["T_WHITESPACE","\n            ",154],["T_OBJECT_OPERATOR","->",155],["T_STRING","request",155],"(",")",";",["T_WHITESPACE","\n\n        ",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$response",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getStatus",157],"(",")",["T_WHITESPACE"," ",157],["T_IS_GREATER_OR_EQUAL",">=",157],["T_WHITESPACE"," ",157],["T_LNUMBER","200",157],["T_WHITESPACE"," ",157],["T_BOOLEAN_AND","&&",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$response",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getStatus",157],"(",")",["T_WHITESPACE"," ",157],"<",["T_WHITESPACE"," ",157],["T_LNUMBER","300",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_STRING","true",158],";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_STRING","false",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n",161],"}",["T_WHITESPACE","\n",162]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Backup",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cron",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DirectoryList",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Store",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ScopeInterface",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","SystemBackup",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_CONST","const",13],["T_WHITESPACE"," ",13],["T_STRING","XML_PATH_BACKUP_ENABLED",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","'system\/backup\/enabled'",13],";",["T_WHITESPACE","\n\n    ",13],["T_CONST","const",15],["T_WHITESPACE"," ",15],["T_STRING","XML_PATH_BACKUP_TYPE",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'system\/backup\/type'",15],";",["T_WHITESPACE","\n\n    ",15],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","XML_PATH_BACKUP_MAINTENANCE_MODE",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'system\/backup\/maintenance'",17],";",["T_WHITESPACE","\n\n    ",17],["T_DOC_COMMENT","\/**\n     * Error messages\n     *\n     * @var array\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_errors",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],"[","]",";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Backup data\n     *\n     * @var \\Magento\\Backup\\Helper\\Data\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_backupData",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","null",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_coreRegistry",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","null",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var \\Psr\\Log\\LoggerInterface\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_logger",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_scopeConfig",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Filesystem facade\n     *\n     * @var \\Magento\\Framework\\Filesystem\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_filesystem",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Backup\\Factory\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_backupFactory",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\MaintenanceMode\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$maintenanceMode",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Backup\\Helper\\Data $backupData\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\Backup\\Factory $backupFactory\n     * @param \\Magento\\Framework\\App\\MaintenanceMode $maintenanceMode\n     *\/",69],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","__construct",78],"(",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Backup",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Helper",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Data",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$backupData",79],",",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Framework",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Registry",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$coreRegistry",80],",",["T_WHITESPACE","\n        ",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Psr",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Log",81],["T_NS_SEPARATOR","\\",81],["T_STRING","LoggerInterface",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$logger",81],",",["T_WHITESPACE","\n        ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Framework",82],["T_NS_SEPARATOR","\\",82],["T_STRING","App",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Config",82],["T_NS_SEPARATOR","\\",82],["T_STRING","ScopeConfigInterface",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$scopeConfig",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Framework",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Filesystem",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$filesystem",83],",",["T_WHITESPACE","\n        ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Framework",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Backup",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Factory",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$backupFactory",84],",",["T_WHITESPACE","\n        ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Framework",85],["T_NS_SEPARATOR","\\",85],["T_STRING","App",85],["T_NS_SEPARATOR","\\",85],["T_STRING","MaintenanceMode",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$maintenanceMode",85],["T_WHITESPACE","\n    ",85],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_backupData",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$backupData",87],";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_coreRegistry",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$coreRegistry",88],";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_logger",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$logger",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_scopeConfig",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$scopeConfig",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_filesystem",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$filesystem",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_backupFactory",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$backupFactory",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","maintenanceMode",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$maintenanceMode",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Create Backup\n     *\n     * @return $this\n     * @throws \\Exception\n     *\/",96],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","execute",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_scopeConfig",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","isSetFlag",104],"(",["T_STRING","self",104],["T_DOUBLE_COLON","::",104],["T_STRING","XML_PATH_BACKUP_ENABLED",104],",",["T_WHITESPACE"," ",104],["T_STRING","ScopeInterface",104],["T_DOUBLE_COLON","::",104],["T_STRING","SCOPE_STORE",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_scopeConfig",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","isSetFlag",108],"(",["T_STRING","self",108],["T_DOUBLE_COLON","::",108],["T_STRING","XML_PATH_BACKUP_MAINTENANCE_MODE",108],",",["T_WHITESPACE"," ",108],["T_STRING","ScopeInterface",108],["T_DOUBLE_COLON","::",108],["T_STRING","SCOPE_STORE",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","maintenanceMode",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","set",109],"(",["T_STRING","true",109],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$type",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_scopeConfig",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getValue",112],"(",["T_STRING","self",112],["T_DOUBLE_COLON","::",112],["T_STRING","XML_PATH_BACKUP_TYPE",112],",",["T_WHITESPACE"," ",112],["T_STRING","ScopeInterface",112],["T_DOUBLE_COLON","::",112],["T_STRING","SCOPE_STORE",112],")",";",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_errors",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],"[","]",";",["T_WHITESPACE","\n        ",114],["T_TRY","try",115],["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$backupManager",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_backupFactory",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","create",116],"(",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$type",117],["T_WHITESPACE","\n            ",117],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","setBackupExtension",118],"(",["T_WHITESPACE","\n                ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_backupData",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getExtensionByType",119],"(",["T_VARIABLE","$type",119],")",["T_WHITESPACE","\n            ",119],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","setTime",120],"(",["T_WHITESPACE","\n                ",120],["T_STRING","time",121],"(",")",["T_WHITESPACE","\n            ",121],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","setBackupsDir",122],"(",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_backupData",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getBackupsDir",123],"(",")",["T_WHITESPACE","\n            ",123],")",";",["T_WHITESPACE","\n\n            ",124],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_coreRegistry",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","register",126],"(",["T_CONSTANT_ENCAPSED_STRING","'backup_manager'",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$backupManager",126],")",";",["T_WHITESPACE","\n\n            ",126],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$type",128],["T_WHITESPACE"," ",128],["T_IS_NOT_EQUAL","!=",128],["T_WHITESPACE"," ",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Magento",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Framework",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Backup",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Factory",128],["T_DOUBLE_COLON","::",128],["T_STRING","TYPE_DB",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$backupManager",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setRootDir",129],"(",["T_WHITESPACE","\n                    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_filesystem",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getDirectoryRead",130],"(",["T_STRING","DirectoryList",130],["T_DOUBLE_COLON","::",130],["T_STRING","ROOT",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getAbsolutePath",130],"(",")",["T_WHITESPACE","\n                ",130],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","addIgnorePaths",131],"(",["T_WHITESPACE","\n                    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_backupData",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getBackupIgnorePaths",132],"(",")",["T_WHITESPACE","\n                ",132],")",";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n\n            ",134],["T_VARIABLE","$backupManager",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","create",136],"(",")",";",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$message",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_backupData",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getCreateSuccessMessageByType",137],"(",["T_VARIABLE","$type",137],")",";",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_logger",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","info",138],"(",["T_VARIABLE","$message",138],")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE"," ",139],["T_CATCH","catch",139],["T_WHITESPACE"," ",139],"(",["T_NS_SEPARATOR","\\",139],["T_STRING","Exception",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$e",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_errors",140],"[","]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$e",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getMessage",140],"(",")",";",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_errors",141],"[","]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$e",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getTrace",141],"(",")",";",["T_WHITESPACE","\n            ",141],["T_THROW","throw",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$e",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_scopeConfig",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","isSetFlag",145],"(",["T_STRING","self",145],["T_DOUBLE_COLON","::",145],["T_STRING","XML_PATH_BACKUP_MAINTENANCE_MODE",145],",",["T_WHITESPACE"," ",145],["T_STRING","ScopeInterface",145],["T_DOUBLE_COLON","::",145],["T_STRING","SCOPE_STORE",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","maintenanceMode",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","set",146],"(",["T_STRING","false",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n",150],"}",["T_WHITESPACE","\n",151]]
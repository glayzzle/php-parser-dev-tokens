[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Backup",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adminhtml",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Index",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DirectoryList",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Filesystem",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Rollback",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Backup",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Controller",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Adminhtml",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Index",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * Rollback Action\n     *\n     * @return void|\\Magento\\Backend\\App\\Action\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",17],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","execute",25],"(",")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_IF","if",27],["T_WHITESPACE"," ",27],"(","!",["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","_objectManager",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_NS_SEPARATOR","\\",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Backup",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Helper",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Data",27],["T_DOUBLE_COLON","::",27],["T_CLASS","class",27],")",["T_OBJECT_OPERATOR","->",27],["T_STRING","isRollbackAllowed",27],"(",")",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n            ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","_forward",28],"(",["T_CONSTANT_ENCAPSED_STRING","'denied'",28],")",";",["T_WHITESPACE","\n        ",28],"}",["T_WHITESPACE","\n\n        ",29],["T_IF","if",31],["T_WHITESPACE"," ",31],"(","!",["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getRequest",31],"(",")",["T_OBJECT_OPERATOR","->",31],["T_STRING","isAjax",31],"(",")",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n            ",31],["T_RETURN","return",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","_redirect",32],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",32],")",";",["T_WHITESPACE","\n        ",32],"}",["T_WHITESPACE","\n\n        ",33],["T_VARIABLE","$helper",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","_objectManager",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","get",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Backup",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Helper",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Data",35],["T_DOUBLE_COLON","::",35],["T_CLASS","class",35],")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$response",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_NEW","new",36],["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Framework",36],["T_NS_SEPARATOR","\\",36],["T_STRING","DataObject",36],"(",")",";",["T_WHITESPACE","\n\n        ",36],["T_TRY","try",38],["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n            ",38],["T_COMMENT","\/* @var $backup \\Magento\\Backup\\Model\\Backup *\/",39],["T_WHITESPACE","\n            ",39],["T_VARIABLE","$backup",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","_backupModelFactory",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","create",40],"(",["T_WHITESPACE","\n                ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getRequest",41],"(",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","getParam",41],"(",["T_CONSTANT_ENCAPSED_STRING","'time'",41],")",",",["T_WHITESPACE","\n                ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getRequest",42],"(",")",["T_OBJECT_OPERATOR","->",42],["T_STRING","getParam",42],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",42],")",["T_WHITESPACE","\n            ",42],")",";",["T_WHITESPACE","\n\n            ",43],["T_IF","if",45],["T_WHITESPACE"," ",45],"(","!",["T_VARIABLE","$backup",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getTime",45],"(",")",["T_WHITESPACE"," ",45],["T_BOOLEAN_OR","||",45],["T_WHITESPACE"," ",45],"!",["T_VARIABLE","$backup",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","exists",45],"(",")",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n                ",45],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_redirect",46],"(",["T_CONSTANT_ENCAPSED_STRING","'backup\/*'",46],")",";",["T_WHITESPACE","\n            ",46],"}",["T_WHITESPACE","\n\n            ",47],["T_IF","if",49],["T_WHITESPACE"," ",49],"(","!",["T_VARIABLE","$backup",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getTime",49],"(",")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n                ",49],["T_THROW","throw",50],["T_WHITESPACE"," ",50],["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Framework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Backup",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Exception",50],["T_NS_SEPARATOR","\\",50],["T_STRING","CantLoadSnapshot",50],"(",["T_STRING","__",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t load snapshot archive'",50],")",")",";",["T_WHITESPACE","\n            ",50],"}",["T_WHITESPACE","\n\n            ",51],["T_VARIABLE","$type",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$backup",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getType",53],"(",")",";",["T_WHITESPACE","\n\n            ",53],["T_VARIABLE","$backupManager",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_backupFactory",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","create",55],"(",["T_WHITESPACE","\n                ",55],["T_VARIABLE","$type",56],["T_WHITESPACE","\n            ",56],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","setBackupExtension",57],"(",["T_WHITESPACE","\n                ",57],["T_VARIABLE","$helper",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getExtensionByType",58],"(",["T_VARIABLE","$type",58],")",["T_WHITESPACE","\n            ",58],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","setTime",59],"(",["T_WHITESPACE","\n                ",59],["T_VARIABLE","$backup",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getTime",60],"(",")",["T_WHITESPACE","\n            ",60],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","setBackupsDir",61],"(",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$helper",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getBackupsDir",62],"(",")",["T_WHITESPACE","\n            ",62],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","setName",63],"(",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$backup",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getName",64],"(",")",",",["T_WHITESPACE","\n                ",64],["T_STRING","false",65],["T_WHITESPACE","\n            ",65],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","setResourceModel",66],"(",["T_WHITESPACE","\n                ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_objectManager",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","create",67],"(",["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Backup",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","ResourceModel",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Db",67],["T_DOUBLE_COLON","::",67],["T_CLASS","class",67],")",["T_WHITESPACE","\n            ",67],")",";",["T_WHITESPACE","\n\n            ",68],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_coreRegistry",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","register",70],"(",["T_CONSTANT_ENCAPSED_STRING","'backup_manager'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$backupManager",70],")",";",["T_WHITESPACE","\n\n            ",70],["T_VARIABLE","$passwordValid",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_objectManager",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","create",72],"(",["T_WHITESPACE","\n                ",72],["T_NS_SEPARATOR","\\",73],["T_STRING","Magento",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Backup",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Model",73],["T_NS_SEPARATOR","\\",73],["T_STRING","Backup",73],["T_DOUBLE_COLON","::",73],["T_CLASS","class",73],["T_WHITESPACE","\n            ",73],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","validateUserPassword",74],"(",["T_WHITESPACE","\n                ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getRequest",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getParam",75],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",75],")",["T_WHITESPACE","\n            ",75],")",";",["T_WHITESPACE","\n\n            ",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!",["T_VARIABLE","$passwordValid",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$response",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setError",79],"(",["T_STRING","__",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the password.'",79],")",")",";",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$backupManager",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setErrorMessage",80],"(",["T_STRING","__",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the password.'",80],")",")",";",["T_WHITESPACE","\n                ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getResponse",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","representJson",81],"(",["T_VARIABLE","$response",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","toJson",81],"(",")",")",";",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n\n            ",82],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getRequest",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","getParam",84],"(",["T_CONSTANT_ENCAPSED_STRING","'maintenance_mode'",84],")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","maintenanceMode",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","set",85],"(",["T_STRING","true",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                    ",85],["T_VARIABLE","$response",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setError",86],"(",["T_WHITESPACE","\n                        ",86],["T_STRING","__",87],"(",["T_WHITESPACE","\n                            ",87],["T_CONSTANT_ENCAPSED_STRING","'You need more permissions to activate maintenance mode right now.'",88],["T_WHITESPACE","\n                        ",88],")",["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","' '",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","__",89],"(",["T_WHITESPACE","\n                            ",89],["T_CONSTANT_ENCAPSED_STRING","'To complete the rollback, please deselect '",90],["T_WHITESPACE","\n                            ",90],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'\"Put store into maintenance mode\" or update your permissions.'",91],["T_WHITESPACE","\n                        ",91],")",["T_WHITESPACE","\n                    ",92],")",";",["T_WHITESPACE","\n                    ",93],["T_VARIABLE","$backupManager",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","setErrorMessage",94],"(",["T_WHITESPACE","\n                        ",94],["T_STRING","__",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Something went wrong while putting your store into maintenance mode.'",95],")",["T_WHITESPACE","\n                    ",95],")",";",["T_WHITESPACE","\n                    ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getResponse",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","representJson",97],"(",["T_VARIABLE","$response",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","toJson",97],"(",")",")",";",["T_WHITESPACE","\n                ",97],"}",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE","\n\n            ",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$type",101],["T_WHITESPACE"," ",101],["T_IS_NOT_EQUAL","!=",101],["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Framework",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Backup",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Factory",101],["T_DOUBLE_COLON","::",101],["T_STRING","TYPE_DB",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_DOC_COMMENT","\/** @var Filesystem $filesystem *\/",102],["T_WHITESPACE","\n                ",102],["T_VARIABLE","$filesystem",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_objectManager",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","get",103],"(",["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Framework",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Filesystem",103],["T_DOUBLE_COLON","::",103],["T_CLASS","class",103],")",";",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$backupManager",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setRootDir",104],"(",["T_VARIABLE","$filesystem",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getDirectoryRead",104],"(",["T_STRING","DirectoryList",104],["T_DOUBLE_COLON","::",104],["T_STRING","ROOT",104],")",["T_OBJECT_OPERATOR","->",104],["T_STRING","getAbsolutePath",104],"(",")",")",["T_WHITESPACE","\n                    ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","addIgnorePaths",105],"(",["T_VARIABLE","$helper",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getRollbackIgnorePaths",105],"(",")",")",";",["T_WHITESPACE","\n\n                ",105],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getRequest",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","getParam",107],"(",["T_CONSTANT_ENCAPSED_STRING","'use_ftp'",107],",",["T_WHITESPACE"," ",107],["T_STRING","false",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                    ",107],["T_VARIABLE","$backupManager",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","setUseFtp",108],"(",["T_WHITESPACE","\n                        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getRequest",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getParam",109],"(",["T_CONSTANT_ENCAPSED_STRING","'ftp_host'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","''",109],")",",",["T_WHITESPACE","\n                        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getRequest",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getParam",110],"(",["T_CONSTANT_ENCAPSED_STRING","'ftp_user'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","''",110],")",",",["T_WHITESPACE","\n                        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getRequest",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","getParam",111],"(",["T_CONSTANT_ENCAPSED_STRING","'ftp_pass'",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","''",111],")",",",["T_WHITESPACE","\n                        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getRequest",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getParam",112],"(",["T_CONSTANT_ENCAPSED_STRING","'ftp_path'",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","''",112],")",["T_WHITESPACE","\n                    ",112],")",";",["T_WHITESPACE","\n                ",113],"}",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n\n            ",115],["T_VARIABLE","$backupManager",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","rollback",117],"(",")",";",["T_WHITESPACE","\n\n            ",117],["T_VARIABLE","$helper",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","invalidateCache",119],"(",")",";",["T_WHITESPACE","\n\n            ",119],["T_VARIABLE","$adminSession",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_getSession",121],"(",")",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$adminSession",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","destroy",122],"(",")",";",["T_WHITESPACE","\n\n            ",122],["T_VARIABLE","$response",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","setRedirectUrl",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getUrl",124],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",124],")",")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE"," ",125],["T_CATCH","catch",125],["T_WHITESPACE"," ",125],"(",["T_NS_SEPARATOR","\\",125],["T_STRING","Magento",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Framework",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Backup",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Exception",125],["T_NS_SEPARATOR","\\",125],["T_STRING","CantLoadSnapshot",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$e",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$errorMsg",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","__",126],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find the backup file.'",126],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE"," ",127],["T_CATCH","catch",127],["T_WHITESPACE"," ",127],"(",["T_NS_SEPARATOR","\\",127],["T_STRING","Magento",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Framework",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Backup",127],["T_NS_SEPARATOR","\\",127],["T_STRING","Exception",127],["T_NS_SEPARATOR","\\",127],["T_STRING","FtpConnectionFailed",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$e",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$errorMsg",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","__",128],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t connect to the FTP right now.'",128],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE"," ",129],["T_CATCH","catch",129],["T_WHITESPACE"," ",129],"(",["T_NS_SEPARATOR","\\",129],["T_STRING","Magento",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Framework",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Backup",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Exception",129],["T_NS_SEPARATOR","\\",129],["T_STRING","FtpValidationFailed",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$e",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$errorMsg",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","__",130],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to validate FTP.'",130],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE"," ",131],["T_CATCH","catch",131],["T_WHITESPACE"," ",131],"(",["T_NS_SEPARATOR","\\",131],["T_STRING","Magento",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Framework",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Backup",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Exception",131],["T_NS_SEPARATOR","\\",131],["T_STRING","NotEnoughPermissions",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$e",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_objectManager",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","get",132],"(",["T_NS_SEPARATOR","\\",132],["T_STRING","Psr",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Log",132],["T_NS_SEPARATOR","\\",132],["T_STRING","LoggerInterface",132],["T_DOUBLE_COLON","::",132],["T_CLASS","class",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","info",132],"(",["T_VARIABLE","$e",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getMessage",132],"(",")",")",";",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$errorMsg",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","__",133],"(",["T_CONSTANT_ENCAPSED_STRING","'You need more permissions to perform a rollback.'",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE"," ",134],["T_CATCH","catch",134],["T_WHITESPACE"," ",134],"(",["T_NS_SEPARATOR","\\",134],["T_STRING","Exception",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$e",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_objectManager",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_NS_SEPARATOR","\\",135],["T_STRING","Psr",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Log",135],["T_NS_SEPARATOR","\\",135],["T_STRING","LoggerInterface",135],["T_DOUBLE_COLON","::",135],["T_CLASS","class",135],")",["T_OBJECT_OPERATOR","->",135],["T_STRING","info",135],"(",["T_VARIABLE","$e",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getMessage",135],"(",")",")",";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$errorMsg",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","__",136],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to rollback.'",136],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_EMPTY","empty",139],"(",["T_VARIABLE","$errorMsg",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$response",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setError",140],"(",["T_VARIABLE","$errorMsg",140],")",";",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$backupManager",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setErrorMessage",141],"(",["T_VARIABLE","$errorMsg",141],")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getRequest",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","getParam",144],"(",["T_CONSTANT_ENCAPSED_STRING","'maintenance_mode'",144],")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","maintenanceMode",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","set",145],"(",["T_STRING","false",145],")",";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n\n        ",146],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getResponse",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","representJson",148],"(",["T_VARIABLE","$response",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","toJson",148],"(",")",")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n",149],"}",["T_WHITESPACE","\n",150]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Variable",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ResourceModel",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Custom variable resource model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Variable",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ResourceModel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Db",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractDb",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @return void\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","_construct",23],"(",")",["T_WHITESPACE","\n    ",23],"{",["T_WHITESPACE","\n        ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","_init",25],"(",["T_CONSTANT_ENCAPSED_STRING","'variable'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'variable_id'",25],")",";",["T_WHITESPACE","\n    ",25],"}",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Load variable by code\n     *\n     * @param \\Magento\\Variable\\Model\\Variable $object\n     * @param string $code\n     * @return $this\n     *\/",28],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","loadByCode",35],"(",["T_NS_SEPARATOR","\\",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Variable",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Model",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Variable",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$object",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$code",35],")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_IF","if",37],["T_WHITESPACE"," ",37],"(",["T_VARIABLE","$result",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getVariableByCode",37],"(",["T_VARIABLE","$code",37],",",["T_WHITESPACE"," ",37],["T_STRING","true",37],",",["T_WHITESPACE"," ",37],["T_VARIABLE","$object",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getStoreId",37],"(",")",")",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n            ",37],["T_VARIABLE","$object",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","setData",38],"(",["T_VARIABLE","$result",38],")",";",["T_WHITESPACE","\n        ",38],"}",["T_WHITESPACE","\n        ",39],["T_RETURN","return",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Retrieve variable data by code\n     *\n     * @param string $code\n     * @param bool $withValue\n     * @param integer $storeId\n     * @return array\n     *\/",43],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","getVariableByCode",51],"(",["T_VARIABLE","$code",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$withValue",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","false",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$storeId",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_LNUMBER","0",51],")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$select",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getConnection",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","select",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","from",53],"(",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getMainTable",54],"(",")",["T_WHITESPACE","\n        ",54],")",["T_OBJECT_OPERATOR","->",55],["T_STRING","where",55],"(",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getMainTable",56],"(",")",["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'.code = ?'",56],",",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$code",57],["T_WHITESPACE","\n        ",57],")",";",["T_WHITESPACE","\n        ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$withValue",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_addValueToSelect",60],"(",["T_VARIABLE","$select",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$storeId",60],")",";",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE","\n        ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getConnection",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","fetchRow",62],"(",["T_VARIABLE","$select",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Perform actions after object save\n     *\n     * @param \\Magento\\Framework\\Model\\AbstractModel $object\n     * @return $this\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","_afterSave",71],"(",["T_NS_SEPARATOR","\\",71],["T_STRING","Magento",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Framework",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Model",71],["T_NS_SEPARATOR","\\",71],["T_STRING","AbstractModel",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$object",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_STRING","parent",73],["T_DOUBLE_COLON","::",73],["T_STRING","_afterSave",73],"(",["T_VARIABLE","$object",73],")",";",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$object",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getUseDefaultValue",74],"(",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_COMMENT","\/*\n             * remove store value\n             *\/",75],["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getConnection",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","delete",78],"(",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getTable",79],"(",["T_CONSTANT_ENCAPSED_STRING","'variable_value'",79],")",",",["T_WHITESPACE","\n                ",79],"[",["T_CONSTANT_ENCAPSED_STRING","'variable_id = ?'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$object",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getId",80],"(",")",",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$object",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getStoreId",80],"(",")","]",["T_WHITESPACE","\n            ",80],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE"," ",82],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$data",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[",["T_WHITESPACE","\n                ",83],["T_CONSTANT_ENCAPSED_STRING","'variable_id'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$object",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getId",84],"(",")",",",["T_WHITESPACE","\n                ",84],["T_CONSTANT_ENCAPSED_STRING","'store_id'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$object",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getStoreId",85],"(",")",",",["T_WHITESPACE","\n                ",85],["T_CONSTANT_ENCAPSED_STRING","'plain_value'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$object",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getPlainValue",86],"(",")",",",["T_WHITESPACE","\n                ",86],["T_CONSTANT_ENCAPSED_STRING","'html_value'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$object",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getHtmlValue",87],"(",")",",",["T_WHITESPACE","\n            ",87],"]",";",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$data",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_prepareDataForTable",89],"(",["T_NEW","new",89],["T_WHITESPACE"," ",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Framework",89],["T_NS_SEPARATOR","\\",89],["T_STRING","DataObject",89],"(",["T_VARIABLE","$data",89],")",",",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getTable",89],"(",["T_CONSTANT_ENCAPSED_STRING","'variable_value'",89],")",")",";",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getConnection",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","insertOnDuplicate",90],"(",["T_WHITESPACE","\n                ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getTable",91],"(",["T_CONSTANT_ENCAPSED_STRING","'variable_value'",91],")",",",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$data",92],",",["T_WHITESPACE","\n                ",92],"[",["T_CONSTANT_ENCAPSED_STRING","'plain_value'",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'html_value'",93],"]",["T_WHITESPACE","\n            ",93],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Retrieve select object for load object data\n     *\n     * @param string $field\n     * @param mixed $value\n     * @param \\Magento\\Framework\\Model\\AbstractModel $object\n     * @return $this\n     *\/",99],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","_getLoadSelect",107],"(",["T_VARIABLE","$field",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$value",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$object",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$select",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","parent",109],["T_DOUBLE_COLON","::",109],["T_STRING","_getLoadSelect",109],"(",["T_VARIABLE","$field",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$value",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$object",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_addValueToSelect",110],"(",["T_VARIABLE","$select",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$object",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getStoreId",110],"(",")",")",";",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$select",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Add variable store and default value to select\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @param integer $storeId\n     * @return \\Magento\\Variable\\Model\\ResourceModel\\Variable\n     *\/",114],["T_WHITESPACE","\n    ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","_addValueToSelect",121],"(",["T_WHITESPACE","\n        ",121],["T_NS_SEPARATOR","\\",122],["T_STRING","Magento",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Framework",122],["T_NS_SEPARATOR","\\",122],["T_STRING","DB",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Select",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$select",122],",",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$storeId",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Magento",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Store",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Model",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Store",123],["T_DOUBLE_COLON","::",123],["T_STRING","DEFAULT_STORE_ID",123],["T_WHITESPACE","\n    ",123],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$connection",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getConnection",125],"(",")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$ifNullPlainValue",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$connection",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getCheckSql",126],"(",["T_CONSTANT_ENCAPSED_STRING","'store.plain_value IS NULL'",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'def.plain_value'",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'store.plain_value'",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$ifNullHtmlValue",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$connection",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getCheckSql",127],"(",["T_CONSTANT_ENCAPSED_STRING","'store.html_value IS NULL'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'def.html_value'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'store.html_value'",127],")",";",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$select",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","joinLeft",129],"(",["T_WHITESPACE","\n            ",129],"[",["T_CONSTANT_ENCAPSED_STRING","'def'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getTable",130],"(",["T_CONSTANT_ENCAPSED_STRING","'variable_value'",130],")","]",",",["T_WHITESPACE","\n            ",130],["T_CONSTANT_ENCAPSED_STRING","'def.variable_id = '",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getMainTable",131],"(",")",["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'.variable_id AND def.store_id = 0'",131],",",["T_WHITESPACE","\n            ",131],"[","]",["T_WHITESPACE","\n        ",132],")",["T_OBJECT_OPERATOR","->",133],["T_STRING","joinLeft",133],"(",["T_WHITESPACE","\n            ",133],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getTable",134],"(",["T_CONSTANT_ENCAPSED_STRING","'variable_value'",134],")","]",",",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'store.variable_id = def.variable_id AND store.store_id = '",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_VARIABLE","$connection",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","quote",135],"(",["T_VARIABLE","$storeId",135],")",",",["T_WHITESPACE","\n            ",135],"[","]",["T_WHITESPACE","\n        ",136],")",["T_OBJECT_OPERATOR","->",137],["T_STRING","columns",137],"(",["T_WHITESPACE","\n            ",137],"[",["T_WHITESPACE","\n                ",138],["T_CONSTANT_ENCAPSED_STRING","'plain_value'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$ifNullPlainValue",139],",",["T_WHITESPACE","\n                ",139],["T_CONSTANT_ENCAPSED_STRING","'html_value'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$ifNullHtmlValue",140],",",["T_WHITESPACE","\n                ",140],["T_CONSTANT_ENCAPSED_STRING","'store_plain_value'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'store.plain_value'",141],",",["T_WHITESPACE","\n                ",141],["T_CONSTANT_ENCAPSED_STRING","'store_html_value'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'store.html_value'",142],",",["T_WHITESPACE","\n            ",142],"]",["T_WHITESPACE","\n        ",143],")",";",["T_WHITESPACE","\n\n        ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n",147],"}",["T_WHITESPACE","\n",148]]
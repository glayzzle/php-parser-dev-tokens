[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","GiftMessage",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Block",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Message",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Context",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","GiftMessage",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Message",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Gift message inline edit form\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Inline",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","View",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Element",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Template",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * @var mixed\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$_entity",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","null",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var string|null\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_type",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","null",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var Message|null\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_giftMessage",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","null",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$_template",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'inline.phtml'",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Gift message message\n     *\n     * @var \\Magento\\GiftMessage\\Helper\\Message|null\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_giftMessageMessage",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","null",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_customerSession",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Block\\Product\\ImageBuilder\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$imageBuilder",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Http\\Context\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$httpContext",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Checkout type. 'onepage_checkout' and 'multishipping_address' are standard types\n     *\n     * @var string\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$checkoutType",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\View\\Element\\Template\\Context $context\n     * @param \\Magento\\Customer\\Model\\Session $customerSession\n     * @param \\Magento\\GiftMessage\\Helper\\Message $giftMessageMessage\n     * @param \\Magento\\Catalog\\Block\\Product\\ImageBuilder $imageBuilder\n     * @param \\Magento\\Framework\\App\\Http\\Context $httpContext\n     * @param array $data\n     *\/",67],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","__construct",75],"(",["T_WHITESPACE","\n        ",75],["T_NS_SEPARATOR","\\",76],["T_STRING","Magento",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Framework",76],["T_NS_SEPARATOR","\\",76],["T_STRING","View",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Element",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Template",76],["T_NS_SEPARATOR","\\",76],["T_STRING","Context",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$context",76],",",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Customer",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Model",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Session",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$customerSession",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","GiftMessage",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Helper",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Message",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$giftMessageMessage",78],",",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Catalog",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Block",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Product",79],["T_NS_SEPARATOR","\\",79],["T_STRING","ImageBuilder",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$imageBuilder",79],",",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Framework",80],["T_NS_SEPARATOR","\\",80],["T_STRING","App",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Http",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Context",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$httpContext",80],",",["T_WHITESPACE","\n        ",80],["T_ARRAY","array",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$data",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],"[","]",["T_WHITESPACE","\n    ",81],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","imageBuilder",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$imageBuilder",83],";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_giftMessageMessage",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$giftMessageMessage",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_customerSession",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$customerSession",85],";",["T_WHITESPACE","\n        ",85],["T_STRING","parent",86],["T_DOUBLE_COLON","::",86],["T_STRING","__construct",86],"(",["T_VARIABLE","$context",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$data",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_isScopePrivate",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","true",87],";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","httpContext",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$httpContext",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Set entity\n     *\n     * @param mixed $entity\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",91],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","setEntity",98],"(",["T_VARIABLE","$entity",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_entity",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$entity",100],";",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Get entity\n     *\n     * @return mixed\n     * @codeCoverageIgnore\n     *\/",104],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","getEntity",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_entity",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Set type\n     *\n     * @param string $type\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",115],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","setType",122],"(",["T_VARIABLE","$type",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_type",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$type",124],";",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Get type\n     *\n     * @return string\n     * @codeCoverageIgnore\n     *\/",128],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","getType",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_type",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Define checkout type\n     *\n     * @param $type string\n     * @return $this\n     * @codeCoverageIgnore\n     *\/",139],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","setCheckoutType",146],"(",["T_VARIABLE","$type",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","checkoutType",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$type",148],";",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Return checkout type. Typical values are 'onepage_checkout' and 'multishipping_address'\n     *\n     * @return string|null\n     * @codeCoverageIgnore\n     *\/",152],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getCheckoutType",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","checkoutType",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Check if entity has gift message\n     *\n     * @return bool\n     *\/",163],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","hasGiftMessage",168],"(",")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getEntity",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getGiftMessageId",170],"(",")",["T_WHITESPACE"," ",170],">",["T_WHITESPACE"," ",170],["T_LNUMBER","0",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Init message\n     *\n     * @return $this\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","_initMessage",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_giftMessage",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_giftMessageMessage",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getGiftMessage",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getEntity",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getGiftMessageId",180],"(",")",")",";",["T_WHITESPACE","\n        ",180],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * Get default value for From field\n     *\n     * @return string\n     *\/",184],["T_WHITESPACE","\n    ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","getDefaultFrom",189],"(",")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","httpContext",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getValue",191],"(",["T_STRING","Context",191],["T_DOUBLE_COLON","::",191],["T_STRING","CONTEXT_AUTH",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_customerSession",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getCustomer",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","getName",192],"(",")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE"," ",193],["T_ELSE","else",193],["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getEntity",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","getBillingAddress",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","getName",194],"(",")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Get default value for To field\n     *\n     * @return string\n     *\/",198],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","getDefaultTo",203],"(",")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getEntity",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getShippingAddress",205],"(",")",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getEntity",206],"(",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","getShippingAddress",206],"(",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","getName",206],"(",")",";",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE"," ",207],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getEntity",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","getName",208],"(",")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Retrieve message\n     *\n     * @param mixed $entity\n     * @return string\n     *\/",212],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","getMessage",218],"(",["T_VARIABLE","$entity",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","null",218],")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_giftMessage",220],["T_WHITESPACE"," ",220],["T_IS_IDENTICAL","===",220],["T_WHITESPACE"," ",220],["T_STRING","null",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_initMessage",221],"(",")",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n\n        ",222],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$entity",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n            ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(","!",["T_VARIABLE","$entity",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getGiftMessage",225],"(",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$entity",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setGiftMessage",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_giftMessageMessage",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getGiftMessage",226],"(",["T_VARIABLE","$entity",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getGiftMessageId",226],"(",")",")",")",";",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n            ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$entity",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getGiftMessage",228],"(",")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n\n        ",229],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_giftMessage",231],";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Retrieve items\n     *\n     * @return array\n     *\/",234],["T_WHITESPACE","\n    ",238],["T_PUBLIC","public",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","getItems",239],"(",")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(","!",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getData",241],"(",["T_CONSTANT_ENCAPSED_STRING","'items'",241],")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$items",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],"[","]",";",["T_WHITESPACE","\n\n            ",242],["T_VARIABLE","$entityItems",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getEntity",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","getAllItems",244],"(",")",";",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_eventManager",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","dispatch",245],"(",["T_CONSTANT_ENCAPSED_STRING","'gift_options_prepare_items'",245],",",["T_WHITESPACE"," ",245],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$entityItems",245],"]",")",";",["T_WHITESPACE","\n\n            ",245],["T_FOREACH","foreach",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$entityItems",247],["T_WHITESPACE"," ",247],["T_AS","as",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$item",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$item",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getParentItem",248],"(",")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                    ",248],["T_CONTINUE","continue",249],";",["T_WHITESPACE","\n                ",249],"}",["T_WHITESPACE","\n                ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","isItemMessagesAvailable",251],"(",["T_VARIABLE","$item",251],")",["T_WHITESPACE"," ",251],["T_BOOLEAN_OR","||",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$item",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getIsGiftOptionsAvailable",251],"(",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                    ",251],["T_VARIABLE","$items",252],"[","]",["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$item",252],";",["T_WHITESPACE","\n                ",252],"}",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setData",255],"(",["T_CONSTANT_ENCAPSED_STRING","'items'",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$items",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getData",257],"(",["T_CONSTANT_ENCAPSED_STRING","'items'",257],")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Check if gift messages for separate items are allowed\n     *\n     * @return bool\n     *\/",260],["T_WHITESPACE","\n    ",264],["T_PUBLIC","public",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","isItemsAvailable",265],"(",")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_STRING","count",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getItems",267],"(",")",")",["T_WHITESPACE"," ",267],">",["T_WHITESPACE"," ",267],["T_LNUMBER","0",267],";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Return items count\n     *\n     * @return int\n     *\/",270],["T_WHITESPACE","\n    ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","countItems",275],"(",")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_STRING","count",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getItems",277],"(",")",")",";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n    ",278],["T_DOC_COMMENT","\/**\n     * Check if items has messages\n     *\n     * @return bool\n     * @SuppressWarnings(PHPMD.BooleanGetMethodName)\n     *\/",280],["T_WHITESPACE","\n    ",285],["T_PUBLIC","public",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","getItemsHasMesssages",286],"(",")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_FOREACH","foreach",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getItems",288],"(",")",["T_WHITESPACE"," ",288],["T_AS","as",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$item",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(",["T_VARIABLE","$item",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getGiftMessageId",289],"(",")",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n                ",289],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_STRING","true",290],";",["T_WHITESPACE","\n            ",290],"}",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_STRING","false",293],";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * Check if entity has message\n     *\n     * @return bool\n     * @SuppressWarnings(PHPMD.BooleanGetMethodName)\n     *\/",296],["T_WHITESPACE","\n    ",301],["T_PUBLIC","public",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","getEntityHasMessage",302],"(",")",["T_WHITESPACE","\n    ",302],"{",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getEntity",304],"(",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getGiftMessageId",304],"(",")",["T_WHITESPACE"," ",304],">",["T_WHITESPACE"," ",304],["T_LNUMBER","0",304],";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n\n    ",305],["T_DOC_COMMENT","\/**\n     * Return escaped value\n     *\n     * @param string $value\n     * @param string $defaultValue\n     * @return string\n     *\/",307],["T_WHITESPACE","\n    ",313],["T_PUBLIC","public",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","getEscaped",314],"(",["T_VARIABLE","$value",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$defaultValue",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","''",314],")",["T_WHITESPACE","\n    ",314],"{",["T_WHITESPACE","\n        ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","escapeHtml",316],"(",["T_STRING","trim",316],"(",["T_VARIABLE","$value",316],")",["T_WHITESPACE"," ",316],["T_IS_NOT_EQUAL","!=",316],["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","''",316],["T_WHITESPACE"," ",316],"?",["T_WHITESPACE"," ",316],["T_VARIABLE","$value",316],["T_WHITESPACE"," ",316],":",["T_WHITESPACE"," ",316],["T_VARIABLE","$defaultValue",316],")",";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n\n    ",317],["T_DOC_COMMENT","\/**\n     * Check availability of giftmessages on order level\n     *\n     * @return bool\n     *\/",319],["T_WHITESPACE","\n    ",323],["T_PUBLIC","public",324],["T_WHITESPACE"," ",324],["T_FUNCTION","function",324],["T_WHITESPACE"," ",324],["T_STRING","isMessagesAvailable",324],"(",")",["T_WHITESPACE","\n    ",324],"{",["T_WHITESPACE","\n        ",325],["T_RETURN","return",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_giftMessageMessage",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","isMessagesAllowed",326],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getEntity",326],"(",")",")",";",["T_WHITESPACE","\n    ",326],"}",["T_WHITESPACE","\n\n    ",327],["T_DOC_COMMENT","\/**\n     * Check availability of giftmessages for specified entity item\n     *\n     * @param \\Magento\\Framework\\DataObject $item\n     * @return bool\n     *\/",329],["T_WHITESPACE","\n    ",334],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","isItemMessagesAvailable",335],"(",["T_VARIABLE","$item",335],")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$type",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_STRING","substr",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getType",337],"(",")",",",["T_WHITESPACE"," ",337],["T_LNUMBER","0",337],",",["T_WHITESPACE"," ",337],["T_LNUMBER","5",337],")",["T_WHITESPACE"," ",337],["T_IS_EQUAL","==",337],["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'multi'",337],["T_WHITESPACE"," ",337],"?",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'address_item'",337],["T_WHITESPACE"," ",337],":",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'item'",337],";",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","_giftMessageMessage",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","isMessagesAllowed",338],"(",["T_VARIABLE","$type",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$item",338],")",";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Render HTML code referring to config settings\n     *\n     * @return string\n     *\/",341],["T_WHITESPACE","\n    ",345],["T_PROTECTED","protected",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","_toHtml",346],"(",")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_COMMENT","\/\/ render HTML when messages are allowed for order or for items only\n",348],["T_WHITESPACE","        ",349],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","isItemsAvailable",349],"(",")",["T_WHITESPACE"," ",349],["T_BOOLEAN_OR","||",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","isMessagesAvailable",349],"(",")",")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n            ",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_STRING","parent",350],["T_DOUBLE_COLON","::",350],["T_STRING","_toHtml",350],"(",")",";",["T_WHITESPACE","\n        ",350],"}",["T_WHITESPACE","\n        ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","''",352],";",["T_WHITESPACE","\n    ",352],"}",["T_WHITESPACE","\n\n    ",353],["T_DOC_COMMENT","\/**\n     * Retrieve product image\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string $imageId\n     * @param array $attributes\n     * @return \\Magento\\Catalog\\Block\\Product\\Image\n     *\/",355],["T_WHITESPACE","\n    ",362],["T_PUBLIC","public",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","getImage",363],"(",["T_VARIABLE","$product",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$imageId",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$attributes",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],"[","]",")",["T_WHITESPACE","\n    ",363],"{",["T_WHITESPACE","\n        ",364],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","imageBuilder",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","setProduct",365],"(",["T_VARIABLE","$product",365],")",["T_WHITESPACE","\n            ",365],["T_OBJECT_OPERATOR","->",366],["T_STRING","setImageId",366],"(",["T_VARIABLE","$imageId",366],")",["T_WHITESPACE","\n            ",366],["T_OBJECT_OPERATOR","->",367],["T_STRING","setAttributes",367],"(",["T_VARIABLE","$attributes",367],")",["T_WHITESPACE","\n            ",367],["T_OBJECT_OPERATOR","->",368],["T_STRING","create",368],"(",")",";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n",369],"}",["T_WHITESPACE","\n",370]]
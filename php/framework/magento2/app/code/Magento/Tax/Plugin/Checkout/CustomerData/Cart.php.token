[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tax",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Checkout",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CustomerData",7],";",["T_WHITESPACE","\n\n",7],["T_CLASS","class",9],["T_WHITESPACE"," ",9],["T_STRING","Cart",9],["T_WHITESPACE","\n",9],"{",["T_WHITESPACE","\n    ",10],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",11],["T_WHITESPACE","\n    ",13],["T_PROTECTED","protected",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$checkoutSession",14],";",["T_WHITESPACE","\n\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Helper\\Data\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$checkoutHelper",19],";",["T_WHITESPACE","\n\n    ",19],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Tax\\Block\\Item\\Price\\Renderer\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$itemPriceRenderer",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Quote\\Model\\Quote|null\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$quote",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","null",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var array|null\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$totals",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","null",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Checkout\\Model\\Session $checkoutSession\n     * @param \\Magento\\Checkout\\Helper\\Data $checkoutHelper\n     * @param \\Magento\\Tax\\Block\\Item\\Price\\Renderer $itemPriceRenderer\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","__construct",41],"(",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Checkout",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Model",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Session",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$checkoutSession",42],",",["T_WHITESPACE","\n        ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Magento",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Checkout",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Helper",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Data",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$checkoutHelper",43],",",["T_WHITESPACE","\n        ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Tax",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Block",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Item",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Price",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Renderer",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$itemPriceRenderer",44],["T_WHITESPACE","\n    ",44],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","checkoutSession",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$checkoutSession",46],";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","checkoutHelper",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$checkoutHelper",47],";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","itemPriceRenderer",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$itemPriceRenderer",48],";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Add tax data to result\n     *\n     * @param \\Magento\\Checkout\\CustomerData\\Cart $subject\n     * @param array $result\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",51],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","afterGetSectionData",59],"(",["T_NS_SEPARATOR","\\",59],["T_STRING","Magento",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Checkout",59],["T_NS_SEPARATOR","\\",59],["T_STRING","CustomerData",59],["T_NS_SEPARATOR","\\",59],["T_STRING","Cart",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$subject",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$result",59],")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$result",61],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal_incl_tax'",61],"]",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","checkoutHelper",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","formatPrice",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getSubtotalInclTax",61],"(",")",")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$result",62],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal_excl_tax'",62],"]",["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","checkoutHelper",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","formatPrice",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getSubtotalExclTax",62],"(",")",")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$items",64],["T_WHITESPACE"," ",64],"=",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getQuote",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","getAllVisibleItems",64],"(",")",";",["T_WHITESPACE","\n        ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_STRING","is_array",65],"(",["T_VARIABLE","$result",65],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",65],"]",")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_FOREACH","foreach",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$result",66],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",66],"]",["T_WHITESPACE"," ",66],["T_AS","as",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$key",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$itemAsArray",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n                ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$item",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","findItemById",67],"(",["T_VARIABLE","$itemAsArray",67],"[",["T_CONSTANT_ENCAPSED_STRING","'item_id'",67],"]",",",["T_WHITESPACE"," ",67],["T_VARIABLE","$items",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","itemPriceRenderer",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","setItem",68],"(",["T_VARIABLE","$item",68],")",";",["T_WHITESPACE","\n                    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","itemPriceRenderer",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setTemplate",69],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart\/item\/price\/sidebar.phtml'",69],")",";",["T_WHITESPACE","\n                    ",69],["T_VARIABLE","$result",70],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",70],"]","[",["T_VARIABLE","$key",70],"]","[",["T_CONSTANT_ENCAPSED_STRING","'product_price'",70],"]","=",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","itemPriceRenderer",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","toHtml",70],"(",")",";",["T_WHITESPACE","\n                ",70],"}",["T_WHITESPACE","\n            ",71],"}",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$result",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Get subtotal, including tax\n     *\n     * @return float\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","getSubtotalInclTax",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$subtotal",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_LNUMBER","0",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$totals",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getTotals",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_ISSET","isset",86],"(",["T_VARIABLE","$totals",86],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",86],"]",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$subtotal",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$totals",87],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",87],"]",["T_OBJECT_OPERATOR","->",87],["T_STRING","getValueInclTax",87],"(",")",["T_WHITESPACE"," ",87],"?",":",["T_WHITESPACE"," ",87],["T_VARIABLE","$totals",87],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",87],"]",["T_OBJECT_OPERATOR","->",87],["T_STRING","getValue",87],"(",")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$subtotal",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Get subtotal, excluding tax\n     *\n     * @return float\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getSubtotalExclTax",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$subtotal",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_LNUMBER","0",99],";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$totals",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getTotals",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_ISSET","isset",101],"(",["T_VARIABLE","$totals",101],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",101],"]",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$subtotal",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$totals",102],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",102],"]",["T_OBJECT_OPERATOR","->",102],["T_STRING","getValueExclTax",102],"(",")",["T_WHITESPACE"," ",102],"?",":",["T_WHITESPACE"," ",102],["T_VARIABLE","$totals",102],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",102],"]",["T_OBJECT_OPERATOR","->",102],["T_STRING","getValue",102],"(",")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$subtotal",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Get totals\n     *\n     * @return array\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","getTotals",112],"(",")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_COMMENT","\/\/ TODO: TODO: MAGETWO-34824 duplicate \\Magento\\Checkout\\CustomerData\\Cart::getSectionData\n",114],["T_WHITESPACE","        ",115],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_EMPTY","empty",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","totals",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","totals",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getQuote",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getTotals",116],"(",")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","totals",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Get active quote\n     *\n     * @return \\Magento\\Quote\\Model\\Quote\n     *\/",121],["T_WHITESPACE","\n    ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getQuote",126],"(",")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_STRING","null",128],["T_WHITESPACE"," ",128],["T_IS_IDENTICAL","===",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","quote",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","quote",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","checkoutSession",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getQuote",129],"(",")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","quote",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Find item by id in items haystack\n     *\n     * @param int $id\n     * @param array $itemsHaystack\n     * @return \\Magento\\Quote\\Model\\Quote\\Item | bool\n     *\/",134],["T_WHITESPACE","\n    ",140],["T_PROTECTED","protected",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","findItemById",141],"(",["T_VARIABLE","$id",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$itemsHaystack",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_STRING","is_array",143],"(",["T_VARIABLE","$itemsHaystack",143],")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$itemsHaystack",144],["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$item",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_DOC_COMMENT","\/** @var $item \\Magento\\Quote\\Model\\Quote\\Item *\/",145],["T_WHITESPACE","\n                ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_INT_CAST","(int)",146],["T_VARIABLE","$item",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getItemId",146],"(",")",["T_WHITESPACE"," ",146],["T_IS_EQUAL","==",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$id",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                    ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$item",147],";",["T_WHITESPACE","\n                ",147],"}",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_STRING","false",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n",152],"}",["T_WHITESPACE","\n",153]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tax report resource model with aggregation by created at\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",7],["T_WHITESPACE","\n",11],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tax",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ResourceModel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Report",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tax",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Createdat",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Reports",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ResourceModel",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Report",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AbstractReport",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Resource initialization\n     *\n     * @return void\n     *\/",16],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","_construct",21],"(",")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","_init",23],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_order_aggregated_created'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'id'",23],")",";",["T_WHITESPACE","\n    ",23],"}",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Aggregate Tax data by order created at\n     *\n     * @param mixed $from\n     * @param mixed $to\n     * @return $this\n     *\/",26],["T_WHITESPACE","\n    ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","aggregate",33],"(",["T_VARIABLE","$from",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","null",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$to",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","null",33],")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_RETURN","return",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","_aggregateByOrder",35],"(",["T_CONSTANT_ENCAPSED_STRING","'created_at'",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$from",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$to",35],")",";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Aggregate Tax data by orders\n     *\n     * @param string $aggregationField\n     * @param mixed $from\n     * @param mixed $to\n     * @return $this\n     * @throws \\Exception\n     *\/",38],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","_aggregateByOrder",47],"(",["T_VARIABLE","$aggregationField",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$from",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$to",47],")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$connection",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getConnection",49],"(",")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$salesAdapter",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_resources",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getConnection",50],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",50],")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$connection",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","beginTransaction",52],"(",")",";",["T_WHITESPACE","\n\n        ",52],["T_TRY","try",54],["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$from",55],["T_WHITESPACE"," ",55],["T_IS_NOT_IDENTICAL","!==",55],["T_WHITESPACE"," ",55],["T_STRING","null",55],["T_WHITESPACE"," ",55],["T_BOOLEAN_OR","||",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$to",55],["T_WHITESPACE"," ",55],["T_IS_NOT_IDENTICAL","!==",55],["T_WHITESPACE"," ",55],["T_STRING","null",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                ",55],["T_VARIABLE","$subSelect",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_getTableDateRangeSelect",56],"(",["T_WHITESPACE","\n                    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getTable",57],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",57],")",",",["T_WHITESPACE","\n                    ",57],["T_CONSTANT_ENCAPSED_STRING","'created_at'",58],",",["T_WHITESPACE","\n                    ",58],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",59],",",["T_WHITESPACE","\n                    ",59],["T_VARIABLE","$from",60],",",["T_WHITESPACE","\n                    ",60],["T_VARIABLE","$to",61],["T_WHITESPACE","\n                ",61],")",";",["T_WHITESPACE","\n            ",62],"}",["T_WHITESPACE"," ",63],["T_ELSE","else",63],["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$subSelect",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","null",64],";",["T_WHITESPACE","\n            ",64],"}",["T_WHITESPACE","\n\n            ",65],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_clearTableByDateRange",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getMainTable",67],"(",")",",",["T_WHITESPACE"," ",67],["T_VARIABLE","$from",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$to",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$subSelect",67],",",["T_WHITESPACE"," ",67],["T_STRING","false",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$salesAdapter",67],")",";",["T_WHITESPACE","\n            ",67],["T_COMMENT","\/\/ convert dates to current admin timezone\n",68],["T_WHITESPACE","            ",69],["T_VARIABLE","$periodExpr",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$connection",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getDatePartSql",69],"(",["T_WHITESPACE","\n                ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getStoreTZOffsetQuery",70],"(",["T_WHITESPACE","\n                    ",70],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getTable",71],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",71],")","]",",",["T_WHITESPACE","\n                    ",71],["T_CONSTANT_ENCAPSED_STRING","'e.'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$aggregationField",72],",",["T_WHITESPACE","\n                    ",72],["T_VARIABLE","$from",73],",",["T_WHITESPACE","\n                    ",73],["T_VARIABLE","$to",74],",",["T_WHITESPACE","\n                    ",74],["T_STRING","null",75],",",["T_WHITESPACE","\n                    ",75],["T_VARIABLE","$salesAdapter",76],["T_WHITESPACE","\n                ",76],")",["T_WHITESPACE","\n            ",77],")",";",["T_WHITESPACE","\n\n            ",78],["T_VARIABLE","$columns",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"[",["T_WHITESPACE","\n                ",80],["T_CONSTANT_ENCAPSED_STRING","'period'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$periodExpr",81],",",["T_WHITESPACE","\n                ",81],["T_CONSTANT_ENCAPSED_STRING","'store_id'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'e.store_id'",82],",",["T_WHITESPACE","\n                ",82],["T_CONSTANT_ENCAPSED_STRING","'code'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'tax.code'",83],",",["T_WHITESPACE","\n                ",83],["T_CONSTANT_ENCAPSED_STRING","'order_status'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'e.status'",84],",",["T_WHITESPACE","\n                ",84],["T_CONSTANT_ENCAPSED_STRING","'percent'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'MAX(tax.'",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_VARIABLE","$connection",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","quoteIdentifier",85],"(",["T_CONSTANT_ENCAPSED_STRING","'percent'",85],")",["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","')'",85],",",["T_WHITESPACE","\n                ",85],["T_CONSTANT_ENCAPSED_STRING","'orders_count'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT e.entity_id)'",86],",",["T_WHITESPACE","\n                ",86],["T_CONSTANT_ENCAPSED_STRING","'tax_base_amount_sum'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'SUM(tax.base_amount * e.base_to_global_rate)'",87],",",["T_WHITESPACE","\n            ",87],"]",";",["T_WHITESPACE","\n\n            ",88],["T_VARIABLE","$select",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$connection",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","select",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","from",90],"(",["T_WHITESPACE","\n                ",90],"[",["T_CONSTANT_ENCAPSED_STRING","'tax'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getTable",91],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_tax'",91],")","]",",",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$columns",92],["T_WHITESPACE","\n            ",92],")",["T_OBJECT_OPERATOR","->",93],["T_STRING","joinInner",93],"(",["T_WHITESPACE","\n                ",93],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getTable",94],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",94],")","]",",",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = tax.order_id'",95],",",["T_WHITESPACE","\n                ",95],"[","]",["T_WHITESPACE","\n            ",96],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","useStraightJoin",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","where",97],"(",["T_WHITESPACE","\n                ",97],["T_CONSTANT_ENCAPSED_STRING","'e.state NOT IN (?)'",98],",",["T_WHITESPACE","\n                ",98],"[",["T_NS_SEPARATOR","\\",99],["T_STRING","Magento",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Sales",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Model",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Order",99],["T_DOUBLE_COLON","::",99],["T_STRING","STATE_PENDING_PAYMENT",99],",",["T_WHITESPACE"," ",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Magento",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Sales",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Model",99],["T_NS_SEPARATOR","\\",99],["T_STRING","Order",99],["T_DOUBLE_COLON","::",99],["T_STRING","STATE_NEW",99],"]",["T_WHITESPACE","\n            ",99],")",";",["T_WHITESPACE","\n\n            ",100],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$subSelect",102],["T_WHITESPACE"," ",102],["T_IS_NOT_IDENTICAL","!==",102],["T_WHITESPACE"," ",102],["T_STRING","null",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$select",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","having",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_makeConditionFromDateRangeSelect",103],"(",["T_VARIABLE","$subSelect",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'period'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$salesAdapter",103],")",")",";",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE","\n\n            ",104],["T_VARIABLE","$select",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","group",106],"(","[",["T_VARIABLE","$periodExpr",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'e.store_id'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'code'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'tax.percent'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'e.status'",106],"]",")",";",["T_WHITESPACE","\n\n            ",106],["T_VARIABLE","$aggregatedData",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$salesAdapter",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","fetchAll",108],"(",["T_VARIABLE","$select",108],")",";",["T_WHITESPACE","\n\n            ",108],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$aggregatedData",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                ",110],["T_VARIABLE","$connection",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","insertArray",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getMainTable",111],"(",")",",",["T_WHITESPACE"," ",111],["T_STRING","array_keys",111],"(",["T_VARIABLE","$columns",111],")",",",["T_WHITESPACE"," ",111],["T_VARIABLE","$aggregatedData",111],")",";",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n\n            ",112],["T_VARIABLE","$columns",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],"[",["T_WHITESPACE","\n                ",114],["T_CONSTANT_ENCAPSED_STRING","'period'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'period'",115],",",["T_WHITESPACE","\n                ",115],["T_CONSTANT_ENCAPSED_STRING","'store_id'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Zend_Db_Expr",116],"(",["T_NS_SEPARATOR","\\",116],["T_STRING","Magento",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Store",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Model",116],["T_NS_SEPARATOR","\\",116],["T_STRING","Store",116],["T_DOUBLE_COLON","::",116],["T_STRING","DEFAULT_STORE_ID",116],")",",",["T_WHITESPACE","\n                ",116],["T_CONSTANT_ENCAPSED_STRING","'code'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'code'",117],",",["T_WHITESPACE","\n                ",117],["T_CONSTANT_ENCAPSED_STRING","'order_status'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'order_status'",118],",",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'percent'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'MAX('",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$connection",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","quoteIdentifier",119],"(",["T_CONSTANT_ENCAPSED_STRING","'percent'",119],")",["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","')'",119],",",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'orders_count'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'SUM(orders_count)'",120],",",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'tax_base_amount_sum'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'SUM(tax_base_amount_sum)'",121],",",["T_WHITESPACE","\n            ",121],"]",";",["T_WHITESPACE","\n\n            ",122],["T_VARIABLE","$select",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","reset",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","from",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getMainTable",124],"(",")",",",["T_WHITESPACE"," ",124],["T_VARIABLE","$columns",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","where",124],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id <> ?'",124],",",["T_WHITESPACE"," ",124],["T_LNUMBER","0",124],")",";",["T_WHITESPACE","\n\n            ",124],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$subSelect",126],["T_WHITESPACE"," ",126],["T_IS_NOT_IDENTICAL","!==",126],["T_WHITESPACE"," ",126],["T_STRING","null",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$select",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","where",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_makeConditionFromDateRangeSelect",127],"(",["T_VARIABLE","$subSelect",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'period'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$salesAdapter",127],")",")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n\n            ",128],["T_VARIABLE","$select",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","group",130],"(","[",["T_CONSTANT_ENCAPSED_STRING","'period'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'code'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'percent'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'order_status'",130],"]",")",";",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$insertQuery",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$connection",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","insertFromSelect",131],"(",["T_VARIABLE","$select",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getMainTable",131],"(",")",",",["T_WHITESPACE"," ",131],["T_STRING","array_keys",131],"(",["T_VARIABLE","$columns",131],")",")",";",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$connection",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","query",132],"(",["T_VARIABLE","$insertQuery",132],")",";",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$connection",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","commit",133],"(",")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE"," ",134],["T_CATCH","catch",134],["T_WHITESPACE"," ",134],"(",["T_NS_SEPARATOR","\\",134],["T_STRING","Exception",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$e",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$connection",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","rollBack",135],"(",")",";",["T_WHITESPACE","\n            ",135],["T_THROW","throw",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$e",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n",140],"}",["T_WHITESPACE","\n",141]]
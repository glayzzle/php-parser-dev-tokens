[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tax totals modification block. Can be used just as subblock of \\Magento\\Sales\\Block\\Order\\Totals\n *\/",7],["T_WHITESPACE","\n",9],["T_NAMESPACE","namespace",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Tax",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Block",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Sales",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Order",10],";",["T_WHITESPACE","\n\n",10],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Sales",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Order",12],";",["T_WHITESPACE","\n\n",12],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Tax",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","View",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Element",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Template",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Tax configuration model\n     *\n     * @var \\Magento\\Tax\\Model\\Config\n     *\/",16],["T_WHITESPACE","\n    ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$_config",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * @var Order\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$_order",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\DataObject\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_source",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\View\\Element\\Template\\Context $context\n     * @param \\Magento\\Tax\\Model\\Config $taxConfig\n     * @param array $data\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_WHITESPACE","\n        ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Framework",39],["T_NS_SEPARATOR","\\",39],["T_STRING","View",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Element",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Template",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Context",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$context",39],",",["T_WHITESPACE","\n        ",39],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Tax",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Model",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Config",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$taxConfig",40],",",["T_WHITESPACE","\n        ",40],["T_ARRAY","array",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$data",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],"[","]",["T_WHITESPACE","\n    ",41],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_config",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$taxConfig",43],";",["T_WHITESPACE","\n        ",43],["T_STRING","parent",44],["T_DOUBLE_COLON","::",44],["T_STRING","__construct",44],"(",["T_VARIABLE","$context",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$data",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Check if we nedd display full tax total info\n     *\n     * @return bool\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","displayFullSummary",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_config",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","displaySalesFullSummary",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getOrder",54],"(",")",["T_OBJECT_OPERATOR","->",54],["T_STRING","getStore",54],"(",")",")",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Get data (totals) source model\n     *\n     * @return \\Magento\\Framework\\DataObject\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getSource",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_source",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Initialize all order totals relates with tax\n     *\n     * @return \\Magento\\Tax\\Block\\Sales\\Order\\Tax\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","initTotals",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_DOC_COMMENT","\/** @var $parent \\Magento\\Sales\\Block\\Adminhtml\\Order\\Invoice\\Totals *\/",74],["T_WHITESPACE","\n        ",74],["T_VARIABLE","$parent",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getParentBlock",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_order",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$parent",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getOrder",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_source",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$parent",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getSource",77],"(",")",";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$store",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getStore",79],"(",")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$allowTax",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_source",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getTaxAmount",80],"(",")",["T_WHITESPACE"," ",80],">",["T_WHITESPACE"," ",80],["T_LNUMBER","0",80],["T_WHITESPACE"," ",80],["T_BOOLEAN_OR","||",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_config",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","displaySalesZeroTax",80],"(",["T_VARIABLE","$store",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$grandTotal",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_DOUBLE_CAST","(double)",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_source",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getGrandTotal",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_VARIABLE","$grandTotal",82],["T_WHITESPACE"," ",82],["T_BOOLEAN_OR","||",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$allowTax",82],["T_WHITESPACE"," ",82],["T_BOOLEAN_AND","&&",82],["T_WHITESPACE"," ",82],"!",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_config",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","displaySalesTaxWithGrandTotal",82],"(",["T_VARIABLE","$store",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_addTax",83],"(",")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_initSubtotal",86],"(",")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_initShipping",87],"(",")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_initDiscount",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_initGrandTotal",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Add tax total string\n     *\n     * @param string $after\n     * @return \\Magento\\Tax\\Block\\Sales\\Order\\Tax\n     *\/",93],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","_addTax",99],"(",["T_VARIABLE","$after",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'discount'",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$taxTotal",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Framework",101],["T_NS_SEPARATOR","\\",101],["T_STRING","DataObject",101],"(","[",["T_CONSTANT_ENCAPSED_STRING","'code'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'tax'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'block_name'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getNameInLayout",101],"(",")","]",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getParentBlock",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","addTotal",102],"(",["T_VARIABLE","$taxTotal",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$after",102],")",";",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Get order store object\n     *\n     * @return \\Magento\\Store\\Model\\Store\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getStore",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_order",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getStore",113],"(",")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",116],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","_initSubtotal",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$store",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getStore",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$parent",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getParentBlock",123],"(",")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$subtotal",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$parent",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getTotal",124],"(",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",124],")",";",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_VARIABLE","$subtotal",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_config",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","displaySalesSubtotalBoth",128],"(",["T_VARIABLE","$store",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$subtotal",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_DOUBLE_CAST","(double)",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_source",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getSubtotal",129],"(",")",";",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$baseSubtotal",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_DOUBLE_CAST","(double)",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_source",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getBaseSubtotal",130],"(",")",";",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$subtotalIncl",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_DOUBLE_CAST","(double)",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_source",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getSubtotalInclTax",131],"(",")",";",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$baseSubtotalIncl",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_DOUBLE_CAST","(double)",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_source",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getBaseSubtotalInclTax",132],"(",")",";",["T_WHITESPACE","\n\n            ",132],["T_IF","if",134],["T_WHITESPACE"," ",134],"(","!",["T_VARIABLE","$subtotalIncl",134],["T_WHITESPACE"," ",134],["T_BOOLEAN_OR","||",134],["T_WHITESPACE"," ",134],"!",["T_VARIABLE","$baseSubtotalIncl",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_COMMENT","\/\/ Calculate the subtotal if it is not set\n",135],["T_WHITESPACE","                ",136],["T_VARIABLE","$subtotalIncl",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$subtotal",136],["T_WHITESPACE","\n                    ",136],"+",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_source",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTaxAmount",137],"(",")",["T_WHITESPACE","\n                    ",137],"-",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_source",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getShippingTaxAmount",138],"(",")",";",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$baseSubtotalIncl",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$baseSubtotal",139],["T_WHITESPACE","\n                    ",139],"+",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_source",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getBaseTaxAmount",140],"(",")",["T_WHITESPACE","\n                    ",140],"-",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_source",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getBaseShippingTaxAmount",141],"(",")",";",["T_WHITESPACE","\n\n                ",141],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_source",143],["T_WHITESPACE"," ",143],["T_INSTANCEOF","instanceof",143],["T_WHITESPACE"," ",143],["T_STRING","Order",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                    ",143],["T_COMMENT","\/\/ Adjust for the discount tax compensation\n",144],["T_WHITESPACE","                    ",145],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_source",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getAllItems",145],"(",")",["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$item",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                        ",145],["T_VARIABLE","$subtotalIncl",146],["T_WHITESPACE"," ",146],["T_PLUS_EQUAL","+=",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$item",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getDiscountTaxCompensationAmount",146],"(",")",";",["T_WHITESPACE","\n                        ",146],["T_VARIABLE","$baseSubtotalIncl",147],["T_WHITESPACE"," ",147],["T_PLUS_EQUAL","+=",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$item",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getBaseDiscountTaxCompensationAmount",147],"(",")",";",["T_WHITESPACE","\n                    ",147],"}",["T_WHITESPACE","\n                ",148],"}",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n\n            ",150],["T_VARIABLE","$subtotalIncl",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","max",152],"(",["T_LNUMBER","0",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$subtotalIncl",152],")",";",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$baseSubtotalIncl",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","max",153],"(",["T_LNUMBER","0",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$baseSubtotalIncl",153],")",";",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$totalExcl",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_NEW","new",154],["T_WHITESPACE"," ",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Magento",154],["T_NS_SEPARATOR","\\",154],["T_STRING","Framework",154],["T_NS_SEPARATOR","\\",154],["T_STRING","DataObject",154],"(",["T_WHITESPACE","\n                ",154],"[",["T_WHITESPACE","\n                    ",155],["T_CONSTANT_ENCAPSED_STRING","'code'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'subtotal_excl'",156],",",["T_WHITESPACE","\n                    ",156],["T_CONSTANT_ENCAPSED_STRING","'value'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$subtotal",157],",",["T_WHITESPACE","\n                    ",157],["T_CONSTANT_ENCAPSED_STRING","'base_value'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$baseSubtotal",158],",",["T_WHITESPACE","\n                    ",158],["T_CONSTANT_ENCAPSED_STRING","'label'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_STRING","__",159],"(",["T_CONSTANT_ENCAPSED_STRING","'Subtotal (Excl.Tax)'",159],")",",",["T_WHITESPACE","\n                ",159],"]",["T_WHITESPACE","\n            ",160],")",";",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$totalIncl",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_NEW","new",162],["T_WHITESPACE"," ",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Magento",162],["T_NS_SEPARATOR","\\",162],["T_STRING","Framework",162],["T_NS_SEPARATOR","\\",162],["T_STRING","DataObject",162],"(",["T_WHITESPACE","\n                ",162],"[",["T_WHITESPACE","\n                    ",163],["T_CONSTANT_ENCAPSED_STRING","'code'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'subtotal_incl'",164],",",["T_WHITESPACE","\n                    ",164],["T_CONSTANT_ENCAPSED_STRING","'value'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$subtotalIncl",165],",",["T_WHITESPACE","\n                    ",165],["T_CONSTANT_ENCAPSED_STRING","'base_value'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$baseSubtotalIncl",166],",",["T_WHITESPACE","\n                    ",166],["T_CONSTANT_ENCAPSED_STRING","'label'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_STRING","__",167],"(",["T_CONSTANT_ENCAPSED_STRING","'Subtotal (Incl.Tax)'",167],")",",",["T_WHITESPACE","\n                ",167],"]",["T_WHITESPACE","\n            ",168],")",";",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$parent",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","addTotal",170],"(",["T_VARIABLE","$totalExcl",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'subtotal'",170],")",";",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$parent",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","addTotal",171],"(",["T_VARIABLE","$totalIncl",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'subtotal_excl'",171],")",";",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$parent",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","removeTotal",172],"(",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",172],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE"," ",173],["T_ELSEIF","elseif",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_config",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","displaySalesSubtotalInclTax",173],"(",["T_VARIABLE","$store",173],")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$subtotalIncl",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_DOUBLE_CAST","(double)",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_source",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getSubtotalInclTax",174],"(",")",";",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$baseSubtotalIncl",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_DOUBLE_CAST","(double)",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_source",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getBaseSubtotalInclTax",175],"(",")",";",["T_WHITESPACE","\n\n            ",175],["T_IF","if",177],["T_WHITESPACE"," ",177],"(","!",["T_VARIABLE","$subtotalIncl",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$subtotalIncl",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_source",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getSubtotal",178],"(",")",["T_WHITESPACE"," ",178],"+",["T_WHITESPACE","\n                    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_source",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getTaxAmount",179],"(",")",["T_WHITESPACE"," ",179],"-",["T_WHITESPACE","\n                    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_source",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getShippingTaxAmount",180],"(",")",";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n            ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(","!",["T_VARIABLE","$baseSubtotalIncl",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$baseSubtotalIncl",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_source",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getBaseSubtotal",183],"(",")",["T_WHITESPACE"," ",183],"+",["T_WHITESPACE","\n                    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_source",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getBaseTaxAmount",184],"(",")",["T_WHITESPACE"," ",184],"-",["T_WHITESPACE","\n                    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_source",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getBaseShippingTaxAmount",185],"(",")",";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n\n            ",186],["T_VARIABLE","$total",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$parent",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getTotal",188],"(",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",188],")",";",["T_WHITESPACE","\n            ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$total",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_VARIABLE","$total",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","setValue",190],"(",["T_STRING","max",190],"(",["T_LNUMBER","0",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$subtotalIncl",190],")",")",";",["T_WHITESPACE","\n                ",190],["T_VARIABLE","$total",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","setBaseValue",191],"(",["T_STRING","max",191],"(",["T_LNUMBER","0",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$baseSubtotalIncl",191],")",")",";",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * @return $this\n     *\/",197],["T_WHITESPACE","\n    ",199],["T_PROTECTED","protected",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","_initShipping",200],"(",")",["T_WHITESPACE","\n    ",200],"{",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$store",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getStore",202],"(",")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$parent",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getParentBlock",203],"(",")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$shipping",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$parent",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getTotal",204],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",204],")",";",["T_WHITESPACE","\n        ",204],["T_IF","if",205],["T_WHITESPACE"," ",205],"(","!",["T_VARIABLE","$shipping",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],";",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE","\n\n        ",207],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_config",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","displaySalesShippingBoth",209],"(",["T_VARIABLE","$store",209],")",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$shipping",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_DOUBLE_CAST","(double)",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_source",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getShippingAmount",210],"(",")",";",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$baseShipping",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_DOUBLE_CAST","(double)",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_source",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getBaseShippingAmount",211],"(",")",";",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$shippingIncl",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_DOUBLE_CAST","(double)",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_source",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getShippingInclTax",212],"(",")",";",["T_WHITESPACE","\n            ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(","!",["T_VARIABLE","$shippingIncl",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_VARIABLE","$shippingIncl",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$shipping",214],["T_WHITESPACE"," ",214],"+",["T_WHITESPACE"," ",214],["T_DOUBLE_CAST","(double)",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_source",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getShippingTaxAmount",214],"(",")",";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$baseShippingIncl",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_DOUBLE_CAST","(double)",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_source",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getBaseShippingInclTax",216],"(",")",";",["T_WHITESPACE","\n            ",216],["T_IF","if",217],["T_WHITESPACE"," ",217],"(","!",["T_VARIABLE","$baseShippingIncl",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n                ",217],["T_VARIABLE","$baseShippingIncl",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$baseShipping",218],["T_WHITESPACE"," ",218],"+",["T_WHITESPACE"," ",218],["T_DOUBLE_CAST","(double)",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_source",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getBaseShippingTaxAmount",218],"(",")",";",["T_WHITESPACE","\n            ",218],"}",["T_WHITESPACE","\n\n            ",219],["T_VARIABLE","$totalExcl",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_NEW","new",221],["T_WHITESPACE"," ",221],["T_NS_SEPARATOR","\\",221],["T_STRING","Magento",221],["T_NS_SEPARATOR","\\",221],["T_STRING","Framework",221],["T_NS_SEPARATOR","\\",221],["T_STRING","DataObject",221],"(",["T_WHITESPACE","\n                ",221],"[",["T_WHITESPACE","\n                    ",222],["T_CONSTANT_ENCAPSED_STRING","'code'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'shipping'",223],",",["T_WHITESPACE","\n                    ",223],["T_CONSTANT_ENCAPSED_STRING","'value'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$shipping",224],",",["T_WHITESPACE","\n                    ",224],["T_CONSTANT_ENCAPSED_STRING","'base_value'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$baseShipping",225],",",["T_WHITESPACE","\n                    ",225],["T_CONSTANT_ENCAPSED_STRING","'label'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_STRING","__",226],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipping & Handling (Excl.Tax)'",226],")",",",["T_WHITESPACE","\n                ",226],"]",["T_WHITESPACE","\n            ",227],")",";",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$totalIncl",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Magento",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Framework",229],["T_NS_SEPARATOR","\\",229],["T_STRING","DataObject",229],"(",["T_WHITESPACE","\n                ",229],"[",["T_WHITESPACE","\n                    ",230],["T_CONSTANT_ENCAPSED_STRING","'code'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'shipping_incl'",231],",",["T_WHITESPACE","\n                    ",231],["T_CONSTANT_ENCAPSED_STRING","'value'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$shippingIncl",232],",",["T_WHITESPACE","\n                    ",232],["T_CONSTANT_ENCAPSED_STRING","'base_value'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$baseShippingIncl",233],",",["T_WHITESPACE","\n                    ",233],["T_CONSTANT_ENCAPSED_STRING","'label'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_STRING","__",234],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipping & Handling (Incl.Tax)'",234],")",",",["T_WHITESPACE","\n                ",234],"]",["T_WHITESPACE","\n            ",235],")",";",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$parent",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","addTotal",237],"(",["T_VARIABLE","$totalExcl",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'shipping'",237],")",";",["T_WHITESPACE","\n            ",237],["T_VARIABLE","$parent",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","addTotal",238],"(",["T_VARIABLE","$totalIncl",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'shipping'",238],")",";",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE"," ",239],["T_ELSEIF","elseif",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_config",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","displaySalesShippingInclTax",239],"(",["T_VARIABLE","$store",239],")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$shippingIncl",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_source",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getShippingInclTax",240],"(",")",";",["T_WHITESPACE","\n            ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(","!",["T_VARIABLE","$shippingIncl",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$shippingIncl",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_source",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getShippingAmount",242],"(",")",["T_WHITESPACE"," ",242],"+",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_source",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getShippingTaxAmount",242],"(",")",";",["T_WHITESPACE","\n            ",242],"}",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$baseShippingIncl",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_source",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getBaseShippingInclTax",244],"(",")",";",["T_WHITESPACE","\n            ",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(","!",["T_VARIABLE","$baseShippingIncl",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$baseShippingIncl",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_source",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getBaseShippingAmount",246],"(",")",["T_WHITESPACE"," ",246],"+",["T_WHITESPACE","\n                    ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_source",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getBaseShippingTaxAmount",247],"(",")",";",["T_WHITESPACE","\n            ",247],"}",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$total",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$parent",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getTotal",249],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",249],")",";",["T_WHITESPACE","\n            ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$total",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                ",250],["T_VARIABLE","$total",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","setValue",251],"(",["T_VARIABLE","$shippingIncl",251],")",";",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$total",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","setBaseValue",252],"(",["T_VARIABLE","$baseShippingIncl",252],")",";",["T_WHITESPACE","\n            ",252],"}",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE","\n        ",254],["T_RETURN","return",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],";",["T_WHITESPACE","\n    ",255],"}",["T_WHITESPACE","\n\n    ",256],["T_DOC_COMMENT","\/**\n     * @return void\n     *\/",258],["T_WHITESPACE","\n    ",260],["T_PROTECTED","protected",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","_initDiscount",261],"(",")",["T_WHITESPACE","\n    ",261],"{",["T_WHITESPACE","\n        ",262],["T_COMMENT","\/\/        $store  = $this->getStore();\n",263],["T_WHITESPACE","        ",264],["T_COMMENT","\/\/        $parent = $this->getParentBlock();\n",264],["T_WHITESPACE","        ",265],["T_COMMENT","\/\/        if ($this->_config->displaySales) {\n",265],["T_WHITESPACE","        ",266],["T_COMMENT","\/\/\n",266],["T_WHITESPACE","        ",267],["T_COMMENT","\/\/        } elseif ($this->_config->displaySales) {\n",267],["T_WHITESPACE","        ",268],["T_COMMENT","\/\/        }\n",268],["T_WHITESPACE","    ",269],"}",["T_WHITESPACE","\n\n    ",269],["T_DOC_COMMENT","\/**\n     * @return $this\n     *\/",271],["T_WHITESPACE","\n    ",273],["T_PROTECTED","protected",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","_initGrandTotal",274],"(",")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$store",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getStore",276],"(",")",";",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$parent",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getParentBlock",277],"(",")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$grandototal",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$parent",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getTotal",278],"(",["T_CONSTANT_ENCAPSED_STRING","'grand_total'",278],")",";",["T_WHITESPACE","\n        ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(","!",["T_VARIABLE","$grandototal",279],["T_WHITESPACE"," ",279],["T_BOOLEAN_OR","||",279],["T_WHITESPACE"," ",279],"!",["T_DOUBLE_CAST","(double)",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_source",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getGrandTotal",279],"(",")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n\n        ",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_config",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","displaySalesTaxWithGrandTotal",283],"(",["T_VARIABLE","$store",283],")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$grandtotal",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_source",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getGrandTotal",284],"(",")",";",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$baseGrandtotal",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_source",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getBaseGrandTotal",285],"(",")",";",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$grandtotalExcl",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$grandtotal",286],["T_WHITESPACE"," ",286],"-",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_source",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getTaxAmount",286],"(",")",";",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$baseGrandtotalExcl",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$baseGrandtotal",287],["T_WHITESPACE"," ",287],"-",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_source",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getBaseTaxAmount",287],"(",")",";",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$grandtotalExcl",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","max",288],"(",["T_VARIABLE","$grandtotalExcl",288],",",["T_WHITESPACE"," ",288],["T_LNUMBER","0",288],")",";",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$baseGrandtotalExcl",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","max",289],"(",["T_VARIABLE","$baseGrandtotalExcl",289],",",["T_WHITESPACE"," ",289],["T_LNUMBER","0",289],")",";",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$totalExcl",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_NEW","new",290],["T_WHITESPACE"," ",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Magento",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Framework",290],["T_NS_SEPARATOR","\\",290],["T_STRING","DataObject",290],"(",["T_WHITESPACE","\n                ",290],"[",["T_WHITESPACE","\n                    ",291],["T_CONSTANT_ENCAPSED_STRING","'code'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",292],",",["T_WHITESPACE","\n                    ",292],["T_CONSTANT_ENCAPSED_STRING","'strong'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_STRING","true",293],",",["T_WHITESPACE","\n                    ",293],["T_CONSTANT_ENCAPSED_STRING","'value'",294],["T_WHITESPACE"," ",294],["T_DOUBLE_ARROW","=>",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$grandtotalExcl",294],",",["T_WHITESPACE","\n                    ",294],["T_CONSTANT_ENCAPSED_STRING","'base_value'",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$baseGrandtotalExcl",295],",",["T_WHITESPACE","\n                    ",295],["T_CONSTANT_ENCAPSED_STRING","'label'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_STRING","__",296],"(",["T_CONSTANT_ENCAPSED_STRING","'Grand Total (Excl.Tax)'",296],")",",",["T_WHITESPACE","\n                ",296],"]",["T_WHITESPACE","\n            ",297],")",";",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$totalIncl",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_NEW","new",299],["T_WHITESPACE"," ",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Magento",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Framework",299],["T_NS_SEPARATOR","\\",299],["T_STRING","DataObject",299],"(",["T_WHITESPACE","\n                ",299],"[",["T_WHITESPACE","\n                    ",300],["T_CONSTANT_ENCAPSED_STRING","'code'",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'grand_total_incl'",301],",",["T_WHITESPACE","\n                    ",301],["T_CONSTANT_ENCAPSED_STRING","'strong'",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_STRING","true",302],",",["T_WHITESPACE","\n                    ",302],["T_CONSTANT_ENCAPSED_STRING","'value'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$grandtotal",303],",",["T_WHITESPACE","\n                    ",303],["T_CONSTANT_ENCAPSED_STRING","'base_value'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$baseGrandtotal",304],",",["T_WHITESPACE","\n                    ",304],["T_CONSTANT_ENCAPSED_STRING","'label'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_STRING","__",305],"(",["T_CONSTANT_ENCAPSED_STRING","'Grand Total (Incl.Tax)'",305],")",",",["T_WHITESPACE","\n                ",305],"]",["T_WHITESPACE","\n            ",306],")",";",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$parent",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","addTotal",308],"(",["T_VARIABLE","$totalExcl",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'grand_total'",308],")",";",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_addTax",309],"(",["T_CONSTANT_ENCAPSED_STRING","'grand_total'",309],")",";",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$parent",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","addTotal",310],"(",["T_VARIABLE","$totalIncl",310],",",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'tax'",310],")",";",["T_WHITESPACE","\n        ",310],"}",["T_WHITESPACE","\n        ",311],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n\n    ",313],["T_DOC_COMMENT","\/**\n     * @return Order\n     *\/",315],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","getOrder",318],"(",")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_order",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",323],["T_WHITESPACE","\n    ",325],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","getLabelProperties",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getParentBlock",328],"(",")",["T_OBJECT_OPERATOR","->",328],["T_STRING","getLabelProperties",328],"(",")",";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n    ",329],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",331],["T_WHITESPACE","\n    ",333],["T_PUBLIC","public",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","getValueProperties",334],"(",")",["T_WHITESPACE","\n    ",334],"{",["T_WHITESPACE","\n        ",335],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getParentBlock",336],"(",")",["T_OBJECT_OPERATOR","->",336],["T_STRING","getValueProperties",336],"(",")",";",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n",337],"}",["T_WHITESPACE","\n",338]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Wishlist",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Index",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Action",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","ProductException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Controller",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ResultFactory",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Cart",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Wishlist",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Controller",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AbstractIndex",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Wishlist\\Controller\\WishlistProviderInterface\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$wishlistProvider",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Wishlist\\Model\\LocaleQuantityProcessor\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$quantityProcessor",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Wishlist\\Model\\ItemFactory\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$itemFactory",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Model\\Cart\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$cart",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Checkout\\Helper\\Cart\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$cartHelper",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Wishlist\\Model\\Item\\OptionFactory\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_PRIVATE","private",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$optionFactory",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Helper\\Product\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$productHelper",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Escaper\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$escaper",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Wishlist\\Helper\\Data\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$helper",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Data\\Form\\FormKey\\Validator\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$formKeyValidator",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @param Action\\Context $context\n     * @param \\Magento\\Wishlist\\Controller\\WishlistProviderInterface $wishlistProvider\n     * @param \\Magento\\Wishlist\\Model\\LocaleQuantityProcessor $quantityProcessor\n     * @param \\Magento\\Wishlist\\Model\\ItemFactory $itemFactory\n     * @param \\Magento\\Checkout\\Model\\Cart $cart\n     * @param \\Magento\\Wishlist\\Model\\Item\\OptionFactory $optionFactory\n     * @param \\Magento\\Catalog\\Helper\\Product $productHelper\n     * @param \\Magento\\Framework\\Escaper $escaper\n     * @param \\Magento\\Wishlist\\Helper\\Data $helper\n     * @param \\Magento\\Checkout\\Helper\\Cart $cartHelper\n     * @param \\Magento\\Framework\\Data\\Form\\FormKey\\Validator $formKeyValidator\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",67],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","__construct",81],"(",["T_WHITESPACE","\n        ",81],["T_STRING","Action",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Context",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$context",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Wishlist",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Controller",83],["T_NS_SEPARATOR","\\",83],["T_STRING","WishlistProviderInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$wishlistProvider",83],",",["T_WHITESPACE","\n        ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Magento",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Wishlist",84],["T_NS_SEPARATOR","\\",84],["T_STRING","Model",84],["T_NS_SEPARATOR","\\",84],["T_STRING","LocaleQuantityProcessor",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$quantityProcessor",84],",",["T_WHITESPACE","\n        ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Wishlist",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Model",85],["T_NS_SEPARATOR","\\",85],["T_STRING","ItemFactory",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$itemFactory",85],",",["T_WHITESPACE","\n        ",85],["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Checkout",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Model",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Cart",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$cart",86],",",["T_WHITESPACE","\n        ",86],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Wishlist",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Model",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Item",87],["T_NS_SEPARATOR","\\",87],["T_STRING","OptionFactory",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$optionFactory",87],",",["T_WHITESPACE","\n        ",87],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Catalog",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Helper",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Product",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$productHelper",88],",",["T_WHITESPACE","\n        ",88],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Framework",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Escaper",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$escaper",89],",",["T_WHITESPACE","\n        ",89],["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Wishlist",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Helper",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Data",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$helper",90],",",["T_WHITESPACE","\n        ",90],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Checkout",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Helper",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Cart",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$cartHelper",91],",",["T_WHITESPACE","\n        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Data",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Form",92],["T_NS_SEPARATOR","\\",92],["T_STRING","FormKey",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Validator",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$formKeyValidator",92],["T_WHITESPACE","\n    ",92],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","wishlistProvider",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$wishlistProvider",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","quantityProcessor",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$quantityProcessor",95],";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","itemFactory",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$itemFactory",96],";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","cart",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$cart",97],";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","optionFactory",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$optionFactory",98],";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","productHelper",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$productHelper",99],";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","escaper",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$escaper",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","helper",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$helper",101],";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","cartHelper",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$cartHelper",102],";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","formKeyValidator",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$formKeyValidator",103],";",["T_WHITESPACE","\n        ",103],["T_STRING","parent",104],["T_DOUBLE_COLON","::",104],["T_STRING","__construct",104],"(",["T_VARIABLE","$context",104],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Add wishlist item to shopping cart and remove from wishlist\n     *\n     * If Product has required options - item removed from wishlist and redirect\n     * to product view page with message about needed defined required options\n     *\n     * @return \\Magento\\Framework\\Controller\\ResultInterface\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",107],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","execute",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Controller\\Result\\Redirect $resultRedirect *\/",120],["T_WHITESPACE","\n        ",120],["T_VARIABLE","$resultRedirect",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","resultFactory",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","create",121],"(",["T_STRING","ResultFactory",121],["T_DOUBLE_COLON","::",121],["T_STRING","TYPE_REDIRECT",121],")",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","formKeyValidator",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","validate",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getRequest",122],"(",")",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$resultRedirect",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","setPath",123],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_VARIABLE","$itemId",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_INT_CAST","(int)",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getRequest",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getParam",126],"(",["T_CONSTANT_ENCAPSED_STRING","'item'",126],")",";",["T_WHITESPACE","\n        ",126],["T_COMMENT","\/* @var $item \\Magento\\Wishlist\\Model\\Item *\/",127],["T_WHITESPACE","\n        ",127],["T_VARIABLE","$item",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","itemFactory",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","create",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","load",128],"(",["T_VARIABLE","$itemId",128],")",";",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_VARIABLE","$item",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getId",129],"(",")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$resultRedirect",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setPath",130],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",130],")",";",["T_WHITESPACE","\n            ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$resultRedirect",131],";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$wishlist",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","wishlistProvider",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getWishlist",133],"(",["T_VARIABLE","$item",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getWishlistId",133],"(",")",")",";",["T_WHITESPACE","\n        ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(","!",["T_VARIABLE","$wishlist",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$resultRedirect",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","setPath",135],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",135],")",";",["T_WHITESPACE","\n            ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$resultRedirect",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_COMMENT","\/\/ Set qty\n",139],["T_WHITESPACE","        ",140],["T_VARIABLE","$qty",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getRequest",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","getParam",140],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$postQty",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getRequest",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getPostValue",141],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",141],")",";",["T_WHITESPACE","\n        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$postQty",142],["T_WHITESPACE"," ",142],["T_IS_NOT_IDENTICAL","!==",142],["T_WHITESPACE"," ",142],["T_STRING","null",142],["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$qty",142],["T_WHITESPACE"," ",142],["T_IS_NOT_IDENTICAL","!==",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$postQty",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$qty",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$postQty",143],";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_STRING","is_array",145],"(",["T_VARIABLE","$qty",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_ISSET","isset",146],"(",["T_VARIABLE","$qty",146],"[",["T_VARIABLE","$itemId",146],"]",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$qty",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$qty",147],"[",["T_VARIABLE","$itemId",147],"]",";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE"," ",148],["T_ELSE","else",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$qty",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_LNUMBER","1",149],";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$qty",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","quantityProcessor",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","process",152],"(",["T_VARIABLE","$qty",152],")",";",["T_WHITESPACE","\n        ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$qty",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$item",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setQty",154],"(",["T_VARIABLE","$qty",154],")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_VARIABLE","$redirectUrl",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_url",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getUrl",157],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",157],")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$configureUrl",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_url",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getUrl",158],"(",["T_WHITESPACE","\n            ",158],["T_CONSTANT_ENCAPSED_STRING","'*\/*\/configure\/'",159],",",["T_WHITESPACE","\n            ",159],"[",["T_WHITESPACE","\n                ",160],["T_CONSTANT_ENCAPSED_STRING","'id'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$item",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getId",161],"(",")",",",["T_WHITESPACE","\n                ",161],["T_CONSTANT_ENCAPSED_STRING","'product_id'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$item",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getProductId",162],"(",")",",",["T_WHITESPACE","\n            ",162],"]",["T_WHITESPACE","\n        ",163],")",";",["T_WHITESPACE","\n\n        ",164],["T_TRY","try",166],["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_DOC_COMMENT","\/** @var \\Magento\\Wishlist\\Model\\ResourceModel\\Item\\Option\\Collection $options *\/",167],["T_WHITESPACE","\n            ",167],["T_VARIABLE","$options",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","optionFactory",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","create",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","getCollection",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","addItemFilter",168],"(","[",["T_VARIABLE","$itemId",168],"]",")",";",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$item",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setOptions",169],"(",["T_VARIABLE","$options",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getOptionsByItem",169],"(",["T_VARIABLE","$itemId",169],")",")",";",["T_WHITESPACE","\n\n            ",169],["T_VARIABLE","$buyRequest",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","productHelper",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","addParamsToBuyRequest",171],"(",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getRequest",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getParams",172],"(",")",",",["T_WHITESPACE","\n                ",172],"[",["T_CONSTANT_ENCAPSED_STRING","'current_config'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$item",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getBuyRequest",173],"(",")","]",["T_WHITESPACE","\n            ",173],")",";",["T_WHITESPACE","\n\n            ",174],["T_VARIABLE","$item",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","mergeBuyRequest",176],"(",["T_VARIABLE","$buyRequest",176],")",";",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$item",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","addToCart",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","cart",177],",",["T_WHITESPACE"," ",177],["T_STRING","true",177],")",";",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","cart",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","save",178],"(",")",["T_OBJECT_OPERATOR","->",178],["T_STRING","getQuote",178],"(",")",["T_OBJECT_OPERATOR","->",178],["T_STRING","collectTotals",178],"(",")",";",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$wishlist",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","save",179],"(",")",";",["T_WHITESPACE","\n\n            ",179],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","cart",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getQuote",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","getHasError",181],"(",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$message",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","__",182],"(",["T_WHITESPACE","\n                    ",182],["T_CONSTANT_ENCAPSED_STRING","'You added %1 to your shopping cart.'",183],",",["T_WHITESPACE","\n                    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","escaper",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","escapeHtml",184],"(",["T_VARIABLE","$item",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getProduct",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","getName",184],"(",")",")",["T_WHITESPACE","\n                ",184],")",";",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","messageManager",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","addSuccess",186],"(",["T_VARIABLE","$message",186],")",";",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE","\n\n            ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","cartHelper",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getShouldRedirectToCart",189],"(",")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_VARIABLE","$redirectUrl",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","cartHelper",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getCartUrl",190],"(",")",";",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE"," ",191],["T_ELSE","else",191],["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$refererUrl",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_redirect",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getRefererUrl",192],"(",")",";",["T_WHITESPACE","\n                ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$refererUrl",193],["T_WHITESPACE"," ",193],["T_BOOLEAN_AND","&&",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$refererUrl",193],["T_WHITESPACE"," ",193],["T_IS_NOT_EQUAL","!=",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$configureUrl",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                    ",193],["T_VARIABLE","$redirectUrl",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$refererUrl",194],";",["T_WHITESPACE","\n                ",194],"}",["T_WHITESPACE","\n            ",195],"}",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE"," ",197],["T_CATCH","catch",197],["T_WHITESPACE"," ",197],"(",["T_STRING","ProductException",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$e",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","messageManager",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","addError",198],"(",["T_STRING","__",198],"(",["T_CONSTANT_ENCAPSED_STRING","'This product(s) is out of stock.'",198],")",")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE"," ",199],["T_CATCH","catch",199],["T_WHITESPACE"," ",199],"(",["T_NS_SEPARATOR","\\",199],["T_STRING","Magento",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Framework",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Exception",199],["T_NS_SEPARATOR","\\",199],["T_STRING","LocalizedException",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$e",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","messageManager",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","addNotice",200],"(",["T_VARIABLE","$e",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getMessage",200],"(",")",")",";",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$redirectUrl",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$configureUrl",201],";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE"," ",202],["T_CATCH","catch",202],["T_WHITESPACE"," ",202],"(",["T_NS_SEPARATOR","\\",202],["T_STRING","Exception",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$e",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","messageManager",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","addException",203],"(",["T_VARIABLE","$e",203],",",["T_WHITESPACE"," ",203],["T_STRING","__",203],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t add the item to the cart right now.'",203],")",")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n\n        ",204],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","helper",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","calculate",206],"(",")",";",["T_WHITESPACE","\n\n        ",206],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getRequest",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","isAjax",208],"(",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Controller\\Result\\Json $resultJson *\/",209],["T_WHITESPACE","\n            ",209],["T_VARIABLE","$resultJson",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","resultFactory",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","create",210],"(",["T_STRING","ResultFactory",210],["T_DOUBLE_COLON","::",210],["T_STRING","TYPE_JSON",210],")",";",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$resultJson",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","setData",211],"(","[",["T_CONSTANT_ENCAPSED_STRING","'backUrl'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$redirectUrl",211],"]",")",";",["T_WHITESPACE","\n            ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$resultJson",212],";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n        \n        ",213],["T_VARIABLE","$resultRedirect",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setUrl",215],"(",["T_VARIABLE","$redirectUrl",215],")",";",["T_WHITESPACE","\n        ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$resultRedirect",216],";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n",217],"}",["T_WHITESPACE","\n",218]]
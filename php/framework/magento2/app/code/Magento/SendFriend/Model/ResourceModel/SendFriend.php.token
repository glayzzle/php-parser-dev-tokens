[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SendFriend",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * SendFriend Log Resource Model\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","SendFriend",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AbstractDb",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Initialize connection and table\n     *\n     * @return void\n     *\/",15],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","_construct",20],"(",")",["T_WHITESPACE","\n    ",20],"{",["T_WHITESPACE","\n        ",21],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","_init",22],"(",["T_CONSTANT_ENCAPSED_STRING","'sendfriend_log'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'log_id'",22],")",";",["T_WHITESPACE","\n    ",22],"}",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Retrieve Sended Emails By Ip\n     *\n     * @param \\Magento\\SendFriend\\Model\\SendFriend $object\n     * @param int $ip\n     * @param int $startTime\n     * @param int $websiteId\n     * @return int\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",25],["T_WHITESPACE","\n    ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","getSendCount",35],"(",["T_VARIABLE","$object",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$ip",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$startTime",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$websiteId",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","null",35],")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$connection",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getConnection",37],"(",")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$select",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$connection",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","select",38],"(",")",["T_OBJECT_OPERATOR","->",38],["T_STRING","from",38],"(",["T_WHITESPACE","\n            ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getMainTable",39],"(",")",",",["T_WHITESPACE","\n            ",39],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_NEW","new",40],["T_WHITESPACE"," ",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Zend_Db_Expr",40],"(",["T_CONSTANT_ENCAPSED_STRING","'count(*)'",40],")","]",["T_WHITESPACE","\n        ",40],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","where",41],"(",["T_WHITESPACE","\n            ",41],["T_CONSTANT_ENCAPSED_STRING","'ip=:ip\n                AND  time>=:time\n                AND  website_id=:website_id'",42],["T_WHITESPACE","\n        ",44],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$bind",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],"[",["T_CONSTANT_ENCAPSED_STRING","'ip'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$ip",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'time'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$startTime",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'website_id'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_INT_CAST","(int)",46],["T_VARIABLE","$websiteId",46],"]",";",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$row",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$connection",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","fetchRow",48],"(",["T_VARIABLE","$select",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$bind",48],")",";",["T_WHITESPACE","\n        ",48],["T_RETURN","return",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$row",49],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",49],"]",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Add sended email by ip item\n     *\n     * @param int $ip\n     * @param int $startTime\n     * @param int $websiteId\n     * @return $this\n     *\/",52],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","addSendItem",60],"(",["T_VARIABLE","$ip",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$startTime",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$websiteId",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getConnection",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","insert",62],"(",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getMainTable",63],"(",")",",",["T_WHITESPACE","\n            ",63],"[",["T_CONSTANT_ENCAPSED_STRING","'ip'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$ip",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'time'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$startTime",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'website_id'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$websiteId",64],"]",["T_WHITESPACE","\n        ",64],")",";",["T_WHITESPACE","\n        ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Delete Old logs\n     *\n     * @param int $time\n     * @return $this\n     *\/",69],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","deleteLogsBefore",75],"(",["T_VARIABLE","$time",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$cond",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getConnection",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","quoteInto",77],"(",["T_CONSTANT_ENCAPSED_STRING","'time<?'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$time",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getConnection",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","delete",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getMainTable",78],"(",")",",",["T_WHITESPACE"," ",78],["T_VARIABLE","$cond",78],")",";",["T_WHITESPACE","\n\n        ",78],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n",81],"}",["T_WHITESPACE","\n",82]]
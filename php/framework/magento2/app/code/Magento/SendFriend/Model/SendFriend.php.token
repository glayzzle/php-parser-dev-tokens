[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SendFriend",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","LocalizedException",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","CoreException",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * SendFriend Log\n *\n * @method \\Magento\\SendFriend\\Model\\ResourceModel\\SendFriend _getResource()\n * @method \\Magento\\SendFriend\\Model\\ResourceModel\\SendFriend getResource()\n * @method int getIp()\n * @method \\Magento\\SendFriend\\Model\\SendFriend setIp(int $value)\n * @method int getTime()\n * @method \\Magento\\SendFriend\\Model\\SendFriend setTime(int $value)\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",10],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","SendFriend",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Magento",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Framework",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Model",23],["T_NS_SEPARATOR","\\",23],["T_STRING","AbstractModel",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * Recipient Names\n     *\n     * @var array\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_names",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],"[","]",";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Recipient Emails\n     *\n     * @var array\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_emails",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],"[","]",";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Sender data array\n     *\n     * @var \\Magento\\Framework\\DataObject|array\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_sender",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],"[","]",";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Product Instance\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_product",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Count of sent in last period\n     *\n     * @var int\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_sentCount",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Last values for Cookie\n     *\n     * @var string\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_lastCookieValue",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"[","]",";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * SendFriend data\n     *\n     * @var \\Magento\\SendFriend\\Helper\\Data\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_sendfriendData",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","null",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Catalog image\n     *\n     * @var \\Magento\\Catalog\\Helper\\Image\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_catalogImage",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","null",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Mail\\Template\\TransportBuilder\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_transportBuilder",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_storeManager",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Escaper\n     *\/",91],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_escaper",94],";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Translate\\Inline\\StateInterface\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$inlineTranslation",99],";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\CookieManagerInterface\n     *\/",101],["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$cookieManager",104],";",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\HTTP\\PhpEnvironment\\RemoteAddress\n     *\/",106],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$remoteAddress",109],";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Mail\\Template\\TransportBuilder $transportBuilder\n     * @param \\Magento\\Catalog\\Helper\\Image $catalogImage\n     * @param \\Magento\\SendFriend\\Helper\\Data $sendfriendData\n     * @param \\Magento\\Framework\\Escaper $escaper\n     * @param \\Magento\\Framework\\HTTP\\PhpEnvironment\\RemoteAddress $remoteAddress\n     * @param \\Magento\\Framework\\Stdlib\\CookieManagerInterface $cookieManager\n     * @param \\Magento\\Framework\\Translate\\Inline\\StateInterface $inlineTranslation\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\AbstractResource $resource\n     * @param \\Magento\\Framework\\Data\\Collection\\AbstractDb $resourceCollection\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",111],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","__construct",127],"(",["T_WHITESPACE","\n        ",127],["T_NS_SEPARATOR","\\",128],["T_STRING","Magento",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Framework",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Model",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Context",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$context",128],",",["T_WHITESPACE","\n        ",128],["T_NS_SEPARATOR","\\",129],["T_STRING","Magento",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Framework",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Registry",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$registry",129],",",["T_WHITESPACE","\n        ",129],["T_NS_SEPARATOR","\\",130],["T_STRING","Magento",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Store",130],["T_NS_SEPARATOR","\\",130],["T_STRING","Model",130],["T_NS_SEPARATOR","\\",130],["T_STRING","StoreManagerInterface",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$storeManager",130],",",["T_WHITESPACE","\n        ",130],["T_NS_SEPARATOR","\\",131],["T_STRING","Magento",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Framework",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Mail",131],["T_NS_SEPARATOR","\\",131],["T_STRING","Template",131],["T_NS_SEPARATOR","\\",131],["T_STRING","TransportBuilder",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$transportBuilder",131],",",["T_WHITESPACE","\n        ",131],["T_NS_SEPARATOR","\\",132],["T_STRING","Magento",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Catalog",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Helper",132],["T_NS_SEPARATOR","\\",132],["T_STRING","Image",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$catalogImage",132],",",["T_WHITESPACE","\n        ",132],["T_NS_SEPARATOR","\\",133],["T_STRING","Magento",133],["T_NS_SEPARATOR","\\",133],["T_STRING","SendFriend",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Helper",133],["T_NS_SEPARATOR","\\",133],["T_STRING","Data",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$sendfriendData",133],",",["T_WHITESPACE","\n        ",133],["T_NS_SEPARATOR","\\",134],["T_STRING","Magento",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Framework",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Escaper",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$escaper",134],",",["T_WHITESPACE","\n        ",134],["T_NS_SEPARATOR","\\",135],["T_STRING","Magento",135],["T_NS_SEPARATOR","\\",135],["T_STRING","Framework",135],["T_NS_SEPARATOR","\\",135],["T_STRING","HTTP",135],["T_NS_SEPARATOR","\\",135],["T_STRING","PhpEnvironment",135],["T_NS_SEPARATOR","\\",135],["T_STRING","RemoteAddress",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$remoteAddress",135],",",["T_WHITESPACE","\n        ",135],["T_NS_SEPARATOR","\\",136],["T_STRING","Magento",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Framework",136],["T_NS_SEPARATOR","\\",136],["T_STRING","Stdlib",136],["T_NS_SEPARATOR","\\",136],["T_STRING","CookieManagerInterface",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$cookieManager",136],",",["T_WHITESPACE","\n        ",136],["T_NS_SEPARATOR","\\",137],["T_STRING","Magento",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Framework",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Translate",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Inline",137],["T_NS_SEPARATOR","\\",137],["T_STRING","StateInterface",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$inlineTranslation",137],",",["T_WHITESPACE","\n        ",137],["T_NS_SEPARATOR","\\",138],["T_STRING","Magento",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Framework",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Model",138],["T_NS_SEPARATOR","\\",138],["T_STRING","ResourceModel",138],["T_NS_SEPARATOR","\\",138],["T_STRING","AbstractResource",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$resource",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","null",138],",",["T_WHITESPACE","\n        ",138],["T_NS_SEPARATOR","\\",139],["T_STRING","Magento",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Framework",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Data",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Collection",139],["T_NS_SEPARATOR","\\",139],["T_STRING","AbstractDb",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$resourceCollection",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","null",139],",",["T_WHITESPACE","\n        ",139],["T_ARRAY","array",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$data",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],"[","]",["T_WHITESPACE","\n    ",140],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_storeManager",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$storeManager",142],";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_transportBuilder",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$transportBuilder",143],";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_catalogImage",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$catalogImage",144],";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_sendfriendData",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$sendfriendData",145],";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_escaper",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$escaper",146],";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","remoteAddress",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$remoteAddress",147],";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","cookieManager",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$cookieManager",148],";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","inlineTranslation",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$inlineTranslation",149],";",["T_WHITESPACE","\n        ",149],["T_STRING","parent",150],["T_DOUBLE_COLON","::",150],["T_STRING","__construct",150],"(",["T_VARIABLE","$context",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$registry",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$resource",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$resourceCollection",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$data",150],")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     * @return void\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","_construct",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_init",160],"(",["T_NS_SEPARATOR","\\",160],["T_STRING","Magento",160],["T_NS_SEPARATOR","\\",160],["T_STRING","SendFriend",160],["T_NS_SEPARATOR","\\",160],["T_STRING","Model",160],["T_NS_SEPARATOR","\\",160],["T_STRING","ResourceModel",160],["T_NS_SEPARATOR","\\",160],["T_STRING","SendFriend",160],["T_DOUBLE_COLON","::",160],["T_CLASS","class",160],")",";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * @return $this\n     * @throws CoreException\n     *\/",163],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","send",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","isExceedLimit",169],"(",")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_THROW","throw",170],["T_WHITESPACE"," ",170],["T_NEW","new",170],["T_WHITESPACE"," ",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Magento",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Framework",170],["T_NS_SEPARATOR","\\",170],["T_STRING","Exception",170],["T_NS_SEPARATOR","\\",170],["T_STRING","LocalizedException",170],"(",["T_WHITESPACE","\n                ",170],["T_STRING","__",171],"(",["T_CONSTANT_ENCAPSED_STRING","'You\\'ve met your limit of %1 sends in an hour.'",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getMaxSendsToFriend",171],"(",")",")",["T_WHITESPACE","\n            ",171],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n\n        ",173],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","inlineTranslation",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","suspend",175],"(",")",";",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$message",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","nl2br",177],"(",["T_STRING","htmlspecialchars",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getSender",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getMessage",177],"(",")",")",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$sender",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],"[",["T_WHITESPACE","\n            ",178],["T_CONSTANT_ENCAPSED_STRING","'name'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_escaper",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","escapeHtml",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getSender",179],"(",")",["T_OBJECT_OPERATOR","->",179],["T_STRING","getName",179],"(",")",")",",",["T_WHITESPACE","\n            ",179],["T_CONSTANT_ENCAPSED_STRING","'email'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_escaper",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","escapeHtml",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getSender",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getEmail",180],"(",")",")",",",["T_WHITESPACE","\n        ",180],"]",";",["T_WHITESPACE","\n\n        ",181],["T_FOREACH","foreach",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getRecipients",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","getEmails",183],"(",")",["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$k",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$email",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$name",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getRecipients",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","getNames",184],"(",["T_VARIABLE","$k",184],")",";",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_transportBuilder",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","setTemplateIdentifier",185],"(",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_sendfriendData",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getEmailTemplate",186],"(",")",["T_WHITESPACE","\n            ",186],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","setTemplateOptions",187],"(",["T_WHITESPACE","\n                ",187],"[",["T_WHITESPACE","\n                    ",188],["T_CONSTANT_ENCAPSED_STRING","'area'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Magento",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Framework",189],["T_NS_SEPARATOR","\\",189],["T_STRING","App",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Area",189],["T_DOUBLE_COLON","::",189],["T_STRING","AREA_FRONTEND",189],",",["T_WHITESPACE","\n                    ",189],["T_CONSTANT_ENCAPSED_STRING","'store'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_storeManager",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getStore",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getId",190],"(",")",",",["T_WHITESPACE","\n                ",190],"]",["T_WHITESPACE","\n            ",191],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","setFrom",192],"(",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$sender",193],["T_WHITESPACE","\n            ",193],")",["T_OBJECT_OPERATOR","->",194],["T_STRING","setTemplateVars",194],"(",["T_WHITESPACE","\n                ",194],"[",["T_WHITESPACE","\n                    ",195],["T_CONSTANT_ENCAPSED_STRING","'name'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$name",196],",",["T_WHITESPACE","\n                    ",196],["T_CONSTANT_ENCAPSED_STRING","'email'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$email",197],",",["T_WHITESPACE","\n                    ",197],["T_CONSTANT_ENCAPSED_STRING","'product_name'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getProduct",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","getName",198],"(",")",",",["T_WHITESPACE","\n                    ",198],["T_CONSTANT_ENCAPSED_STRING","'product_url'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getProduct",199],"(",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","getUrlInStore",199],"(",")",",",["T_WHITESPACE","\n                    ",199],["T_CONSTANT_ENCAPSED_STRING","'message'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$message",200],",",["T_WHITESPACE","\n                    ",200],["T_CONSTANT_ENCAPSED_STRING","'sender_name'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$sender",201],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",201],"]",",",["T_WHITESPACE","\n                    ",201],["T_CONSTANT_ENCAPSED_STRING","'sender_email'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$sender",202],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",202],"]",",",["T_WHITESPACE","\n                    ",202],["T_CONSTANT_ENCAPSED_STRING","'product_image'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_catalogImage",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","init",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getProduct",203],"(",")",",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'sendfriend_small_image'",203],")",["T_WHITESPACE","\n                        ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","getUrl",204],"(",")",",",["T_WHITESPACE","\n                ",204],"]",["T_WHITESPACE","\n            ",205],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","addTo",206],"(",["T_WHITESPACE","\n                ",206],["T_VARIABLE","$email",207],",",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$name",208],["T_WHITESPACE","\n            ",208],")",";",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$transport",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_transportBuilder",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getTransport",210],"(",")",";",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$transport",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","sendMessage",211],"(",")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n\n        ",212],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","inlineTranslation",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","resume",214],"(",")",";",["T_WHITESPACE","\n\n        ",214],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_incrementSentCount",216],"(",")",";",["T_WHITESPACE","\n\n        ",216],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Validate Form data\n     *\n     * @return bool|string[]\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",221],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","validate",228],"(",")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$errors",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],"[","]",";",["T_WHITESPACE","\n\n        ",230],["T_VARIABLE","$name",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getSender",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","getName",232],"(",")",";",["T_WHITESPACE","\n        ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_EMPTY","empty",233],"(",["T_VARIABLE","$name",233],")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$errors",234],"[","]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","__",234],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a sender name.'",234],")",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n\n        ",235],["T_VARIABLE","$email",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getSender",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","getEmail",237],"(",")",";",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_EMPTY","empty",238],"(",["T_VARIABLE","$email",238],")",["T_WHITESPACE"," ",238],["T_LOGICAL_OR","or",238],["T_WHITESPACE"," ",238],"!",["T_NS_SEPARATOR","\\",238],["T_STRING","Zend_Validate",238],["T_DOUBLE_COLON","::",238],["T_STRING","is",238],"(",["T_VARIABLE","$email",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'EmailAddress'",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$errors",239],"[","]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","__",239],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Sender Email'",239],")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$message",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getSender",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","getMessage",242],"(",")",";",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_EMPTY","empty",243],"(",["T_VARIABLE","$message",243],")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$errors",244],"[","]",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","__",244],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a message.'",244],")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n\n        ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(","!",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getRecipients",247],"(",")",["T_OBJECT_OPERATOR","->",247],["T_STRING","getEmails",247],"(",")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$errors",248],"[","]",["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","__",248],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify at least one recipient.'",248],")",";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n\n        ",249],["T_COMMENT","\/\/ validate recipients email addresses\n",251],["T_WHITESPACE","        ",252],["T_FOREACH","foreach",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getRecipients",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getEmails",252],"(",")",["T_WHITESPACE"," ",252],["T_AS","as",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$email",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(","!",["T_NS_SEPARATOR","\\",253],["T_STRING","Zend_Validate",253],["T_DOUBLE_COLON","::",253],["T_STRING","is",253],"(",["T_VARIABLE","$email",253],",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'EmailAddress'",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                ",253],["T_VARIABLE","$errors",254],"[","]",["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","__",254],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a correct recipient email address.'",254],")",";",["T_WHITESPACE","\n                ",254],["T_BREAK","break",255],";",["T_WHITESPACE","\n            ",255],"}",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n\n        ",257],["T_VARIABLE","$maxRecipients",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getMaxRecipients",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_STRING","count",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getRecipients",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","getEmails",260],"(",")",")",["T_WHITESPACE"," ",260],">",["T_WHITESPACE"," ",260],["T_VARIABLE","$maxRecipients",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$errors",261],"[","]",["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","__",261],"(",["T_CONSTANT_ENCAPSED_STRING","'No more than %1 emails can be sent at a time.'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getMaxRecipients",261],"(",")",")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n\n        ",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_EMPTY","empty",264],"(",["T_VARIABLE","$errors",264],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_STRING","true",265],";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n\n        ",266],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$errors",268],";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_DOC_COMMENT","\/**\n     * Set Recipients\n     *\n     * @param array $recipients\n     * @return $this\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",271],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","setRecipients",278],"(",["T_VARIABLE","$recipients",278],")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_COMMENT","\/\/ validate array\n",280],["T_WHITESPACE","        ",281],["T_IF","if",281],["T_WHITESPACE"," ",281],"(","!",["T_STRING","is_array",281],"(",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$recipients",282],["T_WHITESPACE","\n        ",282],")",["T_WHITESPACE"," ",283],["T_LOGICAL_OR","or",283],["T_WHITESPACE"," ",283],"!",["T_ISSET","isset",283],"(",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$recipients",284],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",284],"]",["T_WHITESPACE","\n        ",284],")",["T_WHITESPACE"," ",285],["T_LOGICAL_OR","or",285],["T_WHITESPACE"," ",285],"!",["T_ISSET","isset",285],"(",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$recipients",286],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",286],"]",["T_WHITESPACE","\n        ",286],")",["T_WHITESPACE"," ",287],["T_LOGICAL_OR","or",287],["T_WHITESPACE"," ",287],"!",["T_STRING","is_array",287],"(",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$recipients",288],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",288],"]",["T_WHITESPACE","\n        ",288],")",["T_WHITESPACE"," ",289],["T_LOGICAL_OR","or",289],["T_WHITESPACE"," ",289],"!",["T_STRING","is_array",289],"(",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$recipients",290],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",290],"]",["T_WHITESPACE","\n        ",290],")",["T_WHITESPACE","\n        ",291],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n\n        ",294],["T_VARIABLE","$emails",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],"[","]",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$names",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],"[","]",";",["T_WHITESPACE","\n        ",297],["T_FOREACH","foreach",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$recipients",298],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",298],"]",["T_WHITESPACE"," ",298],["T_AS","as",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$k",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$email",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(","!",["T_ISSET","isset",299],"(",["T_VARIABLE","$emails",299],"[",["T_VARIABLE","$email",299],"]",")",["T_WHITESPACE"," ",299],["T_BOOLEAN_AND","&&",299],["T_WHITESPACE"," ",299],["T_ISSET","isset",299],"(",["T_VARIABLE","$recipients",299],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",299],"]","[",["T_VARIABLE","$k",299],"]",")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n                ",299],["T_VARIABLE","$emails",300],"[",["T_VARIABLE","$email",300],"]",["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","true",300],";",["T_WHITESPACE","\n                ",300],["T_VARIABLE","$names",301],"[","]",["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$recipients",301],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",301],"]","[",["T_VARIABLE","$k",301],"]",";",["T_WHITESPACE","\n            ",301],"}",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$emails",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$emails",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","array_keys",306],"(",["T_VARIABLE","$emails",306],")",";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n\n        ",307],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","setData",309],"(",["T_WHITESPACE","\n            ",309],["T_CONSTANT_ENCAPSED_STRING","'_recipients'",310],",",["T_WHITESPACE","\n            ",310],["T_NEW","new",311],["T_WHITESPACE"," ",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Magento",311],["T_NS_SEPARATOR","\\",311],["T_STRING","Framework",311],["T_NS_SEPARATOR","\\",311],["T_STRING","DataObject",311],"(","[",["T_CONSTANT_ENCAPSED_STRING","'emails'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$emails",311],",",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'names'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$names",311],"]",")",["T_WHITESPACE","\n        ",311],")",";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n\n    ",313],["T_DOC_COMMENT","\/**\n     * Retrieve Recipients object\n     *\n     * @return \\Magento\\Framework\\DataObject\n     *\/",315],["T_WHITESPACE","\n    ",319],["T_PUBLIC","public",320],["T_WHITESPACE"," ",320],["T_FUNCTION","function",320],["T_WHITESPACE"," ",320],["T_STRING","getRecipients",320],"(",")",["T_WHITESPACE","\n    ",320],"{",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$recipients",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_getData",322],"(",["T_CONSTANT_ENCAPSED_STRING","'_recipients'",322],")",";",["T_WHITESPACE","\n        ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(","!",["T_VARIABLE","$recipients",323],["T_WHITESPACE"," ",323],["T_INSTANCEOF","instanceof",323],["T_WHITESPACE"," ",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Magento",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Framework",323],["T_NS_SEPARATOR","\\",323],["T_STRING","DataObject",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_VARIABLE","$recipients",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_NEW","new",324],["T_WHITESPACE"," ",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Magento",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Framework",324],["T_NS_SEPARATOR","\\",324],["T_STRING","DataObject",324],"(","[",["T_CONSTANT_ENCAPSED_STRING","'emails'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],"[","]",",",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'names'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],"[","]","]",")",";",["T_WHITESPACE","\n            ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","setData",325],"(",["T_CONSTANT_ENCAPSED_STRING","'_recipients'",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$recipients",325],")",";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n        ",326],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$recipients",327],";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Set product instance\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     *\/",330],["T_WHITESPACE","\n    ",335],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","setProduct",336],"(",["T_VARIABLE","$product",336],")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","setData",338],"(",["T_CONSTANT_ENCAPSED_STRING","'_product'",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$product",338],")",";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Retrieve Product instance\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return \\Magento\\Catalog\\Model\\Product\n     *\/",341],["T_WHITESPACE","\n    ",346],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","getProduct",347],"(",")",["T_WHITESPACE","\n    ",347],"{",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$product",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_getData",349],"(",["T_CONSTANT_ENCAPSED_STRING","'_product'",349],")",";",["T_WHITESPACE","\n        ",349],["T_IF","if",350],["T_WHITESPACE"," ",350],"(","!",["T_VARIABLE","$product",350],["T_WHITESPACE"," ",350],["T_INSTANCEOF","instanceof",350],["T_WHITESPACE"," ",350],["T_NS_SEPARATOR","\\",350],["T_STRING","Magento",350],["T_NS_SEPARATOR","\\",350],["T_STRING","Catalog",350],["T_NS_SEPARATOR","\\",350],["T_STRING","Model",350],["T_NS_SEPARATOR","\\",350],["T_STRING","Product",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_THROW","throw",351],["T_WHITESPACE"," ",351],["T_NEW","new",351],["T_WHITESPACE"," ",351],["T_NS_SEPARATOR","\\",351],["T_STRING","Magento",351],["T_NS_SEPARATOR","\\",351],["T_STRING","Framework",351],["T_NS_SEPARATOR","\\",351],["T_STRING","Exception",351],["T_NS_SEPARATOR","\\",351],["T_STRING","LocalizedException",351],"(",["T_STRING","__",351],"(",["T_CONSTANT_ENCAPSED_STRING","'Please define a correct product instance.'",351],")",")",";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$product",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Set Sender Information array\n     *\n     * @param array $sender\n     * @return $this\n     *\/",356],["T_WHITESPACE","\n    ",361],["T_PUBLIC","public",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","setSender",362],"(",["T_VARIABLE","$sender",362],")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(","!",["T_STRING","is_array",364],"(",["T_VARIABLE","$sender",364],")",")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_STRING","__",365],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Sender Information'",365],")",";",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE","\n\n        ",366],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","setData",368],"(",["T_CONSTANT_ENCAPSED_STRING","'_sender'",368],",",["T_WHITESPACE"," ",368],["T_NEW","new",368],["T_WHITESPACE"," ",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Magento",368],["T_NS_SEPARATOR","\\",368],["T_STRING","Framework",368],["T_NS_SEPARATOR","\\",368],["T_STRING","DataObject",368],"(",["T_VARIABLE","$sender",368],")",")",";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_DOC_COMMENT","\/**\n     * Retrieve Sender Information Object\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return \\Magento\\Framework\\DataObject\n     *\/",371],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","getSender",377],"(",")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$sender",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_getData",379],"(",["T_CONSTANT_ENCAPSED_STRING","'_sender'",379],")",";",["T_WHITESPACE","\n        ",379],["T_IF","if",380],["T_WHITESPACE"," ",380],"(","!",["T_VARIABLE","$sender",380],["T_WHITESPACE"," ",380],["T_INSTANCEOF","instanceof",380],["T_WHITESPACE"," ",380],["T_NS_SEPARATOR","\\",380],["T_STRING","Magento",380],["T_NS_SEPARATOR","\\",380],["T_STRING","Framework",380],["T_NS_SEPARATOR","\\",380],["T_STRING","DataObject",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n            ",380],["T_THROW","throw",381],["T_WHITESPACE"," ",381],["T_NEW","new",381],["T_WHITESPACE"," ",381],["T_NS_SEPARATOR","\\",381],["T_STRING","Magento",381],["T_NS_SEPARATOR","\\",381],["T_STRING","Framework",381],["T_NS_SEPARATOR","\\",381],["T_STRING","Exception",381],["T_NS_SEPARATOR","\\",381],["T_STRING","LocalizedException",381],"(",["T_WHITESPACE","\n                ",381],["T_STRING","__",382],"(",["T_CONSTANT_ENCAPSED_STRING","'Please define the correct sender information.'",382],")",["T_WHITESPACE","\n            ",382],")",";",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n        ",384],["T_RETURN","return",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$sender",385],";",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n\n    ",386],["T_DOC_COMMENT","\/**\n     * Get max allowed uses of \"Send to Friend\" function per hour\n     *\n     * @return integer\n     *\/",388],["T_WHITESPACE","\n    ",392],["T_PUBLIC","public",393],["T_WHITESPACE"," ",393],["T_FUNCTION","function",393],["T_WHITESPACE"," ",393],["T_STRING","getMaxSendsToFriend",393],"(",")",["T_WHITESPACE","\n    ",393],"{",["T_WHITESPACE","\n        ",394],["T_RETURN","return",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","_sendfriendData",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getMaxEmailPerPeriod",395],"(",")",";",["T_WHITESPACE","\n    ",395],"}",["T_WHITESPACE","\n\n    ",396],["T_DOC_COMMENT","\/**\n     * Get max allowed recipients for \"Send to a Friend\" function\n     *\n     * @return integer\n     *\/",398],["T_WHITESPACE","\n    ",402],["T_PUBLIC","public",403],["T_WHITESPACE"," ",403],["T_FUNCTION","function",403],["T_WHITESPACE"," ",403],["T_STRING","getMaxRecipients",403],"(",")",["T_WHITESPACE","\n    ",403],"{",["T_WHITESPACE","\n        ",404],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_sendfriendData",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getMaxRecipients",405],"(",")",";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n\n    ",406],["T_DOC_COMMENT","\/**\n     * Check if user is allowed to email product to a friend\n     *\n     * @return boolean\n     *\/",408],["T_WHITESPACE","\n    ",412],["T_PUBLIC","public",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","canEmailToFriend",413],"(",")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_RETURN","return",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_sendfriendData",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","isEnabled",415],"(",")",";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n\n    ",416],["T_DOC_COMMENT","\/**\n     * Check if user is exceed limit\n     *\n     * @return boolean\n     *\/",418],["T_WHITESPACE","\n    ",422],["T_PUBLIC","public",423],["T_WHITESPACE"," ",423],["T_FUNCTION","function",423],["T_WHITESPACE"," ",423],["T_STRING","isExceedLimit",423],"(",")",["T_WHITESPACE","\n    ",423],"{",["T_WHITESPACE","\n        ",424],["T_RETURN","return",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getSentCount",425],"(",")",["T_WHITESPACE"," ",425],["T_IS_GREATER_OR_EQUAL",">=",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getMaxSendsToFriend",425],"(",")",";",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n\n    ",426],["T_DOC_COMMENT","\/**\n     * Return count of sent in last period\n     *\n     * @param bool $useCache - flag, is allow to use value of attribute of model if it is processed last time\n     * @return int\n     *\/",428],["T_WHITESPACE","\n    ",433],["T_PUBLIC","public",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","getSentCount",434],"(",["T_VARIABLE","$useCache",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_STRING","true",434],")",["T_WHITESPACE","\n    ",434],"{",["T_WHITESPACE","\n        ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$useCache",436],["T_WHITESPACE"," ",436],["T_BOOLEAN_AND","&&",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_sentCount",436],["T_WHITESPACE"," ",436],["T_IS_NOT_IDENTICAL","!==",436],["T_WHITESPACE"," ",436],["T_STRING","null",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_sentCount",437],";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n\n        ",438],["T_SWITCH","switch",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","_sendfriendData",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getLimitBy",440],"(",")",")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_CASE","case",441],["T_WHITESPACE"," ",441],["T_NS_SEPARATOR","\\",441],["T_STRING","Magento",441],["T_NS_SEPARATOR","\\",441],["T_STRING","SendFriend",441],["T_NS_SEPARATOR","\\",441],["T_STRING","Helper",441],["T_NS_SEPARATOR","\\",441],["T_STRING","Data",441],["T_DOUBLE_COLON","::",441],["T_STRING","CHECK_COOKIE",441],":",["T_WHITESPACE","\n                ",441],["T_RETURN","return",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","_sentCount",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","_sentCountByCookies",442],"(",["T_STRING","false",442],")",";",["T_WHITESPACE","\n            ",442],["T_CASE","case",443],["T_WHITESPACE"," ",443],["T_NS_SEPARATOR","\\",443],["T_STRING","Magento",443],["T_NS_SEPARATOR","\\",443],["T_STRING","SendFriend",443],["T_NS_SEPARATOR","\\",443],["T_STRING","Helper",443],["T_NS_SEPARATOR","\\",443],["T_STRING","Data",443],["T_DOUBLE_COLON","::",443],["T_STRING","CHECK_IP",443],":",["T_WHITESPACE","\n                ",443],["T_RETURN","return",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_sentCount",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_sentCountByIp",444],"(",["T_STRING","false",444],")",";",["T_WHITESPACE","\n            ",444],["T_DEFAULT","default",445],":",["T_WHITESPACE","\n                ",445],["T_RETURN","return",446],["T_WHITESPACE"," ",446],["T_LNUMBER","0",446],";",["T_WHITESPACE","\n        ",446],"}",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n\n    ",448],["T_DOC_COMMENT","\/**\n     * Increase count of sent\n     *\n     * @return int\n     *\/",450],["T_WHITESPACE","\n    ",454],["T_PROTECTED","protected",455],["T_WHITESPACE"," ",455],["T_FUNCTION","function",455],["T_WHITESPACE"," ",455],["T_STRING","_incrementSentCount",455],"(",")",["T_WHITESPACE","\n    ",455],"{",["T_WHITESPACE","\n        ",456],["T_SWITCH","switch",457],["T_WHITESPACE"," ",457],"(",["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","_sendfriendData",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getLimitBy",457],"(",")",")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n            ",457],["T_CASE","case",458],["T_WHITESPACE"," ",458],["T_NS_SEPARATOR","\\",458],["T_STRING","Magento",458],["T_NS_SEPARATOR","\\",458],["T_STRING","SendFriend",458],["T_NS_SEPARATOR","\\",458],["T_STRING","Helper",458],["T_NS_SEPARATOR","\\",458],["T_STRING","Data",458],["T_DOUBLE_COLON","::",458],["T_STRING","CHECK_COOKIE",458],":",["T_WHITESPACE","\n                ",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_sentCount",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_sentCountByCookies",459],"(",["T_STRING","true",459],")",";",["T_WHITESPACE","\n            ",459],["T_CASE","case",460],["T_WHITESPACE"," ",460],["T_NS_SEPARATOR","\\",460],["T_STRING","Magento",460],["T_NS_SEPARATOR","\\",460],["T_STRING","SendFriend",460],["T_NS_SEPARATOR","\\",460],["T_STRING","Helper",460],["T_NS_SEPARATOR","\\",460],["T_STRING","Data",460],["T_DOUBLE_COLON","::",460],["T_STRING","CHECK_IP",460],":",["T_WHITESPACE","\n                ",460],["T_RETURN","return",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_sentCount",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_sentCountByIp",461],"(",["T_STRING","true",461],")",";",["T_WHITESPACE","\n            ",461],["T_DEFAULT","default",462],":",["T_WHITESPACE","\n                ",462],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_LNUMBER","0",463],";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n    ",464],"}",["T_WHITESPACE","\n\n    ",465],["T_DOC_COMMENT","\/**\n     * Return count of sent in last period by cookie\n     *\n     * @param bool $increment - flag, increase count before return value\n     * @return int\n     *\/",467],["T_WHITESPACE","\n    ",472],["T_PROTECTED","protected",473],["T_WHITESPACE"," ",473],["T_FUNCTION","function",473],["T_WHITESPACE"," ",473],["T_STRING","_sentCountByCookies",473],"(",["T_VARIABLE","$increment",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_STRING","false",473],")",["T_WHITESPACE","\n    ",473],"{",["T_WHITESPACE","\n        ",474],["T_VARIABLE","$cookieName",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_sendfriendData",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","getCookieName",475],"(",")",";",["T_WHITESPACE","\n        ",475],["T_VARIABLE","$time",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_STRING","time",476],"(",")",";",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$newTimes",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],"[","]",";",["T_WHITESPACE","\n\n        ",477],["T_IF","if",479],["T_WHITESPACE"," ",479],"(",["T_ISSET","isset",479],"(",["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","_lastCookieValue",479],"[",["T_VARIABLE","$cookieName",479],"]",")",")",["T_WHITESPACE"," ",479],"{",["T_WHITESPACE","\n            ",479],["T_VARIABLE","$oldTimes",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","_lastCookieValue",480],"[",["T_VARIABLE","$cookieName",480],"]",";",["T_WHITESPACE","\n        ",480],"}",["T_WHITESPACE"," ",481],["T_ELSE","else",481],["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n            ",481],["T_VARIABLE","$oldTimes",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","cookieManager",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","getCookie",482],"(",["T_VARIABLE","$cookieName",482],")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE","\n\n        ",483],["T_IF","if",485],["T_WHITESPACE"," ",485],"(",["T_VARIABLE","$oldTimes",485],")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_VARIABLE","$oldTimes",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_STRING","explode",486],"(",["T_CONSTANT_ENCAPSED_STRING","','",486],",",["T_WHITESPACE"," ",486],["T_VARIABLE","$oldTimes",486],")",";",["T_WHITESPACE","\n            ",486],["T_FOREACH","foreach",487],["T_WHITESPACE"," ",487],"(",["T_VARIABLE","$oldTimes",487],["T_WHITESPACE"," ",487],["T_AS","as",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$oldTime",487],")",["T_WHITESPACE"," ",487],"{",["T_WHITESPACE","\n                ",487],["T_VARIABLE","$periodTime",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_VARIABLE","$time",488],["T_WHITESPACE"," ",488],"-",["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_sendfriendData",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getPeriod",488],"(",")",";",["T_WHITESPACE","\n                ",488],["T_IF","if",489],["T_WHITESPACE"," ",489],"(",["T_STRING","is_numeric",489],"(",["T_VARIABLE","$oldTime",489],")",["T_WHITESPACE"," ",489],["T_LOGICAL_AND","and",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$oldTime",489],["T_WHITESPACE"," ",489],["T_IS_GREATER_OR_EQUAL",">=",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$periodTime",489],")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n                    ",489],["T_VARIABLE","$newTimes",490],"[","]",["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_VARIABLE","$oldTime",490],";",["T_WHITESPACE","\n                ",490],"}",["T_WHITESPACE","\n            ",491],"}",["T_WHITESPACE","\n        ",492],"}",["T_WHITESPACE","\n\n        ",493],["T_IF","if",495],["T_WHITESPACE"," ",495],"(",["T_VARIABLE","$increment",495],")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n            ",495],["T_VARIABLE","$newTimes",496],"[","]",["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_VARIABLE","$time",496],";",["T_WHITESPACE","\n            ",496],["T_VARIABLE","$newValue",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_STRING","implode",497],"(",["T_CONSTANT_ENCAPSED_STRING","','",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$newTimes",497],")",";",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","cookieManager",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","setSensitiveCookie",498],"(",["T_VARIABLE","$cookieName",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$newValue",498],")",";",["T_WHITESPACE","\n            ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","_lastCookieValue",499],"[",["T_VARIABLE","$cookieName",499],"]",["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$newValue",499],";",["T_WHITESPACE","\n        ",499],"}",["T_WHITESPACE","\n\n        ",500],["T_RETURN","return",502],["T_WHITESPACE"," ",502],["T_STRING","count",502],"(",["T_VARIABLE","$newTimes",502],")",";",["T_WHITESPACE","\n    ",502],"}",["T_WHITESPACE","\n\n    ",503],["T_DOC_COMMENT","\/**\n     * Return count of sent in last period by IP address\n     *\n     * @param bool $increment - flag, increase count before return value\n     * @return int\n     *\/",505],["T_WHITESPACE","\n    ",510],["T_PROTECTED","protected",511],["T_WHITESPACE"," ",511],["T_FUNCTION","function",511],["T_WHITESPACE"," ",511],["T_STRING","_sentCountByIp",511],"(",["T_VARIABLE","$increment",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_STRING","false",511],")",["T_WHITESPACE","\n    ",511],"{",["T_WHITESPACE","\n        ",512],["T_VARIABLE","$time",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","time",513],"(",")",";",["T_WHITESPACE","\n        ",513],["T_VARIABLE","$period",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","_sendfriendData",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getPeriod",514],"(",")",";",["T_WHITESPACE","\n        ",514],["T_VARIABLE","$websiteId",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_storeManager",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","getStore",515],"(",")",["T_OBJECT_OPERATOR","->",515],["T_STRING","getWebsiteId",515],"(",")",";",["T_WHITESPACE","\n\n        ",515],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_VARIABLE","$increment",517],")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n            ",517],["T_COMMENT","\/\/ delete expired logs\n",518],["T_WHITESPACE","            ",519],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","_getResource",519],"(",")",["T_OBJECT_OPERATOR","->",519],["T_STRING","deleteLogsBefore",519],"(",["T_VARIABLE","$time",519],["T_WHITESPACE"," ",519],"-",["T_WHITESPACE"," ",519],["T_VARIABLE","$period",519],")",";",["T_WHITESPACE","\n            ",519],["T_COMMENT","\/\/ add new item\n",520],["T_WHITESPACE","            ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_getResource",521],"(",")",["T_OBJECT_OPERATOR","->",521],["T_STRING","addSendItem",521],"(",["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","remoteAddress",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getRemoteAddress",521],"(",["T_STRING","true",521],")",",",["T_WHITESPACE"," ",521],["T_VARIABLE","$time",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$websiteId",521],")",";",["T_WHITESPACE","\n        ",521],"}",["T_WHITESPACE","\n\n        ",522],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","_getResource",524],"(",")",["T_OBJECT_OPERATOR","->",524],["T_STRING","getSendCount",524],"(",["T_WHITESPACE","\n            ",524],["T_VARIABLE","$this",525],",",["T_WHITESPACE","\n            ",525],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","remoteAddress",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getRemoteAddress",526],"(",["T_STRING","true",526],")",",",["T_WHITESPACE","\n            ",526],["T_STRING","time",527],"(",")",["T_WHITESPACE"," ",527],"-",["T_WHITESPACE"," ",527],["T_VARIABLE","$period",527],",",["T_WHITESPACE","\n            ",527],["T_VARIABLE","$websiteId",528],["T_WHITESPACE","\n        ",528],")",";",["T_WHITESPACE","\n    ",529],"}",["T_WHITESPACE","\n",530],"}",["T_WHITESPACE","\n",531]]
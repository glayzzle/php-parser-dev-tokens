[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Analytics",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adminhtml",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Subscription",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Analytics",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","NotificationTime",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Analytics",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Subscription",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Backend",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Action",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Backend",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Action",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Context",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Controller",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Result",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Json",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Controller",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ResultFactory",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Exception",15],["T_NS_SEPARATOR","\\",15],["T_STRING","LocalizedException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Psr",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Log",16],["T_NS_SEPARATOR","\\",16],["T_STRING","LoggerInterface",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Class Activate\n *\n * Activates subscription with Free Tier program\n *\/",18],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","Activate",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","Action",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * Resource for managing subscription to Magento Analytics.\n     *\n     * @var Subscription\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$subscription",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var LoggerInterface\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$logger",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Resource for managing last notification time about subscription to Magento Analytics.\n     *\n     * @var NotificationTime\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$notificationTime",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Agreement on subscription value into request.\n     *\n     * @var string\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PRIVATE","private",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$subscriptionApprovedField",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'analytics_subscription_checkbox'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Activate constructor.\n     *\n     * @param Context $context\n     * @param Subscription $subscription\n     * @param LoggerInterface $logger\n     * @param NotificationTime $notificationTime\n     *\/",51],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","__construct",59],"(",["T_WHITESPACE","\n        ",59],["T_STRING","Context",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$context",60],",",["T_WHITESPACE","\n        ",60],["T_STRING","Subscription",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$subscription",61],",",["T_WHITESPACE","\n        ",61],["T_STRING","LoggerInterface",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$logger",62],",",["T_WHITESPACE","\n        ",62],["T_STRING","NotificationTime",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$notificationTime",63],["T_WHITESPACE","\n    ",63],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","subscription",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$subscription",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","logger",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$logger",66],";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","notificationTime",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$notificationTime",67],";",["T_WHITESPACE","\n        ",67],["T_STRING","parent",68],["T_DOUBLE_COLON","::",68],["T_STRING","__construct",68],"(",["T_VARIABLE","$context",68],")",";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Check admin permissions for this controller\n     *\n     * @return boolean\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","_isAllowed",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_authorization",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","isAllowed",78],"(",["T_CONSTANT_ENCAPSED_STRING","'Magento_Analytics::analytics_settings'",78],")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Activate subscription to Magento Analytics via AJAX.\n     *\n     * @return Json\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","execute",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_TRY","try",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getRequest",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","getParam",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","subscriptionApprovedField",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","subscription",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","enable",90],"(",")",";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE"," ",91],["T_ELSE","else",91],["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","notificationTime",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","unsetLastTimeNotificationValue",92],"(",")",";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$responseContent",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],"[",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'success'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_STRING","true",95],",",["T_WHITESPACE","\n                ",95],["T_CONSTANT_ENCAPSED_STRING","'error_message'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],",",["T_WHITESPACE","\n            ",96],"]",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE"," ",98],["T_CATCH","catch",98],["T_WHITESPACE"," ",98],"(",["T_STRING","LocalizedException",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$e",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$responseContent",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],"[",["T_WHITESPACE","\n                ",99],["T_CONSTANT_ENCAPSED_STRING","'success'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_STRING","false",100],",",["T_WHITESPACE","\n                ",100],["T_CONSTANT_ENCAPSED_STRING","'error_message'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$e",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getMessage",101],"(",")",",",["T_WHITESPACE","\n            ",101],"]",";",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","logger",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","error",103],"(",["T_VARIABLE","$e",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getMessage",103],"(",")",")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE"," ",104],["T_CATCH","catch",104],["T_WHITESPACE"," ",104],"(",["T_NS_SEPARATOR","\\",104],["T_STRING","Exception",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$e",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$responseContent",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],"[",["T_WHITESPACE","\n                ",105],["T_CONSTANT_ENCAPSED_STRING","'success'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_STRING","false",106],",",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'error_message'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_STRING","__",107],"(",["T_WHITESPACE","\n                    ",107],["T_CONSTANT_ENCAPSED_STRING","'Sorry, there was an error processing your registration request to Magento Analytics. '",108],["T_WHITESPACE","\n                    ",108],".",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'Please try again later.'",109],["T_WHITESPACE","\n                ",109],")",",",["T_WHITESPACE","\n            ",110],"]",";",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","logger",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","error",112],"(",["T_VARIABLE","$e",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getMessage",112],"(",")",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n        ",113],["T_DOC_COMMENT","\/** @var Json $resultJson *\/",114],["T_WHITESPACE","\n        ",114],["T_VARIABLE","$resultJson",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","resultFactory",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","create",115],"(",["T_STRING","ResultFactory",115],["T_DOUBLE_COLON","::",115],["T_STRING","TYPE_JSON",115],")",";",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$resultJson",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","setData",116],"(",["T_VARIABLE","$responseContent",116],")",";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n",117],"}",["T_WHITESPACE","\n",118]]
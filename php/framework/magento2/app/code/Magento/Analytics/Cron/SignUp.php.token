[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Analytics",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cron",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Analytics",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AnalyticsConnector",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Analytics",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Config",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Backend",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Enabled",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SubscriptionHandler",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","App",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Config",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ReinitableConfigInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Config",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Storage",11],["T_NS_SEPARATOR","\\",11],["T_STRING","WriterInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AdminNotification",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","InboxFactory",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","AdminNotification",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ResourceModel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Inbox",13],["T_WHITESPACE"," ",13],["T_AS","as",13],["T_WHITESPACE"," ",13],["T_STRING","InboxResource",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Analytics",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","FlagManager",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Class SignUp\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","SignUp",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @var AnalyticsConnector\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$analyticsConnector",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var WriterInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$configWriter",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var InboxFactory\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$inboxFactory",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var InboxResource\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$inboxResource",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var FlagManager\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$flagManager",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Reinitable Config Model.\n     *\n     * @var ReinitableConfigInterface\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PRIVATE","private",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$reinitableConfig",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * SignUp constructor.\n     *\n     * @param AnalyticsConnector $analyticsConnector\n     * @param WriterInterface $configWriter\n     * @param InboxFactory $inboxFactory\n     * @param InboxResource $inboxResource\n     * @param FlagManager $flagManager\n     * @param ReinitableConfigInterface $reinitableConfig\n     *\/",53],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","__construct",63],"(",["T_WHITESPACE","\n        ",63],["T_STRING","AnalyticsConnector",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$analyticsConnector",64],",",["T_WHITESPACE","\n        ",64],["T_STRING","WriterInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$configWriter",65],",",["T_WHITESPACE","\n        ",65],["T_STRING","InboxFactory",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$inboxFactory",66],",",["T_WHITESPACE","\n        ",66],["T_STRING","InboxResource",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$inboxResource",67],",",["T_WHITESPACE","\n        ",67],["T_STRING","FlagManager",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$flagManager",68],",",["T_WHITESPACE","\n        ",68],["T_STRING","ReinitableConfigInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$reinitableConfig",69],["T_WHITESPACE","\n    ",69],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","analyticsConnector",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$analyticsConnector",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","configWriter",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$configWriter",72],";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","inboxFactory",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$inboxFactory",73],";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","inboxResource",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$inboxResource",74],";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","flagManager",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$flagManager",75],";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","reinitableConfig",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$reinitableConfig",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Execute scheduled subscription operation\n     * In case of failure writes message to notifications inbox\n     *\n     * @return bool\n     *\/",79],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","execute",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$attemptsCount",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","flagManager",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getFlagData",87],"(",["T_STRING","SubscriptionHandler",87],["T_DOUBLE_COLON","::",87],["T_STRING","ATTEMPTS_REVERSE_COUNTER_FLAG_CODE",87],")",";",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$attemptsCount",88],["T_WHITESPACE"," ",88],["T_IS_IDENTICAL","===",88],["T_WHITESPACE"," ",88],["T_STRING","null",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","deleteAnalyticsCronExpr",89],"(",")",";",["T_WHITESPACE","\n            ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_STRING","false",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$attemptsCount",93],["T_WHITESPACE"," ",93],["T_IS_SMALLER_OR_EQUAL","<=",93],["T_WHITESPACE"," ",93],["T_LNUMBER","0",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","deleteAnalyticsCronExpr",94],"(",")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","flagManager",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","deleteFlag",95],"(",["T_STRING","SubscriptionHandler",95],["T_DOUBLE_COLON","::",95],["T_STRING","ATTEMPTS_REVERSE_COUNTER_FLAG_CODE",95],")",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$inboxNotification",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","inboxFactory",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","create",96],"(",")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$inboxNotification",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","addNotice",97],"(",["T_WHITESPACE","\n                ",97],["T_CONSTANT_ENCAPSED_STRING","\"Analytics subscription unsuccessful\"",98],",",["T_WHITESPACE","\n                ",98],["T_CONSTANT_ENCAPSED_STRING","\"Analytics subscription unsuccessful\"",99],["T_WHITESPACE","\n            ",99],")",";",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","inboxResource",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","save",101],"(",["T_VARIABLE","$inboxNotification",101],")",";",["T_WHITESPACE","\n            ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_STRING","false",102],";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$attemptsCount",105],["T_WHITESPACE"," ",105],["T_MINUS_EQUAL","-=",105],["T_WHITESPACE"," ",105],["T_LNUMBER","1",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","flagManager",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","saveFlag",106],"(",["T_STRING","SubscriptionHandler",106],["T_DOUBLE_COLON","::",106],["T_STRING","ATTEMPTS_REVERSE_COUNTER_FLAG_CODE",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$attemptsCount",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$signUpResult",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","analyticsConnector",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","execute",107],"(",["T_CONSTANT_ENCAPSED_STRING","'signUp'",107],")",";",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$signUpResult",108],["T_WHITESPACE"," ",108],["T_IS_IDENTICAL","===",108],["T_WHITESPACE"," ",108],["T_STRING","false",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_STRING","false",109],";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","deleteAnalyticsCronExpr",112],"(",")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","flagManager",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","deleteFlag",113],"(",["T_STRING","SubscriptionHandler",113],["T_DOUBLE_COLON","::",113],["T_STRING","ATTEMPTS_REVERSE_COUNTER_FLAG_CODE",113],")",";",["T_WHITESPACE","\n        ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_STRING","true",114],";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Delete cron schedule setting into config.\n     *\n     * Delete cron schedule setting for subscription handler into config and\n     * re-initialize config cache to avoid auto-generate new schedule items.\n     *\n     * @return bool\n     *\/",117],["T_WHITESPACE","\n    ",124],["T_PRIVATE","private",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","deleteAnalyticsCronExpr",125],"(",")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","configWriter",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","delete",127],"(",["T_STRING","SubscriptionHandler",127],["T_DOUBLE_COLON","::",127],["T_STRING","CRON_STRING_PATH",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","reinitableConfig",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","reinit",128],"(",")",";",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_STRING","true",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
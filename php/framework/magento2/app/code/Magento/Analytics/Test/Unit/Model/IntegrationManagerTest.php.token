[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Analytics",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Unit",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Integration",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","IntegrationServiceInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Config",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Config",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Integration",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Integration",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Analytics",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","IntegrationManager",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Integration",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Api",13],["T_NS_SEPARATOR","\\",13],["T_STRING","OauthServiceInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TestFramework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Unit",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Helper",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ObjectManager",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","ObjectManagerHelper",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Class IntegrationManagerTest\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","IntegrationManagerTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","PHPUnit_Framework_TestCase",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @var IntegrationServiceInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$integrationServiceMock",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var OauthServiceInterface|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$oauthServiceMock",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var Config|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$configMock",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var Integration|\\PHPUnit_Framework_MockObject_MockObject\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$integrationMock",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var IntegrationManager\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$integrationManager",44],";",["T_WHITESPACE","\n\n    ",44],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","setUp",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$objectManagerHelper",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_NEW","new",48],["T_WHITESPACE"," ",48],["T_STRING","ObjectManagerHelper",48],"(",["T_VARIABLE","$this",48],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","integrationServiceMock",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getMockBuilder",49],"(",["T_STRING","IntegrationServiceInterface",49],["T_DOUBLE_COLON","::",49],["T_CLASS","class",49],")",["T_WHITESPACE","\n            ",49],["T_OBJECT_OPERATOR","->",50],["T_STRING","getMock",50],"(",")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","configMock",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getMockBuilder",51],"(",["T_STRING","Config",51],["T_DOUBLE_COLON","::",51],["T_CLASS","class",51],")",["T_WHITESPACE","\n            ",51],["T_OBJECT_OPERATOR","->",52],["T_STRING","disableOriginalConstructor",52],"(",")",["T_WHITESPACE","\n            ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","getMock",53],"(",")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","oauthServiceMock",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getMockBuilder",54],"(",["T_STRING","OauthServiceInterface",54],["T_DOUBLE_COLON","::",54],["T_CLASS","class",54],")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","getMock",55],"(",")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","integrationMock",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getMockBuilder",56],"(",["T_STRING","Integration",56],["T_DOUBLE_COLON","::",56],["T_CLASS","class",56],")",["T_WHITESPACE","\n            ",56],["T_OBJECT_OPERATOR","->",57],["T_STRING","disableOriginalConstructor",57],"(",")",["T_WHITESPACE","\n            ",57],["T_OBJECT_OPERATOR","->",58],["T_STRING","setMethods",58],"(","[",["T_WHITESPACE","\n                ",58],["T_CONSTANT_ENCAPSED_STRING","'getId'",59],",",["T_WHITESPACE","\n                ",59],["T_CONSTANT_ENCAPSED_STRING","'getConsumerId'",60],["T_WHITESPACE","\n            ",60],"]",")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","getMock",62],"(",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","integrationManager",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$objectManagerHelper",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getObject",63],"(",["T_WHITESPACE","\n            ",63],["T_STRING","IntegrationManager",64],["T_DOUBLE_COLON","::",64],["T_CLASS","class",64],",",["T_WHITESPACE","\n            ",64],"[",["T_WHITESPACE","\n                ",65],["T_CONSTANT_ENCAPSED_STRING","'integrationService'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","integrationServiceMock",66],",",["T_WHITESPACE","\n                ",66],["T_CONSTANT_ENCAPSED_STRING","'oauthService'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","oauthServiceMock",67],",",["T_WHITESPACE","\n                ",67],["T_CONSTANT_ENCAPSED_STRING","'config'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","configMock",68],["T_WHITESPACE","\n            ",68],"]",["T_WHITESPACE","\n        ",69],")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * @param string $status\n     *\n     * @return array\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PRIVATE","private",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","getIntegrationUserData",78],"(",["T_VARIABLE","$status",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],"[",["T_WHITESPACE","\n            ",80],["T_CONSTANT_ENCAPSED_STRING","'name'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",81],",",["T_WHITESPACE","\n            ",81],["T_CONSTANT_ENCAPSED_STRING","'status'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$status",82],",",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'all_resources'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_STRING","false",83],",",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","'resource'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],"[",["T_WHITESPACE","\n                ",84],["T_CONSTANT_ENCAPSED_STRING","'Magento_Analytics::analytics'",85],",",["T_WHITESPACE","\n                ",85],["T_CONSTANT_ENCAPSED_STRING","'Magento_Analytics::analytics_api'",86],["T_WHITESPACE","\n            ",86],"]",",",["T_WHITESPACE","\n        ",87],"]",";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * @return void\n     *\/",91],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","testActivateIntegrationSuccess",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","integrationServiceMock",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","expects",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","once",96],"(",")",")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","method",97],"(",["T_CONSTANT_ENCAPSED_STRING","'findByName'",97],")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","with",98],"(",["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",98],")",["T_WHITESPACE","\n            ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","willReturn",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","integrationMock",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","integrationMock",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","expects",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","exactly",100],"(",["T_LNUMBER","2",100],")",")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","method",101],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",101],")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","willReturn",102],"(",["T_LNUMBER","100500",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$integrationData",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getIntegrationUserData",103],"(",["T_STRING","Integration",103],["T_DOUBLE_COLON","::",103],["T_STRING","STATUS_ACTIVE",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$integrationData",104],"[",["T_CONSTANT_ENCAPSED_STRING","'integration_id'",104],"]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_LNUMBER","100500",104],";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","configMock",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","expects",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","exactly",105],"(",["T_LNUMBER","2",105],")",")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","method",106],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigDataValue'",106],")",["T_WHITESPACE","\n            ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","with",107],"(",["T_CONSTANT_ENCAPSED_STRING","'analytics\/integration_name'",107],",",["T_WHITESPACE"," ",107],["T_STRING","null",107],",",["T_WHITESPACE"," ",107],["T_STRING","null",107],")",["T_WHITESPACE","\n            ",107],["T_OBJECT_OPERATOR","->",108],["T_STRING","willReturn",108],"(",["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","integrationServiceMock",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","expects",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","once",109],"(",")",")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","method",110],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",110],")",["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","with",111],"(",["T_VARIABLE","$integrationData",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertTrue",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","integrationManager",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","activateIntegration",112],"(",")",")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * @expectedException \\Magento\\Framework\\Exception\\NoSuchEntityException\n     *\/",115],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","testActivateIntegrationFailureNoSuchEntity",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","integrationServiceMock",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","expects",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","once",120],"(",")",")",["T_WHITESPACE","\n            ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","method",121],"(",["T_CONSTANT_ENCAPSED_STRING","'findByName'",121],")",["T_WHITESPACE","\n            ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","with",122],"(",["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",122],")",["T_WHITESPACE","\n            ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","willReturn",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","integrationMock",123],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","integrationMock",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","expects",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","once",124],"(",")",")",["T_WHITESPACE","\n            ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","method",125],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",125],")",["T_WHITESPACE","\n            ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","willReturn",126],"(",["T_STRING","null",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","configMock",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","expects",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","once",127],"(",")",")",["T_WHITESPACE","\n            ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","method",128],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigDataValue'",128],")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","with",129],"(",["T_CONSTANT_ENCAPSED_STRING","'analytics\/integration_name'",129],",",["T_WHITESPACE"," ",129],["T_STRING","null",129],",",["T_WHITESPACE"," ",129],["T_STRING","null",129],")",["T_WHITESPACE","\n            ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","willReturn",130],"(",["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",130],")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","integrationServiceMock",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","expects",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","never",131],"(",")",")",["T_WHITESPACE","\n            ",131],["T_OBJECT_OPERATOR","->",132],["T_STRING","method",132],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",132],")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","integrationManager",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","activateIntegration",133],"(",")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * @dataProvider integrationIdDataProvider\n     *\n     * @param int|null $integrationId If null integration is absent.\n     * @return void\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","testGetTokenNewIntegration",142],"(",["T_VARIABLE","$integrationId",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","configMock",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","expects",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","atLeastOnce",144],"(",")",")",["T_WHITESPACE","\n            ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","method",145],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigDataValue'",145],")",["T_WHITESPACE","\n            ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","with",146],"(",["T_CONSTANT_ENCAPSED_STRING","'analytics\/integration_name'",146],",",["T_WHITESPACE"," ",146],["T_STRING","null",146],",",["T_WHITESPACE"," ",146],["T_STRING","null",146],")",["T_WHITESPACE","\n            ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","willReturn",147],"(",["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",147],")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","integrationServiceMock",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","expects",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","once",148],"(",")",")",["T_WHITESPACE","\n            ",148],["T_OBJECT_OPERATOR","->",149],["T_STRING","method",149],"(",["T_CONSTANT_ENCAPSED_STRING","'findByName'",149],")",["T_WHITESPACE","\n            ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","with",150],"(",["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",150],")",["T_WHITESPACE","\n            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","willReturn",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","integrationMock",151],")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","integrationMock",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","expects",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","once",152],"(",")",")",["T_WHITESPACE","\n            ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","method",153],"(",["T_CONSTANT_ENCAPSED_STRING","'getConsumerId'",153],")",["T_WHITESPACE","\n            ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","willReturn",154],"(",["T_LNUMBER","100500",154],")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","integrationMock",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","expects",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","once",155],"(",")",")",["T_WHITESPACE","\n            ",155],["T_OBJECT_OPERATOR","->",156],["T_STRING","method",156],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",156],")",["T_WHITESPACE","\n            ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","willReturn",157],"(",["T_VARIABLE","$integrationId",157],")",";",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_VARIABLE","$integrationId",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","integrationServiceMock",159],["T_WHITESPACE","\n                ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","expects",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","once",160],"(",")",")",["T_WHITESPACE","\n                ",160],["T_OBJECT_OPERATOR","->",161],["T_STRING","method",161],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",161],")",["T_WHITESPACE","\n                ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","with",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getIntegrationUserData",162],"(",["T_STRING","Integration",162],["T_DOUBLE_COLON","::",162],["T_STRING","STATUS_INACTIVE",162],")",")",["T_WHITESPACE","\n                ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","willReturn",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","integrationMock",163],")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","oauthServiceMock",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","expects",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","at",165],"(",["T_LNUMBER","0",165],")",")",["T_WHITESPACE","\n            ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","method",166],"(",["T_CONSTANT_ENCAPSED_STRING","'getAccessToken'",166],")",["T_WHITESPACE","\n            ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","with",167],"(",["T_LNUMBER","100500",167],")",["T_WHITESPACE","\n            ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","willReturn",168],"(",["T_STRING","false",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","oauthServiceMock",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","expects",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","at",169],"(",["T_LNUMBER","2",169],")",")",["T_WHITESPACE","\n            ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","method",170],"(",["T_CONSTANT_ENCAPSED_STRING","'getAccessToken'",170],")",["T_WHITESPACE","\n            ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","with",171],"(",["T_LNUMBER","100500",171],")",["T_WHITESPACE","\n            ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","willReturn",172],"(",["T_CONSTANT_ENCAPSED_STRING","'IntegrationToken'",172],")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","oauthServiceMock",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","expects",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","once",173],"(",")",")",["T_WHITESPACE","\n            ",173],["T_OBJECT_OPERATOR","->",174],["T_STRING","method",174],"(",["T_CONSTANT_ENCAPSED_STRING","'createAccessToken'",174],")",["T_WHITESPACE","\n            ",174],["T_OBJECT_OPERATOR","->",175],["T_STRING","with",175],"(",["T_LNUMBER","100500",175],",",["T_WHITESPACE"," ",175],["T_STRING","true",175],")",["T_WHITESPACE","\n            ",175],["T_OBJECT_OPERATOR","->",176],["T_STRING","willReturn",176],"(",["T_STRING","true",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","assertEquals",177],"(",["T_CONSTANT_ENCAPSED_STRING","'IntegrationToken'",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","integrationManager",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","generateToken",177],"(",")",")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * @dataProvider integrationIdDataProvider\n     *\n     * @param int|null $integrationId If null integration is absent.\n     * @return void\n     *\/",180],["T_WHITESPACE","\n    ",185],["T_PUBLIC","public",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","testGetTokenExistingIntegration",186],"(",["T_VARIABLE","$integrationId",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","configMock",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","expects",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","atLeastOnce",188],"(",")",")",["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","method",189],"(",["T_CONSTANT_ENCAPSED_STRING","'getConfigDataValue'",189],")",["T_WHITESPACE","\n            ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","with",190],"(",["T_CONSTANT_ENCAPSED_STRING","'analytics\/integration_name'",190],",",["T_WHITESPACE"," ",190],["T_STRING","null",190],",",["T_WHITESPACE"," ",190],["T_STRING","null",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","willReturn",191],"(",["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",191],")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","integrationServiceMock",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","expects",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","once",192],"(",")",")",["T_WHITESPACE","\n            ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","method",193],"(",["T_CONSTANT_ENCAPSED_STRING","'findByName'",193],")",["T_WHITESPACE","\n            ",193],["T_OBJECT_OPERATOR","->",194],["T_STRING","with",194],"(",["T_CONSTANT_ENCAPSED_STRING","'ma-integration-user'",194],")",["T_WHITESPACE","\n            ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","willReturn",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","integrationMock",195],")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","integrationMock",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","expects",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","once",196],"(",")",")",["T_WHITESPACE","\n            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","method",197],"(",["T_CONSTANT_ENCAPSED_STRING","'getConsumerId'",197],")",["T_WHITESPACE","\n            ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","willReturn",198],"(",["T_LNUMBER","100500",198],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","integrationMock",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","expects",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","once",199],"(",")",")",["T_WHITESPACE","\n            ",199],["T_OBJECT_OPERATOR","->",200],["T_STRING","method",200],"(",["T_CONSTANT_ENCAPSED_STRING","'getId'",200],")",["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","willReturn",201],"(",["T_VARIABLE","$integrationId",201],")",";",["T_WHITESPACE","\n        ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(","!",["T_VARIABLE","$integrationId",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","integrationServiceMock",203],["T_WHITESPACE","\n                ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","expects",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","once",204],"(",")",")",["T_WHITESPACE","\n                ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","method",205],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",205],")",["T_WHITESPACE","\n                ",205],["T_OBJECT_OPERATOR","->",206],["T_STRING","with",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getIntegrationUserData",206],"(",["T_STRING","Integration",206],["T_DOUBLE_COLON","::",206],["T_STRING","STATUS_INACTIVE",206],")",")",["T_WHITESPACE","\n                ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","willReturn",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","integrationMock",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","oauthServiceMock",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","expects",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","once",209],"(",")",")",["T_WHITESPACE","\n            ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","method",210],"(",["T_CONSTANT_ENCAPSED_STRING","'getAccessToken'",210],")",["T_WHITESPACE","\n            ",210],["T_OBJECT_OPERATOR","->",211],["T_STRING","with",211],"(",["T_LNUMBER","100500",211],")",["T_WHITESPACE","\n            ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","willReturn",212],"(",["T_CONSTANT_ENCAPSED_STRING","'IntegrationToken'",212],")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","oauthServiceMock",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","expects",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","never",213],"(",")",")",["T_WHITESPACE","\n            ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","method",214],"(",["T_CONSTANT_ENCAPSED_STRING","'createAccessToken'",214],")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","assertEquals",215],"(",["T_CONSTANT_ENCAPSED_STRING","'IntegrationToken'",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","integrationManager",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","generateToken",215],"(",")",")",";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * @return array\n     *\/",218],["T_WHITESPACE","\n    ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","integrationIdDataProvider",221],"(",")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],"[",["T_WHITESPACE","\n            ",223],"[",["T_LNUMBER","1",224],"]",",",["T_WHITESPACE","\n            ",224],"[",["T_STRING","null",225],"]",",",["T_WHITESPACE","\n        ",225],"]",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n",227],"}",["T_WHITESPACE","\n",228]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_DOC_COMMENT","\/** @var $upsModel \\Magento\\Ups\\Helper\\Config *\/",9],["T_WHITESPACE","\n",9],["T_DOC_COMMENT","\/** @var $block \\Magento\\Ups\\Block\\Backend\\System\\CarrierConfig *\/",10],["T_WHITESPACE","\n",10],["T_VARIABLE","$upsCarrierConfig",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_VARIABLE","$block",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","getCarrierConfig",11],"(",")",";",["T_WHITESPACE","\n",11],["T_VARIABLE","$orShipArr",12],["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$upsCarrierConfig",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","getCode",12],"(",["T_CONSTANT_ENCAPSED_STRING","'originShipment'",12],")",";",["T_WHITESPACE","\n",12],["T_VARIABLE","$defShipArr",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_VARIABLE","$upsCarrierConfig",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","getCode",13],"(",["T_CONSTANT_ENCAPSED_STRING","'method'",13],")",";",["T_WHITESPACE","\n\n",13],["T_VARIABLE","$sectionCode",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$block",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","getRequest",15],"(",")",["T_OBJECT_OPERATOR","->",15],["T_STRING","getParam",15],"(",["T_CONSTANT_ENCAPSED_STRING","'section'",15],")",";",["T_WHITESPACE","\n",15],["T_VARIABLE","$websiteCode",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$block",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","getRequest",16],"(",")",["T_OBJECT_OPERATOR","->",16],["T_STRING","getParam",16],"(",["T_CONSTANT_ENCAPSED_STRING","'website'",16],")",";",["T_WHITESPACE","\n",16],["T_VARIABLE","$storeCode",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$block",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","getRequest",17],"(",")",["T_OBJECT_OPERATOR","->",17],["T_STRING","getParam",17],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",17],")",";",["T_WHITESPACE","\n\n",17],["T_IF","if",19],["T_WHITESPACE"," ",19],"(","!",["T_VARIABLE","$storeCode",19],["T_WHITESPACE"," ",19],["T_BOOLEAN_AND","&&",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$websiteCode",19],")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n    ",19],["T_DOC_COMMENT","\/** @var $web \\Magento\\Store\\Model\\Website *\/",20],["T_WHITESPACE","\n    ",20],["T_VARIABLE","$web",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$block",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","getWebsiteModel",21],"(",")",["T_OBJECT_OPERATOR","->",21],["T_STRING","load",21],"(",["T_VARIABLE","$websiteCode",21],")",";",["T_WHITESPACE","\n    ",21],["T_VARIABLE","$storedAllowedMethods",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_STRING","explode",22],"(",["T_CONSTANT_ENCAPSED_STRING","','",22],",",["T_WHITESPACE"," ",22],["T_VARIABLE","$web",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","getConfig",22],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/allowed_methods'",22],")",")",";",["T_WHITESPACE","\n    ",22],["T_VARIABLE","$storedOriginShipment",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$block",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","escapeHtml",23],"(",["T_VARIABLE","$web",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","getConfig",23],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/origin_shipment'",23],")",")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$storedFreeShipment",24],["T_WHITESPACE","   ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$block",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escapeHtml",24],"(",["T_VARIABLE","$web",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getConfig",24],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/free_method'",24],")",")",";",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$storedUpsType",25],["T_WHITESPACE","        ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$block",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","escapeHtml",25],"(",["T_VARIABLE","$web",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","getConfig",25],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/type'",25],")",")",";",["T_WHITESPACE","\n",25],"}",["T_WHITESPACE"," ",26],["T_ELSEIF","elseif",26],["T_WHITESPACE"," ",26],"(",["T_VARIABLE","$storeCode",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$storedAllowedMethods",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","explode",27],"(",["T_CONSTANT_ENCAPSED_STRING","','",27],",",["T_WHITESPACE"," ",27],["T_VARIABLE","$block",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","getConfig",27],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/allowed_methods'",27],",",["T_WHITESPACE"," ",27],["T_VARIABLE","$storeCode",27],")",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$storedOriginShipment",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$block",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","escapeHtml",28],"(",["T_VARIABLE","$block",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getConfig",28],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/origin_shipment'",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$storeCode",28],")",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$storedFreeShipment",29],["T_WHITESPACE","   ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$block",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","escapeHtml",29],"(",["T_VARIABLE","$block",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getConfig",29],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/free_method'",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$storeCode",29],")",")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$storedUpsType",30],["T_WHITESPACE","        ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$block",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","escapeHtml",30],"(",["T_VARIABLE","$block",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getConfig",30],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/type'",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$storeCode",30],")",")",";",["T_WHITESPACE","\n",30],"}",["T_WHITESPACE"," ",31],["T_ELSE","else",31],["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$storedAllowedMethods",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","explode",32],"(",["T_CONSTANT_ENCAPSED_STRING","','",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$block",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getConfig",32],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/allowed_methods'",32],")",")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$storedOriginShipment",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$block",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","escapeHtml",33],"(",["T_VARIABLE","$block",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getConfig",33],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/origin_shipment'",33],")",")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$storedFreeShipment",34],["T_WHITESPACE","   ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$block",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","escapeHtml",34],"(",["T_VARIABLE","$block",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getConfig",34],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/free_method'",34],")",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$storedUpsType",35],["T_WHITESPACE","        ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$block",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","escapeHtml",35],"(",["T_VARIABLE","$block",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getConfig",35],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/ups\/type'",35],")",")",";",["T_WHITESPACE","\n",35],"}",["T_WHITESPACE","\n",36],["T_CLOSE_TAG","?>\n",37],["T_INLINE_HTML","<script>\nrequire([\"prototype\"], function(){\n\n\/\/<![CDATA[\n    function hideRowArrayElements(arr)\n    {\n        for (var a = 0; a < arr.length; a++) {\n            $(arr[a]).up(1).hide();\n        }\n    }\n\n    function showRowArrayElements(arr)\n    {\n        for (var a = 0; a < arr.length; a++) {\n            $(arr[a]).up(1).show();\n        }\n    }\n\n    function inArray(arr, value)\n    {\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === value) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    var upsXml = Class.create();\n    upsXml.prototype = {\n        initialize: function()\n        {\n            this.carriersUpsTypeId = 'carriers_ups_type';\n            if (!$(this.carriersUpsTypeId)) {\n                return;\n            }\n\n            this.checkingUpsXmlId = ['carriers_ups_gateway_xml_url','carriers_ups_username',\n                'carriers_ups_password','carriers_ups_access_license_number'];\n            this.checkingUpsId = ['carriers_ups_gateway_url'];\n            this.originShipmentTitle = '';\n            this.allowedMethodsId = 'carriers_ups_allowed_methods';\n            this.freeShipmentId = 'carriers_ups_free_method';\n            this.onlyUpsXmlElements = ['carriers_ups_gateway_xml_url','carriers_ups_tracking_xml_url',\n                'carriers_ups_username','carriers_ups_password','carriers_ups_access_license_number',\n                'carriers_ups_origin_shipment','carriers_ups_negotiated_active','carriers_ups_shipper_number',\n                'carriers_ups_mode_xml'];\n            this.onlyUpsElements = ['carriers_ups_gateway_url'];\n\n            this.storedOriginShipment = '",38],["T_OPEN_TAG","<?php ",87],["T_COMMENT","\/* @noEscape *\/",87],["T_WHITESPACE"," ",87],["T_ECHO","echo",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$storedOriginShipment",87],["T_WHITESPACE"," ",87],["T_CLOSE_TAG","?>",87],["T_INLINE_HTML","';\n            this.storedFreeShipment = '",87],["T_OPEN_TAG","<?php ",88],["T_COMMENT","\/* @noEscape *\/",88],["T_WHITESPACE"," ",88],["T_ECHO","echo",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$storedFreeShipment",88],["T_WHITESPACE"," ",88],["T_CLOSE_TAG","?>",88],["T_INLINE_HTML","';\n            this.storedUpsType = '",88],["T_OPEN_TAG","<?php ",89],["T_COMMENT","\/* @noEscape *\/",89],["T_WHITESPACE"," ",89],["T_ECHO","echo",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$storedUpsType",89],["T_WHITESPACE"," ",89],["T_CLOSE_TAG","?>",89],["T_INLINE_HTML","';\n            ",89],["T_OPEN_TAG","<?php ",90],["T_DOC_COMMENT","\/** @var $jsonHelper \\Magento\\Framework\\Json\\Helper\\Data *\/",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$jsonHelper",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","helper",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Magento\\Framework\\Json\\Helper\\Data'",90],")",";",["T_WHITESPACE"," ",90],["T_CLOSE_TAG","?>\n",90],["T_INLINE_HTML","            this.storedAllowedMethods = ",91],["T_OPEN_TAG","<?php ",91],["T_COMMENT","\/* @noEscape *\/",91],["T_WHITESPACE"," ",91],["T_ECHO","echo",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$jsonHelper",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","jsonEncode",91],"(",["T_VARIABLE","$storedAllowedMethods",91],")",["T_WHITESPACE"," ",91],["T_CLOSE_TAG","?>",91],["T_INLINE_HTML",";\n            this.originShipmentObj = ",91],["T_OPEN_TAG","<?php ",92],["T_COMMENT","\/* @noEscape *\/",92],["T_WHITESPACE"," ",92],["T_ECHO","echo",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$jsonHelper",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","jsonEncode",92],"(",["T_VARIABLE","$orShipArr",92],")",["T_WHITESPACE"," ",92],["T_CLOSE_TAG","?>",92],["T_INLINE_HTML",";\n            this.originShipmentObj['default'] = ",92],["T_OPEN_TAG","<?php ",93],["T_COMMENT","\/* @noEscape *\/",93],["T_WHITESPACE"," ",93],["T_ECHO","echo",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$jsonHelper",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","jsonEncode",93],"(",["T_VARIABLE","$defShipArr",93],")",["T_WHITESPACE"," ",93],["T_CLOSE_TAG","?>",93],["T_INLINE_HTML",";\n\n            this.setFormValues();\n            Event.observe($(this.carriersUpsTypeId), 'change', this.setFormValues.bind(this));\n        },\n        updateAllowedMethods: function(originShipmentTitle)\n        {\n            var allowedMethods = $(this.allowedMethodsId), \/\/ multiselect\n                freeMethod = $(this.freeShipmentId), \/\/ single-choice select\n                originShipment = this.originShipmentObj[originShipmentTitle];\n\n            while (allowedMethods.length > 0) {\n                allowedMethods.remove(0);\n            }\n\n            while (freeMethod.length > 0) {\n                freeMethod.remove(0);\n            }\n            freeMethod.insert(new Element('option', {value:''}).update('",93],["T_OPEN_TAG","<?php ",111],["T_ECHO","echo",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$block",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","escapeHtml",111],"(",["T_STRING","__",111],"(",["T_CONSTANT_ENCAPSED_STRING","'None'",111],")",")",";",["T_WHITESPACE"," ",111],["T_CLOSE_TAG","?>",111],["T_INLINE_HTML","'));\n\n            var code, option;\n            for (code in originShipment) {\n                option = new Element('option', {value:code}).update(originShipment[code]);\n                if ((originShipmentTitle == this.storedOriginShipment || originShipmentTitle == 'default')\n                    && this.storedFreeShipment == code\n                ) {\n                    option.selected = true;\n                }\n                freeMethod.insert(option);\n\n                option = new Element('option', {value:code}).update(originShipment[code]);\n                if (this.storedUpsType == 'UPS') {\n                    if (originShipmentTitle != 'default' || inArray(this.storedAllowedMethods, code)) {\n                        option.selected = true;\n                    }\n                } else if (originShipmentTitle != this.storedOriginShipment\n                    || inArray(this.storedAllowedMethods, code)\n                ) {\n                    option.selected = true;\n                }\n\n                if ((originShipmentTitle == 'default' || originShipmentTitle == this.storedOriginShipment)\n                    && inArray(this.storedAllowedMethods, code)\n                ) {\n                    option.selected = true;\n                }\n\n                allowedMethods.insert(option);\n            }\n        },\n        setFormValues: function()\n        {\n            var a;\n            if ($F(this.carriersUpsTypeId) == 'UPS') {\n                for (a = 0; a < this.checkingUpsXmlId.length; a++) {\n                    $(this.checkingUpsXmlId[a]).removeClassName('required-entry');\n                }\n                for (a = 0; a < this.checkingUpsId.length; a++) {\n                    $(this.checkingUpsXmlId[a]).addClassName('required-entry');\n                }\n                Event.stopObserving($('carriers_ups_origin_shipment'), 'change', this.changeOriginShipment.bind(this));\n                showRowArrayElements(this.onlyUpsElements);\n                hideRowArrayElements(this.onlyUpsXmlElements);\n                this.changeOriginShipment(null, 'default');\n            } else {\n                for (a = 0; a < this.checkingUpsXmlId.length; a++) {\n                    $(this.checkingUpsXmlId[a]).addClassName('required-entry');\n                }\n                for (a = 0; a < this.checkingUpsId.length; a++) {\n                    $(this.checkingUpsXmlId[a]).removeClassName('required-entry');\n                }\n                Event.observe($('carriers_ups_origin_shipment'), 'change', this.changeOriginShipment.bind(this));\n                showRowArrayElements(this.onlyUpsXmlElements);\n                hideRowArrayElements(this.onlyUpsElements);\n                this.changeOriginShipment(null, null);\n            }\n        },\n        changeOriginShipment: function(Event, key)\n        {\n            this.originShipmentTitle = key ? key : $F('carriers_ups_origin_shipment');\n            this.updateAllowedMethods(this.originShipmentTitle);\n        }\n    };\n    xml = new upsXml();\n    \/\/]]>\n\n});\n<\/script>\n",111]]
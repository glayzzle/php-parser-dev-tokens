[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CatalogInventory",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ResourceModel",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogInventory",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","StockConfigurationInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Store",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","StoreManagerInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Stock resource model\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Stock",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ResourceModel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Db",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AbstractDb",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","QtyCounterInterface",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * @var StockConfigurationInterface\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$stockConfiguration",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * Is initialized configuration flag\n     *\n     * @var bool\n     *\/",22],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$_isConfig",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * Manage Stock flag\n     *\n     * @var bool\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_isConfigManageStock",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Backorders\n     *\n     * @var bool\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_isConfigBackorders",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Minimum quantity allowed in shopping card\n     *\n     * @var int\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_configMinQty",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Product types that could have quantities\n     *\n     * @var array\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_configTypeIds",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Notify for quantity below _configNotifyStockQty value\n     *\n     * @var int\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_configNotifyStockQty",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Core store config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_scopeConfig",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\\DateTime\n     *\/",71],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$dateTime",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * @var StoreManagerInterface\n     * @deprecated\n     *\/",76],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$storeManager",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Framework\\Stdlib\\DateTime\\DateTime $dateTime\n     * @param StockConfigurationInterface $stockConfiguration\n     * @param StoreManagerInterface $storeManager\n     * @param string $connectionName\n     *\/",82],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","__construct",90],"(",["T_WHITESPACE","\n        ",90],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Framework",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Model",91],["T_NS_SEPARATOR","\\",91],["T_STRING","ResourceModel",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Db",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Context",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$context",91],",",["T_WHITESPACE","\n        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Framework",92],["T_NS_SEPARATOR","\\",92],["T_STRING","App",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Config",92],["T_NS_SEPARATOR","\\",92],["T_STRING","ScopeConfigInterface",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$scopeConfig",92],",",["T_WHITESPACE","\n        ",92],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Framework",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Stdlib",93],["T_NS_SEPARATOR","\\",93],["T_STRING","DateTime",93],["T_NS_SEPARATOR","\\",93],["T_STRING","DateTime",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$dateTime",93],",",["T_WHITESPACE","\n        ",93],["T_STRING","StockConfigurationInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$stockConfiguration",94],",",["T_WHITESPACE","\n        ",94],["T_STRING","StoreManagerInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$storeManager",95],",",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$connectionName",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","null",96],["T_WHITESPACE","\n    ",96],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_STRING","parent",98],["T_DOUBLE_COLON","::",98],["T_STRING","__construct",98],"(",["T_VARIABLE","$context",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$connectionName",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_scopeConfig",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$scopeConfig",99],";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","dateTime",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$dateTime",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","stockConfiguration",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$stockConfiguration",101],";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","storeManager",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$storeManager",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Define main table and initialize connection\n     *\n     * @return void\n     *\/",105],["T_WHITESPACE","\n    ",109],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","_construct",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_init",112],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock'",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'stock_id'",112],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Lock Stock Item records\n     *\n     * @param int[] $productIds\n     * @param int $websiteId\n     * @return array\n     *\/",115],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","lockProductsStock",122],"(",["T_VARIABLE","$productIds",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$websiteId",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_EMPTY","empty",124],"(",["T_VARIABLE","$productIds",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],"[","]",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$itemTable",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getTable",127],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_item'",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$productTable",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getTable",128],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",128],")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$select",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getConnection",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","select",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","from",129],"(","[",["T_CONSTANT_ENCAPSED_STRING","'si'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$itemTable",129],"]",")",["T_WHITESPACE","\n            ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","join",130],"(","[",["T_CONSTANT_ENCAPSED_STRING","'p'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$productTable",130],"]",",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'p.entity_id=si.product_id'",130],",",["T_WHITESPACE"," ",130],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",130],"]",")",["T_WHITESPACE","\n            ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","where",131],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id=?'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$websiteId",131],")",["T_WHITESPACE","\n            ",131],["T_OBJECT_OPERATOR","->",132],["T_STRING","where",132],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id IN(?)'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$productIds",132],")",["T_WHITESPACE","\n            ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","forUpdate",133],"(",["T_STRING","true",133],")",";",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getConnection",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","fetchAll",134],"(",["T_VARIABLE","$select",134],")",";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",137],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","correctItemsQty",140],"(",["T_ARRAY","array",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$items",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$websiteId",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$operator",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_EMPTY","empty",142],"(",["T_VARIABLE","$items",142],")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$connection",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getConnection",146],"(",")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$conditions",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],"[","]",";",["T_WHITESPACE","\n        ",147],["T_FOREACH","foreach",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$items",148],["T_WHITESPACE"," ",148],["T_AS","as",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$productId",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$qty",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$case",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$connection",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","quoteInto",149],"(",["T_CONSTANT_ENCAPSED_STRING","'?'",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$productId",149],")",";",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$result",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$connection",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","quoteInto",150],"(","\"",["T_ENCAPSED_AND_WHITESPACE","qty",150],["T_CURLY_OPEN","{",150],["T_VARIABLE","$operator",150],"}",["T_ENCAPSED_AND_WHITESPACE","?",150],"\"",",",["T_WHITESPACE"," ",150],["T_VARIABLE","$qty",150],")",";",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$conditions",151],"[",["T_VARIABLE","$case",151],"]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$result",151],";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n\n        ",152],["T_VARIABLE","$value",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$connection",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getCaseSql",154],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$conditions",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'qty'",154],")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$where",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id IN (?)'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_STRING","array_keys",155],"(",["T_VARIABLE","$items",155],")",",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'website_id = ?'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$websiteId",155],"]",";",["T_WHITESPACE","\n\n        ",155],["T_VARIABLE","$connection",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","beginTransaction",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$connection",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","update",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getTable",158],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_item'",158],")",",",["T_WHITESPACE"," ",158],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$value",158],"]",",",["T_WHITESPACE"," ",158],["T_VARIABLE","$where",158],")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$connection",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","commit",159],"(",")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Load some inventory configuration settings\n     *\n     * @return void\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","_initConfig",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(","!",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_isConfig",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$configMap",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],"[",["T_WHITESPACE","\n                ",170],["T_CONSTANT_ENCAPSED_STRING","'_isConfigManageStock'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_NS_SEPARATOR","\\",171],["T_STRING","Magento",171],["T_NS_SEPARATOR","\\",171],["T_STRING","CatalogInventory",171],["T_NS_SEPARATOR","\\",171],["T_STRING","Model",171],["T_NS_SEPARATOR","\\",171],["T_STRING","Configuration",171],["T_DOUBLE_COLON","::",171],["T_STRING","XML_PATH_MANAGE_STOCK",171],",",["T_WHITESPACE","\n                ",171],["T_CONSTANT_ENCAPSED_STRING","'_isConfigBackorders'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Magento",172],["T_NS_SEPARATOR","\\",172],["T_STRING","CatalogInventory",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Model",172],["T_NS_SEPARATOR","\\",172],["T_STRING","Configuration",172],["T_DOUBLE_COLON","::",172],["T_STRING","XML_PATH_BACKORDERS",172],",",["T_WHITESPACE","\n                ",172],["T_CONSTANT_ENCAPSED_STRING","'_configMinQty'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Magento",173],["T_NS_SEPARATOR","\\",173],["T_STRING","CatalogInventory",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Model",173],["T_NS_SEPARATOR","\\",173],["T_STRING","Configuration",173],["T_DOUBLE_COLON","::",173],["T_STRING","XML_PATH_MIN_QTY",173],",",["T_WHITESPACE","\n                ",173],["T_CONSTANT_ENCAPSED_STRING","'_configNotifyStockQty'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Magento",174],["T_NS_SEPARATOR","\\",174],["T_STRING","CatalogInventory",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Model",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Configuration",174],["T_DOUBLE_COLON","::",174],["T_STRING","XML_PATH_NOTIFY_STOCK_QTY",174],",",["T_WHITESPACE","\n            ",174],"]",";",["T_WHITESPACE","\n\n            ",175],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$configMap",177],["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$field",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$const",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],"{",["T_VARIABLE","$field",178],"}",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_INT_CAST","(int)",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_scopeConfig",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getValue",178],"(",["T_WHITESPACE","\n                    ",178],["T_VARIABLE","$const",179],",",["T_WHITESPACE","\n                    ",179],["T_NS_SEPARATOR","\\",180],["T_STRING","Magento",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Store",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Model",180],["T_NS_SEPARATOR","\\",180],["T_STRING","ScopeInterface",180],["T_DOUBLE_COLON","::",180],["T_STRING","SCOPE_STORE",180],["T_WHITESPACE","\n                ",180],")",";",["T_WHITESPACE","\n            ",181],"}",["T_WHITESPACE","\n\n            ",182],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_isConfig",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","true",184],";",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_configTypeIds",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","array_keys",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","stockConfiguration",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getIsQtyTypeIds",185],"(",["T_STRING","true",185],")",")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Set items out of stock basing on their quantities and config settings\n     *\n     * @param string|int $website\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     * @return void\n     *\/",189],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","updateSetOutOfStock",196],"(",["T_VARIABLE","$website",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","null",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$websiteId",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","stockConfiguration",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getDefaultScopeId",198],"(",")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_initConfig",199],"(",")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$connection",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getConnection",200],"(",")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$values",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],"[",["T_CONSTANT_ENCAPSED_STRING","'is_in_stock'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_LNUMBER","0",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'stock_status_changed_auto'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_LNUMBER","1",201],"]",";",["T_WHITESPACE","\n\n        ",201],["T_VARIABLE","$select",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$connection",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","select",203],"(",")",["T_OBJECT_OPERATOR","->",203],["T_STRING","from",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getTable",203],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",203],")",",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",203],")",["T_WHITESPACE","\n            ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","where",204],"(",["T_CONSTANT_ENCAPSED_STRING","'type_id IN(?)'",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_configTypeIds",204],")",";",["T_WHITESPACE","\n\n        ",204],["T_VARIABLE","$where",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","sprintf",206],"(",["T_WHITESPACE","\n            ",206],["T_CONSTANT_ENCAPSED_STRING","'website_id = %1$d'",207],["T_WHITESPACE"," ",207],".",["T_WHITESPACE","\n            ",207],["T_CONSTANT_ENCAPSED_STRING","' AND is_in_stock = 1'",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE","\n            ",208],["T_CONSTANT_ENCAPSED_STRING","' AND ((use_config_manage_stock = 1 AND 1 = %2$d) OR (use_config_manage_stock = 0 AND manage_stock = 1))'",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE","\n            ",209],["T_CONSTANT_ENCAPSED_STRING","' AND ((use_config_backorders = 1 AND %3$d = %4$d) OR (use_config_backorders = 0 AND backorders = %3$d))'",210],["T_WHITESPACE"," ",210],".",["T_WHITESPACE","\n            ",210],["T_CONSTANT_ENCAPSED_STRING","' AND ((use_config_min_qty = 1 AND qty <= %5$d) OR (use_config_min_qty = 0 AND qty <= min_qty))'",211],["T_WHITESPACE"," ",211],".",["T_WHITESPACE","\n            ",211],["T_CONSTANT_ENCAPSED_STRING","' AND product_id IN (%6$s)'",212],",",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$websiteId",213],",",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_isConfigManageStock",214],",",["T_WHITESPACE","\n            ",214],["T_NS_SEPARATOR","\\",215],["T_STRING","Magento",215],["T_NS_SEPARATOR","\\",215],["T_STRING","CatalogInventory",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Model",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Stock",215],["T_DOUBLE_COLON","::",215],["T_STRING","BACKORDERS_NO",215],",",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_isConfigBackorders",216],",",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_configMinQty",217],",",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$select",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assemble",218],"(",")",["T_WHITESPACE","\n        ",218],")",";",["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$connection",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","update",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getTable",221],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_item'",221],")",",",["T_WHITESPACE"," ",221],["T_VARIABLE","$values",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$where",221],")",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Set items in stock basing on their quantities and config settings\n     *\n     * @param int|string $website\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     * @return void\n     *\/",224],["T_WHITESPACE","\n    ",230],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","updateSetInStock",231],"(",["T_VARIABLE","$website",231],")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$websiteId",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","stockConfiguration",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getDefaultScopeId",233],"(",")",";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_initConfig",234],"(",")",";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$connection",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getConnection",235],"(",")",";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$values",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],"[",["T_CONSTANT_ENCAPSED_STRING","'is_in_stock'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_LNUMBER","1",236],"]",";",["T_WHITESPACE","\n\n        ",236],["T_VARIABLE","$select",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$connection",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","select",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","from",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getTable",238],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",238],")",",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",238],")",["T_WHITESPACE","\n            ",238],["T_OBJECT_OPERATOR","->",239],["T_STRING","where",239],"(",["T_CONSTANT_ENCAPSED_STRING","'type_id IN(?)'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_configTypeIds",239],")",";",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$where",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","sprintf",241],"(",["T_WHITESPACE","\n            ",241],["T_CONSTANT_ENCAPSED_STRING","'website_id = %1$d'",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE","\n            ",242],["T_CONSTANT_ENCAPSED_STRING","' AND is_in_stock = 0'",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE","\n            ",243],["T_CONSTANT_ENCAPSED_STRING","' AND stock_status_changed_auto = 1'",244],["T_WHITESPACE"," ",244],".",["T_WHITESPACE","\n            ",244],["T_CONSTANT_ENCAPSED_STRING","' AND ((use_config_manage_stock = 1 AND 1 = %2$d) OR (use_config_manage_stock = 0 AND manage_stock = 1))'",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE","\n            ",245],["T_CONSTANT_ENCAPSED_STRING","' AND ((use_config_min_qty = 1 AND qty > %3$d) OR (use_config_min_qty = 0 AND qty > min_qty))'",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE","\n            ",246],["T_CONSTANT_ENCAPSED_STRING","' AND product_id IN (%4$s)'",247],",",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$websiteId",248],",",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_isConfigManageStock",249],",",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_configMinQty",250],",",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$select",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","assemble",251],"(",")",["T_WHITESPACE","\n        ",251],")",";",["T_WHITESPACE","\n\n        ",252],["T_VARIABLE","$connection",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","update",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getTable",254],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_item'",254],")",",",["T_WHITESPACE"," ",254],["T_VARIABLE","$values",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$where",254],")",";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Update items low stock date basing on their quantities and config settings\n     *\n     * @param int|string $website\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     * @return void\n     *\/",257],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","updateLowStockDate",264],"(",["T_VARIABLE","$website",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$websiteId",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","stockConfiguration",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getDefaultScopeId",266],"(",")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_initConfig",267],"(",")",";",["T_WHITESPACE","\n\n        ",267],["T_VARIABLE","$connection",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getConnection",269],"(",")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$condition",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$connection",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","quoteInto",270],"(",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","'(use_config_notify_stock_qty = 1 AND qty < ?)'",271],",",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_configNotifyStockQty",272],["T_WHITESPACE","\n        ",272],")",["T_WHITESPACE"," ",273],".",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","' OR (use_config_notify_stock_qty = 0 AND qty < notify_stock_qty)'",273],";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$currentDbTime",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$connection",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","quoteInto",274],"(",["T_CONSTANT_ENCAPSED_STRING","'?'",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","dateTime",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","gmtDate",274],"(",")",")",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$conditionalDate",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$connection",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getCheckSql",275],"(",["T_VARIABLE","$condition",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$currentDbTime",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'NULL'",275],")",";",["T_WHITESPACE","\n\n        ",275],["T_VARIABLE","$value",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],"[",["T_CONSTANT_ENCAPSED_STRING","'low_stock_date'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_NEW","new",277],["T_WHITESPACE"," ",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Zend_Db_Expr",277],"(",["T_VARIABLE","$conditionalDate",277],")","]",";",["T_WHITESPACE","\n\n        ",277],["T_VARIABLE","$select",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$connection",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","select",279],"(",")",["T_OBJECT_OPERATOR","->",279],["T_STRING","from",279],"(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getTable",279],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",279],")",",",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",279],")",["T_WHITESPACE","\n            ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","where",280],"(",["T_CONSTANT_ENCAPSED_STRING","'type_id IN(?)'",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_configTypeIds",280],")",";",["T_WHITESPACE","\n\n        ",280],["T_VARIABLE","$where",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","sprintf",282],"(",["T_WHITESPACE","\n            ",282],["T_CONSTANT_ENCAPSED_STRING","'website_id = %1$d'",283],["T_WHITESPACE"," ",283],".",["T_WHITESPACE","\n            ",283],["T_CONSTANT_ENCAPSED_STRING","' AND ((use_config_manage_stock = 1 AND 1 = %2$d) OR (use_config_manage_stock = 0 AND manage_stock = 1))'",284],["T_WHITESPACE"," ",284],".",["T_WHITESPACE","\n            ",284],["T_CONSTANT_ENCAPSED_STRING","' AND product_id IN (%3$s)'",285],",",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$websiteId",286],",",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_isConfigManageStock",287],",",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$select",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","assemble",288],"(",")",["T_WHITESPACE","\n        ",288],")",";",["T_WHITESPACE","\n\n        ",289],["T_VARIABLE","$connection",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","update",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getTable",291],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_item'",291],")",",",["T_WHITESPACE"," ",291],["T_VARIABLE","$value",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$where",291],")",";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Add low stock filter to product collection\n     *\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection $collection\n     * @param array $fields\n     * @return $this\n     *\/",294],["T_WHITESPACE","\n    ",300],["T_PUBLIC","public",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","addLowStockFilter",301],"(",["T_NS_SEPARATOR","\\",301],["T_STRING","Magento",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Catalog",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Model",301],["T_NS_SEPARATOR","\\",301],["T_STRING","ResourceModel",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Product",301],["T_NS_SEPARATOR","\\",301],["T_STRING","Collection",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$collection",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$fields",301],")",["T_WHITESPACE","\n    ",301],"{",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_initConfig",303],"(",")",";",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$connection",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$collection",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getSelect",304],"(",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getConnection",304],"(",")",";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$qtyIf",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$connection",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getCheckSql",305],"(",["T_WHITESPACE","\n            ",305],["T_CONSTANT_ENCAPSED_STRING","'invtr.use_config_notify_stock_qty > 0'",306],",",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_configNotifyStockQty",307],",",["T_WHITESPACE","\n            ",307],["T_CONSTANT_ENCAPSED_STRING","'invtr.notify_stock_qty'",308],["T_WHITESPACE","\n        ",308],")",";",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$conditions",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],"[",["T_WHITESPACE","\n            ",310],"[",["T_WHITESPACE","\n                ",311],["T_VARIABLE","$connection",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","prepareSqlCondition",312],"(",["T_CONSTANT_ENCAPSED_STRING","'invtr.use_config_manage_stock'",312],",",["T_WHITESPACE"," ",312],["T_LNUMBER","1",312],")",",",["T_WHITESPACE","\n                ",312],["T_VARIABLE","$connection",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","prepareSqlCondition",313],"(",["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_isConfigManageStock",313],",",["T_WHITESPACE"," ",313],["T_LNUMBER","1",313],")",",",["T_WHITESPACE","\n                ",313],["T_VARIABLE","$connection",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","prepareSqlCondition",314],"(",["T_CONSTANT_ENCAPSED_STRING","'invtr.qty'",314],",",["T_WHITESPACE"," ",314],"[",["T_CONSTANT_ENCAPSED_STRING","'lt'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$qtyIf",314],"]",")",",",["T_WHITESPACE","\n            ",314],"]",",",["T_WHITESPACE","\n            ",315],"[",["T_WHITESPACE","\n                ",316],["T_VARIABLE","$connection",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","prepareSqlCondition",317],"(",["T_CONSTANT_ENCAPSED_STRING","'invtr.use_config_manage_stock'",317],",",["T_WHITESPACE"," ",317],["T_LNUMBER","0",317],")",",",["T_WHITESPACE","\n                ",317],["T_VARIABLE","$connection",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","prepareSqlCondition",318],"(",["T_CONSTANT_ENCAPSED_STRING","'invtr.manage_stock'",318],",",["T_WHITESPACE"," ",318],["T_LNUMBER","1",318],")",["T_WHITESPACE","\n            ",318],"]",",",["T_WHITESPACE","\n        ",319],"]",";",["T_WHITESPACE","\n\n        ",320],["T_VARIABLE","$where",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],"[","]",";",["T_WHITESPACE","\n        ",322],["T_FOREACH","foreach",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$conditions",323],["T_WHITESPACE"," ",323],["T_AS","as",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$k",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$part",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_VARIABLE","$where",324],"[",["T_VARIABLE","$k",324],"]",["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","join",324],"(",["T_CONSTANT_ENCAPSED_STRING","' '",324],["T_WHITESPACE"," ",324],".",["T_WHITESPACE"," ",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Magento",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Framework",324],["T_NS_SEPARATOR","\\",324],["T_STRING","DB",324],["T_NS_SEPARATOR","\\",324],["T_STRING","Select",324],["T_DOUBLE_COLON","::",324],["T_STRING","SQL_AND",324],["T_WHITESPACE"," ",324],".",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","' '",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$part",324],")",";",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n\n        ",325],["T_VARIABLE","$where",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$connection",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","prepareSqlCondition",327],"(",["T_WHITESPACE","\n            ",327],["T_CONSTANT_ENCAPSED_STRING","'invtr.low_stock_date'",328],",",["T_WHITESPACE","\n            ",328],"[",["T_CONSTANT_ENCAPSED_STRING","'notnull'",329],["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_STRING","true",329],"]",["T_WHITESPACE","\n        ",329],")",["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","' '",330],["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Magento",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Framework",330],["T_NS_SEPARATOR","\\",330],["T_STRING","DB",330],["T_NS_SEPARATOR","\\",330],["T_STRING","Select",330],["T_DOUBLE_COLON","::",330],["T_STRING","SQL_AND",330],["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","' (('",330],["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_STRING","join",330],"(",["T_WHITESPACE","\n            ",330],["T_CONSTANT_ENCAPSED_STRING","') '",331],["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_NS_SEPARATOR","\\",331],["T_STRING","Magento",331],["T_NS_SEPARATOR","\\",331],["T_STRING","Framework",331],["T_NS_SEPARATOR","\\",331],["T_STRING","DB",331],["T_NS_SEPARATOR","\\",331],["T_STRING","Select",331],["T_DOUBLE_COLON","::",331],["T_STRING","SQL_OR",331],["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","' ('",331],",",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$where",332],["T_WHITESPACE","\n        ",332],")",["T_WHITESPACE"," ",333],".",["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'))'",333],";",["T_WHITESPACE","\n\n        ",333],["T_VARIABLE","$collection",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","joinTable",335],"(",["T_WHITESPACE","\n            ",335],"[",["T_CONSTANT_ENCAPSED_STRING","'invtr'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_item'",336],"]",",",["T_WHITESPACE","\n            ",336],["T_CONSTANT_ENCAPSED_STRING","'product_id = entity_id'",337],",",["T_WHITESPACE","\n            ",337],["T_VARIABLE","$fields",338],",",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$where",339],["T_WHITESPACE","\n        ",339],")",";",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n",342],"}",["T_WHITESPACE","\n",343]]
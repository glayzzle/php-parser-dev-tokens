[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Product inventory data validator\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CatalogInventory",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Quote",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Item",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","CatalogInventory",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","StockRegistryInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","CatalogInventory",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","StockStateInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","LocalizedException",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CatalogInventory",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Api",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Data",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StockItemInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CatalogInventory",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Helper",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Data",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","CatalogInventory",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Quote",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Item",15],["T_NS_SEPARATOR","\\",15],["T_STRING","QuantityValidator",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Initializer",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Option",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","CatalogInventory",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Model",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Quote",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Item",16],["T_NS_SEPARATOR","\\",16],["T_STRING","QuantityValidator",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Initializer",16],["T_NS_SEPARATOR","\\",16],["T_STRING","StockItem",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Event",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Observer",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Class QuantityValidator\n *\/",19],["T_WHITESPACE","\n",21],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","QuantityValidator",22],["T_WHITESPACE","\n",22],"{",["T_WHITESPACE","\n    ",23],["T_DOC_COMMENT","\/**\n     * @var QuantityValidator\\Initializer\\Option\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$optionInitializer",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var QuantityValidator\\Initializer\\StockItem\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$stockItemInitializer",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogInventory\\Api\\StockRegistryInterface\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$stockRegistry",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogInventory\\Api\\StockStateInterface\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$stockState",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @param Option $optionInitializer\n     * @param StockItem $stockItemInitializer\n     * @param StockRegistryInterface $stockRegistry\n     * @param StockStateInterface $stockState\n     * @return void\n     *\/",44],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_WHITESPACE","\n        ",51],["T_STRING","Option",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$optionInitializer",52],",",["T_WHITESPACE","\n        ",52],["T_STRING","StockItem",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$stockItemInitializer",53],",",["T_WHITESPACE","\n        ",53],["T_STRING","StockRegistryInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$stockRegistry",54],",",["T_WHITESPACE","\n        ",54],["T_STRING","StockStateInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$stockState",55],["T_WHITESPACE","\n    ",55],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","optionInitializer",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$optionInitializer",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","stockItemInitializer",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$stockItemInitializer",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","stockRegistry",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$stockRegistry",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","stockState",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$stockState",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Add error information to Quote Item\n     *\n     * @param \\Magento\\Framework\\DataObject $result\n     * @param \\Magento\\Quote\\Model\\Quote\\Item $quoteItem\n     * @param bool $removeError\n     * @return void\n     *\/",63],["T_WHITESPACE","\n    ",70],["T_PRIVATE","private",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","addErrorInfoToQuote",71],"(",["T_VARIABLE","$result",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$quoteItem",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$quoteItem",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","addErrorInfo",73],"(",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",74],",",["T_WHITESPACE","\n                ",74],["T_STRING","Data",75],["T_DOUBLE_COLON","::",75],["T_STRING","ERROR_QTY",75],",",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$result",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getMessage",76],"(",")",["T_WHITESPACE","\n            ",76],")",";",["T_WHITESPACE","\n\n            ",77],["T_VARIABLE","$quoteItem",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getQuote",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","addErrorInfo",79],"(",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$result",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getQuoteMessageIndex",80],"(",")",",",["T_WHITESPACE","\n                ",80],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",81],",",["T_WHITESPACE","\n                ",81],["T_STRING","Data",82],["T_DOUBLE_COLON","::",82],["T_STRING","ERROR_QTY",82],",",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$result",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getQuoteMessage",83],"(",")",["T_WHITESPACE","\n            ",83],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Check product inventory data when quote item quantity declaring\n     *\n     * @param \\Magento\\Framework\\Event\\Observer $observer\n     *\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",87],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","validate",98],"(",["T_STRING","Observer",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$observer",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_COMMENT","\/* @var $quoteItem \\Magento\\Quote\\Model\\Quote\\Item *\/",100],["T_WHITESPACE","\n        ",100],["T_VARIABLE","$quoteItem",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$observer",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getEvent",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","getItem",101],"(",")",";",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_VARIABLE","$quoteItem",103],["T_WHITESPACE"," ",103],["T_BOOLEAN_OR","||",103],["T_WHITESPACE","\n            ",103],"!",["T_VARIABLE","$quoteItem",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getProductId",104],"(",")",["T_WHITESPACE"," ",104],["T_BOOLEAN_OR","||",104],["T_WHITESPACE","\n            ",104],"!",["T_VARIABLE","$quoteItem",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getQuote",105],"(",")",["T_WHITESPACE"," ",105],["T_BOOLEAN_OR","||",105],["T_WHITESPACE","\n            ",105],["T_VARIABLE","$quoteItem",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getQuote",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","getIsSuperMode",106],"(",")",["T_WHITESPACE","\n        ",106],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_RETURN","return",108],";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$qty",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$quoteItem",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getQty",111],"(",")",";",["T_WHITESPACE","\n\n        ",111],["T_DOC_COMMENT","\/** @var \\Magento\\CatalogInventory\\Model\\Stock\\Item $stockItem *\/",113],["T_WHITESPACE","\n        ",113],["T_VARIABLE","$stockItem",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","stockRegistry",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getStockItem",114],"(",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$quoteItem",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getProduct",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getId",115],"(",")",",",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$quoteItem",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getProduct",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getStore",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getWebsiteId",116],"(",")",["T_WHITESPACE","\n        ",116],")",";",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(","!",["T_VARIABLE","$stockItem",118],["T_WHITESPACE"," ",118],["T_INSTANCEOF","instanceof",118],["T_WHITESPACE"," ",118],["T_STRING","StockItemInterface",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_THROW","throw",119],["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_STRING","LocalizedException",119],"(",["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'The stock item for Product is not valid.'",119],")",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_VARIABLE","$parentStockItem",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","false",122],";",["T_WHITESPACE","\n\n        ",122],["T_DOC_COMMENT","\/**\n         * Check if product in stock. For composite products check base (parent) item stock status\n         *\/",124],["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$quoteItem",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getParentItem",127],"(",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$product",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$quoteItem",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getParentItem",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getProduct",128],"(",")",";",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$parentStockItem",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","stockRegistry",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getStockItem",129],"(",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$product",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getId",130],"(",")",",",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$product",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getStore",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getWebsiteId",131],"(",")",["T_WHITESPACE","\n            ",131],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n\n        ",133],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$stockItem",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_VARIABLE","$stockItem",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getIsInStock",136],"(",")",["T_WHITESPACE"," ",136],["T_BOOLEAN_OR","||",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$parentStockItem",136],["T_WHITESPACE"," ",136],["T_BOOLEAN_AND","&&",136],["T_WHITESPACE"," ",136],"!",["T_VARIABLE","$parentStockItem",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getIsInStock",136],"(",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                ",136],["T_VARIABLE","$quoteItem",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","addErrorInfo",137],"(",["T_WHITESPACE","\n                    ",137],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",138],",",["T_WHITESPACE","\n                    ",138],["T_STRING","Data",139],["T_DOUBLE_COLON","::",139],["T_STRING","ERROR_QTY",139],",",["T_WHITESPACE","\n                    ",139],["T_STRING","__",140],"(",["T_CONSTANT_ENCAPSED_STRING","'This product is out of stock.'",140],")",["T_WHITESPACE","\n                ",140],")",";",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$quoteItem",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getQuote",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","addErrorInfo",142],"(",["T_WHITESPACE","\n                    ",142],["T_CONSTANT_ENCAPSED_STRING","'stock'",143],",",["T_WHITESPACE","\n                    ",143],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",144],",",["T_WHITESPACE","\n                    ",144],["T_STRING","Data",145],["T_DOUBLE_COLON","::",145],["T_STRING","ERROR_QTY",145],",",["T_WHITESPACE","\n                    ",145],["T_STRING","__",146],"(",["T_CONSTANT_ENCAPSED_STRING","'Some of the products are out of stock.'",146],")",["T_WHITESPACE","\n                ",146],")",";",["T_WHITESPACE","\n                ",147],["T_RETURN","return",148],";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE"," ",149],["T_ELSE","else",149],["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_COMMENT","\/\/ Delete error from item and its quote, if it was set due to item out of stock\n",150],["T_WHITESPACE","                ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_removeErrorsFromQuoteAndItem",151],"(",["T_VARIABLE","$quoteItem",151],",",["T_WHITESPACE"," ",151],["T_STRING","Data",151],["T_DOUBLE_COLON","::",151],["T_STRING","ERROR_QTY",151],")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n\n        ",153],["T_DOC_COMMENT","\/**\n         * Check item for options\n         *\/",155],["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","(",["T_VARIABLE","$options",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$quoteItem",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getQtyOptions",158],"(",")",")",["T_WHITESPACE"," ",158],["T_BOOLEAN_AND","&&",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$qty",158],["T_WHITESPACE"," ",158],">",["T_WHITESPACE"," ",158],["T_LNUMBER","0",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$qty",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$quoteItem",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getProduct",159],"(",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","getTypeInstance",159],"(",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","prepareQuoteItemQty",159],"(",["T_VARIABLE","$qty",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$quoteItem",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getProduct",159],"(",")",")",";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$quoteItem",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","setData",160],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$qty",160],")",";",["T_WHITESPACE","\n            ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$stockItem",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n                ",161],["T_VARIABLE","$result",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","stockState",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","checkQtyIncrements",162],"(",["T_WHITESPACE","\n                    ",162],["T_VARIABLE","$quoteItem",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getProduct",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","getId",163],"(",")",",",["T_WHITESPACE","\n                    ",163],["T_VARIABLE","$qty",164],",",["T_WHITESPACE","\n                    ",164],["T_VARIABLE","$quoteItem",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getProduct",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getStore",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getWebsiteId",165],"(",")",["T_WHITESPACE","\n                ",165],")",";",["T_WHITESPACE","\n                ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$result",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getHasError",167],"(",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                    ",167],["T_VARIABLE","$quoteItem",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","addErrorInfo",168],"(",["T_WHITESPACE","\n                        ",168],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",169],",",["T_WHITESPACE","\n                        ",169],["T_STRING","Data",170],["T_DOUBLE_COLON","::",170],["T_STRING","ERROR_QTY_INCREMENTS",170],",",["T_WHITESPACE","\n                        ",170],["T_VARIABLE","$result",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getMessage",171],"(",")",["T_WHITESPACE","\n                    ",171],")",";",["T_WHITESPACE","\n\n                    ",172],["T_VARIABLE","$quoteItem",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getQuote",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","addErrorInfo",174],"(",["T_WHITESPACE","\n                        ",174],["T_VARIABLE","$result",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getQuoteMessageIndex",175],"(",")",",",["T_WHITESPACE","\n                        ",175],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",176],",",["T_WHITESPACE","\n                        ",176],["T_STRING","Data",177],["T_DOUBLE_COLON","::",177],["T_STRING","ERROR_QTY_INCREMENTS",177],",",["T_WHITESPACE","\n                        ",177],["T_VARIABLE","$result",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getQuoteMessage",178],"(",")",["T_WHITESPACE","\n                    ",178],")",";",["T_WHITESPACE","\n                ",179],"}",["T_WHITESPACE"," ",180],["T_ELSE","else",180],["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                    ",180],["T_COMMENT","\/\/ Delete error from item and its quote, if it was set due to qty problems\n",181],["T_WHITESPACE","                    ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_removeErrorsFromQuoteAndItem",182],"(",["T_WHITESPACE","\n                        ",182],["T_VARIABLE","$quoteItem",183],",",["T_WHITESPACE","\n                        ",183],["T_STRING","Data",184],["T_DOUBLE_COLON","::",184],["T_STRING","ERROR_QTY_INCREMENTS",184],["T_WHITESPACE","\n                    ",184],")",";",["T_WHITESPACE","\n                ",185],"}",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE","\n            ",187],["T_COMMENT","\/\/ variable to keep track if we have previously encountered an error in one of the options\n",188],["T_WHITESPACE","            ",189],["T_VARIABLE","$removeError",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","true",189],";",["T_WHITESPACE","\n\n            ",189],["T_FOREACH","foreach",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$options",191],["T_WHITESPACE"," ",191],["T_AS","as",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$option",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$result",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","optionInitializer",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","initialize",192],"(",["T_VARIABLE","$option",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$quoteItem",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$qty",192],")",";",["T_WHITESPACE","\n                ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$result",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getHasError",193],"(",")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                    ",193],["T_VARIABLE","$option",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","setHasError",194],"(",["T_STRING","true",194],")",";",["T_WHITESPACE","\n                    ",194],["T_COMMENT","\/\/Setting this to false, so no error statuses are cleared\n",195],["T_WHITESPACE","                    ",196],["T_VARIABLE","$removeError",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","false",196],";",["T_WHITESPACE","\n                    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","addErrorInfoToQuote",197],"(",["T_VARIABLE","$result",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$quoteItem",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$removeError",197],")",";",["T_WHITESPACE","\n                ",197],"}",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE","\n            ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$removeError",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_removeErrorsFromQuoteAndItem",201],"(",["T_VARIABLE","$quoteItem",201],",",["T_WHITESPACE"," ",201],["T_STRING","Data",201],["T_DOUBLE_COLON","::",201],["T_STRING","ERROR_QTY",201],")",";",["T_WHITESPACE","\n            ",201],"}",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE"," ",203],["T_ELSE","else",203],["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$quoteItem",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getParentItem",204],"(",")",["T_WHITESPACE"," ",204],["T_IS_IDENTICAL","===",204],["T_WHITESPACE"," ",204],["T_STRING","null",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                ",204],["T_VARIABLE","$result",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","stockItemInitializer",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","initialize",205],"(",["T_VARIABLE","$stockItem",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$quoteItem",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$qty",205],")",";",["T_WHITESPACE","\n                ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$result",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getHasError",206],"(",")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","addErrorInfoToQuote",207],"(",["T_VARIABLE","$result",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$quoteItem",207],")",";",["T_WHITESPACE","\n                ",207],"}",["T_WHITESPACE"," ",208],["T_ELSE","else",208],["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                    ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_removeErrorsFromQuoteAndItem",209],"(",["T_VARIABLE","$quoteItem",209],",",["T_WHITESPACE"," ",209],["T_STRING","Data",209],["T_DOUBLE_COLON","::",209],["T_STRING","ERROR_QTY",209],")",";",["T_WHITESPACE","\n                ",209],"}",["T_WHITESPACE","\n            ",210],"}",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * Removes error statuses from quote and item, set by this observer\n     *\n     * @param \\Magento\\Quote\\Model\\Quote\\Item $item\n     * @param int $code\n     * @return void\n     *\/",215],["T_WHITESPACE","\n    ",221],["T_PROTECTED","protected",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","_removeErrorsFromQuoteAndItem",222],"(",["T_VARIABLE","$item",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$code",222],")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$item",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getHasError",224],"(",")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$params",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],"[",["T_CONSTANT_ENCAPSED_STRING","'origin'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",225],",",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'code'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$code",225],"]",";",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$item",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","removeErrorInfosByParams",226],"(",["T_VARIABLE","$params",226],")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$quote",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$item",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getQuote",229],"(",")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$quoteItems",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$quote",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getItemsCollection",230],"(",")",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$canRemoveErrorFromQuote",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","true",231],";",["T_WHITESPACE","\n\n        ",231],["T_FOREACH","foreach",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$quoteItems",233],["T_WHITESPACE"," ",233],["T_AS","as",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$quoteItem",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$quoteItem",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getItemId",234],"(",")",["T_WHITESPACE"," ",234],["T_IS_EQUAL","==",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$item",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getItemId",234],"(",")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                ",234],["T_CONTINUE","continue",235],";",["T_WHITESPACE","\n            ",235],"}",["T_WHITESPACE","\n\n            ",236],["T_VARIABLE","$errorInfos",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$quoteItem",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getErrorInfos",238],"(",")",";",["T_WHITESPACE","\n            ",238],["T_FOREACH","foreach",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$errorInfos",239],["T_WHITESPACE"," ",239],["T_AS","as",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$errorInfo",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n                ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$errorInfo",240],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",240],"]",["T_WHITESPACE"," ",240],["T_IS_EQUAL","==",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$code",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                    ",240],["T_VARIABLE","$canRemoveErrorFromQuote",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","false",241],";",["T_WHITESPACE","\n                    ",241],["T_BREAK","break",242],";",["T_WHITESPACE","\n                ",242],"}",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n\n            ",244],["T_IF","if",246],["T_WHITESPACE"," ",246],"(","!",["T_VARIABLE","$canRemoveErrorFromQuote",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                ",246],["T_BREAK","break",247],";",["T_WHITESPACE","\n            ",247],"}",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n\n        ",249],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$quote",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getHasError",251],"(",")",["T_WHITESPACE"," ",251],["T_BOOLEAN_AND","&&",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$canRemoveErrorFromQuote",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$params",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],"[",["T_CONSTANT_ENCAPSED_STRING","'origin'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'code'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$code",252],"]",";",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$quote",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","removeErrorInfosByParams",253],"(",["T_STRING","null",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$params",253],")",";",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n",255],"}",["T_WHITESPACE","\n",256]]
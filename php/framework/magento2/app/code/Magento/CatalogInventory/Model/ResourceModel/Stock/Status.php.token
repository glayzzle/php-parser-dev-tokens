[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CatalogInventory",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ResourceModel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Stock",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CatalogInventory",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Stock",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogInventory",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","StockConfigurationInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * CatalogInventory Stock Status per website Resource Model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Status",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ResourceModel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Db",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AbstractDb",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_DOC_COMMENT","\/**\n     * Store model manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     * @deprecated\n     *\/",17],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$_storeManager",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * Website model factory\n     *\n     * @var \\Magento\\Store\\Model\\WebsiteFactory\n     *\/",25],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_websiteFactory",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Eav\\Model\\Config\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$eavConfig",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @var StockConfigurationInterface\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PRIVATE","private",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$stockConfiguration",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Store\\Model\\WebsiteFactory $websiteFactory\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param string $connectionName\n     *\/",42],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","__construct",49],"(",["T_WHITESPACE","\n        ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Magento",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Framework",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Model",50],["T_NS_SEPARATOR","\\",50],["T_STRING","ResourceModel",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Db",50],["T_NS_SEPARATOR","\\",50],["T_STRING","Context",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$context",50],",",["T_WHITESPACE","\n        ",50],["T_NS_SEPARATOR","\\",51],["T_STRING","Magento",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Store",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Model",51],["T_NS_SEPARATOR","\\",51],["T_STRING","StoreManagerInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$storeManager",51],",",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Store",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Model",52],["T_NS_SEPARATOR","\\",52],["T_STRING","WebsiteFactory",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$websiteFactory",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Eav",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Model",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Config",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$eavConfig",53],",",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$connectionName",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","null",54],["T_WHITESPACE","\n    ",54],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n        ",55],["T_STRING","parent",56],["T_DOUBLE_COLON","::",56],["T_STRING","__construct",56],"(",["T_VARIABLE","$context",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$connectionName",56],")",";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_storeManager",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$storeManager",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_websiteFactory",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$websiteFactory",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","eavConfig",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$eavConfig",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Resource model initialization\n     *\n     * @return void\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","_construct",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_init",70],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_status'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'product_id'",70],")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Save Product Status per website\n     *\n     * @param int $productId\n     * @param int $status\n     * @param float|int $qty\n     * @param int|null $websiteId\n     * @param int $stockId\n     * @return $this\n     *\/",73],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","saveProductStatus",83],"(",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$productId",84],",",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$status",85],",",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$qty",86],",",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$websiteId",87],",",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$stockId",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","Stock",88],["T_DOUBLE_COLON","::",88],["T_STRING","DEFAULT_STOCK_ID",88],["T_WHITESPACE","\n    ",88],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$connection",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getConnection",90],"(",")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$select",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$connection",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","select",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","from",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getMainTable",91],"(",")",")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","where",92],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id = :product_id'",92],")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","where",93],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id = :website_id'",93],")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","where",94],"(",["T_CONSTANT_ENCAPSED_STRING","'stock_id = :stock_id'",94],")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$bind",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[",["T_CONSTANT_ENCAPSED_STRING","':product_id'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$productId",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","':website_id'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$websiteId",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","':stock_id'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$stockId",95],"]",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$row",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$connection",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","fetchRow",96],"(",["T_VARIABLE","$select",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$bind",96],")",";",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$row",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$bind",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$qty",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'stock_status'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$status",98],"]",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$where",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],"[",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$connection",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","quoteInto",100],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id=?'",100],",",["T_WHITESPACE"," ",100],["T_INT_CAST","(int)",100],["T_VARIABLE","$row",100],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",100],"]",")",",",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$connection",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","quoteInto",101],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id=?'",101],",",["T_WHITESPACE"," ",101],["T_INT_CAST","(int)",101],["T_VARIABLE","$row",101],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",101],"]",")",",",["T_WHITESPACE","\n            ",101],"]",";",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$connection",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","update",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getMainTable",103],"(",")",",",["T_WHITESPACE"," ",103],["T_VARIABLE","$bind",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$where",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE"," ",104],["T_ELSE","else",104],["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$bind",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],"[",["T_WHITESPACE","\n                ",105],["T_CONSTANT_ENCAPSED_STRING","'product_id'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$productId",106],",",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'website_id'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$websiteId",107],",",["T_WHITESPACE","\n                ",107],["T_CONSTANT_ENCAPSED_STRING","'stock_id'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$stockId",108],",",["T_WHITESPACE","\n                ",108],["T_CONSTANT_ENCAPSED_STRING","'qty'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$qty",109],",",["T_WHITESPACE","\n                ",109],["T_CONSTANT_ENCAPSED_STRING","'stock_status'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$status",110],",",["T_WHITESPACE","\n            ",110],"]",";",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$connection",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","insert",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getMainTable",112],"(",")",",",["T_WHITESPACE"," ",112],["T_VARIABLE","$bind",112],")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Retrieve product status\n     * Return array as key product id, value - stock status\n     *\n     * @param int[] $productIds\n     * @param int $websiteId\n     * @param int $stockId\n     * @return array\n     *\/",118],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","getProductsStockStatuses",127],"(",["T_VARIABLE","$productIds",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$websiteId",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$stockId",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","Stock",127],["T_DOUBLE_COLON","::",127],["T_STRING","DEFAULT_STOCK_ID",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_STRING","is_array",129],"(",["T_VARIABLE","$productIds",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$productIds",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],"[",["T_VARIABLE","$productIds",130],"]",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_VARIABLE","$select",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getConnection",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","select",133],"(",")",["T_WHITESPACE","\n            ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","from",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getMainTable",134],"(",")",",",["T_WHITESPACE"," ",134],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'stock_status'",134],"]",")",["T_WHITESPACE","\n            ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","where",135],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id IN(?)'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$productIds",135],")",["T_WHITESPACE","\n            ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","where",136],"(",["T_CONSTANT_ENCAPSED_STRING","'stock_id=?'",136],",",["T_WHITESPACE"," ",136],["T_INT_CAST","(int)",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$stockId",136],")",["T_WHITESPACE","\n            ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","where",137],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id=?'",137],",",["T_WHITESPACE"," ",137],["T_INT_CAST","(int)",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$websiteId",137],")",";",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getConnection",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","fetchPairs",138],"(",["T_VARIABLE","$select",138],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Retrieve websites and default stores\n     * Return array as key website_id, value store_id\n     *\n     * @return array\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getWebsiteStores",147],"(",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_DOC_COMMENT","\/** @var \\Magento\\Store\\Model\\Website $website *\/",149],["T_WHITESPACE","\n        ",149],["T_VARIABLE","$website",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_websiteFactory",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","create",150],"(",")",";",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getConnection",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","fetchPairs",151],"(",["T_VARIABLE","$website",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getDefaultStoresSelect",151],"(",["T_STRING","false",151],")",")",";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Retrieve Product Type\n     *\n     * @param array|int $productIds\n     * @return array\n     *\/",154],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getProductsType",160],"(",["T_VARIABLE","$productIds",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(","!",["T_STRING","is_array",162],"(",["T_VARIABLE","$productIds",162],")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$productIds",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],"[",["T_VARIABLE","$productIds",163],"]",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n\n        ",164],["T_VARIABLE","$select",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getConnection",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","select",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","from",166],"(",["T_WHITESPACE","\n            ",166],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getTable",167],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",167],")","]",",",["T_WHITESPACE","\n            ",167],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",168],",",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'type_id'",168],"]",["T_WHITESPACE","\n        ",168],")",["T_OBJECT_OPERATOR","->",169],["T_STRING","where",169],"(",["T_WHITESPACE","\n            ",169],["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",170],",",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$productIds",171],["T_WHITESPACE","\n        ",171],")",";",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getConnection",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","fetchPairs",173],"(",["T_VARIABLE","$select",173],")",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Retrieve Product part Collection array\n     * Return array as key product id, value product type\n     *\n     * @param int $lastEntityId\n     * @param int $limit\n     * @return array\n     *\/",176],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","getProductCollection",184],"(",["T_VARIABLE","$lastEntityId",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_LNUMBER","0",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$limit",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_LNUMBER","1000",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$select",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getConnection",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","select",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","from",186],"(",["T_WHITESPACE","\n            ",186],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getTable",187],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",187],")","]",",",["T_WHITESPACE","\n            ",187],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",188],",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'type_id'",188],"]",["T_WHITESPACE","\n        ",188],")",["T_WHITESPACE","\n            ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","order",190],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id ASC'",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","where",191],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id > :entity_id'",191],")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","limit",192],"(",["T_VARIABLE","$limit",192],")",";",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getConnection",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","fetchPairs",193],"(",["T_VARIABLE","$select",193],",",["T_WHITESPACE"," ",193],"[",["T_CONSTANT_ENCAPSED_STRING","':entity_id'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$lastEntityId",193],"]",")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Add stock status to prepare index select\n     *\n     * @param \\Magento\\Framework\\DB\\Select $select\n     * @param \\Magento\\Store\\Model\\Website $website\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     * @return Status\n     *\/",196],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","addStockStatusToSelect",204],"(",["T_NS_SEPARATOR","\\",204],["T_STRING","Magento",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Framework",204],["T_NS_SEPARATOR","\\",204],["T_STRING","DB",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Select",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$select",204],",",["T_WHITESPACE"," ",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Magento",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Store",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Model",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Website",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$website",204],")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$websiteId",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getStockConfiguration",206],"(",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","getDefaultScopeId",206],"(",")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$select",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","joinLeft",207],"(",["T_WHITESPACE","\n            ",207],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_status'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getMainTable",208],"(",")","]",",",["T_WHITESPACE","\n            ",208],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = stock_status.product_id AND stock_status.website_id='",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_VARIABLE","$websiteId",209],",",["T_WHITESPACE","\n            ",209],"[",["T_CONSTANT_ENCAPSED_STRING","'is_salable'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'stock_status.stock_status'",210],"]",["T_WHITESPACE","\n        ",210],")",";",["T_WHITESPACE","\n\n        ",211],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection $collection\n     * @param bool $isFilterInStock\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection $collection\n     *\/",216],["T_WHITESPACE","\n    ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","addStockDataToCollection",221],"(",["T_VARIABLE","$collection",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$isFilterInStock",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$websiteId",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getStockConfiguration",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","getDefaultScopeId",223],"(",")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$joinCondition",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getConnection",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","quoteInto",224],"(",["T_WHITESPACE","\n            ",224],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = stock_status_index.product_id'",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","' AND stock_status_index.website_id = ?'",225],",",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$websiteId",226],["T_WHITESPACE","\n        ",226],")",";",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$joinCondition",229],["T_WHITESPACE"," ",229],["T_CONCAT_EQUAL",".=",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getConnection",229],"(",")",["T_OBJECT_OPERATOR","->",229],["T_STRING","quoteInto",229],"(",["T_WHITESPACE","\n            ",229],["T_CONSTANT_ENCAPSED_STRING","' AND stock_status_index.stock_id = ?'",230],",",["T_WHITESPACE","\n            ",230],["T_STRING","Stock",231],["T_DOUBLE_COLON","::",231],["T_STRING","DEFAULT_STOCK_ID",231],["T_WHITESPACE","\n        ",231],")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$method",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$isFilterInStock",233],["T_WHITESPACE"," ",233],"?",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'join'",233],["T_WHITESPACE"," ",233],":",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'joinLeft'",233],";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$collection",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getSelect",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_VARIABLE","$method",234],"(",["T_WHITESPACE","\n            ",234],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_status_index'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getMainTable",235],"(",")","]",",",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$joinCondition",236],",",["T_WHITESPACE","\n            ",236],"[",["T_CONSTANT_ENCAPSED_STRING","'is_salable'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'stock_status'",237],"]",["T_WHITESPACE","\n        ",237],")",";",["T_WHITESPACE","\n\n        ",238],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$isFilterInStock",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$collection",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getSelect",241],"(",")",["T_OBJECT_OPERATOR","->",241],["T_STRING","where",241],"(",["T_WHITESPACE","\n                ",241],["T_CONSTANT_ENCAPSED_STRING","'stock_status_index.stock_status = ?'",242],",",["T_WHITESPACE","\n                ",242],["T_STRING","Stock",243],["T_NS_SEPARATOR","\\",243],["T_STRING","Status",243],["T_DOUBLE_COLON","::",243],["T_STRING","STATUS_IN_STOCK",243],["T_WHITESPACE","\n            ",243],")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$collection",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Add only is in stock products filter to product collection\n     *\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Product\\Collection $collection\n     * @return $this\n     *\/",249],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","addIsInStockFilterToCollection",255],"(",["T_VARIABLE","$collection",255],")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$websiteId",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getStockConfiguration",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getDefaultScopeId",257],"(",")",";",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$joinCondition",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getConnection",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","quoteInto",258],"(",["T_WHITESPACE","\n            ",258],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = stock_status_index.product_id'",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","' AND stock_status_index.website_id = ?'",259],",",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$websiteId",260],["T_WHITESPACE","\n        ",260],")",";",["T_WHITESPACE","\n\n        ",261],["T_VARIABLE","$joinCondition",263],["T_WHITESPACE"," ",263],["T_CONCAT_EQUAL",".=",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getConnection",263],"(",")",["T_OBJECT_OPERATOR","->",263],["T_STRING","quoteInto",263],"(",["T_WHITESPACE","\n            ",263],["T_CONSTANT_ENCAPSED_STRING","' AND stock_status_index.stock_id = ?'",264],",",["T_WHITESPACE","\n            ",264],["T_STRING","Stock",265],["T_DOUBLE_COLON","::",265],["T_STRING","DEFAULT_STOCK_ID",265],["T_WHITESPACE","\n        ",265],")",";",["T_WHITESPACE","\n\n        ",266],["T_VARIABLE","$collection",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getSelect",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","join",268],"(",["T_WHITESPACE","\n            ",268],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_status_index'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getMainTable",269],"(",")","]",",",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$joinCondition",270],",",["T_WHITESPACE","\n            ",270],"[","]",["T_WHITESPACE","\n        ",271],")",["T_OBJECT_OPERATOR","->",272],["T_STRING","where",272],"(",["T_WHITESPACE","\n            ",272],["T_CONSTANT_ENCAPSED_STRING","'stock_status_index.stock_status=?'",273],",",["T_WHITESPACE","\n            ",273],["T_STRING","Stock",274],["T_NS_SEPARATOR","\\",274],["T_STRING","Status",274],["T_DOUBLE_COLON","::",274],["T_STRING","STATUS_IN_STOCK",274],["T_WHITESPACE","\n        ",274],")",";",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Retrieve Product(s) status for store\n     * Return array where key is a product_id, value - status\n     *\n     * @param int[] $productIds\n     * @param int $storeId\n     * @return array\n     *\/",279],["T_WHITESPACE","\n    ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","getProductStatus",287],"(",["T_VARIABLE","$productIds",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$storeId",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","null",287],")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(","!",["T_STRING","is_array",289],"(",["T_VARIABLE","$productIds",289],")",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$productIds",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],"[",["T_VARIABLE","$productIds",290],"]",";",["T_WHITESPACE","\n        ",290],"}",["T_WHITESPACE","\n\n        ",291],["T_VARIABLE","$attribute",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","eavConfig",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getAttribute",293],"(",["T_NS_SEPARATOR","\\",293],["T_STRING","Magento",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Catalog",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Model",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Product",293],["T_DOUBLE_COLON","::",293],["T_STRING","ENTITY",293],",",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'status'",293],")",";",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$attributeTable",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$attribute",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getBackend",294],"(",")",["T_OBJECT_OPERATOR","->",294],["T_STRING","getTable",294],"(",")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$linkField",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$attribute",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getEntity",295],"(",")",["T_OBJECT_OPERATOR","->",295],["T_STRING","getLinkField",295],"(",")",";",["T_WHITESPACE","\n\n        ",295],["T_VARIABLE","$connection",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getConnection",297],"(",")",";",["T_WHITESPACE","\n\n        ",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$storeId",299],["T_WHITESPACE"," ",299],["T_IS_IDENTICAL","===",299],["T_WHITESPACE"," ",299],["T_STRING","null",299],["T_WHITESPACE"," ",299],["T_BOOLEAN_OR","||",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$storeId",299],["T_WHITESPACE"," ",299],["T_IS_EQUAL","==",299],["T_WHITESPACE"," ",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Magento",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Store",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Model",299],["T_NS_SEPARATOR","\\",299],["T_STRING","Store",299],["T_DOUBLE_COLON","::",299],["T_STRING","DEFAULT_STORE_ID",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$select",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$connection",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","select",300],"(",")",["T_OBJECT_OPERATOR","->",300],["T_STRING","from",300],"(",["T_VARIABLE","$attributeTable",300],",",["T_WHITESPACE"," ",300],"[",["T_VARIABLE","$linkField",300],",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'value'",300],"]",")",["T_WHITESPACE","\n                ",300],["T_OBJECT_OPERATOR","->",301],["T_STRING","where",301],"(","\"",["T_CURLY_OPEN","{",301],["T_VARIABLE","$linkField",301],"}",["T_ENCAPSED_AND_WHITESPACE"," IN (?)",301],"\"",",",["T_WHITESPACE"," ",301],["T_VARIABLE","$productIds",301],")",["T_WHITESPACE","\n                ",301],["T_OBJECT_OPERATOR","->",302],["T_STRING","where",302],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$attribute",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getAttributeId",302],"(",")",")",["T_WHITESPACE","\n                ",302],["T_OBJECT_OPERATOR","->",303],["T_STRING","where",303],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",303],",",["T_WHITESPACE"," ",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Magento",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Store",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Model",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Store",303],["T_DOUBLE_COLON","::",303],["T_STRING","DEFAULT_STORE_ID",303],")",";",["T_WHITESPACE","\n\n            ",303],["T_VARIABLE","$rows",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$connection",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","fetchPairs",305],"(",["T_VARIABLE","$select",305],")",";",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE"," ",306],["T_ELSE","else",306],["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$select",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$connection",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","select",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","from",307],"(",["T_WHITESPACE","\n                ",307],"[",["T_CONSTANT_ENCAPSED_STRING","'t1'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$attributeTable",308],"]",",",["T_WHITESPACE","\n                ",308],"[",["T_VARIABLE","$linkField",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],"\"",["T_ENCAPSED_AND_WHITESPACE","t1.",309],["T_CURLY_OPEN","{",309],["T_VARIABLE","$linkField",309],"}","\"",",",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'value'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$connection",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getIfNullSql",309],"(",["T_CONSTANT_ENCAPSED_STRING","'t2.value'",309],",",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'t1.value'",309],")","]",["T_WHITESPACE","\n            ",309],")",["T_OBJECT_OPERATOR","->",310],["T_STRING","joinLeft",310],"(",["T_WHITESPACE","\n                ",310],"[",["T_CONSTANT_ENCAPSED_STRING","'t2'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$attributeTable",311],"]",",",["T_WHITESPACE","\n                ",311],"\"",["T_ENCAPSED_AND_WHITESPACE","t1.",312],["T_CURLY_OPEN","{",312],["T_VARIABLE","$linkField",312],"}",["T_ENCAPSED_AND_WHITESPACE"," = t2.",312],["T_CURLY_OPEN","{",312],["T_VARIABLE","$linkField",312],"}",["T_ENCAPSED_AND_WHITESPACE"," AND t1.attribute_id = t2.attribute_id AND t2.store_id = ",312],["T_CURLY_OPEN","{",312],["T_VARIABLE","$storeId",312],"}","\"",["T_WHITESPACE","\n            ",312],")",["T_OBJECT_OPERATOR","->",313],["T_STRING","where",313],"(",["T_WHITESPACE","\n                ",313],["T_CONSTANT_ENCAPSED_STRING","'t1.store_id = ?'",314],",",["T_WHITESPACE","\n                ",314],["T_NS_SEPARATOR","\\",315],["T_STRING","Magento",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Store",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Model",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Store",315],["T_DOUBLE_COLON","::",315],["T_STRING","DEFAULT_STORE_ID",315],["T_WHITESPACE","\n            ",315],")",["T_OBJECT_OPERATOR","->",316],["T_STRING","where",316],"(",["T_WHITESPACE","\n                ",316],["T_CONSTANT_ENCAPSED_STRING","'t1.attribute_id = ?'",317],",",["T_WHITESPACE","\n                ",317],["T_VARIABLE","$attribute",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getAttributeId",318],"(",")",["T_WHITESPACE","\n            ",318],")",["T_OBJECT_OPERATOR","->",319],["T_STRING","where",319],"(",["T_WHITESPACE","\n                ",319],"\"",["T_ENCAPSED_AND_WHITESPACE","t1.",320],["T_CURLY_OPEN","{",320],["T_VARIABLE","$linkField",320],"}",["T_ENCAPSED_AND_WHITESPACE"," IN(?)",320],"\"",",",["T_WHITESPACE","\n                ",320],["T_VARIABLE","$productIds",321],["T_WHITESPACE","\n            ",321],")",";",["T_WHITESPACE","\n\n            ",322],["T_VARIABLE","$rows",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$connection",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","fetchPairs",324],"(",["T_VARIABLE","$select",324],")",";",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n\n        ",325],["T_VARIABLE","$statuses",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],"[","]",";",["T_WHITESPACE","\n        ",327],["T_FOREACH","foreach",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$productIds",328],["T_WHITESPACE"," ",328],["T_AS","as",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$productId",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n            ",328],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_ISSET","isset",329],"(",["T_VARIABLE","$rows",329],"[",["T_VARIABLE","$productId",329],"]",")",")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                ",329],["T_VARIABLE","$statuses",330],"[",["T_VARIABLE","$productId",330],"]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$rows",330],"[",["T_VARIABLE","$productId",330],"]",";",["T_WHITESPACE","\n            ",330],"}",["T_WHITESPACE"," ",331],["T_ELSE","else",331],["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                ",331],["T_VARIABLE","$statuses",332],"[",["T_VARIABLE","$productId",332],"]",["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],"-",["T_LNUMBER","1",332],";",["T_WHITESPACE","\n            ",332],"}",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$statuses",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * @return StockConfigurationInterface\n     *\n     * @deprecated\n     *\/",338],["T_WHITESPACE","\n    ",342],["T_PRIVATE","private",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","getStockConfiguration",343],"(",")",["T_WHITESPACE","\n    ",343],"{",["T_WHITESPACE","\n        ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","stockConfiguration",345],["T_WHITESPACE"," ",345],["T_IS_IDENTICAL","===",345],["T_WHITESPACE"," ",345],["T_STRING","null",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","stockConfiguration",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_NS_SEPARATOR","\\",346],["T_STRING","Magento",346],["T_NS_SEPARATOR","\\",346],["T_STRING","Framework",346],["T_NS_SEPARATOR","\\",346],["T_STRING","App",346],["T_NS_SEPARATOR","\\",346],["T_STRING","ObjectManager",346],["T_DOUBLE_COLON","::",346],["T_STRING","getInstance",346],"(",")",["T_WHITESPACE","\n                ",346],["T_OBJECT_OPERATOR","->",347],["T_STRING","get",347],"(",["T_NS_SEPARATOR","\\",347],["T_STRING","Magento",347],["T_NS_SEPARATOR","\\",347],["T_STRING","CatalogInventory",347],["T_NS_SEPARATOR","\\",347],["T_STRING","Api",347],["T_NS_SEPARATOR","\\",347],["T_STRING","StockConfigurationInterface",347],["T_DOUBLE_COLON","::",347],["T_CLASS","class",347],")",";",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE","\n        ",348],["T_RETURN","return",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","stockConfiguration",349],";",["T_WHITESPACE","\n    ",349],"}",["T_WHITESPACE","\n",350],"}",["T_WHITESPACE","\n",351]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CatalogInventory",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ProductFactory",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CatalogInventory",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Data",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StockItemInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","CatalogInventory",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Spi",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StockStateProviderInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Locale",14],["T_NS_SEPARATOR","\\",14],["T_STRING","FormatInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Framework",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Math",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Division",15],["T_WHITESPACE"," ",15],["T_AS","as",15],["T_WHITESPACE"," ",15],["T_STRING","MathDivision",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","DataObject",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Factory",16],["T_WHITESPACE"," ",16],["T_AS","as",16],["T_WHITESPACE"," ",16],["T_STRING","ObjectFactory",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Interface StockStateProvider\n *\/",18],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","StockStateProvider",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_STRING","StockStateProviderInterface",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * @var MathDivision\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$mathDivision",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * @var FormatInterface\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$localeFormat",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * @var ObjectFactory\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$objectFactory",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * @var ProductFactory\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$productFactory",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$qtyCheckApplicable",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @param MathDivision $mathDivision\n     * @param FormatInterface $localeFormat\n     * @param ObjectFactory $objectFactory\n     * @param ProductFactory $productFactory\n     * @param bool $qtyCheckApplicable\n     *\/",48],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","__construct",55],"(",["T_WHITESPACE","\n        ",55],["T_STRING","MathDivision",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$mathDivision",56],",",["T_WHITESPACE","\n        ",56],["T_STRING","FormatInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$localeFormat",57],",",["T_WHITESPACE","\n        ",57],["T_STRING","ObjectFactory",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$objectFactory",58],",",["T_WHITESPACE","\n        ",58],["T_STRING","ProductFactory",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$productFactory",59],",",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$qtyCheckApplicable",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","true",60],["T_WHITESPACE","\n    ",60],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","mathDivision",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$mathDivision",62],";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","localeFormat",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$localeFormat",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","objectFactory",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$objectFactory",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","productFactory",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$productFactory",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","qtyCheckApplicable",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$qtyCheckApplicable",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * @param StockItemInterface $stockItem\n     * @return bool\n     *\/",69],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","verifyStock",73],"(",["T_STRING","StockItemInterface",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$stockItem",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$stockItem",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getQty",75],"(",")",["T_WHITESPACE"," ",75],["T_IS_IDENTICAL","===",75],["T_WHITESPACE"," ",75],["T_STRING","null",75],["T_WHITESPACE"," ",75],["T_BOOLEAN_AND","&&",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$stockItem",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getManageStock",75],"(",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_STRING","false",76],";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$stockItem",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getBackorders",78],"(",")",["T_WHITESPACE"," ",78],["T_IS_EQUAL","==",78],["T_WHITESPACE"," ",78],["T_STRING","StockItemInterface",78],["T_DOUBLE_COLON","::",78],["T_STRING","BACKORDERS_NO",78],["T_WHITESPACE","\n            ",78],["T_BOOLEAN_AND","&&",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$stockItem",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getQty",79],"(",")",["T_WHITESPACE"," ",79],["T_IS_SMALLER_OR_EQUAL","<=",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$stockItem",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMinQty",79],"(",")",["T_WHITESPACE","\n        ",79],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","false",81],";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_STRING","true",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @param StockItemInterface $stockItem\n     * @return bool\n     *\/",86],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","verifyNotification",90],"(",["T_STRING","StockItemInterface",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$stockItem",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_DOUBLE_CAST","(float)",92],["T_VARIABLE","$stockItem",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getQty",92],"(",")",["T_WHITESPACE"," ",92],"<",["T_WHITESPACE"," ",92],["T_VARIABLE","$stockItem",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getNotifyStockQty",92],"(",")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * @param StockItemInterface $stockItem\n     * @param int|float $qty\n     * @param int|float $summaryQty\n     * @param int|float $origQty\n     * @return \\Magento\\Framework\\DataObject\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",95],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","checkQuoteItemQty",105],"(",["T_STRING","StockItemInterface",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$stockItem",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$qty",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$summaryQty",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$origQty",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","objectFactory",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","create",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$result",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","setHasError",108],"(",["T_STRING","false",108],")",";",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$qty",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getNumber",110],"(",["T_VARIABLE","$qty",110],")",";",["T_WHITESPACE","\n\n        ",110],["T_DOC_COMMENT","\/**\n         * Check quantity type\n         *\/",112],["T_WHITESPACE","\n        ",114],["T_VARIABLE","$result",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setItemIsQtyDecimal",115],"(",["T_VARIABLE","$stockItem",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getIsQtyDecimal",115],"(",")",")",";",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_VARIABLE","$stockItem",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getIsQtyDecimal",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$result",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","setHasQtyOptionUpdate",117],"(",["T_STRING","true",117],")",";",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$qty",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","intval",118],"(",["T_VARIABLE","$qty",118],")",";",["T_WHITESPACE","\n            ",118],["T_DOC_COMMENT","\/**\n             * Adding stock data to quote item\n             *\/",119],["T_WHITESPACE","\n            ",121],["T_VARIABLE","$result",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setItemQty",122],"(",["T_VARIABLE","$qty",122],")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$qty",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getNumber",123],"(",["T_VARIABLE","$qty",123],")",";",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$origQty",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","intval",124],"(",["T_VARIABLE","$origQty",124],")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$result",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setOrigQty",125],"(",["T_VARIABLE","$origQty",125],")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$stockItem",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getMinSaleQty",128],"(",")",["T_WHITESPACE"," ",128],["T_BOOLEAN_AND","&&",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$qty",128],["T_WHITESPACE"," ",128],"<",["T_WHITESPACE"," ",128],["T_VARIABLE","$stockItem",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getMinSaleQty",128],"(",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$result",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setHasError",129],"(",["T_STRING","true",129],")",["T_WHITESPACE","\n                ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","setMessage",130],"(",["T_STRING","__",130],"(",["T_CONSTANT_ENCAPSED_STRING","'The fewest you may purchase is %1.'",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$stockItem",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getMinSaleQty",130],"(",")",["T_WHITESPACE"," ",130],"*",["T_WHITESPACE"," ",130],["T_LNUMBER","1",130],")",")",["T_WHITESPACE","\n                ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","setErrorCode",131],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_min'",131],")",["T_WHITESPACE","\n                ",131],["T_OBJECT_OPERATOR","->",132],["T_STRING","setQuoteMessage",132],"(",["T_STRING","__",132],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the quantity for some products.'",132],")",")",["T_WHITESPACE","\n                ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","setQuoteMessageIndex",133],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",133],")",";",["T_WHITESPACE","\n            ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$result",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$stockItem",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getMaxSaleQty",137],"(",")",["T_WHITESPACE"," ",137],["T_BOOLEAN_AND","&&",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$qty",137],["T_WHITESPACE"," ",137],">",["T_WHITESPACE"," ",137],["T_VARIABLE","$stockItem",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getMaxSaleQty",137],"(",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$result",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","setHasError",138],"(",["T_STRING","true",138],")",["T_WHITESPACE","\n                ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","setMessage",139],"(",["T_STRING","__",139],"(",["T_CONSTANT_ENCAPSED_STRING","'The most you may purchase is %1.'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$stockItem",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getMaxSaleQty",139],"(",")",["T_WHITESPACE"," ",139],"*",["T_WHITESPACE"," ",139],["T_LNUMBER","1",139],")",")",["T_WHITESPACE","\n                ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","setErrorCode",140],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_max'",140],")",["T_WHITESPACE","\n                ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","setQuoteMessage",141],"(",["T_STRING","__",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the quantity for some products.'",141],")",")",["T_WHITESPACE","\n                ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","setQuoteMessageIndex",142],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",142],")",";",["T_WHITESPACE","\n            ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$result",143],";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$result",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addData",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","checkQtyIncrements",146],"(",["T_VARIABLE","$stockItem",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$qty",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","getData",146],"(",")",")",";",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$result",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getHasError",147],"(",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$result",148],";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_IF","if",151],["T_WHITESPACE"," ",151],"(","!",["T_VARIABLE","$stockItem",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getManageStock",151],"(",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$result",152],";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n\n        ",153],["T_IF","if",155],["T_WHITESPACE"," ",155],"(","!",["T_VARIABLE","$stockItem",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getIsInStock",155],"(",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$result",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","setHasError",156],"(",["T_STRING","true",156],")",["T_WHITESPACE","\n                ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","setMessage",157],"(",["T_STRING","__",157],"(",["T_CONSTANT_ENCAPSED_STRING","'This product is out of stock.'",157],")",")",["T_WHITESPACE","\n                ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","setQuoteMessage",158],"(",["T_STRING","__",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Some of the products are out of stock.'",158],")",")",["T_WHITESPACE","\n                ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","setQuoteMessageIndex",159],"(",["T_CONSTANT_ENCAPSED_STRING","'stock'",159],")",";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$result",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","setItemUseOldQty",160],"(",["T_STRING","true",160],")",";",["T_WHITESPACE","\n            ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$result",161],";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(","!",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","checkQty",164],"(",["T_VARIABLE","$stockItem",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$summaryQty",164],")",["T_WHITESPACE"," ",164],["T_BOOLEAN_OR","||",164],["T_WHITESPACE"," ",164],"!",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","checkQty",164],"(",["T_VARIABLE","$stockItem",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$qty",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$message",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","__",165],"(",["T_CONSTANT_ENCAPSED_STRING","'We don\\'t have as many \"%1\" as you requested.'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$stockItem",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getProductName",165],"(",")",")",";",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$result",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","setHasError",166],"(",["T_STRING","true",166],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","setMessage",166],"(",["T_VARIABLE","$message",166],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","setQuoteMessage",166],"(",["T_VARIABLE","$message",166],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","setQuoteMessageIndex",166],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",166],")",";",["T_WHITESPACE","\n            ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$result",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE"," ",168],["T_ELSE","else",168],["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$stockItem",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getQty",169],"(",")",["T_WHITESPACE"," ",169],"-",["T_WHITESPACE"," ",169],["T_VARIABLE","$summaryQty",169],["T_WHITESPACE"," ",169],"<",["T_WHITESPACE"," ",169],["T_LNUMBER","0",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$stockItem",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getProductName",170],"(",")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                    ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$stockItem",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getIsChildItem",171],"(",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                        ",171],["T_VARIABLE","$backOrderQty",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$stockItem",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getQty",172],"(",")",["T_WHITESPACE"," ",172],">",["T_WHITESPACE"," ",172],["T_LNUMBER","0",172],["T_WHITESPACE"," ",172],"?",["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$summaryQty",172],["T_WHITESPACE"," ",172],"-",["T_WHITESPACE"," ",172],["T_VARIABLE","$stockItem",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getQty",172],"(",")",")",["T_WHITESPACE"," ",172],"*",["T_WHITESPACE"," ",172],["T_LNUMBER","1",172],["T_WHITESPACE"," ",172],":",["T_WHITESPACE"," ",172],["T_VARIABLE","$qty",172],["T_WHITESPACE"," ",172],"*",["T_WHITESPACE"," ",172],["T_LNUMBER","1",172],";",["T_WHITESPACE","\n                        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$backOrderQty",173],["T_WHITESPACE"," ",173],">",["T_WHITESPACE"," ",173],["T_VARIABLE","$qty",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                            ",173],["T_VARIABLE","$backOrderQty",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$qty",174],";",["T_WHITESPACE","\n                        ",174],"}",["T_WHITESPACE","\n\n                        ",175],["T_VARIABLE","$result",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","setItemBackorders",177],"(",["T_VARIABLE","$backOrderQty",177],")",";",["T_WHITESPACE","\n                    ",177],"}",["T_WHITESPACE"," ",178],["T_ELSE","else",178],["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                        ",178],["T_VARIABLE","$orderedItems",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_INT_CAST","(int)",179],["T_VARIABLE","$stockItem",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getOrderedItems",179],"(",")",";",["T_WHITESPACE","\n\n                        ",179],["T_COMMENT","\/\/ Available item qty in stock excluding item qty in other quotes\n",181],["T_WHITESPACE","                        ",182],["T_VARIABLE","$qtyAvailable",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$stockItem",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getQty",182],"(",")",["T_WHITESPACE"," ",182],"-",["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$summaryQty",182],["T_WHITESPACE"," ",182],"-",["T_WHITESPACE"," ",182],["T_VARIABLE","$qty",182],")",")",["T_WHITESPACE"," ",182],"*",["T_WHITESPACE"," ",182],["T_LNUMBER","1",182],";",["T_WHITESPACE","\n                        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$qtyAvailable",183],["T_WHITESPACE"," ",183],">",["T_WHITESPACE"," ",183],["T_LNUMBER","0",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                            ",183],["T_VARIABLE","$backOrderQty",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$qty",184],["T_WHITESPACE"," ",184],"*",["T_WHITESPACE"," ",184],["T_LNUMBER","1",184],["T_WHITESPACE"," ",184],"-",["T_WHITESPACE"," ",184],["T_VARIABLE","$qtyAvailable",184],";",["T_WHITESPACE","\n                        ",184],"}",["T_WHITESPACE"," ",185],["T_ELSE","else",185],["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                            ",185],["T_VARIABLE","$backOrderQty",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$qty",186],["T_WHITESPACE"," ",186],"*",["T_WHITESPACE"," ",186],["T_LNUMBER","1",186],";",["T_WHITESPACE","\n                        ",186],"}",["T_WHITESPACE","\n\n                        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$backOrderQty",189],["T_WHITESPACE"," ",189],">",["T_WHITESPACE"," ",189],["T_LNUMBER","0",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                            ",189],["T_VARIABLE","$result",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","setItemBackorders",190],"(",["T_VARIABLE","$backOrderQty",190],")",";",["T_WHITESPACE","\n                        ",190],"}",["T_WHITESPACE","\n                        ",191],["T_VARIABLE","$stockItem",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","setOrderedItems",192],"(",["T_VARIABLE","$orderedItems",192],["T_WHITESPACE"," ",192],"+",["T_WHITESPACE"," ",192],["T_VARIABLE","$qty",192],")",";",["T_WHITESPACE","\n                    ",192],"}",["T_WHITESPACE","\n\n                    ",193],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$stockItem",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getBackorders",195],"(",")",["T_WHITESPACE"," ",195],["T_IS_EQUAL","==",195],["T_WHITESPACE"," ",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Magento",195],["T_NS_SEPARATOR","\\",195],["T_STRING","CatalogInventory",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Model",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Stock",195],["T_DOUBLE_COLON","::",195],["T_STRING","BACKORDERS_YES_NOTIFY",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                        ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(","!",["T_VARIABLE","$stockItem",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getIsChildItem",196],"(",")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                            ",196],["T_VARIABLE","$result",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","setMessage",197],"(",["T_WHITESPACE","\n                                ",197],["T_STRING","__",198],"(",["T_WHITESPACE","\n                                    ",198],["T_CONSTANT_ENCAPSED_STRING","'We don\\'t have as many \"%1\" as you requested, but we\\'ll back order the remaining %2.'",199],",",["T_WHITESPACE","\n                                    ",199],["T_VARIABLE","$stockItem",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getProductName",200],"(",")",",",["T_WHITESPACE","\n                                    ",200],["T_VARIABLE","$backOrderQty",201],["T_WHITESPACE"," ",201],"*",["T_WHITESPACE"," ",201],["T_LNUMBER","1",201],["T_WHITESPACE","\n                                ",201],")",["T_WHITESPACE","\n                            ",202],")",";",["T_WHITESPACE","\n                        ",203],"}",["T_WHITESPACE"," ",204],["T_ELSE","else",204],["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                            ",204],["T_VARIABLE","$result",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","setMessage",205],"(",["T_WHITESPACE","\n                                ",205],["T_STRING","__",206],"(",["T_WHITESPACE","\n                                    ",206],["T_CONSTANT_ENCAPSED_STRING","'We don\\'t have \"%1\" in the requested quantity, so we\\'ll back order the remaining %2.'",207],",",["T_WHITESPACE","\n                                    ",207],["T_VARIABLE","$stockItem",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getProductName",208],"(",")",",",["T_WHITESPACE","\n                                    ",208],["T_VARIABLE","$backOrderQty",209],["T_WHITESPACE"," ",209],"*",["T_WHITESPACE"," ",209],["T_LNUMBER","1",209],["T_WHITESPACE","\n                                ",209],")",["T_WHITESPACE","\n                            ",210],")",";",["T_WHITESPACE","\n                        ",211],"}",["T_WHITESPACE","\n                    ",212],"}",["T_WHITESPACE"," ",213],["T_ELSEIF","elseif",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$stockItem",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getShowDefaultNotificationMessage",213],"(",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                        ",213],["T_VARIABLE","$result",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","setMessage",214],"(",["T_WHITESPACE","\n                            ",214],["T_STRING","__",215],"(",["T_CONSTANT_ENCAPSED_STRING","'We don\\'t have as many \"%1\" as you requested.'",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$stockItem",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getProductName",215],"(",")",")",["T_WHITESPACE","\n                        ",215],")",";",["T_WHITESPACE","\n                    ",216],"}",["T_WHITESPACE","\n                ",217],"}",["T_WHITESPACE","\n            ",218],"}",["T_WHITESPACE"," ",219],["T_ELSE","else",219],["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(","!",["T_VARIABLE","$stockItem",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getIsChildItem",220],"(",")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                    ",220],["T_VARIABLE","$stockItem",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setOrderedItems",221],"(",["T_VARIABLE","$qty",221],["T_WHITESPACE"," ",221],"+",["T_WHITESPACE"," ",221],["T_INT_CAST","(int)",221],["T_VARIABLE","$stockItem",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getOrderedItems",221],"(",")",")",";",["T_WHITESPACE","\n                ",221],"}",["T_WHITESPACE","\n            ",222],"}",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n        ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$result",225],";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Check quantity\n     *\n     * @param StockItemInterface $stockItem\n     * @param int|float $qty\n     * @exception \\Magento\\Framework\\Exception\\LocalizedException\n     * @return bool\n     *\/",228],["T_WHITESPACE","\n    ",235],["T_PUBLIC","public",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","checkQty",236],"(",["T_STRING","StockItemInterface",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$stockItem",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$qty",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(","!",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","qtyCheckApplicable",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_STRING","true",239],";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n        ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(","!",["T_VARIABLE","$stockItem",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getManageStock",241],"(",")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_STRING","true",242],";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n        ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$stockItem",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getQty",244],"(",")",["T_WHITESPACE"," ",244],"-",["T_WHITESPACE"," ",244],["T_VARIABLE","$stockItem",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getMinQty",244],"(",")",["T_WHITESPACE"," ",244],"-",["T_WHITESPACE"," ",244],["T_VARIABLE","$qty",244],["T_WHITESPACE"," ",244],"<",["T_WHITESPACE"," ",244],["T_LNUMBER","0",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_SWITCH","switch",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$stockItem",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getBackorders",245],"(",")",")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                ",245],["T_CASE","case",246],["T_WHITESPACE"," ",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Magento",246],["T_NS_SEPARATOR","\\",246],["T_STRING","CatalogInventory",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Model",246],["T_NS_SEPARATOR","\\",246],["T_STRING","Stock",246],["T_DOUBLE_COLON","::",246],["T_STRING","BACKORDERS_YES_NONOTIFY",246],":",["T_WHITESPACE","\n                ",246],["T_CASE","case",247],["T_WHITESPACE"," ",247],["T_NS_SEPARATOR","\\",247],["T_STRING","Magento",247],["T_NS_SEPARATOR","\\",247],["T_STRING","CatalogInventory",247],["T_NS_SEPARATOR","\\",247],["T_STRING","Model",247],["T_NS_SEPARATOR","\\",247],["T_STRING","Stock",247],["T_DOUBLE_COLON","::",247],["T_STRING","BACKORDERS_YES_NOTIFY",247],":",["T_WHITESPACE","\n                    ",247],["T_BREAK","break",248],";",["T_WHITESPACE","\n                ",248],["T_DEFAULT","default",249],":",["T_WHITESPACE","\n                    ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_STRING","false",250],";",["T_WHITESPACE","\n            ",250],"}",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_STRING","true",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Returns suggested qty that satisfies qty increments and minQty\/maxQty\/minSaleQty\/maxSaleQty conditions\n     * or original qty if such value does not exist\n     *\n     * @param StockItemInterface $stockItem\n     * @param int|float $qty\n     * @return int|float\n     *\/",256],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","suggestQty",264],"(",["T_STRING","StockItemInterface",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$stockItem",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$qty",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_COMMENT","\/\/ We do not manage stock\n",266],["T_WHITESPACE","        ",267],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$qty",267],["T_WHITESPACE"," ",267],["T_IS_SMALLER_OR_EQUAL","<=",267],["T_WHITESPACE"," ",267],["T_LNUMBER","0",267],["T_WHITESPACE"," ",267],["T_BOOLEAN_OR","||",267],["T_WHITESPACE"," ",267],"!",["T_VARIABLE","$stockItem",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getManageStock",267],"(",")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$qty",268],";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$qtyIncrements",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_INT_CAST","(int)",271],["T_VARIABLE","$stockItem",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getQtyIncrements",271],"(",")",";",["T_WHITESPACE","\n        ",271],["T_COMMENT","\/\/ Currently only integer increments supported\n",272],["T_WHITESPACE","        ",273],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$qtyIncrements",273],["T_WHITESPACE"," ",273],"<",["T_WHITESPACE"," ",273],["T_LNUMBER","2",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$qty",274],";",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE","\n\n        ",275],["T_VARIABLE","$minQty",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","max",277],"(",["T_VARIABLE","$stockItem",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getMinSaleQty",277],"(",")",",",["T_WHITESPACE"," ",277],["T_VARIABLE","$qtyIncrements",277],")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$divisibleMin",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","ceil",278],"(",["T_VARIABLE","$minQty",278],["T_WHITESPACE"," ",278],"\/",["T_WHITESPACE"," ",278],["T_VARIABLE","$qtyIncrements",278],")",["T_WHITESPACE"," ",278],"*",["T_WHITESPACE"," ",278],["T_VARIABLE","$qtyIncrements",278],";",["T_WHITESPACE","\n\n        ",278],["T_VARIABLE","$maxQty",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_STRING","min",280],"(",["T_VARIABLE","$stockItem",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getQty",280],"(",")",["T_WHITESPACE"," ",280],"-",["T_WHITESPACE"," ",280],["T_VARIABLE","$stockItem",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getMinQty",280],"(",")",",",["T_WHITESPACE"," ",280],["T_VARIABLE","$stockItem",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getMaxSaleQty",280],"(",")",")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$divisibleMax",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","floor",281],"(",["T_VARIABLE","$maxQty",281],["T_WHITESPACE"," ",281],"\/",["T_WHITESPACE"," ",281],["T_VARIABLE","$qtyIncrements",281],")",["T_WHITESPACE"," ",281],"*",["T_WHITESPACE"," ",281],["T_VARIABLE","$qtyIncrements",281],";",["T_WHITESPACE","\n\n        ",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$qty",283],["T_WHITESPACE"," ",283],"<",["T_WHITESPACE"," ",283],["T_VARIABLE","$minQty",283],["T_WHITESPACE"," ",283],["T_BOOLEAN_OR","||",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$qty",283],["T_WHITESPACE"," ",283],">",["T_WHITESPACE"," ",283],["T_VARIABLE","$maxQty",283],["T_WHITESPACE"," ",283],["T_BOOLEAN_OR","||",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$divisibleMin",283],["T_WHITESPACE"," ",283],">",["T_WHITESPACE"," ",283],["T_VARIABLE","$divisibleMax",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_COMMENT","\/\/ Do not perform rounding for qty that does not satisfy min\/max conditions to not confuse customer\n",284],["T_WHITESPACE","            ",285],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$qty",285],";",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE","\n\n        ",286],["T_COMMENT","\/\/ Suggest value closest to given qty\n",288],["T_WHITESPACE","        ",289],["T_VARIABLE","$closestDivisibleLeft",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","floor",289],"(",["T_VARIABLE","$qty",289],["T_WHITESPACE"," ",289],"\/",["T_WHITESPACE"," ",289],["T_VARIABLE","$qtyIncrements",289],")",["T_WHITESPACE"," ",289],"*",["T_WHITESPACE"," ",289],["T_VARIABLE","$qtyIncrements",289],";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$closestDivisibleRight",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$closestDivisibleLeft",290],["T_WHITESPACE"," ",290],"+",["T_WHITESPACE"," ",290],["T_VARIABLE","$qtyIncrements",290],";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$acceptableLeft",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_STRING","min",291],"(",["T_STRING","max",291],"(",["T_VARIABLE","$divisibleMin",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$closestDivisibleLeft",291],")",",",["T_WHITESPACE"," ",291],["T_VARIABLE","$divisibleMax",291],")",";",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$acceptableRight",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","max",292],"(",["T_STRING","min",292],"(",["T_VARIABLE","$divisibleMax",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$closestDivisibleRight",292],")",",",["T_WHITESPACE"," ",292],["T_VARIABLE","$divisibleMin",292],")",";",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_STRING","abs",293],"(",["T_VARIABLE","$acceptableLeft",293],["T_WHITESPACE"," ",293],"-",["T_WHITESPACE"," ",293],["T_VARIABLE","$qty",293],")",["T_WHITESPACE"," ",293],"<",["T_WHITESPACE"," ",293],["T_STRING","abs",293],"(",["T_VARIABLE","$acceptableRight",293],["T_WHITESPACE"," ",293],"-",["T_WHITESPACE"," ",293],["T_VARIABLE","$qty",293],")",["T_WHITESPACE"," ",293],"?",["T_WHITESPACE"," ",293],["T_VARIABLE","$acceptableLeft",293],["T_WHITESPACE"," ",293],":",["T_WHITESPACE"," ",293],["T_VARIABLE","$acceptableRight",293],";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * @param StockItemInterface $stockItem\n     * @param float|int $qty\n     * @return \\Magento\\Framework\\DataObject\n     *\/",296],["T_WHITESPACE","\n    ",300],["T_PUBLIC","public",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","checkQtyIncrements",301],"(",["T_STRING","StockItemInterface",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$stockItem",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$qty",301],")",["T_WHITESPACE","\n    ",301],"{",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$result",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_NEW","new",303],["T_WHITESPACE"," ",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Magento",303],["T_NS_SEPARATOR","\\",303],["T_STRING","Framework",303],["T_NS_SEPARATOR","\\",303],["T_STRING","DataObject",303],"(",")",";",["T_WHITESPACE","\n        ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$stockItem",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getSuppressCheckQtyIncrements",304],"(",")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$result",305],";",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE","\n\n        ",306],["T_VARIABLE","$qtyIncrements",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$stockItem",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getQtyIncrements",308],"(",")",["T_WHITESPACE"," ",308],"*",["T_WHITESPACE"," ",308],["T_LNUMBER","1",308],";",["T_WHITESPACE","\n\n        ",308],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$qtyIncrements",310],["T_WHITESPACE"," ",310],["T_BOOLEAN_AND","&&",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","mathDivision",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getExactDivision",310],"(",["T_VARIABLE","$qty",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$qtyIncrements",310],")",["T_WHITESPACE"," ",310],["T_IS_NOT_EQUAL","!=",310],["T_WHITESPACE"," ",310],["T_LNUMBER","0",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n            ",310],["T_VARIABLE","$result",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","setHasError",311],"(",["T_STRING","true",311],")",["T_WHITESPACE","\n                ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","setQuoteMessage",312],"(",["T_STRING","__",312],"(",["T_CONSTANT_ENCAPSED_STRING","'Please correct the quantity for some products.'",312],")",")",["T_WHITESPACE","\n                ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","setErrorCode",313],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_increments'",313],")",["T_WHITESPACE","\n                ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","setQuoteMessageIndex",314],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",314],")",";",["T_WHITESPACE","\n            ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$stockItem",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getIsChildItem",315],"(",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                ",315],["T_VARIABLE","$result",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","setMessage",316],"(",["T_WHITESPACE","\n                    ",316],["T_STRING","__",317],"(",["T_WHITESPACE","\n                        ",317],["T_CONSTANT_ENCAPSED_STRING","'You can buy %1 only in quantities of %2 at a time.'",318],",",["T_WHITESPACE","\n                        ",318],["T_VARIABLE","$stockItem",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getProductName",319],"(",")",",",["T_WHITESPACE","\n                        ",319],["T_VARIABLE","$qtyIncrements",320],["T_WHITESPACE","\n                    ",320],")",["T_WHITESPACE","\n                ",321],")",";",["T_WHITESPACE","\n            ",322],"}",["T_WHITESPACE"," ",323],["T_ELSE","else",323],["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                ",323],["T_VARIABLE","$result",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","setMessage",324],"(",["T_STRING","__",324],"(",["T_CONSTANT_ENCAPSED_STRING","'You can buy this product only in quantities of %1 at a time.'",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$qtyIncrements",324],")",")",";",["T_WHITESPACE","\n            ",324],"}",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n        ",326],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$result",327],";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Retrieve stock qty whether product is composite or no\n     *\n     * @param StockItemInterface $stockItem\n     * @return float\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",330],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","getStockQty",338],"(",["T_STRING","StockItemInterface",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$stockItem",338],")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_IF","if",340],["T_WHITESPACE"," ",340],"(","!",["T_VARIABLE","$stockItem",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","hasStockQty",340],"(",")",")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$stockItem",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","setStockQty",341],"(",["T_LNUMBER","0",341],")",";",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$product",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","productFactory",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","create",342],"(",")",";",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$product",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","load",343],"(",["T_VARIABLE","$stockItem",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getProductId",343],"(",")",")",";",["T_WHITESPACE","\n            ",343],["T_COMMENT","\/\/ prevent possible recursive loop\n",344],["T_WHITESPACE","            ",345],["T_IF","if",345],["T_WHITESPACE"," ",345],"(","!",["T_VARIABLE","$product",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","isComposite",345],"(",")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n                ",345],["T_VARIABLE","$stockQty",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$stockItem",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getQty",346],"(",")",";",["T_WHITESPACE","\n            ",346],"}",["T_WHITESPACE"," ",347],["T_ELSE","else",347],["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n                ",347],["T_VARIABLE","$stockQty",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","null",348],";",["T_WHITESPACE","\n                ",348],["T_VARIABLE","$productsByGroups",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$product",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getTypeInstance",349],"(",")",["T_OBJECT_OPERATOR","->",349],["T_STRING","getProductsToPurchaseByReqGroups",349],"(",["T_VARIABLE","$product",349],")",";",["T_WHITESPACE","\n                ",349],["T_FOREACH","foreach",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$productsByGroups",350],["T_WHITESPACE"," ",350],["T_AS","as",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$productsInGroup",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n                    ",350],["T_VARIABLE","$qty",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_LNUMBER","0",351],";",["T_WHITESPACE","\n                    ",351],["T_FOREACH","foreach",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$productsInGroup",352],["T_WHITESPACE"," ",352],["T_AS","as",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$childProduct",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n                        ",352],["T_VARIABLE","$qty",353],["T_WHITESPACE"," ",353],["T_PLUS_EQUAL","+=",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getStockQty",353],"(",["T_VARIABLE","$stockItem",353],")",";",["T_WHITESPACE","\n                    ",353],"}",["T_WHITESPACE","\n                    ",354],["T_IF","if",355],["T_WHITESPACE"," ",355],"(",["T_STRING","null",355],["T_WHITESPACE"," ",355],["T_IS_IDENTICAL","===",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$stockQty",355],["T_WHITESPACE"," ",355],["T_BOOLEAN_OR","||",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$qty",355],["T_WHITESPACE"," ",355],"<",["T_WHITESPACE"," ",355],["T_VARIABLE","$stockQty",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n                        ",355],["T_VARIABLE","$stockQty",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$qty",356],";",["T_WHITESPACE","\n                    ",356],"}",["T_WHITESPACE","\n                ",357],"}",["T_WHITESPACE","\n            ",358],"}",["T_WHITESPACE","\n            ",359],["T_VARIABLE","$stockQty",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_DOUBLE_CAST","(float)",360],["T_VARIABLE","$stockQty",360],";",["T_WHITESPACE","\n            ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(",["T_VARIABLE","$stockQty",361],["T_WHITESPACE"," ",361],"<",["T_WHITESPACE"," ",361],["T_LNUMBER","0",361],["T_WHITESPACE"," ",361],["T_BOOLEAN_OR","||",361],["T_WHITESPACE"," ",361],"!",["T_VARIABLE","$stockItem",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getManageStock",361],"(",")",["T_WHITESPACE"," ",361],["T_BOOLEAN_OR","||",361],["T_WHITESPACE"," ",361],"!",["T_VARIABLE","$stockItem",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getIsInStock",361],"(",")",["T_WHITESPACE","\n                ",361],["T_BOOLEAN_OR","||",362],["T_WHITESPACE"," ",362],"!",["T_VARIABLE","$product",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","isSaleable",362],"(",")",["T_WHITESPACE","\n            ",362],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                ",363],["T_VARIABLE","$stockQty",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_LNUMBER","0",364],";",["T_WHITESPACE","\n            ",364],"}",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$stockItem",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","setStockQty",366],"(",["T_VARIABLE","$stockQty",366],")",";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n        ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_DOUBLE_CAST","(float)",368],["T_VARIABLE","$stockItem",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getData",368],"(",["T_CONSTANT_ENCAPSED_STRING","'stock_qty'",368],")",";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_DOC_COMMENT","\/**\n     * @param string|float|int|null $qty\n     * @return float|null\n     *\/",371],["T_WHITESPACE","\n    ",374],["T_PROTECTED","protected",375],["T_WHITESPACE"," ",375],["T_FUNCTION","function",375],["T_WHITESPACE"," ",375],["T_STRING","getNumber",375],"(",["T_VARIABLE","$qty",375],")",["T_WHITESPACE","\n    ",375],"{",["T_WHITESPACE","\n        ",376],["T_IF","if",377],["T_WHITESPACE"," ",377],"(","!",["T_STRING","is_numeric",377],"(",["T_VARIABLE","$qty",377],")",")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n            ",377],["T_VARIABLE","$qty",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","localeFormat",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getNumber",378],"(",["T_VARIABLE","$qty",378],")",";",["T_WHITESPACE","\n            ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$qty",379],";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n        ",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$qty",381],";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n",382],"}",["T_WHITESPACE","\n",383]]
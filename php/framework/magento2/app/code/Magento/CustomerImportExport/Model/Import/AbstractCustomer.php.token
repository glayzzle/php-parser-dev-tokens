[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CustomerImportExport",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Import",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CustomerImportExport",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceModel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Import",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Customer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Storage",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ImportExport",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Import",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ErrorProcessing",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProcessingErrorAggregatorInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Import entity abstract customer model\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",11],["T_WHITESPACE","\n",14],["T_ABSTRACT","abstract",15],["T_WHITESPACE"," ",15],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","AbstractCustomer",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ImportExport",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Import",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Entity",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AbstractEav",15],["T_WHITESPACE","\n",15],"{",["T_WHITESPACE","\n    ",16],["T_COMMENT","\/**#@+\n     * Permanent column names\n     *\n     * Names that begins with underscore is not an attribute. This name convention is for\n     * to avoid interference with same attribute name.\n     *\/",17],["T_WHITESPACE","\n    ",22],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","COLUMN_WEBSITE",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'_website'",23],";",["T_WHITESPACE","\n\n    ",23],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","COLUMN_EMAIL",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'_email'",25],";",["T_WHITESPACE","\n\n    ",25],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","COLUMN_DEFAULT_BILLING",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'default_billing'",27],";",["T_WHITESPACE","\n\n    ",27],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","COLUMN_DEFAULT_SHIPPING",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",29],";",["T_WHITESPACE","\n\n\n    ",29],["T_COMMENT","\/**#@-*\/",32],["T_WHITESPACE","\n\n    ",32],["T_COMMENT","\/**#@+\n     * Error codes\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","ERROR_WEBSITE_IS_EMPTY",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'websiteIsEmpty'",37],";",["T_WHITESPACE","\n\n    ",37],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","ERROR_EMAIL_IS_EMPTY",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'emailIsEmpty'",39],";",["T_WHITESPACE","\n\n    ",39],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","ERROR_INVALID_WEBSITE",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'invalidWebsite'",41],";",["T_WHITESPACE","\n\n    ",41],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","ERROR_INVALID_EMAIL",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'invalidEmail'",43],";",["T_WHITESPACE","\n\n    ",43],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","ERROR_VALUE_IS_REQUIRED",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'valueIsRequired'",45],";",["T_WHITESPACE","\n\n    ",45],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","ERROR_CUSTOMER_NOT_FOUND",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'customerNotFound'",47],";",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/**#@-*\/",49],["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Array of attribute codes which will be ignored in validation and import procedures.\n     * For example, when entity attribute has own validation and import procedures\n     * or just to deny this attribute processing.\n     *\n     * @var string[]\n     *\/",51],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_ignoredAttributes",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'store_id'",58],",",["T_WHITESPACE","\n        ",58],["T_STRING","self",59],["T_DOUBLE_COLON","::",59],["T_STRING","COLUMN_DEFAULT_BILLING",59],",",["T_WHITESPACE"," ",59],["T_STRING","self",59],["T_DOUBLE_COLON","::",59],["T_STRING","COLUMN_DEFAULT_SHIPPING",59],"]",";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Customer collection wrapper\n     *\n     * @var Storage\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_customerStorage",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CustomerImportExport\\Model\\ResourceModel\\Import\\Customer\\StorageFactory\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_storageFactory",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * If we should check column names\n     *\n     * @var bool\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$needColumnCheck",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","true",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$masterAttributeCode",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'_email'",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Stdlib\\StringUtils $string\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\ImportExport\\Model\\ImportFactory $importFactory\n     * @param \\Magento\\ImportExport\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param ProcessingErrorAggregatorInterface $errorAggregator\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\ImportExport\\Model\\Export\\Factory $collectionFactory\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\CustomerImportExport\\Model\\ResourceModel\\Import\\Customer\\StorageFactory $storageFactory\n     * @param array $data\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",85],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","__construct",99],"(",["T_WHITESPACE","\n        ",99],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Framework",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Stdlib",100],["T_NS_SEPARATOR","\\",100],["T_STRING","StringUtils",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$string",100],",",["T_WHITESPACE","\n        ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Magento",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Framework",101],["T_NS_SEPARATOR","\\",101],["T_STRING","App",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Config",101],["T_NS_SEPARATOR","\\",101],["T_STRING","ScopeConfigInterface",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$scopeConfig",101],",",["T_WHITESPACE","\n        ",101],["T_NS_SEPARATOR","\\",102],["T_STRING","Magento",102],["T_NS_SEPARATOR","\\",102],["T_STRING","ImportExport",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Model",102],["T_NS_SEPARATOR","\\",102],["T_STRING","ImportFactory",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$importFactory",102],",",["T_WHITESPACE","\n        ",102],["T_NS_SEPARATOR","\\",103],["T_STRING","Magento",103],["T_NS_SEPARATOR","\\",103],["T_STRING","ImportExport",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Model",103],["T_NS_SEPARATOR","\\",103],["T_STRING","ResourceModel",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Helper",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$resourceHelper",103],",",["T_WHITESPACE","\n        ",103],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Framework",104],["T_NS_SEPARATOR","\\",104],["T_STRING","App",104],["T_NS_SEPARATOR","\\",104],["T_STRING","ResourceConnection",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$resource",104],",",["T_WHITESPACE","\n        ",104],["T_STRING","ProcessingErrorAggregatorInterface",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$errorAggregator",105],",",["T_WHITESPACE","\n        ",105],["T_NS_SEPARATOR","\\",106],["T_STRING","Magento",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Store",106],["T_NS_SEPARATOR","\\",106],["T_STRING","Model",106],["T_NS_SEPARATOR","\\",106],["T_STRING","StoreManagerInterface",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$storeManager",106],",",["T_WHITESPACE","\n        ",106],["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","ImportExport",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Model",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Export",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Factory",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$collectionFactory",107],",",["T_WHITESPACE","\n        ",107],["T_NS_SEPARATOR","\\",108],["T_STRING","Magento",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Eav",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Model",108],["T_NS_SEPARATOR","\\",108],["T_STRING","Config",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$eavConfig",108],",",["T_WHITESPACE","\n        ",108],["T_NS_SEPARATOR","\\",109],["T_STRING","Magento",109],["T_NS_SEPARATOR","\\",109],["T_STRING","CustomerImportExport",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Model",109],["T_NS_SEPARATOR","\\",109],["T_STRING","ResourceModel",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Import",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Customer",109],["T_NS_SEPARATOR","\\",109],["T_STRING","StorageFactory",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$storageFactory",109],",",["T_WHITESPACE","\n        ",109],["T_ARRAY","array",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$data",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],"[","]",["T_WHITESPACE","\n    ",110],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_storageFactory",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$storageFactory",112],";",["T_WHITESPACE","\n        ",112],["T_STRING","parent",113],["T_DOUBLE_COLON","::",113],["T_STRING","__construct",113],"(",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$string",114],",",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$scopeConfig",115],",",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$importFactory",116],",",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$resourceHelper",117],",",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$resource",118],",",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$errorAggregator",119],",",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$storeManager",120],",",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$collectionFactory",121],",",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$eavConfig",122],",",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$data",123],["T_WHITESPACE","\n        ",123],")",";",["T_WHITESPACE","\n\n        ",124],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","addMessageTemplate",126],"(",["T_STRING","self",126],["T_DOUBLE_COLON","::",126],["T_STRING","ERROR_WEBSITE_IS_EMPTY",126],",",["T_WHITESPACE"," ",126],["T_STRING","__",126],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify a website.'",126],")",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","addMessageTemplate",127],"(",["T_STRING","self",127],["T_DOUBLE_COLON","::",127],["T_STRING","ERROR_EMAIL_IS_EMPTY",127],",",["T_WHITESPACE"," ",127],["T_STRING","__",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify an email.'",127],")",")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","addMessageTemplate",128],"(",["T_STRING","self",128],["T_DOUBLE_COLON","::",128],["T_STRING","ERROR_INVALID_WEBSITE",128],",",["T_WHITESPACE"," ",128],["T_STRING","__",128],"(",["T_CONSTANT_ENCAPSED_STRING","'We found an invalid value in a website column.'",128],")",")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","addMessageTemplate",129],"(",["T_STRING","self",129],["T_DOUBLE_COLON","::",129],["T_STRING","ERROR_INVALID_EMAIL",129],",",["T_WHITESPACE"," ",129],["T_STRING","__",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a valid email.'",129],")",")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","addMessageTemplate",130],"(",["T_STRING","self",130],["T_DOUBLE_COLON","::",130],["T_STRING","ERROR_VALUE_IS_REQUIRED",130],",",["T_WHITESPACE"," ",130],["T_STRING","__",130],"(",["T_CONSTANT_ENCAPSED_STRING","'Please make sure attribute \"%s\" is not empty.'",130],")",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","addMessageTemplate",131],"(",["T_WHITESPACE","\n            ",131],["T_STRING","self",132],["T_DOUBLE_COLON","::",132],["T_STRING","ERROR_CUSTOMER_NOT_FOUND",132],",",["T_WHITESPACE","\n            ",132],["T_STRING","__",133],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find a customer who matches this email and website code.'",133],")",["T_WHITESPACE","\n        ",133],")",";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_initCustomers",136],"(",["T_VARIABLE","$data",136],")",["T_OBJECT_OPERATOR","->",136],["T_STRING","_initWebsites",136],"(",["T_STRING","true",136],")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Initialize existent customers data\n     *\n     * @param array $data\n     * @return $this\n     *\/",139],["T_WHITESPACE","\n    ",144],["T_PROTECTED","protected",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","_initCustomers",145],"(",["T_ARRAY","array",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$data",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_ISSET","isset",147],"(",["T_VARIABLE","$data",147],"[",["T_CONSTANT_ENCAPSED_STRING","'page_size'",147],"]",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$data",148],"[",["T_CONSTANT_ENCAPSED_STRING","'page_size'",148],"]",["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_pageSize",148],";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_customerStorage",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_ISSET","isset",150],"(",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$data",151],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_storage'",151],"]",["T_WHITESPACE","\n        ",151],")",["T_WHITESPACE"," ",152],"?",["T_WHITESPACE"," ",152],["T_VARIABLE","$data",152],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_storage'",152],"]",["T_WHITESPACE"," ",152],":",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_storageFactory",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","create",152],"(",["T_WHITESPACE","\n            ",152],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$data",153],"]",["T_WHITESPACE","\n        ",153],")",";",["T_WHITESPACE","\n\n        ",154],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Get customer id if customer is present in database\n     *\n     * @param string $email\n     * @param string $websiteCode\n     * @return bool|int\n     *\/",159],["T_WHITESPACE","\n    ",165],["T_PROTECTED","protected",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","_getCustomerId",166],"(",["T_VARIABLE","$email",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$websiteCode",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$email",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","strtolower",168],"(",["T_STRING","trim",168],"(",["T_VARIABLE","$email",168],")",")",";",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_ISSET","isset",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_websiteCodeToId",169],"[",["T_VARIABLE","$websiteCode",169],"]",")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$websiteId",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_websiteCodeToId",170],"[",["T_VARIABLE","$websiteCode",170],"]",";",["T_WHITESPACE","\n            ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_customerStorage",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getCustomerId",171],"(",["T_VARIABLE","$email",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$websiteId",171],")",";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n\n        ",172],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","false",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Validate data row\n     *\n     * @param array $rowData\n     * @param int $rowNumber\n     * @return bool\n     *\/",177],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","validateRow",184],"(",["T_ARRAY","array",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$rowData",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$rowNumber",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_ISSET","isset",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_validatedRows",186],"[",["T_VARIABLE","$rowNumber",186],"]",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_COMMENT","\/\/ check that row is already validated\n",187],["T_WHITESPACE","            ",188],["T_RETURN","return",188],["T_WHITESPACE"," ",188],"!",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getErrorAggregator",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","isRowInvalid",188],"(",["T_VARIABLE","$rowNumber",188],")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_validatedRows",190],"[",["T_VARIABLE","$rowNumber",190],"]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","true",190],";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_processedEntitiesCount",191],["T_INC","++",191],";",["T_WHITESPACE","\n        ",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getBehavior",192],"(",["T_VARIABLE","$rowData",192],")",["T_WHITESPACE"," ",192],["T_IS_EQUAL","==",192],["T_WHITESPACE"," ",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Magento",192],["T_NS_SEPARATOR","\\",192],["T_STRING","ImportExport",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Model",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Import",192],["T_DOUBLE_COLON","::",192],["T_STRING","BEHAVIOR_ADD_UPDATE",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_validateRowForUpdate",193],"(",["T_VARIABLE","$rowData",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$rowNumber",193],")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE"," ",194],["T_ELSEIF","elseif",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getBehavior",194],"(",["T_VARIABLE","$rowData",194],")",["T_WHITESPACE"," ",194],["T_IS_EQUAL","==",194],["T_WHITESPACE"," ",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","ImportExport",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Model",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Import",194],["T_DOUBLE_COLON","::",194],["T_STRING","BEHAVIOR_DELETE",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_validateRowForDelete",195],"(",["T_VARIABLE","$rowData",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$rowNumber",195],")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],"!",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getErrorAggregator",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","isRowInvalid",198],"(",["T_VARIABLE","$rowNumber",198],")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Validate data row for add\/update behaviour\n     *\n     * @param array $rowData\n     * @param int $rowNumber\n     * @return null\n     *\/",201],["T_WHITESPACE","\n    ",207],["T_ABSTRACT","abstract",208],["T_WHITESPACE"," ",208],["T_PROTECTED","protected",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","_validateRowForUpdate",208],"(",["T_ARRAY","array",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$rowData",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$rowNumber",208],")",";",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Validate data row for delete behaviour\n     *\n     * @param array $rowData\n     * @param int $rowNumber\n     * @return null\n     *\/",210],["T_WHITESPACE","\n    ",216],["T_ABSTRACT","abstract",217],["T_WHITESPACE"," ",217],["T_PROTECTED","protected",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","_validateRowForDelete",217],"(",["T_ARRAY","array",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$rowData",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$rowNumber",217],")",";",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * General check of unique key\n     *\n     * @param array $rowData\n     * @param int $rowNumber\n     * @return bool\n     *\/",219],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","_checkUniqueKey",226],"(",["T_ARRAY","array",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$rowData",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$rowNumber",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_EMPTY","empty",228],"(",["T_VARIABLE","$rowData",228],"[",["T_STATIC","static",228],["T_DOUBLE_COLON","::",228],["T_STRING","COLUMN_WEBSITE",228],"]",")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","addRowError",229],"(",["T_STATIC","static",229],["T_DOUBLE_COLON","::",229],["T_STRING","ERROR_WEBSITE_IS_EMPTY",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$rowNumber",229],",",["T_WHITESPACE"," ",229],["T_STATIC","static",229],["T_DOUBLE_COLON","::",229],["T_STRING","COLUMN_WEBSITE",229],")",";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE"," ",230],["T_ELSEIF","elseif",230],["T_WHITESPACE"," ",230],"(",["T_EMPTY","empty",230],"(",["T_VARIABLE","$rowData",230],"[",["T_STATIC","static",230],["T_DOUBLE_COLON","::",230],["T_STRING","COLUMN_EMAIL",230],"]",")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","addRowError",231],"(",["T_STATIC","static",231],["T_DOUBLE_COLON","::",231],["T_STRING","ERROR_EMAIL_IS_EMPTY",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$rowNumber",231],",",["T_WHITESPACE"," ",231],["T_STATIC","static",231],["T_DOUBLE_COLON","::",231],["T_STRING","COLUMN_EMAIL",231],")",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE"," ",232],["T_ELSE","else",232],["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$email",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","strtolower",233],"(",["T_VARIABLE","$rowData",233],"[",["T_STATIC","static",233],["T_DOUBLE_COLON","::",233],["T_STRING","COLUMN_EMAIL",233],"]",")",";",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$website",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$rowData",234],"[",["T_STATIC","static",234],["T_DOUBLE_COLON","::",234],["T_STRING","COLUMN_WEBSITE",234],"]",";",["T_WHITESPACE","\n\n            ",234],["T_IF","if",236],["T_WHITESPACE"," ",236],"(","!",["T_NS_SEPARATOR","\\",236],["T_STRING","Zend_Validate",236],["T_DOUBLE_COLON","::",236],["T_STRING","is",236],"(",["T_VARIABLE","$email",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'EmailAddress'",236],")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","addRowError",237],"(",["T_STATIC","static",237],["T_DOUBLE_COLON","::",237],["T_STRING","ERROR_INVALID_EMAIL",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$rowNumber",237],",",["T_WHITESPACE"," ",237],["T_STATIC","static",237],["T_DOUBLE_COLON","::",237],["T_STRING","COLUMN_EMAIL",237],")",";",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE"," ",238],["T_ELSEIF","elseif",238],["T_WHITESPACE"," ",238],"(","!",["T_ISSET","isset",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_websiteCodeToId",238],"[",["T_VARIABLE","$website",238],"]",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","addRowError",239],"(",["T_STATIC","static",239],["T_DOUBLE_COLON","::",239],["T_STRING","ERROR_INVALID_WEBSITE",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$rowNumber",239],",",["T_WHITESPACE"," ",239],["T_STATIC","static",239],["T_DOUBLE_COLON","::",239],["T_STRING","COLUMN_WEBSITE",239],")",";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n        ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],"!",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getErrorAggregator",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","isRowInvalid",242],"(",["T_VARIABLE","$rowNumber",242],")",";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * Get customer storage\n     *\n     * @return Storage\n     *\/",245],["T_WHITESPACE","\n    ",249],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","getCustomerStorage",250],"(",")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_customerStorage",252],";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n",253],"}",["T_WHITESPACE","\n",254]]
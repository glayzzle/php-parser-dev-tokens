[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CustomerImportExport",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Import",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ImportExport",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Import",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ErrorProcessing",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProcessingErrorAggregatorInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",10],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","Address",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","AbstractCustomer",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_COMMENT","\/**#@+\n     * Attribute collection name\n     *\/",16],["T_WHITESPACE","\n    ",18],["T_CONST","const",19],["T_WHITESPACE"," ",19],["T_STRING","ATTRIBUTE_COLLECTION_NAME",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Customer",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ResourceModel",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Address",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Attribute",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Collection",19],["T_DOUBLE_COLON","::",19],["T_CLASS","class",19],";",["T_WHITESPACE","\n\n    ",19],["T_COMMENT","\/**#@-*\/",21],["T_WHITESPACE","\n\n    ",21],["T_COMMENT","\/**#@+\n     * Permanent column names\n     *\n     * Names that begins with underscore is not an attribute.\n     * This name convention is for to avoid interference with same attribute name.\n     *\/",23],["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","COLUMN_EMAIL",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'_email'",29],";",["T_WHITESPACE","\n\n    ",29],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","COLUMN_ADDRESS_ID",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'_entity_id'",31],";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/**#@-*\/",33],["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/**#@+\n     * Required column names\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","COLUMN_REGION",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'region'",38],";",["T_WHITESPACE","\n\n    ",38],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","COLUMN_COUNTRY_ID",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'country_id'",40],";",["T_WHITESPACE","\n\n    ",40],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","COLUMN_POSTCODE",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'postcode'",42],";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/**#@-*\/",44],["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/**#@+\n     * Particular columns that contains of customer default addresses\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","COLUMN_DEFAULT_BILLING",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'_address_default_billing_'",49],";",["T_WHITESPACE","\n\n    ",49],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","COLUMN_DEFAULT_SHIPPING",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'_address_default_shipping_'",51],";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/**#@-*\/",53],["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/**#@+\n     * Error codes\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","ERROR_ADDRESS_ID_IS_EMPTY",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'addressIdIsEmpty'",58],";",["T_WHITESPACE","\n\n    ",58],["T_CONST","const",60],["T_WHITESPACE"," ",60],["T_STRING","ERROR_ADDRESS_NOT_FOUND",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'addressNotFound'",60],";",["T_WHITESPACE","\n\n    ",60],["T_CONST","const",62],["T_WHITESPACE"," ",62],["T_STRING","ERROR_INVALID_REGION",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'invalidRegion'",62],";",["T_WHITESPACE","\n\n    ",62],["T_CONST","const",64],["T_WHITESPACE"," ",64],["T_STRING","ERROR_DUPLICATE_PK",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'duplicateAddressId'",64],";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/**#@-*\/",66],["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Default addresses column names to appropriate customer attribute code\n     *\n     * @var array\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_STATIC","static",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_defaultAddressAttributeMapping",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],"[",["T_WHITESPACE","\n        ",73],["T_STRING","self",74],["T_DOUBLE_COLON","::",74],["T_STRING","COLUMN_DEFAULT_BILLING",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'default_billing'",74],",",["T_WHITESPACE","\n        ",74],["T_STRING","self",75],["T_DOUBLE_COLON","::",75],["T_STRING","COLUMN_DEFAULT_SHIPPING",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",75],",",["T_WHITESPACE","\n    ",75],"]",";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Permanent entity columns\n     *\n     * @var string[]\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$_permanentAttributes",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"[",["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_STRING","COLUMN_WEBSITE",83],",",["T_WHITESPACE"," ",83],["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_STRING","COLUMN_EMAIL",83],",",["T_WHITESPACE"," ",83],["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_STRING","COLUMN_ADDRESS_ID",83],"]",";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Existing addresses\n     *\n     * Example Array: [customer ID] => array(\n     *     address ID 1,\n     *     address ID 2,\n     *     ...\n     *     address ID N\n     * )\n     *\n     * @var array\n     *\/",85],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$_addresses",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],"[","]",";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Attributes with index (not label) value\n     *\n     * @var string[]\n     *\/",99],["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$_indexValueAttributes",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[",["T_STRING","self",104],["T_DOUBLE_COLON","::",104],["T_STRING","COLUMN_COUNTRY_ID",104],"]",";",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Customer entity DB table name\n     *\n     * @var string\n     *\/",106],["T_WHITESPACE","\n    ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$_entityTable",111],";",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Countries and regions\n     *\n     * Example array: array(\n     *   [country_id_lowercased_1] => array(\n     *     [region_code_lowercased_1]         => region_id_1,\n     *     [region_default_name_lowercased_1] => region_id_1,\n     *     ...,\n     *     [region_code_lowercased_n]         => region_id_n,\n     *     [region_default_name_lowercased_n] => region_id_n\n     *   ),\n     *   ...\n     * )\n     *\n     * @var array\n     *\/",113],["T_WHITESPACE","\n    ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$_countryRegions",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],"[","]",";",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Region ID to region default name pairs\n     *\n     * @var array\n     *\/",131],["T_WHITESPACE","\n    ",135],["T_PROTECTED","protected",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$_regions",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],"[","]",";",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning\n     *\n     * @var string[]\n     *\/",138],["T_WHITESPACE","\n    ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$_specialAttributes",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],"[",["T_WHITESPACE","\n        ",143],["T_STRING","self",144],["T_DOUBLE_COLON","::",144],["T_STRING","COLUMN_ACTION",144],",",["T_WHITESPACE","\n        ",144],["T_STRING","self",145],["T_DOUBLE_COLON","::",145],["T_STRING","COLUMN_WEBSITE",145],",",["T_WHITESPACE","\n        ",145],["T_STRING","self",146],["T_DOUBLE_COLON","::",146],["T_STRING","COLUMN_EMAIL",146],",",["T_WHITESPACE","\n        ",146],["T_STRING","self",147],["T_DOUBLE_COLON","::",147],["T_STRING","COLUMN_ADDRESS_ID",147],",",["T_WHITESPACE","\n        ",147],["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_STRING","COLUMN_DEFAULT_BILLING",148],",",["T_WHITESPACE","\n        ",148],["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_STRING","COLUMN_DEFAULT_SHIPPING",149],",",["T_WHITESPACE","\n    ",149],"]",";",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Customer entity\n     *\n     * @var \\Magento\\Customer\\Model\\Customer\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$_customerEntity",157],";",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Entity ID incremented value\n     *\n     * @var int\n     *\/",159],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$_nextEntityId",164],";",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Array of region parameters\n     *\n     * @var array\n     *\/",166],["T_WHITESPACE","\n    ",170],["T_PROTECTED","protected",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$_regionParameters",171],";",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Address attributes collection\n     *\n     * @var \\Magento\\Customer\\Model\\ResourceModel\\Address\\Attribute\\Collection\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$_attributeCollection",178],";",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Collection of existent addresses\n     *\n     * @var \\Magento\\Customer\\Model\\ResourceModel\\Address\\Collection\n     *\/",180],["T_WHITESPACE","\n    ",184],["T_PROTECTED","protected",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$_addressCollection",185],";",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Store imported row primary keys\n     *\n     * @var array\n     *\/",187],["T_WHITESPACE","\n    ",191],["T_PROTECTED","protected",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$_importedRowPks",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],"[","]",";",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\ImportExport\\Model\\ResourceModel\\Helper\n     *\/",194],["T_WHITESPACE","\n    ",196],["T_PROTECTED","protected",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$_resourceHelper",197],";",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\CustomerFactory\n     *\/",199],["T_WHITESPACE","\n    ",201],["T_PROTECTED","protected",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$_customerFactory",202],";",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Eav\\Model\\Config\n     *\/",204],["T_WHITESPACE","\n    ",206],["T_PROTECTED","protected",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$_eavConfig",207],";",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\AddressFactory\n     *\/",209],["T_WHITESPACE","\n    ",211],["T_PROTECTED","protected",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$_addressFactory",212],";",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\n     *\/",214],["T_WHITESPACE","\n    ",216],["T_PROTECTED","protected",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$dateTime",217],";",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Customer attributes\n     *\n     * @var string[]\n     *\/",219],["T_WHITESPACE","\n    ",223],["T_PROTECTED","protected",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$_customerAttributes",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],"[","]",";",["T_WHITESPACE","\n\n    ",224],["T_DOC_COMMENT","\/**\n     * Valid column names\n     *\n     * @array\n     *\/",226],["T_WHITESPACE","\n    ",230],["T_PROTECTED","protected",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$validColumnNames",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],"[",["T_WHITESPACE","\n        ",231],["T_CONSTANT_ENCAPSED_STRING","\"region_id\"",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","\"vat_is_valid\"",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","\"vat_request_date\"",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","\"vat_request_id\"",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","\"vat_request_success\"",232],["T_WHITESPACE","\n    ",232],"]",";",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Address\\Validator\\Postcode\n     *\/",235],["T_WHITESPACE","\n    ",237],["T_PROTECTED","protected",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$postcodeValidator",238],";",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Stdlib\\StringUtils $string\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\ImportExport\\Model\\ImportFactory $importFactory\n     * @param \\Magento\\ImportExport\\Model\\ResourceModel\\Helper $resourceHelper\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param ProcessingErrorAggregatorInterface $errorAggregator\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\ImportExport\\Model\\Export\\Factory $collectionFactory\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\CustomerImportExport\\Model\\ResourceModel\\Import\\Customer\\StorageFactory $storageFactory\n     * @param \\Magento\\Customer\\Model\\AddressFactory $addressFactory\n     * @param \\Magento\\Directory\\Model\\ResourceModel\\Region\\CollectionFactory $regionColFactory\n     * @param \\Magento\\Customer\\Model\\CustomerFactory $customerFactory\n     * @param \\Magento\\Customer\\Model\\ResourceModel\\Address\\CollectionFactory $addressColFactory\n     * @param \\Magento\\Customer\\Model\\ResourceModel\\Address\\Attribute\\CollectionFactory $attributesFactory\n     * @param \\Magento\\Framework\\Stdlib\\DateTime $dateTime\n     * @param \\Magento\\Customer\\Model\\Address\\Validator\\Postcode $postcodeValidator\n     * @param array $data\n     *\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",240],["T_WHITESPACE","\n    ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","__construct",263],"(",["T_WHITESPACE","\n        ",263],["T_NS_SEPARATOR","\\",264],["T_STRING","Magento",264],["T_NS_SEPARATOR","\\",264],["T_STRING","Framework",264],["T_NS_SEPARATOR","\\",264],["T_STRING","Stdlib",264],["T_NS_SEPARATOR","\\",264],["T_STRING","StringUtils",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$string",264],",",["T_WHITESPACE","\n        ",264],["T_NS_SEPARATOR","\\",265],["T_STRING","Magento",265],["T_NS_SEPARATOR","\\",265],["T_STRING","Framework",265],["T_NS_SEPARATOR","\\",265],["T_STRING","App",265],["T_NS_SEPARATOR","\\",265],["T_STRING","Config",265],["T_NS_SEPARATOR","\\",265],["T_STRING","ScopeConfigInterface",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$scopeConfig",265],",",["T_WHITESPACE","\n        ",265],["T_NS_SEPARATOR","\\",266],["T_STRING","Magento",266],["T_NS_SEPARATOR","\\",266],["T_STRING","ImportExport",266],["T_NS_SEPARATOR","\\",266],["T_STRING","Model",266],["T_NS_SEPARATOR","\\",266],["T_STRING","ImportFactory",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$importFactory",266],",",["T_WHITESPACE","\n        ",266],["T_NS_SEPARATOR","\\",267],["T_STRING","Magento",267],["T_NS_SEPARATOR","\\",267],["T_STRING","ImportExport",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Model",267],["T_NS_SEPARATOR","\\",267],["T_STRING","ResourceModel",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Helper",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$resourceHelper",267],",",["T_WHITESPACE","\n        ",267],["T_NS_SEPARATOR","\\",268],["T_STRING","Magento",268],["T_NS_SEPARATOR","\\",268],["T_STRING","Framework",268],["T_NS_SEPARATOR","\\",268],["T_STRING","App",268],["T_NS_SEPARATOR","\\",268],["T_STRING","ResourceConnection",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$resource",268],",",["T_WHITESPACE","\n        ",268],["T_STRING","ProcessingErrorAggregatorInterface",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$errorAggregator",269],",",["T_WHITESPACE","\n        ",269],["T_NS_SEPARATOR","\\",270],["T_STRING","Magento",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Store",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Model",270],["T_NS_SEPARATOR","\\",270],["T_STRING","StoreManagerInterface",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$storeManager",270],",",["T_WHITESPACE","\n        ",270],["T_NS_SEPARATOR","\\",271],["T_STRING","Magento",271],["T_NS_SEPARATOR","\\",271],["T_STRING","ImportExport",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Model",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Export",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Factory",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$collectionFactory",271],",",["T_WHITESPACE","\n        ",271],["T_NS_SEPARATOR","\\",272],["T_STRING","Magento",272],["T_NS_SEPARATOR","\\",272],["T_STRING","Eav",272],["T_NS_SEPARATOR","\\",272],["T_STRING","Model",272],["T_NS_SEPARATOR","\\",272],["T_STRING","Config",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$eavConfig",272],",",["T_WHITESPACE","\n        ",272],["T_NS_SEPARATOR","\\",273],["T_STRING","Magento",273],["T_NS_SEPARATOR","\\",273],["T_STRING","CustomerImportExport",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Model",273],["T_NS_SEPARATOR","\\",273],["T_STRING","ResourceModel",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Import",273],["T_NS_SEPARATOR","\\",273],["T_STRING","Customer",273],["T_NS_SEPARATOR","\\",273],["T_STRING","StorageFactory",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$storageFactory",273],",",["T_WHITESPACE","\n        ",273],["T_NS_SEPARATOR","\\",274],["T_STRING","Magento",274],["T_NS_SEPARATOR","\\",274],["T_STRING","Customer",274],["T_NS_SEPARATOR","\\",274],["T_STRING","Model",274],["T_NS_SEPARATOR","\\",274],["T_STRING","AddressFactory",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$addressFactory",274],",",["T_WHITESPACE","\n        ",274],["T_NS_SEPARATOR","\\",275],["T_STRING","Magento",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Directory",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Model",275],["T_NS_SEPARATOR","\\",275],["T_STRING","ResourceModel",275],["T_NS_SEPARATOR","\\",275],["T_STRING","Region",275],["T_NS_SEPARATOR","\\",275],["T_STRING","CollectionFactory",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$regionColFactory",275],",",["T_WHITESPACE","\n        ",275],["T_NS_SEPARATOR","\\",276],["T_STRING","Magento",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Customer",276],["T_NS_SEPARATOR","\\",276],["T_STRING","Model",276],["T_NS_SEPARATOR","\\",276],["T_STRING","CustomerFactory",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$customerFactory",276],",",["T_WHITESPACE","\n        ",276],["T_NS_SEPARATOR","\\",277],["T_STRING","Magento",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Customer",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Model",277],["T_NS_SEPARATOR","\\",277],["T_STRING","ResourceModel",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Address",277],["T_NS_SEPARATOR","\\",277],["T_STRING","CollectionFactory",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$addressColFactory",277],",",["T_WHITESPACE","\n        ",277],["T_NS_SEPARATOR","\\",278],["T_STRING","Magento",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Customer",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Model",278],["T_NS_SEPARATOR","\\",278],["T_STRING","ResourceModel",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Address",278],["T_NS_SEPARATOR","\\",278],["T_STRING","Attribute",278],["T_NS_SEPARATOR","\\",278],["T_STRING","CollectionFactory",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$attributesFactory",278],",",["T_WHITESPACE","\n        ",278],["T_NS_SEPARATOR","\\",279],["T_STRING","Magento",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Framework",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Stdlib",279],["T_NS_SEPARATOR","\\",279],["T_STRING","DateTime",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$dateTime",279],",",["T_WHITESPACE","\n        ",279],["T_NS_SEPARATOR","\\",280],["T_STRING","Magento",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Customer",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Model",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Address",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Validator",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Postcode",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$postcodeValidator",280],",",["T_WHITESPACE","\n        ",280],["T_ARRAY","array",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$data",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],"[","]",["T_WHITESPACE","\n    ",281],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_customerFactory",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$customerFactory",283],";",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_addressFactory",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$addressFactory",284],";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_eavConfig",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$eavConfig",285],";",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_resourceHelper",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$resourceHelper",286],";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","dateTime",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$dateTime",287],";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","postcodeValidator",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$postcodeValidator",288],";",["T_WHITESPACE","\n\n        ",288],["T_IF","if",290],["T_WHITESPACE"," ",290],"(","!",["T_ISSET","isset",290],"(",["T_VARIABLE","$data",290],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_collection'",290],"]",")",")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_DOC_COMMENT","\/** @var $attributeCollection \\Magento\\Customer\\Model\\ResourceModel\\Address\\Attribute\\Collection *\/",291],["T_WHITESPACE","\n            ",291],["T_VARIABLE","$attributeCollection",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$attributesFactory",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","create",292],"(",")",";",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$attributeCollection",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","addSystemHiddenFilter",293],"(",")",["T_OBJECT_OPERATOR","->",293],["T_STRING","addExcludeHiddenFrontendFilter",293],"(",")",";",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$data",294],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_collection'",294],"]",["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$attributeCollection",294],";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n        ",295],["T_STRING","parent",296],["T_DOUBLE_COLON","::",296],["T_STRING","__construct",296],"(",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$string",297],",",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$scopeConfig",298],",",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$importFactory",299],",",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$resourceHelper",300],",",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$resource",301],",",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$errorAggregator",302],",",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$storeManager",303],",",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$collectionFactory",304],",",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$eavConfig",305],",",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$storageFactory",306],",",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$data",307],["T_WHITESPACE","\n        ",307],")",";",["T_WHITESPACE","\n\n        ",308],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","_addressCollection",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_ISSET","isset",310],"(",["T_WHITESPACE","\n            ",310],["T_VARIABLE","$data",311],"[",["T_CONSTANT_ENCAPSED_STRING","'address_collection'",311],"]",["T_WHITESPACE","\n        ",311],")",["T_WHITESPACE"," ",312],"?",["T_WHITESPACE"," ",312],["T_VARIABLE","$data",312],"[",["T_CONSTANT_ENCAPSED_STRING","'address_collection'",312],"]",["T_WHITESPACE"," ",312],":",["T_WHITESPACE"," ",312],["T_VARIABLE","$addressColFactory",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","create",312],"(",")",";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_entityTable",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_ISSET","isset",313],"(",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$data",314],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",314],"]",["T_WHITESPACE","\n        ",314],")",["T_WHITESPACE"," ",315],"?",["T_WHITESPACE"," ",315],["T_VARIABLE","$data",315],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",315],"]",["T_WHITESPACE"," ",315],":",["T_WHITESPACE"," ",315],["T_VARIABLE","$addressFactory",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","create",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","getResource",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","getEntityTable",315],"(",")",";",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_regionCollection",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_ISSET","isset",316],"(",["T_WHITESPACE","\n            ",316],["T_VARIABLE","$data",317],"[",["T_CONSTANT_ENCAPSED_STRING","'region_collection'",317],"]",["T_WHITESPACE","\n        ",317],")",["T_WHITESPACE"," ",318],"?",["T_WHITESPACE"," ",318],["T_VARIABLE","$data",318],"[",["T_CONSTANT_ENCAPSED_STRING","'region_collection'",318],"]",["T_WHITESPACE"," ",318],":",["T_WHITESPACE"," ",318],["T_VARIABLE","$regionColFactory",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","create",318],"(",")",";",["T_WHITESPACE","\n\n        ",318],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","addMessageTemplate",320],"(",["T_STRING","self",320],["T_DOUBLE_COLON","::",320],["T_STRING","ERROR_ADDRESS_ID_IS_EMPTY",320],",",["T_WHITESPACE"," ",320],["T_STRING","__",320],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer address id column is not specified'",320],")",")",";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","addMessageTemplate",321],"(",["T_WHITESPACE","\n            ",321],["T_STRING","self",322],["T_DOUBLE_COLON","::",322],["T_STRING","ERROR_ADDRESS_NOT_FOUND",322],",",["T_WHITESPACE","\n            ",322],["T_STRING","__",323],"(",["T_CONSTANT_ENCAPSED_STRING","'We can\\'t find that customer address.'",323],")",["T_WHITESPACE","\n        ",323],")",";",["T_WHITESPACE","\n        ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","addMessageTemplate",325],"(",["T_STRING","self",325],["T_DOUBLE_COLON","::",325],["T_STRING","ERROR_INVALID_REGION",325],",",["T_WHITESPACE"," ",325],["T_STRING","__",325],"(",["T_CONSTANT_ENCAPSED_STRING","'Please enter a valid region.'",325],")",")",";",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","addMessageTemplate",326],"(",["T_WHITESPACE","\n            ",326],["T_STRING","self",327],["T_DOUBLE_COLON","::",327],["T_STRING","ERROR_DUPLICATE_PK",327],",",["T_WHITESPACE","\n            ",327],["T_STRING","__",328],"(",["T_CONSTANT_ENCAPSED_STRING","'We found another row with this email, website and address ID combination.'",328],")",["T_WHITESPACE","\n        ",328],")",";",["T_WHITESPACE","\n\n        ",329],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_initAttributes",331],"(",")",";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_initAddresses",332],"(",")",["T_OBJECT_OPERATOR","->",332],["T_STRING","_initCountryRegions",332],"(",")",";",["T_WHITESPACE","\n    ",332],"}",["T_WHITESPACE","\n\n    ",333],["T_DOC_COMMENT","\/**\n     * Customer entity getter\n     *\n     * @return \\Magento\\Customer\\Model\\Customer\n     *\/",335],["T_WHITESPACE","\n    ",339],["T_PROTECTED","protected",340],["T_WHITESPACE"," ",340],["T_FUNCTION","function",340],["T_WHITESPACE"," ",340],["T_STRING","_getCustomerEntity",340],"(",")",["T_WHITESPACE","\n    ",340],"{",["T_WHITESPACE","\n        ",341],["T_IF","if",342],["T_WHITESPACE"," ",342],"(","!",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_customerEntity",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_customerEntity",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_customerFactory",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","create",343],"(",")",";",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n        ",344],["T_RETURN","return",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_customerEntity",345],";",["T_WHITESPACE","\n    ",345],"}",["T_WHITESPACE","\n\n    ",346],["T_DOC_COMMENT","\/**\n     * Get next address entity ID\n     *\n     * @return int\n     *\/",348],["T_WHITESPACE","\n    ",352],["T_PROTECTED","protected",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","_getNextEntityId",353],"(",")",["T_WHITESPACE","\n    ",353],"{",["T_WHITESPACE","\n        ",354],["T_IF","if",355],["T_WHITESPACE"," ",355],"(","!",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","_nextEntityId",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_DOC_COMMENT","\/** @var $addressResource \\Magento\\Customer\\Model\\ResourceModel\\Address *\/",356],["T_WHITESPACE","\n            ",356],["T_VARIABLE","$addressResource",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_addressFactory",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","create",357],"(",")",["T_OBJECT_OPERATOR","->",357],["T_STRING","getResource",357],"(",")",";",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$addressTable",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$addressResource",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getEntityTable",358],"(",")",";",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","_nextEntityId",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","_resourceHelper",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getNextAutoincrement",359],"(",["T_VARIABLE","$addressTable",359],")",";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n        ",360],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_nextEntityId",361],["T_INC","++",361],";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n\n    ",362],["T_DOC_COMMENT","\/**\n     * Initialize existent addresses data\n     *\n     * @return $this\n     *\/",364],["T_WHITESPACE","\n    ",368],["T_PROTECTED","protected",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","_initAddresses",369],"(",")",["T_WHITESPACE","\n    ",369],"{",["T_WHITESPACE","\n        ",370],["T_DOC_COMMENT","\/** @var $address \\Magento\\Customer\\Model\\Address *\/",371],["T_WHITESPACE","\n        ",371],["T_FOREACH","foreach",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_addressCollection",372],["T_WHITESPACE"," ",372],["T_AS","as",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$address",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$customerId",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$address",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getParentId",373],"(",")",";",["T_WHITESPACE","\n            ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(","!",["T_ISSET","isset",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_addresses",374],"[",["T_VARIABLE","$customerId",374],"]",")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_addresses",375],"[",["T_VARIABLE","$customerId",375],"]",["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],"[","]",";",["T_WHITESPACE","\n            ",375],"}",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$addressId",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$address",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getId",377],"(",")",";",["T_WHITESPACE","\n            ",377],["T_IF","if",378],["T_WHITESPACE"," ",378],"(","!",["T_STRING","in_array",378],"(",["T_VARIABLE","$addressId",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_addresses",378],"[",["T_VARIABLE","$customerId",378],"]",")",")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n                ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_addresses",379],"[",["T_VARIABLE","$customerId",379],"]","[","]",["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$addressId",379],";",["T_WHITESPACE","\n            ",379],"}",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n        ",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],";",["T_WHITESPACE","\n    ",382],"}",["T_WHITESPACE","\n\n    ",383],["T_DOC_COMMENT","\/**\n     * Initialize country regions hash for clever recognition\n     *\n     * @return $this\n     *\/",385],["T_WHITESPACE","\n    ",389],["T_PROTECTED","protected",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","_initCountryRegions",390],"(",")",["T_WHITESPACE","\n    ",390],"{",["T_WHITESPACE","\n        ",391],["T_DOC_COMMENT","\/** @var $region \\Magento\\Directory\\Model\\Region *\/",392],["T_WHITESPACE","\n        ",392],["T_FOREACH","foreach",393],["T_WHITESPACE"," ",393],"(",["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_regionCollection",393],["T_WHITESPACE"," ",393],["T_AS","as",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$region",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$countryNormalized",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_STRING","strtolower",394],"(",["T_VARIABLE","$region",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getCountryId",394],"(",")",")",";",["T_WHITESPACE","\n            ",394],["T_VARIABLE","$regionCode",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_STRING","strtolower",395],"(",["T_VARIABLE","$region",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getCode",395],"(",")",")",";",["T_WHITESPACE","\n            ",395],["T_VARIABLE","$regionName",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_STRING","strtolower",396],"(",["T_VARIABLE","$region",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getDefaultName",396],"(",")",")",";",["T_WHITESPACE","\n            ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_countryRegions",397],"[",["T_VARIABLE","$countryNormalized",397],"]","[",["T_VARIABLE","$regionCode",397],"]",["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$region",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getId",397],"(",")",";",["T_WHITESPACE","\n            ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","_countryRegions",398],"[",["T_VARIABLE","$countryNormalized",398],"]","[",["T_VARIABLE","$regionName",398],"]",["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$region",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getId",398],"(",")",";",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_regions",399],"[",["T_VARIABLE","$region",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getId",399],"(",")","]",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$region",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getDefaultName",399],"(",")",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n        ",400],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],";",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n\n    ",402],["T_DOC_COMMENT","\/**\n     * Import data rows\n     *\n     * @abstract\n     * @return boolean\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     *\/",404],["T_WHITESPACE","\n    ",410],["T_PROTECTED","protected",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","_importData",411],"(",")",["T_WHITESPACE","\n    ",411],"{",["T_WHITESPACE","\n        ",412],["T_WHILE","while",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$bunch",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","_dataSourceModel",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getNextBunch",413],"(",")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_VARIABLE","$newRows",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],"[","]",";",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$updateRows",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],"[","]",";",["T_WHITESPACE","\n            ",415],["T_VARIABLE","$attributes",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],"[","]",";",["T_WHITESPACE","\n            ",416],["T_VARIABLE","$defaults",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],"[","]",";",["T_WHITESPACE","\n            ",417],["T_COMMENT","\/\/ customer default addresses (billing\/shipping) data\n",418],["T_WHITESPACE","            ",419],["T_VARIABLE","$deleteRowIds",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],"[","]",";",["T_WHITESPACE","\n\n            ",419],["T_FOREACH","foreach",421],["T_WHITESPACE"," ",421],"(",["T_VARIABLE","$bunch",421],["T_WHITESPACE"," ",421],["T_AS","as",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$rowNumber",421],["T_WHITESPACE"," ",421],["T_DOUBLE_ARROW","=>",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$rowData",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n                ",421],["T_COMMENT","\/\/ check row data\n",422],["T_WHITESPACE","                ",423],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","_isOptionalAddressEmpty",423],"(",["T_VARIABLE","$rowData",423],")",["T_WHITESPACE"," ",423],["T_BOOLEAN_OR","||",423],["T_WHITESPACE"," ",423],"!",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","validateRow",423],"(",["T_VARIABLE","$rowData",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$rowNumber",423],")",")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n                    ",423],["T_CONTINUE","continue",424],";",["T_WHITESPACE","\n                ",424],"}",["T_WHITESPACE","\n                ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getErrorAggregator",426],"(",")",["T_OBJECT_OPERATOR","->",426],["T_STRING","hasToBeTerminated",426],"(",")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n                    ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getErrorAggregator",427],"(",")",["T_OBJECT_OPERATOR","->",427],["T_STRING","addRowToSkip",427],"(",["T_VARIABLE","$rowNumber",427],")",";",["T_WHITESPACE","\n                    ",427],["T_CONTINUE","continue",428],";",["T_WHITESPACE","\n                ",428],"}",["T_WHITESPACE","\n\n                ",429],["T_IF","if",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","getBehavior",431],"(",["T_VARIABLE","$rowData",431],")",["T_WHITESPACE"," ",431],["T_IS_EQUAL","==",431],["T_WHITESPACE"," ",431],["T_NS_SEPARATOR","\\",431],["T_STRING","Magento",431],["T_NS_SEPARATOR","\\",431],["T_STRING","ImportExport",431],["T_NS_SEPARATOR","\\",431],["T_STRING","Model",431],["T_NS_SEPARATOR","\\",431],["T_STRING","Import",431],["T_DOUBLE_COLON","::",431],["T_STRING","BEHAVIOR_ADD_UPDATE",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n                    ",431],["T_VARIABLE","$addUpdateResult",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_prepareDataForUpdate",432],"(",["T_VARIABLE","$rowData",432],")",";",["T_WHITESPACE","\n                    ",432],["T_IF","if",433],["T_WHITESPACE"," ",433],"(",["T_VARIABLE","$addUpdateResult",433],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_row_new'",433],"]",")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                        ",433],["T_VARIABLE","$newRows",434],"[","]",["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$addUpdateResult",434],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_row_new'",434],"]",";",["T_WHITESPACE","\n                    ",434],"}",["T_WHITESPACE","\n                    ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$addUpdateResult",436],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_row_update'",436],"]",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                        ",436],["T_VARIABLE","$updateRows",437],"[","]",["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$addUpdateResult",437],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_row_update'",437],"]",";",["T_WHITESPACE","\n                    ",437],"}",["T_WHITESPACE","\n                    ",438],["T_VARIABLE","$attributes",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_mergeEntityAttributes",439],"(",["T_VARIABLE","$addUpdateResult",439],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",439],"]",",",["T_WHITESPACE"," ",439],["T_VARIABLE","$attributes",439],")",";",["T_WHITESPACE","\n                    ",439],["T_VARIABLE","$defaults",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","_mergeEntityAttributes",440],"(",["T_VARIABLE","$addUpdateResult",440],"[",["T_CONSTANT_ENCAPSED_STRING","'defaults'",440],"]",",",["T_WHITESPACE"," ",440],["T_VARIABLE","$defaults",440],")",";",["T_WHITESPACE","\n                ",440],"}",["T_WHITESPACE"," ",441],["T_ELSEIF","elseif",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","getBehavior",441],"(",["T_VARIABLE","$rowData",441],")",["T_WHITESPACE"," ",441],["T_IS_EQUAL","==",441],["T_WHITESPACE"," ",441],["T_NS_SEPARATOR","\\",441],["T_STRING","Magento",441],["T_NS_SEPARATOR","\\",441],["T_STRING","ImportExport",441],["T_NS_SEPARATOR","\\",441],["T_STRING","Model",441],["T_NS_SEPARATOR","\\",441],["T_STRING","Import",441],["T_DOUBLE_COLON","::",441],["T_STRING","BEHAVIOR_DELETE",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n                    ",441],["T_VARIABLE","$deleteRowIds",442],"[","]",["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$rowData",442],"[",["T_STRING","self",442],["T_DOUBLE_COLON","::",442],["T_STRING","COLUMN_ADDRESS_ID",442],"]",";",["T_WHITESPACE","\n                ",442],"}",["T_WHITESPACE","\n            ",443],"}",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","updateItemsCounterStats",445],"(",["T_VARIABLE","$newRows",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$updateRows",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$deleteRowIds",445],")",";",["T_WHITESPACE","\n\n            ",445],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_saveAddressEntities",447],"(",["T_WHITESPACE","\n                ",447],["T_VARIABLE","$newRows",448],",",["T_WHITESPACE","\n                ",448],["T_VARIABLE","$updateRows",449],["T_WHITESPACE","\n            ",449],")",["T_OBJECT_OPERATOR","->",450],["T_STRING","_saveAddressAttributes",450],"(",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$attributes",451],["T_WHITESPACE","\n            ",451],")",["T_OBJECT_OPERATOR","->",452],["T_STRING","_saveCustomerDefaults",452],"(",["T_WHITESPACE","\n                ",452],["T_VARIABLE","$defaults",453],["T_WHITESPACE","\n            ",453],")",";",["T_WHITESPACE","\n\n            ",454],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","_deleteAddressEntities",456],"(",["T_VARIABLE","$deleteRowIds",456],")",";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n        ",457],["T_RETURN","return",458],["T_WHITESPACE"," ",458],["T_STRING","true",458],";",["T_WHITESPACE","\n    ",458],"}",["T_WHITESPACE","\n\n    ",459],["T_DOC_COMMENT","\/**\n     * Merge attributes\n     *\n     * @param array $newAttributes\n     * @param array $attributes\n     * @return array\n     *\/",461],["T_WHITESPACE","\n    ",467],["T_PROTECTED","protected",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","_mergeEntityAttributes",468],"(",["T_ARRAY","array",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$newAttributes",468],",",["T_WHITESPACE"," ",468],["T_ARRAY","array",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$attributes",468],")",["T_WHITESPACE","\n    ",468],"{",["T_WHITESPACE","\n        ",469],["T_FOREACH","foreach",470],["T_WHITESPACE"," ",470],"(",["T_VARIABLE","$newAttributes",470],["T_WHITESPACE"," ",470],["T_AS","as",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$tableName",470],["T_WHITESPACE"," ",470],["T_DOUBLE_ARROW","=>",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$tableData",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n            ",470],["T_FOREACH","foreach",471],["T_WHITESPACE"," ",471],"(",["T_VARIABLE","$tableData",471],["T_WHITESPACE"," ",471],["T_AS","as",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$entityId",471],["T_WHITESPACE"," ",471],["T_DOUBLE_ARROW","=>",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$entityData",471],")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n                ",471],["T_FOREACH","foreach",472],["T_WHITESPACE"," ",472],"(",["T_VARIABLE","$entityData",472],["T_WHITESPACE"," ",472],["T_AS","as",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$attributeId",472],["T_WHITESPACE"," ",472],["T_DOUBLE_ARROW","=>",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$attributeValue",472],")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n                    ",472],["T_VARIABLE","$attributes",473],"[",["T_VARIABLE","$tableName",473],"]","[",["T_VARIABLE","$entityId",473],"]","[",["T_VARIABLE","$attributeId",473],"]",["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$attributeValue",473],";",["T_WHITESPACE","\n                ",473],"}",["T_WHITESPACE","\n            ",474],"}",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE","\n        ",476],["T_RETURN","return",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$attributes",477],";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Prepare data for add\/update action\n     *\n     * @param array $rowData\n     * @return array\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",480],["T_WHITESPACE","\n    ",487],["T_PROTECTED","protected",488],["T_WHITESPACE"," ",488],["T_FUNCTION","function",488],["T_WHITESPACE"," ",488],["T_STRING","_prepareDataForUpdate",488],"(",["T_ARRAY","array",488],["T_WHITESPACE"," ",488],["T_VARIABLE","$rowData",488],")",["T_WHITESPACE","\n    ",488],"{",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$email",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","strtolower",490],"(",["T_VARIABLE","$rowData",490],"[",["T_STRING","self",490],["T_DOUBLE_COLON","::",490],["T_STRING","COLUMN_EMAIL",490],"]",")",";",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$customerId",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","_getCustomerId",491],"(",["T_VARIABLE","$email",491],",",["T_WHITESPACE"," ",491],["T_VARIABLE","$rowData",491],"[",["T_STRING","self",491],["T_DOUBLE_COLON","::",491],["T_STRING","COLUMN_WEBSITE",491],"]",")",";",["T_WHITESPACE","\n\n        ",491],["T_COMMENT","\/\/ entity table data\n",493],["T_WHITESPACE","        ",494],["T_VARIABLE","$entityRowNew",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],"[","]",";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$entityRowUpdate",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],"[","]",";",["T_WHITESPACE","\n        ",495],["T_COMMENT","\/\/ attribute values\n",496],["T_WHITESPACE","        ",497],["T_VARIABLE","$attributes",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],"[","]",";",["T_WHITESPACE","\n        ",497],["T_COMMENT","\/\/ customer default addresses\n",498],["T_WHITESPACE","        ",499],["T_VARIABLE","$defaults",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],"[","]",";",["T_WHITESPACE","\n\n        ",499],["T_VARIABLE","$newAddress",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_STRING","true",501],";",["T_WHITESPACE","\n        ",501],["T_COMMENT","\/\/ get address id\n",502],["T_WHITESPACE","        ",503],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_ISSET","isset",503],"(",["T_WHITESPACE","\n            ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","_addresses",504],"[",["T_VARIABLE","$customerId",504],"]",["T_WHITESPACE","\n        ",504],")",["T_WHITESPACE"," ",505],["T_BOOLEAN_AND","&&",505],["T_WHITESPACE"," ",505],["T_STRING","in_array",505],"(",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$rowData",506],"[",["T_STRING","self",506],["T_DOUBLE_COLON","::",506],["T_STRING","COLUMN_ADDRESS_ID",506],"]",",",["T_WHITESPACE","\n            ",506],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","_addresses",507],"[",["T_VARIABLE","$customerId",507],"]",["T_WHITESPACE","\n        ",507],")",["T_WHITESPACE","\n        ",508],")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n            ",509],["T_VARIABLE","$newAddress",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_STRING","false",510],";",["T_WHITESPACE","\n            ",510],["T_VARIABLE","$addressId",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_VARIABLE","$rowData",511],"[",["T_STRING","self",511],["T_DOUBLE_COLON","::",511],["T_STRING","COLUMN_ADDRESS_ID",511],"]",";",["T_WHITESPACE","\n        ",511],"}",["T_WHITESPACE"," ",512],["T_ELSE","else",512],["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$addressId",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","_getNextEntityId",513],"(",")",";",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE","\n        ",514],["T_VARIABLE","$entityRow",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],"[",["T_WHITESPACE","\n            ",515],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",516],["T_WHITESPACE"," ",516],["T_DOUBLE_ARROW","=>",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$addressId",516],",",["T_WHITESPACE","\n            ",516],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",517],["T_WHITESPACE"," ",517],["T_DOUBLE_ARROW","=>",517],["T_WHITESPACE"," ",517],["T_VARIABLE","$customerId",517],",",["T_WHITESPACE","\n            ",517],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",518],["T_WHITESPACE"," ",518],["T_DOUBLE_ARROW","=>",518],["T_WHITESPACE"," ",518],"(",["T_NEW","new",518],["T_WHITESPACE"," ",518],["T_NS_SEPARATOR","\\",518],["T_STRING","DateTime",518],"(",")",")",["T_OBJECT_OPERATOR","->",518],["T_STRING","format",518],"(",["T_NS_SEPARATOR","\\",518],["T_STRING","Magento",518],["T_NS_SEPARATOR","\\",518],["T_STRING","Framework",518],["T_NS_SEPARATOR","\\",518],["T_STRING","Stdlib",518],["T_NS_SEPARATOR","\\",518],["T_STRING","DateTime",518],["T_DOUBLE_COLON","::",518],["T_STRING","DATETIME_PHP_FORMAT",518],")",",",["T_WHITESPACE","\n        ",518],"]",";",["T_WHITESPACE","\n\n        ",519],["T_FOREACH","foreach",521],["T_WHITESPACE"," ",521],"(",["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_attributes",521],["T_WHITESPACE"," ",521],["T_AS","as",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$attributeAlias",521],["T_WHITESPACE"," ",521],["T_DOUBLE_ARROW","=>",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$attributeParams",521],")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n            ",521],["T_IF","if",522],["T_WHITESPACE"," ",522],"(",["T_STRING","array_key_exists",522],"(",["T_VARIABLE","$attributeAlias",522],",",["T_WHITESPACE"," ",522],["T_VARIABLE","$rowData",522],")",")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n                ",522],["T_IF","if",523],["T_WHITESPACE"," ",523],"(","!",["T_STRING","strlen",523],"(",["T_VARIABLE","$rowData",523],"[",["T_VARIABLE","$attributeAlias",523],"]",")",")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n                    ",523],["T_IF","if",524],["T_WHITESPACE"," ",524],"(",["T_VARIABLE","$newAddress",524],")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n                        ",524],["T_VARIABLE","$value",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_STRING","null",525],";",["T_WHITESPACE","\n                    ",525],"}",["T_WHITESPACE"," ",526],["T_ELSE","else",526],["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n                        ",526],["T_CONTINUE","continue",527],";",["T_WHITESPACE","\n                    ",527],"}",["T_WHITESPACE","\n                ",528],"}",["T_WHITESPACE"," ",529],["T_ELSEIF","elseif",529],["T_WHITESPACE"," ",529],"(",["T_VARIABLE","$newAddress",529],["T_WHITESPACE"," ",529],["T_BOOLEAN_AND","&&",529],["T_WHITESPACE"," ",529],"!",["T_STRING","strlen",529],"(",["T_VARIABLE","$rowData",529],"[",["T_VARIABLE","$attributeAlias",529],"]",")",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n\n                ",529],"}",["T_WHITESPACE"," ",531],["T_ELSEIF","elseif",531],["T_WHITESPACE"," ",531],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",531],["T_WHITESPACE"," ",531],["T_IS_EQUAL","==",531],["T_WHITESPACE"," ",531],["T_VARIABLE","$attributeParams",531],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",531],"]",")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n                    ",531],["T_VARIABLE","$value",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$attributeParams",532],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",532],"]","[",["T_STRING","strtolower",532],"(",["T_VARIABLE","$rowData",532],"[",["T_VARIABLE","$attributeAlias",532],"]",")","]",";",["T_WHITESPACE","\n                ",532],"}",["T_WHITESPACE"," ",533],["T_ELSEIF","elseif",533],["T_WHITESPACE"," ",533],"(",["T_CONSTANT_ENCAPSED_STRING","'datetime'",533],["T_WHITESPACE"," ",533],["T_IS_EQUAL","==",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$attributeParams",533],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",533],"]",")",["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n                    ",533],["T_VARIABLE","$value",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],"(",["T_NEW","new",534],["T_WHITESPACE"," ",534],["T_NS_SEPARATOR","\\",534],["T_STRING","DateTime",534],"(",")",")",["T_OBJECT_OPERATOR","->",534],["T_STRING","setTimestamp",534],"(",["T_STRING","strtotime",534],"(",["T_VARIABLE","$rowData",534],"[",["T_VARIABLE","$attributeAlias",534],"]",")",")",";",["T_WHITESPACE","\n                    ",534],["T_VARIABLE","$value",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_VARIABLE","$value",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","format",535],"(",["T_NS_SEPARATOR","\\",535],["T_STRING","Magento",535],["T_NS_SEPARATOR","\\",535],["T_STRING","Framework",535],["T_NS_SEPARATOR","\\",535],["T_STRING","Stdlib",535],["T_NS_SEPARATOR","\\",535],["T_STRING","DateTime",535],["T_DOUBLE_COLON","::",535],["T_STRING","DATETIME_PHP_FORMAT",535],")",";",["T_WHITESPACE","\n                ",535],"}",["T_WHITESPACE"," ",536],["T_ELSE","else",536],["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n                    ",536],["T_VARIABLE","$value",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$rowData",537],"[",["T_VARIABLE","$attributeAlias",537],"]",";",["T_WHITESPACE","\n                ",537],"}",["T_WHITESPACE","\n                ",538],["T_IF","if",539],["T_WHITESPACE"," ",539],"(",["T_VARIABLE","$attributeParams",539],"[",["T_CONSTANT_ENCAPSED_STRING","'is_static'",539],"]",")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n                    ",539],["T_VARIABLE","$entityRow",540],"[",["T_VARIABLE","$attributeAlias",540],"]",["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$value",540],";",["T_WHITESPACE","\n                ",540],"}",["T_WHITESPACE"," ",541],["T_ELSE","else",541],["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n                    ",541],["T_VARIABLE","$attributes",542],"[",["T_VARIABLE","$attributeParams",542],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",542],"]","]","[",["T_VARIABLE","$addressId",542],"]","[",["T_VARIABLE","$attributeParams",542],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",542],"]","]","=",["T_WHITESPACE"," ",542],["T_VARIABLE","$value",542],";",["T_WHITESPACE","\n                ",542],"}",["T_WHITESPACE","\n            ",543],"}",["T_WHITESPACE","\n        ",544],"}",["T_WHITESPACE","\n\n        ",545],["T_FOREACH","foreach",547],["T_WHITESPACE"," ",547],"(",["T_STRING","self",547],["T_DOUBLE_COLON","::",547],["T_STRING","getDefaultAddressAttributeMapping",547],"(",")",["T_WHITESPACE"," ",547],["T_AS","as",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$columnName",547],["T_WHITESPACE"," ",547],["T_DOUBLE_ARROW","=>",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$attributeCode",547],")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n            ",547],["T_IF","if",548],["T_WHITESPACE"," ",548],"(","!",["T_EMPTY","empty",548],"(",["T_VARIABLE","$rowData",548],"[",["T_VARIABLE","$columnName",548],"]",")",")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n                ",548],["T_DOC_COMMENT","\/** @var $attribute \\Magento\\Eav\\Model\\Entity\\Attribute\\AbstractAttribute *\/",549],["T_WHITESPACE","\n                ",549],["T_VARIABLE","$table",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","_getCustomerEntity",550],"(",")",["T_OBJECT_OPERATOR","->",550],["T_STRING","getResource",550],"(",")",["T_OBJECT_OPERATOR","->",550],["T_STRING","getTable",550],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",550],")",";",["T_WHITESPACE","\n                ",550],["T_VARIABLE","$defaults",551],"[",["T_VARIABLE","$table",551],"]","[",["T_VARIABLE","$customerId",551],"]","[",["T_VARIABLE","$attributeCode",551],"]",["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$addressId",551],";",["T_WHITESPACE","\n            ",551],"}",["T_WHITESPACE","\n        ",552],"}",["T_WHITESPACE","\n\n        ",553],["T_COMMENT","\/\/ let's try to find region ID\n",555],["T_WHITESPACE","        ",556],["T_VARIABLE","$entityRow",556],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",556],"]",["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_STRING","null",556],";",["T_WHITESPACE","\n        ",556],["T_IF","if",557],["T_WHITESPACE"," ",557],"(","!",["T_EMPTY","empty",557],"(",["T_VARIABLE","$rowData",557],"[",["T_STRING","self",557],["T_DOUBLE_COLON","::",557],["T_STRING","COLUMN_REGION",557],"]",")",")",["T_WHITESPACE"," ",557],"{",["T_WHITESPACE","\n            ",557],["T_VARIABLE","$countryNormalized",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_STRING","strtolower",558],"(",["T_VARIABLE","$rowData",558],"[",["T_STRING","self",558],["T_DOUBLE_COLON","::",558],["T_STRING","COLUMN_COUNTRY_ID",558],"]",")",";",["T_WHITESPACE","\n            ",558],["T_VARIABLE","$regionNormalized",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_STRING","strtolower",559],"(",["T_VARIABLE","$rowData",559],"[",["T_STRING","self",559],["T_DOUBLE_COLON","::",559],["T_STRING","COLUMN_REGION",559],"]",")",";",["T_WHITESPACE","\n\n            ",559],["T_IF","if",561],["T_WHITESPACE"," ",561],"(",["T_ISSET","isset",561],"(",["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","_countryRegions",561],"[",["T_VARIABLE","$countryNormalized",561],"]","[",["T_VARIABLE","$regionNormalized",561],"]",")",")",["T_WHITESPACE"," ",561],"{",["T_WHITESPACE","\n                ",561],["T_VARIABLE","$regionId",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","_countryRegions",562],"[",["T_VARIABLE","$countryNormalized",562],"]","[",["T_VARIABLE","$regionNormalized",562],"]",";",["T_WHITESPACE","\n                ",562],["T_VARIABLE","$entityRow",563],"[",["T_STRING","self",563],["T_DOUBLE_COLON","::",563],["T_STRING","COLUMN_REGION",563],"]",["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","_regions",563],"[",["T_VARIABLE","$regionId",563],"]",";",["T_WHITESPACE","\n                ",563],["T_VARIABLE","$entityRow",564],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",564],"]",["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_VARIABLE","$regionId",564],";",["T_WHITESPACE","\n            ",564],"}",["T_WHITESPACE","\n        ",565],"}",["T_WHITESPACE","\n\n        ",566],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_VARIABLE","$newAddress",568],")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n            ",568],["T_VARIABLE","$entityRowNew",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$entityRow",569],";",["T_WHITESPACE","\n            ",569],["T_VARIABLE","$entityRowNew",570],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",570],"]",["T_WHITESPACE"," ",570],"=",["T_WHITESPACE","\n                ",570],"(",["T_NEW","new",571],["T_WHITESPACE"," ",571],["T_NS_SEPARATOR","\\",571],["T_STRING","DateTime",571],"(",")",")",["T_OBJECT_OPERATOR","->",571],["T_STRING","format",571],"(",["T_NS_SEPARATOR","\\",571],["T_STRING","Magento",571],["T_NS_SEPARATOR","\\",571],["T_STRING","Framework",571],["T_NS_SEPARATOR","\\",571],["T_STRING","Stdlib",571],["T_NS_SEPARATOR","\\",571],["T_STRING","DateTime",571],["T_DOUBLE_COLON","::",571],["T_STRING","DATETIME_PHP_FORMAT",571],")",";",["T_WHITESPACE","\n        ",571],"}",["T_WHITESPACE"," ",572],["T_ELSE","else",572],["T_WHITESPACE"," ",572],"{",["T_WHITESPACE","\n            ",572],["T_VARIABLE","$entityRowUpdate",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_VARIABLE","$entityRow",573],";",["T_WHITESPACE","\n        ",573],"}",["T_WHITESPACE","\n\n        ",574],["T_RETURN","return",576],["T_WHITESPACE"," ",576],"[",["T_WHITESPACE","\n            ",576],["T_CONSTANT_ENCAPSED_STRING","'entity_row_new'",577],["T_WHITESPACE"," ",577],["T_DOUBLE_ARROW","=>",577],["T_WHITESPACE"," ",577],["T_VARIABLE","$entityRowNew",577],",",["T_WHITESPACE","\n            ",577],["T_CONSTANT_ENCAPSED_STRING","'entity_row_update'",578],["T_WHITESPACE"," ",578],["T_DOUBLE_ARROW","=>",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$entityRowUpdate",578],",",["T_WHITESPACE","\n            ",578],["T_CONSTANT_ENCAPSED_STRING","'attributes'",579],["T_WHITESPACE"," ",579],["T_DOUBLE_ARROW","=>",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$attributes",579],",",["T_WHITESPACE","\n            ",579],["T_CONSTANT_ENCAPSED_STRING","'defaults'",580],["T_WHITESPACE"," ",580],["T_DOUBLE_ARROW","=>",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$defaults",580],["T_WHITESPACE","\n        ",580],"]",";",["T_WHITESPACE","\n    ",581],"}",["T_WHITESPACE","\n\n    ",582],["T_DOC_COMMENT","\/**\n     * Update and insert data in entity table\n     *\n     * @param array $addRows Rows for insert\n     * @param array $updateRows Rows for update\n     * @return $this\n     *\/",584],["T_WHITESPACE","\n    ",590],["T_PROTECTED","protected",591],["T_WHITESPACE"," ",591],["T_FUNCTION","function",591],["T_WHITESPACE"," ",591],["T_STRING","_saveAddressEntities",591],"(",["T_ARRAY","array",591],["T_WHITESPACE"," ",591],["T_VARIABLE","$addRows",591],",",["T_WHITESPACE"," ",591],["T_ARRAY","array",591],["T_WHITESPACE"," ",591],["T_VARIABLE","$updateRows",591],")",["T_WHITESPACE","\n    ",591],"{",["T_WHITESPACE","\n        ",592],["T_IF","if",593],["T_WHITESPACE"," ",593],"(",["T_VARIABLE","$addRows",593],")",["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n            ",593],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_connection",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","insertMultiple",594],"(",["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_entityTable",594],",",["T_WHITESPACE"," ",594],["T_VARIABLE","$addRows",594],")",";",["T_WHITESPACE","\n        ",594],"}",["T_WHITESPACE","\n        ",595],["T_IF","if",596],["T_WHITESPACE"," ",596],"(",["T_VARIABLE","$updateRows",596],")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n            ",596],["T_COMMENT","\/\/list of updated fields can be different for addresses. We can not use insertOnDuplicate for whole rows.\n",597],["T_WHITESPACE","            ",598],["T_FOREACH","foreach",598],["T_WHITESPACE"," ",598],"(",["T_VARIABLE","$updateRows",598],["T_WHITESPACE"," ",598],["T_AS","as",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$row",598],")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n                ",598],["T_VARIABLE","$fields",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_STRING","array_diff",599],"(",["T_STRING","array_keys",599],"(",["T_VARIABLE","$row",599],")",",",["T_WHITESPACE"," ",599],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",599],",",["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",599],",",["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","'created_at'",599],"]",")",";",["T_WHITESPACE","\n                ",599],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_connection",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","insertOnDuplicate",600],"(",["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_entityTable",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$row",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$fields",600],")",";",["T_WHITESPACE","\n            ",600],"}",["T_WHITESPACE","\n\n        ",601],"}",["T_WHITESPACE","\n        ",603],["T_RETURN","return",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],";",["T_WHITESPACE","\n    ",604],"}",["T_WHITESPACE","\n\n    ",605],["T_DOC_COMMENT","\/**\n     * Save custom customer address attributes\n     *\n     * @param array $attributesData\n     * @return $this\n     *\/",607],["T_WHITESPACE","\n    ",612],["T_PROTECTED","protected",613],["T_WHITESPACE"," ",613],["T_FUNCTION","function",613],["T_WHITESPACE"," ",613],["T_STRING","_saveAddressAttributes",613],"(",["T_ARRAY","array",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$attributesData",613],")",["T_WHITESPACE","\n    ",613],"{",["T_WHITESPACE","\n        ",614],["T_FOREACH","foreach",615],["T_WHITESPACE"," ",615],"(",["T_VARIABLE","$attributesData",615],["T_WHITESPACE"," ",615],["T_AS","as",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$tableName",615],["T_WHITESPACE"," ",615],["T_DOUBLE_ARROW","=>",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$data",615],")",["T_WHITESPACE"," ",615],"{",["T_WHITESPACE","\n            ",615],["T_VARIABLE","$tableData",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],"[","]",";",["T_WHITESPACE","\n            ",616],["T_FOREACH","foreach",617],["T_WHITESPACE"," ",617],"(",["T_VARIABLE","$data",617],["T_WHITESPACE"," ",617],["T_AS","as",617],["T_WHITESPACE"," ",617],["T_VARIABLE","$addressId",617],["T_WHITESPACE"," ",617],["T_DOUBLE_ARROW","=>",617],["T_WHITESPACE"," ",617],["T_VARIABLE","$attributeData",617],")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n                ",617],["T_FOREACH","foreach",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$attributeData",618],["T_WHITESPACE"," ",618],["T_AS","as",618],["T_WHITESPACE"," ",618],["T_VARIABLE","$attributeId",618],["T_WHITESPACE"," ",618],["T_DOUBLE_ARROW","=>",618],["T_WHITESPACE"," ",618],["T_VARIABLE","$value",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n                    ",618],["T_VARIABLE","$tableData",619],"[","]",["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],"[",["T_WHITESPACE","\n                        ",619],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",620],["T_WHITESPACE"," ",620],["T_DOUBLE_ARROW","=>",620],["T_WHITESPACE"," ",620],["T_VARIABLE","$addressId",620],",",["T_WHITESPACE","\n                        ",620],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",621],["T_WHITESPACE"," ",621],["T_DOUBLE_ARROW","=>",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$attributeId",621],",",["T_WHITESPACE","\n                        ",621],["T_CONSTANT_ENCAPSED_STRING","'value'",622],["T_WHITESPACE"," ",622],["T_DOUBLE_ARROW","=>",622],["T_WHITESPACE"," ",622],["T_VARIABLE","$value",622],",",["T_WHITESPACE","\n                    ",622],"]",";",["T_WHITESPACE","\n                ",623],"}",["T_WHITESPACE","\n            ",624],"}",["T_WHITESPACE","\n            ",625],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","_connection",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","insertOnDuplicate",626],"(",["T_VARIABLE","$tableName",626],",",["T_WHITESPACE"," ",626],["T_VARIABLE","$tableData",626],",",["T_WHITESPACE"," ",626],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",626],"]",")",";",["T_WHITESPACE","\n        ",626],"}",["T_WHITESPACE","\n        ",627],["T_RETURN","return",628],["T_WHITESPACE"," ",628],["T_VARIABLE","$this",628],";",["T_WHITESPACE","\n    ",628],"}",["T_WHITESPACE","\n\n    ",629],["T_DOC_COMMENT","\/**\n     * Save customer default addresses\n     *\n     * @param array $defaults\n     * @return $this\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",631],["T_WHITESPACE","\n    ",637],["T_PROTECTED","protected",638],["T_WHITESPACE"," ",638],["T_FUNCTION","function",638],["T_WHITESPACE"," ",638],["T_STRING","_saveCustomerDefaults",638],"(",["T_ARRAY","array",638],["T_WHITESPACE"," ",638],["T_VARIABLE","$defaults",638],")",["T_WHITESPACE","\n    ",638],"{",["T_WHITESPACE","\n        ",639],["T_FOREACH","foreach",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$defaults",640],["T_WHITESPACE"," ",640],["T_AS","as",640],["T_WHITESPACE"," ",640],["T_VARIABLE","$tableName",640],["T_WHITESPACE"," ",640],["T_DOUBLE_ARROW","=>",640],["T_WHITESPACE"," ",640],["T_VARIABLE","$data",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_FOREACH","foreach",641],["T_WHITESPACE"," ",641],"(",["T_VARIABLE","$data",641],["T_WHITESPACE"," ",641],["T_AS","as",641],["T_WHITESPACE"," ",641],["T_VARIABLE","$customerId",641],["T_WHITESPACE"," ",641],["T_DOUBLE_ARROW","=>",641],["T_WHITESPACE"," ",641],["T_VARIABLE","$defaultsData",641],")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n                ",641],["T_VARIABLE","$data",642],["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_STRING","array_merge",642],"(",["T_WHITESPACE","\n                    ",642],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",643],["T_WHITESPACE"," ",643],["T_DOUBLE_ARROW","=>",643],["T_WHITESPACE"," ",643],["T_VARIABLE","$customerId",643],"]",",",["T_WHITESPACE","\n                    ",643],["T_VARIABLE","$defaultsData",644],["T_WHITESPACE","\n                ",644],")",";",["T_WHITESPACE","\n                ",645],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","_connection",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","insertOnDuplicate",646],"(",["T_VARIABLE","$tableName",646],",",["T_WHITESPACE"," ",646],["T_VARIABLE","$data",646],",",["T_WHITESPACE"," ",646],["T_STRING","array_keys",646],"(",["T_VARIABLE","$defaultsData",646],")",")",";",["T_WHITESPACE","\n            ",646],"}",["T_WHITESPACE","\n\n        ",647],"}",["T_WHITESPACE","\n        ",649],["T_RETURN","return",650],["T_WHITESPACE"," ",650],["T_VARIABLE","$this",650],";",["T_WHITESPACE","\n    ",650],"}",["T_WHITESPACE","\n\n    ",651],["T_DOC_COMMENT","\/**\n     * Delete data from entity table\n     *\n     * @param array $entityRowIds Row IDs for delete\n     * @return $this\n     *\/",653],["T_WHITESPACE","\n    ",658],["T_PROTECTED","protected",659],["T_WHITESPACE"," ",659],["T_FUNCTION","function",659],["T_WHITESPACE"," ",659],["T_STRING","_deleteAddressEntities",659],"(",["T_ARRAY","array",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$entityRowIds",659],")",["T_WHITESPACE","\n    ",659],"{",["T_WHITESPACE","\n        ",660],["T_IF","if",661],["T_WHITESPACE"," ",661],"(",["T_VARIABLE","$entityRowIds",661],")",["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n            ",661],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","_connection",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","delete",662],"(",["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","_entityTable",662],",",["T_WHITESPACE"," ",662],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id IN (?)'",662],["T_WHITESPACE"," ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$entityRowIds",662],"]",")",";",["T_WHITESPACE","\n        ",662],"}",["T_WHITESPACE","\n        ",663],["T_RETURN","return",664],["T_WHITESPACE"," ",664],["T_VARIABLE","$this",664],";",["T_WHITESPACE","\n    ",664],"}",["T_WHITESPACE","\n\n    ",665],["T_DOC_COMMENT","\/**\n     * EAV entity type code getter\n     *\n     * @abstract\n     * @return string\n     *\/",667],["T_WHITESPACE","\n    ",672],["T_PUBLIC","public",673],["T_WHITESPACE"," ",673],["T_FUNCTION","function",673],["T_WHITESPACE"," ",673],["T_STRING","getEntityTypeCode",673],"(",")",["T_WHITESPACE","\n    ",673],"{",["T_WHITESPACE","\n        ",674],["T_RETURN","return",675],["T_WHITESPACE"," ",675],["T_CONSTANT_ENCAPSED_STRING","'customer_address'",675],";",["T_WHITESPACE","\n    ",675],"}",["T_WHITESPACE","\n\n    ",676],["T_DOC_COMMENT","\/**\n     * Customer default addresses column name to customer attribute mapping array\n     *\n     * @static\n     * @return array\n     *\/",678],["T_WHITESPACE","\n    ",683],["T_PUBLIC","public",684],["T_WHITESPACE"," ",684],["T_STATIC","static",684],["T_WHITESPACE"," ",684],["T_FUNCTION","function",684],["T_WHITESPACE"," ",684],["T_STRING","getDefaultAddressAttributeMapping",684],"(",")",["T_WHITESPACE","\n    ",684],"{",["T_WHITESPACE","\n        ",685],["T_RETURN","return",686],["T_WHITESPACE"," ",686],["T_STRING","self",686],["T_DOUBLE_COLON","::",686],["T_VARIABLE","$_defaultAddressAttributeMapping",686],";",["T_WHITESPACE","\n    ",686],"}",["T_WHITESPACE","\n\n    ",687],["T_DOC_COMMENT","\/**\n     * check if address for import is empty (for customer composite mode)\n     *\n     * @param array $rowData\n     * @return array\n     *\/",689],["T_WHITESPACE","\n    ",694],["T_PROTECTED","protected",695],["T_WHITESPACE"," ",695],["T_FUNCTION","function",695],["T_WHITESPACE"," ",695],["T_STRING","_isOptionalAddressEmpty",695],"(",["T_ARRAY","array",695],["T_WHITESPACE"," ",695],["T_VARIABLE","$rowData",695],")",["T_WHITESPACE","\n    ",695],"{",["T_WHITESPACE","\n        ",696],["T_IF","if",697],["T_WHITESPACE"," ",697],"(",["T_EMPTY","empty",697],"(",["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","_customerAttributes",697],")",")",["T_WHITESPACE"," ",697],"{",["T_WHITESPACE","\n            ",697],["T_RETURN","return",698],["T_WHITESPACE"," ",698],["T_STRING","false",698],";",["T_WHITESPACE","\n        ",698],"}",["T_WHITESPACE","\n        ",699],["T_UNSET","unset",700],"(",["T_WHITESPACE","\n            ",700],["T_VARIABLE","$rowData",701],"[",["T_STRING","Customer",701],["T_DOUBLE_COLON","::",701],["T_STRING","COLUMN_WEBSITE",701],"]",",",["T_WHITESPACE","\n            ",701],["T_VARIABLE","$rowData",702],"[",["T_STRING","Customer",702],["T_DOUBLE_COLON","::",702],["T_STRING","COLUMN_STORE",702],"]",",",["T_WHITESPACE","\n            ",702],["T_VARIABLE","$rowData",703],"[",["T_CONSTANT_ENCAPSED_STRING","'_email'",703],"]",["T_WHITESPACE","\n        ",703],")",";",["T_WHITESPACE","\n\n        ",704],["T_FOREACH","foreach",706],["T_WHITESPACE"," ",706],"(",["T_VARIABLE","$rowData",706],["T_WHITESPACE"," ",706],["T_AS","as",706],["T_WHITESPACE"," ",706],["T_VARIABLE","$key",706],["T_WHITESPACE"," ",706],["T_DOUBLE_ARROW","=>",706],["T_WHITESPACE"," ",706],["T_VARIABLE","$value",706],")",["T_WHITESPACE"," ",706],"{",["T_WHITESPACE","\n            ",706],["T_IF","if",707],["T_WHITESPACE"," ",707],"(","!",["T_STRING","in_array",707],"(",["T_VARIABLE","$key",707],",",["T_WHITESPACE"," ",707],["T_VARIABLE","$this",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","_customerAttributes",707],")",["T_WHITESPACE"," ",707],["T_BOOLEAN_AND","&&",707],["T_WHITESPACE"," ",707],"!",["T_EMPTY","empty",707],"(",["T_VARIABLE","$value",707],")",")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n                ",707],["T_RETURN","return",708],["T_WHITESPACE"," ",708],["T_STRING","false",708],";",["T_WHITESPACE","\n            ",708],"}",["T_WHITESPACE","\n        ",709],"}",["T_WHITESPACE","\n\n        ",710],["T_RETURN","return",712],["T_WHITESPACE"," ",712],["T_STRING","true",712],";",["T_WHITESPACE","\n    ",712],"}",["T_WHITESPACE","\n\n    ",713],["T_DOC_COMMENT","\/**\n     * Validate row for add\/update action\n     *\n     * @param array $rowData\n     * @param int $rowNumber\n     * @return void\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",715],["T_WHITESPACE","\n    ",723],["T_PROTECTED","protected",724],["T_WHITESPACE"," ",724],["T_FUNCTION","function",724],["T_WHITESPACE"," ",724],["T_STRING","_validateRowForUpdate",724],"(",["T_ARRAY","array",724],["T_WHITESPACE"," ",724],["T_VARIABLE","$rowData",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$rowNumber",724],")",["T_WHITESPACE","\n    ",724],"{",["T_WHITESPACE","\n        ",725],["T_IF","if",726],["T_WHITESPACE"," ",726],"(",["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","_checkUniqueKey",726],"(",["T_VARIABLE","$rowData",726],",",["T_WHITESPACE"," ",726],["T_VARIABLE","$rowNumber",726],")",")",["T_WHITESPACE"," ",726],"{",["T_WHITESPACE","\n            ",726],["T_VARIABLE","$email",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_STRING","strtolower",727],"(",["T_VARIABLE","$rowData",727],"[",["T_STRING","self",727],["T_DOUBLE_COLON","::",727],["T_STRING","COLUMN_EMAIL",727],"]",")",";",["T_WHITESPACE","\n            ",727],["T_VARIABLE","$website",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_VARIABLE","$rowData",728],"[",["T_STRING","self",728],["T_DOUBLE_COLON","::",728],["T_STRING","COLUMN_WEBSITE",728],"]",";",["T_WHITESPACE","\n            ",728],["T_VARIABLE","$addressId",729],["T_WHITESPACE"," ",729],"=",["T_WHITESPACE"," ",729],["T_VARIABLE","$rowData",729],"[",["T_STRING","self",729],["T_DOUBLE_COLON","::",729],["T_STRING","COLUMN_ADDRESS_ID",729],"]",";",["T_WHITESPACE","\n            ",729],["T_VARIABLE","$customerId",730],["T_WHITESPACE"," ",730],"=",["T_WHITESPACE"," ",730],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_getCustomerId",730],"(",["T_VARIABLE","$email",730],",",["T_WHITESPACE"," ",730],["T_VARIABLE","$website",730],")",";",["T_WHITESPACE","\n\n            ",730],["T_IF","if",732],["T_WHITESPACE"," ",732],"(",["T_VARIABLE","$customerId",732],["T_WHITESPACE"," ",732],["T_IS_IDENTICAL","===",732],["T_WHITESPACE"," ",732],["T_STRING","false",732],")",["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n                ",732],["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","addRowError",733],"(",["T_STRING","self",733],["T_DOUBLE_COLON","::",733],["T_STRING","ERROR_CUSTOMER_NOT_FOUND",733],",",["T_WHITESPACE"," ",733],["T_VARIABLE","$rowNumber",733],")",";",["T_WHITESPACE","\n            ",733],"}",["T_WHITESPACE"," ",734],["T_ELSE","else",734],["T_WHITESPACE"," ",734],"{",["T_WHITESPACE","\n                ",734],["T_IF","if",735],["T_WHITESPACE"," ",735],"(",["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","_checkRowDuplicate",735],"(",["T_VARIABLE","$customerId",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$addressId",735],")",")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n                    ",735],["T_VARIABLE","$this",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","addRowError",736],"(",["T_STRING","self",736],["T_DOUBLE_COLON","::",736],["T_STRING","ERROR_DUPLICATE_PK",736],",",["T_WHITESPACE"," ",736],["T_VARIABLE","$rowNumber",736],")",";",["T_WHITESPACE","\n                ",736],"}",["T_WHITESPACE"," ",737],["T_ELSE","else",737],["T_WHITESPACE"," ",737],"{",["T_WHITESPACE","\n                    ",737],["T_COMMENT","\/\/ check simple attributes\n",738],["T_WHITESPACE","                    ",739],["T_FOREACH","foreach",739],["T_WHITESPACE"," ",739],"(",["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","_attributes",739],["T_WHITESPACE"," ",739],["T_AS","as",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$attributeCode",739],["T_WHITESPACE"," ",739],["T_DOUBLE_ARROW","=>",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$attributeParams",739],")",["T_WHITESPACE"," ",739],"{",["T_WHITESPACE","\n                        ",739],["T_IF","if",740],["T_WHITESPACE"," ",740],"(",["T_STRING","in_array",740],"(",["T_VARIABLE","$attributeCode",740],",",["T_WHITESPACE"," ",740],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","_ignoredAttributes",740],")",")",["T_WHITESPACE"," ",740],"{",["T_WHITESPACE","\n                            ",740],["T_CONTINUE","continue",741],";",["T_WHITESPACE","\n                        ",741],"}",["T_WHITESPACE","\n                        ",742],["T_IF","if",743],["T_WHITESPACE"," ",743],"(",["T_ISSET","isset",743],"(",["T_VARIABLE","$rowData",743],"[",["T_VARIABLE","$attributeCode",743],"]",")",["T_WHITESPACE"," ",743],["T_BOOLEAN_AND","&&",743],["T_WHITESPACE"," ",743],["T_STRING","strlen",743],"(",["T_VARIABLE","$rowData",743],"[",["T_VARIABLE","$attributeCode",743],"]",")",")",["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n                            ",743],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","isAttributeValid",744],"(",["T_VARIABLE","$attributeCode",744],",",["T_WHITESPACE"," ",744],["T_VARIABLE","$attributeParams",744],",",["T_WHITESPACE"," ",744],["T_VARIABLE","$rowData",744],",",["T_WHITESPACE"," ",744],["T_VARIABLE","$rowNumber",744],")",";",["T_WHITESPACE","\n                        ",744],"}",["T_WHITESPACE"," ",745],["T_ELSEIF","elseif",745],["T_WHITESPACE"," ",745],"(",["T_VARIABLE","$attributeParams",745],"[",["T_CONSTANT_ENCAPSED_STRING","'is_required'",745],"]",["T_WHITESPACE"," ",745],["T_BOOLEAN_AND","&&",745],["T_WHITESPACE"," ",745],"(","!",["T_ISSET","isset",745],"(",["T_WHITESPACE","\n                            ",745],["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","_addresses",746],"[",["T_VARIABLE","$customerId",746],"]",["T_WHITESPACE","\n                        ",746],")",["T_WHITESPACE"," ",747],["T_BOOLEAN_OR","||",747],["T_WHITESPACE"," ",747],"!",["T_STRING","in_array",747],"(",["T_WHITESPACE","\n                            ",747],["T_VARIABLE","$addressId",748],",",["T_WHITESPACE","\n                            ",748],["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","_addresses",749],"[",["T_VARIABLE","$customerId",749],"]",["T_WHITESPACE","\n                        ",749],")",")",["T_WHITESPACE","\n                        ",750],")",["T_WHITESPACE"," ",751],"{",["T_WHITESPACE","\n                            ",751],["T_VARIABLE","$this",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","addRowError",752],"(",["T_STRING","self",752],["T_DOUBLE_COLON","::",752],["T_STRING","ERROR_VALUE_IS_REQUIRED",752],",",["T_WHITESPACE"," ",752],["T_VARIABLE","$rowNumber",752],",",["T_WHITESPACE"," ",752],["T_VARIABLE","$attributeCode",752],")",";",["T_WHITESPACE","\n                        ",752],"}",["T_WHITESPACE","\n                    ",753],"}",["T_WHITESPACE","\n\n                    ",754],["T_IF","if",756],["T_WHITESPACE"," ",756],"(",["T_WHITESPACE","\n                        ",756],["T_ISSET","isset",757],"(",["T_VARIABLE","$rowData",757],"[",["T_STRING","self",757],["T_DOUBLE_COLON","::",757],["T_STRING","COLUMN_POSTCODE",757],"]",")",["T_WHITESPACE","\n                        ",757],["T_BOOLEAN_AND","&&",758],["T_WHITESPACE"," ",758],["T_ISSET","isset",758],"(",["T_VARIABLE","$rowData",758],"[",["T_STRING","self",758],["T_DOUBLE_COLON","::",758],["T_STRING","COLUMN_COUNTRY_ID",758],"]",")",["T_WHITESPACE","\n                        ",758],["T_BOOLEAN_AND","&&",759],["T_WHITESPACE"," ",759],"!",["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","postcodeValidator",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","isValid",759],"(",["T_WHITESPACE","\n                            ",759],["T_VARIABLE","$rowData",760],"[",["T_STRING","self",760],["T_DOUBLE_COLON","::",760],["T_STRING","COLUMN_COUNTRY_ID",760],"]",",",["T_WHITESPACE","\n                            ",760],["T_VARIABLE","$rowData",761],"[",["T_STRING","self",761],["T_DOUBLE_COLON","::",761],["T_STRING","COLUMN_POSTCODE",761],"]",["T_WHITESPACE","\n                        ",761],")",["T_WHITESPACE","\n                    ",762],")",["T_WHITESPACE"," ",763],"{",["T_WHITESPACE","\n                        ",763],["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","addRowError",764],"(",["T_STRING","self",764],["T_DOUBLE_COLON","::",764],["T_STRING","ERROR_VALUE_IS_REQUIRED",764],",",["T_WHITESPACE"," ",764],["T_VARIABLE","$rowNumber",764],",",["T_WHITESPACE"," ",764],["T_STRING","self",764],["T_DOUBLE_COLON","::",764],["T_STRING","COLUMN_POSTCODE",764],")",";",["T_WHITESPACE","\n                    ",764],"}",["T_WHITESPACE","\n\n                    ",765],["T_IF","if",767],["T_WHITESPACE"," ",767],"(",["T_ISSET","isset",767],"(",["T_VARIABLE","$rowData",767],"[",["T_STRING","self",767],["T_DOUBLE_COLON","::",767],["T_STRING","COLUMN_COUNTRY_ID",767],"]",")",["T_WHITESPACE"," ",767],["T_BOOLEAN_AND","&&",767],["T_WHITESPACE"," ",767],["T_ISSET","isset",767],"(",["T_VARIABLE","$rowData",767],"[",["T_STRING","self",767],["T_DOUBLE_COLON","::",767],["T_STRING","COLUMN_REGION",767],"]",")",")",["T_WHITESPACE"," ",767],"{",["T_WHITESPACE","\n                        ",767],["T_VARIABLE","$countryRegions",768],["T_WHITESPACE"," ",768],"=",["T_WHITESPACE"," ",768],["T_ISSET","isset",768],"(",["T_WHITESPACE","\n                            ",768],["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","_countryRegions",769],"[",["T_STRING","strtolower",769],"(",["T_VARIABLE","$rowData",769],"[",["T_STRING","self",769],["T_DOUBLE_COLON","::",769],["T_STRING","COLUMN_COUNTRY_ID",769],"]",")","]",["T_WHITESPACE","\n                        ",769],")",["T_WHITESPACE"," ",770],"?",["T_WHITESPACE"," ",770],["T_VARIABLE","$this",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","_countryRegions",770],"[",["T_STRING","strtolower",770],"(",["T_WHITESPACE","\n                            ",770],["T_VARIABLE","$rowData",771],"[",["T_STRING","self",771],["T_DOUBLE_COLON","::",771],["T_STRING","COLUMN_COUNTRY_ID",771],"]",["T_WHITESPACE","\n                        ",771],")","]",["T_WHITESPACE"," ",772],":",["T_WHITESPACE"," ",772],"[","]",";",["T_WHITESPACE","\n\n                        ",772],["T_IF","if",774],["T_WHITESPACE"," ",774],"(","!",["T_EMPTY","empty",774],"(",["T_VARIABLE","$rowData",774],"[",["T_STRING","self",774],["T_DOUBLE_COLON","::",774],["T_STRING","COLUMN_REGION",774],"]",")",["T_WHITESPACE"," ",774],["T_BOOLEAN_AND","&&",774],["T_WHITESPACE"," ",774],"!",["T_EMPTY","empty",774],"(",["T_VARIABLE","$countryRegions",774],")",["T_WHITESPACE"," ",774],["T_BOOLEAN_AND","&&",774],["T_WHITESPACE"," ",774],"!",["T_ISSET","isset",774],"(",["T_WHITESPACE","\n                            ",774],["T_VARIABLE","$countryRegions",775],"[",["T_STRING","strtolower",775],"(",["T_VARIABLE","$rowData",775],"[",["T_STRING","self",775],["T_DOUBLE_COLON","::",775],["T_STRING","COLUMN_REGION",775],"]",")","]",["T_WHITESPACE","\n                        ",775],")",["T_WHITESPACE","\n                        ",776],")",["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n                            ",777],["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","addRowError",778],"(",["T_STRING","self",778],["T_DOUBLE_COLON","::",778],["T_STRING","ERROR_INVALID_REGION",778],",",["T_WHITESPACE"," ",778],["T_VARIABLE","$rowNumber",778],",",["T_WHITESPACE"," ",778],["T_STRING","self",778],["T_DOUBLE_COLON","::",778],["T_STRING","COLUMN_REGION",778],")",";",["T_WHITESPACE","\n                        ",778],"}",["T_WHITESPACE","\n                    ",779],"}",["T_WHITESPACE","\n                ",780],"}",["T_WHITESPACE","\n            ",781],"}",["T_WHITESPACE","\n        ",782],"}",["T_WHITESPACE","\n    ",783],"}",["T_WHITESPACE","\n\n    ",784],["T_DOC_COMMENT","\/**\n     * Validate row for delete action\n     *\n     * @param array $rowData\n     * @param int $rowNumber\n     * @return void\n     *\/",786],["T_WHITESPACE","\n    ",792],["T_PROTECTED","protected",793],["T_WHITESPACE"," ",793],["T_FUNCTION","function",793],["T_WHITESPACE"," ",793],["T_STRING","_validateRowForDelete",793],"(",["T_ARRAY","array",793],["T_WHITESPACE"," ",793],["T_VARIABLE","$rowData",793],",",["T_WHITESPACE"," ",793],["T_VARIABLE","$rowNumber",793],")",["T_WHITESPACE","\n    ",793],"{",["T_WHITESPACE","\n        ",794],["T_IF","if",795],["T_WHITESPACE"," ",795],"(",["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","_checkUniqueKey",795],"(",["T_VARIABLE","$rowData",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$rowNumber",795],")",")",["T_WHITESPACE"," ",795],"{",["T_WHITESPACE","\n            ",795],["T_VARIABLE","$email",796],["T_WHITESPACE"," ",796],"=",["T_WHITESPACE"," ",796],["T_STRING","strtolower",796],"(",["T_VARIABLE","$rowData",796],"[",["T_STRING","self",796],["T_DOUBLE_COLON","::",796],["T_STRING","COLUMN_EMAIL",796],"]",")",";",["T_WHITESPACE","\n            ",796],["T_VARIABLE","$website",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],["T_VARIABLE","$rowData",797],"[",["T_STRING","self",797],["T_DOUBLE_COLON","::",797],["T_STRING","COLUMN_WEBSITE",797],"]",";",["T_WHITESPACE","\n            ",797],["T_VARIABLE","$addressId",798],["T_WHITESPACE"," ",798],"=",["T_WHITESPACE"," ",798],["T_VARIABLE","$rowData",798],"[",["T_STRING","self",798],["T_DOUBLE_COLON","::",798],["T_STRING","COLUMN_ADDRESS_ID",798],"]",";",["T_WHITESPACE","\n\n            ",798],["T_VARIABLE","$customerId",800],["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_VARIABLE","$this",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","_getCustomerId",800],"(",["T_VARIABLE","$email",800],",",["T_WHITESPACE"," ",800],["T_VARIABLE","$website",800],")",";",["T_WHITESPACE","\n            ",800],["T_IF","if",801],["T_WHITESPACE"," ",801],"(",["T_VARIABLE","$customerId",801],["T_WHITESPACE"," ",801],["T_IS_IDENTICAL","===",801],["T_WHITESPACE"," ",801],["T_STRING","false",801],")",["T_WHITESPACE"," ",801],"{",["T_WHITESPACE","\n                ",801],["T_VARIABLE","$this",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","addRowError",802],"(",["T_STRING","self",802],["T_DOUBLE_COLON","::",802],["T_STRING","ERROR_CUSTOMER_NOT_FOUND",802],",",["T_WHITESPACE"," ",802],["T_VARIABLE","$rowNumber",802],")",";",["T_WHITESPACE","\n            ",802],"}",["T_WHITESPACE"," ",803],["T_ELSE","else",803],["T_WHITESPACE"," ",803],"{",["T_WHITESPACE","\n                ",803],["T_IF","if",804],["T_WHITESPACE"," ",804],"(","!",["T_STRING","strlen",804],"(",["T_VARIABLE","$addressId",804],")",")",["T_WHITESPACE"," ",804],"{",["T_WHITESPACE","\n                    ",804],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","addRowError",805],"(",["T_STRING","self",805],["T_DOUBLE_COLON","::",805],["T_STRING","ERROR_ADDRESS_ID_IS_EMPTY",805],",",["T_WHITESPACE"," ",805],["T_VARIABLE","$rowNumber",805],")",";",["T_WHITESPACE","\n                ",805],"}",["T_WHITESPACE"," ",806],["T_ELSEIF","elseif",806],["T_WHITESPACE"," ",806],"(","!",["T_STRING","in_array",806],"(",["T_VARIABLE","$addressId",806],",",["T_WHITESPACE"," ",806],["T_VARIABLE","$this",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","_addresses",806],"[",["T_VARIABLE","$customerId",806],"]",")",")",["T_WHITESPACE"," ",806],"{",["T_WHITESPACE","\n                    ",806],["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","addRowError",807],"(",["T_STRING","self",807],["T_DOUBLE_COLON","::",807],["T_STRING","ERROR_ADDRESS_NOT_FOUND",807],",",["T_WHITESPACE"," ",807],["T_VARIABLE","$rowNumber",807],")",";",["T_WHITESPACE","\n                ",807],"}",["T_WHITESPACE","\n            ",808],"}",["T_WHITESPACE","\n        ",809],"}",["T_WHITESPACE","\n    ",810],"}",["T_WHITESPACE","\n\n    ",811],["T_DOC_COMMENT","\/**\n     * Check whether row with such address id was already found in import file\n     *\n     * @param int $customerId\n     * @param int $addressId\n     * @return bool\n     *\/",813],["T_WHITESPACE","\n    ",819],["T_PROTECTED","protected",820],["T_WHITESPACE"," ",820],["T_FUNCTION","function",820],["T_WHITESPACE"," ",820],["T_STRING","_checkRowDuplicate",820],"(",["T_VARIABLE","$customerId",820],",",["T_WHITESPACE"," ",820],["T_VARIABLE","$addressId",820],")",["T_WHITESPACE","\n    ",820],"{",["T_WHITESPACE","\n        ",821],["T_IF","if",822],["T_WHITESPACE"," ",822],"(",["T_ISSET","isset",822],"(",["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","_addresses",822],"[",["T_VARIABLE","$customerId",822],"]",")",["T_WHITESPACE"," ",822],["T_BOOLEAN_AND","&&",822],["T_WHITESPACE"," ",822],["T_STRING","in_array",822],"(",["T_VARIABLE","$addressId",822],",",["T_WHITESPACE"," ",822],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","_addresses",822],"[",["T_VARIABLE","$customerId",822],"]",")",")",["T_WHITESPACE"," ",822],"{",["T_WHITESPACE","\n            ",822],["T_IF","if",823],["T_WHITESPACE"," ",823],"(","!",["T_ISSET","isset",823],"(",["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","_importedRowPks",823],"[",["T_VARIABLE","$customerId",823],"]","[",["T_VARIABLE","$addressId",823],"]",")",")",["T_WHITESPACE"," ",823],"{",["T_WHITESPACE","\n                ",823],["T_VARIABLE","$this",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","_importedRowPks",824],"[",["T_VARIABLE","$customerId",824],"]","[",["T_VARIABLE","$addressId",824],"]",["T_WHITESPACE"," ",824],"=",["T_WHITESPACE"," ",824],["T_STRING","true",824],";",["T_WHITESPACE","\n                ",824],["T_RETURN","return",825],["T_WHITESPACE"," ",825],["T_STRING","false",825],";",["T_WHITESPACE","\n            ",825],"}",["T_WHITESPACE"," ",826],["T_ELSE","else",826],["T_WHITESPACE"," ",826],"{",["T_WHITESPACE","\n                ",826],["T_RETURN","return",827],["T_WHITESPACE"," ",827],["T_STRING","true",827],";",["T_WHITESPACE","\n            ",827],"}",["T_WHITESPACE","\n        ",828],"}",["T_WHITESPACE"," ",829],["T_ELSE","else",829],["T_WHITESPACE"," ",829],"{",["T_WHITESPACE","\n            ",829],["T_RETURN","return",830],["T_WHITESPACE"," ",830],["T_STRING","false",830],";",["T_WHITESPACE","\n        ",830],"}",["T_WHITESPACE","\n    ",831],"}",["T_WHITESPACE","\n\n    ",832],["T_DOC_COMMENT","\/**\n     * set customer attributes\n     *\n     * @param array $customerAttributes\n     * @return $this\n     *\/",834],["T_WHITESPACE","\n    ",839],["T_PUBLIC","public",840],["T_WHITESPACE"," ",840],["T_FUNCTION","function",840],["T_WHITESPACE"," ",840],["T_STRING","setCustomerAttributes",840],"(",["T_VARIABLE","$customerAttributes",840],")",["T_WHITESPACE","\n    ",840],"{",["T_WHITESPACE","\n        ",841],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","_customerAttributes",842],["T_WHITESPACE"," ",842],"=",["T_WHITESPACE"," ",842],["T_VARIABLE","$customerAttributes",842],";",["T_WHITESPACE","\n        ",842],["T_RETURN","return",843],["T_WHITESPACE"," ",843],["T_VARIABLE","$this",843],";",["T_WHITESPACE","\n    ",843],"}",["T_WHITESPACE","\n",844],"}",["T_WHITESPACE","\n",845]]
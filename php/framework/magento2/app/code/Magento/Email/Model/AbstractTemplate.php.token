[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Email",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Filesystem",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DirectoryList",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","TemplateTypesInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LocalizedException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AbstractModel",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DataObject",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Store",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ScopeInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Store",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Information",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","StoreInformation",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Store",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Store",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Template model class\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n * @SuppressWarnings(PHPMD.TooManyFields)\n *\/",17],["T_WHITESPACE","\n",23],["T_ABSTRACT","abstract",24],["T_WHITESPACE"," ",24],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","AbstractTemplate",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","AbstractModel",24],["T_WHITESPACE"," ",24],["T_IMPLEMENTS","implements",24],["T_WHITESPACE"," ",24],["T_STRING","TemplateTypesInterface",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * Default design area for emulation\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","DEFAULT_DESIGN_AREA",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'frontend'",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * Default path to email logo\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","DEFAULT_LOGO_FILE_ID",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'Magento_Email::logo_email.png'",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Email logo url\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","XML_PATH_DESIGN_EMAIL_LOGO",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'design\/email\/logo'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Email logo alt text\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","XML_PATH_DESIGN_EMAIL_LOGO_ALT",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'design\/email\/logo_alt'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Email logo width\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","XML_PATH_DESIGN_EMAIL_LOGO_WIDTH",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'design\/email\/logo_width'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Email logo height\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","XML_PATH_DESIGN_EMAIL_LOGO_HEIGHT",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'design\/email\/logo_height'",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Configuration of design package for template\n     *\n     * @var DataObject\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PRIVATE","private",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$designConfig",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Whether template is child of another template\n     *\n     * @var bool\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PRIVATE","private",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$isChildTemplate",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","false",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Email template filter\n     *\n     * @var \\Magento\\Email\\Model\\Template\\Filter\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PRIVATE","private",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$templateFilter",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Configuration of emulated design package.\n     *\n     * @var DataObject|boolean\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PRIVATE","private",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$emulatedDesignConfig",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","false",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Package area\n     *\n     * @var string\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PRIVATE","private",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$area",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Store id\n     *\n     * @var int\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PRIVATE","private",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$store",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Tracks whether design has been applied within the context of this template model.\n     *\n     * Important as there are multiple entry points for the applyDesignConfig method.\n     *\n     * @var bool\n     *\/",98],["T_WHITESPACE","\n    ",104],["T_PRIVATE","private",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$hasDesignBeenApplied",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","false",105],";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Email\\Model\\TemplateFactory\n     *\/",107],["T_WHITESPACE","\n    ",109],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$templateFactory",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","null",110],";",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Design package instance\n     *\n     * @var \\Magento\\Framework\\View\\DesignInterface\n     *\/",112],["T_WHITESPACE","\n    ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$design",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","null",117],";",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\App\\Emulation\n     *\/",119],["T_WHITESPACE","\n    ",121],["T_PROTECTED","protected",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$appEmulation",122],";",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",124],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$storeManager",127],";",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Asset service\n     *\n     * @var \\Magento\\Framework\\View\\Asset\\Repository\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PROTECTED","protected",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$assetRepo",134],";",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filesystem\n     *\/",136],["T_WHITESPACE","\n    ",138],["T_PROTECTED","protected",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$filesystem",139],";",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Scope config\n     *\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$scopeConfig",146],";",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Email\\Model\\Template\\Config\n     *\/",148],["T_WHITESPACE","\n    ",150],["T_PROTECTED","protected",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$emailConfig",151],";",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Filter\\FilterManager\n     *\/",153],["T_WHITESPACE","\n    ",155],["T_PROTECTED","protected",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$filterManager",156],";",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\UrlInterface\n     *\/",158],["T_WHITESPACE","\n    ",160],["T_PRIVATE","private",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$urlModel",161],";",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\Model\\Context $context\n     * @param \\Magento\\Framework\\View\\DesignInterface $design\n     * @param \\Magento\\Framework\\Registry $registry\n     * @param \\Magento\\Store\\Model\\App\\Emulation $appEmulation\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\View\\Asset\\Repository $assetRepo\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Email\\Model\\Template\\Config $emailConfig\n     * @param \\Magento\\Email\\Model\\TemplateFactory $templateFactory\n     * @param \\Magento\\Framework\\Filter\\FilterManager $filterManager\n     * @param \\Magento\\Framework\\UrlInterface $urlModel\n     * @param array $data\n     *\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",163],["T_WHITESPACE","\n    ",179],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","__construct",180],"(",["T_WHITESPACE","\n        ",180],["T_NS_SEPARATOR","\\",181],["T_STRING","Magento",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Framework",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Model",181],["T_NS_SEPARATOR","\\",181],["T_STRING","Context",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$context",181],",",["T_WHITESPACE","\n        ",181],["T_NS_SEPARATOR","\\",182],["T_STRING","Magento",182],["T_NS_SEPARATOR","\\",182],["T_STRING","Framework",182],["T_NS_SEPARATOR","\\",182],["T_STRING","View",182],["T_NS_SEPARATOR","\\",182],["T_STRING","DesignInterface",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$design",182],",",["T_WHITESPACE","\n        ",182],["T_NS_SEPARATOR","\\",183],["T_STRING","Magento",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Framework",183],["T_NS_SEPARATOR","\\",183],["T_STRING","Registry",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$registry",183],",",["T_WHITESPACE","\n        ",183],["T_NS_SEPARATOR","\\",184],["T_STRING","Magento",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Store",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Model",184],["T_NS_SEPARATOR","\\",184],["T_STRING","App",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Emulation",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$appEmulation",184],",",["T_WHITESPACE","\n        ",184],["T_NS_SEPARATOR","\\",185],["T_STRING","Magento",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Store",185],["T_NS_SEPARATOR","\\",185],["T_STRING","Model",185],["T_NS_SEPARATOR","\\",185],["T_STRING","StoreManagerInterface",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$storeManager",185],",",["T_WHITESPACE","\n        ",185],["T_NS_SEPARATOR","\\",186],["T_STRING","Magento",186],["T_NS_SEPARATOR","\\",186],["T_STRING","Framework",186],["T_NS_SEPARATOR","\\",186],["T_STRING","View",186],["T_NS_SEPARATOR","\\",186],["T_STRING","Asset",186],["T_NS_SEPARATOR","\\",186],["T_STRING","Repository",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$assetRepo",186],",",["T_WHITESPACE","\n        ",186],["T_NS_SEPARATOR","\\",187],["T_STRING","Magento",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Framework",187],["T_NS_SEPARATOR","\\",187],["T_STRING","Filesystem",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$filesystem",187],",",["T_WHITESPACE","\n        ",187],["T_NS_SEPARATOR","\\",188],["T_STRING","Magento",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Framework",188],["T_NS_SEPARATOR","\\",188],["T_STRING","App",188],["T_NS_SEPARATOR","\\",188],["T_STRING","Config",188],["T_NS_SEPARATOR","\\",188],["T_STRING","ScopeConfigInterface",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$scopeConfig",188],",",["T_WHITESPACE","\n        ",188],["T_NS_SEPARATOR","\\",189],["T_STRING","Magento",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Email",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Model",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Template",189],["T_NS_SEPARATOR","\\",189],["T_STRING","Config",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$emailConfig",189],",",["T_WHITESPACE","\n        ",189],["T_NS_SEPARATOR","\\",190],["T_STRING","Magento",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Email",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Model",190],["T_NS_SEPARATOR","\\",190],["T_STRING","TemplateFactory",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$templateFactory",190],",",["T_WHITESPACE","\n        ",190],["T_NS_SEPARATOR","\\",191],["T_STRING","Magento",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Framework",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Filter",191],["T_NS_SEPARATOR","\\",191],["T_STRING","FilterManager",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$filterManager",191],",",["T_WHITESPACE","\n        ",191],["T_NS_SEPARATOR","\\",192],["T_STRING","Magento",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Framework",192],["T_NS_SEPARATOR","\\",192],["T_STRING","UrlInterface",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$urlModel",192],",",["T_WHITESPACE","\n        ",192],["T_ARRAY","array",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$data",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],"[","]",["T_WHITESPACE","\n    ",193],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","design",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$design",195],";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","area",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_ISSET","isset",196],"(",["T_VARIABLE","$data",196],"[",["T_CONSTANT_ENCAPSED_STRING","'area'",196],"]",")",["T_WHITESPACE"," ",196],"?",["T_WHITESPACE"," ",196],["T_VARIABLE","$data",196],"[",["T_CONSTANT_ENCAPSED_STRING","'area'",196],"]",["T_WHITESPACE"," ",196],":",["T_WHITESPACE"," ",196],["T_STRING","null",196],";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","store",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_ISSET","isset",197],"(",["T_VARIABLE","$data",197],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",197],"]",")",["T_WHITESPACE"," ",197],"?",["T_WHITESPACE"," ",197],["T_VARIABLE","$data",197],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",197],"]",["T_WHITESPACE"," ",197],":",["T_WHITESPACE"," ",197],["T_STRING","null",197],";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","appEmulation",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$appEmulation",198],";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","storeManager",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$storeManager",199],";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","assetRepo",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$assetRepo",200],";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","filesystem",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$filesystem",201],";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","scopeConfig",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$scopeConfig",202],";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","emailConfig",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$emailConfig",203],";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","templateFactory",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$templateFactory",204],";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","filterManager",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$filterManager",205],";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","urlModel",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$urlModel",206],";",["T_WHITESPACE","\n        ",206],["T_STRING","parent",207],["T_DOUBLE_COLON","::",207],["T_STRING","__construct",207],"(",["T_VARIABLE","$context",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$registry",207],",",["T_WHITESPACE"," ",207],["T_STRING","null",207],",",["T_WHITESPACE"," ",207],["T_STRING","null",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$data",207],")",";",["T_WHITESPACE","\n    ",207],"}",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Get contents of the included template for template directive\n     *\n     * @param string $configPath\n     * @param array $variables\n     * @return string\n     *\/",210],["T_WHITESPACE","\n    ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","getTemplateContent",217],"(",["T_VARIABLE","$configPath",217],",",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$variables",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$template",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getTemplateInstance",219],"(",")",";",["T_WHITESPACE","\n\n        ",219],["T_COMMENT","\/\/ Ensure child templates have the same area\/store context as parent\n",221],["T_WHITESPACE","        ",222],["T_VARIABLE","$template",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","setDesignConfig",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getDesignConfig",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","toArray",222],"(",")",")",["T_WHITESPACE","\n            ",222],["T_OBJECT_OPERATOR","->",223],["T_STRING","loadByConfigPath",223],"(",["T_VARIABLE","$configPath",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$variables",223],")",["T_WHITESPACE","\n            ",223],["T_OBJECT_OPERATOR","->",224],["T_STRING","setTemplateType",224],"(",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getType",224],"(",")",")",["T_WHITESPACE","\n            ",224],["T_OBJECT_OPERATOR","->",225],["T_STRING","setIsChildTemplate",225],"(",["T_STRING","true",225],")",";",["T_WHITESPACE","\n\n        ",225],["T_COMMENT","\/\/ automatically strip tags if in a plain-text parent\n",227],["T_WHITESPACE","        ",228],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","isPlain",228],"(",")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$templateText",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","filterManager",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","stripTags",229],"(",["T_VARIABLE","$template",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getTemplateText",229],"(",")",")",";",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$template",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","setTemplateText",230],"(",["T_STRING","trim",230],"(",["T_VARIABLE","$templateText",230],")",")",";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$processedTemplate",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$template",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getProcessedTemplate",233],"(",["T_VARIABLE","$variables",233],")",";",["T_WHITESPACE","\n        ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","isPlain",234],"(",")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$processedTemplate",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","trim",235],"(",["T_VARIABLE","$processedTemplate",235],")",";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$processedTemplate",238],";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Return a new instance of the template object. Used by the template directive.\n     *\n     * @return \\Magento\\Email\\Model\\AbstractTemplate\n     *\/",241],["T_WHITESPACE","\n    ",245],["T_PROTECTED","protected",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","getTemplateInstance",246],"(",")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","templateFactory",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","create",248],"(",")",";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_DOC_COMMENT","\/**\n     * Load template from database when overridden in configuration or load default from relevant file system location.\n     *\n     * @param string $configPath\n     * @return \\Magento\\Email\\Model\\AbstractTemplate\n     *\/",251],["T_WHITESPACE","\n    ",256],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","loadByConfigPath",257],"(",["T_VARIABLE","$configPath",257],")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$store",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getDesignConfig",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","getStore",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$templateId",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","scopeConfig",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getValue",260],"(",["T_VARIABLE","$configPath",260],",",["T_WHITESPACE"," ",260],["T_STRING","ScopeInterface",260],["T_DOUBLE_COLON","::",260],["T_STRING","SCOPE_STORE",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$store",260],")",";",["T_WHITESPACE","\n\n        ",260],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_STRING","is_numeric",262],"(",["T_VARIABLE","$templateId",262],")",")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","load",263],"(",["T_VARIABLE","$templateId",263],")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE"," ",264],["T_ELSE","else",264],["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","loadDefault",265],"(",["T_VARIABLE","$templateId",265],")",";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n        ",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Load default email template\n     *\n     * @param string $templateId\n     * @return $this\n     *\/",270],["T_WHITESPACE","\n    ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","loadDefault",276],"(",["T_VARIABLE","$templateId",276],")",["T_WHITESPACE","\n    ",276],"{",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$designParams",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getDesignParams",278],"(",")",";",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$templateFile",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","emailConfig",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getTemplateFilename",279],"(",["T_VARIABLE","$templateId",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$designParams",279],")",";",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$templateType",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","emailConfig",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getTemplateType",280],"(",["T_VARIABLE","$templateId",280],")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$templateTypeCode",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$templateType",281],["T_WHITESPACE"," ",281],["T_IS_EQUAL","==",281],["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'html'",281],["T_WHITESPACE"," ",281],"?",["T_WHITESPACE"," ",281],["T_STRING","self",281],["T_DOUBLE_COLON","::",281],["T_STRING","TYPE_HTML",281],["T_WHITESPACE"," ",281],":",["T_WHITESPACE"," ",281],["T_STRING","self",281],["T_DOUBLE_COLON","::",281],["T_STRING","TYPE_TEXT",281],";",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","setTemplateType",282],"(",["T_VARIABLE","$templateTypeCode",282],")",";",["T_WHITESPACE","\n\n        ",282],["T_VARIABLE","$rootDirectory",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","filesystem",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getDirectoryRead",284],"(",["T_STRING","DirectoryList",284],["T_DOUBLE_COLON","::",284],["T_STRING","ROOT",284],")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$templateText",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$rootDirectory",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","readFile",285],"(",["T_VARIABLE","$rootDirectory",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getRelativePath",285],"(",["T_VARIABLE","$templateFile",285],")",")",";",["T_WHITESPACE","\n\n        ",285],["T_DOC_COMMENT","\/**\n         * trim copyright message\n         *\/",287],["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_STRING","preg_match",290],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^<!--[\\w\\W]+?-->\/m'",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$templateText",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$matches",290],")",["T_WHITESPACE"," ",290],["T_BOOLEAN_AND","&&",290],["T_WHITESPACE"," ",290],["T_STRING","strpos",290],"(",["T_VARIABLE","$matches",290],"[",["T_LNUMBER","0",290],"]",",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'Copyright'",290],")",["T_WHITESPACE"," ",290],">",["T_WHITESPACE"," ",290],["T_LNUMBER","0",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_VARIABLE","$templateText",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_STRING","str_replace",291],"(",["T_VARIABLE","$matches",291],"[",["T_LNUMBER","0",291],"]",",",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","''",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$templateText",291],")",";",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n\n        ",292],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_STRING","preg_match",294],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<!--@subject\\s*(.*?)\\s*@-->\/u'",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$templateText",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$matches",294],")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","setTemplateSubject",295],"(",["T_VARIABLE","$matches",295],"[",["T_LNUMBER","1",295],"]",")",";",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$templateText",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","str_replace",296],"(",["T_VARIABLE","$matches",296],"[",["T_LNUMBER","0",296],"]",",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","''",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$templateText",296],")",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n\n        ",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_STRING","preg_match",299],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<!--@vars\\s*((?:.)*?)\\s*@-->\/us'",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$templateText",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$matches",299],")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","setData",300],"(",["T_CONSTANT_ENCAPSED_STRING","'orig_template_variables'",300],",",["T_WHITESPACE"," ",300],["T_STRING","str_replace",300],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",300],",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","''",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$matches",300],"[",["T_LNUMBER","1",300],"]",")",")",";",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$templateText",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","str_replace",301],"(",["T_VARIABLE","$matches",301],"[",["T_LNUMBER","0",301],"]",",",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","''",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$templateText",301],")",";",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n\n        ",302],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_STRING","preg_match",304],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<!--@styles\\s*(.*?)\\s*@-->\/s'",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$templateText",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$matches",304],")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","setTemplateStyles",305],"(",["T_VARIABLE","$matches",305],"[",["T_LNUMBER","1",305],"]",")",";",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$templateText",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","str_replace",306],"(",["T_VARIABLE","$matches",306],"[",["T_LNUMBER","0",306],"]",",",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","''",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$templateText",306],")",";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n\n        ",307],["T_COMMENT","\/\/ Remove comment lines and extra spaces\n",309],["T_WHITESPACE","        ",310],["T_VARIABLE","$templateText",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","trim",310],"(",["T_STRING","preg_replace",310],"(",["T_CONSTANT_ENCAPSED_STRING","'#\\{\\*.*\\*\\}#suU'",310],",",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","''",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$templateText",310],")",")",";",["T_WHITESPACE","\n\n        ",310],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","setTemplateText",312],"(",["T_VARIABLE","$templateText",312],")",";",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","setId",313],"(",["T_VARIABLE","$templateId",313],")",";",["T_WHITESPACE","\n\n        ",313],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Process email template code\n     *\n     * @param array $variables\n     * @return string\n     * @throws \\Magento\\Framework\\Exception\\MailException\n     *\/",318],["T_WHITESPACE","\n    ",324],["T_PUBLIC","public",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","getProcessedTemplate",325],"(",["T_ARRAY","array",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$variables",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],"[","]",")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$processor",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getTemplateFilter",327],"(",")",["T_WHITESPACE","\n            ",327],["T_OBJECT_OPERATOR","->",328],["T_STRING","setUseSessionInUrl",328],"(",["T_STRING","false",328],")",["T_WHITESPACE","\n            ",328],["T_OBJECT_OPERATOR","->",329],["T_STRING","setPlainTemplateMode",329],"(",["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","isPlain",329],"(",")",")",["T_WHITESPACE","\n            ",329],["T_OBJECT_OPERATOR","->",330],["T_STRING","setIsChildTemplate",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","isChildTemplate",330],"(",")",")",["T_WHITESPACE","\n            ",330],["T_OBJECT_OPERATOR","->",331],["T_STRING","setTemplateProcessor",331],"(","[",["T_VARIABLE","$this",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'getTemplateContent'",331],"]",")",";",["T_WHITESPACE","\n\n        ",331],["T_VARIABLE","$variables",333],"[",["T_CONSTANT_ENCAPSED_STRING","'this'",333],"]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],";",["T_WHITESPACE","\n\n        ",333],["T_VARIABLE","$isDesignApplied",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","applyDesignConfig",335],"(",")",";",["T_WHITESPACE","\n\n        ",335],["T_COMMENT","\/\/ Set design params so that CSS will be loaded from the proper theme\n",337],["T_WHITESPACE","        ",338],["T_VARIABLE","$processor",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","setDesignParams",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getDesignParams",338],"(",")",")",";",["T_WHITESPACE","\n\n        ",338],["T_IF","if",340],["T_WHITESPACE"," ",340],"(",["T_ISSET","isset",340],"(",["T_VARIABLE","$variables",340],"[",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",340],"]",")",")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$storeId",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$variables",341],"[",["T_CONSTANT_ENCAPSED_STRING","'subscriber'",341],"]",["T_OBJECT_OPERATOR","->",341],["T_STRING","getStoreId",341],"(",")",";",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE"," ",342],["T_ELSE","else",342],["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$storeId",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getDesignConfig",343],"(",")",["T_OBJECT_OPERATOR","->",343],["T_STRING","getStore",343],"(",")",";",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$processor",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","setStoreId",345],"(",["T_VARIABLE","$storeId",345],")",";",["T_WHITESPACE","\n\n        ",345],["T_COMMENT","\/\/ Populate the variables array with store, store info, logo, etc. variables\n",347],["T_WHITESPACE","        ",348],["T_VARIABLE","$variables",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","addEmailVariables",348],"(",["T_VARIABLE","$variables",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$storeId",348],")",";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$processor",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","setVariables",349],"(",["T_VARIABLE","$variables",349],")",";",["T_WHITESPACE","\n\n        ",349],["T_TRY","try",351],["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$result",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$processor",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","filter",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getTemplateText",352],"(",")",")",";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE"," ",353],["T_CATCH","catch",353],["T_WHITESPACE"," ",353],"(",["T_NS_SEPARATOR","\\",353],["T_STRING","Exception",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$e",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n            ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","cancelDesignConfig",354],"(",")",";",["T_WHITESPACE","\n            ",354],["T_THROW","throw",355],["T_WHITESPACE"," ",355],["T_NEW","new",355],["T_WHITESPACE"," ",355],["T_NS_SEPARATOR","\\",355],["T_STRING","LogicException",355],"(",["T_STRING","__",355],"(",["T_VARIABLE","$e",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getMessage",355],"(",")",")",",",["T_WHITESPACE"," ",355],["T_VARIABLE","$e",355],")",";",["T_WHITESPACE","\n        ",355],"}",["T_WHITESPACE","\n        ",356],["T_IF","if",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$isDesignApplied",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","cancelDesignConfig",358],"(",")",";",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE","\n        ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$result",360],";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * Get default email logo image\n     *\n     * @return string\n     *\/",363],["T_WHITESPACE","\n    ",367],["T_PUBLIC","public",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","getDefaultEmailLogo",368],"(",")",["T_WHITESPACE","\n    ",368],"{",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$designParams",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getDesignParams",370],"(",")",";",["T_WHITESPACE","\n        ",370],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","assetRepo",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getUrlWithParams",371],"(",["T_WHITESPACE","\n            ",371],["T_STRING","self",372],["T_DOUBLE_COLON","::",372],["T_STRING","DEFAULT_LOGO_FILE_ID",372],",",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$designParams",373],["T_WHITESPACE","\n        ",373],")",";",["T_WHITESPACE","\n    ",374],"}",["T_WHITESPACE","\n\n    ",375],["T_DOC_COMMENT","\/**\n     * Return logo URL for emails. Take logo from theme if custom logo is undefined\n     *\n     * @param  Store|int|string $store\n     * @return string\n     *\/",377],["T_WHITESPACE","\n    ",382],["T_PROTECTED","protected",383],["T_WHITESPACE"," ",383],["T_FUNCTION","function",383],["T_WHITESPACE"," ",383],["T_STRING","getLogoUrl",383],"(",["T_VARIABLE","$store",383],")",["T_WHITESPACE","\n    ",383],"{",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$store",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","storeManager",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getStore",385],"(",["T_VARIABLE","$store",385],")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$fileName",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","scopeConfig",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getValue",386],"(",["T_WHITESPACE","\n            ",386],["T_STRING","self",387],["T_DOUBLE_COLON","::",387],["T_STRING","XML_PATH_DESIGN_EMAIL_LOGO",387],",",["T_WHITESPACE","\n            ",387],["T_STRING","ScopeInterface",388],["T_DOUBLE_COLON","::",388],["T_STRING","SCOPE_STORE",388],",",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$store",389],["T_WHITESPACE","\n        ",389],")",";",["T_WHITESPACE","\n        ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$fileName",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$uploadDir",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_NS_SEPARATOR","\\",392],["T_STRING","Magento",392],["T_NS_SEPARATOR","\\",392],["T_STRING","Email",392],["T_NS_SEPARATOR","\\",392],["T_STRING","Model",392],["T_NS_SEPARATOR","\\",392],["T_STRING","Design",392],["T_NS_SEPARATOR","\\",392],["T_STRING","Backend",392],["T_NS_SEPARATOR","\\",392],["T_STRING","Logo",392],["T_DOUBLE_COLON","::",392],["T_STRING","UPLOAD_DIR",392],";",["T_WHITESPACE","\n            ",392],["T_VARIABLE","$mediaDirectory",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","filesystem",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getDirectoryRead",393],"(",["T_STRING","DirectoryList",393],["T_DOUBLE_COLON","::",393],["T_STRING","MEDIA",393],")",";",["T_WHITESPACE","\n            ",393],["T_IF","if",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$mediaDirectory",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","isFile",394],"(",["T_VARIABLE","$uploadDir",394],["T_WHITESPACE"," ",394],".",["T_WHITESPACE"," ",394],["T_CONSTANT_ENCAPSED_STRING","'\/'",394],["T_WHITESPACE"," ",394],".",["T_WHITESPACE"," ",394],["T_VARIABLE","$fileName",394],")",")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n                ",394],["T_RETURN","return",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","storeManager",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getStore",395],"(",")",["T_OBJECT_OPERATOR","->",395],["T_STRING","getBaseUrl",395],"(",["T_WHITESPACE","\n                    ",395],["T_NS_SEPARATOR","\\",396],["T_STRING","Magento",396],["T_NS_SEPARATOR","\\",396],["T_STRING","Framework",396],["T_NS_SEPARATOR","\\",396],["T_STRING","UrlInterface",396],["T_DOUBLE_COLON","::",396],["T_STRING","URL_TYPE_MEDIA",396],["T_WHITESPACE","\n                ",396],")",["T_WHITESPACE"," ",397],".",["T_WHITESPACE"," ",397],["T_VARIABLE","$uploadDir",397],["T_WHITESPACE"," ",397],".",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'\/'",397],["T_WHITESPACE"," ",397],".",["T_WHITESPACE"," ",397],["T_VARIABLE","$fileName",397],";",["T_WHITESPACE","\n            ",397],"}",["T_WHITESPACE","\n        ",398],"}",["T_WHITESPACE","\n        ",399],["T_RETURN","return",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getDefaultEmailLogo",400],"(",")",";",["T_WHITESPACE","\n    ",400],"}",["T_WHITESPACE","\n\n    ",401],["T_DOC_COMMENT","\/**\n     * Return logo alt for emails\n     *\n     * @param  Store|int|string $store\n     * @return string\n     *\/",403],["T_WHITESPACE","\n    ",408],["T_PROTECTED","protected",409],["T_WHITESPACE"," ",409],["T_FUNCTION","function",409],["T_WHITESPACE"," ",409],["T_STRING","getLogoAlt",409],"(",["T_VARIABLE","$store",409],")",["T_WHITESPACE","\n    ",409],"{",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$store",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","storeManager",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getStore",411],"(",["T_VARIABLE","$store",411],")",";",["T_WHITESPACE","\n        ",411],["T_VARIABLE","$alt",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","scopeConfig",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getValue",412],"(",["T_WHITESPACE","\n            ",412],["T_STRING","self",413],["T_DOUBLE_COLON","::",413],["T_STRING","XML_PATH_DESIGN_EMAIL_LOGO_ALT",413],",",["T_WHITESPACE","\n            ",413],["T_STRING","ScopeInterface",414],["T_DOUBLE_COLON","::",414],["T_STRING","SCOPE_STORE",414],",",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$store",415],["T_WHITESPACE","\n        ",415],")",";",["T_WHITESPACE","\n        ",416],["T_IF","if",417],["T_WHITESPACE"," ",417],"(",["T_VARIABLE","$alt",417],")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n            ",417],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$alt",418],";",["T_WHITESPACE","\n        ",418],"}",["T_WHITESPACE","\n        ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$store",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getFrontendName",420],"(",")",";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n\n    ",421],["T_DOC_COMMENT","\/**\n     * Add variables that are used by transactional and newsletter emails\n     *\n     * @param array $variables\n     * @param null|string|bool|int|Store $storeId\n     * @return mixed\n     *\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",423],["T_WHITESPACE","\n    ",432],["T_PROTECTED","protected",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","addEmailVariables",433],"(",["T_VARIABLE","$variables",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$storeId",433],")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$store",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","storeManager",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","getStore",435],"(",["T_VARIABLE","$storeId",435],")",";",["T_WHITESPACE","\n        ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(","!",["T_ISSET","isset",436],"(",["T_VARIABLE","$variables",436],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",436],"]",")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_VARIABLE","$variables",437],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",437],"]",["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$store",437],";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n        ",438],["T_IF","if",439],["T_WHITESPACE"," ",439],"(","!",["T_ISSET","isset",439],"(",["T_VARIABLE","$variables",439],"[",["T_CONSTANT_ENCAPSED_STRING","'logo_url'",439],"]",")",")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n            ",439],["T_VARIABLE","$variables",440],"[",["T_CONSTANT_ENCAPSED_STRING","'logo_url'",440],"]",["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getLogoUrl",440],"(",["T_VARIABLE","$storeId",440],")",";",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n        ",441],["T_IF","if",442],["T_WHITESPACE"," ",442],"(","!",["T_ISSET","isset",442],"(",["T_VARIABLE","$variables",442],"[",["T_CONSTANT_ENCAPSED_STRING","'logo_alt'",442],"]",")",")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$variables",443],"[",["T_CONSTANT_ENCAPSED_STRING","'logo_alt'",443],"]",["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getLogoAlt",443],"(",["T_VARIABLE","$storeId",443],")",";",["T_WHITESPACE","\n        ",443],"}",["T_WHITESPACE","\n        ",444],["T_IF","if",445],["T_WHITESPACE"," ",445],"(","!",["T_ISSET","isset",445],"(",["T_VARIABLE","$variables",445],"[",["T_CONSTANT_ENCAPSED_STRING","'logo_width'",445],"]",")",")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n            ",445],["T_VARIABLE","$variables",446],"[",["T_CONSTANT_ENCAPSED_STRING","'logo_width'",446],"]",["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","scopeConfig",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","getValue",446],"(",["T_WHITESPACE","\n                ",446],["T_STRING","self",447],["T_DOUBLE_COLON","::",447],["T_STRING","XML_PATH_DESIGN_EMAIL_LOGO_WIDTH",447],",",["T_WHITESPACE","\n                ",447],["T_STRING","ScopeInterface",448],["T_DOUBLE_COLON","::",448],["T_STRING","SCOPE_STORE",448],",",["T_WHITESPACE","\n                ",448],["T_VARIABLE","$store",449],["T_WHITESPACE","\n            ",449],")",";",["T_WHITESPACE","\n        ",450],"}",["T_WHITESPACE","\n        ",451],["T_IF","if",452],["T_WHITESPACE"," ",452],"(","!",["T_ISSET","isset",452],"(",["T_VARIABLE","$variables",452],"[",["T_CONSTANT_ENCAPSED_STRING","'logo_height'",452],"]",")",")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n            ",452],["T_VARIABLE","$variables",453],"[",["T_CONSTANT_ENCAPSED_STRING","'logo_height'",453],"]",["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","scopeConfig",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getValue",453],"(",["T_WHITESPACE","\n                ",453],["T_STRING","self",454],["T_DOUBLE_COLON","::",454],["T_STRING","XML_PATH_DESIGN_EMAIL_LOGO_HEIGHT",454],",",["T_WHITESPACE","\n                ",454],["T_STRING","ScopeInterface",455],["T_DOUBLE_COLON","::",455],["T_STRING","SCOPE_STORE",455],",",["T_WHITESPACE","\n                ",455],["T_VARIABLE","$store",456],["T_WHITESPACE","\n            ",456],")",";",["T_WHITESPACE","\n        ",457],"}",["T_WHITESPACE","\n        ",458],["T_IF","if",459],["T_WHITESPACE"," ",459],"(","!",["T_ISSET","isset",459],"(",["T_VARIABLE","$variables",459],"[",["T_CONSTANT_ENCAPSED_STRING","'store_phone'",459],"]",")",")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n            ",459],["T_VARIABLE","$variables",460],"[",["T_CONSTANT_ENCAPSED_STRING","'store_phone'",460],"]",["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","scopeConfig",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getValue",460],"(",["T_WHITESPACE","\n                ",460],["T_STRING","StoreInformation",461],["T_DOUBLE_COLON","::",461],["T_STRING","XML_PATH_STORE_INFO_PHONE",461],",",["T_WHITESPACE","\n                ",461],["T_STRING","ScopeInterface",462],["T_DOUBLE_COLON","::",462],["T_STRING","SCOPE_STORE",462],",",["T_WHITESPACE","\n                ",462],["T_VARIABLE","$store",463],["T_WHITESPACE","\n            ",463],")",";",["T_WHITESPACE","\n        ",464],"}",["T_WHITESPACE","\n        ",465],["T_IF","if",466],["T_WHITESPACE"," ",466],"(","!",["T_ISSET","isset",466],"(",["T_VARIABLE","$variables",466],"[",["T_CONSTANT_ENCAPSED_STRING","'store_hours'",466],"]",")",")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n            ",466],["T_VARIABLE","$variables",467],"[",["T_CONSTANT_ENCAPSED_STRING","'store_hours'",467],"]",["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","scopeConfig",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getValue",467],"(",["T_WHITESPACE","\n                ",467],["T_STRING","StoreInformation",468],["T_DOUBLE_COLON","::",468],["T_STRING","XML_PATH_STORE_INFO_HOURS",468],",",["T_WHITESPACE","\n                ",468],["T_STRING","ScopeInterface",469],["T_DOUBLE_COLON","::",469],["T_STRING","SCOPE_STORE",469],",",["T_WHITESPACE","\n                ",469],["T_VARIABLE","$store",470],["T_WHITESPACE","\n            ",470],")",";",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n        ",472],["T_IF","if",473],["T_WHITESPACE"," ",473],"(","!",["T_ISSET","isset",473],"(",["T_VARIABLE","$variables",473],"[",["T_CONSTANT_ENCAPSED_STRING","'store_email'",473],"]",")",")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n            ",473],["T_VARIABLE","$variables",474],"[",["T_CONSTANT_ENCAPSED_STRING","'store_email'",474],"]",["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","scopeConfig",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","getValue",474],"(",["T_WHITESPACE","\n                ",474],["T_CONSTANT_ENCAPSED_STRING","'trans_email\/ident_support\/email'",475],",",["T_WHITESPACE","\n                ",475],["T_STRING","ScopeInterface",476],["T_DOUBLE_COLON","::",476],["T_STRING","SCOPE_STORE",476],",",["T_WHITESPACE","\n                ",476],["T_VARIABLE","$store",477],["T_WHITESPACE","\n            ",477],")",";",["T_WHITESPACE","\n        ",478],"}",["T_WHITESPACE","\n        ",479],["T_COMMENT","\/\/ If template is text mode, don't include styles\n",480],["T_WHITESPACE","        ",481],["T_IF","if",481],["T_WHITESPACE"," ",481],"(","!",["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","isPlain",481],"(",")",["T_WHITESPACE"," ",481],["T_BOOLEAN_AND","&&",481],["T_WHITESPACE"," ",481],"!",["T_ISSET","isset",481],"(",["T_VARIABLE","$variables",481],"[",["T_CONSTANT_ENCAPSED_STRING","'template_styles'",481],"]",")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n            ",481],["T_VARIABLE","$variables",482],"[",["T_CONSTANT_ENCAPSED_STRING","'template_styles'",482],"]",["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","getTemplateStyles",482],"(",")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE","\n\n        ",483],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$variables",485],";",["T_WHITESPACE","\n    ",485],"}",["T_WHITESPACE","\n\n    ",486],["T_DOC_COMMENT","\/**\n     * Apply design config so that emails are processed within the context of the appropriate area\/store\/theme.\n     * Can be called multiple times without issue.\n     *\n     * @return bool\n     *\/",488],["T_WHITESPACE","\n    ",493],["T_PROTECTED","protected",494],["T_WHITESPACE"," ",494],["T_FUNCTION","function",494],["T_WHITESPACE"," ",494],["T_STRING","applyDesignConfig",494],"(",")",["T_WHITESPACE","\n    ",494],"{",["T_WHITESPACE","\n        ",495],["T_COMMENT","\/\/ Only run app emulation if this is the parent template and emulation isn't already running.\n",496],["T_WHITESPACE","        ",497],["T_COMMENT","\/\/ Otherwise child will run inside parent emulation.\n",497],["T_WHITESPACE","        ",498],["T_IF","if",498],["T_WHITESPACE"," ",498],"(",["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","isChildTemplate",498],"(",")",["T_WHITESPACE"," ",498],["T_BOOLEAN_OR","||",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","hasDesignBeenApplied",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n            ",498],["T_RETURN","return",499],["T_WHITESPACE"," ",499],["T_STRING","false",499],";",["T_WHITESPACE","\n        ",499],"}",["T_WHITESPACE","\n        ",500],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","hasDesignBeenApplied",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_STRING","true",501],";",["T_WHITESPACE","\n\n        ",501],["T_VARIABLE","$designConfig",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","getDesignConfig",503],"(",")",";",["T_WHITESPACE","\n        ",503],["T_VARIABLE","$storeId",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$designConfig",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","getStore",504],"(",")",";",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$area",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$designConfig",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getArea",505],"(",")",";",["T_WHITESPACE","\n        ",505],["T_IF","if",506],["T_WHITESPACE"," ",506],"(",["T_VARIABLE","$storeId",506],["T_WHITESPACE"," ",506],["T_IS_NOT_IDENTICAL","!==",506],["T_WHITESPACE"," ",506],["T_STRING","null",506],")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n            ",506],["T_COMMENT","\/\/ Force emulation in case email is being sent from same store so that theme will be loaded. Helpful\n",507],["T_WHITESPACE","            ",508],["T_COMMENT","\/\/ for situations where emails may be sent from bootstrap files that load frontend store, but not theme\n",508],["T_WHITESPACE","            ",509],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","appEmulation",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","startEnvironmentEmulation",509],"(",["T_VARIABLE","$storeId",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$area",509],",",["T_WHITESPACE"," ",509],["T_STRING","true",509],")",";",["T_WHITESPACE","\n        ",509],"}",["T_WHITESPACE","\n        ",510],["T_RETURN","return",511],["T_WHITESPACE"," ",511],["T_STRING","true",511],";",["T_WHITESPACE","\n    ",511],"}",["T_WHITESPACE","\n\n    ",512],["T_DOC_COMMENT","\/**\n     * Revert design settings to previous\n     *\n     * @return $this\n     *\/",514],["T_WHITESPACE","\n    ",518],["T_PROTECTED","protected",519],["T_WHITESPACE"," ",519],["T_FUNCTION","function",519],["T_WHITESPACE"," ",519],["T_STRING","cancelDesignConfig",519],"(",")",["T_WHITESPACE","\n    ",519],"{",["T_WHITESPACE","\n        ",520],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","appEmulation",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","stopEnvironmentEmulation",521],"(",")",";",["T_WHITESPACE","\n        ",521],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","hasDesignBeenApplied",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_STRING","false",522],";",["T_WHITESPACE","\n        ",522],["T_RETURN","return",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$this",523],";",["T_WHITESPACE","\n    ",523],"}",["T_WHITESPACE","\n\n    ",524],["T_DOC_COMMENT","\/**\n     * Store the area associated with a template so that it will be returned by getDesignConfig and getDesignParams\n     *\n     * @param string $templateId\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\MailException\n     *\/",526],["T_WHITESPACE","\n    ",532],["T_PUBLIC","public",533],["T_WHITESPACE"," ",533],["T_FUNCTION","function",533],["T_WHITESPACE"," ",533],["T_STRING","setForcedArea",533],"(",["T_VARIABLE","$templateId",533],")",["T_WHITESPACE","\n    ",533],"{",["T_WHITESPACE","\n        ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(",["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","area",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n            ",535],["T_THROW","throw",536],["T_WHITESPACE"," ",536],["T_NEW","new",536],["T_WHITESPACE"," ",536],["T_NS_SEPARATOR","\\",536],["T_STRING","LogicException",536],"(",["T_STRING","__",536],"(",["T_CONSTANT_ENCAPSED_STRING","'Area is already set'",536],")",")",";",["T_WHITESPACE","\n        ",536],"}",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","area",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","emailConfig",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","getTemplateArea",538],"(",["T_VARIABLE","$templateId",538],")",";",["T_WHITESPACE","\n        ",538],["T_RETURN","return",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$this",539],";",["T_WHITESPACE","\n    ",539],"}",["T_WHITESPACE","\n\n    ",540],["T_DOC_COMMENT","\/**\n     * Manually set a theme that will be used by getParams\n     *\n     * Used to force the loading of an email template from a specific theme\n     *\n     * @param string $templateId\n     * @param string $theme\n     * @return $this\n     *\/",542],["T_WHITESPACE","\n    ",550],["T_PUBLIC","public",551],["T_WHITESPACE"," ",551],["T_FUNCTION","function",551],["T_WHITESPACE"," ",551],["T_STRING","setForcedTheme",551],"(",["T_VARIABLE","$templateId",551],",",["T_WHITESPACE"," ",551],["T_VARIABLE","$theme",551],")",["T_WHITESPACE","\n    ",551],"{",["T_WHITESPACE","\n        ",552],["T_VARIABLE","$area",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","emailConfig",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getTemplateArea",553],"(",["T_VARIABLE","$templateId",553],")",";",["T_WHITESPACE","\n        ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","design",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","setDesignTheme",554],"(",["T_VARIABLE","$theme",554],",",["T_WHITESPACE"," ",554],["T_VARIABLE","$area",554],")",";",["T_WHITESPACE","\n        ",554],["T_RETURN","return",555],["T_WHITESPACE"," ",555],["T_VARIABLE","$this",555],";",["T_WHITESPACE","\n    ",555],"}",["T_WHITESPACE","\n\n    ",556],["T_DOC_COMMENT","\/**\n     * Returns the design params for the template being processed\n     *\n     * @return array\n     *\/",558],["T_WHITESPACE","\n    ",562],["T_PUBLIC","public",563],["T_WHITESPACE"," ",563],["T_FUNCTION","function",563],["T_WHITESPACE"," ",563],["T_STRING","getDesignParams",563],"(",")",["T_WHITESPACE","\n    ",563],"{",["T_WHITESPACE","\n        ",564],["T_RETURN","return",565],["T_WHITESPACE"," ",565],"[",["T_WHITESPACE","\n            ",565],["T_COMMENT","\/\/ Retrieve area from getDesignConfig, rather than the getDesignTheme->getArea(), as the latter doesn't\n",566],["T_WHITESPACE","            ",567],["T_COMMENT","\/\/ return the emulated area\n",567],["T_WHITESPACE","            ",568],["T_CONSTANT_ENCAPSED_STRING","'area'",568],["T_WHITESPACE"," ",568],["T_DOUBLE_ARROW","=>",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","getDesignConfig",568],"(",")",["T_OBJECT_OPERATOR","->",568],["T_STRING","getArea",568],"(",")",",",["T_WHITESPACE","\n            ",568],["T_CONSTANT_ENCAPSED_STRING","'theme'",569],["T_WHITESPACE"," ",569],["T_DOUBLE_ARROW","=>",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","design",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getDesignTheme",569],"(",")",["T_OBJECT_OPERATOR","->",569],["T_STRING","getCode",569],"(",")",",",["T_WHITESPACE","\n            ",569],["T_CONSTANT_ENCAPSED_STRING","'themeModel'",570],["T_WHITESPACE"," ",570],["T_DOUBLE_ARROW","=>",570],["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","design",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getDesignTheme",570],"(",")",",",["T_WHITESPACE","\n            ",570],["T_CONSTANT_ENCAPSED_STRING","'locale'",571],["T_WHITESPACE"," ",571],["T_DOUBLE_ARROW","=>",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","design",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","getLocale",571],"(",")",",",["T_WHITESPACE","\n        ",571],"]",";",["T_WHITESPACE","\n    ",572],"}",["T_WHITESPACE","\n\n    ",573],["T_DOC_COMMENT","\/**\n     * Get design configuration data\n     *\n     * @return DataObject\n     *\/",575],["T_WHITESPACE","\n    ",579],["T_PUBLIC","public",580],["T_WHITESPACE"," ",580],["T_FUNCTION","function",580],["T_WHITESPACE"," ",580],["T_STRING","getDesignConfig",580],"(",")",["T_WHITESPACE","\n    ",580],"{",["T_WHITESPACE","\n        ",581],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","designConfig",582],["T_WHITESPACE"," ",582],["T_IS_IDENTICAL","===",582],["T_WHITESPACE"," ",582],["T_STRING","null",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_IF","if",583],["T_WHITESPACE"," ",583],"(",["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","area",583],["T_WHITESPACE"," ",583],["T_IS_IDENTICAL","===",583],["T_WHITESPACE"," ",583],["T_STRING","null",583],")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n                ",583],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","area",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","design",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","getArea",584],"(",")",";",["T_WHITESPACE","\n            ",584],"}",["T_WHITESPACE","\n            ",585],["T_IF","if",586],["T_WHITESPACE"," ",586],"(",["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","store",586],["T_WHITESPACE"," ",586],["T_IS_IDENTICAL","===",586],["T_WHITESPACE"," ",586],["T_STRING","null",586],")",["T_WHITESPACE"," ",586],"{",["T_WHITESPACE","\n                ",586],["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","store",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","storeManager",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","getStore",587],"(",")",["T_OBJECT_OPERATOR","->",587],["T_STRING","getId",587],"(",")",";",["T_WHITESPACE","\n            ",587],"}",["T_WHITESPACE","\n            ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","designConfig",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_NEW","new",589],["T_WHITESPACE"," ",589],["T_STRING","DataObject",589],"(",["T_WHITESPACE","\n                ",589],"[",["T_CONSTANT_ENCAPSED_STRING","'area'",590],["T_WHITESPACE"," ",590],["T_DOUBLE_ARROW","=>",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","area",590],",",["T_WHITESPACE"," ",590],["T_CONSTANT_ENCAPSED_STRING","'store'",590],["T_WHITESPACE"," ",590],["T_DOUBLE_ARROW","=>",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","store",590],"]",["T_WHITESPACE","\n            ",590],")",";",["T_WHITESPACE","\n        ",591],"}",["T_WHITESPACE","\n        ",592],["T_RETURN","return",593],["T_WHITESPACE"," ",593],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","designConfig",593],";",["T_WHITESPACE","\n    ",593],"}",["T_WHITESPACE","\n\n    ",594],["T_DOC_COMMENT","\/**\n     * Initialize design information for template processing\n     *\n     * @param array $config\n     * @return $this\n     * @throws LocalizedException\n     *\/",596],["T_WHITESPACE","\n    ",602],["T_PUBLIC","public",603],["T_WHITESPACE"," ",603],["T_FUNCTION","function",603],["T_WHITESPACE"," ",603],["T_STRING","setDesignConfig",603],"(",["T_ARRAY","array",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$config",603],")",["T_WHITESPACE","\n    ",603],"{",["T_WHITESPACE","\n        ",604],["T_IF","if",605],["T_WHITESPACE"," ",605],"(","!",["T_ISSET","isset",605],"(",["T_VARIABLE","$config",605],"[",["T_CONSTANT_ENCAPSED_STRING","'area'",605],"]",")",["T_WHITESPACE"," ",605],["T_BOOLEAN_OR","||",605],["T_WHITESPACE"," ",605],"!",["T_ISSET","isset",605],"(",["T_VARIABLE","$config",605],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",605],"]",")",")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n            ",605],["T_THROW","throw",606],["T_WHITESPACE"," ",606],["T_NEW","new",606],["T_WHITESPACE"," ",606],["T_STRING","LocalizedException",606],"(",["T_STRING","__",606],"(",["T_CONSTANT_ENCAPSED_STRING","'Design config must have area and store.'",606],")",")",";",["T_WHITESPACE","\n        ",606],"}",["T_WHITESPACE","\n        ",607],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","getDesignConfig",608],"(",")",["T_OBJECT_OPERATOR","->",608],["T_STRING","setData",608],"(",["T_VARIABLE","$config",608],")",";",["T_WHITESPACE","\n        ",608],["T_RETURN","return",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$this",609],";",["T_WHITESPACE","\n    ",609],"}",["T_WHITESPACE","\n\n    ",610],["T_DOC_COMMENT","\/**\n     * Check whether template is child of another template\n     *\n     * @return bool\n     *\/",612],["T_WHITESPACE","\n    ",616],["T_PUBLIC","public",617],["T_WHITESPACE"," ",617],["T_FUNCTION","function",617],["T_WHITESPACE"," ",617],["T_STRING","isChildTemplate",617],"(",")",["T_WHITESPACE","\n    ",617],"{",["T_WHITESPACE","\n        ",618],["T_RETURN","return",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","isChildTemplate",619],";",["T_WHITESPACE","\n    ",619],"}",["T_WHITESPACE","\n\n    ",620],["T_DOC_COMMENT","\/**\n     * Set whether template is child of another template\n     *\n     * @param bool $isChildTemplate\n     * @return $this\n     *\/",622],["T_WHITESPACE","\n    ",627],["T_PUBLIC","public",628],["T_WHITESPACE"," ",628],["T_FUNCTION","function",628],["T_WHITESPACE"," ",628],["T_STRING","setIsChildTemplate",628],"(",["T_VARIABLE","$isChildTemplate",628],")",["T_WHITESPACE","\n    ",628],"{",["T_WHITESPACE","\n        ",629],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","isChildTemplate",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],["T_BOOL_CAST","(bool)",630],["T_WHITESPACE"," ",630],["T_VARIABLE","$isChildTemplate",630],";",["T_WHITESPACE","\n        ",630],["T_RETURN","return",631],["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],";",["T_WHITESPACE","\n    ",631],"}",["T_WHITESPACE","\n\n    ",632],["T_DOC_COMMENT","\/**\n     * Declare template processing filter\n     *\n     * @param \\Magento\\Email\\Model\\Template\\Filter $filter\n     * @return $this\n     *\/",634],["T_WHITESPACE","\n    ",639],["T_PUBLIC","public",640],["T_WHITESPACE"," ",640],["T_FUNCTION","function",640],["T_WHITESPACE"," ",640],["T_STRING","setTemplateFilter",640],"(",["T_STRING","Template",640],["T_NS_SEPARATOR","\\",640],["T_STRING","Filter",640],["T_WHITESPACE"," ",640],["T_VARIABLE","$filter",640],")",["T_WHITESPACE","\n    ",640],"{",["T_WHITESPACE","\n        ",641],["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","templateFilter",642],["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_VARIABLE","$filter",642],";",["T_WHITESPACE","\n        ",642],["T_RETURN","return",643],["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],";",["T_WHITESPACE","\n    ",643],"}",["T_WHITESPACE","\n\n    ",644],["T_DOC_COMMENT","\/**\n     * Get filter object for template processing\n     *\n     * @return \\Magento\\Email\\Model\\Template\\Filter\n     *\/",646],["T_WHITESPACE","\n    ",650],["T_PUBLIC","public",651],["T_WHITESPACE"," ",651],["T_FUNCTION","function",651],["T_WHITESPACE"," ",651],["T_STRING","getTemplateFilter",651],"(",")",["T_WHITESPACE","\n    ",651],"{",["T_WHITESPACE","\n        ",652],["T_IF","if",653],["T_WHITESPACE"," ",653],"(",["T_EMPTY","empty",653],"(",["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","templateFilter",653],")",")",["T_WHITESPACE"," ",653],"{",["T_WHITESPACE","\n            ",653],["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","templateFilter",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","getFilterFactory",654],"(",")",["T_OBJECT_OPERATOR","->",654],["T_STRING","create",654],"(",")",";",["T_WHITESPACE","\n            ",654],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","templateFilter",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","setUseAbsoluteLinks",655],"(",["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","getUseAbsoluteLinks",655],"(",")",")",["T_WHITESPACE","\n                ",655],["T_OBJECT_OPERATOR","->",656],["T_STRING","setStoreId",656],"(",["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","getDesignConfig",656],"(",")",["T_OBJECT_OPERATOR","->",656],["T_STRING","getStore",656],"(",")",")",["T_WHITESPACE","\n                ",656],["T_OBJECT_OPERATOR","->",657],["T_STRING","setUrlModel",657],"(",["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","urlModel",657],")",";",["T_WHITESPACE","\n        ",657],"}",["T_WHITESPACE","\n        ",658],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","templateFilter",659],";",["T_WHITESPACE","\n    ",659],"}",["T_WHITESPACE","\n\n    ",660],["T_DOC_COMMENT","\/**\n     * Save current design config and replace with design config from specified store\n     * Event is not dispatched.\n     *\n     * @param null|bool|int|string $storeId\n     * @param string $area\n     * @return void\n     *\/",662],["T_WHITESPACE","\n    ",669],["T_PUBLIC","public",670],["T_WHITESPACE"," ",670],["T_FUNCTION","function",670],["T_WHITESPACE"," ",670],["T_STRING","emulateDesign",670],"(",["T_VARIABLE","$storeId",670],",",["T_WHITESPACE"," ",670],["T_VARIABLE","$area",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_STRING","self",670],["T_DOUBLE_COLON","::",670],["T_STRING","DEFAULT_DESIGN_AREA",670],")",["T_WHITESPACE","\n    ",670],"{",["T_WHITESPACE","\n        ",671],["T_IF","if",672],["T_WHITESPACE"," ",672],"(",["T_VARIABLE","$storeId",672],["T_WHITESPACE"," ",672],["T_IS_NOT_IDENTICAL","!==",672],["T_WHITESPACE"," ",672],["T_STRING","null",672],["T_WHITESPACE"," ",672],["T_BOOLEAN_AND","&&",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$storeId",672],["T_WHITESPACE"," ",672],["T_IS_NOT_IDENTICAL","!==",672],["T_WHITESPACE"," ",672],["T_STRING","false",672],")",["T_WHITESPACE"," ",672],"{",["T_WHITESPACE","\n            ",672],["T_COMMENT","\/\/ save current design settings\n",673],["T_WHITESPACE","            ",674],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","emulatedDesignConfig",674],["T_WHITESPACE"," ",674],"=",["T_WHITESPACE"," ",674],["T_CLONE","clone",674],["T_WHITESPACE"," ",674],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","getDesignConfig",674],"(",")",";",["T_WHITESPACE","\n            ",674],["T_IF","if",675],["T_WHITESPACE"," ",675],"(",["T_WHITESPACE","\n                ",675],["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","getDesignConfig",676],"(",")",["T_OBJECT_OPERATOR","->",676],["T_STRING","getStore",676],"(",")",["T_WHITESPACE"," ",676],["T_IS_NOT_EQUAL","!=",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$storeId",676],["T_WHITESPACE","\n                ",676],["T_BOOLEAN_OR","||",677],["T_WHITESPACE"," ",677],["T_VARIABLE","$this",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","getDesignConfig",677],"(",")",["T_OBJECT_OPERATOR","->",677],["T_STRING","getArea",677],"(",")",["T_WHITESPACE"," ",677],["T_IS_NOT_EQUAL","!=",677],["T_WHITESPACE"," ",677],["T_VARIABLE","$area",677],["T_WHITESPACE","\n            ",677],")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n                ",678],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","setDesignConfig",679],"(","[",["T_CONSTANT_ENCAPSED_STRING","'area'",679],["T_WHITESPACE"," ",679],["T_DOUBLE_ARROW","=>",679],["T_WHITESPACE"," ",679],["T_VARIABLE","$area",679],",",["T_WHITESPACE"," ",679],["T_CONSTANT_ENCAPSED_STRING","'store'",679],["T_WHITESPACE"," ",679],["T_DOUBLE_ARROW","=>",679],["T_WHITESPACE"," ",679],["T_VARIABLE","$storeId",679],"]",")",";",["T_WHITESPACE","\n                ",679],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","applyDesignConfig",680],"(",")",";",["T_WHITESPACE","\n            ",680],"}",["T_WHITESPACE","\n        ",681],"}",["T_WHITESPACE"," ",682],["T_ELSE","else",682],["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n            ",682],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","emulatedDesignConfig",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_STRING","false",683],";",["T_WHITESPACE","\n        ",683],"}",["T_WHITESPACE","\n    ",684],"}",["T_WHITESPACE","\n\n    ",685],["T_DOC_COMMENT","\/**\n     * Revert to last design config, used before emulation\n     *\n     * @return void\n     *\/",687],["T_WHITESPACE","\n    ",691],["T_PUBLIC","public",692],["T_WHITESPACE"," ",692],["T_FUNCTION","function",692],["T_WHITESPACE"," ",692],["T_STRING","revertDesign",692],"(",")",["T_WHITESPACE","\n    ",692],"{",["T_WHITESPACE","\n        ",693],["T_IF","if",694],["T_WHITESPACE"," ",694],"(",["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","emulatedDesignConfig",694],")",["T_WHITESPACE"," ",694],"{",["T_WHITESPACE","\n            ",694],["T_VARIABLE","$this",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","setDesignConfig",695],"(",["T_VARIABLE","$this",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","emulatedDesignConfig",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","getData",695],"(",")",")",";",["T_WHITESPACE","\n            ",695],["T_VARIABLE","$this",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","cancelDesignConfig",696],"(",")",";",["T_WHITESPACE","\n            ",696],["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","emulatedDesignConfig",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","false",697],";",["T_WHITESPACE","\n        ",697],"}",["T_WHITESPACE","\n    ",698],"}",["T_WHITESPACE","\n\n    ",699],["T_DOC_COMMENT","\/**\n     * Return true if template type eq text\n     *\n     * @return boolean\n     *\/",701],["T_WHITESPACE","\n    ",705],["T_PUBLIC","public",706],["T_WHITESPACE"," ",706],["T_FUNCTION","function",706],["T_WHITESPACE"," ",706],["T_STRING","isPlain",706],"(",")",["T_WHITESPACE","\n    ",706],"{",["T_WHITESPACE","\n        ",707],["T_RETURN","return",708],["T_WHITESPACE"," ",708],["T_VARIABLE","$this",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","getType",708],"(",")",["T_WHITESPACE"," ",708],["T_IS_EQUAL","==",708],["T_WHITESPACE"," ",708],["T_STRING","self",708],["T_DOUBLE_COLON","::",708],["T_STRING","TYPE_TEXT",708],";",["T_WHITESPACE","\n    ",708],"}",["T_WHITESPACE","\n\n    ",709],["T_DOC_COMMENT","\/**\n     * Getter for filter factory that is specific to the type of template being processed\n     *\n     * @return mixed\n     *\/",711],["T_WHITESPACE","\n    ",715],["T_ABSTRACT","abstract",716],["T_WHITESPACE"," ",716],["T_PROTECTED","protected",716],["T_WHITESPACE"," ",716],["T_FUNCTION","function",716],["T_WHITESPACE"," ",716],["T_STRING","getFilterFactory",716],"(",")",";",["T_WHITESPACE","\n\n    ",716],["T_DOC_COMMENT","\/**\n     * Getter for template type\n     *\n     * @return int|string\n     *\/",718],["T_WHITESPACE","\n    ",722],["T_ABSTRACT","abstract",723],["T_WHITESPACE"," ",723],["T_PUBLIC","public",723],["T_WHITESPACE"," ",723],["T_FUNCTION","function",723],["T_WHITESPACE"," ",723],["T_STRING","getType",723],"(",")",";",["T_WHITESPACE","\n\n    ",723],["T_DOC_COMMENT","\/**\n     * Generate URL for the specified store.\n     *\n     * @param Store $store\n     * @param string $route\n     * @param array $params\n     * @return string\n     *\/",725],["T_WHITESPACE","\n    ",732],["T_PUBLIC","public",733],["T_WHITESPACE"," ",733],["T_FUNCTION","function",733],["T_WHITESPACE"," ",733],["T_STRING","getUrl",733],"(",["T_STRING","Store",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$store",733],",",["T_WHITESPACE"," ",733],["T_VARIABLE","$route",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_CONSTANT_ENCAPSED_STRING","''",733],",",["T_WHITESPACE"," ",733],["T_VARIABLE","$params",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],"[","]",")",["T_WHITESPACE","\n    ",733],"{",["T_WHITESPACE","\n        ",734],["T_VARIABLE","$url",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","urlModel",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","setScope",735],"(",["T_VARIABLE","$store",735],")",";",["T_WHITESPACE","\n        ",735],["T_IF","if",736],["T_WHITESPACE"," ",736],"(",["T_VARIABLE","$this",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","storeManager",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","getStore",736],"(",")",["T_OBJECT_OPERATOR","->",736],["T_STRING","getId",736],"(",")",["T_WHITESPACE"," ",736],["T_IS_NOT_EQUAL","!=",736],["T_WHITESPACE"," ",736],["T_VARIABLE","$store",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","getId",736],"(",")",")",["T_WHITESPACE"," ",736],"{",["T_WHITESPACE","\n            ",736],["T_VARIABLE","$params",737],"[",["T_CONSTANT_ENCAPSED_STRING","'_scope_to_url'",737],"]",["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_STRING","true",737],";",["T_WHITESPACE","\n        ",737],"}",["T_WHITESPACE","\n        ",738],["T_RETURN","return",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$url",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","getUrl",739],"(",["T_VARIABLE","$route",739],",",["T_WHITESPACE"," ",739],["T_VARIABLE","$params",739],")",";",["T_WHITESPACE","\n    ",739],"}",["T_WHITESPACE","\n",740],"}",["T_WHITESPACE","\n",741]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Test for validation rules implemented by XSD schemas for email templates configuration\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",7],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",9],["T_WHITESPACE","\n",10],["T_NAMESPACE","namespace",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Email",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Unit",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Template",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Config",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","XsdTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PHPUnit_Framework_TestCase",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * Test validation rules implemented by XSD schema for merged configs\n     *\n     * @param string $fixtureXml\n     * @param array $expectedErrors\n     * @dataProvider mergedXmlDataProvider\n     *\/",15],["T_WHITESPACE","\n    ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","testMergedXml",22],"(",["T_VARIABLE","$fixtureXml",22],",",["T_WHITESPACE"," ",22],["T_ARRAY","array",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$expectedErrors",22],")",["T_WHITESPACE","\n    ",22],"{",["T_WHITESPACE","\n        ",23],["T_IF","if",24],["T_WHITESPACE"," ",24],"(","!",["T_STRING","function_exists",24],"(",["T_CONSTANT_ENCAPSED_STRING","'libxml_set_external_entity_loader'",24],")",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n            ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","markTestSkipped",25],"(",["T_CONSTANT_ENCAPSED_STRING","'Skipped on HHVM. Will be fixed in MAGETWO-45033'",25],")",";",["T_WHITESPACE","\n        ",25],"}",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$urnResolver",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_NEW","new",27],["T_WHITESPACE"," ",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Magento",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Framework",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Config",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Dom",27],["T_NS_SEPARATOR","\\",27],["T_STRING","UrnResolver",27],"(",")",";",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$schemaFile",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$urnResolver",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getRealPath",28],"(",["T_CONSTANT_ENCAPSED_STRING","'urn:magento:module:Magento_Email:etc\/email_templates.xsd'",28],")",";",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","_testXmlAgainstXsd",29],"(",["T_VARIABLE","$fixtureXml",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$schemaFile",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$expectedErrors",29],")",";",["T_WHITESPACE","\n    ",29],"}",["T_WHITESPACE","\n\n    ",30],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","mergedXmlDataProvider",32],"(",")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_RETURN","return",34],["T_WHITESPACE"," ",34],"[",["T_WHITESPACE","\n            ",34],["T_CONSTANT_ENCAPSED_STRING","'valid'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],"[",["T_WHITESPACE","\n                ",35],["T_CONSTANT_ENCAPSED_STRING","'<config><template id=\"test\" label=\"Test\" file=\"test.txt\" type=\"text\" module=\"Module\" area=\"frontend\"\/><\/config>'",36],",",["T_WHITESPACE","\n                ",36],"[","]",",",["T_WHITESPACE","\n            ",37],"]",",",["T_WHITESPACE","\n            ",38],["T_CONSTANT_ENCAPSED_STRING","'empty root node'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],"[",["T_WHITESPACE","\n                ",39],["T_CONSTANT_ENCAPSED_STRING","'<config\/>'",40],",",["T_WHITESPACE","\n                ",40],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'config': Missing child element(s). Expected is ( template ).\"",41],"]",",",["T_WHITESPACE","\n            ",41],"]",",",["T_WHITESPACE","\n            ",42],["T_CONSTANT_ENCAPSED_STRING","'irrelevant root node'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],"[",["T_WHITESPACE","\n                ",43],["T_CONSTANT_ENCAPSED_STRING","'<template id=\"test\" label=\"Test\" file=\"test.txt\" type=\"text\" module=\"Module\" area=\"frontend\"\/>'",44],",",["T_WHITESPACE","\n                ",44],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template': No matching global declaration available for the validation root.\"",45],"]",",",["T_WHITESPACE","\n            ",45],"]",",",["T_WHITESPACE","\n            ",46],["T_CONSTANT_ENCAPSED_STRING","'invalid node'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],"[",["T_WHITESPACE","\n                ",47],["T_CONSTANT_ENCAPSED_STRING","'<config><invalid\/><\/config>'",48],",",["T_WHITESPACE","\n                ",48],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'invalid': This element is not expected. Expected is ( template ).\"",49],"]",",",["T_WHITESPACE","\n            ",49],"]",",",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" with value'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],"[",["T_WHITESPACE","\n                ",51],["T_CONSTANT_ENCAPSED_STRING","'<config>\n                    <template id=\"test\" label=\"Test\" file=\"test.txt\" type=\"text\" module=\"Module\" area=\"frontend\">invalid<\/template>\n                <\/config>'",52],",",["T_WHITESPACE","\n                ",54],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template': Character content is not allowed, because the content type is empty.\"",55],"]",",",["T_WHITESPACE","\n            ",55],"]",",",["T_WHITESPACE","\n            ",56],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" with children'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],"[",["T_WHITESPACE","\n                ",57],["T_CONSTANT_ENCAPSED_STRING","'<config>\n                    <template id=\"test\" label=\"Test\" file=\"test.txt\" type=\"text\" module=\"Module\" area=\"frontend\"><invalid\/><\/template>\n                <\/config>'",58],",",["T_WHITESPACE","\n                ",60],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template': Element content is not allowed, because the content type is empty.\"",61],"]",",",["T_WHITESPACE","\n            ",61],"]",",",["T_WHITESPACE","\n            ",62],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" without attribute \"id\"'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],"[",["T_WHITESPACE","\n                ",63],["T_CONSTANT_ENCAPSED_STRING","'<config><template label=\"Test\" file=\"test.txt\" type=\"text\" module=\"Module\" area=\"frontend\"\/><\/config>'",64],",",["T_WHITESPACE","\n                ",64],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template': The attribute 'id' is required but missing.\"",65],"]",",",["T_WHITESPACE","\n            ",65],"]",",",["T_WHITESPACE","\n            ",66],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" without attribute \"label\"'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],"[",["T_WHITESPACE","\n                ",67],["T_CONSTANT_ENCAPSED_STRING","'<config><template id=\"test\" file=\"test.txt\" type=\"text\" module=\"Module\" area=\"frontend\"\/><\/config>'",68],",",["T_WHITESPACE","\n                ",68],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template': The attribute 'label' is required but missing.\"",69],"]",",",["T_WHITESPACE","\n            ",69],"]",",",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" without attribute \"file\"'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],"[",["T_WHITESPACE","\n                ",71],["T_CONSTANT_ENCAPSED_STRING","'<config><template id=\"test\" label=\"Test\" type=\"text\" module=\"Module\" area=\"frontend\"\/><\/config>'",72],",",["T_WHITESPACE","\n                ",72],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template': The attribute 'file' is required but missing.\"",73],"]",",",["T_WHITESPACE","\n            ",73],"]",",",["T_WHITESPACE","\n            ",74],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" without attribute \"type\"'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],"[",["T_WHITESPACE","\n                ",75],["T_CONSTANT_ENCAPSED_STRING","'<config><template id=\"test\" label=\"Test\" file=\"test.txt\" module=\"Module\" area=\"frontend\"\/><\/config>'",76],",",["T_WHITESPACE","\n                ",76],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template': The attribute 'type' is required but missing.\"",77],"]",",",["T_WHITESPACE","\n            ",77],"]",",",["T_WHITESPACE","\n            ",78],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" with invalid attribute \"type\"'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],"[",["T_WHITESPACE","\n                ",79],["T_CONSTANT_ENCAPSED_STRING","'<config><template id=\"test\" label=\"Test\" file=\"test.txt\" type=\"invalid\" module=\"Module\" area=\"frontend\"\/><\/config>'",80],",",["T_WHITESPACE","\n                ",80],"[",["T_WHITESPACE","\n                    ",81],["T_CONSTANT_ENCAPSED_STRING","\"Element 'template', attribute 'type': \"",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE","\n                    ",82],["T_CONSTANT_ENCAPSED_STRING","\"[facet 'enumeration'] The value 'invalid' is not an element of the set {'html', 'text'}.\"",83],",",["T_WHITESPACE","\n                    ",83],["T_CONSTANT_ENCAPSED_STRING","\"Element 'template', attribute 'type': \"",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE","\n                    ",84],["T_CONSTANT_ENCAPSED_STRING","\"'invalid' is not a valid value of the atomic type 'emailTemplateFormatType'.\"",85],["T_WHITESPACE","\n                ",85],"]",",",["T_WHITESPACE","\n            ",86],"]",",",["T_WHITESPACE","\n            ",87],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" without attribute \"area\"'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],"[",["T_WHITESPACE","\n                ",88],["T_CONSTANT_ENCAPSED_STRING","'<config><template id=\"test\" label=\"Test\" file=\"test.txt\" type=\"text\" module=\"Module\"\/><\/config>'",89],",",["T_WHITESPACE","\n                ",89],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template': The attribute 'area' is required but missing.\"",90],"]",",",["T_WHITESPACE","\n            ",90],"]",",",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" with invalid attribute \"area\"'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],"[",["T_WHITESPACE","\n                ",92],["T_CONSTANT_ENCAPSED_STRING","'<config><template id=\"test\" label=\"Test\" file=\"test.txt\" type=\"text\" module=\"Module\" area=\"invalid\"\/><\/config>'",93],",",["T_WHITESPACE","\n                ",93],"[",["T_WHITESPACE","\n                    ",94],["T_CONSTANT_ENCAPSED_STRING","\"Element 'template', attribute 'area': \"",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE","\n                    ",95],["T_CONSTANT_ENCAPSED_STRING","\"[facet 'enumeration'] The value 'invalid' is not an element of the set {'frontend', 'adminhtml'}.\"",96],",",["T_WHITESPACE","\n                    ",96],["T_CONSTANT_ENCAPSED_STRING","\"Element 'template', attribute 'area': \"",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE","\n                    ",97],["T_CONSTANT_ENCAPSED_STRING","\"'invalid' is not a valid value of the atomic type 'areaType'.\"",98],["T_WHITESPACE","\n                ",98],"]",",",["T_WHITESPACE","\n            ",99],"]",",",["T_WHITESPACE","\n            ",100],["T_CONSTANT_ENCAPSED_STRING","'node \"template\" with unknown attribute'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],"[",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'<config>\n                    <template id=\"test\" label=\"Test\" file=\"test.txt\" type=\"text\" module=\"Module\" area=\"frontend\" unknown=\"true\"\/>\n                <\/config>'",102],",",["T_WHITESPACE","\n                ",104],"[",["T_CONSTANT_ENCAPSED_STRING","\"Element 'template', attribute 'unknown': The attribute 'unknown' is not allowed.\"",105],"]",",",["T_WHITESPACE","\n            ",105],"]",["T_WHITESPACE","\n        ",106],"]",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Test that XSD schema validates fixture XML contents producing expected results\n     *\n     * @param string $fixtureXml\n     * @param string $schemaFile\n     * @param array $expectedErrors\n     *\/",110],["T_WHITESPACE","\n    ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","_testXmlAgainstXsd",117],"(",["T_VARIABLE","$fixtureXml",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$schemaFile",117],",",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$expectedErrors",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$validationStateMock",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getMock",119],"(",["T_WHITESPACE","\r\n            ",119],["T_NS_SEPARATOR","\\",120],["T_STRING","Magento",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Framework",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Config",120],["T_NS_SEPARATOR","\\",120],["T_STRING","ValidationStateInterface",120],["T_DOUBLE_COLON","::",120],["T_CLASS","class",120],",",["T_WHITESPACE","\r\n            ",120],"[","]",",",["T_WHITESPACE","\r\n            ",121],"[","]",",",["T_WHITESPACE","\r\n            ",122],["T_CONSTANT_ENCAPSED_STRING","''",123],",",["T_WHITESPACE","\r\n            ",123],["T_STRING","false",124],["T_WHITESPACE","\r\n        ",124],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$validationStateMock",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","method",126],"(",["T_CONSTANT_ENCAPSED_STRING","'isValidationRequired'",126],")",["T_WHITESPACE","\n            ",126],["T_OBJECT_OPERATOR","->",127],["T_STRING","willReturn",127],"(",["T_STRING","true",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$dom",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_NEW","new",128],["T_WHITESPACE"," ",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Magento",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Framework",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Config",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Dom",128],"(",["T_VARIABLE","$fixtureXml",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$validationStateMock",128],",",["T_WHITESPACE"," ",128],"[","]",",",["T_WHITESPACE"," ",128],["T_STRING","null",128],",",["T_WHITESPACE"," ",128],["T_STRING","null",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'%message%'",128],")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$actualResult",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$dom",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","validate",129],"(",["T_VARIABLE","$schemaFile",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$actualErrors",129],")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertEquals",130],"(",["T_EMPTY","empty",130],"(",["T_VARIABLE","$expectedErrors",130],")",",",["T_WHITESPACE"," ",130],["T_VARIABLE","$actualResult",130],")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEquals",131],"(",["T_VARIABLE","$expectedErrors",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$actualErrors",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n",132],"}",["T_WHITESPACE","\n",133]]
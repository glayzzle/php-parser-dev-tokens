[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigurableProduct",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Type",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Data",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ProductAttributeInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProductInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ProductRepositoryInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Config",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","App",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ObjectManager",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","EntityManager",13],["T_NS_SEPARATOR","\\",13],["T_STRING","MetadataPool",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Catalog",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Product",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Gallery",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ReadHandler",14],["T_WHITESPACE"," ",14],["T_AS","as",14],["T_WHITESPACE"," ",14],["T_STRING","GalleryReadHandler",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Configurable product type implementation\n *\n * This type builds in product attributes and existing simple products\n *\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.ExcessiveClassComplexity)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",16],["T_WHITESPACE","\n",24],["T_CLASS","class",25],["T_WHITESPACE"," ",25],["T_STRING","Configurable",25],["T_WHITESPACE"," ",25],["T_EXTENDS","extends",25],["T_WHITESPACE"," ",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Magento",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Catalog",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Model",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Product",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Type",25],["T_NS_SEPARATOR","\\",25],["T_STRING","AbstractType",25],["T_WHITESPACE","\n",25],"{",["T_WHITESPACE","\n    ",26],["T_DOC_COMMENT","\/**\n     * Product type code\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","TYPE_CODE",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'configurable'",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Cache key for Used Product Attribute Ids\n     *\n     * @var string\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$usedProductAttributeIds",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_used_product_attribute_ids'",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Cache key for Used Product Attributes\n     *\n     * @var string\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$usedProductAttributes",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_used_product_attributes'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Cache key for Used Attributes\n     *\n     * @var string\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_usedAttributes",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_used_attributes'",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Cache key for configurable attributes\n     *\n     * @var string\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_configurableAttributes",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_configurable_attributes'",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Cache key for Used product ids\n     *\n     * @var string\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_usedProductIds",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_product_ids'",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Cache key for used products\n     *\n     * @var string\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_usedProducts",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'_cache_instance_products'",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Product is composite\n     *\n     * @var bool\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_isComposite",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","true",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Product is configurable\n     *\n     * @var bool\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$_canConfigure",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","true",86],";",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\Config\\ScopeConfigInterface\n     *\/",88],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_scopeConfig",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Catalog product type configurable\n     *\n     * @var \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_catalogProductTypeConfigurable",98],";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Attribute collection factory\n     *\n     * @var\n     * \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\\Attribute\\CollectionFactory\n     *\/",100],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_attributeCollectionFactory",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Product collection factory\n     *\n     * @var \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\\Product\\CollectionFactory\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$_productCollectionFactory",113],";",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Configurable attribute factory\n     *\n     * @var \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\\AttributeFactory\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$configurableAttributeFactory",120],";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Eav attribute factory\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\AttributeFactory\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$_eavAttributeFactory",127],";",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Type configurable factory\n     *\n     * @var \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\ConfigurableFactory\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PROTECTED","protected",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$typeConfigurableFactory",134],";",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\ExtensionAttribute\\JoinProcessorInterface\n     *\/",136],["T_WHITESPACE","\n    ",138],["T_PROTECTED","protected",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$extensionAttributesJoinProcessor",139],";",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Cache\\FrontendInterface\n     *\/",141],["T_WHITESPACE","\n    ",143],["T_PRIVATE","private",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$cache",144],";",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * @var MetadataPool\n     *\/",146],["T_WHITESPACE","\n    ",148],["T_PRIVATE","private",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$metadataPool",149],";",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * @var GalleryReadHandler\n     *\/",151],["T_WHITESPACE","\n    ",153],["T_PRIVATE","private",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$productGalleryReadHandler",154],";",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * @var Config\n     *\/",156],["T_WHITESPACE","\n    ",158],["T_PRIVATE","private",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$catalogConfig",159],";",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",161],["T_WHITESPACE","\n    ",163],["T_PRIVATE","private",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$customerSession",164],";",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * @codingStandardsIgnoreStart\/End\n     *\n     * @param \\Magento\\Catalog\\Model\\Product\\Option $catalogProductOption\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Catalog\\Model\\Product\\Type $catalogProductType\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\MediaStorage\\Helper\\File\\Storage\\Database $fileStorageDb\n     * @param \\Magento\\Framework\\Filesystem $filesystem\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Psr\\Log\\LoggerInterface $logger\n     * @param ProductRepositoryInterface $productRepository\n     * @param \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\ConfigurableFactory $typeConfigurableFactory\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\AttributeFactory $eavAttributeFactory\n     * @param \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\\AttributeFactory $configurableAttributeFactory\n     * @param \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\\Product\\CollectionFactory $productCollectionFactory\n     * @param \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\\Attribute\\CollectionFactory $attributeCollectionFactory\n     * @param \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable $catalogProductTypeConfigurable\n     * @param \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig\n     * @param \\Magento\\Framework\\Api\\ExtensionAttribute\\JoinProcessorInterface $extensionAttributesJoinProcessor\n     * @param \\Magento\\Framework\\Serialize\\Serializer\\Json $serializer\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",166],["T_WHITESPACE","\n    ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","__construct",189],"(",["T_WHITESPACE","\n        ",189],["T_NS_SEPARATOR","\\",190],["T_STRING","Magento",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Catalog",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Model",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Product",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Option",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$catalogProductOption",190],",",["T_WHITESPACE","\n        ",190],["T_NS_SEPARATOR","\\",191],["T_STRING","Magento",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Eav",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Model",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Config",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$eavConfig",191],",",["T_WHITESPACE","\n        ",191],["T_NS_SEPARATOR","\\",192],["T_STRING","Magento",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Catalog",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Model",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Product",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Type",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$catalogProductType",192],",",["T_WHITESPACE","\n        ",192],["T_NS_SEPARATOR","\\",193],["T_STRING","Magento",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Framework",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Event",193],["T_NS_SEPARATOR","\\",193],["T_STRING","ManagerInterface",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$eventManager",193],",",["T_WHITESPACE","\n        ",193],["T_NS_SEPARATOR","\\",194],["T_STRING","Magento",194],["T_NS_SEPARATOR","\\",194],["T_STRING","MediaStorage",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Helper",194],["T_NS_SEPARATOR","\\",194],["T_STRING","File",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Storage",194],["T_NS_SEPARATOR","\\",194],["T_STRING","Database",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$fileStorageDb",194],",",["T_WHITESPACE","\n        ",194],["T_NS_SEPARATOR","\\",195],["T_STRING","Magento",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Framework",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Filesystem",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$filesystem",195],",",["T_WHITESPACE","\n        ",195],["T_NS_SEPARATOR","\\",196],["T_STRING","Magento",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Framework",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Registry",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$coreRegistry",196],",",["T_WHITESPACE","\n        ",196],["T_NS_SEPARATOR","\\",197],["T_STRING","Psr",197],["T_NS_SEPARATOR","\\",197],["T_STRING","Log",197],["T_NS_SEPARATOR","\\",197],["T_STRING","LoggerInterface",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$logger",197],",",["T_WHITESPACE","\n        ",197],["T_STRING","ProductRepositoryInterface",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$productRepository",198],",",["T_WHITESPACE","\n        ",198],["T_NS_SEPARATOR","\\",199],["T_STRING","Magento",199],["T_NS_SEPARATOR","\\",199],["T_STRING","ConfigurableProduct",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Model",199],["T_NS_SEPARATOR","\\",199],["T_STRING","ResourceModel",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Product",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Type",199],["T_NS_SEPARATOR","\\",199],["T_STRING","ConfigurableFactory",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$typeConfigurableFactory",199],",",["T_WHITESPACE","\n        ",199],["T_NS_SEPARATOR","\\",200],["T_STRING","Magento",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Catalog",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Model",200],["T_NS_SEPARATOR","\\",200],["T_STRING","ResourceModel",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Eav",200],["T_NS_SEPARATOR","\\",200],["T_STRING","AttributeFactory",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$eavAttributeFactory",200],",",["T_WHITESPACE","\n        ",200],["T_NS_SEPARATOR","\\",201],["T_STRING","Magento",201],["T_NS_SEPARATOR","\\",201],["T_STRING","ConfigurableProduct",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Model",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Product",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Type",201],["T_NS_SEPARATOR","\\",201],["T_STRING","Configurable",201],["T_NS_SEPARATOR","\\",201],["T_STRING","AttributeFactory",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$configurableAttributeFactory",201],",",["T_WHITESPACE","\n        ",201],["T_NS_SEPARATOR","\\",202],["T_STRING","Magento",202],["T_NS_SEPARATOR","\\",202],["T_STRING","ConfigurableProduct",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Model",202],["T_NS_SEPARATOR","\\",202],["T_STRING","ResourceModel",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Product",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Type",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Configurable",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Product",202],["T_NS_SEPARATOR","\\",202],["T_STRING","CollectionFactory",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$productCollectionFactory",202],",",["T_WHITESPACE","\n        ",202],["T_NS_SEPARATOR","\\",203],["T_STRING","Magento",203],["T_NS_SEPARATOR","\\",203],["T_STRING","ConfigurableProduct",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Model",203],["T_NS_SEPARATOR","\\",203],["T_STRING","ResourceModel",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Product",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Type",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Configurable",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Attribute",203],["T_NS_SEPARATOR","\\",203],["T_STRING","CollectionFactory",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$attributeCollectionFactory",203],",",["T_WHITESPACE","\n        ",203],["T_NS_SEPARATOR","\\",204],["T_STRING","Magento",204],["T_NS_SEPARATOR","\\",204],["T_STRING","ConfigurableProduct",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Model",204],["T_NS_SEPARATOR","\\",204],["T_STRING","ResourceModel",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Product",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Type",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Configurable",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$catalogProductTypeConfigurable",204],",",["T_WHITESPACE","\n        ",204],["T_NS_SEPARATOR","\\",205],["T_STRING","Magento",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Framework",205],["T_NS_SEPARATOR","\\",205],["T_STRING","App",205],["T_NS_SEPARATOR","\\",205],["T_STRING","Config",205],["T_NS_SEPARATOR","\\",205],["T_STRING","ScopeConfigInterface",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$scopeConfig",205],",",["T_WHITESPACE","\n        ",205],["T_NS_SEPARATOR","\\",206],["T_STRING","Magento",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Framework",206],["T_NS_SEPARATOR","\\",206],["T_STRING","Api",206],["T_NS_SEPARATOR","\\",206],["T_STRING","ExtensionAttribute",206],["T_NS_SEPARATOR","\\",206],["T_STRING","JoinProcessorInterface",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$extensionAttributesJoinProcessor",206],",",["T_WHITESPACE","\n        ",206],["T_NS_SEPARATOR","\\",207],["T_STRING","Magento",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Framework",207],["T_NS_SEPARATOR","\\",207],["T_STRING","Cache",207],["T_NS_SEPARATOR","\\",207],["T_STRING","FrontendInterface",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$cache",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","null",207],",",["T_WHITESPACE","\n        ",207],["T_NS_SEPARATOR","\\",208],["T_STRING","Magento",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Customer",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Model",208],["T_NS_SEPARATOR","\\",208],["T_STRING","Session",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$customerSession",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","null",208],",",["T_WHITESPACE","\n        ",208],["T_NS_SEPARATOR","\\",209],["T_STRING","Magento",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Framework",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Serialize",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Serializer",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Json",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$serializer",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","null",209],["T_WHITESPACE","\n    ",209],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","typeConfigurableFactory",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$typeConfigurableFactory",211],";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_eavAttributeFactory",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$eavAttributeFactory",212],";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","configurableAttributeFactory",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$configurableAttributeFactory",213],";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_productCollectionFactory",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$productCollectionFactory",214],";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_attributeCollectionFactory",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$attributeCollectionFactory",215],";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_catalogProductTypeConfigurable",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$catalogProductTypeConfigurable",216],";",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_scopeConfig",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$scopeConfig",217],";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","extensionAttributesJoinProcessor",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$extensionAttributesJoinProcessor",218],";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","cache",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$cache",219],";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","customerSession",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$customerSession",220],";",["T_WHITESPACE","\n        ",220],["T_STRING","parent",221],["T_DOUBLE_COLON","::",221],["T_STRING","__construct",221],"(",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$catalogProductOption",222],",",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$eavConfig",223],",",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$catalogProductType",224],",",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$eventManager",225],",",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$fileStorageDb",226],",",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$filesystem",227],",",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$coreRegistry",228],",",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$logger",229],",",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$productRepository",230],",",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$serializer",231],["T_WHITESPACE","\n        ",231],")",";",["T_WHITESPACE","\n\n    ",232],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * @deprecated\n     * @return \\Magento\\Framework\\Cache\\FrontendInterface\n     *\/",236],["T_WHITESPACE","\n    ",239],["T_PRIVATE","private",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","getCache",240],"(",")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_STRING","null",242],["T_WHITESPACE"," ",242],["T_IS_IDENTICAL","===",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","cache",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","cache",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","ObjectManager",243],["T_DOUBLE_COLON","::",243],["T_STRING","getInstance",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","get",243],"(",["T_NS_SEPARATOR","\\",243],["T_STRING","Magento",243],["T_NS_SEPARATOR","\\",243],["T_STRING","Framework",243],["T_NS_SEPARATOR","\\",243],["T_STRING","Cache",243],["T_NS_SEPARATOR","\\",243],["T_STRING","FrontendInterface",243],["T_DOUBLE_COLON","::",243],["T_CLASS","class",243],")",";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n        ",244],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","cache",245],";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * @deprecated\n     * @return \\Magento\\Customer\\Model\\Session\n     *\/",248],["T_WHITESPACE","\n    ",251],["T_PRIVATE","private",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","getCustomerSession",252],"(",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_STRING","null",254],["T_WHITESPACE"," ",254],["T_IS_IDENTICAL","===",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","customerSession",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","customerSession",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","ObjectManager",255],["T_DOUBLE_COLON","::",255],["T_STRING","getInstance",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","get",255],"(",["T_NS_SEPARATOR","\\",255],["T_STRING","Magento",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Customer",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Model",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Session",255],["T_DOUBLE_COLON","::",255],["T_CLASS","class",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","customerSession",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Return relation info about used products\n     *\n     * @return \\Magento\\Framework\\DataObject Object with information data\n     *\/",260],["T_WHITESPACE","\n    ",264],["T_PUBLIC","public",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","getRelationInfo",265],"(",")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$info",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_NEW","new",267],["T_WHITESPACE"," ",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Magento",267],["T_NS_SEPARATOR","\\",267],["T_STRING","Framework",267],["T_NS_SEPARATOR","\\",267],["T_STRING","DataObject",267],"(",")",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$info",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","setTable",268],"(",["T_WHITESPACE","\n            ",268],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_link'",269],["T_WHITESPACE","\n        ",269],")",["T_OBJECT_OPERATOR","->",270],["T_STRING","setParentFieldName",270],"(",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",271],["T_WHITESPACE","\n        ",271],")",["T_OBJECT_OPERATOR","->",272],["T_STRING","setChildFieldName",272],"(",["T_WHITESPACE","\n            ",272],["T_CONSTANT_ENCAPSED_STRING","'product_id'",273],["T_WHITESPACE","\n        ",273],")",";",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$info",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Retrieve Required children ids\n     * Return grouped array, ex array(\n     *   group => array(ids)\n     * )\n     *\n     * @param  array|int $parentId\n     * @param  bool $required\n     * @return array\n     *\/",278],["T_WHITESPACE","\n    ",287],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","getChildrenIds",288],"(",["T_VARIABLE","$parentId",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$required",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","true",288],")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_catalogProductTypeConfigurable",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getChildrenIds",290],"(",["T_VARIABLE","$parentId",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$required",290],")",";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Retrieve parent ids array by required child\n     *\n     * @param  int|array $childId\n     * @return array\n     *\/",293],["T_WHITESPACE","\n    ",298],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","getParentIdsByChild",299],"(",["T_VARIABLE","$childId",299],")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_catalogProductTypeConfigurable",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getParentIdsByChild",301],"(",["T_VARIABLE","$childId",301],")",";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_DOC_COMMENT","\/**\n     * Check attribute availability for super product creation\n     *\n     * @param  \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute $attribute\n     * @return bool\n     *\/",304],["T_WHITESPACE","\n    ",309],["T_PUBLIC","public",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","canUseAttribute",310],"(",["T_NS_SEPARATOR","\\",310],["T_STRING","Magento",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Catalog",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Model",310],["T_NS_SEPARATOR","\\",310],["T_STRING","ResourceModel",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Eav",310],["T_NS_SEPARATOR","\\",310],["T_STRING","Attribute",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$attribute",310],")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$attribute",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getIsGlobal",312],"(",")",["T_WHITESPACE"," ",312],["T_IS_EQUAL","==",312],["T_WHITESPACE"," ",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Magento",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Eav",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Model",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Entity",312],["T_NS_SEPARATOR","\\",312],["T_STRING","Attribute",312],["T_NS_SEPARATOR","\\",312],["T_STRING","ScopedAttributeInterface",312],["T_DOUBLE_COLON","::",312],["T_STRING","SCOPE_GLOBAL",312],["T_WHITESPACE"," ",312],["T_BOOLEAN_AND","&&",312],["T_WHITESPACE","\n            ",312],["T_VARIABLE","$attribute",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getIsVisible",313],"(",")",["T_WHITESPACE"," ",313],["T_BOOLEAN_AND","&&",313],["T_WHITESPACE","\n            ",313],["T_VARIABLE","$attribute",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","usesSource",314],"(",")",["T_WHITESPACE"," ",314],["T_BOOLEAN_AND","&&",314],["T_WHITESPACE","\n            ",314],["T_VARIABLE","$attribute",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getIsUserDefined",315],"(",")",";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Declare attribute identifiers used for assign subproducts\n     *\n     * @param   array $ids\n     * @param   \\Magento\\Catalog\\Model\\Product $product\n     * @return  \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\n     * @deprecated use \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable::setUsedProductAttributes instead\n     *\/",318],["T_WHITESPACE","\n    ",325],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","setUsedProductAttributeIds",326],"(",["T_VARIABLE","$ids",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$product",326],")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$usedProductAttributes",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],"[","]",";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$configurableAttributes",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],"[","]",";",["T_WHITESPACE","\n\n        ",329],["T_FOREACH","foreach",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$ids",331],["T_WHITESPACE"," ",331],["T_AS","as",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$attributeId",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$usedProductAttributes",332],"[","]",["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getAttributeById",332],"(",["T_VARIABLE","$attributeId",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$product",332],")",";",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$configurableAttributes",333],"[","]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","configurableAttributeFactory",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","create",333],"(",")",["T_OBJECT_OPERATOR","->",333],["T_STRING","setProductAttribute",333],"(",["T_WHITESPACE","\n                ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getAttributeById",334],"(",["T_VARIABLE","$attributeId",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$product",334],")",["T_WHITESPACE","\n            ",334],")",";",["T_WHITESPACE","\n        ",335],"}",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$product",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","setData",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","usedProductAttributes",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$usedProductAttributes",337],")",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$product",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","setData",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","usedProductAttributeIds",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$ids",338],")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$product",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","setData",339],"(",["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","_configurableAttributes",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$configurableAttributes",339],")",";",["T_WHITESPACE","\n\n        ",339],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Set list of used attributes to product\n     *\n     * @param ProductInterface $product\n     * @param array $ids\n     * @return $this\n     *\/",344],["T_WHITESPACE","\n    ",350],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","setUsedProductAttributes",351],"(",["T_STRING","ProductInterface",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$product",351],",",["T_WHITESPACE"," ",351],["T_ARRAY","array",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$ids",351],")",["T_WHITESPACE","\n    ",351],"{",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$usedProductAttributes",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],"[","]",";",["T_WHITESPACE","\n\n        ",353],["T_FOREACH","foreach",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$ids",355],["T_WHITESPACE"," ",355],["T_AS","as",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$attributeId",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$usedProductAttributes",356],"[","]",["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getAttributeById",356],"(",["T_VARIABLE","$attributeId",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$product",356],")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_VARIABLE","$product",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","setData",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","usedProductAttributes",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$usedProductAttributes",358],")",";",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$product",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","setData",359],"(",["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","usedProductAttributeIds",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$ids",359],")",";",["T_WHITESPACE","\n\n        ",359],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n\n    ",362],["T_DOC_COMMENT","\/**\n     * Retrieve identifiers of used product attributes\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",364],["T_WHITESPACE","\n    ",369],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","getUsedProductAttributeIds",370],"(",["T_VARIABLE","$product",370],")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_IF","if",372],["T_WHITESPACE"," ",372],"(","!",["T_VARIABLE","$product",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","hasData",372],"(",["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","usedProductAttributeIds",372],")",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$usedProductAttributeIds",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],"[","]",";",["T_WHITESPACE","\n            ",373],["T_FOREACH","foreach",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getUsedProductAttributes",374],"(",["T_VARIABLE","$product",374],")",["T_WHITESPACE"," ",374],["T_AS","as",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$attribute",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_VARIABLE","$usedProductAttributeIds",375],"[","]",["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$attribute",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getId",375],"(",")",";",["T_WHITESPACE","\n            ",375],"}",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$product",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","setData",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","usedProductAttributeIds",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$usedProductAttributeIds",377],")",";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE","\n        ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$product",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getData",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","usedProductAttributeIds",379],")",";",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n\n    ",380],["T_DOC_COMMENT","\/**\n     * Retrieve used product attributes\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",382],["T_WHITESPACE","\n    ",387],["T_PUBLIC","public",388],["T_WHITESPACE"," ",388],["T_FUNCTION","function",388],["T_WHITESPACE"," ",388],["T_STRING","getUsedProductAttributes",388],"(",["T_VARIABLE","$product",388],")",["T_WHITESPACE","\n    ",388],"{",["T_WHITESPACE","\n        ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(","!",["T_VARIABLE","$product",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","hasData",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","usedProductAttributes",390],")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$usedProductAttributes",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],"[","]",";",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$usedAttributes",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],"[","]",";",["T_WHITESPACE","\n            ",392],["T_FOREACH","foreach",393],["T_WHITESPACE"," ",393],"(",["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getConfigurableAttributes",393],"(",["T_VARIABLE","$product",393],")",["T_WHITESPACE"," ",393],["T_AS","as",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$attribute",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n                ",393],["T_IF","if",394],["T_WHITESPACE"," ",394],"(","!",["T_STRING","is_null",394],"(",["T_VARIABLE","$attribute",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getProductAttribute",394],"(",")",")",")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n                    ",394],["T_VARIABLE","$id",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$attribute",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getProductAttribute",395],"(",")",["T_OBJECT_OPERATOR","->",395],["T_STRING","getId",395],"(",")",";",["T_WHITESPACE","\n                    ",395],["T_VARIABLE","$usedProductAttributes",396],"[",["T_VARIABLE","$id",396],"]",["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$attribute",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getProductAttribute",396],"(",")",";",["T_WHITESPACE","\n                    ",396],["T_VARIABLE","$usedAttributes",397],"[",["T_VARIABLE","$id",397],"]",["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$attribute",397],";",["T_WHITESPACE","\n                ",397],"}",["T_WHITESPACE","\n            ",398],"}",["T_WHITESPACE","\n            ",399],["T_VARIABLE","$product",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","setData",400],"(",["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_usedAttributes",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$usedAttributes",400],")",";",["T_WHITESPACE","\n            ",400],["T_VARIABLE","$product",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","setData",401],"(",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","usedProductAttributes",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$usedProductAttributes",401],")",";",["T_WHITESPACE","\n        ",401],"}",["T_WHITESPACE","\n        ",402],["T_RETURN","return",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$product",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getData",403],"(",["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","usedProductAttributes",403],")",";",["T_WHITESPACE","\n    ",403],"}",["T_WHITESPACE","\n\n    ",404],["T_DOC_COMMENT","\/**\n     * Retrieve configurable attributes data\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\\Attribute[]\n     *\/",406],["T_WHITESPACE","\n    ",411],["T_PUBLIC","public",412],["T_WHITESPACE"," ",412],["T_FUNCTION","function",412],["T_WHITESPACE"," ",412],["T_STRING","getConfigurableAttributes",412],"(",["T_VARIABLE","$product",412],")",["T_WHITESPACE","\n    ",412],"{",["T_WHITESPACE","\n        ",413],["T_NS_SEPARATOR","\\",414],["T_STRING","Magento",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Framework",414],["T_NS_SEPARATOR","\\",414],["T_STRING","Profiler",414],["T_DOUBLE_COLON","::",414],["T_STRING","start",414],"(",["T_WHITESPACE","\n            ",414],["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE:'",415],["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_METHOD_C","__METHOD__",415],",",["T_WHITESPACE","\n            ",415],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE'",416],",",["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'method'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_METHOD_C","__METHOD__",416],"]",["T_WHITESPACE","\n        ",416],")",";",["T_WHITESPACE","\n        ",417],["T_IF","if",418],["T_WHITESPACE"," ",418],"(","!",["T_VARIABLE","$product",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","hasData",418],"(",["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_configurableAttributes",418],")",")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n            ",418],["T_VARIABLE","$configurableAttributes",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","getConfigurableAttributeCollection",419],"(",["T_VARIABLE","$product",419],")",";",["T_WHITESPACE","\n            ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","extensionAttributesJoinProcessor",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","process",420],"(",["T_VARIABLE","$configurableAttributes",420],")",";",["T_WHITESPACE","\n            ",420],["T_VARIABLE","$configurableAttributes",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","orderByPosition",421],"(",")",["T_OBJECT_OPERATOR","->",421],["T_STRING","load",421],"(",")",";",["T_WHITESPACE","\n            ",421],["T_VARIABLE","$product",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","setData",422],"(",["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_configurableAttributes",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$configurableAttributes",422],")",";",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE","\n        ",423],["T_NS_SEPARATOR","\\",424],["T_STRING","Magento",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Framework",424],["T_NS_SEPARATOR","\\",424],["T_STRING","Profiler",424],["T_DOUBLE_COLON","::",424],["T_STRING","stop",424],"(",["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE:'",424],["T_WHITESPACE"," ",424],".",["T_WHITESPACE"," ",424],["T_METHOD_C","__METHOD__",424],")",";",["T_WHITESPACE","\n        ",424],["T_RETURN","return",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$product",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getData",425],"(",["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","_configurableAttributes",425],")",";",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n\n    ",426],["T_DOC_COMMENT","\/**\n     * Reset the cached configurable attributes of a product\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     *\/",428],["T_WHITESPACE","\n    ",433],["T_PUBLIC","public",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","resetConfigurableAttributes",434],"(",["T_VARIABLE","$product",434],")",["T_WHITESPACE","\n    ",434],"{",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$product",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","unsetData",436],"(",["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_configurableAttributes",436],")",";",["T_WHITESPACE","\n        ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],";",["T_WHITESPACE","\n    ",437],"}",["T_WHITESPACE","\n\n    ",438],["T_DOC_COMMENT","\/**\n     * Retrieve Configurable Attributes as array\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",440],["T_WHITESPACE","\n    ",445],["T_PUBLIC","public",446],["T_WHITESPACE"," ",446],["T_FUNCTION","function",446],["T_WHITESPACE"," ",446],["T_STRING","getConfigurableAttributesAsArray",446],"(",["T_VARIABLE","$product",446],")",["T_WHITESPACE","\n    ",446],"{",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$res",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],"[","]",";",["T_WHITESPACE","\n        ",448],["T_FOREACH","foreach",449],["T_WHITESPACE"," ",449],"(",["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","getConfigurableAttributes",449],"(",["T_VARIABLE","$product",449],")",["T_WHITESPACE"," ",449],["T_AS","as",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$attribute",449],")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$eavAttribute",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$attribute",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getProductAttribute",450],"(",")",";",["T_WHITESPACE","\n            ",450],["T_VARIABLE","$storeId",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_LNUMBER","0",451],";",["T_WHITESPACE","\n            ",451],["T_IF","if",452],["T_WHITESPACE"," ",452],"(",["T_VARIABLE","$product",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getStoreId",452],"(",")",["T_WHITESPACE"," ",452],["T_IS_NOT_IDENTICAL","!==",452],["T_WHITESPACE"," ",452],["T_STRING","null",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n                ",452],["T_VARIABLE","$storeId",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$product",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getStoreId",453],"(",")",";",["T_WHITESPACE","\n            ",453],"}",["T_WHITESPACE","\n            ",454],["T_VARIABLE","$eavAttribute",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","setStoreId",455],"(",["T_VARIABLE","$storeId",455],")",";",["T_WHITESPACE","\n            ",455],["T_COMMENT","\/* @var $attribute \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\\Attribute *\/",456],["T_WHITESPACE","\n            ",456],["T_VARIABLE","$res",457],"[",["T_VARIABLE","$eavAttribute",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getId",457],"(",")","]",["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],"[",["T_WHITESPACE","\n                ",457],["T_CONSTANT_ENCAPSED_STRING","'id'",458],["T_WHITESPACE"," ",458],["T_DOUBLE_ARROW","=>",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$attribute",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getId",458],"(",")",",",["T_WHITESPACE","\n                ",458],["T_CONSTANT_ENCAPSED_STRING","'label'",459],["T_WHITESPACE"," ",459],["T_DOUBLE_ARROW","=>",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$attribute",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getLabel",459],"(",")",",",["T_WHITESPACE","\n                ",459],["T_CONSTANT_ENCAPSED_STRING","'use_default'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$attribute",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getUseDefault",460],"(",")",",",["T_WHITESPACE","\n                ",460],["T_CONSTANT_ENCAPSED_STRING","'position'",461],["T_WHITESPACE"," ",461],["T_DOUBLE_ARROW","=>",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$attribute",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getPosition",461],"(",")",",",["T_WHITESPACE","\n                ",461],["T_CONSTANT_ENCAPSED_STRING","'values'",462],["T_WHITESPACE"," ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$attribute",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getOptions",462],"(",")",["T_WHITESPACE"," ",462],"?",["T_WHITESPACE"," ",462],["T_VARIABLE","$attribute",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getOptions",462],"(",")",["T_WHITESPACE"," ",462],":",["T_WHITESPACE"," ",462],"[","]",",",["T_WHITESPACE","\n                ",462],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",463],["T_WHITESPACE"," ",463],["T_DOUBLE_ARROW","=>",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$eavAttribute",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getId",463],"(",")",",",["T_WHITESPACE","\n                ",463],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",464],["T_WHITESPACE"," ",464],["T_DOUBLE_ARROW","=>",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$eavAttribute",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getAttributeCode",464],"(",")",",",["T_WHITESPACE","\n                ",464],["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",465],["T_WHITESPACE"," ",465],["T_DOUBLE_ARROW","=>",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$eavAttribute",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","getFrontend",465],"(",")",["T_OBJECT_OPERATOR","->",465],["T_STRING","getLabel",465],"(",")",",",["T_WHITESPACE","\n                ",465],["T_CONSTANT_ENCAPSED_STRING","'store_label'",466],["T_WHITESPACE"," ",466],["T_DOUBLE_ARROW","=>",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$eavAttribute",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getStoreLabel",466],"(",")",",",["T_WHITESPACE","\n                ",466],["T_CONSTANT_ENCAPSED_STRING","'options'",467],["T_WHITESPACE"," ",467],["T_DOUBLE_ARROW","=>",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$eavAttribute",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getSource",467],"(",")",["T_OBJECT_OPERATOR","->",467],["T_STRING","getAllOptions",467],"(",["T_STRING","false",467],")",",",["T_WHITESPACE","\n            ",467],"]",";",["T_WHITESPACE","\n        ",468],"}",["T_WHITESPACE","\n        ",469],["T_RETURN","return",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$res",470],";",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n\n    ",471],["T_DOC_COMMENT","\/**\n     * Retrieve configurable attribute collection\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\\Attribute\\Collection\n     *\/",473],["T_WHITESPACE","\n    ",478],["T_PUBLIC","public",479],["T_WHITESPACE"," ",479],["T_FUNCTION","function",479],["T_WHITESPACE"," ",479],["T_STRING","getConfigurableAttributeCollection",479],"(",["T_NS_SEPARATOR","\\",479],["T_STRING","Magento",479],["T_NS_SEPARATOR","\\",479],["T_STRING","Catalog",479],["T_NS_SEPARATOR","\\",479],["T_STRING","Model",479],["T_NS_SEPARATOR","\\",479],["T_STRING","Product",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$product",479],")",["T_WHITESPACE","\n    ",479],"{",["T_WHITESPACE","\n        ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_attributeCollectionFactory",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","create",481],"(",")",["T_OBJECT_OPERATOR","->",481],["T_STRING","setProductFilter",481],"(",["T_VARIABLE","$product",481],")",";",["T_WHITESPACE","\n    ",481],"}",["T_WHITESPACE","\n\n    ",482],["T_DOC_COMMENT","\/**\n     * Retrieve subproducts identifiers\n     *\n     * @deprecated\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",484],["T_WHITESPACE","\n    ",490],["T_PUBLIC","public",491],["T_WHITESPACE"," ",491],["T_FUNCTION","function",491],["T_WHITESPACE"," ",491],["T_STRING","getUsedProductIds",491],"(",["T_VARIABLE","$product",491],")",["T_WHITESPACE","\n    ",491],"{",["T_WHITESPACE","\n        ",492],["T_IF","if",493],["T_WHITESPACE"," ",493],"(","!",["T_VARIABLE","$product",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","hasData",493],"(",["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_usedProductIds",493],")",")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n            ",493],["T_VARIABLE","$usedProductIds",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],"[","]",";",["T_WHITESPACE","\n            ",494],["T_FOREACH","foreach",495],["T_WHITESPACE"," ",495],"(",["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","getUsedProducts",495],"(",["T_VARIABLE","$product",495],")",["T_WHITESPACE"," ",495],["T_AS","as",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$product",495],")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n                ",495],["T_VARIABLE","$usedProductIds",496],"[","]",["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_VARIABLE","$product",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getId",496],"(",")",";",["T_WHITESPACE","\n            ",496],"}",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$product",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","setData",498],"(",["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","_usedProductIds",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$usedProductIds",498],")",";",["T_WHITESPACE","\n        ",498],"}",["T_WHITESPACE","\n        ",499],["T_RETURN","return",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$product",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getData",500],"(",["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","_usedProductIds",500],")",";",["T_WHITESPACE","\n    ",500],"}",["T_WHITESPACE","\n\n    ",501],["T_DOC_COMMENT","\/**\n     * Retrieve array of \"subproducts\"\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @param  array $requiredAttributeIds\n     * @return array\n     *\/",503],["T_WHITESPACE","\n    ",509],["T_PUBLIC","public",510],["T_WHITESPACE"," ",510],["T_FUNCTION","function",510],["T_WHITESPACE"," ",510],["T_STRING","getUsedProducts",510],"(",["T_VARIABLE","$product",510],",",["T_WHITESPACE"," ",510],["T_VARIABLE","$requiredAttributeIds",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_STRING","null",510],")",["T_WHITESPACE","\n    ",510],"{",["T_WHITESPACE","\n        ",511],["T_NS_SEPARATOR","\\",512],["T_STRING","Magento",512],["T_NS_SEPARATOR","\\",512],["T_STRING","Framework",512],["T_NS_SEPARATOR","\\",512],["T_STRING","Profiler",512],["T_DOUBLE_COLON","::",512],["T_STRING","start",512],"(",["T_WHITESPACE","\n            ",512],["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE:'",513],["T_WHITESPACE"," ",513],".",["T_WHITESPACE"," ",513],["T_METHOD_C","__METHOD__",513],",",["T_WHITESPACE","\n            ",513],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",514],["T_WHITESPACE"," ",514],["T_DOUBLE_ARROW","=>",514],["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE'",514],",",["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'method'",514],["T_WHITESPACE"," ",514],["T_DOUBLE_ARROW","=>",514],["T_WHITESPACE"," ",514],["T_METHOD_C","__METHOD__",514],"]",["T_WHITESPACE","\n        ",514],")",";",["T_WHITESPACE","\n        ",515],["T_IF","if",516],["T_WHITESPACE"," ",516],"(","!",["T_VARIABLE","$product",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","hasData",516],"(",["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_usedProducts",516],")",")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n            ",516],["T_VARIABLE","$metadata",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","getMetadataPool",517],"(",")",["T_OBJECT_OPERATOR","->",517],["T_STRING","getMetadata",517],"(",["T_STRING","ProductInterface",517],["T_DOUBLE_COLON","::",517],["T_CLASS","class",517],")",";",["T_WHITESPACE","\n            ",517],["T_VARIABLE","$productId",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$product",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getData",518],"(",["T_VARIABLE","$metadata",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getLinkField",518],"(",")",")",";",["T_WHITESPACE","\n\n            ",518],["T_VARIABLE","$key",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_STRING","md5",520],"(",["T_WHITESPACE","\n                ",520],["T_STRING","implode",521],"(",["T_WHITESPACE","\n                    ",521],["T_CONSTANT_ENCAPSED_STRING","'_'",522],",",["T_WHITESPACE","\n                    ",522],"[",["T_WHITESPACE","\n                        ",523],["T_METHOD_C","__METHOD__",524],",",["T_WHITESPACE","\n                        ",524],["T_VARIABLE","$productId",525],",",["T_WHITESPACE","\n                        ",525],["T_VARIABLE","$product",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getStoreId",526],"(",")",",",["T_WHITESPACE","\n                        ",526],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getCustomerSession",527],"(",")",["T_OBJECT_OPERATOR","->",527],["T_STRING","getCustomerGroupId",527],"(",")",",",["T_WHITESPACE","\n                        ",527],["T_STRING","json_encode",528],"(",["T_VARIABLE","$requiredAttributeIds",528],")",["T_WHITESPACE","\n                    ",528],"]",["T_WHITESPACE","\n                ",529],")",["T_WHITESPACE","\n            ",530],")",";",["T_WHITESPACE","\n            ",531],["T_VARIABLE","$collection",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","getUsedProductCollection",532],"(",["T_VARIABLE","$product",532],")",";",["T_WHITESPACE","\n            ",532],["T_VARIABLE","$data",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","serializer",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","unserialize",533],"(",["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","getCache",533],"(",")",["T_OBJECT_OPERATOR","->",533],["T_STRING","load",533],"(",["T_VARIABLE","$key",533],")",")",";",["T_WHITESPACE","\n            ",533],["T_IF","if",534],["T_WHITESPACE"," ",534],"(","!",["T_EMPTY","empty",534],"(",["T_VARIABLE","$data",534],")",")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n                ",534],["T_VARIABLE","$usedProducts",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],"[","]",";",["T_WHITESPACE","\n                ",535],["T_FOREACH","foreach",536],["T_WHITESPACE"," ",536],"(",["T_VARIABLE","$data",536],["T_WHITESPACE"," ",536],["T_AS","as",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$item",536],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n                    ",536],["T_VARIABLE","$productItem",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$collection",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getNewEmptyItem",537],"(",")",["T_OBJECT_OPERATOR","->",537],["T_STRING","setData",537],"(",["T_VARIABLE","$item",537],")",";",["T_WHITESPACE","\n                    ",537],["T_VARIABLE","$usedProducts",538],"[","]",["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$productItem",538],";",["T_WHITESPACE","\n                ",538],"}",["T_WHITESPACE","\n            ",539],"}",["T_WHITESPACE"," ",540],["T_ELSE","else",540],["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n                ",540],["T_VARIABLE","$collection",541],["T_WHITESPACE","\n                    ",541],["T_OBJECT_OPERATOR","->",542],["T_STRING","setFlag",542],"(",["T_CONSTANT_ENCAPSED_STRING","'has_stock_status_filter'",542],",",["T_WHITESPACE"," ",542],["T_STRING","true",542],")",["T_WHITESPACE","\n                    ",542],["T_OBJECT_OPERATOR","->",543],["T_STRING","addAttributeToSelect",543],"(",["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getCatalogConfig",543],"(",")",["T_OBJECT_OPERATOR","->",543],["T_STRING","getProductAttributes",543],"(",")",")",["T_WHITESPACE","\n                    ",543],["T_OBJECT_OPERATOR","->",544],["T_STRING","addFilterByRequiredOptions",544],"(",")",["T_WHITESPACE","\n                    ",544],["T_OBJECT_OPERATOR","->",545],["T_STRING","setStoreId",545],"(",["T_VARIABLE","$product",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","getStoreId",545],"(",")",")",";",["T_WHITESPACE","\n\n                ",545],["T_VARIABLE","$requiredAttributes",547],["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'price'",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'weight'",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'image'",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'status'",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'media_gallery'",547],"]",";",["T_WHITESPACE","\n                ",547],["T_FOREACH","foreach",548],["T_WHITESPACE"," ",548],"(",["T_VARIABLE","$requiredAttributes",548],["T_WHITESPACE"," ",548],["T_AS","as",548],["T_WHITESPACE"," ",548],["T_VARIABLE","$attributeCode",548],")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n                    ",548],["T_VARIABLE","$collection",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","addAttributeToSelect",549],"(",["T_VARIABLE","$attributeCode",549],")",";",["T_WHITESPACE","\n                ",549],"}",["T_WHITESPACE","\n                ",550],["T_FOREACH","foreach",551],["T_WHITESPACE"," ",551],"(",["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getUsedProductAttributes",551],"(",["T_VARIABLE","$product",551],")",["T_WHITESPACE"," ",551],["T_AS","as",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$usedProductAttribute",551],")",["T_WHITESPACE"," ",551],"{",["T_WHITESPACE","\n                    ",551],["T_VARIABLE","$collection",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","addAttributeToSelect",552],"(",["T_VARIABLE","$usedProductAttribute",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","getAttributeCode",552],"(",")",")",";",["T_WHITESPACE","\n                ",552],"}",["T_WHITESPACE","\n                ",553],["T_VARIABLE","$collection",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","addMediaGalleryData",554],"(",")",";",["T_WHITESPACE","\n                ",554],["T_VARIABLE","$collection",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","addTierPriceData",555],"(",")",";",["T_WHITESPACE","\n                ",555],["T_VARIABLE","$usedProducts",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$collection",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getItems",556],"(",")",";",["T_WHITESPACE","\n\n                ",556],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","getCache",558],"(",")",["T_OBJECT_OPERATOR","->",558],["T_STRING","save",558],"(",["T_WHITESPACE","\n                    ",558],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","serializer",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","serialize",559],"(",["T_STRING","array_map",559],"(",["T_WHITESPACE","\n                        ",559],["T_FUNCTION","function",560],["T_WHITESPACE"," ",560],"(",["T_VARIABLE","$item",560],")",["T_WHITESPACE"," ",560],"{",["T_WHITESPACE","\n                            ",560],["T_RETURN","return",561],["T_WHITESPACE"," ",561],["T_VARIABLE","$item",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","getData",561],"(",")",";",["T_WHITESPACE","\n                        ",561],"}",",",["T_WHITESPACE","\n                        ",562],["T_VARIABLE","$usedProducts",563],["T_WHITESPACE","\n                    ",563],")",")",",",["T_WHITESPACE","\n                    ",564],["T_VARIABLE","$key",565],",",["T_WHITESPACE","\n                    ",565],["T_STRING","array_merge",566],"(",["T_WHITESPACE","\n                        ",566],["T_VARIABLE","$product",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getIdentities",567],"(",")",",",["T_WHITESPACE","\n                        ",567],"[",["T_WHITESPACE","\n                            ",568],["T_NS_SEPARATOR","\\",569],["T_STRING","Magento",569],["T_NS_SEPARATOR","\\",569],["T_STRING","Catalog",569],["T_NS_SEPARATOR","\\",569],["T_STRING","Model",569],["T_NS_SEPARATOR","\\",569],["T_STRING","Category",569],["T_DOUBLE_COLON","::",569],["T_STRING","CACHE_TAG",569],",",["T_WHITESPACE","\n                            ",569],["T_NS_SEPARATOR","\\",570],["T_STRING","Magento",570],["T_NS_SEPARATOR","\\",570],["T_STRING","Catalog",570],["T_NS_SEPARATOR","\\",570],["T_STRING","Model",570],["T_NS_SEPARATOR","\\",570],["T_STRING","Product",570],["T_DOUBLE_COLON","::",570],["T_STRING","CACHE_TAG",570],",",["T_WHITESPACE","\n                            ",570],["T_CONSTANT_ENCAPSED_STRING","'price'",571],",",["T_WHITESPACE","\n                            ",571],["T_STRING","self",572],["T_DOUBLE_COLON","::",572],["T_STRING","TYPE_CODE",572],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'_'",572],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_VARIABLE","$productId",572],["T_WHITESPACE","\n                        ",572],"]",["T_WHITESPACE","\n                    ",573],")",["T_WHITESPACE","\n                ",574],")",";",["T_WHITESPACE","\n            ",575],"}",["T_WHITESPACE","\n            ",576],["T_VARIABLE","$product",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","setData",577],"(",["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_usedProducts",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$usedProducts",577],")",";",["T_WHITESPACE","\n        ",577],"}",["T_WHITESPACE","\n        ",578],["T_NS_SEPARATOR","\\",579],["T_STRING","Magento",579],["T_NS_SEPARATOR","\\",579],["T_STRING","Framework",579],["T_NS_SEPARATOR","\\",579],["T_STRING","Profiler",579],["T_DOUBLE_COLON","::",579],["T_STRING","stop",579],"(",["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE:'",579],["T_WHITESPACE"," ",579],".",["T_WHITESPACE"," ",579],["T_METHOD_C","__METHOD__",579],")",";",["T_WHITESPACE","\n        ",579],["T_VARIABLE","$usedProducts",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE","  ",580],["T_VARIABLE","$product",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getData",580],"(",["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","_usedProducts",580],")",";",["T_WHITESPACE","\n        ",580],["T_RETURN","return",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$usedProducts",581],";",["T_WHITESPACE","\n    ",581],"}",["T_WHITESPACE","\n\n    ",582],["T_DOC_COMMENT","\/**\n     * Retrieve GalleryReadHandler\n     *\n     * @return GalleryReadHandler\n     * @deprecated\n     *\/",584],["T_WHITESPACE","\n    ",589],["T_PROTECTED","protected",590],["T_WHITESPACE"," ",590],["T_FUNCTION","function",590],["T_WHITESPACE"," ",590],["T_STRING","getGalleryReadHandler",590],"(",")",["T_WHITESPACE","\n    ",590],"{",["T_WHITESPACE","\n        ",591],["T_IF","if",592],["T_WHITESPACE"," ",592],"(",["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","productGalleryReadHandler",592],["T_WHITESPACE"," ",592],["T_IS_IDENTICAL","===",592],["T_WHITESPACE"," ",592],["T_STRING","null",592],")",["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n            ",592],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","productGalleryReadHandler",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_STRING","ObjectManager",593],["T_DOUBLE_COLON","::",593],["T_STRING","getInstance",593],"(",")",["T_WHITESPACE","\n                ",593],["T_OBJECT_OPERATOR","->",594],["T_STRING","get",594],"(",["T_STRING","GalleryReadHandler",594],["T_DOUBLE_COLON","::",594],["T_CLASS","class",594],")",";",["T_WHITESPACE","\n        ",594],"}",["T_WHITESPACE","\n        ",595],["T_RETURN","return",596],["T_WHITESPACE"," ",596],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","productGalleryReadHandler",596],";",["T_WHITESPACE","\n    ",596],"}",["T_WHITESPACE","\n\n    ",597],["T_DOC_COMMENT","\/**\n     * Retrieve related products collection\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\\Product\\Collection\n     *\/",599],["T_WHITESPACE","\n    ",604],["T_PUBLIC","public",605],["T_WHITESPACE"," ",605],["T_FUNCTION","function",605],["T_WHITESPACE"," ",605],["T_STRING","getUsedProductCollection",605],"(",["T_VARIABLE","$product",605],")",["T_WHITESPACE","\n    ",605],"{",["T_WHITESPACE","\n        ",606],["T_VARIABLE","$collection",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","_productCollectionFactory",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","create",607],"(",")",["T_OBJECT_OPERATOR","->",607],["T_STRING","setFlag",607],"(",["T_WHITESPACE","\n            ",607],["T_CONSTANT_ENCAPSED_STRING","'product_children'",608],",",["T_WHITESPACE","\n            ",608],["T_STRING","true",609],["T_WHITESPACE","\n        ",609],")",["T_OBJECT_OPERATOR","->",610],["T_STRING","setProductFilter",610],"(",["T_WHITESPACE","\n            ",610],["T_VARIABLE","$product",611],["T_WHITESPACE","\n        ",611],")",";",["T_WHITESPACE","\n        ",612],["T_IF","if",613],["T_WHITESPACE"," ",613],"(","!",["T_STRING","is_null",613],"(",["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","getStoreFilter",613],"(",["T_VARIABLE","$product",613],")",")",")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n            ",613],["T_VARIABLE","$collection",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","addStoreFilter",614],"(",["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getStoreFilter",614],"(",["T_VARIABLE","$product",614],")",")",";",["T_WHITESPACE","\n        ",614],"}",["T_WHITESPACE","\n\n        ",615],["T_RETURN","return",617],["T_WHITESPACE"," ",617],["T_VARIABLE","$collection",617],";",["T_WHITESPACE","\n    ",617],"}",["T_WHITESPACE","\n\n    ",618],["T_DOC_COMMENT","\/**\n     * Before save process\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     *\/",620],["T_WHITESPACE","\n    ",625],["T_PUBLIC","public",626],["T_WHITESPACE"," ",626],["T_FUNCTION","function",626],["T_WHITESPACE"," ",626],["T_STRING","beforeSave",626],"(",["T_VARIABLE","$product",626],")",["T_WHITESPACE","\n    ",626],"{",["T_WHITESPACE","\n        ",627],["T_VARIABLE","$metadata",628],["T_WHITESPACE"," ",628],"=",["T_WHITESPACE"," ",628],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","getMetadataPool",628],"(",")",["T_OBJECT_OPERATOR","->",628],["T_STRING","getMetadata",628],"(",["T_STRING","ProductInterface",628],["T_DOUBLE_COLON","::",628],["T_CLASS","class",628],")",";",["T_WHITESPACE","\n        ",628],["T_VARIABLE","$productId",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_VARIABLE","$product",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","getData",629],"(",["T_VARIABLE","$metadata",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","getLinkField",629],"(",")",")",";",["T_WHITESPACE","\n\n        ",629],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","getCache",631],"(",")",["T_OBJECT_OPERATOR","->",631],["T_STRING","clean",631],"(",["T_NS_SEPARATOR","\\",631],["T_STRING","Zend_Cache",631],["T_DOUBLE_COLON","::",631],["T_STRING","CLEANING_MODE_MATCHING_TAG",631],",",["T_WHITESPACE"," ",631],"[",["T_STRING","self",631],["T_DOUBLE_COLON","::",631],["T_STRING","TYPE_CODE",631],["T_WHITESPACE"," ",631],".",["T_WHITESPACE"," ",631],["T_CONSTANT_ENCAPSED_STRING","'_'",631],["T_WHITESPACE"," ",631],".",["T_WHITESPACE"," ",631],["T_VARIABLE","$productId",631],"]",")",";",["T_WHITESPACE","\n        ",631],["T_STRING","parent",632],["T_DOUBLE_COLON","::",632],["T_STRING","beforeSave",632],"(",["T_VARIABLE","$product",632],")",";",["T_WHITESPACE","\n\n        ",632],["T_VARIABLE","$product",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","canAffectOptions",634],"(",["T_STRING","false",634],")",";",["T_WHITESPACE","\n\n        ",634],["T_IF","if",636],["T_WHITESPACE"," ",636],"(",["T_VARIABLE","$product",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getCanSaveConfigurableAttributes",636],"(",")",")",["T_WHITESPACE"," ",636],"{",["T_WHITESPACE","\n            ",636],["T_VARIABLE","$product",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","canAffectOptions",637],"(",["T_STRING","true",637],")",";",["T_WHITESPACE","\n            ",637],["T_VARIABLE","$data",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_VARIABLE","$product",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","getConfigurableAttributesData",638],"(",")",";",["T_WHITESPACE","\n            ",638],["T_IF","if",639],["T_WHITESPACE"," ",639],"(","!",["T_EMPTY","empty",639],"(",["T_VARIABLE","$data",639],")",")",["T_WHITESPACE"," ",639],"{",["T_WHITESPACE","\n                ",639],["T_FOREACH","foreach",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$data",640],["T_WHITESPACE"," ",640],["T_AS","as",640],["T_WHITESPACE"," ",640],["T_VARIABLE","$attribute",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n                    ",640],["T_IF","if",641],["T_WHITESPACE"," ",641],"(","!",["T_EMPTY","empty",641],"(",["T_VARIABLE","$attribute",641],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",641],"]",")",")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n                        ",641],["T_VARIABLE","$product",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","setTypeHasOptions",642],"(",["T_STRING","true",642],")",";",["T_WHITESPACE","\n                        ",642],["T_VARIABLE","$product",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","setTypeHasRequiredOptions",643],"(",["T_STRING","true",643],")",";",["T_WHITESPACE","\n                        ",643],["T_BREAK","break",644],";",["T_WHITESPACE","\n                    ",644],"}",["T_WHITESPACE","\n                ",645],"}",["T_WHITESPACE","\n            ",646],"}",["T_WHITESPACE","\n        ",647],"}",["T_WHITESPACE","\n        ",648],["T_FOREACH","foreach",649],["T_WHITESPACE"," ",649],"(",["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","getConfigurableAttributes",649],"(",["T_VARIABLE","$product",649],")",["T_WHITESPACE"," ",649],["T_AS","as",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$attribute",649],")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n            ",649],["T_VARIABLE","$product",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","setData",650],"(",["T_VARIABLE","$attribute",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","getProductAttribute",650],"(",")",["T_OBJECT_OPERATOR","->",650],["T_STRING","getAttributeCode",650],"(",")",",",["T_WHITESPACE"," ",650],["T_STRING","null",650],")",";",["T_WHITESPACE","\n        ",650],"}",["T_WHITESPACE","\n\n        ",651],["T_RETURN","return",653],["T_WHITESPACE"," ",653],["T_VARIABLE","$this",653],";",["T_WHITESPACE","\n    ",653],"}",["T_WHITESPACE","\n\n    ",654],["T_DOC_COMMENT","\/**\n     * Save configurable product depended data\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     * @throws \\InvalidArgumentException\n     * @deprecated the \\Magento\\ConfigurableProduct\\Model\\Product\\SaveHandler::execute should be used instead\n     *\/",656],["T_WHITESPACE","\n    ",663],["T_PUBLIC","public",664],["T_WHITESPACE"," ",664],["T_FUNCTION","function",664],["T_WHITESPACE"," ",664],["T_STRING","save",664],"(",["T_VARIABLE","$product",664],")",["T_WHITESPACE","\n    ",664],"{",["T_WHITESPACE","\n        ",665],["T_STRING","parent",666],["T_DOUBLE_COLON","::",666],["T_STRING","save",666],"(",["T_VARIABLE","$product",666],")",";",["T_WHITESPACE","\n        ",666],["T_VARIABLE","$metadata",667],["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","getMetadataPool",667],"(",")",["T_OBJECT_OPERATOR","->",667],["T_STRING","getMetadata",667],"(",["T_STRING","ProductInterface",667],["T_DOUBLE_COLON","::",667],["T_CLASS","class",667],")",";",["T_WHITESPACE","\n        ",667],["T_VARIABLE","$cacheId",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE","  ",668],["T_CLASS_C","__CLASS__",668],["T_WHITESPACE"," ",668],".",["T_WHITESPACE"," ",668],["T_VARIABLE","$product",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","getData",668],"(",["T_VARIABLE","$metadata",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","getLinkField",668],"(",")",")",["T_WHITESPACE"," ",668],".",["T_WHITESPACE"," ",668],["T_CONSTANT_ENCAPSED_STRING","'_'",668],["T_WHITESPACE"," ",668],".",["T_WHITESPACE"," ",668],["T_VARIABLE","$product",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","getStoreId",668],"(",")",";",["T_WHITESPACE","\n        ",668],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","cache",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","remove",669],"(",["T_VARIABLE","$cacheId",669],")",";",["T_WHITESPACE","\n\n        ",669],["T_VARIABLE","$extensionAttributes",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_VARIABLE","$product",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","getExtensionAttributes",671],"(",")",";",["T_WHITESPACE","\n\n        ",671],["T_COMMENT","\/\/ this approach is needed for 3rd-party extensions which are not using extension attributes\n",673],["T_WHITESPACE","        ",674],["T_IF","if",674],["T_WHITESPACE"," ",674],"(",["T_EMPTY","empty",674],"(",["T_VARIABLE","$extensionAttributes",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","getConfigurableProductOptions",674],"(",")",")",")",["T_WHITESPACE"," ",674],"{",["T_WHITESPACE","\n            ",674],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","saveConfigurableOptions",675],"(",["T_VARIABLE","$product",675],")",";",["T_WHITESPACE","\n        ",675],"}",["T_WHITESPACE","\n\n        ",676],["T_IF","if",678],["T_WHITESPACE"," ",678],"(",["T_EMPTY","empty",678],"(",["T_VARIABLE","$extensionAttributes",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","getConfigurableProductLinks",678],"(",")",")",")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n            ",678],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","saveRelatedProducts",679],"(",["T_VARIABLE","$product",679],")",";",["T_WHITESPACE","\n        ",679],"}",["T_WHITESPACE","\n        ",680],["T_RETURN","return",681],["T_WHITESPACE"," ",681],["T_VARIABLE","$this",681],";",["T_WHITESPACE","\n    ",681],"}",["T_WHITESPACE","\n\n    ",682],["T_DOC_COMMENT","\/**\n     * Save configurable product attributes\n     *\n     * @param ProductInterface $product\n     * @return void\n     * @throws \\Exception\n     * @deprecated\n     *\/",684],["T_WHITESPACE","\n    ",691],["T_PRIVATE","private",692],["T_WHITESPACE"," ",692],["T_FUNCTION","function",692],["T_WHITESPACE"," ",692],["T_STRING","saveConfigurableOptions",692],"(",["T_STRING","ProductInterface",692],["T_WHITESPACE"," ",692],["T_VARIABLE","$product",692],")",["T_WHITESPACE","\n    ",692],"{",["T_WHITESPACE","\n        ",693],["T_VARIABLE","$data",694],["T_WHITESPACE"," ",694],"=",["T_WHITESPACE"," ",694],["T_VARIABLE","$product",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","getConfigurableAttributesData",694],"(",")",";",["T_WHITESPACE","\n        ",694],["T_IF","if",695],["T_WHITESPACE"," ",695],"(","!",["T_VARIABLE","$data",695],")",["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n            ",695],["T_RETURN","return",696],";",["T_WHITESPACE","\n        ",696],"}",["T_WHITESPACE","\n\n        ",697],["T_VARIABLE","$metadata",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","getMetadataPool",699],"(",")",["T_OBJECT_OPERATOR","->",699],["T_STRING","getMetadata",699],"(",["T_STRING","ProductInterface",699],["T_DOUBLE_COLON","::",699],["T_CLASS","class",699],")",";",["T_WHITESPACE","\n\n        ",699],["T_FOREACH","foreach",701],["T_WHITESPACE"," ",701],"(",["T_VARIABLE","$data",701],["T_WHITESPACE"," ",701],["T_AS","as",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$attributeData",701],")",["T_WHITESPACE"," ",701],"{",["T_WHITESPACE","\n            ",701],["T_DOC_COMMENT","\/** @var $configurableAttribute \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\\Attribute *\/",702],["T_WHITESPACE","\n            ",702],["T_VARIABLE","$configurableAttribute",703],["T_WHITESPACE"," ",703],"=",["T_WHITESPACE"," ",703],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","configurableAttributeFactory",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","create",703],"(",")",";",["T_WHITESPACE","\n            ",703],["T_IF","if",704],["T_WHITESPACE"," ",704],"(","!",["T_VARIABLE","$product",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","getIsDuplicate",704],"(",")",")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n                ",704],["T_IF","if",705],["T_WHITESPACE"," ",705],"(","!",["T_EMPTY","empty",705],"(",["T_VARIABLE","$attributeData",705],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",705],"]",")",")",["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n                    ",705],["T_VARIABLE","$configurableAttribute",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","load",706],"(",["T_VARIABLE","$attributeData",706],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",706],"]",")",";",["T_WHITESPACE","\n                    ",706],["T_VARIABLE","$attributeData",707],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",707],"]",["T_WHITESPACE"," ",707],"=",["T_WHITESPACE"," ",707],["T_VARIABLE","$configurableAttribute",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","getAttributeId",707],"(",")",";",["T_WHITESPACE","\n                ",707],"}",["T_WHITESPACE"," ",708],["T_ELSEIF","elseif",708],["T_WHITESPACE"," ",708],"(","!",["T_EMPTY","empty",708],"(",["T_VARIABLE","$attributeData",708],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",708],"]",")",")",["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n                    ",708],["T_VARIABLE","$attribute",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","_eavConfig",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","getAttribute",709],"(",["T_WHITESPACE","\n                        ",709],["T_NS_SEPARATOR","\\",710],["T_STRING","Magento",710],["T_NS_SEPARATOR","\\",710],["T_STRING","Catalog",710],["T_NS_SEPARATOR","\\",710],["T_STRING","Model",710],["T_NS_SEPARATOR","\\",710],["T_STRING","Product",710],["T_DOUBLE_COLON","::",710],["T_STRING","ENTITY",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$attributeData",710],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",710],"]",["T_WHITESPACE","\n                    ",710],")",";",["T_WHITESPACE","\n                    ",711],["T_VARIABLE","$attributeData",712],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",712],"]",["T_WHITESPACE"," ",712],"=",["T_WHITESPACE"," ",712],["T_VARIABLE","$attribute",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","getId",712],"(",")",";",["T_WHITESPACE","\n                    ",712],["T_IF","if",713],["T_WHITESPACE"," ",713],"(","!",["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","canUseAttribute",713],"(",["T_VARIABLE","$attribute",713],")",")",["T_WHITESPACE"," ",713],"{",["T_WHITESPACE","\n                        ",713],["T_THROW","throw",714],["T_WHITESPACE"," ",714],["T_NEW","new",714],["T_WHITESPACE"," ",714],["T_NS_SEPARATOR","\\",714],["T_STRING","InvalidArgumentException",714],"(",["T_WHITESPACE","\n                            ",714],["T_CONSTANT_ENCAPSED_STRING","'Provided attribute can not be used with configurable product'",715],["T_WHITESPACE","\n                        ",715],")",";",["T_WHITESPACE","\n                    ",716],"}",["T_WHITESPACE","\n                    ",717],["T_VARIABLE","$configurableAttribute",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","loadByProductAndAttribute",718],"(",["T_VARIABLE","$product",718],",",["T_WHITESPACE"," ",718],["T_VARIABLE","$attribute",718],")",";",["T_WHITESPACE","\n                ",718],"}",["T_WHITESPACE","\n            ",719],"}",["T_WHITESPACE","\n            ",720],["T_UNSET","unset",721],"(",["T_VARIABLE","$attributeData",721],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",721],"]",")",";",["T_WHITESPACE","\n            ",721],["T_VARIABLE","$configurableAttribute",722],["T_WHITESPACE","\n                ",722],["T_OBJECT_OPERATOR","->",723],["T_STRING","addData",723],"(",["T_VARIABLE","$attributeData",723],")",["T_WHITESPACE","\n                ",723],["T_OBJECT_OPERATOR","->",724],["T_STRING","setStoreId",724],"(",["T_VARIABLE","$product",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","getStoreId",724],"(",")",")",["T_WHITESPACE","\n                ",724],["T_OBJECT_OPERATOR","->",725],["T_STRING","setProductId",725],"(",["T_VARIABLE","$product",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","getData",725],"(",["T_VARIABLE","$metadata",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","getLinkField",725],"(",")",")",")",["T_WHITESPACE","\n                ",725],["T_OBJECT_OPERATOR","->",726],["T_STRING","save",726],"(",")",";",["T_WHITESPACE","\n        ",726],"}",["T_WHITESPACE","\n        ",727],["T_DOC_COMMENT","\/** @var $configurableAttributesCollection \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\\Attribute\\Collection  *\/",728],["T_WHITESPACE","\n        ",728],["T_VARIABLE","$configurableAttributesCollection",729],["T_WHITESPACE"," ",729],"=",["T_WHITESPACE"," ",729],["T_VARIABLE","$this",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","_attributeCollectionFactory",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","create",729],"(",")",";",["T_WHITESPACE","\n        ",729],["T_VARIABLE","$configurableAttributesCollection",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","setProductFilter",730],"(",["T_VARIABLE","$product",730],")",";",["T_WHITESPACE","\n        ",730],["T_VARIABLE","$configurableAttributesCollection",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","addFieldToFilter",731],"(",["T_WHITESPACE","\n            ",731],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",732],",",["T_WHITESPACE","\n            ",732],"[",["T_CONSTANT_ENCAPSED_STRING","'nin'",733],["T_WHITESPACE"," ",733],["T_DOUBLE_ARROW","=>",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","getUsedProductAttributeIds",733],"(",["T_VARIABLE","$product",733],")","]",["T_WHITESPACE","\n        ",733],")",";",["T_WHITESPACE","\n        ",734],["T_VARIABLE","$configurableAttributesCollection",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","walk",735],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",735],")",";",["T_WHITESPACE","\n    ",735],"}",["T_WHITESPACE","\n\n    ",736],["T_DOC_COMMENT","\/**\n     * Save related products\n     *\n     * @param ProductInterface $product\n     * @return void\n     * @deprecated\n     *\/",738],["T_WHITESPACE","\n    ",744],["T_PRIVATE","private",745],["T_WHITESPACE"," ",745],["T_FUNCTION","function",745],["T_WHITESPACE"," ",745],["T_STRING","saveRelatedProducts",745],"(",["T_STRING","ProductInterface",745],["T_WHITESPACE"," ",745],["T_VARIABLE","$product",745],")",["T_WHITESPACE","\n    ",745],"{",["T_WHITESPACE","\n        ",746],["T_VARIABLE","$productIds",747],["T_WHITESPACE"," ",747],"=",["T_WHITESPACE"," ",747],["T_VARIABLE","$product",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","getAssociatedProductIds",747],"(",")",";",["T_WHITESPACE","\n        ",747],["T_IF","if",748],["T_WHITESPACE"," ",748],"(",["T_STRING","is_array",748],"(",["T_VARIABLE","$productIds",748],")",")",["T_WHITESPACE"," ",748],"{",["T_WHITESPACE","\n            ",748],["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","typeConfigurableFactory",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","create",749],"(",")",["T_OBJECT_OPERATOR","->",749],["T_STRING","saveProducts",749],"(",["T_VARIABLE","$product",749],",",["T_WHITESPACE"," ",749],["T_VARIABLE","$productIds",749],")",";",["T_WHITESPACE","\n        ",749],"}",["T_WHITESPACE","\n        ",750],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","resetConfigurableAttributes",751],"(",["T_VARIABLE","$product",751],")",";",["T_WHITESPACE","\n\n        ",751],["T_RETURN","return",753],["T_WHITESPACE"," ",753],["T_VARIABLE","$this",753],";",["T_WHITESPACE","\n    ",753],"}",["T_WHITESPACE","\n\n    ",754],["T_DOC_COMMENT","\/**\n     * Check is product available for sale\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return bool\n     *\/",756],["T_WHITESPACE","\n    ",761],["T_PUBLIC","public",762],["T_WHITESPACE"," ",762],["T_FUNCTION","function",762],["T_WHITESPACE"," ",762],["T_STRING","isSalable",762],"(",["T_VARIABLE","$product",762],")",["T_WHITESPACE","\n    ",762],"{",["T_WHITESPACE","\n        ",763],["T_VARIABLE","$salable",764],["T_WHITESPACE"," ",764],"=",["T_WHITESPACE"," ",764],["T_STRING","parent",764],["T_DOUBLE_COLON","::",764],["T_STRING","isSalable",764],"(",["T_VARIABLE","$product",764],")",";",["T_WHITESPACE","\n\n        ",764],["T_IF","if",766],["T_WHITESPACE"," ",766],"(",["T_VARIABLE","$salable",766],["T_WHITESPACE"," ",766],["T_IS_NOT_IDENTICAL","!==",766],["T_WHITESPACE"," ",766],["T_STRING","false",766],")",["T_WHITESPACE"," ",766],"{",["T_WHITESPACE","\n            ",766],["T_VARIABLE","$salable",767],["T_WHITESPACE"," ",767],"=",["T_WHITESPACE"," ",767],["T_STRING","false",767],";",["T_WHITESPACE","\n            ",767],["T_IF","if",768],["T_WHITESPACE"," ",768],"(","!",["T_STRING","is_null",768],"(",["T_VARIABLE","$product",768],")",")",["T_WHITESPACE"," ",768],"{",["T_WHITESPACE","\n                ",768],["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","setStoreFilter",769],"(",["T_VARIABLE","$product",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","getStoreId",769],"(",")",",",["T_WHITESPACE"," ",769],["T_VARIABLE","$product",769],")",";",["T_WHITESPACE","\n            ",769],"}",["T_WHITESPACE","\n            ",770],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $child *\/",771],["T_WHITESPACE","\n            ",771],["T_FOREACH","foreach",772],["T_WHITESPACE"," ",772],"(",["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","getUsedProducts",772],"(",["T_VARIABLE","$product",772],")",["T_WHITESPACE"," ",772],["T_AS","as",772],["T_WHITESPACE"," ",772],["T_VARIABLE","$child",772],")",["T_WHITESPACE"," ",772],"{",["T_WHITESPACE","\n                ",772],["T_IF","if",773],["T_WHITESPACE"," ",773],"(",["T_VARIABLE","$child",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","isSalable",773],"(",")",")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n                    ",773],["T_VARIABLE","$salable",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_STRING","true",774],";",["T_WHITESPACE","\n                    ",774],["T_BREAK","break",775],";",["T_WHITESPACE","\n                ",775],"}",["T_WHITESPACE","\n            ",776],"}",["T_WHITESPACE","\n        ",777],"}",["T_WHITESPACE","\n\n        ",778],["T_RETURN","return",780],["T_WHITESPACE"," ",780],["T_VARIABLE","$salable",780],";",["T_WHITESPACE","\n    ",780],"}",["T_WHITESPACE","\n\n    ",781],["T_DOC_COMMENT","\/**\n     * Check whether the product is available for sale\n     * is alias to isSalable for compatibility\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return bool\n     * @SuppressWarnings(PHPMD.BooleanGetMethodName)\n     *\/",783],["T_WHITESPACE","\n    ",790],["T_PUBLIC","public",791],["T_WHITESPACE"," ",791],["T_FUNCTION","function",791],["T_WHITESPACE"," ",791],["T_STRING","getIsSalable",791],"(",["T_VARIABLE","$product",791],")",["T_WHITESPACE","\n    ",791],"{",["T_WHITESPACE","\n        ",792],["T_RETURN","return",793],["T_WHITESPACE"," ",793],["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","isSalable",793],"(",["T_VARIABLE","$product",793],")",";",["T_WHITESPACE","\n    ",793],"}",["T_WHITESPACE","\n\n    ",794],["T_DOC_COMMENT","\/**\n     * Retrieve used product by attribute values\n     *  $attributesInfo = array(\n     *      $attributeId => $attributeValue\n     *  )\n     *\n     * @param  array $attributesInfo\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Catalog\\Model\\Product|null\n     *\/",796],["T_WHITESPACE","\n    ",805],["T_PUBLIC","public",806],["T_WHITESPACE"," ",806],["T_FUNCTION","function",806],["T_WHITESPACE"," ",806],["T_STRING","getProductByAttributes",806],"(",["T_VARIABLE","$attributesInfo",806],",",["T_WHITESPACE"," ",806],["T_VARIABLE","$product",806],")",["T_WHITESPACE","\n    ",806],"{",["T_WHITESPACE","\n        ",807],["T_IF","if",808],["T_WHITESPACE"," ",808],"(",["T_STRING","is_array",808],"(",["T_VARIABLE","$attributesInfo",808],")",["T_WHITESPACE"," ",808],["T_BOOLEAN_AND","&&",808],["T_WHITESPACE"," ",808],"!",["T_EMPTY","empty",808],"(",["T_VARIABLE","$attributesInfo",808],")",")",["T_WHITESPACE"," ",808],"{",["T_WHITESPACE","\n            ",808],["T_VARIABLE","$productCollection",809],["T_WHITESPACE"," ",809],"=",["T_WHITESPACE"," ",809],["T_VARIABLE","$this",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","getUsedProductCollection",809],"(",["T_VARIABLE","$product",809],")",["T_OBJECT_OPERATOR","->",809],["T_STRING","addAttributeToSelect",809],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",809],")",";",["T_WHITESPACE","\n            ",809],["T_FOREACH","foreach",810],["T_WHITESPACE"," ",810],"(",["T_VARIABLE","$attributesInfo",810],["T_WHITESPACE"," ",810],["T_AS","as",810],["T_WHITESPACE"," ",810],["T_VARIABLE","$attributeId",810],["T_WHITESPACE"," ",810],["T_DOUBLE_ARROW","=>",810],["T_WHITESPACE"," ",810],["T_VARIABLE","$attributeValue",810],")",["T_WHITESPACE"," ",810],"{",["T_WHITESPACE","\n                ",810],["T_VARIABLE","$productCollection",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","addAttributeToFilter",811],"(",["T_VARIABLE","$attributeId",811],",",["T_WHITESPACE"," ",811],["T_VARIABLE","$attributeValue",811],")",";",["T_WHITESPACE","\n            ",811],"}",["T_WHITESPACE","\n            ",812],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $productObject *\/",813],["T_WHITESPACE","\n            ",813],["T_VARIABLE","$productObject",814],["T_WHITESPACE"," ",814],"=",["T_WHITESPACE"," ",814],["T_VARIABLE","$productCollection",814],["T_OBJECT_OPERATOR","->",814],["T_STRING","getFirstItem",814],"(",")",";",["T_WHITESPACE","\n            ",814],["T_VARIABLE","$productLinkFieldId",815],["T_WHITESPACE"," ",815],"=",["T_WHITESPACE"," ",815],["T_VARIABLE","$productObject",815],["T_OBJECT_OPERATOR","->",815],["T_STRING","getId",815],"(",")",";",["T_WHITESPACE","\n            ",815],["T_IF","if",816],["T_WHITESPACE"," ",816],"(",["T_VARIABLE","$productLinkFieldId",816],")",["T_WHITESPACE"," ",816],"{",["T_WHITESPACE","\n                ",816],["T_RETURN","return",817],["T_WHITESPACE"," ",817],["T_VARIABLE","$this",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","productRepository",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","getById",817],"(",["T_VARIABLE","$productLinkFieldId",817],")",";",["T_WHITESPACE","\n            ",817],"}",["T_WHITESPACE","\n\n            ",818],["T_FOREACH","foreach",820],["T_WHITESPACE"," ",820],"(",["T_VARIABLE","$productCollection",820],["T_WHITESPACE"," ",820],["T_AS","as",820],["T_WHITESPACE"," ",820],["T_VARIABLE","$productObject",820],")",["T_WHITESPACE"," ",820],"{",["T_WHITESPACE","\n                ",820],["T_VARIABLE","$checkRes",821],["T_WHITESPACE"," ",821],"=",["T_WHITESPACE"," ",821],["T_STRING","true",821],";",["T_WHITESPACE","\n                ",821],["T_FOREACH","foreach",822],["T_WHITESPACE"," ",822],"(",["T_VARIABLE","$attributesInfo",822],["T_WHITESPACE"," ",822],["T_AS","as",822],["T_WHITESPACE"," ",822],["T_VARIABLE","$attributeId",822],["T_WHITESPACE"," ",822],["T_DOUBLE_ARROW","=>",822],["T_WHITESPACE"," ",822],["T_VARIABLE","$attributeValue",822],")",["T_WHITESPACE"," ",822],"{",["T_WHITESPACE","\n                    ",822],["T_VARIABLE","$code",823],["T_WHITESPACE"," ",823],"=",["T_WHITESPACE"," ",823],["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","getAttributeById",823],"(",["T_VARIABLE","$attributeId",823],",",["T_WHITESPACE"," ",823],["T_VARIABLE","$product",823],")",["T_OBJECT_OPERATOR","->",823],["T_STRING","getAttributeCode",823],"(",")",";",["T_WHITESPACE","\n                    ",823],["T_IF","if",824],["T_WHITESPACE"," ",824],"(",["T_VARIABLE","$productObject",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","getData",824],"(",["T_VARIABLE","$code",824],")",["T_WHITESPACE"," ",824],["T_IS_NOT_EQUAL","!=",824],["T_WHITESPACE"," ",824],["T_VARIABLE","$attributeValue",824],")",["T_WHITESPACE"," ",824],"{",["T_WHITESPACE","\n                        ",824],["T_VARIABLE","$checkRes",825],["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],["T_STRING","false",825],";",["T_WHITESPACE","\n                    ",825],"}",["T_WHITESPACE","\n                ",826],"}",["T_WHITESPACE","\n                ",827],["T_IF","if",828],["T_WHITESPACE"," ",828],"(",["T_VARIABLE","$checkRes",828],")",["T_WHITESPACE"," ",828],"{",["T_WHITESPACE","\n                    ",828],["T_RETURN","return",829],["T_WHITESPACE"," ",829],["T_VARIABLE","$productObject",829],";",["T_WHITESPACE","\n                ",829],"}",["T_WHITESPACE","\n            ",830],"}",["T_WHITESPACE","\n        ",831],"}",["T_WHITESPACE","\n        ",832],["T_RETURN","return",833],["T_WHITESPACE"," ",833],["T_STRING","null",833],";",["T_WHITESPACE","\n    ",833],"}",["T_WHITESPACE","\n\n    ",834],["T_DOC_COMMENT","\/**\n     * Retrieve Selected Attributes info\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",836],["T_WHITESPACE","\n    ",841],["T_PUBLIC","public",842],["T_WHITESPACE"," ",842],["T_FUNCTION","function",842],["T_WHITESPACE"," ",842],["T_STRING","getSelectedAttributesInfo",842],"(",["T_VARIABLE","$product",842],")",["T_WHITESPACE","\n    ",842],"{",["T_WHITESPACE","\n        ",843],["T_VARIABLE","$attributes",844],["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],"[","]",";",["T_WHITESPACE","\n        ",844],["T_NS_SEPARATOR","\\",845],["T_STRING","Magento",845],["T_NS_SEPARATOR","\\",845],["T_STRING","Framework",845],["T_NS_SEPARATOR","\\",845],["T_STRING","Profiler",845],["T_DOUBLE_COLON","::",845],["T_STRING","start",845],"(",["T_WHITESPACE","\n            ",845],["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE:'",846],["T_WHITESPACE"," ",846],".",["T_WHITESPACE"," ",846],["T_METHOD_C","__METHOD__",846],",",["T_WHITESPACE","\n            ",846],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",847],["T_WHITESPACE"," ",847],["T_DOUBLE_ARROW","=>",847],["T_WHITESPACE"," ",847],["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE'",847],",",["T_WHITESPACE"," ",847],["T_CONSTANT_ENCAPSED_STRING","'method'",847],["T_WHITESPACE"," ",847],["T_DOUBLE_ARROW","=>",847],["T_WHITESPACE"," ",847],["T_METHOD_C","__METHOD__",847],"]",["T_WHITESPACE","\n        ",847],")",";",["T_WHITESPACE","\n        ",848],["T_IF","if",849],["T_WHITESPACE"," ",849],"(",["T_VARIABLE","$attributesOption",849],["T_WHITESPACE"," ",849],"=",["T_WHITESPACE"," ",849],["T_VARIABLE","$product",849],["T_OBJECT_OPERATOR","->",849],["T_STRING","getCustomOption",849],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",849],")",")",["T_WHITESPACE"," ",849],"{",["T_WHITESPACE","\n            ",849],["T_VARIABLE","$data",850],["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],["T_VARIABLE","$this",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","serializer",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","unserialize",850],"(",["T_VARIABLE","$attributesOption",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","getValue",850],"(",")",")",";",["T_WHITESPACE","\n            ",850],["T_VARIABLE","$this",851],["T_OBJECT_OPERATOR","->",851],["T_STRING","getUsedProductAttributeIds",851],"(",["T_VARIABLE","$product",851],")",";",["T_WHITESPACE","\n\n            ",851],["T_VARIABLE","$usedAttributes",853],["T_WHITESPACE"," ",853],"=",["T_WHITESPACE"," ",853],["T_VARIABLE","$product",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","getData",853],"(",["T_VARIABLE","$this",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","_usedAttributes",853],")",";",["T_WHITESPACE","\n\n            ",853],["T_FOREACH","foreach",855],["T_WHITESPACE"," ",855],"(",["T_VARIABLE","$data",855],["T_WHITESPACE"," ",855],["T_AS","as",855],["T_WHITESPACE"," ",855],["T_VARIABLE","$attributeId",855],["T_WHITESPACE"," ",855],["T_DOUBLE_ARROW","=>",855],["T_WHITESPACE"," ",855],["T_VARIABLE","$attributeValue",855],")",["T_WHITESPACE"," ",855],"{",["T_WHITESPACE","\n                ",855],["T_IF","if",856],["T_WHITESPACE"," ",856],"(",["T_ISSET","isset",856],"(",["T_VARIABLE","$usedAttributes",856],"[",["T_VARIABLE","$attributeId",856],"]",")",")",["T_WHITESPACE"," ",856],"{",["T_WHITESPACE","\n                    ",856],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute $attribute *\/",857],["T_WHITESPACE","\n                    ",857],["T_VARIABLE","$attribute",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_VARIABLE","$usedAttributes",858],"[",["T_VARIABLE","$attributeId",858],"]",["T_OBJECT_OPERATOR","->",858],["T_STRING","getProductAttribute",858],"(",")",";",["T_WHITESPACE","\n                    ",858],["T_VARIABLE","$label",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_VARIABLE","$attribute",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","getStoreLabel",859],"(",")",";",["T_WHITESPACE","\n                    ",859],["T_VARIABLE","$value",860],["T_WHITESPACE"," ",860],"=",["T_WHITESPACE"," ",860],["T_VARIABLE","$attribute",860],";",["T_WHITESPACE","\n                    ",860],["T_IF","if",861],["T_WHITESPACE"," ",861],"(",["T_VARIABLE","$value",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","getSourceModel",861],"(",")",")",["T_WHITESPACE"," ",861],"{",["T_WHITESPACE","\n                        ",861],["T_VARIABLE","$value",862],["T_WHITESPACE"," ",862],"=",["T_WHITESPACE"," ",862],["T_VARIABLE","$value",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","getSource",862],"(",")",["T_OBJECT_OPERATOR","->",862],["T_STRING","getOptionText",862],"(",["T_VARIABLE","$attributeValue",862],")",";",["T_WHITESPACE","\n                    ",862],"}",["T_WHITESPACE"," ",863],["T_ELSE","else",863],["T_WHITESPACE"," ",863],"{",["T_WHITESPACE","\n                        ",863],["T_VARIABLE","$value",864],["T_WHITESPACE"," ",864],"=",["T_WHITESPACE"," ",864],["T_CONSTANT_ENCAPSED_STRING","''",864],";",["T_WHITESPACE","\n                        ",864],["T_VARIABLE","$attributeValue",865],["T_WHITESPACE"," ",865],"=",["T_WHITESPACE"," ",865],["T_CONSTANT_ENCAPSED_STRING","''",865],";",["T_WHITESPACE","\n                    ",865],"}",["T_WHITESPACE","\n\n                    ",866],["T_VARIABLE","$attributes",868],"[","]",["T_WHITESPACE"," ",868],"=",["T_WHITESPACE"," ",868],"[",["T_WHITESPACE","\n                        ",868],["T_CONSTANT_ENCAPSED_STRING","'label'",869],["T_WHITESPACE"," ",869],["T_DOUBLE_ARROW","=>",869],["T_WHITESPACE"," ",869],["T_VARIABLE","$label",869],",",["T_WHITESPACE","\n                        ",869],["T_CONSTANT_ENCAPSED_STRING","'value'",870],["T_WHITESPACE"," ",870],["T_DOUBLE_ARROW","=>",870],["T_WHITESPACE"," ",870],["T_VARIABLE","$value",870],",",["T_WHITESPACE","\n                        ",870],["T_CONSTANT_ENCAPSED_STRING","'option_id'",871],["T_WHITESPACE"," ",871],["T_DOUBLE_ARROW","=>",871],["T_WHITESPACE"," ",871],["T_VARIABLE","$attributeId",871],",",["T_WHITESPACE","\n                        ",871],["T_CONSTANT_ENCAPSED_STRING","'option_value'",872],["T_WHITESPACE"," ",872],["T_DOUBLE_ARROW","=>",872],["T_WHITESPACE"," ",872],["T_VARIABLE","$attributeValue",872],["T_WHITESPACE","\n                    ",872],"]",";",["T_WHITESPACE","\n                ",873],"}",["T_WHITESPACE","\n            ",874],"}",["T_WHITESPACE","\n        ",875],"}",["T_WHITESPACE","\n        ",876],["T_NS_SEPARATOR","\\",877],["T_STRING","Magento",877],["T_NS_SEPARATOR","\\",877],["T_STRING","Framework",877],["T_NS_SEPARATOR","\\",877],["T_STRING","Profiler",877],["T_DOUBLE_COLON","::",877],["T_STRING","stop",877],"(",["T_CONSTANT_ENCAPSED_STRING","'CONFIGURABLE:'",877],["T_WHITESPACE"," ",877],".",["T_WHITESPACE"," ",877],["T_METHOD_C","__METHOD__",877],")",";",["T_WHITESPACE","\n        ",877],["T_RETURN","return",878],["T_WHITESPACE"," ",878],["T_VARIABLE","$attributes",878],";",["T_WHITESPACE","\n    ",878],"}",["T_WHITESPACE","\n\n    ",879],["T_DOC_COMMENT","\/**\n     * Prepare product and its configuration to be added to some products list.\n     * Perform standard preparation process and then add Configurable specific options.\n     *\n     * @param \\Magento\\Framework\\DataObject $buyRequest\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param string $processMode\n     * @return \\Magento\\Framework\\Phrase|array|string\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",881],["T_WHITESPACE","\n    ",891],["T_PROTECTED","protected",892],["T_WHITESPACE"," ",892],["T_FUNCTION","function",892],["T_WHITESPACE"," ",892],["T_STRING","_prepareProduct",892],"(",["T_NS_SEPARATOR","\\",892],["T_STRING","Magento",892],["T_NS_SEPARATOR","\\",892],["T_STRING","Framework",892],["T_NS_SEPARATOR","\\",892],["T_STRING","DataObject",892],["T_WHITESPACE"," ",892],["T_VARIABLE","$buyRequest",892],",",["T_WHITESPACE"," ",892],["T_VARIABLE","$product",892],",",["T_WHITESPACE"," ",892],["T_VARIABLE","$processMode",892],")",["T_WHITESPACE","\n    ",892],"{",["T_WHITESPACE","\n        ",893],["T_VARIABLE","$attributes",894],["T_WHITESPACE"," ",894],"=",["T_WHITESPACE"," ",894],["T_VARIABLE","$buyRequest",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","getSuperAttribute",894],"(",")",";",["T_WHITESPACE","\n        ",894],["T_IF","if",895],["T_WHITESPACE"," ",895],"(",["T_VARIABLE","$attributes",895],["T_WHITESPACE"," ",895],["T_BOOLEAN_OR","||",895],["T_WHITESPACE"," ",895],"!",["T_VARIABLE","$this",895],["T_OBJECT_OPERATOR","->",895],["T_STRING","_isStrictProcessMode",895],"(",["T_VARIABLE","$processMode",895],")",")",["T_WHITESPACE"," ",895],"{",["T_WHITESPACE","\n            ",895],["T_IF","if",896],["T_WHITESPACE"," ",896],"(","!",["T_VARIABLE","$this",896],["T_OBJECT_OPERATOR","->",896],["T_STRING","_isStrictProcessMode",896],"(",["T_VARIABLE","$processMode",896],")",")",["T_WHITESPACE"," ",896],"{",["T_WHITESPACE","\n                ",896],["T_IF","if",897],["T_WHITESPACE"," ",897],"(",["T_STRING","is_array",897],"(",["T_VARIABLE","$attributes",897],")",")",["T_WHITESPACE"," ",897],"{",["T_WHITESPACE","\n                    ",897],["T_FOREACH","foreach",898],["T_WHITESPACE"," ",898],"(",["T_VARIABLE","$attributes",898],["T_WHITESPACE"," ",898],["T_AS","as",898],["T_WHITESPACE"," ",898],["T_VARIABLE","$key",898],["T_WHITESPACE"," ",898],["T_DOUBLE_ARROW","=>",898],["T_WHITESPACE"," ",898],["T_VARIABLE","$val",898],")",["T_WHITESPACE"," ",898],"{",["T_WHITESPACE","\n                        ",898],["T_IF","if",899],["T_WHITESPACE"," ",899],"(",["T_EMPTY","empty",899],"(",["T_VARIABLE","$val",899],")",")",["T_WHITESPACE"," ",899],"{",["T_WHITESPACE","\n                            ",899],["T_UNSET","unset",900],"(",["T_VARIABLE","$attributes",900],"[",["T_VARIABLE","$key",900],"]",")",";",["T_WHITESPACE","\n                        ",900],"}",["T_WHITESPACE","\n                    ",901],"}",["T_WHITESPACE","\n                ",902],"}",["T_WHITESPACE"," ",903],["T_ELSE","else",903],["T_WHITESPACE"," ",903],"{",["T_WHITESPACE","\n                    ",903],["T_VARIABLE","$attributes",904],["T_WHITESPACE"," ",904],"=",["T_WHITESPACE"," ",904],"[","]",";",["T_WHITESPACE","\n                ",904],"}",["T_WHITESPACE","\n            ",905],"}",["T_WHITESPACE","\n\n            ",906],["T_VARIABLE","$result",908],["T_WHITESPACE"," ",908],"=",["T_WHITESPACE"," ",908],["T_STRING","parent",908],["T_DOUBLE_COLON","::",908],["T_STRING","_prepareProduct",908],"(",["T_VARIABLE","$buyRequest",908],",",["T_WHITESPACE"," ",908],["T_VARIABLE","$product",908],",",["T_WHITESPACE"," ",908],["T_VARIABLE","$processMode",908],")",";",["T_WHITESPACE","\n            ",908],["T_IF","if",909],["T_WHITESPACE"," ",909],"(",["T_STRING","is_array",909],"(",["T_VARIABLE","$result",909],")",")",["T_WHITESPACE"," ",909],"{",["T_WHITESPACE","\n                ",909],["T_COMMENT","\/\/TODO: MAGETWO-23739 get id from _POST and retrieve product from repository immediately.\n",910],["T_WHITESPACE","\n                ",911],["T_DOC_COMMENT","\/**\n                 * $attributes = array($attributeId=>$attributeValue)\n                 *\/",912],["T_WHITESPACE","\n                ",914],["T_VARIABLE","$subProduct",915],["T_WHITESPACE"," ",915],"=",["T_WHITESPACE"," ",915],["T_STRING","true",915],";",["T_WHITESPACE","\n                ",915],["T_IF","if",916],["T_WHITESPACE"," ",916],"(",["T_VARIABLE","$this",916],["T_OBJECT_OPERATOR","->",916],["T_STRING","_isStrictProcessMode",916],"(",["T_VARIABLE","$processMode",916],")",")",["T_WHITESPACE"," ",916],"{",["T_WHITESPACE","\n                    ",916],["T_FOREACH","foreach",917],["T_WHITESPACE"," ",917],"(",["T_VARIABLE","$this",917],["T_OBJECT_OPERATOR","->",917],["T_STRING","getConfigurableAttributes",917],"(",["T_VARIABLE","$product",917],")",["T_WHITESPACE"," ",917],["T_AS","as",917],["T_WHITESPACE"," ",917],["T_VARIABLE","$attributeItem",917],")",["T_WHITESPACE"," ",917],"{",["T_WHITESPACE","\n                        ",917],["T_COMMENT","\/* @var $attributeItem \\Magento\\Framework\\DataObject *\/",918],["T_WHITESPACE","\n                        ",918],["T_VARIABLE","$attrId",919],["T_WHITESPACE"," ",919],"=",["T_WHITESPACE"," ",919],["T_VARIABLE","$attributeItem",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","getData",919],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",919],")",";",["T_WHITESPACE","\n                        ",919],["T_IF","if",920],["T_WHITESPACE"," ",920],"(","!",["T_ISSET","isset",920],"(",["T_VARIABLE","$attributes",920],"[",["T_VARIABLE","$attrId",920],"]",")",["T_WHITESPACE"," ",920],["T_BOOLEAN_OR","||",920],["T_WHITESPACE"," ",920],["T_EMPTY","empty",920],"(",["T_VARIABLE","$attributes",920],"[",["T_VARIABLE","$attrId",920],"]",")",")",["T_WHITESPACE"," ",920],"{",["T_WHITESPACE","\n                            ",920],["T_VARIABLE","$subProduct",921],["T_WHITESPACE"," ",921],"=",["T_WHITESPACE"," ",921],["T_STRING","null",921],";",["T_WHITESPACE","\n                            ",921],["T_BREAK","break",922],";",["T_WHITESPACE","\n                        ",922],"}",["T_WHITESPACE","\n                    ",923],"}",["T_WHITESPACE","\n                ",924],"}",["T_WHITESPACE","\n                ",925],["T_IF","if",926],["T_WHITESPACE"," ",926],"(",["T_VARIABLE","$subProduct",926],")",["T_WHITESPACE"," ",926],"{",["T_WHITESPACE","\n                    ",926],["T_VARIABLE","$subProduct",927],["T_WHITESPACE"," ",927],"=",["T_WHITESPACE"," ",927],["T_VARIABLE","$this",927],["T_OBJECT_OPERATOR","->",927],["T_STRING","getProductByAttributes",927],"(",["T_VARIABLE","$attributes",927],",",["T_WHITESPACE"," ",927],["T_VARIABLE","$product",927],")",";",["T_WHITESPACE","\n                ",927],"}",["T_WHITESPACE","\n\n                ",928],["T_IF","if",930],["T_WHITESPACE"," ",930],"(",["T_VARIABLE","$subProduct",930],")",["T_WHITESPACE"," ",930],"{",["T_WHITESPACE","\n                    ",930],["T_VARIABLE","$subProductLinkFieldId",931],["T_WHITESPACE"," ",931],"=",["T_WHITESPACE"," ",931],["T_VARIABLE","$subProduct",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","getId",931],"(",")",";",["T_WHITESPACE","\n                    ",931],["T_VARIABLE","$product",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","addCustomOption",932],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",932],",",["T_WHITESPACE"," ",932],["T_VARIABLE","$this",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","serializer",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","serialize",932],"(",["T_VARIABLE","$attributes",932],")",")",";",["T_WHITESPACE","\n                    ",932],["T_VARIABLE","$product",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","addCustomOption",933],"(",["T_CONSTANT_ENCAPSED_STRING","'product_qty_'",933],["T_WHITESPACE"," ",933],".",["T_WHITESPACE"," ",933],["T_VARIABLE","$subProductLinkFieldId",933],",",["T_WHITESPACE"," ",933],["T_LNUMBER","1",933],",",["T_WHITESPACE"," ",933],["T_VARIABLE","$subProduct",933],")",";",["T_WHITESPACE","\n                    ",933],["T_VARIABLE","$product",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","addCustomOption",934],"(",["T_CONSTANT_ENCAPSED_STRING","'simple_product'",934],",",["T_WHITESPACE"," ",934],["T_VARIABLE","$subProductLinkFieldId",934],",",["T_WHITESPACE"," ",934],["T_VARIABLE","$subProduct",934],")",";",["T_WHITESPACE","\n\n                    ",934],["T_VARIABLE","$_result",936],["T_WHITESPACE"," ",936],"=",["T_WHITESPACE"," ",936],["T_VARIABLE","$subProduct",936],["T_OBJECT_OPERATOR","->",936],["T_STRING","getTypeInstance",936],"(",")",["T_OBJECT_OPERATOR","->",936],["T_STRING","processConfiguration",936],"(",["T_WHITESPACE","\n                        ",936],["T_VARIABLE","$buyRequest",937],",",["T_WHITESPACE","\n                        ",937],["T_VARIABLE","$subProduct",938],",",["T_WHITESPACE","\n                        ",938],["T_VARIABLE","$processMode",939],["T_WHITESPACE","\n                    ",939],")",";",["T_WHITESPACE","\n                    ",940],["T_IF","if",941],["T_WHITESPACE"," ",941],"(",["T_STRING","is_string",941],"(",["T_VARIABLE","$_result",941],")",["T_WHITESPACE"," ",941],["T_BOOLEAN_AND","&&",941],["T_WHITESPACE"," ",941],"!",["T_STRING","is_array",941],"(",["T_VARIABLE","$_result",941],")",")",["T_WHITESPACE"," ",941],"{",["T_WHITESPACE","\n                        ",941],["T_RETURN","return",942],["T_WHITESPACE"," ",942],["T_VARIABLE","$_result",942],";",["T_WHITESPACE","\n                    ",942],"}",["T_WHITESPACE","\n\n                    ",943],["T_IF","if",945],["T_WHITESPACE"," ",945],"(","!",["T_ISSET","isset",945],"(",["T_VARIABLE","$_result",945],"[",["T_LNUMBER","0",945],"]",")",")",["T_WHITESPACE"," ",945],"{",["T_WHITESPACE","\n                        ",945],["T_RETURN","return",946],["T_WHITESPACE"," ",946],["T_STRING","__",946],"(",["T_CONSTANT_ENCAPSED_STRING","'You can\\'t add the item to shopping cart.'",946],")",["T_OBJECT_OPERATOR","->",946],["T_STRING","render",946],"(",")",";",["T_WHITESPACE","\n                    ",946],"}",["T_WHITESPACE","\n\n                    ",947],["T_DOC_COMMENT","\/**\n                     * Adding parent product custom options to child product\n                     * to be sure that it will be unique as its parent\n                     *\/",949],["T_WHITESPACE","\n                    ",952],["T_IF","if",953],["T_WHITESPACE"," ",953],"(",["T_VARIABLE","$optionIds",953],["T_WHITESPACE"," ",953],"=",["T_WHITESPACE"," ",953],["T_VARIABLE","$product",953],["T_OBJECT_OPERATOR","->",953],["T_STRING","getCustomOption",953],"(",["T_CONSTANT_ENCAPSED_STRING","'option_ids'",953],")",")",["T_WHITESPACE"," ",953],"{",["T_WHITESPACE","\n                        ",953],["T_VARIABLE","$optionIds",954],["T_WHITESPACE"," ",954],"=",["T_WHITESPACE"," ",954],["T_STRING","explode",954],"(",["T_CONSTANT_ENCAPSED_STRING","','",954],",",["T_WHITESPACE"," ",954],["T_VARIABLE","$optionIds",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","getValue",954],"(",")",")",";",["T_WHITESPACE","\n                        ",954],["T_FOREACH","foreach",955],["T_WHITESPACE"," ",955],"(",["T_VARIABLE","$optionIds",955],["T_WHITESPACE"," ",955],["T_AS","as",955],["T_WHITESPACE"," ",955],["T_VARIABLE","$optionId",955],")",["T_WHITESPACE"," ",955],"{",["T_WHITESPACE","\n                            ",955],["T_IF","if",956],["T_WHITESPACE"," ",956],"(",["T_VARIABLE","$option",956],["T_WHITESPACE"," ",956],"=",["T_WHITESPACE"," ",956],["T_VARIABLE","$product",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","getCustomOption",956],"(",["T_CONSTANT_ENCAPSED_STRING","'option_'",956],["T_WHITESPACE"," ",956],".",["T_WHITESPACE"," ",956],["T_VARIABLE","$optionId",956],")",")",["T_WHITESPACE"," ",956],"{",["T_WHITESPACE","\n                                ",956],["T_VARIABLE","$_result",957],"[",["T_LNUMBER","0",957],"]",["T_OBJECT_OPERATOR","->",957],["T_STRING","addCustomOption",957],"(",["T_CONSTANT_ENCAPSED_STRING","'option_'",957],["T_WHITESPACE"," ",957],".",["T_WHITESPACE"," ",957],["T_VARIABLE","$optionId",957],",",["T_WHITESPACE"," ",957],["T_VARIABLE","$option",957],["T_OBJECT_OPERATOR","->",957],["T_STRING","getValue",957],"(",")",")",";",["T_WHITESPACE","\n                            ",957],"}",["T_WHITESPACE","\n                        ",958],"}",["T_WHITESPACE","\n                    ",959],"}",["T_WHITESPACE","\n\n                    ",960],["T_VARIABLE","$productLinkFieldId",962],["T_WHITESPACE"," ",962],"=",["T_WHITESPACE"," ",962],["T_VARIABLE","$product",962],["T_OBJECT_OPERATOR","->",962],["T_STRING","getId",962],"(",")",";",["T_WHITESPACE","\n                    ",962],["T_VARIABLE","$_result",963],"[",["T_LNUMBER","0",963],"]",["T_OBJECT_OPERATOR","->",963],["T_STRING","setParentProductId",963],"(",["T_VARIABLE","$productLinkFieldId",963],")",["T_WHITESPACE","\n                        ",963],["T_OBJECT_OPERATOR","->",964],["T_STRING","addCustomOption",964],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_product_id'",964],",",["T_WHITESPACE"," ",964],["T_VARIABLE","$productLinkFieldId",964],")",";",["T_WHITESPACE","\n                    ",964],["T_IF","if",965],["T_WHITESPACE"," ",965],"(",["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","_isStrictProcessMode",965],"(",["T_VARIABLE","$processMode",965],")",")",["T_WHITESPACE"," ",965],"{",["T_WHITESPACE","\n                        ",965],["T_VARIABLE","$_result",966],"[",["T_LNUMBER","0",966],"]",["T_OBJECT_OPERATOR","->",966],["T_STRING","setCartQty",966],"(",["T_LNUMBER","1",966],")",";",["T_WHITESPACE","\n                    ",966],"}",["T_WHITESPACE","\n                    ",967],["T_VARIABLE","$result",968],"[","]",["T_WHITESPACE"," ",968],"=",["T_WHITESPACE"," ",968],["T_VARIABLE","$_result",968],"[",["T_LNUMBER","0",968],"]",";",["T_WHITESPACE","\n                    ",968],["T_RETURN","return",969],["T_WHITESPACE"," ",969],["T_VARIABLE","$result",969],";",["T_WHITESPACE","\n                ",969],"}",["T_WHITESPACE"," ",970],["T_ELSE","else",970],["T_WHITESPACE"," ",970],"{",["T_WHITESPACE","\n                    ",970],["T_IF","if",971],["T_WHITESPACE"," ",971],"(","!",["T_VARIABLE","$this",971],["T_OBJECT_OPERATOR","->",971],["T_STRING","_isStrictProcessMode",971],"(",["T_VARIABLE","$processMode",971],")",")",["T_WHITESPACE"," ",971],"{",["T_WHITESPACE","\n                        ",971],["T_RETURN","return",972],["T_WHITESPACE"," ",972],["T_VARIABLE","$result",972],";",["T_WHITESPACE","\n                    ",972],"}",["T_WHITESPACE","\n                ",973],"}",["T_WHITESPACE","\n            ",974],"}",["T_WHITESPACE","\n        ",975],"}",["T_WHITESPACE","\n\n        ",976],["T_RETURN","return",978],["T_WHITESPACE"," ",978],["T_VARIABLE","$this",978],["T_OBJECT_OPERATOR","->",978],["T_STRING","getSpecifyOptionMessage",978],"(",")",["T_OBJECT_OPERATOR","->",978],["T_STRING","render",978],"(",")",";",["T_WHITESPACE","\n    ",978],"}",["T_WHITESPACE","\n\n    ",979],["T_DOC_COMMENT","\/**\n     * Check if product can be bought\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",981],["T_WHITESPACE","\n    ",987],["T_PUBLIC","public",988],["T_WHITESPACE"," ",988],["T_FUNCTION","function",988],["T_WHITESPACE"," ",988],["T_STRING","checkProductBuyState",988],"(",["T_VARIABLE","$product",988],")",["T_WHITESPACE","\n    ",988],"{",["T_WHITESPACE","\n        ",989],["T_STRING","parent",990],["T_DOUBLE_COLON","::",990],["T_STRING","checkProductBuyState",990],"(",["T_VARIABLE","$product",990],")",";",["T_WHITESPACE","\n        ",990],["T_VARIABLE","$option",991],["T_WHITESPACE"," ",991],"=",["T_WHITESPACE"," ",991],["T_VARIABLE","$product",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","getCustomOption",991],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",991],")",";",["T_WHITESPACE","\n        ",991],["T_IF","if",992],["T_WHITESPACE"," ",992],"(",["T_VARIABLE","$option",992],["T_WHITESPACE"," ",992],["T_INSTANCEOF","instanceof",992],["T_WHITESPACE"," ",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Magento",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Quote",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Model",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Quote",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Item",992],["T_NS_SEPARATOR","\\",992],["T_STRING","Option",992],")",["T_WHITESPACE"," ",992],"{",["T_WHITESPACE","\n            ",992],["T_VARIABLE","$buyRequest",993],["T_WHITESPACE"," ",993],"=",["T_WHITESPACE"," ",993],["T_NEW","new",993],["T_WHITESPACE"," ",993],["T_NS_SEPARATOR","\\",993],["T_STRING","Magento",993],["T_NS_SEPARATOR","\\",993],["T_STRING","Framework",993],["T_NS_SEPARATOR","\\",993],["T_STRING","DataObject",993],"(",["T_VARIABLE","$this",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","serializer",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","unserialize",993],"(",["T_VARIABLE","$option",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","getValue",993],"(",")",")",")",";",["T_WHITESPACE","\n            ",993],["T_VARIABLE","$attributes",994],["T_WHITESPACE"," ",994],"=",["T_WHITESPACE"," ",994],["T_VARIABLE","$buyRequest",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","getSuperAttribute",994],"(",")",";",["T_WHITESPACE","\n            ",994],["T_IF","if",995],["T_WHITESPACE"," ",995],"(",["T_STRING","is_array",995],"(",["T_VARIABLE","$attributes",995],")",")",["T_WHITESPACE"," ",995],"{",["T_WHITESPACE","\n                ",995],["T_FOREACH","foreach",996],["T_WHITESPACE"," ",996],"(",["T_VARIABLE","$attributes",996],["T_WHITESPACE"," ",996],["T_AS","as",996],["T_WHITESPACE"," ",996],["T_VARIABLE","$key",996],["T_WHITESPACE"," ",996],["T_DOUBLE_ARROW","=>",996],["T_WHITESPACE"," ",996],["T_VARIABLE","$val",996],")",["T_WHITESPACE"," ",996],"{",["T_WHITESPACE","\n                    ",996],["T_IF","if",997],["T_WHITESPACE"," ",997],"(",["T_EMPTY","empty",997],"(",["T_VARIABLE","$val",997],")",")",["T_WHITESPACE"," ",997],"{",["T_WHITESPACE","\n                        ",997],["T_UNSET","unset",998],"(",["T_VARIABLE","$attributes",998],"[",["T_VARIABLE","$key",998],"]",")",";",["T_WHITESPACE","\n                    ",998],"}",["T_WHITESPACE","\n                ",999],"}",["T_WHITESPACE","\n            ",1000],"}",["T_WHITESPACE","\n            ",1001],["T_IF","if",1002],["T_WHITESPACE"," ",1002],"(",["T_EMPTY","empty",1002],"(",["T_VARIABLE","$attributes",1002],")",")",["T_WHITESPACE"," ",1002],"{",["T_WHITESPACE","\n                ",1002],["T_THROW","throw",1003],["T_WHITESPACE"," ",1003],["T_NEW","new",1003],["T_WHITESPACE"," ",1003],["T_NS_SEPARATOR","\\",1003],["T_STRING","Magento",1003],["T_NS_SEPARATOR","\\",1003],["T_STRING","Framework",1003],["T_NS_SEPARATOR","\\",1003],["T_STRING","Exception",1003],["T_NS_SEPARATOR","\\",1003],["T_STRING","LocalizedException",1003],"(",["T_VARIABLE","$this",1003],["T_OBJECT_OPERATOR","->",1003],["T_STRING","getSpecifyOptionMessage",1003],"(",")",")",";",["T_WHITESPACE","\n            ",1003],"}",["T_WHITESPACE","\n        ",1004],"}",["T_WHITESPACE","\n        ",1005],["T_RETURN","return",1006],["T_WHITESPACE"," ",1006],["T_VARIABLE","$this",1006],";",["T_WHITESPACE","\n    ",1006],"}",["T_WHITESPACE","\n\n    ",1007],["T_DOC_COMMENT","\/**\n     * Retrieve message for specify option(s)\n     *\n     * @return \\Magento\\Framework\\Phrase\n     *\/",1009],["T_WHITESPACE","\n    ",1013],["T_PUBLIC","public",1014],["T_WHITESPACE"," ",1014],["T_FUNCTION","function",1014],["T_WHITESPACE"," ",1014],["T_STRING","getSpecifyOptionMessage",1014],"(",")",["T_WHITESPACE","\n    ",1014],"{",["T_WHITESPACE","\n        ",1015],["T_RETURN","return",1016],["T_WHITESPACE"," ",1016],["T_STRING","__",1016],"(",["T_CONSTANT_ENCAPSED_STRING","'You need to choose options for your item.'",1016],")",";",["T_WHITESPACE","\n    ",1016],"}",["T_WHITESPACE","\n\n    ",1017],["T_DOC_COMMENT","\/**\n     * Prepare additional options\/information for order item which will be\n     * created from this product\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",1019],["T_WHITESPACE","\n    ",1025],["T_PUBLIC","public",1026],["T_WHITESPACE"," ",1026],["T_FUNCTION","function",1026],["T_WHITESPACE"," ",1026],["T_STRING","getOrderOptions",1026],"(",["T_VARIABLE","$product",1026],")",["T_WHITESPACE","\n    ",1026],"{",["T_WHITESPACE","\n        ",1027],["T_VARIABLE","$options",1028],["T_WHITESPACE"," ",1028],"=",["T_WHITESPACE"," ",1028],["T_STRING","parent",1028],["T_DOUBLE_COLON","::",1028],["T_STRING","getOrderOptions",1028],"(",["T_VARIABLE","$product",1028],")",";",["T_WHITESPACE","\n        ",1028],["T_VARIABLE","$options",1029],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes_info'",1029],"]",["T_WHITESPACE"," ",1029],"=",["T_WHITESPACE"," ",1029],["T_VARIABLE","$this",1029],["T_OBJECT_OPERATOR","->",1029],["T_STRING","getSelectedAttributesInfo",1029],"(",["T_VARIABLE","$product",1029],")",";",["T_WHITESPACE","\n        ",1029],["T_IF","if",1030],["T_WHITESPACE"," ",1030],"(",["T_VARIABLE","$simpleOption",1030],["T_WHITESPACE"," ",1030],"=",["T_WHITESPACE"," ",1030],["T_VARIABLE","$product",1030],["T_OBJECT_OPERATOR","->",1030],["T_STRING","getCustomOption",1030],"(",["T_CONSTANT_ENCAPSED_STRING","'simple_product'",1030],")",")",["T_WHITESPACE"," ",1030],"{",["T_WHITESPACE","\n            ",1030],["T_VARIABLE","$options",1031],"[",["T_CONSTANT_ENCAPSED_STRING","'simple_name'",1031],"]",["T_WHITESPACE"," ",1031],"=",["T_WHITESPACE"," ",1031],["T_VARIABLE","$simpleOption",1031],["T_OBJECT_OPERATOR","->",1031],["T_STRING","getProduct",1031],"(",")",["T_OBJECT_OPERATOR","->",1031],["T_STRING","getName",1031],"(",")",";",["T_WHITESPACE","\n            ",1031],["T_VARIABLE","$options",1032],"[",["T_CONSTANT_ENCAPSED_STRING","'simple_sku'",1032],"]",["T_WHITESPACE"," ",1032],"=",["T_WHITESPACE"," ",1032],["T_VARIABLE","$simpleOption",1032],["T_OBJECT_OPERATOR","->",1032],["T_STRING","getProduct",1032],"(",")",["T_OBJECT_OPERATOR","->",1032],["T_STRING","getSku",1032],"(",")",";",["T_WHITESPACE","\n        ",1032],"}",["T_WHITESPACE","\n\n        ",1033],["T_VARIABLE","$options",1035],"[",["T_CONSTANT_ENCAPSED_STRING","'product_calculations'",1035],"]",["T_WHITESPACE"," ",1035],"=",["T_WHITESPACE"," ",1035],["T_STRING","self",1035],["T_DOUBLE_COLON","::",1035],["T_STRING","CALCULATE_PARENT",1035],";",["T_WHITESPACE","\n        ",1035],["T_VARIABLE","$options",1036],"[",["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",1036],"]",["T_WHITESPACE"," ",1036],"=",["T_WHITESPACE"," ",1036],["T_STRING","self",1036],["T_DOUBLE_COLON","::",1036],["T_STRING","SHIPMENT_TOGETHER",1036],";",["T_WHITESPACE","\n\n        ",1036],["T_RETURN","return",1038],["T_WHITESPACE"," ",1038],["T_VARIABLE","$options",1038],";",["T_WHITESPACE","\n    ",1038],"}",["T_WHITESPACE","\n\n    ",1039],["T_DOC_COMMENT","\/**\n     * Check is virtual product\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return bool\n     *\/",1041],["T_WHITESPACE","\n    ",1046],["T_PUBLIC","public",1047],["T_WHITESPACE"," ",1047],["T_FUNCTION","function",1047],["T_WHITESPACE"," ",1047],["T_STRING","isVirtual",1047],"(",["T_VARIABLE","$product",1047],")",["T_WHITESPACE","\n    ",1047],"{",["T_WHITESPACE","\n        ",1048],["T_IF","if",1049],["T_WHITESPACE"," ",1049],"(",["T_VARIABLE","$productOption",1049],["T_WHITESPACE"," ",1049],"=",["T_WHITESPACE"," ",1049],["T_VARIABLE","$product",1049],["T_OBJECT_OPERATOR","->",1049],["T_STRING","getCustomOption",1049],"(",["T_CONSTANT_ENCAPSED_STRING","'simple_product'",1049],")",")",["T_WHITESPACE"," ",1049],"{",["T_WHITESPACE","\n            ",1049],["T_IF","if",1050],["T_WHITESPACE"," ",1050],"(",["T_VARIABLE","$optionProduct",1050],["T_WHITESPACE"," ",1050],"=",["T_WHITESPACE"," ",1050],["T_VARIABLE","$productOption",1050],["T_OBJECT_OPERATOR","->",1050],["T_STRING","getProduct",1050],"(",")",")",["T_WHITESPACE"," ",1050],"{",["T_WHITESPACE","\n                ",1050],["T_COMMENT","\/* @var $optionProduct \\Magento\\Catalog\\Model\\Product *\/",1051],["T_WHITESPACE","\n                ",1051],["T_RETURN","return",1052],["T_WHITESPACE"," ",1052],["T_VARIABLE","$optionProduct",1052],["T_OBJECT_OPERATOR","->",1052],["T_STRING","isVirtual",1052],"(",")",";",["T_WHITESPACE","\n            ",1052],"}",["T_WHITESPACE","\n        ",1053],"}",["T_WHITESPACE","\n        ",1054],["T_RETURN","return",1055],["T_WHITESPACE"," ",1055],["T_STRING","parent",1055],["T_DOUBLE_COLON","::",1055],["T_STRING","isVirtual",1055],"(",["T_VARIABLE","$product",1055],")",";",["T_WHITESPACE","\n    ",1055],"}",["T_WHITESPACE","\n\n    ",1056],["T_DOC_COMMENT","\/**\n     * Return true if product has options\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return bool\n     *\/",1058],["T_WHITESPACE","\n    ",1063],["T_PUBLIC","public",1064],["T_WHITESPACE"," ",1064],["T_FUNCTION","function",1064],["T_WHITESPACE"," ",1064],["T_STRING","hasOptions",1064],"(",["T_VARIABLE","$product",1064],")",["T_WHITESPACE","\n    ",1064],"{",["T_WHITESPACE","\n        ",1065],["T_IF","if",1066],["T_WHITESPACE"," ",1066],"(",["T_VARIABLE","$product",1066],["T_OBJECT_OPERATOR","->",1066],["T_STRING","getOptions",1066],"(",")",")",["T_WHITESPACE"," ",1066],"{",["T_WHITESPACE","\n            ",1066],["T_RETURN","return",1067],["T_WHITESPACE"," ",1067],["T_STRING","true",1067],";",["T_WHITESPACE","\n        ",1067],"}",["T_WHITESPACE","\n\n        ",1068],["T_VARIABLE","$attributes",1070],["T_WHITESPACE"," ",1070],"=",["T_WHITESPACE"," ",1070],["T_VARIABLE","$this",1070],["T_OBJECT_OPERATOR","->",1070],["T_STRING","getConfigurableAttributes",1070],"(",["T_VARIABLE","$product",1070],")",";",["T_WHITESPACE","\n        ",1070],["T_IF","if",1071],["T_WHITESPACE"," ",1071],"(",["T_STRING","count",1071],"(",["T_VARIABLE","$attributes",1071],")",")",["T_WHITESPACE"," ",1071],"{",["T_WHITESPACE","\n            ",1071],["T_RETURN","return",1072],["T_WHITESPACE"," ",1072],["T_STRING","true",1072],";",["T_WHITESPACE","\n        ",1072],"}",["T_WHITESPACE","\n\n        ",1073],["T_RETURN","return",1075],["T_WHITESPACE"," ",1075],["T_STRING","false",1075],";",["T_WHITESPACE","\n    ",1075],"}",["T_WHITESPACE","\n\n    ",1076],["T_DOC_COMMENT","\/**\n     * Return product weight based on simple product\n     * weight or configurable product weight\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return float\n     *\/",1078],["T_WHITESPACE","\n    ",1084],["T_PUBLIC","public",1085],["T_WHITESPACE"," ",1085],["T_FUNCTION","function",1085],["T_WHITESPACE"," ",1085],["T_STRING","getWeight",1085],"(",["T_VARIABLE","$product",1085],")",["T_WHITESPACE","\n    ",1085],"{",["T_WHITESPACE","\n        ",1086],["T_IF","if",1087],["T_WHITESPACE"," ",1087],"(",["T_VARIABLE","$product",1087],["T_OBJECT_OPERATOR","->",1087],["T_STRING","hasCustomOptions",1087],"(",")",["T_WHITESPACE"," ",1087],["T_BOOLEAN_AND","&&",1087],["T_WHITESPACE"," ",1087],"(",["T_VARIABLE","$simpleProductOption",1087],["T_WHITESPACE"," ",1087],"=",["T_WHITESPACE"," ",1087],["T_VARIABLE","$product",1087],["T_OBJECT_OPERATOR","->",1087],["T_STRING","getCustomOption",1087],"(",["T_CONSTANT_ENCAPSED_STRING","'simple_product'",1087],")",")",")",["T_WHITESPACE"," ",1087],"{",["T_WHITESPACE","\n            ",1087],["T_VARIABLE","$simpleProduct",1088],["T_WHITESPACE"," ",1088],"=",["T_WHITESPACE"," ",1088],["T_VARIABLE","$simpleProductOption",1088],["T_OBJECT_OPERATOR","->",1088],["T_STRING","getProduct",1088],"(",")",";",["T_WHITESPACE","\n            ",1088],["T_IF","if",1089],["T_WHITESPACE"," ",1089],"(",["T_VARIABLE","$simpleProduct",1089],")",["T_WHITESPACE"," ",1089],"{",["T_WHITESPACE","\n                ",1089],["T_RETURN","return",1090],["T_WHITESPACE"," ",1090],["T_VARIABLE","$simpleProduct",1090],["T_OBJECT_OPERATOR","->",1090],["T_STRING","getWeight",1090],"(",")",";",["T_WHITESPACE","\n            ",1090],"}",["T_WHITESPACE","\n        ",1091],"}",["T_WHITESPACE","\n\n        ",1092],["T_RETURN","return",1094],["T_WHITESPACE"," ",1094],["T_VARIABLE","$product",1094],["T_OBJECT_OPERATOR","->",1094],["T_STRING","getData",1094],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",1094],")",";",["T_WHITESPACE","\n    ",1094],"}",["T_WHITESPACE","\n\n    ",1095],["T_DOC_COMMENT","\/**\n     * Implementation of product specify logic of which product needs to be assigned to option.\n     * For example if product which was added to option already removed from catalog.\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product|null $optionProduct\n     * @param  \\Magento\\Quote\\Model\\Quote\\Item\\Option $option\n     * @param  \\Magento\\Catalog\\Model\\Product|null $product\n     * @return $this\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",1097],["T_WHITESPACE","\n    ",1106],["T_PUBLIC","public",1107],["T_WHITESPACE"," ",1107],["T_FUNCTION","function",1107],["T_WHITESPACE"," ",1107],["T_STRING","assignProductToOption",1107],"(",["T_VARIABLE","$optionProduct",1107],",",["T_WHITESPACE"," ",1107],["T_VARIABLE","$option",1107],",",["T_WHITESPACE"," ",1107],["T_VARIABLE","$product",1107],")",["T_WHITESPACE","\n    ",1107],"{",["T_WHITESPACE","\n        ",1108],["T_IF","if",1109],["T_WHITESPACE"," ",1109],"(",["T_VARIABLE","$optionProduct",1109],")",["T_WHITESPACE"," ",1109],"{",["T_WHITESPACE","\n            ",1109],["T_VARIABLE","$option",1110],["T_OBJECT_OPERATOR","->",1110],["T_STRING","setProduct",1110],"(",["T_VARIABLE","$optionProduct",1110],")",";",["T_WHITESPACE","\n        ",1110],"}",["T_WHITESPACE"," ",1111],["T_ELSE","else",1111],["T_WHITESPACE"," ",1111],"{",["T_WHITESPACE","\n            ",1111],["T_VARIABLE","$option",1112],["T_OBJECT_OPERATOR","->",1112],["T_STRING","getItem",1112],"(",")",["T_OBJECT_OPERATOR","->",1112],["T_STRING","setHasConfigurationUnavailableError",1112],"(",["T_STRING","true",1112],")",";",["T_WHITESPACE","\n        ",1112],"}",["T_WHITESPACE","\n        ",1113],["T_RETURN","return",1114],["T_WHITESPACE"," ",1114],["T_VARIABLE","$this",1114],";",["T_WHITESPACE","\n    ",1114],"}",["T_WHITESPACE","\n\n    ",1115],["T_DOC_COMMENT","\/**\n     * Retrieve products divided into groups required to purchase\n     * At least one product in each group has to be purchased\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",1117],["T_WHITESPACE","\n    ",1123],["T_PUBLIC","public",1124],["T_WHITESPACE"," ",1124],["T_FUNCTION","function",1124],["T_WHITESPACE"," ",1124],["T_STRING","getProductsToPurchaseByReqGroups",1124],"(",["T_VARIABLE","$product",1124],")",["T_WHITESPACE","\n    ",1124],"{",["T_WHITESPACE","\n        ",1125],["T_RETURN","return",1126],["T_WHITESPACE"," ",1126],"[",["T_VARIABLE","$this",1126],["T_OBJECT_OPERATOR","->",1126],["T_STRING","getUsedProducts",1126],"(",["T_VARIABLE","$product",1126],")","]",";",["T_WHITESPACE","\n    ",1126],"}",["T_WHITESPACE","\n\n    ",1127],["T_DOC_COMMENT","\/**\n     * Get sku of product\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return string\n     *\/",1129],["T_WHITESPACE","\n    ",1134],["T_PUBLIC","public",1135],["T_WHITESPACE"," ",1135],["T_FUNCTION","function",1135],["T_WHITESPACE"," ",1135],["T_STRING","getSku",1135],"(",["T_VARIABLE","$product",1135],")",["T_WHITESPACE","\n    ",1135],"{",["T_WHITESPACE","\n        ",1136],["T_VARIABLE","$simpleOption",1137],["T_WHITESPACE"," ",1137],"=",["T_WHITESPACE"," ",1137],["T_VARIABLE","$product",1137],["T_OBJECT_OPERATOR","->",1137],["T_STRING","getCustomOption",1137],"(",["T_CONSTANT_ENCAPSED_STRING","'simple_product'",1137],")",";",["T_WHITESPACE","\n        ",1137],["T_IF","if",1138],["T_WHITESPACE"," ",1138],"(",["T_VARIABLE","$simpleOption",1138],")",["T_WHITESPACE"," ",1138],"{",["T_WHITESPACE","\n            ",1138],["T_VARIABLE","$optionProduct",1139],["T_WHITESPACE"," ",1139],"=",["T_WHITESPACE"," ",1139],["T_VARIABLE","$simpleOption",1139],["T_OBJECT_OPERATOR","->",1139],["T_STRING","getProduct",1139],"(",")",";",["T_WHITESPACE","\n            ",1139],["T_VARIABLE","$simpleSku",1140],["T_WHITESPACE"," ",1140],"=",["T_WHITESPACE"," ",1140],["T_STRING","null",1140],";",["T_WHITESPACE","\n            ",1140],["T_IF","if",1141],["T_WHITESPACE"," ",1141],"(",["T_VARIABLE","$optionProduct",1141],")",["T_WHITESPACE"," ",1141],"{",["T_WHITESPACE","\n                ",1141],["T_VARIABLE","$simpleSku",1142],["T_WHITESPACE"," ",1142],"=",["T_WHITESPACE"," ",1142],["T_VARIABLE","$simpleOption",1142],["T_OBJECT_OPERATOR","->",1142],["T_STRING","getProduct",1142],"(",")",["T_OBJECT_OPERATOR","->",1142],["T_STRING","getSku",1142],"(",")",";",["T_WHITESPACE","\n            ",1142],"}",["T_WHITESPACE","\n            ",1143],["T_VARIABLE","$sku",1144],["T_WHITESPACE"," ",1144],"=",["T_WHITESPACE"," ",1144],["T_STRING","parent",1144],["T_DOUBLE_COLON","::",1144],["T_STRING","getOptionSku",1144],"(",["T_VARIABLE","$product",1144],",",["T_WHITESPACE"," ",1144],["T_VARIABLE","$simpleSku",1144],")",";",["T_WHITESPACE","\n        ",1144],"}",["T_WHITESPACE"," ",1145],["T_ELSE","else",1145],["T_WHITESPACE"," ",1145],"{",["T_WHITESPACE","\n            ",1145],["T_VARIABLE","$sku",1146],["T_WHITESPACE"," ",1146],"=",["T_WHITESPACE"," ",1146],["T_STRING","parent",1146],["T_DOUBLE_COLON","::",1146],["T_STRING","getSku",1146],"(",["T_VARIABLE","$product",1146],")",";",["T_WHITESPACE","\n        ",1146],"}",["T_WHITESPACE","\n\n        ",1147],["T_RETURN","return",1149],["T_WHITESPACE"," ",1149],["T_VARIABLE","$sku",1149],";",["T_WHITESPACE","\n    ",1149],"}",["T_WHITESPACE","\n\n    ",1150],["T_DOC_COMMENT","\/**\n     * Prepare selected options for configurable product\n     *\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @param  \\Magento\\Framework\\DataObject $buyRequest\n     * @return array\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",1152],["T_WHITESPACE","\n    ",1159],["T_PUBLIC","public",1160],["T_WHITESPACE"," ",1160],["T_FUNCTION","function",1160],["T_WHITESPACE"," ",1160],["T_STRING","processBuyRequest",1160],"(",["T_VARIABLE","$product",1160],",",["T_WHITESPACE"," ",1160],["T_VARIABLE","$buyRequest",1160],")",["T_WHITESPACE","\n    ",1160],"{",["T_WHITESPACE","\n        ",1161],["T_VARIABLE","$superAttribute",1162],["T_WHITESPACE"," ",1162],"=",["T_WHITESPACE"," ",1162],["T_VARIABLE","$buyRequest",1162],["T_OBJECT_OPERATOR","->",1162],["T_STRING","getSuperAttribute",1162],"(",")",";",["T_WHITESPACE","\n        ",1162],["T_VARIABLE","$superAttribute",1163],["T_WHITESPACE"," ",1163],"=",["T_WHITESPACE"," ",1163],["T_STRING","is_array",1163],"(",["T_VARIABLE","$superAttribute",1163],")",["T_WHITESPACE"," ",1163],"?",["T_WHITESPACE"," ",1163],["T_STRING","array_filter",1163],"(",["T_VARIABLE","$superAttribute",1163],",",["T_WHITESPACE"," ",1163],["T_CONSTANT_ENCAPSED_STRING","'intval'",1163],")",["T_WHITESPACE"," ",1163],":",["T_WHITESPACE"," ",1163],"[","]",";",["T_WHITESPACE","\n\n        ",1163],["T_VARIABLE","$options",1165],["T_WHITESPACE"," ",1165],"=",["T_WHITESPACE"," ",1165],"[",["T_CONSTANT_ENCAPSED_STRING","'super_attribute'",1165],["T_WHITESPACE"," ",1165],["T_DOUBLE_ARROW","=>",1165],["T_WHITESPACE"," ",1165],["T_VARIABLE","$superAttribute",1165],"]",";",["T_WHITESPACE","\n\n        ",1165],["T_RETURN","return",1167],["T_WHITESPACE"," ",1167],["T_VARIABLE","$options",1167],";",["T_WHITESPACE","\n    ",1167],"}",["T_WHITESPACE","\n\n    ",1168],["T_DOC_COMMENT","\/**\n     * Prepare and retrieve options values with product data\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",1170],["T_WHITESPACE","\n    ",1175],["T_PUBLIC","public",1176],["T_WHITESPACE"," ",1176],["T_FUNCTION","function",1176],["T_WHITESPACE"," ",1176],["T_STRING","getConfigurableOptions",1176],"(",["T_VARIABLE","$product",1176],")",["T_WHITESPACE","\n    ",1176],"{",["T_WHITESPACE","\n        ",1177],["T_RETURN","return",1178],["T_WHITESPACE"," ",1178],["T_VARIABLE","$this",1178],["T_OBJECT_OPERATOR","->",1178],["T_STRING","_catalogProductTypeConfigurable",1178],["T_OBJECT_OPERATOR","->",1178],["T_STRING","getConfigurableOptions",1178],"(",["T_WHITESPACE","\n            ",1178],["T_VARIABLE","$product",1179],",",["T_WHITESPACE","\n            ",1179],["T_VARIABLE","$this",1180],["T_OBJECT_OPERATOR","->",1180],["T_STRING","getUsedProductAttributes",1180],"(",["T_VARIABLE","$product",1180],")",["T_WHITESPACE","\n        ",1180],")",";",["T_WHITESPACE","\n    ",1181],"}",["T_WHITESPACE","\n\n    ",1182],["T_DOC_COMMENT","\/**\n     * Delete data specific for Configurable product type\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     *\/",1184],["T_WHITESPACE","\n    ",1188],["T_PUBLIC","public",1189],["T_WHITESPACE"," ",1189],["T_FUNCTION","function",1189],["T_WHITESPACE"," ",1189],["T_STRING","deleteTypeSpecificData",1189],"(",["T_NS_SEPARATOR","\\",1189],["T_STRING","Magento",1189],["T_NS_SEPARATOR","\\",1189],["T_STRING","Catalog",1189],["T_NS_SEPARATOR","\\",1189],["T_STRING","Model",1189],["T_NS_SEPARATOR","\\",1189],["T_STRING","Product",1189],["T_WHITESPACE"," ",1189],["T_VARIABLE","$product",1189],")",["T_WHITESPACE","\n    ",1189],"{",["T_WHITESPACE","\n        ",1190],["T_VARIABLE","$this",1191],["T_OBJECT_OPERATOR","->",1191],["T_STRING","typeConfigurableFactory",1191],["T_OBJECT_OPERATOR","->",1191],["T_STRING","create",1191],"(",")",["T_OBJECT_OPERATOR","->",1191],["T_STRING","saveProducts",1191],"(",["T_VARIABLE","$product",1191],",",["T_WHITESPACE"," ",1191],"[","]",")",";",["T_WHITESPACE","\n        ",1191],["T_DOC_COMMENT","\/** @var $configurableAttribute \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\\Attribute *\/",1192],["T_WHITESPACE","\n        ",1192],["T_VARIABLE","$configurableAttribute",1193],["T_WHITESPACE"," ",1193],"=",["T_WHITESPACE"," ",1193],["T_VARIABLE","$this",1193],["T_OBJECT_OPERATOR","->",1193],["T_STRING","configurableAttributeFactory",1193],["T_OBJECT_OPERATOR","->",1193],["T_STRING","create",1193],"(",")",";",["T_WHITESPACE","\n        ",1193],["T_VARIABLE","$configurableAttribute",1194],["T_OBJECT_OPERATOR","->",1194],["T_STRING","deleteByProduct",1194],"(",["T_VARIABLE","$product",1194],")",";",["T_WHITESPACE","\n    ",1194],"}",["T_WHITESPACE","\n\n    ",1195],["T_DOC_COMMENT","\/**\n     * Retrieve product attribute by identifier\n     * Difference from abstract: any attribute is available, not just the ones from $product's attribute set\n     *\n     * @param  int $attributeId\n     * @param  \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute\n     * @SuppressWarnings(PHPMD.UnusedFormalParameter)\n     *\/",1197],["T_WHITESPACE","\n    ",1205],["T_PUBLIC","public",1206],["T_WHITESPACE"," ",1206],["T_FUNCTION","function",1206],["T_WHITESPACE"," ",1206],["T_STRING","getAttributeById",1206],"(",["T_VARIABLE","$attributeId",1206],",",["T_WHITESPACE"," ",1206],["T_VARIABLE","$product",1206],")",["T_WHITESPACE","\n    ",1206],"{",["T_WHITESPACE","\n        ",1207],["T_RETURN","return",1208],["T_WHITESPACE"," ",1208],["T_VARIABLE","$this",1208],["T_OBJECT_OPERATOR","->",1208],["T_STRING","_eavConfig",1208],["T_OBJECT_OPERATOR","->",1208],["T_STRING","getAttribute",1208],"(",["T_STRING","ProductAttributeInterface",1208],["T_DOUBLE_COLON","::",1208],["T_STRING","ENTITY_TYPE_CODE",1208],",",["T_WHITESPACE"," ",1208],["T_VARIABLE","$attributeId",1208],")",";",["T_WHITESPACE","\n    ",1208],"}",["T_WHITESPACE","\n\n    ",1209],["T_DOC_COMMENT","\/**\n     * Set image for product without image if possible\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable\n     *\/",1211],["T_WHITESPACE","\n    ",1216],["T_PUBLIC","public",1217],["T_WHITESPACE"," ",1217],["T_FUNCTION","function",1217],["T_WHITESPACE"," ",1217],["T_STRING","setImageFromChildProduct",1217],"(",["T_NS_SEPARATOR","\\",1217],["T_STRING","Magento",1217],["T_NS_SEPARATOR","\\",1217],["T_STRING","Catalog",1217],["T_NS_SEPARATOR","\\",1217],["T_STRING","Model",1217],["T_NS_SEPARATOR","\\",1217],["T_STRING","Product",1217],["T_WHITESPACE"," ",1217],["T_VARIABLE","$product",1217],")",["T_WHITESPACE","\n    ",1217],"{",["T_WHITESPACE","\n        ",1218],["T_IF","if",1219],["T_WHITESPACE"," ",1219],"(","!",["T_VARIABLE","$product",1219],["T_OBJECT_OPERATOR","->",1219],["T_STRING","getData",1219],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",1219],")",["T_WHITESPACE"," ",1219],["T_BOOLEAN_OR","||",1219],["T_WHITESPACE"," ",1219],["T_VARIABLE","$product",1219],["T_OBJECT_OPERATOR","->",1219],["T_STRING","getData",1219],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",1219],")",["T_WHITESPACE"," ",1219],["T_IS_IDENTICAL","===",1219],["T_WHITESPACE"," ",1219],["T_CONSTANT_ENCAPSED_STRING","'no_selection'",1219],")",["T_WHITESPACE"," ",1219],"{",["T_WHITESPACE","\n            ",1219],["T_FOREACH","foreach",1220],["T_WHITESPACE"," ",1220],"(",["T_VARIABLE","$this",1220],["T_OBJECT_OPERATOR","->",1220],["T_STRING","getUsedProducts",1220],"(",["T_VARIABLE","$product",1220],")",["T_WHITESPACE"," ",1220],["T_AS","as",1220],["T_WHITESPACE"," ",1220],["T_VARIABLE","$childProduct",1220],")",["T_WHITESPACE"," ",1220],"{",["T_WHITESPACE","\n                ",1220],["T_IF","if",1221],["T_WHITESPACE"," ",1221],"(",["T_VARIABLE","$childProduct",1221],["T_OBJECT_OPERATOR","->",1221],["T_STRING","getData",1221],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",1221],")",["T_WHITESPACE"," ",1221],["T_BOOLEAN_AND","&&",1221],["T_WHITESPACE"," ",1221],["T_VARIABLE","$childProduct",1221],["T_OBJECT_OPERATOR","->",1221],["T_STRING","getData",1221],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",1221],")",["T_WHITESPACE"," ",1221],["T_IS_NOT_IDENTICAL","!==",1221],["T_WHITESPACE"," ",1221],["T_CONSTANT_ENCAPSED_STRING","'no_selection'",1221],")",["T_WHITESPACE"," ",1221],"{",["T_WHITESPACE","\n                    ",1221],["T_VARIABLE","$product",1222],["T_OBJECT_OPERATOR","->",1222],["T_STRING","setImage",1222],"(",["T_VARIABLE","$childProduct",1222],["T_OBJECT_OPERATOR","->",1222],["T_STRING","getData",1222],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",1222],")",")",";",["T_WHITESPACE","\n                    ",1222],["T_BREAK","break",1223],";",["T_WHITESPACE","\n                ",1223],"}",["T_WHITESPACE","\n            ",1224],"}",["T_WHITESPACE","\n        ",1225],"}",["T_WHITESPACE","\n        ",1226],["T_RETURN","return",1227],["T_WHITESPACE"," ",1227],["T_STRING","parent",1227],["T_DOUBLE_COLON","::",1227],["T_STRING","setImageFromChildProduct",1227],"(",["T_VARIABLE","$product",1227],")",";",["T_WHITESPACE","\n    ",1227],"}",["T_WHITESPACE","\n\n    ",1228],["T_DOC_COMMENT","\/**\n     * Get MetadataPool instance\n     * @return MetadataPool\n     *\/",1230],["T_WHITESPACE","\n    ",1233],["T_PRIVATE","private",1234],["T_WHITESPACE"," ",1234],["T_FUNCTION","function",1234],["T_WHITESPACE"," ",1234],["T_STRING","getMetadataPool",1234],"(",")",["T_WHITESPACE","\n    ",1234],"{",["T_WHITESPACE","\n        ",1235],["T_IF","if",1236],["T_WHITESPACE"," ",1236],"(","!",["T_VARIABLE","$this",1236],["T_OBJECT_OPERATOR","->",1236],["T_STRING","metadataPool",1236],")",["T_WHITESPACE"," ",1236],"{",["T_WHITESPACE","\n            ",1236],["T_VARIABLE","$this",1237],["T_OBJECT_OPERATOR","->",1237],["T_STRING","metadataPool",1237],["T_WHITESPACE"," ",1237],"=",["T_WHITESPACE"," ",1237],["T_STRING","ObjectManager",1237],["T_DOUBLE_COLON","::",1237],["T_STRING","getInstance",1237],"(",")",["T_OBJECT_OPERATOR","->",1237],["T_STRING","get",1237],"(",["T_STRING","MetadataPool",1237],["T_DOUBLE_COLON","::",1237],["T_CLASS","class",1237],")",";",["T_WHITESPACE","\n        ",1237],"}",["T_WHITESPACE","\n        ",1238],["T_RETURN","return",1239],["T_WHITESPACE"," ",1239],["T_VARIABLE","$this",1239],["T_OBJECT_OPERATOR","->",1239],["T_STRING","metadataPool",1239],";",["T_WHITESPACE","\n    ",1239],"}",["T_WHITESPACE","\n\n    ",1240],["T_DOC_COMMENT","\/**\n     * Get Config instance\n     * @return Config\n     * @deprecated\n     *\/",1242],["T_WHITESPACE","\n    ",1246],["T_PRIVATE","private",1247],["T_WHITESPACE"," ",1247],["T_FUNCTION","function",1247],["T_WHITESPACE"," ",1247],["T_STRING","getCatalogConfig",1247],"(",")",["T_WHITESPACE","\n    ",1247],"{",["T_WHITESPACE","\n        ",1248],["T_IF","if",1249],["T_WHITESPACE"," ",1249],"(","!",["T_VARIABLE","$this",1249],["T_OBJECT_OPERATOR","->",1249],["T_STRING","catalogConfig",1249],")",["T_WHITESPACE"," ",1249],"{",["T_WHITESPACE","\n            ",1249],["T_VARIABLE","$this",1250],["T_OBJECT_OPERATOR","->",1250],["T_STRING","catalogConfig",1250],["T_WHITESPACE"," ",1250],"=",["T_WHITESPACE"," ",1250],["T_STRING","ObjectManager",1250],["T_DOUBLE_COLON","::",1250],["T_STRING","getInstance",1250],"(",")",["T_OBJECT_OPERATOR","->",1250],["T_STRING","get",1250],"(",["T_STRING","Config",1250],["T_DOUBLE_COLON","::",1250],["T_CLASS","class",1250],")",";",["T_WHITESPACE","\n        ",1250],"}",["T_WHITESPACE","\n        ",1251],["T_RETURN","return",1252],["T_WHITESPACE"," ",1252],["T_VARIABLE","$this",1252],["T_OBJECT_OPERATOR","->",1252],["T_STRING","catalogConfig",1252],";",["T_WHITESPACE","\n    ",1252],"}",["T_WHITESPACE","\n\n    ",1253],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",1255],["T_WHITESPACE","\n    ",1257],["T_PUBLIC","public",1258],["T_WHITESPACE"," ",1258],["T_FUNCTION","function",1258],["T_WHITESPACE"," ",1258],["T_STRING","isPossibleBuyFromList",1258],"(",["T_VARIABLE","$product",1258],")",["T_WHITESPACE","\n    ",1258],"{",["T_WHITESPACE","\n        ",1259],["T_VARIABLE","$isAllCustomOptionsDisplayed",1260],["T_WHITESPACE"," ",1260],"=",["T_WHITESPACE"," ",1260],["T_STRING","true",1260],";",["T_WHITESPACE","\n        ",1260],["T_FOREACH","foreach",1261],["T_WHITESPACE"," ",1261],"(",["T_VARIABLE","$this",1261],["T_OBJECT_OPERATOR","->",1261],["T_STRING","getConfigurableAttributes",1261],"(",["T_VARIABLE","$product",1261],")",["T_WHITESPACE"," ",1261],["T_AS","as",1261],["T_WHITESPACE"," ",1261],["T_VARIABLE","$attribute",1261],")",["T_WHITESPACE"," ",1261],"{",["T_WHITESPACE","\n            ",1261],["T_VARIABLE","$eavAttribute",1262],["T_WHITESPACE"," ",1262],"=",["T_WHITESPACE"," ",1262],["T_VARIABLE","$attribute",1262],["T_OBJECT_OPERATOR","->",1262],["T_STRING","getProductAttribute",1262],"(",")",";",["T_WHITESPACE","\n\n            ",1262],["T_VARIABLE","$isAllCustomOptionsDisplayed",1264],["T_WHITESPACE"," ",1264],"=",["T_WHITESPACE"," ",1264],"(",["T_VARIABLE","$isAllCustomOptionsDisplayed",1264],["T_WHITESPACE"," ",1264],["T_BOOLEAN_AND","&&",1264],["T_WHITESPACE"," ",1264],["T_VARIABLE","$eavAttribute",1264],["T_OBJECT_OPERATOR","->",1264],["T_STRING","getUsedInProductListing",1264],"(",")",")",";",["T_WHITESPACE","\n        ",1264],"}",["T_WHITESPACE","\n\n        ",1265],["T_RETURN","return",1267],["T_WHITESPACE"," ",1267],["T_VARIABLE","$isAllCustomOptionsDisplayed",1267],";",["T_WHITESPACE","\n    ",1267],"}",["T_WHITESPACE","\n",1268],"}",["T_WHITESPACE","\n",1269]]
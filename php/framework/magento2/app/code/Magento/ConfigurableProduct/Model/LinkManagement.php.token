[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigurableProduct",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Exception",9],["T_NS_SEPARATOR","\\",9],["T_STRING","InputException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","StateException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","NoSuchEntityException",11],";",["T_WHITESPACE","\n\n",11],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","LinkManagement",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ConfigurableProduct",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Api",13],["T_NS_SEPARATOR","\\",13],["T_STRING","LinkManagementInterface",13],["T_WHITESPACE","\n",13],"{",["T_WHITESPACE","\n    ",14],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductRepositoryInterface\n     *\/",15],["T_WHITESPACE","\n    ",17],["T_PRIVATE","private",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$productRepository",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\Data\\ProductInterfaceFactory\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$productFactory",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$configurableType",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\DataObjectHelper\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$dataObjectHelper",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\ConfigurableProduct\\Helper\\Product\\Options\\Factory;\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$optionsFactory",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\AttributeFactory\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PRIVATE","private",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$attributeFactory",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Api\\ProductRepositoryInterface $productRepository\n     * @param \\Magento\\Catalog\\Api\\Data\\ProductInterfaceFactory $productFactory\n     * @param \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Type\\Configurable $configurableType\n     * @param \\Magento\\Framework\\Api\\DataObjectHelper $dataObjectHelper\n     *\/",45],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Catalog",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Api",52],["T_NS_SEPARATOR","\\",52],["T_STRING","ProductRepositoryInterface",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$productRepository",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Catalog",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Api",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Data",53],["T_NS_SEPARATOR","\\",53],["T_STRING","ProductInterfaceFactory",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$productFactory",53],",",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","ConfigurableProduct",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Model",54],["T_NS_SEPARATOR","\\",54],["T_STRING","ResourceModel",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Product",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Type",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Configurable",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$configurableType",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Api",55],["T_NS_SEPARATOR","\\",55],["T_STRING","DataObjectHelper",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$dataObjectHelper",55],["T_WHITESPACE","\n    ",55],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","productRepository",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$productRepository",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","productFactory",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$productFactory",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","configurableType",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$configurableType",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","dataObjectHelper",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$dataObjectHelper",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","getChildren",66],"(",["T_VARIABLE","$sku",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $product *\/",68],["T_WHITESPACE","\n        ",68],["T_VARIABLE","$product",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","productRepository",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_VARIABLE","$sku",69],")",";",["T_WHITESPACE","\n        ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$product",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getTypeId",70],"(",")",["T_WHITESPACE"," ",70],["T_IS_NOT_EQUAL","!=",70],["T_WHITESPACE"," ",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Magento",70],["T_NS_SEPARATOR","\\",70],["T_STRING","ConfigurableProduct",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Model",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Product",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Type",70],["T_NS_SEPARATOR","\\",70],["T_STRING","Configurable",70],["T_DOUBLE_COLON","::",70],["T_STRING","TYPE_CODE",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],"[","]",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_DOC_COMMENT","\/** @var \\Magento\\ConfigurableProduct\\Model\\Product\\Type\\Configurable $productTypeInstance *\/",74],["T_WHITESPACE","\n        ",74],["T_VARIABLE","$productTypeInstance",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$product",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getTypeInstance",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$productTypeInstance",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setStoreFilter",76],"(",["T_VARIABLE","$product",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getStoreId",76],"(",")",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$product",76],")",";",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$childrenList",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[","]",";",["T_WHITESPACE","\n        ",78],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Model\\Product $child *\/",79],["T_WHITESPACE","\n        ",79],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$productTypeInstance",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getUsedProducts",80],"(",["T_VARIABLE","$product",80],")",["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$child",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$attributes",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],"[","]",";",["T_WHITESPACE","\n            ",81],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$child",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getAttributes",82],"(",")",["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$attribute",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$attrCode",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$attribute",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAttributeCode",83],"(",")",";",["T_WHITESPACE","\n                ",83],["T_VARIABLE","$value",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$child",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getDataUsingMethod",84],"(",["T_VARIABLE","$attrCode",84],")",["T_WHITESPACE"," ",84],"?",":",["T_WHITESPACE"," ",84],["T_VARIABLE","$child",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getData",84],"(",["T_VARIABLE","$attrCode",84],")",";",["T_WHITESPACE","\n                ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_STRING","null",85],["T_WHITESPACE"," ",85],["T_IS_NOT_IDENTICAL","!==",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$value",85],["T_WHITESPACE"," ",85],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$attrCode",85],["T_WHITESPACE"," ",85],["T_IS_NOT_EQUAL","!=",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                    ",85],["T_VARIABLE","$attributes",86],"[",["T_VARIABLE","$attrCode",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$value",86],";",["T_WHITESPACE","\n                ",86],"}",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$attributes",89],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",89],"]",["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$child",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getStoreId",89],"(",")",";",["T_WHITESPACE","\n            ",89],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Api\\Data\\ProductInterface $productDataObject *\/",90],["T_WHITESPACE","\n            ",90],["T_VARIABLE","$productDataObject",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","productFactory",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","create",91],"(",")",";",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","dataObjectHelper",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","populateWithArray",92],"(",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$productDataObject",93],",",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$attributes",94],",",["T_WHITESPACE","\n                ",94],["T_NS_SEPARATOR","\\",95],["T_STRING","Magento",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Catalog",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Api",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Data",95],["T_NS_SEPARATOR","\\",95],["T_STRING","ProductInterface",95],["T_DOUBLE_COLON","::",95],["T_CLASS","class",95],["T_WHITESPACE","\n            ",95],")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$childrenList",97],"[","]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$productDataObject",97],";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$childrenList",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",102],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","addChild",105],"(",["T_VARIABLE","$sku",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$childSku",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$product",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","productRepository",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","get",107],"(",["T_VARIABLE","$sku",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$child",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","productRepository",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","get",108],"(",["T_VARIABLE","$childSku",108],")",";",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$childrenIds",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","array_values",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","configurableType",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getChildrenIds",110],"(",["T_VARIABLE","$product",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getId",110],"(",")",")","[",["T_LNUMBER","0",110],"]",")",";",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_STRING","in_array",111],"(",["T_VARIABLE","$child",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getId",111],"(",")",",",["T_WHITESPACE"," ",111],["T_VARIABLE","$childrenIds",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_THROW","throw",112],["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_STRING","StateException",112],"(",["T_STRING","__",112],"(",["T_CONSTANT_ENCAPSED_STRING","'Product has been already attached'",112],")",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$configurableProductOptions",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$product",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getExtensionAttributes",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getConfigurableProductOptions",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_EMPTY","empty",116],"(",["T_VARIABLE","$configurableProductOptions",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_THROW","throw",117],["T_WHITESPACE"," ",117],["T_NEW","new",117],["T_WHITESPACE"," ",117],["T_STRING","StateException",117],"(",["T_STRING","__",117],"(",["T_CONSTANT_ENCAPSED_STRING","'Parent product does not have configurable product options'",117],")",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$attributeIds",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],"[","]",";",["T_WHITESPACE","\n        ",120],["T_FOREACH","foreach",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$configurableProductOptions",121],["T_WHITESPACE"," ",121],["T_AS","as",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$configurableProductOption",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$attributeCode",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$configurableProductOption",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getProductAttribute",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","getAttributeCode",122],"(",")",";",["T_WHITESPACE","\n            ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_VARIABLE","$child",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getData",123],"(",["T_VARIABLE","$attributeCode",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_THROW","throw",124],["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_STRING","StateException",124],"(",["T_STRING","__",124],"(",["T_CONSTANT_ENCAPSED_STRING","'Child product does not have attribute value %1'",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$attributeCode",124],")",")",";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$attributeIds",126],"[","]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$configurableProductOption",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getAttributeId",126],"(",")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$configurableOptionData",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getConfigurableAttributesData",128],"(",["T_VARIABLE","$attributeIds",128],")",";",["T_WHITESPACE","\n\n        ",128],["T_DOC_COMMENT","\/** @var \\Magento\\ConfigurableProduct\\Helper\\Product\\Options\\Factory $optionFactory *\/",130],["T_WHITESPACE","\n        ",130],["T_VARIABLE","$optionFactory",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getOptionsFactory",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$options",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$optionFactory",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","create",132],"(",["T_VARIABLE","$configurableOptionData",132],")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$childrenIds",133],"[","]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$child",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getId",133],"(",")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$product",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getExtensionAttributes",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","setConfigurableProductOptions",134],"(",["T_VARIABLE","$options",134],")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$product",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getExtensionAttributes",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","setConfigurableProductLinks",135],"(",["T_VARIABLE","$childrenIds",135],")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","productRepository",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","save",136],"(",["T_VARIABLE","$product",136],")",";",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","true",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",140],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","removeChild",143],"(",["T_VARIABLE","$sku",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$childSku",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$product",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","productRepository",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","get",145],"(",["T_VARIABLE","$sku",145],")",";",["T_WHITESPACE","\n\n        ",145],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$product",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getTypeId",147],"(",")",["T_WHITESPACE"," ",147],["T_IS_NOT_EQUAL","!=",147],["T_WHITESPACE"," ",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","ConfigurableProduct",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Model",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Product",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Type",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Configurable",147],["T_DOUBLE_COLON","::",147],["T_STRING","TYPE_CODE",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_THROW","throw",148],["T_WHITESPACE"," ",148],["T_NEW","new",148],["T_WHITESPACE"," ",148],["T_STRING","InputException",148],"(",["T_WHITESPACE","\n                ",148],["T_STRING","__",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Product with specified sku: %1 is not a configurable product'",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$sku",149],")",["T_WHITESPACE","\n            ",149],")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_VARIABLE","$options",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$product",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getTypeInstance",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getUsedProducts",153],"(",["T_VARIABLE","$product",153],")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$ids",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"[","]",";",["T_WHITESPACE","\n        ",154],["T_FOREACH","foreach",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$options",155],["T_WHITESPACE"," ",155],["T_AS","as",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$option",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$option",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getSku",156],"(",")",["T_WHITESPACE"," ",156],["T_IS_EQUAL","==",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$childSku",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n                ",156],["T_CONTINUE","continue",157],";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$ids",159],"[","]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$option",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getId",159],"(",")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_STRING","count",161],"(",["T_VARIABLE","$options",161],")",["T_WHITESPACE"," ",161],["T_IS_EQUAL","==",161],["T_WHITESPACE"," ",161],["T_STRING","count",161],"(",["T_VARIABLE","$ids",161],")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_THROW","throw",162],["T_WHITESPACE"," ",162],["T_NEW","new",162],["T_WHITESPACE"," ",162],["T_STRING","NoSuchEntityException",162],"(",["T_STRING","__",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Requested option doesn\\'t exist'",162],")",")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$product",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getExtensionAttributes",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","setConfigurableProductLinks",164],"(",["T_VARIABLE","$ids",164],")",";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","productRepository",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","save",165],"(",["T_VARIABLE","$product",165],")",";",["T_WHITESPACE","\n        ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_STRING","true",166],";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Get Options Factory\n     *\n     * @return \\Magento\\ConfigurableProduct\\Helper\\Product\\Options\\Factory\n     *\n     * @deprecated\n     *\/",169],["T_WHITESPACE","\n    ",175],["T_PRIVATE","private",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","getOptionsFactory",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","!",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","optionsFactory",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","optionsFactory",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Magento",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Framework",179],["T_NS_SEPARATOR","\\",179],["T_STRING","App",179],["T_NS_SEPARATOR","\\",179],["T_STRING","ObjectManager",179],["T_DOUBLE_COLON","::",179],["T_STRING","getInstance",179],"(",")",["T_WHITESPACE","\n                ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","get",180],"(",["T_NS_SEPARATOR","\\",180],["T_STRING","Magento",180],["T_NS_SEPARATOR","\\",180],["T_STRING","ConfigurableProduct",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Helper",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Product",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Options",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Factory",180],["T_DOUBLE_COLON","::",180],["T_CLASS","class",180],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","optionsFactory",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Get Attribute Factory\n     *\n     * @return \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\AttributeFactory\n     *\n     * @deprecated\n     *\/",185],["T_WHITESPACE","\n    ",191],["T_PRIVATE","private",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","getAttributeFactory",192],"(",")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_IF","if",194],["T_WHITESPACE"," ",194],"(","!",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","attributeFactory",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","attributeFactory",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Magento",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Framework",195],["T_NS_SEPARATOR","\\",195],["T_STRING","App",195],["T_NS_SEPARATOR","\\",195],["T_STRING","ObjectManager",195],["T_DOUBLE_COLON","::",195],["T_STRING","getInstance",195],"(",")",["T_WHITESPACE","\n                ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","get",196],"(",["T_NS_SEPARATOR","\\",196],["T_STRING","Magento",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Catalog",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Model",196],["T_NS_SEPARATOR","\\",196],["T_STRING","ResourceModel",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Eav",196],["T_NS_SEPARATOR","\\",196],["T_STRING","AttributeFactory",196],["T_DOUBLE_COLON","::",196],["T_CLASS","class",196],")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n        ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","attributeFactory",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Get Configurable Attribute Data\n     *\n     * @param int[] $attributeIds\n     * @return array\n     *\/",201],["T_WHITESPACE","\n    ",206],["T_PRIVATE","private",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","getConfigurableAttributesData",207],"(",["T_VARIABLE","$attributeIds",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$configurableAttributesData",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],"[","]",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$attributeValues",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],"[","]",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$attributes",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getAttributeFactory",211],"(",")",["T_OBJECT_OPERATOR","->",211],["T_STRING","create",211],"(",")",["T_WHITESPACE","\n            ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","getCollection",212],"(",")",["T_WHITESPACE","\n            ",212],["T_OBJECT_OPERATOR","->",213],["T_STRING","addFieldToFilter",213],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$attributeIds",213],")",["T_WHITESPACE","\n            ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","getItems",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_FOREACH","foreach",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$attributes",215],["T_WHITESPACE"," ",215],["T_AS","as",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$attribute",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_FOREACH","foreach",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$attribute",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getOptions",216],"(",")",["T_WHITESPACE"," ",216],["T_AS","as",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$option",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                ",216],["T_IF","if",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$option",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getValue",217],"(",")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n                    ",217],["T_VARIABLE","$attributeValues",218],"[","]",["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],"[",["T_WHITESPACE","\n                        ",218],["T_CONSTANT_ENCAPSED_STRING","'label'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$option",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getLabel",219],"(",")",",",["T_WHITESPACE","\n                        ",219],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$attribute",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getId",220],"(",")",",",["T_WHITESPACE","\n                        ",220],["T_CONSTANT_ENCAPSED_STRING","'value_index'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$option",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getValue",221],"(",")",",",["T_WHITESPACE","\n                    ",221],"]",";",["T_WHITESPACE","\n                ",222],"}",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$configurableAttributesData",225],"[","]",["T_WHITESPACE"," ",225],"=",["T_WHITESPACE","\n                ",225],"[",["T_WHITESPACE","\n                    ",226],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$attribute",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getId",227],"(",")",",",["T_WHITESPACE","\n                    ",227],["T_CONSTANT_ENCAPSED_STRING","'code'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$attribute",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getAttributeCode",228],"(",")",",",["T_WHITESPACE","\n                    ",228],["T_CONSTANT_ENCAPSED_STRING","'label'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$attribute",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getStoreLabel",229],"(",")",",",["T_WHITESPACE","\n                    ",229],["T_CONSTANT_ENCAPSED_STRING","'values'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$attributeValues",230],",",["T_WHITESPACE","\n                ",230],"]",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n\n        ",232],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$configurableAttributesData",234],";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n",235],"}",["T_WHITESPACE","\n",236]]
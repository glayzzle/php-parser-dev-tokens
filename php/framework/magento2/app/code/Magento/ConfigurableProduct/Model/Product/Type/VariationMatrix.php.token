[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigurableProduct",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Model",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Type",6],";",["T_WHITESPACE","\n\n",6],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","VariationMatrix",8],["T_WHITESPACE","\n",8],"{",["T_WHITESPACE","\n    ",9],["T_DOC_COMMENT","\/**\n     * Generate matrix of variation\n     *\n     * @param array $usedProductAttributes\n     * @return array\n     *\/",10],["T_WHITESPACE","\n    ",15],["T_PUBLIC","public",16],["T_WHITESPACE"," ",16],["T_FUNCTION","function",16],["T_WHITESPACE"," ",16],["T_STRING","getVariations",16],"(",["T_VARIABLE","$usedProductAttributes",16],")",["T_WHITESPACE","\n    ",16],"{",["T_WHITESPACE","\n        ",17],["T_VARIABLE","$variationalAttributes",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","combineVariationalAttributes",18],"(",["T_VARIABLE","$usedProductAttributes",18],")",";",["T_WHITESPACE","\n\n        ",18],["T_VARIABLE","$attributesCount",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_STRING","count",20],"(",["T_VARIABLE","$variationalAttributes",20],")",";",["T_WHITESPACE","\n        ",20],["T_IF","if",21],["T_WHITESPACE"," ",21],"(",["T_VARIABLE","$attributesCount",21],["T_WHITESPACE"," ",21],["T_IS_IDENTICAL","===",21],["T_WHITESPACE"," ",21],["T_LNUMBER","0",21],")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n            ",21],["T_RETURN","return",22],["T_WHITESPACE"," ",22],"[","]",";",["T_WHITESPACE","\n        ",22],"}",["T_WHITESPACE","\n\n        ",23],["T_VARIABLE","$variations",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[","]",";",["T_WHITESPACE","\n        ",25],["T_VARIABLE","$currentVariation",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","array_fill",26],"(",["T_LNUMBER","0",26],",",["T_WHITESPACE"," ",26],["T_VARIABLE","$attributesCount",26],",",["T_WHITESPACE"," ",26],["T_LNUMBER","0",26],")",";",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$variationalAttributes",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","array_reverse",27],"(",["T_VARIABLE","$variationalAttributes",27],")",";",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$lastAttribute",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$attributesCount",28],["T_WHITESPACE"," ",28],"-",["T_WHITESPACE"," ",28],["T_LNUMBER","1",28],";",["T_WHITESPACE","\n        ",28],["T_DO","do",29],["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n            ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","incrementVariationalIndex",30],"(",["T_VARIABLE","$attributesCount",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$variationalAttributes",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$currentVariation",30],")",";",["T_WHITESPACE","\n            ",30],["T_IF","if",31],["T_WHITESPACE"," ",31],"(",["T_VARIABLE","$currentVariation",31],"[",["T_VARIABLE","$lastAttribute",31],"]",["T_WHITESPACE"," ",31],["T_IS_GREATER_OR_EQUAL",">=",31],["T_WHITESPACE"," ",31],["T_STRING","count",31],"(",["T_VARIABLE","$variationalAttributes",31],"[",["T_VARIABLE","$lastAttribute",31],"]","[",["T_CONSTANT_ENCAPSED_STRING","'values'",31],"]",")",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n                ",31],["T_BREAK","break",32],";",["T_WHITESPACE","\n            ",32],"}",["T_WHITESPACE","\n\n            ",33],["T_VARIABLE","$filledVariation",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],"[","]",";",["T_WHITESPACE","\n            ",35],["T_FOR","for",36],["T_WHITESPACE"," ",36],"(",["T_VARIABLE","$attributeIndex",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$attributesCount",36],";",["T_WHITESPACE"," ",36],["T_VARIABLE","$attributeIndex",36],["T_DEC","--",36],";",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n                ",36],["T_VARIABLE","$currentAttribute",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$variationalAttributes",37],"[",["T_VARIABLE","$attributeIndex",37],"]",";",["T_WHITESPACE","\n                ",37],["T_VARIABLE","$currentVariationValue",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$currentVariation",38],"[",["T_VARIABLE","$attributeIndex",38],"]",";",["T_WHITESPACE","\n                ",38],["T_VARIABLE","$filledVariation",39],"[",["T_VARIABLE","$currentAttribute",39],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",39],"]","]",["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$currentAttribute",39],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",39],"]","[",["T_VARIABLE","$currentVariationValue",39],"]",";",["T_WHITESPACE","\n            ",39],"}",["T_WHITESPACE","\n\n            ",40],["T_VARIABLE","$variations",42],"[","]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$filledVariation",42],";",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$currentVariation",43],"[",["T_LNUMBER","0",43],"]",["T_INC","++",43],";",["T_WHITESPACE","\n        ",43],"}",["T_WHITESPACE"," ",44],["T_WHILE","while",44],["T_WHITESPACE"," ",44],"(",["T_STRING","true",44],")",";",["T_WHITESPACE","\n\n        ",44],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$variations",46],";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Combine variational attributes\n     *\n     * @param array $usedProductAttributes\n     * @return array\n     *\/",49],["T_WHITESPACE","\n    ",54],["T_PRIVATE","private",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","combineVariationalAttributes",55],"(",["T_VARIABLE","$usedProductAttributes",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$variationalAttributes",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[","]",";",["T_WHITESPACE","\n        ",57],["T_FOREACH","foreach",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$usedProductAttributes",58],["T_WHITESPACE"," ",58],["T_AS","as",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$attribute",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$options",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[","]",";",["T_WHITESPACE","\n            ",59],["T_FOREACH","foreach",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$attribute",60],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",60],"]",["T_WHITESPACE"," ",60],["T_AS","as",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$valueInfo",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_FOREACH","foreach",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$attribute",61],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",61],"]",["T_WHITESPACE"," ",61],["T_AS","as",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$priceData",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n                    ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_ISSET","isset",62],"(",["T_VARIABLE","$priceData",62],"[",["T_CONSTANT_ENCAPSED_STRING","'value_index'",62],"]",")",["T_WHITESPACE"," ",62],["T_BOOLEAN_AND","&&",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$priceData",62],"[",["T_CONSTANT_ENCAPSED_STRING","'value_index'",62],"]",["T_WHITESPACE"," ",62],["T_IS_EQUAL","==",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$valueInfo",62],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",62],"]",["T_WHITESPACE","\n                        ",62],["T_BOOLEAN_AND","&&",63],["T_WHITESPACE"," ",63],"(","!",["T_ISSET","isset",63],"(",["T_VARIABLE","$priceData",63],"[",["T_CONSTANT_ENCAPSED_STRING","'include'",63],"]",")",["T_WHITESPACE"," ",63],["T_BOOLEAN_OR","||",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$priceData",63],"[",["T_CONSTANT_ENCAPSED_STRING","'include'",63],"]",")",["T_WHITESPACE","\n                    ",63],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n                        ",64],["T_VARIABLE","$valueInfo",65],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",65],"]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$priceData",65],";",["T_WHITESPACE","\n                        ",65],["T_VARIABLE","$options",66],"[","]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$valueInfo",66],";",["T_WHITESPACE","\n                    ",66],"}",["T_WHITESPACE","\n                ",67],"}",["T_WHITESPACE","\n            ",68],"}",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$variationalAttributes",70],"[","]",["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$attribute",70],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",70],"]",",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'values'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$options",70],"]",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$variationalAttributes",72],";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Increment index in variation with shift if overflow\n     *\n     * @param int $attributesCount\n     * @param array $variationalAttributes\n     * @param array $currentVariation\n     * @return void\n     *\/",75],["T_WHITESPACE","\n    ",82],["T_PRIVATE","private",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","incrementVariationalIndex",83],"(",["T_VARIABLE","$attributesCount",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$variationalAttributes",83],",",["T_WHITESPACE"," ",83],"&",["T_VARIABLE","$currentVariation",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_FOR","for",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$attributeIndex",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],";",["T_WHITESPACE"," ",85],["T_VARIABLE","$attributeIndex",85],["T_WHITESPACE"," ",85],"<",["T_WHITESPACE"," ",85],["T_VARIABLE","$attributesCount",85],["T_WHITESPACE"," ",85],"-",["T_WHITESPACE"," ",85],["T_LNUMBER","1",85],";",["T_WHITESPACE"," ",85],["T_INC","++",85],["T_VARIABLE","$attributeIndex",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$currentVariation",86],"[",["T_VARIABLE","$attributeIndex",86],"]",["T_WHITESPACE"," ",86],["T_IS_GREATER_OR_EQUAL",">=",86],["T_WHITESPACE"," ",86],["T_STRING","count",86],"(",["T_VARIABLE","$variationalAttributes",86],"[",["T_VARIABLE","$attributeIndex",86],"]","[",["T_CONSTANT_ENCAPSED_STRING","'values'",86],"]",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$currentVariation",87],"[",["T_VARIABLE","$attributeIndex",87],"]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_LNUMBER","0",87],";",["T_WHITESPACE","\n                ",87],["T_INC","++",88],["T_VARIABLE","$currentVariation",88],"[",["T_VARIABLE","$attributeIndex",88],["T_WHITESPACE"," ",88],"+",["T_WHITESPACE"," ",88],["T_LNUMBER","1",88],"]",";",["T_WHITESPACE","\n            ",88],"}",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n",91],"}",["T_WHITESPACE","\n",92]]
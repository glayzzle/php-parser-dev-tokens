[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Configurable Products Price Indexer Resource model\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",7],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigurableProduct",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Model",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceModel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Product",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Indexer",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Price",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Data",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ProductInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Product",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Attribute",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Source",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Status",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","ProductStatus",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Catalog",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Product",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Attribute",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Source",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Status",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Store",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Api",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StoreResolverInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Store",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Store",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","Configurable",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Catalog",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Model",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ResourceModel",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Product",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Indexer",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Price",19],["T_NS_SEPARATOR","\\",19],["T_STRING","DefaultPrice",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_DOC_COMMENT","\/**\n     * @var StoreResolverInterface\n     *\/",21],["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$storeResolver",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Class constructor\n     *\n     * @param \\Magento\\Framework\\Model\\ResourceModel\\Db\\Context $context\n     * @param \\Magento\\Framework\\Indexer\\Table\\StrategyInterface $tableStrategy\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Framework\\Event\\ManagerInterface $eventManager\n     * @param \\Magento\\Framework\\Module\\Manager $moduleManager\n     * @param string $connectionName\n     * @param StoreResolverInterface $storeResolver\n     *\/",26],["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","__construct",37],"(",["T_WHITESPACE","\n        ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Framework",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Model",38],["T_NS_SEPARATOR","\\",38],["T_STRING","ResourceModel",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Db",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Context",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$context",38],",",["T_WHITESPACE","\n        ",38],["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Framework",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Indexer",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Table",39],["T_NS_SEPARATOR","\\",39],["T_STRING","StrategyInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$tableStrategy",39],",",["T_WHITESPACE","\n        ",39],["T_NS_SEPARATOR","\\",40],["T_STRING","Magento",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Eav",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Model",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Config",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$eavConfig",40],",",["T_WHITESPACE","\n        ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Magento",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Framework",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Event",41],["T_NS_SEPARATOR","\\",41],["T_STRING","ManagerInterface",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$eventManager",41],",",["T_WHITESPACE","\n        ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Module",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Manager",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$moduleManager",42],",",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$connectionName",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","null",43],",",["T_WHITESPACE","\n        ",43],["T_STRING","StoreResolverInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$storeResolver",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","null",44],["T_WHITESPACE","\n    ",44],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n        ",45],["T_STRING","parent",46],["T_DOUBLE_COLON","::",46],["T_STRING","__construct",46],"(",["T_VARIABLE","$context",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$tableStrategy",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$eavConfig",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$eventManager",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$moduleManager",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$connectionName",46],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","storeResolver",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$storeResolver",47],["T_WHITESPACE"," ",47],"?",":",["T_WHITESPACE","\n            ",47],["T_NS_SEPARATOR","\\",48],["T_STRING","Magento",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Framework",48],["T_NS_SEPARATOR","\\",48],["T_STRING","App",48],["T_NS_SEPARATOR","\\",48],["T_STRING","ObjectManager",48],["T_DOUBLE_COLON","::",48],["T_STRING","getInstance",48],"(",")",["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_STRING","StoreResolverInterface",48],["T_DOUBLE_COLON","::",48],["T_CLASS","class",48],")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Reindex temporary (price result data) for all products\n     *\n     * @return $this\n     * @throws \\Exception\n     *\/",51],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","reindexAll",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","tableStrategy",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","setUseIdxTable",59],"(",["T_STRING","true",59],")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","beginTransaction",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_TRY","try",61],["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","reindex",62],"(",")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","commit",63],"(",")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE"," ",64],["T_CATCH","catch",64],["T_WHITESPACE"," ",64],"(",["T_NS_SEPARATOR","\\",64],["T_STRING","Exception",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$e",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","rollBack",65],"(",")",";",["T_WHITESPACE","\n            ",65],["T_THROW","throw",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$e",66],";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n        ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Reindex temporary (price result data) for defined product(s)\n     *\n     * @param int|array $entityIds\n     * @return \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Indexer\\Price\\Configurable\n     *\/",71],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","reindexEntity",77],"(",["T_VARIABLE","$entityIds",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","reindex",79],"(",["T_VARIABLE","$entityIds",79],")",";",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @param null|int|array $entityIds\n     * @return \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Indexer\\Price\\Configurable\n     *\/",83],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","reindex",87],"(",["T_VARIABLE","$entityIds",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","null",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","hasEntity",89],"(",")",["T_WHITESPACE"," ",89],["T_BOOLEAN_OR","||",89],["T_WHITESPACE"," ",89],"!",["T_EMPTY","empty",89],"(",["T_VARIABLE","$entityIds",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_EMPTY","empty",90],"(",["T_VARIABLE","$entityIds",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                ",90],["T_VARIABLE","$allEntityIds",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getRelatedProducts",91],"(",["T_VARIABLE","$entityIds",91],")",";",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","prepareFinalPriceDataForType",92],"(",["T_VARIABLE","$allEntityIds",92],",",["T_WHITESPACE"," ",92],["T_STRING","null",92],")",";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE"," ",93],["T_ELSE","else",93],["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_prepareFinalPriceData",94],"(",["T_VARIABLE","$entityIds",94],")",";",["T_WHITESPACE","\n            ",94],"}",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_applyCustomOption",96],"(",")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_applyConfigurableOption",97],"(",["T_VARIABLE","$entityIds",97],")",";",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_movePriceDataToIndexTable",98],"(",["T_VARIABLE","$entityIds",98],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Get related product\n     *\n     * @param int[] $entityIds\n     * @return int[]\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PRIVATE","private",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getRelatedProducts",109],"(",["T_VARIABLE","$entityIds",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$metadata",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getMetadataPool",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","getMetadata",111],"(",["T_STRING","ProductInterface",111],["T_DOUBLE_COLON","::",111],["T_CLASS","class",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$select",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getConnection",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","select",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","union",112],"(",["T_WHITESPACE","\n            ",112],"[",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getConnection",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","select",114],"(",")",["T_WHITESPACE","\n                    ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","from",115],"(",["T_WHITESPACE","\n                        ",115],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getTable",116],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",116],")","]",",",["T_WHITESPACE","\n                        ",116],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",117],["T_WHITESPACE","\n                    ",117],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","join",118],"(",["T_WHITESPACE","\n                        ",118],"[",["T_CONSTANT_ENCAPSED_STRING","'cpsl'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getTable",119],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_link'",119],")","]",",",["T_WHITESPACE","\n                        ",119],["T_CONSTANT_ENCAPSED_STRING","'cpsl.parent_id = e.'",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_VARIABLE","$metadata",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getLinkField",120],"(",")",",",["T_WHITESPACE","\n                        ",120],"[","]",["T_WHITESPACE","\n                    ",121],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","where",122],"(",["T_WHITESPACE","\n                        ",122],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id IN (?)'",123],",",["T_WHITESPACE","\n                        ",123],["T_VARIABLE","$entityIds",124],["T_WHITESPACE","\n                    ",124],")",",",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getConnection",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","select",126],"(",")",["T_WHITESPACE","\n                    ",126],["T_OBJECT_OPERATOR","->",127],["T_STRING","from",127],"(",["T_WHITESPACE","\n                        ",127],"[",["T_CONSTANT_ENCAPSED_STRING","'cpsl'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getTable",128],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_link'",128],")","]",",",["T_WHITESPACE","\n                        ",128],["T_CONSTANT_ENCAPSED_STRING","'cpsl.product_id'",129],["T_WHITESPACE","\n                    ",129],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","join",130],"(",["T_WHITESPACE","\n                        ",130],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getTable",131],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",131],")","]",",",["T_WHITESPACE","\n                        ",131],["T_CONSTANT_ENCAPSED_STRING","'cpsl.parent_id = e.'",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_VARIABLE","$metadata",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getLinkField",132],"(",")",",",["T_WHITESPACE","\n                        ",132],"[","]",["T_WHITESPACE","\n                    ",133],")",["T_OBJECT_OPERATOR","->",134],["T_STRING","where",134],"(",["T_WHITESPACE","\n                        ",134],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id IN (?)'",135],",",["T_WHITESPACE","\n                        ",135],["T_VARIABLE","$entityIds",136],["T_WHITESPACE","\n                    ",136],")",",",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getConnection",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","select",138],"(",")",["T_WHITESPACE","\n                    ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","from",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getTable",139],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_link'",139],")",",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'product_id'",139],")",["T_WHITESPACE","\n                    ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","where",140],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id in (?)'",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$entityIds",140],")",",",["T_WHITESPACE","\n            ",140],"]",["T_WHITESPACE","\n        ",141],")",";",["T_WHITESPACE","\n\n        ",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_STRING","array_map",144],"(",["T_CONSTANT_ENCAPSED_STRING","'intval'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getConnection",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","fetchCol",144],"(",["T_VARIABLE","$select",144],")",")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Retrieve table name for custom option temporary aggregation data\n     *\n     * @return string\n     *\/",147],["T_WHITESPACE","\n    ",151],["T_PROTECTED","protected",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","_getConfigurableOptionAggregateTable",152],"(",")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","tableStrategy",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getTableName",154],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_index_price_cfg_opt_agr'",154],")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Retrieve table name for custom option prices data\n     *\n     * @return string\n     *\/",157],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","_getConfigurableOptionPriceTable",162],"(",")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","tableStrategy",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getTableName",164],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_index_price_cfg_opt'",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Prepare table structure for custom option temporary aggregation data\n     *\n     * @return \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Indexer\\Price\\Configurable\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PROTECTED","protected",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","_prepareConfigurableOptionAggregateTable",172],"(",")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getConnection",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","delete",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_getConfigurableOptionAggregateTable",174],"(",")",")",";",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Prepare table structure for custom option prices data\n     *\n     * @return \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Indexer\\Price\\Configurable\n     *\/",178],["T_WHITESPACE","\n    ",182],["T_PROTECTED","protected",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","_prepareConfigurableOptionPriceTable",183],"(",")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getConnection",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","delete",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_getConfigurableOptionPriceTable",185],"(",")",")",";",["T_WHITESPACE","\n        ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Calculate minimal and maximal prices for configurable product options\n     * and apply it to final price\n     *\n     * @return \\Magento\\ConfigurableProduct\\Model\\ResourceModel\\Product\\Indexer\\Price\\Configurable\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",189],["T_WHITESPACE","\n    ",195],["T_PROTECTED","protected",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","_applyConfigurableOption",196],"(",")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$metadata",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getMetadataPool",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","getMetadata",198],"(",["T_STRING","ProductInterface",198],["T_DOUBLE_COLON","::",198],["T_CLASS","class",198],")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$connection",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getConnection",199],"(",")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$coaTable",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_getConfigurableOptionAggregateTable",200],"(",")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$copTable",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_getConfigurableOptionPriceTable",201],"(",")",";",["T_WHITESPACE","\n\n        ",201],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_prepareConfigurableOptionAggregateTable",203],"(",")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_prepareConfigurableOptionPriceTable",204],"(",")",";",["T_WHITESPACE","\n\n        ",204],["T_VARIABLE","$statusAttribute",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_getAttribute",206],"(",["T_STRING","ProductInterface",206],["T_DOUBLE_COLON","::",206],["T_STRING","STATUS",206],")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$linkField",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$metadata",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getLinkField",207],"(",")",";",["T_WHITESPACE","\n\n        ",207],["T_VARIABLE","$select",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$connection",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","select",209],"(",")",["T_OBJECT_OPERATOR","->",209],["T_STRING","from",209],"(",["T_WHITESPACE","\n            ",209],"[",["T_CONSTANT_ENCAPSED_STRING","'i'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_getDefaultFinalPriceTable",210],"(",")","]",",",["T_WHITESPACE","\n            ",210],"[","]",["T_WHITESPACE","\n        ",211],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","join",212],"(",["T_WHITESPACE","\n            ",212],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getTable",213],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",213],")","]",",",["T_WHITESPACE","\n            ",213],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = i.entity_id'",214],",",["T_WHITESPACE","\n            ",214],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",215],"]",["T_WHITESPACE","\n        ",215],")",["T_OBJECT_OPERATOR","->",216],["T_STRING","join",216],"(",["T_WHITESPACE","\n            ",216],"[",["T_CONSTANT_ENCAPSED_STRING","'l'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getTable",217],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_super_link'",217],")","]",",",["T_WHITESPACE","\n            ",217],["T_CONSTANT_ENCAPSED_STRING","'l.parent_id = e.'",218],["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_VARIABLE","$linkField",218],",",["T_WHITESPACE","\n            ",218],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",219],"]",["T_WHITESPACE","\n        ",219],")",["T_OBJECT_OPERATOR","->",220],["T_STRING","columns",220],"(",["T_WHITESPACE","\n            ",220],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",221],",",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'website_id'",221],"]",",",["T_WHITESPACE","\n            ",221],["T_CONSTANT_ENCAPSED_STRING","'i'",222],["T_WHITESPACE","\n        ",222],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","join",223],"(",["T_WHITESPACE","\n            ",223],"[",["T_CONSTANT_ENCAPSED_STRING","'le'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getTable",224],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",224],")","]",",",["T_WHITESPACE","\n            ",224],["T_CONSTANT_ENCAPSED_STRING","'le.entity_id = l.product_id'",225],",",["T_WHITESPACE","\n            ",225],"[","]",["T_WHITESPACE","\n        ",226],")",["T_OBJECT_OPERATOR","->",227],["T_STRING","where",227],"(",["T_WHITESPACE","\n            ",227],["T_CONSTANT_ENCAPSED_STRING","'le.required_options=0'",228],["T_WHITESPACE","\n        ",228],")",["T_OBJECT_OPERATOR","->",229],["T_STRING","joinLeft",229],"(",["T_WHITESPACE","\n            ",229],"[",["T_CONSTANT_ENCAPSED_STRING","'status_global_attr'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$statusAttribute",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getBackendTable",230],"(",")","]",",",["T_WHITESPACE","\n            ",230],"\"",["T_ENCAPSED_AND_WHITESPACE","status_global_attr.",231],["T_CURLY_OPEN","{",231],["T_VARIABLE","$linkField",231],"}",["T_ENCAPSED_AND_WHITESPACE"," = le.",231],["T_CURLY_OPEN","{",231],["T_VARIABLE","$linkField",231],"}","\"",["T_WHITESPACE","\n            ",231],".",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","' AND status_global_attr.attribute_id  = '",232],["T_WHITESPACE"," ",232],".",["T_WHITESPACE"," ",232],["T_INT_CAST","(int)",232],["T_VARIABLE","$statusAttribute",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getAttributeId",232],"(",")",["T_WHITESPACE","\n            ",232],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","' AND status_global_attr.store_id  = '",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_STRING","Store",233],["T_DOUBLE_COLON","::",233],["T_STRING","DEFAULT_STORE_ID",233],",",["T_WHITESPACE","\n            ",233],"[","]",["T_WHITESPACE","\n        ",234],")",["T_OBJECT_OPERATOR","->",235],["T_STRING","joinLeft",235],"(",["T_WHITESPACE","\n            ",235],"[",["T_CONSTANT_ENCAPSED_STRING","'status_attr'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$statusAttribute",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getBackendTable",236],"(",")","]",",",["T_WHITESPACE","\n            ",236],"\"",["T_ENCAPSED_AND_WHITESPACE","status_attr.",237],["T_CURLY_OPEN","{",237],["T_VARIABLE","$linkField",237],"}",["T_ENCAPSED_AND_WHITESPACE"," = le.",237],["T_CURLY_OPEN","{",237],["T_VARIABLE","$linkField",237],"}","\"",["T_WHITESPACE","\n            ",237],".",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","' AND status_attr.attribute_id  = '",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_INT_CAST","(int)",238],["T_VARIABLE","$statusAttribute",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getAttributeId",238],"(",")",["T_WHITESPACE","\n            ",238],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","' AND status_attr.store_id  = '",239],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","storeResolver",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getCurrentStoreId",239],"(",")",",",["T_WHITESPACE","\n            ",239],"[","]",["T_WHITESPACE","\n        ",240],")",["T_OBJECT_OPERATOR","->",241],["T_STRING","where",241],"(",["T_WHITESPACE","\n            ",241],["T_CONSTANT_ENCAPSED_STRING","'IFNULL(status_attr.value, status_global_attr.value) = ?'",242],",",["T_WHITESPACE","\n            ",242],["T_STRING","Status",243],["T_DOUBLE_COLON","::",243],["T_STRING","STATUS_ENABLED",243],["T_WHITESPACE","\n        ",243],")",["T_OBJECT_OPERATOR","->",244],["T_STRING","group",244],"(",["T_WHITESPACE","\n            ",244],"[",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id'",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'i.customer_group_id'",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'i.website_id'",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'l.product_id'",245],"]",["T_WHITESPACE","\n        ",245],")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$priceColumn",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_addAttributeToSelect",247],"(",["T_VARIABLE","$select",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'price'",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'le.'",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$linkField",247],",",["T_WHITESPACE"," ",247],["T_LNUMBER","0",247],",",["T_WHITESPACE"," ",247],["T_STRING","null",247],",",["T_WHITESPACE"," ",247],["T_STRING","true",247],")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$tierPriceColumn",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$connection",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getIfNullSql",248],"(",["T_CONSTANT_ENCAPSED_STRING","'MIN(i.tier_price)'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'NULL'",248],")",";",["T_WHITESPACE","\n\n        ",248],["T_VARIABLE","$select",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","columns",250],"(",["T_WHITESPACE","\n            ",250],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$priceColumn",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$tierPriceColumn",251],"]",["T_WHITESPACE","\n        ",251],")",";",["T_WHITESPACE","\n\n        ",252],["T_VARIABLE","$query",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$select",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","insertFromSelect",254],"(",["T_VARIABLE","$coaTable",254],")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$connection",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","query",255],"(",["T_VARIABLE","$query",255],")",";",["T_WHITESPACE","\n\n        ",255],["T_VARIABLE","$select",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$connection",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","select",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","from",257],"(",["T_WHITESPACE","\n            ",257],"[",["T_VARIABLE","$coaTable",258],"]",",",["T_WHITESPACE","\n            ",258],"[",["T_WHITESPACE","\n                ",259],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",260],",",["T_WHITESPACE","\n                ",260],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",261],",",["T_WHITESPACE","\n                ",261],["T_CONSTANT_ENCAPSED_STRING","'website_id'",262],",",["T_WHITESPACE","\n                ",262],["T_CONSTANT_ENCAPSED_STRING","'MIN(price)'",263],",",["T_WHITESPACE","\n                ",263],["T_CONSTANT_ENCAPSED_STRING","'MAX(price)'",264],",",["T_WHITESPACE","\n                ",264],["T_CONSTANT_ENCAPSED_STRING","'MIN(tier_price)'",265],",",["T_WHITESPACE","\n            ",265],"]",["T_WHITESPACE","\n        ",266],")",["T_OBJECT_OPERATOR","->",267],["T_STRING","group",267],"(",["T_WHITESPACE","\n            ",267],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",268],",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",268],",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'website_id'",268],"]",["T_WHITESPACE","\n        ",268],")",";",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$query",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$select",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","insertFromSelect",271],"(",["T_VARIABLE","$copTable",271],")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$connection",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","query",272],"(",["T_VARIABLE","$query",272],")",";",["T_WHITESPACE","\n\n        ",272],["T_VARIABLE","$table",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],"[",["T_CONSTANT_ENCAPSED_STRING","'i'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_getDefaultFinalPriceTable",274],"(",")","]",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$select",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$connection",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","select",275],"(",")",["T_OBJECT_OPERATOR","->",275],["T_STRING","join",275],"(",["T_WHITESPACE","\n            ",275],"[",["T_CONSTANT_ENCAPSED_STRING","'io'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$copTable",276],"]",",",["T_WHITESPACE","\n            ",276],["T_CONSTANT_ENCAPSED_STRING","'i.entity_id = io.entity_id AND i.customer_group_id = io.customer_group_id'",277],["T_WHITESPACE"," ",277],".",["T_WHITESPACE","\n            ",277],["T_CONSTANT_ENCAPSED_STRING","' AND i.website_id = io.website_id'",278],",",["T_WHITESPACE","\n            ",278],"[","]",["T_WHITESPACE","\n        ",279],")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$select",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","columns",281],"(",["T_WHITESPACE","\n            ",281],"[",["T_WHITESPACE","\n                ",282],["T_CONSTANT_ENCAPSED_STRING","'min_price'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_NEW","new",283],["T_WHITESPACE"," ",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Zend_Db_Expr",283],"(",["T_CONSTANT_ENCAPSED_STRING","'i.min_price - i.orig_price + io.min_price'",283],")",",",["T_WHITESPACE","\n                ",283],["T_CONSTANT_ENCAPSED_STRING","'max_price'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_NEW","new",284],["T_WHITESPACE"," ",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Zend_Db_Expr",284],"(",["T_CONSTANT_ENCAPSED_STRING","'i.max_price - i.orig_price + io.max_price'",284],")",",",["T_WHITESPACE","\n                ",284],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'io.tier_price'",285],",",["T_WHITESPACE","\n            ",285],"]",["T_WHITESPACE","\n        ",286],")",";",["T_WHITESPACE","\n\n        ",287],["T_VARIABLE","$query",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$select",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","crossUpdateFromSelect",289],"(",["T_VARIABLE","$table",289],")",";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$connection",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","query",290],"(",["T_VARIABLE","$query",290],")",";",["T_WHITESPACE","\n\n        ",290],["T_VARIABLE","$connection",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","delete",292],"(",["T_VARIABLE","$coaTable",292],")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$connection",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","delete",293],"(",["T_VARIABLE","$copTable",293],")",";",["T_WHITESPACE","\n\n        ",293],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n",296],"}",["T_WHITESPACE","\n",297]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigurableProduct",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Helper",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Class Data\n * Helper class for getting options\n *\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Data",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Catalog Image Helper\n     *\n     * @var \\Magento\\Catalog\\Helper\\Image\n     *\/",18],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$imageHelper",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Helper\\Image $imageHelper\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","__construct",28],"(",["T_NS_SEPARATOR","\\",28],["T_STRING","Magento",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Catalog",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Helper",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Image",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$imageHelper",28],")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","imageHelper",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$imageHelper",30],";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Retrieve collection of gallery images\n     *\n     * @param \\Magento\\Catalog\\Api\\Data\\ProductInterface $product\n     * @return \\Magento\\Catalog\\Model\\Product\\Image[]|null\n     *\/",33],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","getGalleryImages",39],"(",["T_NS_SEPARATOR","\\",39],["T_STRING","Magento",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Catalog",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Api",39],["T_NS_SEPARATOR","\\",39],["T_STRING","Data",39],["T_NS_SEPARATOR","\\",39],["T_STRING","ProductInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$product",39],")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$images",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$product",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getMediaGalleryImages",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_VARIABLE","$images",42],["T_WHITESPACE"," ",42],["T_INSTANCEOF","instanceof",42],["T_WHITESPACE"," ",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Magento",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Framework",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Data",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Collection",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n            ",42],["T_FOREACH","foreach",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$images",43],["T_WHITESPACE"," ",43],["T_AS","as",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$image",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n                ",43],["T_DOC_COMMENT","\/** @var $image \\Magento\\Catalog\\Model\\Product\\Image *\/",44],["T_WHITESPACE","\n                ",44],["T_VARIABLE","$image",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","setData",45],"(",["T_WHITESPACE","\n                    ",45],["T_CONSTANT_ENCAPSED_STRING","'small_image_url'",46],",",["T_WHITESPACE","\n                    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","imageHelper",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","init",47],"(",["T_VARIABLE","$product",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'product_page_image_small'",47],")",["T_WHITESPACE","\n                        ",47],["T_OBJECT_OPERATOR","->",48],["T_STRING","setImageFile",48],"(",["T_VARIABLE","$image",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getFile",48],"(",")",")",["T_WHITESPACE","\n                        ",48],["T_OBJECT_OPERATOR","->",49],["T_STRING","getUrl",49],"(",")",["T_WHITESPACE","\n                ",49],")",";",["T_WHITESPACE","\n                ",50],["T_VARIABLE","$image",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","setData",51],"(",["T_WHITESPACE","\n                    ",51],["T_CONSTANT_ENCAPSED_STRING","'medium_image_url'",52],",",["T_WHITESPACE","\n                    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","imageHelper",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","init",53],"(",["T_VARIABLE","$product",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'product_page_image_medium_no_frame'",53],")",["T_WHITESPACE","\n                        ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","setImageFile",54],"(",["T_VARIABLE","$image",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getFile",54],"(",")",")",["T_WHITESPACE","\n                        ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","getUrl",55],"(",")",["T_WHITESPACE","\n                ",55],")",";",["T_WHITESPACE","\n                ",56],["T_VARIABLE","$image",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","setData",57],"(",["T_WHITESPACE","\n                    ",57],["T_CONSTANT_ENCAPSED_STRING","'large_image_url'",58],",",["T_WHITESPACE","\n                    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","imageHelper",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","init",59],"(",["T_VARIABLE","$product",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'product_page_image_large_no_frame'",59],")",["T_WHITESPACE","\n                        ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","setImageFile",60],"(",["T_VARIABLE","$image",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getFile",60],"(",")",")",["T_WHITESPACE","\n                        ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","getUrl",61],"(",")",["T_WHITESPACE","\n                ",61],")",";",["T_WHITESPACE","\n            ",62],"}",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$images",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Get Options for Configurable Product Options\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $currentProduct\n     * @param array $allowedProducts\n     * @return array\n     *\/",69],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","getOptions",76],"(",["T_VARIABLE","$currentProduct",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$allowedProducts",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$options",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[","]",";",["T_WHITESPACE","\n        ",78],["T_FOREACH","foreach",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$allowedProducts",79],["T_WHITESPACE"," ",79],["T_AS","as",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$product",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$productId",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$product",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getId",80],"(",")",";",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$images",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getGalleryImages",81],"(",["T_VARIABLE","$product",81],")",";",["T_WHITESPACE","\n            ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$images",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$images",83],["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$image",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                    ",83],["T_VARIABLE","$options",84],"[",["T_CONSTANT_ENCAPSED_STRING","'images'",84],"]","[",["T_VARIABLE","$productId",84],"]","[","]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE","\n                        ",84],"[",["T_WHITESPACE","\n                            ",85],["T_CONSTANT_ENCAPSED_STRING","'thumb'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$image",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getData",86],"(",["T_CONSTANT_ENCAPSED_STRING","'small_image_url'",86],")",",",["T_WHITESPACE","\n                            ",86],["T_CONSTANT_ENCAPSED_STRING","'img'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$image",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getData",87],"(",["T_CONSTANT_ENCAPSED_STRING","'medium_image_url'",87],")",",",["T_WHITESPACE","\n                            ",87],["T_CONSTANT_ENCAPSED_STRING","'full'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$image",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getData",88],"(",["T_CONSTANT_ENCAPSED_STRING","'large_image_url'",88],")",",",["T_WHITESPACE","\n                            ",88],["T_CONSTANT_ENCAPSED_STRING","'caption'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$image",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getLabel",89],"(",")",",",["T_WHITESPACE","\n                            ",89],["T_CONSTANT_ENCAPSED_STRING","'position'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$image",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getPosition",90],"(",")",",",["T_WHITESPACE","\n                            ",90],["T_CONSTANT_ENCAPSED_STRING","'isMain'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$image",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getFile",91],"(",")",["T_WHITESPACE"," ",91],["T_IS_EQUAL","==",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$product",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getImage",91],"(",")",",",["T_WHITESPACE","\n                        ",91],"]",";",["T_WHITESPACE","\n                ",92],"}",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE","\n            ",94],["T_FOREACH","foreach",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getAllowAttributes",95],"(",["T_VARIABLE","$currentProduct",95],")",["T_WHITESPACE"," ",95],["T_AS","as",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$attribute",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$productAttribute",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$attribute",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getProductAttribute",96],"(",")",";",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$productAttributeId",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$productAttribute",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getId",97],"(",")",";",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$attributeValue",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$product",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getData",98],"(",["T_VARIABLE","$productAttribute",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getAttributeCode",98],"(",")",")",";",["T_WHITESPACE","\n\n                ",98],["T_VARIABLE","$options",100],"[",["T_VARIABLE","$productAttributeId",100],"]","[",["T_VARIABLE","$attributeValue",100],"]","[","]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$productId",100],";",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$options",101],"[",["T_CONSTANT_ENCAPSED_STRING","'index'",101],"]","[",["T_VARIABLE","$productId",101],"]","[",["T_VARIABLE","$productAttributeId",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$attributeValue",101],";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$options",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Get allowed attributes\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return array\n     *\/",107],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","getAllowAttributes",113],"(",["T_VARIABLE","$product",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$product",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getTypeInstance",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getConfigurableAttributes",115],"(",["T_VARIABLE","$product",115],")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n",116],"}",["T_WHITESPACE","\n",117]]
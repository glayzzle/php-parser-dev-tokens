[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigurableProduct",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Ui",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DataProvider",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Form",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Modifier",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Data",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ConfigurableProduct",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Type",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Configurable",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","ConfigurableType",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Api",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ProductRepositoryInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Locator",11],["T_NS_SEPARATOR","\\",11],["T_STRING","LocatorInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Catalog",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Model",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Product",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Exception",13],["T_NS_SEPARATOR","\\",13],["T_STRING","NoSuchEntityException",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CatalogInventory",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","StockRegistryInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ConfigurableProduct",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Product",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Type",15],["T_NS_SEPARATOR","\\",15],["T_STRING","VariationMatrix",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","UrlInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Locale",17],["T_NS_SEPARATOR","\\",17],["T_STRING","CurrencyInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Magento",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Framework",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Json",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Helper",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Data",18],["T_WHITESPACE"," ",18],["T_AS","as",18],["T_WHITESPACE"," ",18],["T_STRING","JsonHelper",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Magento",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Catalog",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Helper",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Image",19],["T_WHITESPACE"," ",19],["T_AS","as",19],["T_WHITESPACE"," ",19],["T_STRING","ImageHelper",19],";",["T_WHITESPACE","\n\n",19],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",21],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","AssociatedProducts",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * @var LocatorInterface\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$locator",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var ConfigurableType\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$configurableType",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var ProductRepositoryInterface\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$productRepository",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var StockRegistryInterface\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$stockRegistry",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$productMatrix",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[","]",";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$productAttributes",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[","]",";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$productIds",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[","]",";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * @var VariationMatrix\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$variationMatrix",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * @var UrlInterface\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$urlBuilder",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @var CurrencyInterface\n     *\/",71],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$localeCurrency",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * @var JsonHelper\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$jsonHelper",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @var ImageHelper\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$imageHelper",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @param LocatorInterface $locator\n     * @param UrlInterface $urlBuilder\n     * @param ConfigurableType $configurableType\n     * @param ProductRepositoryInterface $productRepository\n     * @param StockRegistryInterface $stockRegistry\n     * @param VariationMatrix $variationMatrix\n     * @param CurrencyInterface $localeCurrency\n     * @param JsonHelper $jsonHelper\n     * @param ImageHelper $imageHelper\n     *\/",86],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","__construct",97],"(",["T_WHITESPACE","\n        ",97],["T_STRING","LocatorInterface",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$locator",98],",",["T_WHITESPACE","\n        ",98],["T_STRING","UrlInterface",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$urlBuilder",99],",",["T_WHITESPACE","\n        ",99],["T_STRING","ConfigurableType",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$configurableType",100],",",["T_WHITESPACE","\n        ",100],["T_STRING","ProductRepositoryInterface",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$productRepository",101],",",["T_WHITESPACE","\n        ",101],["T_STRING","StockRegistryInterface",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$stockRegistry",102],",",["T_WHITESPACE","\n        ",102],["T_STRING","VariationMatrix",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$variationMatrix",103],",",["T_WHITESPACE","\n        ",103],["T_STRING","CurrencyInterface",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$localeCurrency",104],",",["T_WHITESPACE","\n        ",104],["T_STRING","JsonHelper",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$jsonHelper",105],",",["T_WHITESPACE","\n        ",105],["T_STRING","ImageHelper",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$imageHelper",106],["T_WHITESPACE","\n    ",106],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","locator",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$locator",108],";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","urlBuilder",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$urlBuilder",109],";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","configurableType",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$configurableType",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","productRepository",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$productRepository",111],";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","stockRegistry",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$stockRegistry",112],";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","variationMatrix",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$variationMatrix",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","localeCurrency",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$localeCurrency",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","jsonHelper",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$jsonHelper",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","imageHelper",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$imageHelper",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Get variations product matrix\n     *\n     * @return array\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","getProductMatrix",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","productMatrix",126],["T_WHITESPACE"," ",126],["T_IS_IDENTICAL","===",126],["T_WHITESPACE"," ",126],"[","]",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","prepareVariations",127],"(",")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","productMatrix",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Get product attributes\n     *\n     * @return array\n     *\/",132],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getProductAttributes",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","productAttributes",139],["T_WHITESPACE"," ",139],["T_IS_IDENTICAL","===",139],["T_WHITESPACE"," ",139],"[","]",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","prepareVariations",140],"(",")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","productAttributes",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Get ids of associated products\n     *\n     * @return array\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","getProductIds",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","productIds",152],["T_WHITESPACE"," ",152],["T_IS_IDENTICAL","===",152],["T_WHITESPACE"," ",152],"[","]",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","prepareVariations",153],"(",")",";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n        ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","productIds",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Get ids of product attributes\n     *\n     * @return array\n     *\/",158],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","getProductAttributesIds",163],"(",")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$result",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],"[","]",";",["T_WHITESPACE","\n\n        ",165],["T_FOREACH","foreach",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getProductAttributes",167],"(",")",["T_WHITESPACE"," ",167],["T_AS","as",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$attribute",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$result",168],"[","]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$attribute",168],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",168],"]",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n\n        ",169],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$result",171],";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Get codes of product attributes\n     *\n     * @return array\n     *\/",174],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","getProductAttributesCodes",179],"(",")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$result",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],"[","]",";",["T_WHITESPACE","\n\n        ",181],["T_FOREACH","foreach",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getProductAttributes",183],"(",")",["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$attribute",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$result",184],"[","]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$attribute",184],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",184],"]",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n\n        ",185],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$result",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Get full data of configurable product attributes\n     *\n     * @return array\n     *\/",190],["T_WHITESPACE","\n    ",194],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","getConfigurableAttributesData",195],"(",")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$result",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],"[","]",";",["T_WHITESPACE","\n\n        ",197],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getProductAttributes",199],"(",")",["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$attribute",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$result",200],"[",["T_VARIABLE","$attribute",200],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",200],"]","]",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],"[",["T_WHITESPACE","\n                ",200],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$attribute",201],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",201],"]",",",["T_WHITESPACE","\n                ",201],["T_CONSTANT_ENCAPSED_STRING","'code'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$attribute",202],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",202],"]",",",["T_WHITESPACE","\n                ",202],["T_CONSTANT_ENCAPSED_STRING","'label'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$attribute",203],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",203],"]",",",["T_WHITESPACE","\n                ",203],["T_CONSTANT_ENCAPSED_STRING","'position'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$attribute",204],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",204],"]",",",["T_WHITESPACE","\n            ",204],"]",";",["T_WHITESPACE","\n\n            ",205],["T_FOREACH","foreach",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$attribute",207],"[",["T_CONSTANT_ENCAPSED_STRING","'chosen'",207],"]",["T_WHITESPACE"," ",207],["T_AS","as",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$chosenOption",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$result",208],"[",["T_VARIABLE","$attribute",208],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",208],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'values'",208],"]","[",["T_VARIABLE","$chosenOption",208],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",208],"]","]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],"[",["T_WHITESPACE","\n                    ",208],["T_CONSTANT_ENCAPSED_STRING","'include'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_LNUMBER","1",209],",",["T_WHITESPACE","\n                    ",209],["T_CONSTANT_ENCAPSED_STRING","'value_index'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$chosenOption",210],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",210],"]",",",["T_WHITESPACE","\n                ",210],"]",";",["T_WHITESPACE","\n            ",211],"}",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n\n        ",213],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$result",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Prepare variations\n     *\n     * @return void\n     * @throws \\Zend_Currency_Exception\n     *\/",218],["T_WHITESPACE","\n    ",223],["T_PROTECTED","protected",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","prepareVariations",224],"(",")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$variations",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getVariations",226],"(",")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$productMatrix",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],"[","]",";",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$attributes",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],"[","]",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$productIds",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],"[","]",";",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$variations",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$usedProductAttributes",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getUsedAttributes",231],"(",")",";",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$productByUsedAttributes",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getAssociatedProducts",232],"(",")",";",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$currency",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","localeCurrency",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getCurrency",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","locator",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getBaseCurrencyCode",233],"(",")",")",";",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$configurableAttributes",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getAttributes",234],"(",")",";",["T_WHITESPACE","\n            ",234],["T_FOREACH","foreach",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$variations",235],["T_WHITESPACE"," ",235],["T_AS","as",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$variation",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n                ",235],["T_VARIABLE","$attributeValues",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],"[","]",";",["T_WHITESPACE","\n                ",236],["T_FOREACH","foreach",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$usedProductAttributes",237],["T_WHITESPACE"," ",237],["T_AS","as",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$attribute",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                    ",237],["T_VARIABLE","$attributeValues",238],"[",["T_VARIABLE","$attribute",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getAttributeCode",238],"(",")","]",["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$variation",238],"[",["T_VARIABLE","$attribute",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getId",238],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",238],"]",";",["T_WHITESPACE","\n                ",238],"}",["T_WHITESPACE","\n                ",239],["T_VARIABLE","$key",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING","implode",240],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$attributeValues",240],")",";",["T_WHITESPACE","\n                ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_ISSET","isset",241],"(",["T_VARIABLE","$productByUsedAttributes",241],"[",["T_VARIABLE","$key",241],"]",")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                    ",241],["T_VARIABLE","$product",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$productByUsedAttributes",242],"[",["T_VARIABLE","$key",242],"]",";",["T_WHITESPACE","\n                    ",242],["T_VARIABLE","$price",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$product",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getPrice",243],"(",")",";",["T_WHITESPACE","\n                    ",243],["T_VARIABLE","$variationOptions",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],"[","]",";",["T_WHITESPACE","\n                    ",244],["T_FOREACH","foreach",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$usedProductAttributes",245],["T_WHITESPACE"," ",245],["T_AS","as",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$attribute",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                        ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(","!",["T_ISSET","isset",246],"(",["T_VARIABLE","$attributes",246],"[",["T_VARIABLE","$attribute",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getAttributeId",246],"(",")","]",")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                            ",246],["T_VARIABLE","$attributes",247],"[",["T_VARIABLE","$attribute",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getAttributeId",247],"(",")","]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],"[",["T_WHITESPACE","\n                                ",247],["T_CONSTANT_ENCAPSED_STRING","'code'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$attribute",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getAttributeCode",248],"(",")",",",["T_WHITESPACE","\n                                ",248],["T_CONSTANT_ENCAPSED_STRING","'label'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$attribute",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getStoreLabel",249],"(",")",",",["T_WHITESPACE","\n                                ",249],["T_CONSTANT_ENCAPSED_STRING","'id'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$attribute",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getAttributeId",250],"(",")",",",["T_WHITESPACE","\n                                ",250],["T_CONSTANT_ENCAPSED_STRING","'position'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$configurableAttributes",251],"[",["T_VARIABLE","$attribute",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getAttributeId",251],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'position'",251],"]",",",["T_WHITESPACE","\n                                ",251],["T_CONSTANT_ENCAPSED_STRING","'chosen'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],"[","]",",",["T_WHITESPACE","\n                            ",252],"]",";",["T_WHITESPACE","\n                            ",253],["T_FOREACH","foreach",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$attribute",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getOptions",254],"(",")",["T_WHITESPACE"," ",254],["T_AS","as",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$option",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                                ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(","!",["T_EMPTY","empty",255],"(",["T_VARIABLE","$option",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getValue",255],"(",")",")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                                    ",255],["T_VARIABLE","$attributes",256],"[",["T_VARIABLE","$attribute",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getAttributeId",256],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'options'",256],"]","[",["T_VARIABLE","$option",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getValue",256],"(",")","]",["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],"[",["T_WHITESPACE","\n                                        ",256],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$attribute",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getAttributeCode",257],"(",")",",",["T_WHITESPACE","\n                                        ",257],["T_CONSTANT_ENCAPSED_STRING","'attribute_label'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$attribute",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getStoreLabel",258],"(",["T_LNUMBER","0",258],")",",",["T_WHITESPACE","\n                                        ",258],["T_CONSTANT_ENCAPSED_STRING","'id'",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$option",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getValue",259],"(",")",",",["T_WHITESPACE","\n                                        ",259],["T_CONSTANT_ENCAPSED_STRING","'label'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$option",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getLabel",260],"(",")",",",["T_WHITESPACE","\n                                        ",260],["T_CONSTANT_ENCAPSED_STRING","'value'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$option",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getValue",261],"(",")",",",["T_WHITESPACE","\n                                    ",261],"]",";",["T_WHITESPACE","\n                                ",262],"}",["T_WHITESPACE","\n                            ",263],"}",["T_WHITESPACE","\n                        ",264],"}",["T_WHITESPACE","\n                        ",265],["T_VARIABLE","$optionId",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$variation",266],"[",["T_VARIABLE","$attribute",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getId",266],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",266],"]",";",["T_WHITESPACE","\n                        ",266],["T_VARIABLE","$variationOption",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],"[",["T_WHITESPACE","\n                            ",267],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$attribute",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getAttributeCode",268],"(",")",",",["T_WHITESPACE","\n                            ",268],["T_CONSTANT_ENCAPSED_STRING","'attribute_label'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$attribute",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getStoreLabel",269],"(",["T_LNUMBER","0",269],")",",",["T_WHITESPACE","\n                            ",269],["T_CONSTANT_ENCAPSED_STRING","'id'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$optionId",270],",",["T_WHITESPACE","\n                            ",270],["T_CONSTANT_ENCAPSED_STRING","'label'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$variation",271],"[",["T_VARIABLE","$attribute",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getId",271],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'label'",271],"]",",",["T_WHITESPACE","\n                            ",271],["T_CONSTANT_ENCAPSED_STRING","'value'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$optionId",272],",",["T_WHITESPACE","\n                        ",272],"]",";",["T_WHITESPACE","\n                        ",273],["T_VARIABLE","$variationOptions",274],"[","]",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$variationOption",274],";",["T_WHITESPACE","\n                        ",274],["T_VARIABLE","$attributes",275],"[",["T_VARIABLE","$attribute",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getAttributeId",275],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'chosen'",275],"]","[",["T_VARIABLE","$optionId",275],"]",["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$variationOption",275],";",["T_WHITESPACE","\n                    ",275],"}",["T_WHITESPACE","\n\n                    ",276],["T_VARIABLE","$productMatrix",278],"[","]",["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],"[",["T_WHITESPACE","\n                        ",278],["T_CONSTANT_ENCAPSED_STRING","'id'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$product",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getId",279],"(",")",",",["T_WHITESPACE","\n                        ",279],["T_CONSTANT_ENCAPSED_STRING","'product_link'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"'",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","urlBuilder",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getUrl",280],"(",["T_WHITESPACE","\n                            ",280],["T_CONSTANT_ENCAPSED_STRING","'catalog\/product\/edit'",281],",",["T_WHITESPACE","\n                            ",281],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$product",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getId",282],"(",")","]",["T_WHITESPACE","\n                        ",282],")",["T_WHITESPACE"," ",283],".",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'\" target=\"_blank\">'",283],["T_WHITESPACE"," ",283],".",["T_WHITESPACE"," ",283],["T_VARIABLE","$product",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getName",283],"(",")",["T_WHITESPACE"," ",283],".",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'<\/a>'",283],",",["T_WHITESPACE","\n                        ",283],["T_CONSTANT_ENCAPSED_STRING","'sku'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$product",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getSku",284],"(",")",",",["T_WHITESPACE","\n                        ",284],["T_CONSTANT_ENCAPSED_STRING","'name'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$product",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getName",285],"(",")",",",["T_WHITESPACE","\n                        ",285],["T_CONSTANT_ENCAPSED_STRING","'qty'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getProductStockQty",286],"(",["T_VARIABLE","$product",286],")",",",["T_WHITESPACE","\n                        ",286],["T_CONSTANT_ENCAPSED_STRING","'price'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$price",287],",",["T_WHITESPACE","\n                        ",287],["T_CONSTANT_ENCAPSED_STRING","'price_string'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$currency",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","toCurrency",288],"(",["T_STRING","sprintf",288],"(",["T_CONSTANT_ENCAPSED_STRING","\"%f\"",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$price",288],")",")",",",["T_WHITESPACE","\n                        ",288],["T_CONSTANT_ENCAPSED_STRING","'price_currency'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","locator",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getStore",289],"(",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getBaseCurrency",289],"(",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getCurrencySymbol",289],"(",")",",",["T_WHITESPACE","\n                        ",289],["T_CONSTANT_ENCAPSED_STRING","'configurable_attribute'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getJsonConfigurableAttributes",290],"(",["T_VARIABLE","$variationOptions",290],")",",",["T_WHITESPACE","\n                        ",290],["T_CONSTANT_ENCAPSED_STRING","'weight'",291],["T_WHITESPACE"," ",291],["T_DOUBLE_ARROW","=>",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$product",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getWeight",291],"(",")",",",["T_WHITESPACE","\n                        ",291],["T_CONSTANT_ENCAPSED_STRING","'status'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$product",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getStatus",292],"(",")",",",["T_WHITESPACE","\n                        ",292],["T_CONSTANT_ENCAPSED_STRING","'variationKey'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getVariationKey",293],"(",["T_VARIABLE","$variationOptions",293],")",",",["T_WHITESPACE","\n                        ",293],["T_CONSTANT_ENCAPSED_STRING","'canEdit'",294],["T_WHITESPACE"," ",294],["T_DOUBLE_ARROW","=>",294],["T_WHITESPACE"," ",294],["T_LNUMBER","0",294],",",["T_WHITESPACE","\n                        ",294],["T_CONSTANT_ENCAPSED_STRING","'newProduct'",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_LNUMBER","0",295],",",["T_WHITESPACE","\n                        ",295],["T_CONSTANT_ENCAPSED_STRING","'attributes'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getTextAttributes",296],"(",["T_VARIABLE","$variationOptions",296],")",",",["T_WHITESPACE","\n                        ",296],["T_CONSTANT_ENCAPSED_STRING","'thumbnail_image'",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","imageHelper",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","init",297],"(",["T_VARIABLE","$product",297],",",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","'product_thumbnail_image'",297],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","getUrl",297],"(",")",",",["T_WHITESPACE","\n                    ",297],"]",";",["T_WHITESPACE","\n                    ",298],["T_VARIABLE","$productIds",299],"[","]",["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$product",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getId",299],"(",")",";",["T_WHITESPACE","\n                ",299],"}",["T_WHITESPACE","\n            ",300],"}",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n\n        ",302],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","productMatrix",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$productMatrix",304],";",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","productIds",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$productIds",305],";",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","productAttributes",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","array_values",306],"(",["T_VARIABLE","$attributes",306],")",";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n\n    ",307],["T_DOC_COMMENT","\/**\n     * Get JSON string that contains attribute code and value\n     *\n     * @param array $options\n     * @return string\n     *\/",309],["T_WHITESPACE","\n    ",314],["T_PROTECTED","protected",315],["T_WHITESPACE"," ",315],["T_FUNCTION","function",315],["T_WHITESPACE"," ",315],["T_STRING","getJsonConfigurableAttributes",315],"(",["T_ARRAY","array",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$options",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],"[","]",")",["T_WHITESPACE","\n    ",315],"{",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$result",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],"[","]",";",["T_WHITESPACE","\n\n        ",317],["T_FOREACH","foreach",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$options",319],["T_WHITESPACE"," ",319],["T_AS","as",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$option",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_VARIABLE","$result",320],"[",["T_VARIABLE","$option",320],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",320],"]","]",["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$option",320],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",320],"]",";",["T_WHITESPACE","\n        ",320],"}",["T_WHITESPACE","\n\n        ",321],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","jsonHelper",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","jsonEncode",323],"(",["T_VARIABLE","$result",323],")",";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_DOC_COMMENT","\/**\n     * Prepares text list of used attributes\n     *\n     * @param array $options\n     * @return string\n     *\/",326],["T_WHITESPACE","\n    ",331],["T_PROTECTED","protected",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","getTextAttributes",332],"(",["T_ARRAY","array",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$options",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],"[","]",")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$text",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","''",334],";",["T_WHITESPACE","\n        ",334],["T_FOREACH","foreach",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$options",335],["T_WHITESPACE"," ",335],["T_AS","as",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$option",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n            ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$text",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n                ",336],["T_VARIABLE","$text",337],["T_WHITESPACE"," ",337],["T_CONCAT_EQUAL",".=",337],["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","', '",337],";",["T_WHITESPACE","\n            ",337],"}",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$text",339],["T_WHITESPACE"," ",339],["T_CONCAT_EQUAL",".=",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$option",339],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_label'",339],"]",["T_WHITESPACE"," ",339],".",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","': '",339],["T_WHITESPACE"," ",339],".",["T_WHITESPACE"," ",339],["T_VARIABLE","$option",339],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",339],"]",";",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE","\n\n        ",340],["T_RETURN","return",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$text",342],";",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE","\n\n    ",343],["T_DOC_COMMENT","\/**\n     * Get variation key\n     *\n     * @param array $options\n     * @return string\n     *\/",345],["T_WHITESPACE","\n    ",350],["T_PROTECTED","protected",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","getVariationKey",351],"(",["T_ARRAY","array",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$options",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],"[","]",")",["T_WHITESPACE","\n    ",351],"{",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$result",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],"[","]",";",["T_WHITESPACE","\n\n        ",353],["T_FOREACH","foreach",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$options",355],["T_WHITESPACE"," ",355],["T_AS","as",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$option",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$result",356],"[","]",["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$option",356],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",356],"]",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n\n        ",357],["T_STRING","asort",359],"(",["T_VARIABLE","$result",359],")",";",["T_WHITESPACE","\n\n        ",359],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_STRING","implode",361],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$result",361],")",";",["T_WHITESPACE","\n\n    ",361],"}",["T_WHITESPACE","\n\n    ",363],["T_DOC_COMMENT","\/**\n     * Retrieve actual list of associated products, array key is obtained from varying attributes values\n     *\n     * @return Product[]\n     *\/",365],["T_WHITESPACE","\n    ",369],["T_PROTECTED","protected",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","getAssociatedProducts",370],"(",")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$productByUsedAttributes",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],"[","]",";",["T_WHITESPACE","\n        ",372],["T_FOREACH","foreach",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_getAssociatedProducts",373],"(",")",["T_WHITESPACE"," ",373],["T_AS","as",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$product",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_VARIABLE","$keys",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],"[","]",";",["T_WHITESPACE","\n            ",374],["T_FOREACH","foreach",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getUsedAttributes",375],"(",")",["T_WHITESPACE"," ",375],["T_AS","as",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$attribute",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n                ",375],["T_DOC_COMMENT","\/** @var $attribute \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute *\/",376],["T_WHITESPACE","\n                ",376],["T_VARIABLE","$keys",377],"[","]",["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$product",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getData",377],"(",["T_VARIABLE","$attribute",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getAttributeCode",377],"(",")",")",";",["T_WHITESPACE","\n            ",377],"}",["T_WHITESPACE","\n            ",378],["T_VARIABLE","$productByUsedAttributes",379],"[",["T_STRING","implode",379],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$keys",379],")","]",["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$product",379],";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n        ",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$productByUsedAttributes",381],";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * Retrieve actual list of associated products (i.e. if product contains variations matrix form data\n     * - previously saved in database relations are not considered)\n     *\n     * @return Product[]\n     *\/",384],["T_WHITESPACE","\n    ",389],["T_PROTECTED","protected",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","_getAssociatedProducts",390],"(",")",["T_WHITESPACE","\n    ",390],"{",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$product",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","locator",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getProduct",392],"(",")",";",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$ids",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","locator",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getProduct",393],"(",")",["T_OBJECT_OPERATOR","->",393],["T_STRING","getAssociatedProductIds",393],"(",")",";",["T_WHITESPACE","\n        ",393],["T_IF","if",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$ids",394],["T_WHITESPACE"," ",394],["T_IS_IDENTICAL","===",394],["T_WHITESPACE"," ",394],["T_STRING","null",394],")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n            ",394],["T_COMMENT","\/\/ form data overrides any relations stored in database\n",395],["T_WHITESPACE","            ",396],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","configurableType",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getUsedProducts",396],"(",["T_VARIABLE","$product",396],")",";",["T_WHITESPACE","\n        ",396],"}",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$products",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],"[","]",";",["T_WHITESPACE","\n        ",398],["T_FOREACH","foreach",399],["T_WHITESPACE"," ",399],"(",["T_VARIABLE","$ids",399],["T_WHITESPACE"," ",399],["T_AS","as",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$productId",399],")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n            ",399],["T_TRY","try",400],["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n                ",400],["T_VARIABLE","$products",401],"[","]",["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","productRepository",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getById",401],"(",["T_VARIABLE","$productId",401],")",";",["T_WHITESPACE","\n            ",401],"}",["T_WHITESPACE"," ",402],["T_CATCH","catch",402],["T_WHITESPACE"," ",402],"(",["T_STRING","NoSuchEntityException",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$e",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n                ",402],["T_CONTINUE","continue",403],";",["T_WHITESPACE","\n            ",403],"}",["T_WHITESPACE","\n        ",404],"}",["T_WHITESPACE","\n        ",405],["T_RETURN","return",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$products",406],";",["T_WHITESPACE","\n    ",406],"}",["T_WHITESPACE","\n\n    ",407],["T_DOC_COMMENT","\/**\n     * Get used product attributes\n     *\n     * @return array\n     *\/",409],["T_WHITESPACE","\n    ",413],["T_PROTECTED","protected",414],["T_WHITESPACE"," ",414],["T_FUNCTION","function",414],["T_WHITESPACE"," ",414],["T_STRING","getUsedAttributes",414],"(",")",["T_WHITESPACE","\n    ",414],"{",["T_WHITESPACE","\n        ",415],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","configurableType",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getUsedProductAttributes",416],"(",["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","locator",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getProduct",416],"(",")",")",";",["T_WHITESPACE","\n    ",416],"}",["T_WHITESPACE","\n\n    ",417],["T_DOC_COMMENT","\/**\n     * Retrieve qty of product\n     *\n     * @param Product $product\n     * @return float\n     *\/",419],["T_WHITESPACE","\n    ",424],["T_PROTECTED","protected",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","getProductStockQty",425],"(",["T_STRING","Product",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$product",425],")",["T_WHITESPACE","\n    ",425],"{",["T_WHITESPACE","\n        ",426],["T_RETURN","return",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","stockRegistry",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getStockItem",427],"(",["T_VARIABLE","$product",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getId",427],"(",")",",",["T_WHITESPACE"," ",427],["T_VARIABLE","$product",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getStore",427],"(",")",["T_OBJECT_OPERATOR","->",427],["T_STRING","getWebsiteId",427],"(",")",")",["T_OBJECT_OPERATOR","->",427],["T_STRING","getQty",427],"(",")",";",["T_WHITESPACE","\n    ",427],"}",["T_WHITESPACE","\n\n    ",428],["T_DOC_COMMENT","\/**\n     * Retrieve all possible attribute values combinations\n     *\n     * @return array\n     *\/",430],["T_WHITESPACE","\n    ",434],["T_PROTECTED","protected",435],["T_WHITESPACE"," ",435],["T_FUNCTION","function",435],["T_WHITESPACE"," ",435],["T_STRING","getVariations",435],"(",")",["T_WHITESPACE","\n    ",435],"{",["T_WHITESPACE","\n        ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","variationMatrix",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getVariations",437],"(",["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getAttributes",437],"(",")",")",";",["T_WHITESPACE","\n    ",437],"}",["T_WHITESPACE","\n\n    ",438],["T_DOC_COMMENT","\/**\n     * Retrieve attributes data\n     *\n     * @return array\n     *\/",440],["T_WHITESPACE","\n    ",444],["T_PROTECTED","protected",445],["T_WHITESPACE"," ",445],["T_FUNCTION","function",445],["T_WHITESPACE"," ",445],["T_STRING","getAttributes",445],"(",")",["T_WHITESPACE","\n    ",445],"{",["T_WHITESPACE","\n        ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_ARRAY_CAST","(array)",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","configurableType",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getConfigurableAttributesAsArray",447],"(",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","locator",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getProduct",447],"(",")",")",";",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n",448],"}",["T_WHITESPACE","\n",449]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Block",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Category",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Model",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Customer",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Session",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ScopeResolverInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Pricing",12],["T_NS_SEPARATOR","\\",12],["T_STRING","PriceCurrencyInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Framework",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Pricing",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Render",13],["T_NS_SEPARATOR","\\",13],["T_STRING","PriceBox",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Framework",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Stdlib",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DateTime",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TimezoneInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Magento",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Tax",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Model",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Calculation",15],["T_WHITESPACE"," ",15],["T_AS","as",15],["T_WHITESPACE"," ",15],["T_STRING","TaxCalculation",15],";",["T_WHITESPACE","\n\n",15],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","PriceBoxTags",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var TimezoneInterface\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$dateTime",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Model\\Session\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$customerSession",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var PriceCurrencyInterface\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$priceCurrency",32],";",["T_WHITESPACE","\n    \n    ",32],["T_DOC_COMMENT","\/**\n     * @var ScopeResolverInterface\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PRIVATE","private",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$scopeResolver",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var TaxCalculation\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$taxCalculation",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * PriceBoxTags constructor.\n     * @param PriceCurrencyInterface $priceCurrency\n     * @param TimezoneInterface $dateTime\n     * @param ScopeResolverInterface $scopeResolver\n     * @param Session $customerSession\n     *\/",44],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_WHITESPACE","\n        ",51],["T_STRING","PriceCurrencyInterface",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$priceCurrency",52],",",["T_WHITESPACE","\n        ",52],["T_STRING","TimezoneInterface",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$dateTime",53],",",["T_WHITESPACE","\n        ",53],["T_STRING","ScopeResolverInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$scopeResolver",54],",",["T_WHITESPACE","\n        ",54],["T_STRING","Session",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$customerSession",55],["T_WHITESPACE","\n    ",55],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","dateTime",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$dateTime",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","customerSession",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$customerSession",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","priceCurrency",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$priceCurrency",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","scopeResolver",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$scopeResolver",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @param PriceBox $subject\n     * @param string $result\n     * @return string\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","afterGetCacheKey",68],"(",["T_STRING","PriceBox",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$subject",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$result",68],")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_STRING","implode",70],"(",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'-'",71],",",["T_WHITESPACE","\n            ",71],"[",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$result",73],",",["T_WHITESPACE","\n                ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","priceCurrency",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getCurrencySymbol",74],"(",")",",",["T_WHITESPACE","\n                ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","dateTime",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","scopeDate",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","scopeResolver",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getScope",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getId",75],"(",")",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","format",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Ymd'",75],")",",",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","scopeResolver",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getScope",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getId",76],"(",")",",",["T_WHITESPACE","\n                ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","customerSession",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getCustomerGroupId",77],"(",")",",",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getTaxRateIds",78],"(",["T_VARIABLE","$subject",78],")",",",["T_WHITESPACE","\n            ",78],"]",["T_WHITESPACE","\n        ",79],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @param PriceBox $subject\n     * @return string\n     *\/",83],["T_WHITESPACE","\n    ",86],["T_PRIVATE","private",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getTaxRateIds",87],"(",["T_STRING","PriceBox",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$subject",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$rateIds",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[","]",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$customerSession",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","customerSession",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$billingAddress",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$customerSession",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getDefaultTaxBillingAddress",92],"(",")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$shippingAddress",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$customerSession",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getDefaultTaxShippingAddress",93],"(",")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$customerTaxClassId",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$customerSession",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getCustomerTaxClassId",94],"(",")",";",["T_WHITESPACE","\n\n        ",94],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_EMPTY","empty",96],"(",["T_VARIABLE","$billingAddress",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$billingAddress",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Magento",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Framework",97],["T_NS_SEPARATOR","\\",97],["T_STRING","DataObject",97],"(",["T_VARIABLE","$billingAddress",97],")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n        ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(","!",["T_EMPTY","empty",99],"(",["T_VARIABLE","$shippingAddress",99],")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$shippingAddress",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Magento",100],["T_NS_SEPARATOR","\\",100],["T_STRING","Framework",100],["T_NS_SEPARATOR","\\",100],["T_STRING","DataObject",100],"(",["T_VARIABLE","$shippingAddress",100],")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_EMPTY","empty",103],"(",["T_VARIABLE","$billingAddress",103],")",["T_WHITESPACE"," ",103],["T_BOOLEAN_OR","||",103],["T_WHITESPACE"," ",103],"!",["T_EMPTY","empty",103],"(",["T_VARIABLE","$shippingAddress",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$rateRequest",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getTaxCalculation",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","getRateRequest",104],"(",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$billingAddress",105],",",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$shippingAddress",106],",",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$customerTaxClassId",107],",",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","scopeResolver",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getScope",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","getId",108],"(",")",",",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","customerSession",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getCustomerId",109],"(",")",["T_WHITESPACE","\n            ",109],")",";",["T_WHITESPACE","\n\n            ",110],["T_VARIABLE","$rateRequest",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","setProductClassId",112],"(",["T_VARIABLE","$subject",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getSaleableItem",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getTaxClassId",112],"(",")",")",";",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$rateIds",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getTaxCalculation",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getResource",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getRateIds",113],"(",["T_VARIABLE","$rateRequest",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n\n        ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_STRING","implode",116],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$rateIds",116],")",";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Get the TaxCalculation model\n     *\n     * @return \\Magento\\Tax\\Model\\Calculation\n     *\n     * @deprecated\n     *\/",119],["T_WHITESPACE","\n    ",125],["T_PRIVATE","private",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getTaxCalculation",126],"(",")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","taxCalculation",128],["T_WHITESPACE"," ",128],["T_IS_IDENTICAL","===",128],["T_WHITESPACE"," ",128],["T_STRING","null",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","taxCalculation",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Magento",129],["T_NS_SEPARATOR","\\",129],["T_STRING","Framework",129],["T_NS_SEPARATOR","\\",129],["T_STRING","App",129],["T_NS_SEPARATOR","\\",129],["T_STRING","ObjectManager",129],["T_DOUBLE_COLON","::",129],["T_STRING","getInstance",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","get",129],"(",["T_STRING","TaxCalculation",129],["T_DOUBLE_COLON","::",129],["T_CLASS","class",129],")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","taxCalculation",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n",132],"}",["T_WHITESPACE","\n",133]]
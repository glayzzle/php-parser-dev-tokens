[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Block",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Helper",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ImageFactory",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","HelperFactory",8],";",["T_WHITESPACE","\n\n",8],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","ImageBuilder",10],["T_WHITESPACE","\n",10],"{",["T_WHITESPACE","\n    ",11],["T_DOC_COMMENT","\/**\n     * @var ImageFactory\n     *\/",12],["T_WHITESPACE","\n    ",14],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$imageFactory",15],";",["T_WHITESPACE","\n\n    ",15],["T_DOC_COMMENT","\/**\n     * @var HelperFactory\n     *\/",17],["T_WHITESPACE","\n    ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$helperFactory",20],";",["T_WHITESPACE","\n\n    ",20],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Product\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$product",25],";",["T_WHITESPACE","\n\n    ",25],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",27],["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$imageId",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$attributes",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],"[","]",";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @param HelperFactory $helperFactory\n     * @param ImageFactory $imageFactory\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","__construct",41],"(",["T_WHITESPACE","\n        ",41],["T_STRING","HelperFactory",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$helperFactory",42],",",["T_WHITESPACE","\n        ",42],["T_STRING","ImageFactory",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$imageFactory",43],["T_WHITESPACE","\n    ",43],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","helperFactory",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$helperFactory",45],";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","imageFactory",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$imageFactory",46],";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Set product\n     *\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @return $this\n     *\/",49],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","setProduct",55],"(",["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Catalog",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Model",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Product",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$product",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","product",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$product",57],";",["T_WHITESPACE","\n        ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Set image ID\n     *\n     * @param string $imageId\n     * @return $this\n     *\/",61],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","setImageId",67],"(",["T_VARIABLE","$imageId",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","imageId",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$imageId",69],";",["T_WHITESPACE","\n        ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Set custom attributes\n     *\n     * @param array $attributes\n     * @return $this\n     *\/",73],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","setAttributes",79],"(",["T_ARRAY","array",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$attributes",79],")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$attributes",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","attributes",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$attributes",82],";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Retrieve image custom attributes for HTML element\n     *\n     * @return string\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","getCustomAttributes",92],"(",")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$result",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],"[","]",";",["T_WHITESPACE","\n        ",94],["T_FOREACH","foreach",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","attributes",95],["T_WHITESPACE"," ",95],["T_AS","as",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$name",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$value",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$result",96],"[","]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$name",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'=\"'",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$value",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\"'",96],";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],"!",["T_EMPTY","empty",98],"(",["T_VARIABLE","$result",98],")",["T_WHITESPACE"," ",98],"?",["T_WHITESPACE"," ",98],["T_STRING","implode",98],"(",["T_CONSTANT_ENCAPSED_STRING","' '",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$result",98],")",["T_WHITESPACE"," ",98],":",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","''",98],";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Calculate image ratio\n     *\n     * @param \\Magento\\Catalog\\Helper\\Image $helper\n     * @return float|int\n     *\/",101],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getRatio",107],"(",["T_NS_SEPARATOR","\\",107],["T_STRING","Magento",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Catalog",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Helper",107],["T_NS_SEPARATOR","\\",107],["T_STRING","Image",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$helper",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$width",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$helper",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getWidth",109],"(",")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$height",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$helper",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getHeight",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$width",111],["T_WHITESPACE"," ",111],["T_BOOLEAN_AND","&&",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$height",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$height",112],["T_WHITESPACE"," ",112],"\/",["T_WHITESPACE"," ",112],["T_VARIABLE","$width",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n        ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_LNUMBER","1",114],";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Create image block\n     *\n     * @return \\Magento\\Catalog\\Block\\Product\\Image\n     *\/",117],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","create",122],"(",")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_DOC_COMMENT","\/** @var \\Magento\\Catalog\\Helper\\Image $helper *\/",124],["T_WHITESPACE","\n        ",124],["T_VARIABLE","$helper",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","helperFactory",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","create",125],"(",")",["T_WHITESPACE","\n            ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","init",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","product",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","imageId",126],")",";",["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$template",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$helper",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getFrame",128],"(",")",["T_WHITESPACE","\n            ",128],"?",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'Magento_Catalog::product\/image.phtml'",129],["T_WHITESPACE","\n            ",129],":",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'Magento_Catalog::product\/image_with_borders.phtml'",130],";",["T_WHITESPACE","\n\n        ",130],["T_VARIABLE","$imagesize",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$helper",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getResizedImageInfo",132],"(",")",";",["T_WHITESPACE","\n\n        ",132],["T_VARIABLE","$data",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],"[",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'data'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],"[",["T_WHITESPACE","\n                ",135],["T_CONSTANT_ENCAPSED_STRING","'template'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$template",136],",",["T_WHITESPACE","\n                ",136],["T_CONSTANT_ENCAPSED_STRING","'image_url'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$helper",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getUrl",137],"(",")",",",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'width'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$helper",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getWidth",138],"(",")",",",["T_WHITESPACE","\n                ",138],["T_CONSTANT_ENCAPSED_STRING","'height'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$helper",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getHeight",139],"(",")",",",["T_WHITESPACE","\n                ",139],["T_CONSTANT_ENCAPSED_STRING","'label'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$helper",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getLabel",140],"(",")",",",["T_WHITESPACE","\n                ",140],["T_CONSTANT_ENCAPSED_STRING","'ratio'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE","  ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getRatio",141],"(",["T_VARIABLE","$helper",141],")",",",["T_WHITESPACE","\n                ",141],["T_CONSTANT_ENCAPSED_STRING","'custom_attributes'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getCustomAttributes",142],"(",")",",",["T_WHITESPACE","\n                ",142],["T_CONSTANT_ENCAPSED_STRING","'resized_image_width'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],"!",["T_EMPTY","empty",143],"(",["T_VARIABLE","$imagesize",143],"[",["T_LNUMBER","0",143],"]",")",["T_WHITESPACE"," ",143],"?",["T_WHITESPACE"," ",143],["T_VARIABLE","$imagesize",143],"[",["T_LNUMBER","0",143],"]",["T_WHITESPACE"," ",143],":",["T_WHITESPACE"," ",143],["T_VARIABLE","$helper",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getWidth",143],"(",")",",",["T_WHITESPACE","\n                ",143],["T_CONSTANT_ENCAPSED_STRING","'resized_image_height'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],"!",["T_EMPTY","empty",144],"(",["T_VARIABLE","$imagesize",144],"[",["T_LNUMBER","1",144],"]",")",["T_WHITESPACE"," ",144],"?",["T_WHITESPACE"," ",144],["T_VARIABLE","$imagesize",144],"[",["T_LNUMBER","1",144],"]",["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_VARIABLE","$helper",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getHeight",144],"(",")",",",["T_WHITESPACE","\n            ",144],"]",",",["T_WHITESPACE","\n        ",145],"]",";",["T_WHITESPACE","\n\n        ",146],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","imageFactory",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","create",148],"(",["T_VARIABLE","$data",148],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n",149],"}",["T_WHITESPACE","\n",150]]
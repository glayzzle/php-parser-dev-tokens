[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Adminhtml",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Gallery",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Framework",9],["T_NS_SEPARATOR","\\",9],["T_STRING","App",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Filesystem",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DirectoryList",9],";",["T_WHITESPACE","\n\n",9],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Upload",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Backend",11],["T_NS_SEPARATOR","\\",11],["T_STRING","App",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Action",11],["T_WHITESPACE","\n",11],"{",["T_WHITESPACE","\n    ",12],["T_DOC_COMMENT","\/**\n     * Authorization level of a basic admin session\n     *\n     * @see _isAllowed()\n     *\/",13],["T_WHITESPACE","\n    ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","ADMIN_RESOURCE",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'Magento_Catalog::products'",18],";",["T_WHITESPACE","\n\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Controller\\Result\\RawFactory\n     *\/",20],["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$resultRawFactory",23],";",["T_WHITESPACE","\n\n    ",23],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Backend\\App\\Action\\Context $context\n     * @param \\Magento\\Framework\\Controller\\Result\\RawFactory $resultRawFactory\n     *\/",25],["T_WHITESPACE","\n    ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","__construct",29],"(",["T_WHITESPACE","\n        ",29],["T_NS_SEPARATOR","\\",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Backend",30],["T_NS_SEPARATOR","\\",30],["T_STRING","App",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Action",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Context",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$context",30],",",["T_WHITESPACE","\n        ",30],["T_NS_SEPARATOR","\\",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Framework",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Controller",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Result",31],["T_NS_SEPARATOR","\\",31],["T_STRING","RawFactory",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$resultRawFactory",31],["T_WHITESPACE","\n    ",31],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n        ",32],["T_STRING","parent",33],["T_DOUBLE_COLON","::",33],["T_STRING","__construct",33],"(",["T_VARIABLE","$context",33],")",";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","resultRawFactory",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$resultRawFactory",34],";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * @return \\Magento\\Framework\\Controller\\Result\\Raw\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","execute",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_TRY","try",42],["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$uploader",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_objectManager",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","create",43],"(",["T_WHITESPACE","\n                ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Magento",44],["T_NS_SEPARATOR","\\",44],["T_STRING","MediaStorage",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Model",44],["T_NS_SEPARATOR","\\",44],["T_STRING","File",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Uploader",44],["T_DOUBLE_COLON","::",44],["T_CLASS","class",44],",",["T_WHITESPACE","\n                ",44],"[",["T_CONSTANT_ENCAPSED_STRING","'fileId'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'image'",45],"]",["T_WHITESPACE","\n            ",45],")",";",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$uploader",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","setAllowedExtensions",47],"(","[",["T_CONSTANT_ENCAPSED_STRING","'jpg'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'gif'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'png'",47],"]",")",";",["T_WHITESPACE","\n            ",47],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Image\\Adapter\\AdapterInterface $imageAdapter *\/",48],["T_WHITESPACE","\n            ",48],["T_VARIABLE","$imageAdapter",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_objectManager",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_NS_SEPARATOR","\\",49],["T_STRING","Magento",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Framework",49],["T_NS_SEPARATOR","\\",49],["T_STRING","Image",49],["T_NS_SEPARATOR","\\",49],["T_STRING","AdapterFactory",49],["T_DOUBLE_COLON","::",49],["T_CLASS","class",49],")",["T_OBJECT_OPERATOR","->",49],["T_STRING","create",49],"(",")",";",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$uploader",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","addValidateCallback",50],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_image'",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$imageAdapter",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'validateUploadFile'",50],")",";",["T_WHITESPACE","\n            ",50],["T_VARIABLE","$uploader",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","setAllowRenameFiles",51],"(",["T_STRING","true",51],")",";",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$uploader",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","setFilesDispersion",52],"(",["T_STRING","true",52],")",";",["T_WHITESPACE","\n            ",52],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Filesystem\\Directory\\Read $mediaDirectory *\/",53],["T_WHITESPACE","\n            ",53],["T_VARIABLE","$mediaDirectory",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_objectManager",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Framework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Filesystem",54],["T_DOUBLE_COLON","::",54],["T_CLASS","class",54],")",["T_WHITESPACE","\n                ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","getDirectoryRead",55],"(",["T_STRING","DirectoryList",55],["T_DOUBLE_COLON","::",55],["T_STRING","MEDIA",55],")",";",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$config",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_objectManager",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","get",56],"(",["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Catalog",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Model",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Product",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Media",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Config",56],["T_DOUBLE_COLON","::",56],["T_CLASS","class",56],")",";",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$result",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$uploader",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","save",57],"(",["T_VARIABLE","$mediaDirectory",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getAbsolutePath",57],"(",["T_VARIABLE","$config",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getBaseTmpMediaPath",57],"(",")",")",")",";",["T_WHITESPACE","\n\n            ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_eventManager",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","dispatch",59],"(",["T_WHITESPACE","\n                ",59],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_gallery_upload_image_after'",60],",",["T_WHITESPACE","\n                ",60],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$result",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'action'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],"]",["T_WHITESPACE","\n            ",61],")",";",["T_WHITESPACE","\n\n            ",62],["T_UNSET","unset",64],"(",["T_VARIABLE","$result",64],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",64],"]",")",";",["T_WHITESPACE","\n            ",64],["T_UNSET","unset",65],"(",["T_VARIABLE","$result",65],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",65],"]",")",";",["T_WHITESPACE","\n\n            ",65],["T_VARIABLE","$result",67],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",67],"]",["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_objectManager",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","get",67],"(",["T_NS_SEPARATOR","\\",67],["T_STRING","Magento",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Catalog",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Model",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Product",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Media",67],["T_NS_SEPARATOR","\\",67],["T_STRING","Config",67],["T_DOUBLE_COLON","::",67],["T_CLASS","class",67],")",["T_WHITESPACE","\n                ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","getTmpMediaUrl",68],"(",["T_VARIABLE","$result",68],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",68],"]",")",";",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$result",69],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",69],"]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$result",69],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",69],"]",["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'.tmp'",69],";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE"," ",70],["T_CATCH","catch",70],["T_WHITESPACE"," ",70],"(",["T_NS_SEPARATOR","\\",70],["T_STRING","Exception",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$e",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$result",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$e",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getMessage",71],"(",")",",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'errorcode'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$e",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getCode",71],"(",")","]",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_DOC_COMMENT","\/** @var \\Magento\\Framework\\Controller\\Result\\Raw $response *\/",74],["T_WHITESPACE","\n        ",74],["T_VARIABLE","$response",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","resultRawFactory",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","create",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$response",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setHeader",76],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'text\/plain'",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$response",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setContents",77],"(",["T_STRING","json_encode",77],"(",["T_VARIABLE","$result",77],")",")",";",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$response",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n",79],"}",["T_WHITESPACE","\n",80]]
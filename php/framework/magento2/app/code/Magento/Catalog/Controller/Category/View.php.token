[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n *\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",6],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Category",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","CategoryRepositoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Catalog",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Model",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Layer",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Resolver",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],["T_NS_SEPARATOR","\\",11],["T_STRING","NoSuchEntityException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Framework",12],["T_NS_SEPARATOR","\\",12],["T_STRING","View",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Result",12],["T_NS_SEPARATOR","\\",12],["T_STRING","PageFactory",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","View",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","App",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Action",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Action",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$_coreRegistry",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","null",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Catalog session\n     *\n     * @var \\Magento\\Catalog\\Model\\Session\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_catalogSession",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Catalog design\n     *\n     * @var \\Magento\\Catalog\\Model\\Design\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_catalogDesign",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_storeManager",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogUrlRewrite\\Model\\CategoryUrlPathGenerator\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$categoryUrlPathGenerator",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\View\\Result\\PageFactory\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$resultPageFactory",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Controller\\Result\\ForwardFactory\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$resultForwardFactory",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Catalog Layer Resolver\n     *\n     * @var Resolver\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PRIVATE","private",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$layerResolver",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @var CategoryRepositoryInterface\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$categoryRepository",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Framework\\App\\Action\\Context $context\n     * @param \\Magento\\Catalog\\Model\\Design $catalogDesign\n     * @param \\Magento\\Catalog\\Model\\Session $catalogSession\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\CatalogUrlRewrite\\Model\\CategoryUrlPathGenerator $categoryUrlPathGenerator\n     * @param \\Magento\\Framework\\View\\Result\\PageFactory $resultPageFactory\n     * @param \\Magento\\Framework\\Controller\\Result\\ForwardFactory $resultForwardFactory\n     * @param Resolver $layerResolver\n     * @param CategoryRepositoryInterface $categoryRepository\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",72],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","__construct",87],"(",["T_WHITESPACE","\n        ",87],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","App",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Action",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Context",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$context",88],",",["T_WHITESPACE","\n        ",88],["T_NS_SEPARATOR","\\",89],["T_STRING","Magento",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Catalog",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Model",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Design",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$catalogDesign",89],",",["T_WHITESPACE","\n        ",89],["T_NS_SEPARATOR","\\",90],["T_STRING","Magento",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Catalog",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Model",90],["T_NS_SEPARATOR","\\",90],["T_STRING","Session",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$catalogSession",90],",",["T_WHITESPACE","\n        ",90],["T_NS_SEPARATOR","\\",91],["T_STRING","Magento",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Framework",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Registry",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$coreRegistry",91],",",["T_WHITESPACE","\n        ",91],["T_NS_SEPARATOR","\\",92],["T_STRING","Magento",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Store",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Model",92],["T_NS_SEPARATOR","\\",92],["T_STRING","StoreManagerInterface",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$storeManager",92],",",["T_WHITESPACE","\n        ",92],["T_NS_SEPARATOR","\\",93],["T_STRING","Magento",93],["T_NS_SEPARATOR","\\",93],["T_STRING","CatalogUrlRewrite",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Model",93],["T_NS_SEPARATOR","\\",93],["T_STRING","CategoryUrlPathGenerator",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$categoryUrlPathGenerator",93],",",["T_WHITESPACE","\n        ",93],["T_STRING","PageFactory",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$resultPageFactory",94],",",["T_WHITESPACE","\n        ",94],["T_NS_SEPARATOR","\\",95],["T_STRING","Magento",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Framework",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Controller",95],["T_NS_SEPARATOR","\\",95],["T_STRING","Result",95],["T_NS_SEPARATOR","\\",95],["T_STRING","ForwardFactory",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$resultForwardFactory",95],",",["T_WHITESPACE","\n        ",95],["T_STRING","Resolver",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$layerResolver",96],",",["T_WHITESPACE","\n        ",96],["T_STRING","CategoryRepositoryInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$categoryRepository",97],["T_WHITESPACE","\n    ",97],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n        ",98],["T_STRING","parent",99],["T_DOUBLE_COLON","::",99],["T_STRING","__construct",99],"(",["T_VARIABLE","$context",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_storeManager",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$storeManager",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_catalogDesign",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$catalogDesign",101],";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_catalogSession",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$catalogSession",102],";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_coreRegistry",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$coreRegistry",103],";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","categoryUrlPathGenerator",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$categoryUrlPathGenerator",104],";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","resultPageFactory",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$resultPageFactory",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","resultForwardFactory",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$resultForwardFactory",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","layerResolver",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$layerResolver",107],";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","categoryRepository",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$categoryRepository",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Initialize requested category object\n     *\n     * @return \\Magento\\Catalog\\Model\\Category\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","_initCategory",116],"(",")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$categoryId",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_INT_CAST","(int)",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getRequest",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getParam",118],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",118],",",["T_WHITESPACE"," ",118],["T_STRING","false",118],")",";",["T_WHITESPACE","\n        ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_VARIABLE","$categoryId",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_STRING","false",120],";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_TRY","try",123],["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$category",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","categoryRepository",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",["T_VARIABLE","$categoryId",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_storeManager",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getStore",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getId",124],"(",")",")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE"," ",125],["T_CATCH","catch",125],["T_WHITESPACE"," ",125],"(",["T_STRING","NoSuchEntityException",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$e",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","false",126],";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_objectManager",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","get",128],"(",["T_NS_SEPARATOR","\\",128],["T_STRING","Magento",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Catalog",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Helper",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Category",128],["T_DOUBLE_COLON","::",128],["T_CLASS","class",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","canShow",128],"(",["T_VARIABLE","$category",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_STRING","false",129],";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_catalogSession",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setLastVisitedCategoryId",131],"(",["T_VARIABLE","$category",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getId",131],"(",")",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_coreRegistry",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","register",132],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$category",132],")",";",["T_WHITESPACE","\n        ",132],["T_TRY","try",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_eventManager",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","dispatch",134],"(",["T_WHITESPACE","\n                ",134],["T_CONSTANT_ENCAPSED_STRING","'catalog_controller_category_init_after'",135],",",["T_WHITESPACE","\n                ",135],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$category",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'controller_action'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],"]",["T_WHITESPACE","\n            ",136],")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE"," ",138],["T_CATCH","catch",138],["T_WHITESPACE"," ",138],"(",["T_NS_SEPARATOR","\\",138],["T_STRING","Magento",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Framework",138],["T_NS_SEPARATOR","\\",138],["T_STRING","Exception",138],["T_NS_SEPARATOR","\\",138],["T_STRING","LocalizedException",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$e",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_objectManager",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","get",139],"(",["T_NS_SEPARATOR","\\",139],["T_STRING","Psr",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Log",139],["T_NS_SEPARATOR","\\",139],["T_STRING","LoggerInterface",139],["T_DOUBLE_COLON","::",139],["T_CLASS","class",139],")",["T_OBJECT_OPERATOR","->",139],["T_STRING","critical",139],"(",["T_VARIABLE","$e",139],")",";",["T_WHITESPACE","\n            ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","false",140],";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$category",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Category view action\n     *\n     * @return \\Magento\\Framework\\Controller\\ResultInterface\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",146],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","execute",153],"(",")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_request",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getParam",155],"(",["T_NS_SEPARATOR","\\",155],["T_STRING","Magento",155],["T_NS_SEPARATOR","\\",155],["T_STRING","Framework",155],["T_NS_SEPARATOR","\\",155],["T_STRING","App",155],["T_NS_SEPARATOR","\\",155],["T_STRING","ActionInterface",155],["T_DOUBLE_COLON","::",155],["T_STRING","PARAM_NAME_URL_ENCODED",155],")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","resultRedirectFactory",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","create",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","setUrl",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_redirect",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getRedirectUrl",156],"(",")",")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$category",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_initCategory",158],"(",")",";",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$category",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","layerResolver",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","create",160],"(",["T_STRING","Resolver",160],["T_DOUBLE_COLON","::",160],["T_STRING","CATALOG_LAYER_CATEGORY",160],")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$settings",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_catalogDesign",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getDesignSettings",161],"(",["T_VARIABLE","$category",161],")",";",["T_WHITESPACE","\n\n            ",161],["T_COMMENT","\/\/ apply custom design\n",163],["T_WHITESPACE","            ",164],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$settings",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getCustomDesign",164],"(",")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_catalogDesign",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","applyCustomDesign",165],"(",["T_VARIABLE","$settings",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getCustomDesign",165],"(",")",")",";",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE","\n\n            ",166],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_catalogSession",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setLastViewedCategoryId",168],"(",["T_VARIABLE","$category",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getId",168],"(",")",")",";",["T_WHITESPACE","\n\n            ",168],["T_VARIABLE","$page",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","resultPageFactory",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","create",170],"(",")",";",["T_WHITESPACE","\n            ",170],["T_COMMENT","\/\/ apply custom layout (page) template once the blocks are generated\n",171],["T_WHITESPACE","            ",172],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$settings",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getPageLayout",172],"(",")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$page",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getConfig",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","setPageLayout",173],"(",["T_VARIABLE","$settings",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getPageLayout",173],"(",")",")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n\n            ",174],["T_VARIABLE","$hasChildren",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$category",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","hasChildren",176],"(",")",";",["T_WHITESPACE","\n            ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$category",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getIsAnchor",177],"(",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$type",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$hasChildren",178],["T_WHITESPACE"," ",178],"?",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'layered'",178],["T_WHITESPACE"," ",178],":",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'layered_without_children'",178],";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE"," ",179],["T_ELSE","else",179],["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$type",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$hasChildren",180],["T_WHITESPACE"," ",180],"?",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'default'",180],["T_WHITESPACE"," ",180],":",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'default_without_children'",180],";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n\n            ",181],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_VARIABLE","$hasChildren",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_COMMENT","\/\/ Two levels removed from parent.  Need to add default page type.\n",184],["T_WHITESPACE","                ",185],["T_VARIABLE","$parentType",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","strtok",185],"(",["T_VARIABLE","$type",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'_'",185],")",";",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$page",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","addPageLayoutHandles",186],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$parentType",186],"]",",",["T_WHITESPACE"," ",186],["T_STRING","null",186],",",["T_WHITESPACE"," ",186],["T_STRING","false",186],")",";",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$page",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","addPageLayoutHandles",188],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$type",188],"]",",",["T_WHITESPACE"," ",188],["T_STRING","null",188],",",["T_WHITESPACE"," ",188],["T_STRING","false",188],")",";",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$page",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","addPageLayoutHandles",189],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$category",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getId",189],"(",")","]",")",";",["T_WHITESPACE","\n\n            ",189],["T_COMMENT","\/\/ apply custom layout update once layout is loaded\n",191],["T_WHITESPACE","            ",192],["T_VARIABLE","$layoutUpdates",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$settings",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getLayoutUpdates",192],"(",")",";",["T_WHITESPACE","\n            ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$layoutUpdates",193],["T_WHITESPACE"," ",193],["T_BOOLEAN_AND","&&",193],["T_WHITESPACE"," ",193],["T_STRING","is_array",193],"(",["T_VARIABLE","$layoutUpdates",193],")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_FOREACH","foreach",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$layoutUpdates",194],["T_WHITESPACE"," ",194],["T_AS","as",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$layoutUpdate",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                    ",194],["T_VARIABLE","$page",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","addUpdate",195],"(",["T_VARIABLE","$layoutUpdate",195],")",";",["T_WHITESPACE","\n                    ",195],["T_VARIABLE","$page",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","addPageLayoutHandles",196],"(","[",["T_CONSTANT_ENCAPSED_STRING","'layout_update'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_STRING","md5",196],"(",["T_VARIABLE","$layoutUpdate",196],")","]",",",["T_WHITESPACE"," ",196],["T_STRING","null",196],",",["T_WHITESPACE"," ",196],["T_STRING","false",196],")",";",["T_WHITESPACE","\n                ",196],"}",["T_WHITESPACE","\n            ",197],"}",["T_WHITESPACE","\n\n            ",198],["T_VARIABLE","$page",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getConfig",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","addBodyClass",200],"(",["T_CONSTANT_ENCAPSED_STRING","'page-products'",200],")",["T_WHITESPACE","\n                ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","addBodyClass",201],"(",["T_CONSTANT_ENCAPSED_STRING","'categorypath-'",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","categoryUrlPathGenerator",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getUrlPath",201],"(",["T_VARIABLE","$category",201],")",")",["T_WHITESPACE","\n                ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","addBodyClass",202],"(",["T_CONSTANT_ENCAPSED_STRING","'category-'",202],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_VARIABLE","$category",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getUrlKey",202],"(",")",")",";",["T_WHITESPACE","\n\n            ",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$page",204],";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE"," ",205],["T_ELSEIF","elseif",205],["T_WHITESPACE"," ",205],"(","!",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getResponse",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","isRedirect",205],"(",")",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","resultForwardFactory",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","create",206],"(",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","forward",206],"(",["T_CONSTANT_ENCAPSED_STRING","'noroute'",206],")",";",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE","\n    ",207],"}",["T_WHITESPACE","\n",208],"}",["T_WHITESPACE","\n",209]]
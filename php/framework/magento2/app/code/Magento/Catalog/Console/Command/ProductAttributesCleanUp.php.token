[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Console",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Command",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DB",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Adapter",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AdapterInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Console",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Input",9],["T_NS_SEPARATOR","\\",9],["T_STRING","InputInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Console",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Output",10],["T_NS_SEPARATOR","\\",10],["T_STRING","OutputInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Catalog",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Api",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Data",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ProductInterface",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Class ProductAttributesCleanUp\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",13],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","ProductAttributesCleanUp",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Console",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Command",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Command",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Api\\ProductAttributeRepositoryInterface\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$productAttributeRepository",22],";",["T_WHITESPACE","\n\n    ",22],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Api\\SearchCriteriaBuilder\n     *\/",24],["T_WHITESPACE","\n    ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$searchCriteriaBuilder",27],";",["T_WHITESPACE","\n\n    ",27],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Attribute\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$attributeResource",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\App\\State\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$appState",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\EntityManager\\EntityMetadata\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$metadata",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Catalog\\Api\\ProductAttributeRepositoryInterface $productAttributeRepository\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\Attribute $attributeResource\n     * @param \\Magento\\Framework\\Api\\SearchCriteriaBuilder $searchCriteriaBuilder\n     * @param \\Magento\\Framework\\App\\State $appState\n     * @param \\Magento\\Framework\\EntityManager\\MetadataPool $metadataPool\n     *\/",44],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_WHITESPACE","\n        ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Magento",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Catalog",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Api",52],["T_NS_SEPARATOR","\\",52],["T_STRING","ProductAttributeRepositoryInterface",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$productAttributeRepository",52],",",["T_WHITESPACE","\n        ",52],["T_NS_SEPARATOR","\\",53],["T_STRING","Magento",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Catalog",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Model",53],["T_NS_SEPARATOR","\\",53],["T_STRING","ResourceModel",53],["T_NS_SEPARATOR","\\",53],["T_STRING","Attribute",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$attributeResource",53],",",["T_WHITESPACE","\n        ",53],["T_NS_SEPARATOR","\\",54],["T_STRING","Magento",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Framework",54],["T_NS_SEPARATOR","\\",54],["T_STRING","Api",54],["T_NS_SEPARATOR","\\",54],["T_STRING","SearchCriteriaBuilder",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$searchCriteriaBuilder",54],",",["T_WHITESPACE","\n        ",54],["T_NS_SEPARATOR","\\",55],["T_STRING","Magento",55],["T_NS_SEPARATOR","\\",55],["T_STRING","Framework",55],["T_NS_SEPARATOR","\\",55],["T_STRING","App",55],["T_NS_SEPARATOR","\\",55],["T_STRING","State",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$appState",55],",",["T_WHITESPACE","\n        ",55],["T_NS_SEPARATOR","\\",56],["T_STRING","Magento",56],["T_NS_SEPARATOR","\\",56],["T_STRING","Framework",56],["T_NS_SEPARATOR","\\",56],["T_STRING","EntityManager",56],["T_NS_SEPARATOR","\\",56],["T_STRING","MetadataPool",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$metadataPool",56],["T_WHITESPACE","\n    ",56],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","productAttributeRepository",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$productAttributeRepository",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","searchCriteriaBuilder",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$searchCriteriaBuilder",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","attributeResource",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$attributeResource",60],";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","appState",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$appState",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","metadata",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$metadataPool",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getMetadata",62],"(",["T_STRING","ProductInterface",62],["T_DOUBLE_COLON","::",62],["T_CLASS","class",62],")",";",["T_WHITESPACE","\n        ",62],["T_STRING","parent",63],["T_DOUBLE_COLON","::",63],["T_STRING","__construct",63],"(",")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","configure",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setName",71],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog:product:attributes:cleanup'",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setDescription",72],"(",["T_CONSTANT_ENCAPSED_STRING","'Removes unused product attributes.'",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","execute",78],"(",["T_STRING","InputInterface",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$input",78],",",["T_WHITESPACE"," ",78],["T_STRING","OutputInterface",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$output",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$output",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setDecorated",80],"(",["T_STRING","true",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","appState",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","setAreaCode",81],"(",["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Framework",81],["T_NS_SEPARATOR","\\",81],["T_STRING","App",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Area",81],["T_DOUBLE_COLON","::",81],["T_STRING","AREA_GLOBAL",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$connection",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","attributeResource",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getConnection",82],"(",")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$attributeTables",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAttributeTables",83],"(",")",";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$progress",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Symfony",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Component",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Console",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Helper",85],["T_NS_SEPARATOR","\\",85],["T_STRING","ProgressBar",85],"(",["T_VARIABLE","$output",85],",",["T_WHITESPACE"," ",85],["T_STRING","count",85],"(",["T_VARIABLE","$attributeTables",85],")",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$progress",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setFormat",86],"(",["T_CONSTANT_ENCAPSED_STRING","'<comment>%message%<\/comment> %current%\/%max% [%bar%] %percent:3s%% %elapsed%'",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","attributeResource",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","beginTransaction",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_TRY","try",89],["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_COMMENT","\/\/ Find and remove unused attributes\n",90],["T_WHITESPACE","            ",91],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$attributeTables",91],["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$attributeTable",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$progress",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","setMessage",92],"(",["T_VARIABLE","$attributeTable",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","' '",92],")",";",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$affectedIds",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getAffectedAttributeIds",93],"(",["T_VARIABLE","$connection",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$attributeTable",93],")",";",["T_WHITESPACE","\n                ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","count",94],"(",["T_VARIABLE","$affectedIds",94],")",["T_WHITESPACE"," ",94],">",["T_WHITESPACE"," ",94],["T_LNUMBER","0",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                    ",94],["T_VARIABLE","$connection",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","delete",95],"(",["T_VARIABLE","$attributeTable",95],",",["T_WHITESPACE"," ",95],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id in (?)'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$affectedIds",95],"]",")",";",["T_WHITESPACE","\n                ",95],"}",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$progress",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","advance",97],"(",")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","attributeResource",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","commit",99],"(",")",";",["T_WHITESPACE","\n\n            ",99],["T_VARIABLE","$output",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","writeln",101],"(",["T_CONSTANT_ENCAPSED_STRING","\"\"",101],")",";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$output",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","writeln",102],"(",["T_CONSTANT_ENCAPSED_STRING","\"<info>Unused product attributes successfully cleaned up:<\/info>\"",102],")",";",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$output",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","writeln",103],"(",["T_CONSTANT_ENCAPSED_STRING","\"<comment>  \"",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_STRING","implode",103],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n  \"",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$attributeTables",103],")",["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"<\/comment>\"",103],")",";",["T_WHITESPACE","\n            ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Magento",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Framework",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Console",104],["T_NS_SEPARATOR","\\",104],["T_STRING","Cli",104],["T_DOUBLE_COLON","::",104],["T_STRING","RETURN_SUCCESS",104],";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE"," ",105],["T_CATCH","catch",105],["T_WHITESPACE"," ",105],"(",["T_NS_SEPARATOR","\\",105],["T_STRING","Exception",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$exception",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","attributeResource",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","rollBack",106],"(",")",";",["T_WHITESPACE","\n\n            ",106],["T_VARIABLE","$output",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","writeln",108],"(",["T_CONSTANT_ENCAPSED_STRING","\"\"",108],")",";",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$output",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","writeln",109],"(","\"",["T_ENCAPSED_AND_WHITESPACE","<error>",109],["T_CURLY_OPEN","{",109],["T_VARIABLE","$exception",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getMessage",109],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","<\/error>",109],"\"",")",";",["T_WHITESPACE","\n            ",109],["T_COMMENT","\/\/ we must have an exit code higher than zero to indicate something was wrong\n",110],["T_WHITESPACE","            ",111],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Magento",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Framework",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Console",111],["T_NS_SEPARATOR","\\",111],["T_STRING","Cli",111],["T_DOUBLE_COLON","::",111],["T_STRING","RETURN_FAILURE",111],";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * @return array\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     *\/",115],["T_WHITESPACE","\n    ",118],["T_PRIVATE","private",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","getAttributeTables",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$searchResult",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","productAttributeRepository",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getList",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","searchCriteriaBuilder",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","create",121],"(",")",")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$attributeTables",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],"[","]",";",["T_WHITESPACE","\n\n        ",122],["T_DOC_COMMENT","\/** @var \\Magento\\Eav\\Model\\Entity\\Attribute\\AbstractAttribute $productAttribute *\/",124],["T_WHITESPACE","\n        ",124],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$searchResult",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getItems",125],"(",")",["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$productAttribute",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$attributeTable",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$productAttribute",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getBackend",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getTable",126],"(",")",";",["T_WHITESPACE","\n            ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(","!",["T_STRING","in_array",127],"(",["T_VARIABLE","$attributeTable",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$attributeTables",127],")",["T_WHITESPACE","\n                ",127],["T_BOOLEAN_AND","&&",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$attributeTable",128],["T_WHITESPACE"," ",128],["T_IS_NOT_EQUAL","!=",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","attributeResource",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getTable",128],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",128],")",["T_WHITESPACE","\n            ",128],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$attributeTables",130],"[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$attributeTable",130],";",["T_WHITESPACE","\n            ",130],"}",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$attributeTables",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * @param AdapterInterface $connection\n     * @param string $attributeTableName\n     * @return array\n     * @throws \\Zend_Db_Statement_Exception\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PRIVATE","private",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getAffectedAttributeIds",142],"(",["T_STRING","AdapterInterface",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$connection",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$attributeTableName",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$linkField",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","metadata",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getLinkField",144],"(",")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$select",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$connection",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","select",145],"(",")",["T_OBJECT_OPERATOR","->",145],["T_STRING","reset",145],"(",")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$select",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","from",146],"(","[",["T_CONSTANT_ENCAPSED_STRING","'e'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","attributeResource",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getTable",146],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_entity'",146],")","]",",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'ei.value_id'",146],")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$select",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","join",147],"(",["T_WHITESPACE","\n            ",147],"[",["T_CONSTANT_ENCAPSED_STRING","'ei'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$attributeTableName",148],"]",",",["T_WHITESPACE","\n            ",148],["T_CONSTANT_ENCAPSED_STRING","'ei.'",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_VARIABLE","$linkField",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","' = e.'",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_VARIABLE","$linkField",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","' AND ei.store_id != 0'",149],",",["T_WHITESPACE","\n            ",149],["T_CONSTANT_ENCAPSED_STRING","''",150],["T_WHITESPACE","\n        ",150],")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$select",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","join",152],"(","[",["T_CONSTANT_ENCAPSED_STRING","'s'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","attributeResource",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getTable",152],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",152],")","]",",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'s.store_id = ei.store_id'",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","''",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$select",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","join",153],"(","[",["T_CONSTANT_ENCAPSED_STRING","'sg'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","attributeResource",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getTable",153],"(",["T_CONSTANT_ENCAPSED_STRING","'store_group'",153],")","]",",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'sg.group_id = s.group_id'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","''",153],")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$select",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","joinLeft",154],"(",["T_WHITESPACE","\n            ",154],"[",["T_CONSTANT_ENCAPSED_STRING","'pw'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","attributeResource",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getTable",155],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_website'",155],")","]",",",["T_WHITESPACE","\n            ",155],["T_CONSTANT_ENCAPSED_STRING","'pw.website_id = sg.website_id AND pw.product_id = e.entity_id'",156],",",["T_WHITESPACE","\n            ",156],["T_CONSTANT_ENCAPSED_STRING","''",157],["T_WHITESPACE","\n        ",157],")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$select",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","where",159],"(",["T_CONSTANT_ENCAPSED_STRING","'pw.product_id is null'",159],")",";",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$connection",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","fetchCol",160],"(",["T_VARIABLE","$select",160],")",";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n",161],"}",["T_WHITESPACE","\n",162]]
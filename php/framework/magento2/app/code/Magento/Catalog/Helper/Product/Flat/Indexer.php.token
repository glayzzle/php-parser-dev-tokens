[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Helper",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Product",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Flat",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Framework",8],["T_NS_SEPARATOR","\\",8],["T_STRING","App",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ResourceConnection",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Catalog Product Flat Indexer Helper\n *\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",10],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Indexer",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Magento",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Framework",16],["T_NS_SEPARATOR","\\",16],["T_STRING","App",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Helper",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AbstractHelper",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_DOC_COMMENT","\/**\n     * Path to list of attributes used for flat indexer\n     *\/",18],["T_WHITESPACE","\n    ",20],["T_CONST","const",21],["T_WHITESPACE"," ",21],["T_STRING","XML_NODE_ATTRIBUTE_NODES",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'global\/catalog\/product\/flat\/attribute_groups'",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Size of ids batch for reindex\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","BATCH_SIZE",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_LNUMBER","500",26],";",["T_WHITESPACE","\n\n    ",26],["T_DOC_COMMENT","\/**\n     * Resource instance\n     *\n     * @var \\Magento\\Framework\\App\\ResourceConnection\n     *\/",28],["T_WHITESPACE","\n    ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_resource",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_columns",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * List of indexes uses in flat product table\n     *\n     * @var null|array\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_indexes",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Retrieve catalog product flat columns array in old format (used before MMDB support)\n     *\n     * @return array\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_attributes",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Required system attributes for preload\n     *\n     * @var array\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_systemAttributes",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'required_options'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'weight'",59],"]",";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * EAV Config instance\n     *\n     * @var \\Magento\\Eav\\Model\\Config\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_eavConfig",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\Attribute\\Config\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_attributeConfig",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",73],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_attributeCodes",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * @var int\n     *\/",78],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_entityTypeId",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\Config\n     *\/",83],["T_WHITESPACE","\n    ",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$_catalogConfig",86],";",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",88],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_flatAttributeGroups",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],"[","]",";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Config factory\n     *\n     * @var \\Magento\\Catalog\\Model\\ResourceModel\\ConfigFactory\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_configFactory",98],";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Eav\\Model\\Entity\\AttributeFactory\n     *\/",100],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_attributeFactory",103],";",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",105],["T_WHITESPACE","\n    ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_storeManager",108],";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",110],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$_addFilterableAttrs",113],";",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",115],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$_addChildData",118],";",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Mview\\View\\Changelog\n     *\/",120],["T_WHITESPACE","\n    ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$_changelog",123],";",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Helper\\Context $context\n     * @param \\Magento\\Framework\\App\\ResourceConnection $resource\n     * @param \\Magento\\Eav\\Model\\Config $eavConfig\n     * @param \\Magento\\Catalog\\Model\\Attribute\\Config $attributeConfig\n     * @param \\Magento\\Catalog\\Model\\ResourceModel\\ConfigFactory $configFactory\n     * @param \\Magento\\Eav\\Model\\Entity\\AttributeFactory $attributeFactory\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Framework\\Mview\\View\\Changelog $changelog\n     * @param bool $addFilterableAttrs\n     * @param bool $addChildData\n     * @param array $flatAttributeGroups\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",125],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","__construct",139],"(",["T_WHITESPACE","\n        ",139],["T_NS_SEPARATOR","\\",140],["T_STRING","Magento",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Framework",140],["T_NS_SEPARATOR","\\",140],["T_STRING","App",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Helper",140],["T_NS_SEPARATOR","\\",140],["T_STRING","Context",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$context",140],",",["T_WHITESPACE","\n        ",140],["T_NS_SEPARATOR","\\",141],["T_STRING","Magento",141],["T_NS_SEPARATOR","\\",141],["T_STRING","Framework",141],["T_NS_SEPARATOR","\\",141],["T_STRING","App",141],["T_NS_SEPARATOR","\\",141],["T_STRING","ResourceConnection",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$resource",141],",",["T_WHITESPACE","\n        ",141],["T_NS_SEPARATOR","\\",142],["T_STRING","Magento",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Eav",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Model",142],["T_NS_SEPARATOR","\\",142],["T_STRING","Config",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$eavConfig",142],",",["T_WHITESPACE","\n        ",142],["T_NS_SEPARATOR","\\",143],["T_STRING","Magento",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Catalog",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Model",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Attribute",143],["T_NS_SEPARATOR","\\",143],["T_STRING","Config",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$attributeConfig",143],",",["T_WHITESPACE","\n        ",143],["T_NS_SEPARATOR","\\",144],["T_STRING","Magento",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Catalog",144],["T_NS_SEPARATOR","\\",144],["T_STRING","Model",144],["T_NS_SEPARATOR","\\",144],["T_STRING","ResourceModel",144],["T_NS_SEPARATOR","\\",144],["T_STRING","ConfigFactory",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$configFactory",144],",",["T_WHITESPACE","\n        ",144],["T_NS_SEPARATOR","\\",145],["T_STRING","Magento",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Eav",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Model",145],["T_NS_SEPARATOR","\\",145],["T_STRING","Entity",145],["T_NS_SEPARATOR","\\",145],["T_STRING","AttributeFactory",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$attributeFactory",145],",",["T_WHITESPACE","\n        ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Magento",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Store",146],["T_NS_SEPARATOR","\\",146],["T_STRING","Model",146],["T_NS_SEPARATOR","\\",146],["T_STRING","StoreManagerInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$storeManager",146],",",["T_WHITESPACE","\n        ",146],["T_NS_SEPARATOR","\\",147],["T_STRING","Magento",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Framework",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Mview",147],["T_NS_SEPARATOR","\\",147],["T_STRING","View",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Changelog",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$changelog",147],",",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$addFilterableAttrs",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","false",148],",",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$addChildData",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","false",149],",",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$flatAttributeGroups",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],"[","]",["T_WHITESPACE","\n    ",150],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_configFactory",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$configFactory",152],";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_resource",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$resource",153],";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_eavConfig",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$eavConfig",154],";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_attributeConfig",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$attributeConfig",155],";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_attributeFactory",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$attributeFactory",156],";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_flatAttributeGroups",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$flatAttributeGroups",157],";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_storeManager",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$storeManager",158],";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_changelog",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$changelog",159],";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_addFilterableAttrs",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$addFilterableAttrs",160],";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_addChildData",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$addChildData",161],";",["T_WHITESPACE","\n        ",161],["T_STRING","parent",162],["T_DOUBLE_COLON","::",162],["T_STRING","__construct",162],"(",["T_VARIABLE","$context",162],")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Retrieve catalog product flat columns array in DDL format\n     *\n     * @return array\n     *\/",165],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","getFlatColumnsDdlDefinition",170],"(",")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$columns",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],"[","]",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$columns",173],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",173],"]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],"[",["T_WHITESPACE","\n            ",173],["T_CONSTANT_ENCAPSED_STRING","'type'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Magento",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Framework",174],["T_NS_SEPARATOR","\\",174],["T_STRING","DB",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Ddl",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Table",174],["T_DOUBLE_COLON","::",174],["T_STRING","TYPE_INTEGER",174],",",["T_WHITESPACE","\n            ",174],["T_CONSTANT_ENCAPSED_STRING","'length'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_STRING","null",175],",",["T_WHITESPACE","\n            ",175],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_STRING","true",176],",",["T_WHITESPACE","\n            ",176],["T_CONSTANT_ENCAPSED_STRING","'nullable'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_STRING","false",177],",",["T_WHITESPACE","\n            ",177],["T_CONSTANT_ENCAPSED_STRING","'default'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_STRING","false",178],",",["T_WHITESPACE","\n            ",178],["T_CONSTANT_ENCAPSED_STRING","'primary'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_STRING","true",179],",",["T_WHITESPACE","\n            ",179],["T_CONSTANT_ENCAPSED_STRING","'comment'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'Entity Id'",180],",",["T_WHITESPACE","\n        ",180],"]",";",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","isAddChildData",182],"(",")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$columns",183],"[",["T_CONSTANT_ENCAPSED_STRING","'child_id'",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],"[",["T_WHITESPACE","\n                ",183],["T_CONSTANT_ENCAPSED_STRING","'type'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Magento",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Framework",184],["T_NS_SEPARATOR","\\",184],["T_STRING","DB",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Ddl",184],["T_NS_SEPARATOR","\\",184],["T_STRING","Table",184],["T_DOUBLE_COLON","::",184],["T_STRING","TYPE_INTEGER",184],",",["T_WHITESPACE","\n                ",184],["T_CONSTANT_ENCAPSED_STRING","'length'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_STRING","null",185],",",["T_WHITESPACE","\n                ",185],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_STRING","true",186],",",["T_WHITESPACE","\n                ",186],["T_CONSTANT_ENCAPSED_STRING","'nullable'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_STRING","true",187],",",["T_WHITESPACE","\n                ",187],["T_CONSTANT_ENCAPSED_STRING","'default'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_STRING","null",188],",",["T_WHITESPACE","\n                ",188],["T_CONSTANT_ENCAPSED_STRING","'primary'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_STRING","true",189],",",["T_WHITESPACE","\n                ",189],["T_CONSTANT_ENCAPSED_STRING","'comment'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'Child Id'",190],",",["T_WHITESPACE","\n            ",190],"]",";",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$columns",192],"[",["T_CONSTANT_ENCAPSED_STRING","'is_child'",192],"]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],"[",["T_WHITESPACE","\n                ",192],["T_CONSTANT_ENCAPSED_STRING","'type'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Magento",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Framework",193],["T_NS_SEPARATOR","\\",193],["T_STRING","DB",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Ddl",193],["T_NS_SEPARATOR","\\",193],["T_STRING","Table",193],["T_DOUBLE_COLON","::",193],["T_STRING","TYPE_SMALLINT",193],",",["T_WHITESPACE","\n                ",193],["T_CONSTANT_ENCAPSED_STRING","'length'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_LNUMBER","1",194],",",["T_WHITESPACE","\n                ",194],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_STRING","true",195],",",["T_WHITESPACE","\n                ",195],["T_CONSTANT_ENCAPSED_STRING","'nullable'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_STRING","false",196],",",["T_WHITESPACE","\n                ",196],["T_CONSTANT_ENCAPSED_STRING","'default'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'0'",197],",",["T_WHITESPACE","\n                ",197],["T_CONSTANT_ENCAPSED_STRING","'comment'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'Checks If Entity Is Child'",198],",",["T_WHITESPACE","\n            ",198],"]",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$columns",201],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",201],"]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],"[",["T_WHITESPACE","\n            ",201],["T_CONSTANT_ENCAPSED_STRING","'type'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Magento",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Framework",202],["T_NS_SEPARATOR","\\",202],["T_STRING","DB",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Ddl",202],["T_NS_SEPARATOR","\\",202],["T_STRING","Table",202],["T_DOUBLE_COLON","::",202],["T_STRING","TYPE_SMALLINT",202],",",["T_WHITESPACE","\n            ",202],["T_CONSTANT_ENCAPSED_STRING","'length'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_LNUMBER","5",203],",",["T_WHITESPACE","\n            ",203],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_STRING","true",204],",",["T_WHITESPACE","\n            ",204],["T_CONSTANT_ENCAPSED_STRING","'nullable'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_STRING","false",205],",",["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","'default'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'0'",206],",",["T_WHITESPACE","\n            ",206],["T_CONSTANT_ENCAPSED_STRING","'comment'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'Attribute Set ID'",207],",",["T_WHITESPACE","\n        ",207],"]",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$columns",209],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",209],"]",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],"[",["T_WHITESPACE","\n            ",209],["T_CONSTANT_ENCAPSED_STRING","'type'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Magento",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Framework",210],["T_NS_SEPARATOR","\\",210],["T_STRING","DB",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Ddl",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Table",210],["T_DOUBLE_COLON","::",210],["T_STRING","TYPE_TEXT",210],",",["T_WHITESPACE","\n            ",210],["T_CONSTANT_ENCAPSED_STRING","'length'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_LNUMBER","32",211],",",["T_WHITESPACE","\n            ",211],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_STRING","false",212],",",["T_WHITESPACE","\n            ",212],["T_CONSTANT_ENCAPSED_STRING","'nullable'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_STRING","false",213],",",["T_WHITESPACE","\n            ",213],["T_CONSTANT_ENCAPSED_STRING","'default'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Magento",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Catalog",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Model",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Product",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Type",214],["T_DOUBLE_COLON","::",214],["T_STRING","DEFAULT_TYPE",214],",",["T_WHITESPACE","\n            ",214],["T_CONSTANT_ENCAPSED_STRING","'comment'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'Type Id'",215],",",["T_WHITESPACE","\n        ",215],"]",";",["T_WHITESPACE","\n        ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$columns",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Check whether filterable attributes should be added\n     *\n     * @return bool\n     *\/",220],["T_WHITESPACE","\n    ",224],["T_PUBLIC","public",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","isAddFilterableAttributes",225],"(",")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_addFilterableAttrs",227],";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * Check whether child data should be added\n     *\n     * @return bool\n     *\/",230],["T_WHITESPACE","\n    ",234],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","isAddChildData",235],"(",")",["T_WHITESPACE","\n    ",235],"{",["T_WHITESPACE","\n        ",236],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_addChildData",237],";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Retrieve catalog product flat table columns array\n     *\n     * @return array\n     *\/",240],["T_WHITESPACE","\n    ",244],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","getFlatColumns",245],"(",")",["T_WHITESPACE","\n    ",245],"{",["T_WHITESPACE","\n        ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_columns",247],["T_WHITESPACE"," ",247],["T_IS_IDENTICAL","===",247],["T_WHITESPACE"," ",247],["T_STRING","null",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_columns",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getFlatColumnsDdlDefinition",248],"(",")",";",["T_WHITESPACE","\n            ",248],["T_FOREACH","foreach",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getAttributes",249],"(",")",["T_WHITESPACE"," ",249],["T_AS","as",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$attribute",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                ",249],["T_DOC_COMMENT","\/** @var $attribute \\Magento\\Eav\\Model\\Entity\\Attribute\\AbstractAttribute *\/",250],["T_WHITESPACE","\n                ",250],["T_VARIABLE","$columns",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$attribute",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","setFlatAddFilterableAttributes",251],"(",["T_WHITESPACE","\n                    ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","isAddFilterableAttributes",252],"(",")",["T_WHITESPACE","\n                ",252],")",["T_OBJECT_OPERATOR","->",253],["T_STRING","setFlatAddChildData",253],"(",["T_WHITESPACE","\n                    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","isAddChildData",254],"(",")",["T_WHITESPACE","\n                ",254],")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getFlatColumns",255],"(",")",";",["T_WHITESPACE","\n                ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$columns",256],["T_WHITESPACE"," ",256],["T_IS_NOT_IDENTICAL","!==",256],["T_WHITESPACE"," ",256],["T_STRING","null",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n                    ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_columns",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","array_merge",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_columns",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$columns",257],")",";",["T_WHITESPACE","\n                ",257],"}",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n        ",260],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_columns",261],";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Retrieve entity type\n     *\n     * @return string\n     *\/",264],["T_WHITESPACE","\n    ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","getEntityType",269],"(",")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Magento",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Catalog",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Model",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Product",271],["T_DOUBLE_COLON","::",271],["T_STRING","ENTITY",271],";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Entity Type Id\n     *\n     * @return int\n     *\/",274],["T_WHITESPACE","\n    ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","getEntityTypeId",279],"(",")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_entityTypeId",281],["T_WHITESPACE"," ",281],["T_IS_IDENTICAL","===",281],["T_WHITESPACE"," ",281],["T_STRING","null",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_entityTypeId",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_configFactory",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","create",282],"(",")",["T_OBJECT_OPERATOR","->",282],["T_STRING","getEntityTypeId",282],"(",")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_entityTypeId",284],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Retrieve attribute objects for flat\n     *\n     * @return array\n     *\/",287],["T_WHITESPACE","\n    ",291],["T_PUBLIC","public",292],["T_WHITESPACE"," ",292],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","getAttributes",292],"(",")",["T_WHITESPACE","\n    ",292],"{",["T_WHITESPACE","\n        ",293],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_attributes",294],["T_WHITESPACE"," ",294],["T_IS_IDENTICAL","===",294],["T_WHITESPACE"," ",294],["T_STRING","null",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_attributes",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],"[","]",";",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$attributeCodes",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getAttributeCodes",296],"(",")",";",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$entity",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_eavConfig",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getEntityType",297],"(",["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getEntityType",297],"(",")",")",["T_OBJECT_OPERATOR","->",297],["T_STRING","getEntity",297],"(",")",";",["T_WHITESPACE","\n\n            ",297],["T_FOREACH","foreach",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$attributeCodes",299],["T_WHITESPACE"," ",299],["T_AS","as",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$attributeCode",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n                ",299],["T_VARIABLE","$attribute",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_eavConfig",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getAttribute",300],"(",["T_WHITESPACE","\n                    ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getEntityType",301],"(",")",",",["T_WHITESPACE","\n                    ",301],["T_VARIABLE","$attributeCode",302],["T_WHITESPACE","\n                ",302],")",["T_OBJECT_OPERATOR","->",303],["T_STRING","setEntity",303],"(",["T_WHITESPACE","\n                    ",303],["T_VARIABLE","$entity",304],["T_WHITESPACE","\n                ",304],")",";",["T_WHITESPACE","\n                ",305],["T_TRY","try",306],["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                    ",306],["T_COMMENT","\/\/ check if exists source and backend model.\n",307],["T_WHITESPACE","                    ",308],["T_COMMENT","\/\/ To prevent exception when some module was disabled\n",308],["T_WHITESPACE","                    ",309],["T_VARIABLE","$attribute",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","usesSource",309],"(",")",["T_WHITESPACE"," ",309],["T_BOOLEAN_AND","&&",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$attribute",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getSource",309],"(",")",";",["T_WHITESPACE","\n                    ",309],["T_VARIABLE","$attribute",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getBackend",310],"(",")",";",["T_WHITESPACE","\n                    ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_attributes",311],"[",["T_VARIABLE","$attributeCode",311],"]",["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$attribute",311],";",["T_WHITESPACE","\n                ",311],"}",["T_WHITESPACE"," ",312],["T_CATCH","catch",312],["T_WHITESPACE"," ",312],"(",["T_NS_SEPARATOR","\\",312],["T_STRING","Exception",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$e",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n                    ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_logger",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","critical",313],"(",["T_VARIABLE","$e",313],")",";",["T_WHITESPACE","\n                ",313],"}",["T_WHITESPACE","\n            ",314],"}",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_attributes",317],";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Retrieve attribute codes using for flat\n     *\n     * @return array\n     *\/",320],["T_WHITESPACE","\n    ",324],["T_PUBLIC","public",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","getAttributeCodes",325],"(",")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","_attributeCodes",327],["T_WHITESPACE"," ",327],["T_IS_IDENTICAL","===",327],["T_WHITESPACE"," ",327],["T_STRING","null",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_VARIABLE","$connection",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_resource",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getConnection",328],"(",")",";",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_attributeCodes",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],"[","]",";",["T_WHITESPACE","\n\n            ",329],["T_FOREACH","foreach",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_flatAttributeGroups",331],["T_WHITESPACE"," ",331],["T_AS","as",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$attributeGroupName",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                ",331],["T_VARIABLE","$attributes",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_attributeConfig",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getAttributeNames",332],"(",["T_VARIABLE","$attributeGroupName",332],")",";",["T_WHITESPACE","\n                ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_systemAttributes",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","array_unique",333],"(",["T_STRING","array_merge",333],"(",["T_VARIABLE","$attributes",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_systemAttributes",333],")",")",";",["T_WHITESPACE","\n            ",333],"}",["T_WHITESPACE","\n\n            ",334],["T_VARIABLE","$bind",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],"[",["T_WHITESPACE","\n                ",336],["T_CONSTANT_ENCAPSED_STRING","'backend_type'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_NS_SEPARATOR","\\",337],["T_STRING","Magento",337],["T_NS_SEPARATOR","\\",337],["T_STRING","Eav",337],["T_NS_SEPARATOR","\\",337],["T_STRING","Model",337],["T_NS_SEPARATOR","\\",337],["T_STRING","Entity",337],["T_NS_SEPARATOR","\\",337],["T_STRING","Attribute",337],["T_NS_SEPARATOR","\\",337],["T_STRING","AbstractAttribute",337],["T_DOUBLE_COLON","::",337],["T_STRING","TYPE_STATIC",337],",",["T_WHITESPACE","\n                ",337],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getEntityTypeId",338],"(",")",",",["T_WHITESPACE","\n            ",338],"]",";",["T_WHITESPACE","\n\n            ",339],["T_VARIABLE","$select",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$connection",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","select",341],"(",")",["T_OBJECT_OPERATOR","->",341],["T_STRING","from",341],"(",["T_WHITESPACE","\n                ",341],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getTable",342],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_attribute'",342],")","]",["T_WHITESPACE","\n            ",342],")",["T_OBJECT_OPERATOR","->",343],["T_STRING","join",343],"(",["T_WHITESPACE","\n                ",343],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_table'",344],["T_WHITESPACE"," ",344],["T_DOUBLE_ARROW","=>",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getTable",344],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_eav_attribute'",344],")","]",",",["T_WHITESPACE","\n                ",344],["T_CONSTANT_ENCAPSED_STRING","'additional_table.attribute_id = main_table.attribute_id'",345],["T_WHITESPACE","\n            ",345],")",["T_OBJECT_OPERATOR","->",346],["T_STRING","where",346],"(",["T_WHITESPACE","\n                ",346],["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_type_id = :entity_type_id'",347],["T_WHITESPACE","\n            ",347],")",";",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$whereCondition",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],"[",["T_WHITESPACE","\n                ",349],["T_CONSTANT_ENCAPSED_STRING","'main_table.backend_type = :backend_type'",350],",",["T_WHITESPACE","\n                ",350],["T_VARIABLE","$connection",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","quoteInto",351],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_used_for_promo_rules = ?'",351],",",["T_WHITESPACE"," ",351],["T_LNUMBER","1",351],")",",",["T_WHITESPACE","\n                ",351],["T_VARIABLE","$connection",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","quoteInto",352],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.used_in_product_listing = ?'",352],",",["T_WHITESPACE"," ",352],["T_LNUMBER","1",352],")",",",["T_WHITESPACE","\n                ",352],["T_VARIABLE","$connection",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","quoteInto",353],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.used_for_sort_by = ?'",353],",",["T_WHITESPACE"," ",353],["T_LNUMBER","1",353],")",",",["T_WHITESPACE","\n                ",353],["T_VARIABLE","$connection",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","quoteInto",354],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.attribute_code IN(?)'",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_systemAttributes",354],")",",",["T_WHITESPACE","\n            ",354],"]",";",["T_WHITESPACE","\n            ",355],["T_IF","if",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","isAddFilterableAttributes",356],"(",")",")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n                ",356],["T_VARIABLE","$whereCondition",357],"[","]",["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$connection",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","quoteInto",357],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_filterable > ?'",357],",",["T_WHITESPACE"," ",357],["T_LNUMBER","0",357],")",";",["T_WHITESPACE","\n            ",357],"}",["T_WHITESPACE","\n\n            ",358],["T_VARIABLE","$select",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","where",360],"(",["T_STRING","implode",360],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",360],",",["T_WHITESPACE"," ",360],["T_VARIABLE","$whereCondition",360],")",")",";",["T_WHITESPACE","\n            ",360],["T_VARIABLE","$attributesData",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$connection",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","fetchAll",361],"(",["T_VARIABLE","$select",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$bind",361],")",";",["T_WHITESPACE","\n            ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_eavConfig",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","importAttributesData",362],"(",["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getEntityType",362],"(",")",",",["T_WHITESPACE"," ",362],["T_VARIABLE","$attributesData",362],")",";",["T_WHITESPACE","\n\n            ",362],["T_FOREACH","foreach",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$attributesData",364],["T_WHITESPACE"," ",364],["T_AS","as",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$data",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n                ",364],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","_attributeCodes",365],"[",["T_VARIABLE","$data",365],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",365],"]","]",["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$data",365],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",365],"]",";",["T_WHITESPACE","\n            ",365],"}",["T_WHITESPACE","\n            ",366],["T_UNSET","unset",367],"(",["T_VARIABLE","$attributesData",367],")",";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE","\n        ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","_attributeCodes",369],";",["T_WHITESPACE","\n    ",369],"}",["T_WHITESPACE","\n\n    ",370],["T_DOC_COMMENT","\/**\n     * Retrieve catalog product flat table indexes array\n     *\n     * @return array\n     *\/",372],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","getFlatIndexes",377],"(",")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_indexes",379],["T_WHITESPACE"," ",379],["T_IS_IDENTICAL","===",379],["T_WHITESPACE"," ",379],["T_STRING","null",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_indexes",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],"[","]",";",["T_WHITESPACE","\n            ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","isAddChildData",381],"(",")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_indexes",382],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",382],"]",["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],"[",["T_WHITESPACE","\n                    ",382],["T_CONSTANT_ENCAPSED_STRING","'type'",383],["T_WHITESPACE"," ",383],["T_DOUBLE_ARROW","=>",383],["T_WHITESPACE"," ",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Magento",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Framework",383],["T_NS_SEPARATOR","\\",383],["T_STRING","DB",383],["T_NS_SEPARATOR","\\",383],["T_STRING","Adapter",383],["T_NS_SEPARATOR","\\",383],["T_STRING","AdapterInterface",383],["T_DOUBLE_COLON","::",383],["T_STRING","INDEX_TYPE_PRIMARY",383],",",["T_WHITESPACE","\n                    ",383],["T_CONSTANT_ENCAPSED_STRING","'fields'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",384],",",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'child_id'",384],"]",",",["T_WHITESPACE","\n                ",384],"]",";",["T_WHITESPACE","\n                ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_indexes",386],"[",["T_CONSTANT_ENCAPSED_STRING","'IDX_CHILD'",386],"]",["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],"[",["T_WHITESPACE","\n                    ",386],["T_CONSTANT_ENCAPSED_STRING","'type'",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Magento",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Framework",387],["T_NS_SEPARATOR","\\",387],["T_STRING","DB",387],["T_NS_SEPARATOR","\\",387],["T_STRING","Adapter",387],["T_NS_SEPARATOR","\\",387],["T_STRING","AdapterInterface",387],["T_DOUBLE_COLON","::",387],["T_STRING","INDEX_TYPE_INDEX",387],",",["T_WHITESPACE","\n                    ",387],["T_CONSTANT_ENCAPSED_STRING","'fields'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],"[",["T_CONSTANT_ENCAPSED_STRING","'child_id'",388],"]",",",["T_WHITESPACE","\n                ",388],"]",";",["T_WHITESPACE","\n                ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_indexes",390],"[",["T_CONSTANT_ENCAPSED_STRING","'IDX_IS_CHILD'",390],"]",["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],"[",["T_WHITESPACE","\n                    ",390],["T_CONSTANT_ENCAPSED_STRING","'type'",391],["T_WHITESPACE"," ",391],["T_DOUBLE_ARROW","=>",391],["T_WHITESPACE"," ",391],["T_NS_SEPARATOR","\\",391],["T_STRING","Magento",391],["T_NS_SEPARATOR","\\",391],["T_STRING","Framework",391],["T_NS_SEPARATOR","\\",391],["T_STRING","DB",391],["T_NS_SEPARATOR","\\",391],["T_STRING","Adapter",391],["T_NS_SEPARATOR","\\",391],["T_STRING","AdapterInterface",391],["T_DOUBLE_COLON","::",391],["T_STRING","INDEX_TYPE_INDEX",391],",",["T_WHITESPACE","\n                    ",391],["T_CONSTANT_ENCAPSED_STRING","'fields'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",392],",",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'is_child'",392],"]",",",["T_WHITESPACE","\n                ",392],"]",";",["T_WHITESPACE","\n            ",393],"}",["T_WHITESPACE"," ",394],["T_ELSE","else",394],["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n                ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","_indexes",395],"[",["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",395],"]",["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],"[",["T_WHITESPACE","\n                    ",395],["T_CONSTANT_ENCAPSED_STRING","'type'",396],["T_WHITESPACE"," ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_NS_SEPARATOR","\\",396],["T_STRING","Magento",396],["T_NS_SEPARATOR","\\",396],["T_STRING","Framework",396],["T_NS_SEPARATOR","\\",396],["T_STRING","DB",396],["T_NS_SEPARATOR","\\",396],["T_STRING","Adapter",396],["T_NS_SEPARATOR","\\",396],["T_STRING","AdapterInterface",396],["T_DOUBLE_COLON","::",396],["T_STRING","INDEX_TYPE_PRIMARY",396],",",["T_WHITESPACE","\n                    ",396],["T_CONSTANT_ENCAPSED_STRING","'fields'",397],["T_WHITESPACE"," ",397],["T_DOUBLE_ARROW","=>",397],["T_WHITESPACE"," ",397],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",397],"]",",",["T_WHITESPACE","\n                ",397],"]",";",["T_WHITESPACE","\n            ",398],"}",["T_WHITESPACE","\n            ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_indexes",400],"[",["T_CONSTANT_ENCAPSED_STRING","'IDX_TYPE_ID'",400],"]",["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],"[",["T_WHITESPACE","\n                ",400],["T_CONSTANT_ENCAPSED_STRING","'type'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Magento",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Framework",401],["T_NS_SEPARATOR","\\",401],["T_STRING","DB",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Adapter",401],["T_NS_SEPARATOR","\\",401],["T_STRING","AdapterInterface",401],["T_DOUBLE_COLON","::",401],["T_STRING","INDEX_TYPE_INDEX",401],",",["T_WHITESPACE","\n                ",401],["T_CONSTANT_ENCAPSED_STRING","'fields'",402],["T_WHITESPACE"," ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",402],"]",",",["T_WHITESPACE","\n            ",402],"]",";",["T_WHITESPACE","\n            ",403],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_indexes",404],"[",["T_CONSTANT_ENCAPSED_STRING","'IDX_ATTRIBUTE_SET'",404],"]",["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],"[",["T_WHITESPACE","\n                ",404],["T_CONSTANT_ENCAPSED_STRING","'type'",405],["T_WHITESPACE"," ",405],["T_DOUBLE_ARROW","=>",405],["T_WHITESPACE"," ",405],["T_NS_SEPARATOR","\\",405],["T_STRING","Magento",405],["T_NS_SEPARATOR","\\",405],["T_STRING","Framework",405],["T_NS_SEPARATOR","\\",405],["T_STRING","DB",405],["T_NS_SEPARATOR","\\",405],["T_STRING","Adapter",405],["T_NS_SEPARATOR","\\",405],["T_STRING","AdapterInterface",405],["T_DOUBLE_COLON","::",405],["T_STRING","INDEX_TYPE_INDEX",405],",",["T_WHITESPACE","\n                ",405],["T_CONSTANT_ENCAPSED_STRING","'fields'",406],["T_WHITESPACE"," ",406],["T_DOUBLE_ARROW","=>",406],["T_WHITESPACE"," ",406],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",406],"]",",",["T_WHITESPACE","\n            ",406],"]",";",["T_WHITESPACE","\n\n            ",407],["T_FOREACH","foreach",409],["T_WHITESPACE"," ",409],"(",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getAttributes",409],"(",")",["T_WHITESPACE"," ",409],["T_AS","as",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$attribute",409],")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n                ",409],["T_DOC_COMMENT","\/** @var $attribute \\Magento\\Eav\\Model\\Entity\\Attribute *\/",410],["T_WHITESPACE","\n                ",410],["T_VARIABLE","$indexes",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$attribute",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","setFlatAddFilterableAttributes",411],"(",["T_WHITESPACE","\n                    ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","isAddFilterableAttributes",412],"(",")",["T_WHITESPACE","\n                ",412],")",["T_OBJECT_OPERATOR","->",413],["T_STRING","setFlatAddChildData",413],"(",["T_WHITESPACE","\n                    ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","isAddChildData",414],"(",")",["T_WHITESPACE","\n                ",414],")",["T_OBJECT_OPERATOR","->",415],["T_STRING","getFlatIndexes",415],"(",")",";",["T_WHITESPACE","\n                ",415],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$indexes",416],["T_WHITESPACE"," ",416],["T_IS_NOT_IDENTICAL","!==",416],["T_WHITESPACE"," ",416],["T_STRING","null",416],")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n                    ",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","_indexes",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_STRING","array_merge",417],"(",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","_indexes",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$indexes",417],")",";",["T_WHITESPACE","\n                ",417],"}",["T_WHITESPACE","\n            ",418],"}",["T_WHITESPACE","\n        ",419],"}",["T_WHITESPACE","\n        ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","_indexes",421],";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n\n    ",422],["T_DOC_COMMENT","\/**\n     * Get table structure for temporary eav tables\n     *\n     * @param array $attributes\n     * @return array\n     *\/",424],["T_WHITESPACE","\n    ",429],["T_PUBLIC","public",430],["T_WHITESPACE"," ",430],["T_FUNCTION","function",430],["T_WHITESPACE"," ",430],["T_STRING","getTablesStructure",430],"(",["T_ARRAY","array",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$attributes",430],")",["T_WHITESPACE","\n    ",430],"{",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$eavAttributes",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],"[","]",";",["T_WHITESPACE","\n        ",432],["T_VARIABLE","$flatColumnsList",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getFlatColumns",433],"(",")",";",["T_WHITESPACE","\n        ",433],["T_DOC_COMMENT","\/** @var $attribute \\Magento\\Catalog\\Model\\ResourceModel\\Eav\\Attribute *\/",434],["T_WHITESPACE","\n        ",434],["T_FOREACH","foreach",435],["T_WHITESPACE"," ",435],"(",["T_VARIABLE","$attributes",435],["T_WHITESPACE"," ",435],["T_AS","as",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$attribute",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n            ",435],["T_VARIABLE","$eavTable",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$attribute",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getBackend",436],"(",")",["T_OBJECT_OPERATOR","->",436],["T_STRING","getTable",436],"(",")",";",["T_WHITESPACE","\n            ",436],["T_VARIABLE","$attributeCode",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$attribute",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getAttributeCode",437],"(",")",";",["T_WHITESPACE","\n            ",437],["T_IF","if",438],["T_WHITESPACE"," ",438],"(",["T_ISSET","isset",438],"(",["T_VARIABLE","$flatColumnsList",438],"[",["T_VARIABLE","$attributeCode",438],"]",")",")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                ",438],["T_VARIABLE","$eavAttributes",439],"[",["T_VARIABLE","$eavTable",439],"]","[",["T_VARIABLE","$attributeCode",439],"]",["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$attribute",439],";",["T_WHITESPACE","\n            ",439],"}",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n        ",441],["T_RETURN","return",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$eavAttributes",442],";",["T_WHITESPACE","\n    ",442],"}",["T_WHITESPACE","\n\n    ",443],["T_DOC_COMMENT","\/**\n     * Returns table name\n     *\n     * @param string|array $name\n     * @return string\n     *\/",445],["T_WHITESPACE","\n    ",450],["T_PUBLIC","public",451],["T_WHITESPACE"," ",451],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","getTable",451],"(",["T_VARIABLE","$name",451],")",["T_WHITESPACE","\n    ",451],"{",["T_WHITESPACE","\n        ",452],["T_RETURN","return",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_resource",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getTableName",453],"(",["T_VARIABLE","$name",453],")",";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE","\n\n    ",454],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Product Flat Table name\n     *\n     * @param int $storeId\n     * @return string\n     *\/",456],["T_WHITESPACE","\n    ",461],["T_PUBLIC","public",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","getFlatTableName",462],"(",["T_VARIABLE","$storeId",462],")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_RETURN","return",464],["T_WHITESPACE"," ",464],["T_STRING","sprintf",464],"(",["T_CONSTANT_ENCAPSED_STRING","'%s_%s'",464],",",["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getTable",464],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat'",464],")",",",["T_WHITESPACE"," ",464],["T_VARIABLE","$storeId",464],")",";",["T_WHITESPACE","\n    ",464],"}",["T_WHITESPACE","\n\n    ",465],["T_DOC_COMMENT","\/**\n     * Retrieve loaded attribute by code\n     *\n     * @param string $attributeCode\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @return \\Magento\\Eav\\Model\\Entity\\Attribute\n     *\/",467],["T_WHITESPACE","\n    ",473],["T_PUBLIC","public",474],["T_WHITESPACE"," ",474],["T_FUNCTION","function",474],["T_WHITESPACE"," ",474],["T_STRING","getAttribute",474],"(",["T_VARIABLE","$attributeCode",474],")",["T_WHITESPACE","\n    ",474],"{",["T_WHITESPACE","\n        ",475],["T_VARIABLE","$attributes",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","getAttributes",476],"(",")",";",["T_WHITESPACE","\n        ",476],["T_IF","if",477],["T_WHITESPACE"," ",477],"(","!",["T_ISSET","isset",477],"(",["T_VARIABLE","$attributes",477],"[",["T_VARIABLE","$attributeCode",477],"]",")",")",["T_WHITESPACE"," ",477],"{",["T_WHITESPACE","\n            ",477],["T_VARIABLE","$attribute",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","_attributeFactory",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","create",478],"(",")",";",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$attribute",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","loadByCode",479],"(",["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","getEntityTypeId",479],"(",")",",",["T_WHITESPACE"," ",479],["T_VARIABLE","$attributeCode",479],")",";",["T_WHITESPACE","\n            ",479],["T_IF","if",480],["T_WHITESPACE"," ",480],"(","!",["T_VARIABLE","$attribute",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getId",480],"(",")",")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n                ",480],["T_THROW","throw",481],["T_WHITESPACE"," ",481],["T_NEW","new",481],["T_WHITESPACE"," ",481],["T_NS_SEPARATOR","\\",481],["T_STRING","Magento",481],["T_NS_SEPARATOR","\\",481],["T_STRING","Framework",481],["T_NS_SEPARATOR","\\",481],["T_STRING","Exception",481],["T_NS_SEPARATOR","\\",481],["T_STRING","LocalizedException",481],"(",["T_STRING","__",481],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid attribute %1'",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$attributeCode",481],")",")",";",["T_WHITESPACE","\n            ",481],"}",["T_WHITESPACE","\n            ",482],["T_VARIABLE","$entity",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","_eavConfig",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","getEntityType",483],"(",["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","getEntityType",483],"(",")",")",["T_OBJECT_OPERATOR","->",483],["T_STRING","getEntity",483],"(",")",";",["T_WHITESPACE","\n            ",483],["T_VARIABLE","$attribute",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","setEntity",484],"(",["T_VARIABLE","$entity",484],")",";",["T_WHITESPACE","\n            ",484],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$attribute",485],";",["T_WHITESPACE","\n        ",485],"}",["T_WHITESPACE","\n        ",486],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$attributes",487],"[",["T_VARIABLE","$attributeCode",487],"]",";",["T_WHITESPACE","\n    ",487],"}",["T_WHITESPACE","\n\n    ",488],["T_DOC_COMMENT","\/**\n     * Delete all product flat tables for not existing stores\n     *\n     * @return void\n     *\/",490],["T_WHITESPACE","\n    ",494],["T_PUBLIC","public",495],["T_WHITESPACE"," ",495],["T_FUNCTION","function",495],["T_WHITESPACE"," ",495],["T_STRING","deleteAbandonedStoreFlatTables",495],"(",")",["T_WHITESPACE","\n    ",495],"{",["T_WHITESPACE","\n        ",496],["T_VARIABLE","$connection",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","_resource",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getConnection",497],"(",")",";",["T_WHITESPACE","\n        ",497],["T_VARIABLE","$existentTables",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$connection",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getTables",498],"(",["T_VARIABLE","$connection",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getTableName",498],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_%'",498],")",")",";",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","_changelog",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","setViewId",499],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat'",499],")",";",["T_WHITESPACE","\n        ",499],["T_FOREACH","foreach",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$existentTables",500],["T_WHITESPACE"," ",500],["T_AS","as",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$key",500],["T_WHITESPACE"," ",500],["T_DOUBLE_ARROW","=>",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$tableName",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],["T_IF","if",501],["T_WHITESPACE"," ",501],"(",["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","_changelog",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getName",501],"(",")",["T_WHITESPACE"," ",501],["T_IS_EQUAL","==",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$tableName",501],")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n                ",501],["T_UNSET","unset",502],"(",["T_VARIABLE","$existentTables",502],"[",["T_VARIABLE","$key",502],"]",")",";",["T_WHITESPACE","\n            ",502],"}",["T_WHITESPACE","\n        ",503],"}",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$actualStoreTables",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],"[","]",";",["T_WHITESPACE","\n        ",505],["T_FOREACH","foreach",506],["T_WHITESPACE"," ",506],"(",["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","_storeManager",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","getStores",506],"(",")",["T_WHITESPACE"," ",506],["T_AS","as",506],["T_WHITESPACE"," ",506],["T_VARIABLE","$store",506],")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n            ",506],["T_VARIABLE","$actualStoreTables",507],"[","]",["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","getFlatTableName",507],"(",["T_VARIABLE","$store",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","getId",507],"(",")",")",";",["T_WHITESPACE","\n        ",507],"}",["T_WHITESPACE","\n\n        ",508],["T_VARIABLE","$tablesToDelete",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_STRING","array_diff",510],"(",["T_VARIABLE","$existentTables",510],",",["T_WHITESPACE"," ",510],["T_VARIABLE","$actualStoreTables",510],")",";",["T_WHITESPACE","\n\n        ",510],["T_FOREACH","foreach",512],["T_WHITESPACE"," ",512],"(",["T_VARIABLE","$tablesToDelete",512],["T_WHITESPACE"," ",512],["T_AS","as",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$table",512],")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$connection",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","dropTable",513],"(",["T_VARIABLE","$table",513],")",";",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE","\n    ",514],"}",["T_WHITESPACE","\n",515],"}",["T_WHITESPACE","\n",516]]
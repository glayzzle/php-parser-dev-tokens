[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n",5],["T_NAMESPACE","namespace",6],["T_WHITESPACE"," ",6],["T_STRING","Magento",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Catalog",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Helper",6],";",["T_WHITESPACE","\n\n",6],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Magento",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Catalog",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Api",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CategoryRepositoryInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ProductRepositoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Magento",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Framework",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Exception",10],["T_NS_SEPARATOR","\\",10],["T_STRING","NoSuchEntityException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Pricing",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PriceCurrencyInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Magento",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tax",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Api",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Data",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TaxClassKeyInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Magento",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Customer",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Model",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Session",13],["T_WHITESPACE"," ",13],["T_AS","as",13],["T_WHITESPACE"," ",13],["T_STRING","CustomerSession",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Tax",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Model",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Config",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Catalog data helper\n * @SuppressWarnings(PHPMD.TooManyFields)\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",16],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","Data",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Magento",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Framework",21],["T_NS_SEPARATOR","\\",21],["T_STRING","App",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Helper",21],["T_NS_SEPARATOR","\\",21],["T_STRING","AbstractHelper",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_CONST","const",23],["T_WHITESPACE"," ",23],["T_STRING","PRICE_SCOPE_GLOBAL",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_LNUMBER","0",23],";",["T_WHITESPACE","\n\n    ",23],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","PRICE_SCOPE_WEBSITE",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_LNUMBER","1",25],";",["T_WHITESPACE","\n\n    ",25],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","XML_PATH_PRICE_SCOPE",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'catalog\/price\/scope'",27],";",["T_WHITESPACE","\n\n    ",27],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","CONFIG_USE_STATIC_URLS",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'cms\/wysiwyg\/use_static_urls_in_catalog'",29],";",["T_WHITESPACE","\n\n    ",29],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","CONFIG_PARSE_URL_DIRECTIVES",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'catalog\/frontend\/parse_url_directives'",31],";",["T_WHITESPACE","\n\n    ",31],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","XML_PATH_DISPLAY_PRODUCT_COUNT",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'catalog\/layered_navigation\/display_product_count'",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Cache context\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","CONTEXT_CATALOG_SORT_DIRECTION",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'catalog_sort_direction'",38],";",["T_WHITESPACE","\n\n    ",38],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","CONTEXT_CATALOG_SORT_ORDER",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'catalog_sort_order'",40],";",["T_WHITESPACE","\n\n    ",40],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","CONTEXT_CATALOG_DISPLAY_MODE",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'catalog_mode'",42],";",["T_WHITESPACE","\n\n    ",42],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","CONTEXT_CATALOG_LIMIT",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'catalog_limit'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Breadcrumb Path cache\n     *\n     * @var string\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_categoryPath",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Currently selected store ID if applicable\n     *\n     * @var int\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_storeId",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_coreRegistry",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Catalog product\n     *\n     * @var Product\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_catalogProduct",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Catalog category\n     *\n     * @var Category\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_catalogCategory",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Stdlib\\StringUtils\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$string",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_templateFilterModel",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Catalog session\n     *\n     * @var \\Magento\\Catalog\\Model\\Session\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$_catalogSession",96],";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Store manager\n     *\n     * @var \\Magento\\Store\\Model\\StoreManagerInterface\n     *\/",98],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_storeManager",103],";",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Template filter factory\n     *\n     * @var \\Magento\\Catalog\\Model\\Template\\Filter\\Factory\n     *\/",105],["T_WHITESPACE","\n    ",109],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$_templateFilterFactory",110],";",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Tax class key factory\n     *\n     * @var \\Magento\\Tax\\Api\\Data\\TaxClassKeyInterfaceFactory\n     *\/",112],["T_WHITESPACE","\n    ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$_taxClassKeyFactory",117],";",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Tax helper\n     *\n     * @var \\Magento\\Tax\\Model\\Config\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$_taxConfig",124],";",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Quote details factory\n     *\n     * @var \\Magento\\Tax\\Api\\Data\\QuoteDetailsInterfaceFactory\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$_quoteDetailsFactory",131],";",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Quote details item factory\n     *\n     * @var \\Magento\\Tax\\Api\\Data\\QuoteDetailsItemInterfaceFactory\n     *\/",133],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$_quoteDetailsItemFactory",138],";",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * @var CustomerSession\n     *\/",140],["T_WHITESPACE","\n    ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$_customerSession",143],";",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Tax calculation service interface\n     *\n     * @var \\Magento\\Tax\\Api\\TaxCalculationInterface\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$_taxCalculationService",150],";",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Price currency\n     *\n     * @var PriceCurrencyInterface\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$priceCurrency",157],";",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * @var ProductRepositoryInterface\n     *\/",159],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$productRepository",162],";",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * @var CategoryRepositoryInterface\n     *\/",164],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$categoryRepository",167],";",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\GroupRepositoryInterface\n     *\/",169],["T_WHITESPACE","\n    ",171],["T_PROTECTED","protected",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$customerGroupRepository",172],";",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\Data\\AddressInterfaceFactory\n     *\/",174],["T_WHITESPACE","\n    ",176],["T_PROTECTED","protected",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$addressFactory",177],";",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Customer\\Api\\Data\\RegionInterfaceFactory\n     *\/",179],["T_WHITESPACE","\n    ",181],["T_PROTECTED","protected",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$regionFactory",182],";",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * @param \\Magento\\Framework\\App\\Helper\\Context $context\n     * @param \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n     * @param \\Magento\\Catalog\\Model\\Session $catalogSession\n     * @param \\Magento\\Framework\\Stdlib\\StringUtils $string\n     * @param Category $catalogCategory\n     * @param Product $catalogProduct\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Magento\\Catalog\\Model\\Template\\Filter\\Factory $templateFilterFactory\n     * @param string $templateFilterModel\n     * @param \\Magento\\Tax\\Api\\Data\\TaxClassKeyInterfaceFactory $taxClassKeyFactory\n     * @param Config $taxConfig\n     * @param \\Magento\\Tax\\Api\\Data\\QuoteDetailsInterfaceFactory $quoteDetailsFactory\n     * @param \\Magento\\Tax\\Api\\Data\\QuoteDetailsItemInterfaceFactory $quoteDetailsItemFactory\n     * @param \\Magento\\Tax\\Api\\TaxCalculationInterface $taxCalculationService\n     * @param CustomerSession $customerSession\n     * @param PriceCurrencyInterface $priceCurrency\n     * @param ProductRepositoryInterface $productRepository\n     * @param CategoryRepositoryInterface $categoryRepository\n     * @param \\Magento\\Customer\\Api\\GroupRepositoryInterface $customerGroupRepository\n     * @param \\Magento\\Customer\\Api\\Data\\AddressInterfaceFactory $addressFactory\n     * @param \\Magento\\Customer\\Api\\Data\\RegionInterfaceFactory $regionFactory\n     * @SuppressWarnings(PHPMD.ExcessiveParameterList)\n     *\/",184],["T_WHITESPACE","\n    ",207],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","__construct",208],"(",["T_WHITESPACE","\n        ",208],["T_NS_SEPARATOR","\\",209],["T_STRING","Magento",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Framework",209],["T_NS_SEPARATOR","\\",209],["T_STRING","App",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Helper",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Context",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$context",209],",",["T_WHITESPACE","\n        ",209],["T_NS_SEPARATOR","\\",210],["T_STRING","Magento",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Store",210],["T_NS_SEPARATOR","\\",210],["T_STRING","Model",210],["T_NS_SEPARATOR","\\",210],["T_STRING","StoreManagerInterface",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$storeManager",210],",",["T_WHITESPACE","\n        ",210],["T_NS_SEPARATOR","\\",211],["T_STRING","Magento",211],["T_NS_SEPARATOR","\\",211],["T_STRING","Catalog",211],["T_NS_SEPARATOR","\\",211],["T_STRING","Model",211],["T_NS_SEPARATOR","\\",211],["T_STRING","Session",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$catalogSession",211],",",["T_WHITESPACE","\n        ",211],["T_NS_SEPARATOR","\\",212],["T_STRING","Magento",212],["T_NS_SEPARATOR","\\",212],["T_STRING","Framework",212],["T_NS_SEPARATOR","\\",212],["T_STRING","Stdlib",212],["T_NS_SEPARATOR","\\",212],["T_STRING","StringUtils",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$string",212],",",["T_WHITESPACE","\n        ",212],["T_STRING","Category",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$catalogCategory",213],",",["T_WHITESPACE","\n        ",213],["T_STRING","Product",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$catalogProduct",214],",",["T_WHITESPACE","\n        ",214],["T_NS_SEPARATOR","\\",215],["T_STRING","Magento",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Framework",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Registry",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$coreRegistry",215],",",["T_WHITESPACE","\n        ",215],["T_NS_SEPARATOR","\\",216],["T_STRING","Magento",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Catalog",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Model",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Template",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Filter",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Factory",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$templateFilterFactory",216],",",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$templateFilterModel",217],",",["T_WHITESPACE","\n        ",217],["T_NS_SEPARATOR","\\",218],["T_STRING","Magento",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Tax",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Api",218],["T_NS_SEPARATOR","\\",218],["T_STRING","Data",218],["T_NS_SEPARATOR","\\",218],["T_STRING","TaxClassKeyInterfaceFactory",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$taxClassKeyFactory",218],",",["T_WHITESPACE","\n        ",218],["T_NS_SEPARATOR","\\",219],["T_STRING","Magento",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Tax",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Model",219],["T_NS_SEPARATOR","\\",219],["T_STRING","Config",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$taxConfig",219],",",["T_WHITESPACE","\n        ",219],["T_NS_SEPARATOR","\\",220],["T_STRING","Magento",220],["T_NS_SEPARATOR","\\",220],["T_STRING","Tax",220],["T_NS_SEPARATOR","\\",220],["T_STRING","Api",220],["T_NS_SEPARATOR","\\",220],["T_STRING","Data",220],["T_NS_SEPARATOR","\\",220],["T_STRING","QuoteDetailsInterfaceFactory",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$quoteDetailsFactory",220],",",["T_WHITESPACE","\n        ",220],["T_NS_SEPARATOR","\\",221],["T_STRING","Magento",221],["T_NS_SEPARATOR","\\",221],["T_STRING","Tax",221],["T_NS_SEPARATOR","\\",221],["T_STRING","Api",221],["T_NS_SEPARATOR","\\",221],["T_STRING","Data",221],["T_NS_SEPARATOR","\\",221],["T_STRING","QuoteDetailsItemInterfaceFactory",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$quoteDetailsItemFactory",221],",",["T_WHITESPACE","\n        ",221],["T_NS_SEPARATOR","\\",222],["T_STRING","Magento",222],["T_NS_SEPARATOR","\\",222],["T_STRING","Tax",222],["T_NS_SEPARATOR","\\",222],["T_STRING","Api",222],["T_NS_SEPARATOR","\\",222],["T_STRING","TaxCalculationInterface",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$taxCalculationService",222],",",["T_WHITESPACE","\n        ",222],["T_STRING","CustomerSession",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$customerSession",223],",",["T_WHITESPACE","\n        ",223],["T_STRING","PriceCurrencyInterface",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$priceCurrency",224],",",["T_WHITESPACE","\n        ",224],["T_STRING","ProductRepositoryInterface",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$productRepository",225],",",["T_WHITESPACE","\n        ",225],["T_STRING","CategoryRepositoryInterface",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$categoryRepository",226],",",["T_WHITESPACE","\n        ",226],["T_NS_SEPARATOR","\\",227],["T_STRING","Magento",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Customer",227],["T_NS_SEPARATOR","\\",227],["T_STRING","Api",227],["T_NS_SEPARATOR","\\",227],["T_STRING","GroupRepositoryInterface",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$customerGroupRepository",227],",",["T_WHITESPACE","\n        ",227],["T_NS_SEPARATOR","\\",228],["T_STRING","Magento",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Customer",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Api",228],["T_NS_SEPARATOR","\\",228],["T_STRING","Data",228],["T_NS_SEPARATOR","\\",228],["T_STRING","AddressInterfaceFactory",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$addressFactory",228],",",["T_WHITESPACE","\n        ",228],["T_NS_SEPARATOR","\\",229],["T_STRING","Magento",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Customer",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Api",229],["T_NS_SEPARATOR","\\",229],["T_STRING","Data",229],["T_NS_SEPARATOR","\\",229],["T_STRING","RegionInterfaceFactory",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$regionFactory",229],["T_WHITESPACE","\n    ",229],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_storeManager",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$storeManager",231],";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_catalogSession",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$catalogSession",232],";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_templateFilterFactory",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$templateFilterFactory",233],";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","string",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$string",234],";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_catalogCategory",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$catalogCategory",235],";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_catalogProduct",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$catalogProduct",236],";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_coreRegistry",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$coreRegistry",237],";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_templateFilterModel",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$templateFilterModel",238],";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_taxClassKeyFactory",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$taxClassKeyFactory",239],";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_taxConfig",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$taxConfig",240],";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_quoteDetailsFactory",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$quoteDetailsFactory",241],";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_quoteDetailsItemFactory",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$quoteDetailsItemFactory",242],";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_taxCalculationService",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$taxCalculationService",243],";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_customerSession",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$customerSession",244],";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","priceCurrency",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$priceCurrency",245],";",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","productRepository",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$productRepository",246],";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","categoryRepository",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$categoryRepository",247],";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","customerGroupRepository",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$customerGroupRepository",248],";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","addressFactory",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$addressFactory",249],";",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","regionFactory",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$regionFactory",250],";",["T_WHITESPACE","\n        ",250],["T_STRING","parent",251],["T_DOUBLE_COLON","::",251],["T_STRING","__construct",251],"(",["T_VARIABLE","$context",251],")",";",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * Set a specified store ID value\n     *\n     * @param int $store\n     * @return $this\n     *\/",254],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","setStoreId",260],"(",["T_VARIABLE","$store",260],")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_storeId",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$store",262],";",["T_WHITESPACE","\n        ",262],["T_RETURN","return",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],";",["T_WHITESPACE","\n    ",263],"}",["T_WHITESPACE","\n\n    ",264],["T_DOC_COMMENT","\/**\n     * Return current category path or get it from current category\n     * and creating array of categories|product paths for breadcrumbs\n     *\n     * @return string\n     *\/",266],["T_WHITESPACE","\n    ",271],["T_PUBLIC","public",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","getBreadcrumbPath",272],"(",")",["T_WHITESPACE","\n    ",272],"{",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","!",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_categoryPath",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n\n            ",274],["T_VARIABLE","$path",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],"[","]",";",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$category",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getCategory",277],"(",")",";",["T_WHITESPACE","\n            ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$category",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$pathInStore",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$category",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getPathInStore",279],"(",")",";",["T_WHITESPACE","\n                ",279],["T_VARIABLE","$pathIds",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_STRING","array_reverse",280],"(",["T_STRING","explode",280],"(",["T_CONSTANT_ENCAPSED_STRING","','",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$pathInStore",280],")",")",";",["T_WHITESPACE","\n\n                ",280],["T_VARIABLE","$categories",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$category",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getParentCategories",282],"(",")",";",["T_WHITESPACE","\n\n                ",282],["T_COMMENT","\/\/ add category path breadcrumb\n",284],["T_WHITESPACE","                ",285],["T_FOREACH","foreach",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$pathIds",285],["T_WHITESPACE"," ",285],["T_AS","as",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$categoryId",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                    ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_ISSET","isset",286],"(",["T_VARIABLE","$categories",286],"[",["T_VARIABLE","$categoryId",286],"]",")",["T_WHITESPACE"," ",286],["T_BOOLEAN_AND","&&",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$categories",286],"[",["T_VARIABLE","$categoryId",286],"]",["T_OBJECT_OPERATOR","->",286],["T_STRING","getName",286],"(",")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n                        ",286],["T_VARIABLE","$path",287],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",287],["T_WHITESPACE"," ",287],".",["T_WHITESPACE"," ",287],["T_VARIABLE","$categoryId",287],"]",["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],"[",["T_WHITESPACE","\n                            ",287],["T_CONSTANT_ENCAPSED_STRING","'label'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$categories",288],"[",["T_VARIABLE","$categoryId",288],"]",["T_OBJECT_OPERATOR","->",288],["T_STRING","getName",288],"(",")",",",["T_WHITESPACE","\n                            ",288],["T_CONSTANT_ENCAPSED_STRING","'link'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_isCategoryLink",289],"(",["T_VARIABLE","$categoryId",289],")",["T_WHITESPACE"," ",289],"?",["T_WHITESPACE"," ",289],["T_VARIABLE","$categories",289],"[",["T_VARIABLE","$categoryId",289],"]",["T_OBJECT_OPERATOR","->",289],["T_STRING","getUrl",289],"(",")",["T_WHITESPACE"," ",289],":",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","''",289],["T_WHITESPACE","\n                        ",289],"]",";",["T_WHITESPACE","\n                    ",290],"}",["T_WHITESPACE","\n                ",291],"}",["T_WHITESPACE","\n            ",292],"}",["T_WHITESPACE","\n\n            ",293],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getProduct",295],"(",")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n                ",295],["T_VARIABLE","$path",296],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",296],"]",["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getProduct",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","getName",296],"(",")","]",";",["T_WHITESPACE","\n            ",296],"}",["T_WHITESPACE","\n\n            ",297],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_categoryPath",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$path",299],";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n        ",300],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_categoryPath",301],";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_DOC_COMMENT","\/**\n     * Check is category link\n     *\n     * @param int $categoryId\n     * @return bool\n     *\/",304],["T_WHITESPACE","\n    ",309],["T_PROTECTED","protected",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","_isCategoryLink",310],"(",["T_VARIABLE","$categoryId",310],")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getProduct",312],"(",")",")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_STRING","true",313],";",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n        ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$categoryId",315],["T_WHITESPACE"," ",315],["T_IS_NOT_EQUAL","!=",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getCategory",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","getId",315],"(",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n            ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_STRING","true",316],";",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE","\n        ",317],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_STRING","false",318],";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_DOC_COMMENT","\/**\n     * Return current category object\n     *\n     * @return \\Magento\\Catalog\\Model\\Category|null\n     *\/",321],["T_WHITESPACE","\n    ",325],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","getCategory",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_coreRegistry",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","registry",328],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",328],")",";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n    ",329],["T_DOC_COMMENT","\/**\n     * Retrieve current Product object\n     *\n     * @return \\Magento\\Catalog\\Model\\Product|null\n     *\/",331],["T_WHITESPACE","\n    ",335],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","getProduct",336],"(",")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","_coreRegistry",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","registry",338],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",338],")",";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Retrieve Visitor\/Customer Last Viewed URL\n     *\n     * @return string\n     *\/",341],["T_WHITESPACE","\n    ",345],["T_PUBLIC","public",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","getLastViewedUrl",346],"(",")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$productId",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_catalogSession",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getLastViewedProductId",348],"(",")",";",["T_WHITESPACE","\n        ",348],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_VARIABLE","$productId",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n            ",349],["T_TRY","try",350],["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n                ",350],["T_VARIABLE","$product",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","productRepository",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getById",351],"(",["T_VARIABLE","$productId",351],")",";",["T_WHITESPACE","\n            ",351],"}",["T_WHITESPACE"," ",352],["T_CATCH","catch",352],["T_WHITESPACE"," ",352],"(",["T_STRING","NoSuchEntityException",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$e",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n                ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","''",353],";",["T_WHITESPACE","\n            ",353],"}",["T_WHITESPACE","\n            ",354],["T_COMMENT","\/* @var $product \\Magento\\Catalog\\Model\\Product *\/",355],["T_WHITESPACE","\n            ",355],["T_IF","if",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_catalogProduct",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","canShow",356],"(",["T_VARIABLE","$product",356],",",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'catalog'",356],")",")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n                ",356],["T_RETURN","return",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$product",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getProductUrl",357],"(",")",";",["T_WHITESPACE","\n            ",357],"}",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$categoryId",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","_catalogSession",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getLastViewedCategoryId",360],"(",")",";",["T_WHITESPACE","\n        ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(",["T_VARIABLE","$categoryId",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_TRY","try",362],["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                ",362],["T_VARIABLE","$category",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","categoryRepository",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","get",363],"(",["T_VARIABLE","$categoryId",363],")",";",["T_WHITESPACE","\n            ",363],"}",["T_WHITESPACE"," ",364],["T_CATCH","catch",364],["T_WHITESPACE"," ",364],"(",["T_STRING","NoSuchEntityException",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$e",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n                ",364],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","''",365],";",["T_WHITESPACE","\n            ",365],"}",["T_WHITESPACE","\n            ",366],["T_COMMENT","\/* @var $category \\Magento\\Catalog\\Model\\Category *\/",367],["T_WHITESPACE","\n            ",367],["T_IF","if",368],["T_WHITESPACE"," ",368],"(","!",["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_catalogCategory",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","canShow",368],"(",["T_VARIABLE","$category",368],")",")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n                ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","''",369],";",["T_WHITESPACE","\n            ",369],"}",["T_WHITESPACE","\n            ",370],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$category",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getCategoryUrl",371],"(",")",";",["T_WHITESPACE","\n        ",371],"}",["T_WHITESPACE","\n        ",372],["T_RETURN","return",373],["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","''",373],";",["T_WHITESPACE","\n    ",373],"}",["T_WHITESPACE","\n\n    ",374],["T_DOC_COMMENT","\/**\n     * Split SKU of an item by dashes and spaces\n     * Words will not be broken, unless this length is greater than $length\n     *\n     * @param string $sku\n     * @param int $length\n     * @return string[]\n     *\/",376],["T_WHITESPACE","\n    ",383],["T_PUBLIC","public",384],["T_WHITESPACE"," ",384],["T_FUNCTION","function",384],["T_WHITESPACE"," ",384],["T_STRING","splitSku",384],"(",["T_VARIABLE","$sku",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$length",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_LNUMBER","30",384],")",["T_WHITESPACE","\n    ",384],"{",["T_WHITESPACE","\n        ",385],["T_RETURN","return",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","string",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","split",386],"(",["T_VARIABLE","$sku",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$length",386],",",["T_WHITESPACE"," ",386],["T_STRING","true",386],",",["T_WHITESPACE"," ",386],["T_STRING","false",386],",",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","'[\\-\\s]'",386],")",";",["T_WHITESPACE","\n    ",386],"}",["T_WHITESPACE","\n\n    ",387],["T_DOC_COMMENT","\/**\n     * Retrieve attribute hidden fields\n     *\n     * @return array\n     *\/",389],["T_WHITESPACE","\n    ",393],["T_PUBLIC","public",394],["T_WHITESPACE"," ",394],["T_FUNCTION","function",394],["T_WHITESPACE"," ",394],["T_STRING","getAttributeHiddenFields",394],"(",")",["T_WHITESPACE","\n    ",394],"{",["T_WHITESPACE","\n        ",395],["T_IF","if",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_coreRegistry",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","registry",396],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_type_hidden_fields'",396],")",")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n            ",396],["T_RETURN","return",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_coreRegistry",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","registry",397],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_type_hidden_fields'",397],")",";",["T_WHITESPACE","\n        ",397],"}",["T_WHITESPACE"," ",398],["T_ELSE","else",398],["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_RETURN","return",399],["T_WHITESPACE"," ",399],"[","]",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n    ",400],"}",["T_WHITESPACE","\n\n    ",401],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Price Scope\n     *\n     * @return int\n     *\/",403],["T_WHITESPACE","\n    ",407],["T_PUBLIC","public",408],["T_WHITESPACE"," ",408],["T_FUNCTION","function",408],["T_WHITESPACE"," ",408],["T_STRING","getPriceScope",408],"(",")",["T_WHITESPACE","\n    ",408],"{",["T_WHITESPACE","\n        ",409],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","scopeConfig",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getValue",410],"(",["T_WHITESPACE","\n            ",410],["T_STRING","self",411],["T_DOUBLE_COLON","::",411],["T_STRING","XML_PATH_PRICE_SCOPE",411],",",["T_WHITESPACE","\n            ",411],["T_NS_SEPARATOR","\\",412],["T_STRING","Magento",412],["T_NS_SEPARATOR","\\",412],["T_STRING","Store",412],["T_NS_SEPARATOR","\\",412],["T_STRING","Model",412],["T_NS_SEPARATOR","\\",412],["T_STRING","ScopeInterface",412],["T_DOUBLE_COLON","::",412],["T_STRING","SCOPE_STORE",412],["T_WHITESPACE","\n        ",412],")",";",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Is Global Price\n     *\n     * @return bool\n     *\/",416],["T_WHITESPACE","\n    ",420],["T_PUBLIC","public",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","isPriceGlobal",421],"(",")",["T_WHITESPACE","\n    ",421],"{",["T_WHITESPACE","\n        ",422],["T_RETURN","return",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","getPriceScope",423],"(",")",["T_WHITESPACE"," ",423],["T_IS_EQUAL","==",423],["T_WHITESPACE"," ",423],["T_STRING","self",423],["T_DOUBLE_COLON","::",423],["T_STRING","PRICE_SCOPE_GLOBAL",423],";",["T_WHITESPACE","\n    ",423],"}",["T_WHITESPACE","\n\n    ",424],["T_DOC_COMMENT","\/**\n     * Check if the store is configured to use static URLs for media\n     *\n     * @return bool\n     *\/",426],["T_WHITESPACE","\n    ",430],["T_PUBLIC","public",431],["T_WHITESPACE"," ",431],["T_FUNCTION","function",431],["T_WHITESPACE"," ",431],["T_STRING","isUsingStaticUrlsAllowed",431],"(",")",["T_WHITESPACE","\n    ",431],"{",["T_WHITESPACE","\n        ",432],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","scopeConfig",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","isSetFlag",433],"(",["T_WHITESPACE","\n            ",433],["T_STRING","self",434],["T_DOUBLE_COLON","::",434],["T_STRING","CONFIG_USE_STATIC_URLS",434],",",["T_WHITESPACE","\n            ",434],["T_NS_SEPARATOR","\\",435],["T_STRING","Magento",435],["T_NS_SEPARATOR","\\",435],["T_STRING","Store",435],["T_NS_SEPARATOR","\\",435],["T_STRING","Model",435],["T_NS_SEPARATOR","\\",435],["T_STRING","ScopeInterface",435],["T_DOUBLE_COLON","::",435],["T_STRING","SCOPE_STORE",435],",",["T_WHITESPACE","\n            ",435],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_storeId",436],["T_WHITESPACE","\n        ",436],")",";",["T_WHITESPACE","\n    ",437],"}",["T_WHITESPACE","\n\n    ",438],["T_DOC_COMMENT","\/**\n     * Check if the parsing of URL directives is allowed for the catalog\n     *\n     * @return bool\n     *\/",440],["T_WHITESPACE","\n    ",444],["T_PUBLIC","public",445],["T_WHITESPACE"," ",445],["T_FUNCTION","function",445],["T_WHITESPACE"," ",445],["T_STRING","isUrlDirectivesParsingAllowed",445],"(",")",["T_WHITESPACE","\n    ",445],"{",["T_WHITESPACE","\n        ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","scopeConfig",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","isSetFlag",447],"(",["T_WHITESPACE","\n            ",447],["T_STRING","self",448],["T_DOUBLE_COLON","::",448],["T_STRING","CONFIG_PARSE_URL_DIRECTIVES",448],",",["T_WHITESPACE","\n            ",448],["T_NS_SEPARATOR","\\",449],["T_STRING","Magento",449],["T_NS_SEPARATOR","\\",449],["T_STRING","Store",449],["T_NS_SEPARATOR","\\",449],["T_STRING","Model",449],["T_NS_SEPARATOR","\\",449],["T_STRING","ScopeInterface",449],["T_DOUBLE_COLON","::",449],["T_STRING","SCOPE_STORE",449],",",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_storeId",450],["T_WHITESPACE","\n        ",450],")",";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * Retrieve template processor for catalog content\n     *\n     * @return \\Magento\\Framework\\Filter\\Template\n     *\/",454],["T_WHITESPACE","\n    ",458],["T_PUBLIC","public",459],["T_WHITESPACE"," ",459],["T_FUNCTION","function",459],["T_WHITESPACE"," ",459],["T_STRING","getPageTemplateProcessor",459],"(",")",["T_WHITESPACE","\n    ",459],"{",["T_WHITESPACE","\n        ",460],["T_RETURN","return",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_templateFilterFactory",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","create",461],"(",["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_templateFilterModel",461],")",";",["T_WHITESPACE","\n    ",461],"}",["T_WHITESPACE","\n\n    ",462],["T_DOC_COMMENT","\/**\n     * Whether to display items count for each filter option\n     * @param int $storeId Store view ID\n     * @return bool\n     *\/",464],["T_WHITESPACE","\n    ",468],["T_PUBLIC","public",469],["T_WHITESPACE"," ",469],["T_FUNCTION","function",469],["T_WHITESPACE"," ",469],["T_STRING","shouldDisplayProductCountOnLayer",469],"(",["T_VARIABLE","$storeId",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_STRING","null",469],")",["T_WHITESPACE","\n    ",469],"{",["T_WHITESPACE","\n        ",470],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","scopeConfig",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","isSetFlag",471],"(",["T_WHITESPACE","\n            ",471],["T_STRING","self",472],["T_DOUBLE_COLON","::",472],["T_STRING","XML_PATH_DISPLAY_PRODUCT_COUNT",472],",",["T_WHITESPACE","\n            ",472],["T_NS_SEPARATOR","\\",473],["T_STRING","Magento",473],["T_NS_SEPARATOR","\\",473],["T_STRING","Store",473],["T_NS_SEPARATOR","\\",473],["T_STRING","Model",473],["T_NS_SEPARATOR","\\",473],["T_STRING","ScopeInterface",473],["T_DOUBLE_COLON","::",473],["T_STRING","SCOPE_STORE",473],",",["T_WHITESPACE","\n            ",473],["T_VARIABLE","$storeId",474],["T_WHITESPACE","\n        ",474],")",";",["T_WHITESPACE","\n    ",475],"}",["T_WHITESPACE","\n\n    ",476],["T_DOC_COMMENT","\/**\n     * @param array $taxAddress\n     * @return \\Magento\\Customer\\Api\\Data\\AddressInterface|null\n     *\/",478],["T_WHITESPACE","\n    ",481],["T_PRIVATE","private",482],["T_WHITESPACE"," ",482],["T_FUNCTION","function",482],["T_WHITESPACE"," ",482],["T_STRING","convertDefaultTaxAddress",482],"(",["T_ARRAY","array",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$taxAddress",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_STRING","null",482],")",["T_WHITESPACE","\n    ",482],"{",["T_WHITESPACE","\n        ",483],["T_IF","if",484],["T_WHITESPACE"," ",484],"(",["T_EMPTY","empty",484],"(",["T_VARIABLE","$taxAddress",484],")",")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n            ",484],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_STRING","null",485],";",["T_WHITESPACE","\n        ",485],"}",["T_WHITESPACE","\n        ",486],["T_DOC_COMMENT","\/** @var \\Magento\\Customer\\Api\\Data\\AddressInterface $addressDataObject *\/",487],["T_WHITESPACE","\n        ",487],["T_VARIABLE","$addressDataObject",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","addressFactory",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","create",488],"(",")",["T_WHITESPACE","\n            ",488],["T_OBJECT_OPERATOR","->",489],["T_STRING","setCountryId",489],"(",["T_VARIABLE","$taxAddress",489],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",489],"]",")",["T_WHITESPACE","\n            ",489],["T_OBJECT_OPERATOR","->",490],["T_STRING","setPostcode",490],"(",["T_VARIABLE","$taxAddress",490],"[",["T_CONSTANT_ENCAPSED_STRING","'postcode'",490],"]",")",";",["T_WHITESPACE","\n\n        ",490],["T_IF","if",492],["T_WHITESPACE"," ",492],"(",["T_ISSET","isset",492],"(",["T_VARIABLE","$taxAddress",492],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",492],"]",")",")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n            ",492],["T_VARIABLE","$addressDataObject",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","setRegion",493],"(",["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","regionFactory",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","create",493],"(",")",["T_OBJECT_OPERATOR","->",493],["T_STRING","setRegionId",493],"(",["T_VARIABLE","$taxAddress",493],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",493],"]",")",")",";",["T_WHITESPACE","\n        ",493],"}",["T_WHITESPACE","\n        ",494],["T_RETURN","return",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$addressDataObject",495],";",["T_WHITESPACE","\n    ",495],"}",["T_WHITESPACE","\n\n    ",496],["T_DOC_COMMENT","\/**\n     * Get product price with all tax settings processing\n     *\n     * @param   \\Magento\\Catalog\\Model\\Product $product\n     * @param   float $price inputted product price\n     * @param   bool $includingTax return price include tax flag\n     * @param   null|\\Magento\\Customer\\Model\\Address\\AbstractAddress $shippingAddress\n     * @param   null|\\Magento\\Customer\\Model\\Address\\AbstractAddress $billingAddress\n     * @param   null|int $ctc customer tax class\n     * @param   null|string|bool|int|\\Magento\\Store\\Model\\Store $store\n     * @param   bool $priceIncludesTax flag what price parameter contain tax\n     * @param   bool $roundPrice\n     * @return  float\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     *\/",498],["T_WHITESPACE","\n    ",514],["T_PUBLIC","public",515],["T_WHITESPACE"," ",515],["T_FUNCTION","function",515],["T_WHITESPACE"," ",515],["T_STRING","getTaxPrice",515],"(",["T_WHITESPACE","\n        ",515],["T_VARIABLE","$product",516],",",["T_WHITESPACE","\n        ",516],["T_VARIABLE","$price",517],",",["T_WHITESPACE","\n        ",517],["T_VARIABLE","$includingTax",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_STRING","null",518],",",["T_WHITESPACE","\n        ",518],["T_VARIABLE","$shippingAddress",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_STRING","null",519],",",["T_WHITESPACE","\n        ",519],["T_VARIABLE","$billingAddress",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_STRING","null",520],",",["T_WHITESPACE","\n        ",520],["T_VARIABLE","$ctc",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_STRING","null",521],",",["T_WHITESPACE","\n        ",521],["T_VARIABLE","$store",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_STRING","null",522],",",["T_WHITESPACE","\n        ",522],["T_VARIABLE","$priceIncludesTax",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_STRING","null",523],",",["T_WHITESPACE","\n        ",523],["T_VARIABLE","$roundPrice",524],["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],["T_STRING","true",524],["T_WHITESPACE","\n    ",524],")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n        ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(","!",["T_VARIABLE","$price",526],")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$price",527],";",["T_WHITESPACE","\n        ",527],"}",["T_WHITESPACE","\n\n        ",528],["T_VARIABLE","$store",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","_storeManager",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getStore",530],"(",["T_VARIABLE","$store",530],")",";",["T_WHITESPACE","\n        ",530],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","_taxConfig",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","needPriceConversion",531],"(",["T_VARIABLE","$store",531],")",")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_IF","if",532],["T_WHITESPACE"," ",532],"(",["T_VARIABLE","$priceIncludesTax",532],["T_WHITESPACE"," ",532],["T_IS_IDENTICAL","===",532],["T_WHITESPACE"," ",532],["T_STRING","null",532],")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n                ",532],["T_VARIABLE","$priceIncludesTax",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_taxConfig",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","priceIncludesTax",533],"(",["T_VARIABLE","$store",533],")",";",["T_WHITESPACE","\n            ",533],"}",["T_WHITESPACE","\n\n            ",534],["T_VARIABLE","$shippingAddressDataObject",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_STRING","null",536],";",["T_WHITESPACE","\n            ",536],["T_IF","if",537],["T_WHITESPACE"," ",537],"(",["T_VARIABLE","$shippingAddress",537],["T_WHITESPACE"," ",537],["T_IS_IDENTICAL","===",537],["T_WHITESPACE"," ",537],["T_STRING","null",537],")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n                ",537],["T_VARIABLE","$shippingAddressDataObject",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE","\n                    ",538],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","convertDefaultTaxAddress",539],"(",["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","_customerSession",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","getDefaultTaxShippingAddress",539],"(",")",")",";",["T_WHITESPACE","\n            ",539],"}",["T_WHITESPACE"," ",540],["T_ELSEIF","elseif",540],["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$shippingAddress",540],["T_WHITESPACE"," ",540],["T_INSTANCEOF","instanceof",540],["T_WHITESPACE"," ",540],["T_NS_SEPARATOR","\\",540],["T_STRING","Magento",540],["T_NS_SEPARATOR","\\",540],["T_STRING","Customer",540],["T_NS_SEPARATOR","\\",540],["T_STRING","Model",540],["T_NS_SEPARATOR","\\",540],["T_STRING","Address",540],["T_NS_SEPARATOR","\\",540],["T_STRING","AbstractAddress",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n                ",540],["T_VARIABLE","$shippingAddressDataObject",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_VARIABLE","$shippingAddress",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getDataModel",541],"(",")",";",["T_WHITESPACE","\n            ",541],"}",["T_WHITESPACE","\n\n            ",542],["T_VARIABLE","$billingAddressDataObject",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_STRING","null",544],";",["T_WHITESPACE","\n            ",544],["T_IF","if",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$billingAddress",545],["T_WHITESPACE"," ",545],["T_IS_IDENTICAL","===",545],["T_WHITESPACE"," ",545],["T_STRING","null",545],")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n                ",545],["T_VARIABLE","$billingAddressDataObject",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE","\n                    ",546],["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","convertDefaultTaxAddress",547],"(",["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","_customerSession",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","getDefaultTaxBillingAddress",547],"(",")",")",";",["T_WHITESPACE","\n            ",547],"}",["T_WHITESPACE"," ",548],["T_ELSEIF","elseif",548],["T_WHITESPACE"," ",548],"(",["T_VARIABLE","$billingAddress",548],["T_WHITESPACE"," ",548],["T_INSTANCEOF","instanceof",548],["T_WHITESPACE"," ",548],["T_NS_SEPARATOR","\\",548],["T_STRING","Magento",548],["T_NS_SEPARATOR","\\",548],["T_STRING","Customer",548],["T_NS_SEPARATOR","\\",548],["T_STRING","Model",548],["T_NS_SEPARATOR","\\",548],["T_STRING","Address",548],["T_NS_SEPARATOR","\\",548],["T_STRING","AbstractAddress",548],")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n                ",548],["T_VARIABLE","$billingAddressDataObject",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$billingAddress",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getDataModel",549],"(",")",";",["T_WHITESPACE","\n            ",549],"}",["T_WHITESPACE","\n\n            ",550],["T_VARIABLE","$taxClassKey",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_taxClassKeyFactory",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","create",552],"(",")",";",["T_WHITESPACE","\n            ",552],["T_VARIABLE","$taxClassKey",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","setType",553],"(",["T_STRING","TaxClassKeyInterface",553],["T_DOUBLE_COLON","::",553],["T_STRING","TYPE_ID",553],")",["T_WHITESPACE","\n                ",553],["T_OBJECT_OPERATOR","->",554],["T_STRING","setValue",554],"(",["T_VARIABLE","$product",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getTaxClassId",554],"(",")",")",";",["T_WHITESPACE","\n\n            ",554],["T_IF","if",556],["T_WHITESPACE"," ",556],"(",["T_VARIABLE","$ctc",556],["T_WHITESPACE"," ",556],["T_IS_IDENTICAL","===",556],["T_WHITESPACE"," ",556],["T_STRING","null",556],["T_WHITESPACE"," ",556],["T_BOOLEAN_AND","&&",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","_customerSession",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getCustomerGroupId",556],"(",")",["T_WHITESPACE"," ",556],["T_IS_NOT_EQUAL","!=",556],["T_WHITESPACE"," ",556],["T_STRING","null",556],")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n                ",556],["T_VARIABLE","$ctc",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","customerGroupRepository",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","getById",557],"(",["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","_customerSession",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","getCustomerGroupId",557],"(",")",")",["T_WHITESPACE","\n                    ",557],["T_OBJECT_OPERATOR","->",558],["T_STRING","getTaxClassId",558],"(",")",";",["T_WHITESPACE","\n            ",558],"}",["T_WHITESPACE","\n\n            ",559],["T_VARIABLE","$customerTaxClassKey",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","_taxClassKeyFactory",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","create",561],"(",")",";",["T_WHITESPACE","\n            ",561],["T_VARIABLE","$customerTaxClassKey",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","setType",562],"(",["T_STRING","TaxClassKeyInterface",562],["T_DOUBLE_COLON","::",562],["T_STRING","TYPE_ID",562],")",["T_WHITESPACE","\n                ",562],["T_OBJECT_OPERATOR","->",563],["T_STRING","setValue",563],"(",["T_VARIABLE","$ctc",563],")",";",["T_WHITESPACE","\n\n            ",563],["T_VARIABLE","$item",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","_quoteDetailsItemFactory",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","create",565],"(",")",";",["T_WHITESPACE","\n            ",565],["T_VARIABLE","$item",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","setQuantity",566],"(",["T_LNUMBER","1",566],")",["T_WHITESPACE","\n                ",566],["T_OBJECT_OPERATOR","->",567],["T_STRING","setCode",567],"(",["T_VARIABLE","$product",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getSku",567],"(",")",")",["T_WHITESPACE","\n                ",567],["T_OBJECT_OPERATOR","->",568],["T_STRING","setShortDescription",568],"(",["T_VARIABLE","$product",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","getShortDescription",568],"(",")",")",["T_WHITESPACE","\n                ",568],["T_OBJECT_OPERATOR","->",569],["T_STRING","setTaxClassKey",569],"(",["T_VARIABLE","$taxClassKey",569],")",["T_WHITESPACE","\n                ",569],["T_OBJECT_OPERATOR","->",570],["T_STRING","setIsTaxIncluded",570],"(",["T_VARIABLE","$priceIncludesTax",570],")",["T_WHITESPACE","\n                ",570],["T_OBJECT_OPERATOR","->",571],["T_STRING","setType",571],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",571],")",["T_WHITESPACE","\n                ",571],["T_OBJECT_OPERATOR","->",572],["T_STRING","setUnitPrice",572],"(",["T_VARIABLE","$price",572],")",";",["T_WHITESPACE","\n\n            ",572],["T_VARIABLE","$quoteDetails",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","_quoteDetailsFactory",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","create",574],"(",")",";",["T_WHITESPACE","\n            ",574],["T_VARIABLE","$quoteDetails",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","setShippingAddress",575],"(",["T_VARIABLE","$shippingAddressDataObject",575],")",["T_WHITESPACE","\n                ",575],["T_OBJECT_OPERATOR","->",576],["T_STRING","setBillingAddress",576],"(",["T_VARIABLE","$billingAddressDataObject",576],")",["T_WHITESPACE","\n                ",576],["T_OBJECT_OPERATOR","->",577],["T_STRING","setCustomerTaxClassKey",577],"(",["T_VARIABLE","$customerTaxClassKey",577],")",["T_WHITESPACE","\n                ",577],["T_OBJECT_OPERATOR","->",578],["T_STRING","setItems",578],"(","[",["T_VARIABLE","$item",578],"]",")",["T_WHITESPACE","\n                ",578],["T_OBJECT_OPERATOR","->",579],["T_STRING","setCustomerId",579],"(",["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","_customerSession",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getCustomerId",579],"(",")",")",";",["T_WHITESPACE","\n\n            ",579],["T_VARIABLE","$storeId",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_STRING","null",581],";",["T_WHITESPACE","\n            ",581],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_VARIABLE","$store",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n                ",582],["T_VARIABLE","$storeId",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_VARIABLE","$store",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getId",583],"(",")",";",["T_WHITESPACE","\n            ",583],"}",["T_WHITESPACE","\n            ",584],["T_VARIABLE","$taxDetails",585],["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","_taxCalculationService",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","calculateTax",585],"(",["T_VARIABLE","$quoteDetails",585],",",["T_WHITESPACE"," ",585],["T_VARIABLE","$storeId",585],",",["T_WHITESPACE"," ",585],["T_VARIABLE","$roundPrice",585],")",";",["T_WHITESPACE","\n            ",585],["T_VARIABLE","$items",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_VARIABLE","$taxDetails",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getItems",586],"(",")",";",["T_WHITESPACE","\n            ",586],["T_VARIABLE","$taxDetailsItem",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_STRING","array_shift",587],"(",["T_VARIABLE","$items",587],")",";",["T_WHITESPACE","\n\n            ",587],["T_IF","if",589],["T_WHITESPACE"," ",589],"(",["T_VARIABLE","$includingTax",589],["T_WHITESPACE"," ",589],["T_IS_NOT_IDENTICAL","!==",589],["T_WHITESPACE"," ",589],["T_STRING","null",589],")",["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n                ",589],["T_IF","if",590],["T_WHITESPACE"," ",590],"(",["T_VARIABLE","$includingTax",590],")",["T_WHITESPACE"," ",590],"{",["T_WHITESPACE","\n                    ",590],["T_VARIABLE","$price",591],["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_VARIABLE","$taxDetailsItem",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","getPriceInclTax",591],"(",")",";",["T_WHITESPACE","\n                ",591],"}",["T_WHITESPACE"," ",592],["T_ELSE","else",592],["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n                    ",592],["T_VARIABLE","$price",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_VARIABLE","$taxDetailsItem",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","getPrice",593],"(",")",";",["T_WHITESPACE","\n                ",593],"}",["T_WHITESPACE","\n            ",594],"}",["T_WHITESPACE"," ",595],["T_ELSE","else",595],["T_WHITESPACE"," ",595],"{",["T_WHITESPACE","\n                ",595],["T_SWITCH","switch",596],["T_WHITESPACE"," ",596],"(",["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_taxConfig",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","getPriceDisplayType",596],"(",["T_VARIABLE","$store",596],")",")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n                    ",596],["T_CASE","case",597],["T_WHITESPACE"," ",597],["T_STRING","Config",597],["T_DOUBLE_COLON","::",597],["T_STRING","DISPLAY_TYPE_EXCLUDING_TAX",597],":",["T_WHITESPACE","\n                    ",597],["T_CASE","case",598],["T_WHITESPACE"," ",598],["T_STRING","Config",598],["T_DOUBLE_COLON","::",598],["T_STRING","DISPLAY_TYPE_BOTH",598],":",["T_WHITESPACE","\n                        ",598],["T_VARIABLE","$price",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_VARIABLE","$taxDetailsItem",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","getPrice",599],"(",")",";",["T_WHITESPACE","\n                        ",599],["T_BREAK","break",600],";",["T_WHITESPACE","\n                    ",600],["T_CASE","case",601],["T_WHITESPACE"," ",601],["T_STRING","Config",601],["T_DOUBLE_COLON","::",601],["T_STRING","DISPLAY_TYPE_INCLUDING_TAX",601],":",["T_WHITESPACE","\n                        ",601],["T_VARIABLE","$price",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_VARIABLE","$taxDetailsItem",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","getPriceInclTax",602],"(",")",";",["T_WHITESPACE","\n                        ",602],["T_BREAK","break",603],";",["T_WHITESPACE","\n                    ",603],["T_DEFAULT","default",604],":",["T_WHITESPACE","\n                        ",604],["T_BREAK","break",605],";",["T_WHITESPACE","\n                ",605],"}",["T_WHITESPACE","\n            ",606],"}",["T_WHITESPACE","\n        ",607],"}",["T_WHITESPACE","\n\n        ",608],["T_IF","if",610],["T_WHITESPACE"," ",610],"(",["T_VARIABLE","$roundPrice",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_RETURN","return",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","priceCurrency",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","round",611],"(",["T_VARIABLE","$price",611],")",";",["T_WHITESPACE","\n        ",611],"}",["T_WHITESPACE"," ",612],["T_ELSE","else",612],["T_WHITESPACE"," ",612],"{",["T_WHITESPACE","\n            ",612],["T_RETURN","return",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$price",613],";",["T_WHITESPACE","\n        ",613],"}",["T_WHITESPACE","\n    ",614],"}",["T_WHITESPACE","\n",615],"}",["T_WHITESPACE","\n",616]]
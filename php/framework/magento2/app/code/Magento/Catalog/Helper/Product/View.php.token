[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_NAMESPACE","namespace",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Helper",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Product",9],";",["T_WHITESPACE","\n\n",9],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Magento",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Framework",11],["T_NS_SEPARATOR","\\",11],["T_STRING","View",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Result",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Page",11],["T_WHITESPACE"," ",11],["T_AS","as",11],["T_WHITESPACE"," ",11],["T_STRING","ResultPage",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Catalog category helper\n * @SuppressWarnings(PHPMD.CouplingBetweenObjects)\n *\/",13],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","View",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Magento",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Framework",17],["T_NS_SEPARATOR","\\",17],["T_STRING","App",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Helper",17],["T_NS_SEPARATOR","\\",17],["T_STRING","AbstractHelper",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * List of catalog product session message groups\n     *\n     * @var array\n     *\/",19],["T_WHITESPACE","\n    ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$messageGroups",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * Core registry\n     *\n     * @var \\Magento\\Framework\\Registry\n     *\/",26],["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_coreRegistry",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","null",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Catalog product\n     *\n     * @var \\Magento\\Catalog\\Helper\\Product\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_catalogProduct",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","null",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Catalog design\n     *\n     * @var \\Magento\\Catalog\\Model\\Design\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_catalogDesign",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Catalog session\n     *\n     * @var \\Magento\\Catalog\\Model\\Session\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_catalogSession",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\Framework\\Message\\ManagerInterface\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$messageManager",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @var \\Magento\\CatalogUrlRewrite\\Model\\CategoryUrlPathGenerator\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$categoryUrlPathGenerator",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * @param \\Magento\\Framework\\App\\Helper\\Context $context\n     * @param \\Magento\\Catalog\\Model\\Session $catalogSession\n     * @param \\Magento\\Catalog\\Model\\Design $catalogDesign\n     * @param \\Magento\\Catalog\\Helper\\Product $catalogProduct\n     * @param \\Magento\\Framework\\Registry $coreRegistry\n     * @param \\Magento\\Framework\\Message\\ManagerInterface $messageManager\n     * @param \\Magento\\CatalogUrlRewrite\\Model\\CategoryUrlPathGenerator $categoryUrlPathGenerator\n     * @param array $messageGroups\n     *\/",64],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","__construct",76],"(",["T_WHITESPACE","\n        ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Magento",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Framework",77],["T_NS_SEPARATOR","\\",77],["T_STRING","App",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Helper",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Context",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$context",77],",",["T_WHITESPACE","\n        ",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Magento",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Catalog",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Model",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Session",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$catalogSession",78],",",["T_WHITESPACE","\n        ",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Magento",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Catalog",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Model",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Design",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$catalogDesign",79],",",["T_WHITESPACE","\n        ",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Magento",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Catalog",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Helper",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Product",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$catalogProduct",80],",",["T_WHITESPACE","\n        ",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Magento",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Framework",81],["T_NS_SEPARATOR","\\",81],["T_STRING","Registry",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$coreRegistry",81],",",["T_WHITESPACE","\n        ",81],["T_NS_SEPARATOR","\\",82],["T_STRING","Magento",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Framework",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Message",82],["T_NS_SEPARATOR","\\",82],["T_STRING","ManagerInterface",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$messageManager",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","CatalogUrlRewrite",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Model",83],["T_NS_SEPARATOR","\\",83],["T_STRING","CategoryUrlPathGenerator",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$categoryUrlPathGenerator",83],",",["T_WHITESPACE","\n        ",83],["T_ARRAY","array",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$messageGroups",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[","]",["T_WHITESPACE","\n    ",84],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_catalogSession",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$catalogSession",86],";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_catalogDesign",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$catalogDesign",87],";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_catalogProduct",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$catalogProduct",88],";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_coreRegistry",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$coreRegistry",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","messageGroups",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$messageGroups",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","messageManager",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$messageManager",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","categoryUrlPathGenerator",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$categoryUrlPathGenerator",92],";",["T_WHITESPACE","\n        ",92],["T_STRING","parent",93],["T_DOUBLE_COLON","::",93],["T_STRING","__construct",93],"(",["T_VARIABLE","$context",93],")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Init layout for viewing product page\n     *\n     * @param \\Magento\\Framework\\View\\Result\\Page $resultPage\n     * @param \\Magento\\Catalog\\Model\\Product $product\n     * @param null|\\Magento\\Framework\\DataObject $params\n     * @return \\Magento\\Catalog\\Helper\\Product\\View\n     * @SuppressWarnings(PHPMD.CyclomaticComplexity)\n     * @SuppressWarnings(PHPMD.NPathComplexity)\n     *\/",96],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","initProductLayout",106],"(",["T_STRING","ResultPage",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$resultPage",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$product",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$params",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","null",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$settings",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_catalogDesign",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getDesignSettings",108],"(",["T_VARIABLE","$product",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$pageConfig",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$resultPage",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getConfig",109],"(",")",";",["T_WHITESPACE","\n\n        ",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$settings",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getCustomDesign",111],"(",")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_catalogDesign",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","applyCustomDesign",112],"(",["T_VARIABLE","$settings",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getCustomDesign",112],"(",")",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_COMMENT","\/\/ Apply custom page layout\n",115],["T_WHITESPACE","        ",116],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$settings",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getPageLayout",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$pageConfig",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","setPageLayout",117],"(",["T_VARIABLE","$settings",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getPageLayout",117],"(",")",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$urlSafeSku",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","rawurlencode",120],"(",["T_VARIABLE","$product",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getSku",120],"(",")",")",";",["T_WHITESPACE","\n\n        ",120],["T_COMMENT","\/\/ Load default page handles and page configurations\n",122],["T_WHITESPACE","        ",123],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$params",123],["T_WHITESPACE"," ",123],["T_BOOLEAN_AND","&&",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$params",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getBeforeHandles",123],"(",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_FOREACH","foreach",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$params",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getBeforeHandles",124],"(",")",["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$handle",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_VARIABLE","$resultPage",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","addPageLayoutHandles",125],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$product",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getId",125],"(",")",",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'sku'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$urlSafeSku",125],"]",",",["T_WHITESPACE"," ",125],["T_VARIABLE","$handle",125],")",";",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$resultPage",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","addPageLayoutHandles",126],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$product",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getTypeId",126],"(",")","]",",",["T_WHITESPACE"," ",126],["T_VARIABLE","$handle",126],",",["T_WHITESPACE"," ",126],["T_STRING","false",126],")",";",["T_WHITESPACE","\n            ",126],"}",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$resultPage",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","addPageLayoutHandles",130],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$product",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getId",130],"(",")",",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'sku'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$urlSafeSku",130],"]",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$resultPage",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","addPageLayoutHandles",131],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$product",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getTypeId",131],"(",")","]",",",["T_WHITESPACE"," ",131],["T_STRING","null",131],",",["T_WHITESPACE"," ",131],["T_STRING","false",131],")",";",["T_WHITESPACE","\n\n        ",131],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$params",133],["T_WHITESPACE"," ",133],["T_BOOLEAN_AND","&&",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$params",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getAfterHandles",133],"(",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_FOREACH","foreach",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$params",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getAfterHandles",134],"(",")",["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$handle",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$resultPage",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","addPageLayoutHandles",135],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$product",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getId",135],"(",")",",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'sku'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$urlSafeSku",135],"]",",",["T_WHITESPACE"," ",135],["T_VARIABLE","$handle",135],")",";",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$resultPage",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","addPageLayoutHandles",136],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$product",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getTypeId",136],"(",")","]",",",["T_WHITESPACE"," ",136],["T_VARIABLE","$handle",136],",",["T_WHITESPACE"," ",136],["T_STRING","false",136],")",";",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_COMMENT","\/\/ Apply custom layout update once layout is loaded\n",140],["T_WHITESPACE","        ",141],["T_VARIABLE","$update",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$resultPage",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getLayout",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getUpdate",141],"(",")",";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$layoutUpdates",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$settings",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getLayoutUpdates",142],"(",")",";",["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$layoutUpdates",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_STRING","is_array",144],"(",["T_VARIABLE","$layoutUpdates",144],")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$layoutUpdates",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$layoutUpdate",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                    ",145],["T_VARIABLE","$update",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addUpdate",146],"(",["T_VARIABLE","$layoutUpdate",146],")",";",["T_WHITESPACE","\n                ",146],"}",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$currentCategory",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_coreRegistry",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","registry",151],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",151],")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$controllerClass",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_request",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getFullActionName",152],"(",")",";",["T_WHITESPACE","\n        ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$controllerClass",153],["T_WHITESPACE"," ",153],["T_IS_NOT_EQUAL","!=",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'catalog-product-view'",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$pageConfig",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","addBodyClass",154],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog-product-view'",154],")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$pageConfig",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","addBodyClass",156],"(",["T_CONSTANT_ENCAPSED_STRING","'product-'",156],["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_VARIABLE","$product",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getUrlKey",156],"(",")",")",";",["T_WHITESPACE","\n        ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$currentCategory",157],["T_WHITESPACE"," ",157],["T_INSTANCEOF","instanceof",157],["T_WHITESPACE"," ",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Magento",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Catalog",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Model",157],["T_NS_SEPARATOR","\\",157],["T_STRING","Category",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$pageConfig",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","addBodyClass",158],"(",["T_CONSTANT_ENCAPSED_STRING","'categorypath-'",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","categoryUrlPathGenerator",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getUrlPath",158],"(",["T_VARIABLE","$currentCategory",158],")",")",["T_WHITESPACE","\n                ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","addBodyClass",159],"(",["T_CONSTANT_ENCAPSED_STRING","'category-'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$currentCategory",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getUrlKey",159],"(",")",")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n\n        ",160],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Prepares product view page - inits layout and all needed stuff\n     *\n     * $params can have all values as $params in \\Magento\\Catalog\\Helper\\Product - initProduct().\n     * Plus following keys:\n     *   - 'buy_request' - \\Magento\\Framework\\DataObject holding buyRequest to configure product\n     *   - 'specify_options' - boolean, whether to show 'Specify options' message\n     *   - 'configure_mode' - boolean, whether we're in Configure-mode to edit product configuration\n     *\n     * @param \\Magento\\Framework\\View\\Result\\Page $resultPage\n     * @param int $productId\n     * @param \\Magento\\Framework\\App\\Action\\Action $controller\n     * @param null|\\Magento\\Framework\\DataObject $params\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @throws \\Magento\\Framework\\Exception\\NoSuchEntityException\n     * @return \\Magento\\Catalog\\Helper\\Product\\View\n     *\/",165],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","prepareAndRender",182],"(",["T_STRING","ResultPage",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$resultPage",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$productId",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$controller",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$params",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_DOC_COMMENT","\/**\n         * Remove default action handle from layout update to avoid its usage during processing of another action,\n         * It is possible that forwarding to another action occurs, e.g. to 'noroute'.\n         * Default action handle is restored just before the end of current method.\n         *\/",184],["T_WHITESPACE","\n        ",188],["T_VARIABLE","$defaultActionHandle",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$resultPage",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getDefaultLayoutHandle",189],"(",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$handles",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$resultPage",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getLayout",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getUpdate",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getHandles",190],"(",")",";",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_STRING","in_array",191],"(",["T_VARIABLE","$defaultActionHandle",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$handles",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$resultPage",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getLayout",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","getUpdate",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","removeHandle",192],"(",["T_VARIABLE","$resultPage",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getDefaultLayoutHandle",192],"(",")",")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_IF","if",195],["T_WHITESPACE"," ",195],"(","!",["T_VARIABLE","$controller",195],["T_WHITESPACE"," ",195],["T_INSTANCEOF","instanceof",195],["T_WHITESPACE"," ",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Magento",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Catalog",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Controller",195],["T_NS_SEPARATOR","\\",195],["T_STRING","Product",195],["T_NS_SEPARATOR","\\",195],["T_STRING","View",195],["T_NS_SEPARATOR","\\",195],["T_STRING","ViewInterface",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_THROW","throw",196],["T_WHITESPACE"," ",196],["T_NEW","new",196],["T_WHITESPACE"," ",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Magento",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Framework",196],["T_NS_SEPARATOR","\\",196],["T_STRING","Exception",196],["T_NS_SEPARATOR","\\",196],["T_STRING","LocalizedException",196],"(",["T_WHITESPACE","\n                ",196],["T_STRING","__",197],"(",["T_CONSTANT_ENCAPSED_STRING","'Bad controller interface for showing product'",197],")",["T_WHITESPACE","\n            ",197],")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n        ",199],["T_COMMENT","\/\/ Prepare data\n",200],["T_WHITESPACE","        ",201],["T_VARIABLE","$productHelper",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_catalogProduct",201],";",["T_WHITESPACE","\n        ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(","!",["T_VARIABLE","$params",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$params",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_NEW","new",203],["T_WHITESPACE"," ",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Magento",203],["T_NS_SEPARATOR","\\",203],["T_STRING","Framework",203],["T_NS_SEPARATOR","\\",203],["T_STRING","DataObject",203],"(",")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n\n        ",204],["T_COMMENT","\/\/ Standard algorithm to prepare and render product view page\n",206],["T_WHITESPACE","        ",207],["T_VARIABLE","$product",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$productHelper",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","initProduct",207],"(",["T_VARIABLE","$productId",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$controller",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$params",207],")",";",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(","!",["T_VARIABLE","$product",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_THROW","throw",209],["T_WHITESPACE"," ",209],["T_NEW","new",209],["T_WHITESPACE"," ",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Magento",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Framework",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Exception",209],["T_NS_SEPARATOR","\\",209],["T_STRING","NoSuchEntityException",209],"(",["T_STRING","__",209],"(",["T_CONSTANT_ENCAPSED_STRING","'Product is not loaded'",209],")",")",";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$buyRequest",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$params",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getBuyRequest",212],"(",")",";",["T_WHITESPACE","\n        ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$buyRequest",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$productHelper",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","prepareProductOptions",214],"(",["T_VARIABLE","$product",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$buyRequest",214],")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_IF","if",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$params",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","hasConfigureMode",217],"(",")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$product",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","setConfigureMode",218],"(",["T_VARIABLE","$params",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getConfigureMode",218],"(",")",")",";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_eventManager",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","dispatch",221],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_controller_product_view'",221],",",["T_WHITESPACE"," ",221],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$product",221],"]",")",";",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_catalogSession",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setLastViewedProductId",223],"(",["T_VARIABLE","$product",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getId",223],"(",")",")",";",["T_WHITESPACE","\n\n        ",223],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_STRING","in_array",225],"(",["T_VARIABLE","$defaultActionHandle",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$handles",225],")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$resultPage",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","addDefaultHandle",226],"(",")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","initProductLayout",229],"(",["T_VARIABLE","$resultPage",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$product",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$params",229],")",";",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n",231],"}",["T_WHITESPACE","\n",232]]
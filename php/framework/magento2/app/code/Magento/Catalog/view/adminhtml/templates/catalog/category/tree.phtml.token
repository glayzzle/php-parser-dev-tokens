[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_CLOSE_TAG","?>\n",9],["T_INLINE_HTML","<div class=\"categories-side-col\">\n    <div class=\"sidebar-actions\">\n        ",10],["T_OPEN_TAG","<?php ",12],["T_IF","if",12],["T_WHITESPACE"," ",12],"(",["T_VARIABLE","$block",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","getRoot",12],"(",")",")",":",["T_WHITESPACE"," ",12],["T_CLOSE_TAG","?>\n",12],["T_INLINE_HTML","            ",13],["T_OPEN_TAG","<?php ",13],["T_ECHO","echo",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$block",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","getAddRootButtonHtml",13],"(",")",["T_WHITESPACE"," ",13],["T_CLOSE_TAG","?>",13],["T_INLINE_HTML","<br\/>\n            ",13],["T_OPEN_TAG","<?php ",14],["T_ECHO","echo",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$block",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","getAddSubButtonHtml",14],"(",")",["T_WHITESPACE"," ",14],["T_CLOSE_TAG","?>\n",14],["T_INLINE_HTML","        ",15],["T_OPEN_TAG","<?php ",15],["T_ENDIF","endif",15],";",["T_WHITESPACE"," ",15],["T_CLOSE_TAG","?>\n",15],["T_INLINE_HTML","    <\/div>\n    <div class=\"tree-actions\">\n        ",16],["T_OPEN_TAG","<?php ",18],["T_IF","if",18],["T_WHITESPACE"," ",18],"(",["T_VARIABLE","$block",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","getRoot",18],"(",")",")",":",["T_WHITESPACE"," ",18],["T_CLOSE_TAG","?>\n",18],["T_INLINE_HTML","            ",19],["T_OPEN_TAG","<?php ",19],["T_COMMENT","\/\/echo $block->getCollapseButtonHtml() ",19],["T_CLOSE_TAG","?>\n",19],["T_INLINE_HTML","            ",20],["T_OPEN_TAG","<?php ",20],["T_COMMENT","\/\/echo $block->getExpandButtonHtml() ",20],["T_CLOSE_TAG","?>\n",20],["T_INLINE_HTML","            <a href=\"#\"\n               onclick=\"tree.collapseTree(); return false;\">",21],["T_OPEN_TAG","<?php ",22],["T_COMMENT","\/* @escapeNotVerified *\/",22],["T_WHITESPACE"," ",22],["T_ECHO","echo",22],["T_WHITESPACE"," ",22],["T_STRING","__",22],"(",["T_CONSTANT_ENCAPSED_STRING","'Collapse All'",22],")",";",["T_WHITESPACE"," ",22],["T_CLOSE_TAG","?>",22],["T_INLINE_HTML","<\/a>\n            <span class=\"separator\">|<\/span> <a href=\"#\"\n                                                onclick=\"tree.expandTree(); return false;\">",22],["T_OPEN_TAG","<?php ",24],["T_COMMENT","\/* @escapeNotVerified *\/",24],["T_WHITESPACE"," ",24],["T_ECHO","echo",24],["T_WHITESPACE"," ",24],["T_STRING","__",24],"(",["T_CONSTANT_ENCAPSED_STRING","'Expand All'",24],")",";",["T_WHITESPACE"," ",24],["T_CLOSE_TAG","?>",24],["T_INLINE_HTML","<\/a>\n        ",24],["T_OPEN_TAG","<?php ",25],["T_ENDIF","endif",25],";",["T_WHITESPACE"," ",25],["T_CLOSE_TAG","?>\n",25],["T_INLINE_HTML","    <\/div>\n    ",26],["T_OPEN_TAG","<?php ",27],["T_IF","if",27],["T_WHITESPACE"," ",27],"(",["T_VARIABLE","$block",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","getRoot",27],"(",")",")",":",["T_WHITESPACE"," ",27],["T_CLOSE_TAG","?>\n",27],["T_INLINE_HTML","    <div class=\"tree-holder\">\n        <div id=\"tree-div\" class=\"tree-wrapper\"><\/div>\n    <\/div>\n<\/div>\n\n    <div data-id=\"information-dialog-tree\" class=\"messages\" style=\"display: none;\">\n        <div class=\"message message-notice\">\n            <div>",28],["T_OPEN_TAG","<?php ",35],["T_COMMENT","\/* @escapeNotVerified *\/",35],["T_WHITESPACE"," ",35],["T_ECHO","echo",35],["T_WHITESPACE"," ",35],["T_STRING","__",35],"(",["T_CONSTANT_ENCAPSED_STRING","'This operation can take a long time'",35],")",";",["T_WHITESPACE"," ",35],["T_CLOSE_TAG","?>",35],["T_INLINE_HTML","<\/div>\n        <\/div>\n    <\/div>\n    <script>\n        var tree;\n        require([\n            \"jquery\",\n            'Magento_Ui\/js\/modal\/modal',\n            \"jquery\/ui\",\n            \"prototype\",\n            \"extjs\/ext-tree-checkbox\",\n            \"mage\/adminhtml\/form\",\n            \"mage\/translate\"\n        ], function (jQuery, modal) {\n\n            var registry = {\n                data: [],\n\n                set: function (key, value) {\n                    this.data[key] = value;\n                },\n\n                get: function (key) {\n                    return this.data[key];\n                }\n            };\n\n            \/**\n             * Fix ext compatibility with prototype 1.6\n             *\/\n            Ext.lib.Event.getTarget = function (e) {\n                var ee = e.browserEvent || e;\n                return ee.target ? Event.element(ee) : null;\n            };\n\n            Ext.tree.TreePanel.Enhanced = function (el, config) {\n                Ext.tree.TreePanel.Enhanced.superclass.constructor.call(this, el, config);\n            };\n\n            Ext.extend(Ext.tree.TreePanel.Enhanced, Ext.tree.TreePanel, {\n\n                loadTree: function (config, firstLoad) {\n                    var parameters = config['parameters'];\n                    var data = config['data'];\n\n                    this.storeId = parameters['store_id'];\n\n                    if (this.storeId != 0 && $('add_root_category_button')) {\n                        $('add_root_category_button').hide();\n                    }\n\n                    if ((typeof parameters['root_visible']) != 'undefined') {\n                        this.rootVisible = parameters['root_visible'] * 1;\n                    }\n\n                    var root = new Ext.tree.TreeNode(parameters);\n\n                    this.nodeHash = {};\n                    this.setRootNode(root);\n                    this.modal = modal;\n\n                    if (firstLoad) {\n                        this.addListener('click', this.categoryClick);\n                        this.addListener('beforenodedrop', categoryMove.bind(this));\n                    }\n\n                    this.loader.buildCategoryTree(root, data);\n                    this.el.dom.innerHTML = '';\n                    \/\/ render the tree\n                    this.render();\n                    if (parameters['expanded']) {\n                        this.expandAll();\n                    } else {\n                        root.expand();\n                    }\n\n                    var selectedNode = this.getNodeById(parameters['category_id']);\n                    if (selectedNode) {\n                        this.currentNodeId = parameters['category_id'];\n                    } else {\n                        if (parameters['parent'] > 0 && parameters['category_id'] === 0) {\n                            this.currentNodeId = parameters['parent'];\n                        }\n                    }\n                    this.selectCurrentNode();\n\n                    \/\/ Temporary solution will be replaced after refactoring of tree functionality\n                    jQuery('body').off('tabsactivate.tree').on('tabsactivate.tree', jQuery.proxy(function (e, ui) {\n                        this.activeTab = jQuery(ui.newTab).find('a').prop('id');\n                    }, this))\n                },\n\n                request: function (url, params) {\n                    if (!params) {\n                        if (this.activeTab) {\n                            var params = {active_tab_id: this.activeTab};\n                        }\n                        else {\n                            var params = {};\n                        }\n                    }\n                    if (!params.form_key) {\n                        params.form_key = FORM_KEY;\n                    }\n                    var result = new Ajax.Request(\n                        url + (url.match(new RegExp('\\\\?')) ? '&isAjax=true' : '?isAjax=true' ),\n                        {\n                            parameters: params,\n                            method: 'post'\n                        }\n                    );\n\n                    return result;\n                },\n\n                selectCurrentNode: function () {\n                    var selectedNode = this.getNodeById(this.currentNodeId);\n\n                    if (selectedNode) {\n                        if ((typeof selectedNode.attributes.path) != 'undefined') {\n                            var path = selectedNode.attributes.path;\n                            if (!this.storeId) {\n                                path = '0\/' + path;\n                            }\n                            this.selectPath(path);\n                        } else {\n                            this.getSelectionModel().select(selectedNode);\n                        }\n                    }\n                },\n\n                collapseTree: function () {\n                    this.collapseAll();\n\n                    this.selectCurrentNode();\n\n                    if (!this.collapsed) {\n                        this.collapsed = true;\n                        this.loader.dataUrl = '",35],["T_OPEN_TAG","<?php ",173],["T_COMMENT","\/* @escapeNotVerified *\/",173],["T_WHITESPACE"," ",173],["T_ECHO","echo",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$block",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getLoadTreeUrl",173],"(",["T_STRING","false",173],")",["T_WHITESPACE"," ",173],["T_CLOSE_TAG","?>",173],["T_INLINE_HTML","';\n                        this.request(this.loader.dataUrl, false);\n                    }\n                },\n\n                expandTree: function () {\n                    this.expandAll();\n                    if (this.collapsed) {\n                        this.collapsed = false;\n                        this.loader.dataUrl = '",173],["T_OPEN_TAG","<?php ",182],["T_COMMENT","\/* @escapeNotVerified *\/",182],["T_WHITESPACE"," ",182],["T_ECHO","echo",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$block",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getLoadTreeUrl",182],"(",["T_STRING","true",182],")",["T_WHITESPACE"," ",182],["T_CLOSE_TAG","?>",182],["T_INLINE_HTML","';\n                        this.request(this.loader.dataUrl, false);\n                    }\n                },\n\n                categoryClick: function (node, e) {\n                    var url = this.buildUrl(node.id);\n\n                    this.currentNodeId = node.id;\n                    if (!this.useAjax) {\n                        setLocation(url);\n                        return;\n                    }\n                    if (this.activeTab) {\n                        var params = {active_tab_id: this.activeTab};\n                    }\n                    updateContent(url, params);\n                },\n\n                buildUrl: function (id) {\n                    var urlExt = (this.storeId ? 'store\/' + this.storeId + '\/' : '') + 'id\/' + id + '\/';\n\n                    return parseSidUrl(this.baseUrl, urlExt);\n                },\n\n                getBaseUrl: function () {\n                    return this.baseUrl;\n                }\n            });\n\n            function reRenderTree(switcherParams) {\n                \/\/ re-render tree by store switcher\n                if (tree && switcherParams) {\n                    var url;\n                    if (switcherParams.useConfirm) {\n                        if (!confirm(\"",182],["T_OPEN_TAG","<?php ",217],["T_COMMENT","\/* @escapeNotVerified *\/",217],["T_WHITESPACE"," ",217],["T_ECHO","echo",217],["T_WHITESPACE"," ",217],["T_STRING","__",217],"(",["T_CONSTANT_ENCAPSED_STRING","'Please confirm site switching. All data that hasn\\'t been saved will be lost.'",217],")",["T_WHITESPACE"," ",217],["T_CLOSE_TAG","?>",217],["T_INLINE_HTML","\")) {\n                            return false;\n                        }\n                    }\n\n                    if ($('add_root_category_button')) {\n                        if (!switcherParams.scopeId) {\n                            $('add_root_category_button').show();\n                        }\n                        else {\n                            $('add_root_category_button').hide();\n                        }\n                    }\n\n                    if (tree.useAjax) {\n                        \/\/ retain current selected category id\n                        url = tree.switchTreeUrl + switcherParams.scopeParams + 'id\/' + tree.currentNodeId + '\/';\n                        \/\/ load from cache\n                        \/\/ load from ajax\n                        \/\/ add form key\n                        var params = {\n                            form_key: FORM_KEY\n                        };\n                        new Ajax.Request(url + (url.match(new RegExp('\\\\?')) ? '&isAjax=true' : '?isAjax=true' ), {\n                            parameters: params,\n                            method: 'post',\n                            onComplete: function (transport) {\n                                var response;\n\n                                try {\n                                    response = JSON.parse(transport.responseText);\n                                } catch (e) {\n                                    console.warn('An error occured while parsing response');\n                                }\n\n                                if (!response || !response['parameters']) {\n                                    return false;\n                                }\n\n                                _renderNewTree(response, switcherParams.scopeParams);\n                            }\n                        });\n                    } else {\n                        var baseUrl = '",217],["T_OPEN_TAG","<?php ",260],["T_COMMENT","\/* @escapeNotVerified *\/",260],["T_WHITESPACE"," ",260],["T_ECHO","echo",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$block",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getEditUrl",260],"(",")",["T_WHITESPACE"," ",260],["T_CLOSE_TAG","?>",260],["T_INLINE_HTML","';\n                        var urlExt = switcherParams.scopeParams + 'id\/' + tree.currentNodeId + '\/';\n                        url = parseSidUrl(baseUrl, urlExt);\n                        setLocation(url);\n                    }\n                }\n                \/\/ render default tree\n                else {\n                    _renderNewTree();\n                }\n            }\n\n            function _renderNewTree(config, scopeParams) {\n                if (!config) {\n                    var config = defaultLoadTreeParams;\n                }\n\n                if (tree) {\n                    tree.purgeListeners();\n                    tree.el.dom.innerHTML = '';\n                }\n                tree = new Ext.tree.TreePanel.Enhanced('tree-div', newTreeParams);\n\n                tree.loadTree(config, true);\n\n                \/\/ try to select current category\n                var selectedNode = tree.getNodeById(config.parameters.category_id);\n                if (selectedNode) {\n                    tree.currentNodeId = config.parameters.category_id;\n                }\n                tree.selectCurrentNode();\n\n                \/\/ update content area\n                var url = tree.editUrl;\n                if (scopeParams) {\n                    url = url + scopeParams;\n                }\n                ",260],["T_OPEN_TAG","<?php ",297],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$block",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","isClearEdit",297],"(",")",")",":",["T_WHITESPACE"," ",297],["T_CLOSE_TAG","?>\n",297],["T_INLINE_HTML","                if (selectedNode) {\n                    url = url + 'id\/' + config.parameters.category_id;\n                }\n                ",298],["T_OPEN_TAG","<?php ",301],["T_ENDIF","endif",301],";",["T_CLOSE_TAG","?>\n",301],["T_INLINE_HTML","                \/\/updateContent(url); \/\/commented since ajax requests replaced with http ones to load a category\n            }\n\n            jQuery(function () {\n                categoryLoader = new Ext.tree.TreeLoader({\n                    dataUrl: '",302],["T_OPEN_TAG","<?php ",307],["T_COMMENT","\/* @escapeNotVerified *\/",307],["T_WHITESPACE"," ",307],["T_ECHO","echo",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$block",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getLoadTreeUrl",307],"(",")",["T_WHITESPACE"," ",307],["T_CLOSE_TAG","?>",307],["T_INLINE_HTML","'\n                });\n\n                categoryLoader.processResponse = function (response, parent, callback) {\n                    var config = JSON.parse(response.responseText);\n\n                    this.buildCategoryTree(parent, config);\n\n                    if (typeof callback == \"function\") {\n                        callback(this, parent);\n                    }\n                };\n\n                categoryLoader.buildCategoryTree = function (parent, config) {\n                    if (!config) return null;\n\n                    if (parent && config && config.length) {\n                        for (var i = 0; i < config.length; i++) {\n                            var node;\n                            var _node = Object.clone(config[i]);\n                            if (_node.children && !_node.children.length) {\n                                delete(_node.children);\n                                node = new Ext.tree.AsyncTreeNode(_node);\n                            } else {\n                                node = new Ext.tree.TreeNode(config[i]);\n                            }\n                            parent.appendChild(node);\n                            node.loader = node.getOwnerTree().loader;\n                            if (_node.children) {\n                                this.buildCategoryTree(node, _node.children);\n                            }\n                        }\n                    }\n                };\n\n                categoryLoader.buildHash = function (node) {\n                    var hash = {};\n\n                    hash = this.toArray(node.attributes);\n\n                    if (node.childNodes.length > 0 || (node.loaded == false && node.loading == false)) {\n                        hash['children'] = new Array;\n\n                        for (var i = 0, len = node.childNodes.length; i < len; i++) {\n                            if (!hash['children']) {\n                                hash['children'] = new Array;\n                            }\n                            hash['children'].push(this.buildHash(node.childNodes[i]));\n                        }\n                    }\n\n                    return hash;\n                };\n\n                categoryLoader.toArray = function (attributes) {\n                    var data = {form_key: FORM_KEY};\n                    for (var key in attributes) {\n                        var value = attributes[key];\n                        data[key] = value;\n                    }\n\n                    return data;\n                };\n\n                categoryLoader.on(\"beforeload\", function (treeLoader, node) {\n                    treeLoader.baseParams.id = node.attributes.id;\n                    treeLoader.baseParams.store = node.attributes.store;\n                    treeLoader.baseParams.form_key = FORM_KEY;\n                });\n\n                categoryLoader.on(\"load\", function (treeLoader, node, config) {\n                    \/\/varienWindowOnload();\n                });\n\n                scopeSwitcherHandler = reRenderTree;\n\n                newTreeParams = {\n                    animate: false,\n                    loader: categoryLoader,\n                    enableDD: true,\n                    containerScroll: true,\n                    selModel: new Ext.tree.CheckNodeMultiSelectionModel(),\n                    rootVisible: '",307],["T_OPEN_TAG","<?php ",389],["T_COMMENT","\/* @escapeNotVerified *\/",389],["T_WHITESPACE"," ",389],["T_ECHO","echo",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$block",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getRoot",389],"(",")",["T_OBJECT_OPERATOR","->",389],["T_STRING","getIsVisible",389],"(",")",["T_WHITESPACE"," ",389],["T_CLOSE_TAG","?>",389],["T_INLINE_HTML","',\n                    useAjax: ",389],["T_OPEN_TAG","<?php ",390],["T_COMMENT","\/* @escapeNotVerified *\/",390],["T_WHITESPACE"," ",390],["T_ECHO","echo",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$block",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getUseAjax",390],"(",")",["T_WHITESPACE"," ",390],["T_CLOSE_TAG","?>",390],["T_INLINE_HTML",",\n                    switchTreeUrl: '",390],["T_OPEN_TAG","<?php ",391],["T_COMMENT","\/* @escapeNotVerified *\/",391],["T_WHITESPACE"," ",391],["T_ECHO","echo",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$block",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getSwitchTreeUrl",391],"(",")",["T_WHITESPACE"," ",391],["T_CLOSE_TAG","?>",391],["T_INLINE_HTML","',\n                    editUrl: '",391],["T_OPEN_TAG","<?php ",392],["T_COMMENT","\/* @escapeNotVerified *\/",392],["T_WHITESPACE"," ",392],["T_ECHO","echo",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$block",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getEditUrl",392],"(",")",["T_WHITESPACE"," ",392],["T_CLOSE_TAG","?>",392],["T_INLINE_HTML","',\n                    currentNodeId: ",392],["T_OPEN_TAG","<?php ",393],["T_COMMENT","\/* @escapeNotVerified *\/",393],["T_WHITESPACE"," ",393],["T_ECHO","echo",393],["T_WHITESPACE"," ",393],["T_INT_CAST","(int)",393],["T_VARIABLE","$block",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getCategoryId",393],"(",")",["T_WHITESPACE"," ",393],["T_CLOSE_TAG","?>",393],["T_INLINE_HTML",",\n                    baseUrl: '",393],["T_OPEN_TAG","<?php ",394],["T_COMMENT","\/* @escapeNotVerified *\/",394],["T_WHITESPACE"," ",394],["T_ECHO","echo",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$block",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getEditUrl",394],"(",")",["T_WHITESPACE"," ",394],["T_CLOSE_TAG","?>",394],["T_INLINE_HTML","'\n                };\n\n                defaultLoadTreeParams = {\n                    parameters: {\n                        text: ",394],["T_OPEN_TAG","<?php ",399],["T_COMMENT","\/* @escapeNotVerified *\/",399],["T_WHITESPACE"," ",399],["T_ECHO","echo",399],["T_WHITESPACE"," ",399],["T_STRING","json_encode",399],"(",["T_STRING","htmlentities",399],"(",["T_VARIABLE","$block",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getRoot",399],"(",")",["T_OBJECT_OPERATOR","->",399],["T_STRING","getName",399],"(",")",")",")",["T_WHITESPACE"," ",399],["T_CLOSE_TAG","?>",399],["T_INLINE_HTML",",\n                        draggable: false,\n                        allowDrop: ",399],["T_OPEN_TAG","<?php ",401],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$block",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getRoot",401],"(",")",["T_OBJECT_OPERATOR","->",401],["T_STRING","getIsVisible",401],"(",")",")",":",["T_WHITESPACE"," ",401],["T_CLOSE_TAG","?>",401],["T_INLINE_HTML","true",401],["T_OPEN_TAG","<?php ",401],["T_ELSE","else",401],["T_WHITESPACE"," ",401],":",["T_WHITESPACE"," ",401],["T_CLOSE_TAG","?>",401],["T_INLINE_HTML","false",401],["T_OPEN_TAG","<?php ",401],["T_ENDIF","endif",401],";",["T_WHITESPACE"," ",401],["T_CLOSE_TAG","?>",401],["T_INLINE_HTML",",\n                        id: ",401],["T_OPEN_TAG","<?php ",402],["T_ECHO","echo",402],["T_WHITESPACE"," ",402],["T_INT_CAST","(int)",402],["T_VARIABLE","$block",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getRoot",402],"(",")",["T_OBJECT_OPERATOR","->",402],["T_STRING","getId",402],"(",")",["T_WHITESPACE"," ",402],["T_CLOSE_TAG","?>",402],["T_INLINE_HTML",",\n                        expanded: ",402],["T_OPEN_TAG","<?php ",403],["T_ECHO","echo",403],["T_WHITESPACE"," ",403],["T_INT_CAST","(int)",403],["T_VARIABLE","$block",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getIsWasExpanded",403],"(",")",["T_WHITESPACE"," ",403],["T_CLOSE_TAG","?>",403],["T_INLINE_HTML",",\n                        store_id: ",403],["T_OPEN_TAG","<?php ",404],["T_ECHO","echo",404],["T_WHITESPACE"," ",404],["T_INT_CAST","(int)",404],["T_VARIABLE","$block",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getStore",404],"(",")",["T_OBJECT_OPERATOR","->",404],["T_STRING","getId",404],"(",")",["T_WHITESPACE"," ",404],["T_CLOSE_TAG","?>",404],["T_INLINE_HTML",",\n                        category_id: ",404],["T_OPEN_TAG","<?php ",405],["T_ECHO","echo",405],["T_WHITESPACE"," ",405],["T_INT_CAST","(int)",405],["T_VARIABLE","$block",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getCategoryId",405],"(",")",["T_WHITESPACE"," ",405],["T_CLOSE_TAG","?>",405],["T_INLINE_HTML",",\n                        parent: ",405],["T_OPEN_TAG","<?php ",406],["T_ECHO","echo",406],["T_WHITESPACE"," ",406],["T_INT_CAST","(int)",406],["T_VARIABLE","$block",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getRequest",406],"(",")",["T_OBJECT_OPERATOR","->",406],["T_STRING","getParam",406],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",406],")",["T_WHITESPACE"," ",406],["T_CLOSE_TAG","?>\n",406],["T_INLINE_HTML","                    },\n                    data: ",407],["T_OPEN_TAG","<?php ",408],["T_WHITESPACE"," ",408],["T_COMMENT","\/* @escapeNotVerified *\/",408],["T_WHITESPACE"," ",408],["T_ECHO","echo",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$block",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","getTreeJson",408],"(",")",["T_WHITESPACE"," ",408],["T_CLOSE_TAG","?>\n",408],["T_INLINE_HTML","                };\n\n                reRenderTree();\n            });\n\n            function addNew(url, isRoot) {\n                if (isRoot) {\n                    tree.currentNodeId = tree.root.id;\n                }\n\n                if (\/store\\\/\\d+\/.test(url)) {\n                    url = url.replace(\/store\\\/\\d+\/, \"store\/\" + tree.storeId);\n                }\n                else {\n                    url += \"store\/\" + tree.storeId + \"\/\";\n                }\n\n                url += 'parent\/' + tree.currentNodeId;\n                location.href = url;\n            }\n\n            function categoryMove(obj) {\n                var data = {id: obj.dropNode.id, form_key: FORM_KEY};\n\n                data.point = obj.point;\n                switch (obj.point) {\n                    case 'above' :\n                        data.pid = obj.target.parentNode.id;\n                        data.paid = obj.dropNode.parentNode.id;\n                        if (obj.target.previousSibling) {\n                            data.aid = obj.target.previousSibling.id;\n                        } else {\n                            data.aid = 0;\n                        }\n                        break;\n                    case 'below' :\n                        data.pid = obj.target.parentNode.id;\n                        data.aid = obj.target.id;\n                        break;\n                    case 'append' :\n                        data.pid = obj.target.id;\n                        data.paid = obj.dropNode.parentNode.id;\n                        if (obj.target.lastChild) {\n                            data.aid = obj.target.lastChild.id;\n                        } else {\n                            data.aid = 0;\n                        }\n                        break;\n                    default :\n                        obj.cancel = true;\n                        return obj;\n                }\n\n                var pd = [];\n                for (var key in data) {\n                    pd.push(encodeURIComponent(key), \"=\", encodeURIComponent(data[key]), \"&\");\n                }\n                pd.splice(pd.length - 1, 1);\n\n                registry.set('pd', pd.join(\"\"));\n\n                jQuery('[data-id=\"information-dialog-category\"]').modal({\n                    modalClass: 'confirm',\n                    title:  jQuery.mage.__('Warning message'),\n                    buttons: [{\n                        text: 'Cancel',\n                        class: 'action-secondary',\n                        click: function () {\n                            reRenderTree();\n                            this.closeModal();\n                        }\n                    }, {\n                        text: 'Ok',\n                        class: 'action-primary',\n                        click: function () {\n                            (function ($) {\n                                $.ajax({\n                                    url: '",409],["T_OPEN_TAG","<?php ",486],["T_COMMENT","\/* @escapeNotVerified *\/",486],["T_WHITESPACE"," ",486],["T_ECHO","echo",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$block",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getMoveUrl",486],"(",")",["T_WHITESPACE"," ",486],["T_CLOSE_TAG","?>",486],["T_INLINE_HTML","',\n                                    method: 'POST',\n                                    data: registry.get('pd'),\n                                    showLoader: true\n                                }).done(function (data) {\n                                    if (data.error) {\n                                        reRenderTree();\n                                    } else {\n                                        $(obj.tree.container.dom).trigger('categoryMove.tree');\n                                    }\n                                    $('.page-main-actions').next('.messages').remove();\n                                    $('.page-main-actions').next('#messages').remove();\n                                    $('.page-main-actions').after(data.messages);\n                                }).fail(function (jqXHR, textStatus) {\n                                    if (window.console) {\n                                        console.log(textStatus);\n                                    }\n                                    location.reload();\n                                });\n                            })(jQuery);\n                            this.closeModal();\n                        }\n                    }]\n\n                }).trigger('openModal');\n\n            }\n\n            window.addNew = addNew;\n\n        });\n    <\/script>\n",486],["T_OPEN_TAG","<?php ",518],["T_ENDIF","endif",518],";",["T_WHITESPACE"," ",518],["T_CLOSE_TAG","?>\n",518]]
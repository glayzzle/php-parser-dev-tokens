[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_COMMENT","\/\/ @codingStandardsIgnoreFile\n",7],["T_WHITESPACE","\n",8],["T_CLOSE_TAG","?>\n",9],["T_INLINE_HTML","<script>\nrequire([\n    \"jquery\",\n    'Magento_Ui\/js\/modal\/alert',\n    'Magento_Ui\/js\/modal\/prompt',\n    \"collapsable\",\n    \"prototype\"\n], function(jQuery, alert, prompt){\n\nfunction toggleApplyVisibility(select) {\n    if ($(select).value == 1) {\n        $(select).next('select').removeClassName('no-display');\n        $(select).next('select').removeClassName('ignore-validate');\n\n    } else {\n        $(select).next('select').addClassName('no-display');\n        $(select).next('select').addClassName('ignore-validate');\n        var options = $(select).next('select').options;\n        for( var i=0; i < options.length; i++) {\n            options[i].selected = false;\n        }\n    }\n}\nfunction getFrontTab() {\n    if ($('product_attribute_tabs_front')) {\n        return $('product_attribute_tabs_front').up('li');\n    } else {\n        return $('front_fieldset-wrapper');\n    }\n}\n\nfunction checkOptionsPanelVisibility(){\n    if($('manage-options-panel')){\n        var panel = $('manage-options-panel').up('.fieldset');\n\n        if($('frontend_input') && ($('frontend_input').value=='select' || $('frontend_input').value=='multiselect')){\n            panel.show();\n        }\n        else {\n            panel.hide();\n        }\n    }\n}\n\nfunction bindAttributeInputType()\n{\n    checkOptionsPanelVisibility();\n    switchDefaultValueField();\n    if($('frontend_input') && ($('frontend_input').value=='select' || $('frontend_input').value=='multiselect' || $('frontend_input').value=='price')){\n        if($('is_filterable') && !$('is_filterable').getAttribute('readonly')){\n            $('is_filterable').disabled = false;\n        }\n        if($('is_filterable_in_search') && !$('is_filterable_in_search').getAttribute('readonly')){\n            $('is_filterable_in_search').disabled = false;\n        }\n        if($('backend_type') && $('backend_type').options){\n            for(var i=0;i<$('backend_type').options.length;i++){\n                if($('backend_type').options[i].value=='int') $('backend_type').selectedIndex = i;\n            }\n        }\n    }\n    else {\n        if($('is_filterable')){\n            $('is_filterable').selectedIndex=0;\n            $('is_filterable').disabled = true;\n        }\n        if($('is_filterable_in_search')){\n            $('is_filterable_in_search').disabled = true;\n        }\n    }\n\n    if ($('frontend_input') && ($('frontend_input').value=='multiselect'\n        || $('frontend_input').value=='gallery'\n        || $('frontend_input').value=='textarea')) {\n        if ($('used_for_sort_by')) {\n            $('used_for_sort_by').disabled = true;\n        }\n    }\n    else {\n        if ($('used_for_sort_by') && !$('used_for_sort_by').getAttribute('readonly')) {\n            $('used_for_sort_by').disabled = false;\n        }\n    }\n\n    setRowVisibility('is_wysiwyg_enabled', false);\n    setRowVisibility('is_html_allowed_on_front', false);\n\n    switch ($('frontend_input').value) {\n        case 'textarea':\n            setRowVisibility('is_wysiwyg_enabled', true);\n            if($('is_wysiwyg_enabled').value == '0'){\n                setRowVisibility('is_html_allowed_on_front', true);\n                $('is_html_allowed_on_front').disabled = false;\n            }\n            $('frontend_class').value = '';\n            $('frontend_class').disabled = true;\n            break;\n        case 'text':\n            setRowVisibility('is_html_allowed_on_front', true);\n            $('is_html_allowed_on_front').disabled = false;\n\n            if (!$('frontend_class').getAttribute('readonly')) {\n                $('frontend_class').disabled = false;\n            }\n            break;\n        case 'select':\n        case 'multiselect':\n            setRowVisibility('is_html_allowed_on_front', true);\n            $('is_html_allowed_on_front').disabled = false;\n            $('frontend_class').value = '';\n            $('frontend_class').disabled = true;\n            break;\n        default:\n            $('frontend_class').value = '';\n            $('frontend_class').disabled = true;\n    }\n\n    switchIsFilterable();\n}\n\nfunction switchIsFilterable()\n{\n    if ($('is_filterable')) {\n        if ($('is_filterable').selectedIndex == 0) {\n            $('position').disabled = true;\n        } else {\n            if (!$('position').getAttribute('readonly')){\n                $('position').disabled = false;\n            }\n        }\n    }\n}\n\nfunction switchDefaultValueField()\n{\n    if (!$('frontend_input')) {\n        return;\n    }\n\n    var currentValue = $('frontend_input').value;\n\n    var defaultValueTextVisibility = false;\n    var defaultValueTextareaVisibility = false;\n    var defaultValueDateVisibility = false;\n    var defaultValueYesnoVisibility = false;\n    var scopeVisibility = true;\n\n    switch (currentValue) {\n        case 'select':\n            optionDefaultInputType = 'radio';\n            break;\n\n        case 'multiselect':\n            optionDefaultInputType = 'checkbox';\n            break;\n\n        case 'date':\n            defaultValueDateVisibility = true;\n            break;\n\n        case 'boolean':\n            defaultValueYesnoVisibility = true;\n            break;\n\n        case 'textarea':\n            defaultValueTextareaVisibility = true;\n            break;\n\n        case 'media_image':\n            defaultValueTextVisibility = false;\n            break;\n        case 'price':\n            scopeVisibility = false;\n        default:\n            defaultValueTextVisibility = true;\n            break;\n    }\n\n    switch (currentValue) {\n        case 'media_image':\n            getFrontTab().hide();\n\n            setRowVisibility('is_required', false);\n            setRowVisibility('is_unique', false);\n            setRowVisibility('frontend_class', false);\n        break;\n\n        ",10],["T_OPEN_TAG","<?php ",197],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","helper",197],"(",["T_CONSTANT_ENCAPSED_STRING","'Magento\\Catalog\\Helper\\Data'",197],")",["T_OBJECT_OPERATOR","->",197],["T_STRING","getAttributeHiddenFields",197],"(",")",["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$type",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$fields",197],")",":",["T_WHITESPACE"," ",197],["T_CLOSE_TAG","?>\n",197],["T_INLINE_HTML","            case '",198],["T_OPEN_TAG","<?php ",198],["T_COMMENT","\/* @escapeNotVerified *\/",198],["T_WHITESPACE"," ",198],["T_ECHO","echo",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$type",198],";",["T_WHITESPACE"," ",198],["T_CLOSE_TAG","?>",198],["T_INLINE_HTML","':\n                ",198],["T_OPEN_TAG","<?php ",199],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$fields",199],["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$one",199],")",":",["T_WHITESPACE"," ",199],["T_CLOSE_TAG","?>\n",199],["T_INLINE_HTML","                    ",200],["T_OPEN_TAG","<?php ",200],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$one",200],["T_WHITESPACE"," ",200],["T_IS_EQUAL","==",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'_front_fieldset'",200],")",":",["T_WHITESPACE"," ",200],["T_CLOSE_TAG","?>\n",200],["T_INLINE_HTML","                        getFrontTab().hide();\n                    ",201],["T_OPEN_TAG","<?php ",202],["T_ELSEIF","elseif",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$one",202],["T_WHITESPACE"," ",202],["T_IS_EQUAL","==",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'_default_value'",202],")",":",["T_WHITESPACE"," ",202],["T_CLOSE_TAG","?>\n",202],["T_INLINE_HTML","                        defaultValueTextVisibility =\n                        defaultValueTextareaVisibility =\n                        defaultValueDateVisibility =\n                        defaultValueYesnoVisibility = false;\n                    ",203],["T_OPEN_TAG","<?php ",207],["T_ELSEIF","elseif",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$one",207],["T_WHITESPACE"," ",207],["T_IS_EQUAL","==",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'_scope'",207],")",":",["T_WHITESPACE"," ",207],["T_CLOSE_TAG","?>\n",207],["T_INLINE_HTML","                        scopeVisibility = false;\n                    ",208],["T_OPEN_TAG","<?php ",209],["T_ELSE","else",209],":",["T_WHITESPACE"," ",209],["T_CLOSE_TAG","?>\n",209],["T_INLINE_HTML","                        setRowVisibility('",210],["T_OPEN_TAG","<?php ",210],["T_COMMENT","\/* @escapeNotVerified *\/",210],["T_WHITESPACE"," ",210],["T_ECHO","echo",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$one",210],";",["T_WHITESPACE"," ",210],["T_CLOSE_TAG","?>",210],["T_INLINE_HTML","', false);\n                    ",210],["T_OPEN_TAG","<?php ",211],["T_ENDIF","endif",211],";",["T_WHITESPACE"," ",211],["T_CLOSE_TAG","?>\n",211],["T_INLINE_HTML","                ",212],["T_OPEN_TAG","<?php ",212],["T_ENDFOREACH","endforeach",212],";",["T_WHITESPACE"," ",212],["T_CLOSE_TAG","?>\n",212],["T_INLINE_HTML","            break;\n        ",213],["T_OPEN_TAG","<?php ",214],["T_ENDFOREACH","endforeach",214],";",["T_WHITESPACE"," ",214],["T_CLOSE_TAG","?>\n",214],["T_INLINE_HTML","\n        default:\n            getFrontTab().show();\n\n            showDefaultRows();\n        break;\n    }\n\n    setRowVisibility('default_value_text', defaultValueTextVisibility);\n    setRowVisibility('default_value_textarea', defaultValueTextareaVisibility);\n    setRowVisibility('default_value_date', defaultValueDateVisibility);\n    setRowVisibility('default_value_yesno', defaultValueYesnoVisibility);\n    setRowVisibility('is_global', scopeVisibility);\n\n    var elems = document.getElementsByName('default[]');\n    for (var i = 0; i < elems.length; i++) {\n        elems[i].type = optionDefaultInputType;\n    }\n}\n\nfunction showDefaultRows()\n{\n    setRowVisibility('is_required', true);\n    setRowVisibility('is_unique', true);\n    setRowVisibility('frontend_class', true);\n}\n\nfunction setRowVisibility(id, isVisible)\n{\n    if ($(id)) {\n        var td = $(id).parentNode;\n        var tr = $(td.parentNode);\n\n        if (isVisible) {\n            tr.show();\n        } else {\n            tr.blur();\n            tr.hide();\n        }\n    }\n}\n\n\nfunction updateRequriedOptions()\n{\n    if ($F('frontend_input')=='select' && $F('is_required')==1) {\n        $('option-count-check').addClassName('required-options-count');\n    } else {\n        $('option-count-check').removeClassName('required-options-count');\n    }\n}\n\nfunction saveAttributeInNewSet(promptMessage)\n{\n    var newAttributeSetName;\n\n    prompt({\n        content: promptMessage,\n        actions: {\n            confirm: function(val) {\n                newAttributeSetName = val;\n\n                if (!newAttributeSetName) {\n                    return;\n                }\n\n                var rules = ['required-entry', 'validate-no-html-tags'];\n                for (var i = 0; i < rules.length; i++) {\n                    if (!jQuery.validator.methods[rules[i]](newAttributeSetName)) {\n                        alert({\n                            content: jQuery.validator.messages[rules[i]]\n                        });\n\n                        return;\n                    }\n                }\n\n                var newAttributeSetNameInputId = 'new_attribute_set_name';\n\n                if ($(newAttributeSetNameInputId)) {\n                    $(newAttributeSetNameInputId).value = newAttributeSetName;\n                } else {\n                    $('edit_form').insert({\n                        top: new Element('input', {\n                            type: 'hidden',\n                            id: newAttributeSetNameInputId,\n                            name: 'new_attribute_set_name',\n                            value: newAttributeSetName\n                        })\n                    });\n                }\n                \/\/ Temporary solution will replaced after refactoring of attributes functionality\n                jQuery('#edit_form').triggerHandler('save');\n            }\n        }\n    });\n}\n\nif($('frontend_input')){\n    Event.observe($('frontend_input'), 'change', updateRequriedOptions);\n    Event.observe($('frontend_input'), 'change', bindAttributeInputType);\n}\n\nif ($('is_filterable')) {\n    Event.observe($('is_filterable'), 'change', switchIsFilterable);\n}\n\nif ($('is_required')) {\n    Event.observe($('is_required'), 'change', updateRequriedOptions);\n}\n\njQuery(function($) {\n    bindAttributeInputType();\n    \/\/ @todo: refactor collapsable component\n    $('.attribute-popup .collapse, [data-role=\"advanced_fieldset-content\"]')\n        .collapsable()\n        .collapse('hide');\n});\n\nwindow.saveAttributeInNewSet = saveAttributeInNewSet;\nwindow.updateRequriedOptions = updateRequriedOptions;\nwindow.setRowVisibility = setRowVisibility;\nwindow.showDefaultRows = showDefaultRows;\nwindow.switchDefaultValueField = switchDefaultValueField;\nwindow.switchIsFilterable = switchIsFilterable;\nwindow.switchIsFilterable = switchIsFilterable;\nwindow.bindAttributeInputType = bindAttributeInputType;\nwindow.checkOptionsPanelVisibility = checkOptionsPanelVisibility;\nwindow.getFrontTab = getFrontTab;\nwindow.toggleApplyVisibility = toggleApplyVisibility;\n\n});\n<\/script>\n",215]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Copyright \u00c2\u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n *\/",2],["T_WHITESPACE","\n\n",5],["T_NAMESPACE","namespace",7],["T_WHITESPACE"," ",7],["T_STRING","Magento",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Catalog",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Model",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Product",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Price",7],";",["T_WHITESPACE","\n\n",7],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Magento",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Catalog",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Api",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Data",9],["T_NS_SEPARATOR","\\",9],["T_STRING","TierPriceInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tier price storage.\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","TierPriceStorage",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Magento",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Catalog",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Api",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TierPriceStorageInterface",14],["T_WHITESPACE","\n",14],"{",["T_WHITESPACE","\n    ",15],["T_DOC_COMMENT","\/**\n     * Tier price resource model.\n     *\n     * @var TierPricePersistence\n     *\/",16],["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$tierPricePersistence",21],";",["T_WHITESPACE","\n\n    ",21],["T_DOC_COMMENT","\/**\n     * Tier price validator.\n     *\n     * @var \\Magento\\Catalog\\Model\\Product\\Price\\Validation\\TierPriceValidator\n     *\/",23],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$tierPriceValidator",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * Tier price builder.\n     *\n     * @var TierPriceFactory\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$tierPriceFactory",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Price indexer.\n     *\n     * @var \\Magento\\Catalog\\Model\\Indexer\\Product\\Price\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PRIVATE","private",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$priceIndexer",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Product ID locator.\n     *\n     * @var \\Magento\\Catalog\\Model\\ProductIdLocatorInterface\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PRIVATE","private",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$productIdLocator",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Page cache config.\n     *\n     * @var \\Magento\\PageCache\\Model\\Config\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PRIVATE","private",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$config",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Cache type list.\n     *\n     * @var \\Magento\\Framework\\App\\Cache\\TypeListInterface\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PRIVATE","private",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$typeList",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Indexer chunk value.\n     *\n     * @var int\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PRIVATE","private",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$indexerChunkValue",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_LNUMBER","500",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * @param TierPricePersistence $tierPricePersistence\n     * @param \\Magento\\Catalog\\Model\\Product\\Price\\Validation\\TierPriceValidator $tierPriceValidator\n     * @param TierPriceFactory $tierPriceFactory\n     * @param \\Magento\\Catalog\\Model\\Indexer\\Product\\Price $priceIndexer\n     * @param \\Magento\\Catalog\\Model\\ProductIdLocatorInterface $productIdLocator\n     * @param \\Magento\\PageCache\\Model\\Config $config\n     * @param \\Magento\\Framework\\App\\Cache\\TypeListInterface $typeList\n     *\/",72],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","__construct",81],"(",["T_WHITESPACE","\n        ",81],["T_STRING","TierPricePersistence",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$tierPricePersistence",82],",",["T_WHITESPACE","\n        ",82],["T_NS_SEPARATOR","\\",83],["T_STRING","Magento",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Catalog",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Model",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Product",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Price",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Validation",83],["T_NS_SEPARATOR","\\",83],["T_STRING","TierPriceValidator",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$tierPriceValidator",83],",",["T_WHITESPACE","\n        ",83],["T_STRING","TierPriceFactory",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$tierPriceFactory",84],",",["T_WHITESPACE","\n        ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Magento",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Catalog",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Model",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Indexer",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Product",85],["T_NS_SEPARATOR","\\",85],["T_STRING","Price",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$priceIndexer",85],",",["T_WHITESPACE","\n        ",85],["T_NS_SEPARATOR","\\",86],["T_STRING","Magento",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Catalog",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Model",86],["T_NS_SEPARATOR","\\",86],["T_STRING","ProductIdLocatorInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$productIdLocator",86],",",["T_WHITESPACE","\n        ",86],["T_NS_SEPARATOR","\\",87],["T_STRING","Magento",87],["T_NS_SEPARATOR","\\",87],["T_STRING","PageCache",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Model",87],["T_NS_SEPARATOR","\\",87],["T_STRING","Config",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$config",87],",",["T_WHITESPACE","\n        ",87],["T_NS_SEPARATOR","\\",88],["T_STRING","Magento",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Framework",88],["T_NS_SEPARATOR","\\",88],["T_STRING","App",88],["T_NS_SEPARATOR","\\",88],["T_STRING","Cache",88],["T_NS_SEPARATOR","\\",88],["T_STRING","TypeListInterface",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$typeList",88],["T_WHITESPACE","\n    ",88],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","tierPricePersistence",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$tierPricePersistence",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","tierPriceValidator",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$tierPriceValidator",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","tierPriceFactory",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$tierPriceFactory",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","priceIndexer",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$priceIndexer",93],";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","productIdLocator",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$productIdLocator",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","config",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$config",95],";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","typeList",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$typeList",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",99],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","get",102],"(",["T_ARRAY","array",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$skus",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","tierPriceValidator",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","validateSkus",104],"(",["T_VARIABLE","$skus",104],")",";",["T_WHITESPACE","\n\n        ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getExistingPrices",106],"(",["T_VARIABLE","$skus",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",109],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","update",112],"(",["T_ARRAY","array",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$prices",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$affectedIds",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","retrieveAffectedProductIdsForPrices",114],"(",["T_VARIABLE","$prices",114],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$skus",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","array_unique",115],"(",["T_WHITESPACE","\n            ",115],["T_STRING","array_map",116],"(",["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$price",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$price",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getSku",117],"(",")",";",["T_WHITESPACE","\n            ",117],"}",",",["T_WHITESPACE"," ",118],["T_VARIABLE","$prices",118],")",["T_WHITESPACE","\n        ",118],")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$result",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","tierPriceValidator",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","retrieveValidationResult",120],"(",["T_VARIABLE","$prices",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getExistingPrices",120],"(",["T_VARIABLE","$skus",120],")",")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$prices",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","removeIncorrectPrices",121],"(",["T_VARIABLE","$prices",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$result",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getFailedRowIds",121],"(",")",")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$formattedPrices",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","retrieveFormattedPrices",122],"(",["T_VARIABLE","$prices",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","tierPricePersistence",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","update",123],"(",["T_VARIABLE","$formattedPrices",123],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","reindexPrices",124],"(",["T_VARIABLE","$affectedIds",124],")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","invalidateFullPageCache",125],"(",")",";",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$result",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getFailedItems",127],"(",")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",130],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","replace",133],"(",["T_ARRAY","array",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$prices",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$result",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","tierPriceValidator",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","retrieveValidationResult",135],"(",["T_VARIABLE","$prices",135],")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$prices",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","removeIncorrectPrices",136],"(",["T_VARIABLE","$prices",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$result",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getFailedRowIds",136],"(",")",")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$affectedIds",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","retrieveAffectedProductIdsForPrices",137],"(",["T_VARIABLE","$prices",137],")",";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$formattedPrices",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","retrieveFormattedPrices",138],"(",["T_VARIABLE","$prices",138],")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","tierPricePersistence",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","replace",139],"(",["T_VARIABLE","$formattedPrices",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$affectedIds",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","reindexPrices",140],"(",["T_VARIABLE","$affectedIds",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","invalidateFullPageCache",141],"(",")",";",["T_WHITESPACE","\n\n        ",141],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$result",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getFailedItems",143],"(",")",";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",146],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","delete",149],"(",["T_ARRAY","array",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$prices",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$affectedIds",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","retrieveAffectedProductIdsForPrices",151],"(",["T_VARIABLE","$prices",151],")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$result",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","tierPriceValidator",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","retrieveValidationResult",152],"(",["T_VARIABLE","$prices",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$prices",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","removeIncorrectPrices",153],"(",["T_VARIABLE","$prices",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$result",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getFailedRowIds",153],"(",")",")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$priceIds",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","retrieveAffectedPriceIds",154],"(",["T_VARIABLE","$prices",154],")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","tierPricePersistence",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","delete",155],"(",["T_VARIABLE","$priceIds",155],")",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","reindexPrices",156],"(",["T_VARIABLE","$affectedIds",156],")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","invalidateFullPageCache",157],"(",")",";",["T_WHITESPACE","\n\n        ",157],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$result",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getFailedItems",159],"(",")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Get existing prices by SKUs.\n     *\n     * @param array $skus\n     * @return array\n     *\/",162],["T_WHITESPACE","\n    ",167],["T_PRIVATE","private",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","getExistingPrices",168],"(",["T_ARRAY","array",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$skus",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$ids",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","retrieveAffectedIds",170],"(",["T_VARIABLE","$skus",170],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$rawPrices",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","tierPricePersistence",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","get",171],"(",["T_VARIABLE","$ids",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$prices",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],"[","]",";",["T_WHITESPACE","\n\n        ",172],["T_FOREACH","foreach",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$rawPrices",174],["T_WHITESPACE"," ",174],["T_AS","as",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$rawPrice",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$sku",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","retrieveSkuById",175],"(",["T_VARIABLE","$rawPrice",175],"[",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","tierPricePersistence",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getEntityLinkField",175],"(",")","]",",",["T_WHITESPACE"," ",175],["T_VARIABLE","$skus",175],")",";",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$prices",176],"[","]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","tierPriceFactory",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","create",176],"(",["T_VARIABLE","$rawPrice",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$sku",176],")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n\n        ",177],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$prices",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Retrieve formatted prices.\n     *\n     * @param array $prices\n     * @return array\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PRIVATE","private",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","retrieveFormattedPrices",188],"(",["T_ARRAY","array",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$prices",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$formattedPrices",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],"[","]",";",["T_WHITESPACE","\n\n        ",190],["T_FOREACH","foreach",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$prices",192],["T_WHITESPACE"," ",192],["T_AS","as",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$price",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$idsBySku",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","productIdLocator",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","retrieveProductIdsBySkus",193],"(","[",["T_VARIABLE","$price",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getSku",193],"(",")","]",")",";",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$ids",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","array_keys",194],"(",["T_VARIABLE","$idsBySku",194],"[",["T_VARIABLE","$price",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getSku",194],"(",")","]",")",";",["T_WHITESPACE","\n            ",194],["T_FOREACH","foreach",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$ids",195],["T_WHITESPACE"," ",195],["T_AS","as",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$id",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$formattedPrices",196],"[","]",["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","tierPriceFactory",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","createSkeleton",196],"(",["T_VARIABLE","$price",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$id",196],")",";",["T_WHITESPACE","\n            ",196],"}",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$formattedPrices",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Retrieve affected product IDs for prices.\n     *\n     * @param TierPriceInterface[] $prices\n     * @return array\n     *\/",203],["T_WHITESPACE","\n    ",208],["T_PRIVATE","private",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","retrieveAffectedProductIdsForPrices",209],"(",["T_ARRAY","array",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$prices",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$skus",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","array_unique",211],"(",["T_WHITESPACE","\n            ",211],["T_STRING","array_map",212],"(",["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$price",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$price",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getSku",213],"(",")",";",["T_WHITESPACE","\n            ",213],"}",",",["T_WHITESPACE"," ",214],["T_VARIABLE","$prices",214],")",["T_WHITESPACE","\n        ",214],")",";",["T_WHITESPACE","\n\n        ",215],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","retrieveAffectedIds",217],"(",["T_VARIABLE","$skus",217],")",";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Retrieve affected product IDs.\n     *\n     * @param array $skus\n     * @return array\n     *\/",220],["T_WHITESPACE","\n    ",225],["T_PRIVATE","private",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","retrieveAffectedIds",226],"(",["T_ARRAY","array",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$skus",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$affectedIds",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],"[","]",";",["T_WHITESPACE","\n\n        ",228],["T_FOREACH","foreach",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","productIdLocator",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","retrieveProductIdsBySkus",230],"(",["T_VARIABLE","$skus",230],")",["T_WHITESPACE"," ",230],["T_AS","as",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$productId",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$affectedIds",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","array_merge",231],"(",["T_VARIABLE","$affectedIds",231],",",["T_WHITESPACE"," ",231],["T_STRING","array_keys",231],"(",["T_VARIABLE","$productId",231],")",")",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n\n        ",232],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_STRING","array_unique",234],"(",["T_VARIABLE","$affectedIds",234],")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Retrieve affected price IDs.\n     *\n     * @param array $prices\n     * @return array\n     *\/",237],["T_WHITESPACE","\n    ",242],["T_PRIVATE","private",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","retrieveAffectedPriceIds",243],"(",["T_ARRAY","array",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$prices",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$affectedIds",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","retrieveAffectedProductIdsForPrices",245],"(",["T_VARIABLE","$prices",245],")",";",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$formattedPrices",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","retrieveFormattedPrices",246],"(",["T_VARIABLE","$prices",246],")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$existingPrices",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","tierPricePersistence",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","get",247],"(",["T_VARIABLE","$affectedIds",247],")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$priceIds",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],"[","]",";",["T_WHITESPACE","\n\n        ",248],["T_FOREACH","foreach",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$formattedPrices",250],["T_WHITESPACE"," ",250],["T_AS","as",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$price",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$priceIds",251],"[","]",["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","retrievePriceId",251],"(",["T_VARIABLE","$price",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$existingPrices",251],")",";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n\n        ",252],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$priceIds",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Look through provided price in list of existing prices and retrieve it's Id.\n     *\n     * @param array $price\n     * @param array $existingPrices\n     * @return int|null\n     *\/",257],["T_WHITESPACE","\n    ",263],["T_PRIVATE","private",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","retrievePriceId",264],"(",["T_ARRAY","array",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$price",264],",",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$existingPrices",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$linkField",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","tierPricePersistence",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getEntityLinkField",266],"(",")",";",["T_WHITESPACE","\n\n        ",266],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$existingPrices",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$existingPrice",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$existingPrice",269],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",269],"]",["T_WHITESPACE"," ",269],["T_IS_EQUAL","==",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$price",269],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",269],"]",["T_WHITESPACE","\n                ",269],["T_BOOLEAN_AND","&&",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$existingPrice",270],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",270],"]",["T_WHITESPACE"," ",270],["T_IS_EQUAL","==",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$price",270],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",270],"]",["T_WHITESPACE","\n                ",270],["T_BOOLEAN_AND","&&",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$existingPrice",271],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",271],"]",["T_WHITESPACE"," ",271],["T_IS_EQUAL","==",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$price",271],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",271],"]",["T_WHITESPACE","\n                ",271],["T_BOOLEAN_AND","&&",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","isCorrectPriceValue",272],"(",["T_VARIABLE","$existingPrice",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$price",272],")",["T_WHITESPACE","\n                ",272],["T_BOOLEAN_AND","&&",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$existingPrice",273],"[",["T_VARIABLE","$linkField",273],"]",["T_WHITESPACE"," ",273],["T_IS_EQUAL","==",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$price",273],"[",["T_VARIABLE","$linkField",273],"]",["T_WHITESPACE","\n            ",273],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$existingPrice",275],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",275],"]",";",["T_WHITESPACE","\n            ",275],"}",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_STRING","null",279],";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_DOC_COMMENT","\/**\n     * Check that price value or price percentage value is not equal to 0 and is not similar with existing value.\n     *\n     * @param array $existingPrice\n     * @param array $price\n     * @return bool\n     *\/",282],["T_WHITESPACE","\n    ",288],["T_PRIVATE","private",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","isCorrectPriceValue",289],"(",["T_ARRAY","array",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$existingPrice",289],",",["T_WHITESPACE"," ",289],["T_ARRAY","array",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$price",289],")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$existingPrice",291],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",291],"]",["T_WHITESPACE"," ",291],["T_IS_NOT_EQUAL","!=",291],["T_WHITESPACE"," ",291],["T_LNUMBER","0",291],["T_WHITESPACE"," ",291],["T_BOOLEAN_AND","&&",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$existingPrice",291],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",291],"]",["T_WHITESPACE"," ",291],["T_IS_EQUAL","==",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$price",291],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",291],"]",")",["T_WHITESPACE","\n            ",291],["T_BOOLEAN_OR","||",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$existingPrice",292],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",292],"]",["T_WHITESPACE"," ",292],["T_IS_NOT_IDENTICAL","!==",292],["T_WHITESPACE"," ",292],["T_STRING","null",292],["T_WHITESPACE","\n                ",292],["T_BOOLEAN_AND","&&",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$existingPrice",293],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",293],"]",["T_WHITESPACE"," ",293],["T_IS_EQUAL","==",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$price",293],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage_value'",293],"]",")",";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * Retrieve SKU by product ID.\n     *\n     * @param int $id\n     * @param array $skus\n     * @return int|null\n     *\/",296],["T_WHITESPACE","\n    ",302],["T_PRIVATE","private",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","retrieveSkuById",303],"(",["T_VARIABLE","$id",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$skus",303],")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_FOREACH","foreach",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","productIdLocator",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","retrieveProductIdsBySkus",305],"(",["T_VARIABLE","$skus",305],")",["T_WHITESPACE"," ",305],["T_AS","as",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$sku",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$ids",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_STRING","false",306],["T_WHITESPACE"," ",306],["T_IS_NOT_IDENTICAL","!==",306],["T_WHITESPACE"," ",306],["T_STRING","array_key_exists",306],"(",["T_VARIABLE","$id",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$ids",306],")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                ",306],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$sku",307],";",["T_WHITESPACE","\n            ",307],"}",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n\n        ",309],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_STRING","null",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Invalidate full page cache.\n     *\n     * @return void\n     *\/",314],["T_WHITESPACE","\n    ",318],["T_PRIVATE","private",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","invalidateFullPageCache",319],"(",")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","config",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","isEnabled",321],"(",")",")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","typeList",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","invalidate",322],"(",["T_CONSTANT_ENCAPSED_STRING","'full_page'",322],")",";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_DOC_COMMENT","\/**\n     * Reindex prices.\n     *\n     * @param array $ids\n     * @return void\n     *\/",326],["T_WHITESPACE","\n    ",331],["T_PRIVATE","private",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","reindexPrices",332],"(",["T_ARRAY","array",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$ids",332],")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_FOREACH","foreach",334],["T_WHITESPACE"," ",334],"(",["T_STRING","array_chunk",334],"(",["T_VARIABLE","$ids",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","indexerChunkValue",334],")",["T_WHITESPACE"," ",334],["T_AS","as",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$affectedIds",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n            ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","priceIndexer",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","execute",335],"(",["T_VARIABLE","$affectedIds",335],")",";",["T_WHITESPACE","\n        ",335],"}",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n\n    ",337],["T_DOC_COMMENT","\/**\n     * Remove prices from price list by id list.\n     *\n     * @param array $prices\n     * @param array $ids\n     * @return array\n     *\/",339],["T_WHITESPACE","\n    ",345],["T_PRIVATE","private",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","removeIncorrectPrices",346],"(",["T_ARRAY","array",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$prices",346],",",["T_WHITESPACE"," ",346],["T_ARRAY","array",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$ids",346],")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_FOREACH","foreach",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$ids",348],["T_WHITESPACE"," ",348],["T_AS","as",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$id",348],")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_UNSET","unset",349],"(",["T_VARIABLE","$prices",349],"[",["T_VARIABLE","$id",349],"]",")",";",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE","\n\n        ",350],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$prices",352],";",["T_WHITESPACE","\n    ",352],"}",["T_WHITESPACE","\n",353],"}",["T_WHITESPACE","\n",354]]